{"items":[{"tags":["java","spring-boot","maven","build"],"comments":[{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1671886792,"post_id":74907489,"comment_id":132192654,"body_markdown":"Do you have the same problem with a freshly downloaded and unzipped maven?","body":"Do you have the same problem with a freshly downloaded and unzipped maven?"},{"owner":{"account_id":24766666,"reputation":193,"user_id":18650474,"display_name":"Peek0"},"score":0,"creation_date":1671889229,"post_id":74907489,"comment_id":132193005,"body_markdown":"I have redownloaded and changed `maven` and the problem still persists. I am a bit unsure how I got `maven` inside the `Spring` application because I used the initializer. Currently looking into how to install `maven` inside an existing `Spring` application.","body":"I have redownloaded and changed <code>maven</code> and the problem still persists. I am a bit unsure how I got <code>maven</code> inside the <code>Spring</code> application because I used the initializer. Currently looking into how to install <code>maven</code> inside an existing <code>Spring</code> application."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1671895872,"post_id":74907489,"comment_id":132194166,"body_markdown":"The spring initializr put the wrapper inside your project and is correctly configured ... can you show a link on your project or make that project on Github or alike?","body":"The spring initializr put the wrapper inside your project and is correctly configured ... can you show a link on your project or make that project on Github or alike?"},{"owner":{"account_id":24766666,"reputation":193,"user_id":18650474,"display_name":"Peek0"},"score":0,"creation_date":1671934181,"post_id":74907489,"comment_id":132199042,"body_markdown":"This is my project on (**Github**) [https://github.com/peek00/java-spring-boot]! Do help me take a look if there are any issues. Really appreciate it.","body":"This is my project on (<b>Github</b>) [<a href=\"https://github.com/peek00/java-spring-boot]\" rel=\"nofollow noreferrer\">github.com/peek00/java-spring-boot]</a>! Do help me take a look if there are any issues. Really appreciate it."}],"owner":{"account_id":24766666,"reputation":193,"user_id":18650474,"display_name":"Peek0"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":709,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671883076,"creation_date":1671883076,"question_id":74907489,"body_markdown":"When attempting to use `maven&#39;s clean` or `install` function on a **SpringBoot Java** program, I ran into the following error (Full error at the bottom). The main issue appears to be what I have highlighted below. \r\n\r\n```\r\nThe system cannot find the file D:\\01. GitHub\\springBootTutorial\\.mvn\\wrapper\\maven-wrapper.properties.\r\n```\r\nCurrently, I have verified that the file exists and these are the contents (unchanged from creation). The error pops up when I attempt to do other actions like `install`, `test`.\r\n\r\n**maven-wrapper.properties**\r\n```\r\ndistributionUrl=https://repo.maven.apache.org/maven2/org/apache/maven/apache-maven/3.8.6/apache-maven-3.8.6-bin.zip\r\nwrapperUrl=https://repo.maven.apache.org/maven2/org/apache/maven/wrapper/maven-wrapper/3.1.0/maven-wrapper-3.1.0.jar\r\n```\r\n\r\nI believe this is something to do with filepath, currently when I execute the `clean` command by clicking on the button inside `VSCode`, I am in `D:\\01. GitHub\\springBootTutorial&gt;` which seems to work when running the `Java` program. I have ensured that `Maven` is indeed installed with `mvn -v` which returns the version I have. \r\n\r\nDo let me know how I can begin troubleshooting this! \r\n\r\n\r\n**Full error**\r\n```\r\nD:\\01. GitHub\\springBootTutorial&gt;&quot;d:\\01. GitHub\\springBootTutorial\\demo\\mvnw.cmd&quot; install -f &quot;d:\\01. GitHub\\springBootTutorial\\demo\\pom.xml&quot; \r\nThe system cannot find the file D:\\01. GitHub\\springBootTutorial\\.mvn\\wrapper\\maven-wrapper.properties.\r\nException calling &quot;DownloadFile&quot; with &quot;2&quot; argument(s): &quot;An exception occurred during a WebClient request.&quot;\r\nAt line:1 char:282\r\n+ ... pe]::Tls12; $webclient.DownloadFile(&#39;https://repo.maven.apache.org/ma ...\r\n+                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException\r\n    + FullyQualifiedErrorId : WebException\r\n \r\nError: Could not find or load main class org.apache.maven.wrapper.MavenWrapperMain\r\nCaused by: java.lang.ClassNotFoundException: org.apache.maven.wrapper.MavenWrapperMain\r\n```","title":"System cannot find org.apache.maven.wrapper.MavenWrapperMain which exists","body":"<p>When attempting to use <code>maven's clean</code> or <code>install</code> function on a <strong>SpringBoot Java</strong> program, I ran into the following error (Full error at the bottom). The main issue appears to be what I have highlighted below.</p>\n<pre><code>The system cannot find the file D:\\01. GitHub\\springBootTutorial\\.mvn\\wrapper\\maven-wrapper.properties.\n</code></pre>\n<p>Currently, I have verified that the file exists and these are the contents (unchanged from creation). The error pops up when I attempt to do other actions like <code>install</code>, <code>test</code>.</p>\n<p><strong>maven-wrapper.properties</strong></p>\n<pre><code>distributionUrl=https://repo.maven.apache.org/maven2/org/apache/maven/apache-maven/3.8.6/apache-maven-3.8.6-bin.zip\nwrapperUrl=https://repo.maven.apache.org/maven2/org/apache/maven/wrapper/maven-wrapper/3.1.0/maven-wrapper-3.1.0.jar\n</code></pre>\n<p>I believe this is something to do with filepath, currently when I execute the <code>clean</code> command by clicking on the button inside <code>VSCode</code>, I am in <code>D:\\01. GitHub\\springBootTutorial&gt;</code> which seems to work when running the <code>Java</code> program. I have ensured that <code>Maven</code> is indeed installed with <code>mvn -v</code> which returns the version I have.</p>\n<p>Do let me know how I can begin troubleshooting this!</p>\n<p><strong>Full error</strong></p>\n<pre><code>D:\\01. GitHub\\springBootTutorial&gt;&quot;d:\\01. GitHub\\springBootTutorial\\demo\\mvnw.cmd&quot; install -f &quot;d:\\01. GitHub\\springBootTutorial\\demo\\pom.xml&quot; \nThe system cannot find the file D:\\01. GitHub\\springBootTutorial\\.mvn\\wrapper\\maven-wrapper.properties.\nException calling &quot;DownloadFile&quot; with &quot;2&quot; argument(s): &quot;An exception occurred during a WebClient request.&quot;\nAt line:1 char:282\n+ ... pe]::Tls12; $webclient.DownloadFile('https://repo.maven.apache.org/ma ...\n+                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException\n    + FullyQualifiedErrorId : WebException\n \nError: Could not find or load main class org.apache.maven.wrapper.MavenWrapperMain\nCaused by: java.lang.ClassNotFoundException: org.apache.maven.wrapper.MavenWrapperMain\n</code></pre>\n"},{"tags":["java","spring","logging","logback","appender"],"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1671900854,"post_id":74907430,"comment_id":132195043,"body_markdown":"A file appender is linked to a file. If you want multiple files, you need multiple appenders. That means that your need (&quot;define the log file&#39;s name per logger without having to create a file appender for each logger&quot;) simply isn&#39;t possible. Why don&#39;t you want to create multiple appenders? I mean, it&#39;s only 5 lines of code, and you even reuse the pattern.","body":"A file appender is linked to a file. If you want multiple files, you need multiple appenders. That means that your need (&quot;define the log file&#39;s name per logger without having to create a file appender for each logger&quot;) simply isn&#39;t possible. Why don&#39;t you want to create multiple appenders? I mean, it&#39;s only 5 lines of code, and you even reuse the pattern."},{"owner":{"account_id":7163942,"reputation":16,"user_id":15534394,"display_name":"Elad Moshe"},"score":0,"creation_date":1671901349,"post_id":74907430,"comment_id":132195120,"body_markdown":"Well that&#39;s what I did eventually but it seemed like there would be a better option cause it&#39;s like repeated code. Each of these appenders is doing (almost) exactly the same thing with the only difference being the log file&#39;s name. In my case there are only 3 (almost) identical appenders that I have to add but what if there were 20?","body":"Well that&#39;s what I did eventually but it seemed like there would be a better option cause it&#39;s like repeated code. Each of these appenders is doing (almost) exactly the same thing with the only difference being the log file&#39;s name. In my case there are only 3 (almost) identical appenders that I have to add but what if there were 20?"},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1671901666,"post_id":74907430,"comment_id":132195184,"body_markdown":"If those 20 loggers would need 20 different files, then you&#39;d have to use 20 different appenders. One other option would be to create your own appender, that would delegate to these other appenders internally. Less code in your logging config, but you would need to create that class yourself.","body":"If those 20 loggers would need 20 different files, then you&#39;d have to use 20 different appenders. One other option would be to create your own appender, that would delegate to these other appenders internally. Less code in your logging config, but you would need to create that class yourself."}],"owner":{"account_id":7163942,"reputation":16,"user_id":15534394,"display_name":"Elad Moshe"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671882603,"creation_date":1671882525,"question_id":74907430,"body_markdown":"I want to have several loggers that are using the same file appender.\r\nI want each log file to have its own specific name that I define (such as requests.log...).\r\nHow can I define the log file&#39;s name per logger without having to create a file appender for each logger?\r\n\r\nThis is what my logback-spring.xml looks like right now:\r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;configuration&gt;\r\n\r\n    &lt;property name=&quot;pattern&quot; value=&quot;%d{dd-MM-yyyy HH:mm:ss.SSS} %-5level: %msg | request #%X{requestNumber}%n&quot; /&gt;\r\n\r\n    &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n        &lt;encoder&gt;\r\n            &lt;pattern&gt;${pattern}&lt;/pattern&gt;\r\n        &lt;/encoder&gt;\r\n    &lt;/appender&gt;\r\n\r\n    &lt;appender name=&quot;FILE&quot; class=&quot;ch.qos.logback.core.FileAppender&quot;&gt;\r\n        &lt;encoder&gt;\r\n            &lt;pattern&gt;${pattern}&lt;/pattern&gt;\r\n        &lt;/encoder&gt;\r\n    &lt;/appender&gt;\r\n\r\n    &lt;logger name=&quot;request-logger&quot;&gt;\r\n        &lt;appender-ref ref=&quot;STDOUT&quot;/&gt;\r\n        &lt;appender-ref ref=&quot;FILE&quot;/&gt;\r\n    &lt;/logger&gt;\r\n&lt;/configuration&gt;\r\n```\r\n","title":"How do I set the name of the log file per logger but with the same appender?","body":"<p>I want to have several loggers that are using the same file appender.\nI want each log file to have its own specific name that I define (such as requests.log...).\nHow can I define the log file's name per logger without having to create a file appender for each logger?</p>\n<p>This is what my logback-spring.xml looks like right now:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;configuration&gt;\n\n    &lt;property name=&quot;pattern&quot; value=&quot;%d{dd-MM-yyyy HH:mm:ss.SSS} %-5level: %msg | request #%X{requestNumber}%n&quot; /&gt;\n\n    &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n        &lt;encoder&gt;\n            &lt;pattern&gt;${pattern}&lt;/pattern&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n\n    &lt;appender name=&quot;FILE&quot; class=&quot;ch.qos.logback.core.FileAppender&quot;&gt;\n        &lt;encoder&gt;\n            &lt;pattern&gt;${pattern}&lt;/pattern&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n\n    &lt;logger name=&quot;request-logger&quot;&gt;\n        &lt;appender-ref ref=&quot;STDOUT&quot;/&gt;\n        &lt;appender-ref ref=&quot;FILE&quot;/&gt;\n    &lt;/logger&gt;\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":["java","amazon-s3","google-cloud-dataflow","apache-beam"],"comments":[{"owner":{"account_id":27307430,"reputation":117,"user_id":20823153,"display_name":"itshagunrathore"},"score":0,"creation_date":1671880630,"post_id":74907250,"comment_id":132191771,"body_markdown":"Have you tried FileIO.write()?","body":"Have you tried FileIO.write()?"},{"owner":{"account_id":1874246,"reputation":1390,"user_id":1695821,"display_name":"Bruno Volpato"},"score":0,"creation_date":1671982302,"post_id":74907250,"comment_id":132203928,"body_markdown":"Sounds like there is some dependency / JAR issues. Have you imported the same version of Beam components across the project?","body":"Sounds like there is some dependency / JAR issues. Have you imported the same version of Beam components across the project?"}],"answers":[{"tags":[],"owner":{"account_id":27307430,"reputation":117,"user_id":20823153,"display_name":"itshagunrathore"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671880802,"creation_date":1671880802,"answer_id":74907288,"question_id":74907250,"body_markdown":"Try updating your pipeline... by default **withNumShards()** is set to zero, so it will write to a single file\r\n\r\n    pipeline\r\n            .apply(&quot;New&quot;,\r\n                    Create.of(&quot;Hello World!!&quot;)\r\n            )\r\n            .apply(\r\n                    &quot;Write to S3&quot;,\r\n                    TextIO.write()\r\n                            .to(&quot;s3://my-bucket/test.txt&quot;)\r\n                            .withNumShards(1)\r\n                            .withTempDirectory(outputDir)\r\n            );\r\n\r\n","title":"Error writing to S3 using TextIO.write() (Google Dataflow)","body":"<p>Try updating your pipeline... by default <strong>withNumShards()</strong> is set to zero, so it will write to a single file</p>\n<pre><code>pipeline\n        .apply(&quot;New&quot;,\n                Create.of(&quot;Hello World!!&quot;)\n        )\n        .apply(\n                &quot;Write to S3&quot;,\n                TextIO.write()\n                        .to(&quot;s3://my-bucket/test.txt&quot;)\n                        .withNumShards(1)\n                        .withTempDirectory(outputDir)\n        );\n</code></pre>\n"}],"owner":{"account_id":5888596,"reputation":2185,"user_id":4635851,"accept_rate":74,"display_name":"Shahid Thaika"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":252,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1671882179,"creation_date":1671880453,"question_id":74907250,"body_markdown":"I have a Google Dataflow code similar to the below\r\n\r\n```\r\nimport org.apache.beam.sdk.Pipeline;\r\nimport org.apache.beam.sdk.io.FileSystems;\r\nimport org.apache.beam.sdk.io.TextIO;\r\nimport org.apache.beam.sdk.io.fs.ResourceId;\r\nimport org.apache.beam.sdk.options.*;\r\nimport org.apache.beam.sdk.transforms.Create;\r\n\r\npublic class S3Test {\r\n\r\n    public static void main(String[] args) {\r\n        PipelineOptions options = PipelineOptionsFactory.fromArgs(args).withValidation().create();\r\n        Pipeline pipeline = Pipeline.create(options);\r\n\r\n        ResourceId outputDir = FileSystems.matchNewResource(&quot;s3://my-bucket/temp/&quot;, true);\r\n\r\n        pipeline\r\n                .apply(&quot;New&quot;,\r\n                        Create.of(&quot;Hello World!!&quot;)\r\n                )\r\n                .apply(\r\n                        &quot;Write to S3&quot;,\r\n                        TextIO.write()\r\n                                .to(&quot;s3://my-bucket/test.txt&quot;)\r\n                                .withoutSharding()\r\n                                .withTempDirectory(outputDir)\r\n                );\r\n\r\n        pipeline.run();\r\n    }\r\n}\r\n```\r\n\r\nThis works to some extent, in that it first creates a temporary file on my S3 bucket. However, when it tries to rename it to my final desired/input filename, it throws the following error.\r\n\r\n&gt; Receiver class org.apache.beam.sdk.io.aws.s3.S3FileSystem does not\r\n&gt; define or inherit an implementation of the resolved method &#39;abstract\r\n&gt; void rename(java.util.List, java.util.List,\r\n&gt; org.apache.beam.sdk.io.fs.MoveOptions[])&#39; of abstract class\r\n&gt; org.apache.beam.sdk.io.FileSystem.\r\n\r\nI guess I have to override or implement a rename() function, but not sure where I&#39;d start on that.\r\n\r\nHas anyone tried to write successfully to S3 using TextIO.write()?\r\n\r\nEDIT:\r\n\r\nBelow is the full message in the Run window:\r\n\r\n&gt; Dec 24, 2022 4:56:34 PM\r\n&gt; org.apache.beam.sdk.io.WriteFiles$WriteShardsIntoTempFilesFn\r\n&gt; processElement INFO: Opening writer\r\n&gt; 8a0dbf70-a0fc-48dd-92f9-8ff4000a8076 for window\r\n&gt; org.apache.beam.sdk.transforms.windowing.GlobalWindow@2dddc1b9 pane\r\n&gt; PaneInfo{isFirst=true, isLast=true, timing=ON_TIME, index=0,\r\n&gt; onTimeIndex=0} destination null Dec 24, 2022 4:56:37 PM\r\n&gt; org.apache.beam.sdk.io.FileBasedSink$Writer close INFO: Successfully\r\n&gt; wrote temporary file\r\n&gt; s3://my-bucket/temp/.temp-beam-13da7e3e-15a9-4285-a90c-30c7c6dcfe99/9e53ec6a8a0dbf70-a0fc-48dd-92f9-8ff4000a8076\r\n&gt; Dec 24, 2022 4:56:37 PM\r\n&gt; org.apache.beam.sdk.io.WriteFiles$FinalizeTempFileBundles$FinalizeFn\r\n&gt; process INFO: Finalizing 1 file results Dec 24, 2022 4:56:37 PM\r\n&gt; org.apache.beam.sdk.io.FileBasedSink$WriteOperation\r\n&gt; createMissingEmptyShards INFO: Finalizing for destination null num\r\n&gt; shards 1. Dec 24, 2022 4:56:37 PM\r\n&gt; org.apache.beam.sdk.io.FileBasedSink$WriteOperation moveToOutputFiles\r\n&gt; INFO: Will copy temporary file\r\n&gt; FileResult{tempFilename=s3://my-bucket/temp/.temp-beam-13da7e3e-15a9-4285-a90c-30c7c6dcfe99/9e53ec6a8a0dbf70-a0fc-48dd-92f9-8ff4000a8076,\r\n&gt; shard=0,\r\n&gt; window=org.apache.beam.sdk.transforms.windowing.GlobalWindow@2dddc1b9,\r\n&gt; paneInfo=PaneInfo{isFirst=true, isLast=true, timing=ON_TIME, index=0,\r\n&gt; onTimeIndex=0}} to final location s3://my-bucket/test.txt Exception in\r\n&gt; thread &quot;main&quot; org.apache.beam.sdk.Pipeline$PipelineExecutionException:\r\n&gt; java.lang.AbstractMethodError: Receiver class\r\n&gt; org.apache.beam.sdk.io.aws.s3.S3FileSystem does not define or inherit\r\n&gt; an implementation of the resolved method &#39;abstract void\r\n&gt; rename(java.util.List, java.util.List,\r\n&gt; org.apache.beam.sdk.io.fs.MoveOptions[])&#39; of abstract class\r\n&gt; org.apache.beam.sdk.io.FileSystem. \tat\r\n&gt; org.apache.beam.runners.direct.DirectRunner$DirectPipelineResult.waitUntilFinish(DirectRunner.java:374)\r\n&gt; \tat\r\n&gt; org.apache.beam.runners.direct.DirectRunner$DirectPipelineResult.waitUntilFinish(DirectRunner.java:342)\r\n&gt; \tat\r\n&gt; org.apache.beam.runners.direct.DirectRunner.run(DirectRunner.java:218)\r\n&gt; \tat\r\n&gt; org.apache.beam.runners.direct.DirectRunner.run(DirectRunner.java:67)\r\n&gt; \tat org.apache.beam.sdk.Pipeline.run(Pipeline.java:323) \tat\r\n&gt; org.apache.beam.sdk.Pipeline.run(Pipeline.java:309) \tat\r\n&gt; com.example.S3Test.main(S3Test.java:255) Caused by:\r\n&gt; java.lang.AbstractMethodError: Receiver class\r\n&gt; org.apache.beam.sdk.io.aws.s3.S3FileSystem does not define or inherit\r\n&gt; an implementation of the resolved method &#39;abstract void\r\n&gt; rename(java.util.List, java.util.List,\r\n&gt; org.apache.beam.sdk.io.fs.MoveOptions[])&#39; of abstract class\r\n&gt; org.apache.beam.sdk.io.FileSystem. \tat\r\n&gt; org.apache.beam.sdk.io.FileSystems.renameInternal(FileSystems.java:323)\r\n&gt; \tat org.apache.beam.sdk.io.FileSystems.rename(FileSystems.java:308)\r\n&gt; \tat\r\n&gt; org.apache.beam.sdk.io.FileBasedSink$WriteOperation.moveToOutputFiles(FileBasedSink.java:802)\r\n&gt; \tat\r\n&gt; org.apache.beam.sdk.io.WriteFiles$FinalizeTempFileBundles$FinalizeFn.process(WriteFiles.java:1077)","title":"Error writing to S3 using TextIO.write() (Google Dataflow)","body":"<p>I have a Google Dataflow code similar to the below</p>\n<pre><code>import org.apache.beam.sdk.Pipeline;\nimport org.apache.beam.sdk.io.FileSystems;\nimport org.apache.beam.sdk.io.TextIO;\nimport org.apache.beam.sdk.io.fs.ResourceId;\nimport org.apache.beam.sdk.options.*;\nimport org.apache.beam.sdk.transforms.Create;\n\npublic class S3Test {\n\n    public static void main(String[] args) {\n        PipelineOptions options = PipelineOptionsFactory.fromArgs(args).withValidation().create();\n        Pipeline pipeline = Pipeline.create(options);\n\n        ResourceId outputDir = FileSystems.matchNewResource(&quot;s3://my-bucket/temp/&quot;, true);\n\n        pipeline\n                .apply(&quot;New&quot;,\n                        Create.of(&quot;Hello World!!&quot;)\n                )\n                .apply(\n                        &quot;Write to S3&quot;,\n                        TextIO.write()\n                                .to(&quot;s3://my-bucket/test.txt&quot;)\n                                .withoutSharding()\n                                .withTempDirectory(outputDir)\n                );\n\n        pipeline.run();\n    }\n}\n</code></pre>\n<p>This works to some extent, in that it first creates a temporary file on my S3 bucket. However, when it tries to rename it to my final desired/input filename, it throws the following error.</p>\n<blockquote>\n<p>Receiver class org.apache.beam.sdk.io.aws.s3.S3FileSystem does not\ndefine or inherit an implementation of the resolved method 'abstract\nvoid rename(java.util.List, java.util.List,\norg.apache.beam.sdk.io.fs.MoveOptions[])' of abstract class\norg.apache.beam.sdk.io.FileSystem.</p>\n</blockquote>\n<p>I guess I have to override or implement a rename() function, but not sure where I'd start on that.</p>\n<p>Has anyone tried to write successfully to S3 using TextIO.write()?</p>\n<p>EDIT:</p>\n<p>Below is the full message in the Run window:</p>\n<blockquote>\n<p>Dec 24, 2022 4:56:34 PM\norg.apache.beam.sdk.io.WriteFiles$WriteShardsIntoTempFilesFn\nprocessElement INFO: Opening writer\n8a0dbf70-a0fc-48dd-92f9-8ff4000a8076 for window\norg.apache.beam.sdk.transforms.windowing.GlobalWindow@2dddc1b9 pane\nPaneInfo{isFirst=true, isLast=true, timing=ON_TIME, index=0,\nonTimeIndex=0} destination null Dec 24, 2022 4:56:37 PM\norg.apache.beam.sdk.io.FileBasedSink$Writer close INFO: Successfully\nwrote temporary file\ns3://my-bucket/temp/.temp-beam-13da7e3e-15a9-4285-a90c-30c7c6dcfe99/9e53ec6a8a0dbf70-a0fc-48dd-92f9-8ff4000a8076\nDec 24, 2022 4:56:37 PM\norg.apache.beam.sdk.io.WriteFiles$FinalizeTempFileBundles$FinalizeFn\nprocess INFO: Finalizing 1 file results Dec 24, 2022 4:56:37 PM\norg.apache.beam.sdk.io.FileBasedSink$WriteOperation\ncreateMissingEmptyShards INFO: Finalizing for destination null num\nshards 1. Dec 24, 2022 4:56:37 PM\norg.apache.beam.sdk.io.FileBasedSink$WriteOperation moveToOutputFiles\nINFO: Will copy temporary file\nFileResult{tempFilename=s3://my-bucket/temp/.temp-beam-13da7e3e-15a9-4285-a90c-30c7c6dcfe99/9e53ec6a8a0dbf70-a0fc-48dd-92f9-8ff4000a8076,\nshard=0,\nwindow=org.apache.beam.sdk.transforms.windowing.GlobalWindow@2dddc1b9,\npaneInfo=PaneInfo{isFirst=true, isLast=true, timing=ON_TIME, index=0,\nonTimeIndex=0}} to final location s3://my-bucket/test.txt Exception in\nthread &quot;main&quot; org.apache.beam.sdk.Pipeline$PipelineExecutionException:\njava.lang.AbstractMethodError: Receiver class\norg.apache.beam.sdk.io.aws.s3.S3FileSystem does not define or inherit\nan implementation of the resolved method 'abstract void\nrename(java.util.List, java.util.List,\norg.apache.beam.sdk.io.fs.MoveOptions[])' of abstract class\norg.apache.beam.sdk.io.FileSystem.    at\norg.apache.beam.runners.direct.DirectRunner$DirectPipelineResult.waitUntilFinish(DirectRunner.java:374)\nat\norg.apache.beam.runners.direct.DirectRunner$DirectPipelineResult.waitUntilFinish(DirectRunner.java:342)\nat\norg.apache.beam.runners.direct.DirectRunner.run(DirectRunner.java:218)\nat\norg.apache.beam.runners.direct.DirectRunner.run(DirectRunner.java:67)\nat org.apache.beam.sdk.Pipeline.run(Pipeline.java:323)  at\norg.apache.beam.sdk.Pipeline.run(Pipeline.java:309)   at\ncom.example.S3Test.main(S3Test.java:255) Caused by:\njava.lang.AbstractMethodError: Receiver class\norg.apache.beam.sdk.io.aws.s3.S3FileSystem does not define or inherit\nan implementation of the resolved method 'abstract void\nrename(java.util.List, java.util.List,\norg.apache.beam.sdk.io.fs.MoveOptions[])' of abstract class\norg.apache.beam.sdk.io.FileSystem.    at\norg.apache.beam.sdk.io.FileSystems.renameInternal(FileSystems.java:323)\nat org.apache.beam.sdk.io.FileSystems.rename(FileSystems.java:308)\nat\norg.apache.beam.sdk.io.FileBasedSink$WriteOperation.moveToOutputFiles(FileBasedSink.java:802)\nat\norg.apache.beam.sdk.io.WriteFiles$FinalizeTempFileBundles$FinalizeFn.process(WriteFiles.java:1077)</p>\n</blockquote>\n"},{"tags":["java","file","txt"],"comments":[{"owner":{"account_id":20961162,"reputation":1462,"user_id":15400571,"display_name":"noah1400"},"score":0,"creation_date":1671844282,"post_id":74905058,"comment_id":132188256,"body_markdown":"Is the last code block the console output or the file content?","body":"Is the last code block the console output or the file content?"},{"owner":{"account_id":23659651,"reputation":104,"user_id":17687406,"display_name":"mi1000"},"score":0,"creation_date":1671844506,"post_id":74905058,"comment_id":132188272,"body_markdown":"It is the console output, the file content is the same except it doesn&#39;t have a question mark","body":"It is the console output, the file content is the same except it doesn&#39;t have a question mark"},{"owner":{"account_id":17872721,"reputation":41,"user_id":12983577,"display_name":"alphaBEE"},"score":1,"creation_date":1671851492,"post_id":74905058,"comment_id":132188830,"body_markdown":"you can&#39;t get rid of question mark at the beginning? and it only occurs once in the whole file? well that&#39;s clearly what&#39;s bothering sc.hasNextInt() since it&#39;s not int so it&#39;s false and breaks outta loop. If there&#39;s only once occurence of &quot;?&quot;, maybe handle it seperately before you regularly start taking input.","body":"you can&#39;t get rid of question mark at the beginning? and it only occurs once in the whole file? well that&#39;s clearly what&#39;s bothering sc.hasNextInt() since it&#39;s not int so it&#39;s false and breaks outta loop. If there&#39;s only once occurence of &quot;?&quot;, maybe handle it seperately before you regularly start taking input."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1671854488,"post_id":74905058,"comment_id":132189028,"body_markdown":"What do you mean &quot;the question mark doesn&#39;t appear anywhere in my file&quot;? You see it when you print the file as a string. (Please add the code you are using to do that)","body":"What do you mean &quot;the question mark doesn&#39;t appear anywhere in my file&quot;? You see it when you print the file as a string. (Please add the code you are using to do that)"},{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"score":2,"creation_date":1671857310,"post_id":74905058,"comment_id":132189220,"body_markdown":"Read up on [Byte Order Mark (BOM)](https://en.wikipedia.org/wiki/Byte_order_mark).","body":"Read up on <a href=\"https://en.wikipedia.org/wiki/Byte_order_mark\" rel=\"nofollow noreferrer\">Byte Order Mark (BOM)</a>."}],"answers":[{"tags":[],"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671865051,"creation_date":1671865051,"answer_id":74906073,"question_id":74905058,"body_markdown":"If the first character in the file is a question mark (**?**) and its original origin is unknown then it is usually the **UTF-8 [Byte Order Mark](https://en.wikipedia.org/wiki/Byte_order_mark)** (BOM). This means the file was saved as UTF-8. The Microsoft Notepad application will add a BOM to the saved text file if that file was saved in UTF-8 instead of ANSI. There are also other BOM characters for UTF-16, UTF-32, etc.\r\n\r\nReading a text file as String doesn&#39;t look like a bad idea now. Changing the save format of the file can work to but that BOM may have **actual** intended purpose for another application, so, that may not be a viable option. Let&#39;s read the file as String lines (read comments in code):\r\n\r\n    // Variable to hold the value of the UTF-8 BOM:\r\n    final String UTF8_BOM = &quot;\\uFEFF&quot;;\r\n    \r\n    // List to hold the Integer numbers in file.\r\n    List&lt;Integer&gt; listePops = new ArrayList&lt;&gt;();\r\n        \r\n    // &#39;Try With Resources&#39; used to to auto-close file and free resources.\r\n    try (Scanner reader = new Scanner(new File(&quot;data.txt&quot;))) {\r\n        String line;\r\n        int lineCount = 0;\r\n        while (reader.hasNextLine()) {\r\n            line = reader.nextLine();\r\n            line = line.trim();\r\n            // Skip blank lines (if any):\r\n            if (line.isEmpty()) {\r\n                continue; \r\n            }\r\n            lineCount++;\r\n            /* Is this the first line and is there a BOM at the \r\n               start of this line? If so, then remove it.    */\r\n            if (lineCount == 1 &amp;&amp; line.startsWith(UTF8_BOM)) {\r\n                line = line.substring(1);\r\n            }\r\n                \r\n            // Validate Line Data:\r\n            // Is the line a String representation of an Integer Number?\r\n            if (line.matches(&quot;\\\\d+&quot;)) {\r\n                // Yes... then convert that line to Integer and add it to the List.\r\n                listePops.add(Integer.parseInt(line));\r\n            }\r\n            // Move onto next file line...\r\n        }\r\n    }\r\n    catch (FileNotFoundException ex) {\r\n        // Do what you want with this exception (but don&#39;t ignore it):\r\n        System.err.println(ex.getMessage());\r\n    }\r\n        \r\n    // Display the gathered List contents:\r\n    for (Integer ints : listePops) {\r\n        System.out.println(ints);\r\n    }\r\n\r\n","title":"Can&#39;t read integer file","body":"<p>If the first character in the file is a question mark (<strong>?</strong>) and its original origin is unknown then it is usually the <strong>UTF-8 <a href=\"https://en.wikipedia.org/wiki/Byte_order_mark\" rel=\"nofollow noreferrer\">Byte Order Mark</a></strong> (BOM). This means the file was saved as UTF-8. The Microsoft Notepad application will add a BOM to the saved text file if that file was saved in UTF-8 instead of ANSI. There are also other BOM characters for UTF-16, UTF-32, etc.</p>\n<p>Reading a text file as String doesn't look like a bad idea now. Changing the save format of the file can work to but that BOM may have <strong>actual</strong> intended purpose for another application, so, that may not be a viable option. Let's read the file as String lines (read comments in code):</p>\n<pre><code>// Variable to hold the value of the UTF-8 BOM:\nfinal String UTF8_BOM = &quot;\\uFEFF&quot;;\n\n// List to hold the Integer numbers in file.\nList&lt;Integer&gt; listePops = new ArrayList&lt;&gt;();\n    \n// 'Try With Resources' used to to auto-close file and free resources.\ntry (Scanner reader = new Scanner(new File(&quot;data.txt&quot;))) {\n    String line;\n    int lineCount = 0;\n    while (reader.hasNextLine()) {\n        line = reader.nextLine();\n        line = line.trim();\n        // Skip blank lines (if any):\n        if (line.isEmpty()) {\n            continue; \n        }\n        lineCount++;\n        /* Is this the first line and is there a BOM at the \n           start of this line? If so, then remove it.    */\n        if (lineCount == 1 &amp;&amp; line.startsWith(UTF8_BOM)) {\n            line = line.substring(1);\n        }\n            \n        // Validate Line Data:\n        // Is the line a String representation of an Integer Number?\n        if (line.matches(&quot;\\\\d+&quot;)) {\n            // Yes... then convert that line to Integer and add it to the List.\n            listePops.add(Integer.parseInt(line));\n        }\n        // Move onto next file line...\n    }\n}\ncatch (FileNotFoundException ex) {\n    // Do what you want with this exception (but don't ignore it):\n    System.err.println(ex.getMessage());\n}\n    \n// Display the gathered List contents:\nfor (Integer ints : listePops) {\n    System.out.println(ints);\n}\n</code></pre>\n"}],"owner":{"account_id":23659651,"reputation":104,"user_id":17687406,"display_name":"mi1000"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74906073,"answer_count":1,"score":0,"last_activity_date":1671882092,"creation_date":1671844040,"question_id":74905058,"body_markdown":"I&#39;m trying to read data from a file that contains integers, but the Scanner doesn&#39;t read anything from that file.\r\n\r\nI&#39;ve tried to read the file from the `Scanner` :\r\n\r\n```\r\n// switch() blablabla \r\ncase POPULATION:\r\n\t\t\ttry {\r\n\t\t\t\twhile (sc.hasNextInt()) {\r\n\t\t\t\t\tthis.listePops.add(sc.nextInt());\r\n\t\t\t\t}\r\n\t\t\t} catch (Exception e) {\r\n\t\t\t\tSystem.err.println(&quot;~ERREUR~ : &quot; + e.getMessage());\r\n\t\t\t}\r\n\t\t\tbreak;\r\n```\r\nAnd if I try to print each `sc.nextInt()` to the console, it just prints a blank line and then stops.\r\nNow when I read the same file as a `String`:\r\n```\r\n?652432\r\n531345\r\n335975\r\n164308\r\n141220\r\n1094283\r\n328278\r\n270582\r\n// (Rest of the data)\r\n\r\n```\r\nSo, I guess it can&#39;t read the file as a list of integers since there&#39;s a question mark at the beginning, but the problem is that this question mark doesn&#39;t appear anywhere in my file, so I can&#39;t remove it. What am I supposed to do?\r\n","title":"Can&#39;t read integer file","body":"<p>I'm trying to read data from a file that contains integers, but the Scanner doesn't read anything from that file.</p>\n<p>I've tried to read the file from the <code>Scanner</code> :</p>\n<pre><code>// switch() blablabla \ncase POPULATION:\n            try {\n                while (sc.hasNextInt()) {\n                    this.listePops.add(sc.nextInt());\n                }\n            } catch (Exception e) {\n                System.err.println(&quot;~ERREUR~ : &quot; + e.getMessage());\n            }\n            break;\n</code></pre>\n<p>And if I try to print each <code>sc.nextInt()</code> to the console, it just prints a blank line and then stops.\nNow when I read the same file as a <code>String</code>:</p>\n<pre><code>?652432\n531345\n335975\n164308\n141220\n1094283\n328278\n270582\n// (Rest of the data)\n\n</code></pre>\n<p>So, I guess it can't read the file as a list of integers since there's a question mark at the beginning, but the problem is that this question mark doesn't appear anywhere in my file, so I can't remove it. What am I supposed to do?</p>\n"},{"tags":["java","frida"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1672051554,"post_id":74907394,"comment_id":132212703,"body_markdown":"If functions with multi-dimensional arrays as arguments are the only functions that don&#39;t work a bug in frida is possible. As you seem to have a test case I would recommend to open an issue at frida&#39;s github issue tracker and include the sample app you have created.","body":"If functions with multi-dimensional arrays as arguments are the only functions that don&#39;t work a bug in frida is possible. As you seem to have a test case I would recommend to open an issue at frida&#39;s github issue tracker and include the sample app you have created."}],"owner":{"account_id":25176435,"reputation":11,"user_id":19018551,"display_name":"mast313"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1671881991,"creation_date":1671881991,"question_id":74907394,"body_markdown":"I&#39;m building an in-process JNI library fuzzer using Frida and I think I got everything to work except for multidimensional arrays. \r\nWhen testing on Linux_64, I&#39;m not able to even create a valid hook for a function which takes multidimensional arrays. No matter what I try I&#39;m getting something like:\r\n\r\n\r\n&gt; Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: [L[I;\r\n&gt; at CallCrashingFun.crashingMethod_dbarr(Native Method)\r\n&gt; at CallCrashingFun.main(CallCrashingFun.java:100)\r\n&gt; Caused by: java.lang.ClassNotFoundException: [I\r\n&gt; at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\r\n&gt; at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\r\n&gt; at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\r\n\r\n\r\n\r\n\r\n\r\nMy hooking script looks similar to this:\r\n\r\n\r\n```\r\n\r\nvar t_class = Java.use(&quot;CallCrashingFun&quot;)\r\nvar method_name = &quot;crashingMethod_dbarr&quot;\r\nt_class[method_name].implementation = function(dbint) {\r\n\tconsole.log(&quot;Hook works!&quot;)\r\n}\r\n\r\n/* Also tried with params\r\nt_class[method_name].overload.apply(t_class[method_name], param_types).implementation = function(dbint) {\r\n\tconsole.log(&quot;Hook works!&quot;)\r\n}*/\r\n\t\r\n\r\n/* This however doesn&#39;t crash\r\nvar imp_cp = t_class[method_name].implementation\r\nt_class[method_name].implementation = imp_cp\r\n*/\r\n```\r\n\r\n\r\nThe Java code I use for tests:\r\n\r\n```\r\nSystem.loadLibrary(&quot;native&quot;);\r\nint arr[] = {2,2,2};\r\nint[][] dbarr = {arr};\r\nnew CallCrashingFun().crashingMethod_dbarr(dbarr);\r\nprivate native void crashingMethod_dbarr(int[][] dbarr);\r\n```\r\n\r\nThe JNI C++ code:\r\n\r\n\r\n```\r\nJNIEXPORT void JNICALL Java_CallCrashingFun_crashingMethod_1dbarr\r\n  (JNIEnv *env, jobject thisObject, jobjectArray dbtab) {\r\n      int i, j;\r\n      std::cout &lt;&lt; &quot;DbArray: &quot; &lt;&lt; &quot;[&quot; &lt;&lt; std::endl;\r\n      jsize len = (env)-&gt;GetArrayLength(dbtab);\r\n      for (i=0; i&lt;len; i++) {\r\n         std::cout &lt;&lt; &quot;[&quot;;\r\n          jintArray insArr = (jintArray) (env)-&gt;GetObjectArrayElement(dbtab, i);\r\n          jsize inlen = (env)-&gt;GetArrayLength(insArr);\r\n          jint *body = (env)-&gt;GetIntArrayElements(insArr, 0);\r\n          for (j=0; j&lt;inlen; j++) {\r\n            std::cout &lt;&lt; body[i] &lt;&lt; &quot;,&quot;;\r\n          }\r\n          std::cout &lt;&lt; &quot;]&quot; &lt;&lt; std::endl;\r\n      }\r\n      std::cout &lt;&lt; &quot;]&quot; &lt;&lt;  std::endl;\r\n  }\r\n```\r\n\r\n\r\nJava version that I&#39;m using:\r\n\r\n&gt; $ /usr/bin/java --version\r\n&gt; Picked up _JAVA_OPTIONS: -Dawt.useSystemAAFontSettings=on -Dswing.aatext=true\r\n&gt; openjdk 11.0.17 2022-10-18\r\n&gt; OpenJDK Runtime Environment Temurin-11.0.17+8 (build 11.0.17+8)\r\n&gt; OpenJDK 64-Bit Server VM Temurin-11.0.17+8 (build 11.0.17+8, mixed mode)\r\n\r\n\r\nFrida server version:\r\n\r\n&gt; frida-server-16.0.8-linux-x86_64\r\n\r\nWithout hook the function works correctly:\r\n\r\n&gt; DbArray: [\r\n&gt; [2,2,2,]\r\n&gt; ]\r\n\r\n\r\nHow can I get this hook to work?\r\n","title":"Hooking functions which take multidimensional arrays","body":"<p>I'm building an in-process JNI library fuzzer using Frida and I think I got everything to work except for multidimensional arrays.\nWhen testing on Linux_64, I'm not able to even create a valid hook for a function which takes multidimensional arrays. No matter what I try I'm getting something like:</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: [L[I;\nat CallCrashingFun.crashingMethod_dbarr(Native Method)\nat CallCrashingFun.main(CallCrashingFun.java:100)\nCaused by: java.lang.ClassNotFoundException: [I\nat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\nat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\nat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)</p>\n</blockquote>\n<p>My hooking script looks similar to this:</p>\n<pre><code>\nvar t_class = Java.use(&quot;CallCrashingFun&quot;)\nvar method_name = &quot;crashingMethod_dbarr&quot;\nt_class[method_name].implementation = function(dbint) {\n    console.log(&quot;Hook works!&quot;)\n}\n\n/* Also tried with params\nt_class[method_name].overload.apply(t_class[method_name], param_types).implementation = function(dbint) {\n    console.log(&quot;Hook works!&quot;)\n}*/\n    \n\n/* This however doesn't crash\nvar imp_cp = t_class[method_name].implementation\nt_class[method_name].implementation = imp_cp\n*/\n</code></pre>\n<p>The Java code I use for tests:</p>\n<pre><code>System.loadLibrary(&quot;native&quot;);\nint arr[] = {2,2,2};\nint[][] dbarr = {arr};\nnew CallCrashingFun().crashingMethod_dbarr(dbarr);\nprivate native void crashingMethod_dbarr(int[][] dbarr);\n</code></pre>\n<p>The JNI C++ code:</p>\n<pre><code>JNIEXPORT void JNICALL Java_CallCrashingFun_crashingMethod_1dbarr\n  (JNIEnv *env, jobject thisObject, jobjectArray dbtab) {\n      int i, j;\n      std::cout &lt;&lt; &quot;DbArray: &quot; &lt;&lt; &quot;[&quot; &lt;&lt; std::endl;\n      jsize len = (env)-&gt;GetArrayLength(dbtab);\n      for (i=0; i&lt;len; i++) {\n         std::cout &lt;&lt; &quot;[&quot;;\n          jintArray insArr = (jintArray) (env)-&gt;GetObjectArrayElement(dbtab, i);\n          jsize inlen = (env)-&gt;GetArrayLength(insArr);\n          jint *body = (env)-&gt;GetIntArrayElements(insArr, 0);\n          for (j=0; j&lt;inlen; j++) {\n            std::cout &lt;&lt; body[i] &lt;&lt; &quot;,&quot;;\n          }\n          std::cout &lt;&lt; &quot;]&quot; &lt;&lt; std::endl;\n      }\n      std::cout &lt;&lt; &quot;]&quot; &lt;&lt;  std::endl;\n  }\n</code></pre>\n<p>Java version that I'm using:</p>\n<blockquote>\n<p>$ /usr/bin/java --version\nPicked up _JAVA_OPTIONS: -Dawt.useSystemAAFontSettings=on -Dswing.aatext=true\nopenjdk 11.0.17 2022-10-18\nOpenJDK Runtime Environment Temurin-11.0.17+8 (build 11.0.17+8)\nOpenJDK 64-Bit Server VM Temurin-11.0.17+8 (build 11.0.17+8, mixed mode)</p>\n</blockquote>\n<p>Frida server version:</p>\n<blockquote>\n<p>frida-server-16.0.8-linux-x86_64</p>\n</blockquote>\n<p>Without hook the function works correctly:</p>\n<blockquote>\n<p>DbArray: [\n[2,2,2,]\n]</p>\n</blockquote>\n<p>How can I get this hook to work?</p>\n"},{"tags":["java","lambda","java-stream","predicate"],"comments":[{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":0,"creation_date":1671663926,"post_id":74876697,"comment_id":132150058,"body_markdown":"What have you tried and why didn’t it work?","body":"What have you tried and why didn’t it work?"},{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":0,"creation_date":1671663933,"post_id":74876697,"comment_id":132150060,"body_markdown":"Does this answer your question? [Variable used in lambda expression should be final or effectively final](https://stackoverflow.com/questions/34865383/variable-used-in-lambda-expression-should-be-final-or-effectively-final)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/34865383/variable-used-in-lambda-expression-should-be-final-or-effectively-final\">Variable used in lambda expression should be final or effectively final</a>"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1671673900,"post_id":74876697,"comment_id":132151525,"body_markdown":"Which JSON library are you using? Is it [this one](https://github.com/stleary/JSON-java)? How do you obtain the relevant keys (and values) at runtime? Are they entered by the user?","body":"Which JSON library are you using? Is it <a href=\"https://github.com/stleary/JSON-java\" rel=\"nofollow noreferrer\">this one</a>? How do you obtain the relevant keys (and values) at runtime? Are they entered by the user?"}],"answers":[{"tags":[],"owner":{"account_id":16756587,"reputation":19,"user_id":12112405,"display_name":"Abhi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671881818,"creation_date":1671736578,"answer_id":74892962,"question_id":74876697,"body_markdown":"This worked for a AND condition\r\n\r\n```java\r\nList&lt;String&gt; filterConditions = new ArrayList&lt;&gt;();\r\nfilterConditions.add(&quot;designation:d1&quot;);\r\nfilterConditions.add(&quot;mgr:m1&quot;);\r\n\r\nList&lt;JSONObject&gt; filterObj = myObj.stream().filter(e -&gt; {\r\n    Boolean flag = false;\r\n\r\n    for (String i : filterConditions) {\r\n        if (e.get(StringUtils.substringBefore(i, &quot;:&quot;)).equals(StringUtils.substringAfter(i, &quot;:&quot;))) {\r\n            flag = true;\r\n        } else {\r\n            flag = false;\r\n            break;\r\n        }\r\n    }\r\n\r\n    return flag ? true : false;\r\n}).collect(Collectors.toList());\r\n```","title":"Filter a list of JSON objects based on values of one or more key that are known only at run time","body":"<p>This worked for a AND condition</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; filterConditions = new ArrayList&lt;&gt;();\nfilterConditions.add(&quot;designation:d1&quot;);\nfilterConditions.add(&quot;mgr:m1&quot;);\n\nList&lt;JSONObject&gt; filterObj = myObj.stream().filter(e -&gt; {\n    Boolean flag = false;\n\n    for (String i : filterConditions) {\n        if (e.get(StringUtils.substringBefore(i, &quot;:&quot;)).equals(StringUtils.substringAfter(i, &quot;:&quot;))) {\n            flag = true;\n        } else {\n            flag = false;\n            break;\n        }\n    }\n\n    return flag ? true : false;\n}).collect(Collectors.toList());\n</code></pre>\n"}],"owner":{"account_id":16756587,"reputation":19,"user_id":12112405,"display_name":"Abhi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":459,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671881818,"creation_date":1671628807,"question_id":74876697,"body_markdown":"```\r\nList&lt;JSONObject&gt; myObj = new ArrayList&lt;JSONObject&gt;();\r\nmyObj.add(new JSONObject(&quot;{\\&quot;name\\&quot;:\\&quot;name1\\&quot;,\\&quot;sub-name\\&quot;:\\&quot;sub-name1\\&quot;, \\&quot;designation\\&quot;:\\&quot;d1\\&quot;, \\&quot;mgr\\&quot;: \\&quot;m1\\&quot;}&quot;));\r\nmyObj.add(new JSONObject(&quot;{\\&quot;name\\&quot;:\\&quot;name1\\&quot;,\\&quot;sub-name\\&quot;:\\&quot;sub-name2\\&quot;, \\&quot;designation\\&quot;:\\&quot;d2\\&quot;, \\&quot;mgr\\&quot;: \\&quot;m2\\&quot;}&quot;));\r\nmyObj.add(new JSONObject(&quot;{\\&quot;name\\&quot;:\\&quot;name2\\&quot;,\\&quot;sub-name\\&quot;:\\&quot;sub-name3\\&quot;, \\&quot;designation\\&quot;:\\&quot;d2\\&quot;, \\&quot;mgr\\&quot;: \\&quot;m1\\&quot;}&quot;));\r\nmyObj.add(new JSONObject(&quot;{\\&quot;name\\&quot;:\\&quot;name2\\&quot;,\\&quot;sub-name\\&quot;:\\&quot;sub-name4\\&quot;, \\&quot;designation\\&quot;:\\&quot;d3\\&quot;, \\&quot;mgr\\&quot;: \\&quot;m2\\&quot;}&quot;));\r\nmyObj.add(new JSONObject(&quot;{\\&quot;name\\&quot;:\\&quot;name3\\&quot;,\\&quot;sub-name\\&quot;:\\&quot;sub-name5\\&quot;, \\&quot;designation\\&quot;:\\&quot;d3\\&quot;, \\&quot;mgr\\&quot;: \\&quot;m3\\&quot;}&quot;));\r\n```\r\n\r\nFrom this list the requirement is to be able to filter objects based on values passed for various keys.\r\n\r\nFor e.g. return objects \r\n1. where name=name1 and mgr=m1\r\n2. where designation=d2\r\n3. where mgr=m2\r\n4. where name=name1 or mgr=m1\r\n\r\nFiltering the stream can work based on such conditions\r\n\r\n```\r\nList&lt;JSONObject&gt; filterObj = myObj.stream().filter(e -&gt; e.get(&quot;name&quot;).equals(&quot;name1&quot;) &amp;&amp; e.get(&quot;mgr&quot;).equals(&quot;m1&quot;)).collect(Collectors.toList());\r\n\r\n```\r\n\r\nI tried to see if a custom predicate can be built without much success.\r\n\r\nHow can this filtering be dynamically when the keys and values are not know upfront?","title":"Filter a list of JSON objects based on values of one or more key that are known only at run time","body":"<pre><code>List&lt;JSONObject&gt; myObj = new ArrayList&lt;JSONObject&gt;();\nmyObj.add(new JSONObject(&quot;{\\&quot;name\\&quot;:\\&quot;name1\\&quot;,\\&quot;sub-name\\&quot;:\\&quot;sub-name1\\&quot;, \\&quot;designation\\&quot;:\\&quot;d1\\&quot;, \\&quot;mgr\\&quot;: \\&quot;m1\\&quot;}&quot;));\nmyObj.add(new JSONObject(&quot;{\\&quot;name\\&quot;:\\&quot;name1\\&quot;,\\&quot;sub-name\\&quot;:\\&quot;sub-name2\\&quot;, \\&quot;designation\\&quot;:\\&quot;d2\\&quot;, \\&quot;mgr\\&quot;: \\&quot;m2\\&quot;}&quot;));\nmyObj.add(new JSONObject(&quot;{\\&quot;name\\&quot;:\\&quot;name2\\&quot;,\\&quot;sub-name\\&quot;:\\&quot;sub-name3\\&quot;, \\&quot;designation\\&quot;:\\&quot;d2\\&quot;, \\&quot;mgr\\&quot;: \\&quot;m1\\&quot;}&quot;));\nmyObj.add(new JSONObject(&quot;{\\&quot;name\\&quot;:\\&quot;name2\\&quot;,\\&quot;sub-name\\&quot;:\\&quot;sub-name4\\&quot;, \\&quot;designation\\&quot;:\\&quot;d3\\&quot;, \\&quot;mgr\\&quot;: \\&quot;m2\\&quot;}&quot;));\nmyObj.add(new JSONObject(&quot;{\\&quot;name\\&quot;:\\&quot;name3\\&quot;,\\&quot;sub-name\\&quot;:\\&quot;sub-name5\\&quot;, \\&quot;designation\\&quot;:\\&quot;d3\\&quot;, \\&quot;mgr\\&quot;: \\&quot;m3\\&quot;}&quot;));\n</code></pre>\n<p>From this list the requirement is to be able to filter objects based on values passed for various keys.</p>\n<p>For e.g. return objects</p>\n<ol>\n<li>where name=name1 and mgr=m1</li>\n<li>where designation=d2</li>\n<li>where mgr=m2</li>\n<li>where name=name1 or mgr=m1</li>\n</ol>\n<p>Filtering the stream can work based on such conditions</p>\n<pre><code>List&lt;JSONObject&gt; filterObj = myObj.stream().filter(e -&gt; e.get(&quot;name&quot;).equals(&quot;name1&quot;) &amp;&amp; e.get(&quot;mgr&quot;).equals(&quot;m1&quot;)).collect(Collectors.toList());\n\n</code></pre>\n<p>I tried to see if a custom predicate can be built without much success.</p>\n<p>How can this filtering be dynamically when the keys and values are not know upfront?</p>\n"},{"tags":["java","android"],"owner":{"account_id":27342651,"reputation":1,"user_id":20853058,"display_name":"begDev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671881697,"creation_date":1671881697,"question_id":74907372,"body_markdown":"Sorry for bad English. I am currently working on android project. I have a surface view to display camera preview. In this previev i want to get pixels to convert them to hexes then show the name of color where you touched. My activity covered with surface view Using firebase to \r\nfor names and hexes. I am getting error in this piece of code: \r\n\r\n```\r\n@Override\r\npublic boolean onTouchEvent(MotionEvent event) {\r\n    if (event.getAction() == MotionEvent.ACTION_DOWN) {\r\n        // get coordinates where you touched\r\n        int x = (int) event.getX();\r\n        int y = (int) event.getY();\r\n\r\n        // get color where you touched\r\n        final int pixel = surfaceView.getBitmap().getPixel(x, y);\r\n\r\n        // convert color to RGB\r\n        int redValue = Color.red(pixel);\r\n        int greenValue = Color.green(pixel);\r\n        int blueValue = Color.blue(pixel);\r\n\r\n        // Firebase\r\n        FirebaseConnection firebaseConnection = new FirebaseConnection();\r\n        final ArrayList&lt;String&gt; nameList = firebaseConnection.getNameList();\r\n        final ArrayList&lt;String&gt; hexList = firebaseConnection.getHexList();\r\n\r\n        // nearest color name if there is no name in database for color\r\n        String nearestColorName = findNearestColor(redValue, greenValue, blueValue, nameList, hexList);\r\n        Toast.makeText(CanliTanima.this, nearestColorName, Toast.LENGTH_SHORT).show();\r\n    }\r\n    return true;\r\n}\r\n```\r\nfinal int pixel = surfaceView.getBitmap().getPixel(x, y); I cannot use getBitmap() \r\n\r\nWhat can I use instead of getBitmap() ?","title":"How to get Bitmap from surface view in order to reach pixels","body":"<p>Sorry for bad English. I am currently working on android project. I have a surface view to display camera preview. In this previev i want to get pixels to convert them to hexes then show the name of color where you touched. My activity covered with surface view Using firebase to\nfor names and hexes. I am getting error in this piece of code:</p>\n<pre><code>@Override\npublic boolean onTouchEvent(MotionEvent event) {\n    if (event.getAction() == MotionEvent.ACTION_DOWN) {\n        // get coordinates where you touched\n        int x = (int) event.getX();\n        int y = (int) event.getY();\n\n        // get color where you touched\n        final int pixel = surfaceView.getBitmap().getPixel(x, y);\n\n        // convert color to RGB\n        int redValue = Color.red(pixel);\n        int greenValue = Color.green(pixel);\n        int blueValue = Color.blue(pixel);\n\n        // Firebase\n        FirebaseConnection firebaseConnection = new FirebaseConnection();\n        final ArrayList&lt;String&gt; nameList = firebaseConnection.getNameList();\n        final ArrayList&lt;String&gt; hexList = firebaseConnection.getHexList();\n\n        // nearest color name if there is no name in database for color\n        String nearestColorName = findNearestColor(redValue, greenValue, blueValue, nameList, hexList);\n        Toast.makeText(CanliTanima.this, nearestColorName, Toast.LENGTH_SHORT).show();\n    }\n    return true;\n}\n</code></pre>\n<p>final int pixel = surfaceView.getBitmap().getPixel(x, y); I cannot use getBitmap()</p>\n<p>What can I use instead of getBitmap() ?</p>\n"},{"tags":["java","android","arrays","json","gson"],"answers":[{"tags":[],"owner":{"account_id":468095,"reputation":40996,"user_id":873875,"display_name":"yorkw"},"down_vote_count":0,"up_vote_count":274,"is_accepted":true,"score":274,"last_activity_date":1671880371,"creation_date":1322950468,"answer_id":8371455,"question_id":8371274,"body_markdown":"You can parse the `JSONArray` directly, don&#39;t need to wrap your `Post` class with `PostEntity` one more time and don&#39;t need new `JSONObject().toString()` either:\r\n\r\n    Gson gson = new Gson();\r\n    String jsonOutput = &quot;Your JSON String&quot;;\r\n    Type listType = new TypeToken&lt;List&lt;Post&gt;&gt;(){}.getType();\r\n    List&lt;Post&gt; posts = gson.fromJson(jsonOutput, listType);","title":"How to Parse JSON Array with Gson","body":"<p>You can parse the <code>JSONArray</code> directly, don't need to wrap your <code>Post</code> class with <code>PostEntity</code> one more time and don't need new <code>JSONObject().toString()</code> either:</p>\n<pre><code>Gson gson = new Gson();\nString jsonOutput = &quot;Your JSON String&quot;;\nType listType = new TypeToken&lt;List&lt;Post&gt;&gt;(){}.getType();\nList&lt;Post&gt; posts = gson.fromJson(jsonOutput, listType);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":263246,"reputation":1515,"user_id":548685,"display_name":"Miere"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1430427741,"creation_date":1343603388,"answer_id":11713753,"question_id":8371274,"body_markdown":"I was looking for a way to parse object arrays in a more generic way; here is my contribution:\r\n\r\n`CollectionDeserializer.java`:\r\n\r\n    import java.lang.reflect.ParameterizedType;\r\n    import java.lang.reflect.Type;\r\n    import java.util.ArrayList;\r\n    import java.util.Collection;\r\n    import java.util.Iterator;\r\n     \r\n    import com.google.gson.Gson;\r\n    import com.google.gson.JsonArray;\r\n    import com.google.gson.JsonDeserializationContext;\r\n    import com.google.gson.JsonDeserializer;\r\n    import com.google.gson.JsonElement;\r\n    import com.google.gson.JsonParseException;\r\n     \r\n    public class CollectionDeserializer implements JsonDeserializer&lt;Collection&lt;?&gt;&gt; {\r\n     \r\n    \t@Override\r\n    \tpublic Collection&lt;?&gt; deserialize(JsonElement json, Type typeOfT,\r\n    \t\t\tJsonDeserializationContext context) throws JsonParseException {\r\n    \t\tType realType = ((ParameterizedType)typeOfT).getActualTypeArguments()[0];\r\n    \t\t\r\n    \t\treturn parseAsArrayList(json, realType);\r\n    \t}\r\n     \r\n    \t/**\r\n    \t * @param serializedData\r\n    \t * @param type\r\n    \t * @return\r\n    \t */\r\n        @SuppressWarnings(&quot;unchecked&quot;)\r\n    \tpublic &lt;T&gt; ArrayList&lt;T&gt; parseAsArrayList(JsonElement json, T type) {\r\n    \t\tArrayList&lt;T&gt; newArray = new ArrayList&lt;T&gt;();\r\n    \t\tGson gson = new Gson();\r\n     \r\n    \t\tJsonArray array= json.getAsJsonArray();\r\n    \t\tIterator&lt;JsonElement&gt; iterator = array.iterator();\r\n     \r\n    \t\twhile(iterator.hasNext()){\r\n    \t\t    JsonElement json2 = (JsonElement)iterator.next();\r\n    \t\t\tT object = (T) gson.fromJson(json2, (Class&lt;?&gt;)type);\r\n    \t\t    newArray.add(object);\r\n    \t\t}\r\n     \r\n    \t\treturn newArray;\r\n    \t}\r\n    \t\r\n    }\r\n\r\n`JSONParsingTest.java`:\r\n\r\n    public class JSONParsingTest {\r\n    \t\r\n    \tList&lt;World&gt; worlds;\r\n    \t\r\n    \t@Test\r\n    \tpublic void grantThatDeserializerWorksAndParseObjectArrays(){\r\n     \r\n    \t\tString worldAsString = &quot;{\\&quot;worlds\\&quot;: [&quot; +\r\n    \t\t\t&quot;{\\&quot;name\\&quot;:\\&quot;name1\\&quot;,\\&quot;id\\&quot;:1},&quot; +\r\n    \t\t\t&quot;{\\&quot;name\\&quot;:\\&quot;name2\\&quot;,\\&quot;id\\&quot;:2},&quot; +\r\n    \t\t\t&quot;{\\&quot;name\\&quot;:\\&quot;name3\\&quot;,\\&quot;id\\&quot;:3}&quot; +\r\n    \t\t&quot;]}&quot;;\r\n     \r\n    \t\tGsonBuilder builder = new GsonBuilder();\r\n    \t\tbuilder.registerTypeAdapter(Collection.class, new CollectionDeserializer());\r\n    \t\tGson gson = builder.create();\r\n    \t\tObject decoded = gson.fromJson((String)worldAsString, JSONParsingTest.class);\r\n    \t\t\r\n    \t\tassertNotNull(decoded);\r\n    \t\tassertTrue(JSONParsingTest.class.isInstance(decoded));\r\n    \t\t\r\n    \t\tJSONParsingTest decodedObject = (JSONParsingTest)decoded;\r\n    \t\tassertEquals(3, decodedObject.worlds.size());\r\n    \t\tassertEquals((Long)2L, decodedObject.worlds.get(1).getId());\r\n    \t}\r\n    }\r\n\r\n`World.java`:\r\n\r\n    public class World {\r\n    \tprivate String name;\r\n    \tprivate Long id;\r\n     \r\n    \tpublic void setName(String name) {\r\n    \t\tthis.name = name;\r\n    \t}\r\n     \r\n    \tpublic String getName() {\r\n    \t\treturn name;\r\n    \t}\r\n     \r\n    \tpublic Long getId() {\r\n    \t\treturn id;\r\n    \t}\r\n     \r\n    \tpublic void setId(Long id) {\r\n    \t\tthis.id = id;\r\n    \t}\r\n    \t\r\n    }\r\n\r\n","title":"How to Parse JSON Array with Gson","body":"<p>I was looking for a way to parse object arrays in a more generic way; here is my contribution:</p>\n\n<p><code>CollectionDeserializer.java</code>:</p>\n\n<pre><code>import java.lang.reflect.ParameterizedType;\nimport java.lang.reflect.Type;\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.Iterator;\n\nimport com.google.gson.Gson;\nimport com.google.gson.JsonArray;\nimport com.google.gson.JsonDeserializationContext;\nimport com.google.gson.JsonDeserializer;\nimport com.google.gson.JsonElement;\nimport com.google.gson.JsonParseException;\n\npublic class CollectionDeserializer implements JsonDeserializer&lt;Collection&lt;?&gt;&gt; {\n\n    @Override\n    public Collection&lt;?&gt; deserialize(JsonElement json, Type typeOfT,\n            JsonDeserializationContext context) throws JsonParseException {\n        Type realType = ((ParameterizedType)typeOfT).getActualTypeArguments()[0];\n\n        return parseAsArrayList(json, realType);\n    }\n\n    /**\n     * @param serializedData\n     * @param type\n     * @return\n     */\n    @SuppressWarnings(\"unchecked\")\n    public &lt;T&gt; ArrayList&lt;T&gt; parseAsArrayList(JsonElement json, T type) {\n        ArrayList&lt;T&gt; newArray = new ArrayList&lt;T&gt;();\n        Gson gson = new Gson();\n\n        JsonArray array= json.getAsJsonArray();\n        Iterator&lt;JsonElement&gt; iterator = array.iterator();\n\n        while(iterator.hasNext()){\n            JsonElement json2 = (JsonElement)iterator.next();\n            T object = (T) gson.fromJson(json2, (Class&lt;?&gt;)type);\n            newArray.add(object);\n        }\n\n        return newArray;\n    }\n\n}\n</code></pre>\n\n<p><code>JSONParsingTest.java</code>:</p>\n\n<pre><code>public class JSONParsingTest {\n\n    List&lt;World&gt; worlds;\n\n    @Test\n    public void grantThatDeserializerWorksAndParseObjectArrays(){\n\n        String worldAsString = \"{\\\"worlds\\\": [\" +\n            \"{\\\"name\\\":\\\"name1\\\",\\\"id\\\":1},\" +\n            \"{\\\"name\\\":\\\"name2\\\",\\\"id\\\":2},\" +\n            \"{\\\"name\\\":\\\"name3\\\",\\\"id\\\":3}\" +\n        \"]}\";\n\n        GsonBuilder builder = new GsonBuilder();\n        builder.registerTypeAdapter(Collection.class, new CollectionDeserializer());\n        Gson gson = builder.create();\n        Object decoded = gson.fromJson((String)worldAsString, JSONParsingTest.class);\n\n        assertNotNull(decoded);\n        assertTrue(JSONParsingTest.class.isInstance(decoded));\n\n        JSONParsingTest decodedObject = (JSONParsingTest)decoded;\n        assertEquals(3, decodedObject.worlds.size());\n        assertEquals((Long)2L, decodedObject.worlds.get(1).getId());\n    }\n}\n</code></pre>\n\n<p><code>World.java</code>:</p>\n\n<pre><code>public class World {\n    private String name;\n    private Long id;\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2658411,"reputation":1205,"user_id":2298631,"accept_rate":0,"display_name":"Salman khan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1475148433,"creation_date":1475148125,"answer_id":39768892,"question_id":8371274,"body_markdown":"\r\n\r\n    Type listType = new TypeToken&lt;List&lt;Post&gt;&gt;() {}.getType();\r\n    List&lt;Post&gt; posts = new Gson().fromJson(jsonOutput.toString(), listType);\r\n\r\n\r\n","title":"How to Parse JSON Array with Gson","body":"<pre><code>Type listType = new TypeToken&lt;List&lt;Post&gt;&gt;() {}.getType();\nList&lt;Post&gt; posts = new Gson().fromJson(jsonOutput.toString(), listType);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9209058,"reputation":1131,"user_id":6843104,"display_name":"J.S.R - Silicornio"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1511891277,"creation_date":1511891277,"answer_id":47537881,"question_id":8371274,"body_markdown":"Some of the answers of this post are valid, but using TypeToken, the Gson library generates a Tree objects whit unreal types for your application.\r\n\r\nTo get it I had to read the array and convert one by one the objects inside the array. Of course this method is not the fastest and I don&#39;t recommend to use it if you have the array is too big, but it worked for me.\r\n\r\nIt is necessary to include the Json library in the project. If you are developing on Android, it is included:\r\n\r\n    /**\r\n     * Convert JSON string to a list of objects\r\n     * @param sJson String sJson to be converted\r\n     * @param tClass Class\r\n     * @return List&lt;T&gt; list of objects generated or null if there was an error\r\n     */\r\n    public static &lt;T&gt; List&lt;T&gt; convertFromJsonArray(String sJson, Class&lt;T&gt; tClass){\r\n\r\n        try{\r\n            Gson gson = new Gson();\r\n            List&lt;T&gt; listObjects = new ArrayList&lt;&gt;();\r\n\r\n            //read each object of array with Json library\r\n            JSONArray jsonArray = new JSONArray(sJson);\r\n            for(int i=0; i&lt;jsonArray.length(); i++){\r\n\r\n                //get the object\r\n                JSONObject jsonObject = jsonArray.getJSONObject(i);\r\n\r\n                //get string of object from Json library to convert it to real object with Gson library\r\n                listObjects.add(gson.fromJson(jsonObject.toString(), tClass));\r\n            }\r\n\r\n            //return list with all generated objects\r\n            return listObjects;\r\n\r\n        }catch(Exception e){\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //error: return null\r\n        return null;\r\n    }","title":"How to Parse JSON Array with Gson","body":"<p>Some of the answers of this post are valid, but using TypeToken, the Gson library generates a Tree objects whit unreal types for your application.</p>\n\n<p>To get it I had to read the array and convert one by one the objects inside the array. Of course this method is not the fastest and I don't recommend to use it if you have the array is too big, but it worked for me.</p>\n\n<p>It is necessary to include the Json library in the project. If you are developing on Android, it is included:</p>\n\n<pre><code>/**\n * Convert JSON string to a list of objects\n * @param sJson String sJson to be converted\n * @param tClass Class\n * @return List&lt;T&gt; list of objects generated or null if there was an error\n */\npublic static &lt;T&gt; List&lt;T&gt; convertFromJsonArray(String sJson, Class&lt;T&gt; tClass){\n\n    try{\n        Gson gson = new Gson();\n        List&lt;T&gt; listObjects = new ArrayList&lt;&gt;();\n\n        //read each object of array with Json library\n        JSONArray jsonArray = new JSONArray(sJson);\n        for(int i=0; i&lt;jsonArray.length(); i++){\n\n            //get the object\n            JSONObject jsonObject = jsonArray.getJSONObject(i);\n\n            //get string of object from Json library to convert it to real object with Gson library\n            listObjects.add(gson.fromJson(jsonObject.toString(), tClass));\n        }\n\n        //return list with all generated objects\n        return listObjects;\n\n    }catch(Exception e){\n        e.printStackTrace();\n    }\n\n    //error: return null\n    return null;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5032055,"reputation":564,"user_id":4041955,"display_name":"Sumit Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1534490357,"creation_date":1534490357,"answer_id":51890232,"question_id":8371274,"body_markdown":"you can get List value without using **Type** object.\r\n\r\n    EvalClassName[] evalClassName;\r\n    ArrayList&lt;EvalClassName&gt; list;\r\n    evalClassName= new Gson().fromJson(JSONArrayValue.toString(),EvalClassName[].class);\r\n    list = new ArrayList&lt;&gt;(Arrays.asList(evalClassName));\r\n\r\nI have tested it and it is working.","title":"How to Parse JSON Array with Gson","body":"<p>you can get List value without using <strong>Type</strong> object.</p>\n\n<pre><code>EvalClassName[] evalClassName;\nArrayList&lt;EvalClassName&gt; list;\nevalClassName= new Gson().fromJson(JSONArrayValue.toString(),EvalClassName[].class);\nlist = new ArrayList&lt;&gt;(Arrays.asList(evalClassName));\n</code></pre>\n\n<p>I have tested it and it is working.</p>\n"},{"tags":[],"owner":{"account_id":309455,"reputation":2562,"user_id":973919,"accept_rate":75,"display_name":"xarlymg89"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1542014600,"creation_date":1540374273,"answer_id":52965840,"question_id":8371274,"body_markdown":"You can easily do this in Kotlin using the following code:\r\n\r\n    val fileData = &quot;your_json_string&quot;\r\n    val gson = GsonBuilder().create()\r\n    val packagesArray = gson.fromJson(fileData , Array&lt;YourClass&gt;::class.java).toList()\r\n\r\nBasically, you only need to provide an `Array` of `YourClass` objects.","title":"How to Parse JSON Array with Gson","body":"<p>You can easily do this in Kotlin using the following code:</p>\n\n<pre><code>val fileData = \"your_json_string\"\nval gson = GsonBuilder().create()\nval packagesArray = gson.fromJson(fileData , Array&lt;YourClass&gt;::class.java).toList()\n</code></pre>\n\n<p>Basically, you only need to provide an <code>Array</code> of <code>YourClass</code> objects.</p>\n"},{"tags":[],"owner":{"account_id":14351409,"reputation":1024,"user_id":10366757,"display_name":"Prabh deep"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1550139921,"creation_date":1550139921,"answer_id":54688146,"question_id":8371274,"body_markdown":"    [\r\n          {\r\n               id : &#39;1&#39;,\r\n               title: &#39;sample title&#39;,\r\n               ....\r\n          },\r\n          {\r\n               id : &#39;2&#39;,\r\n               title: &#39;sample title&#39;,\r\n               ....\r\n         },\r\n          ...\r\n     ]\r\n\r\nCheck Easy code for this output\r\n\r\n     Gson gson=new GsonBuilder().create();\r\n                    List&lt;Post&gt; list= Arrays.asList(gson.fromJson(yourResponse.toString,Post[].class));\r\n\r\n","title":"How to Parse JSON Array with Gson","body":"<pre><code>[\n      {\n           id : '1',\n           title: 'sample title',\n           ....\n      },\n      {\n           id : '2',\n           title: 'sample title',\n           ....\n     },\n      ...\n ]\n</code></pre>\n\n<p>Check Easy code for this output</p>\n\n<pre><code> Gson gson=new GsonBuilder().create();\n                List&lt;Post&gt; list= Arrays.asList(gson.fromJson(yourResponse.toString,Post[].class));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":469868,"reputation":5329,"user_id":876739,"accept_rate":57,"display_name":"xrcwrn"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1564556378,"creation_date":1564555368,"answer_id":57284707,"question_id":8371274,"body_markdown":"To conver in Object Array \r\n\r\n    Gson gson=new Gson();\r\n    ElementType [] refVar=gson.fromJson(jsonString,ElementType[].class);\r\n\r\nTo convert as post type\r\n\r\n    Gson gson=new Gson();\r\n    Post [] refVar=gson.fromJson(jsonString,Post[].class);\r\n\r\nTo read it as List of objects TypeToken can be used\r\n\r\n    List&lt;Post&gt; posts=(List&lt;Post&gt;)gson.fromJson(jsonString, \r\n                         new TypeToken&lt;List&lt;Post&gt;&gt;(){}.getType());\r\n\r\n\r\n\r\n   ","title":"How to Parse JSON Array with Gson","body":"<p>To conver in Object Array </p>\n\n<pre><code>Gson gson=new Gson();\nElementType [] refVar=gson.fromJson(jsonString,ElementType[].class);\n</code></pre>\n\n<p>To convert as post type</p>\n\n<pre><code>Gson gson=new Gson();\nPost [] refVar=gson.fromJson(jsonString,Post[].class);\n</code></pre>\n\n<p>To read it as List of objects TypeToken can be used</p>\n\n<pre><code>List&lt;Post&gt; posts=(List&lt;Post&gt;)gson.fromJson(jsonString, \n                     new TypeToken&lt;List&lt;Post&gt;&gt;(){}.getType());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1450165,"reputation":4348,"user_id":1367344,"accept_rate":83,"display_name":"Adnan Abdollah Zaki"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1603267572,"creation_date":1603267572,"answer_id":64459258,"question_id":8371274,"body_markdown":"in **Kotlin** :\r\n\r\n    val jsonArrayString = &quot;[&#39;A&#39;,&#39;B&#39;,&#39;C&#39;]&quot;\r\n\r\n    val gson = Gson()\r\n\r\n    val listType: Type = object : TypeToken&lt;List&lt;String?&gt;?&gt;() {}.getType()\r\n    \r\n    val stringList : List&lt;String&gt; = gson.fromJson(\r\n                                jsonArrayString,\r\n                                listType)\r\n\r\n","title":"How to Parse JSON Array with Gson","body":"<p>in <strong>Kotlin</strong> :</p>\n<pre><code>val jsonArrayString = &quot;['A','B','C']&quot;\n\nval gson = Gson()\n\nval listType: Type = object : TypeToken&lt;List&lt;String?&gt;?&gt;() {}.getType()\n\nval stringList : List&lt;String&gt; = gson.fromJson(\n                            jsonArrayString,\n                            listType)\n</code></pre>\n"}],"owner":{"account_id":1024233,"reputation":5222,"user_id":1033899,"accept_rate":100,"display_name":"Ogulcan Orhan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147766,"favorite_count":0,"down_vote_count":0,"up_vote_count":96,"accepted_answer_id":8371455,"answer_count":9,"score":96,"last_activity_date":1671880371,"creation_date":1322948544,"question_id":8371274,"body_markdown":"I want to parse JSON arrays and using gson. Firstly, I can log JSON output, server is responsing to client clearly. \r\n\r\nHere is my JSON output:\r\n\r\n&lt;!-- language: lang-json --&gt;\r\n\r\n     [\r\n          {\r\n               id : &#39;1&#39;,\r\n               title: &#39;sample title&#39;,\r\n               ....\r\n          },\r\n          {\r\n               id : &#39;2&#39;,\r\n               title: &#39;sample title&#39;,\r\n               ....\r\n         },\r\n          ...\r\n     ]\r\n\r\nI tried this structure for parsing. A class, which depends on single `array` and `ArrayList` for all JSONArray.\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n     public class PostEntity {\r\n\r\n          private ArrayList&lt;Post&gt; postList = new ArrayList&lt;Post&gt;();\r\n\r\n          public List&lt;Post&gt; getPostList() { \r\n               return postList; \r\n          }\r\n\r\n          public void setPostList(List&lt;Post&gt; postList) { \r\n               this.postList = (ArrayList&lt;Post&gt;)postList; \r\n          }\t\r\n     }\r\n\r\nPost class:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n     public class Post {\r\n     \r\n          private String id;\r\n          private String title;\r\n\r\n          /* getters &amp; setters */\r\n     }\r\n\r\n\r\nWhen I try to use gson no error, no warning and no log:\r\n\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n     GsonBuilder gsonb = new GsonBuilder();\r\n     Gson gson = gsonb.create();\r\n\r\n     PostEntity postEnt;\r\n     JSONObject jsonObj = new JSONObject(jsonOutput);\r\n     postEnt = gson.fromJson(jsonObj.toString(), PostEntity.class);\r\n\r\n     Log.d(&quot;postLog&quot;, postEnt.getPostList().get(0).getId());\r\n\r\nWhat&#39;s wrong, how can I solve?","title":"How to Parse JSON Array with Gson","body":"<p>I want to parse JSON arrays and using gson. Firstly, I can log JSON output, server is responsing to client clearly. </p>\n\n<p>Here is my JSON output:</p>\n\n<pre class=\"lang-json prettyprint-override\"><code> [\n      {\n           id : '1',\n           title: 'sample title',\n           ....\n      },\n      {\n           id : '2',\n           title: 'sample title',\n           ....\n     },\n      ...\n ]\n</code></pre>\n\n<p>I tried this structure for parsing. A class, which depends on single <code>array</code> and <code>ArrayList</code> for all JSONArray.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code> public class PostEntity {\n\n      private ArrayList&lt;Post&gt; postList = new ArrayList&lt;Post&gt;();\n\n      public List&lt;Post&gt; getPostList() { \n           return postList; \n      }\n\n      public void setPostList(List&lt;Post&gt; postList) { \n           this.postList = (ArrayList&lt;Post&gt;)postList; \n      } \n }\n</code></pre>\n\n<p>Post class:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code> public class Post {\n\n      private String id;\n      private String title;\n\n      /* getters &amp; setters */\n }\n</code></pre>\n\n<p>When I try to use gson no error, no warning and no log:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code> GsonBuilder gsonb = new GsonBuilder();\n Gson gson = gsonb.create();\n\n PostEntity postEnt;\n JSONObject jsonObj = new JSONObject(jsonOutput);\n postEnt = gson.fromJson(jsonObj.toString(), PostEntity.class);\n\n Log.d(\"postLog\", postEnt.getPostList().get(0).getId());\n</code></pre>\n\n<p>What's wrong, how can I solve?</p>\n"},{"tags":["java","spring-boot","amazon-s3","request","postman"],"comments":[{"owner":{"account_id":10693447,"reputation":878,"user_id":7871511,"display_name":"Rohit Agarwal"},"score":0,"creation_date":1671995290,"post_id":74902521,"comment_id":132205755,"body_markdown":"Can you please share curl request for desktop?","body":"Can you please share curl request for desktop?"}],"owner":{"account_id":15297769,"reputation":3,"user_id":11037241,"display_name":"Chen Cohen"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":151,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671880230,"creation_date":1671817256,"question_id":74902521,"body_markdown":"I&#39;m building an app, that including service to upload images to S3 AWS, important to say that the bucket &quot;NOT PUBLIC&quot;.\r\n\r\nWhen I&#39;m sending the request through the Postman desktop app, I&#39;m getting 200OK...\r\nBUT, when I&#39;m sending the request through the Postman browser, I&#39;m getting 500 error.\r\nI tried with all the types of &quot;Content-type&quot;, and I also tried to unmark the content type, it doesn&#39;t work...\r\nErrors:\r\n1) \r\n\r\n```\r\n&quot;message&quot;: &quot;Failed to parse multipart servlet request; nested exception is javax.servlet.ServletException: org.apache.tomcat.util.http.fileupload.impl.InvalidContentTypeException: the request doesn&#39;t contain a multipart/form-data or multipart/mixed stream, content type header is application/json&quot;\r\n```\r\n\r\n2) (If I unmark the &quot;Content type&quot;)\r\n\r\n```\r\n&quot;message&quot;: &quot;Content type &#39;application/octet-stream&#39; not supported&quot;\r\n```\r\n\r\n3) If I&#39;m inserting &quot;multipart/fromdata&quot;\r\n\r\n```\r\n&quot;message&quot;: &quot;Failed to parse multipart servlet request; nested exception is java.io.IOException: org.apache.tomcat.util.http.fileupload.FileUploadException: the request was rejected because no multipart boundary was found&quot;\r\n```\r\n\r\nYes, and also tried with the boundary in the content type :)\r\n\r\nHere is the code of the controller:\r\n\r\n\r\n```\r\npackage com.package\r\n\r\nimport com.package.ImageDTO;\r\nimport com.package.model.DeletedImageDTO;\r\nimport com.package.service.ImageService;\r\nimport lombok.RequiredArgsConstructor;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.MediaType;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.CrossOrigin;\r\nimport org.springframework.web.bind.annotation.DeleteMapping;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PathVariable;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RequestPart;\r\nimport org.springframework.web.bind.annotation.RestController;\r\nimport org.springframework.web.multipart.MultipartHttpServletRequest;\r\n\r\nimport java.io.IOException;\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\n\r\n/**\r\n * Control&#39;s endPoints for authentication\r\n */\r\n@CrossOrigin(origins = &quot;*&quot;, maxAge = 3600)\r\n@RestController\r\n@RequestMapping(&quot;/api&quot;)\r\n@RequiredArgsConstructor\r\n@Slf4j\r\npublic class ImageController extends ValidationExceptionHandler {\r\n\r\n    private final ImageService imageService;\r\n\r\n    @GetMapping(&quot;/user/image&quot;)\r\n    public ResponseEntity&lt;List&lt;ImageDTO&gt;&gt; getUserImages() {\r\n        final List&lt;ImagesDTO&gt; allUserImages = imageService.getAllUserImages();\r\n        return ResponseEntity.status(HttpStatus.OK).body(allUserImages);\r\n    }\r\n\r\n    @PostMapping(value = &quot;/user/images&quot;, consumes = {MediaType.APPLICATION_JSON_VALUE, MediaType.MULTIPART_FORM_DATA_VALUE})\r\n    public ResponseEntity&lt;List&lt;ImageDTO&gt;&gt; saveUserImages(@RequestPart(name = &quot;imageDTOS&quot;) ImageDTO[] imageDTOS,\r\n                                                                     @RequestPart(name = &quot;deletedImageDTOs&quot;) DeletedImageDTO[] deletedImageDTOs,\r\n                                                                     MultipartHttpServletRequest request) throws IOException {\r\n        final List&lt;ImageDTO&gt; imageDTOSResponse = imageService.saveUserImages(Arrays.stream(imageDTOS).toList(),\r\n                Arrays.stream(deletedImageDTOs).toList(), request);\r\n\r\n        return ResponseEntity.status(HttpStatus.OK).body(imageDTOSResponse);\r\n    }\r\n\r\n    @DeleteMapping(&quot;/user/images/{id}&quot;)\r\n    public ResponseEntity&lt;Void&gt; deleteUserImage(@PathVariable(name = &quot;id&quot;) final Long id) {\r\n        imageService.deleteImages(id);\r\n        return ResponseEntity.noContent().build();\r\n    }\r\n}\r\n\r\n```\r\n\r\nThe language of the backend is: Java, Spring boot\r\n\r\n\r\nEverything has been mentioned above.","title":"Upload an image with Postman, working on the desktop app but not on the browser","body":"<p>I'm building an app, that including service to upload images to S3 AWS, important to say that the bucket &quot;NOT PUBLIC&quot;.</p>\n<p>When I'm sending the request through the Postman desktop app, I'm getting 200OK...\nBUT, when I'm sending the request through the Postman browser, I'm getting 500 error.\nI tried with all the types of &quot;Content-type&quot;, and I also tried to unmark the content type, it doesn't work...\nErrors:\n1)</p>\n<pre><code>&quot;message&quot;: &quot;Failed to parse multipart servlet request; nested exception is javax.servlet.ServletException: org.apache.tomcat.util.http.fileupload.impl.InvalidContentTypeException: the request doesn't contain a multipart/form-data or multipart/mixed stream, content type header is application/json&quot;\n</code></pre>\n<ol start=\"2\">\n<li>(If I unmark the &quot;Content type&quot;)</li>\n</ol>\n<pre><code>&quot;message&quot;: &quot;Content type 'application/octet-stream' not supported&quot;\n</code></pre>\n<ol start=\"3\">\n<li>If I'm inserting &quot;multipart/fromdata&quot;</li>\n</ol>\n<pre><code>&quot;message&quot;: &quot;Failed to parse multipart servlet request; nested exception is java.io.IOException: org.apache.tomcat.util.http.fileupload.FileUploadException: the request was rejected because no multipart boundary was found&quot;\n</code></pre>\n<p>Yes, and also tried with the boundary in the content type :)</p>\n<p>Here is the code of the controller:</p>\n<pre><code>package com.package\n\nimport com.package.ImageDTO;\nimport com.package.model.DeletedImageDTO;\nimport com.package.service.ImageService;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.CrossOrigin;\nimport org.springframework.web.bind.annotation.DeleteMapping;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestPart;\nimport org.springframework.web.bind.annotation.RestController;\nimport org.springframework.web.multipart.MultipartHttpServletRequest;\n\nimport java.io.IOException;\nimport java.util.Arrays;\nimport java.util.List;\n\n/**\n * Control's endPoints for authentication\n */\n@CrossOrigin(origins = &quot;*&quot;, maxAge = 3600)\n@RestController\n@RequestMapping(&quot;/api&quot;)\n@RequiredArgsConstructor\n@Slf4j\npublic class ImageController extends ValidationExceptionHandler {\n\n    private final ImageService imageService;\n\n    @GetMapping(&quot;/user/image&quot;)\n    public ResponseEntity&lt;List&lt;ImageDTO&gt;&gt; getUserImages() {\n        final List&lt;ImagesDTO&gt; allUserImages = imageService.getAllUserImages();\n        return ResponseEntity.status(HttpStatus.OK).body(allUserImages);\n    }\n\n    @PostMapping(value = &quot;/user/images&quot;, consumes = {MediaType.APPLICATION_JSON_VALUE, MediaType.MULTIPART_FORM_DATA_VALUE})\n    public ResponseEntity&lt;List&lt;ImageDTO&gt;&gt; saveUserImages(@RequestPart(name = &quot;imageDTOS&quot;) ImageDTO[] imageDTOS,\n                                                                     @RequestPart(name = &quot;deletedImageDTOs&quot;) DeletedImageDTO[] deletedImageDTOs,\n                                                                     MultipartHttpServletRequest request) throws IOException {\n        final List&lt;ImageDTO&gt; imageDTOSResponse = imageService.saveUserImages(Arrays.stream(imageDTOS).toList(),\n                Arrays.stream(deletedImageDTOs).toList(), request);\n\n        return ResponseEntity.status(HttpStatus.OK).body(imageDTOSResponse);\n    }\n\n    @DeleteMapping(&quot;/user/images/{id}&quot;)\n    public ResponseEntity&lt;Void&gt; deleteUserImage(@PathVariable(name = &quot;id&quot;) final Long id) {\n        imageService.deleteImages(id);\n        return ResponseEntity.noContent().build();\n    }\n}\n\n</code></pre>\n<p>The language of the backend is: Java, Spring boot</p>\n<p>Everything has been mentioned above.</p>\n"},{"tags":["java","exe","external"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":4,"creation_date":1671870796,"post_id":74905841,"comment_id":132190379,"body_markdown":"What is the delimiter used to indicate distinct commands (i.e., how does the engine know when a full command has been sent)? Does it use e.g., line separators? If so, what happens if you do `outputStream.write(&quot;isready\\n&quot;.getBytes())`?","body":"What is the delimiter used to indicate distinct commands (i.e., how does the engine know when a full command has been sent)? Does it use e.g., line separators? If so, what happens if you do <code>outputStream.write(&quot;isready\\n&quot;.getBytes())</code>?"},{"owner":{"account_id":11997456,"reputation":47,"user_id":8778503,"display_name":"Avon97"},"score":0,"creation_date":1671873958,"post_id":74905841,"comment_id":132190779,"body_markdown":"Thank you very much indeed it was missing a delimiter at the end.","body":"Thank you very much indeed it was missing a delimiter at the end."},{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1671878997,"post_id":74905841,"comment_id":132191550,"body_markdown":"As an aside, you may want to consider wrapping the output stream in an `OutputStreamWriter`, so that you can send strings directly without having to call `getBytes()`.","body":"As an aside, you may want to consider wrapping the output stream in an <code>OutputStreamWriter</code>, so that you can send strings directly without having to call <code>getBytes()</code>."}],"owner":{"account_id":11997456,"reputation":47,"user_id":8778503,"display_name":"Avon97"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671878936,"creation_date":1671861483,"question_id":74905841,"body_markdown":"Here I am trying to communicate with a chess engine, but every time when I write commands to it with an `OutputStream` object, it never gives any output. Only if I close the output stream it gives an output. However, then the engine stops. How can I resolve this issue please guide me the mistake that I did.\r\n\r\nHere is the code:\r\n```java\r\nURL resource = new Object().getClass().getResource(&quot;/engine/stockfish.exe&quot;);\r\nString path = resource.getPath();\r\nProcessBuilder pb = new ProcessBuilder(path);\r\ntry {\r\n    Process engine = pb.start();\r\n    InputStream inputStream = engine.getInputStream();\r\n    OutputStream outputStream = engine.getOutputStream();\r\n    Thread T = new Thread(new Runnable() {\r\n        @Override\r\n        public void run() {\r\n            try {\r\n                while (engine.isAlive()) {\r\n                    String s = &quot;&quot;;\r\n                    while (inputStream.available() &gt; 0) {\r\n                        s = s + (char) inputStream.read();\r\n                    }\r\n                    if (!&quot;&quot;.equals(s)) {\r\n                        System.out.println(s);\r\n                    }\r\n                }\r\n            } catch (Exception ex) {\r\n                ex.printStackTrace();\r\n            }\r\n        }\r\n    });\r\n    T.start();\r\n    outputStream.write(&quot;isready&quot;.getBytes());\r\n    outputStream.flush();\r\n//    outputStream.close();\r\n} catch (Exception ex) {\r\n    ex.printStackTrace();\r\n}\r\n```\r\nWhat I want the program to do is once the engine starts java program needs to write commands to it and read the output while keeping the engine running. In other words, I need to write multiple commands to it.","title":"How to communicate simultaneously with an exe using Java process object?","body":"<p>Here I am trying to communicate with a chess engine, but every time when I write commands to it with an <code>OutputStream</code> object, it never gives any output. Only if I close the output stream it gives an output. However, then the engine stops. How can I resolve this issue please guide me the mistake that I did.</p>\n<p>Here is the code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>URL resource = new Object().getClass().getResource(&quot;/engine/stockfish.exe&quot;);\nString path = resource.getPath();\nProcessBuilder pb = new ProcessBuilder(path);\ntry {\n    Process engine = pb.start();\n    InputStream inputStream = engine.getInputStream();\n    OutputStream outputStream = engine.getOutputStream();\n    Thread T = new Thread(new Runnable() {\n        @Override\n        public void run() {\n            try {\n                while (engine.isAlive()) {\n                    String s = &quot;&quot;;\n                    while (inputStream.available() &gt; 0) {\n                        s = s + (char) inputStream.read();\n                    }\n                    if (!&quot;&quot;.equals(s)) {\n                        System.out.println(s);\n                    }\n                }\n            } catch (Exception ex) {\n                ex.printStackTrace();\n            }\n        }\n    });\n    T.start();\n    outputStream.write(&quot;isready&quot;.getBytes());\n    outputStream.flush();\n//    outputStream.close();\n} catch (Exception ex) {\n    ex.printStackTrace();\n}\n</code></pre>\n<p>What I want the program to do is once the engine starts java program needs to write commands to it and read the output while keeping the engine running. In other words, I need to write multiple commands to it.</p>\n"},{"tags":["java","spring","apache-kafka"],"comments":[{"owner":{"account_id":25121309,"reputation":1105,"user_id":18969611,"display_name":"void void"},"score":2,"creation_date":1668364909,"post_id":74423656,"comment_id":131381960,"body_markdown":"a pass-through service layer won&#39;t induce any performance penalty or make the application any less light-weight.","body":"a pass-through service layer won&#39;t induce any performance penalty or make the application any less light-weight."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1671878623,"post_id":74423656,"comment_id":132191478,"body_markdown":"@void It adds network latency and extra serialization. That should be included as performance penalty?","body":"@void It adds network latency and extra serialization. That should be included as performance penalty?"},{"owner":{"account_id":25121309,"reputation":1105,"user_id":18969611,"display_name":"void void"},"score":0,"creation_date":1671883198,"post_id":74423656,"comment_id":132192152,"body_markdown":"@OneCricketeer I&#39;m not sure what extra latency or extra serialization you mean? From my understanding (without making any assumptions about the API) they already have a controller `ControllerX` doing something with some data it receives, making the controller call a service method to do the exact same thing does not add any penalty?","body":"@OneCricketeer I&#39;m not sure what extra latency or extra serialization you mean? From my understanding (without making any assumptions about the API) they already have a controller <code>ControllerX</code> doing something with some data it receives, making the controller call a service method to do the exact same thing does not add any penalty?"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1671895872,"post_id":74423656,"comment_id":132194167,"body_markdown":"@void I thought the question was asking using native Kafka client via Spring vs a RestController. Nevermind","body":"@void I thought the question was asking using native Kafka client via Spring vs a RestController. Nevermind"}],"answers":[{"tags":[],"owner":{"account_id":22512534,"reputation":30,"user_id":16707282,"display_name":"CostaVi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1668371671,"creation_date":1668371671,"answer_id":74424557,"question_id":74423656,"body_markdown":"In our projects, we try to always implement a service layer\r\n\r\n1. With a view to the future - it is not a fact that the rest controller will always be the trigger for dumping\r\n2. In the service layer, you can do some validation and processing of validation results\r\n3. Logging through the service","title":"Do I really need a service layer/classes along with springboot RestController if I&#39;m not adding any business logic?","body":"<p>In our projects, we try to always implement a service layer</p>\n<ol>\n<li>With a view to the future - it is not a fact that the rest controller will always be the trigger for dumping</li>\n<li>In the service layer, you can do some validation and processing of validation results</li>\n<li>Logging through the service</li>\n</ol>\n"}],"owner":{"account_id":11584877,"reputation":63,"user_id":8487403,"display_name":"boring-coder"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":314,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74424557,"answer_count":1,"score":0,"last_activity_date":1671878552,"creation_date":1668364482,"question_id":74423656,"body_markdown":"I understand that it is advisable to add Service along with Controller classes keeping the best practices in the mind. Say, if I have to create a dump-api which is responsible to dump all inbound data on Kafka topic in the Kafka cluster without any logic. I believe best practices are meant to get the best out of an application, and I believe skipping service layer is serving the purpose.\r\n\r\nSo, do I really need service layer in this case since I have to make my application light-weight?\r\n\r\nI tried reading some blogs on best practices and architectural blogs (on lightweight and performance talk) but didn&#39;t find my answer.","title":"Do I really need a service layer/classes along with springboot RestController if I&#39;m not adding any business logic?","body":"<p>I understand that it is advisable to add Service along with Controller classes keeping the best practices in the mind. Say, if I have to create a dump-api which is responsible to dump all inbound data on Kafka topic in the Kafka cluster without any logic. I believe best practices are meant to get the best out of an application, and I believe skipping service layer is serving the purpose.</p>\n<p>So, do I really need service layer in this case since I have to make my application light-weight?</p>\n<p>I tried reading some blogs on best practices and architectural blogs (on lightweight and performance talk) but didn't find my answer.</p>\n"},{"tags":["java","inheritance","interface"],"comments":[{"owner":{"account_id":3023214,"reputation":20362,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":1,"creation_date":1671798710,"post_id":74899639,"comment_id":132178699,"body_markdown":"As a short rule: You cannot change the signature of the method. So you have to stick to `MNO&lt;DummyObj&gt;` in your concrete service.","body":"As a short rule: You cannot change the signature of the method. So you have to stick to <code>MNO&lt;DummyObj&gt;</code> in your concrete service."},{"owner":{"account_id":3023214,"reputation":20362,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":1,"creation_date":1671799757,"post_id":74899639,"comment_id":132178993,"body_markdown":"Imagine having another `class OtherObj` and another `class OtherMNO implements MNO&lt;OtherObj&gt;`. When using the interface (or the abstract class), I could easily have an instance of my `OtherMNO` serve as an argument to your method `fromMNO`. But your concrete service could not handle that. This is the reason, why the compiler forbids that.","body":"Imagine having another <code>class OtherObj</code> and another <code>class OtherMNO implements MNO&lt;OtherObj&gt;</code>. When using the interface (or the abstract class), I could easily have an instance of my <code>OtherMNO</code> serve as an argument to your method <code>fromMNO</code>. But your concrete service could not handle that. This is the reason, why the compiler forbids that."},{"owner":{"account_id":6385266,"reputation":29,"user_id":4953392,"display_name":"Infinias"},"score":0,"creation_date":1671799963,"post_id":74899639,"comment_id":132179038,"body_markdown":"@Seelenvirtuose yep, you are correct. I need to add a type definition to the interface.","body":"@Seelenvirtuose yep, you are correct. I need to add a type definition to the interface."}],"answers":[{"tags":[],"owner":{"account_id":6385266,"reputation":29,"user_id":4953392,"display_name":"Infinias"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671877724,"creation_date":1671799895,"answer_id":74899845,"question_id":74899639,"body_markdown":"As [@Seelenvirtuose][1] pointed out, yes, it is impossible to change the signature of the function.\r\n\r\nHowever it is possible to change the required type by using\r\n\r\n```java\r\npublic Interface ObjectService&lt;T, M extends MNO&lt;T&gt;&gt; {\r\n\r\n  public T fromMNO(M mno);\r\n\r\n}\r\n\r\npublic AbstractObjectService&lt;T, M extends MNO&lt;T&gt;&gt; implements ObjectService&lt;T, M&gt; {\r\n\r\n  public abstract T fromMNO (M mno);\r\n\r\n}\r\n\r\npublic DummyService extends AbstractObjectService&lt;DummyObj, DummyMNO&gt; {\r\n\r\n  @Override\r\n  public DummyObj fromMNO (DummyMNO mno) {\r\n    //do stuff\r\n    return new DummyObj();\r\n  }\r\n\r\n}\r\n```\r\n\r\n\r\n[1]: https://stackoverflow.com/users/2563754/seelenvirtuose","title":"Why is this Java function signature marked as wrong for overriding?","body":"<p>As <a href=\"https://stackoverflow.com/users/2563754/seelenvirtuose\">@Seelenvirtuose</a> pointed out, yes, it is impossible to change the signature of the function.</p>\n<p>However it is possible to change the required type by using</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Interface ObjectService&lt;T, M extends MNO&lt;T&gt;&gt; {\n\n  public T fromMNO(M mno);\n\n}\n\npublic AbstractObjectService&lt;T, M extends MNO&lt;T&gt;&gt; implements ObjectService&lt;T, M&gt; {\n\n  public abstract T fromMNO (M mno);\n\n}\n\npublic DummyService extends AbstractObjectService&lt;DummyObj, DummyMNO&gt; {\n\n  @Override\n  public DummyObj fromMNO (DummyMNO mno) {\n    //do stuff\n    return new DummyObj();\n  }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27307430,"reputation":117,"user_id":20823153,"display_name":"itshagunrathore"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671878518,"creation_date":1671878518,"answer_id":74907081,"question_id":74899639,"body_markdown":"The fromMNO method that you are overriding in the DummyService class has a type mismatch with the fnoMNO in AbstractObjectService.\r\n\r\nOne of the solution is you already put in the question that is changing the argument in the DummyService class&#39;s method, you can do it like this...\r\n\r\n    public DummyService extends AbstractObjectService&lt;DummyObj&gt; {\r\n      @Override\r\n      public DummyObj fromMNO (MNO&lt;DummyObj&gt; mno) {\r\n        return new DummyObj();\r\n      }\r\n    }\r\n\r\nElse, You can change the original type in the AbstractObjectService\r\n\r\n    public abstract class AbstractObjectService&lt;T&gt; implements ObjectService&lt;T&gt; {\r\n    \r\n      public abstract T fromMNO (DummyMNO mno);\r\n    \r\n    }\r\n\r\n\r\n","title":"Why is this Java function signature marked as wrong for overriding?","body":"<p>The fromMNO method that you are overriding in the DummyService class has a type mismatch with the fnoMNO in AbstractObjectService.</p>\n<p>One of the solution is you already put in the question that is changing the argument in the DummyService class's method, you can do it like this...</p>\n<pre><code>public DummyService extends AbstractObjectService&lt;DummyObj&gt; {\n  @Override\n  public DummyObj fromMNO (MNO&lt;DummyObj&gt; mno) {\n    return new DummyObj();\n  }\n}\n</code></pre>\n<p>Else, You can change the original type in the AbstractObjectService</p>\n<pre><code>public abstract class AbstractObjectService&lt;T&gt; implements ObjectService&lt;T&gt; {\n\n  public abstract T fromMNO (DummyMNO mno);\n\n}\n</code></pre>\n"}],"owner":{"account_id":6385266,"reputation":29,"user_id":4953392,"display_name":"Infinias"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74899845,"answer_count":2,"score":0,"last_activity_date":1671878518,"creation_date":1671798397,"question_id":74899639,"body_markdown":"Following situation\r\n\r\nThis Interface\r\n\r\n```\r\npublic Interface ObjectService&lt;T&gt; {\r\n\r\n  public T fromMNO(MNO&lt;T&gt; mno);\r\n\r\n}\r\n```\r\n\r\ngets used by this abstract class\r\n\r\n```\r\npublic AbstractObjectService&lt;T&gt; implements ObjectService&lt;T&gt; {\r\n\r\n  public abstract T fromMNO (MNO&lt;T&gt; mno);\r\n\r\n}\r\n```\r\n\r\nimplemented in this class\r\n\r\n```\r\npublic DummyService extends AbstractObjectService&lt;DummyObj&gt; {\r\n\r\n  @Override\r\n  public DummyObj fromMNO (DummyMNO mno) {\r\n    //do stuff\r\n    return new DummyObj();\r\n  }\r\n\r\n}\r\n```\r\n\r\nusing this interface and interfaced object\r\n\r\n```\r\npublic interface MNO&lt;T&gt; {}\r\n\r\n\r\npublic class DummyMNO implements MNO&lt;DummyObj&gt; {}\r\n```\r\n\r\nand a normal object\r\n\r\n```\r\npublic class DummyObj {}\r\n```\r\n\r\nNow the problem is: `DummyService#fromMNO` gets flagged as not overrideable in VS Code bc of a type mismatch.\r\n\r\nBut as far as I understand `DummyService` with `T` as `DummyObj` results in `public DummyObj fromMNO (MNO&lt;DummyObj&gt; mno)` and `DummyMNO` IS A `MNO&lt;DummyObj&gt;`?\r\n\r\nAm I wrong or is there something else fishy?\r\n\r\n\r\n\r\nA &quot;solution&quot; would be to keep the &quot;original type&quot; and cast like this\r\n```\r\n@Override\r\n  public DummyObj fromMNO&lt;T&gt; (MNO&lt;DummyObj&gt; mno) {\r\n    DummyMNO d = (DummyMNO) mno;\r\n    //do stuff\r\n    return new DummyObj();\r\n  }\r\n```\r\nwhich solves the problem of the error, but undermines the explicit type I wanted to achive.","title":"Why is this Java function signature marked as wrong for overriding?","body":"<p>Following situation</p>\n<p>This Interface</p>\n<pre><code>public Interface ObjectService&lt;T&gt; {\n\n  public T fromMNO(MNO&lt;T&gt; mno);\n\n}\n</code></pre>\n<p>gets used by this abstract class</p>\n<pre><code>public AbstractObjectService&lt;T&gt; implements ObjectService&lt;T&gt; {\n\n  public abstract T fromMNO (MNO&lt;T&gt; mno);\n\n}\n</code></pre>\n<p>implemented in this class</p>\n<pre><code>public DummyService extends AbstractObjectService&lt;DummyObj&gt; {\n\n  @Override\n  public DummyObj fromMNO (DummyMNO mno) {\n    //do stuff\n    return new DummyObj();\n  }\n\n}\n</code></pre>\n<p>using this interface and interfaced object</p>\n<pre><code>public interface MNO&lt;T&gt; {}\n\n\npublic class DummyMNO implements MNO&lt;DummyObj&gt; {}\n</code></pre>\n<p>and a normal object</p>\n<pre><code>public class DummyObj {}\n</code></pre>\n<p>Now the problem is: <code>DummyService#fromMNO</code> gets flagged as not overrideable in VS Code bc of a type mismatch.</p>\n<p>But as far as I understand <code>DummyService</code> with <code>T</code> as <code>DummyObj</code> results in <code>public DummyObj fromMNO (MNO&lt;DummyObj&gt; mno)</code> and <code>DummyMNO</code> IS A <code>MNO&lt;DummyObj&gt;</code>?</p>\n<p>Am I wrong or is there something else fishy?</p>\n<p>A &quot;solution&quot; would be to keep the &quot;original type&quot; and cast like this</p>\n<pre><code>@Override\n  public DummyObj fromMNO&lt;T&gt; (MNO&lt;DummyObj&gt; mno) {\n    DummyMNO d = (DummyMNO) mno;\n    //do stuff\n    return new DummyObj();\n  }\n</code></pre>\n<p>which solves the problem of the error, but undermines the explicit type I wanted to achive.</p>\n"},{"tags":["java","maven","visual-studio-code","javafx","jlink"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":3,"creation_date":1671831181,"post_id":74903732,"comment_id":132186519,"body_markdown":"What you have that works pre-`jlink` should &quot;just work&quot; post-`jlink` as well. Seems like your resources are being packaged incorrectly. Could you show your `pom.xml` file and the exact commands you use to create your custom run-time image (step-by-step)?","body":"What you have that works pre-<code>jlink</code> should &quot;just work&quot; post-<code>jlink</code> as well. Seems like your resources are being packaged incorrectly. Could you show your <code>pom.xml</code> file and the exact commands you use to create your custom run-time image (step-by-step)?"}],"answers":[{"tags":[],"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1671872349,"creation_date":1671852244,"answer_id":74905407,"question_id":74903732,"body_markdown":"# Problem\r\n\r\nYou have code such as the following:\r\n\r\n&gt;```lang-java\r\n&gt;public static final String PATH_TO_IMG = App.class.getResource(&quot;/img&quot;).toString();\r\n&gt;```\r\n\r\nThis is trying to get the resource `&quot;/img&quot;`. But according to your question, that is not a resource _per se_, but instead a directory (i.e., a package). And the problem appears to be the inconsistent behavior of `Class#getResource(String)` when the `String` argument denotes a directory. When your code is _not_ in a JRT image then the call to `#getResource(String)` will return a `URL`; when your code _is_ packaged in a JRT image then the same call will return `null`, despite the fact the directory exists. \r\n\r\nI don&#39;t know if this behavior is a bug or simply undefined. One interesting thing is [`ModuleReader#find(String)`][1] clearly is _capable_ of finding directories:\r\n\r\n&gt; Finds a resource, returning a URI to the resource in the module.\r\n&gt;\r\n&gt; If the module reader can determine that the name locates a directory then the resulting URI will end with a slash (`&#39;/&#39;`).\r\n\r\nThat indicates, to me at least, that what you&#39;re trying to do should be possible. But even that method fails when the module is packaged in a JRT image (by returning an empty `Optional`). Note that if you query the [`ModuleReader#list()`][2] method it will include directories when the module is **not** in a JRT image, but those same directories are not included when the module **is** in a JRT image.\r\n\r\n## Example\r\n\r\nI&#39;ve put a minimal example demonstrating this problem at the end of this answer.\r\n\r\n---\r\n\r\n# A Solution\r\n\r\nI assume you&#39;re using these constants (e.g., `PATH_TO_IMG`) to do stuff like the following:\r\n\r\n```lang-java\r\nImage image = new Image(PATH_TO_IMG + &quot;foo.png&quot;);\r\n```\r\n\r\nWhich avoids having calls to `SomeClass.class.getResource(&quot;...&quot;).toString()` everywhere. If this is your goal, then I can think of at least one solution. Change your constants to simply reference the _resource root_. For example:\r\n\r\n```lang-java\r\npublic static final String IMG_ROOT = &quot;/img&quot;;\r\n```\r\n\r\nThen create a utility method to resolve the resource:\r\n\r\n```lang-java\r\npublic static String getImagePath(String name) {\r\n    var resource = IMG_ROOT + &quot;/&quot; + name;\r\n    var url = App.class.getResource(resource);\r\n    if (url == null) {\r\n        throw new RuntimeException(&quot;could not find resource: &quot; + resource);\r\n    }\r\n    return url.toString();\r\n}\r\n```\r\n\r\nAnd then you can use that utility method like so:\r\n\r\n```lang-java\r\nImage image = new Image(getImagePath(&quot;foo.png&quot;));\r\n```\r\n\r\n### Possible Alternative\r\n\r\nAnother option might be to make use of the JRT `FileSystem` implementation. Something like the following:\r\n\r\n```lang-java\r\nFileSystem jrtFs = FileSystems.getFileSystem(URI.create(&quot;jrt:/&quot;));\r\nPath path = jrtFs.getPath(&quot;modules&quot;, &quot;&lt;module-name&gt;&quot;, &quot;img&quot;);\r\n// Note: Doesn&#39;t seem to include the trailing &#39;/&#39;\r\nString pathToImg = path.toUri().toString();\r\n```\r\n\r\nThough you&#39;ll have to detect if your code is in a JRT image or not.\r\n\r\n---\r\n\r\n# Minimal Example\r\n\r\nGiven this doesn&#39;t have to do with JavaFX specifically, I&#39;ve created a minimal example to demonstrate this problem.\r\n\r\n* Maven 3.8.6\r\n* OpenJDK 19.0.1 2022-10-18\r\n* Tested on Windows 11\r\n\r\n## Source Code\r\n\r\n#### Project structure:\r\n\r\n```lang-none\r\n|   pom.xml\r\n|\r\n\\---src\r\n    \\---main\r\n        +---java\r\n        |   |   module-info.java\r\n        |   |\r\n        |   \\---sample\r\n        |           Main.java\r\n        |\r\n        \\---resources\r\n            \\---data\r\n                    file.txt\r\n```\r\n\r\n#### pom.xml:\r\n\r\n```lang-xml\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n    \r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;groupId&gt;sample&lt;/groupId&gt;\r\n    &lt;artifactId&gt;app&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    \r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;maven.compiler.release&gt;19&lt;/maven.compiler.release&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.10.1&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n            \r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.3.0&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.3.0&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-jlink-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.1.0&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;launcher&gt;app=app/sample.Main&lt;/launcher&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n#### module-info.java:\r\n\r\n```lang-java\r\nmodule app {}\r\n```\r\n\r\n#### Main.java:\r\n\r\n```lang-java\r\npackage sample;\r\n\r\npublic class Main {\r\n\r\n    public static void main(String[] args) {\r\n        var modRef = Main.class.getModule()\r\n            .getLayer()\r\n            .configuration()\r\n            .findModule(Main.class.getModule().getName())\r\n            .orElseThrow()\r\n            .reference();\r\n        System.out.printf(&quot;Module Location = %s%n%n&quot;, modRef.location().orElseThrow());\r\n\r\n        var dataUrl = Main.class.getResource(&quot;/data&quot;);\r\n        var fileUrl = Main.class.getResource(&quot;/data/file.txt&quot;);\r\n        System.out.printf(&quot;Data URL = %s%nFile URL = %s%n%n&quot;, dataUrl, fileUrl);\r\n    }\r\n}\r\n```\r\n\r\n## Building\r\n\r\nI ran these two commands to build the project:\r\n\r\n1. `mvn compile jar:jar`\r\n2. `mvn jlink:jlink`\r\n\r\nFor whatever reason, doing `mvn compile jar:jar jlink:jlink` caused the `jlink` task to fail.\r\n\r\n## Output\r\n\r\nAnd here is the different output for the different packaging:\r\n\r\n#### Exploded module:\r\n\r\n```lang-none\r\n...&gt; java -p target\\classes -m app/sample.Main\r\nModule Location = file:///C:/Users/***/Desktop/jlink-tests/target/classes/\r\n\r\nData URL = file:/C:/Users/***/Desktop/jlink-tests/target/classes/data/\r\nFile URL = file:/C:/Users/***/Desktop/jlink-tests/target/classes/data/file.txt\r\n```\r\n\r\n#### Modular JAR:\r\n\r\n```lang-none\r\n...&gt; java -p target\\app-1.0-SNAPSHOT.jar -m app/sample.Main\r\nModule Location = file:///C:/Users/***/Desktop/jlink-tests/target/app-1.0-SNAPSHOT.jar\r\n\r\nData URL = jar:file:///C:/Users/***/Desktop/jlink-tests/target/app-1.0-SNAPSHOT.jar!/data/\r\nFile URL = jar:file:///C:/Users/***/Desktop/jlink-tests/target/app-1.0-SNAPSHOT.jar!/data/file.txt\r\n```\r\n\r\n#### JRT Image:\r\n\r\n```lang-none\r\n...&gt; .\\target\\maven-jlink\\default\\bin\\app\r\nModule Location = jrt:/app\r\n\r\nData URL = null\r\nFile URL = jrt:/app/data/file.txt\r\n```\r\n\r\n## Results\r\n\r\nAs you can see, the call to `getResource(&quot;/data/file.txt&quot;)` worked every time, but the call to `getResource(&quot;/data&quot;)` did not work for the JRT-packaged version.\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/module/ModuleReader.html#find(java.lang.String)\r\n  [2]: https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/module/ModuleReader.html#list()","title":"How to get a resources path after jlink-ing?","body":"<h1>Problem</h1>\n<p>You have code such as the following:</p>\n<blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>public static final String PATH_TO_IMG = App.class.getResource(&quot;/img&quot;).toString();\n</code></pre>\n</blockquote>\n<p>This is trying to get the resource <code>&quot;/img&quot;</code>. But according to your question, that is not a resource <em>per se</em>, but instead a directory (i.e., a package). And the problem appears to be the inconsistent behavior of <code>Class#getResource(String)</code> when the <code>String</code> argument denotes a directory. When your code is <em>not</em> in a JRT image then the call to <code>#getResource(String)</code> will return a <code>URL</code>; when your code <em>is</em> packaged in a JRT image then the same call will return <code>null</code>, despite the fact the directory exists.</p>\n<p>I don't know if this behavior is a bug or simply undefined. One interesting thing is <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/module/ModuleReader.html#find(java.lang.String)\" rel=\"nofollow noreferrer\"><code>ModuleReader#find(String)</code></a> clearly is <em>capable</em> of finding directories:</p>\n<blockquote>\n<p>Finds a resource, returning a URI to the resource in the module.</p>\n<p>If the module reader can determine that the name locates a directory then the resulting URI will end with a slash (<code>'/'</code>).</p>\n</blockquote>\n<p>That indicates, to me at least, that what you're trying to do should be possible. But even that method fails when the module is packaged in a JRT image (by returning an empty <code>Optional</code>). Note that if you query the <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/module/ModuleReader.html#list()\" rel=\"nofollow noreferrer\"><code>ModuleReader#list()</code></a> method it will include directories when the module is <strong>not</strong> in a JRT image, but those same directories are not included when the module <strong>is</strong> in a JRT image.</p>\n<h2>Example</h2>\n<p>I've put a minimal example demonstrating this problem at the end of this answer.</p>\n<hr />\n<h1>A Solution</h1>\n<p>I assume you're using these constants (e.g., <code>PATH_TO_IMG</code>) to do stuff like the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Image image = new Image(PATH_TO_IMG + &quot;foo.png&quot;);\n</code></pre>\n<p>Which avoids having calls to <code>SomeClass.class.getResource(&quot;...&quot;).toString()</code> everywhere. If this is your goal, then I can think of at least one solution. Change your constants to simply reference the <em>resource root</em>. For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static final String IMG_ROOT = &quot;/img&quot;;\n</code></pre>\n<p>Then create a utility method to resolve the resource:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static String getImagePath(String name) {\n    var resource = IMG_ROOT + &quot;/&quot; + name;\n    var url = App.class.getResource(resource);\n    if (url == null) {\n        throw new RuntimeException(&quot;could not find resource: &quot; + resource);\n    }\n    return url.toString();\n}\n</code></pre>\n<p>And then you can use that utility method like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Image image = new Image(getImagePath(&quot;foo.png&quot;));\n</code></pre>\n<h3>Possible Alternative</h3>\n<p>Another option might be to make use of the JRT <code>FileSystem</code> implementation. Something like the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>FileSystem jrtFs = FileSystems.getFileSystem(URI.create(&quot;jrt:/&quot;));\nPath path = jrtFs.getPath(&quot;modules&quot;, &quot;&lt;module-name&gt;&quot;, &quot;img&quot;);\n// Note: Doesn't seem to include the trailing '/'\nString pathToImg = path.toUri().toString();\n</code></pre>\n<p>Though you'll have to detect if your code is in a JRT image or not.</p>\n<hr />\n<h1>Minimal Example</h1>\n<p>Given this doesn't have to do with JavaFX specifically, I've created a minimal example to demonstrate this problem.</p>\n<ul>\n<li>Maven 3.8.6</li>\n<li>OpenJDK 19.0.1 2022-10-18</li>\n<li>Tested on Windows 11</li>\n</ul>\n<h2>Source Code</h2>\n<h4>Project structure:</h4>\n<pre class=\"lang-none prettyprint-override\"><code>|   pom.xml\n|\n\\---src\n    \\---main\n        +---java\n        |   |   module-info.java\n        |   |\n        |   \\---sample\n        |           Main.java\n        |\n        \\---resources\n            \\---data\n                    file.txt\n</code></pre>\n<h4>pom.xml:</h4>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n    \n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;sample&lt;/groupId&gt;\n    &lt;artifactId&gt;app&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    \n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.release&gt;19&lt;/maven.compiler.release&gt;\n    &lt;/properties&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.10.1&lt;/version&gt;\n            &lt;/plugin&gt;\n            \n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.3.0&lt;/version&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.3.0&lt;/version&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-jlink-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;launcher&gt;app=app/sample.Main&lt;/launcher&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<h4>module-info.java:</h4>\n<pre class=\"lang-java prettyprint-override\"><code>module app {}\n</code></pre>\n<h4>Main.java:</h4>\n<pre class=\"lang-java prettyprint-override\"><code>package sample;\n\npublic class Main {\n\n    public static void main(String[] args) {\n        var modRef = Main.class.getModule()\n            .getLayer()\n            .configuration()\n            .findModule(Main.class.getModule().getName())\n            .orElseThrow()\n            .reference();\n        System.out.printf(&quot;Module Location = %s%n%n&quot;, modRef.location().orElseThrow());\n\n        var dataUrl = Main.class.getResource(&quot;/data&quot;);\n        var fileUrl = Main.class.getResource(&quot;/data/file.txt&quot;);\n        System.out.printf(&quot;Data URL = %s%nFile URL = %s%n%n&quot;, dataUrl, fileUrl);\n    }\n}\n</code></pre>\n<h2>Building</h2>\n<p>I ran these two commands to build the project:</p>\n<ol>\n<li><code>mvn compile jar:jar</code></li>\n<li><code>mvn jlink:jlink</code></li>\n</ol>\n<p>For whatever reason, doing <code>mvn compile jar:jar jlink:jlink</code> caused the <code>jlink</code> task to fail.</p>\n<h2>Output</h2>\n<p>And here is the different output for the different packaging:</p>\n<h4>Exploded module:</h4>\n<pre class=\"lang-none prettyprint-override\"><code>...&gt; java -p target\\classes -m app/sample.Main\nModule Location = file:///C:/Users/***/Desktop/jlink-tests/target/classes/\n\nData URL = file:/C:/Users/***/Desktop/jlink-tests/target/classes/data/\nFile URL = file:/C:/Users/***/Desktop/jlink-tests/target/classes/data/file.txt\n</code></pre>\n<h4>Modular JAR:</h4>\n<pre class=\"lang-none prettyprint-override\"><code>...&gt; java -p target\\app-1.0-SNAPSHOT.jar -m app/sample.Main\nModule Location = file:///C:/Users/***/Desktop/jlink-tests/target/app-1.0-SNAPSHOT.jar\n\nData URL = jar:file:///C:/Users/***/Desktop/jlink-tests/target/app-1.0-SNAPSHOT.jar!/data/\nFile URL = jar:file:///C:/Users/***/Desktop/jlink-tests/target/app-1.0-SNAPSHOT.jar!/data/file.txt\n</code></pre>\n<h4>JRT Image:</h4>\n<pre class=\"lang-none prettyprint-override\"><code>...&gt; .\\target\\maven-jlink\\default\\bin\\app\nModule Location = jrt:/app\n\nData URL = null\nFile URL = jrt:/app/data/file.txt\n</code></pre>\n<h2>Results</h2>\n<p>As you can see, the call to <code>getResource(&quot;/data/file.txt&quot;)</code> worked every time, but the call to <code>getResource(&quot;/data&quot;)</code> did not work for the JRT-packaged version.</p>\n"}],"owner":{"account_id":27338341,"reputation":43,"user_id":20849423,"display_name":"DevFromAbove"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":329,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":74905407,"answer_count":1,"score":4,"last_activity_date":1671878015,"creation_date":1671827130,"question_id":74903732,"body_markdown":"I am trying to make my JavaFx-Application executable using Maven and Visual Studio Code.\r\n\r\nAfter some time spent on this topic, I found some posts mentioning jlink.\r\n\r\nI am a newcomer when it comes to packaging Java/JavaFX applications, so I gave it a try.\r\n\r\nCurrently, I can at least execute the launcher for the package.\r\n\r\nBut immediately after starting the application, a NullPointerException is thrown: \r\n**Cannot invoke &quot;Object.toString()&quot; because the return value of &quot;java.lang.Class.getResource(String)&quot; is null.**\r\n\r\nFor styling the components of my view I created some .css-files and put them inside a /style directory. This directory I placed this, according to the sample JavaFx application, inside a /resources directory created by Maven. In a similar manner, I proceeded with my sound and image files.\r\n\r\nHere you can see an excerpt of my directory structure.\r\n\r\n```\r\n|\r\n|--src/main\r\n|  |\r\n|  |-- java\r\n|  |   | ...\r\n|  |\r\n|  |-- resources\r\n|      |\r\n|      |-- img\r\n|      |   | ...    \r\n|      |\r\n|      |-- style\r\n|      |   | ...\r\n|      |\r\n|      |-- sound\r\n|          | ...\r\n|\r\n|-- target\r\n    |\r\n    |-- classes\r\n    |   | ...\r\n    |   |\r\n    |   |-- img\r\n    |   |   | ...\r\n    |   |\r\n    |   |-- style\r\n    |   |   | ...\r\n    |   |\r\n    |   |-- sound\r\n    |   |   | ...\r\n    |\r\n    |-- ...\r\n    |\r\n    |-- app\r\n        |\r\n        |-- bin\r\n        |-- ...\r\n```\r\n\r\n\r\nNow I am trying to access my resources from within my application.\r\n\r\nThis was my first approach. It works just fine when running from VSCode.\r\n\r\n```\r\n    public static final String PATH_TO_STYLESHEET = App.class.getResource(&quot;/style&quot;).toString();\r\n    public static final String PATH_TO_IMG = App.class.getResource(&quot;/img&quot;).toString();\r\n    public static final String PATH_TO_SOUNDS = App.class.getResource(&quot;/sounds&quot;).toString();\r\n```\r\n\r\nBut after running jlink, my application crashes, showing the NullPointerException mentioned earlier.\r\n\r\nHere is my pom.xml:\r\n\r\n```xml\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n    \r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n    &lt;artifactId&gt;App&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;maven.compiler.release&gt;19&lt;/maven.compiler.release&gt;\r\n        &lt;javafx.version&gt;19&lt;/javafx.version&gt;\r\n        &lt;javafx.maven.plugin.version&gt;0.0.8&lt;/javafx.maven.plugin.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\r\n            &lt;version&gt;${javafx.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javafx-media&lt;/artifactId&gt;\r\n            &lt;version&gt;${javafx.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\r\n            &lt;version&gt;${javafx.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.8.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;release&gt;${maven.compiler.release}&lt;/release&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;${javafx.maven.plugin.version}&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;release&gt;${maven.compiler.release}&lt;/release&gt;\r\n                    &lt;jlinkImageName&gt;App&lt;/jlinkImageName&gt;\r\n                    &lt;launcher&gt;launcher&lt;/launcher&gt;\r\n                    &lt;mainClass&gt;com.test.App&lt;/mainClass&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n        &lt;resources&gt;\r\n            &lt;resource&gt;\r\n                &lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n            &lt;/resource&gt;\r\n        &lt;/resources&gt;\r\n    &lt;/build&gt;\r\n    \r\n&lt;/project&gt;\r\n```\r\n\r\nAnd this is the command I have been using for creating the package.\r\n\r\n`mvn javafx:jlink -f pom.xml`\r\n\r\nDoes anyone have an idea how I can get the path to my stylesheets, images, and sounds, after running jlink? The path is absolutely sufficient. I do not need a file itself.\r\n\r\nIs there an option to copy the resources to a specific location?","title":"How to get a resources path after jlink-ing?","body":"<p>I am trying to make my JavaFx-Application executable using Maven and Visual Studio Code.</p>\n<p>After some time spent on this topic, I found some posts mentioning jlink.</p>\n<p>I am a newcomer when it comes to packaging Java/JavaFX applications, so I gave it a try.</p>\n<p>Currently, I can at least execute the launcher for the package.</p>\n<p>But immediately after starting the application, a NullPointerException is thrown:\n<strong>Cannot invoke &quot;Object.toString()&quot; because the return value of &quot;java.lang.Class.getResource(String)&quot; is null.</strong></p>\n<p>For styling the components of my view I created some .css-files and put them inside a /style directory. This directory I placed this, according to the sample JavaFx application, inside a /resources directory created by Maven. In a similar manner, I proceeded with my sound and image files.</p>\n<p>Here you can see an excerpt of my directory structure.</p>\n<pre><code>|\n|--src/main\n|  |\n|  |-- java\n|  |   | ...\n|  |\n|  |-- resources\n|      |\n|      |-- img\n|      |   | ...    \n|      |\n|      |-- style\n|      |   | ...\n|      |\n|      |-- sound\n|          | ...\n|\n|-- target\n    |\n    |-- classes\n    |   | ...\n    |   |\n    |   |-- img\n    |   |   | ...\n    |   |\n    |   |-- style\n    |   |   | ...\n    |   |\n    |   |-- sound\n    |   |   | ...\n    |\n    |-- ...\n    |\n    |-- app\n        |\n        |-- bin\n        |-- ...\n</code></pre>\n<p>Now I am trying to access my resources from within my application.</p>\n<p>This was my first approach. It works just fine when running from VSCode.</p>\n<pre><code>    public static final String PATH_TO_STYLESHEET = App.class.getResource(&quot;/style&quot;).toString();\n    public static final String PATH_TO_IMG = App.class.getResource(&quot;/img&quot;).toString();\n    public static final String PATH_TO_SOUNDS = App.class.getResource(&quot;/sounds&quot;).toString();\n</code></pre>\n<p>But after running jlink, my application crashes, showing the NullPointerException mentioned earlier.</p>\n<p>Here is my pom.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n    \n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n    &lt;artifactId&gt;App&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    \n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.release&gt;19&lt;/maven.compiler.release&gt;\n        &lt;javafx.version&gt;19&lt;/javafx.version&gt;\n        &lt;javafx.maven.plugin.version&gt;0.0.8&lt;/javafx.maven.plugin.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\n            &lt;version&gt;${javafx.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-media&lt;/artifactId&gt;\n            &lt;version&gt;${javafx.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\n            &lt;version&gt;${javafx.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;release&gt;${maven.compiler.release}&lt;/release&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${javafx.maven.plugin.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;release&gt;${maven.compiler.release}&lt;/release&gt;\n                    &lt;jlinkImageName&gt;App&lt;/jlinkImageName&gt;\n                    &lt;launcher&gt;launcher&lt;/launcher&gt;\n                    &lt;mainClass&gt;com.test.App&lt;/mainClass&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n        &lt;resources&gt;\n            &lt;resource&gt;\n                &lt;directory&gt;src/main/resources&lt;/directory&gt;\n            &lt;/resource&gt;\n        &lt;/resources&gt;\n    &lt;/build&gt;\n    \n&lt;/project&gt;\n</code></pre>\n<p>And this is the command I have been using for creating the package.</p>\n<p><code>mvn javafx:jlink -f pom.xml</code></p>\n<p>Does anyone have an idea how I can get the path to my stylesheets, images, and sounds, after running jlink? The path is absolutely sufficient. I do not need a file itself.</p>\n<p>Is there an option to copy the resources to a specific location?</p>\n"},{"tags":["java","hibernate","criteria","hibernate-cache"],"owner":{"account_id":962527,"reputation":2131,"user_id":986566,"accept_rate":63,"display_name":"or123456"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671877936,"creation_date":1671875674,"question_id":74906830,"body_markdown":"I enabled second level cache in hibernate.&lt;br&gt;\r\n\r\n    &lt;prop key=&quot;hibernate.cache.use_second_level_cache&quot;&gt;true&lt;/prop&gt;\r\n\t&lt;prop key=&quot;hibernate.cache.use_query_cache&quot;&gt;true&lt;/prop&gt;\r\n\t&lt;prop key=&quot;hibernate.cache.region.factory_class&quot;&gt;org.hibernate.cache.ehcache.EhCacheRegionFactory&lt;/prop&gt;\r\n\t&lt;prop key=&quot;hibernate.cache.provider_class&quot;&gt;org.hibernate.cache.HashtableCacheProvider&lt;/prop&gt;\r\n\r\nwhen get entity with id, this cache work correctly, but when use of criteria query not work.&lt;br&gt;\r\nAfter searching, I realized that the cache is activated by adding a ***setCacheable*** method to the query.&lt;br&gt;\r\n\r\nBut I have a big problem&lt;br&gt;\r\n**There are a lot of criteria queries throughout the project, and on the other hand, the criteria queries are derived from another class in another project, and I don&#39;t have access to that external class.**&lt;br&gt;\r\n\r\nIs there a way to apply this setting to all criteria queries in the entire project by setting it once ?","title":"enable cache for all criteria queries in throughout the project","body":"<p>I enabled second level cache in hibernate.<br></p>\n<pre><code>&lt;prop key=&quot;hibernate.cache.use_second_level_cache&quot;&gt;true&lt;/prop&gt;\n&lt;prop key=&quot;hibernate.cache.use_query_cache&quot;&gt;true&lt;/prop&gt;\n&lt;prop key=&quot;hibernate.cache.region.factory_class&quot;&gt;org.hibernate.cache.ehcache.EhCacheRegionFactory&lt;/prop&gt;\n&lt;prop key=&quot;hibernate.cache.provider_class&quot;&gt;org.hibernate.cache.HashtableCacheProvider&lt;/prop&gt;\n</code></pre>\n<p>when get entity with id, this cache work correctly, but when use of criteria query not work.<br>\nAfter searching, I realized that the cache is activated by adding a <em><strong>setCacheable</strong></em> method to the query.<br></p>\n<p>But I have a big problem<br>\n<strong>There are a lot of criteria queries throughout the project, and on the other hand, the criteria queries are derived from another class in another project, and I don't have access to that external class.</strong><br></p>\n<p>Is there a way to apply this setting to all criteria queries in the entire project by setting it once ?</p>\n"},{"tags":["java","android","google-maps"],"comments":[{"owner":{"account_id":15879722,"reputation":794,"user_id":11457806,"display_name":"Israel dela Cruz"},"score":0,"creation_date":1561088771,"post_id":56696557,"comment_id":99957873,"body_markdown":"You said you &quot;already create&quot;. But isn&#39;t the only way to draw route is using polyline?","body":"You said you &quot;already create&quot;. But isn&#39;t the only way to draw route is using polyline?"},{"owner":{"account_id":14664083,"reputation":29,"user_id":10590415,"display_name":"sintaxx92 Ox"},"score":0,"creation_date":1561091422,"post_id":56696557,"comment_id":99958268,"body_markdown":"yes, but im stuck on drawing using marker from firebase. I have problem on writing to draw the polyline to get coordinate from database.","body":"yes, but im stuck on drawing using marker from firebase. I have problem on writing to draw the polyline to get coordinate from database."},{"owner":{"account_id":14664083,"reputation":29,"user_id":10590415,"display_name":"sintaxx92 Ox"},"score":0,"creation_date":1561091441,"post_id":56696557,"comment_id":99958274,"body_markdown":"sory if i have broken language.","body":"sory if i have broken language."},{"owner":{"account_id":15879722,"reputation":794,"user_id":11457806,"display_name":"Israel dela Cruz"},"score":0,"creation_date":1561092520,"post_id":56696557,"comment_id":99958489,"body_markdown":"Is marker coordinate the only thing you have? No polyline data? Do you want to draw straight lines or road lines.","body":"Is marker coordinate the only thing you have? No polyline data? Do you want to draw straight lines or road lines."},{"owner":{"account_id":14664083,"reputation":29,"user_id":10590415,"display_name":"sintaxx92 Ox"},"score":0,"creation_date":1561100954,"post_id":56696557,"comment_id":99961199,"body_markdown":"Yes i only have marker coordinate. no polyline data. i want straight line.","body":"Yes i only have marker coordinate. no polyline data. i want straight line."}],"answers":[{"tags":[],"owner":{"account_id":15879722,"reputation":794,"user_id":11457806,"display_name":"Israel dela Cruz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1561242619,"creation_date":1561242619,"answer_id":56719641,"question_id":56696557,"body_markdown":"You can draw `polyline` with `LatLng`.\r\n\r\n```\r\nPolylineOptions polylineOptions = new PolylineOptions();\r\npolylineOptions.color(Color.BLUE);\r\n// add coordinates to polyline\r\nfor (LatLng markerCoordinate : markerCoordinates) {\r\n    polylineOptions.add(markerCoordinate);\r\n}\r\n\r\n// draw\r\ngoogleMap.addPolyline(polylineOptions);\r\n\r\n```","title":"Create polyline with multiple marker","body":"<p>You can draw <code>polyline</code> with <code>LatLng</code>.</p>\n\n<pre><code>PolylineOptions polylineOptions = new PolylineOptions();\npolylineOptions.color(Color.BLUE);\n// add coordinates to polyline\nfor (LatLng markerCoordinate : markerCoordinates) {\n    polylineOptions.add(markerCoordinate);\n}\n\n// draw\ngoogleMap.addPolyline(polylineOptions);\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27342208,"reputation":1,"user_id":20852669,"display_name":"Akash Mourya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671877620,"creation_date":1671877620,"answer_id":74906997,"question_id":56696557,"body_markdown":"     var marker = &quot;&quot;;\r\n              // This info Window is used to show data\r\n            var infowindow = new google.maps.InfoWindow()\r\n             // get data from firebase ann passed it to CreatePolyline function\r\n          function CreatePolyline(data) {   \r\n            // Convert you lat long to gmap coordinate                      \r\n                var coordinates = [];\r\n                for (i = 0; i &lt; data.length; i++) {\r\n                    var lat = parseFloat(data[i].Lattitude);\r\n                    var long = parseFloat(data[i].Longitude);\r\n                    var point = new google.maps.LatLng(lat, long);\r\n                    coordinates.push(point);\r\n                }\r\n                // this loop is used to place marker on your lat long\r\n                for (i = 0; i &lt; coordinates.length; i++) {\r\n\r\n                    var positions = new google.maps.LatLng(coordinates[i]);\r\n                    if (i == 0) {\r\n                        //start location\r\n                        marker = new google.maps.Marker({\r\n                        position: positions,\r\n                        map: map,\r\n                        icon: &quot;green.png&quot;,                      \r\n                        data: data[i] \r\n                    });\r\n                    }\r\n                    else if (i == coordinates.length - 1) {\r\n                            // End Location\r\n                            marker = new google.maps.Marker({\r\n                            position: positions,\r\n                            map: map,\r\n                            icon: &quot;redicon.png&quot;,                           \r\n                            data: data[i]\r\n                        });\r\n\r\n                    }\r\n                    else {\r\n                           // In between Location\r\n                            marker = new google.maps.Marker({\r\n                            position: positions,\r\n                            map: map,\r\n                            icon: &quot;blueicon.png&quot;,                            \r\n                            data: data[i]\r\n                        });\r\n                    }\r\n                    // Info Window Design\r\n                    var content = &quot;&lt;b&gt;Employee Code: &lt;/b&gt;&quot; + data[i].EmployeeCode + &quot;&lt;br /&gt;&lt;b&gt;Date: &lt;/b&gt;&quot; + data[i].Date + &quot;&lt;br /&gt;&lt;b&gt;Location: &lt;/b&gt;&quot; + data[i].Location + &quot;&lt;br/&gt; &lt;b&gt;Battery Level: &lt;/b&gt;&quot; + data[i].BatteryLevel;  \r\n                     // To handle marker click Event                  \r\n                    google.maps.event.addListener(marker, &#39;click&#39;, (function (marker, content, infowindow) {\r\n                        return function () {\r\n                            infowindow.setContent(content);\r\n                            infowindow.open(map, marker);\r\n                        };\r\n                    })(marker, content, infowindow));\r\n\r\n                }\r\n\r\n                //Create the polyline that connects the markers.\r\n                var flightPath = new google.maps.Polyline({\r\n                    path: coordinates,\r\n                    stroke: {\r\n                               color: &#39;#ffffff&#39;,\r\n                               weight: 5\r\n                           },\r\n                           editable: false,\r\n                           draggable: false,\r\n                           geodesic: true,\r\n                           visible: true,\r\n                           icons: [\r\n                             {\r\n                                 icon: {\r\n                                     path: google.maps.SymbolPath.FORWARD_CLOSED_ARROW\r\n                                 },\r\n                                 offset: &#39;50px&#39;,\r\n                                 repeat: &#39;50px&#39;\r\n                             }\r\n                           ]\r\n                });\r\n                flightPath.setMap(map);\r\n            }\r\n\r\n            \r\n          var infowindow = new google.maps.InfoWindow();\r\n          \r\n            function onItemClick(event, pin) {              \r\n                var contentString = &quot;&lt;b&gt;Employee Code: &lt;/b&gt;&quot; + pin.data.EmployeeCode + &quot;&lt;br /&gt;&lt;b&gt;Date: &lt;/b&gt;&quot; + pin.data.Date + &quot;&lt;br /&gt;&lt;b&gt;Location: &lt;/b&gt;&quot; + pin.data.Location + &quot;&lt;br/&gt; &lt;b&gt;Battery Level: &lt;/b&gt;&quot; + pin.data.BatteryLevel;\r\n                    infowindow.setContent(contentString);    \r\n                    infowindow.open(map,marker) \r\n                } \r\n","title":"Create polyline with multiple marker","body":"<pre><code> var marker = &quot;&quot;;\n          // This info Window is used to show data\n        var infowindow = new google.maps.InfoWindow()\n         // get data from firebase ann passed it to CreatePolyline function\n      function CreatePolyline(data) {   \n        // Convert you lat long to gmap coordinate                      \n            var coordinates = [];\n            for (i = 0; i &lt; data.length; i++) {\n                var lat = parseFloat(data[i].Lattitude);\n                var long = parseFloat(data[i].Longitude);\n                var point = new google.maps.LatLng(lat, long);\n                coordinates.push(point);\n            }\n            // this loop is used to place marker on your lat long\n            for (i = 0; i &lt; coordinates.length; i++) {\n\n                var positions = new google.maps.LatLng(coordinates[i]);\n                if (i == 0) {\n                    //start location\n                    marker = new google.maps.Marker({\n                    position: positions,\n                    map: map,\n                    icon: &quot;green.png&quot;,                      \n                    data: data[i] \n                });\n                }\n                else if (i == coordinates.length - 1) {\n                        // End Location\n                        marker = new google.maps.Marker({\n                        position: positions,\n                        map: map,\n                        icon: &quot;redicon.png&quot;,                           \n                        data: data[i]\n                    });\n\n                }\n                else {\n                       // In between Location\n                        marker = new google.maps.Marker({\n                        position: positions,\n                        map: map,\n                        icon: &quot;blueicon.png&quot;,                            \n                        data: data[i]\n                    });\n                }\n                // Info Window Design\n                var content = &quot;&lt;b&gt;Employee Code: &lt;/b&gt;&quot; + data[i].EmployeeCode + &quot;&lt;br /&gt;&lt;b&gt;Date: &lt;/b&gt;&quot; + data[i].Date + &quot;&lt;br /&gt;&lt;b&gt;Location: &lt;/b&gt;&quot; + data[i].Location + &quot;&lt;br/&gt; &lt;b&gt;Battery Level: &lt;/b&gt;&quot; + data[i].BatteryLevel;  \n                 // To handle marker click Event                  \n                google.maps.event.addListener(marker, 'click', (function (marker, content, infowindow) {\n                    return function () {\n                        infowindow.setContent(content);\n                        infowindow.open(map, marker);\n                    };\n                })(marker, content, infowindow));\n\n            }\n\n            //Create the polyline that connects the markers.\n            var flightPath = new google.maps.Polyline({\n                path: coordinates,\n                stroke: {\n                           color: '#ffffff',\n                           weight: 5\n                       },\n                       editable: false,\n                       draggable: false,\n                       geodesic: true,\n                       visible: true,\n                       icons: [\n                         {\n                             icon: {\n                                 path: google.maps.SymbolPath.FORWARD_CLOSED_ARROW\n                             },\n                             offset: '50px',\n                             repeat: '50px'\n                         }\n                       ]\n            });\n            flightPath.setMap(map);\n        }\n\n        \n      var infowindow = new google.maps.InfoWindow();\n      \n        function onItemClick(event, pin) {              \n            var contentString = &quot;&lt;b&gt;Employee Code: &lt;/b&gt;&quot; + pin.data.EmployeeCode + &quot;&lt;br /&gt;&lt;b&gt;Date: &lt;/b&gt;&quot; + pin.data.Date + &quot;&lt;br /&gt;&lt;b&gt;Location: &lt;/b&gt;&quot; + pin.data.Location + &quot;&lt;br/&gt; &lt;b&gt;Battery Level: &lt;/b&gt;&quot; + pin.data.BatteryLevel;\n                infowindow.setContent(contentString);    \n                infowindow.open(map,marker) \n            } \n</code></pre>\n"}],"owner":{"account_id":14664083,"reputation":29,"user_id":10590415,"display_name":"sintaxx92 Ox"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":445,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":56719641,"answer_count":2,"score":0,"last_activity_date":1671877620,"creation_date":1561088450,"question_id":56696557,"body_markdown":"I would like to ask about suggestion on creating polyline with multiple marker? How can I solve the solution about this? I already create but sadly I created hard code. **What i want to do is get coordinate from firebase then draw polyline on the map.** Is there any solution on drawing the route using polyline?\n\n[1] [here how i want to get coordinate from firebase.]\n\n  [1]: https://i.stack.imgur.com/3K5yy.png","title":"Create polyline with multiple marker","body":"<p>I would like to ask about suggestion on creating polyline with multiple marker? How can I solve the solution about this? I already create but sadly I created hard code. <strong>What i want to do is get coordinate from firebase then draw polyline on the map.</strong> Is there any solution on drawing the route using polyline?</p>\n<p><a href=\"https://i.stack.imgur.com/3K5yy.png\" rel=\"nofollow noreferrer\">1</a> [here how i want to get coordinate from firebase.]</p>\n"},{"tags":["java","spring","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":14535295,"reputation":87,"user_id":10498869,"display_name":"Dadinho2000"},"score":0,"creation_date":1671141296,"post_id":74816863,"comment_id":132041100,"body_markdown":"I really need some help, whatever I put as the type in Paramdef, I keep getting this error !!! WHY","body":"I really need some help, whatever I put as the type in Paramdef, I keep getting this error !!! WHY"},{"owner":{"account_id":10753100,"reputation":364,"user_id":7911790,"display_name":"Navnath Adsul"},"score":2,"creation_date":1671167935,"post_id":74816863,"comment_id":132045286,"body_markdown":"Please read the exception stack trace, you will find the root cause of exception.","body":"Please read the exception stack trace, you will find the root cause of exception."},{"owner":{"account_id":25748814,"reputation":146,"user_id":19501659,"display_name":"Habib Z."},"score":0,"creation_date":1671878721,"post_id":74816863,"comment_id":132191497,"body_markdown":"Answered in https://stackoverflow.com/questions/74823365/type-mismatch-cannot-convert-from-string-to-classjava16777233","body":"Answered in <a href=\"https://stackoverflow.com/questions/74823365/type-mismatch-cannot-convert-from-string-to-classjava16777233\" title=\"type mismatch cannot convert from string to classjava16777233\">stackoverflow.com/questions/74823365/&hellip;</a>"}],"owner":{"account_id":14535295,"reputation":87,"user_id":10498869,"display_name":"Dadinho2000"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":218,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1671877520,"creation_date":1671134039,"question_id":74816863,"body_markdown":"I&#39;ve done a few changes on my code, because now I want to have a soft deletion instead of a normal one.\r\nI would only need a few JPA annotations for this purpose.\r\nI think I got the right idea, but now I can&#39;t even run it because it give the following error:\r\n&quot;&quot;&quot;Type mismatch: cannot convert from String to Class&lt;?&gt;&quot;&quot;&quot;\r\n\r\nMy CloudProduct.java ( the one with the error ) : \r\n\r\n```\r\npackage com.proj.my.model;\r\n\r\nimport jakarta.persistence.Column;\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.EntityListeners;\r\nimport jakarta.persistence.Id;\r\n\r\nimport java.sql.Date;\r\n\r\nimport org.hibernate.annotations.CreationTimestamp;\r\nimport org.hibernate.annotations.Filter;\r\nimport org.hibernate.annotations.FilterDef;\r\nimport org.hibernate.annotations.ParamDef;\r\nimport org.hibernate.annotations.SQLDelete;\r\nimport org.hibernate.annotations.Where;\r\nimport org.springframework.data.jpa.domain.support.AuditingEntityListener;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonIgnoreProperties;\r\n\r\nimport jakarta.persistence.Table;\r\n\r\n@Entity\r\n@Table(name=&quot;cloud_product_info&quot;)\r\n@SQLDelete(sql = &quot;UPDATE cloud_products_info SET deleted = true WHERE id=?&quot;)\r\n@FilterDef(name = &quot;deletedProductFilter&quot;, parameters = @ParamDef(name = &quot;isDeleted&quot;, type = &quot;boolean&quot;))\r\n@Filter(name = &quot;deletedProductFilter&quot;, condition = &quot;deleted = :isDeleted&quot;)\r\n@EntityListeners(AuditingEntityListener.class)\r\n@JsonIgnoreProperties(value = {&quot;createdAt&quot;, &quot;updatedAt&quot;}, \r\n        allowGetters = true)\r\n\r\n\r\n\r\npublic class CloudProduct {\r\n\r\n    @Id\r\n    private String productId;\r\n    private String productName;\r\n    private String productPrice;\r\n    @CreationTimestamp\r\n    @Column(updatable = false, name = &quot;created_at&quot;)\r\n    private Date createdAt;\r\n    private boolean deleted = Boolean.FALSE;\r\n\r\n\r\n    \r\n    public Boolean getDeleted() {\r\n        return deleted;\r\n    }\r\n\r\n    public void setDeleted(boolean deleted) {\r\n        this.deleted = deleted;\r\n    }\r\n\r\n    public CloudProduct(String productId, String productName, String productPrice, Date createdAt, boolean deleted) {\r\n        this.productId = productId;\r\n        this.productName = productName;\r\n        this.productPrice = productPrice;\r\n        this.createdAt = createdAt;\r\n        this.deleted = deleted;\r\n    }\r\n\r\n    public CloudProduct() {\r\n\r\n    } \r\n    \r\n    public String getProductId() {\r\n        return productId;\r\n    }\r\n    public void setProductId(String productId) {\r\n        this.productId = productId;\r\n    }\r\n    public String getProductName() {\r\n        return productName;\r\n    }\r\n    public void setProductName(String productName) {\r\n        this.productName = productName;\r\n    }\r\n    public String getProductPrice() {\r\n        return productPrice;\r\n    }\r\n    public void setProductPrice(String productPrice) {\r\n        this.productPrice = productPrice;\r\n    }\r\n\r\n    public Date getCreatedAt() {\r\n        return createdAt;\r\n    }\r\n\r\n    public void setCreatedAt(Date createdAt) {\r\n        this.createdAt = createdAt;\r\n    }\r\n}\r\n```\r\nThe error is implicit on :\r\n\r\n```\r\n@FilterDef(name = &quot;deletedProductFilter&quot;, parameters = @ParamDef(name = &quot;isDeleted&quot;, type = &quot;boolean&quot;))\r\n```\r\nSpecifically on the &quot;type = &quot;boolean&quot; &quot;.\r\nHe is my CloudProductController.java\r\n```\r\n\r\npackage com.proj.my.controller;\r\n\r\n\r\nimport org.springframework.web.bind.annotation.DeleteMapping;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PathVariable;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.PutMapping;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RequestParam;\r\nimport org.springframework.web.bind.annotation.RestController;\r\nimport com.proj.my.model.CloudProduct;\r\nimport com.proj.my.service.CloudProductService;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/cloudproduct&quot;)\r\n\r\npublic class CloudProductController \r\n{\r\n\r\n    CloudProductService cloudProductService;\r\n\r\n    public CloudProductController(CloudProductService cloudProductService)\r\n    {\r\n        this.cloudProductService = cloudProductService;\r\n    }\r\n\r\n    @GetMapping(&quot;{productId}&quot;)\r\n    public CloudProduct getCloudProductDetails(@PathVariable(&quot;productId&quot;) String productId){\r\n        return cloudProductService.getCloudProduct(productId);\r\n    }\r\n\r\n\r\n    @PostMapping\r\n    public String createCloudProductDetails(@RequestBody CloudProduct cloudProduct){\r\n\r\n        cloudProductService.createCloudProduct(cloudProduct);\r\n        return &quot;Success&quot;;\r\n    }\r\n\r\n    @PutMapping\r\n    public String updateCloudProductDetails(@RequestBody CloudProduct cloudProduct){\r\n\r\n        cloudProductService.updateCloudProduct(cloudProduct);\r\n        return &quot;Updated !&quot;;\r\n    }\r\n\r\n    @DeleteMapping(&quot;/{productId}&quot;)\r\n    public void removeOne(@PathVariable(&quot;productId&quot;) String productId) {\r\n        cloudProductService.remove(productId);\r\n    }\r\n\r\n    @GetMapping\r\n    public Iterable&lt;CloudProduct&gt; findAll(@RequestParam(value = &quot;isDeleted&quot;, required = false, defaultValue = &quot;false&quot;) boolean isDeleted) {\r\n        return cloudProductService.findAll(isDeleted);\r\n    }\r\n\r\n\r\n\r\n}\r\n```\r\nMy CloudProductService.java :\r\n``` \r\npackage com.proj.my.service;\r\n\r\nimport com.proj.my.model.CloudProduct;\r\n\r\npublic interface CloudProductService {\r\n\r\n    public String createCloudProduct(CloudProduct cloudProduct);\r\n    public String updateCloudProduct(CloudProduct cloudProduct);\r\n    public CloudProduct getCloudProduct(String cloudProductId);\r\n    public Iterable&lt;CloudProduct&gt; findAll(boolean isDeleted);\r\n    public void remove(String cloudProductId);\r\n}\r\n\r\n```\r\n\r\nMy CloudProductServiceimpl.java :\r\n``` \r\npackage com.proj.my.service.impl;\r\n\r\nimport org.hibernate.Filter;\r\nimport org.hibernate.Session;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport com.proj.my.model.CloudProduct;\r\nimport com.proj.my.repository.CloudProductRepository;\r\nimport com.proj.my.service.CloudProductService;\r\n\r\nimport jakarta.persistence.EntityManager;\r\n\r\n\r\n@Service\r\npublic class CloudProductServiceImpl implements CloudProductService \r\n{\r\n\r\n    CloudProductRepository cloudProductRepository;\r\n\r\n    @Autowired\r\n    private EntityManager entityManager;\r\n\r\n    public CloudProductServiceImpl(CloudProductRepository cloudProductRepository) {\r\n    \r\n        this.cloudProductRepository = cloudProductRepository;\r\n    \r\n    }\r\n\r\n    @Override\r\n    public String createCloudProduct(CloudProduct cloudProduct){\r\n        cloudProductRepository.save(cloudProduct);\r\n        return &quot;Success&quot;;\r\n    }\r\n\r\n    @Override\r\n    public String updateCloudProduct(CloudProduct cloudProduct){\r\n        cloudProductRepository.save(cloudProduct);\r\n        return &quot;Success&quot;;\r\n    }\r\n        \r\n    @Override\r\n    public CloudProduct getCloudProduct(String cloudProductId){\r\n        return cloudProductRepository.findById(cloudProductId).get();\r\n    }\r\n\r\n\r\n    public void remove(String cloudProductId){\r\n        cloudProductRepository.deleteById(cloudProductId);\r\n    }\r\n\r\n    public Iterable&lt;CloudProduct&gt; findAll(boolean isDeleted){\r\n        Session session = entityManager.unwrap(Session.class);\r\n        Filter filter = session.enableFilter(&quot;deletedProductFilter&quot;);\r\n        filter.setParameter(&quot;isDeleted&quot;, isDeleted);\r\n        Iterable&lt;CloudProduct&gt; products =  cloudProductRepository.findAll();\r\n        session.disableFilter(&quot;deletedProductFilter&quot;);\r\n        return products;\r\n    }\r\n\r\n    \r\n}\r\n\r\n```\r\n\r\nI hope you can help me with this one, THANKS !!!","title":"Soft Deletion with Spring JPA","body":"<p>I've done a few changes on my code, because now I want to have a soft deletion instead of a normal one.\nI would only need a few JPA annotations for this purpose.\nI think I got the right idea, but now I can't even run it because it give the following error:\n&quot;&quot;&quot;Type mismatch: cannot convert from String to Class&lt;?&gt;&quot;&quot;&quot;</p>\n<p>My CloudProduct.java ( the one with the error ) :</p>\n<pre><code>package com.proj.my.model;\n\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.EntityListeners;\nimport jakarta.persistence.Id;\n\nimport java.sql.Date;\n\nimport org.hibernate.annotations.CreationTimestamp;\nimport org.hibernate.annotations.Filter;\nimport org.hibernate.annotations.FilterDef;\nimport org.hibernate.annotations.ParamDef;\nimport org.hibernate.annotations.SQLDelete;\nimport org.hibernate.annotations.Where;\nimport org.springframework.data.jpa.domain.support.AuditingEntityListener;\n\nimport com.fasterxml.jackson.annotation.JsonIgnoreProperties;\n\nimport jakarta.persistence.Table;\n\n@Entity\n@Table(name=&quot;cloud_product_info&quot;)\n@SQLDelete(sql = &quot;UPDATE cloud_products_info SET deleted = true WHERE id=?&quot;)\n@FilterDef(name = &quot;deletedProductFilter&quot;, parameters = @ParamDef(name = &quot;isDeleted&quot;, type = &quot;boolean&quot;))\n@Filter(name = &quot;deletedProductFilter&quot;, condition = &quot;deleted = :isDeleted&quot;)\n@EntityListeners(AuditingEntityListener.class)\n@JsonIgnoreProperties(value = {&quot;createdAt&quot;, &quot;updatedAt&quot;}, \n        allowGetters = true)\n\n\n\npublic class CloudProduct {\n\n    @Id\n    private String productId;\n    private String productName;\n    private String productPrice;\n    @CreationTimestamp\n    @Column(updatable = false, name = &quot;created_at&quot;)\n    private Date createdAt;\n    private boolean deleted = Boolean.FALSE;\n\n\n    \n    public Boolean getDeleted() {\n        return deleted;\n    }\n\n    public void setDeleted(boolean deleted) {\n        this.deleted = deleted;\n    }\n\n    public CloudProduct(String productId, String productName, String productPrice, Date createdAt, boolean deleted) {\n        this.productId = productId;\n        this.productName = productName;\n        this.productPrice = productPrice;\n        this.createdAt = createdAt;\n        this.deleted = deleted;\n    }\n\n    public CloudProduct() {\n\n    } \n    \n    public String getProductId() {\n        return productId;\n    }\n    public void setProductId(String productId) {\n        this.productId = productId;\n    }\n    public String getProductName() {\n        return productName;\n    }\n    public void setProductName(String productName) {\n        this.productName = productName;\n    }\n    public String getProductPrice() {\n        return productPrice;\n    }\n    public void setProductPrice(String productPrice) {\n        this.productPrice = productPrice;\n    }\n\n    public Date getCreatedAt() {\n        return createdAt;\n    }\n\n    public void setCreatedAt(Date createdAt) {\n        this.createdAt = createdAt;\n    }\n}\n</code></pre>\n<p>The error is implicit on :</p>\n<pre><code>@FilterDef(name = &quot;deletedProductFilter&quot;, parameters = @ParamDef(name = &quot;isDeleted&quot;, type = &quot;boolean&quot;))\n</code></pre>\n<p>Specifically on the &quot;type = &quot;boolean&quot; &quot;.\nHe is my CloudProductController.java</p>\n<pre><code>\npackage com.proj.my.controller;\n\n\nimport org.springframework.web.bind.annotation.DeleteMapping;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.PutMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.bind.annotation.RestController;\nimport com.proj.my.model.CloudProduct;\nimport com.proj.my.service.CloudProductService;\n\n@RestController\n@RequestMapping(&quot;/cloudproduct&quot;)\n\npublic class CloudProductController \n{\n\n    CloudProductService cloudProductService;\n\n    public CloudProductController(CloudProductService cloudProductService)\n    {\n        this.cloudProductService = cloudProductService;\n    }\n\n    @GetMapping(&quot;{productId}&quot;)\n    public CloudProduct getCloudProductDetails(@PathVariable(&quot;productId&quot;) String productId){\n        return cloudProductService.getCloudProduct(productId);\n    }\n\n\n    @PostMapping\n    public String createCloudProductDetails(@RequestBody CloudProduct cloudProduct){\n\n        cloudProductService.createCloudProduct(cloudProduct);\n        return &quot;Success&quot;;\n    }\n\n    @PutMapping\n    public String updateCloudProductDetails(@RequestBody CloudProduct cloudProduct){\n\n        cloudProductService.updateCloudProduct(cloudProduct);\n        return &quot;Updated !&quot;;\n    }\n\n    @DeleteMapping(&quot;/{productId}&quot;)\n    public void removeOne(@PathVariable(&quot;productId&quot;) String productId) {\n        cloudProductService.remove(productId);\n    }\n\n    @GetMapping\n    public Iterable&lt;CloudProduct&gt; findAll(@RequestParam(value = &quot;isDeleted&quot;, required = false, defaultValue = &quot;false&quot;) boolean isDeleted) {\n        return cloudProductService.findAll(isDeleted);\n    }\n\n\n\n}\n</code></pre>\n<p>My CloudProductService.java :</p>\n<pre><code>package com.proj.my.service;\n\nimport com.proj.my.model.CloudProduct;\n\npublic interface CloudProductService {\n\n    public String createCloudProduct(CloudProduct cloudProduct);\n    public String updateCloudProduct(CloudProduct cloudProduct);\n    public CloudProduct getCloudProduct(String cloudProductId);\n    public Iterable&lt;CloudProduct&gt; findAll(boolean isDeleted);\n    public void remove(String cloudProductId);\n}\n\n</code></pre>\n<p>My CloudProductServiceimpl.java :</p>\n<pre><code>package com.proj.my.service.impl;\n\nimport org.hibernate.Filter;\nimport org.hibernate.Session;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\nimport com.proj.my.model.CloudProduct;\nimport com.proj.my.repository.CloudProductRepository;\nimport com.proj.my.service.CloudProductService;\n\nimport jakarta.persistence.EntityManager;\n\n\n@Service\npublic class CloudProductServiceImpl implements CloudProductService \n{\n\n    CloudProductRepository cloudProductRepository;\n\n    @Autowired\n    private EntityManager entityManager;\n\n    public CloudProductServiceImpl(CloudProductRepository cloudProductRepository) {\n    \n        this.cloudProductRepository = cloudProductRepository;\n    \n    }\n\n    @Override\n    public String createCloudProduct(CloudProduct cloudProduct){\n        cloudProductRepository.save(cloudProduct);\n        return &quot;Success&quot;;\n    }\n\n    @Override\n    public String updateCloudProduct(CloudProduct cloudProduct){\n        cloudProductRepository.save(cloudProduct);\n        return &quot;Success&quot;;\n    }\n        \n    @Override\n    public CloudProduct getCloudProduct(String cloudProductId){\n        return cloudProductRepository.findById(cloudProductId).get();\n    }\n\n\n    public void remove(String cloudProductId){\n        cloudProductRepository.deleteById(cloudProductId);\n    }\n\n    public Iterable&lt;CloudProduct&gt; findAll(boolean isDeleted){\n        Session session = entityManager.unwrap(Session.class);\n        Filter filter = session.enableFilter(&quot;deletedProductFilter&quot;);\n        filter.setParameter(&quot;isDeleted&quot;, isDeleted);\n        Iterable&lt;CloudProduct&gt; products =  cloudProductRepository.findAll();\n        session.disableFilter(&quot;deletedProductFilter&quot;);\n        return products;\n    }\n\n    \n}\n\n</code></pre>\n<p>I hope you can help me with this one, THANKS !!!</p>\n"},{"tags":["java","hadoop","mapreduce","hadoop-yarn"],"comments":[{"owner":{"account_id":11497090,"reputation":63,"user_id":8426038,"display_name":"Sitakant Mishra"},"score":0,"creation_date":1671758417,"post_id":74895133,"comment_id":132171629,"body_markdown":"Additionally, I found the error below in the application logs in Yarn where the mapper fails.       \njava.lang.NoSuchMethodError: org/apache/hadoop/mapreduce/util/MRJobConfUtil.setTaskLogProgressDeltaThresholds(Lorg/apache/hadoop/conf/Configuration;)V (loaded from file:/data/hadoop/yarn/usercache/hdfs-user/appcache/application_1671477750397_2609/filecache/11/job.jar/job.jar by sun.misc.Launcher$AppClassLoader@8bf41861) called from class org.apache.hadoop.mapred.TaskAttemptListenerImpl","body":"Additionally, I found the error below in the application logs in Yarn where the mapper fails.        java.lang.NoSuchMethodError: org/apache/hadoop/mapreduce/util/MRJobConfUtil.setTaskLogPro&zwnj;&#8203;gressDeltaThresholds&zwnj;&#8203;(Lorg/apache/hadoop/&zwnj;&#8203;conf/Configuration;)&zwnj;&#8203;V (loaded from file:/data/hadoop/yarn/usercache/hdfs-user/appcache/applicat&zwnj;&#8203;ion_1671477750397_26&zwnj;&#8203;09/filecache/11/job.&zwnj;&#8203;jar/job.jar by sun.misc.Launcher$AppClassLoader@8bf41861) called from class org.apache.hadoop.mapred.TaskAttemptListenerImpl"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1671829152,"post_id":74895133,"comment_id":132186113,"body_markdown":"That is your real error, not slf4j. Please show your gradle file. Also tell us what version of hadoop you&#39;re using (your error indicates your mapreduce JAR depends on the wrong Hadoop version). FWIW, [I have used Gradle fine](https://github.com/OneCricketeer/mapreduce-sandbox#mapreduce-sandbox). But no one really writes MapReduce code anymore. Have you considered using Spark with YARN?","body":"That is your real error, not slf4j. Please show your gradle file. Also tell us what version of hadoop you&#39;re using (your error indicates your mapreduce JAR depends on the wrong Hadoop version). FWIW, <a href=\"https://github.com/OneCricketeer/mapreduce-sandbox#mapreduce-sandbox\" rel=\"nofollow noreferrer\">I have used Gradle fine</a>. But no one really writes MapReduce code anymore. Have you considered using Spark with YARN?"},{"owner":{"account_id":11497090,"reputation":63,"user_id":8426038,"display_name":"Sitakant Mishra"},"score":1,"creation_date":1671835346,"post_id":74895133,"comment_id":132187149,"body_markdown":"The hadoop version is Hadoop 3.3.0. I have used Spark with YARN, but this a legacy code base where I am making some changes. Please find my gradle below respective comment sections.","body":"The hadoop version is Hadoop 3.3.0. I have used Spark with YARN, but this a legacy code base where I am making some changes. Please find my gradle below respective comment sections."},{"owner":{"account_id":11497090,"reputation":63,"user_id":8426038,"display_name":"Sitakant Mishra"},"score":1,"creation_date":1671835518,"post_id":74895133,"comment_id":132187176,"body_markdown":"implementation  (group: &#39;org.apache.hadoop&#39;, name: &#39;hadoop-client&#39;, version:&#39;3.0.0-cdh6.1.0&#39;){\n        exclude group: &#39;org.slf4j&#39;, module: &#39;slf4j-log4j12&#39;\n        exclude group: &#39;ch.qos.logback&#39;, module: &#39;logback-classic&#39;\n    }\n\n    implementation  group: &#39;org.apache.spark&#39;, name: &#39;spark-core_2.11&#39;, version:&#39;2.4.0-cdh6.1.0&#39;\n    compileOnly group: &#39;org.json4s&#39;, name: &#39;json4s-jackson_2.11&#39;, version:&#39;3.5.3&#39;\n    compileOnly group: &#39;com.fasterxml.jackson.core&#39;, name: &#39;jackson-databind&#39;, version:&#39;2.9.5&#39;","body":"implementation  (group: &#39;org.apache.hadoop&#39;, name: &#39;hadoop-client&#39;, version:&#39;3.0.0-cdh6.1.0&#39;){         exclude group: &#39;org.slf4j&#39;, module: &#39;slf4j-log4j12&#39;         exclude group: &#39;ch.qos.logback&#39;, module: &#39;logback-classic&#39;     }      implementation  group: &#39;org.apache.spark&#39;, name: &#39;spark-core_2.11&#39;, version:&#39;2.4.0-cdh6.1.0&#39;     compileOnly group: &#39;org.json4s&#39;, name: &#39;json4s-jackson_2.11&#39;, version:&#39;3.5.3&#39;     compileOnly group: &#39;com.fasterxml.jackson.core&#39;, name: &#39;jackson-databind&#39;, version:&#39;2.9.5&#39;"},{"owner":{"account_id":11497090,"reputation":63,"user_id":8426038,"display_name":"Sitakant Mishra"},"score":0,"creation_date":1671835547,"post_id":74895133,"comment_id":132187184,"body_markdown":"compileOnly(group: &#39;com.fasterxml.jackson.module&#39;, name: &#39;jackson-module-scala_2.11&#39;, version:&#39;2.9.5&#39;) {\n        exclude(module: &#39;guava&#39;)\n    }\n   implementation &quot;org.apache.avro:avro:1.11.0&quot;\n    implementation  group: &#39;com.google.guava&#39;, name: &#39;guava&#39;, version:&#39;20.0&#39;\n    implementation  group: &#39;joda-time&#39;, name: &#39;joda-time&#39;, version:&#39;2.8.1&#39;\n\timplementation &#39;org.assertj:assertj-joda-time:2.2.0&#39;\n\timplementation group: &#39;org.javatuples&#39;, name: &#39;javatuples&#39;, version: &#39;1.2&#39;\n\timplementation group: &#39;com.fasterxml.jackson.dataformat&#39;, name: &#39;jackson-dataformat-yaml&#39;, version: &#39;2.12.4&#39;","body":"compileOnly(group: &#39;com.fasterxml.jackson.module&#39;, name: &#39;jackson-module-scala_2.11&#39;, version:&#39;2.9.5&#39;) {         exclude(module: &#39;guava&#39;)     }    implementation &quot;org.apache.avro:avro:1.11.0&quot;     implementation  group: &#39;com.google.guava&#39;, name: &#39;guava&#39;, version:&#39;20.0&#39;     implementation  group: &#39;joda-time&#39;, name: &#39;joda-time&#39;, version:&#39;2.8.1&#39; \timplementation &#39;org.assertj:assertj-joda-time:2.2.0&#39; \timplementation group: &#39;org.javatuples&#39;, name: &#39;javatuples&#39;, version: &#39;1.2&#39; \timplementation group: &#39;com.fasterxml.jackson.dataformat&#39;, name: &#39;jackson-dataformat-yaml&#39;, version: &#39;2.12.4&#39;"},{"owner":{"account_id":11497090,"reputation":63,"user_id":8426038,"display_name":"Sitakant Mishra"},"score":0,"creation_date":1671835582,"post_id":74895133,"comment_id":132187192,"body_markdown":"implementation  group: &#39;net.alchim31.maven&#39;, name: &#39;scala-maven-plugin&#39;, version:&#39;3.3.1&#39;\n    implementation  group: &#39;org.scalactic&#39;, name: &#39;scalactic_2.11&#39;, version:&#39;3.0.5&#39;\n    testImplementation group: &#39;junit&#39;, name: &#39;junit&#39;, version: &quot;$junit4Version&quot;\n    testImplementation group: &#39;org.scalatest&#39;, name: &#39;scalatest_2.11&#39;, version:&#39;3.0.5&#39;\n    implementation group: &#39;org.projectlombok&#39;, name: &#39;lombok&#39;, version: &quot;$lombokVersion&quot;\n    testImplementation group: &#39;org.projectlombok&#39;, name: &#39;lombok&#39;, version: &quot;$lombokVersion&quot;","body":"implementation  group: &#39;net.alchim31.maven&#39;, name: &#39;scala-maven-plugin&#39;, version:&#39;3.3.1&#39;     implementation  group: &#39;org.scalactic&#39;, name: &#39;scalactic_2.11&#39;, version:&#39;3.0.5&#39;     testImplementation group: &#39;junit&#39;, name: &#39;junit&#39;, version: &quot;$junit4Version&quot;     testImplementation group: &#39;org.scalatest&#39;, name: &#39;scalatest_2.11&#39;, version:&#39;3.0.5&#39;     implementation group: &#39;org.projectlombok&#39;, name: &#39;lombok&#39;, version: &quot;$lombokVersion&quot;     testImplementation group: &#39;org.projectlombok&#39;, name: &#39;lombok&#39;, version: &quot;$lombokVersion&quot;"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1671836856,"post_id":74895133,"comment_id":132187392,"body_markdown":"Please [edit] and format your code.","body":"Please <a href=\"https://stackoverflow.com/posts/74895133/edit\">edit</a> and format your code."}],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671877265,"creation_date":1671837041,"answer_id":74904657,"question_id":74895133,"body_markdown":"&gt; The hadoop version is Hadoop 3.3.0\r\n\r\nOkay, [that method exists in that version](https://github.com/apache/hadoop/blob/branch-3.3.0/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/util/MRJobConfUtil.java#L75), but not [3.0.0](https://github.com/apache/hadoop/blob/branch-3.0.0/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/util/MRJobConfUtil.java)\r\n\r\nTherefore, you need to use `hadoop-client` dependency of that version, not `3.0.0-cdh6...`. Also, use `compileOnly` with it not `implementation`. This way, it is not confliciting with what YARN already has on its classpath. \r\n\r\nSimilarly, `spark-core` would have the same problem, and if you have Spark in your app anyway, then use it, not MapReduce functions. \r\n\r\n---\r\n\r\nRun `gradle dependencies`, then search for hadoop libraries and ensure they are 3.3.0","title":"NoSuchMethodError: org/apache/hadoop/mapreduce/util/MRJobConfUtil.setTaskLogProgressDeltaThresholds","body":"<blockquote>\n<p>The hadoop version is Hadoop 3.3.0</p>\n</blockquote>\n<p>Okay, <a href=\"https://github.com/apache/hadoop/blob/branch-3.3.0/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/util/MRJobConfUtil.java#L75\" rel=\"nofollow noreferrer\">that method exists in that version</a>, but not <a href=\"https://github.com/apache/hadoop/blob/branch-3.0.0/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/util/MRJobConfUtil.java\" rel=\"nofollow noreferrer\">3.0.0</a></p>\n<p>Therefore, you need to use <code>hadoop-client</code> dependency of that version, not <code>3.0.0-cdh6...</code>. Also, use <code>compileOnly</code> with it not <code>implementation</code>. This way, it is not confliciting with what YARN already has on its classpath.</p>\n<p>Similarly, <code>spark-core</code> would have the same problem, and if you have Spark in your app anyway, then use it, not MapReduce functions.</p>\n<hr />\n<p>Run <code>gradle dependencies</code>, then search for hadoop libraries and ensure they are 3.3.0</p>\n"}],"owner":{"account_id":11497090,"reputation":63,"user_id":8426038,"display_name":"Sitakant Mishra"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":226,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74904657,"answer_count":1,"score":1,"last_activity_date":1671877265,"creation_date":1671755880,"question_id":74895133,"body_markdown":"I am getting the following error while executing a mapreduce job in my hadoop cluster (distributed cluster).\r\n\r\nI found the error below in the application logs in Yarn where the mapper fails.\r\n``` \r\njava.lang.NoSuchMethodError: org/apache/hadoop/mapreduce/util/MRJobConfUtil.setTaskLogProgressDeltaThresholds(Lorg/apache/hadoop/conf/Configuration;)V (loaded from file:/data/hadoop/yarn/usercache/hdfs-user/appcache/application_1671477750397_2609/filecache/11/job.jar/job.jar by sun.misc.Launcher$AppClassLoader@8bf41861) called from class org.apache.hadoop.mapred.TaskAttemptListenerImpl\r\n```","title":"NoSuchMethodError: org/apache/hadoop/mapreduce/util/MRJobConfUtil.setTaskLogProgressDeltaThresholds","body":"<p>I am getting the following error while executing a mapreduce job in my hadoop cluster (distributed cluster).</p>\n<p>I found the error below in the application logs in Yarn where the mapper fails.</p>\n<pre><code>java.lang.NoSuchMethodError: org/apache/hadoop/mapreduce/util/MRJobConfUtil.setTaskLogProgressDeltaThresholds(Lorg/apache/hadoop/conf/Configuration;)V (loaded from file:/data/hadoop/yarn/usercache/hdfs-user/appcache/application_1671477750397_2609/filecache/11/job.jar/job.jar by sun.misc.Launcher$AppClassLoader@8bf41861) called from class org.apache.hadoop.mapred.TaskAttemptListenerImpl\n</code></pre>\n"},{"tags":["java","windows","processbuilder","github-cli"],"answers":[{"tags":[],"owner":{"account_id":3158846,"reputation":3608,"user_id":2670571,"accept_rate":52,"display_name":"John"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1671877105,"creation_date":1671877105,"answer_id":74906948,"question_id":74765477,"body_markdown":"I was able to get around this on the cmd line by adding my token as an environment variable called GH_TOKEN.  \r\n\r\nI was able to implement the functionality I needed to create a backup of all of the repositories for a Github user with out adding the env variable or executing the authentication mentioned in the original question.  This application uses the Github REST API and HTTP basic authentication using a Github user token (clasic).  \r\n\r\nFull source code for this application is here:\r\n\r\nhttps://github.com/NACHC-CAD/github-backup ","title":"Problem trying to run Github CLI command gh auth login --with-token from Java","body":"<p>I was able to get around this on the cmd line by adding my token as an environment variable called GH_TOKEN.</p>\n<p>I was able to implement the functionality I needed to create a backup of all of the repositories for a Github user with out adding the env variable or executing the authentication mentioned in the original question.  This application uses the Github REST API and HTTP basic authentication using a Github user token (clasic).</p>\n<p>Full source code for this application is here:</p>\n<p><a href=\"https://github.com/NACHC-CAD/github-backup\" rel=\"nofollow noreferrer\">https://github.com/NACHC-CAD/github-backup</a></p>\n"}],"owner":{"account_id":3158846,"reputation":3608,"user_id":2670571,"accept_rate":52,"display_name":"John"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4832,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74906948,"answer_count":1,"score":2,"last_activity_date":1671877105,"creation_date":1670803051,"question_id":74765477,"body_markdown":"I&#39;m having trouble automating authentication to github cli from java.  \r\n\r\nI&#39;m able to run the following from the cmd line in windows:\r\n\r\n    gh auth login --with-token &lt; C:\\path\\to\\my\\github-api-token.txt\r\n\r\nAnd I get the following for status:\r\n\r\n\r\n    C:\\_YES\\workspace\\github-backup\\target\\classes\\bat&gt;gh auth status\r\n    github.com\r\n      ✓ Logged in to github.com as NACHC-CAD (oauth_token)\r\n      ✓ Git operations for github.com configured to use https protocol.\r\n      ✓ Token: *******************\r\n    \r\n    \r\n    C:\\_YES\\workspace\\github-backup\\target\\classes\\bat&gt;\r\n\r\nBut if I try to run the following from Java I&#39;m unable to get it to successfully work.  The first try is missing the login cmd but demonstrates that I&#39;m successfully calling gh auth login.  The second try just hangs (for over an hour).    \r\n\r\n\r\n**First Try**\r\n\r\n    public void exec() {\r\n    \ttry {\r\n    \t\tProcessBuilder pb = new ProcessBuilder(&quot;C:\\\\Program Files\\\\GitHub CLI\\\\gh.exe&quot;, &quot;auth&quot;);\r\n    \t\tProcess process = pb.start();\r\n    \t\tthis.output = FileUtil.getAsString(process.getInputStream());\r\n    \t\tthis.error = FileUtil.getAsString(process.getErrorStream());\r\n    \t\tthis.exitCode = process.waitFor();\r\n    \t} catch(Exception exp) {\r\n    \t\tthrow new RuntimeException(exp);\r\n    \t}\r\n    }\r\n\r\n**Output**\r\n\r\n    18:43:03.038 [main] INFO org.nachc.tools.githubbackup.util.gh.auth.GhAuthIntegrationTest - Starting test...\r\n    18:43:03.043 [main] INFO org.nachc.tools.githubbackup.util.gh.auth.GhAuthIntegrationTest - exe:      C:\\Program Files\\GitHub CLI\\gh.exe\r\n    18:43:03.043 [main] INFO org.nachc.tools.githubbackup.util.gh.auth.GhAuthIntegrationTest - tokenLoc: C:\\path\\to\\my\\github-api-token.txt\r\n    18:43:03.117 [main] INFO org.nachc.tools.githubbackup.util.gh.auth.GhAuthIntegrationTest - ErrorOut:\r\n    \r\n    18:43:03.117 [main] INFO org.nachc.tools.githubbackup.util.gh.auth.GhAuthIntegrationTest - Response:  Authenticate gh and git with GitHub\r\n    \r\n    USAGE\r\n      gh auth &lt;command&gt; [flags]\r\n    \r\n    CORE COMMANDS\r\n      login:       Authenticate with a GitHub host\r\n      logout:      Log out of a GitHub host\r\n      refresh:     Refresh stored authentication credentials\r\n      setup-git:   Configure git to use GitHub CLI as a credential helper\r\n      status:      View authentication status\r\n      token:       Print the auth token gh is configured to use\r\n    \r\n    INHERITED FLAGS\r\n      --help   Show help for command\r\n    \r\n    LEARN MORE\r\n      Use &#39;gh &lt;command&gt; &lt;subcommand&gt; --help&#39; for more information about a command.\r\n      Read the manual at https://cli.github.com/manual\r\n    \r\n    \r\n    18:43:03.117 [main] INFO org.nachc.tools.githubbackup.util.gh.auth.GhAuthIntegrationTest - Got code:  0\r\n    18:43:03.117 [main] INFO org.nachc.tools.githubbackup.util.gh.auth.GhAuthIntegrationTest - Done.\r\n\r\n**Second Try**\r\n\r\n\r\n\r\n\r\n    public void exec() {\r\n    \ttry {\r\n    \t\tProcessBuilder pb = new ProcessBuilder(&quot;C:\\\\Program Files\\\\GitHub CLI\\\\gh.exe&quot;, &quot;auth&quot;, &quot;login&quot;);\r\n    \t\tMap&lt;String, String&gt; params = pb.environment();\r\n    \t\tparams.put(&quot;--with-token&quot;, tokenLoc);\r\n    \t\tProcess process = pb.start();\r\n    \t\tthis.output = FileUtil.getAsString(process.getInputStream());\r\n    \t\tthis.error = FileUtil.getAsString(process.getErrorStream());\r\n    \t\tthis.exitCode = process.waitFor();\r\n    \t} catch(Exception exp) {\r\n    \t\tthrow new RuntimeException(exp);\r\n    \t}\r\n    }\r\n\r\n\r\nI&#39;ve been able to find the following resources but can&#39;t seem to solve this.\r\n\r\nhttps://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html\r\n\r\nhttps://www.baeldung.com/java-lang-processbuilder-api\r\n\r\nhttps://docs.github.com/en/rest/quickstart?apiVersion=2022-11-28\r\n\r\nhttps://docs.github.com/en/rest/guides/getting-started-with-the-rest-api?apiVersion=2022-11-28\r\n\r\nhttps://cli.github.com/manual/gh_auth_login\r\n","title":"Problem trying to run Github CLI command gh auth login --with-token from Java","body":"<p>I'm having trouble automating authentication to github cli from java.</p>\n<p>I'm able to run the following from the cmd line in windows:</p>\n<pre><code>gh auth login --with-token &lt; C:\\path\\to\\my\\github-api-token.txt\n</code></pre>\n<p>And I get the following for status:</p>\n<pre><code>C:\\_YES\\workspace\\github-backup\\target\\classes\\bat&gt;gh auth status\ngithub.com\n  ✓ Logged in to github.com as NACHC-CAD (oauth_token)\n  ✓ Git operations for github.com configured to use https protocol.\n  ✓ Token: *******************\n\n\nC:\\_YES\\workspace\\github-backup\\target\\classes\\bat&gt;\n</code></pre>\n<p>But if I try to run the following from Java I'm unable to get it to successfully work.  The first try is missing the login cmd but demonstrates that I'm successfully calling gh auth login.  The second try just hangs (for over an hour).</p>\n<p><strong>First Try</strong></p>\n<pre><code>public void exec() {\n    try {\n        ProcessBuilder pb = new ProcessBuilder(&quot;C:\\\\Program Files\\\\GitHub CLI\\\\gh.exe&quot;, &quot;auth&quot;);\n        Process process = pb.start();\n        this.output = FileUtil.getAsString(process.getInputStream());\n        this.error = FileUtil.getAsString(process.getErrorStream());\n        this.exitCode = process.waitFor();\n    } catch(Exception exp) {\n        throw new RuntimeException(exp);\n    }\n}\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>18:43:03.038 [main] INFO org.nachc.tools.githubbackup.util.gh.auth.GhAuthIntegrationTest - Starting test...\n18:43:03.043 [main] INFO org.nachc.tools.githubbackup.util.gh.auth.GhAuthIntegrationTest - exe:      C:\\Program Files\\GitHub CLI\\gh.exe\n18:43:03.043 [main] INFO org.nachc.tools.githubbackup.util.gh.auth.GhAuthIntegrationTest - tokenLoc: C:\\path\\to\\my\\github-api-token.txt\n18:43:03.117 [main] INFO org.nachc.tools.githubbackup.util.gh.auth.GhAuthIntegrationTest - ErrorOut:\n\n18:43:03.117 [main] INFO org.nachc.tools.githubbackup.util.gh.auth.GhAuthIntegrationTest - Response:  Authenticate gh and git with GitHub\n\nUSAGE\n  gh auth &lt;command&gt; [flags]\n\nCORE COMMANDS\n  login:       Authenticate with a GitHub host\n  logout:      Log out of a GitHub host\n  refresh:     Refresh stored authentication credentials\n  setup-git:   Configure git to use GitHub CLI as a credential helper\n  status:      View authentication status\n  token:       Print the auth token gh is configured to use\n\nINHERITED FLAGS\n  --help   Show help for command\n\nLEARN MORE\n  Use 'gh &lt;command&gt; &lt;subcommand&gt; --help' for more information about a command.\n  Read the manual at https://cli.github.com/manual\n\n\n18:43:03.117 [main] INFO org.nachc.tools.githubbackup.util.gh.auth.GhAuthIntegrationTest - Got code:  0\n18:43:03.117 [main] INFO org.nachc.tools.githubbackup.util.gh.auth.GhAuthIntegrationTest - Done.\n</code></pre>\n<p><strong>Second Try</strong></p>\n<pre><code>public void exec() {\n    try {\n        ProcessBuilder pb = new ProcessBuilder(&quot;C:\\\\Program Files\\\\GitHub CLI\\\\gh.exe&quot;, &quot;auth&quot;, &quot;login&quot;);\n        Map&lt;String, String&gt; params = pb.environment();\n        params.put(&quot;--with-token&quot;, tokenLoc);\n        Process process = pb.start();\n        this.output = FileUtil.getAsString(process.getInputStream());\n        this.error = FileUtil.getAsString(process.getErrorStream());\n        this.exitCode = process.waitFor();\n    } catch(Exception exp) {\n        throw new RuntimeException(exp);\n    }\n}\n</code></pre>\n<p>I've been able to find the following resources but can't seem to solve this.</p>\n<p><a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html</a></p>\n<p><a href=\"https://www.baeldung.com/java-lang-processbuilder-api\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-lang-processbuilder-api</a></p>\n<p><a href=\"https://docs.github.com/en/rest/quickstart?apiVersion=2022-11-28\" rel=\"nofollow noreferrer\">https://docs.github.com/en/rest/quickstart?apiVersion=2022-11-28</a></p>\n<p><a href=\"https://docs.github.com/en/rest/guides/getting-started-with-the-rest-api?apiVersion=2022-11-28\" rel=\"nofollow noreferrer\">https://docs.github.com/en/rest/guides/getting-started-with-the-rest-api?apiVersion=2022-11-28</a></p>\n<p><a href=\"https://cli.github.com/manual/gh_auth_login\" rel=\"nofollow noreferrer\">https://cli.github.com/manual/gh_auth_login</a></p>\n"},{"tags":["java","recursion","stack","analysis"],"comments":[{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"score":0,"creation_date":1671888862,"post_id":74906774,"comment_id":132192949,"body_markdown":"I don&#39;t believe you can get hold of actual **Stack Memory** usage. You may be able to do something with the [StackWalker class](https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/lang/StackWalker.html)..","body":"I don&#39;t believe you can get hold of actual <b>Stack Memory</b> usage. You may be able to do something with the <a href=\"https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/lang/StackWalker.html\" rel=\"nofollow noreferrer\">StackWalker class</a>.."}],"owner":{"account_id":16550267,"reputation":47,"user_id":11958777,"display_name":"Shaurya Kajiwala"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671876407,"creation_date":1671874902,"question_id":74906774,"body_markdown":"I want to calculate stack memory consumed by this function in java. so is there any function to check out stack memory consumed in this code.\r\n\r\n    static void insertNodeRecursion(int element, Node parentNode) {\r\n            if (rootOne == null) {\r\n                //System.out.println(&quot;Inside root\\n&quot;);\r\n                rootOne = createNode(element);\r\n            }\r\n\r\n        else {\r\n\r\n            if (element &gt; parentNode.data) {\r\n                if (parentNode.right == null) {\r\n                    //System.out.println(&quot;Inside right\\n&quot;);\r\n                    parentNode.right = createNode(element);\r\n                } else {\r\n                   // System.out.println(&quot;right\\n&quot;);\r\n                    insertNodeRecursion(element, parentNode.right);\r\n                }\r\n            } else {\r\n                if (parentNode.left == null) {\r\n                   // System.out.println(&quot;Inside left&quot;);\r\n                    parentNode.left = createNode(element);\r\n                } else {\r\n                  //  System.out.println(&quot;left&quot;);\r\n                    insertNodeRecursion(element, parentNode.left);\r\n                }\r\n            }\r\n        }\r\n    }\r\n","title":"I want to check how much of my stack memory is getting consumed while performing recursion in java?","body":"<p>I want to calculate stack memory consumed by this function in java. so is there any function to check out stack memory consumed in this code.</p>\n<pre><code>static void insertNodeRecursion(int element, Node parentNode) {\n        if (rootOne == null) {\n            //System.out.println(&quot;Inside root\\n&quot;);\n            rootOne = createNode(element);\n        }\n\n    else {\n\n        if (element &gt; parentNode.data) {\n            if (parentNode.right == null) {\n                //System.out.println(&quot;Inside right\\n&quot;);\n                parentNode.right = createNode(element);\n            } else {\n               // System.out.println(&quot;right\\n&quot;);\n                insertNodeRecursion(element, parentNode.right);\n            }\n        } else {\n            if (parentNode.left == null) {\n               // System.out.println(&quot;Inside left&quot;);\n                parentNode.left = createNode(element);\n            } else {\n              //  System.out.println(&quot;left&quot;);\n                insertNodeRecursion(element, parentNode.left);\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1671874841,"post_id":74906717,"comment_id":132190910,"body_markdown":"What are you expecting `d+;` to do?","body":"What are you expecting <code>d+;</code> to do?"},{"owner":{"account_id":2443217,"reputation":91,"user_id":2131171,"display_name":"Van Le Thanh"},"score":0,"creation_date":1671874896,"post_id":74906717,"comment_id":132190925,"body_markdown":"sorry d++;//d=d+1;","body":"sorry d++;//d=d+1;"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1671874903,"post_id":74906717,"comment_id":132190927,"body_markdown":"Have you stepped through your program with the debugger?","body":"Have you stepped through your program with the debugger?"},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":2,"creation_date":1671875013,"post_id":74906717,"comment_id":132190944,"body_markdown":"Hint: how do you expect `d++;` to execute more than once?","body":"Hint: how do you expect <code>d++;</code> to execute more than once?"},{"owner":{"account_id":2443217,"reputation":91,"user_id":2131171,"display_name":"Van Le Thanh"},"score":0,"creation_date":1671875023,"post_id":74906717,"comment_id":132190947,"body_markdown":"I found out, in while{....} stack has 4 element 1,0,0,1. But  in if{.....} stack has only one element (value 1). I don&#39;t know what is problem","body":"I found out, in while{....} stack has 4 element 1,0,0,1. But  in if{.....} stack has only one element (value 1). I don&#39;t know what is problem"},{"owner":{"account_id":2443217,"reputation":91,"user_id":2131171,"display_name":"Van Le Thanh"},"score":0,"creation_date":1671875098,"post_id":74906717,"comment_id":132190959,"body_markdown":"@JonSkeet I want to check how many elements in stack.","body":"@JonSkeet I want to check how many elements in stack."},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1671875099,"post_id":74906717,"comment_id":132190960,"body_markdown":"What do you mean by &quot;stack has only one element&quot;? How did you determine that? (It really *does* have a size of 4 before the `if` statement. It has a size of 3 after the `if` statement...)","body":"What do you mean by &quot;stack has only one element&quot;? How did you determine that? (It really <i>does</i> have a size of 4 before the <code>if</code> statement. It has a size of 3 after the <code>if</code> statement...)"},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1671875118,"post_id":74906717,"comment_id":132190961,"body_markdown":"@VanLeThanh: No, literally: *how do you expect that line of code to be executed more than once?* Look *very* carefully at what you&#39;ve written.","body":"@VanLeThanh: No, literally: <i>how do you expect that line of code to be executed more than once?</i> Look <i>very</i> carefully at what you&#39;ve written."},{"owner":{"account_id":2443217,"reputation":91,"user_id":2131171,"display_name":"Van Le Thanh"},"score":0,"creation_date":1671875195,"post_id":74906717,"comment_id":132190969,"body_markdown":"@JonSkeet can you tell me where is my problem??","body":"@JonSkeet can you tell me where is my problem??"},{"owner":{"account_id":2443217,"reputation":91,"user_id":2131171,"display_name":"Van Le Thanh"},"score":0,"creation_date":1671875317,"post_id":74906717,"comment_id":132190982,"body_markdown":"I think after while{...} my stack has 4 element. In if {....} I will increase d and pop element until stack is empty.","body":"I think after while{...} my stack has 4 element. In if {....} I will increase d and pop element until stack is empty."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":1,"creation_date":1671875406,"post_id":74906717,"comment_id":132190991,"body_markdown":"_In if {....} I will increase d and pop element until stack is empty_: an `if` statement does not repeat itself - it executes only once. There is no _until stack is empty_ with just a single `if` statement!","body":"<i>In if {....} I will increase d and pop element until stack is empty</i>: an <code>if</code> statement does not repeat itself - it executes only once. There is no <i>until stack is empty</i> with just a single <code>if</code> statement!"},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1671875662,"post_id":74906717,"comment_id":132191036,"body_markdown":"Now that you&#39;ve been given the answer, it would be a good idea to take a step back and think about how you could have reached it yourself. Did you step through the code in a debugger? What happened? Did you misunderstand how an `if` statement worked, or did you not look at the code closely enough even after hints? This could be a very useful learning experience.","body":"Now that you&#39;ve been given the answer, it would be a good idea to take a step back and think about how you could have reached it yourself. Did you step through the code in a debugger? What happened? Did you misunderstand how an <code>if</code> statement worked, or did you not look at the code closely enough even after hints? This could be a very useful learning experience."},{"owner":{"account_id":2443217,"reputation":91,"user_id":2131171,"display_name":"Van Le Thanh"},"score":0,"creation_date":1671875738,"post_id":74906717,"comment_id":132191044,"body_markdown":"@JonSkeet thank you so much. I found out my problem. It&#39;s if statement.","body":"@JonSkeet thank you so much. I found out my problem. It&#39;s if statement."},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1671875838,"post_id":74906717,"comment_id":132191063,"body_markdown":"@VanLeThanh: Yes, I know it&#39;s in the `if` statement. I knew that from the start. I was giving you hints to try to help you spot that for yourself. Again, please don&#39;t just move on from this without thinking about it more. Try to work out how you could have figured this out for yourself.","body":"@VanLeThanh: Yes, I know it&#39;s in the <code>if</code> statement. I knew that from the start. I was giving you hints to try to help you spot that for yourself. Again, please don&#39;t just move on from this without thinking about it more. Try to work out how you could have figured this out for yourself."}],"answers":[{"tags":[],"owner":{"account_id":24112158,"reputation":433,"user_id":18082610,"display_name":"Ali"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671875410,"creation_date":1671875410,"answer_id":74906812,"question_id":74906717,"body_markdown":"Your problem is from line 8! When you define **if**, however you have to write **while** loop, NOT **if statement**\r\n\r\nAnother point is that your stack should be **integer** and its not essential to define stack with **string**\r\n\r\nSo try it:\r\n\r\n    Stack&lt;Integer&gt; st = new Stack&lt;&gt;();\r\n    int num = 9, d = 0;\r\n    while(num &gt; 0){\r\n        st.push(num%2);\r\n        num /= 2;\r\n    }\r\n    \r\n    while(!st.isEmpty()){\r\n        d++;\r\n        st.pop();\r\n     }\r\n    System.out.println(d);\r\n\r\n","title":"Cannot push 0 to stack in java","body":"<p>Your problem is from line 8! When you define <strong>if</strong>, however you have to write <strong>while</strong> loop, NOT <strong>if statement</strong></p>\n<p>Another point is that your stack should be <strong>integer</strong> and its not essential to define stack with <strong>string</strong></p>\n<p>So try it:</p>\n<pre><code>Stack&lt;Integer&gt; st = new Stack&lt;&gt;();\nint num = 9, d = 0;\nwhile(num &gt; 0){\n    st.push(num%2);\n    num /= 2;\n}\n\nwhile(!st.isEmpty()){\n    d++;\n    st.pop();\n }\nSystem.out.println(d);\n</code></pre>\n"}],"owner":{"account_id":2443217,"reputation":91,"user_id":2131171,"display_name":"Van Le Thanh"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1671875429,"accepted_answer_id":74906812,"answer_count":1,"score":-1,"last_activity_date":1671875410,"creation_date":1671874136,"question_id":74906717,"body_markdown":"I am newbie in Java. I have the problem. This is my code\r\n\r\n    Stack&lt;String&gt; st = new Stack&lt;String&gt;();\r\n    int num=9;\r\n    while(num &gt; 0){\r\n    \tst.push(Integer.toString(num%2));\r\n    \tnum/=2;\r\n    }\r\n    int d=0;\r\n    if(!st.isEmpty()){\r\n    \td++;\r\n    \tst.pop();\r\n     }\r\n    System.out.println(d);\r\n\r\nthe result is 1.\r\nBut correct is 4.\r\nI don&#39;t know how to fix it. Sorry if my English is not good. Thankyou","title":"Cannot push 0 to stack in java","body":"<p>I am newbie in Java. I have the problem. This is my code</p>\n<pre><code>Stack&lt;String&gt; st = new Stack&lt;String&gt;();\nint num=9;\nwhile(num &gt; 0){\n    st.push(Integer.toString(num%2));\n    num/=2;\n}\nint d=0;\nif(!st.isEmpty()){\n    d++;\n    st.pop();\n }\nSystem.out.println(d);\n</code></pre>\n<p>the result is 1.\nBut correct is 4.\nI don't know how to fix it. Sorry if my English is not good. Thankyou</p>\n"},{"tags":["java","multithreading","locking","reentrantlock"],"answers":[{"tags":[],"owner":{"account_id":14743295,"reputation":191,"user_id":12273958,"display_name":"aman goyal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671875162,"creation_date":1671875162,"answer_id":74906795,"question_id":74906794,"body_markdown":"This is known as &quot;writer starvation&quot;.\r\n\r\nWhen looking at the Javadoc for [ReentrantReadWriteLock][1], we can find the following paragraphs:\r\n\r\n&gt; This class does not impose a reader or writer preference ordering for\r\n&gt; lock access. However, it does support an optional fairness policy.\r\n&gt; \r\n&gt; Non-fair mode (default) When constructed as non-fair (the default),\r\n&gt; the order of entry to the read and write lock is unspecified, subject\r\n&gt; to reentrancy constraints. A nonfair lock that is continuously\r\n&gt; contended may indefinitely postpone one or more reader or writer\r\n&gt; threads, but will normally have higher throughput than a fair lock.\r\n&gt; \r\n&gt; Fair mode When constructed as fair, threads contend for entry using an\r\n&gt; approximately arrival-order policy. When the currently held lock is\r\n&gt; released, either the longest-waiting single writer thread will be\r\n&gt; assigned the write lock, or if there is a group of reader threads\r\n&gt; waiting longer than all waiting writer threads, that group will be\r\n&gt; assigned the read lock.\r\n&gt; \r\n&gt; A thread that tries to acquire a fair read lock (non-reentrantly) will\r\n&gt; block if either the write lock is held, or there is a waiting writer\r\n&gt; thread. The thread will not acquire the read lock until after the\r\n&gt; oldest currently waiting writer thread has acquired and released the\r\n&gt; write lock. Of course, if a waiting writer abandons its wait, leaving\r\n&gt; one or more reader threads as the longest waiters in the queue with\r\n&gt; the write lock free, then those readers will be assigned the read\r\n&gt; lock.\r\n&gt; \r\n&gt; A thread that tries to acquire a fair write lock (non-reentrantly)\r\n&gt; will block unless both the read lock and write lock are free (which\r\n&gt; implies there are no waiting threads). (Note that the non-blocking\r\n&gt; ReentrantReadWriteLock.ReadLock.tryLock() and\r\n&gt; ReentrantReadWriteLock.WriteLock.tryLock() methods do not honor this\r\n&gt; fair setting and will immediately acquire the lock if it is possible,\r\n&gt; regardless of waiting threads.)\r\n\r\nIn short: If you don&#39;t specify that the ReentrantReadWriteLock uses a fair policy, that can happen\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/locks/ReentrantReadWriteLock.html","title":"Never ending read request.! Reentrant Lock","body":"<p>This is known as &quot;writer starvation&quot;.</p>\n<p>When looking at the Javadoc for <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/locks/ReentrantReadWriteLock.html\" rel=\"nofollow noreferrer\">ReentrantReadWriteLock</a>, we can find the following paragraphs:</p>\n<blockquote>\n<p>This class does not impose a reader or writer preference ordering for\nlock access. However, it does support an optional fairness policy.</p>\n<p>Non-fair mode (default) When constructed as non-fair (the default),\nthe order of entry to the read and write lock is unspecified, subject\nto reentrancy constraints. A nonfair lock that is continuously\ncontended may indefinitely postpone one or more reader or writer\nthreads, but will normally have higher throughput than a fair lock.</p>\n<p>Fair mode When constructed as fair, threads contend for entry using an\napproximately arrival-order policy. When the currently held lock is\nreleased, either the longest-waiting single writer thread will be\nassigned the write lock, or if there is a group of reader threads\nwaiting longer than all waiting writer threads, that group will be\nassigned the read lock.</p>\n<p>A thread that tries to acquire a fair read lock (non-reentrantly) will\nblock if either the write lock is held, or there is a waiting writer\nthread. The thread will not acquire the read lock until after the\noldest currently waiting writer thread has acquired and released the\nwrite lock. Of course, if a waiting writer abandons its wait, leaving\none or more reader threads as the longest waiters in the queue with\nthe write lock free, then those readers will be assigned the read\nlock.</p>\n<p>A thread that tries to acquire a fair write lock (non-reentrantly)\nwill block unless both the read lock and write lock are free (which\nimplies there are no waiting threads). (Note that the non-blocking\nReentrantReadWriteLock.ReadLock.tryLock() and\nReentrantReadWriteLock.WriteLock.tryLock() methods do not honor this\nfair setting and will immediately acquire the lock if it is possible,\nregardless of waiting threads.)</p>\n</blockquote>\n<p>In short: If you don't specify that the ReentrantReadWriteLock uses a fair policy, that can happen</p>\n"}],"owner":{"account_id":14743295,"reputation":191,"user_id":12273958,"display_name":"aman goyal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1671875966,"accepted_answer_id":74906795,"answer_count":1,"score":-1,"last_activity_date":1671875162,"creation_date":1671875162,"question_id":74906794,"body_markdown":"While writing a piece of code for work I have encountered a use case for ReentrantReadWriteLock. So far my understanding is as long as there are more than zero thread with read lock a thread cannot acquire write lock. Application I am working on is read heavy with very less writes. Is it possible that more than zero thread will always have a read lock acquired and if a thread requires a write lock it will forever be suspended?","title":"Never ending read request.! Reentrant Lock","body":"<p>While writing a piece of code for work I have encountered a use case for ReentrantReadWriteLock. So far my understanding is as long as there are more than zero thread with read lock a thread cannot acquire write lock. Application I am working on is read heavy with very less writes. Is it possible that more than zero thread will always have a read lock acquired and if a thread requires a write lock it will forever be suspended?</p>\n"},{"tags":["java","spring","hibernate","jpa"],"comments":[{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1671188850,"post_id":74823365,"comment_id":132050227,"body_markdown":"Your stack trace doesn&#39;t contain &quot;type mismatch&quot;, so where did you get that from?","body":"Your stack trace doesn&#39;t contain &quot;type mismatch&quot;, so where did you get that from?"},{"owner":{"account_id":14535295,"reputation":87,"user_id":10498869,"display_name":"Dadinho2000"},"score":0,"creation_date":1671188929,"post_id":74823365,"comment_id":132050257,"body_markdown":"It is on the &quot;type = &quot;boolean&quot;&quot;, the &quot;boolean&quot; is red underlined and it says that &quot;Type mismatch&quot; :/","body":"It is on the &quot;type = &quot;boolean&quot;&quot;, the &quot;boolean&quot; is red underlined and it says that &quot;Type mismatch&quot; :/"},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1671189246,"post_id":74823365,"comment_id":132050348,"body_markdown":"But if that&#39;s a compiler error, then how is your code running for you to give us a stack trace? Or is&quot;type mismatch&quot; just a warning from your IDE (doesn&#39;t sound right)?","body":"But if that&#39;s a compiler error, then how is your code running for you to give us a stack trace? Or is&quot;type mismatch&quot; just a warning from your IDE (doesn&#39;t sound right)?"},{"owner":{"account_id":14535295,"reputation":87,"user_id":10498869,"display_name":"Dadinho2000"},"score":0,"creation_date":1671189410,"post_id":74823365,"comment_id":132050401,"body_markdown":"It&#39;s a compiler error, I told it to ignore it and debug... I can&#39;t understand what is going on","body":"It&#39;s a compiler error, I told it to ignore it and debug... I can&#39;t understand what is going on"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1671189553,"post_id":74823365,"comment_id":132050454,"body_markdown":"Is that the full stcktrace? I would expect more after that. Anyway your `getdeleted` is wrong and should be named `getDeleted`, the names need to match. If that doesn&#39;t resolve it please add your build file so we can see your depenendencies.","body":"Is that the full stcktrace? I would expect more after that. Anyway your <code>getdeleted</code> is wrong and should be named <code>getDeleted</code>, the names need to match. If that doesn&#39;t resolve it please add your build file so we can see your depenendencies."},{"owner":{"account_id":14535295,"reputation":87,"user_id":10498869,"display_name":"Dadinho2000"},"score":0,"creation_date":1671189713,"post_id":74823365,"comment_id":132050494,"body_markdown":"it doesn&#39;t sir, edited already and added the pom.xl","body":"it doesn&#39;t sir, edited already and added the pom.xl"}],"answers":[{"tags":[],"owner":{"account_id":25748814,"reputation":146,"user_id":19501659,"display_name":"Habib Z."},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1671875042,"creation_date":1671875042,"answer_id":74906782,"question_id":74823365,"body_markdown":"Spring-boot 3.0.0 uses Hibernate 6.1.5\r\n\r\nFrom Hibernate 6, the `@ParamDef` type field type changed from String to Class&lt;?&gt; : \r\nhttps://docs.jboss.org/hibernate/orm/6.1/javadocs/org/hibernate/annotations/ParamDef.html\r\n\r\nI don&#39;t how your code compiles but you need to change the annotation declaration to something like : \r\n\r\n    @FilterDef(name = &quot;&quot;, parameters = @ParamDef(name = &quot;isDeleted&quot;, type = org.hibernate.type.descriptor.java.BooleanJavaType.class))\r\n\r\n","title":"Type mismatch: cannot convert from String to Class&lt;?&gt;Java(16777233)","body":"<p>Spring-boot 3.0.0 uses Hibernate 6.1.5</p>\n<p>From Hibernate 6, the <code>@ParamDef</code> type field type changed from String to Class&lt;?&gt; :\n<a href=\"https://docs.jboss.org/hibernate/orm/6.1/javadocs/org/hibernate/annotations/ParamDef.html\" rel=\"nofollow noreferrer\">https://docs.jboss.org/hibernate/orm/6.1/javadocs/org/hibernate/annotations/ParamDef.html</a></p>\n<p>I don't how your code compiles but you need to change the annotation declaration to something like :</p>\n<pre><code>@FilterDef(name = &quot;&quot;, parameters = @ParamDef(name = &quot;isDeleted&quot;, type = org.hibernate.type.descriptor.java.BooleanJavaType.class))\n</code></pre>\n"}],"owner":{"account_id":14535295,"reputation":87,"user_id":10498869,"display_name":"Dadinho2000"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1378,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1671875042,"creation_date":1671187674,"question_id":74823365,"body_markdown":"I&#39;m making a spring-boot JPA API, and I&#39;m trying to make a soft deletion, and I will need a filter for sure !!!!\r\nWhenever I&#39;m defining its parameters, it gives an exception on its type, no matter what type I write.\r\n\r\n```\r\npackage com.proj.my.model;\r\n\r\nimport jakarta.persistence.Column;\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.EntityListeners;\r\nimport jakarta.persistence.Id;\r\n\r\nimport java.sql.Date;\r\n\r\nimport org.hibernate.annotations.CreationTimestamp;\r\nimport org.hibernate.annotations.Filter;\r\nimport org.hibernate.annotations.FilterDef;\r\nimport org.hibernate.annotations.ParamDef;\r\nimport org.hibernate.annotations.SQLDelete;\r\nimport org.hibernate.annotations.Where;\r\nimport org.springframework.data.jpa.domain.support.AuditingEntityListener;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonIgnoreProperties;\r\n\r\nimport jakarta.persistence.Table;\r\n\r\n@Entity\r\n@Table(name=&quot;cloud_product_info&quot;)\r\n@SQLDelete(sql = &quot;UPDATE cloud_product_info SET deleted = true WHERE product_id=?&quot;)\r\n//@Where(clause = &quot;deleted=false&quot;)\r\n@FilterDef(name=&quot;&quot;, parameters = @ParamDef(name=&quot;isDeleted&quot;, type = &quot;boolean&quot;)) &lt;--- HERE\r\n@Filter(name=&quot;deletedBookFilter&quot;, condition = &quot;deleted = :isDeleted&quot;)\r\n@EntityListeners(AuditingEntityListener.class)\r\n@JsonIgnoreProperties(value = {&quot;createdAt&quot;, &quot;updatedAt&quot;}, \r\n        allowGetters = true)\r\n\r\n\r\n\r\npublic class CloudProduct {\r\n\r\n    @Id\r\n    private String productId;\r\n    private String productName;\r\n    private String productPrice;\r\n    @CreationTimestamp\r\n    @Column(updatable = false, name = &quot;created_at&quot;)\r\n    private Date createdAt;\r\n    private Boolean deleted = Boolean.FALSE;\r\n\r\n\r\n    \r\n    public Boolean getdeleted() {\r\n        return deleted;\r\n    }\r\n\r\n    public void setdDeleted(Boolean deleted) {\r\n        this.deleted = deleted;\r\n    }\r\n\r\n    public CloudProduct(String productId, String productName, String productPrice, Date createdAt, Boolean deleted) {\r\n        this.productId = productId;\r\n        this.productName = productName;\r\n        this.productPrice = productPrice;\r\n        this.createdAt = createdAt;\r\n        this.deleted = deleted;\r\n    }\r\n\r\n    public CloudProduct() {\r\n\r\n    } \r\n    \r\n    public String getProductId() {\r\n        return productId;\r\n    }\r\n    public void setProductId(String productId) {\r\n        this.productId = productId;\r\n    }\r\n    public String getProductName() {\r\n        return productName;\r\n    }\r\n    public void setProductName(String productName) {\r\n        this.productName = productName;\r\n    }\r\n    public String getProductPrice() {\r\n        return productPrice;\r\n    }\r\n    public void setProductPrice(String productPrice) {\r\n        this.productPrice = productPrice;\r\n    }\r\n\r\n    public Date getCreatedAt() {\r\n        return createdAt;\r\n    }\r\n\r\n    public void setCreatedAt(Date createdAt) {\r\n        this.createdAt = createdAt;\r\n    }\r\n}\r\n\r\n\r\n```\r\nThis is my CloudProduct.java ...\r\nIf you need any more code I&#39;ve got, just tell me.\r\nHelp pls !!!!\r\n\r\n```\r\n2022-12-16T10:59:53.847Z  WARN 15128 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springfr\r\namework.beans.factory.BeanDefinitionStoreException: Failed to read candidate component class: file [C:\\Users\\berna\\OneDrive\\Ambiente de Trabalho\\proj\\my\\target\\classes\\com\\proj\\my\\model\\CloudProdu\r\nct.class]\r\n2022-12-16T10:59:53.876Z ERROR 15128 --- [           main] o.s.boot.SpringApplication               : Application run failed\r\n\r\norg.springframework.beans.factory.BeanDefinitionStoreException: Failed to read candidate component class: file [C:\\Users\\berna\\OneDrive\\Ambiente de Trabalho\\proj\\my\\target\\classes\\com\\proj\\my\\mode\r\nl\\CloudProduct.class]\r\n        at org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.scanCandidateComponents(ClassPathScanningCandidateComponentProvider.java:462) ~[spring-context-6.0.2.j\r\nar:6.0.2]\r\n        at org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.findCandidateComponents(ClassPathScanningCandidateComponentProvider.java:316) ~[spring-context-6.0.2.j\r\nar:6.0.2]\r\n        at org.springframework.context.annotation.ClassPathBeanDefinitionScanner.doScan(ClassPathBeanDefinitionScanner.java:276) ~[spring-context-6.0.2.jar:6.0.2]\r\n        at org.springframework.context.annotation.ComponentScanAnnotationParser.parse(ComponentScanAnnotationParser.java:128) ~[spring-context-6.0.2.jar:6.0.2]\r\n        at org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:290) ~[spring-context-6.0.2.jar:6.0.2]\r\n        at org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:244) ~[spring-context-6.0.2.jar:6.0.2]\r\n        at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:197) ~[spring-context-6.0.2.jar:6.0.2]\r\n        at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:165) ~[spring-context-6.0.2.jar:6.0.2]\r\n        at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:397) ~[spring-context-6.0.2.jar:6.0.2]\r\n        at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:283) ~[spring-context-6.0.2.jar:6.0.2]\r\n        at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:344) ~[spring-context-6.0.2.jar:6\r\n.0.2]\r\n        at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:115) ~[spring-context-6.0.2.jar:6.0.2]\r\n        at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:745) ~[spring-context-6.0.2.jar:6.0.2]\r\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:565) ~[spring-context-6.0.2.jar:6.0.2]\r\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.0.0.jar:3.0.0]\r\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730) ~[spring-boot-3.0.0.jar:3.0.0]\r\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432) ~[spring-boot-3.0.0.jar:3.0.0]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-3.0.0.jar:3.0.0]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302) ~[spring-boot-3.0.0.jar:3.0.0]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291) ~[spring-boot-3.0.0.jar:3.0.0]\r\n        at com.proj.my.MyApplication.main(MyApplication.java:10) ~[classes/:na]\r\nCaused by: java.lang.IllegalArgumentException: null\r\n        at org.springframework.asm.ClassReader.readElementValue(ClassReader.java:3189) ~[spring-core-6.0.2.jar:6.0.2]\r\n        at org.springframework.asm.ClassReader.readElementValues(ClassReader.java:3000) ~[spring-core-6.0.2.jar:6.0.2]\r\n        at org.springframework.asm.ClassReader.readElementValue(ClassReader.java:3093) ~[spring-core-6.0.2.jar:6.0.2]\r\n        at org.springframework.asm.ClassReader.readElementValues(ClassReader.java:3006) ~[spring-core-6.0.2.jar:6.0.2]\r\n        at org.springframework.asm.ClassReader.readElementValue(ClassReader.java:3180) ~[spring-core-6.0.2.jar:6.0.2]\r\n        at org.springframework.asm.ClassReader.readElementValues(ClassReader.java:3000) ~[spring-core-6.0.2.jar:6.0.2]\r\n        at org.springframework.asm.ClassReader.accept(ClassReader.java:610) ~[spring-core-6.0.2.jar:6.0.2]\r\n        at org.springframework.asm.ClassReader.accept(ClassReader.java:426) ~[spring-core-6.0.2.jar:6.0.2]\r\n        at org.springframework.core.type.classreading.SimpleMetadataReader.&lt;init&gt;(SimpleMetadataReader.java:48) ~[spring-core-6.0.2.jar:6.0.2]\r\n        at org.springframework.core.type.classreading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:103) ~[spring-core-6.0.2.jar:6.0.2]\r\n        at org.springframework.core.type.classreading.CachingMetadataReaderFactory.getMetadataReader(CachingMetadataReaderFactory.java:122) ~[spring-core-6.0.2.jar:6.0.2]\r\n        at org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.scanCandidateComponents(ClassPathScanningCandidateComponentProvider.java:434) ~[spring-context-6.0.2.j\r\nar:6.0.2]\r\n        ... 20 common frames omitted\r\n```\r\n\r\nstack trace of the exception\r\n\r\nMy pom.xl :\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.thinkcon&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;demo&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```","title":"Type mismatch: cannot convert from String to Class&lt;?&gt;Java(16777233)","body":"<p>I'm making a spring-boot JPA API, and I'm trying to make a soft deletion, and I will need a filter for sure !!!!\nWhenever I'm defining its parameters, it gives an exception on its type, no matter what type I write.</p>\n<pre><code>package com.proj.my.model;\n\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.EntityListeners;\nimport jakarta.persistence.Id;\n\nimport java.sql.Date;\n\nimport org.hibernate.annotations.CreationTimestamp;\nimport org.hibernate.annotations.Filter;\nimport org.hibernate.annotations.FilterDef;\nimport org.hibernate.annotations.ParamDef;\nimport org.hibernate.annotations.SQLDelete;\nimport org.hibernate.annotations.Where;\nimport org.springframework.data.jpa.domain.support.AuditingEntityListener;\n\nimport com.fasterxml.jackson.annotation.JsonIgnoreProperties;\n\nimport jakarta.persistence.Table;\n\n@Entity\n@Table(name=&quot;cloud_product_info&quot;)\n@SQLDelete(sql = &quot;UPDATE cloud_product_info SET deleted = true WHERE product_id=?&quot;)\n//@Where(clause = &quot;deleted=false&quot;)\n@FilterDef(name=&quot;&quot;, parameters = @ParamDef(name=&quot;isDeleted&quot;, type = &quot;boolean&quot;)) &lt;--- HERE\n@Filter(name=&quot;deletedBookFilter&quot;, condition = &quot;deleted = :isDeleted&quot;)\n@EntityListeners(AuditingEntityListener.class)\n@JsonIgnoreProperties(value = {&quot;createdAt&quot;, &quot;updatedAt&quot;}, \n        allowGetters = true)\n\n\n\npublic class CloudProduct {\n\n    @Id\n    private String productId;\n    private String productName;\n    private String productPrice;\n    @CreationTimestamp\n    @Column(updatable = false, name = &quot;created_at&quot;)\n    private Date createdAt;\n    private Boolean deleted = Boolean.FALSE;\n\n\n    \n    public Boolean getdeleted() {\n        return deleted;\n    }\n\n    public void setdDeleted(Boolean deleted) {\n        this.deleted = deleted;\n    }\n\n    public CloudProduct(String productId, String productName, String productPrice, Date createdAt, Boolean deleted) {\n        this.productId = productId;\n        this.productName = productName;\n        this.productPrice = productPrice;\n        this.createdAt = createdAt;\n        this.deleted = deleted;\n    }\n\n    public CloudProduct() {\n\n    } \n    \n    public String getProductId() {\n        return productId;\n    }\n    public void setProductId(String productId) {\n        this.productId = productId;\n    }\n    public String getProductName() {\n        return productName;\n    }\n    public void setProductName(String productName) {\n        this.productName = productName;\n    }\n    public String getProductPrice() {\n        return productPrice;\n    }\n    public void setProductPrice(String productPrice) {\n        this.productPrice = productPrice;\n    }\n\n    public Date getCreatedAt() {\n        return createdAt;\n    }\n\n    public void setCreatedAt(Date createdAt) {\n        this.createdAt = createdAt;\n    }\n}\n\n\n</code></pre>\n<p>This is my CloudProduct.java ...\nIf you need any more code I've got, just tell me.\nHelp pls !!!!</p>\n<pre><code>2022-12-16T10:59:53.847Z  WARN 15128 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springfr\namework.beans.factory.BeanDefinitionStoreException: Failed to read candidate component class: file [C:\\Users\\berna\\OneDrive\\Ambiente de Trabalho\\proj\\my\\target\\classes\\com\\proj\\my\\model\\CloudProdu\nct.class]\n2022-12-16T10:59:53.876Z ERROR 15128 --- [           main] o.s.boot.SpringApplication               : Application run failed\n\norg.springframework.beans.factory.BeanDefinitionStoreException: Failed to read candidate component class: file [C:\\Users\\berna\\OneDrive\\Ambiente de Trabalho\\proj\\my\\target\\classes\\com\\proj\\my\\mode\nl\\CloudProduct.class]\n        at org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.scanCandidateComponents(ClassPathScanningCandidateComponentProvider.java:462) ~[spring-context-6.0.2.j\nar:6.0.2]\n        at org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.findCandidateComponents(ClassPathScanningCandidateComponentProvider.java:316) ~[spring-context-6.0.2.j\nar:6.0.2]\n        at org.springframework.context.annotation.ClassPathBeanDefinitionScanner.doScan(ClassPathBeanDefinitionScanner.java:276) ~[spring-context-6.0.2.jar:6.0.2]\n        at org.springframework.context.annotation.ComponentScanAnnotationParser.parse(ComponentScanAnnotationParser.java:128) ~[spring-context-6.0.2.jar:6.0.2]\n        at org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:290) ~[spring-context-6.0.2.jar:6.0.2]\n        at org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:244) ~[spring-context-6.0.2.jar:6.0.2]\n        at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:197) ~[spring-context-6.0.2.jar:6.0.2]\n        at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:165) ~[spring-context-6.0.2.jar:6.0.2]\n        at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:397) ~[spring-context-6.0.2.jar:6.0.2]\n        at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:283) ~[spring-context-6.0.2.jar:6.0.2]\n        at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:344) ~[spring-context-6.0.2.jar:6\n.0.2]\n        at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:115) ~[spring-context-6.0.2.jar:6.0.2]\n        at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:745) ~[spring-context-6.0.2.jar:6.0.2]\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:565) ~[spring-context-6.0.2.jar:6.0.2]\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.0.0.jar:3.0.0]\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730) ~[spring-boot-3.0.0.jar:3.0.0]\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432) ~[spring-boot-3.0.0.jar:3.0.0]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-3.0.0.jar:3.0.0]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302) ~[spring-boot-3.0.0.jar:3.0.0]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291) ~[spring-boot-3.0.0.jar:3.0.0]\n        at com.proj.my.MyApplication.main(MyApplication.java:10) ~[classes/:na]\nCaused by: java.lang.IllegalArgumentException: null\n        at org.springframework.asm.ClassReader.readElementValue(ClassReader.java:3189) ~[spring-core-6.0.2.jar:6.0.2]\n        at org.springframework.asm.ClassReader.readElementValues(ClassReader.java:3000) ~[spring-core-6.0.2.jar:6.0.2]\n        at org.springframework.asm.ClassReader.readElementValue(ClassReader.java:3093) ~[spring-core-6.0.2.jar:6.0.2]\n        at org.springframework.asm.ClassReader.readElementValues(ClassReader.java:3006) ~[spring-core-6.0.2.jar:6.0.2]\n        at org.springframework.asm.ClassReader.readElementValue(ClassReader.java:3180) ~[spring-core-6.0.2.jar:6.0.2]\n        at org.springframework.asm.ClassReader.readElementValues(ClassReader.java:3000) ~[spring-core-6.0.2.jar:6.0.2]\n        at org.springframework.asm.ClassReader.accept(ClassReader.java:610) ~[spring-core-6.0.2.jar:6.0.2]\n        at org.springframework.asm.ClassReader.accept(ClassReader.java:426) ~[spring-core-6.0.2.jar:6.0.2]\n        at org.springframework.core.type.classreading.SimpleMetadataReader.&lt;init&gt;(SimpleMetadataReader.java:48) ~[spring-core-6.0.2.jar:6.0.2]\n        at org.springframework.core.type.classreading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:103) ~[spring-core-6.0.2.jar:6.0.2]\n        at org.springframework.core.type.classreading.CachingMetadataReaderFactory.getMetadataReader(CachingMetadataReaderFactory.java:122) ~[spring-core-6.0.2.jar:6.0.2]\n        at org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.scanCandidateComponents(ClassPathScanningCandidateComponentProvider.java:434) ~[spring-context-6.0.2.j\nar:6.0.2]\n        ... 20 common frames omitted\n</code></pre>\n<p>stack trace of the exception</p>\n<p>My pom.xl :</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.thinkcon&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;demo&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1671804853,"post_id":74900496,"comment_id":132180328,"body_markdown":"where did you put the manifest file? seems like you tried to put it in the src folder. Maybe you should have checked those other answers, that&#39;s not where the manifest file goes. You can also simply unzip your jar file, create the right directory for it, put the manifest file in it, and re-zip it","body":"where did you put the manifest file? seems like you tried to put it in the src folder. Maybe you should have checked those other answers, that&#39;s not where the manifest file goes. You can also simply unzip your jar file, create the right directory for it, put the manifest file in it, and re-zip it"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":2,"creation_date":1671805335,"post_id":74900496,"comment_id":132180458,"body_markdown":"I also wonder the `no main manifest attribute` message, be sure to add a newline after the last attribute of `MANIFEST.MF` (best have an empty line as last line)","body":"I also wonder the <code>no main manifest attribute</code> message, be sure to add a newline after the last attribute of <code>MANIFEST.MF</code> (best have an empty line as last line)"},{"owner":{"account_id":13429807,"reputation":1816,"user_id":9689945,"display_name":"hhrzc"},"score":0,"creation_date":1671817294,"post_id":74900496,"comment_id":132183635,"body_markdown":"@Stultuske, thanks, I have tried the way you offered (edit Manifest inside jar) - not working. It seems I have some broken jdk on my laptop","body":"@Stultuske, thanks, I have tried the way you offered (edit Manifest inside jar) - not working. It seems I have some broken jdk on my laptop"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1671817366,"post_id":74900496,"comment_id":132183657,"body_markdown":"**Why** don&#39;t use you Maven , Gradle, etc? What you&#39;re doing is not very portable.","body":"<b>Why</b> don&#39;t use you Maven , Gradle, etc? What you&#39;re doing is not very portable."},{"owner":{"account_id":13429807,"reputation":1816,"user_id":9689945,"display_name":"hhrzc"},"score":0,"creation_date":1671817736,"post_id":74900496,"comment_id":132183741,"body_markdown":"@OneCricketeer I have to make a solution that has most lightweight jar file, and I supposed this way will produce more light jar file than thought maven. It seems I have no other choice. Nothing work.","body":"@OneCricketeer I have to make a solution that has most lightweight jar file, and I supposed this way will produce more light jar file than thought maven. It seems I have no other choice. Nothing work."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1671817957,"post_id":74900496,"comment_id":132183787,"body_markdown":"Maven creates the exact same JAR file... It runs `javac` and `jar` on its own. You can use `jar -tf` to compare output.","body":"Maven creates the exact same JAR file... It runs <code>javac</code> and <code>jar</code> on its own. You can use <code>jar -tf</code> to compare output."},{"owner":{"account_id":13429807,"reputation":1816,"user_id":9689945,"display_name":"hhrzc"},"score":0,"creation_date":1671827909,"post_id":74900496,"comment_id":132185838,"body_markdown":"@user16320675, This is the solution (new line). Thanks, will be good if you provide an answer - I&#39;ll accept him","body":"@user16320675, This is the solution (new line). Thanks, will be good if you provide an answer - I&#39;ll accept him"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1671874852,"post_id":74900496,"comment_id":132190915,"body_markdown":"@Valentyn done . BTW I think that using Maven, Gradle,... should produce the same JAR (if configured correctly), but I am not an *experts* on this both...","body":"@Valentyn done . BTW I think that using Maven, Gradle,... should produce the same JAR (if configured correctly), but I am not an <i>experts</i> on this both..."},{"owner":{"account_id":13429807,"reputation":1816,"user_id":9689945,"display_name":"hhrzc"},"score":0,"creation_date":1671906623,"post_id":74900496,"comment_id":132195984,"body_markdown":"@user16320675 Thank you. Anyway, it was worth it, I learned an important nuance from u","body":"@user16320675 Thank you. Anyway, it was worth it, I learned an important nuance from u"}],"answers":[{"tags":[],"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671817245,"creation_date":1671814924,"answer_id":74902180,"question_id":74900496,"body_markdown":"# Project structure\r\n\r\n    DemoApp\r\n    ├── MANIFEST.MF\r\n    └── src\r\n        ├── A.java\r\n        ├── B.java\r\n        └── Main.java\r\n\r\n## MANIFEST file\r\n\r\n    Manifest-Version: 1.0\r\n    Main-Class: Main\r\n\r\n## Main.java\r\n**No package**\r\n\r\n    import java.util.Calendar;\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            System.out.println(&quot;Hello world!&quot;);\r\n            System.out.println(new A().hello(&quot;WORLD&quot;));\r\n            System.out.println(new B().echo(Calendar.getInstance().getTime().toString()));\r\n        }\r\n    }\r\n\r\n\r\n# Steps\r\n\r\n## 1. Compiling:\r\n\r\n    javac src/*.java -d out\r\n\r\n### result\r\n\r\n    DemoApp\r\n    └── out\r\n     &#160;&#160; ├── A.class\r\n     &#160;&#160; ├── B.class\r\n     &#160;&#160; └── Main.class\r\n\r\n## 2. Copy MANIFEST.MF to out\r\n\r\n    cp MANIFEST.MF out/\r\n\r\n    \r\n### result\r\n\r\n    DemoApp\r\n    └── out\r\n     &#160;&#160; ├── A.class\r\n     &#160;&#160; ├── B.class\r\n     &#160;&#160; ├── Main.class\r\n     &#160;&#160; └── MANIFEST.MF\r\n\r\n## 3. Packing jar\r\n    \r\n    cd out\r\n    jar cfm ../app.jar MANIFEST.MF *.class\r\n    cd ..\r\n\r\n### final result\r\n\r\n    DemoApp\r\n    ├── app.jar\r\n    ├── MANIFEST.MF\r\n    ├── out\r\n    │&#160;&#160; ├── A.class\r\n    │&#160;&#160; ├── B.class\r\n    │&#160;&#160; ├── Main.class\r\n    │&#160;&#160; └── MANIFEST.MF\r\n    └── src\r\n        ├── A.java\r\n        ├── B.java\r\n        └── Main.java\r\n\r\n## 4. Launching:\r\n\r\n    java -jar app.jar\r\n\r\n# Jar file structure\r\n\r\n    app.jar\r\n    ├── A.class\r\n    ├── B.class\r\n    ├── Main.class\r\n    └── META-INF\r\n        └── MANIFEST.MF\r\n\r\n# Project structure - No MANIFEST.MF\r\n\r\n    DemoApp\r\n    └── src\r\n        ├── A.java\r\n        ├── B.java\r\n        └── Main.java\r\n\r\n# Steps\r\n## Compile .java\r\n\r\n    javac src/*.java -d out\r\n\r\n### Result\r\n\r\n    DemoApp\r\n    ├── out\r\n    │&#160;&#160; ├── A.class\r\n    │&#160;&#160; ├── B.class\r\n    │&#160;&#160; └── Main.class\r\n    └── src\r\n        ├── A.java\r\n        ├── B.java\r\n        └── Main.java\r\n\r\n## Packing jar\r\n\r\n    jar cfe app.jar Main -C out /\r\n\r\n### Result\r\n\r\n    DemoApp\r\n    ├── app.jar\r\n    ├── out\r\n    │&#160;&#160; ├── A.class\r\n    │&#160;&#160; ├── B.class\r\n    │&#160;&#160; └── Main.class\r\n    └── src\r\n        ├── A.java\r\n        ├── B.java\r\n        └── Main.java\r\n\r\n## Launching:\r\n\r\n    java -jar app.jar\r\n\r\n","title":"jar from Main.class creation: no main manifest attribute, in jar","body":"<h1>Project structure</h1>\n<pre><code>DemoApp\n├── MANIFEST.MF\n└── src\n    ├── A.java\n    ├── B.java\n    └── Main.java\n</code></pre>\n<h2>MANIFEST file</h2>\n<pre><code>Manifest-Version: 1.0\nMain-Class: Main\n</code></pre>\n<h2>Main.java</h2>\n<p><strong>No package</strong></p>\n<pre><code>import java.util.Calendar;\n\npublic class Main {\n    public static void main(String[] args) {\n        System.out.println(&quot;Hello world!&quot;);\n        System.out.println(new A().hello(&quot;WORLD&quot;));\n        System.out.println(new B().echo(Calendar.getInstance().getTime().toString()));\n    }\n}\n</code></pre>\n<h1>Steps</h1>\n<h2>1. Compiling:</h2>\n<pre><code>javac src/*.java -d out\n</code></pre>\n<h3>result</h3>\n<pre><code>DemoApp\n└── out\n    ├── A.class\n    ├── B.class\n    └── Main.class\n</code></pre>\n<h2>2. Copy MANIFEST.MF to out</h2>\n<pre><code>cp MANIFEST.MF out/\n</code></pre>\n<h3>result</h3>\n<pre><code>DemoApp\n└── out\n    ├── A.class\n    ├── B.class\n    ├── Main.class\n    └── MANIFEST.MF\n</code></pre>\n<h2>3. Packing jar</h2>\n<pre><code>cd out\njar cfm ../app.jar MANIFEST.MF *.class\ncd ..\n</code></pre>\n<h3>final result</h3>\n<pre><code>DemoApp\n├── app.jar\n├── MANIFEST.MF\n├── out\n│   ├── A.class\n│   ├── B.class\n│   ├── Main.class\n│   └── MANIFEST.MF\n└── src\n    ├── A.java\n    ├── B.java\n    └── Main.java\n</code></pre>\n<h2>4. Launching:</h2>\n<pre><code>java -jar app.jar\n</code></pre>\n<h1>Jar file structure</h1>\n<pre><code>app.jar\n├── A.class\n├── B.class\n├── Main.class\n└── META-INF\n    └── MANIFEST.MF\n</code></pre>\n<h1>Project structure - No MANIFEST.MF</h1>\n<pre><code>DemoApp\n└── src\n    ├── A.java\n    ├── B.java\n    └── Main.java\n</code></pre>\n<h1>Steps</h1>\n<h2>Compile .java</h2>\n<pre><code>javac src/*.java -d out\n</code></pre>\n<h3>Result</h3>\n<pre><code>DemoApp\n├── out\n│   ├── A.class\n│   ├── B.class\n│   └── Main.class\n└── src\n    ├── A.java\n    ├── B.java\n    └── Main.java\n</code></pre>\n<h2>Packing jar</h2>\n<pre><code>jar cfe app.jar Main -C out /\n</code></pre>\n<h3>Result</h3>\n<pre><code>DemoApp\n├── app.jar\n├── out\n│   ├── A.class\n│   ├── B.class\n│   └── Main.class\n└── src\n    ├── A.java\n    ├── B.java\n    └── Main.java\n</code></pre>\n<h2>Launching:</h2>\n<pre><code>java -jar app.jar\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671818871,"creation_date":1671818871,"answer_id":74902746,"question_id":74900496,"body_markdown":"```\r\n$ java -version\r\njava version &quot;17.0.3&quot; 2022-04-19 LTS\r\nJava(TM) SE Runtime Environment (build 17.0.3+8-LTS-111)\r\nJava HotSpot(TM) 64-Bit Server VM (build 17.0.3+8-LTS-111, mixed mode, sharing)\r\n\r\n$ javac -version\r\njavac 17.0.3\r\n```\r\n\r\nUse a Makefile\r\n\r\n```\r\nJAVAC=javac\r\nMAIN_CLASS=Main\r\nAPP_NAME=app\r\nsources = $(wildcard src/*.java)\r\nclasses = $(sources:.java=.class)\r\n\r\n\r\nall: program\r\n\r\nprogram: $(classes)\r\n\r\nclean:\r\n\t@rm -rf out/\r\n\t@rm *.jar\r\n\r\n%.class: %.java\r\n\t@$(JAVAC) -d out $&lt;\r\n\r\njar: $(classes)\r\n\t@jar -v --create --file $(APP_NAME).jar --main-class $(MAIN_CLASS) -C out/ .\r\n\r\nexec: jar\r\n\tjava -cp .:out -jar $(APP_NAME).jar\r\n\r\n.PHONY: all program clean jar\r\n```\r\n\r\nFolder structure\r\n\r\n```\r\n├── Makefile\r\n└── src\r\n    └── Main.java\r\n```\r\n\r\n```\r\n$ make clean exec\r\nadded manifest\r\nadding: Main.class(in = 413) (out= 288)(deflated 30%)\r\njava -cp .:out -jar app.jar\r\nHello world\r\n```","title":"jar from Main.class creation: no main manifest attribute, in jar","body":"<pre><code>$ java -version\njava version &quot;17.0.3&quot; 2022-04-19 LTS\nJava(TM) SE Runtime Environment (build 17.0.3+8-LTS-111)\nJava HotSpot(TM) 64-Bit Server VM (build 17.0.3+8-LTS-111, mixed mode, sharing)\n\n$ javac -version\njavac 17.0.3\n</code></pre>\n<p>Use a Makefile</p>\n<pre><code>JAVAC=javac\nMAIN_CLASS=Main\nAPP_NAME=app\nsources = $(wildcard src/*.java)\nclasses = $(sources:.java=.class)\n\n\nall: program\n\nprogram: $(classes)\n\nclean:\n    @rm -rf out/\n    @rm *.jar\n\n%.class: %.java\n    @$(JAVAC) -d out $&lt;\n\njar: $(classes)\n    @jar -v --create --file $(APP_NAME).jar --main-class $(MAIN_CLASS) -C out/ .\n\nexec: jar\n    java -cp .:out -jar $(APP_NAME).jar\n\n.PHONY: all program clean jar\n</code></pre>\n<p>Folder structure</p>\n<pre><code>├── Makefile\n└── src\n    └── Main.java\n</code></pre>\n<pre><code>$ make clean exec\nadded manifest\nadding: Main.class(in = 413) (out= 288)(deflated 30%)\njava -cp .:out -jar app.jar\nHello world\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671874724,"creation_date":1671874724,"answer_id":74906756,"question_id":74900496,"body_markdown":"The Name-Value lines of the Manifest file must be terminated by a newline (`CR LF`, `CR` or `LF`) according the [JAR Specification](https://docs.oracle.com/en/java/javase/19/docs/specs/jar/jar.html#name-value-pairs-and-sections):\r\n&gt; ````\r\n&gt; section:           *header +newline\r\n&gt; nonempty-section:  +header +newline\r\n&gt; newline:           CR LF | LF | CR (not followed by LF)\r\n&gt; header:            name : value\r\n&gt; ````\r\n\r\nSince the manifest file contains `Main-Class: src.Main` but it is not being recognized (&quot;no main manifest attribute...&quot;), the newline is probably missing after that line - the last line.  \r\nSome editors do not add a newline at the end of the file.\r\n\r\nTo avoid that problem always include an empty line at the very end of the Manifest file.\r\n\r\n&lt;sub&gt; very old *problem*, I would expect the `jar` tool to correct that, or at least warns about it&lt;/sub&gt;","title":"jar from Main.class creation: no main manifest attribute, in jar","body":"<p>The Name-Value lines of the Manifest file must be terminated by a newline (<code>CR LF</code>, <code>CR</code> or <code>LF</code>) according the <a href=\"https://docs.oracle.com/en/java/javase/19/docs/specs/jar/jar.html#name-value-pairs-and-sections\" rel=\"nofollow noreferrer\">JAR Specification</a>:</p>\n<blockquote>\n<pre><code>section:           *header +newline\nnonempty-section:  +header +newline\nnewline:           CR LF | LF | CR (not followed by LF)\nheader:            name : value\n</code></pre>\n</blockquote>\n<p>Since the manifest file contains <code>Main-Class: src.Main</code> but it is not being recognized (&quot;no main manifest attribute...&quot;), the newline is probably missing after that line - the last line.<br />\nSome editors do not add a newline at the end of the file.</p>\n<p>To avoid that problem always include an empty line at the very end of the Manifest file.</p>\n<p><sub> very old <em>problem</em>, I would expect the <code>jar</code> tool to correct that, or at least warns about it</sub></p>\n"}],"owner":{"account_id":13429807,"reputation":1816,"user_id":9689945,"display_name":"hhrzc"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":358,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74906756,"answer_count":3,"score":0,"last_activity_date":1671874724,"creation_date":1671804126,"question_id":74900496,"body_markdown":"I need to create a jar file and not use maven or gradle packages.\r\n\r\nFirst of all - I used all options that I saw in StackOverflow, so please, do not mark this question as `duplicated` if you are not sure about the solution that you will find - more of them I have tried.\r\n\r\n**Project structure:**\r\n```\r\n\\src\r\n  ---\\Main.java\r\n  ---\\A.java\r\n  ---\\B.java\r\n```\r\n\r\n**Steps**:\r\n\r\n*1. Compiling:*\r\n\r\n`javac \\src\\*.java`\r\n\r\n- result:\r\n\r\n```\r\n\\src\r\n  ---\\Main.class\r\n  ---\\A.class\r\n  ---\\B.class\r\n```\r\n\r\n*2. MANIFEST file created:*\r\n\r\n```\r\nManifest-Version: 1.0\r\nMain-Class: src.Main\r\n```\r\n\r\n*3. Compiling to the jar:*\r\n\r\n`jar cfm test.jar MANIFEST.MF src/`\r\n\r\n\r\n*4. Launching:*\r\n\r\n`java -jar test.jar`\r\n\r\nresult:\r\n\r\n&gt; no main manifest attribute, in test.jar\r\n\r\n\r\n**Also I was trying following:**\r\n\r\n`jar cvfe myjar.jar src.Main src\\*.class`\r\n\r\nand many other options - the same result\r\n\r\n\r\n---\r\n\r\nHow to correctly create a jar file natively?","title":"jar from Main.class creation: no main manifest attribute, in jar","body":"<p>I need to create a jar file and not use maven or gradle packages.</p>\n<p>First of all - I used all options that I saw in StackOverflow, so please, do not mark this question as <code>duplicated</code> if you are not sure about the solution that you will find - more of them I have tried.</p>\n<p><strong>Project structure:</strong></p>\n<pre><code>\\src\n  ---\\Main.java\n  ---\\A.java\n  ---\\B.java\n</code></pre>\n<p><strong>Steps</strong>:</p>\n<p><em>1. Compiling:</em></p>\n<p><code>javac \\src\\*.java</code></p>\n<ul>\n<li>result:</li>\n</ul>\n<pre><code>\\src\n  ---\\Main.class\n  ---\\A.class\n  ---\\B.class\n</code></pre>\n<p><em>2. MANIFEST file created:</em></p>\n<pre><code>Manifest-Version: 1.0\nMain-Class: src.Main\n</code></pre>\n<p><em>3. Compiling to the jar:</em></p>\n<p><code>jar cfm test.jar MANIFEST.MF src/</code></p>\n<p><em>4. Launching:</em></p>\n<p><code>java -jar test.jar</code></p>\n<p>result:</p>\n<blockquote>\n<p>no main manifest attribute, in test.jar</p>\n</blockquote>\n<p><strong>Also I was trying following:</strong></p>\n<p><code>jar cvfe myjar.jar src.Main src\\*.class</code></p>\n<p>and many other options - the same result</p>\n<hr />\n<p>How to correctly create a jar file natively?</p>\n"},{"tags":["java","java-stream","percentage"],"comments":[{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1671874184,"post_id":74906647,"comment_id":132190808,"body_markdown":"For me I would want to avoid fiddling with constants 0.0 and 1.0. Start by `Map&lt;Boolean, Long&gt; partitioned = connections .flatMap(co -&gt; co.stops().stream()) .collect(Collectors.partitioningBy(ts -&gt; ts.kind() == kind, Collectors.counting()));`. Then calculate the percentage from the two obtained counts.","body":"For me I would want to avoid fiddling with constants 0.0 and 1.0. Start by <code>Map&lt;Boolean, Long&gt; partitioned = connections .flatMap(co -&gt; co.stops().stream()) .collect(Collectors.partitioningBy(ts -&gt; ts.kind() == kind, Collectors.counting()));</code>. Then calculate the percentage from the two obtained counts."}],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1671873578,"creation_date":1671873578,"answer_id":74906668,"question_id":74906647,"body_markdown":"Rather than `map`, use [`mapToInt`][1] to get an `IntStream`, and then [`average()`][2] will get you the percentage you want:\r\n\r\n    .mapToInt(ts -&gt; ts.kind() == kind ? 1 : 0).average()\r\n\r\nThis gives you an `OptionalDouble`, which will be empty if the stream is empty.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#mapToInt-java.util.function.ToIntFunction-\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#average--","title":"How to get percentage of object in Java Streams","body":"<p>Rather than <code>map</code>, use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#mapToInt-java.util.function.ToIntFunction-\" rel=\"nofollow noreferrer\"><code>mapToInt</code></a> to get an <code>IntStream</code>, and then <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#average--\" rel=\"nofollow noreferrer\"><code>average()</code></a> will get you the percentage you want:</p>\n<pre><code>.mapToInt(ts -&gt; ts.kind() == kind ? 1 : 0).average()\n</code></pre>\n<p>This gives you an <code>OptionalDouble</code>, which will be empty if the stream is empty.</p>\n"},{"tags":[],"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671873612,"creation_date":1671873612,"answer_id":74906671,"question_id":74906647,"body_markdown":"You could use the summary statistics of a `DoubleStream`:\r\n\r\n```\r\nDoubleSummaryStatistics stats = connections.flatMap(co -&gt; co.stops().stream())\r\n        .mapToDouble(ts -&gt; ts.kind() == kind ? 1.0 : 0.0)\r\n        .summaryStatistics();\r\ndouble percentage = 100 * stats.getSum() / stats.getCount();\r\n// or\r\ndouble percentage2 = 100 * stats.getAverage()\r\n```","title":"How to get percentage of object in Java Streams","body":"<p>You could use the summary statistics of a <code>DoubleStream</code>:</p>\n<pre><code>DoubleSummaryStatistics stats = connections.flatMap(co -&gt; co.stops().stream())\n        .mapToDouble(ts -&gt; ts.kind() == kind ? 1.0 : 0.0)\n        .summaryStatistics();\ndouble percentage = 100 * stats.getSum() / stats.getCount();\n// or\ndouble percentage2 = 100 * stats.getAverage()\n</code></pre>\n"}],"owner":{"account_id":16760288,"reputation":41,"user_id":12115215,"display_name":"Bedirhan G&#246;kce"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":214,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":74906668,"answer_count":2,"score":-2,"last_activity_date":1671873702,"creation_date":1671873196,"question_id":74906647,"body_markdown":"I have stream of integers and I try to find percentage of 1&#39;s over all. I cannot find the solution.\r\n\r\n```\r\nconnections\r\n        .flatMap(co -&gt; co.stops().stream())\r\n        .map(ts -&gt; ts.kind() == kind ? 1.0 : 0.0)\r\n```\r\n\r\nI don&#39;t want to share class types and make things complicated. I just want to calculate percentage.","title":"How to get percentage of object in Java Streams","body":"<p>I have stream of integers and I try to find percentage of 1's over all. I cannot find the solution.</p>\n<pre><code>connections\n        .flatMap(co -&gt; co.stops().stream())\n        .map(ts -&gt; ts.kind() == kind ? 1.0 : 0.0)\n</code></pre>\n<p>I don't want to share class types and make things complicated. I just want to calculate percentage.</p>\n"},{"tags":["java","intellij-idea","netbeans"],"comments":[{"owner":{"account_id":36734,"reputation":392117,"user_id":104891,"display_name":"CrazyCoder"},"score":0,"creation_date":1671481691,"post_id":74855641,"comment_id":132104615,"body_markdown":"What does the error message text say when you hover on the underlined code?","body":"What does the error message text say when you hover on the underlined code?"},{"owner":{"display_name":"user8483315"},"score":0,"creation_date":1671492129,"post_id":74855641,"comment_id":132107170,"body_markdown":"IntelliJ tells me that an incompatible type is returned for a return in the call chain:","body":"IntelliJ tells me that an incompatible type is returned for a return in the call chain:"},{"owner":{"account_id":24517308,"reputation":401,"user_id":18430882,"display_name":"quickfix"},"score":0,"creation_date":1671542838,"post_id":74855641,"comment_id":132117970,"body_markdown":"Check which language level you have in both: &#39;Project Settings | Project&#39;, &#39;Project Settings | Modules | Sources&quot;. Module language level can be differ from JDK version and trigger some inspection. Does it compile with both javac and eclipse in IDEA?","body":"Check which language level you have in both: &#39;Project Settings | Project&#39;, &#39;Project Settings | Modules | Sources&quot;. Module language level can be differ from JDK version and trigger some inspection. Does it compile with both javac and eclipse in IDEA?"},{"owner":{"display_name":"user8483315"},"score":0,"creation_date":1671631939,"post_id":74855641,"comment_id":132140414,"body_markdown":"I didn&#39;t know how to navigate with the directions you gave me, but here&#39;s the output of the dialogue box one gets when one starts at the menu bar and does Window | Help:\n\nIntelliJ IDEA 2022.3 (Community Edition)\nBuild #IC-223.7571.182, built on November 30, 2022\nRuntime version: 17.0.5+1-b653.14 amd64\nVM: OpenJDK 64-Bit Server VM by JetBrains s.r.o.\nLinux 5.15.0-56-generic\nGC: G1 Young Generation, G1 Old Generation\nMemory: 750M\nCores: 16\n\nKotlin: 223-1.7.20-release-201-IJ7571.182\nCurrent Desktop: ubuntu:GNOME\n\nPerhaps that gives you an idea of where I need to start my navigation.","body":"I didn&#39;t know how to navigate with the directions you gave me, but here&#39;s the output of the dialogue box one gets when one starts at the menu bar and does Window | Help:  IntelliJ IDEA 2022.3 (Community Edition) Build #IC-223.7571.182, built on November 30, 2022 Runtime version: 17.0.5+1-b653.14 amd64 VM: OpenJDK 64-Bit Server VM by JetBrains s.r.o. Linux 5.15.0-56-generic GC: G1 Young Generation, G1 Old Generation Memory: 750M Cores: 16  Kotlin: 223-1.7.20-release-201-IJ7571.182 Current Desktop: ubuntu:GNOME  Perhaps that gives you an idea of where I need to start my navigation."}],"owner":{"display_name":"user8483315"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671872790,"creation_date":1671481425,"question_id":74855641,"body_markdown":"In Netbeans, my code looks like this:\r\n\r\n[![Lines from Netbeans][1]][1]\r\n\r\nWhereas, in IntelliJ, my code looks like this:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nBoth IDE&#39;s run a gradle build of the project that builds without incident.\r\n\r\nSo, therefore, why should there be a wavy red line under the second line of code in the IntelliJ IDE?\r\n\r\nI suspect this is a JDK version problem, and that perhaps my IntelliJ JDK version is wrong. Being that I am new to IntelliJ, how would I check this?\r\n\r\nWhen my code looks like this, the IntelliJ IDE does not complain:\r\n\r\n    ContextResonance&lt;?,S&gt;rCtx=subscriber.getContainer().getContainer().contextResonance();\r\n    ContextReferent&lt;?,S&gt;ref=rCtx.getReferent();\r\n\r\nBut when I replace either explicit declaration with a var type (in this particular case, the first declaration), the same IDE gives me the following:\r\n\r\n[![enter image description here][3]][3]\r\n\r\nAs I observe Netbeans issues no complaints whether I used the var keyword or an explicit type declaration, I think there is a problem with IntelliJ.\r\n\r\nAre there any work-arounds for this?\r\n\r\nIn further work, I have discovered this false negative: one file is error free in IntelliJ, yet Netbeans reports an error, and the project doesn&#39;t build.\r\n\r\nThe IntelliJ code is:\r\n\r\n[![enter image description here][4]][4]\r\n\r\nThe same code in Netbeans is:\r\n\r\n[![enter image description here][5]][5]\r\n\r\nWhy would I want to be arsed with IntelliJ when it doesn&#39;t seem to reliably report problems with my code?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8UjbO.png\r\n  [2]: https://i.stack.imgur.com/o7Mch.png\r\n  [3]: https://i.stack.imgur.com/dRWSR.png\r\n  [4]: https://i.stack.imgur.com/tK2G2.png\r\n  [5]: https://i.stack.imgur.com/BjVtF.png","title":"Red line for code in IntelliJ not appearing in Netbeans - gradle project builds fine","body":"<p>In Netbeans, my code looks like this:</p>\n<p><a href=\"https://i.stack.imgur.com/8UjbO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8UjbO.png\" alt=\"Lines from Netbeans\" /></a></p>\n<p>Whereas, in IntelliJ, my code looks like this:</p>\n<p><a href=\"https://i.stack.imgur.com/o7Mch.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/o7Mch.png\" alt=\"enter image description here\" /></a></p>\n<p>Both IDE's run a gradle build of the project that builds without incident.</p>\n<p>So, therefore, why should there be a wavy red line under the second line of code in the IntelliJ IDE?</p>\n<p>I suspect this is a JDK version problem, and that perhaps my IntelliJ JDK version is wrong. Being that I am new to IntelliJ, how would I check this?</p>\n<p>When my code looks like this, the IntelliJ IDE does not complain:</p>\n<pre><code>ContextResonance&lt;?,S&gt;rCtx=subscriber.getContainer().getContainer().contextResonance();\nContextReferent&lt;?,S&gt;ref=rCtx.getReferent();\n</code></pre>\n<p>But when I replace either explicit declaration with a var type (in this particular case, the first declaration), the same IDE gives me the following:</p>\n<p><a href=\"https://i.stack.imgur.com/dRWSR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dRWSR.png\" alt=\"enter image description here\" /></a></p>\n<p>As I observe Netbeans issues no complaints whether I used the var keyword or an explicit type declaration, I think there is a problem with IntelliJ.</p>\n<p>Are there any work-arounds for this?</p>\n<p>In further work, I have discovered this false negative: one file is error free in IntelliJ, yet Netbeans reports an error, and the project doesn't build.</p>\n<p>The IntelliJ code is:</p>\n<p><a href=\"https://i.stack.imgur.com/tK2G2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tK2G2.png\" alt=\"enter image description here\" /></a></p>\n<p>The same code in Netbeans is:</p>\n<p><a href=\"https://i.stack.imgur.com/BjVtF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BjVtF.png\" alt=\"enter image description here\" /></a></p>\n<p>Why would I want to be arsed with IntelliJ when it doesn't seem to reliably report problems with my code?</p>\n"},{"tags":["java","date"],"comments":[{"owner":{"account_id":97652,"reputation":11676,"user_id":264775,"accept_rate":86,"display_name":"thegrinner"},"score":4,"creation_date":1354737115,"post_id":13731218,"comment_id":18864977,"body_markdown":"[What have you tried?](http://whathaveyoutried.com)","body":"<a href=\"http://whathaveyoutried.com\" rel=\"nofollow noreferrer\">What have you tried?</a>"},{"owner":{"account_id":1944253,"reputation":37590,"user_id":1749753,"display_name":"jlordo"},"score":2,"creation_date":1354737127,"post_id":13731218,"comment_id":18864985,"body_markdown":"it does not show any research effort.","body":"it does not show any research effort."},{"owner":{"account_id":115344,"reputation":76329,"user_id":302916,"display_name":"Brian Roach"},"score":1,"creation_date":1354737141,"post_id":13731218,"comment_id":18864998,"body_markdown":"@PaulG - Number one reason for downvote is *research effort*. The question is solved by a simple google.","body":"@PaulG - Number one reason for downvote is <i>research effort</i>. The question is solved by a simple google."},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":3,"creation_date":1354738800,"post_id":13731218,"comment_id":18865765,"body_markdown":"This [link may be of help](http://bit.ly/TImRxd).","body":"This <a href=\"http://bit.ly/TImRxd\" rel=\"nofollow noreferrer\">link may be of help</a>."}],"answers":[{"tags":[],"owner":{"account_id":351195,"reputation":15829,"user_id":687514,"display_name":"Anders R. Bystrup"},"down_vote_count":0,"up_vote_count":205,"is_accepted":true,"score":205,"last_activity_date":1671872689,"creation_date":1354737129,"answer_id":13731260,"question_id":13731218,"body_markdown":"How about [`System.currentTimeMillis()`][1]?\r\n\r\nFrom the JavaDoc:\r\n\r\n**Returns:** *the difference, measured in milliseconds, between the current time and midnight, January 1, 1970 UTC*\r\n\r\n**Java 8** introduces the [`java.time`][2] framework, particularly the [`Instant`][3] class which &quot;*...models a ... point on the time-line...*&quot;:\r\n\r\n    long now = Instant.now().toEpochMilli();\r\n\r\n**Returns:** *the number of milliseconds since the epoch of 1970-01-01T00:00:00Z* -- i.e. pretty much the same as above :-)\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#currentTimeMillis%28%29\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html","title":"How do I get milliseconds from epoch (1970-01-01) in Java?","body":"<p>How about <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#currentTimeMillis%28%29\" rel=\"noreferrer\"><code>System.currentTimeMillis()</code></a>?</p>\n<p>From the JavaDoc:</p>\n<p><strong>Returns:</strong> <em>the difference, measured in milliseconds, between the current time and midnight, January 1, 1970 UTC</em></p>\n<p><strong>Java 8</strong> introduces the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html\" rel=\"noreferrer\"><code>java.time</code></a> framework, particularly the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html\" rel=\"noreferrer\"><code>Instant</code></a> class which &quot;<em>...models a ... point on the time-line...</em>&quot;:</p>\n<pre><code>long now = Instant.now().toEpochMilli();\n</code></pre>\n<p><strong>Returns:</strong> <em>the number of milliseconds since the epoch of 1970-01-01T00:00:00Z</em> -- i.e. pretty much the same as above :-)</p>\n"},{"tags":[],"owner":{"account_id":1029088,"reputation":31784,"user_id":1037767,"display_name":"Alexander Pavlov"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1354737156,"creation_date":1354737156,"answer_id":13731272,"question_id":13731218,"body_markdown":"Also try `System.currentTimeMillis()`","title":"How do I get milliseconds from epoch (1970-01-01) in Java?","body":"<p>Also try <code>System.currentTimeMillis()</code></p>\n"},{"tags":[],"owner":{"account_id":2248845,"reputation":7211,"user_id":1981559,"accept_rate":100,"display_name":"Przemek"},"down_vote_count":0,"up_vote_count":60,"is_accepted":false,"score":60,"last_activity_date":1469373635,"creation_date":1450880091,"answer_id":34437574,"question_id":13731218,"body_markdown":"# java.time\r\n\r\nUsing the [`java.time`][1] framework built into Java 8 and later.\r\n\r\n    import java.time.Instant;\r\n\r\n    Instant.now().toEpochMilli(); //Long = 1450879900184\r\n    Instant.now().getEpochSecond(); //Long = 1450879900\r\n\r\nThis works in UTC because `Instant.now()` is really call to `Clock.systemUTC().instant()`\r\n\r\nhttps://docs.oracle.com/javase/8/docs/api/java/time/Instant.html\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html","title":"How do I get milliseconds from epoch (1970-01-01) in Java?","body":"<h1>java.time</h1>\n\n<p>Using the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html\" rel=\"noreferrer\"><code>java.time</code></a> framework built into Java 8 and later.</p>\n\n<pre><code>import java.time.Instant;\n\nInstant.now().toEpochMilli(); //Long = 1450879900184\nInstant.now().getEpochSecond(); //Long = 1450879900\n</code></pre>\n\n<p>This works in UTC because <code>Instant.now()</code> is really call to <code>Clock.systemUTC().instant()</code></p>\n\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html\" rel=\"noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html</a></p>\n"},{"tags":[],"owner":{"account_id":5068854,"reputation":3050,"user_id":4068218,"accept_rate":7,"display_name":"Hari Rao"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1567439203,"creation_date":1567439203,"answer_id":57759751,"question_id":13731218,"body_markdown":"You can also try \r\n\r\n      Calendar calendar = Calendar.getInstance();\r\n      System.out.println(calendar.getTimeInMillis());\r\n\r\ngetTimeInMillis() - the current time as UTC milliseconds from the epoch","title":"How do I get milliseconds from epoch (1970-01-01) in Java?","body":"<p>You can also try </p>\n\n<pre><code>  Calendar calendar = Calendar.getInstance();\n  System.out.println(calendar.getTimeInMillis());\n</code></pre>\n\n<p>getTimeInMillis() - the current time as UTC milliseconds from the epoch</p>\n"}],"owner":{"account_id":1019364,"reputation":6972,"user_id":1030185,"accept_rate":55,"display_name":"PaulG"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":170100,"favorite_count":0,"down_vote_count":8,"up_vote_count":114,"accepted_answer_id":13731260,"answer_count":4,"score":106,"last_activity_date":1671872689,"creation_date":1354736982,"question_id":13731218,"body_markdown":"I need to get the number of milliseconds from 1970-01-01 UTC until now UTC in Java.\r\n\r\nI would also like to be able to get the number of milliseconds from 1970-01-01 UTC to any other UTC date time.","title":"How do I get milliseconds from epoch (1970-01-01) in Java?","body":"<p>I need to get the number of milliseconds from 1970-01-01 UTC until now UTC in Java.</p>\n\n<p>I would also like to be able to get the number of milliseconds from 1970-01-01 UTC to any other UTC date time.</p>\n"},{"tags":["java","image","jpeg"],"comments":[{"owner":{"account_id":1925356,"reputation":5057,"user_id":1735954,"accept_rate":85,"display_name":"Azad"},"score":1,"creation_date":1365490526,"post_id":15895121,"comment_id":22634259,"body_markdown":"emm, you choose a nice photos I liked your Taste:)\nI don&#39;t know what&#39;s the problem with colors but try this\n\n`BufferedImage img = ImageIO.read(new File(&quot;path/to/image&quot;));`","body":"emm, you choose a nice photos I liked your Taste:) I don&#39;t know what&#39;s the problem with colors but try this  <code>BufferedImage img = ImageIO.read(new File(&quot;path&#47;to&#47;image&quot;));</code>"},{"owner":{"account_id":422762,"reputation":310,"user_id":801727,"accept_rate":40,"display_name":"victorunique"},"score":0,"creation_date":1365491071,"post_id":15895121,"comment_id":22634487,"body_markdown":"actually, I&#39;ve tried, but it failed...","body":"actually, I&#39;ve tried, but it failed..."},{"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"score":0,"creation_date":1463650054,"post_id":15895121,"comment_id":62157893,"body_markdown":"Possible duplicate of [java buffered image created with red mask](http://stackoverflow.com/questions/12963685/java-buffered-image-created-with-red-mask)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/12963685/java-buffered-image-created-with-red-mask\">java buffered image created with red mask</a>"}],"answers":[{"tags":[],"owner":{"account_id":1464403,"reputation":663,"user_id":1377715,"accept_rate":82,"display_name":"Majid Abarghooei"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1365491767,"creation_date":1365491767,"answer_id":15895642,"question_id":15895121,"body_markdown":"I checked your code in netbeans and faced with your problem, then I changed the code as below that has no problem:\r\n\r\n        public class Test {\r\n    \r\n        public static void main(String args[]) throws IOException {\r\n    \r\n    \r\n            byte[] rawData = getRawBytesFromFile(imageFilePath); // some code to read raw bytes from image file\r\n    //        ImageInputStream iis = ImageIO.createImageInputStream(new ByteArrayInputStream(rawData));\r\n    //        BufferedImage img = ImageIO.read(iis);\r\n            FileOutputStream fos = new FileOutputStream(outputImagePath, false);\r\n            fos.write(rawData);\r\n    //        ImageIO.write(img, &quot;JPEG&quot;, fos);\r\n            fos.flush();\r\n            fos.close();\r\n        }\r\n    \r\n        private static byte[] getRawBytesFromFile(String path) throws FileNotFoundException, IOException {\r\n            \r\n            byte[] image;\r\n            File file = new File(path);\r\n            image = new byte[(int)file.length()];\r\n            \r\n            FileInputStream fileInputStream = new FileInputStream(file);\r\n            fileInputStream.read(image);\r\n            \r\n            return image;\r\n        }\r\n    }\r\n\r\nPlease check it and inform me of the result ;)\r\n\r\nGood Luck","title":"How to Read JPEG image into BufferedImage object using Java","body":"<p>I checked your code in netbeans and faced with your problem, then I changed the code as below that has no problem:</p>\n\n<pre><code>    public class Test {\n\n    public static void main(String args[]) throws IOException {\n\n\n        byte[] rawData = getRawBytesFromFile(imageFilePath); // some code to read raw bytes from image file\n//        ImageInputStream iis = ImageIO.createImageInputStream(new ByteArrayInputStream(rawData));\n//        BufferedImage img = ImageIO.read(iis);\n        FileOutputStream fos = new FileOutputStream(outputImagePath, false);\n        fos.write(rawData);\n//        ImageIO.write(img, \"JPEG\", fos);\n        fos.flush();\n        fos.close();\n    }\n\n    private static byte[] getRawBytesFromFile(String path) throws FileNotFoundException, IOException {\n\n        byte[] image;\n        File file = new File(path);\n        image = new byte[(int)file.length()];\n\n        FileInputStream fileInputStream = new FileInputStream(file);\n        fileInputStream.read(image);\n\n        return image;\n    }\n}\n</code></pre>\n\n<p>Please check it and inform me of the result ;)</p>\n\n<p>Good Luck</p>\n"},{"tags":[],"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1365492679,"creation_date":1365492679,"answer_id":15895924,"question_id":15895121,"body_markdown":"This is apparently a know bug, I saw several suggestions ([this](https://stackoverflow.com/questions/12963685/java-buffered-image-created-with-red-mask) is one) that suggest using `Toolkit#createImage` instead, which apparently ignores the color model.\r\n\r\nI tested this and it seems to work fine.\r\n\r\n    public class TestImageIO01 {\r\n\r\n        public static void main(String[] args) {\r\n            try {\r\n                Image in = Toolkit.getDefaultToolkit().createImage(&quot;C:\\\\hold\\\\test\\\\13652375852388.jpg&quot;);\r\n                \r\n                JOptionPane.showMessageDialog(null, new JLabel(new ImageIcon(in)), &quot;Yeah&quot;, JOptionPane.INFORMATION_MESSAGE);\r\n                \r\n                BufferedImage out = new BufferedImage(in.getWidth(null), in.getHeight(null), BufferedImage.TYPE_INT_RGB);\r\n                Graphics2D g2d = out.createGraphics();\r\n                g2d.drawImage(in, 0, 0, null);\r\n                g2d.dispose();\r\n                \r\n                ImageIO.write(out, &quot;jpg&quot;, new File(&quot;C:\\\\hold\\\\test\\\\Test01.jpg&quot;));\r\n            } catch (Exception ex) {\r\n                ex.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\nnb- I used the `JOptionPane` to verify the incoming image.  When using `ImageIO` it comes in with the red tinge, with `Toolkit` it looks fine.\r\n\r\n**Updated**\r\n\r\nAnd an [explantation](http://blog.idrsolutions.com/2009/04/odd-coloured-jpegs-in-java-with-imageio/)","title":"How to Read JPEG image into BufferedImage object using Java","body":"<p>This is apparently a know bug, I saw several suggestions (<a href=\"https://stackoverflow.com/questions/12963685/java-buffered-image-created-with-red-mask\">this</a> is one) that suggest using <code>Toolkit#createImage</code> instead, which apparently ignores the color model.</p>\n\n<p>I tested this and it seems to work fine.</p>\n\n<pre><code>public class TestImageIO01 {\n\n    public static void main(String[] args) {\n        try {\n            Image in = Toolkit.getDefaultToolkit().createImage(\"C:\\\\hold\\\\test\\\\13652375852388.jpg\");\n\n            JOptionPane.showMessageDialog(null, new JLabel(new ImageIcon(in)), \"Yeah\", JOptionPane.INFORMATION_MESSAGE);\n\n            BufferedImage out = new BufferedImage(in.getWidth(null), in.getHeight(null), BufferedImage.TYPE_INT_RGB);\n            Graphics2D g2d = out.createGraphics();\n            g2d.drawImage(in, 0, 0, null);\n            g2d.dispose();\n\n            ImageIO.write(out, \"jpg\", new File(\"C:\\\\hold\\\\test\\\\Test01.jpg\"));\n        } catch (Exception ex) {\n            ex.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p>nb- I used the <code>JOptionPane</code> to verify the incoming image.  When using <code>ImageIO</code> it comes in with the red tinge, with <code>Toolkit</code> it looks fine.</p>\n\n<p><strong>Updated</strong></p>\n\n<p>And an <a href=\"http://blog.idrsolutions.com/2009/04/odd-coloured-jpegs-in-java-with-imageio/\" rel=\"nofollow noreferrer\">explantation</a></p>\n"},{"tags":[],"owner":{"account_id":11679844,"reputation":92,"user_id":8551985,"accept_rate":100,"display_name":"Robert Huber"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671872632,"creation_date":1671872632,"answer_id":74906617,"question_id":15895121,"body_markdown":"I suspect this solution might work just fine in the original poster&#39;s case.\r\n\r\n```\r\nString fileName = imageFilePath;\r\nFile inFile = new File(fileName);\r\nBufferedImage img = ImageIO.read(inFile);\r\n...\r\n```\r\nBest,","title":"How to Read JPEG image into BufferedImage object using Java","body":"<p>I suspect this solution might work just fine in the original poster's case.</p>\n<pre><code>String fileName = imageFilePath;\nFile inFile = new File(fileName);\nBufferedImage img = ImageIO.read(inFile);\n...\n</code></pre>\n<p>Best,</p>\n"}],"owner":{"account_id":422762,"reputation":310,"user_id":801727,"accept_rate":40,"display_name":"victorunique"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40149,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":15895924,"answer_count":3,"score":5,"last_activity_date":1671872632,"creation_date":1365490075,"question_id":15895121,"body_markdown":"This is not a duplicated question here, because I&#39;ve been searching for the solution for a long time in Google and StackOverflow, and still cannot find a solution.\r\n\r\nI have these two images:\r\n\r\n![Larger Image][1]\r\n\r\n![Smaller Image][2]\r\n\r\n\r\nThese are two images from the same website with same prefix and same format. The only difference is the size: the first is larger, while the second is smaller.\r\n\r\nI downloaded both of the images to local folder and used Java to read them into BufferedImage objects. However, when I outputted the BufferedImages to local files, I found that the first image was almost red, while the second was normal(same as original). What&#39;s wrong with my code?\r\n\r\n    byte[] rawData = getRawBytesFromFile(imageFilePath); // some code to read raw bytes from image file\r\n    ImageInputStream iis = ImageIO.createImageInputStream(new ByteArrayInputStream(rawData));\r\n    BufferedImage img = ImageIO.read(iis);\r\n    FileOutputStream fos = new FileOutputStream(outputImagePath, false);\r\n    ImageIO.write(img, &quot;JPEG&quot;, fos);\r\n    fos.flush();\r\n    fos.close();\r\n\r\nPS: I used GIMP to open the first image and detected that the Color Mode is &#39;sRGB&#39;, no alpha or other stuff.\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/6jfMK.jpg\r\n  [2]: http://i.stack.imgur.com/uFjUr.jpg","title":"How to Read JPEG image into BufferedImage object using Java","body":"<p>This is not a duplicated question here, because I've been searching for the solution for a long time in Google and StackOverflow, and still cannot find a solution.</p>\n\n<p>I have these two images:</p>\n\n<p><img src=\"https://i.stack.imgur.com/6jfMK.jpg\" alt=\"Larger Image\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/uFjUr.jpg\" alt=\"Smaller Image\"></p>\n\n<p>These are two images from the same website with same prefix and same format. The only difference is the size: the first is larger, while the second is smaller.</p>\n\n<p>I downloaded both of the images to local folder and used Java to read them into BufferedImage objects. However, when I outputted the BufferedImages to local files, I found that the first image was almost red, while the second was normal(same as original). What's wrong with my code?</p>\n\n<pre><code>byte[] rawData = getRawBytesFromFile(imageFilePath); // some code to read raw bytes from image file\nImageInputStream iis = ImageIO.createImageInputStream(new ByteArrayInputStream(rawData));\nBufferedImage img = ImageIO.read(iis);\nFileOutputStream fos = new FileOutputStream(outputImagePath, false);\nImageIO.write(img, \"JPEG\", fos);\nfos.flush();\nfos.close();\n</code></pre>\n\n<p>PS: I used GIMP to open the first image and detected that the Color Mode is 'sRGB', no alpha or other stuff.</p>\n"},{"tags":["java","spring-boot","hibernate","firebird","jaybird"],"comments":[{"owner":{"account_id":26460747,"reputation":63,"user_id":20114912,"display_name":"Paulo Cesar Pereira da costa"},"score":0,"creation_date":1671475943,"post_id":74854648,"comment_id":132103095,"body_markdown":"this error started right after i implemented the JPQL query using @Query","body":"this error started right after i implemented the JPQL query using @Query"}],"answers":[{"tags":[],"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671872619,"creation_date":1671728371,"answer_id":74891640,"question_id":74854648,"body_markdown":"You need to switch to using [Jaybird 4.0.8][1]. The problem is that Jaybird 4.0.7 and earlier used a grammar generated with ANTLR 4.7.2 (or earlier). Hibernate 6 upgraded to ANTLR 4.10 (or higher), and there was an incompatible change in ANTLR 4.10, which means the grammar of Jaybird cannot be loaded when ANTLR 4.10 or higher is on the classpath, and vice versa, grammars from libraries using ANTLR 4.10 or higher (like Hibernate) cannot be loaded if ANTLR 4.7.x is on the classpath.\r\n\r\nJaybird 4.0.8 fixed that by removing the reliance on ANTLR 4.7.2 by replacing it with a dependency-less parser.\r\n\r\nAs an aside, normally you should let Spring Boot handle the dependency version of Jaybird, but Spring Boot 3.0.0 currently defines version 4.0.7.java11.\r\n\r\nIn any case, remove your current Jaybird dependency (as you&#39;re depending on the deprecated artifactId `jaybird-jdk17`, which is for Java 1.7, not Java 17!) and add:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.firebirdsql.jdbc&lt;/groupId&gt;\r\n  &lt;artifactId&gt;jaybird&lt;/artifactId&gt;\r\n  &lt;version&gt;4.0.8.java11&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nI do recommend you check the [Jaybird 4 release notes][2] if there are any relevant or breaking changes for you.\r\n\r\nIf you upgrade to Spring Boot 3.0.1 or higher, you can use:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.firebirdsql.jdbc&lt;/groupId&gt;\r\n  &lt;artifactId&gt;jaybird&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nand let Spring Boot manage the dependency version.\r\n\r\nAs an aside, I notice that you have a dependency on `net.java.dev.jna:jna` listed. If you added that because of Jaybird, then you should remove it. Jaybird only needs JNA when you use native or embedded connections, but your code uses a pure-java JDBC URL for Firebird, so there is no need to add JNA.\r\n\r\n\r\n  [1]: https://www.firebirdsql.org/file/documentation/drivers_documentation/java/4.0.x/release_notes.html#jaybird-4.0.8\r\n  [2]: https://www.firebirdsql.org/file/documentation/drivers_documentation/java/4.0.x/release_notes.html","title":"ANTLR Tool version 4.10.1 used for code generation does not match the current runtime version 4.7ANTLR Runtime version 4.10.1","body":"<p>You need to switch to using <a href=\"https://www.firebirdsql.org/file/documentation/drivers_documentation/java/4.0.x/release_notes.html#jaybird-4.0.8\" rel=\"nofollow noreferrer\">Jaybird 4.0.8</a>. The problem is that Jaybird 4.0.7 and earlier used a grammar generated with ANTLR 4.7.2 (or earlier). Hibernate 6 upgraded to ANTLR 4.10 (or higher), and there was an incompatible change in ANTLR 4.10, which means the grammar of Jaybird cannot be loaded when ANTLR 4.10 or higher is on the classpath, and vice versa, grammars from libraries using ANTLR 4.10 or higher (like Hibernate) cannot be loaded if ANTLR 4.7.x is on the classpath.</p>\n<p>Jaybird 4.0.8 fixed that by removing the reliance on ANTLR 4.7.2 by replacing it with a dependency-less parser.</p>\n<p>As an aside, normally you should let Spring Boot handle the dependency version of Jaybird, but Spring Boot 3.0.0 currently defines version 4.0.7.java11.</p>\n<p>In any case, remove your current Jaybird dependency (as you're depending on the deprecated artifactId <code>jaybird-jdk17</code>, which is for Java 1.7, not Java 17!) and add:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.firebirdsql.jdbc&lt;/groupId&gt;\n  &lt;artifactId&gt;jaybird&lt;/artifactId&gt;\n  &lt;version&gt;4.0.8.java11&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I do recommend you check the <a href=\"https://www.firebirdsql.org/file/documentation/drivers_documentation/java/4.0.x/release_notes.html\" rel=\"nofollow noreferrer\">Jaybird 4 release notes</a> if there are any relevant or breaking changes for you.</p>\n<p>If you upgrade to Spring Boot 3.0.1 or higher, you can use:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.firebirdsql.jdbc&lt;/groupId&gt;\n  &lt;artifactId&gt;jaybird&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>and let Spring Boot manage the dependency version.</p>\n<p>As an aside, I notice that you have a dependency on <code>net.java.dev.jna:jna</code> listed. If you added that because of Jaybird, then you should remove it. Jaybird only needs JNA when you use native or embedded connections, but your code uses a pure-java JDBC URL for Firebird, so there is no need to add JNA.</p>\n"}],"owner":{"account_id":26460747,"reputation":63,"user_id":20114912,"display_name":"Paulo Cesar Pereira da costa"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2298,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1671872619,"creation_date":1671475071,"question_id":74854648,"body_markdown":"I&#39;m not able to solve the problem with the version of Jaybird&#39;s libs package: jaybird-jdk17:3.0.10 where the antlr4-runtime:4.7 is conflicting with the hibernate-core6.1.5Final lib where there is another antlr4:4.10 .1\r\nhttps://uploaddeimagens.com.br/imagens/vSObP0s\r\n\r\nI&#39;ve tried to change several other Jaybird dependencies but without success, I tried to change the hibernate libs and without success.\r\n\r\n**Entity**\r\n \r\n```java\r\npackage com.aula.restiapi.entidade;\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.Table;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\n\r\n@Entity\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Data\r\n@Table(name = &quot;tb_users&quot;)\r\npublic class Usuario {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Long id;\r\n\tprivate String name;\r\n\tprivate String email;\r\n\tprivate Double salary;\r\n}\r\n```\r\n        \r\n**repository**\r\n```java   \r\npackage com.aula.restiapi.repository;\r\n\r\nimport org.springframework.data.domain.Page;\r\nimport org.springframework.data.domain.Pageable;\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport org.springframework.data.jpa.repository.Query;\r\nimport org.springframework.stereotype.Repository;\r\n\r\nimport com.aula.restiapi.entidade.Usuario;\r\n\r\n@Repository\r\npublic interface UsuarioRepository extends JpaRepository&lt;Usuario, Long&gt;{\r\n\r\n\t@Query(&quot;SELECT obj FROM User obj WHERE obj.salary &gt;= :minSalary AND \r\n    obj.salary &lt;= :maxSalary&quot;)\r\n\tPage&lt;Usuario&gt; searchBySalary(Double minSalary, Double maxSalary, Pageable pageable);\r\n}\r\n```\r\n**controller**\r\n```java\r\npackage com.aula.restiapi.controller;\r\nimport java.util.List;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.data.domain.Page;\r\nimport org.springframework.data.domain.Pageable;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RequestParam;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport com.aula.restiapi.entidade.Usuario;\r\nimport com.aula.restiapi.repository.UsuarioRepository;\r\n\r\n@RestController\r\n@RequestMapping(value = &quot;/users&quot;)\r\npublic class UserController {\r\n\r\n\t@Autowired\r\n\tprivate UsuarioRepository repository;\r\n\t\r\n\t@GetMapping\r\n\tpublic ResponseEntity&lt;List&lt;Usuario&gt;&gt; findAll() {\r\n\t    List&lt;Usuario&gt; result = repository.findAll();\r\n\t    return ResponseEntity.ok(result);\r\n\t}\r\n\r\n\t@GetMapping(value = &quot;/page&quot;)\r\n\tpublic ResponseEntity&lt;Page&lt;Usuario&gt;&gt; findAll(Pageable pageable) {\r\n\t    Page&lt;Usuario&gt; result = repository.findAll(pageable);\r\n\t    return ResponseEntity.ok(result);\r\n\t\r\n\t}\r\n\t@GetMapping(value = &quot;/search-salary&quot;)\r\n\tpublic ResponseEntity&lt;Page&lt;Usuario&gt;&gt; searchBySalary(@RequestParam(defaultValue = &quot;0&quot;) Double minSalary, @RequestParam(defaultValue = &quot;1000000000000&quot;) Double maxSalary, Pageable pageable) {\r\n\t    Page&lt;Usuario&gt; result = repository.searchBySalary(minSalary, maxSalary, pageable);\r\n\t    return ResponseEntity.ok(result);\r\n\t}\r\n\t\r\n}\r\n```\r\n\r\n**application.properties**\r\n```properties\r\nspring.datasource.url:jdbc:firebirdsql:localhost/3050:C:/DB/BD_ARTISTS.FDB? \r\n        sql_dialect=3&amp;charSet=utf-8\r\nspring.datasource.username:SYSDBA\r\nspring.datasource.password:masterkey\r\nspring.datasource.driver-class-name=org.firebirdsql.jdbc.FBDriver\r\nspring.jpa.database-platform=org.hibernate.community.dialect.FirebirdDialect\r\nspring.jpa.show-sql: true\r\nspring.jpa.properties.hibernate.format_sql=true\r\n#logging.level.org.springframework=DEBUG\r\napp.path.arquivos=/Users/Paulo/Pictures/SavedPictures\r\nspring.servlet.multipart.max-file-size=30MB\r\nspring.servlet.multipart.max-request-size=30MB\r\n```\r\n**pom.xml**\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\r\n\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t\t&lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.aula&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;restiapi&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;restiapi&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.firebirdsql.jdbc&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaybird-jdk17&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.10&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate.orm&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-community-dialects&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;net.java.dev.jna&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jna&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.5.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n&lt;/project&gt;\r\n```","title":"ANTLR Tool version 4.10.1 used for code generation does not match the current runtime version 4.7ANTLR Runtime version 4.10.1","body":"<p>I'm not able to solve the problem with the version of Jaybird's libs package: jaybird-jdk17:3.0.10 where the antlr4-runtime:4.7 is conflicting with the hibernate-core6.1.5Final lib where there is another antlr4:4.10 .1\n<a href=\"https://uploaddeimagens.com.br/imagens/vSObP0s\" rel=\"nofollow noreferrer\">https://uploaddeimagens.com.br/imagens/vSObP0s</a></p>\n<p>I've tried to change several other Jaybird dependencies but without success, I tried to change the hibernate libs and without success.</p>\n<p><strong>Entity</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.aula.restiapi.entidade;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.Table;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\n@Entity\n@NoArgsConstructor\n@AllArgsConstructor\n@Data\n@Table(name = &quot;tb_users&quot;)\npublic class Usuario {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    private String name;\n    private String email;\n    private Double salary;\n}\n</code></pre>\n<p><strong>repository</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.aula.restiapi.repository;\n\nimport org.springframework.data.domain.Page;\nimport org.springframework.data.domain.Pageable;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.jpa.repository.Query;\nimport org.springframework.stereotype.Repository;\n\nimport com.aula.restiapi.entidade.Usuario;\n\n@Repository\npublic interface UsuarioRepository extends JpaRepository&lt;Usuario, Long&gt;{\n\n    @Query(&quot;SELECT obj FROM User obj WHERE obj.salary &gt;= :minSalary AND \n    obj.salary &lt;= :maxSalary&quot;)\n    Page&lt;Usuario&gt; searchBySalary(Double minSalary, Double maxSalary, Pageable pageable);\n}\n</code></pre>\n<p><strong>controller</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.aula.restiapi.controller;\nimport java.util.List;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.data.domain.Page;\nimport org.springframework.data.domain.Pageable;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport com.aula.restiapi.entidade.Usuario;\nimport com.aula.restiapi.repository.UsuarioRepository;\n\n@RestController\n@RequestMapping(value = &quot;/users&quot;)\npublic class UserController {\n\n    @Autowired\n    private UsuarioRepository repository;\n    \n    @GetMapping\n    public ResponseEntity&lt;List&lt;Usuario&gt;&gt; findAll() {\n        List&lt;Usuario&gt; result = repository.findAll();\n        return ResponseEntity.ok(result);\n    }\n\n    @GetMapping(value = &quot;/page&quot;)\n    public ResponseEntity&lt;Page&lt;Usuario&gt;&gt; findAll(Pageable pageable) {\n        Page&lt;Usuario&gt; result = repository.findAll(pageable);\n        return ResponseEntity.ok(result);\n    \n    }\n    @GetMapping(value = &quot;/search-salary&quot;)\n    public ResponseEntity&lt;Page&lt;Usuario&gt;&gt; searchBySalary(@RequestParam(defaultValue = &quot;0&quot;) Double minSalary, @RequestParam(defaultValue = &quot;1000000000000&quot;) Double maxSalary, Pageable pageable) {\n        Page&lt;Usuario&gt; result = repository.searchBySalary(minSalary, maxSalary, pageable);\n        return ResponseEntity.ok(result);\n    }\n    \n}\n</code></pre>\n<p><strong>application.properties</strong></p>\n<pre><code>spring.datasource.url:jdbc:firebirdsql:localhost/3050:C:/DB/BD_ARTISTS.FDB? \n        sql_dialect=3&amp;charSet=utf-8\nspring.datasource.username:SYSDBA\nspring.datasource.password:masterkey\nspring.datasource.driver-class-name=org.firebirdsql.jdbc.FBDriver\nspring.jpa.database-platform=org.hibernate.community.dialect.FirebirdDialect\nspring.jpa.show-sql: true\nspring.jpa.properties.hibernate.format_sql=true\n#logging.level.org.springframework=DEBUG\napp.path.arquivos=/Users/Paulo/Pictures/SavedPictures\nspring.servlet.multipart.max-file-size=30MB\nspring.servlet.multipart.max-request-size=30MB\n</code></pre>\n<p><strong>pom.xml</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n\n        &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.aula&lt;/groupId&gt;\n    &lt;artifactId&gt;restiapi&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;restiapi&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.firebirdsql.jdbc&lt;/groupId&gt;\n            &lt;artifactId&gt;jaybird-jdk17&lt;/artifactId&gt;\n            &lt;version&gt;3.0.10&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate.orm&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-community-dialects&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;net.java.dev.jna&lt;/groupId&gt;\n            &lt;artifactId&gt;jna&lt;/artifactId&gt;\n            &lt;version&gt;5.5.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","command-line","command-line-interface"],"comments":[{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1671872821,"post_id":74906558,"comment_id":132190627,"body_markdown":"The classpath separator on Linux is `:`, not `;`. (or, more correctly, Windows uses `;`, because `:` is already used in drive-letters).","body":"The classpath separator on Linux is <code>:</code>, not <code>;</code>. (or, more correctly, Windows uses <code>;</code>, because <code>:</code> is already used in drive-letters)."}],"owner":{"account_id":11915859,"reputation":3,"user_id":8719790,"display_name":"jmnote"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1671872850,"answer_count":0,"score":0,"last_activity_date":1671872285,"creation_date":1671871885,"question_id":74906558,"body_markdown":"Java CLI binaries seem to behave differently on Linux and Windows.\r\nIt runs fine on Windows, but gives an error on Linux.\r\n\r\n```\r\n# reproduce on linux or windows\r\ngit clone https://github.com/jmnote/demo.git\r\ncd demo\r\njavac -d bin -cp &quot;lib/*&quot; src/*\r\njava -cp &quot;bin;lib/*&quot; App\r\n```\r\n\r\n```\r\nroot@linux01:~:/demo# find | grep &#39;.ja&#39;\r\n./src/App.java\r\n./lib/gson-2.10.jar\r\n\r\nroot@linux01:~:/demo# cat src/App.java\r\nimport com.google.gson.Gson;\r\n\r\npublic class App {\r\n    public static void main(String[] args) {\r\n        Gson gson = new Gson();\r\n        System.out.println(&quot;hello&quot;);\r\n        System.out.println(gson);\r\n    }\r\n}\r\n```\r\n\r\n```\r\nPS C:\\Users\\user01&gt; git clone https://github.com/jmnote/demo.git\r\nCloning into &#39;demo&#39;...\r\nremote: Enumerating objects: 10, done.\r\nremote: Counting objects: 100% (10/10), done.\r\nremote: Compressing objects: 100% (7/7), done.\r\nremote: Total 10 (delta 1), reused 6 (delta 0), pack-reused 0\r\nReceiving objects: 100% (10/10), 249.38 KiB | 22.67 MiB/s, done.\r\nResolving deltas: 100% (1/1), done.\r\n\r\nPS C:\\Users\\user01&gt; cd demo\r\nPS C:\\Users\\user01\\demo&gt; javac -d bin -cp &quot;lib/*&quot; src/*\r\nPS C:\\Users\\user01\\demo&gt; java -cp &quot;bin;lib/*&quot; App\r\nhello\r\n{serializeNulls:false,factories:[Factory...\r\n```\r\n\r\n```\r\nroot@linux01:~# git clone https://github.com/jmnote/demo.git\r\nCloning into &#39;demo&#39;...\r\nremote: Enumerating objects: 10, done.\r\nremote: Counting objects: 100% (10/10), done.\r\nremote: Compressing objects: 100% (7/7), done.\r\nremote: Total 10 (delta 1), reused 6 (delta 0), pack-reused 0\r\nUnpacking objects: 100% (10/10), done.\r\n\r\nroot@linux01:~# cd demo\r\nroot@linux01:~/demo# javac -d bin -cp &quot;lib/*&quot; src/*\r\nroot@linux01:~/demo# java -cp &quot;bin;lib/*&quot; App\r\nError: Could not find or load main class App\r\nCaused by: java.lang.ClassNotFoundException: App\r\n```\r\n\r\nWhy are the results different?\r\nIs there any way to run it without errors on Linux?","title":"Java CLI binaries seem to behave differently on Linux and Windows","body":"<p>Java CLI binaries seem to behave differently on Linux and Windows.\nIt runs fine on Windows, but gives an error on Linux.</p>\n<pre><code># reproduce on linux or windows\ngit clone https://github.com/jmnote/demo.git\ncd demo\njavac -d bin -cp &quot;lib/*&quot; src/*\njava -cp &quot;bin;lib/*&quot; App\n</code></pre>\n<pre><code>root@linux01:~:/demo# find | grep '.ja'\n./src/App.java\n./lib/gson-2.10.jar\n\nroot@linux01:~:/demo# cat src/App.java\nimport com.google.gson.Gson;\n\npublic class App {\n    public static void main(String[] args) {\n        Gson gson = new Gson();\n        System.out.println(&quot;hello&quot;);\n        System.out.println(gson);\n    }\n}\n</code></pre>\n<pre><code>PS C:\\Users\\user01&gt; git clone https://github.com/jmnote/demo.git\nCloning into 'demo'...\nremote: Enumerating objects: 10, done.\nremote: Counting objects: 100% (10/10), done.\nremote: Compressing objects: 100% (7/7), done.\nremote: Total 10 (delta 1), reused 6 (delta 0), pack-reused 0\nReceiving objects: 100% (10/10), 249.38 KiB | 22.67 MiB/s, done.\nResolving deltas: 100% (1/1), done.\n\nPS C:\\Users\\user01&gt; cd demo\nPS C:\\Users\\user01\\demo&gt; javac -d bin -cp &quot;lib/*&quot; src/*\nPS C:\\Users\\user01\\demo&gt; java -cp &quot;bin;lib/*&quot; App\nhello\n{serializeNulls:false,factories:[Factory...\n</code></pre>\n<pre><code>root@linux01:~# git clone https://github.com/jmnote/demo.git\nCloning into 'demo'...\nremote: Enumerating objects: 10, done.\nremote: Counting objects: 100% (10/10), done.\nremote: Compressing objects: 100% (7/7), done.\nremote: Total 10 (delta 1), reused 6 (delta 0), pack-reused 0\nUnpacking objects: 100% (10/10), done.\n\nroot@linux01:~# cd demo\nroot@linux01:~/demo# javac -d bin -cp &quot;lib/*&quot; src/*\nroot@linux01:~/demo# java -cp &quot;bin;lib/*&quot; App\nError: Could not find or load main class App\nCaused by: java.lang.ClassNotFoundException: App\n</code></pre>\n<p>Why are the results different?\nIs there any way to run it without errors on Linux?</p>\n"},{"tags":["java","android","macos","android-studio","ide"],"answers":[{"tags":[],"owner":{"account_id":5456065,"reputation":1757,"user_id":4339460,"display_name":"Alonso C. Licks"},"down_vote_count":2,"up_vote_count":176,"is_accepted":false,"score":174,"last_activity_date":1418327857,"creation_date":1418084796,"answer_id":27369494,"question_id":27369269,"body_markdown":"Just install this guy here\r\n\r\nhttp://support.apple.com/kb/DL1572?viewlocale=en_US&amp;locale=en_US\r\n\r\nand you should be good. ","title":"Android Studio was unable to find a valid Jvm (Related to MAC OS)","body":"<p>Just install this guy here</p>\n\n<p><a href=\"http://support.apple.com/kb/DL1572?viewlocale=en_US&amp;locale=en_US\">http://support.apple.com/kb/DL1572?viewlocale=en_US&amp;locale=en_US</a></p>\n\n<p>and you should be good. </p>\n"},{"tags":[],"owner":{"account_id":5456087,"reputation":3596,"user_id":4339477,"display_name":"hasternet"},"down_vote_count":10,"up_vote_count":364,"is_accepted":true,"score":354,"last_activity_date":1671872163,"creation_date":1418085485,"answer_id":27369596,"question_id":27369269,"body_markdown":"Open the application package for *Android Studio* in finder, and edit the **Info.plist** file. Change the key JVMversion. Put 1.6+ instead of 1.6*. That worked for me!.\r\n\r\nEdited:\r\n\r\nWhile this was necessary in older versions of Android Studio, this is no longer recommended. See the official statement \r\n\r\n**&quot;Please note: Do not edit Info.plist to pick a different version. That will break not only the application signature, but also future patch updates to your installation.&quot;** \r\n\r\nAntonio Jose&#39;s [answer][1] is the correct one.\r\n\r\nThanks aried3r!\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/27370525/906523","title":"Android Studio was unable to find a valid Jvm (Related to MAC OS)","body":"<p>Open the application package for <em>Android Studio</em> in finder, and edit the <strong>Info.plist</strong> file. Change the key JVMversion. Put 1.6+ instead of 1.6*. That worked for me!.</p>\n<p>Edited:</p>\n<p>While this was necessary in older versions of Android Studio, this is no longer recommended. See the official statement</p>\n<p><strong>&quot;Please note: Do not edit Info.plist to pick a different version. That will break not only the application signature, but also future patch updates to your installation.&quot;</strong></p>\n<p>Antonio Jose's <a href=\"https://stackoverflow.com/a/27370525/906523\">answer</a> is the correct one.</p>\n<p>Thanks aried3r!</p>\n"},{"tags":[],"owner":{"account_id":75418,"reputation":8513,"user_id":216354,"accept_rate":33,"display_name":"Iggy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1418114255,"creation_date":1418086692,"answer_id":27369774,"question_id":27369269,"body_markdown":"Edit the android studio&#39;s Info.plist file in the package so that it uses 1.7 or whatever JVMVersion you have installed. Changing the JVMVersion to 1.6+ instead of 1.6* as hasternet answered above should work too.\r\n\r\nThe above works but is not recommended see [RC3 Release Notes][1] \r\n\r\n&gt; As of RC 3, we have a better mechanism for customizing properties for\r\n&gt; the launchers on all three platforms. ***You should not edit any files in\r\n&gt; the IDE installation directory***. Instead, you can customize the\r\n&gt; attributes by creating your own .properties or .vmoptions files in the\r\n&gt; following directories. (This has been possible on some platforms\r\n&gt; before, but it required you to copy and change the entire contents of\r\n&gt; the files. With the latest changes these properties are now additive\r\n&gt; instead such that you can set just the attributes you care about, and\r\n&gt; the rest will use the defaults from the IDE installation).\r\n\r\n\r\n\r\nsee https://stackoverflow.com/questions/20925253/android-studio-failed-to-load-jvm-on-mac-osx-mavericks\r\n\r\n\r\n  [1]: http://tools.android.com/recent/androidstudio1rc3_releasecandidate3released","title":"Android Studio was unable to find a valid Jvm (Related to MAC OS)","body":"<p>Edit the android studio's Info.plist file in the package so that it uses 1.7 or whatever JVMVersion you have installed. Changing the JVMVersion to 1.6+ instead of 1.6* as hasternet answered above should work too.</p>\n\n<p>The above works but is not recommended see <a href=\"http://tools.android.com/recent/androidstudio1rc3_releasecandidate3released\" rel=\"nofollow noreferrer\">RC3 Release Notes</a> </p>\n\n<blockquote>\n  <p>As of RC 3, we have a better mechanism for customizing properties for\n  the launchers on all three platforms. <strong><em>You should not edit any files in\n  the IDE installation directory</em></strong>. Instead, you can customize the\n  attributes by creating your own .properties or .vmoptions files in the\n  following directories. (This has been possible on some platforms\n  before, but it required you to copy and change the entire contents of\n  the files. With the latest changes these properties are now additive\n  instead such that you can set just the attributes you care about, and\n  the rest will use the defaults from the IDE installation).</p>\n</blockquote>\n\n<p>see <a href=\"https://stackoverflow.com/questions/20925253/android-studio-failed-to-load-jvm-on-mac-osx-mavericks\">Android Studio failed to load JVM on Mac OSX (Mavericks)</a></p>\n"},{"tags":[],"owner":{"account_id":2082822,"reputation":165,"user_id":1854451,"display_name":"Magster"},"down_vote_count":3,"up_vote_count":17,"is_accepted":false,"score":14,"last_activity_date":1418278629,"creation_date":1418091152,"answer_id":27370383,"question_id":27369269,"body_markdown":"&lt;!-- language-all: lang-xml --&gt;\r\n\r\nChange this key in the `Info.plist` \r\n\r\nI changed from\r\n\r\n    &lt;key&gt;JVMVersion&lt;/key&gt;\r\n    &lt;string&gt;1.6*&lt;/string&gt;\r\n\r\nto\r\n\r\n    &lt;key&gt;JVMVersion&lt;/key&gt;\r\n    &lt;string&gt;1.8*&lt;/string&gt;\r\n\r\nand it worked fine now..\r\n\r\nEdited:&lt;br&gt;\r\nPer the official statement as mentioned above by hasternet and aried3r, the solution by Antonio Jose is correct.\r\n\r\nThanks!","title":"Android Studio was unable to find a valid Jvm (Related to MAC OS)","body":"\n\n<p>Change this key in the <code>Info.plist</code> </p>\n\n<p>I changed from</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;key&gt;JVMVersion&lt;/key&gt;\n&lt;string&gt;1.6*&lt;/string&gt;\n</code></pre>\n\n<p>to</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;key&gt;JVMVersion&lt;/key&gt;\n&lt;string&gt;1.8*&lt;/string&gt;\n</code></pre>\n\n<p>and it worked fine now..</p>\n\n<p>Edited:<br>\nPer the official statement as mentioned above by hasternet and aried3r, the solution by Antonio Jose is correct.</p>\n\n<p>Thanks!</p>\n"},{"tags":[],"owner":{"account_id":1710207,"reputation":2778,"user_id":1568429,"accept_rate":60,"display_name":"Antonio Jose"},"down_vote_count":3,"up_vote_count":143,"is_accepted":false,"score":140,"last_activity_date":1505061885,"creation_date":1418092043,"answer_id":27370525,"question_id":27369269,"body_markdown":"[Update]  \r\nThis is fixed in Android Studio 1.1\r\nhttps://issuetracker.google.com/issues/37015035\r\n&gt; In the next version of Android Studio, if no java 6 is found but 7 (or greater) is found then it will use that instead. We still recommend running studio with Java 6 due to improved font rendering, but there is no work around needed if, for example, only java 8 is found.  \r\n\r\n[End Update]\r\n\r\nFrom [Android Studio 1.0 RC3 Notes](http://tools.android.com/recent/androidstudio1rc3_releasecandidate3released)\r\n\r\n&gt; As of RC 3, we have a better mechanism for customizing properties for the launchers on all three platforms. You should not edit any files in the IDE installation directory. Instead, you can customize the attributes by creating your own .properties or .vmoptions files in the following directories. (This has been possible on some platforms before, but it required you to copy and change the entire contents of the files. With the latest changes these properties are now additive instead such that you can set just the attributes you care about, and the rest will use the defaults from the IDE installation).\r\n\r\nHowever there is no explanation about what options are.\r\n\r\nAfter searching a little I found this  \r\n[Adjusting VM Options for Android Studio on Mac](http://randomlytyping.com/blog/2013/8/5/vm-options-for-android-studio-on-mac)  \r\n[IntelliJ IDEA 14.0.0 Web Help/File IDEA.Properties](https://www.jetbrains.com/idea/help/file-idea-properties.html)\r\n\r\nHowever no luck with that.\r\n\r\nFortunately I was able to resolve it on Yosemite using environment variables as said in the 1.0 RC3 Release Notes.\r\n&gt; You can also place use environment variables to point to specific override files elsewhere:  \r\n&gt; STUDIO_VM_OPTIONS, which vmoptions file to use  \r\n&gt; STUDIO_PROPERTIES, which property file to use  \r\n&gt; STUDIO_JDK, which JDK to run studio with\r\n\r\nThis was a little tricky because Android Studio is not a command line application so I had to use a AppleScript command to set the environment variable when login. More info [here](https://stackoverflow.com/a/25912736/1568429)\r\n\r\nThis is my launchctl command for the command line.  \r\n\r\n    launchctl setenv STUDIO_JDK /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk\r\n\r\nAnd this my AppleScript (remember to save it as an Application)  \r\n\r\n    do shell script &quot;launchctl setenv STUDIO_JDK /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk&quot;\r\n\r\n\r\nAbout launchctl, see [here](https://stackoverflow.com/a/4567308/1568429)","title":"Android Studio was unable to find a valid Jvm (Related to MAC OS)","body":"<p>[Update]<br>\nThis is fixed in Android Studio 1.1\n<a href=\"https://issuetracker.google.com/issues/37015035\" rel=\"nofollow noreferrer\">https://issuetracker.google.com/issues/37015035</a></p>\n\n<blockquote>\n  <p>In the next version of Android Studio, if no java 6 is found but 7 (or greater) is found then it will use that instead. We still recommend running studio with Java 6 due to improved font rendering, but there is no work around needed if, for example, only java 8 is found.  </p>\n</blockquote>\n\n<p>[End Update]</p>\n\n<p>From <a href=\"http://tools.android.com/recent/androidstudio1rc3_releasecandidate3released\" rel=\"nofollow noreferrer\">Android Studio 1.0 RC3 Notes</a></p>\n\n<blockquote>\n  <p>As of RC 3, we have a better mechanism for customizing properties for the launchers on all three platforms. You should not edit any files in the IDE installation directory. Instead, you can customize the attributes by creating your own .properties or .vmoptions files in the following directories. (This has been possible on some platforms before, but it required you to copy and change the entire contents of the files. With the latest changes these properties are now additive instead such that you can set just the attributes you care about, and the rest will use the defaults from the IDE installation).</p>\n</blockquote>\n\n<p>However there is no explanation about what options are.</p>\n\n<p>After searching a little I found this<br>\n<a href=\"http://randomlytyping.com/blog/2013/8/5/vm-options-for-android-studio-on-mac\" rel=\"nofollow noreferrer\">Adjusting VM Options for Android Studio on Mac</a><br>\n<a href=\"https://www.jetbrains.com/idea/help/file-idea-properties.html\" rel=\"nofollow noreferrer\">IntelliJ IDEA 14.0.0 Web Help/File IDEA.Properties</a></p>\n\n<p>However no luck with that.</p>\n\n<p>Fortunately I was able to resolve it on Yosemite using environment variables as said in the 1.0 RC3 Release Notes.</p>\n\n<blockquote>\n  <p>You can also place use environment variables to point to specific override files elsewhere:<br>\n  STUDIO_VM_OPTIONS, which vmoptions file to use<br>\n  STUDIO_PROPERTIES, which property file to use<br>\n  STUDIO_JDK, which JDK to run studio with</p>\n</blockquote>\n\n<p>This was a little tricky because Android Studio is not a command line application so I had to use a AppleScript command to set the environment variable when login. More info <a href=\"https://stackoverflow.com/a/25912736/1568429\">here</a></p>\n\n<p>This is my launchctl command for the command line.  </p>\n\n<pre><code>launchctl setenv STUDIO_JDK /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk\n</code></pre>\n\n<p>And this my AppleScript (remember to save it as an Application)  </p>\n\n<pre><code>do shell script \"launchctl setenv STUDIO_JDK /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk\"\n</code></pre>\n\n<p>About launchctl, see <a href=\"https://stackoverflow.com/a/4567308/1568429\">here</a></p>\n"},{"tags":[],"owner":{"account_id":435638,"reputation":1099,"user_id":822335,"display_name":"luongnv89"},"down_vote_count":3,"up_vote_count":12,"is_accepted":false,"score":9,"last_activity_date":1418166965,"creation_date":1418166965,"answer_id":27390662,"question_id":27369269,"body_markdown":"I am using Mac OS X 10.10 also. And to fix this problem.\r\n\r\n 1. Open Android Studio application package content (by right click on Android Studio icon in Application folder)\r\n 2. Open file Infor.plist\r\n 3. Search and replace:\r\n\r\n        &lt;key&gt; JVM version&lt;/key&gt;\r\n        &lt;string&gt;1.6*&lt;/string&gt;\r\n\r\n\r\nreplaced by:\r\n\r\n        &lt;key&gt; JVM version&lt;/key&gt;\r\n        &lt;string&gt;1.6+&lt;/string&gt;\r\n\r\nThat&#39;s it!\r\n ","title":"Android Studio was unable to find a valid Jvm (Related to MAC OS)","body":"<p>I am using Mac OS X 10.10 also. And to fix this problem.</p>\n\n<ol>\n<li>Open Android Studio application package content (by right click on Android Studio icon in Application folder)</li>\n<li>Open file Infor.plist</li>\n<li><p>Search and replace:</p>\n\n<pre><code>&lt;key&gt; JVM version&lt;/key&gt;\n&lt;string&gt;1.6*&lt;/string&gt;\n</code></pre></li>\n</ol>\n\n<p>replaced by:</p>\n\n<pre><code>    &lt;key&gt; JVM version&lt;/key&gt;\n    &lt;string&gt;1.6+&lt;/string&gt;\n</code></pre>\n\n<p>That's it!</p>\n"},{"tags":[],"owner":{"account_id":3826419,"reputation":51,"user_id":3173160,"display_name":"Zafua"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1418492960,"creation_date":1418492960,"answer_id":27461835,"question_id":27369269,"body_markdown":"I have same problem and fixed with this way:\r\n\r\nYou should install Java from Official Apple page.\r\n\r\n[http://support.apple.com/kb/DL1572][1]\r\n\r\n\r\n  [1]: http://support.apple.com/kb/DL1572","title":"Android Studio was unable to find a valid Jvm (Related to MAC OS)","body":"<p>I have same problem and fixed with this way:</p>\n\n<p>You should install Java from Official Apple page.</p>\n\n<p><a href=\"http://support.apple.com/kb/DL1572\" rel=\"nofollow\">http://support.apple.com/kb/DL1572</a></p>\n"},{"tags":[],"owner":{"account_id":5482420,"reputation":51,"user_id":4358391,"display_name":"Roger Suen"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1418518459,"creation_date":1418518459,"answer_id":27465247,"question_id":27369269,"body_markdown":"On Android Tools Project Site, there is a great explanation [Mac OSX JDK Selection][1]. It fixed my problem. In summary:\r\n\r\n&gt; Android Studio requires two different JDKs:\r\n&gt; \r\n&gt;  - The version of Java that the IDE itself runs with. \r\n&gt;  - The version of the JDK that it uses to get the Java compiler from\r\n&gt; \r\n&gt; These two can be (and usually are) the same, but you can configure\r\n&gt; them individually. And on OSX in particular, they will often be\r\n&gt; different.\r\n\r\nand for Yosemite (Mac OSX 10.10) Issues:\r\n\r\n&gt; First, please make sure that you have the latest version of Java 6\r\n&gt; installed; in some cases that has fixed the problems:\r\n&gt; http://support.apple.com/kb/DL1572\r\n&gt; \r\n&gt; If not, try running a recent version of Java 7 or Java 8 instead by\r\n&gt; setting STUDIO_JDK as described above. That is reported to have fixed\r\n&gt; the other problems (though you will get the font rendering shown for\r\n&gt; Java 8 above.)\r\n\r\n  [1]: http://tools.android.com/tech-docs/configuration/osx-jdk","title":"Android Studio was unable to find a valid Jvm (Related to MAC OS)","body":"<p>On Android Tools Project Site, there is a great explanation <a href=\"http://tools.android.com/tech-docs/configuration/osx-jdk\" rel=\"nofollow\">Mac OSX JDK Selection</a>. It fixed my problem. In summary:</p>\n\n<blockquote>\n  <p>Android Studio requires two different JDKs:</p>\n  \n  <ul>\n  <li>The version of Java that the IDE itself runs with. </li>\n  <li>The version of the JDK that it uses to get the Java compiler from</li>\n  </ul>\n  \n  <p>These two can be (and usually are) the same, but you can configure\n  them individually. And on OSX in particular, they will often be\n  different.</p>\n</blockquote>\n\n<p>and for Yosemite (Mac OSX 10.10) Issues:</p>\n\n<blockquote>\n  <p>First, please make sure that you have the latest version of Java 6\n  installed; in some cases that has fixed the problems:\n  <a href=\"http://support.apple.com/kb/DL1572\" rel=\"nofollow\">http://support.apple.com/kb/DL1572</a></p>\n  \n  <p>If not, try running a recent version of Java 7 or Java 8 instead by\n  setting STUDIO_JDK as described above. That is reported to have fixed\n  the other problems (though you will get the font rendering shown for\n  Java 8 above.)</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1779116,"reputation":311,"user_id":2915388,"display_name":"Govind"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1418637783,"creation_date":1418637783,"answer_id":27481513,"question_id":27369269,"body_markdown":"Note that this last variable allows you to for example run Android Studio with Java 7 on OSX (which normally picks Java 6 from the version specified in Info.plist):\r\n\r\n\r\n$ export STUDIO_JDK=/Library/Java/JavaVirtualMachines/jdk1.7.0_67.jdk\r\n\r\n$ open /Applications/Android\\ Studio.app\r\n\r\nWorked for me","title":"Android Studio was unable to find a valid Jvm (Related to MAC OS)","body":"<p>Note that this last variable allows you to for example run Android Studio with Java 7 on OSX (which normally picks Java 6 from the version specified in Info.plist):</p>\n\n<p>$ export STUDIO_JDK=/Library/Java/JavaVirtualMachines/jdk1.7.0_67.jdk</p>\n\n<p>$ open /Applications/Android\\ Studio.app</p>\n\n<p>Worked for me</p>\n"},{"tags":[],"owner":{"account_id":2155322,"reputation":139,"user_id":1910711,"accept_rate":100,"display_name":"Rozen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1418945047,"creation_date":1418945047,"answer_id":27557474,"question_id":27369269,"body_markdown":"This one work for me, very simple, just export the environmentable var. but make sure u have the valid JVM first though.\r\n\r\nhttps://code.google.com/p/android/issues/detail?id=82378","title":"Android Studio was unable to find a valid Jvm (Related to MAC OS)","body":"<p>This one work for me, very simple, just export the environmentable var. but make sure u have the valid JVM first though.</p>\n\n<p><a href=\"https://code.google.com/p/android/issues/detail?id=82378\" rel=\"nofollow\">https://code.google.com/p/android/issues/detail?id=82378</a></p>\n"},{"tags":[],"owner":{"account_id":5521212,"reputation":1,"user_id":4384092,"display_name":"John Doe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1419225320,"creation_date":1419225320,"answer_id":27596922,"question_id":27369269,"body_markdown":"&quot;On Mac OS, run Android Studio with Java Runtime Environment (JRE) 6 for optimized font rendering. You can then configure your project to use Java Development Kit (JDK) 6 or JDK 7.&quot;\r\n\r\nThis was listed in &lt;http://developer.android.com/sdk/index.html&gt; under the system requirements for Mac OS X.\r\n\r\nOnce you install Java 6 (not the JDK) from Apple as per Alonso C. Licks, you should be able to open Android Studio and reconfigure as you wish without having to mess around in the terminal, info.plist file, or other libraries.","title":"Android Studio was unable to find a valid Jvm (Related to MAC OS)","body":"<p>\"On Mac OS, run Android Studio with Java Runtime Environment (JRE) 6 for optimized font rendering. You can then configure your project to use Java Development Kit (JDK) 6 or JDK 7.\"</p>\n\n<p>This was listed in <a href=\"http://developer.android.com/sdk/index.html\" rel=\"nofollow\">http://developer.android.com/sdk/index.html</a> under the system requirements for Mac OS X.</p>\n\n<p>Once you install Java 6 (not the JDK) from Apple as per Alonso C. Licks, you should be able to open Android Studio and reconfigure as you wish without having to mess around in the terminal, info.plist file, or other libraries.</p>\n"},{"tags":[],"owner":{"account_id":5533603,"reputation":61,"user_id":4392753,"display_name":"Gehev"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1419465198,"creation_date":1419465198,"answer_id":27643165,"question_id":27369269,"body_markdown":"On Mac OS X Yosemite just install:\r\n\r\nJava SE Development Kit 8\r\n\r\nand \r\n\r\nJava Version 8 Update 25\r\n\r\nIt&#39;s all, work for me!","title":"Android Studio was unable to find a valid Jvm (Related to MAC OS)","body":"<p>On Mac OS X Yosemite just install:</p>\n\n<p>Java SE Development Kit 8</p>\n\n<p>and </p>\n\n<p>Java Version 8 Update 25</p>\n\n<p>It's all, work for me!</p>\n"},{"tags":[],"owner":{"account_id":5558699,"reputation":11,"user_id":4409042,"display_name":"iftach"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1420053219,"creation_date":1420053219,"answer_id":27725404,"question_id":27369269,"body_markdown":"On Mac OS X Yosemite just install:\r\n\r\nJava SE Development Kit 8\r\n\r\nand\r\n\r\nJava Version 8 Update 25\r\n\r\nIt&#39;s all, work for me too! like gehev said , so simple !","title":"Android Studio was unable to find a valid Jvm (Related to MAC OS)","body":"<p>On Mac OS X Yosemite just install:</p>\n\n<p>Java SE Development Kit 8</p>\n\n<p>and</p>\n\n<p>Java Version 8 Update 25</p>\n\n<p>It's all, work for me too! like gehev said , so simple !</p>\n"},{"tags":[],"owner":{"account_id":43780,"reputation":507,"user_id":128144,"accept_rate":88,"display_name":"suphero"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1420330615,"creation_date":1420330615,"answer_id":27761036,"question_id":27369269,"body_markdown":"I have downloaded Intellij Idea. When I try to install Intellij, a pop-up appeared that my Mac is missing with Java RE, do you want to download it? After I downloaded missing package using Intellij, I could open Android Studio. ","title":"Android Studio was unable to find a valid Jvm (Related to MAC OS)","body":"<p>I have downloaded Intellij Idea. When I try to install Intellij, a pop-up appeared that my Mac is missing with Java RE, do you want to download it? After I downloaded missing package using Intellij, I could open Android Studio. </p>\n"},{"tags":[],"owner":{"account_id":3262746,"reputation":1260,"user_id":4046234,"accept_rate":83,"display_name":"Andre Coetzee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1420398225,"creation_date":1420398225,"answer_id":27769239,"question_id":27369269,"body_markdown":"I resolved this issue by changing the JVM version in the Info.plist file to 1.7*","title":"Android Studio was unable to find a valid Jvm (Related to MAC OS)","body":"<p>I resolved this issue by changing the JVM version in the Info.plist file to 1.7*</p>\n"},{"tags":[],"owner":{"account_id":2235441,"reputation":6338,"user_id":1971954,"accept_rate":33,"display_name":"nitesh goel"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1421304854,"creation_date":1420530945,"answer_id":27794338,"question_id":27369269,"body_markdown":"As a novice user it took me a while to understand how to fix this in a correct way. After searching and understating many answers on SO I came out with the Following steps that you need to follow to fix the issue.\r\n\r\n**Please Note:**\r\n\r\nAlthough the simplest solution is to update the **Info.plist** of android studio . But it is not recommended and not the correct way to fix it .\r\n\r\n**Official statement- &quot;Please note: Do not edit Info.plist to pick a different version. That will break not only the application signature, but also future patch updates to your installation.&quot;**\r\n\r\n**First Solution :** If you run your Android Studio from command line, you can add these two lines into your **.bash_profile** \r\n\r\n    $ export STUDIO_JDK=/Library/Java/JavaVirtualMachines/jdk1.7.0_67.jdk\r\n    \r\n    $ open /Applications/Android\\ Studio.app\r\n\r\nFrom next time whenever you open your terminal your studio will start automatically.\r\n\r\n**Second Solution:** If you want to run Android Studio from UI(by click on Icon) follow below steps:\r\n\r\n1. Open **script editor** on mac(one can find it in **spotlight**)\r\n2. Copy past the below line\r\n\r\n    do shell script &quot;launchctl setenv STUDIO_JDK /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk&quot;\r\n\r\n**Note :-** Change the jdk version according to your version. To check which version you are using open terminal and run the following command \r\n\r\n    java -version\r\n\r\n3.Now save (⌘+s) as File format: *Application*. Finally open *System Settings → Users &amp; Groups → Login Items* and add your new application that you have just created.\r\n\r\n4. Log-off and login again or you can run that application manually as well..\r\n\r\nwoolaaaa…Its done.\r\n\r\n\r\nReferences :\r\n\r\n[Antonio Jose&#39;s answer][1]\r\n\r\n\r\n[ruario&#39;s answer][2]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/27369269/android-studio-was-unable-to-find-a-valid-jvm-related-to-mac-os/27370525#27370525\r\n  [2]: https://stackoverflow.com/questions/25385934/setting-environment-variables-via-launchd-conf-no-longer-works-in-os-x-yosemite/25912736#25912736","title":"Android Studio was unable to find a valid Jvm (Related to MAC OS)","body":"<p>As a novice user it took me a while to understand how to fix this in a correct way. After searching and understating many answers on SO I came out with the Following steps that you need to follow to fix the issue.</p>\n\n<p><strong>Please Note:</strong></p>\n\n<p>Although the simplest solution is to update the <strong>Info.plist</strong> of android studio . But it is not recommended and not the correct way to fix it .</p>\n\n<p><strong>Official statement- \"Please note: Do not edit Info.plist to pick a different version. That will break not only the application signature, but also future patch updates to your installation.\"</strong></p>\n\n<p><strong>First Solution :</strong> If you run your Android Studio from command line, you can add these two lines into your <strong>.bash_profile</strong> </p>\n\n<pre><code>$ export STUDIO_JDK=/Library/Java/JavaVirtualMachines/jdk1.7.0_67.jdk\n\n$ open /Applications/Android\\ Studio.app\n</code></pre>\n\n<p>From next time whenever you open your terminal your studio will start automatically.</p>\n\n<p><strong>Second Solution:</strong> If you want to run Android Studio from UI(by click on Icon) follow below steps:</p>\n\n<ol>\n<li>Open <strong>script editor</strong> on mac(one can find it in <strong>spotlight</strong>)</li>\n<li><p>Copy past the below line</p>\n\n<p>do shell script \"launchctl setenv STUDIO_JDK /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk\"</p></li>\n</ol>\n\n<p><strong>Note :-</strong> Change the jdk version according to your version. To check which version you are using open terminal and run the following command </p>\n\n<pre><code>java -version\n</code></pre>\n\n<p>3.Now save (⌘+s) as File format: <em>Application</em>. Finally open <em>System Settings → Users &amp; Groups → Login Items</em> and add your new application that you have just created.</p>\n\n<ol start=\"4\">\n<li>Log-off and login again or you can run that application manually as well..</li>\n</ol>\n\n<p>woolaaaa…Its done.</p>\n\n<p>References :</p>\n\n<p><a href=\"https://stackoverflow.com/questions/27369269/android-studio-was-unable-to-find-a-valid-jvm-related-to-mac-os/27370525#27370525\">Antonio Jose's answer</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/25385934/setting-environment-variables-via-launchd-conf-no-longer-works-in-os-x-yosemite/25912736#25912736\">ruario's answer</a></p>\n"},{"tags":[],"owner":{"account_id":2463079,"reputation":136,"user_id":2146768,"display_name":"B... James B."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1420861128,"creation_date":1420861128,"answer_id":27872641,"question_id":27369269,"body_markdown":"I ran this bad boy:\r\n\r\n    launchctl setenv STUDIO_JDK /Library/Java/JavaVirtualMachines/jdk1.7.0_71.jdk/","title":"Android Studio was unable to find a valid Jvm (Related to MAC OS)","body":"<p>I ran this bad boy:</p>\n\n<pre><code>launchctl setenv STUDIO_JDK /Library/Java/JavaVirtualMachines/jdk1.7.0_71.jdk/\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5614839,"reputation":1,"user_id":4446560,"display_name":"haroldbk"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1421088025,"creation_date":1421088025,"answer_id":27908607,"question_id":27369269,"body_markdown":"I was able to get it to work by editing the info.plist changing 16* to 16+. Tried using the recommended method but that failed.\r\n","title":"Android Studio was unable to find a valid Jvm (Related to MAC OS)","body":"<p>I was able to get it to work by editing the info.plist changing 16* to 16+. Tried using the recommended method but that failed.</p>\n"},{"tags":[],"owner":{"account_id":2063436,"reputation":39,"user_id":1839502,"display_name":"Basil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1421219378,"creation_date":1421219378,"answer_id":27937534,"question_id":27369269,"body_markdown":"i&#39;m dealing with the same problem and i get it worked.\r\n\r\nit is probably that your jdk version is not right.\r\n\r\nnow i installed jdk1.8 and it is ok now.","title":"Android Studio was unable to find a valid Jvm (Related to MAC OS)","body":"<p>i'm dealing with the same problem and i get it worked.</p>\n\n<p>it is probably that your jdk version is not right.</p>\n\n<p>now i installed jdk1.8 and it is ok now.</p>\n"},{"tags":[],"owner":{"account_id":327671,"reputation":11551,"user_id":650176,"accept_rate":76,"display_name":"David V"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1421355984,"creation_date":1421355984,"answer_id":27972977,"question_id":27369269,"body_markdown":"You can implement the `STUDIO_JDK` solution using your user&#39;s launch agents. This involves creating one plist file in your LaunchAgents directory, located at `~/Library/LaunchAgents` \r\n\r\nCreate a new file, `~/Library/LaunchAgents/UNIQUE_KEY.plist`, where UNIQUE_KEY is just an identifier. I use com.*username*.androidstudio.\r\n\r\nCopy the following text into your new plist file and modify it according the instructions below.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;!DOCTYPE plist PUBLIC &quot;-//Apple Computer//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;\r\n    &lt;plist version=&quot;1.0&quot;&gt;\r\n    &lt;dict&gt;\r\n       &lt;key&gt;Label&lt;/key&gt;\r\n       &lt;string&gt;UNIQUE_KEY&lt;/string&gt;\r\n       &lt;key&gt;ProgramArguments&lt;/key&gt;\r\n       &lt;array&gt;\r\n          &lt;string&gt;sh&lt;/string&gt;\r\n          &lt;string&gt;-c&lt;/string&gt;\r\n          &lt;string&gt;launchctl setenv STUDIO_JDK /Library/Java/JavaVirtualMachines/jdk1.7.0_71.jdk&lt;/string&gt;\r\n       &lt;/array&gt;\r\n       &lt;key&gt;RunAtLoad&lt;/key&gt;\r\n       &lt;true/&gt;\r\n    &lt;/dict&gt;\r\n    &lt;/plist&gt;\r\n\r\nYou will need to make two modifications:\r\n\r\n 1. Change UNIQUE_KEY to match your filename (without the .plist extension).\r\n 2. Verify your JDK path is correct and change if necessary. I&#39;m using 7u71 in this example.\r\n\r\nThis is the same underlying solution as [Antonio Jose&#39;s answer][1]. It sets the STUDIO_JDK environment variable based on the Android Studio version [1.0 RC3 release notes][2]. This solution uses the LaunchAgents directory rather than AppleScript to set the environment variable. As such it is mostly a difference in how your order and organize your system and environment variables.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/27370525/650176\r\n  [2]: http://tools.android.com/recent/androidstudio1rc3_releasecandidate3released","title":"Android Studio was unable to find a valid Jvm (Related to MAC OS)","body":"<p>You can implement the <code>STUDIO_JDK</code> solution using your user's launch agents. This involves creating one plist file in your LaunchAgents directory, located at <code>~/Library/LaunchAgents</code> </p>\n\n<p>Create a new file, <code>~/Library/LaunchAgents/UNIQUE_KEY.plist</code>, where UNIQUE_KEY is just an identifier. I use com.<em>username</em>.androidstudio.</p>\n\n<p>Copy the following text into your new plist file and modify it according the instructions below.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!DOCTYPE plist PUBLIC \"-//Apple Computer//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\"&gt;\n&lt;plist version=\"1.0\"&gt;\n&lt;dict&gt;\n   &lt;key&gt;Label&lt;/key&gt;\n   &lt;string&gt;UNIQUE_KEY&lt;/string&gt;\n   &lt;key&gt;ProgramArguments&lt;/key&gt;\n   &lt;array&gt;\n      &lt;string&gt;sh&lt;/string&gt;\n      &lt;string&gt;-c&lt;/string&gt;\n      &lt;string&gt;launchctl setenv STUDIO_JDK /Library/Java/JavaVirtualMachines/jdk1.7.0_71.jdk&lt;/string&gt;\n   &lt;/array&gt;\n   &lt;key&gt;RunAtLoad&lt;/key&gt;\n   &lt;true/&gt;\n&lt;/dict&gt;\n&lt;/plist&gt;\n</code></pre>\n\n<p>You will need to make two modifications:</p>\n\n<ol>\n<li>Change UNIQUE_KEY to match your filename (without the .plist extension).</li>\n<li>Verify your JDK path is correct and change if necessary. I'm using 7u71 in this example.</li>\n</ol>\n\n<p>This is the same underlying solution as <a href=\"https://stackoverflow.com/a/27370525/650176\">Antonio Jose's answer</a>. It sets the STUDIO_JDK environment variable based on the Android Studio version <a href=\"http://tools.android.com/recent/androidstudio1rc3_releasecandidate3released\" rel=\"nofollow noreferrer\">1.0 RC3 release notes</a>. This solution uses the LaunchAgents directory rather than AppleScript to set the environment variable. As such it is mostly a difference in how your order and organize your system and environment variables.</p>\n"},{"tags":[],"owner":{"account_id":5575362,"reputation":1,"user_id":4418922,"display_name":"LithiumI0n"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1421483187,"creation_date":1421483187,"answer_id":27997629,"question_id":27369269,"body_markdown":"For those who were having trouble creating a script that launched on startup, as an alternative you can add this .plist to your LaunchAgents folder. This may be a more appropriate way of adding environment variables to the system since Yosemite decided to do away with launchd.conf. This should also work across user accounts due to the nature of the LaunchAgents folder, but I haven&#39;t tested that.\r\n\r\nTo do this, create a .plist file with the following name and path:\r\n\r\n    /Library/LaunchAgents/setenv.STUDIO_JDK.plist\r\n\r\nand the contents:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;\r\n    &lt;plist version=&quot;1.0&quot;&gt;\r\n        &lt;dict&gt;\r\n            &lt;key&gt;Label&lt;/key&gt;\r\n                &lt;string&gt;setenv.STUDIO_JDK&lt;/string&gt;\r\n            &lt;key&gt;ProgramArguments&lt;/key&gt;\r\n                &lt;array&gt;\r\n                    &lt;string&gt;sh&lt;/string&gt;\r\n                    &lt;string&gt;-c&lt;/string&gt;\r\n                    &lt;string&gt;\r\n                        launchctl setenv STUDIO_JDK /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk\r\n                    &lt;/string&gt;\r\n                &lt;/array&gt;\r\n            &lt;key&gt;RunAtLoad&lt;/key&gt;\r\n                &lt;true/&gt;\r\n            &lt;key&gt;ServiceIPC&lt;/key&gt;\r\n                &lt;false/&gt;\r\n            &lt;key&gt;LaunchOnlyOnce&lt;/key&gt;\r\n                &lt;true/&gt;\r\n            &lt;key&gt;KeepAlive&lt;/key&gt;\r\n                &lt;false/&gt;\r\n        &lt;/dict&gt;\r\n    &lt;/plist&gt;\r\n\r\nThen change file properties by running the following commands in Terminal:\r\n\r\n    sudo chmod 644 /Library/LaunchAgents/setenv.STUDIO_JDK.plist\r\n\r\n    sudo chown root /Library/LaunchAgents/setenv.STUDIO_JDK.plist\r\n\r\n    sudo chgrp wheel /Library/LaunchAgents/setenv.STUDIO_JDK.plist\r\n\r\nNotes:\r\n\r\n1) You may need to change &#39;jdk1.8.0_25.jdk&#39; to match the version that you have on your computer.\r\n\r\n2) I tried to use &quot;jdk1.8.*.jdk&quot; to try and account for varying Java * versions, but when I opened Android Studio I got the no JVM error even though if you run &quot;echo $STUDIO_JDK&quot; it returns the correct path. Perhaps someone has some insight as to how to fix that issue.","title":"Android Studio was unable to find a valid Jvm (Related to MAC OS)","body":"<p>For those who were having trouble creating a script that launched on startup, as an alternative you can add this .plist to your LaunchAgents folder. This may be a more appropriate way of adding environment variables to the system since Yosemite decided to do away with launchd.conf. This should also work across user accounts due to the nature of the LaunchAgents folder, but I haven't tested that.</p>\n\n<p>To do this, create a .plist file with the following name and path:</p>\n\n<pre><code>/Library/LaunchAgents/setenv.STUDIO_JDK.plist\n</code></pre>\n\n<p>and the contents:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\"&gt;\n&lt;plist version=\"1.0\"&gt;\n    &lt;dict&gt;\n        &lt;key&gt;Label&lt;/key&gt;\n            &lt;string&gt;setenv.STUDIO_JDK&lt;/string&gt;\n        &lt;key&gt;ProgramArguments&lt;/key&gt;\n            &lt;array&gt;\n                &lt;string&gt;sh&lt;/string&gt;\n                &lt;string&gt;-c&lt;/string&gt;\n                &lt;string&gt;\n                    launchctl setenv STUDIO_JDK /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk\n                &lt;/string&gt;\n            &lt;/array&gt;\n        &lt;key&gt;RunAtLoad&lt;/key&gt;\n            &lt;true/&gt;\n        &lt;key&gt;ServiceIPC&lt;/key&gt;\n            &lt;false/&gt;\n        &lt;key&gt;LaunchOnlyOnce&lt;/key&gt;\n            &lt;true/&gt;\n        &lt;key&gt;KeepAlive&lt;/key&gt;\n            &lt;false/&gt;\n    &lt;/dict&gt;\n&lt;/plist&gt;\n</code></pre>\n\n<p>Then change file properties by running the following commands in Terminal:</p>\n\n<pre><code>sudo chmod 644 /Library/LaunchAgents/setenv.STUDIO_JDK.plist\n\nsudo chown root /Library/LaunchAgents/setenv.STUDIO_JDK.plist\n\nsudo chgrp wheel /Library/LaunchAgents/setenv.STUDIO_JDK.plist\n</code></pre>\n\n<p>Notes:</p>\n\n<p>1) You may need to change 'jdk1.8.0_25.jdk' to match the version that you have on your computer.</p>\n\n<p>2) I tried to use \"jdk1.8.*.jdk\" to try and account for varying Java * versions, but when I opened Android Studio I got the no JVM error even though if you run \"echo $STUDIO_JDK\" it returns the correct path. Perhaps someone has some insight as to how to fix that issue.</p>\n"},{"tags":[],"owner":{"account_id":3213543,"reputation":1152,"user_id":2712925,"accept_rate":86,"display_name":"Scott"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1421890426,"creation_date":1421890426,"answer_id":28079952,"question_id":27369269,"body_markdown":"**Do not edit the plist.** These instructions worked for me the first time I installed Android Studio a few months ago as well as just today. (1/21/2015)\r\n\r\nAll you need to do is a few simple things, although they aren&#39;t really listed on Google&#39;s website.\r\n\r\n1. First you need Java installed. this is not the JDK, it is seperate. You can get that from [this link.][1] If you don&#39;t have this it will probably throw an error saying something like &quot;no **JVM** installed.&quot;\r\n2. Second you need the Java JDK, I got JDK 7 from [this link.][2] Make sure to choose the Mac OS X link under the  Java SE Development Kit 7u75 heading. If you don&#39;t have this it will probably throw an error saying something like &quot;no **JDK** installed.&quot;\r\n3. If you haven&#39;t already installed Android Studio, do that. But I&#39;m sure you&#39;ve already done that by now.\r\n\r\n\r\n  [1]: http://support.apple.com/kb/DL1572?viewlocale=en_US&amp;locale=en_US\r\n  [2]: http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html","title":"Android Studio was unable to find a valid Jvm (Related to MAC OS)","body":"<p><strong>Do not edit the plist.</strong> These instructions worked for me the first time I installed Android Studio a few months ago as well as just today. (1/21/2015)</p>\n\n<p>All you need to do is a few simple things, although they aren't really listed on Google's website.</p>\n\n<ol>\n<li>First you need Java installed. this is not the JDK, it is seperate. You can get that from <a href=\"http://support.apple.com/kb/DL1572?viewlocale=en_US&amp;locale=en_US\" rel=\"nofollow\">this link.</a> If you don't have this it will probably throw an error saying something like \"no <strong>JVM</strong> installed.\"</li>\n<li>Second you need the Java JDK, I got JDK 7 from <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html\" rel=\"nofollow\">this link.</a> Make sure to choose the Mac OS X link under the  Java SE Development Kit 7u75 heading. If you don't have this it will probably throw an error saying something like \"no <strong>JDK</strong> installed.\"</li>\n<li>If you haven't already installed Android Studio, do that. But I'm sure you've already done that by now.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":398659,"reputation":7051,"user_id":763459,"accept_rate":85,"display_name":"dumbfingers"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1423648341,"creation_date":1423648341,"answer_id":28451204,"question_id":27369269,"body_markdown":"As @Gerard suggested, I summerise my original comment (https://stackoverflow.com/a/27370525/763459)  as an Answer, hope it can help others who are annoyed by this issue.\r\n\r\nThere&#39;s a way without running the AppleScript: \r\nedit `.bash_profile` (if this file doesn&#39;t exist, please create a new one , as @Gerard suggested, you can to use `source .bash_profile` for the first time).\r\n\r\n* Install the legacy Java (may be neccessary) http://support.apple.com/kb/DL1572\r\n\r\n* Put export STUDIO_JDK /Library/Java/JavaVirtualMachines/jdk1.8.0_31.jdk\r\n\r\n* Then quit terminal (or any text editors you&#39;re using to edit this file), run the Android Studio and viola\r\n  \t \t\t\r\n\r\n\r\nTested with OSX 10.10 and Android 1.0.1   ","title":"Android Studio was unable to find a valid Jvm (Related to MAC OS)","body":"<p>As @Gerard suggested, I summerise my original comment (<a href=\"https://stackoverflow.com/a/27370525/763459\">https://stackoverflow.com/a/27370525/763459</a>)  as an Answer, hope it can help others who are annoyed by this issue.</p>\n\n<p>There's a way without running the AppleScript: \nedit <code>.bash_profile</code> (if this file doesn't exist, please create a new one , as @Gerard suggested, you can to use <code>source .bash_profile</code> for the first time).</p>\n\n<ul>\n<li><p>Install the legacy Java (may be neccessary) <a href=\"http://support.apple.com/kb/DL1572\" rel=\"nofollow noreferrer\">http://support.apple.com/kb/DL1572</a></p></li>\n<li><p>Put export STUDIO_JDK /Library/Java/JavaVirtualMachines/jdk1.8.0_31.jdk</p></li>\n<li><p>Then quit terminal (or any text editors you're using to edit this file), run the Android Studio and viola</p></li>\n</ul>\n\n<p>Tested with OSX 10.10 and Android 1.0.1   </p>\n"},{"tags":[],"owner":{"account_id":349346,"reputation":13527,"user_id":684582,"accept_rate":75,"display_name":"Al&#233;cio Carvalho"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1424529657,"creation_date":1424529657,"answer_id":28647004,"question_id":27369269,"body_markdown":"Try downloading the Java from Apple Support Page: http://support.apple.com/kb/DL1572 if that doesn&#39;t work for you or fails to load (*very common issue*), just follow this link to download and install the Java version you need:\r\n\r\nhttp://support.apple.com/downloads/DL1572/en_US/JavaForOSX2014-001.dmg\r\n\r\nThat&#39;s it.","title":"Android Studio was unable to find a valid Jvm (Related to MAC OS)","body":"<p>Try downloading the Java from Apple Support Page: <a href=\"http://support.apple.com/kb/DL1572\" rel=\"nofollow\">http://support.apple.com/kb/DL1572</a> if that doesn't work for you or fails to load (<em>very common issue</em>), just follow this link to download and install the Java version you need:</p>\n\n<p><a href=\"http://support.apple.com/downloads/DL1572/en_US/JavaForOSX2014-001.dmg\" rel=\"nofollow\">http://support.apple.com/downloads/DL1572/en_US/JavaForOSX2014-001.dmg</a></p>\n\n<p>That's it.</p>\n"},{"tags":[],"owner":{"account_id":5070416,"reputation":631,"user_id":4069305,"display_name":"Tuan Pham"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1474143380,"creation_date":1425188064,"answer_id":28790486,"question_id":27369269,"body_markdown":"1. Install newest JDK (8u102 current)\r\n2. Set envirionment variable `STUDIO_JDK` (`java_home` outputs the Java home dir and `sed` strips two folders to get the jdk dir)\r\n\r\n    ```launchctl setenv STUDIO_JDK `/usr/libexec/java_home -version 1.8 | sed &#39;s/\\/Contents\\/Home//g&#39;`\r\n```\r\n\r\n3. Launch Android Studio like you would normally\r\n\r\n## Set STUDIO_JDK on every reboot\r\nThe above steps only works for the current session. Here is how to create a plist file in /Library/LaunchDaemons that runs the above command on every boot:\r\n\r\n    sudo defaults write /Library/LaunchDaemons/com.google.studiojdk Label STUDIO_JDK\r\n    sudo defaults write /Library/LaunchDaemons/com.google.studiojdk ProgramArguments -array /bin/launchctl setenv STUDIO_JDK `/usr/libexec/java_home | sed &#39;s/\\/Contents\\/Home//g&#39;`\r\n    sudo defaults write /Library/LaunchDaemons/com.google.studiojdk RunAtLoad -bool TRUE\r\n\r\nFound out about the plist trick thanks to http://www.dowdandassociates.com/blog/content/howto-set-an-environment-variable-in-mac-os-x-launchd-plist/","title":"Android Studio was unable to find a valid Jvm (Related to MAC OS)","body":"<ol>\n<li>Install newest JDK (8u102 current)</li>\n<li><p>Set envirionment variable <code>STUDIO_JDK</code> (<code>java_home</code> outputs the Java home dir and <code>sed</code> strips two folders to get the jdk dir)</p>\n\n<p><code>launchctl setenv STUDIO_JDK `/usr/libexec/java_home -version 1.8 | sed 's/\\/Contents\\/Home//g'`\n</code></p></li>\n<li><p>Launch Android Studio like you would normally</p></li>\n</ol>\n\n<h2>Set STUDIO_JDK on every reboot</h2>\n\n<p>The above steps only works for the current session. Here is how to create a plist file in /Library/LaunchDaemons that runs the above command on every boot:</p>\n\n<pre><code>sudo defaults write /Library/LaunchDaemons/com.google.studiojdk Label STUDIO_JDK\nsudo defaults write /Library/LaunchDaemons/com.google.studiojdk ProgramArguments -array /bin/launchctl setenv STUDIO_JDK `/usr/libexec/java_home | sed 's/\\/Contents\\/Home//g'`\nsudo defaults write /Library/LaunchDaemons/com.google.studiojdk RunAtLoad -bool TRUE\n</code></pre>\n\n<p>Found out about the plist trick thanks to <a href=\"http://www.dowdandassociates.com/blog/content/howto-set-an-environment-variable-in-mac-os-x-launchd-plist/\" rel=\"nofollow\">http://www.dowdandassociates.com/blog/content/howto-set-an-environment-variable-in-mac-os-x-launchd-plist/</a></p>\n"},{"tags":[],"owner":{"account_id":1840868,"reputation":41,"user_id":1670273,"display_name":"Gibran E Castillo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1426131097,"creation_date":1426131097,"answer_id":29001396,"question_id":27369269,"body_markdown":"I had previously uninstall Java 6 and install Java 7, Android Studio was working okay, then I upgraded Android Studio and I had the issue everyone is having.  Today, I uninstalled Java 7 and installed Java 8 from Oracle.  Then I uninstall Android Studio and installed the latest.  Everything is working for me now","title":"Android Studio was unable to find a valid Jvm (Related to MAC OS)","body":"<p>I had previously uninstall Java 6 and install Java 7, Android Studio was working okay, then I upgraded Android Studio and I had the issue everyone is having.  Today, I uninstalled Java 7 and installed Java 8 from Oracle.  Then I uninstall Android Studio and installed the latest.  Everything is working for me now</p>\n"},{"tags":[],"owner":{"account_id":430826,"reputation":506,"user_id":814471,"display_name":"Uilleann"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1434398444,"creation_date":1434398444,"answer_id":30853977,"question_id":27369269,"body_markdown":"Android Studio will read settings from the file ~/Library/Preferences/AndroidStudio/idea.properties.  I created this file and in it have the path to my jdk :\r\n\r\nSTUDIO_JDK=/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk\r\n\r\nNo editing of the Info.plist necessary!","title":"Android Studio was unable to find a valid Jvm (Related to MAC OS)","body":"<p>Android Studio will read settings from the file ~/Library/Preferences/AndroidStudio/idea.properties.  I created this file and in it have the path to my jdk :</p>\n\n<p>STUDIO_JDK=/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk</p>\n\n<p>No editing of the Info.plist necessary!</p>\n"},{"tags":[],"owner":{"account_id":402729,"reputation":3843,"user_id":770061,"accept_rate":75,"display_name":"bradley4"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1443783964,"creation_date":1443783964,"answer_id":32905836,"question_id":27369269,"body_markdown":"Java was uninstalled when I updated to OS X El Capitan.  \r\n\r\nSee screenshot of terminal before and after I reinstalled Java.  \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nTo reinstall Java I followed this link that was provided in the Android Studio dialog box. \r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/Lh6BD.png\r\n  [2]: http://i.stack.imgur.com/DzdeI.png\r\n\r\nAndroid Studio ran again after the Java installation was reinstalled. ","title":"Android Studio was unable to find a valid Jvm (Related to MAC OS)","body":"<p>Java was uninstalled when I updated to OS X El Capitan.  </p>\n\n<p>See screenshot of terminal before and after I reinstalled Java.  </p>\n\n<p><a href=\"https://i.stack.imgur.com/Lh6BD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Lh6BD.png\" alt=\"enter image description here\"></a></p>\n\n<p>To reinstall Java I followed this link that was provided in the Android Studio dialog box. </p>\n\n<p><a href=\"https://i.stack.imgur.com/DzdeI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DzdeI.png\" alt=\"enter image description here\"></a></p>\n\n<p>Android Studio ran again after the Java installation was reinstalled. </p>\n"}],"owner":{"account_id":4003874,"reputation":2243,"user_id":3299113,"display_name":"iMickyRich"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147618,"favorite_count":0,"down_vote_count":2,"up_vote_count":213,"accepted_answer_id":27369596,"answer_count":28,"score":211,"last_activity_date":1671872163,"creation_date":1418083419,"question_id":27369269,"body_markdown":"I am unable to start my Android Studio for Android development on Mac OS (10.10.1 - Yosemite)","title":"Android Studio was unable to find a valid Jvm (Related to MAC OS)","body":"<p>I am unable to start my Android Studio for Android development on Mac OS (10.10.1 - Yosemite)</p>\n"},{"tags":["java","asynchronous","reactive-programming","observable","rx-java"],"comments":[{"owner":{"account_id":43539,"reputation":79200,"user_id":127320,"accept_rate":87,"display_name":"Aravind Yarram"},"score":0,"creation_date":1421547844,"post_id":26249030,"comment_id":44401425,"body_markdown":"How are you generating the Transfer Timeline chart? It looks pretty cool and useful. Would like to use it myself.","body":"How are you generating the Transfer Timeline chart? It looks pretty cool and useful. Would like to use it myself."},{"owner":{"account_id":949058,"reputation":1624,"user_id":975625,"display_name":"diduknow"},"score":0,"creation_date":1421653931,"post_id":26249030,"comment_id":44426442,"body_markdown":"Since my system was making external calls I simply proxied the calls through fiddler. Fiddler has an option to generate network timelines. You are basically seeing that view. After fiddler has been setup for proxying requests; simply select the sessions you are interested in and then click the timeline tab on the right pane. thanks anand","body":"Since my system was making external calls I simply proxied the calls through fiddler. Fiddler has an option to generate network timelines. You are basically seeing that view. After fiddler has been setup for proxying requests; simply select the sessions you are interested in and then click the timeline tab on the right pane. thanks anand"}],"answers":[{"tags":[],"owner":{"account_id":2202843,"reputation":1771,"user_id":1946802,"display_name":"benjchristensen"},"down_vote_count":0,"up_vote_count":89,"is_accepted":true,"score":89,"last_activity_date":1671871653,"creation_date":1412748565,"answer_id":26250237,"question_id":26249030,"body_markdown":"The parallel operator proved to be a problem for almost all use cases and does not do what most expect from it, so it was removed in the 1.0.0.rc.4 release: https://github.com/ReactiveX/RxJava/pull/1716 \r\n\r\nA good example of how to do this type of behavior and get parallel execution can be seen [here][1].\r\n\r\nIn your example code it is unclear if `searchServiceClient` is synchronous or asynchronous. It affects how to solve the problem slightly as if it is already async no extra scheduling is needed. If synchronous extra scheduling is needed.\r\n\r\nFirst here are some simple examples showing synchronous and asynchronous behavior:\r\n\r\n    import rx.Observable;\r\n    import rx.Subscriber;\r\n    import rx.schedulers.Schedulers;\r\n    \r\n    public class ParallelExecution {\r\n    \r\n        public static void main(String[] args) {\r\n            System.out.println(&quot;------------ mergingAsync&quot;);\r\n            mergingAsync();\r\n            System.out.println(&quot;------------ mergingSync&quot;);\r\n            mergingSync();\r\n            System.out.println(&quot;------------ mergingSyncMadeAsync&quot;);\r\n            mergingSyncMadeAsync();\r\n            System.out.println(&quot;------------ flatMapExampleSync&quot;);\r\n            flatMapExampleSync();\r\n            System.out.println(&quot;------------ flatMapExampleAsync&quot;);\r\n            flatMapExampleAsync();\r\n            System.out.println(&quot;------------&quot;);\r\n        }\r\n    \r\n        private static void mergingAsync() {\r\n            Observable.merge(getDataAsync(1), getDataAsync(2)).toBlocking().forEach(System.out::println);\r\n        }\r\n    \r\n        private static void mergingSync() {\r\n            // here you&#39;ll see the delay as each is executed synchronously\r\n            Observable.merge(getDataSync(1), getDataSync(2)).toBlocking().forEach(System.out::println);\r\n        }\r\n    \r\n        private static void mergingSyncMadeAsync() {\r\n            // if you have something synchronous and want to make it async, you can schedule it like this\r\n            // so here we see both executed concurrently\r\n            Observable.merge(getDataSync(1).subscribeOn(Schedulers.io()), getDataSync(2).subscribeOn(Schedulers.io())).toBlocking().forEach(System.out::println);\r\n        }\r\n    \r\n        private static void flatMapExampleAsync() {\r\n            Observable.range(0, 5).flatMap(i -&gt; {\r\n                return getDataAsync(i);\r\n            }).toBlocking().forEach(System.out::println);\r\n        }\r\n    \r\n        private static void flatMapExampleSync() {\r\n            Observable.range(0, 5).flatMap(i -&gt; {\r\n                return getDataSync(i);\r\n            }).toBlocking().forEach(System.out::println);\r\n        }\r\n    \r\n        // artificial representations of IO work\r\n        static Observable&lt;Integer&gt; getDataAsync(int i) {\r\n            return getDataSync(i).subscribeOn(Schedulers.io());\r\n        }\r\n    \r\n        static Observable&lt;Integer&gt; getDataSync(int i) {\r\n            return Observable.create((Subscriber&lt;? super Integer&gt; s) -&gt; {\r\n                // simulate latency\r\n                    try {\r\n                        Thread.sleep(1000);\r\n                    } catch (Exception e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                    s.onNext(i);\r\n                    s.onCompleted();\r\n                });\r\n        }\r\n    }\r\n\r\nFollowing is an attempt at providing an example that more closely matches your code:\r\n\r\n    import java.util.List;\r\n    \r\n    import rx.Observable;\r\n    import rx.Subscriber;\r\n    import rx.schedulers.Schedulers;\r\n    \r\n    public class ParallelExecutionExample {\r\n    \r\n        public static void main(String[] args) {\r\n            final long startTime = System.currentTimeMillis();\r\n    \r\n            Observable&lt;Tile&gt; searchTile = getSearchResults(&quot;search term&quot;)\r\n                    .doOnSubscribe(() -&gt; logTime(&quot;Search started &quot;, startTime))\r\n                    .doOnCompleted(() -&gt; logTime(&quot;Search completed &quot;, startTime));\r\n    \r\n            Observable&lt;TileResponse&gt; populatedTiles = searchTile.flatMap(t -&gt; {\r\n                Observable&lt;Reviews&gt; reviews = getSellerReviews(t.getSellerId())\r\n                        .doOnCompleted(() -&gt; logTime(&quot;getSellerReviews[&quot; + t.id + &quot;] completed &quot;, startTime));\r\n                Observable&lt;String&gt; imageUrl = getProductImage(t.getProductId())\r\n                        .doOnCompleted(() -&gt; logTime(&quot;getProductImage[&quot; + t.id + &quot;] completed &quot;, startTime));\r\n    \r\n                return Observable.zip(reviews, imageUrl, (r, u) -&gt; {\r\n                    return new TileResponse(t, r, u);\r\n                }).doOnCompleted(() -&gt; logTime(&quot;zip[&quot; + t.id + &quot;] completed &quot;, startTime));\r\n            });\r\n    \r\n            List&lt;TileResponse&gt; allTiles = populatedTiles.toList()\r\n                    .doOnCompleted(() -&gt; logTime(&quot;All Tiles Completed &quot;, startTime))\r\n                    .toBlocking().single();\r\n        }\r\n    \r\n        private static Observable&lt;Tile&gt; getSearchResults(String string) {\r\n            return mockClient(new Tile(1), new Tile(2), new Tile(3));\r\n        }\r\n    \r\n        private static Observable&lt;Reviews&gt; getSellerReviews(int id) {\r\n            return mockClient(new Reviews());\r\n        }\r\n    \r\n        private static Observable&lt;String&gt; getProductImage(int id) {\r\n            return mockClient(&quot;image_&quot; + id);\r\n        }\r\n    \r\n        private static void logTime(String message, long startTime) {\r\n            System.out.println(message + &quot; =&gt; &quot; + (System.currentTimeMillis() - startTime) + &quot;ms&quot;);\r\n        }\r\n    \r\n        private static &lt;T&gt; Observable&lt;T&gt; mockClient(T... ts) {\r\n            return Observable.create((Subscriber&lt;? super T&gt; s) -&gt; {\r\n                // simulate latency\r\n                    try {\r\n                        Thread.sleep(1000);\r\n                    } catch (Exception e) {\r\n                    }\r\n                    for (T t : ts) {\r\n                        s.onNext(t);\r\n                    }\r\n                    s.onCompleted();\r\n                }).subscribeOn(Schedulers.io());\r\n            // note the use of subscribeOn to make an otherwise synchronous Observable async\r\n        }\r\n    \r\n        public static class TileResponse {\r\n    \r\n            public TileResponse(Tile t, Reviews r, String u) {\r\n                // store the values\r\n            }\r\n    \r\n        }\r\n    \r\n        public static class Tile {\r\n    \r\n            private final int id;\r\n    \r\n            public Tile(int i) {\r\n                this.id = i;\r\n            }\r\n    \r\n            public int getSellerId() {\r\n                return id;\r\n            }\r\n    \r\n            public int getProductId() {\r\n                return id;\r\n            }\r\n    \r\n        }\r\n    \r\n        public static class Reviews {\r\n    \r\n        }\r\n    }\r\n    \r\n\r\nThis outputs:\r\n\r\n    Search started  =&gt; 65ms\r\n    Search completed  =&gt; 1094ms\r\n    getProductImage[1] completed  =&gt; 2095ms\r\n    getSellerReviews[2] completed  =&gt; 2095ms\r\n    getProductImage[3] completed  =&gt; 2095ms\r\n    zip[1] completed  =&gt; 2096ms\r\n    zip[2] completed  =&gt; 2096ms\r\n    getProductImage[2] completed  =&gt; 2096ms\r\n    getSellerReviews[1] completed  =&gt; 2096ms\r\n    zip[3] completed  =&gt; 2096ms\r\n    All Tiles Completed  =&gt; 2097ms\r\n    getSellerReviews[3] completed  =&gt; 2097ms\r\n\r\n\r\nI have made each IO call be simulated to take 1000ms so it is obvious where the latency is and that it is happening in parallel. It prints out the progress is makes in elapsed milliseconds.\r\n\r\nThe trick here is that flatMap merges async calls, so as long as the Observables being merged are async, they will all be executed concurrently.\r\n\r\nIf a call like `getProductImage(t.getProductId())` was synchronous, it can be made asynchronous like this: getProductImage(t.getProductId()).subscribeOn(Schedulers.io).\r\n\r\nHere is the important part of the above example without all the logging and boilerplate types:\r\n\r\n        Observable&lt;Tile&gt; searchTile = getSearchResults(&quot;search term&quot;);;\r\n\r\n        Observable&lt;TileResponse&gt; populatedTiles = searchTile.flatMap(t -&gt; {\r\n            Observable&lt;Reviews&gt; reviews = getSellerReviews(t.getSellerId());\r\n            Observable&lt;String&gt; imageUrl = getProductImage(t.getProductId());\r\n\r\n            return Observable.zip(reviews, imageUrl, (r, u) -&gt; {\r\n                return new TileResponse(t, r, u);\r\n            });\r\n        });\r\n\r\n        List&lt;TileResponse&gt; allTiles = populatedTiles.toList()\r\n                .toBlocking().single();\r\n\r\n  [1]: https://github.com/Netflix/ReactiveLab/blob/master/reactive-lab-gateway/src/main/java/io/reactivex/lab/gateway/routes/RouteForDeviceHome.java","title":"RxJava Fetching Observables In Parallel","body":"<p>The parallel operator proved to be a problem for almost all use cases and does not do what most expect from it, so it was removed in the 1.0.0.rc.4 release: <a href=\"https://github.com/ReactiveX/RxJava/pull/1716\" rel=\"nofollow noreferrer\">https://github.com/ReactiveX/RxJava/pull/1716</a></p>\n<p>A good example of how to do this type of behavior and get parallel execution can be seen <a href=\"https://github.com/Netflix/ReactiveLab/blob/master/reactive-lab-gateway/src/main/java/io/reactivex/lab/gateway/routes/RouteForDeviceHome.java\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>In your example code it is unclear if <code>searchServiceClient</code> is synchronous or asynchronous. It affects how to solve the problem slightly as if it is already async no extra scheduling is needed. If synchronous extra scheduling is needed.</p>\n<p>First here are some simple examples showing synchronous and asynchronous behavior:</p>\n<pre><code>import rx.Observable;\nimport rx.Subscriber;\nimport rx.schedulers.Schedulers;\n\npublic class ParallelExecution {\n\n    public static void main(String[] args) {\n        System.out.println(&quot;------------ mergingAsync&quot;);\n        mergingAsync();\n        System.out.println(&quot;------------ mergingSync&quot;);\n        mergingSync();\n        System.out.println(&quot;------------ mergingSyncMadeAsync&quot;);\n        mergingSyncMadeAsync();\n        System.out.println(&quot;------------ flatMapExampleSync&quot;);\n        flatMapExampleSync();\n        System.out.println(&quot;------------ flatMapExampleAsync&quot;);\n        flatMapExampleAsync();\n        System.out.println(&quot;------------&quot;);\n    }\n\n    private static void mergingAsync() {\n        Observable.merge(getDataAsync(1), getDataAsync(2)).toBlocking().forEach(System.out::println);\n    }\n\n    private static void mergingSync() {\n        // here you'll see the delay as each is executed synchronously\n        Observable.merge(getDataSync(1), getDataSync(2)).toBlocking().forEach(System.out::println);\n    }\n\n    private static void mergingSyncMadeAsync() {\n        // if you have something synchronous and want to make it async, you can schedule it like this\n        // so here we see both executed concurrently\n        Observable.merge(getDataSync(1).subscribeOn(Schedulers.io()), getDataSync(2).subscribeOn(Schedulers.io())).toBlocking().forEach(System.out::println);\n    }\n\n    private static void flatMapExampleAsync() {\n        Observable.range(0, 5).flatMap(i -&gt; {\n            return getDataAsync(i);\n        }).toBlocking().forEach(System.out::println);\n    }\n\n    private static void flatMapExampleSync() {\n        Observable.range(0, 5).flatMap(i -&gt; {\n            return getDataSync(i);\n        }).toBlocking().forEach(System.out::println);\n    }\n\n    // artificial representations of IO work\n    static Observable&lt;Integer&gt; getDataAsync(int i) {\n        return getDataSync(i).subscribeOn(Schedulers.io());\n    }\n\n    static Observable&lt;Integer&gt; getDataSync(int i) {\n        return Observable.create((Subscriber&lt;? super Integer&gt; s) -&gt; {\n            // simulate latency\n                try {\n                    Thread.sleep(1000);\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n                s.onNext(i);\n                s.onCompleted();\n            });\n    }\n}\n</code></pre>\n<p>Following is an attempt at providing an example that more closely matches your code:</p>\n<pre><code>import java.util.List;\n\nimport rx.Observable;\nimport rx.Subscriber;\nimport rx.schedulers.Schedulers;\n\npublic class ParallelExecutionExample {\n\n    public static void main(String[] args) {\n        final long startTime = System.currentTimeMillis();\n\n        Observable&lt;Tile&gt; searchTile = getSearchResults(&quot;search term&quot;)\n                .doOnSubscribe(() -&gt; logTime(&quot;Search started &quot;, startTime))\n                .doOnCompleted(() -&gt; logTime(&quot;Search completed &quot;, startTime));\n\n        Observable&lt;TileResponse&gt; populatedTiles = searchTile.flatMap(t -&gt; {\n            Observable&lt;Reviews&gt; reviews = getSellerReviews(t.getSellerId())\n                    .doOnCompleted(() -&gt; logTime(&quot;getSellerReviews[&quot; + t.id + &quot;] completed &quot;, startTime));\n            Observable&lt;String&gt; imageUrl = getProductImage(t.getProductId())\n                    .doOnCompleted(() -&gt; logTime(&quot;getProductImage[&quot; + t.id + &quot;] completed &quot;, startTime));\n\n            return Observable.zip(reviews, imageUrl, (r, u) -&gt; {\n                return new TileResponse(t, r, u);\n            }).doOnCompleted(() -&gt; logTime(&quot;zip[&quot; + t.id + &quot;] completed &quot;, startTime));\n        });\n\n        List&lt;TileResponse&gt; allTiles = populatedTiles.toList()\n                .doOnCompleted(() -&gt; logTime(&quot;All Tiles Completed &quot;, startTime))\n                .toBlocking().single();\n    }\n\n    private static Observable&lt;Tile&gt; getSearchResults(String string) {\n        return mockClient(new Tile(1), new Tile(2), new Tile(3));\n    }\n\n    private static Observable&lt;Reviews&gt; getSellerReviews(int id) {\n        return mockClient(new Reviews());\n    }\n\n    private static Observable&lt;String&gt; getProductImage(int id) {\n        return mockClient(&quot;image_&quot; + id);\n    }\n\n    private static void logTime(String message, long startTime) {\n        System.out.println(message + &quot; =&gt; &quot; + (System.currentTimeMillis() - startTime) + &quot;ms&quot;);\n    }\n\n    private static &lt;T&gt; Observable&lt;T&gt; mockClient(T... ts) {\n        return Observable.create((Subscriber&lt;? super T&gt; s) -&gt; {\n            // simulate latency\n                try {\n                    Thread.sleep(1000);\n                } catch (Exception e) {\n                }\n                for (T t : ts) {\n                    s.onNext(t);\n                }\n                s.onCompleted();\n            }).subscribeOn(Schedulers.io());\n        // note the use of subscribeOn to make an otherwise synchronous Observable async\n    }\n\n    public static class TileResponse {\n\n        public TileResponse(Tile t, Reviews r, String u) {\n            // store the values\n        }\n\n    }\n\n    public static class Tile {\n\n        private final int id;\n\n        public Tile(int i) {\n            this.id = i;\n        }\n\n        public int getSellerId() {\n            return id;\n        }\n\n        public int getProductId() {\n            return id;\n        }\n\n    }\n\n    public static class Reviews {\n\n    }\n}\n</code></pre>\n<p>This outputs:</p>\n<pre><code>Search started  =&gt; 65ms\nSearch completed  =&gt; 1094ms\ngetProductImage[1] completed  =&gt; 2095ms\ngetSellerReviews[2] completed  =&gt; 2095ms\ngetProductImage[3] completed  =&gt; 2095ms\nzip[1] completed  =&gt; 2096ms\nzip[2] completed  =&gt; 2096ms\ngetProductImage[2] completed  =&gt; 2096ms\ngetSellerReviews[1] completed  =&gt; 2096ms\nzip[3] completed  =&gt; 2096ms\nAll Tiles Completed  =&gt; 2097ms\ngetSellerReviews[3] completed  =&gt; 2097ms\n</code></pre>\n<p>I have made each IO call be simulated to take 1000ms so it is obvious where the latency is and that it is happening in parallel. It prints out the progress is makes in elapsed milliseconds.</p>\n<p>The trick here is that flatMap merges async calls, so as long as the Observables being merged are async, they will all be executed concurrently.</p>\n<p>If a call like <code>getProductImage(t.getProductId())</code> was synchronous, it can be made asynchronous like this: getProductImage(t.getProductId()).subscribeOn(Schedulers.io).</p>\n<p>Here is the important part of the above example without all the logging and boilerplate types:</p>\n<pre><code>    Observable&lt;Tile&gt; searchTile = getSearchResults(&quot;search term&quot;);;\n\n    Observable&lt;TileResponse&gt; populatedTiles = searchTile.flatMap(t -&gt; {\n        Observable&lt;Reviews&gt; reviews = getSellerReviews(t.getSellerId());\n        Observable&lt;String&gt; imageUrl = getProductImage(t.getProductId());\n\n        return Observable.zip(reviews, imageUrl, (r, u) -&gt; {\n            return new TileResponse(t, r, u);\n        });\n    });\n\n    List&lt;TileResponse&gt; allTiles = populatedTiles.toList()\n            .toBlocking().single();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3682203,"reputation":2822,"user_id":3066911,"accept_rate":53,"display_name":"shahshi15"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1422322391,"creation_date":1422321185,"answer_id":28161636,"question_id":26249030,"body_markdown":"People who are still @ JDK 7, whose IDE doesn&#39;t automatically detect JDK 8 source just yet and what to try out the above brilliant response (and explanation) by @benjchristensen can use this shamelessly refractored, JDK 7, code. Kudos to @benjchristensen for an amazing explanation and example !\r\n\r\n    import java.util.List;\r\n    \r\n    import rx.Observable;\r\n    import rx.Subscriber;\r\n    import rx.functions.Action0;\r\n    import rx.functions.Func1;\r\n    import rx.functions.Func2;\r\n    import rx.schedulers.Schedulers;\r\n    \r\n    public class ParallelExecutionExample\r\n    {\r\n    \r\n    \tpublic static void main(String[] args)\r\n    \t{\r\n    \t\tfinal long startTime = System.currentTimeMillis();\r\n    \r\n    \t\tObservable&lt;Tile&gt; searchTile = getSearchResults(&quot;search term&quot;)\r\n    \t\t\t\t.doOnSubscribe(new Action0()\r\n    \t\t\t\t\t\t{\r\n    \r\n    \t\t\t\t\t\t\t@Override\r\n    \t\t\t\t\t\t\tpublic void call()\r\n    \t\t\t\t\t\t\t{\r\n    \t\t\t\t\t\t\t\tlogTime(&quot;Search started &quot;, startTime);\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t})\r\n    \t\t\t\t.doOnCompleted(new Action0()\r\n    \t\t\t\t\t\t{\r\n    \r\n    \t\t\t\t\t\t\t@Override\r\n    \t\t\t\t\t\t\tpublic void call()\r\n    \t\t\t\t\t\t\t{\r\n    \t\t\t\t\t\t\t\tlogTime(&quot;Search completed &quot;, startTime);\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t});\r\n    \t\tObservable&lt;TileResponse&gt; populatedTiles = searchTile.flatMap(new Func1&lt;Tile, Observable&lt;TileResponse&gt;&gt;()\r\n    \t\t{\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic Observable&lt;TileResponse&gt; call(final Tile t)\r\n    \t\t\t{\r\n    \t\t\t\tObservable&lt;Reviews&gt; reviews = getSellerReviews(t.getSellerId())\r\n    \t\t\t\t\t\t.doOnCompleted(new Action0()\r\n    \t\t\t\t\t\t\t\t{\r\n    \r\n    \t\t\t\t\t\t\t\t\t@Override\r\n    \t\t\t\t\t\t\t\t\tpublic void call()\r\n    \t\t\t\t\t\t\t\t\t{\r\n    \t\t\t\t\t\t\t\t\t\tlogTime(&quot;getSellerReviews[&quot; + t.id + &quot;] completed &quot;, startTime);\r\n    \t\t\t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t});\r\n    \t\t\t\tObservable&lt;String&gt; imageUrl = getProductImage(t.getProductId())\r\n    \t\t\t\t\t\t.doOnCompleted(new Action0()\r\n    \t\t\t\t\t\t\t\t{\r\n    \r\n    \t\t\t\t\t\t\t\t\t@Override\r\n    \t\t\t\t\t\t\t\t\tpublic void call()\r\n    \t\t\t\t\t\t\t\t\t{\r\n    \t\t\t\t\t\t\t\t\t\tlogTime(&quot;getProductImage[&quot; + t.id + &quot;] completed &quot;, startTime);\r\n    \t\t\t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t});\r\n    \t\t\t\treturn Observable.zip(reviews, imageUrl, new Func2&lt;Reviews, String, TileResponse&gt;()\r\n    \t\t\t\t{\r\n    \r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic TileResponse call(Reviews r, String u)\r\n    \t\t\t\t\t{\r\n    \t\t\t\t\t\treturn new TileResponse(t, r, u);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t})\r\n    \t\t\t\t\t\t.doOnCompleted(new Action0()\r\n    \t\t\t\t\t\t\t\t{\r\n    \r\n    \t\t\t\t\t\t\t\t\t@Override\r\n    \t\t\t\t\t\t\t\t\tpublic void call()\r\n    \t\t\t\t\t\t\t\t\t{\r\n    \t\t\t\t\t\t\t\t\t\tlogTime(&quot;zip[&quot; + t.id + &quot;] completed &quot;, startTime);\r\n    \t\t\t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t});\r\n    \t\t\t}\r\n    \t\t});\r\n    \r\n    \t\tList&lt;TileResponse&gt; allTiles = populatedTiles\r\n    \t\t\t\t.toList()\r\n    \t\t\t\t.doOnCompleted(new Action0()\r\n    \t\t\t\t\t\t{\r\n    \r\n    \t\t\t\t\t\t\t@Override\r\n    \t\t\t\t\t\t\tpublic void call()\r\n    \t\t\t\t\t\t\t{\r\n    \t\t\t\t\t\t\t\tlogTime(&quot;All Tiles Completed &quot;, startTime);\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t})\r\n    \t\t\t\t.toBlocking()\r\n    \t\t\t\t.single();\r\n    \t}\r\n    \r\n    \tprivate static Observable&lt;Tile&gt; getSearchResults(String string)\r\n    \t{\r\n    \t\treturn mockClient(new Tile(1), new Tile(2), new Tile(3));\r\n    \t}\r\n    \r\n    \tprivate static Observable&lt;Reviews&gt; getSellerReviews(int id)\r\n    \t{\r\n    \t\treturn mockClient(new Reviews());\r\n    \t}\r\n    \r\n    \tprivate static Observable&lt;String&gt; getProductImage(int id)\r\n    \t{\r\n    \t\treturn mockClient(&quot;image_&quot; + id);\r\n    \t}\r\n    \r\n    \tprivate static void logTime(String message, long startTime)\r\n    \t{\r\n    \t\tSystem.out.println(message + &quot; =&gt; &quot; + (System.currentTimeMillis() - startTime) + &quot;ms&quot;);\r\n    \t}\r\n    \r\n    \tprivate static &lt;T&gt; Observable&lt;T&gt; mockClient(final T... ts)\r\n    \t{\r\n    \t\treturn Observable.create(new Observable.OnSubscribe&lt;T&gt;()\r\n    \t\t{\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic void call(Subscriber&lt;? super T&gt; s)\r\n    \t\t\t{\r\n    \t\t\t\ttry\r\n    \t\t\t\t{\r\n    \t\t\t\t\tThread.sleep(1000);\r\n    \t\t\t\t}\r\n    \t\t\t\tcatch (Exception e)\r\n    \t\t\t\t{\r\n    \t\t\t\t}\r\n    \t\t\t\tfor (T t : ts)\r\n    \t\t\t\t{\r\n    \t\t\t\t\ts.onNext(t);\r\n    \t\t\t\t}\r\n    \t\t\t\ts.onCompleted();\r\n    \t\t\t}\r\n    \t\t})\r\n    \t\t\t\t.subscribeOn(Schedulers.io());\r\n    \t\t// note the use of subscribeOn to make an otherwise synchronous Observable async\r\n    \t}\r\n    \r\n    \tpublic static class TileResponse\r\n    \t{\r\n    \r\n    \t\tpublic TileResponse(Tile t, Reviews r, String u)\r\n    \t\t{\r\n    \t\t\t// store the values\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    \tpublic static class Tile\r\n    \t{\r\n    \r\n    \t\tprivate final int id;\r\n    \r\n    \t\tpublic Tile(int i)\r\n    \t\t{\r\n    \t\t\tthis.id = i;\r\n    \t\t}\r\n    \r\n    \t\tpublic int getSellerId()\r\n    \t\t{\r\n    \t\t\treturn id;\r\n    \t\t}\r\n    \r\n    \t\tpublic int getProductId()\r\n    \t\t{\r\n    \t\t\treturn id;\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    \tpublic static class Reviews\r\n    \t{\r\n    \r\n    \t}\r\n    } ","title":"RxJava Fetching Observables In Parallel","body":"<p>People who are still @ JDK 7, whose IDE doesn't automatically detect JDK 8 source just yet and what to try out the above brilliant response (and explanation) by @benjchristensen can use this shamelessly refractored, JDK 7, code. Kudos to @benjchristensen for an amazing explanation and example !</p>\n\n<pre><code>import java.util.List;\n\nimport rx.Observable;\nimport rx.Subscriber;\nimport rx.functions.Action0;\nimport rx.functions.Func1;\nimport rx.functions.Func2;\nimport rx.schedulers.Schedulers;\n\npublic class ParallelExecutionExample\n{\n\n    public static void main(String[] args)\n    {\n        final long startTime = System.currentTimeMillis();\n\n        Observable&lt;Tile&gt; searchTile = getSearchResults(\"search term\")\n                .doOnSubscribe(new Action0()\n                        {\n\n                            @Override\n                            public void call()\n                            {\n                                logTime(\"Search started \", startTime);\n                            }\n                })\n                .doOnCompleted(new Action0()\n                        {\n\n                            @Override\n                            public void call()\n                            {\n                                logTime(\"Search completed \", startTime);\n                            }\n                });\n        Observable&lt;TileResponse&gt; populatedTiles = searchTile.flatMap(new Func1&lt;Tile, Observable&lt;TileResponse&gt;&gt;()\n        {\n\n            @Override\n            public Observable&lt;TileResponse&gt; call(final Tile t)\n            {\n                Observable&lt;Reviews&gt; reviews = getSellerReviews(t.getSellerId())\n                        .doOnCompleted(new Action0()\n                                {\n\n                                    @Override\n                                    public void call()\n                                    {\n                                        logTime(\"getSellerReviews[\" + t.id + \"] completed \", startTime);\n                                    }\n                        });\n                Observable&lt;String&gt; imageUrl = getProductImage(t.getProductId())\n                        .doOnCompleted(new Action0()\n                                {\n\n                                    @Override\n                                    public void call()\n                                    {\n                                        logTime(\"getProductImage[\" + t.id + \"] completed \", startTime);\n                                    }\n                        });\n                return Observable.zip(reviews, imageUrl, new Func2&lt;Reviews, String, TileResponse&gt;()\n                {\n\n                    @Override\n                    public TileResponse call(Reviews r, String u)\n                    {\n                        return new TileResponse(t, r, u);\n                    }\n                })\n                        .doOnCompleted(new Action0()\n                                {\n\n                                    @Override\n                                    public void call()\n                                    {\n                                        logTime(\"zip[\" + t.id + \"] completed \", startTime);\n                                    }\n                        });\n            }\n        });\n\n        List&lt;TileResponse&gt; allTiles = populatedTiles\n                .toList()\n                .doOnCompleted(new Action0()\n                        {\n\n                            @Override\n                            public void call()\n                            {\n                                logTime(\"All Tiles Completed \", startTime);\n                            }\n                })\n                .toBlocking()\n                .single();\n    }\n\n    private static Observable&lt;Tile&gt; getSearchResults(String string)\n    {\n        return mockClient(new Tile(1), new Tile(2), new Tile(3));\n    }\n\n    private static Observable&lt;Reviews&gt; getSellerReviews(int id)\n    {\n        return mockClient(new Reviews());\n    }\n\n    private static Observable&lt;String&gt; getProductImage(int id)\n    {\n        return mockClient(\"image_\" + id);\n    }\n\n    private static void logTime(String message, long startTime)\n    {\n        System.out.println(message + \" =&gt; \" + (System.currentTimeMillis() - startTime) + \"ms\");\n    }\n\n    private static &lt;T&gt; Observable&lt;T&gt; mockClient(final T... ts)\n    {\n        return Observable.create(new Observable.OnSubscribe&lt;T&gt;()\n        {\n\n            @Override\n            public void call(Subscriber&lt;? super T&gt; s)\n            {\n                try\n                {\n                    Thread.sleep(1000);\n                }\n                catch (Exception e)\n                {\n                }\n                for (T t : ts)\n                {\n                    s.onNext(t);\n                }\n                s.onCompleted();\n            }\n        })\n                .subscribeOn(Schedulers.io());\n        // note the use of subscribeOn to make an otherwise synchronous Observable async\n    }\n\n    public static class TileResponse\n    {\n\n        public TileResponse(Tile t, Reviews r, String u)\n        {\n            // store the values\n        }\n\n    }\n\n    public static class Tile\n    {\n\n        private final int id;\n\n        public Tile(int i)\n        {\n            this.id = i;\n        }\n\n        public int getSellerId()\n        {\n            return id;\n        }\n\n        public int getProductId()\n        {\n            return id;\n        }\n\n    }\n\n    public static class Reviews\n    {\n\n    }\n} \n</code></pre>\n"}],"owner":{"account_id":949058,"reputation":1624,"user_id":975625,"display_name":"diduknow"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35568,"favorite_count":0,"down_vote_count":0,"up_vote_count":56,"accepted_answer_id":26250237,"answer_count":2,"score":56,"last_activity_date":1671871653,"creation_date":1412741093,"question_id":26249030,"body_markdown":"I need some help in implementing parallel asynchronous calls in RxJava. I have picked up a simple use case wherein the FIRST call fetches (rather searches) a list of products (Tile) to be displayed. The subsequent calls go out and fetch (A) REVIEWS and (B) PRODUCT IMAGES\r\n\r\nAfter several attempts I got to this place. \r\n\r\n     1    Observable&lt;Tile&gt; searchTile = searchServiceClient.getSearchResults(searchTerm);\r\n     2    List&lt;Tile&gt; allTiles = new ArrayList&lt;Tile&gt;();\r\n     3    ClientResponse response = new ClientResponse();\r\n    \r\n     4    searchTile.parallel(oTile -&gt; {\r\n     5      return oTile.flatMap(t -&gt; {\r\n     6        Observable&lt;Reviews&gt; reviews = reviewsServiceClient.getSellerReviews(t.getSellerId());\r\n     7        Observable&lt;String&gt; imageUrl = reviewsServiceClient.getProductImage(t.getProductId());\r\n    \r\n     8        return Observable.zip(reviews, imageUrl, (r, u) -&gt; {\r\n     9          t.setReviews(r);\r\n    10          t.setImageUrl(u);\r\n    \r\n    11          return t;\r\n    12        });\r\n    \r\n    13      });\r\n    14    }).subscribe(e -&gt; {\r\n    15      allTiles.add((Tile) e);\r\n    16    });\r\n\r\nLine  1: goes out and fetches the product (Tile) to be displayed\r\n\r\nLine  4: We take the list of the Observable&lt;Tile&gt; and SHARD it to fetch reviews and imageUrls\r\n\r\nLie 6,7: Fetch the Observable&lt;Review&gt; review and Observable&lt;String&gt; url\r\n\r\nLine  8: Finally the 2 observables are zipped up to return an updated Observable&lt;Tile&gt;\r\n\r\nLine 15: finally line 15 collates all the individual products to be displayed in a collection which can be returned back to the calling layer\r\n\r\nWhile the Observable&lt;Tile&gt; has been sharded and in our tests run over 4 different threads; fetching of reviews and images seems to be one after another. I suspect that the zip step on line 8 is basically causing the sequential invocation of the the 2 observables (reviews and url).\r\n\r\n![enter image description here][1]\r\n\r\nDoes this group have any suggestion to parallely fetch reiews and image urls. In essence the waterfall chart attached above should look more vertically stacked. The calls to reviews and images should be in parallel\r\n\r\nthanks\r\nanand raman\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/YVERX.png","title":"RxJava Fetching Observables In Parallel","body":"<p>I need some help in implementing parallel asynchronous calls in RxJava. I have picked up a simple use case wherein the FIRST call fetches (rather searches) a list of products (Tile) to be displayed. The subsequent calls go out and fetch (A) REVIEWS and (B) PRODUCT IMAGES</p>\n\n<p>After several attempts I got to this place. </p>\n\n<pre><code> 1    Observable&lt;Tile&gt; searchTile = searchServiceClient.getSearchResults(searchTerm);\n 2    List&lt;Tile&gt; allTiles = new ArrayList&lt;Tile&gt;();\n 3    ClientResponse response = new ClientResponse();\n\n 4    searchTile.parallel(oTile -&gt; {\n 5      return oTile.flatMap(t -&gt; {\n 6        Observable&lt;Reviews&gt; reviews = reviewsServiceClient.getSellerReviews(t.getSellerId());\n 7        Observable&lt;String&gt; imageUrl = reviewsServiceClient.getProductImage(t.getProductId());\n\n 8        return Observable.zip(reviews, imageUrl, (r, u) -&gt; {\n 9          t.setReviews(r);\n10          t.setImageUrl(u);\n\n11          return t;\n12        });\n\n13      });\n14    }).subscribe(e -&gt; {\n15      allTiles.add((Tile) e);\n16    });\n</code></pre>\n\n<p>Line  1: goes out and fetches the product (Tile) to be displayed</p>\n\n<p>Line  4: We take the list of the Observable and SHARD it to fetch reviews and imageUrls</p>\n\n<p>Lie 6,7: Fetch the Observable review and Observable url</p>\n\n<p>Line  8: Finally the 2 observables are zipped up to return an updated Observable</p>\n\n<p>Line 15: finally line 15 collates all the individual products to be displayed in a collection which can be returned back to the calling layer</p>\n\n<p>While the Observable has been sharded and in our tests run over 4 different threads; fetching of reviews and images seems to be one after another. I suspect that the zip step on line 8 is basically causing the sequential invocation of the the 2 observables (reviews and url).</p>\n\n<p><img src=\"https://i.stack.imgur.com/YVERX.png\" alt=\"enter image description here\"></p>\n\n<p>Does this group have any suggestion to parallely fetch reiews and image urls. In essence the waterfall chart attached above should look more vertically stacked. The calls to reviews and images should be in parallel</p>\n\n<p>thanks\nanand raman</p>\n"},{"tags":["java","connection","urlconnection","connectexception"],"comments":[{"owner":{"account_id":28934,"reputation":7258,"user_id":77722,"accept_rate":90,"display_name":"Tobias"},"score":7,"creation_date":1354278853,"post_id":86824,"comment_id":18720721,"body_markdown":"Please mark one answer as accpeted if you have solved your problem :)","body":"Please mark one answer as accpeted if you have solved your problem :)"}],"answers":[{"tags":[],"owner":{"account_id":7963,"reputation":1485,"user_id":14047,"display_name":"larsivi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1221680737,"creation_date":1221680737,"answer_id":86876,"question_id":86824,"body_markdown":"There is a possibility that your IP/host are blocked by the remote host, especially if it thinks you are hitting it too hard.","title":"Why would a &quot;java.net.ConnectException: Connection timed out&quot; exception occur when URL is up?","body":"<p>There is a possibility that your IP/host are blocked by the remote host, especially if it thinks you are hitting it too hard.</p>\n"},{"tags":[],"owner":{"account_id":5743,"reputation":3437,"user_id":9416,"display_name":"Jumpy"},"down_vote_count":2,"up_vote_count":93,"is_accepted":false,"score":91,"last_activity_date":1671871203,"creation_date":1221680913,"answer_id":86908,"question_id":86824,"body_markdown":"Connection timeouts (assuming a local network and several client machines) typically result from\r\n\r\n  a) some kind of firewall on the way that simply eats the packets without telling the sender things like &quot;No Route to host&quot;\r\n  \r\n  b) packet loss due to wrong network configuration or line overload\r\n\r\n  c) too many requests overloading the server\r\n\r\n  d) a small number of simultaneously available threads/processes on the server which leads to all of them being taken. This happens especially with requests that take a long time to run and may combine with c).","title":"Why would a &quot;java.net.ConnectException: Connection timed out&quot; exception occur when URL is up?","body":"<p>Connection timeouts (assuming a local network and several client machines) typically result from</p>\n<p>a) some kind of firewall on the way that simply eats the packets without telling the sender things like &quot;No Route to host&quot;</p>\n<p>b) packet loss due to wrong network configuration or line overload</p>\n<p>c) too many requests overloading the server</p>\n<p>d) a small number of simultaneously available threads/processes on the server which leads to all of them being taken. This happens especially with requests that take a long time to run and may combine with c).</p>\n"},{"tags":[],"owner":{"account_id":9122,"reputation":9322,"user_id":16724,"display_name":"Alexander"},"down_vote_count":0,"up_vote_count":34,"is_accepted":false,"score":34,"last_activity_date":1221682323,"creation_date":1221682323,"answer_id":87118,"question_id":86824,"body_markdown":"If the URL works fine in the web browser on the same machine, it might be that the Java code isn&#39;t using the HTTP proxy the browser is using for connecting to the URL.","title":"Why would a &quot;java.net.ConnectException: Connection timed out&quot; exception occur when URL is up?","body":"<p>If the URL works fine in the web browser on the same machine, it might be that the Java code isn't using the HTTP proxy the browser is using for connecting to the URL.</p>\n"},{"tags":[],"owner":{"account_id":8732,"reputation":87908,"user_id":15880,"accept_rate":75,"display_name":"Powerlord"},"down_vote_count":6,"up_vote_count":11,"is_accepted":false,"score":5,"last_activity_date":1221683694,"creation_date":1221683694,"answer_id":87352,"question_id":86824,"body_markdown":"I&#39;d recommend raising the connection timeout time before getting the output stream, like so:\r\n\r\n    urlConnection.setConnectTimeout(1000);\r\n\r\nWhere 1000 is in milliseconds (1000 milliseconds = 1 second).","title":"Why would a &quot;java.net.ConnectException: Connection timed out&quot; exception occur when URL is up?","body":"<p>I'd recommend raising the connection timeout time before getting the output stream, like so:</p>\n\n<pre><code>urlConnection.setConnectTimeout(1000);\n</code></pre>\n\n<p>Where 1000 is in milliseconds (1000 milliseconds = 1 second).</p>\n"},{"tags":[],"owner":{"display_name":"shahbaz sikander"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1383656814,"creation_date":1227972030,"answer_id":327614,"question_id":86824,"body_markdown":"- try to do the Telnet to see any firewall issue\r\n- perform `tracert`/`traceroute` to find number of hops\r\n","title":"Why would a &quot;java.net.ConnectException: Connection timed out&quot; exception occur when URL is up?","body":"<ul>\n<li>try to do the Telnet to see any firewall issue</li>\n<li>perform <code>tracert</code>/<code>traceroute</code> to find number of hops</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":7567,"reputation":10188,"user_id":13189,"accept_rate":75,"display_name":"eckes"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1397620665,"creation_date":1397620665,"answer_id":23098703,"question_id":86824,"body_markdown":"This can be a IPv6 problem (the host publishes an IPv6 AAAA-Address and the users host thinks it is configured for IPv6 but it is actually not correctly connected). This can also be a network MTU problem, a firewall block, or the target host might publish different IP addresses (randomly or based on originators country) which are not all reachable. Or similliar network problems.\r\n\r\nYou cant do much besides setting a timeout and adding good error messages (especially printing out the hosts&#39; resolved address). If you want to make it more robust add retry, parallel trying of all addresses and also look into name resolution caching (positive and negative) on the Java platform.","title":"Why would a &quot;java.net.ConnectException: Connection timed out&quot; exception occur when URL is up?","body":"<p>This can be a IPv6 problem (the host publishes an IPv6 AAAA-Address and the users host thinks it is configured for IPv6 but it is actually not correctly connected). This can also be a network MTU problem, a firewall block, or the target host might publish different IP addresses (randomly or based on originators country) which are not all reachable. Or similliar network problems.</p>\n\n<p>You cant do much besides setting a timeout and adding good error messages (especially printing out the hosts' resolved address). If you want to make it more robust add retry, parallel trying of all addresses and also look into name resolution caching (positive and negative) on the Java platform.</p>\n"},{"tags":[],"owner":{"account_id":959042,"reputation":1491,"user_id":983803,"accept_rate":65,"display_name":"3xCh1_23"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1461090098,"creation_date":1461090098,"answer_id":36726470,"question_id":86824,"body_markdown":"The reason why this happened to me was that a remote server was allowing only certain IP addressed but not its own, and I was trying to render the images from the server&#39;s URLs... so everything would simply halt, displaying the timeout error that you had... \r\n\r\nMake sure that either the server is allowing its own IP, or that you are rendering things from some remote URL that actually exists.","title":"Why would a &quot;java.net.ConnectException: Connection timed out&quot; exception occur when URL is up?","body":"<p>The reason why this happened to me was that a remote server was allowing only certain IP addressed but not its own, and I was trying to render the images from the server's URLs... so everything would simply halt, displaying the timeout error that you had... </p>\n\n<p>Make sure that either the server is allowing its own IP, or that you are rendering things from some remote URL that actually exists.</p>\n"},{"tags":[],"owner":{"account_id":9611758,"reputation":1265,"user_id":7135893,"accept_rate":90,"display_name":"M Hamza Javed"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1494917536,"creation_date":1494917536,"answer_id":43994366,"question_id":86824,"body_markdown":"The error message says it all: your connection timed out. This means your request did not get a response within some (default) timeframe. The reasons that no response was received is likely to be one of:\r\n\r\na) The IP/domain or port is incorrect\r\n\r\nb) The IP/domain or port (i.e service) is down\r\n\r\nc) The IP/domain is taking longer than your default timeout to respond\r\n\r\nd) You have a firewall that is blocking requests or responses on whatever port you are using\r\n\r\ne) You have a firewall that is blocking requests to that particular host\r\n\r\nf) Your internet access is down\r\n\r\ng) Your live-server is down i.e in case of &quot;rest-API call&quot;.\r\n\r\nNote that firewalls and port or IP blocking may be in place by your ISP","title":"Why would a &quot;java.net.ConnectException: Connection timed out&quot; exception occur when URL is up?","body":"<p>The error message says it all: your connection timed out. This means your request did not get a response within some (default) timeframe. The reasons that no response was received is likely to be one of:</p>\n\n<p>a) The IP/domain or port is incorrect</p>\n\n<p>b) The IP/domain or port (i.e service) is down</p>\n\n<p>c) The IP/domain is taking longer than your default timeout to respond</p>\n\n<p>d) You have a firewall that is blocking requests or responses on whatever port you are using</p>\n\n<p>e) You have a firewall that is blocking requests to that particular host</p>\n\n<p>f) Your internet access is down</p>\n\n<p>g) Your live-server is down i.e in case of \"rest-API call\".</p>\n\n<p>Note that firewalls and port or IP blocking may be in place by your ISP</p>\n"},{"tags":[],"owner":{"account_id":10307070,"reputation":2201,"user_id":7604006,"accept_rate":60,"display_name":"NikNik"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1512137040,"creation_date":1512137040,"answer_id":47595100,"question_id":86824,"body_markdown":"I solved my problem with:\r\n\r\n    System.setProperty(&quot;https.proxyHost&quot;, &quot;myProxy&quot;);\r\n    System.setProperty(&quot;https.proxyPort&quot;, &quot;80&quot;);\r\n\r\nor `http.proxyHost`...","title":"Why would a &quot;java.net.ConnectException: Connection timed out&quot; exception occur when URL is up?","body":"<p>I solved my problem with:</p>\n\n<pre><code>System.setProperty(\"https.proxyHost\", \"myProxy\");\nSystem.setProperty(\"https.proxyPort\", \"80\");\n</code></pre>\n\n<p>or <code>http.proxyHost</code>...</p>\n"},{"tags":[],"owner":{"account_id":2674923,"reputation":9479,"user_id":2311528,"accept_rate":59,"display_name":"Lonzak"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1588082378,"creation_date":1588082378,"answer_id":61482047,"question_id":86824,"body_markdown":"&gt; Why would a “java.net.ConnectException: Connection timed out”\r\n&gt; exception occur when URL is up?\r\n\r\nBecause the URLConnection (HttpURLConnection/HttpsURLConnection) is erratic. You can read about this [here][1] and [here][2].\r\nOur solution were two things:\r\n\r\na) set the ContentLength via `setFixedLengthStreamingMode`\r\n\r\nb) catch any TimeoutException and retry if it failed.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/3877572\r\n  [2]: https://stackoverflow.com/questions/34704045","title":"Why would a &quot;java.net.ConnectException: Connection timed out&quot; exception occur when URL is up?","body":"<blockquote>\n  <p>Why would a “java.net.ConnectException: Connection timed out”\n  exception occur when URL is up?</p>\n</blockquote>\n\n<p>Because the URLConnection (HttpURLConnection/HttpsURLConnection) is erratic. You can read about this <a href=\"https://stackoverflow.com/questions/3877572\">here</a> and <a href=\"https://stackoverflow.com/questions/34704045\">here</a>.\nOur solution were two things:</p>\n\n<p>a) set the ContentLength via <code>setFixedLengthStreamingMode</code></p>\n\n<p>b) catch any TimeoutException and retry if it failed.</p>\n"}],"owner":{"account_id":9106,"reputation":931,"user_id":16677,"display_name":"Sarah Haskins"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":532011,"favorite_count":0,"down_vote_count":0,"up_vote_count":93,"answer_count":10,"score":93,"last_activity_date":1671871203,"creation_date":1221680457,"question_id":86824,"body_markdown":"I&#39;m getting a `ConnectException: Connection timed out` with some frequency from my code.  The URL I am trying to hit is up.  The same code works for some users, but not others.  It seems like once one user starts to get this exception they continue to get the exception.\r\n\r\nHere is the stack trace:\r\n\r\n    java.net.ConnectException: Connection timed out\r\n    Caused by: java.net.ConnectException: Connection timed out\r\n    \tat java.net.PlainSocketImpl.socketConnect(Native Method)\r\n    \tat java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)\r\n    \tat java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)\r\n    \tat java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)\r\n    \tat java.net.Socket.connect(Socket.java:516)\r\n    \tat java.net.Socket.connect(Socket.java:466)\r\n    \tat sun.net.NetworkClient.doConnect(NetworkClient.java:157)\r\n    \tat sun.net.www.http.HttpClient.openServer(HttpClient.java:365)\r\n    \tat sun.net.www.http.HttpClient.openServer(HttpClient.java:477)\r\n    \tat sun.net.www.http.HttpClient.&lt;init&gt;(HttpClient.java:214)\r\n    \tat sun.net.www.http.HttpClient.New(HttpClient.java:287)\r\n    \tat sun.net.www.http.HttpClient.New(HttpClient.java:299)\r\n    \tat sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:796)\r\n    \tat sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:748)\r\n    \tat sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:673)\r\n    \tat sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:840)\r\n\r\nHere is a snippet from my code:\r\n\r\n    URLConnection urlConnection = null;\r\n    OutputStream outputStream = null;\r\n    OutputStreamWriter outputStreamWriter = null;\r\n    InputStream inputStream = null;\r\n    \t\r\n    try {\r\n    \tURL url = new URL(urlBase);\r\n    \turlConnection = url.openConnection();\r\n    \turlConnection.setDoOutput(true);\r\n    \r\n    \toutputStream = urlConnection.getOutputStream(); // exception occurs on this line\r\n    \toutputStreamWriter = new OutputStreamWriter(outputStream);\r\n    \toutputStreamWriter.write(urlString);\r\n    \toutputStreamWriter.flush();\r\n    \tinputStream = urlConnection.getInputStream();\r\n    \tString response = IOUtils.toString(inputStream);\r\n        return processResponse(urlString, urlBase, response);\r\n    } catch (IOException e) {\r\n    \tthrow new Exception(&quot;Error querying url: &quot; + urlString, e);\r\n    } finally {\r\n    \tIoUtil.close(inputStream);\r\n    \tIoUtil.close(outputStreamWriter);\r\n    \tIoUtil.close(outputStream);\r\n    }","title":"Why would a &quot;java.net.ConnectException: Connection timed out&quot; exception occur when URL is up?","body":"<p>I'm getting a <code>ConnectException: Connection timed out</code> with some frequency from my code.  The URL I am trying to hit is up.  The same code works for some users, but not others.  It seems like once one user starts to get this exception they continue to get the exception.</p>\n\n<p>Here is the stack trace:</p>\n\n<pre><code>java.net.ConnectException: Connection timed out\nCaused by: java.net.ConnectException: Connection timed out\n    at java.net.PlainSocketImpl.socketConnect(Native Method)\n    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)\n    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)\n    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)\n    at java.net.Socket.connect(Socket.java:516)\n    at java.net.Socket.connect(Socket.java:466)\n    at sun.net.NetworkClient.doConnect(NetworkClient.java:157)\n    at sun.net.www.http.HttpClient.openServer(HttpClient.java:365)\n    at sun.net.www.http.HttpClient.openServer(HttpClient.java:477)\n    at sun.net.www.http.HttpClient.&lt;init&gt;(HttpClient.java:214)\n    at sun.net.www.http.HttpClient.New(HttpClient.java:287)\n    at sun.net.www.http.HttpClient.New(HttpClient.java:299)\n    at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:796)\n    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:748)\n    at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:673)\n    at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:840)\n</code></pre>\n\n<p>Here is a snippet from my code:</p>\n\n<pre><code>URLConnection urlConnection = null;\nOutputStream outputStream = null;\nOutputStreamWriter outputStreamWriter = null;\nInputStream inputStream = null;\n\ntry {\n    URL url = new URL(urlBase);\n    urlConnection = url.openConnection();\n    urlConnection.setDoOutput(true);\n\n    outputStream = urlConnection.getOutputStream(); // exception occurs on this line\n    outputStreamWriter = new OutputStreamWriter(outputStream);\n    outputStreamWriter.write(urlString);\n    outputStreamWriter.flush();\n    inputStream = urlConnection.getInputStream();\n    String response = IOUtils.toString(inputStream);\n    return processResponse(urlString, urlBase, response);\n} catch (IOException e) {\n    throw new Exception(\"Error querying url: \" + urlString, e);\n} finally {\n    IoUtil.close(inputStream);\n    IoUtil.close(outputStreamWriter);\n    IoUtil.close(outputStream);\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","junit","mockito"],"answers":[{"tags":[],"owner":{"account_id":9133548,"reputation":1663,"user_id":6794166,"display_name":"Shane Creedon"},"down_vote_count":0,"up_vote_count":125,"is_accepted":true,"score":125,"last_activity_date":1671871126,"creation_date":1585764375,"answer_id":60977479,"question_id":60977373,"body_markdown":"For **void** methods, I think you need to use the `doThrow` syntax.\r\n\r\nSo in your case it would be:\r\n\r\n```java\r\ndoThrow(BookingException.builder().build())\r\n      .when(booking)\r\n      .validate(any());\r\n```","title":"reason: no instance(s) of type variable(s) T exist so that void conforms to using mockito","body":"<p>For <strong>void</strong> methods, I think you need to use the <code>doThrow</code> syntax.</p>\n<p>So in your case it would be:</p>\n<pre class=\"lang-java prettyprint-override\"><code>doThrow(BookingException.builder().build())\n      .when(booking)\n      .validate(any());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22366326,"reputation":11,"user_id":16582031,"display_name":"user16582031"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1627959501,"creation_date":1627959501,"answer_id":68629864,"question_id":60977373,"body_markdown":"    /**\r\n     * Use &lt;code&gt;doThrow()&lt;/code&gt; when you want to stub the void method with an exception.\r\n     * &lt;p&gt;\r\n     * Stubbing voids requires different approach from {@link Mockito#when(Object)} because the compiler\r\n     * does not like void methods inside brackets...\r\n     * &lt;p&gt;\r\n     * Example:\r\n     *\r\n     * &lt;pre class=&quot;code&quot;&gt;&lt;code class=&quot;java&quot;&gt;\r\n     *   doThrow(new RuntimeException()).when(mock).someVoidMethod();\r\n     * &lt;/code&gt;&lt;/pre&gt;\r\n     *\r\n     * @param toBeThrown to be thrown when the stubbed method is called\r\n     * @return stubber - to select a method for stubbing\r\n     */\r\n    @CheckReturnValue\r\n    public static Stubber doThrow(Throwable... toBeThrown) {\r\n        return MOCKITO_CORE.stubber().doThrow(toBeThrown);\r\n    }","title":"reason: no instance(s) of type variable(s) T exist so that void conforms to using mockito","body":"<pre><code>/**\n * Use &lt;code&gt;doThrow()&lt;/code&gt; when you want to stub the void method with an exception.\n * &lt;p&gt;\n * Stubbing voids requires different approach from {@link Mockito#when(Object)} because the compiler\n * does not like void methods inside brackets...\n * &lt;p&gt;\n * Example:\n *\n * &lt;pre class=&quot;code&quot;&gt;&lt;code class=&quot;java&quot;&gt;\n *   doThrow(new RuntimeException()).when(mock).someVoidMethod();\n * &lt;/code&gt;&lt;/pre&gt;\n *\n * @param toBeThrown to be thrown when the stubbed method is called\n * @return stubber - to select a method for stubbing\n */\n@CheckReturnValue\npublic static Stubber doThrow(Throwable... toBeThrown) {\n    return MOCKITO_CORE.stubber().doThrow(toBeThrown);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2072373,"reputation":724,"user_id":1846528,"display_name":"M-sAnNan"},"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1628493335,"creation_date":1628493335,"answer_id":68708141,"question_id":60977373,"body_markdown":"I Figured out the right syntax.\r\n```\r\nService mockedService = new DefaultServie();\r\ndoNothing().when(mockedService).sendReportingLogs(null);\r\n```\r\nHope this answers the questions","title":"reason: no instance(s) of type variable(s) T exist so that void conforms to using mockito","body":"<p>I Figured out the right syntax.</p>\n<pre><code>Service mockedService = new DefaultServie();\ndoNothing().when(mockedService).sendReportingLogs(null);\n</code></pre>\n<p>Hope this answers the questions</p>\n"},{"tags":[],"owner":{"account_id":2012488,"reputation":581,"user_id":1800622,"display_name":"Gon&#231;alo"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1640091816,"creation_date":1640091816,"answer_id":70435927,"question_id":60977373,"body_markdown":"Just complementing @Shane &#39;s comment, which was a life saver but not very clear.\r\n\r\nExample on how to throw PersistenceException from a repository method:\r\n\r\n    doThrow(new PersistenceException())\r\n                .when(outboxRepository)\r\n                .delete(isA(WorkersEphemeralOutboxEntry.class));\r\n\r\nI find this especially helpful when you have overloaded methods and the compiler cannot figure out which one to call with any() and any(Class.class) gives you compiling error.","title":"reason: no instance(s) of type variable(s) T exist so that void conforms to using mockito","body":"<p>Just complementing @Shane 's comment, which was a life saver but not very clear.</p>\n<p>Example on how to throw PersistenceException from a repository method:</p>\n<pre><code>doThrow(new PersistenceException())\n            .when(outboxRepository)\n            .delete(isA(WorkersEphemeralOutboxEntry.class));\n</code></pre>\n<p>I find this especially helpful when you have overloaded methods and the compiler cannot figure out which one to call with any() and any(Class.class) gives you compiling error.</p>\n"}],"owner":{"account_id":16177233,"reputation":2569,"user_id":11679569,"display_name":"Sandro Rey"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87116,"favorite_count":0,"down_vote_count":0,"up_vote_count":75,"accepted_answer_id":60977479,"answer_count":4,"score":75,"last_activity_date":1671871126,"creation_date":1585764036,"question_id":60977373,"body_markdown":"I want to throw an Exception when running a void method\r\n\r\n    when(booking.validate(any())).thenThrow(BookingException.builder().build());\r\n\r\nbut I have a compilation error:\r\n\r\n    Required type: T\r\n    Provided: void\r\n    reason: no instance(s) of type variable(s) T exist so that void conforms to T","title":"reason: no instance(s) of type variable(s) T exist so that void conforms to using mockito","body":"<p>I want to throw an Exception when running a void method</p>\n\n<pre><code>when(booking.validate(any())).thenThrow(BookingException.builder().build());\n</code></pre>\n\n<p>but I have a compilation error:</p>\n\n<pre><code>Required type: T\nProvided: void\nreason: no instance(s) of type variable(s) T exist so that void conforms to T\n</code></pre>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1671868320,"post_id":74906272,"comment_id":132190087,"body_markdown":"Please revise your question&#39;s tags.  4 out of 5 are irrelevant ... or clearly misleading.  For example, you are not programming in `[typescript]`.  If you are unsure about whether a tag relates to your question, read the tag wiki.","body":"Please revise your question&#39;s tags.  4 out of 5 are irrelevant ... or clearly misleading.  For example, you are not programming in <code>[typescript]</code>.  If you are unsure about whether a tag relates to your question, read the tag wiki."},{"owner":{"account_id":242521,"reputation":3880,"user_id":514087,"accept_rate":100,"display_name":"Brian"},"score":0,"creation_date":1671868492,"post_id":74906272,"comment_id":132190109,"body_markdown":"@OleV.V. If you&#39;re going to fix the title, please *fix* it.  It doesn&#39;t need to be a god title; a diablo title might work.","body":"@OleV.V. If you&#39;re going to fix the title, please <i>fix</i> it.  It doesn&#39;t need to be a god title; a diablo title might work."},{"owner":{"account_id":242521,"reputation":3880,"user_id":514087,"accept_rate":100,"display_name":"Brian"},"score":1,"creation_date":1671868693,"post_id":74906272,"comment_id":132190141,"body_markdown":"@AmrDeveloper Please note that the T comes before the H in the word &quot;length&quot;","body":"@AmrDeveloper Please note that the T comes before the H in the word &quot;length&quot;"}],"answers":[{"tags":[],"owner":{"account_id":9748857,"reputation":4106,"user_id":7227834,"display_name":"AmrDeveloper"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1671868493,"creation_date":1671868493,"answer_id":74906298,"question_id":74906272,"body_markdown":"The problem is that you used the variable `i` from the last loop in the new loop\r\n\r\n```java\r\nfor(int y = 0; y &lt; edades.length; y++){\r\n    if(edades[i] &gt; mayor){\r\n        mayor = edades[i];\r\n    }\r\n    if(edades[i] &lt; menor){\r\n        menor = edades[i];\r\n    }\r\n}\r\n```\r\n\r\nIf `n` is equal to 10 for example so after the first loop that variable `i` will have the value 10 and exit the loop, in the next loop you try to access the slot with index n and this is out of index because array indexes are from 0 to n - 1, so the right code will be\r\n\r\n```java\r\nfor(int y = 0; y &lt; edades.length; y++){\r\n    if(edades[y] &gt; mayor){\r\n        mayor = edades[y];\r\n    }\r\n    if(edades[y] &lt; menor){\r\n        menor = edades[y];\r\n    }\r\n}\r\n```","title":"Out of bounds for length Exception","body":"<p>The problem is that you used the variable <code>i</code> from the last loop in the new loop</p>\n<pre class=\"lang-java prettyprint-override\"><code>for(int y = 0; y &lt; edades.length; y++){\n    if(edades[i] &gt; mayor){\n        mayor = edades[i];\n    }\n    if(edades[i] &lt; menor){\n        menor = edades[i];\n    }\n}\n</code></pre>\n<p>If <code>n</code> is equal to 10 for example so after the first loop that variable <code>i</code> will have the value 10 and exit the loop, in the next loop you try to access the slot with index n and this is out of index because array indexes are from 0 to n - 1, so the right code will be</p>\n<pre class=\"lang-java prettyprint-override\"><code>for(int y = 0; y &lt; edades.length; y++){\n    if(edades[y] &gt; mayor){\n        mayor = edades[y];\n    }\n    if(edades[y] &lt; menor){\n        menor = edades[y];\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24171417,"reputation":64,"user_id":18133441,"display_name":"Giovanni Georgo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671870793,"creation_date":1671870793,"answer_id":74906477,"question_id":74906272,"body_markdown":"The problem seems to be in this for loop \r\n\r\n     for(int y = 0; y &lt; edades.length; y++){\r\n                if(edades[i] &gt; mayor){\r\n                    mayor = edades[i];\r\n                }\r\n                if(edades[i] &lt; menor){\r\n                    menor = edades[i];\r\n                }\r\n            }\r\n\r\n**You are running a for loop with the variable y but using only variable i inside the loop**, as because of the previous loop the i variable is post incremented so after the loop ends (the condition is met) **the i variable is possibly equal to edades.length which is out of bounds** for edades as it&#39;s index starts from 0 to edades.length -1 , try changin the i with j in the above for loop.\r\n\r\nHopefully this solves your problem. :)\r\n","title":"Out of bounds for length Exception","body":"<p>The problem seems to be in this for loop</p>\n<pre><code> for(int y = 0; y &lt; edades.length; y++){\n            if(edades[i] &gt; mayor){\n                mayor = edades[i];\n            }\n            if(edades[i] &lt; menor){\n                menor = edades[i];\n            }\n        }\n</code></pre>\n<p><strong>You are running a for loop with the variable y but using only variable i inside the loop</strong>, as because of the previous loop the i variable is post incremented so after the loop ends (the condition is met) <strong>the i variable is possibly equal to edades.length which is out of bounds</strong> for edades as it's index starts from 0 to edades.length -1 , try changin the i with j in the above for loop.</p>\n<p>Hopefully this solves your problem. :)</p>\n"}],"owner":{"account_id":27341489,"reputation":1,"user_id":20852052,"display_name":"Leo_Di_Leva"},"comment_count":3,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"closed_date":1671868564,"answer_count":2,"score":-4,"last_activity_date":1671870793,"creation_date":1671868079,"question_id":74906272,"body_markdown":"```java\r\nimport java.util.Scanner;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        int i, mayor=0, menor=0;\r\n        Scanner sc = new Scanner(System.in);\r\n        Scanner teclado = new Scanner(System.in);\r\n\r\n        System.out.println(&quot;Ingresar la cantidad de edades que se van a ingresar&quot;);\r\n        int n = teclado.nextInt();\r\n        int edades[] = new int[n];\r\n\r\n        for (i = 0; i &lt; edades.length; i++){\r\n            System.out.println(&quot;Ingrese la primer edad en la posicion &quot; + (i+1) + &quot; del arreglo&quot;);\r\n            edades[i] = sc.nextInt();\r\n        }\r\n\r\n        for(int y = 0; y &lt; edades.length; y++){\r\n            if(edades[i] &gt; mayor){\r\n                mayor = edades[i];\r\n            }\r\n            if(edades[i] &lt; menor){\r\n                menor = edades[i];\r\n            }\r\n        }\r\n        System.out.println(&quot;El mayor valor ingresado es &quot;+mayor);\r\n        System.out.println(&quot;El menor valor ingresado es &quot;+menor);\r\n    }\r\n}\r\n```\r\n\r\nI think that I did everything right, But I get the error &quot; out of bounds for length&quot;.\r\n\r\nSorry for the Spanish, that&#39;s my primary language.","title":"Out of bounds for length Exception","body":"<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\n\npublic class Main {\n    public static void main(String[] args) {\n        int i, mayor=0, menor=0;\n        Scanner sc = new Scanner(System.in);\n        Scanner teclado = new Scanner(System.in);\n\n        System.out.println(&quot;Ingresar la cantidad de edades que se van a ingresar&quot;);\n        int n = teclado.nextInt();\n        int edades[] = new int[n];\n\n        for (i = 0; i &lt; edades.length; i++){\n            System.out.println(&quot;Ingrese la primer edad en la posicion &quot; + (i+1) + &quot; del arreglo&quot;);\n            edades[i] = sc.nextInt();\n        }\n\n        for(int y = 0; y &lt; edades.length; y++){\n            if(edades[i] &gt; mayor){\n                mayor = edades[i];\n            }\n            if(edades[i] &lt; menor){\n                menor = edades[i];\n            }\n        }\n        System.out.println(&quot;El mayor valor ingresado es &quot;+mayor);\n        System.out.println(&quot;El menor valor ingresado es &quot;+menor);\n    }\n}\n</code></pre>\n<p>I think that I did everything right, But I get the error &quot; out of bounds for length&quot;.</p>\n<p>Sorry for the Spanish, that's my primary language.</p>\n"},{"tags":["java","json","spring-boot"],"comments":[{"owner":{"account_id":7358121,"reputation":4925,"user_id":5602214,"display_name":"Prashant"},"score":0,"creation_date":1671870840,"post_id":74906394,"comment_id":132190383,"body_markdown":"https://stackoverflow.com/questions/51421295/show-null-attributes-json-response-spring-data-rest","body":"<a href=\"https://stackoverflow.com/questions/51421295/show-null-attributes-json-response-spring-data-rest\" title=\"show null attributes json response spring data rest\">stackoverflow.com/questions/51421295/&hellip;</a>"},{"owner":{"account_id":15361112,"reputation":51,"user_id":11081924,"display_name":"Adam Abdullah"},"score":0,"creation_date":1671871021,"post_id":74906394,"comment_id":132190410,"body_markdown":"it is in a class, whereas what I need is in the form of a jsonobject. I have tried it and still cant work","body":"it is in a class, whereas what I need is in the form of a jsonobject. I have tried it and still cant work"},{"owner":{"account_id":7908129,"reputation":98,"user_id":5972950,"display_name":"Java Samurai"},"score":0,"creation_date":1671875692,"post_id":74906394,"comment_id":132191037,"body_markdown":"Can you give sample code to reproduce this issue?","body":"Can you give sample code to reproduce this issue?"}],"owner":{"account_id":15361112,"reputation":51,"user_id":11081924,"display_name":"Adam Abdullah"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671869695,"creation_date":1671869695,"question_id":74906394,"body_markdown":"I have called a rest api from exsternal system using restTemplate. everything is work fine but when I get null in some of values (in example the footer value is null) it is always give jsonexception error\r\n\r\nresult api \r\n```\r\n{\r\n    &quot;status&quot;: &quot;success&quot;,\r\n    &quot;data&quot;: {\r\n        &quot;id&quot;: &quot;22&quot;,\r\n        &quot;organization_id&quot;: &quot;33&quot;,\r\n        &quot;name&quot;: &quot;name_isf&quot;,\r\n        &quot;language&quot;: &quot;id&quot;,\r\n        &quot;header&quot;: {\r\n            &quot;format&quot;: &quot;IMAGE&quot;,\r\n            &quot;example&quot;: &quot;#&lt;Hashie::Mash header_handle=#&lt;Hashie::Array [\\&quot;result_pic&quot;]&gt;&gt;&quot;\r\n        },\r\n        &quot;body&quot;: &quot;contenty for body&quot;,\r\n        &quot;footer&quot;: null,\r\n        &quot;buttons&quot;: [],\r\n        &quot;status&quot;: &quot;APPROVED&quot;,\r\n        &quot;category&quot;: &quot;PERSONAL_FINANCE_UPDATE&quot;\r\n    }\r\n}\r\n```\r\n\r\nevery call api exsternal i always catch with jsonobject like below\r\n\r\n```\r\nJSONObject res2 = qontakService.getDetailTemplate();\r\n```\r\n\r\nthen i will give that to the controller\r\n\r\n```\r\nJSONObject gabunganResult = new JSONObject();\r\ngabunganResult.put(&quot;template&quot;, objectMapper.writeValueAsString(getDetail.get()));\r\ngabunganResult.put(&quot;templateQontak&quot;, res2);\r\n```\r\n\r\nand the result error is \r\n\r\n```\r\ncom.fasterxml.jackson.databind.JsonMappingException: Object is null (through reference chain: java.util.HashMap[&quot;details&quot;]-&gt;net.sf.json.JSONObject[&quot;templateQontak&quot;]-&gt;net.sf.json.JSONObject[&quot;data&quot;]-&gt;net.sf.json.JSONObject[&quot;footer&quot;]-&gt;net.sf.json.JSONNull[&quot;empty&quot;])\r\n```\r\n\r\nhow do I solve this problem ? thank you","title":"Cannot show null object in jsonobject","body":"<p>I have called a rest api from exsternal system using restTemplate. everything is work fine but when I get null in some of values (in example the footer value is null) it is always give jsonexception error</p>\n<p>result api</p>\n<pre><code>{\n    &quot;status&quot;: &quot;success&quot;,\n    &quot;data&quot;: {\n        &quot;id&quot;: &quot;22&quot;,\n        &quot;organization_id&quot;: &quot;33&quot;,\n        &quot;name&quot;: &quot;name_isf&quot;,\n        &quot;language&quot;: &quot;id&quot;,\n        &quot;header&quot;: {\n            &quot;format&quot;: &quot;IMAGE&quot;,\n            &quot;example&quot;: &quot;#&lt;Hashie::Mash header_handle=#&lt;Hashie::Array [\\&quot;result_pic&quot;]&gt;&gt;&quot;\n        },\n        &quot;body&quot;: &quot;contenty for body&quot;,\n        &quot;footer&quot;: null,\n        &quot;buttons&quot;: [],\n        &quot;status&quot;: &quot;APPROVED&quot;,\n        &quot;category&quot;: &quot;PERSONAL_FINANCE_UPDATE&quot;\n    }\n}\n</code></pre>\n<p>every call api exsternal i always catch with jsonobject like below</p>\n<pre><code>JSONObject res2 = qontakService.getDetailTemplate();\n</code></pre>\n<p>then i will give that to the controller</p>\n<pre><code>JSONObject gabunganResult = new JSONObject();\ngabunganResult.put(&quot;template&quot;, objectMapper.writeValueAsString(getDetail.get()));\ngabunganResult.put(&quot;templateQontak&quot;, res2);\n</code></pre>\n<p>and the result error is</p>\n<pre><code>com.fasterxml.jackson.databind.JsonMappingException: Object is null (through reference chain: java.util.HashMap[&quot;details&quot;]-&gt;net.sf.json.JSONObject[&quot;templateQontak&quot;]-&gt;net.sf.json.JSONObject[&quot;data&quot;]-&gt;net.sf.json.JSONObject[&quot;footer&quot;]-&gt;net.sf.json.JSONNull[&quot;empty&quot;])\n</code></pre>\n<p>how do I solve this problem ? thank you</p>\n"},{"tags":["java","android","reactjs","react-native","gradle"],"owner":{"account_id":25612020,"reputation":47,"user_id":19385315,"display_name":"n00b"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":357,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1671869567,"creation_date":1671834517,"question_id":74904453,"body_markdown":"i have a problem when receiving application release\r\n`yarn android --variant release` i&#39;m running this command and gives me the following error;\r\n\r\n```\r\nyarn android --variant release\r\nyarn run v1.22.19\r\n$ react-native run-android --variant release\r\ninfo Starting JS server...\r\ninfo Launching emulator...\r\ninfo Successfully launched emulator.\r\ninfo Installing the app...\r\n5 actionable tasks: 5 up-to-date\r\n                                                                                                                                                                                                                                 \r\nFAILURE: Build failed with an exception.                                                                                                                                                                                         \r\n\r\n* Where:\r\nBuild file &#39;C:\\Users\\user_0\\Desktop\\AwesomeProject\\android\\app\\build.gradle&#39; line: 216\r\n\r\n* What went wrong:\r\nA problem occurred evaluating project &#39;:app&#39;.\r\n&gt; Could not find method splits() for arguments [build_9cj0nm0uy7u5p9mmnrxyr8ysi$_run_closure6@3c34a482] on project &#39;:app&#39; of type org.gradle.api.Project.\r\n\r\n* Try:\r\n&gt; Run with --stacktrace option to get the stack trace.\r\n&gt; Run with --info or --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nBU�LD FAILED in 3s\r\n\r\nerror Failed to install the app. Make sure you have the Android development environment set up: https://reactnative.dev/docs/environment-setup.\r\nError: Command failed: gradlew.bat app:installRelease -PreactNativeDevServerPort=8081\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* Where:\r\nBuild file &#39;C:\\Users\\user_0\\Desktop\\AwesomeProject\\android\\app\\build.gradle&#39; line: 216\r\n\r\n* What went wrong:\r\nA problem occurred evaluating project &#39;:app&#39;.\r\n&gt; Could not find method splits() for arguments [build_9cj0nm0uy7u5p9mmnrxyr8ysi$_run_closure6@3c34a482] on project &#39;:app&#39; of type org.gradle.api.Project.\r\n\r\n* Try:\r\n&gt; Run with --stacktrace option to get the stack trace.\r\n&gt; Run with --info or --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nBU�LD FAILED in 3s\r\n\r\n    at makeError (C:\\Users\\user_0\\Desktop\\AwesomeProject\\node_modules\\execa\\index.js:174:9)\r\n    at C:\\Users\\user_0\\Desktop\\AwesomeProject\\node_modules\\execa\\index.js:278:16\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n    at async runOnAllDevices (C:\\Users\\user_0\\Desktop\\AwesomeProject\\node_modules\\@react-native-community\\cli-platform-android\\build\\commands\\runAndroid\\runOnAllDevices.js:109:5)\r\n    at async Command.handleAction (C:\\Users\\user_0\\Desktop\\AwesomeProject\\node_modules\\@react-native-community\\cli\\build\\index.js:142:9)\r\ninfo Run CLI with --verbose flag for more details.\r\nerror Command failed with exit code 1.\r\ninfo Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.\r\n```\r\n[https://reactnative.dev/docs/signed-apk-android][1] i followed these steps exactly. i tried again 3-4 times but nothing changes. how can i fix this ?\r\n\r\n\r\n  [1]: https://reactnative.dev/docs/signed-apk-android\r\n\r\n","title":"React Native android release error A problem occurred evaluating project &#39;:app&#39;. &gt; Could not find method splits() for arguments error","body":"<p>i have a problem when receiving application release\n<code>yarn android --variant release</code> i'm running this command and gives me the following error;</p>\n<pre><code>yarn android --variant release\nyarn run v1.22.19\n$ react-native run-android --variant release\ninfo Starting JS server...\ninfo Launching emulator...\ninfo Successfully launched emulator.\ninfo Installing the app...\n5 actionable tasks: 5 up-to-date\n                                                                                                                                                                                                                                 \nFAILURE: Build failed with an exception.                                                                                                                                                                                         \n\n* Where:\nBuild file 'C:\\Users\\user_0\\Desktop\\AwesomeProject\\android\\app\\build.gradle' line: 216\n\n* What went wrong:\nA problem occurred evaluating project ':app'.\n&gt; Could not find method splits() for arguments [build_9cj0nm0uy7u5p9mmnrxyr8ysi$_run_closure6@3c34a482] on project ':app' of type org.gradle.api.Project.\n\n* Try:\n&gt; Run with --stacktrace option to get the stack trace.\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nBU�LD FAILED in 3s\n\nerror Failed to install the app. Make sure you have the Android development environment set up: https://reactnative.dev/docs/environment-setup.\nError: Command failed: gradlew.bat app:installRelease -PreactNativeDevServerPort=8081\n\nFAILURE: Build failed with an exception.\n\n* Where:\nBuild file 'C:\\Users\\user_0\\Desktop\\AwesomeProject\\android\\app\\build.gradle' line: 216\n\n* What went wrong:\nA problem occurred evaluating project ':app'.\n&gt; Could not find method splits() for arguments [build_9cj0nm0uy7u5p9mmnrxyr8ysi$_run_closure6@3c34a482] on project ':app' of type org.gradle.api.Project.\n\n* Try:\n&gt; Run with --stacktrace option to get the stack trace.\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nBU�LD FAILED in 3s\n\n    at makeError (C:\\Users\\user_0\\Desktop\\AwesomeProject\\node_modules\\execa\\index.js:174:9)\n    at C:\\Users\\user_0\\Desktop\\AwesomeProject\\node_modules\\execa\\index.js:278:16\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runOnAllDevices (C:\\Users\\user_0\\Desktop\\AwesomeProject\\node_modules\\@react-native-community\\cli-platform-android\\build\\commands\\runAndroid\\runOnAllDevices.js:109:5)\n    at async Command.handleAction (C:\\Users\\user_0\\Desktop\\AwesomeProject\\node_modules\\@react-native-community\\cli\\build\\index.js:142:9)\ninfo Run CLI with --verbose flag for more details.\nerror Command failed with exit code 1.\ninfo Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.\n</code></pre>\n<p><a href=\"https://reactnative.dev/docs/signed-apk-android\" rel=\"nofollow noreferrer\">https://reactnative.dev/docs/signed-apk-android</a> i followed these steps exactly. i tried again 3-4 times but nothing changes. how can i fix this ?</p>\n"},{"tags":["java","algorithm","data-structures","linked-list"],"comments":[{"owner":{"account_id":80529,"reputation":448248,"user_id":227665,"accept_rate":33,"display_name":"codaddict"},"score":59,"creation_date":1271610629,"post_id":2663115,"comment_id":2680708,"body_markdown":"Wow..I would love to work for this employer `finite amount of space and a reasonable amount of time?` :)","body":"Wow..I would love to work for this employer <code>finite amount of space and a reasonable amount of time?</code> :)"},{"owner":{"account_id":15988,"reputation":872868,"user_id":34397,"accept_rate":87,"display_name":"SLaks"},"score":0,"creation_date":1271610643,"post_id":2663115,"comment_id":2680710,"body_markdown":"If the list has a loop, there is no first node.","body":"If the list has a loop, there is no first node."},{"owner":{"account_id":28410,"reputation":22205,"user_id":75863,"accept_rate":76,"display_name":"jjujuma"},"score":0,"creation_date":1271610698,"post_id":2663115,"comment_id":2680714,"body_markdown":"Yes, sorry, I meant finite as in &quot;not related to the size of the list&quot;...  How should I put it....  I&#39;ll re-edit.","body":"Yes, sorry, I meant finite as in &quot;not related to the size of the list&quot;...  How should I put it....  I&#39;ll re-edit."},{"owner":{"account_id":28410,"reputation":22205,"user_id":75863,"accept_rate":76,"display_name":"jjujuma"},"score":11,"creation_date":1271610733,"post_id":2663115,"comment_id":2680718,"body_markdown":"@SLaks - the loop doesn&#39;t necessary loop back to the first node.  It can loop back to halfway.","body":"@SLaks - the loop doesn&#39;t necessary loop back to the first node.  It can loop back to halfway."},{"owner":{"account_id":123054,"reputation":5807,"user_id":2153550,"accept_rate":100,"display_name":"Oleg Razgulyaev"},"score":1,"creation_date":1271611035,"post_id":2663115,"comment_id":19997526,"body_markdown":"you should somehow mark nodes walked over if next node has the mark - you have found a loop","body":"you should somehow mark nodes walked over if next node has the mark - you have found a loop"},{"owner":{"account_id":115944,"reputation":3325,"user_id":304201,"accept_rate":69,"display_name":"Hun1Ahpu"},"score":0,"creation_date":1271611186,"post_id":2663115,"comment_id":19997518,"body_markdown":"[Turtle and Rabbit algorithm](http://eddii.wordpress.com/2006/11/15/detecting-infinite-loop/) will solve it.","body":"<a href=\"http://eddii.wordpress.com/2006/11/15/detecting-infinite-loop/\" rel=\"nofollow noreferrer\">Turtle and Rabbit algorithm</a> will solve it."},{"owner":{"account_id":793,"reputation":24042,"user_id":1035,"accept_rate":92,"display_name":"GaryF"},"score":130,"creation_date":1271611809,"post_id":2663115,"comment_id":2680802,"body_markdown":"The answers below are worth reading, but interview questions like this are terrible. You either know the answer (i.e. you&#39;ve seen a variant on Floyd&#39;s algorithm) or you don&#39;t, and it doesn&#39;t do anything to test your reasoning or design ability.","body":"The answers below are worth reading, but interview questions like this are terrible. You either know the answer (i.e. you&#39;ve seen a variant on Floyd&#39;s algorithm) or you don&#39;t, and it doesn&#39;t do anything to test your reasoning or design ability."},{"owner":{"account_id":103766,"reputation":4489,"user_id":277763,"display_name":"Larry"},"score":4,"creation_date":1271612249,"post_id":2663115,"comment_id":2680842,"body_markdown":"To be fair, most of &quot;knowing algorithms&quot; is like this -- unless you&#39;re doing research-level things!","body":"To be fair, most of &quot;knowing algorithms&quot; is like this -- unless you&#39;re doing research-level things!"},{"owner":{"account_id":8569,"reputation":12752,"user_id":15514,"accept_rate":95,"display_name":"Christoffer"},"score":0,"creation_date":1271612758,"post_id":2663115,"comment_id":19997527,"body_markdown":"Agree. If this was an actual interview question or homework assignment given to me, I&#39;d put a marker into the Node class and do a trivial implementation of hasLoop(). Only if I&#39;m explicitly not allowed to change the node implementation I&#39;d bother with the more advanced cycle-finding algorithms.","body":"Agree. If this was an actual interview question or homework assignment given to me, I&#39;d put a marker into the Node class and do a trivial implementation of hasLoop(). Only if I&#39;m explicitly not allowed to change the node implementation I&#39;d bother with the more advanced cycle-finding algorithms."},{"owner":{"account_id":793,"reputation":24042,"user_id":1035,"accept_rate":92,"display_name":"GaryF"},"score":2,"creation_date":1271620107,"post_id":2663115,"comment_id":2681464,"body_markdown":"@Larry - Yes, most interesting algorithms fall in to the &quot;you&#39;ll likely never figure it out, just learn as much as you can&quot; category so asking someone to figure one out in an interview seems like a bad idea. It tells you nothing about how they approach problems, and only confirms whether they have read about that particular algorithm before.","body":"@Larry - Yes, most interesting algorithms fall in to the &quot;you&#39;ll likely never figure it out, just learn as much as you can&quot; category so asking someone to figure one out in an interview seems like a bad idea. It tells you nothing about how they approach problems, and only confirms whether they have read about that particular algorithm before."},{"owner":{"account_id":62440,"reputation":23185,"user_id":185541,"display_name":"rsp"},"score":0,"creation_date":1271622310,"post_id":2663115,"comment_id":2681643,"body_markdown":"Do you know the length of the list? (Number of nodes)","body":"Do you know the length of the list? (Number of nodes)"},{"owner":{"account_id":112221,"reputation":24579,"user_id":296108,"accept_rate":92,"display_name":"Chris Knight"},"score":13,"creation_date":1271624648,"post_id":2663115,"comment_id":2681803,"body_markdown":"@GaryF And yet it would be revealing to know what they would do when they did not know the answer.  E.g. what steps would they take, who would they work with, what would they do to overcome a lack of algorithmec knowledge?","body":"@GaryF And yet it would be revealing to know what they would do when they did not know the answer.  E.g. what steps would they take, who would they work with, what would they do to overcome a lack of algorithmec knowledge?"},{"owner":{"account_id":71038,"reputation":24505,"user_id":205508,"accept_rate":100,"display_name":"Ofri Raviv"},"score":2,"creation_date":1271654256,"post_id":2663115,"comment_id":19997528,"body_markdown":"But then its not a constant amount of space. you&#39;re adding O(n) memory requirement.","body":"But then its not a constant amount of space. you&#39;re adding O(n) memory requirement."},{"owner":{"account_id":123054,"reputation":5807,"user_id":2153550,"accept_rate":100,"display_name":"Oleg Razgulyaev"},"score":1,"creation_date":1271789010,"post_id":2663115,"comment_id":19997529,"body_markdown":"i&#39;ll mark walked over node by destroing it&#39;s next value (assign for example to 0x1); if i&#39;ll found node with destoyed next value =&gt; there was a loop in this queue :)","body":"i&#39;ll mark walked over node by destroing it&#39;s next value (assign for example to 0x1); if i&#39;ll found node with destoyed next value =&gt; there was a loop in this queue :)"},{"owner":{"account_id":43557,"reputation":11883,"user_id":127404,"accept_rate":86,"display_name":"gameover"},"score":0,"creation_date":1272178253,"post_id":2663115,"comment_id":19997522,"body_markdown":"[Brent&#39;s Cycle Detection Algorithm](http://www.siafoo.net/algorithm/11 )","body":"[Brent&#39;s Cycle Detection Algorithm](<a href=\"http://www.siafoo.net/algorithm/11\" rel=\"nofollow noreferrer\">siafoo.net/algorithm/11</a> )"},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1279548108,"post_id":2663115,"comment_id":19997530,"body_markdown":"&quot;Destroying&quot; the next value is not correct, as it has to be an object of type Node (0x1 wont work) and it cannot be null (which stands for the end of the list).\nCreate one global, list-unrelated instance of Node and call it &#39;visited&#39;. Then traverse the list and for every visited Node, do \n&quot;this.next=visited;&quot;. If you ever encounter a node with next==visited (yes, &quot;==&quot;), you have a loop. And the &#39;added&#39; memory requirement is exactly 1 object.","body":"&quot;Destroying&quot; the next value is not correct, as it has to be an object of type Node (0x1 wont work) and it cannot be null (which stands for the end of the list). Create one global, list-unrelated instance of Node and call it &#39;visited&#39;. Then traverse the list and for every visited Node, do  &quot;this.next=visited;&quot;. If you ever encounter a node with next==visited (yes, &quot;==&quot;), you have a loop. And the &#39;added&#39; memory requirement is exactly 1 object."},{"owner":{"account_id":2241,"reputation":44197,"user_id":3093,"accept_rate":83,"display_name":"Dave L."},"score":0,"creation_date":1279729684,"post_id":2663115,"comment_id":19997531,"body_markdown":"But how would you initialize this marker each time the method is called?","body":"But how would you initialize this marker each time the method is called?"},{"owner":{"account_id":253236,"reputation":5300,"user_id":531802,"accept_rate":82,"display_name":"algo-geeks"},"score":0,"creation_date":1293438424,"post_id":2663115,"comment_id":4972115,"body_markdown":"can anybody please elaborate approach to find the node which has loop.\n eg: In above example node 3 is required node.","body":"can anybody please elaborate approach to find the node which has loop.  eg: In above example node 3 is required node."},{"owner":{"account_id":235018,"reputation":364834,"user_id":501557,"accept_rate":90,"display_name":"templatetypedef"},"score":0,"creation_date":1328036717,"post_id":2663115,"comment_id":11407863,"body_markdown":"possible duplicate of [How to determine if a linked list has a cycle using only two memory locations](http://stackoverflow.com/questions/494830/how-to-determine-if-a-linked-list-has-a-cycle-using-only-two-memory-locations)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/494830/how-to-determine-if-a-linked-list-has-a-cycle-using-only-two-memory-locations\">How to determine if a linked list has a cycle using only two memory locations</a>"},{"owner":{"account_id":2765276,"reputation":891,"user_id":2381154,"accept_rate":40,"display_name":"akash89"},"score":0,"creation_date":1408723889,"post_id":2663115,"comment_id":39712165,"body_markdown":"I was asked this question in MindTree interview.","body":"I was asked this question in MindTree interview."}],"answers":[{"tags":[],"owner":{"account_id":103766,"reputation":4489,"user_id":277763,"display_name":"Larry"},"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1426080689,"creation_date":1271610733,"answer_id":2663123,"question_id":2663115,"body_markdown":"[Tortoise and hare][1]\r\n\r\nTake a look at [Pollard&#39;s rho algorithm][2].  It&#39;s not quite the same problem, but maybe you&#39;ll understand the logic from it, and apply it for linked lists.\r\n\r\n(if you&#39;re lazy, you can just check out [cycle detection][3] -- check the part about the tortoise and hare.)\r\n\r\nThis only requires linear time, and 2 extra pointers.\r\n\r\nIn Java:\r\n\r\n    boolean hasLoop( Node first ) {\r\n        if ( first == null ) return false;\r\n\r\n        Node turtle = first;\r\n        Node hare = first;\r\n\r\n        while ( hare.next != null &amp;&amp; hare.next.next != null ) {\r\n             turtle = turtle.next;\r\n             hare = hare.next.next;\r\n\r\n             if ( turtle == hare ) return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n(Most of the solution do not check for both `next` and `next.next` for nulls.  Also, since the turtle is always behind, you don&#39;t have to check it for null -- the hare did that already.)\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Cycle_detection#Tortoise_and_hare\r\n  [2]: http://en.wikipedia.org/wiki/Pollard&#39;s_rho_algorithm\r\n  [3]: http://en.wikipedia.org/wiki/Cycle_detection","title":"How to detect a loop in a linked list?","body":"<p><a href=\"http://en.wikipedia.org/wiki/Cycle_detection#Tortoise_and_hare\" rel=\"noreferrer\">Tortoise and hare</a></p>\n\n<p>Take a look at <a href=\"http://en.wikipedia.org/wiki/Pollard&#39;s_rho_algorithm\" rel=\"noreferrer\">Pollard's rho algorithm</a>.  It's not quite the same problem, but maybe you'll understand the logic from it, and apply it for linked lists.</p>\n\n<p>(if you're lazy, you can just check out <a href=\"http://en.wikipedia.org/wiki/Cycle_detection\" rel=\"noreferrer\">cycle detection</a> -- check the part about the tortoise and hare.)</p>\n\n<p>This only requires linear time, and 2 extra pointers.</p>\n\n<p>In Java:</p>\n\n<pre><code>boolean hasLoop( Node first ) {\n    if ( first == null ) return false;\n\n    Node turtle = first;\n    Node hare = first;\n\n    while ( hare.next != null &amp;&amp; hare.next.next != null ) {\n         turtle = turtle.next;\n         hare = hare.next.next;\n\n         if ( turtle == hare ) return true;\n    }\n\n    return false;\n}\n</code></pre>\n\n<p>(Most of the solution do not check for both <code>next</code> and <code>next.next</code> for nulls.  Also, since the turtle is always behind, you don't have to check it for null -- the hare did that already.)</p>\n"},{"tags":[],"owner":{"account_id":91426,"reputation":13655,"user_id":251020,"display_name":"Sparky"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1271610873,"creation_date":1271610873,"answer_id":2663136,"question_id":2663115,"body_markdown":"The following may not be the best method--it is O(n^2).  However, it should serve to get the job done (eventually).\r\n\r\n    count_of_elements_so_far = 0;\r\n    for (each element in linked list)\r\n    {\r\n        search for current element in first &lt;count_of_elements_so_far&gt;\r\n        if found, then you have a loop\r\n        else,count_of_elements_so_far++;\r\n    }\r\n\r\n\r\n","title":"How to detect a loop in a linked list?","body":"<p>The following may not be the best method--it is O(n^2).  However, it should serve to get the job done (eventually).</p>\n\n<pre><code>count_of_elements_so_far = 0;\nfor (each element in linked list)\n{\n    search for current element in first &lt;count_of_elements_so_far&gt;\n    if found, then you have a loop\n    else,count_of_elements_so_far++;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":80529,"reputation":448248,"user_id":227665,"accept_rate":33,"display_name":"codaddict"},"down_vote_count":6,"up_vote_count":603,"is_accepted":true,"score":597,"last_activity_date":1582837993,"creation_date":1271611104,"answer_id":2663147,"question_id":2663115,"body_markdown":"You can make use of [**Floyd&#39;s cycle-finding algorithm**][1], also known as *tortoise and hare algorithm*.&lt;br&gt;&lt;br&gt;\r\n The idea is to have two references to the list and move them at **different speeds**. Move one forward by `1` node and the other by `2` nodes. \r\n\r\n - If the linked list has a loop they\r\n   will *definitely* meet.\r\n - Else either of\r\n   the two references(or their `next`)\r\n   will become `null`.\r\n\r\nJava function implementing the algorithm:\r\n\r\n    boolean hasLoop(Node first) {\r\n    \t\r\n    \tif(first == null) // list does not exist..so no loop either\r\n    \t\treturn false;\r\n    \r\n    \tNode slow, fast; // create two references.\r\n    \t\r\n    \tslow = fast = first; // make both refer to the start of the list\r\n    \t\r\n    \twhile(true) {\r\n\r\n    \t\tslow = slow.next;          // 1 hop\r\n\r\n    \t\tif(fast.next != null)\r\n                fast = fast.next.next; // 2 hops\r\n            else\r\n                return false;          // next node null =&gt; no loop\r\n    \r\n    \t\tif(slow == null || fast == null) // if either hits null..no loop\r\n    \t\t\treturn false;\r\n    \r\n    \t\tif(slow == fast) // if the two ever meet...we must have a loop\r\n    \t\t\treturn true;\r\n    \t}\r\n    }\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Cycle_detection#Tortoise_and_hare","title":"How to detect a loop in a linked list?","body":"<p>You can make use of <a href=\"http://en.wikipedia.org/wiki/Cycle_detection#Tortoise_and_hare\" rel=\"noreferrer\"><strong>Floyd's cycle-finding algorithm</strong></a>, also known as <em>tortoise and hare algorithm</em>.<br><br>\n The idea is to have two references to the list and move them at <strong>different speeds</strong>. Move one forward by <code>1</code> node and the other by <code>2</code> nodes. </p>\n\n<ul>\n<li>If the linked list has a loop they\nwill <em>definitely</em> meet.</li>\n<li>Else either of\nthe two references(or their <code>next</code>)\nwill become <code>null</code>.</li>\n</ul>\n\n<p>Java function implementing the algorithm:</p>\n\n<pre><code>boolean hasLoop(Node first) {\n\n    if(first == null) // list does not exist..so no loop either\n        return false;\n\n    Node slow, fast; // create two references.\n\n    slow = fast = first; // make both refer to the start of the list\n\n    while(true) {\n\n        slow = slow.next;          // 1 hop\n\n        if(fast.next != null)\n            fast = fast.next.next; // 2 hops\n        else\n            return false;          // next node null =&gt; no loop\n\n        if(slow == null || fast == null) // if either hits null..no loop\n            return false;\n\n        if(slow == fast) // if the two ever meet...we must have a loop\n            return true;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25591,"reputation":61024,"user_id":65868,"accept_rate":68,"display_name":"TofuBeer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1271611327,"creation_date":1271611327,"answer_id":2663155,"question_id":2663115,"body_markdown":"I cannot see any way of making this take a fixed amount of time or space, both will increase with the size of the list.\r\n\r\nI would make use of an IdentityHashMap&lt;Node, Node&gt; (given that there is not yet an IdentityHashSet) and store each Node into the map.  Before a node is stored you would call containsKey on it.  If the Node already exists you have a cycle.\r\n\r\nItentityHashMap uses == instead of .equals so that you are checking where the object is in memory rather than if it has the same contents.","title":"How to detect a loop in a linked list?","body":"<p>I cannot see any way of making this take a fixed amount of time or space, both will increase with the size of the list.</p>\n\n<p>I would make use of an IdentityHashMap (given that there is not yet an IdentityHashSet) and store each Node into the map.  Before a node is stored you would call containsKey on it.  If the Node already exists you have a cycle.</p>\n\n<p>ItentityHashMap uses == instead of .equals so that you are checking where the object is in memory rather than if it has the same contents.</p>\n"},{"tags":[],"owner":{"account_id":61566,"reputation":68924,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"down_vote_count":1,"up_vote_count":51,"is_accepted":false,"score":50,"last_activity_date":1271726700,"creation_date":1271726700,"answer_id":2671970,"question_id":2663115,"body_markdown":"An alternative solution to the Turtle and Rabbit, not quite as nice, as I temporarily change the list:\r\n\r\nThe idea is to walk the list, and reverse it as you go. Then, when you first reach a node that has already been visited, its next pointer will point &quot;backwards&quot;, causing the iteration to proceed towards `first` again, where it terminates.\r\n\r\n    Node prev = null;\r\n    Node cur = first;\r\n    while (cur != null) {\r\n        Node next = cur.next;\r\n        cur.next = prev;\r\n        prev = cur;\r\n        cur = next;\r\n    }\r\n    boolean hasCycle = prev == first &amp;&amp; first != null &amp;&amp; first.next != null;\r\n\r\n    // reconstruct the list\r\n    cur = prev;\r\n    prev = null;\r\n    while (cur != null) {\r\n        Node next = cur.next;\r\n        cur.next = prev;\r\n        prev = cur;\r\n        cur = next;\r\n    }\r\n\r\n    return hasCycle;\r\n\r\nTest code:\r\n\r\n\tstatic void assertSameOrder(Node[] nodes) {\r\n\t\tfor (int i = 0; i &lt; nodes.length - 1; i++) {\r\n\t\t\tassert nodes[i].next == nodes[i + 1];\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tNode[] nodes = new Node[100];\r\n\t\tfor (int i = 0; i &lt; nodes.length; i++) {\r\n\t\t\tnodes[i] = new Node();\r\n\t\t}\r\n\t\tfor (int i = 0; i &lt; nodes.length - 1; i++) {\r\n\t\t\tnodes[i].next = nodes[i + 1];\r\n\t\t}\r\n\t\tNode first = nodes[0];\r\n\t\tNode max = nodes[nodes.length - 1];\r\n\t\t\r\n\t\tmax.next = null;\r\n\t\tassert !hasCycle(first);\r\n\t\tassertSameOrder(nodes);\r\n\t\tmax.next = first;\r\n\t\tassert hasCycle(first);\r\n\t\tassertSameOrder(nodes);\r\n\t\tmax.next = max;\r\n\t\tassert hasCycle(first);\r\n\t\tassertSameOrder(nodes);\r\n\t\tmax.next = nodes[50];\r\n\t\tassert hasCycle(first);\r\n\t\tassertSameOrder(nodes);\r\n\t}\r\n","title":"How to detect a loop in a linked list?","body":"<p>An alternative solution to the Turtle and Rabbit, not quite as nice, as I temporarily change the list:</p>\n\n<p>The idea is to walk the list, and reverse it as you go. Then, when you first reach a node that has already been visited, its next pointer will point \"backwards\", causing the iteration to proceed towards <code>first</code> again, where it terminates.</p>\n\n<pre><code>Node prev = null;\nNode cur = first;\nwhile (cur != null) {\n    Node next = cur.next;\n    cur.next = prev;\n    prev = cur;\n    cur = next;\n}\nboolean hasCycle = prev == first &amp;&amp; first != null &amp;&amp; first.next != null;\n\n// reconstruct the list\ncur = prev;\nprev = null;\nwhile (cur != null) {\n    Node next = cur.next;\n    cur.next = prev;\n    prev = cur;\n    cur = next;\n}\n\nreturn hasCycle;\n</code></pre>\n\n<p>Test code:</p>\n\n<pre><code>static void assertSameOrder(Node[] nodes) {\n    for (int i = 0; i &lt; nodes.length - 1; i++) {\n        assert nodes[i].next == nodes[i + 1];\n    }\n}\n\npublic static void main(String[] args) {\n    Node[] nodes = new Node[100];\n    for (int i = 0; i &lt; nodes.length; i++) {\n        nodes[i] = new Node();\n    }\n    for (int i = 0; i &lt; nodes.length - 1; i++) {\n        nodes[i].next = nodes[i + 1];\n    }\n    Node first = nodes[0];\n    Node max = nodes[nodes.length - 1];\n\n    max.next = null;\n    assert !hasCycle(first);\n    assertSameOrder(nodes);\n    max.next = first;\n    assert hasCycle(first);\n    assertSameOrder(nodes);\n    max.next = max;\n    assert hasCycle(first);\n    assertSameOrder(nodes);\n    max.next = nodes[50];\n    assert hasCycle(first);\n    assertSameOrder(nodes);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":64747,"reputation":4330,"user_id":190986,"accept_rate":60,"display_name":"smessing"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1271832829,"creation_date":1271832829,"answer_id":2680862,"question_id":2663115,"body_markdown":"    public boolean hasLoop(Node start){   \r\n       TreeSet&lt;Node&gt; set = new TreeSet&lt;Node&gt;();\r\n       Node lookingAt = start;\r\n            \r\n       while (lookingAt.peek() != null){\r\n           lookingAt = lookingAt.next;\r\n            \r\n           if (set.contains(lookingAt){\r\n               return false;\r\n            } else {\r\n            set.put(lookingAt);\r\n            }\r\n             \r\n            return true;\r\n    }   \r\n    // Inside our Node class:        \r\n    public Node peek(){\r\n       return this.next;\r\n    }\r\n\r\nForgive me my ignorance (I&#39;m still fairly new to Java and programming), but why wouldn&#39;t the above work? \r\n\r\nI guess this doesn&#39;t solve the constant space issue... but it does at least get there in a reasonable time, correct? It will only take the space of the linked list plus the space of a set with n elements (where n is the number of elements in the linked list, or the number of elements until it reaches a loop). And for time, worst-case analysis, I think, would suggest O(nlog(n)). SortedSet look-ups for contains() are log(n) (check the javadoc, but I&#39;m pretty sure TreeSet&#39;s underlying structure is TreeMap, whose in turn is a red-black tree), and in the worst case (no loops, or loop at very end), it will have to do n look-ups.\r\n","title":"How to detect a loop in a linked list?","body":"<pre><code>public boolean hasLoop(Node start){   \n   TreeSet&lt;Node&gt; set = new TreeSet&lt;Node&gt;();\n   Node lookingAt = start;\n\n   while (lookingAt.peek() != null){\n       lookingAt = lookingAt.next;\n\n       if (set.contains(lookingAt){\n           return false;\n        } else {\n        set.put(lookingAt);\n        }\n\n        return true;\n}   \n// Inside our Node class:        \npublic Node peek(){\n   return this.next;\n}\n</code></pre>\n\n<p>Forgive me my ignorance (I'm still fairly new to Java and programming), but why wouldn't the above work? </p>\n\n<p>I guess this doesn't solve the constant space issue... but it does at least get there in a reasonable time, correct? It will only take the space of the linked list plus the space of a set with n elements (where n is the number of elements in the linked list, or the number of elements until it reaches a loop). And for time, worst-case analysis, I think, would suggest O(nlog(n)). SortedSet look-ups for contains() are log(n) (check the javadoc, but I'm pretty sure TreeSet's underlying structure is TreeMap, whose in turn is a red-black tree), and in the worst case (no loops, or loop at very end), it will have to do n look-ups.</p>\n"},{"tags":[],"owner":{"account_id":64747,"reputation":4330,"user_id":190986,"accept_rate":60,"display_name":"smessing"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1271861181,"creation_date":1271861181,"answer_id":2683962,"question_id":2663115,"body_markdown":"If we&#39;re allowed to embed the class `Node`, I would solve the problem as I&#39;ve implemented it below. `hasLoop()` runs in O(n) time, and takes only the space of `counter`. Does this seem like an appropriate solution? Or is there a way to do it without embedding `Node`? (Obviously, in a real implementation there would be more methods, like `RemoveNode(Node n)`, etc.)\r\n\r\n    public class LinkedNodeList {\r\n        Node first;\r\n        Int count;\r\n    \r\n        LinkedNodeList(){\r\n            first = null;\r\n            count = 0;\r\n        }\r\n    \r\n        LinkedNodeList(Node n){\r\n            if (n.next != null){\r\n                throw new error(&quot;must start with single node!&quot;);\r\n            } else {\r\n                first = n;\r\n                count = 1;\r\n            }\r\n        }\r\n     \r\n        public void addNode(Node n){\r\n            Node lookingAt = first;\r\n    \r\n            while(lookingAt.next != null){\r\n                lookingAt = lookingAt.next;\r\n            }\r\n    \r\n            lookingAt.next = n;\r\n            count++;\r\n        }\r\n    \r\n        public boolean hasLoop(){\r\n    \r\n            int counter = 0;\r\n            Node lookingAt = first;\r\n    \r\n            while(lookingAt.next != null){\r\n                counter++;\r\n                if (count &lt; counter){\r\n                    return false;\r\n                } else {\r\n                   lookingAt = lookingAt.next;\r\n                }\r\n            }\r\n    \r\n            return true;\r\n    \r\n        }\r\n    \r\n    \r\n    \r\n        private class Node{\r\n            Node next;\r\n            ....\r\n        }\r\n            \r\n    }","title":"How to detect a loop in a linked list?","body":"<p>If we're allowed to embed the class <code>Node</code>, I would solve the problem as I've implemented it below. <code>hasLoop()</code> runs in O(n) time, and takes only the space of <code>counter</code>. Does this seem like an appropriate solution? Or is there a way to do it without embedding <code>Node</code>? (Obviously, in a real implementation there would be more methods, like <code>RemoveNode(Node n)</code>, etc.)</p>\n\n<pre><code>public class LinkedNodeList {\n    Node first;\n    Int count;\n\n    LinkedNodeList(){\n        first = null;\n        count = 0;\n    }\n\n    LinkedNodeList(Node n){\n        if (n.next != null){\n            throw new error(\"must start with single node!\");\n        } else {\n            first = n;\n            count = 1;\n        }\n    }\n\n    public void addNode(Node n){\n        Node lookingAt = first;\n\n        while(lookingAt.next != null){\n            lookingAt = lookingAt.next;\n        }\n\n        lookingAt.next = n;\n        count++;\n    }\n\n    public boolean hasLoop(){\n\n        int counter = 0;\n        Node lookingAt = first;\n\n        while(lookingAt.next != null){\n            counter++;\n            if (count &lt; counter){\n                return false;\n            } else {\n               lookingAt = lookingAt.next;\n            }\n        }\n\n        return true;\n\n    }\n\n\n\n    private class Node{\n        Node next;\n        ....\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":108461,"reputation":379,"user_id":2257139,"display_name":"Carl M&#228;sak"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1277989352,"creation_date":1277989352,"answer_id":3158029,"question_id":2663115,"body_markdown":"The user [unicornaddict][1] has a nice algorithm above, but unfortunately it contains a bug for non-loopy lists of odd length &gt;= 3. The problem is that &lt;code&gt;fast&lt;/code&gt; can get &quot;stuck&quot; just before the end of the list, &lt;code&gt;slow&lt;/code&gt; catches up to it, and a loop is (wrongly) detected.\r\n\r\nHere&#39;s the corrected algorithm.\r\n\r\n    static boolean hasLoop(Node first) {\r\n\r\n        if(first == null) // list does not exist..so no loop either.\r\n            return false;\r\n\r\n        Node slow, fast; // create two references.\r\n\r\n        slow = fast = first; // make both refer to the start of the list.\r\n\r\n        while(true) {\r\n            slow = slow.next;          // 1 hop.\r\n            if(fast.next == null)\r\n                fast = null;\r\n            else\r\n                fast = fast.next.next; // 2 hops.\r\n\r\n            if(fast == null) // if fast hits null..no loop.\r\n                return false;\r\n\r\n            if(slow == fast) // if the two ever meet...we must have a loop.\r\n                return true;\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/227665/unicornaddict","title":"How to detect a loop in a linked list?","body":"<p>The user <a href=\"https://stackoverflow.com/users/227665/unicornaddict\">unicornaddict</a> has a nice algorithm above, but unfortunately it contains a bug for non-loopy lists of odd length >= 3. The problem is that <code>fast</code> can get \"stuck\" just before the end of the list, <code>slow</code> catches up to it, and a loop is (wrongly) detected.</p>\n\n<p>Here's the corrected algorithm.</p>\n\n<pre><code>static boolean hasLoop(Node first) {\n\n    if(first == null) // list does not exist..so no loop either.\n        return false;\n\n    Node slow, fast; // create two references.\n\n    slow = fast = first; // make both refer to the start of the list.\n\n    while(true) {\n        slow = slow.next;          // 1 hop.\n        if(fast.next == null)\n            fast = null;\n        else\n            fast = fast.next.next; // 2 hops.\n\n        if(fast == null) // if fast hits null..no loop.\n            return false;\n\n        if(slow == fast) // if the two ever meet...we must have a loop.\n            return true;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2241,"reputation":44197,"user_id":3093,"accept_rate":83,"display_name":"Dave L."},"down_vote_count":1,"up_vote_count":147,"is_accepted":false,"score":146,"last_activity_date":1279731334,"creation_date":1279731334,"answer_id":3301796,"question_id":2663115,"body_markdown":"Here&#39;s a refinement of the Fast/Slow solution, which correctly handles odd length lists and improves clarity.\r\n\r\n    boolean hasLoop(Node first) {\r\n    \tNode slow = first;\r\n        Node fast = first;\r\n    \t\r\n    \twhile(fast != null &amp;&amp; fast.next != null) {\r\n            slow = slow.next;          // 1 hop\r\n            fast = fast.next.next;     // 2 hops \r\n\r\n            if(slow == fast)  // fast caught up to slow, so there is a loop\r\n                return true;\r\n    \t}\r\n        return false;  // fast reached null, so the list terminates\r\n    }","title":"How to detect a loop in a linked list?","body":"<p>Here's a refinement of the Fast/Slow solution, which correctly handles odd length lists and improves clarity.</p>\n\n<pre><code>boolean hasLoop(Node first) {\n    Node slow = first;\n    Node fast = first;\n\n    while(fast != null &amp;&amp; fast.next != null) {\n        slow = slow.next;          // 1 hop\n        fast = fast.next.next;     // 2 hops \n\n        if(slow == fast)  // fast caught up to slow, so there is a loop\n            return true;\n    }\n    return false;  // fast reached null, so the list terminates\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":64359,"reputation":1496,"user_id":190041,"accept_rate":82,"display_name":"Abhinav"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1568202997,"creation_date":1279825235,"answer_id":3312392,"question_id":2663115,"body_markdown":"Detecting a loop in a linked list can be done in one of the simplest ways, which results in O(N) complexity using hashmap or O(NlogN) using a sort based approach.\r\n\r\nAs you traverse the list starting from head, create a sorted list of addresses. When you insert a new address, check if the address is already there in the sorted list, which takes O(logN) complexity.","title":"How to detect a loop in a linked list?","body":"<p>Detecting a loop in a linked list can be done in one of the simplest ways, which results in O(N) complexity using hashmap or O(NlogN) using a sort based approach.</p>\n\n<p>As you traverse the list starting from head, create a sorted list of addresses. When you insert a new address, check if the address is already there in the sorted list, which takes O(logN) complexity.</p>\n"},{"tags":[],"owner":{"account_id":1177895,"reputation":8382,"user_id":1153435,"accept_rate":78,"display_name":"Eduardo"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1350294708,"creation_date":1350294708,"answer_id":12893153,"question_id":2663115,"body_markdown":"You could even do it in constant O(1) time (although it would not be very fast or efficient): There is a limited amount of nodes your computer&#39;s memory can hold, say N records. If you traverse more than N records, then you have a loop.","title":"How to detect a loop in a linked list?","body":"<p>You could even do it in constant O(1) time (although it would not be very fast or efficient): There is a limited amount of nodes your computer's memory can hold, say N records. If you traverse more than N records, then you have a loop.</p>\n"},{"tags":[],"owner":{"account_id":1352815,"reputation":1094,"user_id":1291886,"accept_rate":40,"display_name":"edst"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1358312700,"creation_date":1358312700,"answer_id":14351706,"question_id":2663115,"body_markdown":"\tpublic boolean isCircular() {\r\n\r\n\t\tif (head == null)\r\n\t\t\treturn false;\r\n\r\n\t\tNode temp1 = head;\r\n\t\tNode temp2 = head;\r\n\r\n\t\ttry {\r\n\t\t\twhile (temp2.next != null) {\r\n\r\n\t\t\t\ttemp2 = temp2.next.next.next;\r\n\t\t\t\ttemp1 = temp1.next;\r\n\r\n\t\t\t\tif (temp1 == temp2 || temp1 == temp2.next) \r\n\t\t\t\t\treturn true;\t\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t} catch (NullPointerException ex) {\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}","title":"How to detect a loop in a linked list?","body":"<pre><code>public boolean isCircular() {\n\n    if (head == null)\n        return false;\n\n    Node temp1 = head;\n    Node temp2 = head;\n\n    try {\n        while (temp2.next != null) {\n\n            temp2 = temp2.next.next.next;\n            temp1 = temp1.next;\n\n            if (temp1 == temp2 || temp1 == temp2.next) \n                return true;    \n\n        }\n    } catch (NullPointerException ex) {\n        return false;\n\n    }\n\n    return false;\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1857741,"reputation":1493,"user_id":1682975,"accept_rate":100,"display_name":"Ashok Bijoy Debnath"},"down_vote_count":0,"up_vote_count":68,"is_accepted":false,"score":68,"last_activity_date":1636317324,"creation_date":1362003851,"answer_id":15123668,"question_id":2663115,"body_markdown":"***Better than Floyd&#39;s algorithm***\r\n\r\nRichard Brent described an [alternative cycle detection algorithm][1], which is pretty much like the hare and the tortoise [Floyd&#39;s cycle] except that, the slow node here doesn&#39;t move, but is later &quot;teleported&quot; to the position of the fast node at fixed intervals. \r\n\r\nThe description is available at [Brent&#39;s Cycle Detection Algorithm (The Teleporting Turtle)][2]. Brent claims that his algorithm is 24 to 36% faster than the Floyd&#39;s cycle algorithm. \r\nO(n) time complexity, O(1) space complexity.\r\n\r\n    public static boolean hasLoop(Node root) {\r\n\t\tif (root == null) return false;\r\n\t\t\r\n\t\tNode slow = root, fast = root;\r\n\t\tint taken = 0, limit = 2;\r\n\t\t\r\n\t\twhile (fast.next != null) {\r\n\t\t\tfast = fast.next;\r\n\t\t\ttaken++;\r\n\t\t\tif (slow == fast) return true;\r\n\t\t\t\r\n\t\t\tif (taken == limit) {\r\n\t\t\t\ttaken = 0;\r\n\t\t\t\tlimit &lt;&lt;= 1;\t// equivalent to limit *= 2;\r\n\t\t\t\tslow = fast;\t// teleporting the turtle (to the hare&#39;s position) \r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Cycle_detection#Brent.27s_algorithm\r\n  [2]: https://web.archive.org/web/20200704074331/http://www.siafoo.net/algorithm/11","title":"How to detect a loop in a linked list?","body":"<p><em><strong>Better than Floyd's algorithm</strong></em></p>\n<p>Richard Brent described an <a href=\"http://en.wikipedia.org/wiki/Cycle_detection#Brent.27s_algorithm\" rel=\"noreferrer\">alternative cycle detection algorithm</a>, which is pretty much like the hare and the tortoise [Floyd's cycle] except that, the slow node here doesn't move, but is later &quot;teleported&quot; to the position of the fast node at fixed intervals.</p>\n<p>The description is available at <a href=\"https://web.archive.org/web/20200704074331/http://www.siafoo.net/algorithm/11\" rel=\"noreferrer\">Brent's Cycle Detection Algorithm (The Teleporting Turtle)</a>. Brent claims that his algorithm is 24 to 36% faster than the Floyd's cycle algorithm.\nO(n) time complexity, O(1) space complexity.</p>\n<pre><code>public static boolean hasLoop(Node root) {\n    if (root == null) return false;\n    \n    Node slow = root, fast = root;\n    int taken = 0, limit = 2;\n    \n    while (fast.next != null) {\n        fast = fast.next;\n        taken++;\n        if (slow == fast) return true;\n        \n        if (taken == limit) {\n            taken = 0;\n            limit &lt;&lt;= 1;    // equivalent to limit *= 2;\n            slow = fast;    // teleporting the turtle (to the hare's position) \n        }\n    }\n    return false;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2439364,"reputation":5868,"user_id":2128327,"display_name":"Khaled.K"},"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1434570821,"creation_date":1364037244,"answer_id":15586079,"question_id":2663115,"body_markdown":"**Algorithm**\r\n\r\n\tpublic static boolean hasCycle (LinkedList&lt;Node&gt; list)\r\n\t{\r\n\t\tHashSet&lt;Node&gt; visited = new HashSet&lt;Node&gt;();\r\n\r\n\t\tfor (Node n : list)\r\n\t\t{\r\n\t\t\tvisited.add(n);\r\n\r\n\t\t\tif (visited.contains(n.next))\r\n\t\t\t{\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n**Complexity**\r\n\r\n    Time ~ O(n)\r\n    Space ~ O(n)","title":"How to detect a loop in a linked list?","body":"<p><strong>Algorithm</strong></p>\n\n<pre><code>public static boolean hasCycle (LinkedList&lt;Node&gt; list)\n{\n    HashSet&lt;Node&gt; visited = new HashSet&lt;Node&gt;();\n\n    for (Node n : list)\n    {\n        visited.add(n);\n\n        if (visited.contains(n.next))\n        {\n            return true;\n        }\n    }\n\n    return false;\n}\n</code></pre>\n\n<p><strong>Complexity</strong></p>\n\n<pre><code>Time ~ O(n)\nSpace ~ O(n)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3117201,"reputation":731,"user_id":2637717,"accept_rate":100,"display_name":"Adit Ya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1390552832,"creation_date":1390552832,"answer_id":21328022,"question_id":2663115,"body_markdown":"I might be terribly late and new to handle this thread. But still..\r\n\r\nWhy cant the address of the node and the &quot;next&quot; node pointed be stored in a table\r\n\r\nIf we could tabulate this way\r\n\r\n    node present: (present node addr) (next node address)\r\n\r\n    node 1: addr1: 0x100 addr2: 0x200 ( no present node address till this point had 0x200)\r\n    node 2: addr2: 0x200 addr3: 0x300 ( no present node address till this point had 0x300)\r\n    node 3: addr3: 0x300 addr4: 0x400 ( no present node address till this point had 0x400)\r\n    node 4: addr4: 0x400 addr5: 0x500 ( no present node address till this point had 0x500)\r\n    node 5: addr5: 0x500 addr6: 0x600 ( no present node address till this point had 0x600)\r\n    node 6: addr6: 0x600 addr4: 0x400 ( ONE present node address till this point had 0x400)\r\n\r\nHence there is a cycle formed.","title":"How to detect a loop in a linked list?","body":"<p>I might be terribly late and new to handle this thread. But still..</p>\n\n<p>Why cant the address of the node and the \"next\" node pointed be stored in a table</p>\n\n<p>If we could tabulate this way</p>\n\n<pre><code>node present: (present node addr) (next node address)\n\nnode 1: addr1: 0x100 addr2: 0x200 ( no present node address till this point had 0x200)\nnode 2: addr2: 0x200 addr3: 0x300 ( no present node address till this point had 0x300)\nnode 3: addr3: 0x300 addr4: 0x400 ( no present node address till this point had 0x400)\nnode 4: addr4: 0x400 addr5: 0x500 ( no present node address till this point had 0x500)\nnode 5: addr5: 0x500 addr6: 0x600 ( no present node address till this point had 0x600)\nnode 6: addr6: 0x600 addr4: 0x400 ( ONE present node address till this point had 0x400)\n</code></pre>\n\n<p>Hence there is a cycle formed.</p>\n"},{"tags":[],"owner":{"account_id":1923293,"reputation":10359,"user_id":1734279,"accept_rate":75,"display_name":"rai.skumar"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1455523080,"creation_date":1399640934,"answer_id":23565452,"question_id":2663115,"body_markdown":"This approach has space overhead, but a simpler implementation:\r\n\r\nLoop can be identified by storing nodes in a Map. And before putting the node; check if node already exists. If node already exists in the map then it means that Linked List has loop.\r\n\r\n    public boolean loopDetector(Node&lt;E&gt; first) {  \r\n           Node&lt;E&gt; t = first;  \r\n           Map&lt;Node&lt;E&gt;, Node&lt;E&gt;&gt; map = new IdentityHashMap&lt;Node&lt;E&gt;, Node&lt;E&gt;&gt;();  \r\n           while (t != null) {  \r\n                if (map.containsKey(t)) {  \r\n                     System.out.println(&quot; duplicate Node is --&quot; + t  \r\n                               + &quot; having value :&quot; + t.data);  \r\n   \r\n                     return true;  \r\n                } else {  \r\n                     map.put(t, t);  \r\n                }  \r\n                t = t.next;  \r\n           }  \r\n           return false;  \r\n      }  ","title":"How to detect a loop in a linked list?","body":"<p>This approach has space overhead, but a simpler implementation:</p>\n\n<p>Loop can be identified by storing nodes in a Map. And before putting the node; check if node already exists. If node already exists in the map then it means that Linked List has loop.</p>\n\n<pre><code>public boolean loopDetector(Node&lt;E&gt; first) {  \n       Node&lt;E&gt; t = first;  \n       Map&lt;Node&lt;E&gt;, Node&lt;E&gt;&gt; map = new IdentityHashMap&lt;Node&lt;E&gt;, Node&lt;E&gt;&gt;();  \n       while (t != null) {  \n            if (map.containsKey(t)) {  \n                 System.out.println(\" duplicate Node is --\" + t  \n                           + \" having value :\" + t.data);  \n\n                 return true;  \n            } else {  \n                 map.put(t, t);  \n            }  \n            t = t.next;  \n       }  \n       return false;  \n  }  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":2108760,"reputation":596,"user_id":1874449,"display_name":"Habib Karbasian"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1455084087,"creation_date":1455084087,"answer_id":35307959,"question_id":2663115,"body_markdown":"Here is my runnable code. \r\n\r\nWhat I have done is to reveres the linked list by using three temporary nodes (space complexity `O(1)`) that keep track of the links. \r\n\r\nThe interesting fact about doing it is to help detect the cycle in the linked list because as you go forward, you don&#39;t expect to go back to the starting point (root node) and one of the temporary nodes should go to null unless you have a cycle which means it points to the root node. \r\n\r\nThe time complexity of this algorithm is `O(n)` and space complexity is `O(1)`.\r\n\r\nHere is the class node for the linked list:\r\n\r\n    public class LinkedNode{\r\n        public LinkedNode next;\r\n    }\r\n\r\n\r\nHere is the main code with a simple test case of three nodes that the last node pointing to the second node:\r\n\r\n        public static boolean checkLoopInLinkedList(LinkedNode root){\r\n\r\n            if (root == null || root.next == null) return false;\r\n\r\n            LinkedNode current1 = root, current2 = root.next, current3 = root.next.next;\r\n            root.next = null;\r\n            current2.next = current1;\r\n\r\n            while(current3 != null){\r\n                if(current3 == root) return true;\r\n\r\n                current1 = current2;\r\n                current2 = current3;\r\n                current3 = current3.next;\r\n\r\n                current2.next = current1;\r\n            }\r\n            return false;\r\n        }\r\n\r\nHere is the a simple test case of three nodes that the last node pointing to the second node:\r\n\r\n    public class questions{\r\n        public static void main(String [] args){\r\n\r\n            LinkedNode n1 = new LinkedNode();\r\n            LinkedNode n2 = new LinkedNode();\r\n            LinkedNode n3 = new LinkedNode();\r\n            n1.next = n2;\r\n            n2.next = n3;\r\n            n3.next = n2;\r\n\r\n            System.out.print(checkLoopInLinkedList(n1));\r\n        }\r\n    }","title":"How to detect a loop in a linked list?","body":"<p>Here is my runnable code. </p>\n\n<p>What I have done is to reveres the linked list by using three temporary nodes (space complexity <code>O(1)</code>) that keep track of the links. </p>\n\n<p>The interesting fact about doing it is to help detect the cycle in the linked list because as you go forward, you don't expect to go back to the starting point (root node) and one of the temporary nodes should go to null unless you have a cycle which means it points to the root node. </p>\n\n<p>The time complexity of this algorithm is <code>O(n)</code> and space complexity is <code>O(1)</code>.</p>\n\n<p>Here is the class node for the linked list:</p>\n\n<pre><code>public class LinkedNode{\n    public LinkedNode next;\n}\n</code></pre>\n\n<p>Here is the main code with a simple test case of three nodes that the last node pointing to the second node:</p>\n\n<pre><code>    public static boolean checkLoopInLinkedList(LinkedNode root){\n\n        if (root == null || root.next == null) return false;\n\n        LinkedNode current1 = root, current2 = root.next, current3 = root.next.next;\n        root.next = null;\n        current2.next = current1;\n\n        while(current3 != null){\n            if(current3 == root) return true;\n\n            current1 = current2;\n            current2 = current3;\n            current3 = current3.next;\n\n            current2.next = current1;\n        }\n        return false;\n    }\n</code></pre>\n\n<p>Here is the a simple test case of three nodes that the last node pointing to the second node:</p>\n\n<pre><code>public class questions{\n    public static void main(String [] args){\n\n        LinkedNode n1 = new LinkedNode();\n        LinkedNode n2 = new LinkedNode();\n        LinkedNode n3 = new LinkedNode();\n        n1.next = n2;\n        n2.next = n3;\n        n3.next = n2;\n\n        System.out.print(checkLoopInLinkedList(n1));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1751860,"reputation":700,"user_id":1600759,"display_name":"Richa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1461928432,"creation_date":1461928432,"answer_id":36936879,"question_id":2663115,"body_markdown":"     // To detect whether a circular loop exists in a linked list\r\n\tpublic boolean findCircularLoop() {\r\n\t\tNode slower, faster;\r\n\t\tslower = head;\r\n\t\tfaster = head.next; // start faster one node ahead\r\n\t\twhile (true) {\r\n\r\n\t\t\t// if the faster pointer encounters a NULL element\r\n\t\t\tif (faster == null || faster.next == null)\r\n\t\t\t\treturn false;\r\n\t\t\t// if faster pointer ever equals slower or faster&#39;s next\r\n\t\t\t// pointer is ever equal to slower then it&#39;s a circular list\r\n\t\t\telse if (slower == faster || slower == faster.next)\r\n\t\t\t\treturn true;\r\n\t\t\telse {\r\n\t\t\t\t// advance the pointers\r\n\t\t\t\tslower = slower.next;\r\n\t\t\t\tfaster = faster.next.next;\r\n\t\t\t}\r\n\t\t}\r\n\t}","title":"How to detect a loop in a linked list?","body":"<pre><code> // To detect whether a circular loop exists in a linked list\npublic boolean findCircularLoop() {\n    Node slower, faster;\n    slower = head;\n    faster = head.next; // start faster one node ahead\n    while (true) {\n\n        // if the faster pointer encounters a NULL element\n        if (faster == null || faster.next == null)\n            return false;\n        // if faster pointer ever equals slower or faster's next\n        // pointer is ever equal to slower then it's a circular list\n        else if (slower == faster || slower == faster.next)\n            return true;\n        else {\n            // advance the pointers\n            slower = slower.next;\n            faster = faster.next.next;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7339446,"reputation":359,"user_id":5589613,"accept_rate":67,"display_name":"Sarthak Mehra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1467057825,"creation_date":1467057825,"answer_id":38062319,"question_id":2663115,"body_markdown":"This code is optimized and will produce result faster than with the one chosen as the best answer.This code saves from going into a very long process of chasing the forward and backward node pointer which will occur in the following case if we follow the &#39;best answer&#39; method.Look through the dry run of the following and you will realize what I am trying to say.Then look at the problem through the given method below and measure the no. of steps taken to find the answer.\r\n\r\n1-&gt;2-&gt;9-&gt;3\r\n^--------^ \r\n\r\nHere is the code:\r\n    \r\n    boolean loop(node *head)\r\n    {\r\n     node *back=head;\r\n     node *front=head;\r\n \r\n     while(front &amp;&amp; front-&gt;next)\r\n     {\r\n      front=front-&gt;next-&gt;next;\r\n      if(back==front)\r\n      return true;\r\n      else\r\n      back=back-&gt;next;\r\n     }\r\n    return false\r\n    }","title":"How to detect a loop in a linked list?","body":"<p>This code is optimized and will produce result faster than with the one chosen as the best answer.This code saves from going into a very long process of chasing the forward and backward node pointer which will occur in the following case if we follow the 'best answer' method.Look through the dry run of the following and you will realize what I am trying to say.Then look at the problem through the given method below and measure the no. of steps taken to find the answer.</p>\n\n<p>1->2->9->3\n^--------^ </p>\n\n<p>Here is the code:</p>\n\n<pre><code>boolean loop(node *head)\n{\n node *back=head;\n node *front=head;\n\n while(front &amp;&amp; front-&gt;next)\n {\n  front=front-&gt;next-&gt;next;\n  if(back==front)\n  return true;\n  else\n  back=back-&gt;next;\n }\nreturn false\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6008250,"reputation":1159,"user_id":4719434,"display_name":"Aditya Parmar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1504645755,"creation_date":1504645755,"answer_id":46063377,"question_id":2663115,"body_markdown":"    boolean hasCycle(Node head) {\r\n        \r\n        boolean dec = false;\r\n        Node first = head;\r\n        Node sec = head;\r\n        while(first != null &amp;&amp; sec != null)\r\n        {\r\n            first = first.next;\r\n            sec = sec.next.next;\r\n            if(first == sec )\r\n            {\r\n                dec = true;\r\n                break;\r\n            }\r\n            \r\n        }\r\n    \t    return dec;\r\n    }\r\n\r\nUse above function to detect a loop in linkedlist in java.\r\n","title":"How to detect a loop in a linked list?","body":"<pre><code>boolean hasCycle(Node head) {\n\n    boolean dec = false;\n    Node first = head;\n    Node sec = head;\n    while(first != null &amp;&amp; sec != null)\n    {\n        first = first.next;\n        sec = sec.next.next;\n        if(first == sec )\n        {\n            dec = true;\n            break;\n        }\n\n    }\n        return dec;\n}\n</code></pre>\n\n<p>Use above function to detect a loop in linkedlist in java.</p>\n"},{"tags":[],"owner":{"account_id":11285963,"reputation":100,"user_id":8276943,"display_name":"Irshad ck"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1506257423,"creation_date":1506257423,"answer_id":46390217,"question_id":2663115,"body_markdown":"Here is my solution in java\r\n\r\n    boolean detectLoop(Node head){\r\n        Node fastRunner = head;\r\n        Node slowRunner = head;\r\n        while(fastRunner != null &amp;&amp; slowRunner !=null &amp;&amp; fastRunner.next != null){\r\n            fastRunner = fastRunner.next.next;\r\n            slowRunner = slowRunner.next;\r\n            if(fastRunner == slowRunner){\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }","title":"How to detect a loop in a linked list?","body":"<p>Here is my solution in java</p>\n\n<pre><code>boolean detectLoop(Node head){\n    Node fastRunner = head;\n    Node slowRunner = head;\n    while(fastRunner != null &amp;&amp; slowRunner !=null &amp;&amp; fastRunner.next != null){\n        fastRunner = fastRunner.next.next;\n        slowRunner = slowRunner.next;\n        if(fastRunner == slowRunner){\n            return true;\n        }\n    }\n    return false;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8528011,"reputation":26,"user_id":6392829,"display_name":"xnorcode"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1525385353,"creation_date":1525385353,"answer_id":50164504,"question_id":2663115,"body_markdown":"You may use Floyd&#39;s tortoise algorithm as suggested in above answers as well.\r\n\r\nThis algorithm can check if a singly linked list has a closed cycle.\r\nThis can be achieved by iterating a list with two pointers that will move in different speed. In this way, if there is a cycle the two pointers will meet at some point in the future.\r\n\r\nPlease feel free to check out my [blog post][1] on the linked lists data structure, where I also included a code snippet with an implementation of the above-mentioned algorithm in java language.\r\n\r\nRegards,\r\n\r\nAndreas (@xnorcode)\r\n\r\n  [1]: https://blog.xnorcode.com/linked-list-data-structure/","title":"How to detect a loop in a linked list?","body":"<p>You may use Floyd's tortoise algorithm as suggested in above answers as well.</p>\n\n<p>This algorithm can check if a singly linked list has a closed cycle.\nThis can be achieved by iterating a list with two pointers that will move in different speed. In this way, if there is a cycle the two pointers will meet at some point in the future.</p>\n\n<p>Please feel free to check out my <a href=\"https://blog.xnorcode.com/linked-list-data-structure/\" rel=\"nofollow noreferrer\">blog post</a> on the linked lists data structure, where I also included a code snippet with an implementation of the above-mentioned algorithm in java language.</p>\n\n<p>Regards,</p>\n\n<p>Andreas (@xnorcode)</p>\n"},{"tags":[],"owner":{"account_id":6352296,"reputation":487,"user_id":4930920,"display_name":"vishwaraj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1530380816,"creation_date":1530380816,"answer_id":51117234,"question_id":2663115,"body_markdown":"Here is the solution for detecting the cycle.\r\n\r\n    public boolean hasCycle(ListNode head) {\r\n                ListNode slow =head;\r\n                ListNode fast =head;\r\n                \r\n                while(fast!=null &amp;&amp; fast.next!=null){\r\n                    slow = slow.next; // slow pointer only one hop\r\n                    fast = fast.next.next; // fast pointer two hops \r\n                    \r\n                    if(slow == fast)    return true; // retrun true if fast meet slow pointer\r\n                }\r\n                \r\n                return false; // return false if fast pointer stop at end \r\n            }","title":"How to detect a loop in a linked list?","body":"<p>Here is the solution for detecting the cycle.</p>\n\n<pre><code>public boolean hasCycle(ListNode head) {\n            ListNode slow =head;\n            ListNode fast =head;\n\n            while(fast!=null &amp;&amp; fast.next!=null){\n                slow = slow.next; // slow pointer only one hop\n                fast = fast.next.next; // fast pointer two hops \n\n                if(slow == fast)    return true; // retrun true if fast meet slow pointer\n            }\n\n            return false; // return false if fast pointer stop at end \n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6923017,"reputation":821,"user_id":5314958,"display_name":"Neil"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1551003235,"creation_date":1551003235,"answer_id":54850855,"question_id":2663115,"body_markdown":"In this context, there are loads to textual materials everywhere. I just wanted to post a diagrammatic representation that really helped me to grasp the concept.\r\n\r\nWhen fast and slow meet at point p, \r\n\r\nDistance travelled by fast = a+b+c+b = a+2b+c \r\n\r\nDistance travelled by slow = a+b\r\n\r\nSince the fast is 2 times faster than the slow. \r\nSo **a+2b+c = 2(a+b)**, then we get **a=c**.\r\n\r\nSo when another slow pointer runs again from **head to q**, at the same time, fast pointer will run from **p to q**, so they meet at the point **q** together.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rbtDK.png\r\n\r\n\r\n    public ListNode detectCycle(ListNode head) {\r\n        if(head == null || head.next==null)\r\n            return null;\r\n        \r\n        ListNode slow = head;\r\n        ListNode fast = head;\r\n        \r\n        while (fast!=null &amp;&amp; fast.next!=null){\r\n            fast = fast.next.next;\r\n            slow = slow.next;\r\n\r\n            /*\r\n            if the 2 pointers meet, then the \r\n            dist from the meeting pt to start of loop \r\n            equals\r\n            dist from head to start of loop\r\n            */\r\n            if (fast == slow){ //loop found\r\n                slow = head;\r\n                while(slow != fast){\r\n                    slow = slow.next;\r\n                    fast = fast.next;\r\n                }\r\n                return slow;\r\n            }            \r\n        }\r\n        return null;\r\n    }","title":"How to detect a loop in a linked list?","body":"<p>In this context, there are loads to textual materials everywhere. I just wanted to post a diagrammatic representation that really helped me to grasp the concept.</p>\n\n<p>When fast and slow meet at point p, </p>\n\n<p>Distance travelled by fast = a+b+c+b = a+2b+c </p>\n\n<p>Distance travelled by slow = a+b</p>\n\n<p>Since the fast is 2 times faster than the slow. \nSo <strong>a+2b+c = 2(a+b)</strong>, then we get <strong>a=c</strong>.</p>\n\n<p>So when another slow pointer runs again from <strong>head to q</strong>, at the same time, fast pointer will run from <strong>p to q</strong>, so they meet at the point <strong>q</strong> together.</p>\n\n<p><a href=\"https://i.stack.imgur.com/rbtDK.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/rbtDK.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>public ListNode detectCycle(ListNode head) {\n    if(head == null || head.next==null)\n        return null;\n\n    ListNode slow = head;\n    ListNode fast = head;\n\n    while (fast!=null &amp;&amp; fast.next!=null){\n        fast = fast.next.next;\n        slow = slow.next;\n\n        /*\n        if the 2 pointers meet, then the \n        dist from the meeting pt to start of loop \n        equals\n        dist from head to start of loop\n        */\n        if (fast == slow){ //loop found\n            slow = head;\n            while(slow != fast){\n                slow = slow.next;\n                fast = fast.next;\n            }\n            return slow;\n        }            \n    }\n    return null;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7040090,"reputation":431,"user_id":5392840,"display_name":"Sonu Mishra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551728006,"creation_date":1551728006,"answer_id":54990329,"question_id":2663115,"body_markdown":"// linked list find loop function\r\n\r\n    int findLoop(struct Node* head)\r\n    {\r\n        struct Node* slow = head, *fast = head;\r\n        while(slow &amp;&amp; fast &amp;&amp; fast-&gt;next)\r\n        {\r\n            slow = slow-&gt;next;\r\n            fast = fast-&gt;next-&gt;next;\r\n            if(slow == fast)\r\n                return 1;\r\n        }\r\n     return 0;\r\n    }","title":"How to detect a loop in a linked list?","body":"<p>// linked list find loop function</p>\n\n<pre><code>int findLoop(struct Node* head)\n{\n    struct Node* slow = head, *fast = head;\n    while(slow &amp;&amp; fast &amp;&amp; fast-&gt;next)\n    {\n        slow = slow-&gt;next;\n        fast = fast-&gt;next-&gt;next;\n        if(slow == fast)\n            return 1;\n    }\n return 0;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5584931,"reputation":2048,"user_id":4425643,"accept_rate":64,"display_name":"CausingUnderflowsEverywhere"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1627612682,"creation_date":1627612682,"answer_id":68584810,"question_id":2663115,"body_markdown":"If the linked list structure implements java.util.List. We can use the list size to keep track of our position in the list.   \r\n\r\nWe can traverse the nodes comparing our current position to the last node&#39;s position. If our current position surpasses the last position, we&#39;ve detected the list has a loop somewhere.\r\n\r\nThis solution takes a constant amount of space, but comes with a penalty of linearly increasing the amount of time to complete as list size increases. \r\n\r\n```java\r\n\r\nclass LinkedList implements List {\r\n    Node first;\r\n    int listSize;\r\n    \r\n    @Override\r\n    int size() {\r\n        return listSize;\r\n    }\r\n\r\n    [..]\r\n\r\n    boolean hasLoop() {\r\n        int lastPosition = size();\r\n        int currentPosition = 1;\r\n        Node next = first;\r\n        while(next != null) {\r\n           if (currentPosition &gt; lastPosition) return true;\r\n           next = next.next;\r\n           currentPosition++;\r\n        }\r\n        return false;\r\n    }\r\n}\r\n```\r\n\r\nOr as a utility:\r\n\r\n```java\r\nstatic boolean hasLoop(int size, Node first) {\r\n    int lastPosition = size;\r\n    int currentPosition = 1;\r\n    Node next = first;\r\n    while(next != null) {\r\n       if (currentPosition &gt; lastPosition) return true;\r\n       next = next.next;\r\n       currentPosition++;\r\n    }\r\n    return false;\r\n}\r\n```","title":"How to detect a loop in a linked list?","body":"<p>If the linked list structure implements java.util.List. We can use the list size to keep track of our position in the list.</p>\n<p>We can traverse the nodes comparing our current position to the last node's position. If our current position surpasses the last position, we've detected the list has a loop somewhere.</p>\n<p>This solution takes a constant amount of space, but comes with a penalty of linearly increasing the amount of time to complete as list size increases.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nclass LinkedList implements List {\n    Node first;\n    int listSize;\n    \n    @Override\n    int size() {\n        return listSize;\n    }\n\n    [..]\n\n    boolean hasLoop() {\n        int lastPosition = size();\n        int currentPosition = 1;\n        Node next = first;\n        while(next != null) {\n           if (currentPosition &gt; lastPosition) return true;\n           next = next.next;\n           currentPosition++;\n        }\n        return false;\n    }\n}\n</code></pre>\n<p>Or as a utility:</p>\n<pre class=\"lang-java prettyprint-override\"><code>static boolean hasLoop(int size, Node first) {\n    int lastPosition = size;\n    int currentPosition = 1;\n    Node next = first;\n    while(next != null) {\n       if (currentPosition &gt; lastPosition) return true;\n       next = next.next;\n       currentPosition++;\n    }\n    return false;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15642190,"reputation":160,"user_id":11285282,"display_name":"RowanStone"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642241977,"creation_date":1642241977,"answer_id":70720555,"question_id":2663115,"body_markdown":"I&#39;m not sure whether this answer is applicable to Java, however I still think it belongs here:\r\n\r\nWhenever we are working with pointers on modern architectures we can expect them to be [CPU word aligned][1]. And for a 64 bit architecture it means that first 3 bits in a pointer are always zero. Which lets us use this memory for marking pointers we have already seen by writing 1 to their first bits.\r\n\r\nAnd if we encounter a pointer with 1 already written to its first bit, then we&#39;ve successfully found a loop, after that we would need to traverse the structure again and mask those bits out. Done!\r\n\r\nThis approach is called [pointer tagging][2] and it is used excessively in low level programming, for example Haskell uses it for some [optimizations][3].\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Data_structure_alignment\r\n  [2]: https://en.wikipedia.org/wiki/Tagged_pointer\r\n  [3]: https://gitlab.haskell.org/ghc/ghc/-/wikis/commentary/rts/haskell-execution/pointer-tagging","title":"How to detect a loop in a linked list?","body":"<p>I'm not sure whether this answer is applicable to Java, however I still think it belongs here:</p>\n<p>Whenever we are working with pointers on modern architectures we can expect them to be <a href=\"https://en.wikipedia.org/wiki/Data_structure_alignment\" rel=\"nofollow noreferrer\">CPU word aligned</a>. And for a 64 bit architecture it means that first 3 bits in a pointer are always zero. Which lets us use this memory for marking pointers we have already seen by writing 1 to their first bits.</p>\n<p>And if we encounter a pointer with 1 already written to its first bit, then we've successfully found a loop, after that we would need to traverse the structure again and mask those bits out. Done!</p>\n<p>This approach is called <a href=\"https://en.wikipedia.org/wiki/Tagged_pointer\" rel=\"nofollow noreferrer\">pointer tagging</a> and it is used excessively in low level programming, for example Haskell uses it for some <a href=\"https://gitlab.haskell.org/ghc/ghc/-/wikis/commentary/rts/haskell-execution/pointer-tagging\" rel=\"nofollow noreferrer\">optimizations</a>.</p>\n"},{"tags":[],"owner":{"account_id":10677093,"reputation":1695,"user_id":7860211,"display_name":"Bandish Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659959143,"creation_date":1659959143,"answer_id":73277372,"question_id":2663115,"body_markdown":"    func checkLoop(_ head: LinkedList) -&gt; Bool {\r\n        var curr = head\r\n        var prev = head\r\n        \r\n        while curr.next != nil, curr.next!.next != nil {\r\n            curr = (curr.next?.next)!\r\n            prev = prev.next!\r\n            \r\n            if curr === prev {\r\n                return true\r\n            }\r\n        }\r\n        \r\n        return false\r\n    }","title":"How to detect a loop in a linked list?","body":"<pre><code>func checkLoop(_ head: LinkedList) -&gt; Bool {\n    var curr = head\n    var prev = head\n    \n    while curr.next != nil, curr.next!.next != nil {\n        curr = (curr.next?.next)!\n        prev = prev.next!\n        \n        if curr === prev {\n            return true\n        }\n    }\n    \n    return false\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7322921,"reputation":1043,"user_id":6602141,"accept_rate":0,"display_name":"Ankit kaushik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671869138,"creation_date":1671869138,"answer_id":74906350,"question_id":2663115,"body_markdown":"I read through some answers and people have missed one obvious solution to the above problem. \r\n\r\nIf given we can change the structure of the class Node then we can add a boolean flag to know if it has been visited or not. This way we only traverse list once. \r\n\r\n\r\n    Class Node{\r\n    \r\n     Data data;\r\n     Node next;\r\n     boolean isVisited;\r\n    \r\n    }\r\n\r\n\r\n    public boolean hasLoop(Node head){\r\n       \r\n         if(head == null) return false;\r\n\r\n         Node current = head;\r\n\r\n\r\n         while(current != null){\r\n          if(current.isVisited) return true;\r\n          current.isVisited = true;\r\n          current = current.next;\r\n         }\r\n\r\n        return false;\r\n\r\n    }\r\n\r\n","title":"How to detect a loop in a linked list?","body":"<p>I read through some answers and people have missed one obvious solution to the above problem.</p>\n<p>If given we can change the structure of the class Node then we can add a boolean flag to know if it has been visited or not. This way we only traverse list once.</p>\n<pre><code>Class Node{\n\n Data data;\n Node next;\n boolean isVisited;\n\n}\n\n\npublic boolean hasLoop(Node head){\n   \n     if(head == null) return false;\n\n     Node current = head;\n\n\n     while(current != null){\n      if(current.isVisited) return true;\n      current.isVisited = true;\n      current = current.next;\n     }\n\n    return false;\n\n}\n</code></pre>\n"}],"owner":{"account_id":28410,"reputation":22205,"user_id":75863,"accept_rate":76,"display_name":"jjujuma"},"comment_count":20,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":214859,"favorite_count":0,"down_vote_count":2,"up_vote_count":474,"accepted_answer_id":2663147,"answer_count":29,"score":472,"last_activity_date":1671869138,"creation_date":1271610533,"question_id":2663115,"body_markdown":"Say you have a linked list structure in Java.  It&#39;s made up of Nodes:\r\n\r\n    class Node {\r\n        Node next;\r\n        // some user data\r\n    }\r\n\r\nand each Node points to the next node, except for the last Node, which has null for next.  Say there is a possibility that the list can contain a loop - i.e. the final Node, instead of having a null, has a reference to one of the nodes in the list which came before it.\r\n\r\nWhat&#39;s the best way of writing\r\n\r\n    boolean hasLoop(Node first)\r\n\r\nwhich would return `true` if the given Node is the first of a list with a loop, and `false` otherwise?  How could you write so that it takes a constant amount of space and a reasonable amount of time?\r\n\r\nHere&#39;s a picture of what a list with a loop looks like:\r\n\r\n\r\n![alt text][1]\r\n\r\n  [1]: http://i.stack.imgur.com/irw1S.jpg\r\n","title":"How to detect a loop in a linked list?","body":"<p>Say you have a linked list structure in Java.  It's made up of Nodes:</p>\n\n<pre><code>class Node {\n    Node next;\n    // some user data\n}\n</code></pre>\n\n<p>and each Node points to the next node, except for the last Node, which has null for next.  Say there is a possibility that the list can contain a loop - i.e. the final Node, instead of having a null, has a reference to one of the nodes in the list which came before it.</p>\n\n<p>What's the best way of writing</p>\n\n<pre><code>boolean hasLoop(Node first)\n</code></pre>\n\n<p>which would return <code>true</code> if the given Node is the first of a list with a loop, and <code>false</code> otherwise?  How could you write so that it takes a constant amount of space and a reasonable amount of time?</p>\n\n<p>Here's a picture of what a list with a loop looks like:</p>\n\n<p><img src=\"https://i.stack.imgur.com/irw1S.jpg\" alt=\"alt text\"></p>\n"},{"tags":["java","unit-testing","testing","junit","mockito"],"answers":[{"tags":[],"owner":{"account_id":4012793,"reputation":1627,"user_id":3305737,"display_name":"Jonasz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671868230,"creation_date":1670738878,"answer_id":74758725,"question_id":74757587,"body_markdown":"JUnit method `assertEquals` simply uses `equals` method of your class to compare the objects - you have to implement the method properly for the assertion to work correctly. You can read more about implementing `equals` in multiple online sources, for example [here][1]. \r\n\r\nIf you don&#39;t want to implement `equals` in the verified class, you can also use `assertEquals` to compare object fields you&#39;re interested in, like so:\r\n```java\r\nassertEquals(7, actual.getSomeValue());\r\nassertEquals(&quot;abcd&quot;, actual.getOtherValue());\r\n```\r\n\r\nIf you added the AssertJ library, you could use it&#39;s `usingRecursiveComparison` method - for details refer to [the documentation][2]. \r\n\r\n\r\n  [1]: https://www.baeldung.com/java-equals-hashcode-contracts\r\n  [2]: https://assertj.github.io/doc/#assertj-core-recursive-comparison","title":"How to assert returning object in Java Springbok Unit","body":"<p>JUnit method <code>assertEquals</code> simply uses <code>equals</code> method of your class to compare the objects - you have to implement the method properly for the assertion to work correctly. You can read more about implementing <code>equals</code> in multiple online sources, for example <a href=\"https://www.baeldung.com/java-equals-hashcode-contracts\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>If you don't want to implement <code>equals</code> in the verified class, you can also use <code>assertEquals</code> to compare object fields you're interested in, like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>assertEquals(7, actual.getSomeValue());\nassertEquals(&quot;abcd&quot;, actual.getOtherValue());\n</code></pre>\n<p>If you added the AssertJ library, you could use it's <code>usingRecursiveComparison</code> method - for details refer to <a href=\"https://assertj.github.io/doc/#assertj-core-recursive-comparison\" rel=\"nofollow noreferrer\">the documentation</a>.</p>\n"}],"owner":{"account_id":20518780,"reputation":9,"user_id":15058854,"display_name":"K3YUR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":151,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74758725,"answer_count":1,"score":0,"last_activity_date":1671868230,"creation_date":1670718945,"question_id":74757587,"body_markdown":"I want to assert the object which is returned from the method that I am testing in Junit using Assertions.AssertEquals but its giving test case failure even though two objects are same.\r\n\r\n`Expected :Customer{Id=1, Name=&#39;ABC&#39;, Price=350, Type=&#39;ABC&#39;}\r\nActual   :Customer{Id=1, Name=&#39;ABC&#39;, Price=350, Type=&#39;ABC&#39;}`\r\n\r\nThis is the unit test case \r\n\r\n```\r\n@Test\r\npublic void getCustomerById_Test(){\r\n    Dishes test1 = repo.getById(1);\r\n    assertEquals(ExpectedObject,ActualObject);\r\n}\r\n```","title":"How to assert returning object in Java Springbok Unit","body":"<p>I want to assert the object which is returned from the method that I am testing in Junit using Assertions.AssertEquals but its giving test case failure even though two objects are same.</p>\n<p><code>Expected :Customer{Id=1, Name='ABC', Price=350, Type='ABC'} Actual   :Customer{Id=1, Name='ABC', Price=350, Type='ABC'}</code></p>\n<p>This is the unit test case</p>\n<pre><code>@Test\npublic void getCustomerById_Test(){\n    Dishes test1 = repo.getById(1);\n    assertEquals(ExpectedObject,ActualObject);\n}\n</code></pre>\n"},{"tags":["java","spring-boot","unit-testing","junit"],"answers":[{"tags":[],"owner":{"account_id":3891998,"reputation":1,"user_id":3221920,"display_name":"Vamsi"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1610537034,"creation_date":1610537034,"answer_id":65700975,"question_id":65700863,"body_markdown":"We can load the component lazily, i.e. by using @Lazy annotation on top of @Component\r\n\r\nPlease refer this link for more information:  https://www.baeldung.com/spring-lazy-annotation","title":"Avoid unnecessary @Component construction during spring unit test","body":"<p>We can load the component lazily, i.e. by using @Lazy annotation on top of @Component</p>\n<p>Please refer this link for more information:  <a href=\"https://www.baeldung.com/spring-lazy-annotation\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-lazy-annotation</a></p>\n"},{"tags":[],"owner":{"account_id":212417,"reputation":43624,"user_id":465223,"accept_rate":75,"display_name":"dunni"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1610537059,"creation_date":1610537059,"answer_id":65700987,"question_id":65700863,"body_markdown":"One thing to understand is, as soon as you use `@SpringBootTest`, it&#39;s not a unit test anymore. The point of using that annotation is, that your application context starts as similar as possible to the production use.\r\n\r\nYou could define a separate configuration class for this test case specifically, where you only create a bean of the class UnderTesting, like this:\r\n\r\n    @SpringBootTest(classes = {TestConfiguration.class})\r\nwhere in TestConfiguration.class you could create a bean factory method like this:\r\n\r\n    public UnderTesting underTesting() {\r\n        return new UnderTesting();\r\n    }\r\n\r\nbut i would rather look if you can write this test as a real unit test (if that&#39;s what you want), without using any Spring Boot functionality, and mock any dependencies.","title":"Avoid unnecessary @Component construction during spring unit test","body":"<p>One thing to understand is, as soon as you use <code>@SpringBootTest</code>, it's not a unit test anymore. The point of using that annotation is, that your application context starts as similar as possible to the production use.</p>\n<p>You could define a separate configuration class for this test case specifically, where you only create a bean of the class UnderTesting, like this:</p>\n<pre><code>@SpringBootTest(classes = {TestConfiguration.class})\n</code></pre>\n<p>where in TestConfiguration.class you could create a bean factory method like this:</p>\n<pre><code>public UnderTesting underTesting() {\n    return new UnderTesting();\n}\n</code></pre>\n<p>but i would rather look if you can write this test as a real unit test (if that's what you want), without using any Spring Boot functionality, and mock any dependencies.</p>\n"},{"tags":[],"owner":{"account_id":2134019,"reputation":808,"user_id":1894211,"display_name":"burm87"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1610537075,"creation_date":1610537075,"answer_id":65700992,"question_id":65700863,"body_markdown":"How about creating a `test` profile to use when you run your tests and annotate your `Irrelevant` class with `@Profile(&quot;!test&quot;)`?","title":"Avoid unnecessary @Component construction during spring unit test","body":"<p>How about creating a <code>test</code> profile to use when you run your tests and annotate your <code>Irrelevant</code> class with <code>@Profile(&quot;!test&quot;)</code>?</p>\n"},{"tags":[],"owner":{"account_id":6841340,"reputation":236,"user_id":10578260,"display_name":"Guilherme Silva Sousa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671866272,"creation_date":1671866272,"answer_id":74906152,"question_id":65700863,"body_markdown":"### The simplest way using mockito:\r\n```java\r\n@SpringBootTest\r\npublic Test_UnderTesting {\r\n\r\n    @MockBean\r\n    private Irrelevant irrelevant; //Autowiring the unnecessary component as a mock\r\n\r\n    @Autowired\r\n    private UnderTesting foo;\r\n\r\n    @Test\r\n    public void testSomething() {\r\n    }\r\n}\r\n```\r\n\r\n### Dependencies required:\r\n- [Spring Boot Starter Test][1]\r\n- [Mockito Core][2]\r\n\r\n  [1]: https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-test\r\n  [2]: https://mvnrepository.com/artifact/org.mockito/mockito-core","title":"Avoid unnecessary @Component construction during spring unit test","body":"<h3>The simplest way using mockito:</h3>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest\npublic Test_UnderTesting {\n\n    @MockBean\n    private Irrelevant irrelevant; //Autowiring the unnecessary component as a mock\n\n    @Autowired\n    private UnderTesting foo;\n\n    @Test\n    public void testSomething() {\n    }\n}\n</code></pre>\n<h3>Dependencies required:</h3>\n<ul>\n<li><a href=\"https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-test\" rel=\"nofollow noreferrer\">Spring Boot Starter Test</a></li>\n<li><a href=\"https://mvnrepository.com/artifact/org.mockito/mockito-core\" rel=\"nofollow noreferrer\">Mockito Core</a></li>\n</ul>\n"}],"owner":{"account_id":182354,"reputation":982,"user_id":416983,"accept_rate":44,"display_name":"user416983"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":855,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":65700987,"answer_count":4,"score":0,"last_activity_date":1671866272,"creation_date":1610536633,"question_id":65700863,"body_markdown":"Assume two `@Component`&#39;s are defined, like this:\r\n```\r\n@Component\r\npublic class UnderTesting {\r\n}\r\n```\r\n```\r\n@Component\r\npublic class Irrelevant {\r\n}\r\n```\r\n\r\nThe unit test is like this:\r\n```\r\n@SpringBootTest\r\npublic Test_UnderTesting {\r\n    @Autowired\r\n    private UnderTesting foo;\r\n\r\n    @Test\r\n    public void testSomething() {\r\n    }\r\n}\r\n```\r\n\r\nWhen running this test case with `mvn test`, spring will construct component `Irrelevant` even though it&#39;s completely irrelevant.\r\n\r\nIn my case the component `Irrelevant` **cannot** be constructed due to unavailability of complex dependencies in the unit test environment.\r\n\r\nMy question is: how to avoid constructing `Irrelevant` (and other unnecessary components) during unit test ?\r\n\r\nI&#39;m kind new to spring boot, so I may have been heading a wrong direction, any suggestions are welcome.","title":"Avoid unnecessary @Component construction during spring unit test","body":"<p>Assume two <code>@Component</code>'s are defined, like this:</p>\n<pre><code>@Component\npublic class UnderTesting {\n}\n</code></pre>\n<pre><code>@Component\npublic class Irrelevant {\n}\n</code></pre>\n<p>The unit test is like this:</p>\n<pre><code>@SpringBootTest\npublic Test_UnderTesting {\n    @Autowired\n    private UnderTesting foo;\n\n    @Test\n    public void testSomething() {\n    }\n}\n</code></pre>\n<p>When running this test case with <code>mvn test</code>, spring will construct component <code>Irrelevant</code> even though it's completely irrelevant.</p>\n<p>In my case the component <code>Irrelevant</code> <strong>cannot</strong> be constructed due to unavailability of complex dependencies in the unit test environment.</p>\n<p>My question is: how to avoid constructing <code>Irrelevant</code> (and other unnecessary components) during unit test ?</p>\n<p>I'm kind new to spring boot, so I may have been heading a wrong direction, any suggestions are welcome.</p>\n"},{"tags":["java","apache-poi"],"answers":[{"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671865524,"creation_date":1671860582,"answer_id":74905795,"question_id":74852189,"body_markdown":"[XWPFTableCell](https://poi.apache.org/apidocs/dev/org/apache/poi/xwpf/usermodel/XWPFTableCell.html) is a [IBody](https://poi.apache.org/apidocs/dev/org/apache/poi/xwpf/usermodel/IBody.html). So it provides [XWPFTable insertNewTbl(org.apache.xmlbeans.XmlCursor cursor)](https://poi.apache.org/apidocs/dev/org/apache/poi/xwpf/usermodel/IBody.html#insertNewTbl-org.apache.xmlbeans.XmlCursor-). So yes, it is possible to add a table into a table cell.\r\n\r\nBut the usage of that `org.apache.xmlbeans.XmlCursor` is not well documented.\r\n\r\nTo create that cursor we need the table cell, the cursor shall be in,  and an new empty paragrsph in that cell. The empty paragrsph is needed because all content we insert using that cursor will be before the element the cursor points to. So that element should be an empty paragraph to avoid inserting content into existing elements like paragraphs with content or other content containing elements.\r\n\r\nThe following shows the simplest possible complete example.\r\n\r\n    import java.io.FileOutputStream;\r\n    \r\n    import org.apache.poi.xwpf.usermodel.*;\r\n    \r\n    public class CreateWordTableInTable {\r\n    \t\r\n     public static void main(String[] args) throws Exception {\r\n    \r\n      try (XWPFDocument doc = new XWPFDocument()) {\r\n    \r\n       //create main table\r\n       XWPFTable table = doc.createTable();\r\n    \r\n       //create rows and cells\r\n       XWPFTableRow row = table.getRow(0);\r\n       row.getCell(0).setText(&quot;Main table A1&quot;);\r\n       row.addNewTableCell().setText(&quot;Main table B1&quot;);\r\n       row.addNewTableCell().setText(&quot;Main table C1&quot;);\r\n       row = table.createRow();\r\n       row.getCell(0).setText(&quot;Main table A2&quot;);\r\n       row.getCell(1).setText(&quot;Main table B2&quot;);\r\n       row.getCell(2).setText(&quot;Main table C2&quot;);\r\n       \r\n       \r\n       //create inner table\r\n       //we need the first table cell and an new empty paragrsph in that first cell\r\n       row = table.getRow(0);\r\n       XWPFTableCell cell = row.getTableCells().get(0);\r\n       XWPFParagraph paragraph = cell.addParagraph();\r\n       //now we can insert a table there\r\n       org.apache.xmlbeans.XmlCursor cursor = paragraph.getCTP().newCursor();\r\n       XWPFTable innerTable = cell.insertNewTbl(cursor);\r\n       //set table borders\r\n       innerTable.setTopBorder(XWPFTable.XWPFBorderType.SINGLE, 4, 0, &quot;000000&quot;);\r\n       innerTable.setRightBorder(XWPFTable.XWPFBorderType.SINGLE, 4, 0, &quot;000000&quot;);\r\n       innerTable.setBottomBorder(XWPFTable.XWPFBorderType.SINGLE, 4, 0, &quot;000000&quot;);\r\n       innerTable.setLeftBorder(XWPFTable.XWPFBorderType.SINGLE, 4, 0, &quot;000000&quot;);\r\n       innerTable.setInsideHBorder(XWPFTable.XWPFBorderType.SINGLE, 4, 0, &quot;000000&quot;);\r\n       innerTable.setInsideVBorder(XWPFTable.XWPFBorderType.SINGLE, 4, 0, &quot;000000&quot;);\r\n       //create rows and cells\r\n       XWPFTableRow rowInInnerTable = innerTable.createRow();\r\n       XWPFTableCell cellInInnerTable = rowInInnerTable.createCell();\r\n       cellInInnerTable.setText(&quot;Inner table A1&quot;);\r\n       cellInInnerTable = rowInInnerTable.createCell();\r\n       cellInInnerTable.setText(&quot;Inner table B1&quot;);\r\n       cellInInnerTable = rowInInnerTable.createCell();\r\n       cellInInnerTable.setText(&quot;Inner table C1&quot;);\r\n       rowInInnerTable = innerTable.createRow();\r\n       cellInInnerTable = rowInInnerTable.getCell(0);\r\n       cellInInnerTable.setText(&quot;Inner table A2&quot;);\r\n       cellInInnerTable = rowInInnerTable.getCell(1);\r\n       cellInInnerTable.setText(&quot;Inner table B2&quot;);\r\n       cellInInnerTable = rowInInnerTable.getCell(2);\r\n       cellInInnerTable.setText(&quot;Inner table C2&quot;);\r\n        \r\n       //save to .docx file\r\n       try (FileOutputStream out = new FileOutputStream(&quot;./CreateWordTableInTable.docx&quot;)) {\r\n        doc.write(out);\r\n       }\r\n      }\r\n     }\r\n    }\r\n\r\nIt produces:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/PoRuH.png\r\n\r\nThis code is tested an works using the current Apache POI version 5.2.3. Download: https://poi.apache.org/download.html#POI-5.2.3. Needed components see https://poi.apache.org/components/index.html#components.","title":"poi ms-word Can you make a table in the table?","body":"<p><a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/xwpf/usermodel/XWPFTableCell.html\" rel=\"nofollow noreferrer\">XWPFTableCell</a> is a <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/xwpf/usermodel/IBody.html\" rel=\"nofollow noreferrer\">IBody</a>. So it provides <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/xwpf/usermodel/IBody.html#insertNewTbl-org.apache.xmlbeans.XmlCursor-\" rel=\"nofollow noreferrer\">XWPFTable insertNewTbl(org.apache.xmlbeans.XmlCursor cursor)</a>. So yes, it is possible to add a table into a table cell.</p>\n<p>But the usage of that <code>org.apache.xmlbeans.XmlCursor</code> is not well documented.</p>\n<p>To create that cursor we need the table cell, the cursor shall be in,  and an new empty paragrsph in that cell. The empty paragrsph is needed because all content we insert using that cursor will be before the element the cursor points to. So that element should be an empty paragraph to avoid inserting content into existing elements like paragraphs with content or other content containing elements.</p>\n<p>The following shows the simplest possible complete example.</p>\n<pre><code>import java.io.FileOutputStream;\n\nimport org.apache.poi.xwpf.usermodel.*;\n\npublic class CreateWordTableInTable {\n    \n public static void main(String[] args) throws Exception {\n\n  try (XWPFDocument doc = new XWPFDocument()) {\n\n   //create main table\n   XWPFTable table = doc.createTable();\n\n   //create rows and cells\n   XWPFTableRow row = table.getRow(0);\n   row.getCell(0).setText(&quot;Main table A1&quot;);\n   row.addNewTableCell().setText(&quot;Main table B1&quot;);\n   row.addNewTableCell().setText(&quot;Main table C1&quot;);\n   row = table.createRow();\n   row.getCell(0).setText(&quot;Main table A2&quot;);\n   row.getCell(1).setText(&quot;Main table B2&quot;);\n   row.getCell(2).setText(&quot;Main table C2&quot;);\n   \n   \n   //create inner table\n   //we need the first table cell and an new empty paragrsph in that first cell\n   row = table.getRow(0);\n   XWPFTableCell cell = row.getTableCells().get(0);\n   XWPFParagraph paragraph = cell.addParagraph();\n   //now we can insert a table there\n   org.apache.xmlbeans.XmlCursor cursor = paragraph.getCTP().newCursor();\n   XWPFTable innerTable = cell.insertNewTbl(cursor);\n   //set table borders\n   innerTable.setTopBorder(XWPFTable.XWPFBorderType.SINGLE, 4, 0, &quot;000000&quot;);\n   innerTable.setRightBorder(XWPFTable.XWPFBorderType.SINGLE, 4, 0, &quot;000000&quot;);\n   innerTable.setBottomBorder(XWPFTable.XWPFBorderType.SINGLE, 4, 0, &quot;000000&quot;);\n   innerTable.setLeftBorder(XWPFTable.XWPFBorderType.SINGLE, 4, 0, &quot;000000&quot;);\n   innerTable.setInsideHBorder(XWPFTable.XWPFBorderType.SINGLE, 4, 0, &quot;000000&quot;);\n   innerTable.setInsideVBorder(XWPFTable.XWPFBorderType.SINGLE, 4, 0, &quot;000000&quot;);\n   //create rows and cells\n   XWPFTableRow rowInInnerTable = innerTable.createRow();\n   XWPFTableCell cellInInnerTable = rowInInnerTable.createCell();\n   cellInInnerTable.setText(&quot;Inner table A1&quot;);\n   cellInInnerTable = rowInInnerTable.createCell();\n   cellInInnerTable.setText(&quot;Inner table B1&quot;);\n   cellInInnerTable = rowInInnerTable.createCell();\n   cellInInnerTable.setText(&quot;Inner table C1&quot;);\n   rowInInnerTable = innerTable.createRow();\n   cellInInnerTable = rowInInnerTable.getCell(0);\n   cellInInnerTable.setText(&quot;Inner table A2&quot;);\n   cellInInnerTable = rowInInnerTable.getCell(1);\n   cellInInnerTable.setText(&quot;Inner table B2&quot;);\n   cellInInnerTable = rowInInnerTable.getCell(2);\n   cellInInnerTable.setText(&quot;Inner table C2&quot;);\n    \n   //save to .docx file\n   try (FileOutputStream out = new FileOutputStream(&quot;./CreateWordTableInTable.docx&quot;)) {\n    doc.write(out);\n   }\n  }\n }\n}\n</code></pre>\n<p>It produces:</p>\n<p><a href=\"https://i.stack.imgur.com/PoRuH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PoRuH.png\" alt=\"enter image description here\" /></a></p>\n<p>This code is tested an works using the current Apache POI version 5.2.3. Download: <a href=\"https://poi.apache.org/download.html#POI-5.2.3\" rel=\"nofollow noreferrer\">https://poi.apache.org/download.html#POI-5.2.3</a>. Needed components see <a href=\"https://poi.apache.org/components/index.html#components\" rel=\"nofollow noreferrer\">https://poi.apache.org/components/index.html#components</a>.</p>\n"}],"owner":{"account_id":18942997,"reputation":15,"user_id":13822581,"display_name":"ych1215"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":268,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74905795,"answer_count":1,"score":0,"last_activity_date":1671865524,"creation_date":1671461803,"question_id":74852189,"body_markdown":"Can you make a table in the compartment inside the table like case 2?\r\nCan you make a table in the compartment inside the table like case 2?\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n[enter image description here](https://i.stack.imgur.com/S6IeL.png)\r\n\r\n\r\n\r\n```\r\npublic class PoiTest3 {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n\r\n        try (XWPFDocument doc = new XWPFDocument()) {\r\n\r\n            XWPFTable table = doc.createTable();\r\n\r\n            //Creating first Row\r\n            XWPFTableRow row1 = table.getRow(0);\r\n            row1.getCell(0).setText(&quot;First Row, First Column&quot;);\r\n            row1.addNewTableCell().setText(&quot;First Row, Second Column&quot;);\r\n            row1.addNewTableCell().setText(&quot;First Row, Third Column&quot;);\r\n\r\n            //Creating second Row\r\n            XWPFTableRow row2 = table.createRow();\r\n            row2.getCell(0).setText(&quot;Second Row, First Column&quot;);\r\n            row2.getCell(1).setText(&quot;Second Row, Second Column&quot;);\r\n            row2.getCell(2).setText(&quot;Second Row, Third Column&quot;);\r\n\r\n            //create third row\r\n            XWPFTableRow row3 = table.createRow();\r\n            row3.getCell(0).setText(&quot;Third Row, First Column&quot;);\r\n            row3.getCell(1).setText(&quot;Third Row, Second Column&quot;);\r\n            row3.getCell(2).setText(&quot;Third Row, Third Column&quot;);\r\n\r\n            // save to .docx file\r\n            try (FileOutputStream out = new FileOutputStream(&quot;c:\\\\excel\\\\table.docx&quot;)) {\r\n                doc.write(out);\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/S6IeL.png","title":"poi ms-word Can you make a table in the table?","body":"<p>Can you make a table in the compartment inside the table like case 2?\nCan you make a table in the compartment inside the table like case 2?</p>\n<p><a href=\"https://i.stack.imgur.com/S6IeL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/S6IeL.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/S6IeL.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<pre><code>public class PoiTest3 {\n\n    public static void main(String[] args) throws Exception {\n\n        try (XWPFDocument doc = new XWPFDocument()) {\n\n            XWPFTable table = doc.createTable();\n\n            //Creating first Row\n            XWPFTableRow row1 = table.getRow(0);\n            row1.getCell(0).setText(&quot;First Row, First Column&quot;);\n            row1.addNewTableCell().setText(&quot;First Row, Second Column&quot;);\n            row1.addNewTableCell().setText(&quot;First Row, Third Column&quot;);\n\n            //Creating second Row\n            XWPFTableRow row2 = table.createRow();\n            row2.getCell(0).setText(&quot;Second Row, First Column&quot;);\n            row2.getCell(1).setText(&quot;Second Row, Second Column&quot;);\n            row2.getCell(2).setText(&quot;Second Row, Third Column&quot;);\n\n            //create third row\n            XWPFTableRow row3 = table.createRow();\n            row3.getCell(0).setText(&quot;Third Row, First Column&quot;);\n            row3.getCell(1).setText(&quot;Third Row, Second Column&quot;);\n            row3.getCell(2).setText(&quot;Third Row, Third Column&quot;);\n\n            // save to .docx file\n            try (FileOutputStream out = new FileOutputStream(&quot;c:\\\\excel\\\\table.docx&quot;)) {\n                doc.write(out);\n            }\n\n        }\n\n    }\n\n}\n</code></pre>\n"},{"tags":["java","jline"],"owner":{"account_id":27326598,"reputation":1,"user_id":20839478,"display_name":"DeeChael"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671865245,"creation_date":1671713420,"question_id":74888773,"body_markdown":"I want to make a console application with jline and brigadier,\r\nbut I have problem on command completing.\r\nI can complete the literal command but can&#39;t complete argument commands.\r\n\r\n\r\nWhat I did:\r\n\r\n```java\r\nprivate static List&lt;Completers.TreeCompleter.Node&gt; generateNodes(CommandNode&lt;ConsoleSender&gt; root) {\r\n    List&lt;Completers.TreeCompleter.Node&gt; nodes = new ArrayList&lt;&gt;();\r\n    for (CommandNode&lt;ConsoleSender&gt; commandNode : root.getChildren()) {\r\n        List&lt;Object&gt; objects = new ArrayList&lt;&gt;();\r\n        if (commandNode instanceof ArgumentCommandNode&lt;?, ?&gt;) {\r\n            objects.add(new StringsCompleter()); // cannot complete if user input non-literal arguments\r\n        } else {\r\n            objects.add(commandNode.getName());\r\n        }\r\n        objects.addAll(generateNodes(commandNode));\r\n        nodes.add(Completers.TreeCompleter.node(objects.toArray()));\r\n    }\r\n    return nodes;\r\n}\r\n```\r\n\r\n```\r\n&gt; hello literal // can complete well\r\n&gt; hello &lt;name: string value&gt; literal // &quot;literal&quot; cannot be completed\r\n```\r\n\r\nWhat I want:\r\n\r\n```\r\n&gt; hello literal // can complete well\r\n&gt; hello &lt;name: string value&gt; literal // &quot;literal&quot; can be completed well without bugs whatever the value of name argument is\r\n```","title":"JLine completer with Brigadier","body":"<p>I want to make a console application with jline and brigadier,\nbut I have problem on command completing.\nI can complete the literal command but can't complete argument commands.</p>\n<p>What I did:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static List&lt;Completers.TreeCompleter.Node&gt; generateNodes(CommandNode&lt;ConsoleSender&gt; root) {\n    List&lt;Completers.TreeCompleter.Node&gt; nodes = new ArrayList&lt;&gt;();\n    for (CommandNode&lt;ConsoleSender&gt; commandNode : root.getChildren()) {\n        List&lt;Object&gt; objects = new ArrayList&lt;&gt;();\n        if (commandNode instanceof ArgumentCommandNode&lt;?, ?&gt;) {\n            objects.add(new StringsCompleter()); // cannot complete if user input non-literal arguments\n        } else {\n            objects.add(commandNode.getName());\n        }\n        objects.addAll(generateNodes(commandNode));\n        nodes.add(Completers.TreeCompleter.node(objects.toArray()));\n    }\n    return nodes;\n}\n</code></pre>\n<pre><code>&gt; hello literal // can complete well\n&gt; hello &lt;name: string value&gt; literal // &quot;literal&quot; cannot be completed\n</code></pre>\n<p>What I want:</p>\n<pre><code>&gt; hello literal // can complete well\n&gt; hello &lt;name: string value&gt; literal // &quot;literal&quot; can be completed well without bugs whatever the value of name argument is\n</code></pre>\n"},{"tags":["java","protocol-buffers","apache-kafka-streams","confluent-schema-registry"],"comments":[{"owner":{"account_id":5843757,"reputation":613,"user_id":4604453,"display_name":"Balkrishan Aggarwal"},"score":0,"creation_date":1652709345,"post_id":70519168,"comment_id":127664666,"body_markdown":"Refer: https://docs.confluent.io/platform/current/schema-registry/serdes-develop/serdes-protobuf.html#protobuf-deserializer\nIt says &quot;Finally, if no type is provided or no type can be derived, the deserializer uses the schema to return an instance of a Protobuf DynamicMessage.&quot;","body":"Refer: <a href=\"https://docs.confluent.io/platform/current/schema-registry/serdes-develop/serdes-protobuf.html#protobuf-deserializer\" rel=\"nofollow noreferrer\">docs.confluent.io/platform/current/schema-registry/&hellip;</a> It says &quot;Finally, if no type is provided or no type can be derived, the deserializer uses the schema to return an instance of a Protobuf DynamicMessage.&quot;"},{"owner":{"account_id":4049798,"reputation":404,"user_id":3329810,"display_name":"malliaridis"},"score":0,"creation_date":1684417423,"post_id":70519168,"comment_id":134516800,"body_markdown":"Is the inconsistency between your `.proto` file message called `OuterData` and the java class called `ProtobufData` a typo? Because if that is not a typo then this might be the cause of your error, using different classes.","body":"Is the inconsistency between your <code>.proto</code> file message called <code>OuterData</code> and the java class called <code>ProtobufData</code> a typo? Because if that is not a typo then this might be the cause of your error, using different classes."}],"answers":[{"tags":[],"owner":{"account_id":10044848,"reputation":21,"user_id":7426613,"display_name":"feliks"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1659542487,"creation_date":1659357404,"answer_id":73193779,"question_id":70519168,"body_markdown":"I had the same issue while trying to make Kafkastream working with protobuf, \r\n\r\nI solved this issue by using specifically `KafkaProtobufSerde` to configure the streambuilder AND by specifiing explicitly the class to deserialize to with this line: `serdeConfig.put(SPECIFIC_PROTOBUF_VALUE_TYPE,ProtobufDataProto.class.getName());`\r\n\r\n\r\n\r\n        /*\r\n         *  Define SpecificSerde for Even in protobuff\r\n         */\r\n        final KafkaProtobufSerde&lt; ProtobufDataProto &gt; protoSerde = new KafkaProtobufSerde&lt;&gt;();\r\n        Map&lt;String, String&gt; serdeConfig = new HashMap&lt;&gt;();\r\n        serdeConfig.put(SCHEMA_REGISTRY_URL_CONFIG, registryUrl);\r\n        /*\r\n         * Technically, the following line is only mandatory in order to de-serialize object into GeneratedMessageV3\r\n         * and NOT into DynamicMessages : https://developers.google.com/protocol-buffers/docs/reference/java/com/google/protobuf/DynamicMessage\r\n         */\r\n        serdeConfig.put(SPECIFIC_PROTOBUF_VALUE_TYPE,ProtobufDataProto.class.getName());\r\n        protoSerde.configure(serdeConfig, false);\r\n  \r\nThen i can create my input stream and it will be deserialized:\r\n\r\n\r\n     //Define a Serde for the key\r\n     final Serde&lt;byte[]&gt; bytesSerde = Serdes.ByteArray();\r\n     //Define the stream\r\n     StreamsBuilder streamsBuilder = new StreamsBuilder();\r\n     streamsBuilder.stream(&quot;inputTopic&quot;, Consumed.with(bytesSerde, protoSerde));\r\n     /* \r\n     add your treatments, maps, filter etc\r\n     ...\r\n     */\r\n     streamsBuilder.build();","title":"kafka streams protobuf cast exception","body":"<p>I had the same issue while trying to make Kafkastream working with protobuf,</p>\n<p>I solved this issue by using specifically <code>KafkaProtobufSerde</code> to configure the streambuilder AND by specifiing explicitly the class to deserialize to with this line: <code>serdeConfig.put(SPECIFIC_PROTOBUF_VALUE_TYPE,ProtobufDataProto.class.getName());</code></p>\n<pre><code>    /*\n     *  Define SpecificSerde for Even in protobuff\n     */\n    final KafkaProtobufSerde&lt; ProtobufDataProto &gt; protoSerde = new KafkaProtobufSerde&lt;&gt;();\n    Map&lt;String, String&gt; serdeConfig = new HashMap&lt;&gt;();\n    serdeConfig.put(SCHEMA_REGISTRY_URL_CONFIG, registryUrl);\n    /*\n     * Technically, the following line is only mandatory in order to de-serialize object into GeneratedMessageV3\n     * and NOT into DynamicMessages : https://developers.google.com/protocol-buffers/docs/reference/java/com/google/protobuf/DynamicMessage\n     */\n    serdeConfig.put(SPECIFIC_PROTOBUF_VALUE_TYPE,ProtobufDataProto.class.getName());\n    protoSerde.configure(serdeConfig, false);\n</code></pre>\n<p>Then i can create my input stream and it will be deserialized:</p>\n<pre><code> //Define a Serde for the key\n final Serde&lt;byte[]&gt; bytesSerde = Serdes.ByteArray();\n //Define the stream\n StreamsBuilder streamsBuilder = new StreamsBuilder();\n streamsBuilder.stream(&quot;inputTopic&quot;, Consumed.with(bytesSerde, protoSerde));\n /* \n add your treatments, maps, filter etc\n ...\n */\n streamsBuilder.build();\n</code></pre>\n"}],"owner":{"account_id":23774997,"reputation":51,"user_id":17788580,"display_name":"avit103"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1369,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1671865033,"creation_date":1640779537,"question_id":70519168,"body_markdown":"I am using Kafka streams to read and process protobuf messages.\r\n\r\nI am using the following properties for the stream:\r\n```    private Properties createStreamProperties() {\r\n\r\n        Properties properties = new Properties();\r\n        properties.put(ConsumerConfig.GROUP_ID_CONFIG, kafkaConfig.getGroupId());\r\n        properties.put(StreamsConfig.CLIENT_ID_CONFIG, kafkaConfig.getClientId());\r\n        properties.put(StreamsConfig.APPLICATION_ID_CONFIG, kafkaConfig.getApplicationId());\r\n        properties.put(StreamsConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaConfig.getBootstrapServers());\r\n\r\n        properties.put(StreamsConfig.DEFAULT_KEY_SERDE_CLASS_CONFIG, Serdes.StringSerde.class);\r\n        properties.put(StreamsConfig.DEFAULT_VALUE_SERDE_CLASS_CONFIG, KafkaProtobufSerde.class);\r\n        properties.put(AbstractKafkaSchemaSerDeConfig.SCHEMA_REGISTRY_URL_CONFIG, kafkaConfig.getSchemaRegistryUrl());\r\n        properties.put(KafkaProtobufDeserializerConfig.SPECIFIC_PROTOBUF_VALUE_TYPE, ProtobufData.class);\r\n        return properties;\r\n    }\r\n```\r\n\r\nbut while running I encounter this error:\r\n\r\n```Caused by: java.lang.ClassCastException: class com.google.protobuf.DynamicMessage cannot be cast to class model.schema.proto.input.ProtobufDataProto$ProtobufData (com.google.protobuf.DynamicMessage and model.schema.proto.input.ProtobufDataProto$ProtobufData are in unnamed module of loader &#39;app&#39;)```\r\n\r\nMy ```.proto``` files looks as follows:\r\n\r\n```syntax = &quot;proto3&quot;;\r\nimport &quot;inner_data.proto&quot;;\r\npackage myPackage;\r\n\r\noption java_package = &quot;model.schema.proto.input&quot;;\r\noption java_outer_classname = &quot;ProtobufDataProto&quot;;\r\n\r\nmessage OuterData {\r\n    string timestamp = 1;\r\n    string x = 3;\r\n    repeated InnerObject flows = 4;\r\n}\r\n```\r\n\r\n(I have two separate proto files)\r\n```syntax = &quot;proto3&quot;;\r\npackage myPackage;\r\n\r\noption java_package = &quot;model.schema.proto.input&quot;;\r\noption java_outer_classname = &quot;InnerDataProto&quot;;\r\n\r\nmessage InnerData {\r\n  string a = 1;\r\n  string b = 2;\r\n  string c = 3;\r\n}\r\n```\r\n\r\nI would like to know why Kafka uses ```DynamicMessage``` even though I gave the specific protobuf value class in the properties and how to fix this?","title":"kafka streams protobuf cast exception","body":"<p>I am using Kafka streams to read and process protobuf messages.</p>\n<p>I am using the following properties for the stream:</p>\n<pre><code>\n        Properties properties = new Properties();\n        properties.put(ConsumerConfig.GROUP_ID_CONFIG, kafkaConfig.getGroupId());\n        properties.put(StreamsConfig.CLIENT_ID_CONFIG, kafkaConfig.getClientId());\n        properties.put(StreamsConfig.APPLICATION_ID_CONFIG, kafkaConfig.getApplicationId());\n        properties.put(StreamsConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaConfig.getBootstrapServers());\n\n        properties.put(StreamsConfig.DEFAULT_KEY_SERDE_CLASS_CONFIG, Serdes.StringSerde.class);\n        properties.put(StreamsConfig.DEFAULT_VALUE_SERDE_CLASS_CONFIG, KafkaProtobufSerde.class);\n        properties.put(AbstractKafkaSchemaSerDeConfig.SCHEMA_REGISTRY_URL_CONFIG, kafkaConfig.getSchemaRegistryUrl());\n        properties.put(KafkaProtobufDeserializerConfig.SPECIFIC_PROTOBUF_VALUE_TYPE, ProtobufData.class);\n        return properties;\n    }\n</code></pre>\n<p>but while running I encounter this error:</p>\n<p><code>Caused by: java.lang.ClassCastException: class com.google.protobuf.DynamicMessage cannot be cast to class model.schema.proto.input.ProtobufDataProto$ProtobufData (com.google.protobuf.DynamicMessage and model.schema.proto.input.ProtobufDataProto$ProtobufData are in unnamed module of loader 'app')</code></p>\n<p>My <code>.proto</code> files looks as follows:</p>\n<pre><code>import &quot;inner_data.proto&quot;;\npackage myPackage;\n\noption java_package = &quot;model.schema.proto.input&quot;;\noption java_outer_classname = &quot;ProtobufDataProto&quot;;\n\nmessage OuterData {\n    string timestamp = 1;\n    string x = 3;\n    repeated InnerObject flows = 4;\n}\n</code></pre>\n<p>(I have two separate proto files)</p>\n<pre><code>package myPackage;\n\noption java_package = &quot;model.schema.proto.input&quot;;\noption java_outer_classname = &quot;InnerDataProto&quot;;\n\nmessage InnerData {\n  string a = 1;\n  string b = 2;\n  string c = 3;\n}\n</code></pre>\n<p>I would like to know why Kafka uses <code>DynamicMessage</code> even though I gave the specific protobuf value class in the properties and how to fix this?</p>\n"},{"tags":["java","linux","performance","java-17"],"comments":[{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":1,"creation_date":1670586213,"post_id":74742404,"comment_id":131913548,"body_markdown":"https://www.baeldung.com/java-profilers","body":"<a href=\"https://www.baeldung.com/java-profilers\" rel=\"nofollow noreferrer\">baeldung.com/java-profilers</a>"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":2,"creation_date":1670653046,"post_id":74742404,"comment_id":131927631,"body_markdown":"Another possibility is that you need to use a different garbage collector or tune the heap size.   Some Java GC&#39;s don&#39;t work so well when the heap is very large. You don&#39;t say anything about how you have configured that stuff.","body":"Another possibility is that you need to use a different garbage collector or tune the heap size.   Some Java GC&#39;s don&#39;t work so well when the heap is very large. You don&#39;t say anything about how you have configured that stuff."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":1,"creation_date":1670675684,"post_id":74742404,"comment_id":131930702,"body_markdown":"https://visualvm.github.io/download.html","body":"<a href=\"https://visualvm.github.io/download.html\" rel=\"nofollow noreferrer\">visualvm.github.io/download.html</a>"}],"owner":{"account_id":5592843,"reputation":2982,"user_id":4431422,"display_name":"Vipin Menon"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1670586201,"answer_count":0,"score":0,"last_activity_date":1671864216,"creation_date":1670584926,"question_id":74742404,"body_markdown":"We have a riemann JVM that currently runs between 50 and 65% that has increased over time gradually thanks to increasing load. Occasionally now though it spikes once is a while to around 90 ~ 95%. The VM is a 48 core 192GB machine. In terms of memory it does not consume more than 80GB.\r\n\r\nWe were hoping to scale it to the next larger VM of 64 CPU and 256GB memory. Strangely though the moment the BIGGER VM is added, the JVM constantly stays at 100% with a system load close to 100. The JVM process becomes unresponsive. (Bot the VMs are the same M5 types)\r\n\r\nWe had to scale down to the 48CPU machine. \r\n\r\nThe main question here is on a smaller VM (48 CPU (both m5 and c5)), the application is stable with CPU consumption at 40-65% and on switching(Scale UP) the VM to a 72 CPU machine, the application becomes unusable with 100% CPU. Switching back to the smaller VM makes everything stable again.\r\n\r\nThe use case is for a tool named [riemann][1]\r\n\r\n\r\n  [1]: http://riemann.io/\r\n\r\nAdditional pointers:\r\n\r\nOpenJDK 64-Bit Server VM version 17.0.3.0.1+7-LTS\r\n\r\nThread Dump: https://fastthread.io/my-thread-report.jsp?p=c2hhcmVkLzIwMjIvMTIvMjQvdGhyZWFkX2R1bXBfNF81M19wbS50ZHVtcC0tNS00MC0zOQ==&amp;\r\n\r\nconfiguration:\r\n```\r\n    MAX_HEAP=$(awk &#39;/MemTotal/ { printf &quot;%.0f&quot;, $2/1024*0.75 }&#39; /proc/meminfo)\r\n    HALF_MAX_HEAP=`expr $MAX_HEAP / 2`\r\n    exec chpst -u vcap:vcap java \\\r\n      -XX:+UseParallelGC \\\r\n      -XX:+ExitOnOutOfMemoryError \\\r\n      -Xms&quot;$HALF_MAX_HEAP&quot;m \\\r\n      -Xmx&quot;$MAX_HEAP&quot;m \\\r\n      -Djava.io.tmpdir=&quot;$TMP_DIR&quot; \\\r\n      -jar /var/vcap/packages/riemann/riemann.jar \\\r\n      &quot;$CONFIG_DIR&quot;/clojure/riemann.config \\\r\n      1&gt;&gt;&quot;$LOG_DIR&quot;/&quot;$JOB_NAME&quot;.stdout.log \\\r\n      2&gt;&gt;&quot;$LOG_DIR&quot;/&quot;$JOB_NAME&quot;.stderr.log &amp;\r\n```","title":"Why Java application is not working when VM size is increased?","body":"<p>We have a riemann JVM that currently runs between 50 and 65% that has increased over time gradually thanks to increasing load. Occasionally now though it spikes once is a while to around 90 ~ 95%. The VM is a 48 core 192GB machine. In terms of memory it does not consume more than 80GB.</p>\n<p>We were hoping to scale it to the next larger VM of 64 CPU and 256GB memory. Strangely though the moment the BIGGER VM is added, the JVM constantly stays at 100% with a system load close to 100. The JVM process becomes unresponsive. (Bot the VMs are the same M5 types)</p>\n<p>We had to scale down to the 48CPU machine.</p>\n<p>The main question here is on a smaller VM (48 CPU (both m5 and c5)), the application is stable with CPU consumption at 40-65% and on switching(Scale UP) the VM to a 72 CPU machine, the application becomes unusable with 100% CPU. Switching back to the smaller VM makes everything stable again.</p>\n<p>The use case is for a tool named <a href=\"http://riemann.io/\" rel=\"nofollow noreferrer\">riemann</a></p>\n<p>Additional pointers:</p>\n<p>OpenJDK 64-Bit Server VM version 17.0.3.0.1+7-LTS</p>\n<p>Thread Dump: <a href=\"https://fastthread.io/my-thread-report.jsp?p=c2hhcmVkLzIwMjIvMTIvMjQvdGhyZWFkX2R1bXBfNF81M19wbS50ZHVtcC0tNS00MC0zOQ==&amp;\" rel=\"nofollow noreferrer\">https://fastthread.io/my-thread-report.jsp?p=c2hhcmVkLzIwMjIvMTIvMjQvdGhyZWFkX2R1bXBfNF81M19wbS50ZHVtcC0tNS00MC0zOQ==&amp;</a></p>\n<p>configuration:</p>\n<pre><code>    MAX_HEAP=$(awk '/MemTotal/ { printf &quot;%.0f&quot;, $2/1024*0.75 }' /proc/meminfo)\n    HALF_MAX_HEAP=`expr $MAX_HEAP / 2`\n    exec chpst -u vcap:vcap java \\\n      -XX:+UseParallelGC \\\n      -XX:+ExitOnOutOfMemoryError \\\n      -Xms&quot;$HALF_MAX_HEAP&quot;m \\\n      -Xmx&quot;$MAX_HEAP&quot;m \\\n      -Djava.io.tmpdir=&quot;$TMP_DIR&quot; \\\n      -jar /var/vcap/packages/riemann/riemann.jar \\\n      &quot;$CONFIG_DIR&quot;/clojure/riemann.config \\\n      1&gt;&gt;&quot;$LOG_DIR&quot;/&quot;$JOB_NAME&quot;.stdout.log \\\n      2&gt;&gt;&quot;$LOG_DIR&quot;/&quot;$JOB_NAME&quot;.stderr.log &amp;\n</code></pre>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"score":1,"creation_date":1671180863,"post_id":74822096,"comment_id":132047873,"body_markdown":"can you try `btn.setTextFill(Color.WHITE);`","body":"can you try <code>btn.setTextFill(Color.WHITE);</code>"},{"owner":{"account_id":23388162,"reputation":5,"user_id":17505578,"display_name":"qwertyboi"},"score":0,"creation_date":1671181554,"post_id":74822096,"comment_id":132048035,"body_markdown":"@YCF_L How do I use setTextFill when I want a specific hex code for the color?","body":"@YCF_L How do I use setTextFill when I want a specific hex code for the color?"},{"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"score":1,"creation_date":1671182134,"post_id":74822096,"comment_id":132048198,"body_markdown":"Can you try this please `btn.setTextFill(Color.web(&quot;#ff0000&quot;));`","body":"Can you try this please <code>btn.setTextFill(Color.web(&quot;#ff0000&quot;));</code>"},{"owner":{"account_id":7677244,"reputation":630,"user_id":5817706,"display_name":"Mohammed Fadhl"},"score":0,"creation_date":1671199939,"post_id":74822096,"comment_id":132053887,"body_markdown":"There are many questions and answers on stackoverflow.com \nBefore, asking a question you need to do some research to check if you question is already there.\nPlease, read the guidelines before I participating.","body":"There are many questions and answers on stackoverflow.com  Before, asking a question you need to do some research to check if you question is already there. Please, read the guidelines before I participating."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1671218547,"post_id":74822096,"comment_id":132059710,"body_markdown":"@MohammedFadhl if it is a duplicate, then vote to close it as a duplicate.","body":"@MohammedFadhl if it is a duplicate, then vote to close it as a duplicate."},{"owner":{"account_id":7677244,"reputation":630,"user_id":5817706,"display_name":"Mohammed Fadhl"},"score":0,"creation_date":1671260173,"post_id":74822096,"comment_id":132065456,"body_markdown":"Does this answer your question? [How to change text color of a JButton](https://stackoverflow.com/questions/15393385/how-to-change-text-color-of-a-jbutton)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/15393385/how-to-change-text-color-of-a-jbutton\">How to change text color of a JButton</a>"},{"owner":{"account_id":6677355,"reputation":3705,"user_id":5151575,"accept_rate":83,"display_name":"Enigo"},"score":0,"creation_date":1671861949,"post_id":74822096,"comment_id":132189562,"body_markdown":"@MohammedFadhl that answer is for java swing, not javafx","body":"@MohammedFadhl that answer is for java swing, not javafx"}],"answers":[{"tags":[],"owner":{"account_id":6677355,"reputation":3705,"user_id":5151575,"accept_rate":83,"display_name":"Enigo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671862610,"creation_date":1671862610,"answer_id":74905910,"question_id":74822096,"body_markdown":"In JavaFX there are various ways to set the color of a button&#39;s text:\r\n\r\nFrom hex:\r\n\r\n    private static Button createButton() {\r\n        final Button button = new Button(&quot;red&quot;);\r\n        button.setTextFill(Color.web(&quot;#ff0000&quot;));\r\n        return button;\r\n    }\r\n\r\nWith predefined colors:\r\n\r\n    private static Button createButton() {\r\n        final Button button = new Button(&quot;red&quot;);\r\n        button.setTextFill(Color.RED);\r\n        return button;\r\n    }\r\n\r\nFrom RGB values:\r\n\r\n    private static Button createButton() {\r\n        final Button button = new Button(&quot;red&quot;);\r\n        button.setTextFill(Color.rgb(255, 0, 0));\r\n        return button;\r\n    }\r\n\r\nFrom HSB values:\r\n\r\n    private static Button createButton() {\r\n        final Button button = new Button(&quot;red&quot;);\r\n        button.setTextFill(Color.hsb(0, 1, 1));\r\n        return button;\r\n    }\r\n\r\nFrom color where RGB is within a range of 0.0-1.0\r\n\r\n    private static Button createButton() {\r\n        final Button button = new Button(&quot;red&quot;);\r\n        button.setTextFill(Color.color(1, 0, 0));\r\n        return button;\r\n    }\r\n\r\nPick whichever suits your needs","title":"How to change color of text in a button","body":"<p>In JavaFX there are various ways to set the color of a button's text:</p>\n<p>From hex:</p>\n<pre><code>private static Button createButton() {\n    final Button button = new Button(&quot;red&quot;);\n    button.setTextFill(Color.web(&quot;#ff0000&quot;));\n    return button;\n}\n</code></pre>\n<p>With predefined colors:</p>\n<pre><code>private static Button createButton() {\n    final Button button = new Button(&quot;red&quot;);\n    button.setTextFill(Color.RED);\n    return button;\n}\n</code></pre>\n<p>From RGB values:</p>\n<pre><code>private static Button createButton() {\n    final Button button = new Button(&quot;red&quot;);\n    button.setTextFill(Color.rgb(255, 0, 0));\n    return button;\n}\n</code></pre>\n<p>From HSB values:</p>\n<pre><code>private static Button createButton() {\n    final Button button = new Button(&quot;red&quot;);\n    button.setTextFill(Color.hsb(0, 1, 1));\n    return button;\n}\n</code></pre>\n<p>From color where RGB is within a range of 0.0-1.0</p>\n<pre><code>private static Button createButton() {\n    final Button button = new Button(&quot;red&quot;);\n    button.setTextFill(Color.color(1, 0, 0));\n    return button;\n}\n</code></pre>\n<p>Pick whichever suits your needs</p>\n"}],"owner":{"account_id":23388162,"reputation":5,"user_id":17505578,"display_name":"qwertyboi"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":145,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74905910,"answer_count":1,"score":-1,"last_activity_date":1671862610,"creation_date":1671180585,"question_id":74822096,"body_markdown":"How do you change the color of a text inside a button node?\r\n\r\nI tried this:\r\n\r\n```\r\nbtn.setStyle(&quot;-fx-text-fill: white&quot;);\r\n```\r\n\r\nBut it only added color to the button.","title":"How to change color of text in a button","body":"<p>How do you change the color of a text inside a button node?</p>\n<p>I tried this:</p>\n<pre><code>btn.setStyle(&quot;-fx-text-fill: white&quot;);\n</code></pre>\n<p>But it only added color to the button.</p>\n"},{"tags":["java","polarion"],"comments":[{"owner":{"account_id":11941,"reputation":29273,"user_id":23264,"accept_rate":100,"display_name":"Peter Parker"},"score":0,"creation_date":1663251591,"post_id":73454810,"comment_id":130199564,"body_markdown":"Some source code would be helpful? Which instruction caused the exception?","body":"Some source code would be helpful? Which instruction caused the exception?"}],"answers":[{"tags":[],"owner":{"account_id":11732452,"reputation":21,"user_id":8587449,"display_name":"Sergey Grigoriev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671862512,"creation_date":1671720781,"answer_id":74890211,"question_id":73454810,"body_markdown":"You should run your modification code within the write transaction. Something like this:\r\n\r\n```\r\nTransactionalExecutor.executeInWriteTransaction(transaction -&gt; updateWorkItem())\r\n```","title":"How to set a customField in Polarion using Java in IformExtension","body":"<p>You should run your modification code within the write transaction. Something like this:</p>\n<pre><code>TransactionalExecutor.executeInWriteTransaction(transaction -&gt; updateWorkItem())\n</code></pre>\n"}],"owner":{"account_id":4670700,"reputation":31,"user_id":3782554,"display_name":"user3782554"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671862512,"creation_date":1661240289,"question_id":73454810,"body_markdown":"In Polarion, I have created an java class using IFormExtension .\r\nI would like to set a customfield. When i do it i get an error\r\n\r\nCaused by: java.lang.UnsupportedOperationException: Modifications are prohibited in read only transaction.\r\n\r\nhow to set a write transction and do workitem.save(),\r\nThank you","title":"How to set a customField in Polarion using Java in IformExtension","body":"<p>In Polarion, I have created an java class using IFormExtension .\nI would like to set a customfield. When i do it i get an error</p>\n<p>Caused by: java.lang.UnsupportedOperationException: Modifications are prohibited in read only transaction.</p>\n<p>how to set a write transction and do workitem.save(),\nThank you</p>\n"},{"tags":["java","elasticsearch","ssl","https","graylog"],"answers":[{"tags":[],"owner":{"account_id":27308755,"reputation":1,"user_id":20824281,"display_name":"Marvwd40"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671862417,"creation_date":1671553140,"answer_id":74865961,"question_id":74865449,"body_markdown":"At first search for the cacerts for graylog\r\n\r\n`sudo find / -name cacerts`\r\n\r\nthen put in the cert chain via keytool\r\n\r\n`sudo keytool -import -keystore /usr/share/graylog-server/jvm/lib/security/cacerts -file /etc/ssl/certs/gray.pem`\r\n\r\nOnce this was done it started working.","title":"Certificate chain handed over to graylog for internal communication doesn&#39;t work","body":"<p>At first search for the cacerts for graylog</p>\n<p><code>sudo find / -name cacerts</code></p>\n<p>then put in the cert chain via keytool</p>\n<p><code>sudo keytool -import -keystore /usr/share/graylog-server/jvm/lib/security/cacerts -file /etc/ssl/certs/gray.pem</code></p>\n<p>Once this was done it started working.</p>\n"}],"owner":{"account_id":27308755,"reputation":1,"user_id":20824281,"display_name":"Marvwd40"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":442,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74865961,"answer_count":1,"score":0,"last_activity_date":1671862417,"creation_date":1671550465,"question_id":74865449,"body_markdown":"I have stored a correct certificate in the Graylog configuration file, in the correct format. The web interface is also accessible via https. However, I get the following error message:\r\n  \r\n&gt;WARN  [ProxiedResource] Unable to call https://&lt;...&gt;/api/system/metrics/multiple on node &lt;...&gt;: PKIX path building failed:   sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target  \r\nWARN  [ProxiedResource] Unable to call https://&lt;...&gt;/api/system/inputstates on node &lt;...&gt;: PKIX path building   failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n\r\nI work on Debian 10 with Graylog 5.0\r\n[My Server conf](https://i.stack.imgur.com/vRJn2.png)\r\n hope someone can help me\r\n\r\nI have stored a correct certificate in the Graylog configuration file, in the correct format. The web interface is also accessible via https. However, I get the following error message.  \r\nI have also packed the certificate chain into the cacerts file from elastic via keytool\r\n\r\nLast time I was able to work around it by adding a local dns entry to the hosts file, which set the Hostname to the public IP (the certificate did not contain the ip. But now it is)\r\nor do I have the wrong approach?","title":"Certificate chain handed over to graylog for internal communication doesn&#39;t work","body":"<p>I have stored a correct certificate in the Graylog configuration file, in the correct format. The web interface is also accessible via https. However, I get the following error message:</p>\n<blockquote>\n<p>WARN  [ProxiedResource] Unable to call https://&lt;...&gt;/api/system/metrics/multiple on node &lt;...&gt;: PKIX path building failed:   sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target<br />\nWARN  [ProxiedResource] Unable to call https://&lt;...&gt;/api/system/inputstates on node &lt;...&gt;: PKIX path building   failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target</p>\n</blockquote>\n<p>I work on Debian 10 with Graylog 5.0\n<a href=\"https://i.stack.imgur.com/vRJn2.png\" rel=\"nofollow noreferrer\">My Server conf</a>\nhope someone can help me</p>\n<p>I have stored a correct certificate in the Graylog configuration file, in the correct format. The web interface is also accessible via https. However, I get the following error message.<br />\nI have also packed the certificate chain into the cacerts file from elastic via keytool</p>\n<p>Last time I was able to work around it by adding a local dns entry to the hosts file, which set the Hostname to the public IP (the certificate did not contain the ip. But now it is)\nor do I have the wrong approach?</p>\n"},{"tags":["java","android","kotlin","kotlin-coroutines","coroutine"],"owner":{"account_id":7544172,"reputation":417,"user_id":5727849,"display_name":"Thang"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671862375,"creation_date":1671862375,"question_id":74905898,"body_markdown":"In my repository there is a function set to suspend function, but I really don&#39;t know how to write UnitTest for this repo.\r\n\r\n```\r\nclass MovieRepositoryImpl(val movieDao: MovieDao) : MovieRepository {\r\n\r\n    override suspend fun insertMovieToDB(movie: Movie) {\r\n        movieDao.insert(movie)\r\n    }\r\n}\r\n```\r\ncan anyone suggest me how to write UnitTest for it.\r\nI am using MockK library","title":"How to write UnitTest with Coroutines in Repository Android Kotlin","body":"<p>In my repository there is a function set to suspend function, but I really don't know how to write UnitTest for this repo.</p>\n<pre><code>class MovieRepositoryImpl(val movieDao: MovieDao) : MovieRepository {\n\n    override suspend fun insertMovieToDB(movie: Movie) {\n        movieDao.insert(movie)\n    }\n}\n</code></pre>\n<p>can anyone suggest me how to write UnitTest for it.\nI am using MockK library</p>\n"},{"tags":["java","io","nio","difference"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":2,"creation_date":1409178060,"post_id":25537675,"comment_id":39873168,"body_markdown":"NIO2 introduces asynchronous I/O and the java.nio.files package.","body":"NIO2 introduces asynchronous I/O and the java.nio.files package."},{"owner":{"account_id":4908724,"reputation":943,"user_id":3954645,"display_name":"John Huynh"},"score":0,"creation_date":1409178512,"post_id":25537675,"comment_id":39873288,"body_markdown":"Is that it? I had the impression that NIO.2 was something huge.","body":"Is that it? I had the impression that NIO.2 was something huge."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":1,"creation_date":1409179027,"post_id":25537675,"comment_id":39873421,"body_markdown":"First they had IO. Then they introduced &quot;New IO&quot;. Then they wanted to introduce more functionality, so they named it cleverly &quot;New IO 2&quot;.","body":"First they had IO. Then they introduced &quot;New IO&quot;. Then they wanted to introduce more functionality, so they named it cleverly &quot;New IO 2&quot;."},{"owner":{"account_id":4908724,"reputation":943,"user_id":3954645,"display_name":"John Huynh"},"score":1,"creation_date":1409180554,"post_id":25537675,"comment_id":39873774,"body_markdown":"Thanks, I figured. So does that mean &quot;New IO 2&quot; is superior in every way to the other two? I&#39;m reading &quot;The Java Tutorial&quot; book and it teaches about NIO.2, but it also has a section on IO.","body":"Thanks, I figured. So does that mean &quot;New IO 2&quot; is superior in every way to the other two? I&#39;m reading &quot;The Java Tutorial&quot; book and it teaches about NIO.2, but it also has a section on IO."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":2,"creation_date":1432693826,"post_id":25537675,"comment_id":49024510,"body_markdown":"@JohnHuynh No, it means it introduces new features. If you don&#39;t need them, don&#39;t use them.","body":"@JohnHuynh No, it means it introduces new features. If you don&#39;t need them, don&#39;t use them."}],"answers":[{"tags":[],"owner":{"account_id":1483923,"reputation":1065,"user_id":1392575,"display_name":"Sousa Gaspar"},"down_vote_count":0,"up_vote_count":95,"is_accepted":true,"score":95,"last_activity_date":1671861855,"creation_date":1409187474,"answer_id":25539157,"question_id":25537675,"body_markdown":"Java started initially by offering the `File` class, in the `java.io` package to access file systems. This object represents a file/directory and did allow you to perform some operations such as checking if  a file/directory exists, get properties and delete it. It had, though, some shortcomings. To name a few:\r\n\r\n - The File class lacked some important functionality, such as a copy method.\r\n - It also defined many methods that returned `boolean`. As one can imagine, in case of an error, `false` was returned, rather than throwing an exception. The developer had, indeed, no way of knowing why it failed.\r\n - Did not provide good handling on support of symbolic links.\r\n - A limited set of file attributes was provided.\r\n\r\nTo overcome these problems, java.nio package was introduced in java 4. The key features were:\r\n\r\n - Channels and Selectors: A channel is an abstraction on lower-level file system features, e.g. memory-mapped files.\r\n - Buffers: Buffering for all primitive classes (except for Boolean).\r\n - Charset: Charset (java.nio.charset), encoders, and decoders to map bytes and Unicode symbols\r\n\r\nWith java 7 the java.nio.file package is introduced providing a better support for handling symbolic links, file attributes access and specially to support extended the file system through classes such as Path, Paths and Files. You might wanna to have a look at the [java.nio.file package description][1] to get further details on this.\r\n\r\nWith this in mind:\r\n\r\n&gt; What are some big changes from NIO to NIO.2? (e.g. new methods,\r\n&gt; features)?\r\n\r\nThey serve different purposes. To point out big changes you might want to look at the all new package `java.nio.file`.\r\n\r\n&gt; Why did the original NIO package have to be updated?\r\n\r\nIt didn&#39;t. A new package was introduced rather than updated.\r\n\r\n&gt; Is NIO.2 just synonymous with the NIO package nowadays?\r\n&gt; How does the performance of NIO package compare with the NIO.2 package?\r\n\r\nNo, they are not synonymous. It also does not make much sense to compare performance between them, as they serve different purposes. NIO a more abstract low level data I/O and NIO2 focused on file management.\r\n\r\n[Bibliography: Oracle Certified Professional Java SE7 - A comprehensive OCJP7 Certification Guide,\r\n               by S.G.Ganesh and Tushar Sharma - Chapter 9]\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/nio/file/package-summary.html","title":"Java: what exactly is the difference between NIO and NIO.2?","body":"<p>Java started initially by offering the <code>File</code> class, in the <code>java.io</code> package to access file systems. This object represents a file/directory and did allow you to perform some operations such as checking if  a file/directory exists, get properties and delete it. It had, though, some shortcomings. To name a few:</p>\n<ul>\n<li>The File class lacked some important functionality, such as a copy method.</li>\n<li>It also defined many methods that returned <code>boolean</code>. As one can imagine, in case of an error, <code>false</code> was returned, rather than throwing an exception. The developer had, indeed, no way of knowing why it failed.</li>\n<li>Did not provide good handling on support of symbolic links.</li>\n<li>A limited set of file attributes was provided.</li>\n</ul>\n<p>To overcome these problems, java.nio package was introduced in java 4. The key features were:</p>\n<ul>\n<li>Channels and Selectors: A channel is an abstraction on lower-level file system features, e.g. memory-mapped files.</li>\n<li>Buffers: Buffering for all primitive classes (except for Boolean).</li>\n<li>Charset: Charset (java.nio.charset), encoders, and decoders to map bytes and Unicode symbols</li>\n</ul>\n<p>With java 7 the java.nio.file package is introduced providing a better support for handling symbolic links, file attributes access and specially to support extended the file system through classes such as Path, Paths and Files. You might wanna to have a look at the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/nio/file/package-summary.html\" rel=\"nofollow noreferrer\">java.nio.file package description</a> to get further details on this.</p>\n<p>With this in mind:</p>\n<blockquote>\n<p>What are some big changes from NIO to NIO.2? (e.g. new methods,\nfeatures)?</p>\n</blockquote>\n<p>They serve different purposes. To point out big changes you might want to look at the all new package <code>java.nio.file</code>.</p>\n<blockquote>\n<p>Why did the original NIO package have to be updated?</p>\n</blockquote>\n<p>It didn't. A new package was introduced rather than updated.</p>\n<blockquote>\n<p>Is NIO.2 just synonymous with the NIO package nowadays?\nHow does the performance of NIO package compare with the NIO.2 package?</p>\n</blockquote>\n<p>No, they are not synonymous. It also does not make much sense to compare performance between them, as they serve different purposes. NIO a more abstract low level data I/O and NIO2 focused on file management.</p>\n<p>[Bibliography: Oracle Certified Professional Java SE7 - A comprehensive OCJP7 Certification Guide,\nby S.G.Ganesh and Tushar Sharma - Chapter 9]</p>\n"},{"tags":[],"owner":{"account_id":364905,"reputation":18691,"user_id":709537,"accept_rate":72,"display_name":"Evgeniy Berezovsky"},"down_vote_count":1,"up_vote_count":68,"is_accepted":false,"score":67,"last_activity_date":1454396779,"creation_date":1432691237,"answer_id":30471811,"question_id":25537675,"body_markdown":"**NIO.2 introduced [asynchronous i/o](http://www.ibm.com/developerworks/java/library/j-nio2-1/index.html)**.\r\n\r\nAsynchronous I/O is an approach to non-blocking i/o that is not supported by NIO.\r\n\r\nNIO: selectors / reactor pattern\r\n\r\nNIO.2: completion handlers / [proactor pattern](http://www.cse.wustl.edu/~schmidt/PDF/proactor.pdf)\r\n\r\nThus when on Windows, [NIO.2 uses I/O Completion Ports](https://stackoverflow.com/a/30471685/709537), which should boost performance. Except, nobody knows, because nobody uses Windows on the server side, and if they do, they probably do so because they are heavily invested in .net, and for that reason will most likely not consider using Java.","title":"Java: what exactly is the difference between NIO and NIO.2?","body":"<p><strong>NIO.2 introduced <a href=\"http://www.ibm.com/developerworks/java/library/j-nio2-1/index.html\" rel=\"noreferrer\">asynchronous i/o</a></strong>.</p>\n\n<p>Asynchronous I/O is an approach to non-blocking i/o that is not supported by NIO.</p>\n\n<p>NIO: selectors / reactor pattern</p>\n\n<p>NIO.2: completion handlers / <a href=\"http://www.cse.wustl.edu/~schmidt/PDF/proactor.pdf\" rel=\"noreferrer\">proactor pattern</a></p>\n\n<p>Thus when on Windows, <a href=\"https://stackoverflow.com/a/30471685/709537\">NIO.2 uses I/O Completion Ports</a>, which should boost performance. Except, nobody knows, because nobody uses Windows on the server side, and if they do, they probably do so because they are heavily invested in .net, and for that reason will most likely not consider using Java.</p>\n"},{"tags":[],"owner":{"account_id":1218774,"reputation":2511,"user_id":1185845,"accept_rate":47,"display_name":"Espinosa"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1567540300,"creation_date":1567540300,"answer_id":57777945,"question_id":25537675,"body_markdown":"My take:\r\n\r\n__Short version__\r\n\r\nIt’s the addition of java.nio.file package with its high level much enhanced file and file system functionality.  \r\nFrom the perspective of network sockets or low level file access, NIO == NIO.2 with a few convenience improvements.\r\n\r\n__Longer version__\r\n\r\n## Java IO  \r\nPackage: `java.io`  \r\nOld blocking I/O API  \r\n\r\n## Java NIO\r\nAdded in Java 1.4, the new non-blocking API.  \r\nPackage: `java.nio`  \r\nJava non-blocking IO. Classes like `Selector`, `SelectorKey`, `Channel`.  \r\nIt seems to me the NIO was a big step up for network I/O (`Selector`, `SelectorKey`, `SocketChannel`, `ServerSocketChannel`, `Buffer`), much less for file I/O (`FileChannel` and `Buffer` only, including memory mapped files).\r\nThis is a fairly low level API, for both network and file parts.\r\n\r\n## Java NIO.2\r\nAdded in Java 7. It’s mainly about addition of much improved file and filesystem manipulation and addressing API. The new file and filesystem related API is relatively high level.\r\n\r\nPackage: `java.nio.file` and few additions to parent `java.nio`.  \r\nThis additions are for file I/O and only few minor additions to network I/O or low level file API. \r\n\r\nMost notable low-level, not necessary file related, API additions are `AsynchronousSocketChannel`, `AsynchronousServerSocketChannel` and `AsynchronousFileChannel`, which adds callbacks variants to some methods. The Asynchronous versions of are mainly a convenience addition; such mapping interfaces could have been hacked together even before, but now they are available out-of-the box in the JRE.\r\n\r\nThe new file API brings a lots of goodies - much more useful file system addressing with Path, much improved ZIP file manipulation using custom file system provider, special file attributes access, lots of convenience methods like reading whole file with one command, copying file with one command etc. But it&#39;s all file/filesystem related and all quite high level.\r\n\r\nReiterating what I have already said above, from the perspective of network sockets or low level file access, NIO == NIO.2\r\n\r\n__Relevant links__  \r\n \r\n * https://stackoverflow.com/questions/22177722/java-nio-non-blocking-channels-vs-asynchronouschannels misleadingly named questions; both synchronous and asynchronous variants of Channel and Socket are indeed non-blocking. \r\n * https://docs.oracle.com/javase/7/docs/technotes/guides/io/enhancements.html#jdk7 – mentions only the file related changes under NIO.2 section.","title":"Java: what exactly is the difference between NIO and NIO.2?","body":"<p>My take:</p>\n\n<p><strong>Short version</strong></p>\n\n<p>It’s the addition of java.nio.file package with its high level much enhanced file and file system functionality.<br>\nFrom the perspective of network sockets or low level file access, NIO == NIO.2 with a few convenience improvements.</p>\n\n<p><strong>Longer version</strong></p>\n\n<h2>Java IO</h2>\n\n<p>Package: <code>java.io</code><br>\nOld blocking I/O API  </p>\n\n<h2>Java NIO</h2>\n\n<p>Added in Java 1.4, the new non-blocking API.<br>\nPackage: <code>java.nio</code><br>\nJava non-blocking IO. Classes like <code>Selector</code>, <code>SelectorKey</code>, <code>Channel</code>.<br>\nIt seems to me the NIO was a big step up for network I/O (<code>Selector</code>, <code>SelectorKey</code>, <code>SocketChannel</code>, <code>ServerSocketChannel</code>, <code>Buffer</code>), much less for file I/O (<code>FileChannel</code> and <code>Buffer</code> only, including memory mapped files).\nThis is a fairly low level API, for both network and file parts.</p>\n\n<h2>Java NIO.2</h2>\n\n<p>Added in Java 7. It’s mainly about addition of much improved file and filesystem manipulation and addressing API. The new file and filesystem related API is relatively high level.</p>\n\n<p>Package: <code>java.nio.file</code> and few additions to parent <code>java.nio</code>.<br>\nThis additions are for file I/O and only few minor additions to network I/O or low level file API. </p>\n\n<p>Most notable low-level, not necessary file related, API additions are <code>AsynchronousSocketChannel</code>, <code>AsynchronousServerSocketChannel</code> and <code>AsynchronousFileChannel</code>, which adds callbacks variants to some methods. The Asynchronous versions of are mainly a convenience addition; such mapping interfaces could have been hacked together even before, but now they are available out-of-the box in the JRE.</p>\n\n<p>The new file API brings a lots of goodies - much more useful file system addressing with Path, much improved ZIP file manipulation using custom file system provider, special file attributes access, lots of convenience methods like reading whole file with one command, copying file with one command etc. But it's all file/filesystem related and all quite high level.</p>\n\n<p>Reiterating what I have already said above, from the perspective of network sockets or low level file access, NIO == NIO.2</p>\n\n<p><strong>Relevant links</strong>  </p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/22177722/java-nio-non-blocking-channels-vs-asynchronouschannels\">Java NIO - non-blocking channels vs AsynchronousChannels</a> misleadingly named questions; both synchronous and asynchronous variants of Channel and Socket are indeed non-blocking. </li>\n<li><a href=\"https://docs.oracle.com/javase/7/docs/technotes/guides/io/enhancements.html#jdk7\" rel=\"noreferrer\">https://docs.oracle.com/javase/7/docs/technotes/guides/io/enhancements.html#jdk7</a> – mentions only the file related changes under NIO.2 section.</li>\n</ul>\n"}],"owner":{"account_id":4908724,"reputation":943,"user_id":3954645,"display_name":"John Huynh"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40103,"favorite_count":0,"down_vote_count":0,"up_vote_count":94,"accepted_answer_id":25539157,"answer_count":3,"score":94,"last_activity_date":1671861855,"creation_date":1409176941,"question_id":25537675,"body_markdown":"I don&#39;t quite understand how different they are from each other so I have some inquiries regarding these two packages.\r\n\r\nAfter looking around a bit on Google, it seems like Oracle decided to update the `NIO` package with the newer and enhanced `NIO.2` package as part of the JDK7 release.\r\n\r\n1. How does the performance of `NIO` package compare with the `NIO.2` package?\r\n2. What are some big changes from `NIO` to `NIO.2`? (e.g. new methods, features)\r\n3. Why did the original `NIO` package have to be updated?\r\n4. Is `NIO.2` just synonymous with the `NIO` package nowadays? \r\n\r\nIt&#39;s not that I want to use the legacy package in my code, I&#39;m just really curious about this. Please tell me their differences?","title":"Java: what exactly is the difference between NIO and NIO.2?","body":"<p>I don't quite understand how different they are from each other so I have some inquiries regarding these two packages.</p>\n\n<p>After looking around a bit on Google, it seems like Oracle decided to update the <code>NIO</code> package with the newer and enhanced <code>NIO.2</code> package as part of the JDK7 release.</p>\n\n<ol>\n<li>How does the performance of <code>NIO</code> package compare with the <code>NIO.2</code> package?</li>\n<li>What are some big changes from <code>NIO</code> to <code>NIO.2</code>? (e.g. new methods, features)</li>\n<li>Why did the original <code>NIO</code> package have to be updated?</li>\n<li>Is <code>NIO.2</code> just synonymous with the <code>NIO</code> package nowadays? </li>\n</ol>\n\n<p>It's not that I want to use the legacy package in my code, I'm just really curious about this. Please tell me their differences?</p>\n"},{"tags":["java","unit-testing","testing","junit"],"comments":[{"owner":{"account_id":238580,"reputation":978,"user_id":507563,"display_name":"Scott"},"score":1,"creation_date":1552680936,"post_id":440786,"comment_id":97118429,"body_markdown":"Use **`@Jailbreak`** from the Manifold framework to directly and **type-safely** access private methods and fields. (https://medium.com/@scott_86456/jailbreak-with-manifold-4397700eda97)","body":"Use <b><code>@Jailbreak</code></b> from the Manifold framework to directly and <b>type-safely</b> access private methods and fields. (<a href=\"https://medium.com/@scott_86456/jailbreak-with-manifold-4397700eda97\" rel=\"nofollow noreferrer\">medium.com/@scott_86456/jailbreak-with-manifold-4397700eda9&zwnj;&#8203;7</a>)"}],"answers":[{"tags":[],"owner":{"account_id":2397,"reputation":179869,"user_id":3333,"accept_rate":80,"display_name":"Paul Tomblin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1231880741,"creation_date":1231880741,"answer_id":440792,"question_id":440786,"body_markdown":"Look for &quot;PrivateAccessor.invoke&quot;.  My code imports it from &quot;junitx.util&quot;, but I don&#39;t know where it came from.","title":"junit &amp; java : testing non-public methods","body":"<p>Look for \"PrivateAccessor.invoke\".  My code imports it from \"junitx.util\", but I don't know where it came from.</p>\n"},{"tags":[],"owner":{"account_id":20562,"reputation":55673,"user_id":49246,"accept_rate":73,"display_name":"starblue"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1231880837,"creation_date":1231880837,"answer_id":440796,"question_id":440786,"body_markdown":"The simplest solution is to put the JUnit tests in the same package (but different directory) and use default (i.e. package-private) visibility for the methods.\r\n\r\nAnother more complicated approach is to use reflection to access private methods.","title":"junit &amp; java : testing non-public methods","body":"<p>The simplest solution is to put the JUnit tests in the same package (but different directory) and use default (i.e. package-private) visibility for the methods.</p>\n\n<p>Another more complicated approach is to use reflection to access private methods.</p>\n"},{"tags":[],"owner":{"account_id":21632,"reputation":10223,"user_id":52734,"accept_rate":100,"display_name":"MattK"},"down_vote_count":0,"up_vote_count":94,"is_accepted":false,"score":94,"last_activity_date":1671861739,"creation_date":1231880968,"answer_id":440802,"question_id":440786,"body_markdown":"One school of thought about unit testing says that you should only be able to test public methods, because you should only be unit-testing your public API, and that by doing so, you should be covering the code in your non-public methods.  Your mileage may vary; I find that this is sometimes the case and sometimes not.\r\n\r\nWith that said, there are a couple of ways to test non-public methods:\r\n\r\n&lt;ul&gt;\r\n&lt;li&gt;You can test protected and package-scope methods by putting your unit tests in the same package as the classes they&#39;re testing.  This is a fairly common practice.&lt;/li&gt;\r\n&lt;li&gt;You can test protected methods from unit tests in another package by creating a subclass of the class under test that overrides the methods you want to test as public, and having those overridden methods call the original methods with the super keyword.  Typically, this &quot;testing subclass&quot; would be an inner class in the JUnit TestCase class doing the testing.  This is a little bit more hacky, in my opinion, but I&#39;ve done it.&lt;/li&gt;\r\n&lt;/ul&gt;","title":"junit &amp; java : testing non-public methods","body":"<p>One school of thought about unit testing says that you should only be able to test public methods, because you should only be unit-testing your public API, and that by doing so, you should be covering the code in your non-public methods.  Your mileage may vary; I find that this is sometimes the case and sometimes not.</p>\n<p>With that said, there are a couple of ways to test non-public methods:</p>\n<ul>\n<li>You can test protected and package-scope methods by putting your unit tests in the same package as the classes they're testing.  This is a fairly common practice.</li>\n<li>You can test protected methods from unit tests in another package by creating a subclass of the class under test that overrides the methods you want to test as public, and having those overridden methods call the original methods with the super keyword.  Typically, this \"testing subclass\" would be an inner class in the JUnit TestCase class doing the testing.  This is a little bit more hacky, in my opinion, but I've done it.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":7871,"reputation":5011,"user_id":13842,"accept_rate":78,"display_name":"Kent Beck"},"down_vote_count":1,"up_vote_count":41,"is_accepted":false,"score":40,"last_activity_date":1231880972,"creation_date":1231880972,"answer_id":440803,"question_id":440786,"body_markdown":"As with many unit testing problems, testing private methods is actually a design problem in disguise. Rather than try to do anything tricky to test private methods, when I find myself wishing to write tests for private methods I take a minute to ask myself, &quot;How would I need to design this so I could test it thoroughly through public methods?&quot;\r\n\r\nIf that doesn&#39;t work, JUnitX allows testing private methods, although I believe it is only available for JUnit 3.8.","title":"junit &amp; java : testing non-public methods","body":"<p>As with many unit testing problems, testing private methods is actually a design problem in disguise. Rather than try to do anything tricky to test private methods, when I find myself wishing to write tests for private methods I take a minute to ask myself, \"How would I need to design this so I could test it thoroughly through public methods?\"</p>\n\n<p>If that doesn't work, JUnitX allows testing private methods, although I believe it is only available for JUnit 3.8.</p>\n"},{"tags":[],"owner":{"account_id":14804,"reputation":1695,"user_id":30761,"display_name":"marcumka"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1231881125,"creation_date":1231881125,"answer_id":440818,"question_id":440786,"body_markdown":"If you have a significant amount of logic buried under relatively few &quot;Public&quot; entry points, you are probably violating the [Single Responsibility Principle][1].  If possible, you&#39;ll want to refactor the code into multiple classes, ultimately leading to more &quot;Public&quot; methods from which to test.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Single_responsibility_principle","title":"junit &amp; java : testing non-public methods","body":"<p>If you have a significant amount of logic buried under relatively few \"Public\" entry points, you are probably violating the <a href=\"http://en.wikipedia.org/wiki/Single_responsibility_principle\" rel=\"noreferrer\">Single Responsibility Principle</a>.  If possible, you'll want to refactor the code into multiple classes, ultimately leading to more \"Public\" methods from which to test.</p>\n"},{"tags":[],"owner":{"account_id":9867,"reputation":618181,"user_id":18393,"accept_rate":82,"display_name":"cletus"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1231882276,"creation_date":1231882276,"answer_id":440865,"question_id":440786,"body_markdown":"I nearly always use Spring in my Java projects and, as such, my objects are built for dependency injection.  They tend to be fairly granular implementations of public interfaces that are assembled within the application context.  As such, I rarely (if ever) have the need to test private methods because the class itself is small enough that it simply isn&#39;t an issue.\r\n\r\nEven when I don&#39;t use Spring I tend to adopt the same practices of assembling small and simple objects into larger and larger abstractions, each of which is relatively simple but made complex by the aggregated objects.\r\n\r\nIn my experience, having the need to unit test private methods is an indicator that what you&#39;re teesting could (and should) be simplified.\r\n\r\nThat being, if you still really feel the need:\r\n\r\n - Protected methods can be tested by subclasses;\r\n - Package private methods can be tested by putting the unit tests in the same package; and\r\n - Private methods can be unit tested by providing, for example, a package private factory proxy method.  Not ideal but private does mean private.\r\n","title":"junit &amp; java : testing non-public methods","body":"<p>I nearly always use Spring in my Java projects and, as such, my objects are built for dependency injection.  They tend to be fairly granular implementations of public interfaces that are assembled within the application context.  As such, I rarely (if ever) have the need to test private methods because the class itself is small enough that it simply isn't an issue.</p>\n\n<p>Even when I don't use Spring I tend to adopt the same practices of assembling small and simple objects into larger and larger abstractions, each of which is relatively simple but made complex by the aggregated objects.</p>\n\n<p>In my experience, having the need to unit test private methods is an indicator that what you're teesting could (and should) be simplified.</p>\n\n<p>That being, if you still really feel the need:</p>\n\n<ul>\n<li>Protected methods can be tested by subclasses;</li>\n<li>Package private methods can be tested by putting the unit tests in the same package; and</li>\n<li>Private methods can be unit tested by providing, for example, a package private factory proxy method.  Not ideal but private does mean private.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2648,"reputation":120204,"user_id":3713,"accept_rate":91,"display_name":"Spoike"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1231882865,"creation_date":1231882865,"answer_id":440902,"question_id":440786,"body_markdown":"You usually don&#39;t test private methods because they can only (normally) be tested indirectly through another public method. When you&#39;re test driving and make private methods then they are usually a result of an &quot;extract method&quot; refactoring and are already by then tested indirectly.\r\n\r\nIf you are concerned about testing a private method with lots of logic then the smartest thing you could do is to move that code into another class in a public method. Once you&#39;ve done that, the previous method that used this code can have it&#39;s testing simplified by having the functionality provided by a stub or a mock.","title":"junit &amp; java : testing non-public methods","body":"<p>You usually don't test private methods because they can only (normally) be tested indirectly through another public method. When you're test driving and make private methods then they are usually a result of an \"extract method\" refactoring and are already by then tested indirectly.</p>\n\n<p>If you are concerned about testing a private method with lots of logic then the smartest thing you could do is to move that code into another class in a public method. Once you've done that, the previous method that used this code can have it's testing simplified by having the functionality provided by a stub or a mock.</p>\n"},{"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1334254862,"creation_date":1231882940,"answer_id":440907,"question_id":440786,"body_markdown":"When you write a JUnit test, you have to do a subtle mind shift: &quot;I&#39;m a client of my own class now.&quot;  That means private is private, and you only test the behavior that the client sees.  \r\n\r\nIf the method really should be private, I&#39;d consider it a design flaw to make it visible just for the sake of testing.  You&#39;ve got to be able to infer its correct operation based on what the client sees.\r\n\r\nIn the three years that have passed since I originally wrote this, I&#39;ve started approaching the problem slightly differently, using Java reflection.\r\n\r\nThe dirty little secret is that you can test private methods in JUnit just as you would public ones, using reflection.  You can test to your heart&#39;s content and still not expose them as public to clients.\r\n","title":"junit &amp; java : testing non-public methods","body":"<p>When you write a JUnit test, you have to do a subtle mind shift: \"I'm a client of my own class now.\"  That means private is private, and you only test the behavior that the client sees.  </p>\n\n<p>If the method really should be private, I'd consider it a design flaw to make it visible just for the sake of testing.  You've got to be able to infer its correct operation based on what the client sees.</p>\n\n<p>In the three years that have passed since I originally wrote this, I've started approaching the problem slightly differently, using Java reflection.</p>\n\n<p>The dirty little secret is that you can test private methods in JUnit just as you would public ones, using reflection.  You can test to your heart's content and still not expose them as public to clients.</p>\n"},{"tags":[],"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1231884825,"creation_date":1231884825,"answer_id":441043,"question_id":440786,"body_markdown":"In agreement with just about every post--you should probably refactor and probably not test private except through public, just wanted to add a different way to think about it...\r\n\r\nThink of your class itself as a &quot;Unit&quot;, not a method.  You are testing the class and that it can maintain a valid state regardless of how it&#39;s public methods are called.\r\n\r\nCalling private methods can destroy the encapsulation and actually invalidate the tests.\r\n\r\n","title":"junit &amp; java : testing non-public methods","body":"<p>In agreement with just about every post--you should probably refactor and probably not test private except through public, just wanted to add a different way to think about it...</p>\n\n<p>Think of your class itself as a \"Unit\", not a method.  You are testing the class and that it can maintain a valid state regardless of how it's public methods are called.</p>\n\n<p>Calling private methods can destroy the encapsulation and actually invalidate the tests.</p>\n"},{"tags":[],"owner":{"account_id":10340,"reputation":55904,"user_id":19479,"accept_rate":69,"display_name":"Steve B."},"down_vote_count":2,"up_vote_count":6,"is_accepted":false,"score":4,"last_activity_date":1549913932,"creation_date":1231885096,"answer_id":441057,"question_id":440786,"body_markdown":"I&#39;ve come across the same issue, and the &quot;if it needs to be private it probably should be refactored&quot; doesn&#39;t sit right with me. \r\n\r\nSuppose you have sort of functionality that you want to separate out in some way internal to the class. For example, suppose I have something like this:\r\n\r\n    public class HolderOfSomeStrings{\r\n      \r\n        private List&lt;String&gt; internal_values;\r\n      \r\n        public List&lt;String&gt; get()\r\n        {\r\n           List&lt;String&gt; out = new ArrayList&lt;String&gt;();\r\n           for (String s:internal_values)\r\n           { \r\n               out.add(process(s));\r\n           }\r\n          return get;\r\n        }\r\n    \r\n       private static String process(String input)\r\n       {\r\n         //do something complicated here that other classes shouldn&#39;t be interested in\r\n        }\r\n\r\n    }\r\n\r\nThe point here is that junit forces me to make process public, or at least protected, or to put it in it&#39;s own utility class. But if it&#39;s some sort of internal logic of HolderOfSomeStrings, it&#39;s not at all clear to me that this is correct&amp;mdash;it seems to me that this ought to be private, and making it more visible gums up the code in some way. \r\n\r\n\r\n","title":"junit &amp; java : testing non-public methods","body":"<p>I've come across the same issue, and the \"if it needs to be private it probably should be refactored\" doesn't sit right with me. </p>\n\n<p>Suppose you have sort of functionality that you want to separate out in some way internal to the class. For example, suppose I have something like this:</p>\n\n<pre><code>public class HolderOfSomeStrings{\n\n    private List&lt;String&gt; internal_values;\n\n    public List&lt;String&gt; get()\n    {\n       List&lt;String&gt; out = new ArrayList&lt;String&gt;();\n       for (String s:internal_values)\n       { \n           out.add(process(s));\n       }\n      return get;\n    }\n\n   private static String process(String input)\n   {\n     //do something complicated here that other classes shouldn't be interested in\n    }\n\n}\n</code></pre>\n\n<p>The point here is that junit forces me to make process public, or at least protected, or to put it in it's own utility class. But if it's some sort of internal logic of HolderOfSomeStrings, it's not at all clear to me that this is correct&mdash;it seems to me that this ought to be private, and making it more visible gums up the code in some way. </p>\n"},{"tags":[],"owner":{"account_id":18780,"reputation":1030,"user_id":43396,"accept_rate":45,"display_name":"Cheese Daneish"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1231885376,"creation_date":1231885376,"answer_id":441076,"question_id":440786,"body_markdown":"Here is the &quot;probably shouldn&#39;t do it this way&quot; method that everyone else keeps harping at you about. I think it&#39;s certainly within the realm of possibility that there are reasons for doing it this way, though.  The following code will access a private field, but the code for a private method is nearly identical.\r\n\r\n    public void testPrivateField() throws InterruptedException {\r\n        Class&lt;ClassWPrivateField&gt; clazz = ClassWPrivateField.class;\r\n        try {\r\n            Field privateField = clazz.getDeclaredField(&quot;nameOfPrivateField&quot;);\r\n            privateField.setAccessible(true); // This is the line\r\n            // do stuff\r\n        } catch(NoSuchFieldException nsfe) {\r\n            nsfe.printStackTrace();\r\n            fail();\r\n        } catch(IllegalAccessException iae) {\r\n            iae.printStackTrace();\r\n            fail();\r\n        }\r\n        \r\n    }","title":"junit &amp; java : testing non-public methods","body":"<p>Here is the \"probably shouldn't do it this way\" method that everyone else keeps harping at you about. I think it's certainly within the realm of possibility that there are reasons for doing it this way, though.  The following code will access a private field, but the code for a private method is nearly identical.</p>\n\n<pre><code>public void testPrivateField() throws InterruptedException {\n    Class&lt;ClassWPrivateField&gt; clazz = ClassWPrivateField.class;\n    try {\n        Field privateField = clazz.getDeclaredField(\"nameOfPrivateField\");\n        privateField.setAccessible(true); // This is the line\n        // do stuff\n    } catch(NoSuchFieldException nsfe) {\n        nsfe.printStackTrace();\n        fail();\n    } catch(IllegalAccessException iae) {\n        iae.printStackTrace();\n        fail();\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22311,"reputation":154,"user_id":54904,"display_name":"Wil Doane"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1232231065,"creation_date":1231913555,"answer_id":442066,"question_id":440786,"body_markdown":"To borrow a thought from Andy Hunt, even your private methods must have some side effect that you&#39;re interested in. In other words, they must be called from some public method and perform an interesting task that causes the state of your object to change. Test for that state change.\r\n\r\nSuppose you have public method pubMethod and private method privMethod. When you call pubMethod, it in turn calls privMethod to perform a task (perhaps parsing a String). The pubMethod then uses this parsed String to set member variables&#39; values in some way or to influence its own return value. Test by watching for the desired effect on pubMethod&#39;s return value or on member variables (possibly by using accessors to get to them).","title":"junit &amp; java : testing non-public methods","body":"<p>To borrow a thought from Andy Hunt, even your private methods must have some side effect that you're interested in. In other words, they must be called from some public method and perform an interesting task that causes the state of your object to change. Test for that state change.</p>\n\n<p>Suppose you have public method pubMethod and private method privMethod. When you call pubMethod, it in turn calls privMethod to perform a task (perhaps parsing a String). The pubMethod then uses this parsed String to set member variables' values in some way or to influence its own return value. Test by watching for the desired effect on pubMethod's return value or on member variables (possibly by using accessors to get to them).</p>\n"},{"tags":[],"owner":{"account_id":131943,"reputation":684,"user_id":332324,"accept_rate":85,"display_name":"Pierre Gardin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1282142493,"creation_date":1282142493,"answer_id":3513268,"question_id":440786,"body_markdown":"You can use TestNG instead of JUnit, which doesn&#39;t care about the method being private or public.","title":"junit &amp; java : testing non-public methods","body":"<p>You can use TestNG instead of JUnit, which doesn't care about the method being private or public.</p>\n"},{"tags":[],"owner":{"account_id":118803,"reputation":2451,"user_id":310092,"display_name":"mezmo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1283544688,"creation_date":1283544688,"answer_id":3639276,"question_id":440786,"body_markdown":"As kind of an offshoot of this, and I&#39;m not sure where everyone comes down on the whole &quot;polyglot programming&quot; issue, but Groovy tests are runnable in Junit, and ignore the whole public/non-public issue. Side note, it was officially classified as a &quot;bug&quot;, but when they tried to fix it, there was such a storm kicked up about it that it was put back as it was originally.","title":"junit &amp; java : testing non-public methods","body":"<p>As kind of an offshoot of this, and I'm not sure where everyone comes down on the whole \"polyglot programming\" issue, but Groovy tests are runnable in Junit, and ignore the whole public/non-public issue. Side note, it was officially classified as a \"bug\", but when they tried to fix it, there was such a storm kicked up about it that it was put back as it was originally.</p>\n"},{"tags":[],"owner":{"account_id":1396336,"reputation":23,"user_id":2265721,"display_name":"gyanendra kushwaha"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1334131716,"creation_date":1334131716,"answer_id":10102174,"question_id":440786,"body_markdown":"Use reflection as above to test private methods.\r\nIf we are following TDD we should test private methods given that TDD implies that there would be no surprises later.\r\nSo one should not wait to finish his public method to test privates.\r\nAnd this helps in more granular regression testing upon re factoring.\r\n\r\n","title":"junit &amp; java : testing non-public methods","body":"<p>Use reflection as above to test private methods.\nIf we are following TDD we should test private methods given that TDD implies that there would be no surprises later.\nSo one should not wait to finish his public method to test privates.\nAnd this helps in more granular regression testing upon re factoring.</p>\n"},{"tags":[],"owner":{"account_id":2113203,"reputation":9798,"user_id":1878022,"accept_rate":96,"display_name":"VedantK"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1440569907,"creation_date":1440569907,"answer_id":32219256,"question_id":440786,"body_markdown":"&gt; DP4j Jar\r\n\r\nFor testing private methods we need to use reflection and its pointed in all answers.\r\n\r\nwell now this task is simplified with help of  [Dp4j][1]  jar.\r\n\r\n - Dp4j analyzes your code and automatically generates the Reflection API code for you.\r\n\r\n - Just add dp4j.jar to your CLASSPATH.\r\n\r\n - Dp4j.jar contains Annotation Processors, they will look for  the methods in your code that are annotated with @Test JUnit annotation.\r\n\r\n - Dp4j analyze the code of those methods, and if it finds that you are illegally accessing private methods, it will replace your invalid private method reference with equivalent code that uses Java&#39;s Reflection API.\r\n\r\nGet More details [here][2]\r\n\r\n\r\n  [1]: http://www.dp4j.com/\r\n  [2]: http://www.dp4j.com/testscript.html","title":"junit &amp; java : testing non-public methods","body":"<blockquote>\n  <p>DP4j Jar</p>\n</blockquote>\n\n<p>For testing private methods we need to use reflection and its pointed in all answers.</p>\n\n<p>well now this task is simplified with help of  <a href=\"http://www.dp4j.com/\" rel=\"nofollow\">Dp4j</a>  jar.</p>\n\n<ul>\n<li><p>Dp4j analyzes your code and automatically generates the Reflection API code for you.</p></li>\n<li><p>Just add dp4j.jar to your CLASSPATH.</p></li>\n<li><p>Dp4j.jar contains Annotation Processors, they will look for  the methods in your code that are annotated with @Test JUnit annotation.</p></li>\n<li><p>Dp4j analyze the code of those methods, and if it finds that you are illegally accessing private methods, it will replace your invalid private method reference with equivalent code that uses Java's Reflection API.</p></li>\n</ul>\n\n<p>Get More details <a href=\"http://www.dp4j.com/testscript.html\" rel=\"nofollow\">here</a></p>\n"},{"tags":[],"owner":{"account_id":124298,"reputation":4086,"user_id":319302,"accept_rate":25,"display_name":"Cagatay Kalan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1495933068,"creation_date":1495933068,"answer_id":44222874,"question_id":440786,"body_markdown":"I absolutely agree with @duffymo that code should be tested from the client&#39;s view ( though he says he quit thinking this way). However, from this point of view, private vs others have different meanings. Client of a private method is the class itself so I prefer testing them through the external (public/package-protected) API. However, protected and package-protected members are there for external clients, so I test them with fakes which inherit the owning class or which reside in the same package.","title":"junit &amp; java : testing non-public methods","body":"<p>I absolutely agree with @duffymo that code should be tested from the client's view ( though he says he quit thinking this way). However, from this point of view, private vs others have different meanings. Client of a private method is the class itself so I prefer testing them through the external (public/package-protected) API. However, protected and package-protected members are there for external clients, so I test them with fakes which inherit the owning class or which reside in the same package.</p>\n"}],"owner":{"account_id":17315,"reputation":15891,"user_id":38663,"accept_rate":27,"display_name":"jbu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82096,"favorite_count":0,"down_vote_count":0,"up_vote_count":109,"closed_date":1513254935,"answer_count":17,"score":109,"last_activity_date":1671861739,"creation_date":1231880605,"question_id":440786,"body_markdown":"JUnit will only test those methods in my class that are public.  How do I do junit testing on the ones that are not (i.e., private, protected)?  \r\n\r\nI can test them by not using junit, but I was wondering what the junit standard method was.","title":"junit &amp; java : testing non-public methods","body":"<p>JUnit will only test those methods in my class that are public.  How do I do junit testing on the ones that are not (i.e., private, protected)?  </p>\n\n<p>I can test them by not using junit, but I was wondering what the junit standard method was.</p>\n"},{"tags":["java","ssl","https","certificate","apache-httpclient-4.x"],"comments":[{"owner":{"account_id":244750,"reputation":19412,"user_id":517781,"accept_rate":82,"display_name":"Dean Hiller"},"score":18,"creation_date":1317763586,"post_id":2642777,"comment_id":10321905,"body_markdown":"I needed to do this for internal use. I really hope you are not letting users outside your company use your app since you have opened it up to man in the middle attack and they would then be vulnerable to someone hijacking their session. nonetheless, I need to do this temporary for some testing until I get the real certificate in hand.....hopefully you are doing it for the same temporary kind of reason or the app is only used internally.","body":"I needed to do this for internal use. I really hope you are not letting users outside your company use your app since you have opened it up to man in the middle attack and they would then be vulnerable to someone hijacking their session. nonetheless, I need to do this temporary for some testing until I get the real certificate in hand.....hopefully you are doing it for the same temporary kind of reason or the app is only used internally."},{"owner":{"account_id":2324672,"reputation":3747,"user_id":2039471,"accept_rate":80,"display_name":"Alexander C"},"score":0,"creation_date":1379854675,"post_id":2642777,"comment_id":27991720,"body_markdown":"I tried these solutions on 4.3 apache http client, but they are mostly deprecated. Here is not deprecated solution: http://stackoverflow.com/a/18941950/2039471","body":"I tried these solutions on 4.3 apache http client, but they are mostly deprecated. Here is not deprecated solution: <a href=\"http://stackoverflow.com/a/18941950/2039471\">stackoverflow.com/a/18941950/2039471</a>"},{"owner":{"account_id":169753,"reputation":5940,"user_id":396005,"accept_rate":100,"display_name":"Bron Davies"},"score":0,"creation_date":1430523514,"post_id":2642777,"comment_id":48112833,"body_markdown":"Java 1.6 doesn&#39;t have SNI support which is also problematic in these scenarios - if you don&#39;t construct the request properly, you could get a certificate that doesn&#39;t match the request.  See https://issues.apache.org/jira/browse/HTTPCLIENT-1119","body":"Java 1.6 doesn&#39;t have SNI support which is also problematic in these scenarios - if you don&#39;t construct the request properly, you could get a certificate that doesn&#39;t match the request.  See <a href=\"https://issues.apache.org/jira/browse/HTTPCLIENT-1119\" rel=\"nofollow noreferrer\">issues.apache.org/jira/browse/HTTPCLIENT-1119</a>"},{"owner":{"account_id":478858,"reputation":3030,"user_id":891194,"accept_rate":67,"display_name":"b4da"},"score":3,"creation_date":1508141112,"post_id":2642777,"comment_id":80476382,"body_markdown":"This question is cited in The Most Dangerous Code in the World paper as an example of fallacious reasoning. (research paper: http://www.cs.utexas.edu/~shmat/shmat_ccs12.pdf)","body":"This question is cited in The Most Dangerous Code in the World paper as an example of fallacious reasoning. (research paper: <a href=\"http://www.cs.utexas.edu/~shmat/shmat_ccs12.pdf\" rel=\"nofollow noreferrer\">cs.utexas.edu/~shmat/shmat_ccs12.pdf</a>)"}],"answers":[{"tags":[],"owner":{"account_id":291158,"reputation":4666,"user_id":593141,"display_name":"Daniel"},"down_vote_count":30,"up_vote_count":471,"is_accepted":true,"score":441,"last_activity_date":1428984768,"creation_date":1296309459,"answer_id":4837230,"question_id":2642777,"body_markdown":"**Note: Do not implement this in production code you are ever going to use on a network you do not entirely trust. Especially anything going over the public internet.** \r\n\r\nYour question is just what I want to know. After I did some searches, the conclusion is as follows.\r\n\r\nIn HttpClient way, you should create a custom class from org.apache.http.conn.ssl.SSLSocketFactory, not the one org.apache.http.conn.ssl.SSLSocketFactory\r\n itself. Some clues can be found in this post https://stackoverflow.com/questions/2899079/custom-ssl-handling-stopped-working-on-android-2-2-froyo.\r\n\r\nAn example is like  ...\r\n\r\n    import java.io.IOException;\r\n    import java.net.Socket;\r\n    import java.net.UnknownHostException;\r\n    import java.security.KeyManagementException;\r\n    import java.security.KeyStore;\r\n    import java.security.KeyStoreException;\r\n    import java.security.NoSuchAlgorithmException;\r\n    import java.security.UnrecoverableKeyException;\r\n    import java.security.cert.CertificateException;\r\n    import java.security.cert.X509Certificate;\r\n    \r\n    import javax.net.ssl.SSLContext;\r\n    import javax.net.ssl.TrustManager;\r\n    import javax.net.ssl.X509TrustManager;\r\n    \r\n    import org.apache.http.conn.ssl.SSLSocketFactory;\r\n    public class MySSLSocketFactory extends SSLSocketFactory {\r\n\t\tSSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\r\n\r\n\t\tpublic MySSLSocketFactory(KeyStore truststore) throws NoSuchAlgorithmException, KeyManagementException, KeyStoreException, UnrecoverableKeyException {\r\n\t\t\tsuper(truststore);\r\n\r\n\t\t\tTrustManager tm = new X509TrustManager() {\r\n\t\t\t\tpublic void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpublic void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpublic X509Certificate[] getAcceptedIssuers() {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tsslContext.init(null, new TrustManager[] { tm }, null);\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic Socket createSocket(Socket socket, String host, int port, boolean autoClose) throws IOException, UnknownHostException {\r\n\t\t\treturn sslContext.getSocketFactory().createSocket(socket, host, port, autoClose);\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic Socket createSocket() throws IOException {\r\n\t\t\treturn sslContext.getSocketFactory().createSocket();\r\n\t\t}\r\n\t}\r\n\r\nand use this class while creating instance of HttpClient.\r\n\r\n\tpublic HttpClient getNewHttpClient() {\r\n\t\ttry {\r\n\t\t\tKeyStore trustStore = KeyStore.getInstance(KeyStore.getDefaultType());\r\n\t\t\ttrustStore.load(null, null);\r\n\r\n\t\t\tMySSLSocketFactory sf = new MySSLSocketFactory(trustStore);\r\n\t\t\tsf.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\r\n\r\n\t\t\tHttpParams params = new BasicHttpParams();\r\n\t\t\tHttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);\r\n\t\t\tHttpProtocolParams.setContentCharset(params, HTTP.UTF_8);\r\n\r\n\t\t\tSchemeRegistry registry = new SchemeRegistry();\r\n\t\t\tregistry.register(new Scheme(&quot;http&quot;, PlainSocketFactory.getSocketFactory(), 80));\r\n\t\t\tregistry.register(new Scheme(&quot;https&quot;, sf, 443));\r\n\r\n\t\t\tClientConnectionManager ccm = new ThreadSafeClientConnManager(params, registry);\r\n\r\n\t\t\treturn new DefaultHttpClient(ccm, params);\r\n\t\t} catch (Exception e) {\r\n\t\t\treturn new DefaultHttpClient();\r\n\t\t}\r\n\t}\r\n\r\n\r\nBTW, the link below is for someone who is looking for HttpURLConnection solution.\r\nhttps://stackoverflow.com/questions/995514/https-connection-android/1000205#1000205\r\n\r\nI have tested the above two kinds of solutions on froyo, and they all work like a charm in my cases. Finally, using HttpURLConnection may face the redirect problems, but this is beyond the topic.\r\n\r\nNote: Before you decide to trust all certificates, you probably should know the site full well and won&#39;t be harmful of it to end-user.\r\n\r\nIndeed, the risk you take should be considered carefully, including the effect of hacker&#39;s mock site mentioned in the following comments that I deeply appreciated. In some situation, although it might be hard to take care of all certificates, you&#39;d better know the implicit drawbacks to trust all of them.","title":"Trusting all certificates using HttpClient over HTTPS","body":"<p><strong>Note: Do not implement this in production code you are ever going to use on a network you do not entirely trust. Especially anything going over the public internet.</strong> </p>\n\n<p>Your question is just what I want to know. After I did some searches, the conclusion is as follows.</p>\n\n<p>In HttpClient way, you should create a custom class from org.apache.http.conn.ssl.SSLSocketFactory, not the one org.apache.http.conn.ssl.SSLSocketFactory\n itself. Some clues can be found in this post <a href=\"https://stackoverflow.com/questions/2899079/custom-ssl-handling-stopped-working-on-android-2-2-froyo\">Custom SSL handling stopped working on Android 2.2 FroYo</a>.</p>\n\n<p>An example is like  ...</p>\n\n<pre><code>import java.io.IOException;\nimport java.net.Socket;\nimport java.net.UnknownHostException;\nimport java.security.KeyManagementException;\nimport java.security.KeyStore;\nimport java.security.KeyStoreException;\nimport java.security.NoSuchAlgorithmException;\nimport java.security.UnrecoverableKeyException;\nimport java.security.cert.CertificateException;\nimport java.security.cert.X509Certificate;\n\nimport javax.net.ssl.SSLContext;\nimport javax.net.ssl.TrustManager;\nimport javax.net.ssl.X509TrustManager;\n\nimport org.apache.http.conn.ssl.SSLSocketFactory;\npublic class MySSLSocketFactory extends SSLSocketFactory {\n    SSLContext sslContext = SSLContext.getInstance(\"TLS\");\n\n    public MySSLSocketFactory(KeyStore truststore) throws NoSuchAlgorithmException, KeyManagementException, KeyStoreException, UnrecoverableKeyException {\n        super(truststore);\n\n        TrustManager tm = new X509TrustManager() {\n            public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {\n            }\n\n            public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {\n            }\n\n            public X509Certificate[] getAcceptedIssuers() {\n                return null;\n            }\n        };\n\n        sslContext.init(null, new TrustManager[] { tm }, null);\n    }\n\n    @Override\n    public Socket createSocket(Socket socket, String host, int port, boolean autoClose) throws IOException, UnknownHostException {\n        return sslContext.getSocketFactory().createSocket(socket, host, port, autoClose);\n    }\n\n    @Override\n    public Socket createSocket() throws IOException {\n        return sslContext.getSocketFactory().createSocket();\n    }\n}\n</code></pre>\n\n<p>and use this class while creating instance of HttpClient.</p>\n\n<pre><code>public HttpClient getNewHttpClient() {\n    try {\n        KeyStore trustStore = KeyStore.getInstance(KeyStore.getDefaultType());\n        trustStore.load(null, null);\n\n        MySSLSocketFactory sf = new MySSLSocketFactory(trustStore);\n        sf.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\n\n        HttpParams params = new BasicHttpParams();\n        HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);\n        HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);\n\n        SchemeRegistry registry = new SchemeRegistry();\n        registry.register(new Scheme(\"http\", PlainSocketFactory.getSocketFactory(), 80));\n        registry.register(new Scheme(\"https\", sf, 443));\n\n        ClientConnectionManager ccm = new ThreadSafeClientConnManager(params, registry);\n\n        return new DefaultHttpClient(ccm, params);\n    } catch (Exception e) {\n        return new DefaultHttpClient();\n    }\n}\n</code></pre>\n\n<p>BTW, the link below is for someone who is looking for HttpURLConnection solution.\n<a href=\"https://stackoverflow.com/questions/995514/https-connection-android/1000205#1000205\">Https Connection Android</a></p>\n\n<p>I have tested the above two kinds of solutions on froyo, and they all work like a charm in my cases. Finally, using HttpURLConnection may face the redirect problems, but this is beyond the topic.</p>\n\n<p>Note: Before you decide to trust all certificates, you probably should know the site full well and won't be harmful of it to end-user.</p>\n\n<p>Indeed, the risk you take should be considered carefully, including the effect of hacker's mock site mentioned in the following comments that I deeply appreciated. In some situation, although it might be hard to take care of all certificates, you'd better know the implicit drawbacks to trust all of them.</p>\n"},{"tags":[],"owner":{"account_id":314747,"reputation":1165,"user_id":630098,"display_name":"Alok Gupta"},"down_vote_count":9,"up_vote_count":108,"is_accepted":false,"score":99,"last_activity_date":1671861516,"creation_date":1300096826,"answer_id":5297100,"question_id":2642777,"body_markdown":"Add this code before the `HttpsURLConnection` and it will be done.  I got it.\r\n\r\n    private void trustEveryone() { \r\n        try { \r\n                HttpsURLConnection.setDefaultHostnameVerifier(new HostnameVerifier(){ \r\n                        public boolean verify(String hostname, SSLSession session) { \r\n                                return true; \r\n                        }}); \r\n                SSLContext context = SSLContext.getInstance(&quot;TLS&quot;); \r\n                context.init(null, new X509TrustManager[]{new X509TrustManager(){ \r\n                        public void checkClientTrusted(X509Certificate[] chain, \r\n                                        String authType) throws CertificateException {} \r\n                        public void checkServerTrusted(X509Certificate[] chain, \r\n                                        String authType) throws CertificateException {} \r\n                        public X509Certificate[] getAcceptedIssuers() { \r\n                                return new X509Certificate[0]; \r\n                        }}}, new SecureRandom()); \r\n                HttpsURLConnection.setDefaultSSLSocketFactory( \r\n                                context.getSocketFactory()); \r\n        } catch (Exception e) { // should never happen \r\n                e.printStackTrace(); \r\n        } \r\n    }","title":"Trusting all certificates using HttpClient over HTTPS","body":"<p>Add this code before the <code>HttpsURLConnection</code> and it will be done.  I got it.</p>\n<pre><code>private void trustEveryone() { \n    try { \n            HttpsURLConnection.setDefaultHostnameVerifier(new HostnameVerifier(){ \n                    public boolean verify(String hostname, SSLSession session) { \n                            return true; \n                    }}); \n            SSLContext context = SSLContext.getInstance(&quot;TLS&quot;); \n            context.init(null, new X509TrustManager[]{new X509TrustManager(){ \n                    public void checkClientTrusted(X509Certificate[] chain, \n                                    String authType) throws CertificateException {} \n                    public void checkServerTrusted(X509Certificate[] chain, \n                                    String authType) throws CertificateException {} \n                    public X509Certificate[] getAcceptedIssuers() { \n                            return new X509Certificate[0]; \n                    }}}, new SecureRandom()); \n            HttpsURLConnection.setDefaultSSLSocketFactory( \n                            context.getSocketFactory()); \n    } catch (Exception e) { // should never happen \n            e.printStackTrace(); \n    } \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":100857,"reputation":2733,"user_id":271650,"display_name":"Dan"},"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1301525634,"creation_date":1301525634,"answer_id":5493452,"question_id":2642777,"body_markdown":"This is a bad idea.  Trusting any certificate is only (very) slightly better than using no SSL at all.  When you say &quot;I want my client to accept any certificate (because I&#39;m only ever pointing to one server)&quot; you are assuming this means that somehow pointing to &quot;one server&quot; is safe, which it&#39;s not on a public network.  \r\n\r\nYou are completely open to a man-in-the-middle attack by trusting any certificate.  Anyone can proxy your connection by establishing a separate SSL connection with you and with the end server.  The MITM then has access to your entire request and response.  Unless you didn&#39;t really need SSL in the first place (your message has nothing sensitive, and doesn&#39;t do authentication) you shouldn&#39;t trust all certificates blindly.  \r\n\r\nYou should consider adding the public cert to a jks using keytool, and using that to build your socket factory, such as this:\r\n\r\n\r\n        KeyStore ks = KeyStore.getInstance(&quot;JKS&quot;);\r\n    \r\n\t    // get user password and file input stream\r\n\t    char[] password = (&quot;mykspassword&quot;)).toCharArray();\r\n\t    ClassLoader cl = this.getClass().getClassLoader();\r\n\t\tInputStream stream = cl.getResourceAsStream(&quot;myjks.jks&quot;);\r\n\t    ks.load(stream, password);\r\n\t    stream.close();\r\n\r\n\t\tSSLContext sc = SSLContext.getInstance(&quot;TLS&quot;);\r\n\t\tKeyManagerFactory kmf = KeyManagerFactory.getInstance(&quot;SunX509&quot;);\r\n\t\tTrustManagerFactory tmf = TrustManagerFactory.getInstance(&quot;SunX509&quot;);\r\n\r\n\t\tkmf.init(ks, password);\r\n\t\ttmf.init(ks);\r\n\r\n\t\tsc.init(kmf.getKeyManagers(), tmf.getTrustManagers(),null);\r\n\t\t\r\n\t\treturn sc.getSocketFactory();\r\n\r\n\r\n\r\nThis has one caveat to watch out for.  The certificate will expire eventually, and the code will stop working at that time.  You can easily determine when this will happen by looking at the cert.","title":"Trusting all certificates using HttpClient over HTTPS","body":"<p>This is a bad idea.  Trusting any certificate is only (very) slightly better than using no SSL at all.  When you say \"I want my client to accept any certificate (because I'm only ever pointing to one server)\" you are assuming this means that somehow pointing to \"one server\" is safe, which it's not on a public network.  </p>\n\n<p>You are completely open to a man-in-the-middle attack by trusting any certificate.  Anyone can proxy your connection by establishing a separate SSL connection with you and with the end server.  The MITM then has access to your entire request and response.  Unless you didn't really need SSL in the first place (your message has nothing sensitive, and doesn't do authentication) you shouldn't trust all certificates blindly.  </p>\n\n<p>You should consider adding the public cert to a jks using keytool, and using that to build your socket factory, such as this:</p>\n\n<pre><code>    KeyStore ks = KeyStore.getInstance(\"JKS\");\n\n    // get user password and file input stream\n    char[] password = (\"mykspassword\")).toCharArray();\n    ClassLoader cl = this.getClass().getClassLoader();\n    InputStream stream = cl.getResourceAsStream(\"myjks.jks\");\n    ks.load(stream, password);\n    stream.close();\n\n    SSLContext sc = SSLContext.getInstance(\"TLS\");\n    KeyManagerFactory kmf = KeyManagerFactory.getInstance(\"SunX509\");\n    TrustManagerFactory tmf = TrustManagerFactory.getInstance(\"SunX509\");\n\n    kmf.init(ks, password);\n    tmf.init(ks);\n\n    sc.init(kmf.getKeyManagers(), tmf.getTrustManagers(),null);\n\n    return sc.getSocketFactory();\n</code></pre>\n\n<p>This has one caveat to watch out for.  The certificate will expire eventually, and the code will stop working at that time.  You can easily determine when this will happen by looking at the cert.</p>\n"},{"tags":[],"owner":{"account_id":30184,"reputation":100023,"user_id":82156,"accept_rate":65,"display_name":"emmby"},"down_vote_count":1,"up_vote_count":532,"is_accepted":false,"score":531,"last_activity_date":1476122757,"creation_date":1308259796,"answer_id":6378872,"question_id":2642777,"body_markdown":"You basically have four potential solutions to fix a &quot;Not Trusted&quot; exception on Android using httpclient:\r\n\r\n 1. Trust all certificates.  Don&#39;t do this, unless you really know what you&#39;re doing.\r\n 2. Create a custom SSLSocketFactory that trusts only your certificate.  This works as long as you know exactly which servers you&#39;re going to connect to, but as soon as you need to connect to a new server with a different SSL certificate, you&#39;ll need to update your app.\r\n 3. Create a keystore file that contains Android&#39;s &quot;master list&quot; of certificates, then add your own.  If any of those certs expire down the road, you are responsible for updating them in your app.  I can&#39;t think of a reason to do this.\r\n 4. Create a custom SSLSocketFactory that uses the built-in certificate KeyStore, but falls back on an alternate KeyStore for anything that fails to verify with the default.\r\n\r\nThis answer uses solution #4, which seems to me to be the most robust.\r\n\r\nThe solution is to use an SSLSocketFactory that can accept multiple KeyStores, allowing you to supply your own KeyStore with your own certificates.  This allows you to load additional top-level certificates such as Thawte that might be missing on some Android devices.  It also allows you to load your own self-signed certificates as well.  It will use the built-in default device certificates first, and fall back on your additional certificates only as necessary.\r\n\r\nFirst, you&#39;ll want to determine which cert you are missing in your KeyStore.  Run the following command:\r\n\r\n    openssl s_client -connect www.yourserver.com:443\r\n\r\nAnd you&#39;ll see output like the following:\r\n\r\n    Certificate chain\r\n     0 s:/O=www.yourserver.com/OU=Go to \r\n       https://www.thawte.com/repository/index.html/OU=Thawte SSL123 \r\n       certificate/OU=Domain Validated/CN=www.yourserver.com\r\n       i:/C=US/O=Thawte, Inc./OU=Domain Validated SSL/CN=Thawte DV SSL CA\r\n     1 s:/C=US/O=Thawte, Inc./OU=Domain Validated SSL/CN=Thawte DV SSL CA\r\n       i:/C=US/O=thawte, Inc./OU=Certification Services Division/OU=(c) \r\n       2006 thawte, Inc. - For authorized use only/CN=thawte Primary Root CA\r\n\r\nAs you can see, our root certificate is from Thawte.  Go to your provider&#39;s website and find the corresponding certificate.  For us, it was [here][1], and you can see that the one we needed was the one Copyright 2006.\r\n\r\nIf you&#39;re using a self-signed certificate, you didn&#39;t need to do the previous step since you already have your signing certificate. \r\n\r\nThen, create a keystore file containing the missing signing certificate.  Crazybob has [details how to do this on Android][2], but the idea is to do the following:\r\n\r\nIf you don&#39;t have it already, download the bouncy castle provider library from: http://www.bouncycastle.org/latest_releases.html. This will go on your classpath below.\r\n\r\nRun a command to extract the certificate from the server and create a pem file. In this case, mycert.pem.\r\n\r\n    echo | openssl s_client -connect ${MY_SERVER}:443 2&gt;&amp;1 | \\\r\n     sed -ne &#39;/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p&#39; &gt; mycert.pem\r\n\r\nThen run the following commands to create the keystore.\r\n\r\n    export CLASSPATH=/path/to/bouncycastle/bcprov-jdk15on-155.jar\r\n    CERTSTORE=res/raw/mystore.bks\r\n    if [ -a $CERTSTORE ]; then\r\n        rm $CERTSTORE || exit 1\r\n    fi\r\n    keytool \\\r\n          -import \\\r\n          -v \\\r\n          -trustcacerts \\\r\n          -alias 0 \\\r\n          -file &lt;(openssl x509 -in mycert.pem) \\\r\n          -keystore $CERTSTORE \\\r\n          -storetype BKS \\\r\n          -provider org.bouncycastle.jce.provider.BouncyCastleProvider \\\r\n          -providerpath /path/to/bouncycastle/bcprov-jdk15on-155.jar \\\r\n          -storepass some-password\r\n\r\nYou&#39;ll notice that the above script places the result in `res/raw/mystore.bks`.  Now you have a file that you&#39;ll load into your Android app that provides the missing certificate(s).  \r\n\r\nTo do this, register your SSLSocketFactory for the SSL scheme:\r\n\r\n    final SchemeRegistry schemeRegistry = new SchemeRegistry();\r\n    schemeRegistry.register(new Scheme(&quot;http&quot;, PlainSocketFactory.getSocketFactory(), 80));\r\n    schemeRegistry.register(new Scheme(&quot;https&quot;, createAdditionalCertsSSLSocketFactory(), 443));\r\n\r\n    // and then however you create your connection manager, I use ThreadSafeClientConnManager\r\n    final HttpParams params = new BasicHttpParams();\r\n    ...\r\n    final ThreadSafeClientConnManager cm = new ThreadSafeClientConnManager(params,schemeRegistry);\r\n\r\n\r\nTo create your SSLSocketFactory:\r\n\r\n    protected org.apache.http.conn.ssl.SSLSocketFactory createAdditionalCertsSSLSocketFactory() {\r\n        try {\r\n            final KeyStore ks = KeyStore.getInstance(&quot;BKS&quot;);\r\n\r\n            // the bks file we generated above\r\n            final InputStream in = context.getResources().openRawResource( R.raw.mystore);  \r\n            try {\r\n                // don&#39;t forget to put the password used above in strings.xml/mystore_password\r\n                ks.load(in, context.getString( R.string.mystore_password ).toCharArray());\r\n            } finally {\r\n                in.close();\r\n            }\r\n\r\n            return new AdditionalKeyStoresSSLSocketFactory(ks);\r\n\r\n        } catch( Exception e ) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n\r\nAnd finally, the AdditionalKeyStoresSSLSocketFactory code, which accepts your new KeyStore and checks if the built-in KeyStore fails to validate an SSL certificate:\r\n\r\n    /**\r\n     * Allows you to trust certificates from additional KeyStores in addition to\r\n     * the default KeyStore\r\n     */\r\n    public class AdditionalKeyStoresSSLSocketFactory extends SSLSocketFactory {\r\n        protected SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\r\n    \r\n        public AdditionalKeyStoresSSLSocketFactory(KeyStore keyStore) throws NoSuchAlgorithmException, KeyManagementException, KeyStoreException, UnrecoverableKeyException {\r\n            super(null, null, null, null, null, null);\r\n            sslContext.init(null, new TrustManager[]{new AdditionalKeyStoresTrustManager(keyStore)}, null);\r\n        }\r\n    \r\n        @Override\r\n        public Socket createSocket(Socket socket, String host, int port, boolean autoClose) throws IOException {\r\n            return sslContext.getSocketFactory().createSocket(socket, host, port, autoClose);\r\n        }\r\n    \r\n        @Override\r\n        public Socket createSocket() throws IOException {\r\n            return sslContext.getSocketFactory().createSocket();\r\n        }\r\n    \r\n    \r\n    \r\n        /**\r\n         * Based on http://download.oracle.com/javase/1.5.0/docs/guide/security/jsse/JSSERefGuide.html#X509TrustManager\r\n         */\r\n        public static class AdditionalKeyStoresTrustManager implements X509TrustManager {\r\n    \r\n            protected ArrayList&lt;X509TrustManager&gt; x509TrustManagers = new ArrayList&lt;X509TrustManager&gt;();\r\n    \r\n    \r\n            protected AdditionalKeyStoresTrustManager(KeyStore... additionalkeyStores) {\r\n                final ArrayList&lt;TrustManagerFactory&gt; factories = new ArrayList&lt;TrustManagerFactory&gt;();\r\n    \r\n                try {\r\n                    // The default Trustmanager with default keystore\r\n                    final TrustManagerFactory original = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());\r\n                    original.init((KeyStore) null);\r\n                    factories.add(original);\r\n    \r\n                    for( KeyStore keyStore : additionalkeyStores ) {\r\n                        final TrustManagerFactory additionalCerts = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());\r\n                        additionalCerts.init(keyStore);\r\n                        factories.add(additionalCerts);\r\n                    }\r\n    \r\n                } catch (Exception e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n    \r\n    \r\n    \r\n                /*\r\n                 * Iterate over the returned trustmanagers, and hold on\r\n                 * to any that are X509TrustManagers\r\n                 */\r\n                for (TrustManagerFactory tmf : factories)\r\n                    for( TrustManager tm : tmf.getTrustManagers() )\r\n                        if (tm instanceof X509TrustManager)\r\n                            x509TrustManagers.add( (X509TrustManager)tm );\r\n                    \r\n    \r\n                if( x509TrustManagers.size()==0 )\r\n                    throw new RuntimeException(&quot;Couldn&#39;t find any X509TrustManagers&quot;);\r\n    \r\n            }\r\n    \r\n            /*\r\n             * Delegate to the default trust manager.\r\n             */\r\n            public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {\r\n                final X509TrustManager defaultX509TrustManager = x509TrustManagers.get(0);\r\n                defaultX509TrustManager.checkClientTrusted(chain, authType);\r\n            }\r\n    \r\n            /*\r\n             * Loop over the trustmanagers until we find one that accepts our server\r\n             */\r\n            public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {\r\n                for( X509TrustManager tm : x509TrustManagers ) {\r\n                    try {\r\n                        tm.checkServerTrusted(chain,authType);\r\n                        return;\r\n                    } catch( CertificateException e ) {\r\n                        // ignore\r\n                    }\r\n                }\r\n                throw new CertificateException();\r\n            }\r\n    \r\n            public X509Certificate[] getAcceptedIssuers() {\r\n                final ArrayList&lt;X509Certificate&gt; list = new ArrayList&lt;X509Certificate&gt;();\r\n                for( X509TrustManager tm : x509TrustManagers )\r\n                    list.addAll(Arrays.asList(tm.getAcceptedIssuers()));\r\n                return list.toArray(new X509Certificate[list.size()]);\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\n\r\n\r\n\r\n  [1]: https://www.thawte.com/roots/index.html\r\n  [2]: http://blog.crazybob.org/2010/02/android-trusting-ssl-certificates.html\r\n\r\n\r\n\r\n","title":"Trusting all certificates using HttpClient over HTTPS","body":"<p>You basically have four potential solutions to fix a \"Not Trusted\" exception on Android using httpclient:</p>\n\n<ol>\n<li>Trust all certificates.  Don't do this, unless you really know what you're doing.</li>\n<li>Create a custom SSLSocketFactory that trusts only your certificate.  This works as long as you know exactly which servers you're going to connect to, but as soon as you need to connect to a new server with a different SSL certificate, you'll need to update your app.</li>\n<li>Create a keystore file that contains Android's \"master list\" of certificates, then add your own.  If any of those certs expire down the road, you are responsible for updating them in your app.  I can't think of a reason to do this.</li>\n<li>Create a custom SSLSocketFactory that uses the built-in certificate KeyStore, but falls back on an alternate KeyStore for anything that fails to verify with the default.</li>\n</ol>\n\n<p>This answer uses solution #4, which seems to me to be the most robust.</p>\n\n<p>The solution is to use an SSLSocketFactory that can accept multiple KeyStores, allowing you to supply your own KeyStore with your own certificates.  This allows you to load additional top-level certificates such as Thawte that might be missing on some Android devices.  It also allows you to load your own self-signed certificates as well.  It will use the built-in default device certificates first, and fall back on your additional certificates only as necessary.</p>\n\n<p>First, you'll want to determine which cert you are missing in your KeyStore.  Run the following command:</p>\n\n<pre><code>openssl s_client -connect www.yourserver.com:443\n</code></pre>\n\n<p>And you'll see output like the following:</p>\n\n<pre><code>Certificate chain\n 0 s:/O=www.yourserver.com/OU=Go to \n   https://www.thawte.com/repository/index.html/OU=Thawte SSL123 \n   certificate/OU=Domain Validated/CN=www.yourserver.com\n   i:/C=US/O=Thawte, Inc./OU=Domain Validated SSL/CN=Thawte DV SSL CA\n 1 s:/C=US/O=Thawte, Inc./OU=Domain Validated SSL/CN=Thawte DV SSL CA\n   i:/C=US/O=thawte, Inc./OU=Certification Services Division/OU=(c) \n   2006 thawte, Inc. - For authorized use only/CN=thawte Primary Root CA\n</code></pre>\n\n<p>As you can see, our root certificate is from Thawte.  Go to your provider's website and find the corresponding certificate.  For us, it was <a href=\"https://www.thawte.com/roots/index.html\" rel=\"noreferrer\">here</a>, and you can see that the one we needed was the one Copyright 2006.</p>\n\n<p>If you're using a self-signed certificate, you didn't need to do the previous step since you already have your signing certificate. </p>\n\n<p>Then, create a keystore file containing the missing signing certificate.  Crazybob has <a href=\"http://blog.crazybob.org/2010/02/android-trusting-ssl-certificates.html\" rel=\"noreferrer\">details how to do this on Android</a>, but the idea is to do the following:</p>\n\n<p>If you don't have it already, download the bouncy castle provider library from: <a href=\"http://www.bouncycastle.org/latest_releases.html\" rel=\"noreferrer\">http://www.bouncycastle.org/latest_releases.html</a>. This will go on your classpath below.</p>\n\n<p>Run a command to extract the certificate from the server and create a pem file. In this case, mycert.pem.</p>\n\n<pre><code>echo | openssl s_client -connect ${MY_SERVER}:443 2&gt;&amp;1 | \\\n sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' &gt; mycert.pem\n</code></pre>\n\n<p>Then run the following commands to create the keystore.</p>\n\n<pre><code>export CLASSPATH=/path/to/bouncycastle/bcprov-jdk15on-155.jar\nCERTSTORE=res/raw/mystore.bks\nif [ -a $CERTSTORE ]; then\n    rm $CERTSTORE || exit 1\nfi\nkeytool \\\n      -import \\\n      -v \\\n      -trustcacerts \\\n      -alias 0 \\\n      -file &lt;(openssl x509 -in mycert.pem) \\\n      -keystore $CERTSTORE \\\n      -storetype BKS \\\n      -provider org.bouncycastle.jce.provider.BouncyCastleProvider \\\n      -providerpath /path/to/bouncycastle/bcprov-jdk15on-155.jar \\\n      -storepass some-password\n</code></pre>\n\n<p>You'll notice that the above script places the result in <code>res/raw/mystore.bks</code>.  Now you have a file that you'll load into your Android app that provides the missing certificate(s).  </p>\n\n<p>To do this, register your SSLSocketFactory for the SSL scheme:</p>\n\n<pre><code>final SchemeRegistry schemeRegistry = new SchemeRegistry();\nschemeRegistry.register(new Scheme(\"http\", PlainSocketFactory.getSocketFactory(), 80));\nschemeRegistry.register(new Scheme(\"https\", createAdditionalCertsSSLSocketFactory(), 443));\n\n// and then however you create your connection manager, I use ThreadSafeClientConnManager\nfinal HttpParams params = new BasicHttpParams();\n...\nfinal ThreadSafeClientConnManager cm = new ThreadSafeClientConnManager(params,schemeRegistry);\n</code></pre>\n\n<p>To create your SSLSocketFactory:</p>\n\n<pre><code>protected org.apache.http.conn.ssl.SSLSocketFactory createAdditionalCertsSSLSocketFactory() {\n    try {\n        final KeyStore ks = KeyStore.getInstance(\"BKS\");\n\n        // the bks file we generated above\n        final InputStream in = context.getResources().openRawResource( R.raw.mystore);  \n        try {\n            // don't forget to put the password used above in strings.xml/mystore_password\n            ks.load(in, context.getString( R.string.mystore_password ).toCharArray());\n        } finally {\n            in.close();\n        }\n\n        return new AdditionalKeyStoresSSLSocketFactory(ks);\n\n    } catch( Exception e ) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n\n<p>And finally, the AdditionalKeyStoresSSLSocketFactory code, which accepts your new KeyStore and checks if the built-in KeyStore fails to validate an SSL certificate:</p>\n\n<pre><code>/**\n * Allows you to trust certificates from additional KeyStores in addition to\n * the default KeyStore\n */\npublic class AdditionalKeyStoresSSLSocketFactory extends SSLSocketFactory {\n    protected SSLContext sslContext = SSLContext.getInstance(\"TLS\");\n\n    public AdditionalKeyStoresSSLSocketFactory(KeyStore keyStore) throws NoSuchAlgorithmException, KeyManagementException, KeyStoreException, UnrecoverableKeyException {\n        super(null, null, null, null, null, null);\n        sslContext.init(null, new TrustManager[]{new AdditionalKeyStoresTrustManager(keyStore)}, null);\n    }\n\n    @Override\n    public Socket createSocket(Socket socket, String host, int port, boolean autoClose) throws IOException {\n        return sslContext.getSocketFactory().createSocket(socket, host, port, autoClose);\n    }\n\n    @Override\n    public Socket createSocket() throws IOException {\n        return sslContext.getSocketFactory().createSocket();\n    }\n\n\n\n    /**\n     * Based on http://download.oracle.com/javase/1.5.0/docs/guide/security/jsse/JSSERefGuide.html#X509TrustManager\n     */\n    public static class AdditionalKeyStoresTrustManager implements X509TrustManager {\n\n        protected ArrayList&lt;X509TrustManager&gt; x509TrustManagers = new ArrayList&lt;X509TrustManager&gt;();\n\n\n        protected AdditionalKeyStoresTrustManager(KeyStore... additionalkeyStores) {\n            final ArrayList&lt;TrustManagerFactory&gt; factories = new ArrayList&lt;TrustManagerFactory&gt;();\n\n            try {\n                // The default Trustmanager with default keystore\n                final TrustManagerFactory original = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());\n                original.init((KeyStore) null);\n                factories.add(original);\n\n                for( KeyStore keyStore : additionalkeyStores ) {\n                    final TrustManagerFactory additionalCerts = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());\n                    additionalCerts.init(keyStore);\n                    factories.add(additionalCerts);\n                }\n\n            } catch (Exception e) {\n                throw new RuntimeException(e);\n            }\n\n\n\n            /*\n             * Iterate over the returned trustmanagers, and hold on\n             * to any that are X509TrustManagers\n             */\n            for (TrustManagerFactory tmf : factories)\n                for( TrustManager tm : tmf.getTrustManagers() )\n                    if (tm instanceof X509TrustManager)\n                        x509TrustManagers.add( (X509TrustManager)tm );\n\n\n            if( x509TrustManagers.size()==0 )\n                throw new RuntimeException(\"Couldn't find any X509TrustManagers\");\n\n        }\n\n        /*\n         * Delegate to the default trust manager.\n         */\n        public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {\n            final X509TrustManager defaultX509TrustManager = x509TrustManagers.get(0);\n            defaultX509TrustManager.checkClientTrusted(chain, authType);\n        }\n\n        /*\n         * Loop over the trustmanagers until we find one that accepts our server\n         */\n        public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {\n            for( X509TrustManager tm : x509TrustManagers ) {\n                try {\n                    tm.checkServerTrusted(chain,authType);\n                    return;\n                } catch( CertificateException e ) {\n                    // ignore\n                }\n            }\n            throw new CertificateException();\n        }\n\n        public X509Certificate[] getAcceptedIssuers() {\n            final ArrayList&lt;X509Certificate&gt; list = new ArrayList&lt;X509Certificate&gt;();\n            for( X509TrustManager tm : x509TrustManagers )\n                list.addAll(Arrays.asList(tm.getAcceptedIssuers()));\n            return list.toArray(new X509Certificate[list.size()]);\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":244750,"reputation":19412,"user_id":517781,"accept_rate":82,"display_name":"Dean Hiller"},"down_vote_count":6,"up_vote_count":0,"is_accepted":false,"score":-6,"last_activity_date":1322889912,"creation_date":1317838312,"answer_id":7665711,"question_id":2642777,"body_markdown":"[Daniel&#39;s answer][1] was good except I had to change this code...\r\n\r\n        SchemeRegistry registry = new SchemeRegistry();\r\n        registry.register(new Scheme(&quot;http&quot;, PlainSocketFactory.getSocketFactory(), 80));\r\n        registry.register(new Scheme(&quot;https&quot;, sf, 443));\r\n\r\n        ClientConnectionManager ccm = new ThreadSafeClientConnManager(params, registry);\r\n\r\nto this code...\r\n\r\n        ClientConnectionManager ccm = new ThreadSafeClientConnManager(params, registry);\r\n        SchemeRegistry registry = ccm.getShemeRegistry()\r\n        registry.register(new Scheme(&quot;http&quot;, PlainSocketFactory.getSocketFactory(), 80));\r\n        registry.register(new Scheme(&quot;https&quot;, sf, 443));\r\n\r\nto get it to work.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/4837230","title":"Trusting all certificates using HttpClient over HTTPS","body":"<p><a href=\"https://stackoverflow.com/a/4837230\">Daniel's answer</a> was good except I had to change this code...</p>\n\n<pre><code>    SchemeRegistry registry = new SchemeRegistry();\n    registry.register(new Scheme(\"http\", PlainSocketFactory.getSocketFactory(), 80));\n    registry.register(new Scheme(\"https\", sf, 443));\n\n    ClientConnectionManager ccm = new ThreadSafeClientConnManager(params, registry);\n</code></pre>\n\n<p>to this code...</p>\n\n<pre><code>    ClientConnectionManager ccm = new ThreadSafeClientConnManager(params, registry);\n    SchemeRegistry registry = ccm.getShemeRegistry()\n    registry.register(new Scheme(\"http\", PlainSocketFactory.getSocketFactory(), 80));\n    registry.register(new Scheme(\"https\", sf, 443));\n</code></pre>\n\n<p>to get it to work.</p>\n"},{"tags":[],"owner":{"account_id":722762,"reputation":115,"user_id":652232,"display_name":"Joseph Valerio"},"down_vote_count":3,"up_vote_count":6,"is_accepted":false,"score":3,"last_activity_date":1321389350,"creation_date":1321389350,"answer_id":8142813,"question_id":2642777,"body_markdown":"Here is a much simple version using 4.1.2 httpclient code.  This can then be modified to any trust algorithm you see fit.\r\n\r\n   \tpublic static HttpClient getTestHttpClient() {\r\n\t    try {\r\n\t        SSLSocketFactory sf = new SSLSocketFactory(new TrustStrategy(){\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic boolean isTrusted(X509Certificate[] chain,\r\n\t\t\t\t\t\tString authType) throws CertificateException {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t        });\r\n\t        SchemeRegistry registry = new SchemeRegistry();\r\n\t        registry.register(new Scheme(&quot;https&quot;, 443, sf));\r\n\t        ClientConnectionManager ccm = new ThreadSafeClientConnManager(registry);\r\n\t        return new DefaultHttpClient(ccm);\r\n\t    } catch (Exception e) {\r\n\t        return new DefaultHttpClient();\r\n\t    }\r\n\t}","title":"Trusting all certificates using HttpClient over HTTPS","body":"<p>Here is a much simple version using 4.1.2 httpclient code.  This can then be modified to any trust algorithm you see fit.</p>\n\n<pre><code>public static HttpClient getTestHttpClient() {\n    try {\n        SSLSocketFactory sf = new SSLSocketFactory(new TrustStrategy(){\n            @Override\n            public boolean isTrusted(X509Certificate[] chain,\n                    String authType) throws CertificateException {\n                return true;\n            }\n        });\n        SchemeRegistry registry = new SchemeRegistry();\n        registry.register(new Scheme(\"https\", 443, sf));\n        ClientConnectionManager ccm = new ThreadSafeClientConnManager(registry);\n        return new DefaultHttpClient(ccm);\n    } catch (Exception e) {\n        return new DefaultHttpClient();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1242383,"reputation":31,"user_id":1204670,"display_name":"ggrandes"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1339498584,"creation_date":1329019170,"answer_id":9246319,"question_id":2642777,"body_markdown":"I&#39;m looked response from &quot;emmby&quot; (answered Jun 16 &#39;11 at 21:29), item #4: &quot;Create a custom SSLSocketFactory that uses the built-in certificate KeyStore, but falls back on an alternate KeyStore for anything that fails to verify with the default.&quot;\r\n\r\nThis is a simplified implementation. Load the system keystore &amp; merge with application keystore.\r\n\r\n\tpublic HttpClient getNewHttpClient() {\r\n\t\ttry {\r\n\t\t\tInputStream in = null;\r\n\t\t\t// Load default system keystore\r\n\t\t\tKeyStore trusted = KeyStore.getInstance(KeyStore.getDefaultType()); \r\n\t\t\ttry {\r\n\t\t\t\tin = new BufferedInputStream(new FileInputStream(System.getProperty(&quot;javax.net.ssl.trustStore&quot;))); // Normally: &quot;/system/etc/security/cacerts.bks&quot;\r\n\t\t\t\ttrusted.load(in, null); // no password is &quot;changeit&quot;\r\n\t\t\t} finally {\r\n\t\t\t\tif (in != null) {\r\n\t\t\t\t\tin.close();\r\n\t\t\t\t\tin = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// Load application keystore &amp; merge with system\r\n\t\t\ttry {\r\n\t\t\t\tKeyStore appTrusted = KeyStore.getInstance(&quot;BKS&quot;); \r\n\t\t\t\tin = context.getResources().openRawResource(R.raw.mykeystore);\r\n\t\t\t\tappTrusted.load(in, null); // no password is &quot;changeit&quot;\r\n\t\t\t\tfor (Enumeration&lt;String&gt; e = appTrusted.aliases(); e.hasMoreElements();) {\r\n\t\t\t\t\tfinal String alias = e.nextElement();\r\n\t\t\t\t\tfinal KeyStore.Entry entry = appTrusted.getEntry(alias, null);\r\n\t\t\t\t\ttrusted.setEntry(System.currentTimeMillis() + &quot;:&quot; + alias, entry, null);\r\n\t\t\t\t}\r\n\t\t\t} finally {\r\n\t\t\t\tif (in != null) {\r\n\t\t\t\t\tin.close();\r\n\t\t\t\t\tin = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tHttpParams params = new BasicHttpParams();\r\n\t\t\tHttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);\r\n\t\t\tHttpProtocolParams.setContentCharset(params, HTTP.UTF_8);\r\n\r\n\t\t\tSSLSocketFactory sf = new SSLSocketFactory(trusted);\r\n\t\t\tsf.setHostnameVerifier(SSLSocketFactory.BROWSER_COMPATIBLE_HOSTNAME_VERIFIER);\r\n\r\n\t\t\tSchemeRegistry registry = new SchemeRegistry();\r\n\t\t\tregistry.register(new Scheme(&quot;http&quot;, PlainSocketFactory.getSocketFactory(), 80));\r\n\t\t\tregistry.register(new Scheme(&quot;https&quot;, sf, 443));\r\n\r\n\t\t\tClientConnectionManager ccm = new ThreadSafeClientConnManager(params, registry);\r\n\r\n\t\t\treturn new DefaultHttpClient(ccm, params);\r\n\t\t} catch (Exception e) {\r\n\t\t\treturn new DefaultHttpClient();\r\n\t\t}\r\n\t}\r\n\r\n\r\nA simple mode to convert from JKS to BKS:\r\n\r\n    keytool -importkeystore -destkeystore cacerts.bks -deststoretype BKS -providerclass org.bouncycastle.jce.provider.BouncyCastleProvider -providerpath bcprov-jdk16-141.jar -deststorepass changeit -srcstorepass changeit -srckeystore $JAVA_HOME/jre/lib/security/cacerts -srcstoretype JKS -noprompt\r\n\r\n*Note: In Android 4.0 (ICS) the Trust Store has changed, more info: http://nelenkov.blogspot.com.es/2011/12/ics-trust-store-implementation.html","title":"Trusting all certificates using HttpClient over HTTPS","body":"<p>I'm looked response from \"emmby\" (answered Jun 16 '11 at 21:29), item #4: \"Create a custom SSLSocketFactory that uses the built-in certificate KeyStore, but falls back on an alternate KeyStore for anything that fails to verify with the default.\"</p>\n\n<p>This is a simplified implementation. Load the system keystore &amp; merge with application keystore.</p>\n\n<pre><code>public HttpClient getNewHttpClient() {\n    try {\n        InputStream in = null;\n        // Load default system keystore\n        KeyStore trusted = KeyStore.getInstance(KeyStore.getDefaultType()); \n        try {\n            in = new BufferedInputStream(new FileInputStream(System.getProperty(\"javax.net.ssl.trustStore\"))); // Normally: \"/system/etc/security/cacerts.bks\"\n            trusted.load(in, null); // no password is \"changeit\"\n        } finally {\n            if (in != null) {\n                in.close();\n                in = null;\n            }\n        }\n\n        // Load application keystore &amp; merge with system\n        try {\n            KeyStore appTrusted = KeyStore.getInstance(\"BKS\"); \n            in = context.getResources().openRawResource(R.raw.mykeystore);\n            appTrusted.load(in, null); // no password is \"changeit\"\n            for (Enumeration&lt;String&gt; e = appTrusted.aliases(); e.hasMoreElements();) {\n                final String alias = e.nextElement();\n                final KeyStore.Entry entry = appTrusted.getEntry(alias, null);\n                trusted.setEntry(System.currentTimeMillis() + \":\" + alias, entry, null);\n            }\n        } finally {\n            if (in != null) {\n                in.close();\n                in = null;\n            }\n        }\n\n        HttpParams params = new BasicHttpParams();\n        HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);\n        HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);\n\n        SSLSocketFactory sf = new SSLSocketFactory(trusted);\n        sf.setHostnameVerifier(SSLSocketFactory.BROWSER_COMPATIBLE_HOSTNAME_VERIFIER);\n\n        SchemeRegistry registry = new SchemeRegistry();\n        registry.register(new Scheme(\"http\", PlainSocketFactory.getSocketFactory(), 80));\n        registry.register(new Scheme(\"https\", sf, 443));\n\n        ClientConnectionManager ccm = new ThreadSafeClientConnManager(params, registry);\n\n        return new DefaultHttpClient(ccm, params);\n    } catch (Exception e) {\n        return new DefaultHttpClient();\n    }\n}\n</code></pre>\n\n<p>A simple mode to convert from JKS to BKS:</p>\n\n<pre><code>keytool -importkeystore -destkeystore cacerts.bks -deststoretype BKS -providerclass org.bouncycastle.jce.provider.BouncyCastleProvider -providerpath bcprov-jdk16-141.jar -deststorepass changeit -srcstorepass changeit -srckeystore $JAVA_HOME/jre/lib/security/cacerts -srcstoretype JKS -noprompt\n</code></pre>\n\n<p>*Note: In Android 4.0 (ICS) the Trust Store has changed, more info: <a href=\"http://nelenkov.blogspot.com.es/2011/12/ics-trust-store-implementation.html\" rel=\"nofollow\">http://nelenkov.blogspot.com.es/2011/12/ics-trust-store-implementation.html</a></p>\n"},{"tags":[],"owner":{"account_id":440608,"reputation":204,"user_id":830267,"display_name":"13hsoj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1337153996,"creation_date":1337153996,"answer_id":10614035,"question_id":2642777,"body_markdown":"Any body still struggling with StartCom SSL Certificates on Android 2.1 visit https://www.startssl.com/certs/ and download the ca.pem, now in the [answer][1] provided by [@emmby][2] replace \r\n\r\n    `export CLASSPATH=bcprov-jdk16-145.jar\r\n     CERTSTORE=res/raw/mystore.bks\r\n          if [ -a $CERTSTORE ]; then\r\n              rm $CERTSTORE || exit 1\r\n          fi\r\n     keytool \\\r\n      -import \\\r\n      -v \\\r\n      -trustcacerts \\\r\n      -alias 0 \\\r\n      -file &lt;(openssl x509 -in mycert.pem) \\\r\n      -keystore $CERTSTORE \\\r\n      -storetype BKS \\\r\n      -provider org.bouncycastle.jce.provider.BouncyCastleProvider \\\r\n      -providerpath /usr/share/java/bcprov.jar \\\r\n      -storepass some-password`\r\n\r\n with \r\n\r\n     `export CLASSPATH=bcprov-jdk16-145.jar\r\n     CERTSTORE=res/raw/mystore.bks\r\n          if [ -a $CERTSTORE ]; then\r\n              rm $CERTSTORE || exit 1\r\n          fi\r\n     keytool \\\r\n      -import \\\r\n      -v \\\r\n      -trustcacerts \\\r\n      -alias 0 \\\r\n      -file &lt;(openssl x509 -in ca.pem) \\\r\n      -keystore $CERTSTORE \\\r\n      -storetype BKS \\\r\n      -provider org.bouncycastle.jce.provider.BouncyCastleProvider \\\r\n      -providerpath /usr/share/java/bcprov.jar \\\r\n      -storepass some-password`\r\n\r\nShould work out of the box. I was struggling it for over a day even after a perfect answer by [@emmby][3].. Hope this helps someone...\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/6378872/830267\r\n  [2]: https://stackoverflow.com/users/82156/emmby\r\n  [3]: https://stackoverflow.com/users/82156/emmby","title":"Trusting all certificates using HttpClient over HTTPS","body":"<p>Any body still struggling with StartCom SSL Certificates on Android 2.1 visit <a href=\"https://www.startssl.com/certs/\" rel=\"nofollow noreferrer\">https://www.startssl.com/certs/</a> and download the ca.pem, now in the <a href=\"https://stackoverflow.com/a/6378872/830267\">answer</a> provided by <a href=\"https://stackoverflow.com/users/82156/emmby\">@emmby</a> replace </p>\n\n<pre><code>`export CLASSPATH=bcprov-jdk16-145.jar\n CERTSTORE=res/raw/mystore.bks\n      if [ -a $CERTSTORE ]; then\n          rm $CERTSTORE || exit 1\n      fi\n keytool \\\n  -import \\\n  -v \\\n  -trustcacerts \\\n  -alias 0 \\\n  -file &lt;(openssl x509 -in mycert.pem) \\\n  -keystore $CERTSTORE \\\n  -storetype BKS \\\n  -provider org.bouncycastle.jce.provider.BouncyCastleProvider \\\n  -providerpath /usr/share/java/bcprov.jar \\\n  -storepass some-password`\n</code></pre>\n\n<p>with </p>\n\n<pre><code> `export CLASSPATH=bcprov-jdk16-145.jar\n CERTSTORE=res/raw/mystore.bks\n      if [ -a $CERTSTORE ]; then\n          rm $CERTSTORE || exit 1\n      fi\n keytool \\\n  -import \\\n  -v \\\n  -trustcacerts \\\n  -alias 0 \\\n  -file &lt;(openssl x509 -in ca.pem) \\\n  -keystore $CERTSTORE \\\n  -storetype BKS \\\n  -provider org.bouncycastle.jce.provider.BouncyCastleProvider \\\n  -providerpath /usr/share/java/bcprov.jar \\\n  -storepass some-password`\n</code></pre>\n\n<p>Should work out of the box. I was struggling it for over a day even after a perfect answer by <a href=\"https://stackoverflow.com/users/82156/emmby\">@emmby</a>.. Hope this helps someone...</p>\n"},{"tags":[],"owner":{"account_id":1748284,"reputation":123,"user_id":1597971,"display_name":"Prabhu Periasamy"},"down_vote_count":4,"up_vote_count":13,"is_accepted":false,"score":9,"last_activity_date":1344945835,"creation_date":1344945835,"answer_id":11951889,"question_id":2642777,"body_markdown":"The API of HttpComponents has got changed. It works with the code below.\r\n\r\n\tpublic static HttpClient getTestHttpClient() {\r\n\t    try {\r\n\t        SSLSocketFactory sf = new SSLSocketFactory(new TrustStrategy(){\r\n\t            @Override\r\n\t            public boolean isTrusted(X509Certificate[] chain,\r\n\t                    String authType) throws CertificateException {\r\n\t                return true;\r\n\t            }\r\n\t        }, new AllowAllHostnameVerifier());\r\n \r\n\t        SchemeRegistry registry = new SchemeRegistry();\r\n\t        registry.register(new Scheme(&quot;https&quot;,8444, sf));\r\n\t        ClientConnectionManager ccm = new ThreadSafeClientConnManager(registry);\r\n\t        return new DefaultHttpClient(ccm);\r\n\t    } catch (Exception e) {\r\n\t    \te.printStackTrace();\r\n\t        return new DefaultHttpClient();\r\n\t    }\r\n\t}","title":"Trusting all certificates using HttpClient over HTTPS","body":"<p>The API of HttpComponents has got changed. It works with the code below.</p>\n\n<pre><code>public static HttpClient getTestHttpClient() {\n    try {\n        SSLSocketFactory sf = new SSLSocketFactory(new TrustStrategy(){\n            @Override\n            public boolean isTrusted(X509Certificate[] chain,\n                    String authType) throws CertificateException {\n                return true;\n            }\n        }, new AllowAllHostnameVerifier());\n\n        SchemeRegistry registry = new SchemeRegistry();\n        registry.register(new Scheme(\"https\",8444, sf));\n        ClientConnectionManager ccm = new ThreadSafeClientConnManager(registry);\n        return new DefaultHttpClient(ccm);\n    } catch (Exception e) {\n        e.printStackTrace();\n        return new DefaultHttpClient();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1009009,"reputation":11535,"user_id":1369016,"accept_rate":80,"display_name":"Bitcoin Cash - ADA enthusiast"},"down_vote_count":4,"up_vote_count":7,"is_accepted":false,"score":3,"last_activity_date":1355194723,"creation_date":1355194723,"answer_id":13812958,"question_id":2642777,"body_markdown":"For those who would like to allow all certificates to work (for testing purposes) over OAuth, follow these steps:\r\n\r\n1) Download the source code of the Android OAuth API here: https://github.com/kaeppler/signpost\r\n\r\n2) Find the file &quot;CommonsHttpOAuthProvider&quot; class\r\n\r\n3) Change it as below:\r\n\r\n    public class CommonsHttpOAuthProvider extends AbstractOAuthProvider {\r\n\r\n    private static final long serialVersionUID = 1L;\r\n\r\n    private transient HttpClient httpClient;\r\n\r\n    public CommonsHttpOAuthProvider(String requestTokenEndpointUrl, String accessTokenEndpointUrl,\r\n            String authorizationWebsiteUrl) {\r\n        super(requestTokenEndpointUrl, accessTokenEndpointUrl, authorizationWebsiteUrl);\r\n        \r\n        \r\n        //this.httpClient = new DefaultHttpClient();//Version implemented and that throws the famous &quot;javax.net.ssl.SSLException: Not trusted server certificate&quot; if the certificate is not signed with a CA\r\n        this.httpClient = MySSLSocketFactory.getNewHttpClient();//This will work with all certificates (for testing purposes only)\r\n    }\r\n\r\n\r\nThe &quot;MySSLSocketFactory&quot; above is based on the accepted answer. To make it even easier, here goes the complete class:\r\n\r\n    package com.netcomps.oauth_example;\r\n\r\n    import java.io.IOException;\r\n    import java.net.Socket;\r\n    import java.net.UnknownHostException;\r\n    import java.security.KeyManagementException;\r\n    import java.security.KeyStore;\r\n    import java.security.KeyStoreException;\r\n    import java.security.NoSuchAlgorithmException;\r\n    import java.security.UnrecoverableKeyException;\r\n    import java.security.cert.CertificateException;\r\n    import java.security.cert.X509Certificate;\r\n    \r\n    import javax.net.ssl.SSLContext;\r\n    import javax.net.ssl.TrustManager;\r\n    import javax.net.ssl.X509TrustManager;\r\n    \r\n    import org.apache.http.HttpVersion;\r\n    import org.apache.http.client.HttpClient;\r\n    import org.apache.http.conn.ClientConnectionManager;\r\n    import org.apache.http.conn.scheme.PlainSocketFactory;\r\n    import org.apache.http.conn.scheme.Scheme;\r\n    import org.apache.http.conn.scheme.SchemeRegistry;\r\n    import org.apache.http.conn.ssl.SSLSocketFactory;\r\n    import org.apache.http.impl.client.DefaultHttpClient;\r\n    import org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager;\r\n    import org.apache.http.params.BasicHttpParams;\r\n    import org.apache.http.params.HttpParams;\r\n    import org.apache.http.params.HttpProtocolParams;\r\n    import org.apache.http.protocol.HTTP;\r\n    \r\n    //http://stackoverflow.com/questions/2642777/trusting-all-certificates-using-httpclient-over-https\r\n    public class MySSLSocketFactory extends SSLSocketFactory {\r\n    \t\r\n        SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\r\n\r\n    public MySSLSocketFactory(KeyStore truststore) throws NoSuchAlgorithmException, KeyManagementException, KeyStoreException, UnrecoverableKeyException {\r\n       \r\n    \tsuper(truststore);\r\n        TrustManager tm = new X509TrustManager() {\r\n        \t\r\n        \t@Override\r\n            public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {\r\n            }\r\n\r\n        \t@Override\r\n            public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {\r\n            }\r\n\r\n        \t@Override\r\n            public X509Certificate[] getAcceptedIssuers() {\r\n                return null;\r\n            }\r\n        };\r\n\r\n        sslContext.init(null, new TrustManager[] { tm }, null);\r\n    }\r\n\r\n    @Override\r\n    public Socket createSocket(Socket socket, String host, int port, boolean autoClose) throws IOException, UnknownHostException {\r\n        return sslContext.getSocketFactory().createSocket(socket, host, port, autoClose);\r\n    }\r\n\r\n    @Override\r\n    public Socket createSocket() throws IOException {\r\n        return sslContext.getSocketFactory().createSocket();\r\n    }\r\n    \r\n    \r\n    \r\n    public static HttpClient getNewHttpClient() {\r\n    \t\r\n        try {\r\n            KeyStore trustStore = KeyStore.getInstance(KeyStore.getDefaultType());\r\n            trustStore.load(null, null);\r\n\r\n            SSLSocketFactory sf = new MySSLSocketFactory(trustStore);\r\n            sf.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\r\n\r\n            HttpParams params = new BasicHttpParams();\r\n            HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);\r\n            HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);\r\n\r\n            SchemeRegistry registry = new SchemeRegistry();\r\n            registry.register(new Scheme(&quot;http&quot;, PlainSocketFactory.getSocketFactory(), 80));\r\n            registry.register(new Scheme(&quot;https&quot;, sf, 443));\r\n\r\n            ClientConnectionManager ccm = new ThreadSafeClientConnManager(params, registry);\r\n\r\n            return new DefaultHttpClient(ccm, params);\r\n            \r\n        } catch (Exception e) {\r\n            return new DefaultHttpClient();\r\n        }\r\n    }\r\n}\r\n\r\n\r\nHope this helps someone.","title":"Trusting all certificates using HttpClient over HTTPS","body":"<p>For those who would like to allow all certificates to work (for testing purposes) over OAuth, follow these steps:</p>\n\n<p>1) Download the source code of the Android OAuth API here: <a href=\"https://github.com/kaeppler/signpost\" rel=\"nofollow\">https://github.com/kaeppler/signpost</a></p>\n\n<p>2) Find the file \"CommonsHttpOAuthProvider\" class</p>\n\n<p>3) Change it as below:</p>\n\n<pre><code>public class CommonsHttpOAuthProvider extends AbstractOAuthProvider {\n\nprivate static final long serialVersionUID = 1L;\n\nprivate transient HttpClient httpClient;\n\npublic CommonsHttpOAuthProvider(String requestTokenEndpointUrl, String accessTokenEndpointUrl,\n        String authorizationWebsiteUrl) {\n    super(requestTokenEndpointUrl, accessTokenEndpointUrl, authorizationWebsiteUrl);\n\n\n    //this.httpClient = new DefaultHttpClient();//Version implemented and that throws the famous \"javax.net.ssl.SSLException: Not trusted server certificate\" if the certificate is not signed with a CA\n    this.httpClient = MySSLSocketFactory.getNewHttpClient();//This will work with all certificates (for testing purposes only)\n}\n</code></pre>\n\n<p>The \"MySSLSocketFactory\" above is based on the accepted answer. To make it even easier, here goes the complete class:</p>\n\n<pre><code>package com.netcomps.oauth_example;\n\nimport java.io.IOException;\nimport java.net.Socket;\nimport java.net.UnknownHostException;\nimport java.security.KeyManagementException;\nimport java.security.KeyStore;\nimport java.security.KeyStoreException;\nimport java.security.NoSuchAlgorithmException;\nimport java.security.UnrecoverableKeyException;\nimport java.security.cert.CertificateException;\nimport java.security.cert.X509Certificate;\n\nimport javax.net.ssl.SSLContext;\nimport javax.net.ssl.TrustManager;\nimport javax.net.ssl.X509TrustManager;\n\nimport org.apache.http.HttpVersion;\nimport org.apache.http.client.HttpClient;\nimport org.apache.http.conn.ClientConnectionManager;\nimport org.apache.http.conn.scheme.PlainSocketFactory;\nimport org.apache.http.conn.scheme.Scheme;\nimport org.apache.http.conn.scheme.SchemeRegistry;\nimport org.apache.http.conn.ssl.SSLSocketFactory;\nimport org.apache.http.impl.client.DefaultHttpClient;\nimport org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager;\nimport org.apache.http.params.BasicHttpParams;\nimport org.apache.http.params.HttpParams;\nimport org.apache.http.params.HttpProtocolParams;\nimport org.apache.http.protocol.HTTP;\n\n//http://stackoverflow.com/questions/2642777/trusting-all-certificates-using-httpclient-over-https\npublic class MySSLSocketFactory extends SSLSocketFactory {\n\n    SSLContext sslContext = SSLContext.getInstance(\"TLS\");\n\npublic MySSLSocketFactory(KeyStore truststore) throws NoSuchAlgorithmException, KeyManagementException, KeyStoreException, UnrecoverableKeyException {\n\n    super(truststore);\n    TrustManager tm = new X509TrustManager() {\n\n        @Override\n        public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {\n        }\n\n        @Override\n        public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {\n        }\n\n        @Override\n        public X509Certificate[] getAcceptedIssuers() {\n            return null;\n        }\n    };\n\n    sslContext.init(null, new TrustManager[] { tm }, null);\n}\n\n@Override\npublic Socket createSocket(Socket socket, String host, int port, boolean autoClose) throws IOException, UnknownHostException {\n    return sslContext.getSocketFactory().createSocket(socket, host, port, autoClose);\n}\n\n@Override\npublic Socket createSocket() throws IOException {\n    return sslContext.getSocketFactory().createSocket();\n}\n\n\n\npublic static HttpClient getNewHttpClient() {\n\n    try {\n        KeyStore trustStore = KeyStore.getInstance(KeyStore.getDefaultType());\n        trustStore.load(null, null);\n\n        SSLSocketFactory sf = new MySSLSocketFactory(trustStore);\n        sf.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\n\n        HttpParams params = new BasicHttpParams();\n        HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);\n        HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);\n\n        SchemeRegistry registry = new SchemeRegistry();\n        registry.register(new Scheme(\"http\", PlainSocketFactory.getSocketFactory(), 80));\n        registry.register(new Scheme(\"https\", sf, 443));\n\n        ClientConnectionManager ccm = new ThreadSafeClientConnManager(params, registry);\n\n        return new DefaultHttpClient(ccm, params);\n\n    } catch (Exception e) {\n        return new DefaultHttpClient();\n    }\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Hope this helps someone.</p>\n"},{"tags":[],"owner":{"account_id":1700435,"reputation":10104,"user_id":1560673,"display_name":"koljaTM"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1366052423,"creation_date":1366052423,"answer_id":16022833,"question_id":2642777,"body_markdown":"Trusting all certificates was no real alternative for me, so I did the following to get HttpsURLConnection to trust a new certificate (see also http://nelenkov.blogspot.jp/2011/12/using-custom-certificate-trust-store-on.html).\r\n\r\n1. Get the certificate; I got this done by exporting the certificate in Firefox (click on the little lock icon, get certificate details, click export), then used [portecle](http://sourceforge.net/projects/portecle/?source=dlp) to export a truststore (BKS).\r\n\r\n2. Load the Truststore from /res/raw/geotrust_cert.bks with the following code:\r\n\r\n    \t\tfinal KeyStore trustStore = KeyStore.getInstance(&quot;BKS&quot;);\r\n\t\t\tfinal InputStream in = context.getResources().openRawResource(\r\n\t\t\t\t\tR.raw.geotrust_cert);\r\n\t\t\ttrustStore.load(in, null);\r\n\r\n\t\t\tfinal TrustManagerFactory tmf = TrustManagerFactory\r\n\t\t\t\t\t.getInstance(TrustManagerFactory.getDefaultAlgorithm());\r\n\t\t\ttmf.init(trustStore);\r\n\r\n\t\t\tfinal SSLContext sslCtx = SSLContext.getInstance(&quot;TLS&quot;);\r\n\t\t\tsslCtx.init(null, tmf.getTrustManagers(),\r\n\t\t\t\t\tnew java.security.SecureRandom());\r\n\r\n\t\t\tHttpsURLConnection.setDefaultSSLSocketFactory(sslCtx\r\n\t\t\t\t\t.getSocketFactory());\r\n","title":"Trusting all certificates using HttpClient over HTTPS","body":"<p>Trusting all certificates was no real alternative for me, so I did the following to get HttpsURLConnection to trust a new certificate (see also <a href=\"http://nelenkov.blogspot.jp/2011/12/using-custom-certificate-trust-store-on.html\" rel=\"noreferrer\">http://nelenkov.blogspot.jp/2011/12/using-custom-certificate-trust-store-on.html</a>).</p>\n\n<ol>\n<li><p>Get the certificate; I got this done by exporting the certificate in Firefox (click on the little lock icon, get certificate details, click export), then used <a href=\"http://sourceforge.net/projects/portecle/?source=dlp\" rel=\"noreferrer\">portecle</a> to export a truststore (BKS).</p></li>\n<li><p>Load the Truststore from /res/raw/geotrust_cert.bks with the following code:</p>\n\n<pre><code>    final KeyStore trustStore = KeyStore.getInstance(\"BKS\");\n    final InputStream in = context.getResources().openRawResource(\n            R.raw.geotrust_cert);\n    trustStore.load(in, null);\n\n    final TrustManagerFactory tmf = TrustManagerFactory\n            .getInstance(TrustManagerFactory.getDefaultAlgorithm());\n    tmf.init(trustStore);\n\n    final SSLContext sslCtx = SSLContext.getInstance(\"TLS\");\n    sslCtx.init(null, tmf.getTrustManagers(),\n            new java.security.SecureRandom());\n\n    HttpsURLConnection.setDefaultSSLSocketFactory(sslCtx\n            .getSocketFactory());\n</code></pre></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":2682886,"reputation":11,"user_id":2317840,"display_name":"cezarius"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1366853716,"creation_date":1366853274,"answer_id":16204945,"question_id":2642777,"body_markdown":"work with all https\r\n\r\n\thttpClient = new DefaultHttpClient();\r\n\t\r\n\tSSLContext ctx = SSLContext.getInstance(&quot;TLS&quot;);\r\n\tX509TrustManager tm = new X509TrustManager() {\r\n\t\tpublic void checkClientTrusted(X509Certificate[] xcs, String string) throws CertificateException { }\r\n\t\t\r\n\t\tpublic void checkServerTrusted(X509Certificate[] xcs, String string) throws CertificateException { }\r\n\t\t\r\n\t\tpublic X509Certificate[] getAcceptedIssuers() {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\t\r\n\tctx.init(null, new TrustManager[]{tm}, null);\r\n\tSSLSocketFactory ssf = new SSLSocketFactory(ctx, SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\r\n\t\r\n\thttpClient.getConnectionManager().getSchemeRegistry().register(new Scheme(&quot;https&quot;, 443, ssf));\r\n","title":"Trusting all certificates using HttpClient over HTTPS","body":"<p>work with all https</p>\n\n<pre><code>httpClient = new DefaultHttpClient();\n\nSSLContext ctx = SSLContext.getInstance(\"TLS\");\nX509TrustManager tm = new X509TrustManager() {\n    public void checkClientTrusted(X509Certificate[] xcs, String string) throws CertificateException { }\n\n    public void checkServerTrusted(X509Certificate[] xcs, String string) throws CertificateException { }\n\n    public X509Certificate[] getAcceptedIssuers() {\n        return null;\n    }\n};\n\nctx.init(null, new TrustManager[]{tm}, null);\nSSLSocketFactory ssf = new SSLSocketFactory(ctx, SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\n\nhttpClient.getConnectionManager().getSchemeRegistry().register(new Scheme(\"https\", 443, ssf));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1710030,"reputation":205,"user_id":1568276,"accept_rate":50,"display_name":"Hemant"},"down_vote_count":5,"up_vote_count":1,"is_accepted":false,"score":-4,"last_activity_date":1373285531,"creation_date":1373285531,"answer_id":17526301,"question_id":2642777,"body_markdown":"Simply use this - \r\n\r\n    public DefaultHttpClient wrapClient(HttpClient base) {\r\n\t    try {\r\n\t        SSLContext ctx = SSLContext.getInstance(&quot;TLS&quot;);\r\n\t        X509TrustManager tm = new X509TrustManager() {\r\n            public void checkClientTrusted(X509Certificate[] xcs, String string) throws CertificateException { }\r\n \r\n            public void checkServerTrusted(X509Certificate[] xcs, String string) throws CertificateException { }\r\n \r\n            public X509Certificate[] getAcceptedIssuers() {\r\n                return null;\r\n            }\r\n        };\r\n        ctx.init(null, new TrustManager[]{tm}, null);\r\n        SSLSocketFactory ssf = new SSLSocketFactory(ctx);\r\n        ssf.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\r\n        ClientConnectionManager ccm = base.getConnectionManager();\r\n        SchemeRegistry sr = ccm.getSchemeRegistry();\r\n        sr.register(new Scheme(&quot;https&quot;, ssf, 443));\r\n        return new DefaultHttpClient(ccm, base.getParams());\r\n    } catch (Exception ex) {\r\n        return null;\r\n    }\r\n\t}","title":"Trusting all certificates using HttpClient over HTTPS","body":"<p>Simply use this - </p>\n\n<pre><code>public DefaultHttpClient wrapClient(HttpClient base) {\n    try {\n        SSLContext ctx = SSLContext.getInstance(\"TLS\");\n        X509TrustManager tm = new X509TrustManager() {\n        public void checkClientTrusted(X509Certificate[] xcs, String string) throws CertificateException { }\n\n        public void checkServerTrusted(X509Certificate[] xcs, String string) throws CertificateException { }\n\n        public X509Certificate[] getAcceptedIssuers() {\n            return null;\n        }\n    };\n    ctx.init(null, new TrustManager[]{tm}, null);\n    SSLSocketFactory ssf = new SSLSocketFactory(ctx);\n    ssf.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\n    ClientConnectionManager ccm = base.getConnectionManager();\n    SchemeRegistry sr = ccm.getSchemeRegistry();\n    sr.register(new Scheme(\"https\", ssf, 443));\n    return new DefaultHttpClient(ccm, base.getParams());\n} catch (Exception ex) {\n    return null;\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":292951,"reputation":1346,"user_id":596014,"accept_rate":82,"display_name":"sham"},"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1379415680,"creation_date":1379415680,"answer_id":18848086,"question_id":2642777,"body_markdown":"There a many answers above but I wasn&#39;t able to get any of them working correctly (with my limited time), so for anyone else in the same situation you can try the code below which worked perfectly for my java testing purposes:\r\n\r\n        public static HttpClient wrapClient(HttpClient base) {\r\n        try {\r\n            SSLContext ctx = SSLContext.getInstance(&quot;TLS&quot;);\r\n            X509TrustManager tm = new X509TrustManager() {\r\n                public void checkClientTrusted(X509Certificate[] xcs, String string) throws CertificateException { }\r\n    \r\n                public void checkServerTrusted(X509Certificate[] xcs, String string) throws CertificateException { }\r\n    \r\n                public X509Certificate[] getAcceptedIssuers() {\r\n                    return null;\r\n                }\r\n            };\r\n            ctx.init(null, new TrustManager[]{tm}, null);\r\n            SSLSocketFactory ssf = new SSLSocketFactory(ctx);\r\n            ssf.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\r\n            ClientConnectionManager ccm = base.getConnectionManager();\r\n            SchemeRegistry sr = ccm.getSchemeRegistry();\r\n            sr.register(new Scheme(&quot;https&quot;, ssf, 443));\r\n            return new DefaultHttpClient(ccm, base.getParams());\r\n        } catch (Exception ex) {\r\n            return null;\r\n        }\r\n    }\r\n\r\nand call like:\r\n\r\n    DefaultHttpClient baseClient = new DefaultHttpClient();\r\n    HttpClient httpClient = wrapClient(baseClient );\r\n\r\nReference: http://tech.chitgoks.com/2011/04/24/how-to-avoid-javax-net-ssl-sslpeerunverifiedexception-peer-not-authenticated-problem-using-apache-httpclient/\r\n\r\n","title":"Trusting all certificates using HttpClient over HTTPS","body":"<p>There a many answers above but I wasn't able to get any of them working correctly (with my limited time), so for anyone else in the same situation you can try the code below which worked perfectly for my java testing purposes:</p>\n\n<pre><code>    public static HttpClient wrapClient(HttpClient base) {\n    try {\n        SSLContext ctx = SSLContext.getInstance(\"TLS\");\n        X509TrustManager tm = new X509TrustManager() {\n            public void checkClientTrusted(X509Certificate[] xcs, String string) throws CertificateException { }\n\n            public void checkServerTrusted(X509Certificate[] xcs, String string) throws CertificateException { }\n\n            public X509Certificate[] getAcceptedIssuers() {\n                return null;\n            }\n        };\n        ctx.init(null, new TrustManager[]{tm}, null);\n        SSLSocketFactory ssf = new SSLSocketFactory(ctx);\n        ssf.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\n        ClientConnectionManager ccm = base.getConnectionManager();\n        SchemeRegistry sr = ccm.getSchemeRegistry();\n        sr.register(new Scheme(\"https\", ssf, 443));\n        return new DefaultHttpClient(ccm, base.getParams());\n    } catch (Exception ex) {\n        return null;\n    }\n}\n</code></pre>\n\n<p>and call like:</p>\n\n<pre><code>DefaultHttpClient baseClient = new DefaultHttpClient();\nHttpClient httpClient = wrapClient(baseClient );\n</code></pre>\n\n<p>Reference: <a href=\"http://tech.chitgoks.com/2011/04/24/how-to-avoid-javax-net-ssl-sslpeerunverifiedexception-peer-not-authenticated-problem-using-apache-httpclient/\" rel=\"nofollow\">http://tech.chitgoks.com/2011/04/24/how-to-avoid-javax-net-ssl-sslpeerunverifiedexception-peer-not-authenticated-problem-using-apache-httpclient/</a></p>\n"},{"tags":[],"owner":{"account_id":1690563,"reputation":111,"user_id":1553004,"display_name":"Robert Blair"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1385500661,"creation_date":1385500661,"answer_id":20228162,"question_id":2642777,"body_markdown":"The code above in https://stackoverflow.com/a/6378872/1553004 is correct, except it MUST also call the hostname verifier:\r\n\r\n        @Override\r\n    public Socket createSocket(Socket socket, String host, int port, boolean autoClose) throws IOException {\r\n        SSLSocket sslSocket = (SSLSocket)sslContext.getSocketFactory().createSocket(socket, host, port, autoClose);\r\n        getHostnameVerifier().verify(host, sslSocket);\r\n        return sslSocket;\r\n    }\r\nI signed up to stackoverflow expressly to add this fix.  Heed my warning!","title":"Trusting all certificates using HttpClient over HTTPS","body":"<p>The code above in <a href=\"https://stackoverflow.com/a/6378872/1553004\">https://stackoverflow.com/a/6378872/1553004</a> is correct, except it MUST also call the hostname verifier:</p>\n\n<pre><code>    @Override\npublic Socket createSocket(Socket socket, String host, int port, boolean autoClose) throws IOException {\n    SSLSocket sslSocket = (SSLSocket)sslContext.getSocketFactory().createSocket(socket, host, port, autoClose);\n    getHostnameVerifier().verify(host, sslSocket);\n    return sslSocket;\n}\n</code></pre>\n\n<p>I signed up to stackoverflow expressly to add this fix.  Heed my warning!</p>\n"},{"tags":[],"owner":{"account_id":192468,"reputation":1446,"user_id":433626,"display_name":"hfmanson"},"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1423043768,"creation_date":1423043768,"answer_id":28318375,"question_id":2642777,"body_markdown":"You can disable HttpURLConnection SSL checking for testing purposes this way since API 8:\r\n\r\n        HttpURLConnection conn = (HttpURLConnection) url.openConnection();\r\n        if (conn instanceof HttpsURLConnection) {\r\n        \tHttpsURLConnection httpsConn = (HttpsURLConnection) conn;\r\n        \thttpsConn.setSSLSocketFactory(SSLCertificateSocketFactory.getInsecure(0, null));\r\n        \thttpsConn.setHostnameVerifier(new AllowAllHostnameVerifier());\r\n        }\r\n","title":"Trusting all certificates using HttpClient over HTTPS","body":"<p>You can disable HttpURLConnection SSL checking for testing purposes this way since API 8:</p>\n\n<pre><code>    HttpURLConnection conn = (HttpURLConnection) url.openConnection();\n    if (conn instanceof HttpsURLConnection) {\n        HttpsURLConnection httpsConn = (HttpsURLConnection) conn;\n        httpsConn.setSSLSocketFactory(SSLCertificateSocketFactory.getInsecure(0, null));\n        httpsConn.setHostnameVerifier(new AllowAllHostnameVerifier());\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":35074,"reputation":8877,"user_id":99248,"accept_rate":38,"display_name":"raisercostin"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1464627632,"creation_date":1464627632,"answer_id":37530625,"question_id":2642777,"body_markdown":"I&#39;m adding a response for those that use the httpclient-4.5, and probably works for 4.4 as well.\r\n\r\n\r\n    import java.security.cert.CertificateException;\r\n    import java.security.cert.X509Certificate;\r\n    \r\n    import org.apache.http.HttpResponse;\r\n    import org.apache.http.client.HttpClient;\r\n    import org.apache.http.client.HttpResponseException;\r\n    import org.apache.http.client.fluent.ContentResponseHandler;\r\n    import org.apache.http.client.methods.HttpPost;\r\n    import org.apache.http.conn.ssl.NoopHostnameVerifier;\r\n    import org.apache.http.conn.ssl.SSLConnectionSocketFactory;\r\n    import org.apache.http.conn.ssl.TrustStrategy;\r\n    import org.apache.http.impl.client.CloseableHttpClient;\r\n    import org.apache.http.impl.client.HttpClients;\r\n    import org.apache.http.ssl.SSLContextBuilder;\r\n\r\n\r\n\r\n    public class HttpClientUtils{\r\n\r\n    public static HttpClient getHttpClientWithoutSslValidation_UsingHttpClient_4_5_2() {\r\n    \ttry {\r\n    \t\tSSLContextBuilder builder = new SSLContextBuilder();\r\n    \t\tbuilder.loadTrustMaterial(null, new TrustStrategy() {\r\n    \t\t\t@Override\r\n    \t\t\tpublic boolean isTrusted(X509Certificate[] chain, String authType) throws CertificateException {\r\n    \t\t\t\treturn true;\r\n    \t\t\t}\r\n    \t\t});\r\n    \t\tSSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(builder.build(), new NoopHostnameVerifier());\r\n    \t\tCloseableHttpClient httpclient = HttpClients.custom().setSSLSocketFactory(sslsf).build(); \r\n    \t\treturn httpclient;\r\n    \t} catch (Exception e) {\r\n    \t\tthrow new RuntimeException(e);\r\n    \t}\r\n    }\r\n    }","title":"Trusting all certificates using HttpClient over HTTPS","body":"<p>I'm adding a response for those that use the httpclient-4.5, and probably works for 4.4 as well.</p>\n\n<pre><code>import java.security.cert.CertificateException;\nimport java.security.cert.X509Certificate;\n\nimport org.apache.http.HttpResponse;\nimport org.apache.http.client.HttpClient;\nimport org.apache.http.client.HttpResponseException;\nimport org.apache.http.client.fluent.ContentResponseHandler;\nimport org.apache.http.client.methods.HttpPost;\nimport org.apache.http.conn.ssl.NoopHostnameVerifier;\nimport org.apache.http.conn.ssl.SSLConnectionSocketFactory;\nimport org.apache.http.conn.ssl.TrustStrategy;\nimport org.apache.http.impl.client.CloseableHttpClient;\nimport org.apache.http.impl.client.HttpClients;\nimport org.apache.http.ssl.SSLContextBuilder;\n\n\n\npublic class HttpClientUtils{\n\npublic static HttpClient getHttpClientWithoutSslValidation_UsingHttpClient_4_5_2() {\n    try {\n        SSLContextBuilder builder = new SSLContextBuilder();\n        builder.loadTrustMaterial(null, new TrustStrategy() {\n            @Override\n            public boolean isTrusted(X509Certificate[] chain, String authType) throws CertificateException {\n                return true;\n            }\n        });\n        SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(builder.build(), new NoopHostnameVerifier());\n        CloseableHttpClient httpclient = HttpClients.custom().setSSLSocketFactory(sslsf).build(); \n        return httpclient;\n    } catch (Exception e) {\n        throw new RuntimeException(e);\n    }\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8529555,"reputation":115,"user_id":6393766,"display_name":"Baiju Sharma"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1525260928,"creation_date":1469709373,"answer_id":38636563,"question_id":2642777,"body_markdown":"I used this and It works for me on all OS.\r\n\r\n    /**\r\n     * Disables the SSL certificate checking for new instances of {@link HttpsURLConnection} This has been created to\r\n     * aid testing on a local box, not for use on production.\r\n     */\r\n\r\n\r\n    private static void disableSSLCertificateChecking() {\r\n        TrustManager[] trustAllCerts = new TrustManager[] { new X509TrustManager() {\r\n            public X509Certificate[] getAcceptedIssuers() {\r\n                return null;\r\n            }\r\n\r\n            @Override\r\n            public void checkClientTrusted(X509Certificate[] arg0, String arg1) throws CertificateException {\r\n                // Not implemented\r\n            }\r\n\r\n            @Override\r\n            public void checkServerTrusted(X509Certificate[] arg0, String arg1) throws CertificateException {\r\n                // Not implemented\r\n            }\r\n        } };\r\n\r\n        try {\r\n            SSLContext sc = SSLContext.getInstance(&quot;TLS&quot;);\r\n\r\n            sc.init(null, trustAllCerts, new java.security.SecureRandom());\r\n\r\n            HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\r\n        } catch (KeyManagementException e) {\r\n            e.printStackTrace();\r\n        } catch (NoSuchAlgorithmException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }","title":"Trusting all certificates using HttpClient over HTTPS","body":"<p>I used this and It works for me on all OS.</p>\n\n<pre><code>/**\n * Disables the SSL certificate checking for new instances of {@link HttpsURLConnection} This has been created to\n * aid testing on a local box, not for use on production.\n */\n\n\nprivate static void disableSSLCertificateChecking() {\n    TrustManager[] trustAllCerts = new TrustManager[] { new X509TrustManager() {\n        public X509Certificate[] getAcceptedIssuers() {\n            return null;\n        }\n\n        @Override\n        public void checkClientTrusted(X509Certificate[] arg0, String arg1) throws CertificateException {\n            // Not implemented\n        }\n\n        @Override\n        public void checkServerTrusted(X509Certificate[] arg0, String arg1) throws CertificateException {\n            // Not implemented\n        }\n    } };\n\n    try {\n        SSLContext sc = SSLContext.getInstance(\"TLS\");\n\n        sc.init(null, trustAllCerts, new java.security.SecureRandom());\n\n        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\n    } catch (KeyManagementException e) {\n        e.printStackTrace();\n    } catch (NoSuchAlgorithmException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9689717,"reputation":251,"user_id":7188152,"display_name":"Ayman Hussain"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1479713828,"creation_date":1479713758,"answer_id":40714946,"question_id":2642777,"body_markdown":"Just adding `-Dtrust_all_cert=true` to VM arguments should do. This argument tells java to ignore certificate checks.","title":"Trusting all certificates using HttpClient over HTTPS","body":"<p>Just adding <code>-Dtrust_all_cert=true</code> to VM arguments should do. This argument tells java to ignore certificate checks.</p>\n"},{"tags":[],"owner":{"account_id":9283001,"reputation":3209,"user_id":6893709,"accept_rate":0,"display_name":"Ali Bagheri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1526218719,"creation_date":1526218719,"answer_id":50316726,"question_id":2642777,"body_markdown":"use this class\r\n\r\n    public class WCFs\r\n    {\r\n\t\t//  https://192.168.30.8/myservice.svc?wsdl\r\n\tprivate static final String NAMESPACE = &quot;http://tempuri.org/&quot;;\r\n\tprivate static final String URL = &quot;192.168.30.8&quot;;\r\n\tprivate static final String SERVICE = &quot;/myservice.svc?wsdl&quot;;\r\n\tprivate static String SOAP_ACTION = &quot;http://tempuri.org/iWCFserviceMe/&quot;;\r\n\t\r\n\t\r\n\tpublic static Thread myMethod(Runnable rp)\r\n\t{\r\n\t\tString METHOD_NAME = &quot;myMethod&quot;;\r\n\t\t\r\n\t\tSoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);\r\n\t\t\r\n\t\trequest.addProperty(&quot;Message&quot;, &quot;Https WCF Running...&quot;);\r\n\t\treturn _call(rp,METHOD_NAME, request);\r\n\t}\r\n\t\r\n\tprotected static HandlerThread _call(final RunProcess rp,final String METHOD_NAME, SoapObject soapReq)\r\n\t{\r\n\t\tfinal SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);\r\n\t\tint TimeOut = 5*1000;\r\n\t\t\r\n\t\tenvelope.dotNet = true;\r\n\t\tenvelope.bodyOut = soapReq;\r\n\t\tenvelope.setOutputSoapObject(soapReq);\r\n\t\t\r\n\t\tfinal HttpsTransportSE httpTransport_net = new HttpsTransportSE(URL, 443, SERVICE, TimeOut);\r\n\t\t\r\n\t\ttry\r\n\t\t{\r\n\t\t\tHttpsURLConnection.setDefaultHostnameVerifier(new HostnameVerifier() // use this section if crt file is handmake\r\n\t\t\t{\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic boolean verify(String hostname, SSLSession session)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tKeyStore k = getFromRaw(R.raw.key, &quot;PKCS12&quot;, &quot;password&quot;);\r\n\t\t\t((HttpsServiceConnectionSE) httpTransport_net.getServiceConnection()).setSSLSocketFactory(getSSLSocketFactory(k, &quot;SSL&quot;));\r\n\t\t\t\r\n\t\t\r\n\t\t}\r\n\t\tcatch(Exception e){}\r\n\t\t\r\n\t\tHandlerThread thread = new HandlerThread(&quot;wcfTd&quot;+ Generator.getRandomNumber())\r\n\t\t{\r\n\t\t\t@Override\r\n\t\t\tpublic void run()\r\n\t\t\t{\r\n\t\t\t\tHandler h = new Handler(Looper.getMainLooper());\r\n\t\t\t\tObject response = null;\r\n\t\t\t\t\r\n\t\t\t\tfor(int i=0; i&lt;4; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tresponse = send(envelope, httpTransport_net , METHOD_NAME, null);\r\n\t\t\t\t\r\n\t\t\t\t\ttry\r\n\t\t\t\t\t{if(Thread.currentThread().isInterrupted()) return;}catch(Exception e){}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(response != null)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\r\n\t\t\t\t\tThreadHelper.threadSleep(250);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(response != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(rp != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trp.setArguments(response.toString());\r\n\t\t\t\t\t\th.post(rp);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tif(Thread.currentThread().isInterrupted())\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(rp != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trp.setExceptionState(true);\r\n\t\t\t\t\t\th.post(rp);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tThreadHelper.stopThread(this);\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\tthread.start();\r\n\t\t\r\n\t\treturn thread;\r\n\t}\r\n\t\r\n\t\r\n\tprivate static Object send(SoapSerializationEnvelope envelope, HttpTransportSE androidHttpTransport, String METHOD_NAME, List&lt;HeaderProperty&gt; headerList)\r\n\t{\r\n\t\ttry\r\n\t\t{\r\n\t\t\tif(headerList != null)\r\n\t\t\t\tandroidHttpTransport.call(SOAP_ACTION + METHOD_NAME, envelope, headerList);\r\n\t\t\telse\r\n\t\t\t\tandroidHttpTransport.call(SOAP_ACTION + METHOD_NAME, envelope);\r\n\t\t\t\r\n\t\t\tObject res = envelope.getResponse();\r\n\t\t\t\r\n\t\t\tif(res instanceof SoapPrimitive)\r\n\t\t\t\treturn (SoapPrimitive) envelope.getResponse();\r\n\t\t\telse if(res instanceof SoapObject)\r\n\t\t\t\treturn ((SoapObject) envelope.getResponse());\r\n\t\t}\r\n\t\tcatch(Exception e)\r\n\t\t{}\r\n\t\t\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\tpublic static KeyStore getFromRaw(@RawRes int id, String algorithm, String filePassword)\r\n\t{\r\n\t\ttry\r\n\t\t{\r\n\t\t\tInputStream inputStream = ResourceMaster.openRaw(id);\r\n\t\t\tKeyStore keystore = KeyStore.getInstance(algorithm);\r\n\t\t\tkeystore.load(inputStream, filePassword.toCharArray());\r\n\t\t\tinputStream.close();\r\n\t\t\t\r\n\t\t\treturn keystore;\r\n\t\t}\r\n\t\tcatch(Exception e)\r\n\t\t{}\r\n\t\t\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\tpublic static SSLSocketFactory getSSLSocketFactory(KeyStore trustKey, String SSLAlgorithm)\r\n\t{\r\n\t\ttry\r\n\t\t{\r\n\t\t\tTrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());\r\n\t\t\ttmf.init(trustKey);\r\n\t\t\t\r\n\t\t\tSSLContext context = SSLContext.getInstance(SSLAlgorithm);//&quot;SSL&quot; &quot;TLS&quot;\r\n\t\t\tcontext.init(null, tmf.getTrustManagers(), null);\r\n\t\t\t\r\n\t\t\treturn context.getSocketFactory();\r\n\t\t}\r\n\t\tcatch(Exception e){}\r\n\t\t\r\n\t\treturn null;\r\n\t}\r\n}","title":"Trusting all certificates using HttpClient over HTTPS","body":"<p>use this class</p>\n\n<pre><code>public class WCFs\n{\n    //  https://192.168.30.8/myservice.svc?wsdl\nprivate static final String NAMESPACE = \"http://tempuri.org/\";\nprivate static final String URL = \"192.168.30.8\";\nprivate static final String SERVICE = \"/myservice.svc?wsdl\";\nprivate static String SOAP_ACTION = \"http://tempuri.org/iWCFserviceMe/\";\n\n\npublic static Thread myMethod(Runnable rp)\n{\n    String METHOD_NAME = \"myMethod\";\n\n    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);\n\n    request.addProperty(\"Message\", \"Https WCF Running...\");\n    return _call(rp,METHOD_NAME, request);\n}\n\nprotected static HandlerThread _call(final RunProcess rp,final String METHOD_NAME, SoapObject soapReq)\n{\n    final SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);\n    int TimeOut = 5*1000;\n\n    envelope.dotNet = true;\n    envelope.bodyOut = soapReq;\n    envelope.setOutputSoapObject(soapReq);\n\n    final HttpsTransportSE httpTransport_net = new HttpsTransportSE(URL, 443, SERVICE, TimeOut);\n\n    try\n    {\n        HttpsURLConnection.setDefaultHostnameVerifier(new HostnameVerifier() // use this section if crt file is handmake\n        {\n            @Override\n            public boolean verify(String hostname, SSLSession session)\n            {\n                return true;\n            }\n        });\n\n        KeyStore k = getFromRaw(R.raw.key, \"PKCS12\", \"password\");\n        ((HttpsServiceConnectionSE) httpTransport_net.getServiceConnection()).setSSLSocketFactory(getSSLSocketFactory(k, \"SSL\"));\n\n\n    }\n    catch(Exception e){}\n\n    HandlerThread thread = new HandlerThread(\"wcfTd\"+ Generator.getRandomNumber())\n    {\n        @Override\n        public void run()\n        {\n            Handler h = new Handler(Looper.getMainLooper());\n            Object response = null;\n\n            for(int i=0; i&lt;4; i++)\n            {\n                response = send(envelope, httpTransport_net , METHOD_NAME, null);\n\n                try\n                {if(Thread.currentThread().isInterrupted()) return;}catch(Exception e){}\n\n                if(response != null)\n                    break;\n\n                ThreadHelper.threadSleep(250);\n            }\n\n            if(response != null)\n            {\n                if(rp != null)\n                {\n                    rp.setArguments(response.toString());\n                    h.post(rp);\n                }\n            }\n            else\n            {\n                if(Thread.currentThread().isInterrupted())\n                    return;\n\n                if(rp != null)\n                {\n                    rp.setExceptionState(true);\n                    h.post(rp);\n                }\n            }\n\n            ThreadHelper.stopThread(this);\n        }\n    };\n\n    thread.start();\n\n    return thread;\n}\n\n\nprivate static Object send(SoapSerializationEnvelope envelope, HttpTransportSE androidHttpTransport, String METHOD_NAME, List&lt;HeaderProperty&gt; headerList)\n{\n    try\n    {\n        if(headerList != null)\n            androidHttpTransport.call(SOAP_ACTION + METHOD_NAME, envelope, headerList);\n        else\n            androidHttpTransport.call(SOAP_ACTION + METHOD_NAME, envelope);\n\n        Object res = envelope.getResponse();\n\n        if(res instanceof SoapPrimitive)\n            return (SoapPrimitive) envelope.getResponse();\n        else if(res instanceof SoapObject)\n            return ((SoapObject) envelope.getResponse());\n    }\n    catch(Exception e)\n    {}\n\n    return null;\n}\n\npublic static KeyStore getFromRaw(@RawRes int id, String algorithm, String filePassword)\n{\n    try\n    {\n        InputStream inputStream = ResourceMaster.openRaw(id);\n        KeyStore keystore = KeyStore.getInstance(algorithm);\n        keystore.load(inputStream, filePassword.toCharArray());\n        inputStream.close();\n\n        return keystore;\n    }\n    catch(Exception e)\n    {}\n\n    return null;\n}\n\npublic static SSLSocketFactory getSSLSocketFactory(KeyStore trustKey, String SSLAlgorithm)\n{\n    try\n    {\n        TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());\n        tmf.init(trustKey);\n\n        SSLContext context = SSLContext.getInstance(SSLAlgorithm);//\"SSL\" \"TLS\"\n        context.init(null, tmf.getTrustManagers(), null);\n\n        return context.getSocketFactory();\n    }\n    catch(Exception e){}\n\n    return null;\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":14877978,"reputation":1,"user_id":10743524,"display_name":"vinothswami"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1555486453,"creation_date":1555485218,"answer_id":55721889,"question_id":2642777,"body_markdown":"[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gIEFY.png\r\n\r\nA sspi failed in xamarin android.\r\n\r\nI found this solution; put this code before you hit on an HTTPS link\r\n\r\n    const SslProtocols _Tls12 = (SslProtocols)0x00000C00;\r\n    const SecurityProtocolType Tls12 = (SecurityProtocolType)_Tls12;\r\n    ServicePointManager.SecurityProtocol = Tls12;","title":"Trusting all certificates using HttpClient over HTTPS","body":"<p><a href=\"https://i.stack.imgur.com/gIEFY.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>A sspi failed in xamarin android.</p>\n\n<p>I found this solution; put this code before you hit on an HTTPS link</p>\n\n<pre><code>const SslProtocols _Tls12 = (SslProtocols)0x00000C00;\nconst SecurityProtocolType Tls12 = (SecurityProtocolType)_Tls12;\nServicePointManager.SecurityProtocol = Tls12;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9107988,"reputation":3190,"user_id":6777695,"display_name":"Hakan54"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1634544463,"creation_date":1618178539,"answer_id":67050581,"question_id":2642777,"body_markdown":"There are a-lot alternatives for this use case. If you don&#39;t want to have any custom code in your code base such as custom `TrustManager` or custom `SSLSocketFactory` I would suggest to try [GitHub - SSLContext Kickstart][1] and the following code snippet:\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.github.hakky54&lt;/groupId&gt;\r\n    &lt;artifactId&gt;sslcontext-kickstart&lt;/artifactId&gt;\r\n    &lt;version&gt;7.0.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n**SSL configuration**\r\n```java\r\nSSLFactory sslFactory = SSLFactory.builder()\r\n    .withUnsafeTrustMaterial()\r\n    .withUnsafeHostnameVerifier()\r\n    .build();\r\n\r\nSSLSocketFactory sslSocketFactory = sslFactory.getSslSocketFactory();\r\n```\r\n\r\n**HttpClient configuration**\r\n```\r\nHttpParams params = new BasicHttpParams();\r\nHttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);\r\nHttpProtocolParams.setContentCharset(params, HTTP.UTF_8);\r\n\r\nSchemeRegistry registry = new SchemeRegistry();\r\nregistry.register(new Scheme(&quot;https&quot;, sslSocketFactory, 443));\r\n\r\nClientConnectionManager ccm = new ThreadSafeClientConnManager(params, registry);\r\n\r\nHttpClient httpClient = new DefaultHttpClient(ccm, params);\r\n```\r\n\r\n**HttpsUrlConnection**\r\n```java\r\nHttpsURLConnection.setDefaultSSLSocketFactory(sslSocketFactory); \r\n```\r\n\r\nI also need to give some disclaimer, I am the maintainer of the library.\r\n\r\n\r\n  [1]: https://github.com/Hakky54/sslcontext-kickstart","title":"Trusting all certificates using HttpClient over HTTPS","body":"<p>There are a-lot alternatives for this use case. If you don't want to have any custom code in your code base such as custom <code>TrustManager</code> or custom <code>SSLSocketFactory</code> I would suggest to try <a href=\"https://github.com/Hakky54/sslcontext-kickstart\" rel=\"nofollow noreferrer\">GitHub - SSLContext Kickstart</a> and the following code snippet:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.github.hakky54&lt;/groupId&gt;\n    &lt;artifactId&gt;sslcontext-kickstart&lt;/artifactId&gt;\n    &lt;version&gt;7.0.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>SSL configuration</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>SSLFactory sslFactory = SSLFactory.builder()\n    .withUnsafeTrustMaterial()\n    .withUnsafeHostnameVerifier()\n    .build();\n\nSSLSocketFactory sslSocketFactory = sslFactory.getSslSocketFactory();\n</code></pre>\n<p><strong>HttpClient configuration</strong></p>\n<pre><code>HttpParams params = new BasicHttpParams();\nHttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);\nHttpProtocolParams.setContentCharset(params, HTTP.UTF_8);\n\nSchemeRegistry registry = new SchemeRegistry();\nregistry.register(new Scheme(&quot;https&quot;, sslSocketFactory, 443));\n\nClientConnectionManager ccm = new ThreadSafeClientConnManager(params, registry);\n\nHttpClient httpClient = new DefaultHttpClient(ccm, params);\n</code></pre>\n<p><strong>HttpsUrlConnection</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>HttpsURLConnection.setDefaultSSLSocketFactory(sslSocketFactory); \n</code></pre>\n<p>I also need to give some disclaimer, I am the maintainer of the library.</p>\n"}],"owner":{"account_id":118617,"reputation":5088,"user_id":309769,"accept_rate":80,"display_name":"harrisonlee"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":807263,"favorite_count":0,"down_vote_count":7,"up_vote_count":439,"accepted_answer_id":4837230,"answer_count":22,"score":432,"last_activity_date":1671861516,"creation_date":1271306489,"question_id":2642777,"body_markdown":"Recently posted a question regarding the `HttpClient` over Https ([found here][1]).  I&#39;ve made some headway, but I&#39;ve run into new issues. As with my last problem, I can&#39;t seem to find an example anywhere that works for me. Basically, I want my client to accept any certificate (because I&#39;m only ever pointing to one server) but I keep getting a `javax.net.ssl.SSLException: Not trusted server certificate exception.`\r\n\r\nSo this is what I have:\r\n\r\n```java\r\n    \r\n    public void connect() throws A_WHOLE_BUNCH_OF_EXCEPTIONS {\r\n\r\n        HttpPost post = new HttpPost(new URI(PROD_URL));\r\n    \tpost.setEntity(new StringEntity(BODY));\r\n \r\n    \tKeyStore trusted = KeyStore.getInstance(&quot;BKS&quot;);\r\n    \ttrusted.load(null, &quot;&quot;.toCharArray());\r\n    \tSSLSocketFactory sslf = new SSLSocketFactory(trusted);\r\n        sslf.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\r\n\t\r\n    \tSchemeRegistry schemeRegistry = new SchemeRegistry();\r\n    \tschemeRegistry.register(new Scheme (&quot;https&quot;, sslf, 443));\r\n    \tSingleClientConnManager cm = new SingleClientConnManager(post.getParams(),\r\n                schemeRegistry);\r\n\t\t\r\n    \tHttpClient client = new DefaultHttpClient(cm, post.getParams());\r\n    \tHttpResponse result = client.execute(post);\r\n    }\r\n```\r\n\r\nAnd here&#39;s the error I&#39;m getting:\r\n\r\n```bash\r\n    W/System.err(  901): javax.net.ssl.SSLException: Not trusted server certificate \r\n    W/System.err(  901): \tat org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:360) \r\n    W/System.err(  901): \tat org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:92) \r\n    W/System.err(  901): \tat org.apache.http.conn.ssl.SSLSocketFactory.connectSocket(SSLSocketFactory.java:321) \r\n    W/System.err(  901): \tat org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:129) \r\n    W/System.err(  901): \tat org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164) \r\n    W/System.err(  901): \tat org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119) \r\n    W/System.err(  901): \tat org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:348) \r\n    W/System.err(  901): \tat org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555) \r\n    W/System.err(  901): \tat org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487) \r\n    W/System.err(  901): \tat org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465) \r\n    W/System.err(  901): \tat me.harrisonlee.test.ssl.MainActivity.connect(MainActivity.java:129) \r\n    W/System.err(  901): \tat me.harrisonlee.test.ssl.MainActivity.access$0(MainActivity.java:77) \r\n    W/System.err(  901): \tat me.harrisonlee.test.ssl.MainActivity$2.run(MainActivity.java:49) \r\n    W/System.err(  901): Caused by: java.security.cert.CertificateException: java.security.InvalidAlgorithmParameterException: the trust anchors set is empty \r\n    W/System.err(  901): \tat org.apache.harmony.xnet.provider.jsse.TrustManagerImpl.checkServerTrusted(TrustManagerImpl.java:157) \r\n    W/System.err(  901): \tat org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:355) \r\n    W/System.err(  901): \t... 12 more \r\n    W/System.err(  901): Caused by: java.security.InvalidAlgorithmParameterException: the trust anchors set is empty \r\n    W/System.err(  901): \tat java.security.cert.PKIXParameters.checkTrustAnchors(PKIXParameters.java:645) \r\n    W/System.err(  901): \tat java.security.cert.PKIXParameters.&lt;init&gt;(PKIXParameters.java:89) \r\n    W/System.err(  901): \tat org.apache.harmony.xnet.provider.jsse.TrustManagerImpl.&lt;init&gt;(TrustManagerImpl.java:89) \r\n    W/System.err(  901): \tat org.apache.harmony.xnet.provider.jsse.TrustManagerFactoryImpl.engineGetTrustManagers(TrustManagerFactoryImpl.java:134) \r\n    W/System.err(  901): \tat javax.net.ssl.TrustManagerFactory.getTrustManagers(TrustManagerFactory.java:226)W/System.err(  901): \tat org.apache.http.conn.ssl.SSLSocketFactory.createTrustManagers(SSLSocketFactory.java:263) \r\n    W/System.err(  901): \tat org.apache.http.conn.ssl.SSLSocketFactory.&lt;init&gt;(SSLSocketFactory.java:190) \r\n    W/System.err(  901): \tat org.apache.http.conn.ssl.SSLSocketFactory.&lt;init&gt;(SSLSocketFactory.java:216) \r\n    W/System.err(  901): \tat me.harrisonlee.test.ssl.MainActivity.connect(MainActivity.java:107) \r\n    W/System.err(  901): \t... 2 more\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/2603691/android-httpclient-and-https","title":"Trusting all certificates using HttpClient over HTTPS","body":"<p>Recently posted a question regarding the <code>HttpClient</code> over Https (<a href=\"https://stackoverflow.com/questions/2603691/android-httpclient-and-https\">found here</a>).  I've made some headway, but I've run into new issues. As with my last problem, I can't seem to find an example anywhere that works for me. Basically, I want my client to accept any certificate (because I'm only ever pointing to one server) but I keep getting a <code>javax.net.ssl.SSLException: Not trusted server certificate exception.</code></p>\n\n<p>So this is what I have:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>\n    public void connect() throws A_WHOLE_BUNCH_OF_EXCEPTIONS {\n\n        HttpPost post = new HttpPost(new URI(PROD_URL));\n        post.setEntity(new StringEntity(BODY));\n\n        KeyStore trusted = KeyStore.getInstance(\"BKS\");\n        trusted.load(null, \"\".toCharArray());\n        SSLSocketFactory sslf = new SSLSocketFactory(trusted);\n        sslf.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\n\n        SchemeRegistry schemeRegistry = new SchemeRegistry();\n        schemeRegistry.register(new Scheme (\"https\", sslf, 443));\n        SingleClientConnManager cm = new SingleClientConnManager(post.getParams(),\n                schemeRegistry);\n\n        HttpClient client = new DefaultHttpClient(cm, post.getParams());\n        HttpResponse result = client.execute(post);\n    }\n</code></pre>\n\n<p>And here's the error I'm getting:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>    W/System.err(  901): javax.net.ssl.SSLException: Not trusted server certificate \n    W/System.err(  901):    at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:360) \n    W/System.err(  901):    at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:92) \n    W/System.err(  901):    at org.apache.http.conn.ssl.SSLSocketFactory.connectSocket(SSLSocketFactory.java:321) \n    W/System.err(  901):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:129) \n    W/System.err(  901):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164) \n    W/System.err(  901):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119) \n    W/System.err(  901):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:348) \n    W/System.err(  901):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555) \n    W/System.err(  901):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487) \n    W/System.err(  901):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465) \n    W/System.err(  901):    at me.harrisonlee.test.ssl.MainActivity.connect(MainActivity.java:129) \n    W/System.err(  901):    at me.harrisonlee.test.ssl.MainActivity.access$0(MainActivity.java:77) \n    W/System.err(  901):    at me.harrisonlee.test.ssl.MainActivity$2.run(MainActivity.java:49) \n    W/System.err(  901): Caused by: java.security.cert.CertificateException: java.security.InvalidAlgorithmParameterException: the trust anchors set is empty \n    W/System.err(  901):    at org.apache.harmony.xnet.provider.jsse.TrustManagerImpl.checkServerTrusted(TrustManagerImpl.java:157) \n    W/System.err(  901):    at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:355) \n    W/System.err(  901):    ... 12 more \n    W/System.err(  901): Caused by: java.security.InvalidAlgorithmParameterException: the trust anchors set is empty \n    W/System.err(  901):    at java.security.cert.PKIXParameters.checkTrustAnchors(PKIXParameters.java:645) \n    W/System.err(  901):    at java.security.cert.PKIXParameters.&lt;init&gt;(PKIXParameters.java:89) \n    W/System.err(  901):    at org.apache.harmony.xnet.provider.jsse.TrustManagerImpl.&lt;init&gt;(TrustManagerImpl.java:89) \n    W/System.err(  901):    at org.apache.harmony.xnet.provider.jsse.TrustManagerFactoryImpl.engineGetTrustManagers(TrustManagerFactoryImpl.java:134) \n    W/System.err(  901):    at javax.net.ssl.TrustManagerFactory.getTrustManagers(TrustManagerFactory.java:226)W/System.err(  901):     at org.apache.http.conn.ssl.SSLSocketFactory.createTrustManagers(SSLSocketFactory.java:263) \n    W/System.err(  901):    at org.apache.http.conn.ssl.SSLSocketFactory.&lt;init&gt;(SSLSocketFactory.java:190) \n    W/System.err(  901):    at org.apache.http.conn.ssl.SSLSocketFactory.&lt;init&gt;(SSLSocketFactory.java:216) \n    W/System.err(  901):    at me.harrisonlee.test.ssl.MainActivity.connect(MainActivity.java:107) \n    W/System.err(  901):    ... 2 more\n</code></pre>\n"},{"tags":["java","android","android-activity","crash"],"answers":[{"tags":[],"owner":{"account_id":11352268,"reputation":71,"user_id":8322843,"display_name":"Rico"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1583155152,"creation_date":1583155152,"answer_id":60489708,"question_id":60467506,"body_markdown":"You may want to use finish() instead of System.exit(0).\r\n\r\nAnd do not override onBackPressed().","title":"Settings Back Button Isn&#39;t Working Using Bellow Code?","body":"<p>You may want to use finish() instead of System.exit(0).</p>\n\n<p>And do not override onBackPressed().</p>\n"}],"owner":{"account_id":12433755,"reputation":11,"user_id":9054938,"display_name":"Maroof"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1671860617,"creation_date":1582995335,"question_id":60467506,"body_markdown":"Below link in settings activity cannot go back when back button is pressed.\r\n \r\n&lt;https://github.com/SadaqaWorks/Word-By-Word-Quran-Android/blob/master/app/src/main/java/com/sadaqaworks/quranprojects/activity/SettingsActivity.java&gt;\r\n\r\nCode is given below...\r\n```\r\n@Override\r\npublic boolean onOptionsItemSelected(MenuItem item) {\r\n    // handle arrow click here\r\n    if (item.getItemId() == android.R.id.home) {\r\n        finish(); // close this activity and return to preview activity (if there is any)`enter code here`\r\n    }\r\n    return super.onOptionsItemSelected(item);\r\n}\r\n```\r\nnothing gets work. plz fix the code.","title":"Settings Back Button Isn&#39;t Working Using Bellow Code?","body":"<p>Below link in settings activity cannot go back when back button is pressed.</p>\n<p><a href=\"https://github.com/SadaqaWorks/Word-By-Word-Quran-Android/blob/master/app/src/main/java/com/sadaqaworks/quranprojects/activity/SettingsActivity.java\" rel=\"nofollow noreferrer\">https://github.com/SadaqaWorks/Word-By-Word-Quran-Android/blob/master/app/src/main/java/com/sadaqaworks/quranprojects/activity/SettingsActivity.java</a></p>\n<p>Code is given below...</p>\n<pre><code>@Override\npublic boolean onOptionsItemSelected(MenuItem item) {\n    // handle arrow click here\n    if (item.getItemId() == android.R.id.home) {\n        finish(); // close this activity and return to preview activity (if there is any)`enter code here`\n    }\n    return super.onOptionsItemSelected(item);\n}\n</code></pre>\n<p>nothing gets work. plz fix the code.</p>\n"},{"tags":["java","sockets","port"],"comments":[{"owner":{"account_id":185100,"reputation":3489,"user_id":421602,"accept_rate":40,"display_name":"vorburger"},"score":2,"creation_date":1345673540,"post_id":434718,"comment_id":16142092,"body_markdown":"While this question is about how to know if a given port is already in use, you may have landed here trying to find a way to obtain a free port number, which http://stackoverflow.com/questions/2675362/how-to-find-an-available-port (with link to my https://gist.github.com/3429822) covers better.","body":"While this question is about how to know if a given port is already in use, you may have landed here trying to find a way to obtain a free port number, which <a href=\"http://stackoverflow.com/questions/2675362/how-to-find-an-available-port\" title=\"how to find an available port\">stackoverflow.com/questions/2675362/&hellip;</a> (with link to my <a href=\"https://gist.github.com/3429822\" rel=\"nofollow noreferrer\">gist.github.com/3429822</a>) covers better."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1456688285,"post_id":434718,"comment_id":59052112,"body_markdown":"For what purpose? If you just want to find a vacant socket to listen at, just specify zero. Any scanning technique is liable to timing-window problems: the port can be vacant when you scan and occupied when you go to claim in.","body":"For what purpose? If you just want to find a vacant socket to listen at, just specify zero. Any scanning technique is liable to timing-window problems: the port can be vacant when you scan and occupied when you go to claim in."}],"answers":[{"tags":[],"owner":{"account_id":21577,"reputation":34905,"user_id":52551,"accept_rate":89,"display_name":"Spencer Ruport"},"down_vote_count":3,"up_vote_count":41,"is_accepted":false,"score":38,"last_activity_date":1573184115,"creation_date":1231746474,"answer_id":434731,"question_id":434718,"body_markdown":"If you&#39;re not too concerned with performance, you could always try listening on a port using the [ServerSocket][1] class. If it throws an exception odds are it&#39;s being used.\r\n\r\n    public static boolean isAvailable(int portNr) {\r\n      boolean portFree;\r\n      try (var ignored = new ServerSocket(portNr)) {\r\n          portFree = true;\r\n      } catch (IOException e) {\r\n          portFree = false;\r\n      }\r\n      return portFree;\r\n    }\r\n\r\n**EDIT:** If all you&#39;re trying to do is select a free port then ``new ServerSocket(0)`` will find one for you.\r\n\r\n  [1]: http://java.sun.com/j2se/1.4.2/docs/api/java/net/ServerSocket.html\r\n","title":"Sockets: Discover port availability using Java","body":"<p>If you're not too concerned with performance, you could always try listening on a port using the <a href=\"http://java.sun.com/j2se/1.4.2/docs/api/java/net/ServerSocket.html\" rel=\"noreferrer\">ServerSocket</a> class. If it throws an exception odds are it's being used.</p>\n\n<pre><code>public static boolean isAvailable(int portNr) {\n  boolean portFree;\n  try (var ignored = new ServerSocket(portNr)) {\n      portFree = true;\n  } catch (IOException e) {\n      portFree = false;\n  }\n  return portFree;\n}\n</code></pre>\n\n<p><strong>EDIT:</strong> If all you're trying to do is select a free port then <code>new ServerSocket(0)</code> will find one for you.</p>\n"},{"tags":[],"owner":{"account_id":12285,"reputation":8681,"user_id":24097,"accept_rate":85,"display_name":"David Santamaria"},"down_vote_count":3,"up_vote_count":100,"is_accepted":false,"score":97,"last_activity_date":1671860566,"creation_date":1231770714,"answer_id":435579,"question_id":434718,"body_markdown":"This is the [implementation][1] coming from the Apache [camel][2] project:\r\n\r\n\r\n    /**\r\n     * Checks to see if a specific port is available.\r\n     *\r\n     * @param port the port to check for availability\r\n     */\r\n    public static boolean available(int port) {\r\n        if (port &lt; MIN_PORT_NUMBER || port &gt; MAX_PORT_NUMBER) {\r\n            throw new IllegalArgumentException(&quot;Invalid start port: &quot; + port);\r\n        }\r\n\r\n        ServerSocket ss = null;\r\n        DatagramSocket ds = null;\r\n        try {\r\n            ss = new ServerSocket(port);\r\n            ss.setReuseAddress(true);\r\n            ds = new DatagramSocket(port);\r\n            ds.setReuseAddress(true);\r\n            return true;\r\n        } catch (IOException e) {\r\n        } finally {\r\n            if (ds != null) {\r\n                ds.close();\r\n            }\r\n\r\n            if (ss != null) {\r\n                try {\r\n                    ss.close();\r\n                } catch (IOException e) {\r\n                    /* should not be thrown */\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\nThey are checking the DatagramSocket as well to check if the port is avaliable in UDP and TCP.\r\n\r\n  [1]: http://svn.apache.org/viewvc/camel/trunk/components/camel-test/src/main/java/org/apache/camel/test/AvailablePortFinder.java?view=markup#l130\r\n  [2]: http://camel.apache.org/","title":"Sockets: Discover port availability using Java","body":"<p>This is the <a href=\"http://svn.apache.org/viewvc/camel/trunk/components/camel-test/src/main/java/org/apache/camel/test/AvailablePortFinder.java?view=markup#l130\" rel=\"nofollow noreferrer\">implementation</a> coming from the Apache <a href=\"http://camel.apache.org/\" rel=\"nofollow noreferrer\">camel</a> project:</p>\n<pre><code>/**\n * Checks to see if a specific port is available.\n *\n * @param port the port to check for availability\n */\npublic static boolean available(int port) {\n    if (port &lt; MIN_PORT_NUMBER || port &gt; MAX_PORT_NUMBER) {\n        throw new IllegalArgumentException(&quot;Invalid start port: &quot; + port);\n    }\n\n    ServerSocket ss = null;\n    DatagramSocket ds = null;\n    try {\n        ss = new ServerSocket(port);\n        ss.setReuseAddress(true);\n        ds = new DatagramSocket(port);\n        ds.setReuseAddress(true);\n        return true;\n    } catch (IOException e) {\n    } finally {\n        if (ds != null) {\n            ds.close();\n        }\n\n        if (ss != null) {\n            try {\n                ss.close();\n            } catch (IOException e) {\n                /* should not be thrown */\n            }\n        }\n    }\n\n    return false;\n}\n</code></pre>\n<p>They are checking the DatagramSocket as well to check if the port is avaliable in UDP and TCP.</p>\n"},{"tags":[],"owner":{"account_id":1281402,"reputation":3791,"user_id":1235433,"display_name":"Ivan"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1338443554,"creation_date":1338443554,"answer_id":10828110,"question_id":434718,"body_markdown":"In my case it helped to try and connect to the port - if service is already present, it would respond.\r\n\r\n        try {\r\n            log.debug(&quot;{}: Checking if port open by trying to connect as a client&quot;, portNumber);\r\n            Socket sock = new Socket(&quot;localhost&quot;, portNumber);\t\t\t\r\n            sock.close();\r\n            log.debug(&quot;{}: Someone responding on port - seems not open&quot;, portNumber);\r\n            return false;\r\n        } catch (Exception e) {\t\t\t\r\n            if (e.getMessage().contains(&quot;refused&quot;)) {\r\n                return true;\r\n\t    }\r\n            log.error(&quot;Troubles checking if port is open&quot;, e);\r\n            throw new RuntimeException(e);\t\t\t\t\r\n        }","title":"Sockets: Discover port availability using Java","body":"<p>In my case it helped to try and connect to the port - if service is already present, it would respond.</p>\n\n<pre><code>    try {\n        log.debug(\"{}: Checking if port open by trying to connect as a client\", portNumber);\n        Socket sock = new Socket(\"localhost\", portNumber);          \n        sock.close();\n        log.debug(\"{}: Someone responding on port - seems not open\", portNumber);\n        return false;\n    } catch (Exception e) {         \n        if (e.getMessage().contains(\"refused\")) {\n            return true;\n    }\n        log.error(\"Troubles checking if port is open\", e);\n        throw new RuntimeException(e);              \n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":33253,"reputation":4073,"user_id":92937,"accept_rate":100,"display_name":"TwentyMiles"},"down_vote_count":2,"up_vote_count":44,"is_accepted":false,"score":42,"last_activity_date":1376316416,"creation_date":1355250102,"answer_id":13826145,"question_id":434718,"body_markdown":"It appears that as of Java 7, [David Santamaria&#39;s answer](https://stackoverflow.com/a/435579/298389) doesn&#39;t work reliably any more. It looks like you can still reliably use a Socket to test the connection, however.\r\n\r\n    private static boolean available(int port) {\r\n\t\tSystem.out.println(&quot;--------------Testing port &quot; + port);\r\n\t    Socket s = null;\r\n\t    try {\r\n\t    \ts = new Socket(&quot;localhost&quot;, port);\r\n\t    \t\r\n            // If the code makes it this far without an exception it means\r\n            // something is using the port and has responded.\r\n\t        System.out.println(&quot;--------------Port &quot; + port + &quot; is not available&quot;);\r\n\t        return false;\r\n\t    } catch (IOException e) {\r\n\t    \tSystem.out.println(&quot;--------------Port &quot; + port + &quot; is available&quot;);\r\n\t    \treturn true;\r\n\t    } finally {\r\n\t        if( s != null){\r\n\t        \ttry {\r\n\t                s.close();\r\n\t            } catch (IOException e) {\r\n\t                throw new RuntimeException(&quot;You should handle this error.&quot; , e);\r\n\t            }\r\n\t        }\r\n\t    }\r\n\t}","title":"Sockets: Discover port availability using Java","body":"<p>It appears that as of Java 7, <a href=\"https://stackoverflow.com/a/435579/298389\">David Santamaria's answer</a> doesn't work reliably any more. It looks like you can still reliably use a Socket to test the connection, however.</p>\n\n<pre><code>private static boolean available(int port) {\n    System.out.println(\"--------------Testing port \" + port);\n    Socket s = null;\n    try {\n        s = new Socket(\"localhost\", port);\n\n        // If the code makes it this far without an exception it means\n        // something is using the port and has responded.\n        System.out.println(\"--------------Port \" + port + \" is not available\");\n        return false;\n    } catch (IOException e) {\n        System.out.println(\"--------------Port \" + port + \" is available\");\n        return true;\n    } finally {\n        if( s != null){\n            try {\n                s.close();\n            } catch (IOException e) {\n                throw new RuntimeException(\"You should handle this error.\" , e);\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":271777,"reputation":1939,"user_id":562492,"display_name":"eivindw"},"down_vote_count":6,"up_vote_count":54,"is_accepted":false,"score":48,"last_activity_date":1665928968,"creation_date":1363009815,"answer_id":15340291,"question_id":434718,"body_markdown":"For Java 7 you can use try-with-resource for more compact code:\r\n\r\n```  java\r\nprivate static boolean available(int port) throws IllegalStateException {\r\n\ttry (Socket ignored = new Socket(&quot;localhost&quot;, port)) {\r\n\t\treturn false;\r\n\t} catch (ConnectException e) {\r\n\t\treturn true;\r\n\t} catch (IOException e) {\r\n\t\tthrow new IllegalStateException(&quot;Error while trying to check open port&quot;, e);\r\n\t}\r\n}\r\n","title":"Sockets: Discover port availability using Java","body":"<p>For Java 7 you can use try-with-resource for more compact code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static boolean available(int port) throws IllegalStateException {\n    try (Socket ignored = new Socket(&quot;localhost&quot;, port)) {\n        return false;\n    } catch (ConnectException e) {\n        return true;\n    } catch (IOException e) {\n        throw new IllegalStateException(&quot;Error while trying to check open port&quot;, e);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2476758,"reputation":4578,"user_id":2157240,"accept_rate":60,"display_name":"Shmil The Cat"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1529349731,"creation_date":1363113297,"answer_id":15369359,"question_id":434718,"body_markdown":"The try/catch socket based solutions , might not yield accurate results (the socket address is &quot;localhost&quot; and in some cases the port could be &quot;occupied&quot; not by the loopback interface and at least on Windows I&#39;ve seen this test fails i.e. the prot falsely declared as available).\r\n\r\nThere is a cool library named [SIGAR][1] , the following code can hook you up :\r\n\r\n\r\n\r\n    Sigar sigar = new Sigar();\r\n    int flags = NetFlags.CONN_TCP | NetFlags.CONN_SERVER | NetFlags.CONN_CLIENT;             NetConnection[] netConnectionList = sigar.getNetConnectionList(flags);\r\n    for (NetConnection netConnection : netConnectionList) {\r\n       if ( netConnection.getLocalPort() == port )\r\n            return false;\r\n    }\r\n    return true;\r\n\r\n  \r\n\r\n\r\n  [1]: https://github.com/hyperic/sigar\r\n\r\n","title":"Sockets: Discover port availability using Java","body":"<p>The try/catch socket based solutions , might not yield accurate results (the socket address is \"localhost\" and in some cases the port could be \"occupied\" not by the loopback interface and at least on Windows I've seen this test fails i.e. the prot falsely declared as available).</p>\n\n<p>There is a cool library named <a href=\"https://github.com/hyperic/sigar\" rel=\"nofollow noreferrer\">SIGAR</a> , the following code can hook you up :</p>\n\n<pre><code>Sigar sigar = new Sigar();\nint flags = NetFlags.CONN_TCP | NetFlags.CONN_SERVER | NetFlags.CONN_CLIENT;             NetConnection[] netConnectionList = sigar.getNetConnectionList(flags);\nfor (NetConnection netConnection : netConnectionList) {\n   if ( netConnection.getLocalPort() == port )\n        return false;\n}\nreturn true;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5912668,"reputation":29,"user_id":4652366,"display_name":"mayu jadhv"},"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1446015371,"creation_date":1446015371,"answer_id":33384728,"question_id":434718,"body_markdown":"I have Tried something Like this and it worked really fine with me\r\n\r\n\r\n                Socket Skt;\r\n\t\t        String host = &quot;localhost&quot;;\r\n\t\t        int i = 8983; // port no.\r\n\t\t\t      \r\n\t\t\t         try {\r\n\t\t\t            System.out.println(&quot;Looking for &quot;+ i);\r\n\t\t\t            Skt = new Socket(host, i);\r\n\t\t\t            System.out.println(&quot;There is a Server on port &quot;\r\n\t\t\t            + i + &quot; of &quot; + host);\r\n\t\t\t         }\r\n\t\t\t         catch (UnknownHostException e) {\r\n\t\t\t            System.out.println(&quot;Exception occured&quot;+ e);\r\n\t\t\t           \r\n\t\t\t         }\r\n\t\t\t         catch (IOException e) {\r\n\t\t\t        \t System.out.println(&quot;port is not used&quot;);\r\n\t\t\t        \t \r\n\t\t\t         }","title":"Sockets: Discover port availability using Java","body":"<p>I have Tried something Like this and it worked really fine with me</p>\n\n<pre><code>            Socket Skt;\n            String host = \"localhost\";\n            int i = 8983; // port no.\n\n                 try {\n                    System.out.println(\"Looking for \"+ i);\n                    Skt = new Socket(host, i);\n                    System.out.println(\"There is a Server on port \"\n                    + i + \" of \" + host);\n                 }\n                 catch (UnknownHostException e) {\n                    System.out.println(\"Exception occured\"+ e);\n\n                 }\n                 catch (IOException e) {\n                     System.out.println(\"port is not used\");\n\n                 }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8984374,"reputation":612,"user_id":6698396,"display_name":"kmchmk"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1509975997,"creation_date":1509975997,"answer_id":47138421,"question_id":434718,"body_markdown":"In my case I had to use DatagramSocket class.\r\n\r\n    boolean isPortOccupied(int port) {\r\n        DatagramSocket sock = null;\r\n        try {\r\n            sock = new DatagramSocket(port);\r\n            sock.close();\r\n            return false;\r\n        } catch (BindException ignored) {\r\n            return true;\r\n        } catch (SocketException ex) {\r\n            System.out.println(ex);\r\n            return true;\r\n        }\r\n    }\r\n\r\nDon&#39;t forget to import first\r\n\r\n    import java.net.DatagramSocket;\r\n    import java.net.BindException;\r\n    import java.net.SocketException;","title":"Sockets: Discover port availability using Java","body":"<p>In my case I had to use DatagramSocket class.</p>\n\n<pre><code>boolean isPortOccupied(int port) {\n    DatagramSocket sock = null;\n    try {\n        sock = new DatagramSocket(port);\n        sock.close();\n        return false;\n    } catch (BindException ignored) {\n        return true;\n    } catch (SocketException ex) {\n        System.out.println(ex);\n        return true;\n    }\n}\n</code></pre>\n\n<p>Don't forget to import first</p>\n\n<pre><code>import java.net.DatagramSocket;\nimport java.net.BindException;\nimport java.net.SocketException;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10583629,"reputation":1134,"user_id":7796663,"accept_rate":67,"display_name":"JMax"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1655636638,"creation_date":1518789419,"answer_id":48828373,"question_id":434718,"body_markdown":"The following solution is inspired by the [SocketUtils][1] implementation of Spring-core (Apache license).\r\n\r\nCompared to other solutions using `Socket(...)` it is pretty fast (testing 1000 TCP ports in less than a second).\r\n\r\nOf course it can only detect services that open a port on all interfaces or that explicitly run on localhost.\r\n\r\n\tpublic static boolean isTcpPortAvailable(int port) {\r\n\t\ttry (ServerSocket serverSocket = new ServerSocket()) {\r\n            // setReuseAddress(false) is required only on macOS, \r\n            // otherwise the code will not work correctly on that platform\t\t\t\r\n            serverSocket.setReuseAddress(false);\r\n\t\t\tserverSocket.bind(new InetSocketAddress(InetAddress.getByName(&quot;localhost&quot;), port), 1);\r\n\t\t\treturn true;\r\n\t\t} catch (Exception ex) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}       \r\n\r\n  [1]: https://github.com/spring-projects/spring-framework/blob/master/spring-core/src/main/java/org/springframework/util/SocketUtils.java","title":"Sockets: Discover port availability using Java","body":"<p>The following solution is inspired by the <a href=\"https://github.com/spring-projects/spring-framework/blob/master/spring-core/src/main/java/org/springframework/util/SocketUtils.java\" rel=\"nofollow noreferrer\">SocketUtils</a> implementation of Spring-core (Apache license).</p>\n<p>Compared to other solutions using <code>Socket(...)</code> it is pretty fast (testing 1000 TCP ports in less than a second).</p>\n<p>Of course it can only detect services that open a port on all interfaces or that explicitly run on localhost.</p>\n<pre><code>public static boolean isTcpPortAvailable(int port) {\n    try (ServerSocket serverSocket = new ServerSocket()) {\n        // setReuseAddress(false) is required only on macOS, \n        // otherwise the code will not work correctly on that platform          \n        serverSocket.setReuseAddress(false);\n        serverSocket.bind(new InetSocketAddress(InetAddress.getByName(&quot;localhost&quot;), port), 1);\n        return true;\n    } catch (Exception ex) {\n        return false;\n    }\n}       \n</code></pre>\n"},{"tags":[],"owner":{"account_id":3683805,"reputation":8445,"user_id":3950982,"display_name":"Luke Hutchison"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1574874818,"creation_date":1552023831,"answer_id":55057362,"question_id":434718,"body_markdown":"A cleanup of the answer pointed out by David Santamaria:\r\n\r\n```\r\n/**\r\n * Check to see if a port is available.\r\n *\r\n * @param port\r\n *            the port to check for availability.\r\n */\r\npublic static boolean isPortAvailable(int port) {\r\n    try (var ss = new ServerSocket(port); var ds = new DatagramSocket(port)) {\r\n        return true;\r\n    } catch (IOException e) {\r\n        return false;\r\n    }\r\n}\r\n```\r\nThis is still subject to a race condition pointed out by user207421 in the comments to David Santamaria&#39;s answer (something could grab the port after this method closes the `ServerSocket` and `DatagramSocket` and returns).","title":"Sockets: Discover port availability using Java","body":"<p>A cleanup of the answer pointed out by David Santamaria:</p>\n\n<pre><code>/**\n * Check to see if a port is available.\n *\n * @param port\n *            the port to check for availability.\n */\npublic static boolean isPortAvailable(int port) {\n    try (var ss = new ServerSocket(port); var ds = new DatagramSocket(port)) {\n        return true;\n    } catch (IOException e) {\n        return false;\n    }\n}\n</code></pre>\n\n<p>This is still subject to a race condition pointed out by user207421 in the comments to David Santamaria's answer (something could grab the port after this method closes the <code>ServerSocket</code> and <code>DatagramSocket</code> and returns).</p>\n"}],"owner":{"account_id":22052,"reputation":1441,"user_id":54075,"display_name":"user54075"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":177088,"favorite_count":0,"down_vote_count":0,"up_vote_count":144,"answer_count":10,"score":144,"last_activity_date":1671860566,"creation_date":1231745898,"question_id":434718,"body_markdown":"How do I programmatically determine the availability of a port in a given machine using Java?\r\n\r\ni.e given a port number, determine whether it is already being used or not?.","title":"Sockets: Discover port availability using Java","body":"<p>How do I programmatically determine the availability of a port in a given machine using Java?</p>\n\n<p>i.e given a port number, determine whether it is already being used or not?.</p>\n"},{"tags":["java","android","kotlin"],"comments":[{"owner":{"account_id":12433755,"reputation":11,"user_id":9054938,"display_name":"Maroof"},"score":0,"creation_date":1563517640,"post_id":57106577,"comment_id":100733300,"body_markdown":"no ... i can&#39;t figure out what to do..!!","body":"no ... i can&#39;t figure out what to do..!!"},{"owner":{"account_id":6714001,"reputation":462,"user_id":5176383,"accept_rate":40,"display_name":"prasingh"},"score":1,"creation_date":1563518063,"post_id":57106577,"comment_id":100733445,"body_markdown":"I would recommend you to read before putting that in your implementations. Please go through these links, It will provide you the way how we can read/write a file.\n1. https://docs.oracle.com/javase/tutorial/essential/io/file.html\n2. https://www.geeksforgeeks.org/file-class-in-java/\n\nThere are many more on internet.","body":"I would recommend you to read before putting that in your implementations. Please go through these links, It will provide you the way how we can read/write a file. 1. <a href=\"https://docs.oracle.com/javase/tutorial/essential/io/file.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/essential/io/file.html</a> 2. <a href=\"https://www.geeksforgeeks.org/file-class-in-java/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/file-class-in-java</a>  There are many more on internet."}],"answers":[{"tags":[],"owner":{"account_id":16341764,"reputation":11,"user_id":11802525,"display_name":"Vankata322"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1563523708,"creation_date":1563523708,"answer_id":57108160,"question_id":57106577,"body_markdown":"I did this using Java, hopefully it would point you in the right direction.\r\n\r\n            File outputDirectory = new File(directoryPath + &quot;\\\\FILENAME&quot;);\r\n        if (!outputDirectory.exists()){\r\n            outputDirectory.mkdir();\r\n        }\r\n\r\nThe directory path in my case is used when a user assigns directly a path toward a directory, within it the program checks if the folder (which you can name whatever you like) exists, and if it does not it simply creates it.\r\n\r\nWithin you case you can simply go ahead, run the code and see if within your app the folder &quot;download&quot; (or other name) exists and if it does not simply to create it.\r\n\r\nShould work\r\n\r\n","title":"How to create empty file before downloading a file?","body":"<p>I did this using Java, hopefully it would point you in the right direction.</p>\n\n<pre><code>        File outputDirectory = new File(directoryPath + \"\\\\FILENAME\");\n    if (!outputDirectory.exists()){\n        outputDirectory.mkdir();\n    }\n</code></pre>\n\n<p>The directory path in my case is used when a user assigns directly a path toward a directory, within it the program checks if the folder (which you can name whatever you like) exists, and if it does not it simply creates it.</p>\n\n<p>Within you case you can simply go ahead, run the code and see if within your app the folder \"download\" (or other name) exists and if it does not simply to create it.</p>\n\n<p>Should work</p>\n"},{"tags":[],"owner":{"account_id":11962605,"reputation":923,"user_id":11833795,"display_name":"Niraj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1564026222,"creation_date":1564026222,"answer_id":57193976,"question_id":57106577,"body_markdown":"I&#39;m creating empty file using this function in my existing project, may be it can help you out.\r\n\r\n    public File createImageFile(Context context) {\r\n        File image = null;\r\n        try {\r\n            // Create an image file name\r\n            String name= Global.IMAGE_NAME;\r\n            File storageDir = context.getFilesDir();\r\n            image = File.createTempFile(\r\n                    name,  // prefix\r\n                    Global.IMAGE_JPG_EXTENSION,        // suffix \r\n                    storageDir      // directory \r\n            );\r\n            // Save a file: path for use with ACTION_VIEW intents\r\n        } catch (IOException e) {\r\n            AppLogger.exception(getTag(), e.getMessage(), e);\r\n        }\r\n\r\n        return image;\r\n    }","title":"How to create empty file before downloading a file?","body":"<p>I'm creating empty file using this function in my existing project, may be it can help you out.</p>\n\n<pre><code>public File createImageFile(Context context) {\n    File image = null;\n    try {\n        // Create an image file name\n        String name= Global.IMAGE_NAME;\n        File storageDir = context.getFilesDir();\n        image = File.createTempFile(\n                name,  // prefix\n                Global.IMAGE_JPG_EXTENSION,        // suffix \n                storageDir      // directory \n        );\n        // Save a file: path for use with ACTION_VIEW intents\n    } catch (IOException e) {\n        AppLogger.exception(getTag(), e.getMessage(), e);\n    }\n\n    return image;\n}\n</code></pre>\n"}],"owner":{"account_id":12433755,"reputation":11,"user_id":9054938,"display_name":"Maroof"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1842,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"answer_count":2,"score":-2,"last_activity_date":1671860349,"creation_date":1563517042,"question_id":57106577,"body_markdown":"You know some download manager allocate free space as much as download file size before downloading file such advance download manger. It allocate free space before downloading. So how to make file and allocate free space as desired download file size in android java?","title":"How to create empty file before downloading a file?","body":"<p>You know some download manager allocate free space as much as download file size before downloading file such advance download manger. It allocate free space before downloading. So how to make file and allocate free space as desired download file size in android java?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":12802108,"reputation":2965,"user_id":9263083,"display_name":"sanoJ"},"score":0,"creation_date":1563204526,"post_id":57042749,"comment_id":100613507,"body_markdown":"Check [this](https://stackoverflow.com/questions/3572463/what-is-context-on-android)","body":"Check <a href=\"https://stackoverflow.com/questions/3572463/what-is-context-on-android\">this</a>"}],"answers":[{"tags":[],"owner":{"account_id":200164,"reputation":1663,"user_id":445877,"display_name":"Alex Hart"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1563204907,"creation_date":1563204907,"answer_id":57042983,"question_id":57042749,"body_markdown":"In general, the `Context` you hand any `View` in Android is almost always an Activity. Like 99.9% of the time. However, there are cases where that&#39;s not what you want to pass.  Such cases are those when, perhaps you&#39;re building part of the UI away from an Activity to be dropped into place later.  You might not know what activity this will be attached to.\r\n\r\nThere are good reasons to make sure it is always the activity however, as is described [in this article][1].  For example, utilizing Activity makes sure the theme remains consistent.\r\n\r\nSince a View does not *need* an activity, per say, to be created, we don&#39;t need to hand the Activity.  Thus, the constructor only takes Context. This is a good example of ISP (The Interface Segregation Principle), in that, we&#39;re limiting the scope of what the View can access safely (what methods it can call on Context). We also increase the flexibility of the View API, because we don&#39;t require an Activity to instantiate views.\r\n\r\n  [1]: https://www.freecodecamp.org/news/mastering-android-context-7055c8478a22/","title":"Why we pass context in LinearLayout?","body":"<p>In general, the <code>Context</code> you hand any <code>View</code> in Android is almost always an Activity. Like 99.9% of the time. However, there are cases where that's not what you want to pass.  Such cases are those when, perhaps you're building part of the UI away from an Activity to be dropped into place later.  You might not know what activity this will be attached to.</p>\n\n<p>There are good reasons to make sure it is always the activity however, as is described <a href=\"https://www.freecodecamp.org/news/mastering-android-context-7055c8478a22/\" rel=\"nofollow noreferrer\">in this article</a>.  For example, utilizing Activity makes sure the theme remains consistent.</p>\n\n<p>Since a View does not <em>need</em> an activity, per say, to be created, we don't need to hand the Activity.  Thus, the constructor only takes Context. This is a good example of ISP (The Interface Segregation Principle), in that, we're limiting the scope of what the View can access safely (what methods it can call on Context). We also increase the flexibility of the View API, because we don't require an Activity to instantiate views.</p>\n"},{"tags":[],"owner":{"account_id":15153725,"reputation":75,"user_id":10935276,"display_name":"PrMi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1563205035,"creation_date":1563205035,"answer_id":57043019,"question_id":57042749,"body_markdown":"`Activity` isa `Context` as you can see in [this][1].\r\n\r\nA `Context` lasts the entire time your app is running while an `Activity` stops after your `Activity` ends. If the `Activity` ends before the `LinearLayout` object in your code, then a memory leak will happen since there is still a reference to that `Activity`.\r\n\r\n    \r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/app/Activity","title":"Why we pass context in LinearLayout?","body":"<p><code>Activity</code> isa <code>Context</code> as you can see in <a href=\"https://developer.android.com/reference/android/app/Activity\" rel=\"nofollow noreferrer\">this</a>.</p>\n\n<p>A <code>Context</code> lasts the entire time your app is running while an <code>Activity</code> stops after your <code>Activity</code> ends. If the <code>Activity</code> ends before the <code>LinearLayout</code> object in your code, then a memory leak will happen since there is still a reference to that <code>Activity</code>.</p>\n"}],"owner":{"account_id":12433755,"reputation":11,"user_id":9054938,"display_name":"Maroof"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":2,"score":-3,"last_activity_date":1671859745,"creation_date":1563203973,"question_id":57042749,"body_markdown":"Context is used on several place such as in activity. But why we use context in Linear Layout? Whats the main reason to use it?\r\n    LinearLayout layout = new LinearLayout(context);\r\n","title":"Why we pass context in LinearLayout?","body":"<p>Context is used on several place such as in activity. But why we use context in Linear Layout? Whats the main reason to use it?\nLinearLayout layout = new LinearLayout(context);</p>\n"},{"tags":["java","string","algorithm","big-o","time-complexity"],"comments":[{"owner":{"account_id":2992271,"reputation":3148,"user_id":2539607,"accept_rate":78,"display_name":"levininja"},"score":7,"creation_date":1382314396,"post_id":19484406,"comment_id":28898600,"body_markdown":"I know Google filters out special characters, but you can use http://symbolhound.com/ to do the equivalent of a Google search for special characters like `|=` or `&amp;`.","body":"I know Google filters out special characters, but you can use <a href=\"http://symbolhound.com/\" rel=\"nofollow noreferrer\">symbolhound.com</a> to do the equivalent of a Google search for special characters like <code>|=</code> or <code>&amp;</code>."},{"owner":{"account_id":121721,"reputation":1702,"user_id":315015,"accept_rate":78,"display_name":"Seephor"},"score":1,"creation_date":1382314670,"post_id":19484406,"comment_id":28898672,"body_markdown":"@levininja wow than you so much for that. It was driving me crazy to not be able to google it. I wish I thought of googling &quot;how to search with special characters&quot; lol","body":"@levininja wow than you so much for that. It was driving me crazy to not be able to google it. I wish I thought of googling &quot;how to search with special characters&quot; lol"},{"owner":{"account_id":14252,"reputation":47762,"user_id":29157,"accept_rate":92,"display_name":"Adam Liss"},"score":5,"creation_date":1382315466,"post_id":19484406,"comment_id":28898878,"body_markdown":"Moral: don&#39;t believe everything you read. The answer isn&#39;t necessarily right, or even good, just because it appears in a book.  :-)","body":"Moral: don&#39;t believe everything you read. The answer isn&#39;t necessarily right, or even good, just because it appears in a book.  :-)"},{"owner":{"account_id":152400,"reputation":240428,"user_id":366904,"accept_rate":82,"display_name":"Cody Gray - on strike"},"score":0,"creation_date":1502052957,"post_id":19484406,"comment_id":78033142,"body_markdown":"**Please read the question carefully before posting an answer!** The question is asking something very specific. **This is *not* a place for you to dump your own attempt(s) at implementing this algorithm.** Such answers will be deleted. If you are looking for suggestions on how to improve your own working code, please visit [CodeReview.SE].","body":"<b>Please read the question carefully before posting an answer!</b> The question is asking something very specific. <b>This is <i>not</i> a place for you to dump your own attempt(s) at implementing this algorithm.</b> Such answers will be deleted. If you are looking for suggestions on how to improve your own working code, please visit <a href=\"https://codereview.stackexchange.com\">Code Review</a>."}],"answers":[{"tags":[],"owner":{"account_id":14252,"reputation":47762,"user_id":29157,"accept_rate":92,"display_name":"Adam Liss"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1382315010,"creation_date":1382314666,"answer_id":19484459,"question_id":19484406,"body_markdown":"Since a `char` value can hold one of only 256 different values, any string that&#39;s longer than 256 characters _must_ contain at least one duplicate.\r\n\r\nThe remainder of the code uses `checker` as a sequence of bits, with each bit representing one character. It seems to convert each character to an integer, starting with `a` = 1. It then checks the corresponding bit in `checker`. If it&#39;s set, it means that character has already been seen, and we therefore know that the string contains at least one duplicate character. If the character hasn&#39;t yet been seen, the code sets the corresponding bit in `checker` and continues.\r\n\r\nSpecifically, `(1&lt;&lt;val)` generates an integer with a single `1` bit in position `val`. For example, `(1&lt;&lt;3)` would be binary `1000`, or 8. The expression `checker &amp; (1&lt;&lt;val)` will return zero if the bit in position `val` is not set (that is, has value 0) in `checker`, and `(1&lt;&lt;val)`, which is always non-zero, if that bit is set.  The expression `checker |= (1&lt;&lt;val)` will set that bit in `checker`.\r\n\r\nHowever, the algorithm seems to be flawed: it doesn&#39;t seem to account for the uppercase characters and punctuation (which generally come before the lowercase ones lexicographically). It would also seem to require a 256-bit integer, which is not standard.\r\n\r\nAs [rolfl](https://stackoverflow.com/users/1305253/rolfl) mentions in the comment below, I prefer your solution because it works. You can optimize it by returning `false` as soon as you identify a non-unique character.","title":"Detecting if a string has unique characters: comparing my solution to &quot;Cracking the Coding Interview?&quot;","body":"<p>Since a <code>char</code> value can hold one of only 256 different values, any string that's longer than 256 characters <em>must</em> contain at least one duplicate.</p>\n\n<p>The remainder of the code uses <code>checker</code> as a sequence of bits, with each bit representing one character. It seems to convert each character to an integer, starting with <code>a</code> = 1. It then checks the corresponding bit in <code>checker</code>. If it's set, it means that character has already been seen, and we therefore know that the string contains at least one duplicate character. If the character hasn't yet been seen, the code sets the corresponding bit in <code>checker</code> and continues.</p>\n\n<p>Specifically, <code>(1&lt;&lt;val)</code> generates an integer with a single <code>1</code> bit in position <code>val</code>. For example, <code>(1&lt;&lt;3)</code> would be binary <code>1000</code>, or 8. The expression <code>checker &amp; (1&lt;&lt;val)</code> will return zero if the bit in position <code>val</code> is not set (that is, has value 0) in <code>checker</code>, and <code>(1&lt;&lt;val)</code>, which is always non-zero, if that bit is set.  The expression <code>checker |= (1&lt;&lt;val)</code> will set that bit in <code>checker</code>.</p>\n\n<p>However, the algorithm seems to be flawed: it doesn't seem to account for the uppercase characters and punctuation (which generally come before the lowercase ones lexicographically). It would also seem to require a 256-bit integer, which is not standard.</p>\n\n<p>As <a href=\"https://stackoverflow.com/users/1305253/rolfl\">rolfl</a> mentions in the comment below, I prefer your solution because it works. You can optimize it by returning <code>false</code> as soon as you identify a non-unique character.</p>\n"},{"tags":[],"owner":{"account_id":235018,"reputation":364834,"user_id":501557,"accept_rate":90,"display_name":"templatetypedef"},"down_vote_count":0,"up_vote_count":111,"is_accepted":true,"score":111,"last_activity_date":1671859623,"creation_date":1382315026,"answer_id":19484495,"question_id":19484406,"body_markdown":"There are two separate questions here: what&#39;s the efficiency of your solution, and what is the reference solution doing?  Let&#39;s treat each independently.\r\n\r\nFirst, your solution:\r\n\r\n    public static boolean checkForUnique(String str){\r\n        boolean containsUnique = false;\r\n\r\n        for(char c : str.toCharArray()){\r\n            if(str.indexOf(c) == str.lastIndexOf(c)){\r\n                containsUnique = true;\r\n            } else {\r\n                containsUnique = false;\r\n            }\r\n        }\r\n    \r\n        return containsUnique;\r\n    }\r\n\r\nYour solution essentially consists of a loop over all characters in the string (let&#39;s say there are n of them), checking on each iteration whether the first and last index of the characters are the same.  The `indexOf` and `lastIndexOf` methods each take time O(n), because they have to scan across all the characters of the string to determine if any of them match the one you&#39;re looking for.  Therefore, since your loop runs O(n) times and does O(n) work per iteration, its runtime is O(n&lt;sup&gt;2&lt;/sup&gt;).\r\n\r\nHowever, there&#39;s something iffy about your code.  Try running it on the string `aab`.  Does it work correctly on this input?  As a hint, as soon as you determine that there are two or more duplicated characters, you&#39;re guaranteed that there are duplicates and you can return that not all characters are unique.\r\n\r\nNow, let&#39;s look at the reference:\r\n\r\n    public static boolean isUniqueChars(String str) {\r\n        if (str.length() &gt; 256) { // NOTE: Are you sure this isn&#39;t 26?\r\n            return false;\r\n        }\r\n        int checker = 0;\r\n        for (int i = 0; i &lt; str.length(); i++) {\r\n            int val = str.charAt(i) - &#39;a&#39;;\r\n            if ((checker &amp; (1 &lt;&lt; val)) &gt; 0) return false;\r\n            checker |= (1 &lt;&lt; val);\r\n        }\r\n        return true;\r\n    }\r\n\r\nThis solution is cute.  The basic idea is the following: imagine that you have an array of 26 booleans, each one tracking whether a particular character has appeared in the string already. You start with all of them false. You then iterate across the characters of the string, and each time you see a character you look into the array slot for that character.  If it&#39;s `false`, this is the first time you&#39;ve seen the character and you can set the slot to `true`.  If it&#39;s `true`, you&#39;ve already seen this character and you can immediately report that there&#39;s a duplicate.\r\n\r\nNotice that this method doesn&#39;t allocate an array of booleans.  Instead, it opts for a clever trick. Since there are only 26 different characters possible and there are 32 bits in an `int`, the solution creates an `int` variable where each bit of the variable corresponds to one of the characters in the string.  Instead of reading and writing an array, the solution reads and writes the bits of the number.\r\n\r\nFor example, look at this line:\r\n\r\n    if ((checker &amp; (1 &lt;&lt; val)) &gt; 0) return false;\r\n\r\nWhat does `checker &amp; (1 &lt;&lt; val)` do?  Well, `1 &lt;&lt; val` creates an `int` value that has all bits zero except for the `val`th bit.  It then uses bitwise AND to AND this value with `checker`. If the bit at position `val` in `checker` is already set, then this evaluates to a nonzero value (meaning we&#39;ve already seen the number) and we can return false.  Otherwise, it evaluates to 0, and we haven&#39;t seen the number.\r\n\r\nThe next line is this:\r\n\r\n    checker |= (1 &lt;&lt; val);\r\n\r\nThis uses the &quot;bitwise OR with assignment&quot; operator, which is equivalent to\r\n\r\n    checker = checker | (1 &lt;&lt; val);\r\n\r\nThis ORs `checker` with a value that has a 1 bit set only at position `val`, which turns the bit on.  It&#39;s equivalent to setting the `val`th bit of the number to 1.\r\n\r\nThis approach is much faster than yours.  First, since the function starts off by checking if the string has length greater than 26 (I&#39;m assuming the 256 is a typo), the function never has to test any string of length 27 or greater.  Therefore, the inner loop runs at most 26 times.  Each iteration does O(1) work in bitwise operations, so the overall work done is O(1) (O(1) iterations times O(1) work per iteration), which is *significantly* faster than your implementation.\r\n\r\nIf you haven&#39;t seen bitwise operations used this way, I&#39;d recommend searching for &quot;bitwise operators&quot; on Google to learn more.","title":"Detecting if a string has unique characters: comparing my solution to &quot;Cracking the Coding Interview?&quot;","body":"<p>There are two separate questions here: what's the efficiency of your solution, and what is the reference solution doing?  Let's treat each independently.</p>\n<p>First, your solution:</p>\n<pre><code>public static boolean checkForUnique(String str){\n    boolean containsUnique = false;\n\n    for(char c : str.toCharArray()){\n        if(str.indexOf(c) == str.lastIndexOf(c)){\n            containsUnique = true;\n        } else {\n            containsUnique = false;\n        }\n    }\n\n    return containsUnique;\n}\n</code></pre>\n<p>Your solution essentially consists of a loop over all characters in the string (let's say there are n of them), checking on each iteration whether the first and last index of the characters are the same.  The <code>indexOf</code> and <code>lastIndexOf</code> methods each take time O(n), because they have to scan across all the characters of the string to determine if any of them match the one you're looking for.  Therefore, since your loop runs O(n) times and does O(n) work per iteration, its runtime is O(n<sup>2</sup>).</p>\n<p>However, there's something iffy about your code.  Try running it on the string <code>aab</code>.  Does it work correctly on this input?  As a hint, as soon as you determine that there are two or more duplicated characters, you're guaranteed that there are duplicates and you can return that not all characters are unique.</p>\n<p>Now, let's look at the reference:</p>\n<pre><code>public static boolean isUniqueChars(String str) {\n    if (str.length() &gt; 256) { // NOTE: Are you sure this isn't 26?\n        return false;\n    }\n    int checker = 0;\n    for (int i = 0; i &lt; str.length(); i++) {\n        int val = str.charAt(i) - 'a';\n        if ((checker &amp; (1 &lt;&lt; val)) &gt; 0) return false;\n        checker |= (1 &lt;&lt; val);\n    }\n    return true;\n}\n</code></pre>\n<p>This solution is cute.  The basic idea is the following: imagine that you have an array of 26 booleans, each one tracking whether a particular character has appeared in the string already. You start with all of them false. You then iterate across the characters of the string, and each time you see a character you look into the array slot for that character.  If it's <code>false</code>, this is the first time you've seen the character and you can set the slot to <code>true</code>.  If it's <code>true</code>, you've already seen this character and you can immediately report that there's a duplicate.</p>\n<p>Notice that this method doesn't allocate an array of booleans.  Instead, it opts for a clever trick. Since there are only 26 different characters possible and there are 32 bits in an <code>int</code>, the solution creates an <code>int</code> variable where each bit of the variable corresponds to one of the characters in the string.  Instead of reading and writing an array, the solution reads and writes the bits of the number.</p>\n<p>For example, look at this line:</p>\n<pre><code>if ((checker &amp; (1 &lt;&lt; val)) &gt; 0) return false;\n</code></pre>\n<p>What does <code>checker &amp; (1 &lt;&lt; val)</code> do?  Well, <code>1 &lt;&lt; val</code> creates an <code>int</code> value that has all bits zero except for the <code>val</code>th bit.  It then uses bitwise AND to AND this value with <code>checker</code>. If the bit at position <code>val</code> in <code>checker</code> is already set, then this evaluates to a nonzero value (meaning we've already seen the number) and we can return false.  Otherwise, it evaluates to 0, and we haven't seen the number.</p>\n<p>The next line is this:</p>\n<pre><code>checker |= (1 &lt;&lt; val);\n</code></pre>\n<p>This uses the &quot;bitwise OR with assignment&quot; operator, which is equivalent to</p>\n<pre><code>checker = checker | (1 &lt;&lt; val);\n</code></pre>\n<p>This ORs <code>checker</code> with a value that has a 1 bit set only at position <code>val</code>, which turns the bit on.  It's equivalent to setting the <code>val</code>th bit of the number to 1.</p>\n<p>This approach is much faster than yours.  First, since the function starts off by checking if the string has length greater than 26 (I'm assuming the 256 is a typo), the function never has to test any string of length 27 or greater.  Therefore, the inner loop runs at most 26 times.  Each iteration does O(1) work in bitwise operations, so the overall work done is O(1) (O(1) iterations times O(1) work per iteration), which is <em>significantly</em> faster than your implementation.</p>\n<p>If you haven't seen bitwise operations used this way, I'd recommend searching for &quot;bitwise operators&quot; on Google to learn more.</p>\n"},{"tags":[],"owner":{"account_id":1369656,"reputation":17579,"user_id":1305253,"accept_rate":50,"display_name":"rolfl"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1382317351,"creation_date":1382315527,"answer_id":19484559,"question_id":19484406,"body_markdown":"The book solution is one I don&#39;t like and I believe is dysfunctional..... templatetypedef has posted a comprehensive answer which indicates that the solution is a good one. I disagree, since the book&#39;s answer assumes that the string only has lower-case characters, (ascii) and does no validation to ensure that.\r\n\r\n    public static boolean isUniqueChars(String str) {\r\n        // short circuit - supposed to imply that\r\n        // there are no more than 256 different characters.\r\n        // this is broken, because in Java, char&#39;s are Unicode,\r\n        // and 2-byte values so there are 32768 values\r\n        // (or so - technically not all 32768 are valid chars)\r\n        if (str.length() &gt; 256) {\r\n            return false;\r\n        }\r\n        // checker is used as a bitmap to indicate which characters\r\n        // have been seen already\r\n        int checker = 0;\r\n        for (int i = 0; i &lt; str.length(); i++) {\r\n            // set val to be the difference between the char at i and &#39;a&#39;\r\n            // unicode &#39;a&#39; is 97\r\n            // if you have an upper-case letter e.g. &#39;A&#39; you will get a\r\n            // negative &#39;val&#39; which is illegal\r\n            int val = str.charAt(i) - &#39;a&#39;;\r\n            // if this lowercase letter has been seen before, then\r\n            // the corresponding bit in checker will have been set and\r\n            // we can exit immediately.\r\n            if ((checker &amp; (1 &lt;&lt; val)) &gt; 0) return false;\r\n            // set the bit to indicate we have now seen the letter.\r\n            checker |= (1 &lt;&lt; val);\r\n        }\r\n        // none of the characters has been seen more than once.\r\n        return true;\r\n    }\r\n\r\nThe bottom line, given templatedef&#39;s answer too, is that there&#39;s not actually enough information to determine whether the book&#39;s answer is right.\r\n\r\nI distrust it though.\r\n\r\ntemplatedef&#39;s answer on the complexity is one I agree with though.... ;-)\r\n\r\nEDIT: As an exercise, I converted the book&#39;s answer to one that will work (albeit slower than the book&#39;s answer - BigInteger is slow).... This version does the same logic as the book&#39;s, but does not have the same validation and assumption problems (but it is slower). It is useful to show the logic too.\r\n\r\n    public static boolean isUniqueChars(String str) {\r\n        if (str.length() &gt; 32768) {\r\n            return false;\r\n        }\r\n        BigInteger checker = new BigInteger(0);\r\n        for (int i = 0; i &lt; str.length(); i++) {\r\n            int val = str.charAt(i);\r\n            if (checker.testBit(val)) return false;\r\n            checker = checker.setBit(val);\r\n        }\r\n        // none of the characters has been seen more than once.\r\n        return true;\r\n    }","title":"Detecting if a string has unique characters: comparing my solution to &quot;Cracking the Coding Interview?&quot;","body":"<p>The book solution is one I don't like and I believe is dysfunctional..... templatetypedef has posted a comprehensive answer which indicates that the solution is a good one. I disagree, since the book's answer assumes that the string only has lower-case characters, (ascii) and does no validation to ensure that.</p>\n\n<pre><code>public static boolean isUniqueChars(String str) {\n    // short circuit - supposed to imply that\n    // there are no more than 256 different characters.\n    // this is broken, because in Java, char's are Unicode,\n    // and 2-byte values so there are 32768 values\n    // (or so - technically not all 32768 are valid chars)\n    if (str.length() &gt; 256) {\n        return false;\n    }\n    // checker is used as a bitmap to indicate which characters\n    // have been seen already\n    int checker = 0;\n    for (int i = 0; i &lt; str.length(); i++) {\n        // set val to be the difference between the char at i and 'a'\n        // unicode 'a' is 97\n        // if you have an upper-case letter e.g. 'A' you will get a\n        // negative 'val' which is illegal\n        int val = str.charAt(i) - 'a';\n        // if this lowercase letter has been seen before, then\n        // the corresponding bit in checker will have been set and\n        // we can exit immediately.\n        if ((checker &amp; (1 &lt;&lt; val)) &gt; 0) return false;\n        // set the bit to indicate we have now seen the letter.\n        checker |= (1 &lt;&lt; val);\n    }\n    // none of the characters has been seen more than once.\n    return true;\n}\n</code></pre>\n\n<p>The bottom line, given templatedef's answer too, is that there's not actually enough information to determine whether the book's answer is right.</p>\n\n<p>I distrust it though.</p>\n\n<p>templatedef's answer on the complexity is one I agree with though.... ;-)</p>\n\n<p>EDIT: As an exercise, I converted the book's answer to one that will work (albeit slower than the book's answer - BigInteger is slow).... This version does the same logic as the book's, but does not have the same validation and assumption problems (but it is slower). It is useful to show the logic too.</p>\n\n<pre><code>public static boolean isUniqueChars(String str) {\n    if (str.length() &gt; 32768) {\n        return false;\n    }\n    BigInteger checker = new BigInteger(0);\n    for (int i = 0; i &lt; str.length(); i++) {\n        int val = str.charAt(i);\n        if (checker.testBit(val)) return false;\n        checker = checker.setBit(val);\n    }\n    // none of the characters has been seen more than once.\n    return true;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5352787,"reputation":19,"user_id":4266450,"display_name":"wolfie"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1502052011,"creation_date":1479762456,"answer_id":40729418,"question_id":19484406,"body_markdown":"This is the necessary correction to the book&#39;s code:\r\n\r\n    public static boolean checkForUnique(String str){\r\n\t    boolean containsUnique = false;\r\n\r\n\t    for(char c : str.toCharArray()){\r\n\t        if(str.indexOf(c) == str.lastIndexOf(c)){\r\n\t            containsUnique = true;\r\n\t        } else {\r\n\t            return false;\r\n\t        }\r\n\t    }\r\n\r\n\t    return containsUnique;\r\n\t}","title":"Detecting if a string has unique characters: comparing my solution to &quot;Cracking the Coding Interview?&quot;","body":"<p>This is the necessary correction to the book's code:</p>\n\n<pre><code>public static boolean checkForUnique(String str){\n    boolean containsUnique = false;\n\n    for(char c : str.toCharArray()){\n        if(str.indexOf(c) == str.lastIndexOf(c)){\n            containsUnique = true;\n        } else {\n            return false;\n        }\n    }\n\n    return containsUnique;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10477007,"reputation":1,"user_id":7723225,"display_name":"allen joseph"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1489690101,"creation_date":1489690101,"answer_id":42842490,"question_id":19484406,"body_markdown":"The solution from the book is case insensitive. &#39;A&#39; and &#39;a&#39; is considered duplicate as per the implementation.\r\n\r\nExplanation:\r\nfor input string with char &#39;A&#39;, &#39;A&#39; - &#39;a&#39; is -32\r\nso &#39;1 &lt;&lt; val&#39; will be evaluated as 1 &lt;&lt; -32. \r\nshift on any negative number will shift the bits in opposite direction.\r\nthus 1 &lt;&lt; -32 will be 1 &gt;&gt; 32. Which will set the first bit to 1. This is also the case with char &#39;a&#39;. Thus &#39;A&#39; and &#39;a&#39; are considered duplicate characters. Similarly for &#39;B&#39; and &#39;b&#39; second bit is set to 1 and so on.","title":"Detecting if a string has unique characters: comparing my solution to &quot;Cracking the Coding Interview?&quot;","body":"<p>The solution from the book is case insensitive. 'A' and 'a' is considered duplicate as per the implementation.</p>\n\n<p>Explanation:\nfor input string with char 'A', 'A' - 'a' is -32\nso '1 &lt;&lt; val' will be evaluated as 1 &lt;&lt; -32. \nshift on any negative number will shift the bits in opposite direction.\nthus 1 &lt;&lt; -32 will be 1 >> 32. Which will set the first bit to 1. This is also the case with char 'a'. Thus 'A' and 'a' are considered duplicate characters. Similarly for 'B' and 'b' second bit is set to 1 and so on.</p>\n"},{"tags":[],"owner":{"account_id":3139322,"reputation":2855,"user_id":2655092,"accept_rate":80,"display_name":"whoopdedoo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1504821502,"creation_date":1504821502,"answer_id":46105690,"question_id":19484406,"body_markdown":"6th edition update\r\n\r\n        public static void main(String[] args) {\r\n            System.out.println(isUniqueChars(&quot;abcdmc&quot;)); // false\r\n            System.out.println(isUniqueChars(&quot;abcdm&quot;)); // true\r\n            System.out.println(isUniqueChars(&quot;abcdm\\u0061&quot;)); // false because \\u0061 is unicode a\r\n        }\r\n\r\n\r\n        public static boolean isUniqueChars(String str) {\r\n            /*\r\n             You should first ask your interviewer if the string is an ASCII string or a Unicode string.\r\n             Asking this question will show an eye for detail and a solid foundation in computer science.\r\n             We&#39;ll assume for simplicity the character set is ASCII.\r\n             If this assumption is not valid, we would need to increase the storage size.\r\n             */\r\n            // at 6th edition of the book, there is no pre condition on string&#39;s length\r\n            /*\r\n             We can reduce our space usage by a factor of eight by using a bit vector.\r\n             We will assume, in the below code, that the string only uses the lowercase letters a through z.\r\n             This will allow us to use just a single int.\r\n              */\r\n            // printing header to provide nice csv format log, you may uncomment\r\n    //        System.out.println(&quot;char,val,valBinaryString,leftShift,leftShiftBinaryString,checker&quot;);\r\n            int checker = 0;\r\n            for (int i = 0; i &lt; str.length(); i++) {\r\n                /*\r\n                    Dec Binary Character\r\n                    97\t01100001\ta\r\n                    98\t01100010\tb\r\n                    99\t01100011\tc\r\n                    100\t01100100\td\r\n                    101\t01100101\te\r\n                    102\t01100110\tf\r\n                    103\t01100111\tg\r\n                    104\t01101000\th\r\n                    105\t01101001\ti\r\n                    106\t01101010\tj\r\n                    107\t01101011\tk\r\n                    108\t01101100\tl\r\n                    109\t01101101\tm\r\n                    110\t01101110\tn\r\n                    111\t01101111\to\r\n                    112\t01110000\tp\r\n                    113\t01110001\tq\r\n                    114\t01110010\tr\r\n                    115\t01110011\ts\r\n                    116\t01110100\tt\r\n                    117\t01110101\tu\r\n                    118\t01110110\tv\r\n                    119\t01110111\tw\r\n                    120\t01111000\tx\r\n                    121\t01111001\ty\r\n                    122\t01111010\tz\r\n                 */\r\n                // a = 97 as you can see in ASCII table above\r\n                // set val to be the difference between the char at i and &#39;a&#39;\r\n                // b = 1, d = 3.. z = 25\r\n                char c = str.charAt(i);\r\n                int val = c - &#39;a&#39;;\r\n                // means &quot;shift 1 val numbers places to the left&quot;\r\n                // for example; if str.charAt(i) is &quot;m&quot;, which is the 13th letter, 109 (g in ASCII) minus 97 equals 12\r\n                // it returns 1 and 12 zeros = 1000000000000 (which is also the number 4096)\r\n                int leftShift = 1 &lt;&lt; val;\r\n                /*\r\n                    An integer is represented as a sequence of bits in memory.\r\n                    For interaction with humans, the computer has to display it as decimal digits, but all the calculations\r\n                    are carried out as binary.\r\n                    123 in decimal is stored as 1111011 in memory.\r\n    \r\n                    The &amp; operator is a bitwise &quot;And&quot;.\r\n                    The result is the bits that are turned on in both numbers.\r\n    \r\n                    1001 &amp; 1100 = 1000, since only the first bit is turned on in both.\r\n    \r\n                    It will be nicer to look like this\r\n    \r\n                    1001 &amp;\r\n                    1100\r\n                    =\r\n                    1000\r\n    \r\n                    Note that ones only appear in a place when both arguments have a one in that place.\r\n    \r\n                 */\r\n                int bitWiseAND = checker &amp; leftShift;\r\n                String leftShiftBinaryString = Integer.toBinaryString(leftShift);\r\n                String checkerBinaryString = leftPad(Integer.toBinaryString(checker), leftShiftBinaryString.length());\r\n                String leftShiftBinaryStringWithPad = leftPad(leftShiftBinaryString, checkerBinaryString.length());\r\n    //            System.out.printf(&quot;%s &amp;\\n%s\\n=\\n%s\\n\\n&quot;, checkerBinaryString, leftShiftBinaryStringWithPad, Integer.toBinaryString(bitWiseAND));\r\n                /*\r\n                in our example with string &quot;abcdmc&quot;\r\n                0 &amp;\r\n                1\r\n                =\r\n                0\r\n    \r\n                01 &amp;\r\n                10\r\n                =\r\n                0\r\n    \r\n                011 &amp;\r\n                100\r\n                =\r\n                0\r\n    \r\n                0111 &amp;\r\n                1000\r\n                =\r\n                0\r\n    \r\n                0000000001111 &amp;\r\n                1000000000000\r\n                =\r\n                0\r\n    \r\n                1000000001111 &amp;\r\n                0000000000100\r\n                =\r\n                100\r\n                 */\r\n    //            System.out.println(c + &quot;,&quot; + val + &quot;,&quot; + Integer.toBinaryString(val) + &quot;,&quot; + leftShift + &quot;,&quot; + Integer.toBinaryString(leftShift) + &quot;,&quot; + checker);\r\n                /*\r\n                char val valBinaryString leftShift leftShiftBinaryString checker\r\n                a\t0\t    0\t            1\t    1\t                    0\r\n                b\t1\t    1\t            2\t    10\t                    1\r\n                c\t2\t    10\t            4\t    100\t                    3\r\n                d\t3\t    11\t            8\t    1000\t                7\r\n                m\t12\t    1100\t        4096\t1000000000000\t        15\r\n                c\t2\t    10\t            4\t    100\t                    4111\r\n                 */\r\n                if (bitWiseAND &gt; 0) {\r\n                    return false;\r\n                }\r\n                // setting 1 on on the left shift\r\n                /*\r\n                0000000001111 |\r\n                1000000000000\r\n                =\r\n                1000000001111\r\n                 */\r\n                checker = checker | leftShift;\r\n            }\r\n            return true;\r\n            /*\r\n            If we can&#39;t use additional data structures, we can do the following:\r\n            1. Compare every character of the string to every other character of the string.\r\n                This will take 0( n 2 ) time and 0(1) space\r\n            2. If we are allowed to modify the input string, we could sort the string in O(n log(n)) time and then linearly\r\n                check the string for neighboring characters that are identical.\r\n                Careful, though: many sorting algorithms take up extra space.\r\n    \r\n            These solutions are not as optimal in some respects, but might be better depending on the constraints of the problem.\r\n             */\r\n        }\r\n    \r\n        private static String leftPad(String s, int i) {\r\n            StringBuilder sb = new StringBuilder(s);\r\n            int charsToGo = i - sb.length();\r\n            while (charsToGo &gt; 0) {\r\n                sb.insert(0, &#39;0&#39;);\r\n                charsToGo--;\r\n            }\r\n            return sb.toString();\r\n        }\r\n\r\n","title":"Detecting if a string has unique characters: comparing my solution to &quot;Cracking the Coding Interview?&quot;","body":"<p>6th edition update</p>\n\n<pre><code>    public static void main(String[] args) {\n        System.out.println(isUniqueChars(\"abcdmc\")); // false\n        System.out.println(isUniqueChars(\"abcdm\")); // true\n        System.out.println(isUniqueChars(\"abcdm\\u0061\")); // false because \\u0061 is unicode a\n    }\n\n\n    public static boolean isUniqueChars(String str) {\n        /*\n         You should first ask your interviewer if the string is an ASCII string or a Unicode string.\n         Asking this question will show an eye for detail and a solid foundation in computer science.\n         We'll assume for simplicity the character set is ASCII.\n         If this assumption is not valid, we would need to increase the storage size.\n         */\n        // at 6th edition of the book, there is no pre condition on string's length\n        /*\n         We can reduce our space usage by a factor of eight by using a bit vector.\n         We will assume, in the below code, that the string only uses the lowercase letters a through z.\n         This will allow us to use just a single int.\n          */\n        // printing header to provide nice csv format log, you may uncomment\n//        System.out.println(\"char,val,valBinaryString,leftShift,leftShiftBinaryString,checker\");\n        int checker = 0;\n        for (int i = 0; i &lt; str.length(); i++) {\n            /*\n                Dec Binary Character\n                97  01100001    a\n                98  01100010    b\n                99  01100011    c\n                100 01100100    d\n                101 01100101    e\n                102 01100110    f\n                103 01100111    g\n                104 01101000    h\n                105 01101001    i\n                106 01101010    j\n                107 01101011    k\n                108 01101100    l\n                109 01101101    m\n                110 01101110    n\n                111 01101111    o\n                112 01110000    p\n                113 01110001    q\n                114 01110010    r\n                115 01110011    s\n                116 01110100    t\n                117 01110101    u\n                118 01110110    v\n                119 01110111    w\n                120 01111000    x\n                121 01111001    y\n                122 01111010    z\n             */\n            // a = 97 as you can see in ASCII table above\n            // set val to be the difference between the char at i and 'a'\n            // b = 1, d = 3.. z = 25\n            char c = str.charAt(i);\n            int val = c - 'a';\n            // means \"shift 1 val numbers places to the left\"\n            // for example; if str.charAt(i) is \"m\", which is the 13th letter, 109 (g in ASCII) minus 97 equals 12\n            // it returns 1 and 12 zeros = 1000000000000 (which is also the number 4096)\n            int leftShift = 1 &lt;&lt; val;\n            /*\n                An integer is represented as a sequence of bits in memory.\n                For interaction with humans, the computer has to display it as decimal digits, but all the calculations\n                are carried out as binary.\n                123 in decimal is stored as 1111011 in memory.\n\n                The &amp; operator is a bitwise \"And\".\n                The result is the bits that are turned on in both numbers.\n\n                1001 &amp; 1100 = 1000, since only the first bit is turned on in both.\n\n                It will be nicer to look like this\n\n                1001 &amp;\n                1100\n                =\n                1000\n\n                Note that ones only appear in a place when both arguments have a one in that place.\n\n             */\n            int bitWiseAND = checker &amp; leftShift;\n            String leftShiftBinaryString = Integer.toBinaryString(leftShift);\n            String checkerBinaryString = leftPad(Integer.toBinaryString(checker), leftShiftBinaryString.length());\n            String leftShiftBinaryStringWithPad = leftPad(leftShiftBinaryString, checkerBinaryString.length());\n//            System.out.printf(\"%s &amp;\\n%s\\n=\\n%s\\n\\n\", checkerBinaryString, leftShiftBinaryStringWithPad, Integer.toBinaryString(bitWiseAND));\n            /*\n            in our example with string \"abcdmc\"\n            0 &amp;\n            1\n            =\n            0\n\n            01 &amp;\n            10\n            =\n            0\n\n            011 &amp;\n            100\n            =\n            0\n\n            0111 &amp;\n            1000\n            =\n            0\n\n            0000000001111 &amp;\n            1000000000000\n            =\n            0\n\n            1000000001111 &amp;\n            0000000000100\n            =\n            100\n             */\n//            System.out.println(c + \",\" + val + \",\" + Integer.toBinaryString(val) + \",\" + leftShift + \",\" + Integer.toBinaryString(leftShift) + \",\" + checker);\n            /*\n            char val valBinaryString leftShift leftShiftBinaryString checker\n            a   0       0               1       1                       0\n            b   1       1               2       10                      1\n            c   2       10              4       100                     3\n            d   3       11              8       1000                    7\n            m   12      1100            4096    1000000000000           15\n            c   2       10              4       100                     4111\n             */\n            if (bitWiseAND &gt; 0) {\n                return false;\n            }\n            // setting 1 on on the left shift\n            /*\n            0000000001111 |\n            1000000000000\n            =\n            1000000001111\n             */\n            checker = checker | leftShift;\n        }\n        return true;\n        /*\n        If we can't use additional data structures, we can do the following:\n        1. Compare every character of the string to every other character of the string.\n            This will take 0( n 2 ) time and 0(1) space\n        2. If we are allowed to modify the input string, we could sort the string in O(n log(n)) time and then linearly\n            check the string for neighboring characters that are identical.\n            Careful, though: many sorting algorithms take up extra space.\n\n        These solutions are not as optimal in some respects, but might be better depending on the constraints of the problem.\n         */\n    }\n\n    private static String leftPad(String s, int i) {\n        StringBuilder sb = new StringBuilder(s);\n        int charsToGo = i - sb.length();\n        while (charsToGo &gt; 0) {\n            sb.insert(0, '0');\n            charsToGo--;\n        }\n        return sb.toString();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11629507,"reputation":1507,"user_id":8518207,"accept_rate":42,"display_name":"asus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1532536535,"creation_date":1532536535,"answer_id":51523812,"question_id":19484406,"body_markdown":"As referenced from &#39;Cracking the Coding Interview&#39;, an alternative solution exists:\r\n\r\n\r\n    boolean isUniqueChars(String str) {\r\n      if(str.length() &gt; 128) return false;\r\n    \r\n      boolean[] char_set = new boolean[128];\r\n      for(int i = 0; i &lt; str.length(); i++) {\r\n        int val = str.charAt(i);\r\n        \r\n        if(char_set[val]) {\r\n          return false;\r\n        }\r\n        char_set[val] = true;\r\n      }\r\n      return true;\r\n    }\r\n\r\nOf course, to achieve better space complexity, please refer to the above example by **@templatetypedef**","title":"Detecting if a string has unique characters: comparing my solution to &quot;Cracking the Coding Interview?&quot;","body":"<p>As referenced from 'Cracking the Coding Interview', an alternative solution exists:</p>\n\n<pre><code>boolean isUniqueChars(String str) {\n  if(str.length() &gt; 128) return false;\n\n  boolean[] char_set = new boolean[128];\n  for(int i = 0; i &lt; str.length(); i++) {\n    int val = str.charAt(i);\n\n    if(char_set[val]) {\n      return false;\n    }\n    char_set[val] = true;\n  }\n  return true;\n}\n</code></pre>\n\n<p>Of course, to achieve better space complexity, please refer to the above example by <strong>@templatetypedef</strong></p>\n"},{"tags":[],"owner":{"account_id":11014787,"reputation":765,"user_id":8090964,"display_name":"Murat Can OĞUZHAN"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654636839,"creation_date":1654636839,"answer_id":72537687,"question_id":19484406,"body_markdown":"In case somebody needs this as Javascript implementation. The explanation is already clear out in the @whoopdedoo and others.\r\nhttps://stackoverflow.com/a/46105690/8090964\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    function isUniqueChars(str) {\r\n        let ASCIICodeOfa = &#39;a&#39;.charCodeAt(0);\r\n        let checker = 0;\r\n        for (let i = 0; i &lt; str.length; i++) {\r\n            let currentChar = str.charCodeAt(i);\r\n            let val = currentChar - ASCIICodeOfa;\r\n            if ((checker &amp; (1 &lt;&lt; val)) &gt; 0) {\r\n                return false;\r\n            }\r\n            checker |= (1 &lt;&lt; val);\r\n        }\r\n        return true;\r\n    }\r\n\r\n    console.log(isUniqueChars(&#39;abcdef&#39;))\r\n    console.log(isUniqueChars(&#39;abcdefb&#39;))\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\n","title":"Detecting if a string has unique characters: comparing my solution to &quot;Cracking the Coding Interview?&quot;","body":"<p>In case somebody needs this as Javascript implementation. The explanation is already clear out in the @whoopdedoo and others.\n<a href=\"https://stackoverflow.com/a/46105690/8090964\">https://stackoverflow.com/a/46105690/8090964</a></p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function isUniqueChars(str) {\n    let ASCIICodeOfa = 'a'.charCodeAt(0);\n    let checker = 0;\n    for (let i = 0; i &lt; str.length; i++) {\n        let currentChar = str.charCodeAt(i);\n        let val = currentChar - ASCIICodeOfa;\n        if ((checker &amp; (1 &lt;&lt; val)) &gt; 0) {\n            return false;\n        }\n        checker |= (1 &lt;&lt; val);\n    }\n    return true;\n}\n\nconsole.log(isUniqueChars('abcdef'))\nconsole.log(isUniqueChars('abcdefb'))</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":121721,"reputation":1702,"user_id":315015,"accept_rate":78,"display_name":"Seephor"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64768,"favorite_count":0,"down_vote_count":0,"up_vote_count":55,"accepted_answer_id":19484495,"answer_count":8,"score":55,"last_activity_date":1671859623,"creation_date":1382314261,"question_id":19484406,"body_markdown":"I am working through the book &quot;Cracking the Coding Interview&quot; and I have come across questions here asking for answers, but I need help comparing my answer to the solution. My algorithm works, but I am having difficulty understand the solution in the book. Mainly because I don&#39;t understand what some of the operators are really doing. \r\n\r\nThe task is: &quot;Implement an algorithm to determine if a string has all unique characters. What if you cannot use additional data structures?&quot;\r\n\r\nThis is my solution:\r\n\r\n   \r\n\r\n\tpublic static boolean checkForUnique(String str){\r\n\t\tboolean containsUnique = false;\r\n\r\n\t\tfor(char c : str.toCharArray()){\r\n\t\t\tif(str.indexOf(c) == str.lastIndexOf(c)){\r\n\t\t\t\tcontainsUnique = true;\r\n\t\t\t} else {\r\n\t\t\t\tcontainsUnique = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn containsUnique;\r\n\t}\r\n\r\nIt works, but how efficient is this? I saw that the complexity of the index functions for String in Java are O(n*m)\r\n\r\nHere is the solution from the book:\r\n\r\n\tpublic static boolean isUniqueChars(String str) {\r\n\t\tif (str.length() &gt; 256) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tint checker = 0;\r\n\t\tfor (int i = 0; i &lt; str.length(); i++) {\r\n\t\t\tint val = str.charAt(i) - &#39;a&#39;;\r\n\t\t\tif ((checker &amp; (1 &lt;&lt; val)) &gt; 0) return false;\r\n\t\t\tchecker |= (1 &lt;&lt; val);\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\nA couple things I am not quite understanding with the solution. First, what does the &quot;|=&quot; operator do? Why is &#39;a&#39; subtracted from the current character in the string for the value of &quot;val&quot;? I know &quot;&lt;&lt;&quot; is a bitwise left shift, but what does `(checker &amp; (1&lt;&lt;val))` do? I know it is bitwise and, but I am not understanding it since I am not understanding the line where checker gets a value.\r\n\r\nI am just not familiar with these operations and unfortunately the book does not give an explanation of the solutions, probably because it assumes you already understand these operations.","title":"Detecting if a string has unique characters: comparing my solution to &quot;Cracking the Coding Interview?&quot;","body":"<p>I am working through the book \"Cracking the Coding Interview\" and I have come across questions here asking for answers, but I need help comparing my answer to the solution. My algorithm works, but I am having difficulty understand the solution in the book. Mainly because I don't understand what some of the operators are really doing. </p>\n\n<p>The task is: \"Implement an algorithm to determine if a string has all unique characters. What if you cannot use additional data structures?\"</p>\n\n<p>This is my solution:</p>\n\n<pre><code>public static boolean checkForUnique(String str){\n    boolean containsUnique = false;\n\n    for(char c : str.toCharArray()){\n        if(str.indexOf(c) == str.lastIndexOf(c)){\n            containsUnique = true;\n        } else {\n            containsUnique = false;\n        }\n    }\n\n    return containsUnique;\n}\n</code></pre>\n\n<p>It works, but how efficient is this? I saw that the complexity of the index functions for String in Java are O(n*m)</p>\n\n<p>Here is the solution from the book:</p>\n\n<pre><code>public static boolean isUniqueChars(String str) {\n    if (str.length() &gt; 256) {\n        return false;\n    }\n    int checker = 0;\n    for (int i = 0; i &lt; str.length(); i++) {\n        int val = str.charAt(i) - 'a';\n        if ((checker &amp; (1 &lt;&lt; val)) &gt; 0) return false;\n        checker |= (1 &lt;&lt; val);\n    }\n    return true;\n}\n</code></pre>\n\n<p>A couple things I am not quite understanding with the solution. First, what does the \"|=\" operator do? Why is 'a' subtracted from the current character in the string for the value of \"val\"? I know \"&lt;&lt;\" is a bitwise left shift, but what does <code>(checker &amp; (1&lt;&lt;val))</code> do? I know it is bitwise and, but I am not understanding it since I am not understanding the line where checker gets a value.</p>\n\n<p>I am just not familiar with these operations and unfortunately the book does not give an explanation of the solutions, probably because it assumes you already understand these operations.</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1671868500,"post_id":74905686,"comment_id":132190111,"body_markdown":"If you encounter problems, it&#39;s best to create a [MCVE](https://stackoverflow.com/help/mcve) when posting a question. You posted almost **700** (seven hundred) lines of code for this issue. That&#39;s a lot for people to parse and try to debug online. Please edit your question and isolate the problem, in that way you increase your chances of being helped.  Please take a moment and read [how to ask a question](https://stackoverflow.com/help/how-to-ask).","body":"If you encounter problems, it&#39;s best to create a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> when posting a question. You posted almost <b>700</b> (seven hundred) lines of code for this issue. That&#39;s a lot for people to parse and try to debug online. Please edit your question and isolate the problem, in that way you increase your chances of being helped.  Please take a moment and read <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask a question</a>."}],"owner":{"account_id":27120028,"reputation":11,"user_id":20780685,"display_name":"Иван Петров"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671859469,"creation_date":1671858289,"question_id":74905686,"body_markdown":"I made a nested recycler view so that each store is taken separately, in the parentitem first the name and photo of the store and in the childitem the products of this store.  what it looks like.\r\n[![photo database](https://i.stack.imgur.com/hsjOt.png)](https://i.stack.imgur.com/hsjOt.png)\r\nunder the uid of the client there is the uid of the stores, and under them their goods are already going.\r\nI need to create a parent item in the main recycler in the fragment where there will be photos of each store and this item has its own recycler where there should be child items (products from this store) What is in the products\r\n[![tovar data](https://i.stack.imgur.com/OFLSa.png)](https://i.stack.imgur.com/OFLSa.png)\r\nMagLogo is the logo of the store from which the product is from, tovarcartShopuid is the uid of the store where the product is from.\r\n\r\n when running the snippet it gives the following error\r\n```\r\nE/AndroidRuntime: FATAL EXCEPTION: main\r\n\r\n    Process: mychati.app, PID: 26357\r\n\r\n    com.google.firebase.database.DatabaseException: Expected a List while deserializing, but got a class java.util.HashMap\r\n\r\n        at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.deserializeToParameterizedType(CustomClassMapper.java:251)\r\n\r\n        at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.deserializeToType(CustomClassMapper.java:177)\r\n\r\n        at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.convertToCustomClass(CustomClassMapper.java:102)\r\n\r\n        at com.google.firebase.database.DataSnapshot.getValue(DataSnapshot.java:229)\r\n\r\n        at mychati.app.Client.repo.FirebaseRepo$1.onDataChange(FirebaseRepo.java:46)\r\n\r\n        at com.google.firebase.database.core.ValueEventRegistration.fireEvent(ValueEventRegistration.java:75)\r\n\r\n        at com.google.firebase.database.core.view.DataEvent.fire(DataEvent.java:63)\r\n\r\n        at com.google.firebase.database.core.view.EventRaiser$1.run(EventRaiser.java:55)\r\n\r\n        at android.os.Handler.handleCallback(Handler.java:938)\r\n\r\n        at android.os.Handler.dispatchMessage(Handler.java:99)\r\n\r\n        at android.os.Looper.loop(Looper.java:236)\r\n\r\n        at android.app.ActivityThread.main(ActivityThread.java:8056)\r\n\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:656)\r\n\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:967)\r\n\r\n```\r\nFirebaseRepo\r\n```\r\npublic class FirebaseRepo {\r\n\r\n    private DatabaseReference databaseReference;\r\n\r\n    private OnRealDbTaskComplete onRealDbTaskComplete;\r\n\r\n    private FirebaseAuth mAuth;\r\n\r\n    public FirebaseRepo(OnRealDbTaskComplete onRealDbTaskComplete){\r\n\r\n        this.onRealDbTaskComplete=onRealDbTaskComplete;\r\n\r\n        databaseReference= FirebaseDatabase.getInstance().getReference().child(&quot;DoCart&quot;);\r\n\r\n        mAuth=FirebaseAuth.getInstance();\r\n\r\n    }\r\n\r\n    public void getAllData(){\r\n\r\n        databaseReference.child(mAuth.getCurrentUser().getUid()).addValueEventListener(new ValueEventListener() {\r\n\r\n            @Override\r\n\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n\r\n                List&lt;ParentItem&gt;parentItemList=new ArrayList&lt;&gt;();\r\n\r\n                for (DataSnapshot ds:snapshot.getChildren()){\r\n\r\n                    ParentItem parentItem=new ParentItem();\r\n\r\n                    parentItem.setMagLogo(ds.child(&quot;MagLogo&quot;).getValue(String.class));\r\n\r\n                    parentItem.setMagName(ds.child(&quot;MagName&quot;).getValue(String.class));\r\n\r\n                    GenericTypeIndicator&lt;ArrayList&lt;ChildItem&gt;&gt; genericTypeIndicator=new GenericTypeIndicator&lt;ArrayList&lt;ChildItem&gt;&gt;() {\r\n\r\n                    };\r\n\r\n                    parentItem.setChildItemList(ds.getValue(genericTypeIndicator));\r\n\r\n                    parentItemList.add(parentItem);\r\n\r\n                }\r\n\r\n                onRealDbTaskComplete.onSuccess(parentItemList);\r\n\r\n            }\r\n\r\n            @Override\r\n\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\nonRealDbTaskComplete.onFailure(error);\r\n\r\n            }\r\n\r\n        });\r\n\r\n    }\r\n\r\n    public interface OnRealDbTaskComplete{\r\n\r\n        void onSuccess(List&lt;ParentItem&gt;parentItemList);\r\n\r\n        void onFailure(DatabaseError error);\r\n\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nParentItem\r\n```\r\n\r\n\r\n                    GenericTypeIndicator&lt;ArrayList&lt;ChildItem&gt;&gt; genericTypeIndicator=new GenericTypeIndicator&lt;ArrayList&lt;ChildItem&gt;&gt;() {\r\n\r\n                    };\r\n\r\n                    parentItem.setChildItemList(ds.getValue(genericTypeIndicator));\r\n\r\n                    parentItemList.add(parentItem);\r\n\r\n                }\r\n\r\n                onRealDbTaskComplete.onSuccess(parentItemList);\r\n\r\n            }\r\n\r\n            @Override\r\n\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\nonRealDbTaskComplete.onFailure(error);\r\n\r\n            }\r\n\r\n        });\r\n\r\n    }\r\n\r\n    public interface OnRealDbTaskComplete{\r\n\r\n        void onSuccess(List&lt;ParentItem&gt;parentItemList);\r\n\r\n        void onFailure(DatabaseError error);\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\nParentItem\r\n\r\n```\r\n\r\npublic class ParentItem {\r\n\r\n    private String MagLogo,MagName;\r\n\r\n    private List&lt;ChildItem&gt;childItemList;\r\n\r\n    public ParentItem(){}\r\n\r\n    public ParentItem(String magLogo, String magName,List&lt;ChildItem&gt; childItemList) {\r\n\r\n        MagLogo = magLogo;\r\n\r\n        MagName = magName;\r\n\r\n        this.childItemList = childItemList;\r\n\r\n    }\r\n\r\n    public List&lt;ChildItem&gt; getChildItemList() {\r\n\r\n        return childItemList;\r\n\r\n    }\r\n\r\n    public void setChildItemList(List&lt;ChildItem&gt; childItemList) {\r\n\r\n        this.childItemList = childItemList;\r\n\r\n    }\r\n\r\n    public String getMagLogo() {\r\n\r\n        return MagLogo;\r\n\r\n    }\r\n\r\n    public void setMagLogo(String magLogo) {\r\n\r\n        MagLogo = magLogo;\r\n\r\n    }\r\n\r\n    public String getMagName() {\r\n\r\n        return MagName;\r\n\r\n    }\r\n\r\n    public void setMagName(String magName) {\r\n\r\n        MagName = magName;\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\nChildItem\r\n```\r\npublic class ChildItem {\r\n\r\n    private String tovarImage,tovarcartShopuid,tovarname,Price,ProductId,TovarValue,MyUID;\r\n\r\n    public ChildItem(){}\r\n\r\n    public ChildItem(String tovarImage, String tovarcartShopuid, String tovarname, String price, String productId, String tovarValue, String myUID) {\r\n\r\n        this.tovarImage = tovarImage;\r\n\r\n        this.tovarcartShopuid = tovarcartShopuid;\r\n\r\n        this.tovarname = tovarname;\r\n\r\n       this. Price = price;\r\n\r\n        this.   ProductId = productId;\r\n\r\n        this. TovarValue = tovarValue;\r\n\r\n        this.  MyUID = myUID;\r\n\r\n    }\r\n\r\n    public String getTovarImage() {\r\n\r\n        return tovarImage;\r\n\r\n    }\r\n\r\n    public void setTovarImage(String tovarImage) {\r\n\r\n        this.tovarImage = tovarImage;\r\n\r\n    }\r\n\r\n    public String getTovarcartShopuid() {\r\n\r\n        return tovarcartShopuid;\r\n\r\n    }\r\n\r\n    public void setTovarcartShopuid(String tovarcartShopuid) {\r\n\r\n        this.tovarcartShopuid = tovarcartShopuid;\r\n\r\n    }\r\n\r\n    public String getTovarname() {\r\n\r\n        return tovarname;\r\n\r\n    }\r\n\r\n    public void setTovarname(String tovarname) {\r\n\r\n        this.tovarname = tovarname;\r\n\r\n    }\r\n\r\n    public String getPrice() {\r\n\r\n        return Price;\r\n\r\n    }\r\n\r\n    public void setPrice(String price) {\r\n\r\n        Price = price;\r\n\r\n    }\r\n\r\n    public String getProductId() {\r\n\r\n        return ProductId;\r\n\r\n    }\r\n\r\n    public void setProductId(String productId) {\r\n\r\n        ProductId = productId;\r\n\r\n    }\r\n\r\n    public String getTovarValue() {\r\n\r\n        return TovarValue;\r\n\r\n    }\r\n\r\n    public void setTovarValue(String tovarValue) {\r\n\r\n        TovarValue = tovarValue;\r\n\r\n    }\r\n\r\n    public String getMyUID() {\r\n\r\n        return MyUID;\r\n\r\n    }\r\n\r\n    public void setMyUID(String myUID) {\r\n\r\n        MyUID = myUID;\r\n\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nChildAdapter\r\n```\r\npublic class ChildAdapter extends RecyclerView.Adapter&lt;ChildAdapter.ChildViewHolder&gt; {\r\n\r\npublic List&lt;ChildItem&gt;childItemList;\r\n\r\npublic void setChildItemList(List&lt;ChildItem&gt;childItemList){\r\n\r\n    this.childItemList=childItemList;\r\n\r\n    this.childItemList.removeAll(Collections.singleton(null));\r\n\r\n}\r\n\r\n    @NonNull\r\n\r\n    @Override\r\n\r\n    public ChildViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n\r\nView view= LayoutInflater.from(parent.getContext()).inflate(R.layout.child_item,parent,false);\r\n\r\nreturn new ChildViewHolder(view);\r\n\r\n    }\r\n\r\n    @Override\r\n\r\n    public void onBindViewHolder(@NonNull ChildViewHolder holder, int position) {\r\n\r\nChildItem childItem=childItemList.get(position);\r\n\r\nholder.txttovarName.setText(childItem.getTovarname());\r\n\r\nholder.txttovarValue.setText(childItem.getTovarValue());\r\n\r\nholder.txttovarPrice.setText(childItem.getPrice());\r\n\r\nholder.txttovarName.setHint(childItem.getTovarcartShopuid());\r\n\r\nholder.txttovarPrice.setHint(childItem.getProductId());\r\n\r\n        Transformation transformation=new RoundedTransformationBuilder().borderColor(Color.WHITE).borderWidthDp(3).cornerRadius(15).oval(false).build();\r\n\r\n        Picasso.get().load(childItem.getTovarImage()).transform(transformation).into(holder.imagetovarchild);\r\n\r\n    }\r\n\r\n    @Override\r\n\r\n    public int getItemCount() {\r\n\r\n if (childItemList !=null){\r\n\r\n     return childItemList.size();\r\n\r\n }else {\r\n\r\n     return 0;\r\n\r\n }\r\n\r\n    }\r\n\r\n    public class ChildViewHolder extends RecyclerView.ViewHolder{\r\n\r\nprivate TextView txttovarName,txttovarValue,txttovarPrice,tovarplus,tovarminus;\r\n\r\nprivate RoundedImageView imagetovarchild;\r\n\r\n        public ChildViewHolder(@NonNull View itemView) {\r\n\r\n            super(itemView);\r\n\r\n            imagetovarchild=itemView.findViewById(R.id.imagetovarchild);\r\n\r\n            txttovarName=itemView.findViewById(R.id.textnamechild);\r\n\r\n            txttovarPrice=itemView.findViewById(R.id.textpricechildtovar);\r\n\r\n            txttovarValue=itemView.findViewById(R.id.tovarcartchild);\r\n\r\n            tovarminus=itemView.findViewById(R.id.tovarminuschildto);\r\n\r\n            tovarplus=itemView.findViewById(R.id.tovarpluschildto);\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n```\r\nParentAdapter\r\n```\r\npublic class ParentAdapter extends RecyclerView.Adapter&lt;ParentAdapter.ParentviewHolder&gt; {\r\n\r\n    private List&lt;ParentItem&gt;parentItemList;\r\n\r\n    public void setParentItemList(List&lt;ParentItem&gt;parentItemList){\r\n\r\n        this.parentItemList=parentItemList;\r\n\r\n    }\r\n\r\n    @NonNull\r\n\r\n    @Override\r\n\r\n    public ParentviewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n\r\nView view= LayoutInflater.from(parent.getContext()).inflate(R.layout.list_item,parent,false);\r\n\r\nreturn new ParentviewHolder(view);\r\n\r\n    }\r\n\r\n    @Override\r\n\r\n    public void onBindViewHolder(@NonNull ParentviewHolder holder, int position) {\r\n\r\nParentItem parentItem=parentItemList.get(position);\r\n\r\n        Transformation transformation=new RoundedTransformationBuilder().borderColor(Color.WHITE).borderWidthDp(3).cornerRadius(15).oval(false).build();\r\n\r\n        Picasso.get().load(parentItem.getMagLogo()).transform(transformation).into(holder.roundedImagemaglogoparent);\r\n\r\n        holder.nestedrecer.setHasFixedSize(true);\r\n\r\n        holder.nestedrecer.setLayoutManager(new LinearLayoutManager(holder.itemView.getContext()));\r\n\r\n        ChildAdapter childAdapter=new ChildAdapter();\r\n\r\n        childAdapter.setChildItemList(parentItem.getChildItemList());\r\n\r\n        holder.nestedrecer.setAdapter(childAdapter);\r\n\r\n        childAdapter.notifyDataSetChanged();\r\n\r\n    }\r\n\r\n    @Override\r\n\r\n    public int getItemCount() {\r\n\r\n        if (parentItemList !=null){\r\n\r\n            return parentItemList.size();\r\n\r\n        }else{\r\n\r\n            return 0;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    public class ParentviewHolder extends RecyclerView.ViewHolder{\r\n\r\nprivate RoundedImageView roundedImagemaglogoparent;\r\n\r\nprivate TextView textitogParent;\r\n\r\nprivate ImageView imagedeletemag;\r\n\r\nprivate RecyclerView nestedrecer;\r\n\r\n        public ParentviewHolder(@NonNull View itemView) {\r\n\r\n            super(itemView);\r\n\r\n            textitogParent=itemView.findViewById(R.id.textitogParent);\r\n\r\n            roundedImagemaglogoparent=itemView.findViewById(R.id. roundedImagemaglogoparent);\r\n\r\n            nestedrecer=itemView.findViewById(R.id.nestedrecer);\r\n\r\n            imagedeletemag=itemView.findViewById(R.id.imagedeletemag);\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n```\r\nCartFragment(Where the nested recyclerview should be visible)\r\n```\r\n\r\npublic class CartFragment extends Fragment {\r\n\r\nprivate FirebaseViewModel firebaseViewModel;\r\n\r\n    private DatabaseReference karzinaRef;\r\n\r\n    private DatabaseReference shopRef;\r\n\r\n    private LottieAnimationView lottieAnimationView;\r\n\r\n    private RoundedImageView shopimege;\r\n\r\n    private int overTotalPrice=0;\r\n\r\n    private AppCompatButton buybutton;\r\n\r\nprivate int overTovar;\r\n\r\n    private TextView textpricecarti,textkarzininziv,textViewnocart;\r\n\r\n    private RecyclerView reccart;\r\n\r\n    private FirebaseAuth mAuth;\r\n\r\n    private DatabaseReference hophh;\r\n\r\n    private ParentAdapter parentAdapter;\r\n\r\n    private ImageView deletezakazcart;\r\n\r\nView cart;\r\n\r\n    // TODO: Rename parameter arguments, choose names that match\r\n\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n\r\n    private static final String ARG_PARAM1 = &quot;param1&quot;;\r\n\r\n    private static final String ARG_PARAM2 = &quot;param2&quot;;\r\n\r\n    // TODO: Rename and change types of parameters\r\n\r\n    private String mParam1;\r\n\r\n    private String mParam2;\r\n\r\n    public CartFragment() {\r\n\r\n        // Required empty public constructor\r\n\r\n    }\r\n\r\n    /**\r\n\r\n     * Use this factory method to create a new instance of\r\n\r\n     * this fragment using the provided parameters.\r\n\r\n     *\r\n\r\n     * @param param1 Parameter 1.\r\n\r\n     * @param param2 Parameter 2.\r\n\r\n     * @return A new instance of fragment CartFragment.\r\n\r\n     */\r\n\r\n    // TODO: Rename and change types and number of parameters\r\n\r\n    public static CartFragment newInstance(String param1, String param2) {\r\n\r\n        CartFragment fragment = new CartFragment();\r\n\r\n        Bundle args = new Bundle();\r\n\r\n        args.putString(ARG_PARAM1, param1);\r\n\r\n        args.putString(ARG_PARAM2, param2);\r\n\r\n        fragment.setArguments(args);\r\n\r\n        return fragment;\r\n\r\n    }\r\n\r\n    @Override\r\n\r\n    public void onCreate(Bundle savedInstanceState) {\r\n\r\n        super.onCreate(savedInstanceState);\r\n\r\n        if (getArguments() != null) {\r\n\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    @Override\r\n\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n\r\n                             Bundle savedInstanceState) {\r\n\r\n        // Inflate the layout for this fragment\r\n\r\n   cart= inflater.inflate(R.layout.fragment_cart, container, false);\r\n\r\nreccart=cart.findViewById(R.id.reccart);\r\n\r\n        deletezakazcart=cart.findViewById(R.id.deletedocart);\r\n\r\n        karzinaRef= FirebaseDatabase.getInstance().getReference().child(&quot;DoCart&quot;);\r\n\r\n        shopRef=FirebaseDatabase.getInstance().getReference().child(&quot;shops&quot;);\r\n\r\n        mAuth=FirebaseAuth.getInstance();\r\n\r\nlottieAnimationView=cart.findViewById(R.id.lottieAnimationViewnottovarcart);\r\n\r\ntextViewnocart=cart.findViewById(R.id.texxtnottovercart);\r\n\r\nparentAdapter=new ParentAdapter();\r\n\r\nreccart.setAdapter(parentAdapter);\r\n\r\nreccart.setHasFixedSize(true);\r\n\r\nreccart.setLayoutManager(new LinearLayoutManager(getContext()));\r\n\r\nfirebaseViewModel=new ViewModelProvider(this).get(FirebaseViewModel.class);\r\n\r\nfirebaseViewModel.getAllData();\r\n\r\nfirebaseViewModel.getParentItemMutableLiveDate().observe(getViewLifecycleOwner(), new Observer&lt;List&lt;ParentItem&gt;&gt;() {\r\n\r\n    @Override\r\n\r\n    public void onChanged(List&lt;ParentItem&gt; parentItemList) {\r\n\r\n        parentAdapter.setParentItemList(parentItemList);\r\n\r\n        parentAdapter.notifyDataSetChanged();\r\n\r\n    }\r\n\r\n});\r\n\r\nfirebaseViewModel.getDatabaseErrorMutableLiveDate().observe(getViewLifecycleOwner(), new Observer&lt;DatabaseError&gt;() {\r\n\r\n    @Override\r\n\r\n    public void onChanged(DatabaseError error) {\r\n\r\n    }\r\n\r\n});\r\n\r\n   return cart;\r\n\r\n}\r\n}\r\n\r\n\r\n```\r\n\r\n\r\n \r\n\r\nhaven&#39;t tried anything yet","title":"Error while receiving data in nested recyclerview","body":"<p>I made a nested recycler view so that each store is taken separately, in the parentitem first the name and photo of the store and in the childitem the products of this store.  what it looks like.\n<a href=\"https://i.stack.imgur.com/hsjOt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hsjOt.png\" alt=\"photo database\" /></a>\nunder the uid of the client there is the uid of the stores, and under them their goods are already going.\nI need to create a parent item in the main recycler in the fragment where there will be photos of each store and this item has its own recycler where there should be child items (products from this store) What is in the products\n<a href=\"https://i.stack.imgur.com/OFLSa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OFLSa.png\" alt=\"tovar data\" /></a>\nMagLogo is the logo of the store from which the product is from, tovarcartShopuid is the uid of the store where the product is from.</p>\n<p>when running the snippet it gives the following error</p>\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main\n\n    Process: mychati.app, PID: 26357\n\n    com.google.firebase.database.DatabaseException: Expected a List while deserializing, but got a class java.util.HashMap\n\n        at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.deserializeToParameterizedType(CustomClassMapper.java:251)\n\n        at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.deserializeToType(CustomClassMapper.java:177)\n\n        at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.convertToCustomClass(CustomClassMapper.java:102)\n\n        at com.google.firebase.database.DataSnapshot.getValue(DataSnapshot.java:229)\n\n        at mychati.app.Client.repo.FirebaseRepo$1.onDataChange(FirebaseRepo.java:46)\n\n        at com.google.firebase.database.core.ValueEventRegistration.fireEvent(ValueEventRegistration.java:75)\n\n        at com.google.firebase.database.core.view.DataEvent.fire(DataEvent.java:63)\n\n        at com.google.firebase.database.core.view.EventRaiser$1.run(EventRaiser.java:55)\n\n        at android.os.Handler.handleCallback(Handler.java:938)\n\n        at android.os.Handler.dispatchMessage(Handler.java:99)\n\n        at android.os.Looper.loop(Looper.java:236)\n\n        at android.app.ActivityThread.main(ActivityThread.java:8056)\n\n        at java.lang.reflect.Method.invoke(Native Method)\n\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:656)\n\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:967)\n\n</code></pre>\n<p>FirebaseRepo</p>\n<pre><code>public class FirebaseRepo {\n\n    private DatabaseReference databaseReference;\n\n    private OnRealDbTaskComplete onRealDbTaskComplete;\n\n    private FirebaseAuth mAuth;\n\n    public FirebaseRepo(OnRealDbTaskComplete onRealDbTaskComplete){\n\n        this.onRealDbTaskComplete=onRealDbTaskComplete;\n\n        databaseReference= FirebaseDatabase.getInstance().getReference().child(&quot;DoCart&quot;);\n\n        mAuth=FirebaseAuth.getInstance();\n\n    }\n\n    public void getAllData(){\n\n        databaseReference.child(mAuth.getCurrentUser().getUid()).addValueEventListener(new ValueEventListener() {\n\n            @Override\n\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\n\n                List&lt;ParentItem&gt;parentItemList=new ArrayList&lt;&gt;();\n\n                for (DataSnapshot ds:snapshot.getChildren()){\n\n                    ParentItem parentItem=new ParentItem();\n\n                    parentItem.setMagLogo(ds.child(&quot;MagLogo&quot;).getValue(String.class));\n\n                    parentItem.setMagName(ds.child(&quot;MagName&quot;).getValue(String.class));\n\n                    GenericTypeIndicator&lt;ArrayList&lt;ChildItem&gt;&gt; genericTypeIndicator=new GenericTypeIndicator&lt;ArrayList&lt;ChildItem&gt;&gt;() {\n\n                    };\n\n                    parentItem.setChildItemList(ds.getValue(genericTypeIndicator));\n\n                    parentItemList.add(parentItem);\n\n                }\n\n                onRealDbTaskComplete.onSuccess(parentItemList);\n\n            }\n\n            @Override\n\n            public void onCancelled(@NonNull DatabaseError error) {\n\nonRealDbTaskComplete.onFailure(error);\n\n            }\n\n        });\n\n    }\n\n    public interface OnRealDbTaskComplete{\n\n        void onSuccess(List&lt;ParentItem&gt;parentItemList);\n\n        void onFailure(DatabaseError error);\n\n    }\n\n}\n\n</code></pre>\n<p>ParentItem</p>\n<pre><code>\n\n                    GenericTypeIndicator&lt;ArrayList&lt;ChildItem&gt;&gt; genericTypeIndicator=new GenericTypeIndicator&lt;ArrayList&lt;ChildItem&gt;&gt;() {\n\n                    };\n\n                    parentItem.setChildItemList(ds.getValue(genericTypeIndicator));\n\n                    parentItemList.add(parentItem);\n\n                }\n\n                onRealDbTaskComplete.onSuccess(parentItemList);\n\n            }\n\n            @Override\n\n            public void onCancelled(@NonNull DatabaseError error) {\n\nonRealDbTaskComplete.onFailure(error);\n\n            }\n\n        });\n\n    }\n\n    public interface OnRealDbTaskComplete{\n\n        void onSuccess(List&lt;ParentItem&gt;parentItemList);\n\n        void onFailure(DatabaseError error);\n\n    }\n\n}\n</code></pre>\n<p>ParentItem</p>\n<pre><code>\npublic class ParentItem {\n\n    private String MagLogo,MagName;\n\n    private List&lt;ChildItem&gt;childItemList;\n\n    public ParentItem(){}\n\n    public ParentItem(String magLogo, String magName,List&lt;ChildItem&gt; childItemList) {\n\n        MagLogo = magLogo;\n\n        MagName = magName;\n\n        this.childItemList = childItemList;\n\n    }\n\n    public List&lt;ChildItem&gt; getChildItemList() {\n\n        return childItemList;\n\n    }\n\n    public void setChildItemList(List&lt;ChildItem&gt; childItemList) {\n\n        this.childItemList = childItemList;\n\n    }\n\n    public String getMagLogo() {\n\n        return MagLogo;\n\n    }\n\n    public void setMagLogo(String magLogo) {\n\n        MagLogo = magLogo;\n\n    }\n\n    public String getMagName() {\n\n        return MagName;\n\n    }\n\n    public void setMagName(String magName) {\n\n        MagName = magName;\n\n    }\n\n}\n</code></pre>\n<p>ChildItem</p>\n<pre><code>public class ChildItem {\n\n    private String tovarImage,tovarcartShopuid,tovarname,Price,ProductId,TovarValue,MyUID;\n\n    public ChildItem(){}\n\n    public ChildItem(String tovarImage, String tovarcartShopuid, String tovarname, String price, String productId, String tovarValue, String myUID) {\n\n        this.tovarImage = tovarImage;\n\n        this.tovarcartShopuid = tovarcartShopuid;\n\n        this.tovarname = tovarname;\n\n       this. Price = price;\n\n        this.   ProductId = productId;\n\n        this. TovarValue = tovarValue;\n\n        this.  MyUID = myUID;\n\n    }\n\n    public String getTovarImage() {\n\n        return tovarImage;\n\n    }\n\n    public void setTovarImage(String tovarImage) {\n\n        this.tovarImage = tovarImage;\n\n    }\n\n    public String getTovarcartShopuid() {\n\n        return tovarcartShopuid;\n\n    }\n\n    public void setTovarcartShopuid(String tovarcartShopuid) {\n\n        this.tovarcartShopuid = tovarcartShopuid;\n\n    }\n\n    public String getTovarname() {\n\n        return tovarname;\n\n    }\n\n    public void setTovarname(String tovarname) {\n\n        this.tovarname = tovarname;\n\n    }\n\n    public String getPrice() {\n\n        return Price;\n\n    }\n\n    public void setPrice(String price) {\n\n        Price = price;\n\n    }\n\n    public String getProductId() {\n\n        return ProductId;\n\n    }\n\n    public void setProductId(String productId) {\n\n        ProductId = productId;\n\n    }\n\n    public String getTovarValue() {\n\n        return TovarValue;\n\n    }\n\n    public void setTovarValue(String tovarValue) {\n\n        TovarValue = tovarValue;\n\n    }\n\n    public String getMyUID() {\n\n        return MyUID;\n\n    }\n\n    public void setMyUID(String myUID) {\n\n        MyUID = myUID;\n\n    }\n\n}\n\n</code></pre>\n<p>ChildAdapter</p>\n<pre><code>public class ChildAdapter extends RecyclerView.Adapter&lt;ChildAdapter.ChildViewHolder&gt; {\n\npublic List&lt;ChildItem&gt;childItemList;\n\npublic void setChildItemList(List&lt;ChildItem&gt;childItemList){\n\n    this.childItemList=childItemList;\n\n    this.childItemList.removeAll(Collections.singleton(null));\n\n}\n\n    @NonNull\n\n    @Override\n\n    public ChildViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n\nView view= LayoutInflater.from(parent.getContext()).inflate(R.layout.child_item,parent,false);\n\nreturn new ChildViewHolder(view);\n\n    }\n\n    @Override\n\n    public void onBindViewHolder(@NonNull ChildViewHolder holder, int position) {\n\nChildItem childItem=childItemList.get(position);\n\nholder.txttovarName.setText(childItem.getTovarname());\n\nholder.txttovarValue.setText(childItem.getTovarValue());\n\nholder.txttovarPrice.setText(childItem.getPrice());\n\nholder.txttovarName.setHint(childItem.getTovarcartShopuid());\n\nholder.txttovarPrice.setHint(childItem.getProductId());\n\n        Transformation transformation=new RoundedTransformationBuilder().borderColor(Color.WHITE).borderWidthDp(3).cornerRadius(15).oval(false).build();\n\n        Picasso.get().load(childItem.getTovarImage()).transform(transformation).into(holder.imagetovarchild);\n\n    }\n\n    @Override\n\n    public int getItemCount() {\n\n if (childItemList !=null){\n\n     return childItemList.size();\n\n }else {\n\n     return 0;\n\n }\n\n    }\n\n    public class ChildViewHolder extends RecyclerView.ViewHolder{\n\nprivate TextView txttovarName,txttovarValue,txttovarPrice,tovarplus,tovarminus;\n\nprivate RoundedImageView imagetovarchild;\n\n        public ChildViewHolder(@NonNull View itemView) {\n\n            super(itemView);\n\n            imagetovarchild=itemView.findViewById(R.id.imagetovarchild);\n\n            txttovarName=itemView.findViewById(R.id.textnamechild);\n\n            txttovarPrice=itemView.findViewById(R.id.textpricechildtovar);\n\n            txttovarValue=itemView.findViewById(R.id.tovarcartchild);\n\n            tovarminus=itemView.findViewById(R.id.tovarminuschildto);\n\n            tovarplus=itemView.findViewById(R.id.tovarpluschildto);\n\n        }\n\n    }\n\n}\n\n\n\n</code></pre>\n<p>ParentAdapter</p>\n<pre><code>public class ParentAdapter extends RecyclerView.Adapter&lt;ParentAdapter.ParentviewHolder&gt; {\n\n    private List&lt;ParentItem&gt;parentItemList;\n\n    public void setParentItemList(List&lt;ParentItem&gt;parentItemList){\n\n        this.parentItemList=parentItemList;\n\n    }\n\n    @NonNull\n\n    @Override\n\n    public ParentviewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n\nView view= LayoutInflater.from(parent.getContext()).inflate(R.layout.list_item,parent,false);\n\nreturn new ParentviewHolder(view);\n\n    }\n\n    @Override\n\n    public void onBindViewHolder(@NonNull ParentviewHolder holder, int position) {\n\nParentItem parentItem=parentItemList.get(position);\n\n        Transformation transformation=new RoundedTransformationBuilder().borderColor(Color.WHITE).borderWidthDp(3).cornerRadius(15).oval(false).build();\n\n        Picasso.get().load(parentItem.getMagLogo()).transform(transformation).into(holder.roundedImagemaglogoparent);\n\n        holder.nestedrecer.setHasFixedSize(true);\n\n        holder.nestedrecer.setLayoutManager(new LinearLayoutManager(holder.itemView.getContext()));\n\n        ChildAdapter childAdapter=new ChildAdapter();\n\n        childAdapter.setChildItemList(parentItem.getChildItemList());\n\n        holder.nestedrecer.setAdapter(childAdapter);\n\n        childAdapter.notifyDataSetChanged();\n\n    }\n\n    @Override\n\n    public int getItemCount() {\n\n        if (parentItemList !=null){\n\n            return parentItemList.size();\n\n        }else{\n\n            return 0;\n\n        }\n\n    }\n\n    public class ParentviewHolder extends RecyclerView.ViewHolder{\n\nprivate RoundedImageView roundedImagemaglogoparent;\n\nprivate TextView textitogParent;\n\nprivate ImageView imagedeletemag;\n\nprivate RecyclerView nestedrecer;\n\n        public ParentviewHolder(@NonNull View itemView) {\n\n            super(itemView);\n\n            textitogParent=itemView.findViewById(R.id.textitogParent);\n\n            roundedImagemaglogoparent=itemView.findViewById(R.id. roundedImagemaglogoparent);\n\n            nestedrecer=itemView.findViewById(R.id.nestedrecer);\n\n            imagedeletemag=itemView.findViewById(R.id.imagedeletemag);\n\n        }\n\n    }\n\n}\n\n\n</code></pre>\n<p>CartFragment(Where the nested recyclerview should be visible)</p>\n<pre><code>\npublic class CartFragment extends Fragment {\n\nprivate FirebaseViewModel firebaseViewModel;\n\n    private DatabaseReference karzinaRef;\n\n    private DatabaseReference shopRef;\n\n    private LottieAnimationView lottieAnimationView;\n\n    private RoundedImageView shopimege;\n\n    private int overTotalPrice=0;\n\n    private AppCompatButton buybutton;\n\nprivate int overTovar;\n\n    private TextView textpricecarti,textkarzininziv,textViewnocart;\n\n    private RecyclerView reccart;\n\n    private FirebaseAuth mAuth;\n\n    private DatabaseReference hophh;\n\n    private ParentAdapter parentAdapter;\n\n    private ImageView deletezakazcart;\n\nView cart;\n\n    // TODO: Rename parameter arguments, choose names that match\n\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\n\n    private static final String ARG_PARAM1 = &quot;param1&quot;;\n\n    private static final String ARG_PARAM2 = &quot;param2&quot;;\n\n    // TODO: Rename and change types of parameters\n\n    private String mParam1;\n\n    private String mParam2;\n\n    public CartFragment() {\n\n        // Required empty public constructor\n\n    }\n\n    /**\n\n     * Use this factory method to create a new instance of\n\n     * this fragment using the provided parameters.\n\n     *\n\n     * @param param1 Parameter 1.\n\n     * @param param2 Parameter 2.\n\n     * @return A new instance of fragment CartFragment.\n\n     */\n\n    // TODO: Rename and change types and number of parameters\n\n    public static CartFragment newInstance(String param1, String param2) {\n\n        CartFragment fragment = new CartFragment();\n\n        Bundle args = new Bundle();\n\n        args.putString(ARG_PARAM1, param1);\n\n        args.putString(ARG_PARAM2, param2);\n\n        fragment.setArguments(args);\n\n        return fragment;\n\n    }\n\n    @Override\n\n    public void onCreate(Bundle savedInstanceState) {\n\n        super.onCreate(savedInstanceState);\n\n        if (getArguments() != null) {\n\n            mParam1 = getArguments().getString(ARG_PARAM1);\n\n            mParam2 = getArguments().getString(ARG_PARAM2);\n\n        }\n\n    }\n\n    @Override\n\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n\n                             Bundle savedInstanceState) {\n\n        // Inflate the layout for this fragment\n\n   cart= inflater.inflate(R.layout.fragment_cart, container, false);\n\nreccart=cart.findViewById(R.id.reccart);\n\n        deletezakazcart=cart.findViewById(R.id.deletedocart);\n\n        karzinaRef= FirebaseDatabase.getInstance().getReference().child(&quot;DoCart&quot;);\n\n        shopRef=FirebaseDatabase.getInstance().getReference().child(&quot;shops&quot;);\n\n        mAuth=FirebaseAuth.getInstance();\n\nlottieAnimationView=cart.findViewById(R.id.lottieAnimationViewnottovarcart);\n\ntextViewnocart=cart.findViewById(R.id.texxtnottovercart);\n\nparentAdapter=new ParentAdapter();\n\nreccart.setAdapter(parentAdapter);\n\nreccart.setHasFixedSize(true);\n\nreccart.setLayoutManager(new LinearLayoutManager(getContext()));\n\nfirebaseViewModel=new ViewModelProvider(this).get(FirebaseViewModel.class);\n\nfirebaseViewModel.getAllData();\n\nfirebaseViewModel.getParentItemMutableLiveDate().observe(getViewLifecycleOwner(), new Observer&lt;List&lt;ParentItem&gt;&gt;() {\n\n    @Override\n\n    public void onChanged(List&lt;ParentItem&gt; parentItemList) {\n\n        parentAdapter.setParentItemList(parentItemList);\n\n        parentAdapter.notifyDataSetChanged();\n\n    }\n\n});\n\nfirebaseViewModel.getDatabaseErrorMutableLiveDate().observe(getViewLifecycleOwner(), new Observer&lt;DatabaseError&gt;() {\n\n    @Override\n\n    public void onChanged(DatabaseError error) {\n\n    }\n\n});\n\n   return cart;\n\n}\n}\n\n\n</code></pre>\n<p>haven't tried anything yet</p>\n"},{"tags":["java"],"owner":{"account_id":27277160,"reputation":31,"user_id":20797589,"display_name":"R0bin_0"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1671860237,"answer_count":0,"score":0,"last_activity_date":1671859003,"creation_date":1671859003,"question_id":74905713,"body_markdown":"I am trying to understand the logic of the following lambda expression below to sort a 2D array. From what I understand from the code below is that it will sort the 2D array based off the second value i.e. `{1, 3} --&gt; 3, {0, 1} --&gt; 1, {3, 4} --&gt; 4`. But why is there subtraction i.e. `b[1] - a[1]`?\r\n\r\n\r\n```\r\nint[][] B = {{1,3},{0,1},{3,4}};\r\nArrays.sort(B, (a,b) -&gt; b[1] - a[1]);\r\n\r\n```","title":"Syntax of Array.sort for 2D array","body":"<p>I am trying to understand the logic of the following lambda expression below to sort a 2D array. From what I understand from the code below is that it will sort the 2D array based off the second value i.e. <code>{1, 3} --&gt; 3, {0, 1} --&gt; 1, {3, 4} --&gt; 4</code>. But why is there subtraction i.e. <code>b[1] - a[1]</code>?</p>\n<pre><code>int[][] B = {{1,3},{0,1},{3,4}};\nArrays.sort(B, (a,b) -&gt; b[1] - a[1]);\n\n</code></pre>\n"},{"tags":["java","swing","button","focus"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":3,"creation_date":1594322291,"post_id":62821608,"comment_id":111093776,"body_markdown":"1) The dashed line only displays when a button has focus (i.e. you don&#39;t see the dashed line when the text field has focus). Typically a LAF will invoke the button with the space bar if the button has focus.  The thicker line shows the default button. Typically the LAF will invoke the button with the Enter key even if the button doesn&#39;t have focus. 2) If you want to be able to use either the space bar or the Enter key then a) the button must have focus and it must be the default button. See: https://stackoverflow.com/a/23771988/131872, especially the &quot;Enter Key and Button&quot; link.","body":"1) The dashed line only displays when a button has focus (i.e. you don&#39;t see the dashed line when the text field has focus). Typically a LAF will invoke the button with the space bar if the button has focus.  The thicker line shows the default button. Typically the LAF will invoke the button with the Enter key even if the button doesn&#39;t have focus. 2) If you want to be able to use either the space bar or the Enter key then a) the button must have focus and it must be the default button. See: <a href=\"https://stackoverflow.com/a/23771988/131872\">stackoverflow.com/a/23771988/131872</a>, especially the &quot;Enter Key and Button&quot; link."},{"owner":{"account_id":3376802,"reputation":317,"user_id":2834788,"accept_rate":78,"display_name":"Nico Wawrzyniak"},"score":0,"creation_date":1594332884,"post_id":62821608,"comment_id":111097774,"body_markdown":"Shouldn&#39;t both be the case since I call `getRootPane().setDefaultButton(bNo)` \nto set it as the default button and `bNo.requestFocus()` to have focus?","body":"Shouldn&#39;t both be the case since I call <code>getRootPane().setDefaultButton(bNo)</code>  to set it as the default button and <code>bNo.requestFocus()</code> to have focus?"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":3,"creation_date":1594340714,"post_id":62821608,"comment_id":111099696,"body_markdown":"The `requestFocusInWindow()`  method, which is the method you should be using instead of requestFocus(), only works on a visible component that is displayed on a visible window. The dialog is not visible, so the method does nothing. Since the dialog is modal you won&#39;t be able to request focus on the button unless you use something like the `RequestFocusListener` found in [Dialog Focus](https://tips4java.wordpress.com/2010/03/14/dialog-focus/)","body":"The <code>requestFocusInWindow()</code>  method, which is the method you should be using instead of requestFocus(), only works on a visible component that is displayed on a visible window. The dialog is not visible, so the method does nothing. Since the dialog is modal you won&#39;t be able to request focus on the button unless you use something like the <code>RequestFocusListener</code> found in <a href=\"https://tips4java.wordpress.com/2010/03/14/dialog-focus/\" rel=\"nofollow noreferrer\">Dialog Focus</a>"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":4,"creation_date":1594348073,"post_id":62821608,"comment_id":111101125,"body_markdown":"Nice work on the [mre]! Since @camickr (the *best* resource on Swing focus) has already addressed the crux of the inquiry, I&#39;ll just add.. Java GUIs have to work on different OS&#39;, screen size, screen resolution etc.  using different PLAFs in different locales.  As such, they are not conducive to pixel perfect layout.  Instead use layout managers, or [combinations of them](http://stackoverflow.com/a/5630271/418556) along with layout padding and borders for [white space](http://stackoverflow.com/a/17874718/418556).","body":"Nice work on the <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>! Since @camickr (the <i>best</i> resource on Swing focus) has already addressed the crux of the inquiry, I&#39;ll just add.. Java GUIs have to work on different OS&#39;, screen size, screen resolution etc.  using different PLAFs in different locales.  As such, they are not conducive to pixel perfect layout.  Instead use layout managers, or <a href=\"http://stackoverflow.com/a/5630271/418556\">combinations of them</a> along with layout padding and borders for <a href=\"http://stackoverflow.com/a/17874718/418556\">white space</a>."},{"owner":{"account_id":3376802,"reputation":317,"user_id":2834788,"accept_rate":78,"display_name":"Nico Wawrzyniak"},"score":0,"creation_date":1594845370,"post_id":62821608,"comment_id":111273657,"body_markdown":"I turned your comments into a full answer for anyone stumbing upon the same confusion. I hope you don&#39;t mind. If something is wrong or missing feel free to tell me!","body":"I turned your comments into a full answer for anyone stumbing upon the same confusion. I hope you don&#39;t mind. If something is wrong or missing feel free to tell me!"}],"answers":[{"tags":[],"owner":{"account_id":3376802,"reputation":317,"user_id":2834788,"accept_rate":78,"display_name":"Nico Wawrzyniak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671858722,"creation_date":1594845235,"answer_id":62923337,"question_id":62821608,"body_markdown":"Regarding question 1: &quot;What is the difference between focus on a button represented by a dashed outline and one with a thick continous outline?\r\n\r\nAnswer: There are no 2 kinds of &quot;focus&quot;. Both methods do what their respective names say:\r\n\r\n```JButton.requestFocus()``` (better yet ```JButton.requestFocusInWindow()```) requests *focus* on a button, while ```getRootPane().setDefaultButton(JButton)``` sets a *selected* button, which the LAF handles seperately.\r\n\r\n-----\r\n\r\nRegarding question 2: &quot;Why does my specific implementation behave like this and how can I achieve the behaviour I want?&quot;\r\n\r\nAnswer: The modality of the Dialog is the problem. You cannot request focus after ```setVisible(true)``` has been called on a modal window.\r\n\r\nPossible solutions would therefore be to either:\r\n\r\n1) Set modality to false when creating the Dialog, e.g. with ```new DialogMinimal(this, false);``` and get focus by calling ```bNo.requestFocusInWindow()``` instead of ```getRootPane().setDefaultButton(bNo);``` and/or ```bNo.requestFocus();```, but this is no solution if the Dialog has to be modal.  \r\n\r\nor\r\n\r\n2) Implement ```RequestFocusListener``` found in [Dialog Focus](https://tips4java.wordpress.com/2010/03/14/dialog-focus) as suggested by user camickr.\r\n\r\n```\r\npublic DialogMinimal(final JFrame owner, final boolean modal) {\r\n    Button bNo = new JButton();\r\n    [...]\r\n    // bNo.requestFocusInWindow(); // obsolete now\r\n    getRootPane().setDefaultButton(bNo); // To fire on enter key\r\n    bNo.addAncestorListener(new RequestFocusListener()); // To fire on space bar\r\n    [...]\r\n}\r\n\r\n```","title":"How does focus on JButtons actually work in Java?","body":"<p>Regarding question 1: &quot;What is the difference between focus on a button represented by a dashed outline and one with a thick continous outline?</p>\n<p>Answer: There are no 2 kinds of &quot;focus&quot;. Both methods do what their respective names say:</p>\n<p><code>JButton.requestFocus()</code> (better yet <code>JButton.requestFocusInWindow()</code>) requests <em>focus</em> on a button, while <code>getRootPane().setDefaultButton(JButton)</code> sets a <em>selected</em> button, which the LAF handles seperately.</p>\n<hr />\n<p>Regarding question 2: &quot;Why does my specific implementation behave like this and how can I achieve the behaviour I want?&quot;</p>\n<p>Answer: The modality of the Dialog is the problem. You cannot request focus after <code>setVisible(true)</code> has been called on a modal window.</p>\n<p>Possible solutions would therefore be to either:</p>\n<ol>\n<li>Set modality to false when creating the Dialog, e.g. with <code>new DialogMinimal(this, false);</code> and get focus by calling <code>bNo.requestFocusInWindow()</code> instead of <code>getRootPane().setDefaultButton(bNo);</code> and/or <code>bNo.requestFocus();</code>, but this is no solution if the Dialog has to be modal.</li>\n</ol>\n<p>or</p>\n<ol start=\"2\">\n<li>Implement <code>RequestFocusListener</code> found in <a href=\"https://tips4java.wordpress.com/2010/03/14/dialog-focus\" rel=\"nofollow noreferrer\">Dialog Focus</a> as suggested by user camickr.</li>\n</ol>\n<pre><code>public DialogMinimal(final JFrame owner, final boolean modal) {\n    Button bNo = new JButton();\n    [...]\n    // bNo.requestFocusInWindow(); // obsolete now\n    getRootPane().setDefaultButton(bNo); // To fire on enter key\n    bNo.addAncestorListener(new RequestFocusListener()); // To fire on space bar\n    [...]\n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12448976,"reputation":351,"user_id":9064287,"display_name":"nhaggen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671461576,"creation_date":1671461576,"answer_id":74852138,"question_id":62821608,"body_markdown":"The [Dialog Focus][1] resource (already referenced in comments and in the accepted solution) shows an easier approach as well.\r\nThe simple solution has its drawbacks as they are clearly pointed out in the article, but for the scenario above, where the dialog is completely built from user code (as opposite to using static JOptionPane.showXXX), it will do fine.\r\n\r\nThe trick is to call `pack()` on the dialog before it is made visible and it&#39;s modality will block any further code execution (and focus requests)\r\n\r\n\r\n    Component c = myDialog.getContentPane();\r\n    ...\r\n    c.add(myYesButton);  // 1. Add all components to the dialog\r\n    myDialog.pack();  // Call pack() on the dialog\r\n    myYesButton.requestFocusInWindow();  // Request focus after pack() was called\r\n    myDialog.setVisible(true);  // Show the dialog\r\n\r\n  [1]: https://tips4java.wordpress.com/2010/03/14/dialog-focus/","title":"How does focus on JButtons actually work in Java?","body":"<p>The <a href=\"https://tips4java.wordpress.com/2010/03/14/dialog-focus/\" rel=\"nofollow noreferrer\">Dialog Focus</a> resource (already referenced in comments and in the accepted solution) shows an easier approach as well.\nThe simple solution has its drawbacks as they are clearly pointed out in the article, but for the scenario above, where the dialog is completely built from user code (as opposite to using static JOptionPane.showXXX), it will do fine.</p>\n<p>The trick is to call <code>pack()</code> on the dialog before it is made visible and it's modality will block any further code execution (and focus requests)</p>\n<pre><code>Component c = myDialog.getContentPane();\n...\nc.add(myYesButton);  // 1. Add all components to the dialog\nmyDialog.pack();  // Call pack() on the dialog\nmyYesButton.requestFocusInWindow();  // Request focus after pack() was called\nmyDialog.setVisible(true);  // Show the dialog\n</code></pre>\n"}],"owner":{"account_id":3376802,"reputation":317,"user_id":2834788,"accept_rate":78,"display_name":"Nico Wawrzyniak"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":258,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":62923337,"answer_count":2,"score":5,"last_activity_date":1671858722,"creation_date":1594320140,"question_id":62821608,"body_markdown":"I found a strange anomaly in Java Swing.\r\nThe first JButton added to the UI chronologically always fires when the uses presses the space bar, assuming he hasn&#39;t clicked another button before doing that. This behavior even occurs if `getRootPane().setDefaultButton(JButton)` and `JButton.requestFocus()` are called.\r\nWhen requesting focus on a JButton there seem to be at least 2 different kinds of &quot;focus&quot;.\r\nOne of the &quot;focusses&quot; or highlightings is a dashed rectangle around the text on the button, while the other one is a thicker outline around the specified button.\r\n\r\nThe button with the dashed outlined text fires whenever the space bar is pressed. \r\nThe button with the thick border fires whenever the enter key is pressed.\r\n\r\nI prepared a compilable minimal example illustrating this behaviour. There is no key mapping/binding involved at all.\r\n\r\n```\r\nimport java.awt.Container;\r\nimport java.awt.Dimension;\r\nimport java.awt.Insets;\r\nimport java.awt.Toolkit;\r\nimport java.awt.event.ActionEvent;\r\nimport javax.swing.JButton;\r\nimport javax.swing.JDialog;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JPanel;\r\nimport javax.swing.JTextField;\r\nimport javax.swing.WindowConstants;\r\n\r\npublic class ButtonFocusAnomalyExample extends JFrame {\r\n    public ButtonFocusAnomalyExample() {\r\n        super();\r\n        setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);\r\n        int frameWidth = 300;\r\n        int frameHeight = 300;\r\n        setSize(frameWidth, frameHeight);\r\n        Dimension d = Toolkit.getDefaultToolkit().getScreenSize();\r\n        int x = (d.width - getSize().width) / 2;\r\n        int y = (d.height - getSize().height) / 2;\r\n        setLocation(x, y);\r\n        setTitle(&quot;Any Frame&quot;);\r\n        setResizable(false);\r\n        Container cp = getContentPane();\r\n        cp.setLayout(null);\r\n        setVisible(true);\r\n        new DialogMinimal(this, true); // Runs the Dialog\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        new ButtonFocusAnomalyExample();\r\n    }\r\n\r\n    static class DialogMinimal extends JDialog {\r\n        private final JTextField output = new JTextField();\r\n\r\n        public DialogMinimal(final JFrame owner, final boolean modal) {\r\n            super(owner, modal);\r\n            setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);\r\n            int frameWidth = 252;\r\n            int frameHeight = 126;\r\n            setSize(frameWidth, frameHeight);\r\n            Dimension d = Toolkit.getDefaultToolkit().getScreenSize();\r\n            int x = (d.width - getSize().width) / 2;\r\n            int y = (d.height - getSize().height) / 2;\r\n            setLocation(x, y);\r\n            setTitle(&quot;Minimal Button Focus Example&quot;);\r\n            Container cp = getContentPane();\r\n            cp.setLayout(null);\r\n            JButton bYes = new JButton();\r\n            bYes.setBounds(0, 0, 100, 33);\r\n            bYes.setText(&quot;Yes (Space)&quot;);\r\n            bYes.addActionListener(this::bYes_ActionPerformed);\r\n            JPanel buttonPanel = new JPanel(null, true);\r\n            buttonPanel.add(bYes);\r\n            JButton bNo = new JButton();\r\n            bNo.setBounds(108, 0, 120, 33);\r\n            bNo.setText(&quot;No (Enter/Return)&quot;);\r\n            getRootPane().setDefaultButton(bNo); // Set &quot;No&quot; as default button\r\n            bNo.requestFocus(); // Get focus on &quot;No&quot; button\r\n            bNo.addActionListener(this::bNo_ActionPerformed);\r\n            buttonPanel.add(bNo);\r\n            buttonPanel.setBounds(8, 8, 400, 92);\r\n            buttonPanel.setOpaque(false);\r\n            cp.add(buttonPanel);\r\n            output.setBounds(8, 50, 220, 32);\r\n            cp.add(output);\r\n            setResizable(false);\r\n            setVisible(true);\r\n        }\r\n\r\n        public void bYes_ActionPerformed(final ActionEvent evt) {\r\n            output.setText(&quot;Yes&quot;); // Still fires on every space bar press\r\n        }\r\n\r\n        public void bNo_ActionPerformed(final ActionEvent evt) {\r\n            output.setText(&quot;No&quot;); // Only fires on every return/enter press\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThis is what it looks like:\r\n\r\n[![Button Focus Example][1]][1]\r\n\r\nThe executable code can also be found [here](https://raw.githubusercontent.com/nwawrzyniak/minimal-examples/master/ButtonFocusAnomalyExample.java).\r\n\r\nMy questions now are:\r\n\r\n1) What are these different focusses?\r\n2) How can someone change the focus that shows as a dashed outline around the text of the button so that the space bar **and** the enter key would fire the event of the &quot;No&quot; button?\r\n\r\n  [1]: https://i.stack.imgur.com/h0SO2.png","title":"How does focus on JButtons actually work in Java?","body":"<p>I found a strange anomaly in Java Swing.\nThe first JButton added to the UI chronologically always fires when the uses presses the space bar, assuming he hasn't clicked another button before doing that. This behavior even occurs if <code>getRootPane().setDefaultButton(JButton)</code> and <code>JButton.requestFocus()</code> are called.\nWhen requesting focus on a JButton there seem to be at least 2 different kinds of &quot;focus&quot;.\nOne of the &quot;focusses&quot; or highlightings is a dashed rectangle around the text on the button, while the other one is a thicker outline around the specified button.</p>\n<p>The button with the dashed outlined text fires whenever the space bar is pressed.\nThe button with the thick border fires whenever the enter key is pressed.</p>\n<p>I prepared a compilable minimal example illustrating this behaviour. There is no key mapping/binding involved at all.</p>\n<pre><code>import java.awt.Container;\nimport java.awt.Dimension;\nimport java.awt.Insets;\nimport java.awt.Toolkit;\nimport java.awt.event.ActionEvent;\nimport javax.swing.JButton;\nimport javax.swing.JDialog;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.JTextField;\nimport javax.swing.WindowConstants;\n\npublic class ButtonFocusAnomalyExample extends JFrame {\n    public ButtonFocusAnomalyExample() {\n        super();\n        setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);\n        int frameWidth = 300;\n        int frameHeight = 300;\n        setSize(frameWidth, frameHeight);\n        Dimension d = Toolkit.getDefaultToolkit().getScreenSize();\n        int x = (d.width - getSize().width) / 2;\n        int y = (d.height - getSize().height) / 2;\n        setLocation(x, y);\n        setTitle(&quot;Any Frame&quot;);\n        setResizable(false);\n        Container cp = getContentPane();\n        cp.setLayout(null);\n        setVisible(true);\n        new DialogMinimal(this, true); // Runs the Dialog\n    }\n\n    public static void main(String[] args) {\n        new ButtonFocusAnomalyExample();\n    }\n\n    static class DialogMinimal extends JDialog {\n        private final JTextField output = new JTextField();\n\n        public DialogMinimal(final JFrame owner, final boolean modal) {\n            super(owner, modal);\n            setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);\n            int frameWidth = 252;\n            int frameHeight = 126;\n            setSize(frameWidth, frameHeight);\n            Dimension d = Toolkit.getDefaultToolkit().getScreenSize();\n            int x = (d.width - getSize().width) / 2;\n            int y = (d.height - getSize().height) / 2;\n            setLocation(x, y);\n            setTitle(&quot;Minimal Button Focus Example&quot;);\n            Container cp = getContentPane();\n            cp.setLayout(null);\n            JButton bYes = new JButton();\n            bYes.setBounds(0, 0, 100, 33);\n            bYes.setText(&quot;Yes (Space)&quot;);\n            bYes.addActionListener(this::bYes_ActionPerformed);\n            JPanel buttonPanel = new JPanel(null, true);\n            buttonPanel.add(bYes);\n            JButton bNo = new JButton();\n            bNo.setBounds(108, 0, 120, 33);\n            bNo.setText(&quot;No (Enter/Return)&quot;);\n            getRootPane().setDefaultButton(bNo); // Set &quot;No&quot; as default button\n            bNo.requestFocus(); // Get focus on &quot;No&quot; button\n            bNo.addActionListener(this::bNo_ActionPerformed);\n            buttonPanel.add(bNo);\n            buttonPanel.setBounds(8, 8, 400, 92);\n            buttonPanel.setOpaque(false);\n            cp.add(buttonPanel);\n            output.setBounds(8, 50, 220, 32);\n            cp.add(output);\n            setResizable(false);\n            setVisible(true);\n        }\n\n        public void bYes_ActionPerformed(final ActionEvent evt) {\n            output.setText(&quot;Yes&quot;); // Still fires on every space bar press\n        }\n\n        public void bNo_ActionPerformed(final ActionEvent evt) {\n            output.setText(&quot;No&quot;); // Only fires on every return/enter press\n        }\n    }\n}\n</code></pre>\n<p>This is what it looks like:</p>\n<p><a href=\"https://i.stack.imgur.com/h0SO2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/h0SO2.png\" alt=\"Button Focus Example\" /></a></p>\n<p>The executable code can also be found <a href=\"https://raw.githubusercontent.com/nwawrzyniak/minimal-examples/master/ButtonFocusAnomalyExample.java\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>My questions now are:</p>\n<ol>\n<li>What are these different focusses?</li>\n<li>How can someone change the focus that shows as a dashed outline around the text of the button so that the space bar <strong>and</strong> the enter key would fire the event of the &quot;No&quot; button?</li>\n</ol>\n"},{"tags":["java","function","linked-list"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1671594450,"post_id":74870865,"comment_id":132130695,"body_markdown":"We need to see the code for `class CharmList` and `class CharmNode`.  I suspect you are not using `java.util.LinkedList&lt;E&gt;`, but using your own Linked List.  Either way, we should see the code.","body":"We need to see the code for <code>class CharmList</code> and <code>class CharmNode</code>.  I suspect you are not using <code>java.util.LinkedList&lt;E&gt;</code>, but using your own Linked List.  Either way, we should see the code."},{"owner":{"account_id":26537155,"reputation":11,"user_id":20168500,"display_name":"Dewotto"},"score":0,"creation_date":1671639665,"post_id":74870865,"comment_id":132143286,"body_markdown":"I added both CharmList and CharmNode classes","body":"I added both CharmList and CharmNode classes"}],"answers":[{"tags":[],"owner":{"account_id":20466438,"reputation":115,"user_id":15017829,"display_name":"Mike Kim"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1671591375,"creation_date":1671591375,"answer_id":74870896,"question_id":74870865,"body_markdown":"The first CharmNode price matches 1.25, so it calls `back.setNode()` while `back` is `null`.","title":"Is there a way to delete certain elements in a linked list above a certain number?","body":"<p>The first CharmNode price matches 1.25, so it calls <code>back.setNode()</code> while <code>back</code> is <code>null</code>.</p>\n"},{"tags":[],"owner":{"account_id":15237737,"reputation":484,"user_id":10994912,"display_name":"George R"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671858063,"creation_date":1671600014,"answer_id":74871608,"question_id":74870865,"body_markdown":"Your issue is that the first node is the one you are trying to remove, which means `back` is `null` hence the `NullPointerException`. You need to account for this with a special condition. So if the node to be removed is the first node then the next node needs to become the new first node:\r\n\r\n```java\r\nvoid remove(double price) {\r\n    CharmNode prev = null;\r\n    CharmNode current = list; // list is the first node (I would rename it)\r\n\r\n    while (current != null) {\r\n        // found first instance\r\n        if (current.getCharm().getPrice() == price) {\r\n            // current is the first\r\n            if (prev == null) {\r\n                list = current.getNextNode()) // set the new first node\r\n                current.setNode(null)\r\n            } else {\r\n                back.setNode(current.getNextNode());\r\n                current.setNode(null);\r\n            }\r\n            break;\r\n        }\r\n        back = current;\r\n        current = current.getNextNode();\r\n    }\r\n}\r\n```","title":"Is there a way to delete certain elements in a linked list above a certain number?","body":"<p>Your issue is that the first node is the one you are trying to remove, which means <code>back</code> is <code>null</code> hence the <code>NullPointerException</code>. You need to account for this with a special condition. So if the node to be removed is the first node then the next node needs to become the new first node:</p>\n<pre class=\"lang-java prettyprint-override\"><code>void remove(double price) {\n    CharmNode prev = null;\n    CharmNode current = list; // list is the first node (I would rename it)\n\n    while (current != null) {\n        // found first instance\n        if (current.getCharm().getPrice() == price) {\n            // current is the first\n            if (prev == null) {\n                list = current.getNextNode()) // set the new first node\n                current.setNode(null)\n            } else {\n                back.setNode(current.getNextNode());\n                current.setNode(null);\n            }\n            break;\n        }\n        back = current;\n        current = current.getNextNode();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":26537155,"reputation":11,"user_id":20168500,"display_name":"Dewotto"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1671858063,"creation_date":1671590981,"question_id":74870865,"body_markdown":"I have a linked list and I am trying to make a function that removes charms above a certain price. Lets say I have 4 charms and two of them cost $1.25 how would I remove them?\r\n\r\nI got my function to traverse the Linked list and remove the charms above the price but I get an error saying it cannot set the node because it is null\r\n\r\n\r\n```\r\nclass Main {\r\n  public static void main(String[] args) {\r\n\t\t\r\n\t\tCharmList Bracelet = new CharmList();\r\n\t\t\r\n\t\tBracelet.add(new Charm(&quot;YOLO&quot;, 1.25));\r\n\t\tBracelet.add(new Charm(&quot;Donald Duck&quot;, 1.25));\r\n\t\tBracelet.add(new Charm(&quot;Hello Kitty&quot;, 3.25));\r\n\t\tBracelet.add(new Charm(&quot;Drums&quot;, 4.25));\r\n\r\n\t\tSystem.out.print(Bracelet);\r\n\t\tSystem.out.println(Bracelet.total());\r\n    System.out.println(Bracelet.findPrice(&quot;YOLO&quot;));\r\n\r\n    Bracelet.remove(1.25);\r\n    System.out.println(Bracelet);\r\n    \r\n\t\t\t\t\r\n  }\r\n} \r\n```\r\n\r\n\r\n```\r\nvoid remove(double price) {\r\n\t\ttry {\r\n\t\t\tCharmNode back = null;\r\n\t\t\tCharmNode current = list;\r\n\t\t\tboolean found = false;\r\n\t\t\t\r\n\t\t\twhile (current != null &amp;&amp; !found) {\r\n\t\t\t\tif(current.getCharm().getPrice() == price) {\r\n\t\t\t\t\tfound = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tback = current;\r\n\t\t\t\t\tcurrent = current.getNextNode();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (found) {\r\n\t\t\t\t\tback.setNode(current.getNextNode());\r\n\t\t\t\t\tcurrent.setNode(null);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch(NullPointerException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\t\r\n\t} \r\n```\r\n\r\n```\r\npublic class CharmList {\r\n\r\n\tprivate CharmNode list;\r\n\t\r\n\tCharmList(){\r\n\t\tlist = null;\r\n\t}\r\n\t\r\n\tvoid add(Charm c) {\r\n\t\ttry {\r\n\t\t\tCharmNode temp = new CharmNode(c);\r\n\t\t\tCharmNode current = list;\r\n\t\t\tCharmNode back = null;\r\n\t\t\tboolean found = false;\r\n\r\n\r\n\t\t\twhile((current != null) &amp;&amp; (!found)) {\r\n\t\t\t\tif(temp.getCharm().getName().compareTo(current.getCharm().getName())&lt;0) {\r\n\t\t\t\t\tfound = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tback = current;\r\n\t\t\t\t\tcurrent = current.getNextNode();\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\ttemp.setNode(current);\r\n\t\t\t\t\r\n\t\t\t\tif(back == null) {\r\n\r\n\t\t\t\t\tlist = temp;\r\n\t\t\t\t}else {\r\n\t\t\t\t\tback.setNode(temp);\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t} catch(NullPointerException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\n\t\r\n\tvoid remove(double price) {\r\n\t\ttry {\r\n\t\t\tCharmNode back = null;\r\n\t\t\tCharmNode current = list;\r\n\t\t\tboolean found = false;\r\n\t\t\t\r\n\t\t\twhile (current != null &amp;&amp; !found) {\r\n\t\t\t\tif(current.getCharm().getPrice() == price) {\r\n\t\t\t\t\tfound = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tback = current;\r\n\t\t\t\t\tcurrent = current.getNextNode();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (found) {\r\n\t\t\t\t\tback.setNode(current.getNextNode());\r\n\t\t\t\t\tcurrent.setNode(null);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch(NullPointerException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\t\r\n\t} \r\n\t\r\n  public double findPrice(String name) {\r\n    try {\r\n      CharmNode back = null;\r\n      CharmNode current = list;\r\n      boolean found = false;\r\n\r\n      while (current != null &amp;&amp; !found) {\r\n        if (current.getCharm().getName().compareToIgnoreCase(name) == 0) {\r\n          found = true;\r\n        } else {\r\n          back = current;\r\n          current = current.getNextNode();\r\n        }\r\n\r\n        if (found) {\r\n           return current.getCharm().getPrice();\r\n        }\r\n      }\r\n    } catch(NullPointerException e) {\r\n      e.printStackTrace();\r\n    }\r\n    return 0.0;\r\n  }\r\n\t\r\n\t@Override\r\n\tpublic String toString() {\r\n\t\tString result = &quot;&quot;;\r\n\t\t\r\n\t\tCharmNode current = list;\r\n\t\t\r\n\t\twhile(current != null) {\r\n\t\t\tresult += current.getCharm().getName() + &quot;, &quot;;\r\n\t\t\tcurrent = current.next;\r\n\t\t}\r\n\t\tif (list == null) {\r\n\t\t\tSystem.out.println(&quot;&lt;No Charms&gt;&quot;);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n  public double total() {\r\n    double cost = 0.0;\r\n    \r\n\t\tCharmNode current = list;\r\n\t\t\r\n\t\twhile(current != null) {\r\n\t\t\tcost += current.getCharm().getPrice();\r\n\t\t\tcurrent = current.next;\r\n\t\t}\r\n\t\treturn cost;\r\n  }\r\n}\r\n```\r\n\r\n```\r\n  public class CharmNode {\r\n  \t\r\n  \tCharm charm;\r\n  \tCharmNode next;\r\n  \t\r\n  \tCharmNode(Charm c){\r\n  \t\tcharm = c;\r\n  \t\tnext = null;\r\n  \t}\r\n  \t\r\n  \tpublic Charm getCharm(){\r\n  \t\treturn charm;\r\n  \t}\r\n  \t\r\n  \tpublic CharmNode getNextNode() {\r\n  \t\treturn next;\r\n  \t}\r\n  \t\r\n  \tvoid setNode(CharmNode c) {\r\n  \t\tnext = c;\r\n  \t}\r\n  \r\n  \r\n  \r\n}\r\n```\r\n\r\n\r\n","title":"Is there a way to delete certain elements in a linked list above a certain number?","body":"<p>I have a linked list and I am trying to make a function that removes charms above a certain price. Lets say I have 4 charms and two of them cost $1.25 how would I remove them?</p>\n<p>I got my function to traverse the Linked list and remove the charms above the price but I get an error saying it cannot set the node because it is null</p>\n<pre><code>class Main {\n  public static void main(String[] args) {\n        \n        CharmList Bracelet = new CharmList();\n        \n        Bracelet.add(new Charm(&quot;YOLO&quot;, 1.25));\n        Bracelet.add(new Charm(&quot;Donald Duck&quot;, 1.25));\n        Bracelet.add(new Charm(&quot;Hello Kitty&quot;, 3.25));\n        Bracelet.add(new Charm(&quot;Drums&quot;, 4.25));\n\n        System.out.print(Bracelet);\n        System.out.println(Bracelet.total());\n    System.out.println(Bracelet.findPrice(&quot;YOLO&quot;));\n\n    Bracelet.remove(1.25);\n    System.out.println(Bracelet);\n    \n                \n  }\n} \n</code></pre>\n<pre><code>void remove(double price) {\n        try {\n            CharmNode back = null;\n            CharmNode current = list;\n            boolean found = false;\n            \n            while (current != null &amp;&amp; !found) {\n                if(current.getCharm().getPrice() == price) {\n                    found = true;\n                } else {\n                    back = current;\n                    current = current.getNextNode();\n                }\n                \n                if (found) {\n                    back.setNode(current.getNextNode());\n                    current.setNode(null);\n                }\n            }\n        } catch(NullPointerException e) {\n            e.printStackTrace();\n        }\n        \n    } \n</code></pre>\n<pre><code>public class CharmList {\n\n    private CharmNode list;\n    \n    CharmList(){\n        list = null;\n    }\n    \n    void add(Charm c) {\n        try {\n            CharmNode temp = new CharmNode(c);\n            CharmNode current = list;\n            CharmNode back = null;\n            boolean found = false;\n\n\n            while((current != null) &amp;&amp; (!found)) {\n                if(temp.getCharm().getName().compareTo(current.getCharm().getName())&lt;0) {\n                    found = true;\n                } else {\n                    back = current;\n                    current = current.getNextNode();\n\n                }\n            }\n                temp.setNode(current);\n                \n                if(back == null) {\n\n                    list = temp;\n                }else {\n                    back.setNode(temp);\n                }\n            \n                \n                \n            } catch(NullPointerException e) {\n                e.printStackTrace();\n        }\n    }\n\n    \n    void remove(double price) {\n        try {\n            CharmNode back = null;\n            CharmNode current = list;\n            boolean found = false;\n            \n            while (current != null &amp;&amp; !found) {\n                if(current.getCharm().getPrice() == price) {\n                    found = true;\n                } else {\n                    back = current;\n                    current = current.getNextNode();\n                }\n                \n                if (found) {\n                    back.setNode(current.getNextNode());\n                    current.setNode(null);\n                }\n            }\n        } catch(NullPointerException e) {\n            e.printStackTrace();\n        }\n        \n    } \n    \n  public double findPrice(String name) {\n    try {\n      CharmNode back = null;\n      CharmNode current = list;\n      boolean found = false;\n\n      while (current != null &amp;&amp; !found) {\n        if (current.getCharm().getName().compareToIgnoreCase(name) == 0) {\n          found = true;\n        } else {\n          back = current;\n          current = current.getNextNode();\n        }\n\n        if (found) {\n           return current.getCharm().getPrice();\n        }\n      }\n    } catch(NullPointerException e) {\n      e.printStackTrace();\n    }\n    return 0.0;\n  }\n    \n    @Override\n    public String toString() {\n        String result = &quot;&quot;;\n        \n        CharmNode current = list;\n        \n        while(current != null) {\n            result += current.getCharm().getName() + &quot;, &quot;;\n            current = current.next;\n        }\n        if (list == null) {\n            System.out.println(&quot;&lt;No Charms&gt;&quot;);\n        }\n        return result;\n    }\n\n  public double total() {\n    double cost = 0.0;\n    \n        CharmNode current = list;\n        \n        while(current != null) {\n            cost += current.getCharm().getPrice();\n            current = current.next;\n        }\n        return cost;\n  }\n}\n</code></pre>\n<pre><code>  public class CharmNode {\n    \n    Charm charm;\n    CharmNode next;\n    \n    CharmNode(Charm c){\n        charm = c;\n        next = null;\n    }\n    \n    public Charm getCharm(){\n        return charm;\n    }\n    \n    public CharmNode getNextNode() {\n        return next;\n    }\n    \n    void setNode(CharmNode c) {\n        next = c;\n    }\n  \n  \n  \n}\n</code></pre>\n"},{"tags":["java","regex","time","timeofday"],"comments":[{"owner":{"account_id":7089168,"reputation":157118,"user_id":5424988,"display_name":"The fourth bird"},"score":1,"creation_date":1671732878,"post_id":74892396,"comment_id":132166343,"body_markdown":"There is no group 1 in your pattern, it should be `System.out.println(m.group());`","body":"There is no group 1 in your pattern, it should be <code>System.out.println(m.group());</code>"},{"owner":{"account_id":262968,"reputation":767110,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"score":5,"creation_date":1671732893,"post_id":74892396,"comment_id":132166352,"body_markdown":"Why regex, just use DateTime api to parse the DateTime string and then get whatever you want.","body":"Why regex, just use DateTime api to parse the DateTime string and then get whatever you want."},{"owner":{"account_id":209503,"reputation":22790,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":1,"creation_date":1671732947,"post_id":74892396,"comment_id":132166369,"body_markdown":"@anubhava beat me to it. Don&#39;t rely on regex when you have actual APIs to do the job.","body":"@anubhava beat me to it. Don&#39;t rely on regex when you have actual APIs to do the job."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1671733382,"post_id":74892396,"comment_id":132166505,"body_markdown":"Start with `ZonedDateTime zdt = ZonedDateTime.parse(time, DateTimeFormatter.ofPattern(&quot;EEE MMM dd HH:mm:ss zzz y&quot;, Locale.ROOT));`. After that you may do either `zdt.toLocalTime()` or `zdt.format(DateTimeFormatter.ofPattern(&quot;HH:mm:ss&quot;))`. Either results in `01:12:22`,","body":"Start with <code>ZonedDateTime zdt = ZonedDateTime.parse(time, DateTimeFormatter.ofPattern(&quot;EEE MMM dd HH:mm:ss zzz y&quot;, Locale.ROOT));</code>. After that you may do either <code>zdt.toLocalTime()</code> or <code>zdt.format(DateTimeFormatter.ofPattern(&quot;HH:mm:ss&quot;))</code>. Either results in <code>01:12:22</code>,"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1671733718,"post_id":74892396,"comment_id":132166606,"body_markdown":"If you want help with the code you already have, please tell us in what way it fails? What are you seeing instead of the expected `01:12:22`? Paste it into the question.","body":"If you want help with the code you already have, please tell us in what way it fails? What are you seeing instead of the expected <code>01:12:22</code>? Paste it into the question."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1671735270,"post_id":74892396,"comment_id":132167067,"body_markdown":"Warning: Your string could contain other time zone abbreviations than `UTC`. If you assume that it is always UTC, you should validate this assumption. If you can’t be sure, you should convert the `ZonedDateTime` to UTC or which time zone you want before extracting the time as shown. In the worst case your string contains an *ambiguous* time zone abbreviations, they are many, and you won’t know what you get.","body":"Warning: Your string could contain other time zone abbreviations than <code>UTC</code>. If you assume that it is always UTC, you should validate this assumption. If you can’t be sure, you should convert the <code>ZonedDateTime</code> to UTC or which time zone you want before extracting the time as shown. In the worst case your string contains an <i>ambiguous</i> time zone abbreviations, they are many, and you won’t know what you get."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671746656,"creation_date":1671733702,"answer_id":74892560,"question_id":74892396,"body_markdown":"Regex is overkill here. \r\n\r\n# `String#split`\r\n\r\nYou could simply [split the string][1] by SPACE character, and take the fourth piece of text. Access the fourth piece with an index of three. \r\n\r\n    String timeText = input.split( &quot; &quot; )[ 3 ] ;\r\n\r\nSee this [code run at Ideone.com][2].\r\n\r\n&gt;01:12:22\r\n\r\n\r\n----------\r\n\r\n\r\nOr, as [commented][3], you could parse the entire string as a *java.time* object. Then extract the `LocalTime`. For this approach, see the [Answer by Arvind Kumar Avinash][4], and the [Answer by hc_dev][5].\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#split(java.lang.String)\r\n  [2]: https://ideone.com/ZIwtLJ\r\n  [3]: https://stackoverflow.com/users/5772882/ole-v-v\r\n  [4]: https://stackoverflow.com/a/74892880/642706\r\n  [5]: https://stackoverflow.com/a/74892843/642706","title":"Java regex to fetch HH:MM:SS from a string","body":"<p>Regex is overkill here.</p>\n<h1><code>String#split</code></h1>\n<p>You could simply <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#split(java.lang.String)\" rel=\"nofollow noreferrer\">split the string</a> by SPACE character, and take the fourth piece of text. Access the fourth piece with an index of three.</p>\n<pre><code>String timeText = input.split( &quot; &quot; )[ 3 ] ;\n</code></pre>\n<p>See this <a href=\"https://ideone.com/ZIwtLJ\" rel=\"nofollow noreferrer\">code run at Ideone.com</a>.</p>\n<blockquote>\n<p>01:12:22</p>\n</blockquote>\n<hr />\n<p>Or, as <a href=\"https://stackoverflow.com/users/5772882/ole-v-v\">commented</a>, you could parse the entire string as a <em>java.time</em> object. Then extract the <code>LocalTime</code>. For this approach, see the <a href=\"https://stackoverflow.com/a/74892880/642706\">Answer by Arvind Kumar Avinash</a>, and the <a href=\"https://stackoverflow.com/a/74892843/642706\">Answer by hc_dev</a>.</p>\n"},{"tags":[],"owner":{"account_id":7547772,"reputation":8583,"user_id":5730279,"display_name":"hc_dev"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1671736266,"creation_date":1671735668,"answer_id":74892843,"question_id":74892396,"body_markdown":"Not as simple (KISS) like [Basil suggested][1], but using *Java&#39;s Time API* elaborating on [Ole&#39;s comment][2]:\r\n\r\n### Steps using parser and temporal-query\r\nUse [`java.time.format.DateTimeFormatter.parse()`][3] method:\r\n\r\n```java\r\nString givenTime = &quot;01:12:22&quot;;\r\nString textWithTimeInside = &quot;Thu Dec 22 &quot;+ givenTime +&quot; UTC 2022&quot;;\r\n\r\n// create a formatter and parser for the given format\r\nDateTimeFormatter timeParser = DateTimeFormatter.ofPattern(&quot;EEE MMM dd HH:mm:ss zzz y&quot;, Locale.ROOT);\r\n\r\n// parse the given text\r\nvar temporalParsed = timeParser.parse(textWithTimeInside);\r\n\r\n// debug print the output of parsed Temporal (interface)\r\nSystem.out.println(temporalParsed);\r\n\r\n// extract time-part using a query\r\nLocalTime localTime = temporalParsed.query(LocalTime::from);\r\nSystem.out.println(localTime);\r\n\r\nassert localTime.toString().equals(givenTime);\r\n```\r\nPrints:\r\n```text\r\n{InstantSeconds=1671671542},ISO,UTC resolved to 2022-12-22T01:12:22\r\n01:12:22\r\n```\r\nRun the [demo on IDEone][4].\r\n\r\n### Shortcut\r\nUsing method `parse(CharSequence&#160;text, TemporalQuery&lt;T&gt;&#160;query)` directly:\r\n```\r\nLocalTime localTime = DateTimeFormatter.ofPattern(&quot;EEE MMM dd HH:mm:ss zzz y&quot;, Locale.ROOT)\r\n    .parse(&quot;Thu Dec 22 01:12:22 UTC 2022&quot;, LocalTime::from);\r\n```\r\n\r\n### See also\r\n* https://stackoverflow.com/questions/49895929/how-to-parse-time-hour-minute-from-a-string (also contains an answer from Ole V.V.)\r\n\r\nJava Docs:\r\n* [`TemporalQueries`][5], various predefined queries, e.g. for `LocalTime`\r\n* [`TemporalQuery`][6], explains how the query works\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/74892560/5730279\r\n  [2]: https://stackoverflow.com/questions/74892396/java-regex-to-fetch-hhmmss-from-a-string/74892843#comment132166505_74892396\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#parse-java.lang.CharSequence-\r\n  [4]: https://%20https://ideone.com/j5X45a\r\n  [5]: https://docs.oracle.com/javase/8/docs/api/java/time/temporal/TemporalQueries.html#localTime--\r\n  [6]: https://docs.oracle.com/javase/8/docs/api/java/time/temporal/TemporalQuery.html","title":"Java regex to fetch HH:MM:SS from a string","body":"<p>Not as simple (KISS) like <a href=\"https://stackoverflow.com/a/74892560/5730279\">Basil suggested</a>, but using <em>Java's Time API</em> elaborating on <a href=\"https://stackoverflow.com/questions/74892396/java-regex-to-fetch-hhmmss-from-a-string/74892843#comment132166505_74892396\">Ole's comment</a>:</p>\n<h3>Steps using parser and temporal-query</h3>\n<p>Use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#parse-java.lang.CharSequence-\" rel=\"nofollow noreferrer\"><code>java.time.format.DateTimeFormatter.parse()</code></a> method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String givenTime = &quot;01:12:22&quot;;\nString textWithTimeInside = &quot;Thu Dec 22 &quot;+ givenTime +&quot; UTC 2022&quot;;\n\n// create a formatter and parser for the given format\nDateTimeFormatter timeParser = DateTimeFormatter.ofPattern(&quot;EEE MMM dd HH:mm:ss zzz y&quot;, Locale.ROOT);\n\n// parse the given text\nvar temporalParsed = timeParser.parse(textWithTimeInside);\n\n// debug print the output of parsed Temporal (interface)\nSystem.out.println(temporalParsed);\n\n// extract time-part using a query\nLocalTime localTime = temporalParsed.query(LocalTime::from);\nSystem.out.println(localTime);\n\nassert localTime.toString().equals(givenTime);\n</code></pre>\n<p>Prints:</p>\n<pre><code>{InstantSeconds=1671671542},ISO,UTC resolved to 2022-12-22T01:12:22\n01:12:22\n</code></pre>\n<p>Run the <a href=\"https://%20https://ideone.com/j5X45a\" rel=\"nofollow noreferrer\">demo on IDEone</a>.</p>\n<h3>Shortcut</h3>\n<p>Using method <code>parse(CharSequence text, TemporalQuery&lt;T&gt; query)</code> directly:</p>\n<pre><code>LocalTime localTime = DateTimeFormatter.ofPattern(&quot;EEE MMM dd HH:mm:ss zzz y&quot;, Locale.ROOT)\n    .parse(&quot;Thu Dec 22 01:12:22 UTC 2022&quot;, LocalTime::from);\n</code></pre>\n<h3>See also</h3>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/49895929/how-to-parse-time-hour-minute-from-a-string\">How to parse time (hour, minute) from a string?</a> (also contains an answer from Ole V.V.)</li>\n</ul>\n<p>Java Docs:</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/temporal/TemporalQueries.html#localTime--\" rel=\"nofollow noreferrer\"><code>TemporalQueries</code></a>, various predefined queries, e.g. for <code>LocalTime</code></li>\n<li><a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/temporal/TemporalQuery.html\" rel=\"nofollow noreferrer\"><code>TemporalQuery</code></a>, explains how the query works</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1671737103,"creation_date":1671735913,"answer_id":74892880,"question_id":74892396,"body_markdown":"Regex is not the right tool for your requirement\r\n--\r\n\r\nAs also suggested by anubhava and Basil Bourque, the best tool to use here is date-time API.\r\n\r\n    import java.time.LocalTime;\r\n    import java.time.ZonedDateTime;\r\n    import java.time.format.DateTimeFormatter;\r\n    import java.util.Locale;\r\n    \r\n    class Main {\r\n        public static void main(String[] args) {\r\n            String strDateTime = &quot;Thu Dec 22 01:12:22 UTC 2022&quot;;\r\n            DateTimeFormatter parser = DateTimeFormatter.ofPattern(&quot;EEE MMM dd HH:mm:ss VV uuuu&quot;, Locale.ENGLISH);\r\n            ZonedDateTime zdt = ZonedDateTime.parse(strDateTime, parser);\r\n            LocalTime time = zdt.toLocalTime();\r\n            System.out.println(time);\r\n    \r\n            // Or get the string representation\r\n            String strTime = time.toString();\r\n            System.out.println(strTime);\r\n        }\r\n    }\r\n\r\n**Output**:\r\n\r\n    01:12:22\r\n    01:12:22\r\n\r\n**An important piece of advice from Ole V.V.**: If the time substring has zero seconds e.g. `01:12:00`, the default implementation of [`LocalTime#toString`](https://docs.oracle.com/javase/8/docs/api/java/time/LocalTime.html#toString--) removes the trailing `:00`. In that, you will need a formatter also to format the time.\r\n\r\n    class Main {\r\n        public static void main(String[] args) {\r\n            String strDateTime = &quot;Thu Dec 22 01:12:00 UTC 2022&quot;;\r\n            DateTimeFormatter parser = DateTimeFormatter.ofPattern(&quot;EEE MMM dd HH:mm:ss VV uuuu&quot;, Locale.ENGLISH);\r\n            ZonedDateTime zdt = ZonedDateTime.parse(strDateTime, parser);\r\n            LocalTime time = zdt.toLocalTime();\r\n    \r\n            DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;HH:mm:ss&quot;, Locale.ENGLISH);\r\n            String strTime = time.format(formatter);\r\n            System.out.println(strTime);\r\n        }\r\n    }\r\n**Output**:\r\n\r\n    01:12:00\r\n\r\nLearn more about the modern Date-Time API from **[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**.\r\n\r\n","title":"Java regex to fetch HH:MM:SS from a string","body":"<h2>Regex is not the right tool for your requirement</h2>\n<p>As also suggested by anubhava and Basil Bourque, the best tool to use here is date-time API.</p>\n<pre><code>import java.time.LocalTime;\nimport java.time.ZonedDateTime;\nimport java.time.format.DateTimeFormatter;\nimport java.util.Locale;\n\nclass Main {\n    public static void main(String[] args) {\n        String strDateTime = &quot;Thu Dec 22 01:12:22 UTC 2022&quot;;\n        DateTimeFormatter parser = DateTimeFormatter.ofPattern(&quot;EEE MMM dd HH:mm:ss VV uuuu&quot;, Locale.ENGLISH);\n        ZonedDateTime zdt = ZonedDateTime.parse(strDateTime, parser);\n        LocalTime time = zdt.toLocalTime();\n        System.out.println(time);\n\n        // Or get the string representation\n        String strTime = time.toString();\n        System.out.println(strTime);\n    }\n}\n</code></pre>\n<p><strong>Output</strong>:</p>\n<pre><code>01:12:22\n01:12:22\n</code></pre>\n<p><strong>An important piece of advice from Ole V.V.</strong>: If the time substring has zero seconds e.g. <code>01:12:00</code>, the default implementation of <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalTime.html#toString--\" rel=\"nofollow noreferrer\"><code>LocalTime#toString</code></a> removes the trailing <code>:00</code>. In that, you will need a formatter also to format the time.</p>\n<pre><code>class Main {\n    public static void main(String[] args) {\n        String strDateTime = &quot;Thu Dec 22 01:12:00 UTC 2022&quot;;\n        DateTimeFormatter parser = DateTimeFormatter.ofPattern(&quot;EEE MMM dd HH:mm:ss VV uuuu&quot;, Locale.ENGLISH);\n        ZonedDateTime zdt = ZonedDateTime.parse(strDateTime, parser);\n        LocalTime time = zdt.toLocalTime();\n\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;HH:mm:ss&quot;, Locale.ENGLISH);\n        String strTime = time.format(formatter);\n        System.out.println(strTime);\n    }\n}\n</code></pre>\n<p><strong>Output</strong>:</p>\n<pre><code>01:12:00\n</code></pre>\n<p>Learn more about the modern Date-Time API from <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">Trail: Date Time</a></strong>.</p>\n"},{"tags":[],"owner":{"account_id":2191726,"reputation":817,"user_id":1938574,"display_name":"Gregor Ophey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671759753,"creation_date":1671759753,"answer_id":74895406,"question_id":74892396,"body_markdown":"To answer the question as stated.\r\n\r\nAs the first comment to the OPs question pointed out, there is a problem with the call to group. There is no group with index 1 in the pattern.\r\n\r\nWhen running the code, java tells you the same:\r\n\r\n    ~/src $ java test.java\r\n    Hello, World!\r\n    h\r\n    Exception in thread &quot;main&quot; \r\n    java.lang.IndexOutOfBoundsException: No group 1\r\n        at java.base/java.util.regex.Matcher.group(Matcher.java:646)\r\n        at test.main(test.java:14) \r\n\r\nSo with either no argument (as suggested by 4th bird), or 0 as argument (shown below), the code works as intended:\r\n\r\n    import java.util.regex.Matcher;\r\n    import java.util.regex.Pattern;\r\n    \r\n    class test {\r\n    public static void main(String[] args) {\r\n        System.out.println(&quot;Hello, World!&quot;);\r\n        String time = &quot;Thu Dec 22 01:12:22 UTC 20\\22&quot;;                                              \r\n        String pattren = &quot;(?:2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9]&quot;;\r\n        Pattern p = Pattern.compile(pattren);\r\n        Matcher m = p.matcher(time);\r\n        System.out.println(&quot;h&quot;);\r\n    \r\n        while (m.find()) {\r\n            System.out.println(m.group(0));\r\n        }\r\n        return;\r\n    }\r\n    }\r\n\r\n\r\n","title":"Java regex to fetch HH:MM:SS from a string","body":"<p>To answer the question as stated.</p>\n<p>As the first comment to the OPs question pointed out, there is a problem with the call to group. There is no group with index 1 in the pattern.</p>\n<p>When running the code, java tells you the same:</p>\n<pre><code>~/src $ java test.java\nHello, World!\nh\nException in thread &quot;main&quot; \njava.lang.IndexOutOfBoundsException: No group 1\n    at java.base/java.util.regex.Matcher.group(Matcher.java:646)\n    at test.main(test.java:14) \n</code></pre>\n<p>So with either no argument (as suggested by 4th bird), or 0 as argument (shown below), the code works as intended:</p>\n<pre><code>import java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\nclass test {\npublic static void main(String[] args) {\n    System.out.println(&quot;Hello, World!&quot;);\n    String time = &quot;Thu Dec 22 01:12:22 UTC 20\\22&quot;;                                              \n    String pattren = &quot;(?:2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9]&quot;;\n    Pattern p = Pattern.compile(pattren);\n    Matcher m = p.matcher(time);\n    System.out.println(&quot;h&quot;);\n\n    while (m.find()) {\n        System.out.println(m.group(0));\n    }\n    return;\n}\n}\n</code></pre>\n"}],"owner":{"account_id":5490334,"reputation":175,"user_id":4363862,"accept_rate":0,"display_name":"Zoso619"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":211,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":74892560,"answer_count":4,"score":1,"last_activity_date":1671857570,"creation_date":1671732783,"question_id":74892396,"body_markdown":"```String time = &quot;Thu Dec 22 01:12:22 UTC 2022&quot;;```\r\n\r\nHow to fetch the HH:MM:SS (`01:12:22`) here using java regex .\r\nSo the output should be 01:12:22\r\nI am using the below code but its not working.\r\n\r\n        System.out.println(&quot;Hello, World!&quot;);\r\n        String time = &quot;Thu Dec 22 01:12:22 UTC 2022&quot;;\r\n        String pattren = &quot;(?:2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9]&quot;;\r\n        Pattern p = Pattern.compile(pattren);\r\n        Matcher m = p.matcher(time);\r\n        System.out.println(&quot;h&quot;);\r\n\r\n        while (m.find()) {\r\n            System.out.println(m.group(1));\r\n        }","title":"Java regex to fetch HH:MM:SS from a string","body":"<p><code>String time = &quot;Thu Dec 22 01:12:22 UTC 2022&quot;;</code></p>\n<p>How to fetch the HH:MM:SS (<code>01:12:22</code>) here using java regex .\nSo the output should be 01:12:22\nI am using the below code but its not working.</p>\n<pre><code>    System.out.println(&quot;Hello, World!&quot;);\n    String time = &quot;Thu Dec 22 01:12:22 UTC 2022&quot;;\n    String pattren = &quot;(?:2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9]&quot;;\n    Pattern p = Pattern.compile(pattren);\n    Matcher m = p.matcher(time);\n    System.out.println(&quot;h&quot;);\n\n    while (m.find()) {\n        System.out.println(m.group(1));\n    }\n</code></pre>\n"},{"tags":["java","spring","spring-boot","jmx"],"owner":{"account_id":4137388,"reputation":338,"user_id":3393720,"accept_rate":83,"display_name":"Gautham Honnavara"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671857131,"creation_date":1671820454,"question_id":74902938,"body_markdown":"I need to pass a spring property(that&#39;s defined via property source) to a jmx file.\r\n\r\n    The spring property is defined as @PropertySource(value=&quot;file:/etc/secrets/secret.properties&quot;)\r\n\r\nWithin this file, we have a property called as pass.key that I am trying to extract out.\r\nI can do this in spring via\r\n\r\n    @Value(&quot;${pass.key}&quot;)\r\n    private string passKey\r\n\r\nI have defined a jmx file that firsts calls an authentication API, gets the token as response, then we use the token to authorize the user and call subsequent API&#39;s.\r\nFor the authentication API, I need to pass in username,password(password would be the pass.key)\r\nBut when I pass this to jmx file for one of the API calls as an argument, its not able to parse that property.\r\nHere&#39;s how I am passing it:\r\n\r\n    &lt;stringProp name=&quot;Argument.value&quot;&gt; {&amp;#xd;\r\n    &amp;quot;password&amp;quot;: ${pass.key}&amp;#xd\r\n    }&lt;/stringProp&gt;\r\n\r\nInstead, I get the output as &quot;password&quot;: ${pass.key} instead of the value associated with the secret.\r\n\r\nI believe I am unable to pass spring properties to a JMX file. I need a way to pass them either via global variable or some other way.\r\n\r\nPlease assist.","title":"Pass spring property to a jmx file","body":"<p>I need to pass a spring property(that's defined via property source) to a jmx file.</p>\n<pre><code>The spring property is defined as @PropertySource(value=&quot;file:/etc/secrets/secret.properties&quot;)\n</code></pre>\n<p>Within this file, we have a property called as pass.key that I am trying to extract out.\nI can do this in spring via</p>\n<pre><code>@Value(&quot;${pass.key}&quot;)\nprivate string passKey\n</code></pre>\n<p>I have defined a jmx file that firsts calls an authentication API, gets the token as response, then we use the token to authorize the user and call subsequent API's.\nFor the authentication API, I need to pass in username,password(password would be the pass.key)\nBut when I pass this to jmx file for one of the API calls as an argument, its not able to parse that property.\nHere's how I am passing it:</p>\n<pre><code>&lt;stringProp name=&quot;Argument.value&quot;&gt; {&amp;#xd;\n&amp;quot;password&amp;quot;: ${pass.key}&amp;#xd\n}&lt;/stringProp&gt;\n</code></pre>\n<p>Instead, I get the output as &quot;password&quot;: ${pass.key} instead of the value associated with the secret.</p>\n<p>I believe I am unable to pass spring properties to a JMX file. I need a way to pass them either via global variable or some other way.</p>\n<p>Please assist.</p>\n"},{"tags":["java","android","arraylist"],"comments":[{"owner":{"account_id":6696437,"reputation":2557,"user_id":5164318,"display_name":"emandt"},"score":3,"creation_date":1648051146,"post_id":71590236,"comment_id":126527711,"body_markdown":"Why not read this? https://developer.android.com/training/basics/intents/result You need to execute &quot;startActivityForResult()&quot; and then retrieve modified ArrayList.","body":"Why not read this? <a href=\"https://developer.android.com/training/basics/intents/result\" rel=\"nofollow noreferrer\">developer.android.com/training/basics/intents/result</a> You need to execute &quot;startActivityForResult()&quot; and then retrieve modified ArrayList."},{"owner":{"account_id":1144312,"reputation":25594,"user_id":1127428,"accept_rate":79,"display_name":"Dale K"},"score":0,"creation_date":1671862230,"post_id":71590236,"comment_id":132189583,"body_markdown":"I was just about to answer your previous question if you want to undelete it.","body":"I was just about to answer your previous question if you want to undelete it."}],"answers":[{"tags":[],"owner":{"account_id":22564906,"reputation":3594,"user_id":17133283,"display_name":"Sambhav Khandelwal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1650654546,"creation_date":1648051352,"answer_id":71590410,"question_id":71590236,"body_markdown":"You can pass it using the `getIntent()` method. When you go back, you can override the `onBackPressed()` method and add your own login like the one given below. Check the code out:\r\n\r\n```java\r\n@Override\r\npublic void onBackPressed(){\r\n   getIntent().putParcelableArrayListExtra(&quot;vuser&quot;, vuser);\r\n   finish();\r\n}\r\n```\r\n\r\nThis will send data to the previous activity and then finish the current activity.\r\n","title":"How to return ArrayList from intent","body":"<p>You can pass it using the <code>getIntent()</code> method. When you go back, you can override the <code>onBackPressed()</code> method and add your own login like the one given below. Check the code out:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic void onBackPressed(){\n   getIntent().putParcelableArrayListExtra(&quot;vuser&quot;, vuser);\n   finish();\n}\n</code></pre>\n<p>This will send data to the previous activity and then finish the current activity.</p>\n"}],"owner":{"account_id":16887985,"reputation":19,"user_id":14511837,"display_name":"MathStudent1stYear"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"accepted_answer_id":71590410,"answer_count":1,"score":-2,"last_activity_date":1671857057,"creation_date":1648050704,"question_id":71590236,"body_markdown":"I have code that passes an `arraylist` to another intent, how can I return the value of updated `arraylist` back to the main intent?\r\n\r\nArraylist in main intent code:\r\n```\r\nArrayList&lt;Users&gt; vuser = new ArrayList&lt;&gt;();\r\nIntent intent = new Intent(LoginActivity.this, RegisterActivity.class);\r\nintent.putParcelableArrayListExtra(&quot;vuser&quot;, vuser);\r\nstartActivity(intent);\r\n```\r\nDo I have to pass the `arraylist` again to the main intent? Like this:\r\n\r\n    Intent intent = new Intent(RegisterActivity.this, LoginActivity.class);\r\n    intent.putParcelableArrayListExtra(&quot;vuser&quot;, vuser);\r\n    startActivity(intent);\r\n\r\n","title":"How to return ArrayList from intent","body":"<p>I have code that passes an <code>arraylist</code> to another intent, how can I return the value of updated <code>arraylist</code> back to the main intent?</p>\n<p>Arraylist in main intent code:</p>\n<pre><code>ArrayList&lt;Users&gt; vuser = new ArrayList&lt;&gt;();\nIntent intent = new Intent(LoginActivity.this, RegisterActivity.class);\nintent.putParcelableArrayListExtra(&quot;vuser&quot;, vuser);\nstartActivity(intent);\n</code></pre>\n<p>Do I have to pass the <code>arraylist</code> again to the main intent? Like this:</p>\n<pre><code>Intent intent = new Intent(RegisterActivity.this, LoginActivity.class);\nintent.putParcelableArrayListExtra(&quot;vuser&quot;, vuser);\nstartActivity(intent);\n</code></pre>\n"},{"tags":["java","list","algorithm","sorting","sharding"],"comments":[{"owner":{"display_name":"user6073886"},"score":1,"creation_date":1671813955,"post_id":74902008,"comment_id":132182769,"body_markdown":"So do I understand this correct, that if you have list1 with a size of 10, list2 with a size of 5 and list3 with a size of 20 and you want to get the 25th item, you really would like to get the 10th item of list3?","body":"So do I understand this correct, that if you have list1 with a size of 10, list2 with a size of 5 and list3 with a size of 20 and you want to get the 25th item, you really would like to get the 10th item of list3?"},{"owner":{"account_id":9371025,"reputation":141,"user_id":10662977,"display_name":"Samuel Squire"},"score":0,"creation_date":1671814924,"post_id":74902008,"comment_id":132183046,"body_markdown":"Assuming that list1, list2 and list3 are all independently properly sorted lists, and list1 is 5,10,15,20,25,30,35,40,45,50..., list2 is 2,4,6,8,10, list3 is 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20. The sorted order of list1+list2+list3 is [1, 2, 2, 3, 4, 4, 5, 5, 6, 6, 7, 8, 8, 9, 10, 10, 10, 11, 12, 13, 14, 15, 15, 16, 17, 18, 19, 20, 20, 25, 30, 35, 40, 45, 50]\nSo the 10th item is 7. I am trying to work out if I need to sort the combined lists.","body":"Assuming that list1, list2 and list3 are all independently properly sorted lists, and list1 is 5,10,15,20,25,30,35,40,45,50..., list2 is 2,4,6,8,10, list3 is 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20. The sorted order of list1+list2+list3 is [1, 2, 2, 3, 4, 4, 5, 5, 6, 6, 7, 8, 8, 9, 10, 10, 10, 11, 12, 13, 14, 15, 15, 16, 17, 18, 19, 20, 20, 25, 30, 35, 40, 45, 50] So the 10th item is 7. I am trying to work out if I need to sort the combined lists."},{"owner":{"display_name":"user6073886"},"score":1,"creation_date":1671815379,"post_id":74902008,"comment_id":132183165,"body_markdown":"Okay, in that case I really see no other choice than creating a large combined list and sorting and using that combined list.","body":"Okay, in that case I really see no other choice than creating a large combined list and sorting and using that combined list."}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671818753,"creation_date":1671818753,"answer_id":74902730,"question_id":74902008,"body_markdown":"You don&#39;t need to resort them. Since each list is already sorted you can merge them as follows.  This uses a single method to merge two lists based on their relative values.  Then it returns that list and feeds it back into the method to merge it with the next list.\r\n```\r\nimport java.util.ArrayList;\r\nimport java.util.Comparator;\r\nimport java.util.List;\r\n\r\npublic class Merging {\r\n\r\n    public static void main(String[] args) {\r\n        List&lt;Integer&gt; list1 = List.of(5,10,15,20,25,30,35,40,45,50);\r\n        List&lt;Integer&gt; list2 = List.of(2,4,6,8,10);\r\n        List&lt;Integer&gt; list3 = List.of(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20);\r\n        \r\n      \r\n        int nth = 10;\r\n        List&lt;List&lt;Integer&gt;&gt; lists = List.of(list1,list2,list3);\r\n        List&lt;Integer&gt; merged = lists.get(0);\r\n        for (int i = 1; i &lt; lists.size(); i++) {\r\n            merged = mergeLists(merged, lists.get(i));\r\n        }\r\n        System.out.println(merged.get(nth));\r\n    }\r\n```\r\nprints\r\n```\r\n7\r\n```\r\n- This works with any type that implements the [Comparable](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/Comparable.html) interface.\r\n- It will loop until one list is exhausted or until both indices exceed the combined list size.\r\n-  Once either list is finished, the other can be appended via the sublist.\r\n```\r\n    public static &lt;T extends Comparable&lt;? super T&gt;&gt; List&lt;T&gt; mergeLists(List&lt;T&gt; list1, List&lt;T&gt; list2) {\r\n        List&lt;T&gt; merged = new ArrayList&lt;&gt;();\r\n        int i1 = 0;\r\n        int i2 = 0;\r\n        while (i1 + i2 &lt; list1.size() + list2.size()) {\r\n            if (i1 &gt;= list1.size()) {\r\n                merged.addAll(list2.subList(i2,list2.size()));\r\n                break;\r\n            }\r\n            if (i2 &gt;= list2.size()) {\r\n                merged.addAll(list1.subList(i1,list1.size()));\r\n                break;\r\n            }\r\n            if(list1.get(i1).compareTo(list2.get(i2)) &lt;= 0) {\r\n                 merged.add(list1.get(i1++));\r\n            } else {\r\n                merged.add(list2.get(i2++));\r\n            }\r\n        }\r\n        return merged;\r\n    }\r\n}","title":"How do I retrieve the Nth item in multiple sorted lists as if there was one overall sorted list?","body":"<p>You don't need to resort them. Since each list is already sorted you can merge them as follows.  This uses a single method to merge two lists based on their relative values.  Then it returns that list and feeds it back into the method to merge it with the next list.</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.Comparator;\nimport java.util.List;\n\npublic class Merging {\n\n    public static void main(String[] args) {\n        List&lt;Integer&gt; list1 = List.of(5,10,15,20,25,30,35,40,45,50);\n        List&lt;Integer&gt; list2 = List.of(2,4,6,8,10);\n        List&lt;Integer&gt; list3 = List.of(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20);\n        \n      \n        int nth = 10;\n        List&lt;List&lt;Integer&gt;&gt; lists = List.of(list1,list2,list3);\n        List&lt;Integer&gt; merged = lists.get(0);\n        for (int i = 1; i &lt; lists.size(); i++) {\n            merged = mergeLists(merged, lists.get(i));\n        }\n        System.out.println(merged.get(nth));\n    }\n</code></pre>\n<p>prints</p>\n<pre><code>7\n</code></pre>\n<ul>\n<li>This works with any type that implements the <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/Comparable.html\" rel=\"nofollow noreferrer\">Comparable</a> interface.</li>\n<li>It will loop until one list is exhausted or until both indices exceed the combined list size.</li>\n<li>Once either list is finished, the other can be appended via the sublist.</li>\n</ul>\n<pre><code>    public static &lt;T extends Comparable&lt;? super T&gt;&gt; List&lt;T&gt; mergeLists(List&lt;T&gt; list1, List&lt;T&gt; list2) {\n        List&lt;T&gt; merged = new ArrayList&lt;&gt;();\n        int i1 = 0;\n        int i2 = 0;\n        while (i1 + i2 &lt; list1.size() + list2.size()) {\n            if (i1 &gt;= list1.size()) {\n                merged.addAll(list2.subList(i2,list2.size()));\n                break;\n            }\n            if (i2 &gt;= list2.size()) {\n                merged.addAll(list1.subList(i1,list1.size()));\n                break;\n            }\n            if(list1.get(i1).compareTo(list2.get(i2)) &lt;= 0) {\n                 merged.add(list1.get(i1++));\n            } else {\n                merged.add(list2.get(i2++));\n            }\n        }\n        return merged;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2124329,"reputation":612,"user_id":1886904,"display_name":"egeorge"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1671834602,"creation_date":1671819610,"answer_id":74902826,"question_id":74902008,"body_markdown":"Here is a relatively efficient (linear with respect to the number of lists) algorithm that leverages some of the power of streams, but avoids a full list merge.\r\n\r\n**EDIT**: To address shortcomings such as array length checking, array destruction, and readability I have improved this example. For better comparison, I have used the same integer test data as the other answer.\r\n\r\nThis virtual queue backed by the (presumably) immutable array will not mutate or otherwise\r\n```Java\r\npublic class VirtualQueue&lt;T&gt; {\r\n    private List&lt;T&gt; list;\r\n    private int index=0;\r\n    public VirtualQueue(List&lt;T&gt; list) { this.list = list; }\r\n\tpublic boolean hasMore() { return index &lt; list.size(); }\r\n    public T pop() { return list.get(index++); }\r\n    public T peek() { return list.get(index);}\r\n}\r\n```\r\n(I suspect that there is an easier way to do this with standard collections)\r\n\t\t\t\t\t\r\n\r\n```Java\r\nList&lt;Integer&gt; list1 = List.of(5,10,15,20,25,30,35,40,45,50);\r\nList&lt;Integer&gt; list2 = List.of(2,4,6,8,10);\r\nList&lt;Integer&gt; list3 = List.of(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20);\r\n\r\nList&lt;VirtualQueue&lt;Integer&gt;&gt; listList = List.of(\r\n    new VirtualQueue&lt;&gt;(list1),\r\n\tnew VirtualQueue&lt;&gt;(list2),\r\n\tnew VirtualQueue&lt;&gt;(list3));\r\n\r\nint n=10;\r\nvar value = IntStream.range(0,n)\r\n\t\t.mapToObj(i -&gt; listList.stream()\r\n      \t\t.filter(VirtualQueue::hasMore)\r\n\t\t\t.min(Comparator.comparing(l -&gt; l.peek()))\r\n\t\t\t.get().pop())\r\n\t\t.skip(n-1).findFirst().get();\r\n//value is now the nth item in a hypothetical merged list.\r\n```","title":"How do I retrieve the Nth item in multiple sorted lists as if there was one overall sorted list?","body":"<p>Here is a relatively efficient (linear with respect to the number of lists) algorithm that leverages some of the power of streams, but avoids a full list merge.</p>\n<p><strong>EDIT</strong>: To address shortcomings such as array length checking, array destruction, and readability I have improved this example. For better comparison, I have used the same integer test data as the other answer.</p>\n<p>This virtual queue backed by the (presumably) immutable array will not mutate or otherwise</p>\n<pre><code>public class VirtualQueue&lt;T&gt; {\n    private List&lt;T&gt; list;\n    private int index=0;\n    public VirtualQueue(List&lt;T&gt; list) { this.list = list; }\n    public boolean hasMore() { return index &lt; list.size(); }\n    public T pop() { return list.get(index++); }\n    public T peek() { return list.get(index);}\n}\n</code></pre>\n<p>(I suspect that there is an easier way to do this with standard collections)</p>\n<pre><code>List&lt;Integer&gt; list1 = List.of(5,10,15,20,25,30,35,40,45,50);\nList&lt;Integer&gt; list2 = List.of(2,4,6,8,10);\nList&lt;Integer&gt; list3 = List.of(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20);\n\nList&lt;VirtualQueue&lt;Integer&gt;&gt; listList = List.of(\n    new VirtualQueue&lt;&gt;(list1),\n    new VirtualQueue&lt;&gt;(list2),\n    new VirtualQueue&lt;&gt;(list3));\n\nint n=10;\nvar value = IntStream.range(0,n)\n        .mapToObj(i -&gt; listList.stream()\n            .filter(VirtualQueue::hasMore)\n            .min(Comparator.comparing(l -&gt; l.peek()))\n            .get().pop())\n        .skip(n-1).findFirst().get();\n//value is now the nth item in a hypothetical merged list.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1671856963,"creation_date":1671828095,"answer_id":74903837,"question_id":74902008,"body_markdown":"Assuming that you have `k` sorted Lists, and you need to obtain the `n` from the aggregated List (but the merged list itself don&#39;t needed), then this problem can be solved in **O(n * log k)** time, and by using **O(k)** additional space.\r\n\r\n***Note:***\r\n* *If the code below looks too much involved, here&#39;s the rationale behind that. This solution is more performant than straightforward comparison of elements from each list which can be observed in [this][anotherAnswer] and [this][veryPretentiousAnswer] answers, which time complexity **O(n * k)** (opposed to *O(n * log k)*). A moderate additional complexity is a cost of the performance gain, and note that it&#39;s still maintainable.*\r\n* *In case you would need to materialize the merged sorted list (solution below is not doing this), you can simply combine the lists together and make use of the built-in Timsort algorithm implementation via `List.sort()`. Timsort is [very good at spotting the sorted runs][timsort], therefore sorting a list that consists of sorted chunks would have a linear time complexity.*\r\n\r\n\r\nTo address the problem in **O(n * log k)** time, we can maintain a [`PriorityQueue`][priorityQueue] which would always have a size of `k` or less (*therefore enqueue/dequeue operation would have a cost of* **O(log k)**). At the beginning, the Queue should be initialized by adding the very first element from each List.\r\n\r\nThen we need to perform `n` iteration (to find the target element). At each iteration step the Head element of the Queue should be removed, and the next element originated from the same list should be added to the Queue (i.e. if let&#39;s say the 7th element from the 3rd List appear to be the Head of the Queue, then after removing it, we need to enqueue the 8th element from the 3rd List).\r\n\r\nIn order to be able to track from which List each element is coming from and what was its index in the List, we can define a custom type:\r\n\r\n    public class ElementWrapper&lt;V extends Comparable&lt;V&gt;&gt; implements Comparable&lt;ElementWrapper&lt;V&gt;&gt; {\r\n        private V value;\r\n        private int listIndex;\r\n        private int elementIndex;\r\n        \r\n        // all-args constructor, getters\r\n        \r\n        @Override\r\n        public int compareTo(ElementWrapper&lt;V&gt; o) {\r\n            return value.compareTo(o.getValue());\r\n        }\r\n    }\r\n\r\nAnd here&#39;s how this algorithm for finding the `n`-th element can be implemented. As I&#39;ve said, the time complexity is **O(n * log k)**, since we need `n` iteration step with each step having a cost of **O(log k)**. Additional memory required only to maintain a Queue of `k` element.\r\n\r\n    public static &lt;T extends Comparable&lt;T&gt;&gt; T getNElement(List&lt;List&lt;T&gt;&gt; lists, int n) {\r\n        Queue&lt;ElementWrapper&lt;T&gt;&gt; queue = initializeWithFirstElements(lists);\r\n        \r\n        T result = null;\r\n        int count = 1;\r\n        \r\n        while (!queue.isEmpty()) {\r\n            ElementWrapper&lt;T&gt; current = queue.remove();\r\n            \r\n            if (count == n) { // target index was reached\r\n                result = current.getValue();\r\n                break;\r\n            }\r\n            count++;\r\n            \r\n            if (hasNext(current, lists)) {\r\n                addNext(current, lists, queue);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    \r\n    public static &lt;T extends Comparable&lt;T&gt;&gt; Queue&lt;ElementWrapper&lt;T&gt;&gt;\r\n                initializeWithFirstElements(List&lt;List&lt;T&gt;&gt; lists) {\r\n        \r\n        Queue&lt;ElementWrapper&lt;T&gt;&gt; queue = new PriorityQueue&lt;&gt;();\r\n        for (int i = 0; i &lt; lists.size(); i++) {\r\n            if (lists.get(i).isEmpty()) continue;\r\n            queue.add(new ElementWrapper&lt;&gt;(lists.get(i).get(0), i, 0));\r\n        }\r\n        return queue;\r\n    }\r\n    \r\n    public static &lt;T extends Comparable&lt;T&gt;&gt; boolean\r\n                hasNext(ElementWrapper&lt;T&gt; current, List&lt;List&lt;T&gt;&gt; lists) {\r\n        \r\n        return current.getElementIndex() + 1 &lt; lists.get(current.getListIndex()).size();\r\n    }\r\n    \r\n    public static &lt;T extends Comparable&lt;T&gt;&gt; void\r\n                addNext(ElementWrapper&lt;T&gt; current, List&lt;List&lt;T&gt;&gt; lists,\r\n                        Queue&lt;ElementWrapper&lt;T&gt;&gt; queue) {\r\n        \r\n        ElementWrapper&lt;T&gt; next = new ElementWrapper&lt;&gt;(\r\n            lists.get(current.getListIndex()).get(current.getElementIndex() + 1),\r\n            current.getListIndex(),\r\n            current.getElementIndex() + 1\r\n        );\r\n        queue.add(next);\r\n    }\r\n\r\n*Usage example:*\r\n\r\n    public static void main(String[] args) {\r\n        List&lt;List&lt;Integer&gt;&gt; input =\r\n                List.of(List.of(1, 3), List.of(),\r\n                List.of(2, 6, 7), List.of(10), List.of(4, 5, 8, 9)\r\n            );\r\n        \r\n        System.out.println(getNElement(input, 1));\r\n        System.out.println(getNElement(input, 3));\r\n        System.out.println(getNElement(input, 9));\r\n    }\r\n\r\n*Output:*\r\n\r\n```\r\n1    // 1st\r\n3    // 3rd\r\n9    // 9th\r\n```\r\n\r\n***Note:** depending how do you want the `n`-th element to be indexed the `count` variable in the `getNElement()` method should be initialized accordingly, i.e. with `1` if you want to use `1`-based indexes, and with `0` if you want `n` to be `0`-based.*\r\n\r\n\r\n\r\n   [priorityQueue]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/PriorityQueue.html\r\n\r\n   [anotherAnswer]: https://stackoverflow.com/a/74902730/17949945\r\n\r\n   [veryPretentiousAnswer]: https://stackoverflow.com/a/74902826/17949945\r\n\r\n   [timsort]: https://en.wikipedia.org/wiki/Timsort#Operation","title":"How do I retrieve the Nth item in multiple sorted lists as if there was one overall sorted list?","body":"<p>Assuming that you have <code>k</code> sorted Lists, and you need to obtain the <code>n</code> from the aggregated List (but the merged list itself don't needed), then this problem can be solved in <strong>O(n * log k)</strong> time, and by using <strong>O(k)</strong> additional space.</p>\n<p><em><strong>Note:</strong></em></p>\n<ul>\n<li><em>If the code below looks too much involved, here's the rationale behind that. This solution is more performant than straightforward comparison of elements from each list which can be observed in <a href=\"https://stackoverflow.com/a/74902730/17949945\">this</a> and <a href=\"https://stackoverflow.com/a/74902826/17949945\">this</a> answers, which time complexity <strong>O(n * k)</strong> (opposed to <em>O(n * log k)</em>). A moderate additional complexity is a cost of the performance gain, and note that it's still maintainable.</em></li>\n<li><em>In case you would need to materialize the merged sorted list (solution below is not doing this), you can simply combine the lists together and make use of the built-in Timsort algorithm implementation via <code>List.sort()</code>. Timsort is <a href=\"https://en.wikipedia.org/wiki/Timsort#Operation\" rel=\"nofollow noreferrer\">very good at spotting the sorted runs</a>, therefore sorting a list that consists of sorted chunks would have a linear time complexity.</em></li>\n</ul>\n<p>To address the problem in <strong>O(n * log k)</strong> time, we can maintain a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/PriorityQueue.html\" rel=\"nofollow noreferrer\"><code>PriorityQueue</code></a> which would always have a size of <code>k</code> or less (<em>therefore enqueue/dequeue operation would have a cost of</em> <strong>O(log k)</strong>). At the beginning, the Queue should be initialized by adding the very first element from each List.</p>\n<p>Then we need to perform <code>n</code> iteration (to find the target element). At each iteration step the Head element of the Queue should be removed, and the next element originated from the same list should be added to the Queue (i.e. if let's say the 7th element from the 3rd List appear to be the Head of the Queue, then after removing it, we need to enqueue the 8th element from the 3rd List).</p>\n<p>In order to be able to track from which List each element is coming from and what was its index in the List, we can define a custom type:</p>\n<pre><code>public class ElementWrapper&lt;V extends Comparable&lt;V&gt;&gt; implements Comparable&lt;ElementWrapper&lt;V&gt;&gt; {\n    private V value;\n    private int listIndex;\n    private int elementIndex;\n    \n    // all-args constructor, getters\n    \n    @Override\n    public int compareTo(ElementWrapper&lt;V&gt; o) {\n        return value.compareTo(o.getValue());\n    }\n}\n</code></pre>\n<p>And here's how this algorithm for finding the <code>n</code>-th element can be implemented. As I've said, the time complexity is <strong>O(n * log k)</strong>, since we need <code>n</code> iteration step with each step having a cost of <strong>O(log k)</strong>. Additional memory required only to maintain a Queue of <code>k</code> element.</p>\n<pre><code>public static &lt;T extends Comparable&lt;T&gt;&gt; T getNElement(List&lt;List&lt;T&gt;&gt; lists, int n) {\n    Queue&lt;ElementWrapper&lt;T&gt;&gt; queue = initializeWithFirstElements(lists);\n    \n    T result = null;\n    int count = 1;\n    \n    while (!queue.isEmpty()) {\n        ElementWrapper&lt;T&gt; current = queue.remove();\n        \n        if (count == n) { // target index was reached\n            result = current.getValue();\n            break;\n        }\n        count++;\n        \n        if (hasNext(current, lists)) {\n            addNext(current, lists, queue);\n        }\n    }\n    return result;\n}\n\npublic static &lt;T extends Comparable&lt;T&gt;&gt; Queue&lt;ElementWrapper&lt;T&gt;&gt;\n            initializeWithFirstElements(List&lt;List&lt;T&gt;&gt; lists) {\n    \n    Queue&lt;ElementWrapper&lt;T&gt;&gt; queue = new PriorityQueue&lt;&gt;();\n    for (int i = 0; i &lt; lists.size(); i++) {\n        if (lists.get(i).isEmpty()) continue;\n        queue.add(new ElementWrapper&lt;&gt;(lists.get(i).get(0), i, 0));\n    }\n    return queue;\n}\n\npublic static &lt;T extends Comparable&lt;T&gt;&gt; boolean\n            hasNext(ElementWrapper&lt;T&gt; current, List&lt;List&lt;T&gt;&gt; lists) {\n    \n    return current.getElementIndex() + 1 &lt; lists.get(current.getListIndex()).size();\n}\n\npublic static &lt;T extends Comparable&lt;T&gt;&gt; void\n            addNext(ElementWrapper&lt;T&gt; current, List&lt;List&lt;T&gt;&gt; lists,\n                    Queue&lt;ElementWrapper&lt;T&gt;&gt; queue) {\n    \n    ElementWrapper&lt;T&gt; next = new ElementWrapper&lt;&gt;(\n        lists.get(current.getListIndex()).get(current.getElementIndex() + 1),\n        current.getListIndex(),\n        current.getElementIndex() + 1\n    );\n    queue.add(next);\n}\n</code></pre>\n<p><em>Usage example:</em></p>\n<pre><code>public static void main(String[] args) {\n    List&lt;List&lt;Integer&gt;&gt; input =\n            List.of(List.of(1, 3), List.of(),\n            List.of(2, 6, 7), List.of(10), List.of(4, 5, 8, 9)\n        );\n    \n    System.out.println(getNElement(input, 1));\n    System.out.println(getNElement(input, 3));\n    System.out.println(getNElement(input, 9));\n}\n</code></pre>\n<p><em>Output:</em></p>\n<pre><code>1    // 1st\n3    // 3rd\n9    // 9th\n</code></pre>\n<p><em><strong>Note:</strong> depending how do you want the <code>n</code>-th element to be indexed the <code>count</code> variable in the <code>getNElement()</code> method should be initialized accordingly, i.e. with <code>1</code> if you want to use <code>1</code>-based indexes, and with <code>0</code> if you want <code>n</code> to be <code>0</code>-based.</em></p>\n"}],"owner":{"account_id":9371025,"reputation":141,"user_id":10662977,"display_name":"Samuel Squire"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":173,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1671856963,"creation_date":1671813724,"question_id":74902008,"body_markdown":"I am working on a sharding problem.\r\n\r\n - Imagine I have 10 lists.\r\n - Each list has a series of items that are independently sorted.\r\n - I want to get the Nth item as if all the lists were sorted together in one large list.\r\n\r\nDo I need to sort the lists overall to get an item at a particular index?\r\n\r\nI solved a similar but not equivalent problem where there is:\r\n - 10 lists\r\n - Each list represents a range of items that are after the previous list.\r\n\r\nhere&#39;s the code to iterate through all the indexes of the lists:\r\n\r\n    /* code to iterate through all items in order\r\n        * threads refers to one of the lists */\r\n\r\n        int sizes[] = new int[threads.size()];\r\n        for (int i = 0 ; i &lt; threads.size(); i++) {\r\n            sizes[i] = threads.get(i).data2.size();\r\n        }\r\n        int n = 0;\r\n        int thread = 0;\r\n        int size = threads.size();\r\n        int offset = 0;\r\n        long iterationStart = System.nanoTime();\r\n        while (thread &lt; size) {\r\n\r\n            // System.out.println(String.format(&quot;%d %d&quot;, thread, offset + threads.get(thread).data.get(n)));\r\n            int current = offset + threads.get(thread).data.get(n);\r\n            n = n + 1;\r\n            if (n == sizes[thread]) {\r\n                offset += sizes[thread];\r\n                thread++;\r\n                n = 0;\r\n            }\r\n        }\r\n        long iterationEnd = System.nanoTime();\r\n        long iterationTime = iterationEnd - iterationStart;\r\n\r\nHere&#39;s the code to lookup an item by index.\r\n\r\n            int lookupKey = 329131;\r\n            int current = lookupKey;\r\n            int currentThread = 0;\r\n            int total = 0;\r\n            while (current &gt;= 0 &amp;&amp; currentThread &lt;= size - 1) {\r\n                int next = current - sizes[currentThread];\r\n    \r\n                if (next &gt;= 0) {\r\n                    total += sizes[currentThread];\r\n                    current -= sizes[currentThread];\r\n                    currentThread++;\r\n    \r\n                } else {\r\n                    break;\r\n                }\r\n    \r\n            }\r\n            long lookupEnd = System.nanoTime();\r\n            long lookupTime = lookupEnd - lookupStart;\r\n            System.out.println(String.format(&quot;%d %d&quot;,\r\n                    currentThread,\r\n                    total + threads.get(currentThread).data.get(current)));\r\n\r\nI&#39;m hoping there&#39;s some property of sorted collections that I can use to retrieve the Nth item in an overall sorted lists.\r\n\r\nWhat I have in effect is multiple partial orders.\r\n\r\nI have some other code that does a N way merge between multiple sorted lists. Is the fastest option to run this in a loop up to lookupIndex?\r\n\r\n            int size1 = threads.size();\r\n    \r\n            int[] positions = new int[size1];\r\n            Arrays.fill(positions, 0);\r\n            PriorityQueue&lt;Tuple&gt; pq = new PriorityQueue&lt;&gt;(new Comparator&lt;Tuple&gt;() {\r\n                @Override\r\n                public int compare(Tuple o1, Tuple o2) {\r\n                    return o1.value.compareTo(o2.value);\r\n                }\r\n            });\r\n            long startOrderedIteration = System.nanoTime();\r\n    \r\n            for (ShardedTotalRandomOrder thread : threads) {\r\n                for (int i = 0; i &lt; 10; i++) {\r\n    //                System.out.println(thread.data2.get(i));\r\n                    pq.add(thread.data2.get(i));\r\n                }\r\n            }\r\n            List&lt;Integer&gt; overall = new ArrayList&lt;&gt;();\r\n            while (!pq.isEmpty()) {\r\n                Tuple poll = pq.poll();\r\n                ArrayList&lt;Tuple&gt; data2 = threads.get(poll.thread).data2;\r\n                if (positions[poll.thread] &lt; data2.size()) {\r\n                    Tuple nextValue = data2.get(positions[poll.thread]++);\r\n                    pq.offer(nextValue);\r\n                }\r\n                overall.add(poll.value);\r\n                // System.out.println(String.format(&quot;%d %d&quot;, poll.thread, poll.value));\r\n            }\r\n            System.out.println(overall);\r\n            long endOrderedIteration = System.nanoTime();\r\n            long orderedIterationTime = endOrderedIteration - startOrderedIteration;","title":"How do I retrieve the Nth item in multiple sorted lists as if there was one overall sorted list?","body":"<p>I am working on a sharding problem.</p>\n<ul>\n<li>Imagine I have 10 lists.</li>\n<li>Each list has a series of items that are independently sorted.</li>\n<li>I want to get the Nth item as if all the lists were sorted together in one large list.</li>\n</ul>\n<p>Do I need to sort the lists overall to get an item at a particular index?</p>\n<p>I solved a similar but not equivalent problem where there is:</p>\n<ul>\n<li>10 lists</li>\n<li>Each list represents a range of items that are after the previous list.</li>\n</ul>\n<p>here's the code to iterate through all the indexes of the lists:</p>\n<pre><code>/* code to iterate through all items in order\n    * threads refers to one of the lists */\n\n    int sizes[] = new int[threads.size()];\n    for (int i = 0 ; i &lt; threads.size(); i++) {\n        sizes[i] = threads.get(i).data2.size();\n    }\n    int n = 0;\n    int thread = 0;\n    int size = threads.size();\n    int offset = 0;\n    long iterationStart = System.nanoTime();\n    while (thread &lt; size) {\n\n        // System.out.println(String.format(&quot;%d %d&quot;, thread, offset + threads.get(thread).data.get(n)));\n        int current = offset + threads.get(thread).data.get(n);\n        n = n + 1;\n        if (n == sizes[thread]) {\n            offset += sizes[thread];\n            thread++;\n            n = 0;\n        }\n    }\n    long iterationEnd = System.nanoTime();\n    long iterationTime = iterationEnd - iterationStart;\n</code></pre>\n<p>Here's the code to lookup an item by index.</p>\n<pre><code>        int lookupKey = 329131;\n        int current = lookupKey;\n        int currentThread = 0;\n        int total = 0;\n        while (current &gt;= 0 &amp;&amp; currentThread &lt;= size - 1) {\n            int next = current - sizes[currentThread];\n\n            if (next &gt;= 0) {\n                total += sizes[currentThread];\n                current -= sizes[currentThread];\n                currentThread++;\n\n            } else {\n                break;\n            }\n\n        }\n        long lookupEnd = System.nanoTime();\n        long lookupTime = lookupEnd - lookupStart;\n        System.out.println(String.format(&quot;%d %d&quot;,\n                currentThread,\n                total + threads.get(currentThread).data.get(current)));\n</code></pre>\n<p>I'm hoping there's some property of sorted collections that I can use to retrieve the Nth item in an overall sorted lists.</p>\n<p>What I have in effect is multiple partial orders.</p>\n<p>I have some other code that does a N way merge between multiple sorted lists. Is the fastest option to run this in a loop up to lookupIndex?</p>\n<pre><code>        int size1 = threads.size();\n\n        int[] positions = new int[size1];\n        Arrays.fill(positions, 0);\n        PriorityQueue&lt;Tuple&gt; pq = new PriorityQueue&lt;&gt;(new Comparator&lt;Tuple&gt;() {\n            @Override\n            public int compare(Tuple o1, Tuple o2) {\n                return o1.value.compareTo(o2.value);\n            }\n        });\n        long startOrderedIteration = System.nanoTime();\n\n        for (ShardedTotalRandomOrder thread : threads) {\n            for (int i = 0; i &lt; 10; i++) {\n//                System.out.println(thread.data2.get(i));\n                pq.add(thread.data2.get(i));\n            }\n        }\n        List&lt;Integer&gt; overall = new ArrayList&lt;&gt;();\n        while (!pq.isEmpty()) {\n            Tuple poll = pq.poll();\n            ArrayList&lt;Tuple&gt; data2 = threads.get(poll.thread).data2;\n            if (positions[poll.thread] &lt; data2.size()) {\n                Tuple nextValue = data2.get(positions[poll.thread]++);\n                pq.offer(nextValue);\n            }\n            overall.add(poll.value);\n            // System.out.println(String.format(&quot;%d %d&quot;, poll.thread, poll.value));\n        }\n        System.out.println(overall);\n        long endOrderedIteration = System.nanoTime();\n        long orderedIterationTime = endOrderedIteration - startOrderedIteration;\n</code></pre>\n"},{"tags":["java","java-11","opencsv","csvreader","csv-parser"],"comments":[{"owner":{"account_id":20410134,"reputation":2766,"user_id":14973743,"display_name":"Anand Sowmithiran"},"score":0,"creation_date":1671856938,"post_id":74905606,"comment_id":132189185,"body_markdown":"You should read using a streaming parser than the entire collection (eg List) at once.","body":"You should read using a streaming parser than the entire collection (eg List) at once."},{"owner":{"account_id":20466438,"reputation":115,"user_id":15017829,"display_name":"Mike Kim"},"score":0,"creation_date":1671856949,"post_id":74905606,"comment_id":132189186,"body_markdown":"What&#39;s the performance like when you do a &quot;bare bones&quot; experimental version with the absolute bare minimum to parse (ignoring all functional requirements, just to get a baseline benchmark)?","body":"What&#39;s the performance like when you do a &quot;bare bones&quot; experimental version with the absolute bare minimum to parse (ignoring all functional requirements, just to get a baseline benchmark)?"},{"owner":{"account_id":6356,"reputation":8963,"user_id":10659,"accept_rate":51,"display_name":"Loren Pechtel"},"score":2,"creation_date":1671856967,"post_id":74905606,"comment_id":132189187,"body_markdown":"Your first step should be profiling your code to figure out what&#39;s taking the time.","body":"Your first step should be profiling your code to figure out what&#39;s taking the time."},{"owner":{"account_id":20466438,"reputation":115,"user_id":15017829,"display_name":"Mike Kim"},"score":0,"creation_date":1671857057,"post_id":74905606,"comment_id":132189194,"body_markdown":"Re Anand&#39;s suggestion, here&#39;s an example of what he&#39;s talking about https://stackoverflow.com/questions/39673372/read-streaming-data-from-csv-using-opencsv","body":"Re Anand&#39;s suggestion, here&#39;s an example of what he&#39;s talking about <a href=\"https://stackoverflow.com/questions/39673372/read-streaming-data-from-csv-using-opencsv\" title=\"read streaming data from csv using opencsv\">stackoverflow.com/questions/39673372/&hellip;</a>"},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1671860865,"post_id":74905606,"comment_id":132189500,"body_markdown":"https://stackoverflow.com/questions/19486077/java-fastest-way-to-read-through-text-file-with-2-million-lines, @YAMM , anwser, have test read text file, `run: BufferedReader.readLine() into LinkedList, lines: 1000000, estimatedTime: 0.105118655`, maybe you can read file into LinkedList or ArrayList, then use multi thread read it from ArrayList and pass it to CsvToBeanBuilder","body":"<a href=\"https://stackoverflow.com/questions/19486077/java-fastest-way-to-read-through-text-file-with-2-million-lines\" title=\"java fastest way to read through text file with 2 million lines\">stackoverflow.com/questions/19486077/&hellip;</a>, @YAMM , anwser, have test read text file, <code>run: BufferedReader.readLine() into LinkedList, lines: 1000000, estimatedTime: 0.105118655</code>, maybe you can read file into LinkedList or ArrayList, then use multi thread read it from ArrayList and pass it to CsvToBeanBuilder"},{"owner":{"account_id":10862986,"reputation":73,"user_id":8391643,"display_name":"ychaulagain"},"score":0,"creation_date":1672197413,"post_id":74905606,"comment_id":132240080,"body_markdown":"@life888888 tried it but got an error. Do you have any link that I can take as a reference?","body":"@life888888 tried it but got an error. Do you have any link that I can take as a reference?"},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1672284665,"post_id":74905606,"comment_id":132258742,"body_markdown":"@ychaulagain, your code is wrong, `List&lt;ProjectVO&gt; csvValue`, csvValue is List, you can not get `csvValue.getActualCompletionDate()`.","body":"@ychaulagain, your code is wrong, <code>List&lt;ProjectVO&gt; csvValue</code>, csvValue is List, you can not get <code>csvValue.getActualCompletionDate()</code>."}],"owner":{"account_id":10862986,"reputation":73,"user_id":8391643,"display_name":"ychaulagain"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":210,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671856472,"creation_date":1671856472,"question_id":74905606,"body_markdown":"I have to read a large CSV file with about 700,000 records and compare the CSV data to an API response. I was able to use OpenCSV and make the code work. However, the deserialization process is extremely slow. It takes about an hour just to deserialize the data. I have been using the following code to read and deserialize my CSV.\r\n\r\n```\r\n     List&lt;ProjectVO&gt; csvValue = new CsvToBeanBuilder(new FileReader(&quot;project.csv&quot;))\r\n       .withType(ProjectVO.class).build().parse();\r\n```\r\nIs there any other efficient method to replace it?\r\n\r\nMy `PersonVO` class looks like this: \r\n    \r\n    .\r\n    .\r\n    .\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    public class ProjectVO {\r\n    @JsonProperty(&quot;actualCompletionDate&quot;)\r\n    @CsvBindByName(column = &quot;actualCompletionDate&quot;)\r\n    private String actualCompletionDate;\r\n    .\r\n    .\r\n    .\r\n\r\nI am comparing my CSV data and JSON response something like following:\r\n\r\n    assertEquals(&quot;The value for column &#39;actualCompletionDate&#39; has the same data in both files for the ID: &quot;\r\n       + jsonValue.getId(), csvValue.getActualCompletionDate(), jsonValue.getActualCompletionDate());","title":"How to read a huge CSV file efficiently and convert CSV values into objects based on a user-defined class in Java","body":"<p>I have to read a large CSV file with about 700,000 records and compare the CSV data to an API response. I was able to use OpenCSV and make the code work. However, the deserialization process is extremely slow. It takes about an hour just to deserialize the data. I have been using the following code to read and deserialize my CSV.</p>\n<pre><code>     List&lt;ProjectVO&gt; csvValue = new CsvToBeanBuilder(new FileReader(&quot;project.csv&quot;))\n       .withType(ProjectVO.class).build().parse();\n</code></pre>\n<p>Is there any other efficient method to replace it?</p>\n<p>My <code>PersonVO</code> class looks like this:</p>\n<pre><code>.\n.\n.\n@JsonIgnoreProperties(ignoreUnknown = true)\npublic class ProjectVO {\n@JsonProperty(&quot;actualCompletionDate&quot;)\n@CsvBindByName(column = &quot;actualCompletionDate&quot;)\nprivate String actualCompletionDate;\n.\n.\n.\n</code></pre>\n<p>I am comparing my CSV data and JSON response something like following:</p>\n<pre><code>assertEquals(&quot;The value for column 'actualCompletionDate' has the same data in both files for the ID: &quot;\n   + jsonValue.getId(), csvValue.getActualCompletionDate(), jsonValue.getActualCompletionDate());\n</code></pre>\n"},{"tags":["java","eclipse","junit"],"answers":[{"tags":[],"owner":{"account_id":13278454,"reputation":626,"user_id":9586997,"display_name":"aryanveer"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1600159064,"creation_date":1600028935,"answer_id":63875261,"question_id":63875055,"body_markdown":"You need to read this documentation of [Java Collections][1]. Find the sort method and check how it works.\r\n\r\nYou can do two things:\r\n\r\n1. Implement `Comparable` interface in your `LinkedinUser` class and override `compareTo` method, providing its implementation according to which you want to sort objects.\r\n\r\n2. Use `Comparator` interface, and implementing the `compare` method(using Anonymous Interface Implementations)\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/util/Collections.html","title":"Getting error The method sort(List&lt;T&gt;) in the type Collections is not applicable for the arguments (List&lt;LinkedInUser&gt;)","body":"<p>You need to read this documentation of <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Collections.html\" rel=\"nofollow noreferrer\">Java Collections</a>. Find the sort method and check how it works.</p>\n<p>You can do two things:</p>\n<ol>\n<li><p>Implement <code>Comparable</code> interface in your <code>LinkedinUser</code> class and override <code>compareTo</code> method, providing its implementation according to which you want to sort objects.</p>\n</li>\n<li><p>Use <code>Comparator</code> interface, and implementing the <code>compare</code> method(using Anonymous Interface Implementations)</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1600092090,"creation_date":1600036150,"answer_id":63876157,"question_id":63875055,"body_markdown":"The [method][1] is declared as:\r\n\r\n```lang-java\r\npublic static &lt;T extends Comparable&lt;? super T&gt;&gt; void sort(List&lt;T&gt; list)\r\n```\r\n\r\nWhen you call with a `List&lt;LinkedInUser&gt;`, it means that `T` is a `LinkedInUser`, which means that **`LinkedInUser` *must* implement `Comparable&lt;LinkedInUser&gt;`** *(or some super-type of `LinkedInUser`)*.\r\n\r\nIf you can&#39;t do that, call the [overload][2], so you can supply a `Comparator` instead:\r\n\r\n```lang-java\r\npublic static &lt;T&gt; void sort(List&lt;T&gt; list, Comparator&lt;? super T&gt; c)\r\n```\r\n\r\nRight now, without the class implementing `Comparable`, and without supplying a `Comparator`, what order did you expect the objects to be sorted in?\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#sort-java.util.List-\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#sort-java.util.List-java.util.Comparator-","title":"Getting error The method sort(List&lt;T&gt;) in the type Collections is not applicable for the arguments (List&lt;LinkedInUser&gt;)","body":"<p>The <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#sort-java.util.List-\" rel=\"nofollow noreferrer\">method</a> is declared as:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static &lt;T extends Comparable&lt;? super T&gt;&gt; void sort(List&lt;T&gt; list)\n</code></pre>\n<p>When you call with a <code>List&lt;LinkedInUser&gt;</code>, it means that <code>T</code> is a <code>LinkedInUser</code>, which means that <strong><code>LinkedInUser</code> <em>must</em> implement <code>Comparable&lt;LinkedInUser&gt;</code></strong> <em>(or some super-type of <code>LinkedInUser</code>)</em>.</p>\n<p>If you can't do that, call the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#sort-java.util.List-java.util.Comparator-\" rel=\"nofollow noreferrer\">overload</a>, so you can supply a <code>Comparator</code> instead:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static &lt;T&gt; void sort(List&lt;T&gt; list, Comparator&lt;? super T&gt; c)\n</code></pre>\n<p>Right now, without the class implementing <code>Comparable</code>, and without supplying a <code>Comparator</code>, what order did you expect the objects to be sorted in?</p>\n"}],"owner":{"account_id":19422270,"reputation":21,"user_id":14204560,"display_name":"Npclever"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":570,"favorite_count":0,"down_vote_count":3,"up_vote_count":2,"answer_count":2,"score":-1,"last_activity_date":1671856144,"creation_date":1600027439,"question_id":63875055,"body_markdown":"@Test\r\n\r\n\tpublic void sortingTest() throws LinkedInException {\r\n\t\r\n\tLinkedInUser Han = new LinkedInUser(&quot;Han&quot;, &quot;hanpass&quot;);\r\n\t\r\n\tLinkedInUser LUKE = new LinkedInUser(&quot;LUKE&quot;, &quot;LUKEpass&quot;);\r\n\t\r\n\tLinkedInUser leia = new LinkedInUser(&quot;leia&quot;, &quot;leiapass&quot;);\r\n\t\r\n\tHan.addConnection(LUKE);\r\n\t\r\n\tHan.addConnection(leia);\r\n\t\r\n\tList&lt;LinkedInUser&gt; hansConnections = Han.getConnections();\r\n\t\r\n\t\r\n\tCollections.sort(hansConnections);\r\n\t\r\n\thansConnections.get(0).equals(leia);\r\n\t\r\n\thansConnections.get(1).equals(LUKE);\r\n\t\r\n\t}\r\nI am getting an error code with my sort, if anyone could provide insight as to how to fix this issue I would appreciate it.","title":"Getting error The method sort(List&lt;T&gt;) in the type Collections is not applicable for the arguments (List&lt;LinkedInUser&gt;)","body":"<p>@Test</p>\n<pre><code>public void sortingTest() throws LinkedInException {\n\nLinkedInUser Han = new LinkedInUser(&quot;Han&quot;, &quot;hanpass&quot;);\n\nLinkedInUser LUKE = new LinkedInUser(&quot;LUKE&quot;, &quot;LUKEpass&quot;);\n\nLinkedInUser leia = new LinkedInUser(&quot;leia&quot;, &quot;leiapass&quot;);\n\nHan.addConnection(LUKE);\n\nHan.addConnection(leia);\n\nList&lt;LinkedInUser&gt; hansConnections = Han.getConnections();\n\n\nCollections.sort(hansConnections);\n\nhansConnections.get(0).equals(leia);\n\nhansConnections.get(1).equals(LUKE);\n\n}\n</code></pre>\n<p>I am getting an error code with my sort, if anyone could provide insight as to how to fix this issue I would appreciate it.</p>\n"},{"tags":["java","c++","constructor","initialization","initialization-list"],"answers":[{"tags":[],"owner":{"account_id":10730,"reputation":118663,"user_id":20394,"accept_rate":73,"display_name":"Mike Samuel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1314058081,"creation_date":1314054805,"answer_id":7154689,"question_id":7154654,"body_markdown":"Because Java does not need them to allow initialization of fields whose type has no zero-value.\r\n\r\nIn C++\r\n\r\n    class C {\r\n      D d;\r\n    }\r\n\r\nwithout a member initializer for `d`, `D::D()` will be called which makes it impossible to initialize the field if there is no zero-type for `D`.  This can happen when `D::D()` is explicitly declared `private`.\r\n\r\nIn Java, there is a known [zero-value](http://java.sun.com/docs/books/jvms/second_edition/html/Concepts.doc.html#15858) for all reference types, `null`, so a field can always be initialized.\r\n\r\nJava also does a bunch of work to make sure* that all `final` fields are initialized before first use and before the constructor ends, so while Java has a requirement like C++&#39;s `const` field initialization requirement, it just overloads `this.fieldName = &lt;expression&gt;` in the constructor body to mean field initialization.\r\n\r\n* : modulo exceptions thrown in the ctor, overridden method calls from the base class, etc.","title":"Why doesn&#39;t Java have initializer lists like in C++?","body":"<p>Because Java does not need them to allow initialization of fields whose type has no zero-value.</p>\n\n<p>In C++</p>\n\n<pre><code>class C {\n  D d;\n}\n</code></pre>\n\n<p>without a member initializer for <code>d</code>, <code>D::D()</code> will be called which makes it impossible to initialize the field if there is no zero-type for <code>D</code>.  This can happen when <code>D::D()</code> is explicitly declared <code>private</code>.</p>\n\n<p>In Java, there is a known <a href=\"http://java.sun.com/docs/books/jvms/second_edition/html/Concepts.doc.html#15858\" rel=\"nofollow\">zero-value</a> for all reference types, <code>null</code>, so a field can always be initialized.</p>\n\n<p>Java also does a bunch of work to make sure* that all <code>final</code> fields are initialized before first use and before the constructor ends, so while Java has a requirement like C++'s <code>const</code> field initialization requirement, it just overloads <code>this.fieldName = &lt;expression&gt;</code> in the constructor body to mean field initialization.</p>\n\n<ul>\n<li>: modulo exceptions thrown in the ctor, overridden method calls from the base class, etc.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":235018,"reputation":364834,"user_id":501557,"accept_rate":90,"display_name":"templatetypedef"},"down_vote_count":0,"up_vote_count":107,"is_accepted":true,"score":107,"last_activity_date":1671855768,"creation_date":1314054921,"answer_id":7154700,"question_id":7154654,"body_markdown":"In C++, initializer lists are necessary because of a few language features that are either not present in Java or work differently in Java:\r\n\r\n1. **`const`**:  In C++, you can define a fields that are marked `const` that cannot be assigned to and must be initialized in the initializer list.  Java does have `final` fields, but you can assign to `final` fields in the body of a constructor.  In C++, assigning to a `const` field in the constructor is illegal.\r\n\r\n2. **References**: In C++, references (as opposed to pointers) must be initialized to bind to some object.  It is illegal to create a reference without an initializer.  In C++, the way that you specify this is with the initializer list, since if you were to refer to the reference in the body of the constructor without first initializing it you would be using an uninitialized reference.  In Java, object references behave like C++ pointers and can be assigned to after created.  They just default to `null` otherwise.\r\n\r\n3. **Direct subobjects**.  In C++, an object can contain object directly as fields, whereas in Java objects can only hold *references* to those objects.  That is, in C++, if you declare an object that has a `string` as a member, the storage space for that string is built directly into the space for the object itself, while in Java you just get space for a reference to some other `String` object stored elsewhere.  Consequently, C++ needs to provide a way for you to give those subobjects initial values, since otherwise they&#39;d just stay uninitialized.  By default it uses the default constructor for those types, but if you want to use a different constructor or no default constructor is available the initializer list gives you a way to bypass this.  In Java, you don&#39;t need to worry about this because the references will default to `null`, and you can then assign them to refer to the objects you actually want them to refer to.  If you want to use a non-default constructor, then you don&#39;t need any special syntax for it; just set the reference to a new object initialized via the appropriate constructor.\r\n\r\nIn the few cases where Java might want initializer lists (for example, to call superclass constructors or give default values to its fields), this is handled through two other language features: the `super` keyword to invoke superclass constructors, and the fact that Java objects can give their fields default values at the point at which they&#39;re declared. Since C++ has multiple inheritance, just having a single `super` keyword wouldn&#39;t unambiguously refer to a single base class, and prior to C++11 C++ didn&#39;t support default initializers in a class and had to rely on initializer lists.","title":"Why doesn&#39;t Java have initializer lists like in C++?","body":"<p>In C++, initializer lists are necessary because of a few language features that are either not present in Java or work differently in Java:</p>\n<ol>\n<li><p><strong><code>const</code></strong>:  In C++, you can define a fields that are marked <code>const</code> that cannot be assigned to and must be initialized in the initializer list.  Java does have <code>final</code> fields, but you can assign to <code>final</code> fields in the body of a constructor.  In C++, assigning to a <code>const</code> field in the constructor is illegal.</p>\n</li>\n<li><p><strong>References</strong>: In C++, references (as opposed to pointers) must be initialized to bind to some object.  It is illegal to create a reference without an initializer.  In C++, the way that you specify this is with the initializer list, since if you were to refer to the reference in the body of the constructor without first initializing it you would be using an uninitialized reference.  In Java, object references behave like C++ pointers and can be assigned to after created.  They just default to <code>null</code> otherwise.</p>\n</li>\n<li><p><strong>Direct subobjects</strong>.  In C++, an object can contain object directly as fields, whereas in Java objects can only hold <em>references</em> to those objects.  That is, in C++, if you declare an object that has a <code>string</code> as a member, the storage space for that string is built directly into the space for the object itself, while in Java you just get space for a reference to some other <code>String</code> object stored elsewhere.  Consequently, C++ needs to provide a way for you to give those subobjects initial values, since otherwise they'd just stay uninitialized.  By default it uses the default constructor for those types, but if you want to use a different constructor or no default constructor is available the initializer list gives you a way to bypass this.  In Java, you don't need to worry about this because the references will default to <code>null</code>, and you can then assign them to refer to the objects you actually want them to refer to.  If you want to use a non-default constructor, then you don't need any special syntax for it; just set the reference to a new object initialized via the appropriate constructor.</p>\n</li>\n</ol>\n<p>In the few cases where Java might want initializer lists (for example, to call superclass constructors or give default values to its fields), this is handled through two other language features: the <code>super</code> keyword to invoke superclass constructors, and the fact that Java objects can give their fields default values at the point at which they're declared. Since C++ has multiple inheritance, just having a single <code>super</code> keyword wouldn't unambiguously refer to a single base class, and prior to C++11 C++ didn't support default initializers in a class and had to rely on initializer lists.</p>\n"},{"tags":[],"owner":{"account_id":433169,"reputation":1457,"user_id":818352,"accept_rate":33,"display_name":"George"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1314056158,"creation_date":1314056158,"answer_id":7154814,"question_id":7154654,"body_markdown":"**C++**\r\n\r\nThere is a difference between \r\n\r\n    ClassType t(initialization arguments);\r\n\r\nand \r\n\r\n    ClassType * pt;\r\n\r\nThe latter doesn&#39;t need to be initialized (set to NULL).  The former does.  Think of it as an integer.  You can&#39;t have an int without a value, **BUT** you can have an int pointer without a value.\r\n\r\nSo when you have:\r\n\r\n    class ClassType\r\n    {\r\n        OtherClass value;\r\n        OtherClass * reference;\r\n    };\r\n\r\nThen the declaration:\r\n\r\n    ClassType object;\r\n\r\nautomatically creates an instance of `OtherClass` in `value`.  Therefore, if `OtherClass` has initialization, it must be done in the `ClassType` constructor.  However, `reference` is just a pointer (address in memory) and can remain uninitialized.  If you want an instance of `OtherClass` you must use\r\n\r\n    object.reference = new OtherClass(initialization arguments);\r\n\r\n**Java**\r\n\r\nThere is only \r\n\r\n    class ClassType\r\n    {\r\n        OtherClass reference;\r\n    }\r\n\r\nThis is equivalent to a pointer in C++.  In this case when you do:\r\n\r\n    ClassType object = new ClassType();\r\n\r\nYou don&#39;t automatically create an instance of `OtherClass`.  Therefore, you don&#39;t have to initialize anything in the constructor unless you want to.  When you want an object of `OtherClass` you can use\r\n\r\n    object.reference = new OtherClass();\r\n\r\n","title":"Why doesn&#39;t Java have initializer lists like in C++?","body":"<p><strong>C++</strong></p>\n\n<p>There is a difference between </p>\n\n<pre><code>ClassType t(initialization arguments);\n</code></pre>\n\n<p>and </p>\n\n<pre><code>ClassType * pt;\n</code></pre>\n\n<p>The latter doesn't need to be initialized (set to NULL).  The former does.  Think of it as an integer.  You can't have an int without a value, <strong>BUT</strong> you can have an int pointer without a value.</p>\n\n<p>So when you have:</p>\n\n<pre><code>class ClassType\n{\n    OtherClass value;\n    OtherClass * reference;\n};\n</code></pre>\n\n<p>Then the declaration:</p>\n\n<pre><code>ClassType object;\n</code></pre>\n\n<p>automatically creates an instance of <code>OtherClass</code> in <code>value</code>.  Therefore, if <code>OtherClass</code> has initialization, it must be done in the <code>ClassType</code> constructor.  However, <code>reference</code> is just a pointer (address in memory) and can remain uninitialized.  If you want an instance of <code>OtherClass</code> you must use</p>\n\n<pre><code>object.reference = new OtherClass(initialization arguments);\n</code></pre>\n\n<p><strong>Java</strong></p>\n\n<p>There is only </p>\n\n<pre><code>class ClassType\n{\n    OtherClass reference;\n}\n</code></pre>\n\n<p>This is equivalent to a pointer in C++.  In this case when you do:</p>\n\n<pre><code>ClassType object = new ClassType();\n</code></pre>\n\n<p>You don't automatically create an instance of <code>OtherClass</code>.  Therefore, you don't have to initialize anything in the constructor unless you want to.  When you want an object of <code>OtherClass</code> you can use</p>\n\n<pre><code>object.reference = new OtherClass();\n</code></pre>\n"}],"owner":{"account_id":539129,"reputation":51271,"user_id":906773,"accept_rate":95,"display_name":"Jesse Good"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24957,"favorite_count":0,"down_vote_count":0,"up_vote_count":59,"accepted_answer_id":7154700,"answer_count":3,"score":59,"last_activity_date":1671855768,"creation_date":1314054521,"question_id":7154654,"body_markdown":"In C++, you can use an initializer list to initialize the class&#39;s fields before the constructor begins running.  For example:\r\n\r\n    Foo::Foo(string s, double d, int n) : name(s), weight(d), age(n) {\r\n        // Empty; already handled!\r\n    }\r\n\r\nI am curious why Java does not have a similar feature.  According to *Core Java: Volume 1*:\r\n\r\n&gt; C++ uses this special syntax to call field constructors. In Java, there is no need for it because objects have no subobjects, only pointers to other objects.\r\n\r\nHere are my questions:\r\n\r\n1. What do they mean by &quot;because objects have no subobjects?&quot; I don&#39;t understand what a subobject is (I tried looking it up); do they mean an instantiation of a subclass which extends a superclass?\r\n\r\n2. As for why Java does not have initializer lists like C++, I would assume that the reason is because all fields are already initialized by default in Java and also because Java uses the `super` keyword to call the super(or base in C++ lingo)-class constructor.  Is this correct?","title":"Why doesn&#39;t Java have initializer lists like in C++?","body":"<p>In C++, you can use an initializer list to initialize the class's fields before the constructor begins running.  For example:</p>\n\n<pre><code>Foo::Foo(string s, double d, int n) : name(s), weight(d), age(n) {\n    // Empty; already handled!\n}\n</code></pre>\n\n<p>I am curious why Java does not have a similar feature.  According to <em>Core Java: Volume 1</em>:</p>\n\n<blockquote>\n  <p>C++ uses this special syntax to call field constructors. In Java, there is no need for it because objects have no subobjects, only pointers to other objects.</p>\n</blockquote>\n\n<p>Here are my questions:</p>\n\n<ol>\n<li><p>What do they mean by \"because objects have no subobjects?\" I don't understand what a subobject is (I tried looking it up); do they mean an instantiation of a subclass which extends a superclass?</p></li>\n<li><p>As for why Java does not have initializer lists like C++, I would assume that the reason is because all fields are already initialized by default in Java and also because Java uses the <code>super</code> keyword to call the super(or base in C++ lingo)-class constructor.  Is this correct?</p></li>\n</ol>\n"},{"tags":["java","string","scala"],"comments":[{"owner":{"account_id":222214,"reputation":12763,"user_id":480674,"display_name":"pedrofurla"},"score":0,"creation_date":1476034294,"post_id":39945725,"comment_id":67173119,"body_markdown":"What does &quot;String Template&quot; do?","body":"What does &quot;String Template&quot; do?"}],"answers":[{"tags":[],"owner":{"account_id":5645,"reputation":168040,"user_id":9204,"accept_rate":82,"display_name":"Alexey Romanov"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1476034613,"creation_date":1476034259,"answer_id":39946470,"question_id":39945725,"body_markdown":"It&#39;s built into the language (in an extendable way). Just \r\n\r\n    val obj = Obj(&quot;replacement&quot;)\r\n    s&quot;xx ${obj.str} xx&quot;\r\n\r\nYou can have any Scala expression inside `${...}`.\r\n\r\nSee http://docs.scala-lang.org/overviews/core/string-interpolation.html (or just search for &quot;Scala string interpolation&quot;) for more.","title":"Scala - runtime String template","body":"<p>It's built into the language (in an extendable way). Just </p>\n\n<pre><code>val obj = Obj(\"replacement\")\ns\"xx ${obj.str} xx\"\n</code></pre>\n\n<p>You can have any Scala expression inside <code>${...}</code>.</p>\n\n<p>See <a href=\"http://docs.scala-lang.org/overviews/core/string-interpolation.html\" rel=\"nofollow\">http://docs.scala-lang.org/overviews/core/string-interpolation.html</a> (or just search for \"Scala string interpolation\") for more.</p>\n"},{"tags":[],"owner":{"account_id":61969,"reputation":825,"user_id":184394,"display_name":"tonakai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1476038386,"creation_date":1476038386,"answer_id":39947165,"question_id":39945725,"body_markdown":"Try to create your class like this:\r\n\r\n        case class Obj(@BeanProperty str: String)\r\nHere is the scala doc: http://www.scala-lang.org/api/current/#scala.beans.BeanProperty\r\n\r\nAlso you can take a look at the project Scalasti which is a interface for StringTemplate: http://software.clapper.org/scalasti/","title":"Scala - runtime String template","body":"<p>Try to create your class like this:</p>\n\n<pre><code>    case class Obj(@BeanProperty str: String)\n</code></pre>\n\n<p>Here is the scala doc: <a href=\"http://www.scala-lang.org/api/current/#scala.beans.BeanProperty\" rel=\"nofollow\">http://www.scala-lang.org/api/current/#scala.beans.BeanProperty</a></p>\n\n<p>Also you can take a look at the project Scalasti which is a interface for StringTemplate: <a href=\"http://software.clapper.org/scalasti/\" rel=\"nofollow\">http://software.clapper.org/scalasti/</a></p>\n"}],"owner":{"account_id":4097938,"reputation":3833,"user_id":3364192,"accept_rate":53,"display_name":"user3364192"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":353,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1671855607,"creation_date":1476029640,"question_id":39945725,"body_markdown":"I want to do exactly what java&#39;s String Template does, but in scala. This library however does not work with case classes:\r\n\r\n    case class Obj(str:String)\r\n    val st = new ST(&quot;xx $obj.str$ xx&quot;,&#39;$&#39;,&#39;$&#39;)\r\n    st.add(&quot;obj&quot;,Obj(&quot;replacement&quot;))\r\n    st.render()  //returns &quot;xx  xx&quot;\r\n\r\nST tries to find property &quot;str&quot; with reflection, but it just does not work with scala.\r\n\r\nHow can I achieve it without ST?","title":"Scala - runtime String template","body":"<p>I want to do exactly what java's String Template does, but in scala. This library however does not work with case classes:</p>\n\n<pre><code>case class Obj(str:String)\nval st = new ST(\"xx $obj.str$ xx\",'$','$')\nst.add(\"obj\",Obj(\"replacement\"))\nst.render()  //returns \"xx  xx\"\n</code></pre>\n\n<p>ST tries to find property \"str\" with reflection, but it just does not work with scala.</p>\n\n<p>How can I achieve it without ST?</p>\n"},{"tags":["java","kotlin","quarkus","quarkus-rest-client","quarkus-reactive"],"owner":{"account_id":6800049,"reputation":2045,"user_id":5233656,"accept_rate":88,"display_name":"Mark"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":360,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1671855528,"creation_date":1671852992,"question_id":74905450,"body_markdown":"Im trying to use `io.quarkus:quarkus-rest-client-reactive-jackson` to send a multipart file.\r\n\r\nHere is my client class\r\n\r\n    @RegisterRestClient(configKey = &quot;foo&quot;)\r\n    interface FooClient {\r\n        @POST\r\n        @Path(&quot;/upload&quot;)\r\n        fun uploadFile(\r\n            @RestForm(&quot;file&quot;)\r\n            @PartType(&quot;application/octet-stream&quot;)\r\n            file: ByteArray\r\n        ): Uni&lt;String&gt;\r\n    }\r\n\r\nand here is how I invoke it\r\n\r\n    val file:ByteArray = storage.readAllBytes(&quot;foo&quot;, &quot;foo&quot;)\r\n    fooClient.uploadFile(file = file)\r\n                  .subscribe()\r\n                  .with { log.info(&quot;upload file result : $it&quot;) }\r\n\r\nbut I always get internal server error\r\n\r\n&gt; 2022-12-24 03:11:55,135 ERROR [io.qua.mut.run.MutinyInfrastructure]\r\n&gt; (vert.x-eventloop-thread-0) Mutiny had to drop the following\r\n&gt; exception: org.jboss.resteasy.reactive.ClientWebApplicationException:\r\n&gt; Received: &#39;Internal Server Error, status code 500&#39; when invoking: Rest\r\n&gt; Client method: &#39;foo.FooClient#uploadFile&#39;\r\n\r\n\r\nHow to send a multipart file with `ByteArray` in `quarkus reactive`?\r\n","title":"Quarkus reactive client - sending Multipart from ByteArray","body":"<p>Im trying to use <code>io.quarkus:quarkus-rest-client-reactive-jackson</code> to send a multipart file.</p>\n<p>Here is my client class</p>\n<pre><code>@RegisterRestClient(configKey = &quot;foo&quot;)\ninterface FooClient {\n    @POST\n    @Path(&quot;/upload&quot;)\n    fun uploadFile(\n        @RestForm(&quot;file&quot;)\n        @PartType(&quot;application/octet-stream&quot;)\n        file: ByteArray\n    ): Uni&lt;String&gt;\n}\n</code></pre>\n<p>and here is how I invoke it</p>\n<pre><code>val file:ByteArray = storage.readAllBytes(&quot;foo&quot;, &quot;foo&quot;)\nfooClient.uploadFile(file = file)\n              .subscribe()\n              .with { log.info(&quot;upload file result : $it&quot;) }\n</code></pre>\n<p>but I always get internal server error</p>\n<blockquote>\n<p>2022-12-24 03:11:55,135 ERROR [io.qua.mut.run.MutinyInfrastructure]\n(vert.x-eventloop-thread-0) Mutiny had to drop the following\nexception: org.jboss.resteasy.reactive.ClientWebApplicationException:\nReceived: 'Internal Server Error, status code 500' when invoking: Rest\nClient method: 'foo.FooClient#uploadFile'</p>\n</blockquote>\n<p>How to send a multipart file with <code>ByteArray</code> in <code>quarkus reactive</code>?</p>\n"},{"tags":["java","arrays","arraylist","linked-list","hashmap"],"comments":[{"owner":{"account_id":80775,"reputation":80356,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":11,"creation_date":1320207979,"post_id":7975802,"comment_id":9753602,"body_markdown":"`Lists` and `Maps` are two *completely* different data structures, with different operations and invariants.  Can you explain the context/requirements you&#39;re thinking of where both would be acceptable solutions?","body":"<code>Lists</code> and <code>Maps</code> are two <i>completely</i> different data structures, with different operations and invariants.  Can you explain the context/requirements you&#39;re thinking of where both would be acceptable solutions?"},{"owner":{"account_id":115344,"reputation":76329,"user_id":302916,"display_name":"Brian Roach"},"score":3,"creation_date":1320208266,"post_id":7975802,"comment_id":9753646,"body_markdown":"Apparently you&#39;ve never needed to keep a set of things *in a particular order* ...","body":"Apparently you&#39;ve never needed to keep a set of things <i>in a particular order</i> ..."},{"owner":{"display_name":"user517491"},"score":59,"creation_date":1320209792,"post_id":7975802,"comment_id":9753795,"body_markdown":"Downvote, why? I think this is a proper question. Shows lack of knowlegde though, but on SO question should not be downvoted for showing lack of knowledge. In fact a question is always a result of lack of knowledge.","body":"Downvote, why? I think this is a proper question. Shows lack of knowlegde though, but on SO question should not be downvoted for showing lack of knowledge. In fact a question is always a result of lack of knowledge."}],"answers":[{"tags":[],"owner":{"account_id":148537,"reputation":564,"user_id":360384,"accept_rate":100,"display_name":"jazzdawg"},"down_vote_count":0,"up_vote_count":34,"is_accepted":false,"score":34,"last_activity_date":1320209770,"creation_date":1320209121,"answer_id":7975907,"question_id":7975802,"body_markdown":"Lists and Maps are different data structures. Maps are used for when you want to associate a key with a value and Lists are an ordered collection.\r\n\r\nMap is an interface in the Java Collection Framework and a HashMap is one implementation of the Map interface. HashMap are efficient for locating a value based on a key and inserting and deleting values based on a key. The entries of a HashMap are not ordered.\r\n\r\nArrayList and LinkedList are an implementation of the List interface. LinkedList provides sequential access and is generally more efficient at inserting and deleting elements in the list, however, it is it less efficient at accessing elements in a list. ArrayList provides random access and is more efficient at accessing elements but is generally slower at inserting and deleting elements.","title":"When to use HashMap over LinkedList or ArrayList and vice-versa","body":"<p>Lists and Maps are different data structures. Maps are used for when you want to associate a key with a value and Lists are an ordered collection.</p>\n\n<p>Map is an interface in the Java Collection Framework and a HashMap is one implementation of the Map interface. HashMap are efficient for locating a value based on a key and inserting and deleting values based on a key. The entries of a HashMap are not ordered.</p>\n\n<p>ArrayList and LinkedList are an implementation of the List interface. LinkedList provides sequential access and is generally more efficient at inserting and deleting elements in the list, however, it is it less efficient at accessing elements in a list. ArrayList provides random access and is more efficient at accessing elements but is generally slower at inserting and deleting elements.</p>\n"},{"tags":[],"owner":{"account_id":922081,"reputation":1353,"user_id":953582,"display_name":"polster"},"down_vote_count":0,"up_vote_count":102,"is_accepted":true,"score":102,"last_activity_date":1671855273,"creation_date":1320210215,"answer_id":7976002,"question_id":7975802,"body_markdown":"Lists represent a sequential ordering of elements.\r\nMaps are used to represent a collection of key / value pairs.\r\n\r\nWhile you could use a map as a list, there are some definite downsides of doing so.\r\n\r\n**Maintaining order:**\r\n- A list by definition is ordered.   You add items and then you are able to iterate back through the list in the order that you inserted the items.    When you add items to a HashMap, you are not guaranteed to retrieve the items in the same order you put them in.   There are subclasses of HashMap like LinkedHashMap that will maintain the order, but in general order is not guaranteed with a Map.\r\n\r\n**Key/Value semantics:**\r\n- The purpose of a map is to store items based on a key that can be used to retrieve the item at a later point.    Similar functionality can only be achieved with a list in the limited case where the key happens to be the position in the list. \r\n  \r\n\r\n**Code readability**\r\nConsider the following examples.   \r\n\r\n        // Adding to a List\r\n        list.add(myObject);         // adds to the end of the list\r\n        map.put(myKey, myObject);   // sure, you can do this, but what is myKey?\r\n        map.put(&quot;1&quot;, myObject);     // you could use the position as a key but why?\r\n\r\n        // Iterating through the items\r\n        for (Object o : myList)           // nice and easy\r\n        for (Object o : myMap.values())   // more code and the order is not guaranteed\r\n\r\n**Collection functionality**\r\nSome great utility functions are available for lists via the Collections class.   For example ... \r\n\r\n        // Randomize the list\r\n        Collections.shuffle(myList);\r\n\r\n        // Sort the list\r\n        Collections.sort(myList, myComparator);","title":"When to use HashMap over LinkedList or ArrayList and vice-versa","body":"<p>Lists represent a sequential ordering of elements.\nMaps are used to represent a collection of key / value pairs.</p>\n<p>While you could use a map as a list, there are some definite downsides of doing so.</p>\n<p><strong>Maintaining order:</strong></p>\n<ul>\n<li>A list by definition is ordered.   You add items and then you are able to iterate back through the list in the order that you inserted the items.    When you add items to a HashMap, you are not guaranteed to retrieve the items in the same order you put them in.   There are subclasses of HashMap like LinkedHashMap that will maintain the order, but in general order is not guaranteed with a Map.</li>\n</ul>\n<p><strong>Key/Value semantics:</strong></p>\n<ul>\n<li>The purpose of a map is to store items based on a key that can be used to retrieve the item at a later point.    Similar functionality can only be achieved with a list in the limited case where the key happens to be the position in the list.</li>\n</ul>\n<p><strong>Code readability</strong>\nConsider the following examples.</p>\n<pre><code>    // Adding to a List\n    list.add(myObject);         // adds to the end of the list\n    map.put(myKey, myObject);   // sure, you can do this, but what is myKey?\n    map.put(&quot;1&quot;, myObject);     // you could use the position as a key but why?\n\n    // Iterating through the items\n    for (Object o : myList)           // nice and easy\n    for (Object o : myMap.values())   // more code and the order is not guaranteed\n</code></pre>\n<p><strong>Collection functionality</strong>\nSome great utility functions are available for lists via the Collections class.   For example ...</p>\n<pre><code>    // Randomize the list\n    Collections.shuffle(myList);\n\n    // Sort the list\n    Collections.sort(myList, myComparator);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16801425,"reputation":56,"user_id":12146580,"display_name":"Simon Walker"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1576265068,"creation_date":1576265068,"answer_id":59328660,"question_id":7975802,"body_markdown":"The downfall of ArrayList and LinkedList is that when iterating through them, depending on the search algorithm, the time it takes to find an item grows with the size of the list.\r\n\r\nThe beauty of hashing is that although you sacrifice some extra time searching for the element, the time taken does not grow with the size of the map. This is because the HashMap finds information by converting the element you are searching for, directly into the index, so it can make the jump.\r\n\r\nLong story short...\r\n**LinkedList**: Consumes a little more memory than ArrayList, low cost for insertions(add &amp; remove)\r\n**ArrayList**: Consumes low memory, but similar to LinkedList, and takes extra time to search when large.\r\n**HashMap**: Can perform a jump to the value, making the search time constant for large maps. Consumes more memory and takes longer to find the value than small lists.","title":"When to use HashMap over LinkedList or ArrayList and vice-versa","body":"<p>The downfall of ArrayList and LinkedList is that when iterating through them, depending on the search algorithm, the time it takes to find an item grows with the size of the list.</p>\n\n<p>The beauty of hashing is that although you sacrifice some extra time searching for the element, the time taken does not grow with the size of the map. This is because the HashMap finds information by converting the element you are searching for, directly into the index, so it can make the jump.</p>\n\n<p>Long story short...\n<strong>LinkedList</strong>: Consumes a little more memory than ArrayList, low cost for insertions(add &amp; remove)\n<strong>ArrayList</strong>: Consumes low memory, but similar to LinkedList, and takes extra time to search when large.\n<strong>HashMap</strong>: Can perform a jump to the value, making the search time constant for large maps. Consumes more memory and takes longer to find the value than small lists.</p>\n"},{"tags":[],"owner":{"account_id":3130552,"reputation":1267,"user_id":2648444,"display_name":"vhbazan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1588203496,"creation_date":1588203496,"answer_id":61513500,"question_id":7975802,"body_markdown":"I will put here some real case examples and scenarios when to use one or another, it might be of help for somebody else: \r\n\r\n**HashMap**\r\n\r\nWhen you have to use cache in your application. Redis and membase are some type of extended HashMap. (Doesn&#39;t matter the order of the elements, you need quick ( O(1) ) read access (a value), using a key). \r\n\r\n**LinkedList**\r\n\r\nWhen the order is important (they are ordered as they were added to the LinkedList), the number of elements are unknown (don&#39;t waste memory allocation) and you require quick insertion time ( O(1) ). A list of to-do items that can be listed sequentially as they are added is a good example. \r\n\r\n","title":"When to use HashMap over LinkedList or ArrayList and vice-versa","body":"<p>I will put here some real case examples and scenarios when to use one or another, it might be of help for somebody else: </p>\n\n<p><strong>HashMap</strong></p>\n\n<p>When you have to use cache in your application. Redis and membase are some type of extended HashMap. (Doesn't matter the order of the elements, you need quick ( O(1) ) read access (a value), using a key). </p>\n\n<p><strong>LinkedList</strong></p>\n\n<p>When the order is important (they are ordered as they were added to the LinkedList), the number of elements are unknown (don't waste memory allocation) and you require quick insertion time ( O(1) ). A list of to-do items that can be listed sequentially as they are added is a good example. </p>\n"}],"owner":{"display_name":"user517491"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":136474,"favorite_count":0,"down_vote_count":1,"up_vote_count":96,"accepted_answer_id":7976002,"answer_count":4,"score":95,"last_activity_date":1671855273,"creation_date":1320207815,"question_id":7975802,"body_markdown":"What is the reason why we cannot always use a HashMap, even though it is much more efficient than ArrayList or LinkedList in add,remove operations, also irrespective of the number of the elements.\r\n\r\nI googled it and found some reasons, but there was always a workaround for using HashMap, with advantages still alive.\r\n","title":"When to use HashMap over LinkedList or ArrayList and vice-versa","body":"<p>What is the reason why we cannot always use a HashMap, even though it is much more efficient than ArrayList or LinkedList in add,remove operations, also irrespective of the number of the elements.</p>\n\n<p>I googled it and found some reasons, but there was always a workaround for using HashMap, with advantages still alive.</p>\n"},{"tags":["java","android","sqlite","singleton","android-loadermanager"],"answers":[{"tags":[],"owner":{"account_id":355044,"reputation":37880,"user_id":693752,"accept_rate":63,"display_name":"Snicolas"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1332448161,"creation_date":1312240651,"answer_id":6905579,"question_id":6905524,"body_markdown":"I never read about using a singleton to access a db on android. Would you mind to provide a link about that.\r\n\r\nIn my apps, I use simple dbhelper objects, not singletons, I was thinking this is more the job of the sql engine to ensure db is not locked, not the job of your android classes, and it works pretty well for my biggest app that is medium sized.\r\n\r\nUpdate #1: looking at the reference you gave, it looks like the problem is not at all about using different instances of a `dbhelper`. Even a single instance could encounter problems accessing the databases : the problem comes from a concurrent accesses. So the only way to ensure a proper access to the database by different threads is to use simple thread synchronization mechanisms (`synchronized` methods or blocks), and it almost nothing to do with using a singleton.\r\n\r\nUpdate #2 : the second link you provide clearly shows that their is a need for singleton dbhelper objects in the case of multiple threads writing concurrently in a db. This can happen if you do you sql operations (inserts/updates/deletes) from AsyncTasks for instance. In that case a singleton object dbhelper would simply put all sql operations in some sort of pipeline and execute them in order.\r\n\r\nThis solution could be easier to implement than using proper thread synchronization using synchronized methods in java. Actually I think there should be more emphasize somewhere in android docs about this problem and the use of a singleton db helper could be encouraged.\r\n\r\nThanks for this nice question and the follow ups.","title":"Using Singleton design pattern for SQLiteDatabase","body":"<p>I never read about using a singleton to access a db on android. Would you mind to provide a link about that.</p>\n\n<p>In my apps, I use simple dbhelper objects, not singletons, I was thinking this is more the job of the sql engine to ensure db is not locked, not the job of your android classes, and it works pretty well for my biggest app that is medium sized.</p>\n\n<p>Update #1: looking at the reference you gave, it looks like the problem is not at all about using different instances of a <code>dbhelper</code>. Even a single instance could encounter problems accessing the databases : the problem comes from a concurrent accesses. So the only way to ensure a proper access to the database by different threads is to use simple thread synchronization mechanisms (<code>synchronized</code> methods or blocks), and it almost nothing to do with using a singleton.</p>\n\n<p>Update #2 : the second link you provide clearly shows that their is a need for singleton dbhelper objects in the case of multiple threads writing concurrently in a db. This can happen if you do you sql operations (inserts/updates/deletes) from AsyncTasks for instance. In that case a singleton object dbhelper would simply put all sql operations in some sort of pipeline and execute them in order.</p>\n\n<p>This solution could be easier to implement than using proper thread synchronization using synchronized methods in java. Actually I think there should be more emphasize somewhere in android docs about this problem and the use of a singleton db helper could be encouraged.</p>\n\n<p>Thanks for this nice question and the follow ups.</p>\n"},{"tags":[],"owner":{"account_id":449854,"reputation":83113,"user_id":844882,"accept_rate":100,"display_name":"Alex Lockwood"},"down_vote_count":1,"up_vote_count":103,"is_accepted":true,"score":102,"last_activity_date":1671855228,"creation_date":1329263722,"answer_id":9286006,"question_id":6905524,"body_markdown":"&lt;h1&gt;&lt;a href=&quot;http://www.androiddesignpatterns.com/2012/05/correctly-managing-your-sqlite-database.html&quot;&gt;Click here to see my blog post on this subject.&lt;/a&gt;&lt;/h1&gt;\r\n\r\n---\r\n\r\nHere is some sample code that illustrates three possible approaches. These will allow access to the database throughout the application. \r\n\r\n&lt;h3&gt;Approach #1: have `SQLiteOpenHelper` be a static data member&lt;/h3&gt;\r\n\r\nThis isn&#39;t the complete implementation, but it should give you a good idea on how to go about designing the `DatabaseHelper` class correctly. The static factory method ensures that there exists only one DatabaseHelper instance at any time.\r\n\r\n    /**\r\n     * create custom DatabaseHelper class that extends SQLiteOpenHelper\r\n     */\r\n    public class DatabaseHelper extends SQLiteOpenHelper { \r\n        private static DatabaseHelper mInstance = null;\r\n\r\n        private static final String DATABASE_NAME = &quot;databaseName&quot;;\r\n        private static final String DATABASE_TABLE = &quot;tableName&quot;;\r\n        private static final int DATABASE_VERSION = 1;\r\n\r\n        private Context mCxt;\r\n \r\n        public static DatabaseHelper getInstance(Context ctx) {\r\n            /** \r\n             * use the application context as suggested by CommonsWare.\r\n             * this will ensure that you dont accidentally leak an Activitys\r\n             * context (see this article for more information: \r\n             * http://android-developers.blogspot.nl/2009/01/avoiding-memory-leaks.html)\r\n             */\r\n            if (mInstance == null) {\r\n                mInstance = new DatabaseHelper(ctx.getApplicationContext());\r\n            }\r\n            return mInstance;\r\n        }\r\n        \r\n        /**\r\n         * constructor should be private to prevent direct instantiation.\r\n         * make call to static factory method &quot;getInstance()&quot; instead.\r\n         */\r\n        private DatabaseHelper(Context ctx) {\r\n            super(context, DATABASE_NAME, null, DATABASE_VERSION);\r\n            this.mCtx = ctx;\r\n        }\r\n    }\r\n\r\n&lt;h3&gt;Approach #2: abstract the SQLite database with a `ContentProvider`&lt;/h3&gt;\r\n\r\nThis is the approach I would suggest. For one, the new `CursorLoader` class requires `ContentProvider`s, so if you want an Activity or Fragment to implement `LoaderManager.LoaderCallbacks&lt;Cursor&gt;` with a `CursorLoader` (which I suggest you take advantage of, it is magical!), you&#39;ll need to implement a `ContentProvider` for your application. Further, you don&#39;t need to worry about making a Singleton database helper with ContentProviders. Simply call `getContentResolver()` from the Activity and the system will take care of everything for you (in other words, there is no need for designing a Singleton pattern to prevent multiple instances from being created).","title":"Using Singleton design pattern for SQLiteDatabase","body":"<h1><a href=\"http://www.androiddesignpatterns.com/2012/05/correctly-managing-your-sqlite-database.html\" rel=\"nofollow noreferrer\">Click here to see my blog post on this subject.</a></h1>\n<hr />\n<p>Here is some sample code that illustrates three possible approaches. These will allow access to the database throughout the application.</p>\n<h3>Approach #1: have `SQLiteOpenHelper` be a static data member</h3>\n<p>This isn't the complete implementation, but it should give you a good idea on how to go about designing the <code>DatabaseHelper</code> class correctly. The static factory method ensures that there exists only one DatabaseHelper instance at any time.</p>\n<pre><code>/**\n * create custom DatabaseHelper class that extends SQLiteOpenHelper\n */\npublic class DatabaseHelper extends SQLiteOpenHelper { \n    private static DatabaseHelper mInstance = null;\n\n    private static final String DATABASE_NAME = &quot;databaseName&quot;;\n    private static final String DATABASE_TABLE = &quot;tableName&quot;;\n    private static final int DATABASE_VERSION = 1;\n\n    private Context mCxt;\n\n    public static DatabaseHelper getInstance(Context ctx) {\n        /** \n         * use the application context as suggested by CommonsWare.\n         * this will ensure that you dont accidentally leak an Activitys\n         * context (see this article for more information: \n         * http://android-developers.blogspot.nl/2009/01/avoiding-memory-leaks.html)\n         */\n        if (mInstance == null) {\n            mInstance = new DatabaseHelper(ctx.getApplicationContext());\n        }\n        return mInstance;\n    }\n    \n    /**\n     * constructor should be private to prevent direct instantiation.\n     * make call to static factory method &quot;getInstance()&quot; instead.\n     */\n    private DatabaseHelper(Context ctx) {\n        super(context, DATABASE_NAME, null, DATABASE_VERSION);\n        this.mCtx = ctx;\n    }\n}\n</code></pre>\n<h3>Approach #2: abstract the SQLite database with a `ContentProvider`</h3>\n<p>This is the approach I would suggest. For one, the new <code>CursorLoader</code> class requires <code>ContentProvider</code>s, so if you want an Activity or Fragment to implement <code>LoaderManager.LoaderCallbacks&lt;Cursor&gt;</code> with a <code>CursorLoader</code> (which I suggest you take advantage of, it is magical!), you'll need to implement a <code>ContentProvider</code> for your application. Further, you don't need to worry about making a Singleton database helper with ContentProviders. Simply call <code>getContentResolver()</code> from the Activity and the system will take care of everything for you (in other words, there is no need for designing a Singleton pattern to prevent multiple instances from being created).</p>\n"}],"owner":{"account_id":118707,"reputation":1526,"user_id":309926,"accept_rate":64,"display_name":"Dan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51828,"favorite_count":0,"down_vote_count":0,"up_vote_count":82,"accepted_answer_id":9286006,"answer_count":2,"score":82,"last_activity_date":1671855228,"creation_date":1312240172,"question_id":6905524,"body_markdown":"I&#39;m rather newbie on Android, and I&#39;m working on a simple application to get some basic experience. My app is pretty simple and consists among other things of a broadcast receiver and some activities. Both components make use of a single database, so in theory it could happen that both try to access the db concurrently.\r\n\r\nCurrently I&#39;m simply instantiating the db object (which is-a SQLite db helper class) each time I need it, and performing the needed operations: query, insert, etc.\r\n\r\nFrom what I&#39;ve been reading here and in some other documents, this has the problem of getting a &quot;db locked&quot; exception in case the db is accessed concurrently, so a better approach would be having a single instance of this db object so all components use the same db connection at all times.\r\n\r\nIs the above reasoning correct? Would a singleton then be a good-enough solution for this? I know some purists may argue against it, but please note that this is a rather simple application so I can afford doing things I wouldn&#39;t in other cases.\r\n\r\nOtherwise, what would a better option be? I&#39;ve read about using content provider but it would be too much for this, besides that I&#39;m not interested to share the data with other activities. I have indeed read this [**post**](http://www.androiddesignpatterns.com/2012/05/correctly-managing-your-sqlite-database.html) and found it rather helpful.","title":"Using Singleton design pattern for SQLiteDatabase","body":"<p>I'm rather newbie on Android, and I'm working on a simple application to get some basic experience. My app is pretty simple and consists among other things of a broadcast receiver and some activities. Both components make use of a single database, so in theory it could happen that both try to access the db concurrently.</p>\n\n<p>Currently I'm simply instantiating the db object (which is-a SQLite db helper class) each time I need it, and performing the needed operations: query, insert, etc.</p>\n\n<p>From what I've been reading here and in some other documents, this has the problem of getting a \"db locked\" exception in case the db is accessed concurrently, so a better approach would be having a single instance of this db object so all components use the same db connection at all times.</p>\n\n<p>Is the above reasoning correct? Would a singleton then be a good-enough solution for this? I know some purists may argue against it, but please note that this is a rather simple application so I can afford doing things I wouldn't in other cases.</p>\n\n<p>Otherwise, what would a better option be? I've read about using content provider but it would be too much for this, besides that I'm not interested to share the data with other activities. I have indeed read this <a href=\"http://www.androiddesignpatterns.com/2012/05/correctly-managing-your-sqlite-database.html\" rel=\"noreferrer\"><strong>post</strong></a> and found it rather helpful.</p>\n"},{"tags":["java","comments","intellij-idea"],"comments":[{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":2,"creation_date":1270904859,"post_id":2613432,"comment_id":2624383,"body_markdown":"Why not just run the Ant task in IntelliJ and call it a day?","body":"Why not just run the Ant task in IntelliJ and call it a day?"},{"owner":{"account_id":19971,"reputation":55479,"user_id":47281,"accept_rate":83,"display_name":"Marcus Leon"},"score":0,"creation_date":1270908160,"post_id":2613432,"comment_id":2624619,"body_markdown":"Duffymo that makes too much sense ;-)","body":"Duffymo that makes too much sense ;-)"},{"owner":{"account_id":19971,"reputation":55479,"user_id":47281,"accept_rate":83,"display_name":"Marcus Leon"},"score":0,"creation_date":1271002061,"post_id":2613432,"comment_id":2629500,"body_markdown":"Well it does make sense, I&#39;d love to find a little IntelliJ plugin that I can use easily on any old file I open that I want to clear out the comments on.","body":"Well it does make sense, I&#39;d love to find a little IntelliJ plugin that I can use easily on any old file I open that I want to clear out the comments on."},{"owner":{"account_id":2806090,"reputation":80148,"user_id":2413303,"accept_rate":100,"display_name":"EpicPandaForce"},"score":0,"creation_date":1469633164,"post_id":2613432,"comment_id":64620360,"body_markdown":"This regex removes the stars: `^[ ]*/?\\*+/? ?`","body":"This regex removes the stars: <code>^[ ]*&#47;?\\*+&#47;? ?</code>"}],"answers":[{"tags":[],"owner":{"account_id":118571,"reputation":47112,"user_id":309683,"accept_rate":68,"display_name":"Behrang Saeedzadeh"},"down_vote_count":0,"up_vote_count":108,"is_accepted":true,"score":108,"last_activity_date":1671854633,"creation_date":1270914820,"answer_id":2613945,"question_id":2613432,"body_markdown":"You can use the &quot;Replace&quot; (or &quot;Replace in Path&quot; if you want to remove comments in multiple files) in the regular expression mode and then use this regular expression in the &quot;Text to find&quot; field:\r\n\r\n    (/\\*([^*]|[\\r\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/|[ \\t]*//.*)\r\n\r\nand replace it with an empty string. Then press &quot;All&quot; to apply this replacement to the entire file or all the selected files. This will remove all block comments and line comments from your file. If you want only block comments to be removed, use this regex instead:\r\n\r\n    (/\\*([^*]|[\\r\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)\r\n\r\nAnd if you want to just remove line comments, you can use this regex:\r\n\r\n    ([ \\t]*//.*)\r\n\r\nHowever, I should warn that this works only %99.99 of times. You might have a string variable defined in your file like:\r\n\r\n    String myStr = &quot;/** I am not a comment */&quot;;\r\n\r\nThis regex will turn this to:\r\n\r\n    String myStr = &quot;&quot;;","title":"Remove source file comments using IntelliJ?","body":"<p>You can use the &quot;Replace&quot; (or &quot;Replace in Path&quot; if you want to remove comments in multiple files) in the regular expression mode and then use this regular expression in the &quot;Text to find&quot; field:</p>\n<pre><code>(/\\*([^*]|[\\r\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/|[ \\t]*//.*)\n</code></pre>\n<p>and replace it with an empty string. Then press &quot;All&quot; to apply this replacement to the entire file or all the selected files. This will remove all block comments and line comments from your file. If you want only block comments to be removed, use this regex instead:</p>\n<pre><code>(/\\*([^*]|[\\r\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)\n</code></pre>\n<p>And if you want to just remove line comments, you can use this regex:</p>\n<pre><code>([ \\t]*//.*)\n</code></pre>\n<p>However, I should warn that this works only %99.99 of times. You might have a string variable defined in your file like:</p>\n<pre><code>String myStr = &quot;/** I am not a comment */&quot;;\n</code></pre>\n<p>This regex will turn this to:</p>\n<pre><code>String myStr = &quot;&quot;;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2015227,"reputation":833,"user_id":1802697,"display_name":"Igor Maznitsa"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1356706294,"creation_date":1356706294,"answer_id":14071306,"question_id":2613432,"body_markdown":"The Comment Java Preprocessor allows to cut all commentaries from Java sources (the /R option)\r\nhttp://code.google.com/p/java-comment-preprocessor/","title":"Remove source file comments using IntelliJ?","body":"<p>The Comment Java Preprocessor allows to cut all commentaries from Java sources (the /R option)\n<a href=\"http://code.google.com/p/java-comment-preprocessor/\" rel=\"nofollow\">http://code.google.com/p/java-comment-preprocessor/</a></p>\n"},{"tags":[],"owner":{"account_id":4920276,"reputation":11,"user_id":3963014,"display_name":"digua"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1408605064,"creation_date":1408604026,"answer_id":25419985,"question_id":2613432,"body_markdown":"My solution is:\r\n\r\n    find . -name *.java -type f -exec sh -c &quot;perl -0pe &#39;s#/\\*(.|\\n)*?\\*/##g; s|//.*?\\n|\\n|g&#39; &#39;{}&#39; &gt; temp.java; cat temp.java &gt; {} ; rm temp.java;&quot; \\;","title":"Remove source file comments using IntelliJ?","body":"<p>My solution is:</p>\n\n<pre><code>find . -name *.java -type f -exec sh -c \"perl -0pe 's#/\\*(.|\\n)*?\\*/##g; s|//.*?\\n|\\n|g' '{}' &gt; temp.java; cat temp.java &gt; {} ; rm temp.java;\" \\;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":350533,"reputation":10937,"user_id":686478,"accept_rate":59,"display_name":"Prashant Bhate"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1495210818,"creation_date":1495210818,"answer_id":44074706,"question_id":2613432,"body_markdown":"Late to the party but there is [&quot;Structural Search and Replace Dialogs&quot;][1] option that can be used to search different kind of comments and replace them\r\n\r\nGo to Edit =&gt; Find =&gt; Replace Structurally...\r\n\r\n\r\n* Enter one of below in **&quot;Search Template:&quot;** \r\n\r\n**Single line** \r\n\r\n    // $CommentContent$ \r\n\r\n**Multi line**\r\n\r\n    /*\r\n      $CommentContent$ \r\n    */\r\n\r\nJavadoc\r\n\r\n    /**\r\n      $CommentContent$ \r\n    */\r\n\r\n\r\n*  Leave the **&quot;Replacement Template:&quot;** blank\r\n\r\n* Select appropriate **Scope**\r\n\r\n* Click &#39;Find&#39; and then &#39;Replace all&#39;\r\n\r\n* you Should see no more comments\r\n\r\n***Note:** that this might mess up formatting so you will have to reformat affected code*\r\n\r\n  [1]: https://www.jetbrains.com/help/idea/2017.1/structural-search-and-replace-dialogs.html\r\n","title":"Remove source file comments using IntelliJ?","body":"<p>Late to the party but there is <a href=\"https://www.jetbrains.com/help/idea/2017.1/structural-search-and-replace-dialogs.html\" rel=\"noreferrer\">\"Structural Search and Replace Dialogs\"</a> option that can be used to search different kind of comments and replace them</p>\n\n<p>Go to Edit => Find => Replace Structurally...</p>\n\n<ul>\n<li>Enter one of below in <strong>\"Search Template:\"</strong> </li>\n</ul>\n\n<p><strong>Single line</strong> </p>\n\n<pre><code>// $CommentContent$ \n</code></pre>\n\n<p><strong>Multi line</strong></p>\n\n<pre><code>/*\n  $CommentContent$ \n*/\n</code></pre>\n\n<p>Javadoc</p>\n\n<pre><code>/**\n  $CommentContent$ \n*/\n</code></pre>\n\n<ul>\n<li><p>Leave the <strong>\"Replacement Template:\"</strong> blank</p></li>\n<li><p>Select appropriate <strong>Scope</strong></p></li>\n<li><p>Click 'Find' and then 'Replace all'</p></li>\n<li><p>you Should see no more comments</p></li>\n</ul>\n\n<p><strong><em>Note:</strong> that this might mess up formatting so you will have to reformat affected code</em></p>\n"},{"tags":[],"owner":{"account_id":4522209,"reputation":21301,"user_id":3675035,"display_name":"Blasanka"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1547976071,"creation_date":1547976071,"answer_id":54275061,"question_id":2613432,"body_markdown":"Press `ctrl + r` and in first textbox type `//.*\\n` and then press **replace all** button. Then reformat the file by `ctrl + alt + l`.","title":"Remove source file comments using IntelliJ?","body":"<p>Press <code>ctrl + r</code> and in first textbox type <code>//.*\\n</code> and then press <strong>replace all</strong> button. Then reformat the file by <code>ctrl + alt + l</code>.</p>\n"},{"tags":[],"owner":{"account_id":15578997,"reputation":141,"user_id":11239376,"display_name":"Kaushik Borah"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1600777356,"creation_date":1600777356,"answer_id":64009632,"question_id":2613432,"body_markdown":"Press control + r to open replace and replace all box\r\n\r\ntype //.* in first box, keep in second box empty and then select Regex. Select replace or replace all\r\n\r\nThat&#39;s it.\r\n\r\nEnjoy &#128526;","title":"Remove source file comments using IntelliJ?","body":"<p>Press control + r to open replace and replace all box</p>\n<p>type //.* in first box, keep in second box empty and then select Regex. Select replace or replace all</p>\n<p>That's it.</p>\n<p>Enjoy 😎</p>\n"}],"owner":{"account_id":19971,"reputation":55479,"user_id":47281,"accept_rate":83,"display_name":"Marcus Leon"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39537,"favorite_count":0,"down_vote_count":0,"up_vote_count":48,"accepted_answer_id":2613945,"answer_count":6,"score":48,"last_activity_date":1671854633,"creation_date":1270904359,"question_id":2613432,"body_markdown":"Is there a plugin or tool in IntelliJ that will strip all comments out of your source .java files?  I&#39;ve read about an [ANT task][1] that can do this..  was looking to do the same from within the IDE.  Alternatively a TextPad plugin would work as well..\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/834584/script-to-remove-comments-in-java/834619#834619","title":"Remove source file comments using IntelliJ?","body":"<p>Is there a plugin or tool in IntelliJ that will strip all comments out of your source .java files?  I've read about an <a href=\"https://stackoverflow.com/questions/834584/script-to-remove-comments-in-java/834619#834619\">ANT task</a> that can do this..  was looking to do the same from within the IDE.  Alternatively a TextPad plugin would work as well..</p>\n"},{"tags":["java","spring-boot","spring-security","spring-security-rest"],"answers":[{"tags":[],"owner":{"account_id":10491189,"reputation":153,"user_id":7733017,"display_name":"Aleix Marin&#233;"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1651836623,"creation_date":1651836623,"answer_id":72140784,"question_id":68835200,"body_markdown":"I am not an expert but I&#39;d like to say something, maybe it can help:\r\n\r\nSpring uses &quot;in the background&quot; a way to retrieve user data for authentication when you activate Spring Security. Of course, this method can be overriden so the developer can change how Spring obtains this data in order to support situations where the data is sparced in different tables, from a file, an API REST query, etc.\r\n\r\nThe authentication data is structured as a list, where each element corresponds to the data used to authenticate each user. This data is structured as a tuple of 3 elements: `String username`, `String hashedPassword` and `boolean isAccountActive`.\r\n\r\n**You need to provide a way to obtain this data for each user**. You do not need to **provide** the data explicitly, just the way (method) to obtain it. One way to do it (as you said) is creating a class that implements UserDetailsService, which, for example, forces you to implement `UserDetails loadUserByUsername(String email);`. In this method you need to provide an instance of a class that implements `UserDetails`, which corresponds to the `UserDetails` of the User with the username passed as a parameter. This methods (and similar) are used by Spring Security &quot;in the background&quot; to retrieve the UserDetails of a certain user when is trying to access your web server. \r\n\r\nIf the Userdetails match with the credentials provided in the request, Spring will allow the request to hit your controllers; else it will throw a HTTP 401. Of course there are other authentication methods, but for the sake of simplicity we understand credentials as user / password with HTTP basic authentication.\r\n\r\nSo, why do we need a class that implements `UserDetails`? Because is the contract that a class needs to fulfill if it has to be used for internal authentication in Spring Security. Also to separate from a `User` class the logic of the business with the logic of the security. Probably creating your own class that extends UserDetails is the best idea, but is not actually necessary. For example if you have your own class to contain the data of a user, you just need to understand how to transform your `User` instance to `UserDetails`, so Spring Security can use it transparently and the opposite: how the `UserDetails` instance can be transformed into one of your users.\r\n\r\nFor example this is a method to obtain the `User` instance using the `UserDetails` instance that is currently authenticated in Spring Boot.\r\n```java\r\n@Service\r\npublic class SecurityServiceClass{\r\n\r\n    @Override\r\n    public User getLoggedUser() {\r\n        String username = ((UserDetails) SecurityContextHolder.getContext().getAuthentication().getPrincipal()).getUsername();\r\n        Optional&lt;User&gt; user = this.userService.get().stream().filter(r -&gt; r.getEmail().equals(username)).findFirst();\r\n\r\n        UserDetails userDetails = ((UserDetails) SecurityContextHolder.getContext().getAuthentication().getPrincipal());\r\n\r\n        // TODO: make error in case of null\r\n        return user.orElse(new User());\r\n    }\r\n}\r\n```\r\nHere I retrieve the `User` by retrieving the username from the `UserDetails` and querying it to the DB to recover the `User`. I am accessing the DB using a repository class.\r\n\r\nHere I do the opposite, transforming a `User` to a `UserDetails` by creating a `Userdetails` instance based on the relevant data of the `User`. (Note that I use the email as username)\r\n\r\n```java\r\n@Service\r\npublic class UserServiceClass extends GenericServiceClass&lt;User, UUID&gt; {\r\n\r\n    @Autowired\r\n    public UserServiceClass(UserRepository userRepository) {\r\n        super(userRepository);\r\n    }\r\n\r\n\r\n    @Override\r\n    public UserDetails loadUserByUsername(String s) throws UsernameNotFoundException {\r\n        Optional&lt;User&gt; selected = ((UserRepository) this.genericRepository).getUserByEmail(s);\r\n\r\n        if (selected.isPresent())\r\n        {\r\n            // Obtain user by email (username)\r\n            User user = selected.get();\r\n\r\n            // Obtain the roles of this user to construct the instance of UserDetails for SpringBoot Security.\r\n            Set&lt;Role&gt; roles = user.getRoles();\r\n\r\n            return org.springframework.security.core.userdetails.User\r\n                    .withUsername(s)\r\n                    .roles(roles.stream().toArray(\r\n                        (n) -&gt; {\r\n                            return new String[n];\r\n                        }\r\n                    ))\r\n                    .password(user.getHashedPassword())\r\n                    .build();\r\n        }\r\n        else\r\n        {\r\n            throw new UsernameNotFoundException(&quot;The user with email &quot; + s + &quot; is not registered in the database&quot;);\r\n        }\r\n    }\r\n```\r\n\r\nFinally, regarding AuthenticationManagerBuilder: This is a method that is used to configure authentication. As far as I know, you can define how your application should obtain the UserDetails. I am not sure if you can provide a method or a lambda to retrieve the triplet for authentication `String username`, `String hashedPassword` and `boolean isAccountActive`. What I do know and did in my application is provide **the SQL query used to retrieve the triplet from my DB since I have there all that information**. Code:\r\n\r\n```java\r\n@EnableWebSecurity\r\n@Configuration\r\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n    @Autowired\r\n    private DataSource dataSource;\r\n\r\n\r\n    @Autowired\r\n    public void configureGlobal(AuthenticationManagerBuilder authenticationBuilder) throws Exception\r\n    {\r\n        Session session = this.sessionFactory.getCurrentSession();\r\n        session.beginTransaction();\r\n\r\n        authenticationBuilder.userDetailsService(this.userDetailsService()).passwordEncoder(this.passwordEncoder()).and()\r\n                .jdbcAuthentication().dataSource(this.dataSource)\r\n                .usersByUsernameQuery(&quot;select email, hashed_password as passw, true from user where email = ?&quot;)\r\n                .authoritiesByUsernameQuery(&quot;SELECT user.email, CONCAT(elementpermission.journal_id, &#39;_&#39;, elementpermission.authority)\\n&quot; +\r\n                        &quot;FROM user, elementpermission\\n&quot; +\r\n                        &quot;WHERE elementpermission.user = user.uuid \\n&quot; +\r\n                        &quot;AND user.email = ?&quot;);\r\n                \r\n        session.getTransaction().commit();\r\n        session.close();\r\n    }\r\n```\r\n\r\n**TL;DR**\r\nSpring Security needs instances that fulfill the contract of the interface UserDetails because is the interface that Spring Security uses to obtain the relevant data for authentication. \r\n\r\nThe authentication manager builder is used to config *how*to obtain the data used for authentication. \r\n\r\nYou can check this links if you want better information:\r\n- https://www.baeldung.com/spring-security-jdbc-authentication\r\n- https://docs.spring.io/spring-security/reference/servlet/authentication/passwords/jdbc.html\r\n- https://stackoverflow.com/questions/51642604/jdbcauthentication-instead-of-inmemoryauthentication-doesnt-give-access-s\r\n","title":"Authentication Manager Builder in Spring Security","body":"<p>I am not an expert but I'd like to say something, maybe it can help:</p>\n<p>Spring uses &quot;in the background&quot; a way to retrieve user data for authentication when you activate Spring Security. Of course, this method can be overriden so the developer can change how Spring obtains this data in order to support situations where the data is sparced in different tables, from a file, an API REST query, etc.</p>\n<p>The authentication data is structured as a list, where each element corresponds to the data used to authenticate each user. This data is structured as a tuple of 3 elements: <code>String username</code>, <code>String hashedPassword</code> and <code>boolean isAccountActive</code>.</p>\n<p><strong>You need to provide a way to obtain this data for each user</strong>. You do not need to <strong>provide</strong> the data explicitly, just the way (method) to obtain it. One way to do it (as you said) is creating a class that implements UserDetailsService, which, for example, forces you to implement <code>UserDetails loadUserByUsername(String email);</code>. In this method you need to provide an instance of a class that implements <code>UserDetails</code>, which corresponds to the <code>UserDetails</code> of the User with the username passed as a parameter. This methods (and similar) are used by Spring Security &quot;in the background&quot; to retrieve the UserDetails of a certain user when is trying to access your web server.</p>\n<p>If the Userdetails match with the credentials provided in the request, Spring will allow the request to hit your controllers; else it will throw a HTTP 401. Of course there are other authentication methods, but for the sake of simplicity we understand credentials as user / password with HTTP basic authentication.</p>\n<p>So, why do we need a class that implements <code>UserDetails</code>? Because is the contract that a class needs to fulfill if it has to be used for internal authentication in Spring Security. Also to separate from a <code>User</code> class the logic of the business with the logic of the security. Probably creating your own class that extends UserDetails is the best idea, but is not actually necessary. For example if you have your own class to contain the data of a user, you just need to understand how to transform your <code>User</code> instance to <code>UserDetails</code>, so Spring Security can use it transparently and the opposite: how the <code>UserDetails</code> instance can be transformed into one of your users.</p>\n<p>For example this is a method to obtain the <code>User</code> instance using the <code>UserDetails</code> instance that is currently authenticated in Spring Boot.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class SecurityServiceClass{\n\n    @Override\n    public User getLoggedUser() {\n        String username = ((UserDetails) SecurityContextHolder.getContext().getAuthentication().getPrincipal()).getUsername();\n        Optional&lt;User&gt; user = this.userService.get().stream().filter(r -&gt; r.getEmail().equals(username)).findFirst();\n\n        UserDetails userDetails = ((UserDetails) SecurityContextHolder.getContext().getAuthentication().getPrincipal());\n\n        // TODO: make error in case of null\n        return user.orElse(new User());\n    }\n}\n</code></pre>\n<p>Here I retrieve the <code>User</code> by retrieving the username from the <code>UserDetails</code> and querying it to the DB to recover the <code>User</code>. I am accessing the DB using a repository class.</p>\n<p>Here I do the opposite, transforming a <code>User</code> to a <code>UserDetails</code> by creating a <code>Userdetails</code> instance based on the relevant data of the <code>User</code>. (Note that I use the email as username)</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class UserServiceClass extends GenericServiceClass&lt;User, UUID&gt; {\n\n    @Autowired\n    public UserServiceClass(UserRepository userRepository) {\n        super(userRepository);\n    }\n\n\n    @Override\n    public UserDetails loadUserByUsername(String s) throws UsernameNotFoundException {\n        Optional&lt;User&gt; selected = ((UserRepository) this.genericRepository).getUserByEmail(s);\n\n        if (selected.isPresent())\n        {\n            // Obtain user by email (username)\n            User user = selected.get();\n\n            // Obtain the roles of this user to construct the instance of UserDetails for SpringBoot Security.\n            Set&lt;Role&gt; roles = user.getRoles();\n\n            return org.springframework.security.core.userdetails.User\n                    .withUsername(s)\n                    .roles(roles.stream().toArray(\n                        (n) -&gt; {\n                            return new String[n];\n                        }\n                    ))\n                    .password(user.getHashedPassword())\n                    .build();\n        }\n        else\n        {\n            throw new UsernameNotFoundException(&quot;The user with email &quot; + s + &quot; is not registered in the database&quot;);\n        }\n    }\n</code></pre>\n<p>Finally, regarding AuthenticationManagerBuilder: This is a method that is used to configure authentication. As far as I know, you can define how your application should obtain the UserDetails. I am not sure if you can provide a method or a lambda to retrieve the triplet for authentication <code>String username</code>, <code>String hashedPassword</code> and <code>boolean isAccountActive</code>. What I do know and did in my application is provide <strong>the SQL query used to retrieve the triplet from my DB since I have there all that information</strong>. Code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@EnableWebSecurity\n@Configuration\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n    @Autowired\n    private DataSource dataSource;\n\n\n    @Autowired\n    public void configureGlobal(AuthenticationManagerBuilder authenticationBuilder) throws Exception\n    {\n        Session session = this.sessionFactory.getCurrentSession();\n        session.beginTransaction();\n\n        authenticationBuilder.userDetailsService(this.userDetailsService()).passwordEncoder(this.passwordEncoder()).and()\n                .jdbcAuthentication().dataSource(this.dataSource)\n                .usersByUsernameQuery(&quot;select email, hashed_password as passw, true from user where email = ?&quot;)\n                .authoritiesByUsernameQuery(&quot;SELECT user.email, CONCAT(elementpermission.journal_id, '_', elementpermission.authority)\\n&quot; +\n                        &quot;FROM user, elementpermission\\n&quot; +\n                        &quot;WHERE elementpermission.user = user.uuid \\n&quot; +\n                        &quot;AND user.email = ?&quot;);\n                \n        session.getTransaction().commit();\n        session.close();\n    }\n</code></pre>\n<p><strong>TL;DR</strong>\nSpring Security needs instances that fulfill the contract of the interface UserDetails because is the interface that Spring Security uses to obtain the relevant data for authentication.</p>\n<p>The authentication manager builder is used to config <em>how</em>to obtain the data used for authentication.</p>\n<p>You can check this links if you want better information:</p>\n<ul>\n<li><a href=\"https://www.baeldung.com/spring-security-jdbc-authentication\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-security-jdbc-authentication</a></li>\n<li><a href=\"https://docs.spring.io/spring-security/reference/servlet/authentication/passwords/jdbc.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-security/reference/servlet/authentication/passwords/jdbc.html</a></li>\n<li><a href=\"https://stackoverflow.com/questions/51642604/jdbcauthentication-instead-of-inmemoryauthentication-doesnt-give-access-s\">jdbcAuthentication() instead of inMemoryAuthentication() doesn&#39;t give access - Spring Security and Spring Data JPA</a></li>\n</ul>\n"}],"owner":{"account_id":14546187,"reputation":970,"user_id":10506380,"display_name":"Aditya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1845,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1671853514,"creation_date":1629300271,"question_id":68835200,"body_markdown":"I was exploring spring security and tried to build a small application wherein I have a an entity name User and a userRepository having a one declared method findByUserName(String userName)\r\n\r\n    @Entity\r\n    @Table(name=&quot;user&quot;)\r\n    class User {\r\n      @id\r\n      private Long id;\r\n      \r\n      private String userName;\r\n\r\n      private String password;\r\n\r\n    }\r\n\r\nI have heard that spring security depends on principles and not users.\r\nSo we have to have a class which implements `UserDetails` (provided by spring security).\r\n\r\nWhat&#39;s the reason behind this?\r\n\r\nSecondly, once we have written all this code we need to configure it into a class which I have done as shown below:\r\n\r\n    public class AppSecurityConfid extends WebSecurityCongigurerAdapter {\r\n      // here we have to autowire the service class which we have made to call the \r\n         userRepository and find the user based on userName\r\n\r\n      @Bean\r\n      public DAOAuthenicationProvider authenicationProvider() {\r\n          // wherein we create an instance and pass the autowired instance and set the \r\n             password encoder and return the instance\r\n\r\n      }\r\n\r\n       protected void configurer(AuthenticationManagerBuilder auth) {\r\n           auth.authenticationProvider(authenticationProvider());\r\n       }\r\n\r\n    } \r\n\r\n\r\nThings up to here make sense, but why we need Authentication Build Manager in this scheme of things?","title":"Authentication Manager Builder in Spring Security","body":"<p>I was exploring spring security and tried to build a small application wherein I have a an entity name User and a userRepository having a one declared method findByUserName(String userName)</p>\n<pre><code>@Entity\n@Table(name=&quot;user&quot;)\nclass User {\n  @id\n  private Long id;\n  \n  private String userName;\n\n  private String password;\n\n}\n</code></pre>\n<p>I have heard that spring security depends on principles and not users.\nSo we have to have a class which implements <code>UserDetails</code> (provided by spring security).</p>\n<p>What's the reason behind this?</p>\n<p>Secondly, once we have written all this code we need to configure it into a class which I have done as shown below:</p>\n<pre><code>public class AppSecurityConfid extends WebSecurityCongigurerAdapter {\n  // here we have to autowire the service class which we have made to call the \n     userRepository and find the user based on userName\n\n  @Bean\n  public DAOAuthenicationProvider authenicationProvider() {\n      // wherein we create an instance and pass the autowired instance and set the \n         password encoder and return the instance\n\n  }\n\n   protected void configurer(AuthenticationManagerBuilder auth) {\n       auth.authenticationProvider(authenticationProvider());\n   }\n\n} \n</code></pre>\n<p>Things up to here make sense, but why we need Authentication Build Manager in this scheme of things?</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":55219,"reputation":58940,"user_id":165297,"accept_rate":75,"display_name":"Amarghosh"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1257500279,"creation_date":1257500279,"answer_id":1686489,"question_id":1686425,"body_markdown":"You are not initializing the local 2D array.\r\n\r\n    int[][] myInt = new int[matrix.length][];\r\n    for(int i = 0; i &lt; matrix.length; i++)\r\n    {\r\n      myInt[i] = new int[matrix[i].length];\r\n      for (int j = 0; j &lt; matrix[i].length; j++)\r\n      {\r\n        myInt[i][j] = matrix[i][j];\r\n      }\r\n    }\r\n\r\n","title":"copy a 2d array in java","body":"<p>You are not initializing the local 2D array.</p>\n\n<pre><code>int[][] myInt = new int[matrix.length][];\nfor(int i = 0; i &lt; matrix.length; i++)\n{\n  myInt[i] = new int[matrix[i].length];\n  for (int j = 0; j &lt; matrix[i].length; j++)\n  {\n    myInt[i][j] = matrix[i][j];\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":58854,"reputation":25269,"user_id":176180,"accept_rate":72,"display_name":"NawaMan"},"down_vote_count":0,"up_vote_count":103,"is_accepted":false,"score":103,"last_activity_date":1671853246,"creation_date":1257500790,"answer_id":1686523,"question_id":1686425,"body_markdown":"There are two good ways to copy array is to use clone and `System.arraycopy()`.\r\n\r\nHere is how to use clone for 2D case:\r\n\r\n    int [][] myInt = new int[matrix.length][];\r\n    for(int i = 0; i &lt; matrix.length; i++)\r\n        myInt[i] = matrix[i].clone();\r\n\r\nFor System.arraycopy(), you use:\r\n\r\n    int [][] myInt = new int[matrix.length][];\r\n    for(int i = 0; i &lt; matrix.length; i++)\r\n    {\r\n      int[] aMatrix = matrix[i];\r\n      int   aLength = aMatrix.length;\r\n      myInt[i] = new int[aLength];\r\n      System.arraycopy(aMatrix, 0, myInt[i], 0, aLength);\r\n    }\r\n\r\nI don&#39;t have a benchmark but I can bet with my &lt;i&gt;2 cents&lt;/i&gt; that they are faster and &lt;b&gt;less mistake-prone&lt;/b&gt; than doing it yourself. Especially, `System.arraycopy()` as it is implemented in native code.","title":"copy a 2d array in java","body":"<p>There are two good ways to copy array is to use clone and <code>System.arraycopy()</code>.</p>\n<p>Here is how to use clone for 2D case:</p>\n<pre><code>int [][] myInt = new int[matrix.length][];\nfor(int i = 0; i &lt; matrix.length; i++)\n    myInt[i] = matrix[i].clone();\n</code></pre>\n<p>For System.arraycopy(), you use:</p>\n<pre><code>int [][] myInt = new int[matrix.length][];\nfor(int i = 0; i &lt; matrix.length; i++)\n{\n  int[] aMatrix = matrix[i];\n  int   aLength = aMatrix.length;\n  myInt[i] = new int[aLength];\n  System.arraycopy(aMatrix, 0, myInt[i], 0, aLength);\n}\n</code></pre>\n<p>I don't have a benchmark but I can bet with my <i>2 cents</i> that they are faster and <b>less mistake-prone</b> than doing it yourself. Especially, <code>System.arraycopy()</code> as it is implemented in native code.</p>\n"},{"tags":[],"owner":{"account_id":58610,"reputation":5815,"user_id":175422,"display_name":"valli"},"down_vote_count":20,"up_vote_count":5,"is_accepted":false,"score":-15,"last_activity_date":1257501967,"creation_date":1257501967,"answer_id":1686599,"question_id":1686425,"body_markdown":"you can code like this also\r\nmyInt = matrix.clone(); ","title":"copy a 2d array in java","body":"<p>you can code like this also\nmyInt = matrix.clone(); </p>\n"},{"tags":[],"owner":{"account_id":2075991,"reputation":467,"user_id":1849323,"display_name":"NickF"},"down_vote_count":1,"up_vote_count":21,"is_accepted":false,"score":20,"last_activity_date":1418038242,"creation_date":1418038242,"answer_id":27357042,"question_id":1686425,"body_markdown":"It is possible to use streams in Java 8 to copy a 2D array.\r\n\r\n    @Test\r\n    public void testCopy2DArray() {\r\n       int[][] data = {{1, 2}, {3, 4}};\r\n       int[][] dataCopy = Arrays.stream(data)\r\n                 .map((int[] row) -&gt; row.clone())\r\n                 .toArray((int length) -&gt; new int[length][]);\r\n\r\n       assertNotSame(data, dataCopy);\r\n       assertNotSame(data[0], dataCopy[0]);\r\n       assertNotSame(data[1], dataCopy[1]);\r\n    \r\n       dataCopy[0][1] = 5;\r\n       assertEquals(2, data[0][1]);\r\n       assertEquals(5, dataCopy[0][1]);\r\n    }\r\n","title":"copy a 2d array in java","body":"<p>It is possible to use streams in Java 8 to copy a 2D array.</p>\n\n<pre><code>@Test\npublic void testCopy2DArray() {\n   int[][] data = {{1, 2}, {3, 4}};\n   int[][] dataCopy = Arrays.stream(data)\n             .map((int[] row) -&gt; row.clone())\n             .toArray((int length) -&gt; new int[length][]);\n\n   assertNotSame(data, dataCopy);\n   assertNotSame(data[0], dataCopy[0]);\n   assertNotSame(data[1], dataCopy[1]);\n\n   dataCopy[0][1] = 5;\n   assertEquals(2, data[0][1]);\n   assertEquals(5, dataCopy[0][1]);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1053202,"reputation":59956,"user_id":1056563,"accept_rate":90,"display_name":"WestCoastProjects"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1615059302,"creation_date":1615059302,"answer_id":66509874,"question_id":1686425,"body_markdown":"If the data is large you should consider using a proper linear algebra library like `colt` or `nd4j`.  `System.arraycopy` will likely only be meaningfully faster if the array were single dimensional.  Otherwise it can not copy the entire data as one unit and then reshape it as in numpy or R. ","title":"copy a 2d array in java","body":"<p>If the data is large you should consider using a proper linear algebra library like <code>colt</code> or <code>nd4j</code>.  <code>System.arraycopy</code> will likely only be meaningfully faster if the array were single dimensional.  Otherwise it can not copy the entire data as one unit and then reshape it as in numpy or R.</p>\n"}],"owner":{"account_id":569939,"reputation":661,"user_id":204641,"display_name":"roberto duran"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":133112,"favorite_count":0,"down_vote_count":0,"up_vote_count":66,"answer_count":5,"score":66,"last_activity_date":1671853246,"creation_date":1257499313,"question_id":1686425,"body_markdown":"i have a 2d array called matrix of type int that i want to copy to a local variable in a method so i can edit it \r\n\r\nwhats the best way to copy the array, i am having some troubles\r\n\r\nfor example\r\n\r\n        int [][] myInt;\r\n        for(int i = 0; i&lt; matrix.length; i++){\r\n            for (int j = 0; j &lt; matrix[i].length; j++){\r\n                myInt[i][j] = matrix[i][j];\r\n            }\r\n        }\r\n              \r\n        //do some stuff here\r\n        return true;\r\n    }","title":"copy a 2d array in java","body":"<p>i have a 2d array called matrix of type int that i want to copy to a local variable in a method so i can edit it </p>\n\n<p>whats the best way to copy the array, i am having some troubles</p>\n\n<p>for example</p>\n\n<pre><code>    int [][] myInt;\n    for(int i = 0; i&lt; matrix.length; i++){\n        for (int j = 0; j &lt; matrix[i].length; j++){\n            myInt[i][j] = matrix[i][j];\n        }\n    }\n\n    //do some stuff here\n    return true;\n}\n</code></pre>\n"},{"tags":["java","swagger-ui","springdoc","springdoc-openapi-ui"],"comments":[{"owner":{"account_id":12810928,"reputation":2458,"user_id":9269177,"display_name":"Debargha Roy"},"score":0,"creation_date":1629904259,"post_id":68714458,"comment_id":121811755,"body_markdown":"Can you share the exact config that you have for Springdoc? Including the beans you might have declared to integrate Springdoc","body":"Can you share the exact config that you have for Springdoc? Including the beans you might have declared to integrate Springdoc"}],"answers":[{"tags":[],"owner":{"account_id":1151396,"reputation":4281,"user_id":1133021,"accept_rate":70,"display_name":"brianbro"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1640550179,"creation_date":1640550179,"answer_id":70489585,"question_id":68714458,"body_markdown":"SwaggerUiHome is only invoked if you define: `springdoc.swagger-ui.use-root-path=true`\r\n\r\nTo disable it: `springdoc.swagger-ui.use-root-path=false`\r\n\r\nNote that default path of the swagger-ui is not the root path, but: `http://server:port/context-path/swagger-ui.html`\r\n\r\n","title":"How to configure springdoc ui without mapping the root path?","body":"<p>SwaggerUiHome is only invoked if you define: <code>springdoc.swagger-ui.use-root-path=true</code></p>\n<p>To disable it: <code>springdoc.swagger-ui.use-root-path=false</code></p>\n<p>Note that default path of the swagger-ui is not the root path, but: <code>http://server:port/context-path/swagger-ui.html</code></p>\n"},{"tags":[],"owner":{"account_id":6584445,"reputation":481,"user_id":5087625,"display_name":"Kevin Khew"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671851263,"creation_date":1671851263,"answer_id":74905371,"question_id":68714458,"body_markdown":"I&#39;m getting this error if using regular spring framework (not using spring-boot). After dig into the source `/springdoc-openapi-starter-webmvc-ui-2.0.2.jar/org.springdoc.webmvc.ui/SwaggerConfig.class`\r\n\r\n    @Bean\r\n    @ConditionalOnMissingBean\r\n    @ConditionalOnProperty(name = SPRINGDOC_USE_ROOT_PATH, havingValue = &quot;true&quot;)\r\n    @Lazy(false)\r\n    SwaggerUiHome swaggerUiHome() {\r\n        return new SwaggerUiHome();\r\n    }\r\n\r\nFound that `String SPRINGDOC_USE_ROOT_PATH = &quot;springdoc.swagger-ui.use-root-path&quot;`. I guess there maybe a bug that this property is not working for `springdoc.swagger-ui.use-root-path=false`\r\n\r\nHere is my working solution after reading [https://www.baeldung.com/spring-requestmapping#4-ambiguous-mapping-error][1]\r\n\r\n    @GetMapping(value = &quot;/&quot;, produces = MediaType.TEXT_HTML_VALUE)\r\n    public String index() {\r\n        return &quot;home&quot;;\r\n    }\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-requestmapping#4-ambiguous-mapping-error","title":"How to configure springdoc ui without mapping the root path?","body":"<p>I'm getting this error if using regular spring framework (not using spring-boot). After dig into the source <code>/springdoc-openapi-starter-webmvc-ui-2.0.2.jar/org.springdoc.webmvc.ui/SwaggerConfig.class</code></p>\n<pre><code>@Bean\n@ConditionalOnMissingBean\n@ConditionalOnProperty(name = SPRINGDOC_USE_ROOT_PATH, havingValue = &quot;true&quot;)\n@Lazy(false)\nSwaggerUiHome swaggerUiHome() {\n    return new SwaggerUiHome();\n}\n</code></pre>\n<p>Found that <code>String SPRINGDOC_USE_ROOT_PATH = &quot;springdoc.swagger-ui.use-root-path&quot;</code>. I guess there maybe a bug that this property is not working for <code>springdoc.swagger-ui.use-root-path=false</code></p>\n<p>Here is my working solution after reading <a href=\"https://www.baeldung.com/spring-requestmapping#4-ambiguous-mapping-error\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-requestmapping#4-ambiguous-mapping-error</a></p>\n<pre><code>@GetMapping(value = &quot;/&quot;, produces = MediaType.TEXT_HTML_VALUE)\npublic String index() {\n    return &quot;home&quot;;\n}\n</code></pre>\n"}],"owner":{"account_id":5010771,"reputation":319,"user_id":4087306,"accept_rate":29,"display_name":"binarylegit"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3262,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1671851263,"creation_date":1628521950,"question_id":68714458,"body_markdown":"I&#39;m trying to configure springdoc-openapi-ui in a spring web app (non-springboot). In my application I have a controller that is mapped to &quot;/&quot; which conflicts with the Springdoc SwaggerUiHome Controller.  I get an error similar to this:\r\n\r\n&gt; java.lang.IllegalStateException: Ambiguous mapping. Cannot map &#39;swaggerUiHome&#39; method &#39;org.springdoc.webmvc.ui.SwaggerUiHome#index() to {GET [/]}: There is already &#39;loginLogoutController&#39; bean method com.company.MyController#method() mapped.\r\n\r\nIf I disable my controller which is mapped to &#39;/&#39; then the swagger UI comes up as expected. However, I need to have my controller running in order for my web app to work.\r\nEven if I set &#39;springdoc.swagger-ui.use-root-path=false&#39; (which should be the default anyway) it is still causing an ambiguous mapping error.\r\n\r\nIs there any way around this?  Any way to disable the default mapping of the SwaggerUiHome.index() to &#39;/&#39;?","title":"How to configure springdoc ui without mapping the root path?","body":"<p>I'm trying to configure springdoc-openapi-ui in a spring web app (non-springboot). In my application I have a controller that is mapped to &quot;/&quot; which conflicts with the Springdoc SwaggerUiHome Controller.  I get an error similar to this:</p>\n<blockquote>\n<p>java.lang.IllegalStateException: Ambiguous mapping. Cannot map 'swaggerUiHome' method 'org.springdoc.webmvc.ui.SwaggerUiHome#index() to {GET [/]}: There is already 'loginLogoutController' bean method com.company.MyController#method() mapped.</p>\n</blockquote>\n<p>If I disable my controller which is mapped to '/' then the swagger UI comes up as expected. However, I need to have my controller running in order for my web app to work.\nEven if I set 'springdoc.swagger-ui.use-root-path=false' (which should be the default anyway) it is still causing an ambiguous mapping error.</p>\n<p>Is there any way around this?  Any way to disable the default mapping of the SwaggerUiHome.index() to '/'?</p>\n"},{"tags":["java","mysql","hibernate","jpa","groovy"],"answers":[{"tags":[],"owner":{"account_id":7862,"reputation":14582,"user_id":13824,"accept_rate":83,"display_name":"billjamesdev"},"down_vote_count":0,"up_vote_count":86,"is_accepted":false,"score":86,"last_activity_date":1576179487,"creation_date":1227214273,"answer_id":306825,"question_id":306806,"body_markdown":"You might try changing this line in your persistence.xml from\r\n\r\n    &lt;property name=&quot;hbm2ddl.auto&quot; value=&quot;create&quot;/&gt;\r\n\r\nto:\r\n\r\n    &lt;property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;update&quot;/&gt;\r\n\r\nThis is supposed to maintain the schema to follow any changes you make to the Model each time you run the app.\r\n\r\nGot this from [JavaRanch][1]\r\n\r\n\r\n  [1]: https://coderanch.com/forums/search/search/-1?match_type=all&amp;sort_by=time&amp;q=hibernate.hbm2ddl.auto&amp;groupByTopic=true","title":"Hibernate: Automatically creating/updating the db tables based on entity classes","body":"<p>You might try changing this line in your persistence.xml from</p>\n\n<pre><code>&lt;property name=\"hbm2ddl.auto\" value=\"create\"/&gt;\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>&lt;property name=\"hibernate.hbm2ddl.auto\" value=\"update\"/&gt;\n</code></pre>\n\n<p>This is supposed to maintain the schema to follow any changes you make to the Model each time you run the app.</p>\n\n<p>Got this from <a href=\"https://coderanch.com/forums/search/search/-1?match_type=all&amp;sort_by=time&amp;q=hibernate.hbm2ddl.auto&amp;groupByTopic=true\" rel=\"noreferrer\">JavaRanch</a></p>\n"},{"tags":[],"owner":{"account_id":2379,"reputation":49899,"user_id":3295,"accept_rate":62,"display_name":"toolkit"},"down_vote_count":0,"up_vote_count":106,"is_accepted":true,"score":106,"last_activity_date":1671850974,"creation_date":1227215805,"answer_id":306875,"question_id":306806,"body_markdown":"I don&#39;t know if leaving `hibernate` off the front makes a difference.\r\n\r\nThe [reference](http://docs.jboss.org/hibernate/core/3.3/reference/en/html/session-configuration.html#configuration-misc-properties) suggests it should be `hibernate.hbm2ddl.auto`\r\n\r\nA value of `create` will create your tables at sessionFactory creation, and leave them intact.\r\n\r\nA value of `create-drop` will create your tables, and then drop them when you close the sessionFactory.\r\n\r\nPerhaps you should set the [`javax.persistence.Table`](http://java.sun.com/javaee/5/docs/api/javax/persistence/Table.html) annotation explicitly?","title":"Hibernate: Automatically creating/updating the db tables based on entity classes","body":"<p>I don't know if leaving <code>hibernate</code> off the front makes a difference.</p>\n<p>The <a href=\"http://docs.jboss.org/hibernate/core/3.3/reference/en/html/session-configuration.html#configuration-misc-properties\" rel=\"nofollow noreferrer\">reference</a> suggests it should be <code>hibernate.hbm2ddl.auto</code></p>\n<p>A value of <code>create</code> will create your tables at sessionFactory creation, and leave them intact.</p>\n<p>A value of <code>create-drop</code> will create your tables, and then drop them when you close the sessionFactory.</p>\n<p>Perhaps you should set the <a href=\"http://java.sun.com/javaee/5/docs/api/javax/persistence/Table.html\" rel=\"nofollow noreferrer\"><code>javax.persistence.Table</code></a> annotation explicitly?</p>\n"},{"tags":[],"owner":{"account_id":423384,"reputation":453,"user_id":802740,"accept_rate":52,"display_name":"Harbir"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1369870086,"creation_date":1369870086,"answer_id":16825571,"question_id":306806,"body_markdown":"Sometimes depending on how the configuration is set, the long form and the short form of the property tag can also make the difference.\r\n\r\ne.g. if you have it like:\r\n\r\n    &lt;property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;create&quot;/&gt;\r\n\r\n\r\ntry changing it to:\r\n\r\n    &lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;create&lt;/property&gt;\r\n","title":"Hibernate: Automatically creating/updating the db tables based on entity classes","body":"<p>Sometimes depending on how the configuration is set, the long form and the short form of the property tag can also make the difference.</p>\n\n<p>e.g. if you have it like:</p>\n\n<pre><code>&lt;property name=\"hibernate.hbm2ddl.auto\" value=\"create\"/&gt;\n</code></pre>\n\n<p>try changing it to:</p>\n\n<pre><code>&lt;property name=\"hibernate.hbm2ddl.auto\"&gt;create&lt;/property&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1245560,"reputation":958,"user_id":1207102,"accept_rate":40,"display_name":"thorinkor"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1463665497,"creation_date":1463665497,"answer_id":37325142,"question_id":306806,"body_markdown":"There is one very important detail, than can possibly stop your hibernate from generating tables (assuming You already have set the `hibernate.hbm2ddl.auto`). You will also need the `@Table` annotation! \r\n\r\n    @Entity\r\n    @Table(name = &quot;test_entity&quot;)\r\n        public class TestEntity {\r\n    }\r\n\r\nIt has already helped in my case at least 3 times - still cannot remember it ;)\r\n\r\nPS. Read the hibernate docs - in most cases You will probably not want to set `hibernate.hbm2ddl.auto` to `create-drop`, because it deletes Your tables after stopping the app.","title":"Hibernate: Automatically creating/updating the db tables based on entity classes","body":"<p>There is one very important detail, than can possibly stop your hibernate from generating tables (assuming You already have set the <code>hibernate.hbm2ddl.auto</code>). You will also need the <code>@Table</code> annotation! </p>\n\n<pre><code>@Entity\n@Table(name = \"test_entity\")\n    public class TestEntity {\n}\n</code></pre>\n\n<p>It has already helped in my case at least 3 times - still cannot remember it ;)</p>\n\n<p>PS. Read the hibernate docs - in most cases You will probably not want to set <code>hibernate.hbm2ddl.auto</code> to <code>create-drop</code>, because it deletes Your tables after stopping the app.</p>\n"},{"tags":[],"owner":{"account_id":8282620,"reputation":1,"user_id":6226786,"display_name":"Yusuf Aksun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1492237035,"creation_date":1492237035,"answer_id":43422897,"question_id":306806,"body_markdown":"In applicationContext.xml file:\r\n\r\n    &lt;bean id=&quot;entityManagerFactoryBean&quot; class=&quot;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&quot;&gt;\r\n          &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;\r\n          &lt;!-- This makes /META-INF/persistence.xml is no longer necessary --&gt;\r\n          &lt;property name=&quot;packagesToScan&quot; value=&quot;com.howtodoinjava.demo.model&quot; /&gt;\r\n          &lt;!-- JpaVendorAdapter implementation for Hibernate EntityManager.\r\n          \t   Exposes Hibernate&#39;s persistence provider and EntityManager extension interface --&gt;\r\n          &lt;property name=&quot;jpaVendorAdapter&quot;&gt;\r\n             &lt;bean class=&quot;org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter&quot; /&gt;\r\n          &lt;/property&gt;\r\n          &lt;property name=&quot;jpaProperties&quot;&gt;\r\n             &lt;props&gt;\r\n                &lt;prop key=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/prop&gt;\r\n                &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL5Dialect&lt;/prop&gt;\r\n             &lt;/props&gt;\r\n          &lt;/property&gt;\r\n       &lt;/bean&gt;","title":"Hibernate: Automatically creating/updating the db tables based on entity classes","body":"<p>In applicationContext.xml file:</p>\n\n<pre><code>&lt;bean id=\"entityManagerFactoryBean\" class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt;\n      &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n      &lt;!-- This makes /META-INF/persistence.xml is no longer necessary --&gt;\n      &lt;property name=\"packagesToScan\" value=\"com.howtodoinjava.demo.model\" /&gt;\n      &lt;!-- JpaVendorAdapter implementation for Hibernate EntityManager.\n           Exposes Hibernate's persistence provider and EntityManager extension interface --&gt;\n      &lt;property name=\"jpaVendorAdapter\"&gt;\n         &lt;bean class=\"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter\" /&gt;\n      &lt;/property&gt;\n      &lt;property name=\"jpaProperties\"&gt;\n         &lt;props&gt;\n            &lt;prop key=\"hibernate.hbm2ddl.auto\"&gt;update&lt;/prop&gt;\n            &lt;prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQL5Dialect&lt;/prop&gt;\n         &lt;/props&gt;\n      &lt;/property&gt;\n   &lt;/bean&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6890236,"reputation":1523,"user_id":5294016,"display_name":"DevDio"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1512925332,"creation_date":1512925332,"answer_id":47741227,"question_id":306806,"body_markdown":"In my case table was not created for the first time without last property listed below:\r\n\r\n    &lt;properties&gt;\r\n        &lt;property name=&quot;hibernate.archive.autodetection&quot; value=&quot;class&quot;/&gt;\r\n        &lt;property name=&quot;hibernate.show_sql&quot; value=&quot;true&quot;/&gt;\r\n        &lt;property name=&quot;hibernate.format_sql&quot; value=&quot;true&quot;/&gt;\r\n        &lt;property name=&quot;hbm2ddl.auto&quot; value=&quot;create-drop&quot;/&gt;\r\n        &lt;!-- without below table was not created --&gt;\r\n        &lt;property name=&quot;javax.persistence.schema-generation.database.action&quot; value=&quot;drop-and-create&quot; /&gt;\r\n    &lt;/properties&gt;\r\n\r\nused Wildfly&#39;s in-memory H2 database","title":"Hibernate: Automatically creating/updating the db tables based on entity classes","body":"<p>In my case table was not created for the first time without last property listed below:</p>\n\n<pre><code>&lt;properties&gt;\n    &lt;property name=\"hibernate.archive.autodetection\" value=\"class\"/&gt;\n    &lt;property name=\"hibernate.show_sql\" value=\"true\"/&gt;\n    &lt;property name=\"hibernate.format_sql\" value=\"true\"/&gt;\n    &lt;property name=\"hbm2ddl.auto\" value=\"create-drop\"/&gt;\n    &lt;!-- without below table was not created --&gt;\n    &lt;property name=\"javax.persistence.schema-generation.database.action\" value=\"drop-and-create\" /&gt;\n&lt;/properties&gt;\n</code></pre>\n\n<p>used Wildfly's in-memory H2 database</p>\n"},{"tags":[],"owner":{"account_id":15332332,"reputation":154,"user_id":11061705,"display_name":"AbsoluteDev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1568804226,"creation_date":1568804226,"answer_id":57991150,"question_id":306806,"body_markdown":"In support to @thorinkor&#39;s answer I would extend my answer to use not only @Table (name = &quot;table_name&quot;) annotation for entity, but also every child variable of entity class should be annotated with @Column(name = &quot;col_name&quot;). This results into seamless updation to the table on the go.\r\n\r\nFor those who are looking for a Java class based hibernate config, the rule applies in java based configurations also(NewHibernateUtil). Hope it helps someone else.","title":"Hibernate: Automatically creating/updating the db tables based on entity classes","body":"<p>In support to @thorinkor's answer I would extend my answer to use not only @Table (name = \"table_name\") annotation for entity, but also every child variable of entity class should be annotated with @Column(name = \"col_name\"). This results into seamless updation to the table on the go.</p>\n\n<p>For those who are looking for a Java class based hibernate config, the rule applies in java based configurations also(NewHibernateUtil). Hope it helps someone else.</p>\n"},{"tags":[],"owner":{"account_id":15960027,"reputation":31,"user_id":11517372,"display_name":"Rizwan Ali"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1631085868,"creation_date":1631085868,"answer_id":69098659,"question_id":306806,"body_markdown":" 1. TO CREATING TABLE AUTOMATIC , NO CONNECTION WITH ANNOTATIONS \r\n 2. FOR THAT WE NEED TO CHANGE &quot;hibernate.cfg.xml&quot; as like.\r\n\r\n```\r\n &lt;property name=&quot;hbm2ddl.auto&quot;&gt;update&lt;/property&gt;  \r\n``` ","title":"Hibernate: Automatically creating/updating the db tables based on entity classes","body":"<ol>\n<li>TO CREATING TABLE AUTOMATIC , NO CONNECTION WITH ANNOTATIONS</li>\n<li>FOR THAT WE NEED TO CHANGE &quot;hibernate.cfg.xml&quot; as like.</li>\n</ol>\n<pre><code> &lt;property name=&quot;hbm2ddl.auto&quot;&gt;update&lt;/property&gt;  \n</code></pre>\n"}],"owner":{"account_id":10052,"reputation":14318,"user_id":18811,"accept_rate":93,"display_name":"Jason Miesionczek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":424230,"favorite_count":0,"down_vote_count":0,"up_vote_count":107,"accepted_answer_id":306875,"answer_count":8,"score":107,"last_activity_date":1671850974,"creation_date":1227213925,"question_id":306806,"body_markdown":"I have the following entity class (in Groovy):\r\n\r\n    import javax.persistence.Entity\r\n    import javax.persistence.Id\r\n    import javax.persistence.GeneratedValue\r\n    import javax.persistence.GenerationType\r\n\r\n    @Entity\r\n    public class ServerNode {\r\n\r\n      @Id\r\n      @GeneratedValue(strategy = GenerationType.AUTO)\r\n      Long id\r\n\r\n      String firstName\r\n      String lastName\r\n\r\n    }\r\n\r\nand my persistence.xml:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;persistence xmlns=&quot;http://java.sun.com/xml/ns/persistence&quot; version=&quot;1.0&quot;&gt;\r\n        &lt;persistence-unit name=&quot;NewPersistenceUnit&quot;&gt;\r\n            &lt;provider&gt;org.hibernate.ejb.HibernatePersistence&lt;/provider&gt;\r\n            &lt;properties&gt;\r\n                &lt;property name=&quot;hibernate.connection.url&quot; value=&quot;jdbc:mysql://localhost:3306/Icarus&quot;/&gt;\r\n                &lt;property name=&quot;hibernate.connection.driver_class&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;\r\n                &lt;property name=&quot;hibernate.connection.username&quot; value=&quot;root&quot;/&gt;\r\n                &lt;property name=&quot;hibernate.connection.password&quot; value=&quot;&quot;/&gt;\r\n                &lt;property name=&quot;hibernate.archive.autodetection&quot; value=&quot;class&quot;/&gt;\r\n                &lt;property name=&quot;hibernate.show_sql&quot; value=&quot;true&quot;/&gt;\r\n                &lt;property name=&quot;hibernate.format_sql&quot; value=&quot;true&quot;/&gt;\r\n                &lt;property name=&quot;hbm2ddl.auto&quot; value=&quot;create&quot;/&gt;\r\n            &lt;/properties&gt;\r\n            &lt;class&gt;net.interaxia.icarus.data.models.ServerNode&lt;/class&gt;\r\n        &lt;/persistence-unit&gt;\r\n    &lt;/persistence&gt;\r\n\r\nand the script:\r\n\r\n    import javax.persistence.EntityManager\r\n    import javax.persistence.EntityManagerFactory\r\n    import javax.persistence.Persistence\r\n    import net.interaxia.icarus.data.models.ServerNode\r\n    \r\n    def factory = Persistence.createEntityManagerFactory(&quot;NewPersistenceUnit&quot;)\r\n    def manager = factory.createEntityManager()\r\n    \r\n    manager.getTransaction().begin()\r\n    \r\n    manager.persist new ServerNode(firstName: &quot;Test&quot;, lastName: &quot;Server&quot;)\r\n    \r\n    manager.getTransaction().commit()\r\n\r\n\r\nthe database _Icarus_ exists, but currently has no tables. I would like Hibernate to automatically create and/or update the tables based on the entity classes. How would I accomplish this?","title":"Hibernate: Automatically creating/updating the db tables based on entity classes","body":"<p>I have the following entity class (in Groovy):</p>\n\n<pre><code>import javax.persistence.Entity\nimport javax.persistence.Id\nimport javax.persistence.GeneratedValue\nimport javax.persistence.GenerationType\n\n@Entity\npublic class ServerNode {\n\n  @Id\n  @GeneratedValue(strategy = GenerationType.AUTO)\n  Long id\n\n  String firstName\n  String lastName\n\n}\n</code></pre>\n\n<p>and my persistence.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;persistence xmlns=\"http://java.sun.com/xml/ns/persistence\" version=\"1.0\"&gt;\n    &lt;persistence-unit name=\"NewPersistenceUnit\"&gt;\n        &lt;provider&gt;org.hibernate.ejb.HibernatePersistence&lt;/provider&gt;\n        &lt;properties&gt;\n            &lt;property name=\"hibernate.connection.url\" value=\"jdbc:mysql://localhost:3306/Icarus\"/&gt;\n            &lt;property name=\"hibernate.connection.driver_class\" value=\"com.mysql.jdbc.Driver\"/&gt;\n            &lt;property name=\"hibernate.connection.username\" value=\"root\"/&gt;\n            &lt;property name=\"hibernate.connection.password\" value=\"\"/&gt;\n            &lt;property name=\"hibernate.archive.autodetection\" value=\"class\"/&gt;\n            &lt;property name=\"hibernate.show_sql\" value=\"true\"/&gt;\n            &lt;property name=\"hibernate.format_sql\" value=\"true\"/&gt;\n            &lt;property name=\"hbm2ddl.auto\" value=\"create\"/&gt;\n        &lt;/properties&gt;\n        &lt;class&gt;net.interaxia.icarus.data.models.ServerNode&lt;/class&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n\n<p>and the script:</p>\n\n<pre><code>import javax.persistence.EntityManager\nimport javax.persistence.EntityManagerFactory\nimport javax.persistence.Persistence\nimport net.interaxia.icarus.data.models.ServerNode\n\ndef factory = Persistence.createEntityManagerFactory(\"NewPersistenceUnit\")\ndef manager = factory.createEntityManager()\n\nmanager.getTransaction().begin()\n\nmanager.persist new ServerNode(firstName: \"Test\", lastName: \"Server\")\n\nmanager.getTransaction().commit()\n</code></pre>\n\n<p>the database <em>Icarus</em> exists, but currently has no tables. I would like Hibernate to automatically create and/or update the tables based on the entity classes. How would I accomplish this?</p>\n"},{"tags":["java","google-chrome","selenium","selenium-webdriver","selenium-chromedriver"],"answers":[{"tags":[],"owner":{"account_id":153165,"reputation":5541,"user_id":368220,"accept_rate":57,"display_name":"Martijn"},"down_vote_count":0,"up_vote_count":114,"is_accepted":true,"score":114,"last_activity_date":1671850946,"creation_date":1518010609,"answer_id":48665237,"question_id":48609069,"body_markdown":"I was seeing the same issue. The problem only appears when using Chrome 65 (currently: dev channel). With Chrome 64 (both stable channel and beta channel) everything worked fine.\r\n\r\nIt turns out I had an old chromedriver installed. Specifically, I was using `chrome=65.0.3325.51` with `chromedriver=2.29.461585`. Running `npm install -g chromedriver` bumped chromedriver to 2.35.528157 and now the problem is solved.\r\n\r\n**TL;DR**: run `npm install -g chromedriver`","title":"org.openqa.selenium.WebDriverException: unknown error: call function result missing &#39;value&#39;","body":"<p>I was seeing the same issue. The problem only appears when using Chrome 65 (currently: dev channel). With Chrome 64 (both stable channel and beta channel) everything worked fine.</p>\n<p>It turns out I had an old chromedriver installed. Specifically, I was using <code>chrome=65.0.3325.51</code> with <code>chromedriver=2.29.461585</code>. Running <code>npm install -g chromedriver</code> bumped chromedriver to 2.35.528157 and now the problem is solved.</p>\n<p><strong>TL;DR</strong>: run <code>npm install -g chromedriver</code></p>\n"},{"tags":[],"owner":{"account_id":2987511,"reputation":3024,"user_id":5772982,"display_name":"Kumar Abhishek"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1521316141,"creation_date":1520931708,"answer_id":49252012,"question_id":48609069,"body_markdown":"I have encountered the same issue and installed the chrome drive. Issue got resolved.\r\n\r\nnpm install chromedriver --chromedriver_version=LATEST","title":"org.openqa.selenium.WebDriverException: unknown error: call function result missing &#39;value&#39;","body":"<p>I have encountered the same issue and installed the chrome drive. Issue got resolved.</p>\n\n<p>npm install chromedriver --chromedriver_version=LATEST</p>\n"},{"tags":[],"owner":{"account_id":1827765,"reputation":31,"user_id":1660026,"display_name":"user1660026"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1520941013,"creation_date":1520941013,"answer_id":49255159,"question_id":48609069,"body_markdown":"The latest chrome browser requires corresponding latest chromedriver executable for the tests to run.\r\n","title":"org.openqa.selenium.WebDriverException: unknown error: call function result missing &#39;value&#39;","body":"<p>The latest chrome browser requires corresponding latest chromedriver executable for the tests to run.</p>\n"},{"tags":[],"owner":{"account_id":11402616,"reputation":3097,"user_id":8359107,"display_name":"Matt"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1521226681,"creation_date":1521226681,"answer_id":49327799,"question_id":48609069,"body_markdown":"You may need to update you driver the link for all the chromedriver updates are http://chromedriver.storage.googleapis.com/index.html\r\nmake sure you chromedriver corresponds to your version of chrome","title":"org.openqa.selenium.WebDriverException: unknown error: call function result missing &#39;value&#39;","body":"<p>You may need to update you driver the link for all the chromedriver updates are <a href=\"http://chromedriver.storage.googleapis.com/index.html\" rel=\"nofollow noreferrer\">http://chromedriver.storage.googleapis.com/index.html</a>\nmake sure you chromedriver corresponds to your version of chrome</p>\n"},{"tags":[],"owner":{"account_id":7421871,"reputation":991,"user_id":5645869,"display_name":"Rohit Kumar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1521435195,"creation_date":1521435195,"answer_id":49356002,"question_id":48609069,"body_markdown":"Changing latest version of ChromDriver worked for me.\r\n\r\n","title":"org.openqa.selenium.WebDriverException: unknown error: call function result missing &#39;value&#39;","body":"<p>Changing latest version of ChromDriver worked for me.</p>\n"},{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":1,"up_vote_count":17,"is_accepted":false,"score":16,"last_activity_date":1522144608,"creation_date":1522144608,"answer_id":49509800,"question_id":48609069,"body_markdown":"The error says it all :\r\n\r\n\tException in thread &quot;main&quot; org.openqa.selenium.WebDriverException: unknown error: call function result missing &#39;value&#39;\r\n\r\n\t  (Session info: chrome=65.0.3325.31)\r\n\t  (Driver info: chromedriver=2.33.506120 (e3e53437346286c0bc2d2dc9aa4915ba81d9023f),platform=Windows NT 6.1.7601 SP1 x86) \r\n\t(WARNING: The server did not provide any stacktrace information)\r\n\tCommand duration or timeout: 0 milliseconds\r\n\r\n\tBuild info: version: &#39;3.8.1&#39;, revision: &#39;6e95a6684b&#39;, time: &#39;2017-12-01T19:05:32.194Z&#39;\t\r\n\r\nYour main issue is the **version compatibility** between the binaries you are using as follows :\r\n\r\n - You are using _chromedriver=2.33_ \r\n - Release Notes of [_chromedriver=2.33_](https://chromedriver.storage.googleapis.com/2.33/notes.txt) clearly mentions the following :\r\n\r\n&gt;Supports **Chrome v60-62**\r\n\r\n - You are using _chrome=65.0_\r\n - Release Notes of [_ChromeDriver v2.37_](https://chromedriver.storage.googleapis.com/2.37/notes.txt) clearly mentions the following :\r\n\r\n&gt;Supports **Chrome v64-66**\r\n\r\n\r\nSo there is a clear mismatch between the _ChromeDriver_ version (_v2.33_) and the _Chrome Browser_ version (_v65.0_)\r\n\r\nSolution\r\n--------\r\n\r\n - Upgrade _ChromeDriver_ to  current [**ChromeDriver v2.37**](https://sites.google.com/a/chromium.org/chromedriver/downloads) level.\r\n - Keep _Chrome_ version at **_Chrome v65.x_** levels. ([as per ChromeDriver v2.37 release notes](https://chromedriver.storage.googleapis.com/2.37/notes.txt))\r\n - _Clean_ your _Project Workspace_ through your _IDE_ and _Rebuild_ your project with required dependencies only.\r\n - Use [_CCleaner_](https://www.ccleaner.com/ccleaner) tool to wipe off all the OS chores before and after the execution of your _test Suite_.\r\n - If your base _Web Client_ version is too old, then uninstall it through [_Revo Uninstaller_](https://www.revouninstaller.com/revo_uninstaller_free_download.html) and install a recent GA and released version of _Web Client_.\r\n - Execute your `@Test`.","title":"org.openqa.selenium.WebDriverException: unknown error: call function result missing &#39;value&#39;","body":"<p>The error says it all :</p>\n\n<pre><code>Exception in thread \"main\" org.openqa.selenium.WebDriverException: unknown error: call function result missing 'value'\n\n  (Session info: chrome=65.0.3325.31)\n  (Driver info: chromedriver=2.33.506120 (e3e53437346286c0bc2d2dc9aa4915ba81d9023f),platform=Windows NT 6.1.7601 SP1 x86) \n(WARNING: The server did not provide any stacktrace information)\nCommand duration or timeout: 0 milliseconds\n\nBuild info: version: '3.8.1', revision: '6e95a6684b', time: '2017-12-01T19:05:32.194Z'  \n</code></pre>\n\n<p>Your main issue is the <strong>version compatibility</strong> between the binaries you are using as follows :</p>\n\n<ul>\n<li>You are using <em>chromedriver=2.33</em> </li>\n<li>Release Notes of <a href=\"https://chromedriver.storage.googleapis.com/2.33/notes.txt\" rel=\"noreferrer\"><em>chromedriver=2.33</em></a> clearly mentions the following :</li>\n</ul>\n\n<blockquote>\n  <p>Supports <strong>Chrome v60-62</strong></p>\n</blockquote>\n\n<ul>\n<li>You are using <em>chrome=65.0</em></li>\n<li>Release Notes of <a href=\"https://chromedriver.storage.googleapis.com/2.37/notes.txt\" rel=\"noreferrer\"><em>ChromeDriver v2.37</em></a> clearly mentions the following :</li>\n</ul>\n\n<blockquote>\n  <p>Supports <strong>Chrome v64-66</strong></p>\n</blockquote>\n\n<p>So there is a clear mismatch between the <em>ChromeDriver</em> version (<em>v2.33</em>) and the <em>Chrome Browser</em> version (<em>v65.0</em>)</p>\n\n<h2>Solution</h2>\n\n<ul>\n<li>Upgrade <em>ChromeDriver</em> to  current <a href=\"https://sites.google.com/a/chromium.org/chromedriver/downloads\" rel=\"noreferrer\"><strong>ChromeDriver v2.37</strong></a> level.</li>\n<li>Keep <em>Chrome</em> version at <strong><em>Chrome v65.x</em></strong> levels. (<a href=\"https://chromedriver.storage.googleapis.com/2.37/notes.txt\" rel=\"noreferrer\">as per ChromeDriver v2.37 release notes</a>)</li>\n<li><em>Clean</em> your <em>Project Workspace</em> through your <em>IDE</em> and <em>Rebuild</em> your project with required dependencies only.</li>\n<li>Use <a href=\"https://www.ccleaner.com/ccleaner\" rel=\"noreferrer\"><em>CCleaner</em></a> tool to wipe off all the OS chores before and after the execution of your <em>test Suite</em>.</li>\n<li>If your base <em>Web Client</em> version is too old, then uninstall it through <a href=\"https://www.revouninstaller.com/revo_uninstaller_free_download.html\" rel=\"noreferrer\"><em>Revo Uninstaller</em></a> and install a recent GA and released version of <em>Web Client</em>.</li>\n<li>Execute your <code>@Test</code>.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2113874,"reputation":2867,"user_id":1878571,"accept_rate":9,"display_name":"nix86"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1522245506,"creation_date":1522245506,"answer_id":49536546,"question_id":48609069,"body_markdown":"I simply installed a new version of Katalon Studio and it has worked fine.","title":"org.openqa.selenium.WebDriverException: unknown error: call function result missing &#39;value&#39;","body":"<p>I simply installed a new version of Katalon Studio and it has worked fine.</p>\n"},{"tags":[],"owner":{"account_id":3066408,"reputation":2307,"user_id":2597991,"display_name":"sree"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1573005104,"creation_date":1573005104,"answer_id":58721963,"question_id":48609069,"body_markdown":"This issue happens when chrome and chromedriver are not in sync. Either update both to the latest version or make sure they can work together. After running the following commands it worked for me\r\n\r\n    npm install -g chromedriver --chromedriver-force-download\r\n    webdriver-manager update","title":"org.openqa.selenium.WebDriverException: unknown error: call function result missing &#39;value&#39;","body":"<p>This issue happens when chrome and chromedriver are not in sync. Either update both to the latest version or make sure they can work together. After running the following commands it worked for me</p>\n\n<pre><code>npm install -g chromedriver --chromedriver-force-download\nwebdriver-manager update\n</code></pre>\n"}],"owner":{"account_id":7995311,"reputation":671,"user_id":6031829,"display_name":"maharaja"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92203,"favorite_count":0,"down_vote_count":1,"up_vote_count":67,"accepted_answer_id":48665237,"answer_count":8,"score":66,"last_activity_date":1671850946,"creation_date":1517754236,"question_id":48609069,"body_markdown":"Sendkeys not working. Please help me to resolve this..\r\n\r\n    WebElement username = driver.findElement(By.xpath(&quot;//*[@id=&#39;username&#39;]&quot;));\t\t\r\n    username.sendKeys(&quot;123456&quot;);\r\n\r\nConsole:\r\n\r\n\r\n    Exception in thread &quot;main&quot; org.openqa.selenium.WebDriverException: unknown error: call function result missing &#39;value&#39;\r\n    \r\n      (Session info: chrome=65.0.3325.31)\r\n      (Driver info: chromedriver=2.33.506120 (e3e53437346286c0bc2d2dc9aa4915ba81d9023f),platform=Windows NT 6.1.7601 SP1 x86) \r\n    (WARNING: The server did not provide any stacktrace information)\r\n    Command duration or timeout: 0 milliseconds\r\n    \r\n    Build info: version: &#39;3.8.1&#39;, revision: &#39;6e95a6684b&#39;, time: &#39;2017-12-01T19:05:32.194Z&#39;\r\n    System info: host: &#39;NEW-PC&#39;, ip: &#39;192.168.0.103&#39;, os.name: &#39;Windows 7&#39;, os.arch: &#39;x86&#39;, os.version: &#39;6.1&#39;, java.version: &#39;1.8.0_161&#39;\r\n\r\nDriver info: \r\n\r\n    org.openqa.selenium.chrome.ChromeDriver\r\n    \r\n    Capabilities {acceptSslCerts: true, applicationCacheEnabled: false, browserConnectionEnabled: false, browserName: chrome, chrome: {chromedriverVersion: 2.33.506120 (e3e53437346286..., userDataDir: C:\\Users\\NEW\\AppData\\Local\\...}, cssSelectorsEnabled: true, databaseEnabled: false, handlesAlerts: true, hasTouchScreen: false, javascriptEnabled: true, locationContextEnabled: true, mobileEmulationEnabled: false, nativeEvents: true, networkConnectionEnabled: false, pageLoadStrategy: normal, platform: XP, platformName: XP, rotatable: false, setWindowRect: true, takesHeapSnapshot: true, takesScreenshot: true, unexpectedAlertBehaviour: , unhandledPromptBehavior: , version: 65.0.3325.31, webStorageEnabled: true}\r\n\r\n","title":"org.openqa.selenium.WebDriverException: unknown error: call function result missing &#39;value&#39;","body":"<p>Sendkeys not working. Please help me to resolve this..</p>\n\n<pre><code>WebElement username = driver.findElement(By.xpath(\"//*[@id='username']\"));      \nusername.sendKeys(\"123456\");\n</code></pre>\n\n<p>Console:</p>\n\n<pre><code>Exception in thread \"main\" org.openqa.selenium.WebDriverException: unknown error: call function result missing 'value'\n\n  (Session info: chrome=65.0.3325.31)\n  (Driver info: chromedriver=2.33.506120 (e3e53437346286c0bc2d2dc9aa4915ba81d9023f),platform=Windows NT 6.1.7601 SP1 x86) \n(WARNING: The server did not provide any stacktrace information)\nCommand duration or timeout: 0 milliseconds\n\nBuild info: version: '3.8.1', revision: '6e95a6684b', time: '2017-12-01T19:05:32.194Z'\nSystem info: host: 'NEW-PC', ip: '192.168.0.103', os.name: 'Windows 7', os.arch: 'x86', os.version: '6.1', java.version: '1.8.0_161'\n</code></pre>\n\n<p>Driver info: </p>\n\n<pre><code>org.openqa.selenium.chrome.ChromeDriver\n\nCapabilities {acceptSslCerts: true, applicationCacheEnabled: false, browserConnectionEnabled: false, browserName: chrome, chrome: {chromedriverVersion: 2.33.506120 (e3e53437346286..., userDataDir: C:\\Users\\NEW\\AppData\\Local\\...}, cssSelectorsEnabled: true, databaseEnabled: false, handlesAlerts: true, hasTouchScreen: false, javascriptEnabled: true, locationContextEnabled: true, mobileEmulationEnabled: false, nativeEvents: true, networkConnectionEnabled: false, pageLoadStrategy: normal, platform: XP, platformName: XP, rotatable: false, setWindowRect: true, takesHeapSnapshot: true, takesScreenshot: true, unexpectedAlertBehaviour: , unhandledPromptBehavior: , version: 65.0.3325.31, webStorageEnabled: true}\n</code></pre>\n"},{"tags":["java","file-io","cluster-computing","qsub"],"answers":[{"tags":[],"owner":{"account_id":3884753,"reputation":10795,"user_id":3216427,"display_name":"joanis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671849744,"creation_date":1671849744,"answer_id":74905316,"question_id":74445569,"body_markdown":"When you have multiple processes writing output to the same file, you&#39;re always going to get conflicts between the outputs.\r\n\r\nTo use job arrays, or multiple parallel jobs, effectively, you should have each job write to its own output file - maybe add the job array index to the file name in each job - and then possibly concatenate the files from each array job into a joined output file when all the jobs have completed.\r\n\r\nThis is not a Java problem: as you have written it, your code is writing to the same place in the same file in different processes on multiple machines, so the bytes that remain in the actual file at the end are the last bytes the were written in any given position by any of the processes.\r\n\r\nPBS gives each of your parallel job instances a variable specifying the id within the array, you should pass that information to your java program or use it to create the name of the output/log file the program is supposed to use. Something like `java myJavaProgram --output output-file-${PBS_ARRAY_INDEX}` or `java myJavaProgram &gt; output-file-${PBS_ARRAY_INDEX}`.","title":"How to print to a common file with qsub arrays?","body":"<p>When you have multiple processes writing output to the same file, you're always going to get conflicts between the outputs.</p>\n<p>To use job arrays, or multiple parallel jobs, effectively, you should have each job write to its own output file - maybe add the job array index to the file name in each job - and then possibly concatenate the files from each array job into a joined output file when all the jobs have completed.</p>\n<p>This is not a Java problem: as you have written it, your code is writing to the same place in the same file in different processes on multiple machines, so the bytes that remain in the actual file at the end are the last bytes the were written in any given position by any of the processes.</p>\n<p>PBS gives each of your parallel job instances a variable specifying the id within the array, you should pass that information to your java program or use it to create the name of the output/log file the program is supposed to use. Something like <code>java myJavaProgram --output output-file-${PBS_ARRAY_INDEX}</code> or <code>java myJavaProgram &gt; output-file-${PBS_ARRAY_INDEX}</code>.</p>\n"}],"owner":{"account_id":4544809,"reputation":2072,"user_id":3691730,"accept_rate":84,"display_name":"k88074"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671849744,"creation_date":1668514981,"question_id":74445569,"body_markdown":"I am running a bunch of java tasks on a cluster with many nodes. I use `qsub` arrays with a script file like:\r\n\r\n    #PBS ...\r\n    #PBS -t 1-100\r\n    java myJavaProgram\r\nNow, my java program prints results to a common file. I am experiencing that the file is sometime corrupted, for example lines terminate abruptly with the start of the next line or lines printed only partially. The same problem never occurs if the tasks run sequentially, so my guess is that this has to do with different java processes trying to print at the same time from different compute nodes. However, I do not understand if the problem is on the java side or on the way I let the code run on the cluster.\r\n\r\nSo my **question** is: What is a safe way of having java programs update the same file from different nodes? \r\n\r\n**NOTE**: The java code that actually prints looks like this:\r\n\r\n    try (FileWriter fw = new FileWriter(output_file,true);PrintWriter Printer = new PrintWriter(fw,true)) {\r\n                Printer.println(String.format());\r\n    }\r\n\r\n \r\n\r\n\r\n","title":"How to print to a common file with qsub arrays?","body":"<p>I am running a bunch of java tasks on a cluster with many nodes. I use <code>qsub</code> arrays with a script file like:</p>\n<pre><code>#PBS ...\n#PBS -t 1-100\njava myJavaProgram\n</code></pre>\n<p>Now, my java program prints results to a common file. I am experiencing that the file is sometime corrupted, for example lines terminate abruptly with the start of the next line or lines printed only partially. The same problem never occurs if the tasks run sequentially, so my guess is that this has to do with different java processes trying to print at the same time from different compute nodes. However, I do not understand if the problem is on the java side or on the way I let the code run on the cluster.</p>\n<p>So my <strong>question</strong> is: What is a safe way of having java programs update the same file from different nodes?</p>\n<p><strong>NOTE</strong>: The java code that actually prints looks like this:</p>\n<pre><code>try (FileWriter fw = new FileWriter(output_file,true);PrintWriter Printer = new PrintWriter(fw,true)) {\n            Printer.println(String.format());\n}\n</code></pre>\n"},{"tags":["java","selenium-webdriver","runtime-error"],"comments":[{"owner":{"account_id":48948,"reputation":35452,"user_id":145574,"accept_rate":90,"display_name":"pstanton"},"score":0,"creation_date":1298832128,"post_id":5134953,"comment_id":5761386,"body_markdown":"try using the `ex.printStackTrace()` method.","body":"try using the <code>ex.printStackTrace()</code> method."}],"answers":[{"tags":[],"owner":{"account_id":305023,"reputation":5914,"user_id":614899,"accept_rate":98,"display_name":"donnyton"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1298830832,"creation_date":1298830832,"answer_id":5134971,"question_id":5134953,"body_markdown":"It looks like you&#39;re trying to import some google code:\r\n\r\n    import com.google.common.base.Function;\r\n\r\nAnd it&#39;s not finding it the class Function.  Check to make sure all the required libraries are in your build path, and that you typed the package correctly.","title":"NoClassDefFoundError in Java: com/google/common/base/Function","body":"<p>It looks like you're trying to import some google code:</p>\n\n<pre><code>import com.google.common.base.Function;\n</code></pre>\n\n<p>And it's not finding it the class Function.  Check to make sure all the required libraries are in your build path, and that you typed the package correctly.</p>\n"},{"tags":[],"owner":{"account_id":20937,"reputation":167577,"user_id":50476,"accept_rate":100,"display_name":"Bart Kiers"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1298832109,"creation_date":1298830836,"answer_id":5134972,"question_id":5134953,"body_markdown":"A `NoClassDefFoundError` is thrown when the JRE can&#39;t find a class. In your case, it can&#39;t find the class `com.google.common.base.Function`, which you most probably did not add to your classpath.\r\n\r\nEDIT\r\n----\r\n\r\nAfter downloading the following libraries:\r\n\r\n * Selenium: http://code.google.com/p/selenium/downloads/list\r\n * Guava: http://code.google.com/p/guava-libraries/downloads/list\r\n * Apache HttpComponents: http://hc.apache.org/downloads.cgi\r\n * JSON jar: http://www.jarfinder.com/index.php/jars/versionInfo/21653\r\n\r\nand unzipping them and putting all JAR files in a folder called `lib`, the test class:\r\n\r\n    import org.openqa.selenium.firefox.FirefoxDriver;\r\n    \r\n    public class Test {\r\n        public static void main(String[] args) {\r\n            try{\r\n                FirefoxDriver driver = new FirefoxDriver();\r\n                driver.get(&quot;http:www.yahoo.com&quot;);\r\n            } catch(Exception e){\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\nran without any problems.\r\n\r\nYou can compile and run the class as follows:\r\n\r\n&lt;pre&gt;\r\n# compile and run on Linux &amp; Mac\r\njavac -cp .:lib/* Test.java \r\njava -cp .:lib/* Test\r\n\r\n# compile and run on Windows\r\njavac -cp .;lib/* Test.java \r\njava -cp .;lib/* Test\r\n&lt;/pre&gt;","title":"NoClassDefFoundError in Java: com/google/common/base/Function","body":"<p>A <code>NoClassDefFoundError</code> is thrown when the JRE can't find a class. In your case, it can't find the class <code>com.google.common.base.Function</code>, which you most probably did not add to your classpath.</p>\n\n<h2>EDIT</h2>\n\n<p>After downloading the following libraries:</p>\n\n<ul>\n<li>Selenium: <a href=\"http://code.google.com/p/selenium/downloads/list\" rel=\"noreferrer\">http://code.google.com/p/selenium/downloads/list</a></li>\n<li>Guava: <a href=\"http://code.google.com/p/guava-libraries/downloads/list\" rel=\"noreferrer\">http://code.google.com/p/guava-libraries/downloads/list</a></li>\n<li>Apache HttpComponents: <a href=\"http://hc.apache.org/downloads.cgi\" rel=\"noreferrer\">http://hc.apache.org/downloads.cgi</a></li>\n<li>JSON jar: <a href=\"http://www.jarfinder.com/index.php/jars/versionInfo/21653\" rel=\"noreferrer\">http://www.jarfinder.com/index.php/jars/versionInfo/21653</a></li>\n</ul>\n\n<p>and unzipping them and putting all JAR files in a folder called <code>lib</code>, the test class:</p>\n\n<pre><code>import org.openqa.selenium.firefox.FirefoxDriver;\n\npublic class Test {\n    public static void main(String[] args) {\n        try{\n            FirefoxDriver driver = new FirefoxDriver();\n            driver.get(\"http:www.yahoo.com\");\n        } catch(Exception e){\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p>ran without any problems.</p>\n\n<p>You can compile and run the class as follows:</p>\n\n<pre>\n# compile and run on Linux & Mac\njavac -cp .:lib/* Test.java \njava -cp .:lib/* Test\n\n# compile and run on Windows\njavac -cp .;lib/* Test.java \njava -cp .;lib/* Test\n</pre>\n"},{"tags":[],"owner":{"account_id":48948,"reputation":35452,"user_id":145574,"accept_rate":90,"display_name":"pstanton"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1298831319,"creation_date":1298830934,"answer_id":5134982,"question_id":5134953,"body_markdown":"you don&#39;t have the [&quot;google-collections&quot;][1] library on your [classpath][2].\r\n\r\nThere are a number of [ways to add libraries to your classpath][2], so please provide more info regarding how you are executing your program.\r\n\r\nif from the command line, you can add libraries to the classpath via \r\n\r\n`java -classpath path/lib.jar ...`\r\n\r\n\r\n  [1]: http://code.google.com/p/google-collections/\r\n  [2]: http://download.oracle.com/javase/6/docs/technotes/tools/windows/classpath.html","title":"NoClassDefFoundError in Java: com/google/common/base/Function","body":"<p>you don't have the <a href=\"http://code.google.com/p/google-collections/\" rel=\"noreferrer\">\"google-collections\"</a> library on your <a href=\"http://download.oracle.com/javase/6/docs/technotes/tools/windows/classpath.html\" rel=\"noreferrer\">classpath</a>.</p>\n\n<p>There are a number of <a href=\"http://download.oracle.com/javase/6/docs/technotes/tools/windows/classpath.html\" rel=\"noreferrer\">ways to add libraries to your classpath</a>, so please provide more info regarding how you are executing your program.</p>\n\n<p>if from the command line, you can add libraries to the classpath via </p>\n\n<p><code>java -classpath path/lib.jar ...</code></p>\n"},{"tags":[],"owner":{"account_id":204308,"reputation":1221,"user_id":452439,"display_name":"Henry Ma"},"down_vote_count":0,"up_vote_count":112,"is_accepted":false,"score":112,"last_activity_date":1671849665,"creation_date":1299725295,"answer_id":5254894,"question_id":5134953,"body_markdown":"I had the same problem, and finally I found that I forgot to add the [selenium-server-standalone-version.jar][1]. I had only added the client jar, [selenium-java-version.jar][2].\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-server-standalone\r\n  [2]: https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java","title":"NoClassDefFoundError in Java: com/google/common/base/Function","body":"<p>I had the same problem, and finally I found that I forgot to add the <a href=\"https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-server-standalone\" rel=\"nofollow noreferrer\">selenium-server-standalone-version.jar</a>. I had only added the client jar, <a href=\"https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java\" rel=\"nofollow noreferrer\">selenium-java-version.jar</a>.</p>\n"},{"tags":[],"owner":{"account_id":469276,"reputation":23596,"user_id":875775,"display_name":"Tho"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1511174247,"creation_date":1396340782,"answer_id":22780489,"question_id":5134953,"body_markdown":"I encountered the same error and after the investigation, I found that library selenium-api 2.41.0 requires guava 15.0 but it was overridden by an older version so I declared guava 15.0 as a direct dependency by adding following configuration in pom.xml:\r\n\r\n    &lt;dependency&gt;\r\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n            &lt;type&gt;jar&lt;/type&gt;\r\n            &lt;version&gt;15.0&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"NoClassDefFoundError in Java: com/google/common/base/Function","body":"<p>I encountered the same error and after the investigation, I found that library selenium-api 2.41.0 requires guava 15.0 but it was overridden by an older version so I declared guava 15.0 as a direct dependency by adding following configuration in pom.xml:</p>\n\n<pre><code>&lt;dependency&gt;\n        &lt;artifactId&gt;guava&lt;/artifactId&gt;\n        &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n        &lt;type&gt;jar&lt;/type&gt;\n        &lt;version&gt;15.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4459398,"reputation":1,"user_id":3628731,"display_name":"Irina Bu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1399904008,"creation_date":1399902382,"answer_id":23610793,"question_id":5134953,"body_markdown":"When I caught the exception `java.lang.NoClassDefFoundError: com/google/common/base/Function` it was caused by errors in Project Libraries. \r\n\r\nPlease check it in your project settings. For Intellij IDEA go to **File - Project Structure** and select **Modules** tab. All I needed to do to resolve this exception was re-adding the selenium library","title":"NoClassDefFoundError in Java: com/google/common/base/Function","body":"<p>When I caught the exception <code>java.lang.NoClassDefFoundError: com/google/common/base/Function</code> it was caused by errors in Project Libraries. </p>\n\n<p>Please check it in your project settings. For Intellij IDEA go to <strong>File - Project Structure</strong> and select <strong>Modules</strong> tab. All I needed to do to resolve this exception was re-adding the selenium library</p>\n"},{"tags":[],"owner":{"account_id":4955907,"reputation":11,"user_id":3988514,"display_name":"Shi Liangjun"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1410760218,"creation_date":1410760218,"answer_id":25841547,"question_id":5134953,"body_markdown":"I met the same problem and fail even after installing the &#39;selenium-server-standalone-version.jar&#39;, I think you need to install the guava and guava-gwt jar (https://code.google.com/p/guava-libraries/) as well. I added all of these jar, and finally it worked in my PC. Hope it works for others meeting this issue.\r\n","title":"NoClassDefFoundError in Java: com/google/common/base/Function","body":"<p>I met the same problem and fail even after installing the 'selenium-server-standalone-version.jar', I think you need to install the guava and guava-gwt jar (<a href=\"https://code.google.com/p/guava-libraries/\" rel=\"nofollow\">https://code.google.com/p/guava-libraries/</a>) as well. I added all of these jar, and finally it worked in my PC. Hope it works for others meeting this issue.</p>\n"},{"tags":[],"owner":{"account_id":183457,"reputation":3816,"user_id":418832,"accept_rate":62,"display_name":"Sumod"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1435068968,"creation_date":1432271186,"answer_id":30388726,"question_id":5134953,"body_markdown":"For me, in addition to selecting the jar - selenium-java-2.45.0.jar, I had to select all the jars in the &quot;libs&quot; folder under selenium root folder.","title":"NoClassDefFoundError in Java: com/google/common/base/Function","body":"<p>For me, in addition to selecting the jar - selenium-java-2.45.0.jar, I had to select all the jars in the \"libs\" folder under selenium root folder.</p>\n"},{"tags":[],"owner":{"account_id":6561769,"reputation":11,"user_id":5072619,"display_name":"Sandeep Duve"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1435821872,"creation_date":1435821872,"answer_id":31178063,"question_id":5134953,"body_markdown":"Please include all the jar files of selenium stand-alone and lib folder, then this error will resolved","title":"NoClassDefFoundError in Java: com/google/common/base/Function","body":"<p>Please include all the jar files of selenium stand-alone and lib folder, then this error will resolved</p>\n"},{"tags":[],"owner":{"account_id":6836190,"reputation":21,"user_id":5258084,"display_name":"CTester"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1440363106,"creation_date":1440363106,"answer_id":32171412,"question_id":5134953,"body_markdown":"   After you extract your &quot;selenium-java-.zip&quot; file you need to configure your build path from your IDE. Import all the jar files under &quot;lib&quot; folder and both selenium standalone server &amp; Selenium java version jar files.","title":"NoClassDefFoundError in Java: com/google/common/base/Function","body":"<p>After you extract your \"selenium-java-.zip\" file you need to configure your build path from your IDE. Import all the jar files under \"lib\" folder and both selenium standalone server &amp; Selenium java version jar files.</p>\n"},{"tags":[],"owner":{"account_id":246417,"reputation":17570,"user_id":520567,"accept_rate":71,"display_name":"akostadinov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1454322940,"creation_date":1454322940,"answer_id":35128354,"question_id":5134953,"body_markdown":"I wanted to try a simple class outside IDE and stuff. So downloaded selenium zip from website and run the class like this:\r\n\r\n    java -cp selenium-2.50.1/*:selenium-2.50.1/libs/*:. my/package/MyClass &lt;params&gt;\r\n\r\nI had the issue that I initially used `lib` instead of `libs`. I **didn&#39;t** need to add selenium standalone jar. This is Java 8 that understands wildcards in classpath. I think java 7 would also do.","title":"NoClassDefFoundError in Java: com/google/common/base/Function","body":"<p>I wanted to try a simple class outside IDE and stuff. So downloaded selenium zip from website and run the class like this:</p>\n\n<pre><code>java -cp selenium-2.50.1/*:selenium-2.50.1/libs/*:. my/package/MyClass &lt;params&gt;\n</code></pre>\n\n<p>I had the issue that I initially used <code>lib</code> instead of <code>libs</code>. I <strong>didn't</strong> need to add selenium standalone jar. This is Java 8 that understands wildcards in classpath. I think java 7 would also do.</p>\n"},{"tags":[],"owner":{"account_id":7517801,"reputation":51,"user_id":5710682,"display_name":"Lokesh Reddy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1460124143,"creation_date":1460124143,"answer_id":36501640,"question_id":5134953,"body_markdown":"I had the same problem, and finally I found that I forgot to add the selenium-server-standalone-version.jar. I had only added the client jar, selenium-java-version.jar.","title":"NoClassDefFoundError in Java: com/google/common/base/Function","body":"<p>I had the same problem, and finally I found that I forgot to add the selenium-server-standalone-version.jar. I had only added the client jar, selenium-java-version.jar.</p>\n"},{"tags":[],"owner":{"account_id":8719684,"reputation":157,"user_id":6523227,"accept_rate":67,"display_name":"Learner"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1470917156,"creation_date":1470917156,"answer_id":38895914,"question_id":5134953,"body_markdown":"I had the same issue. I found that I forgot to add selenium-2.53.0/selenium-java-2.53.0-srcs.jar file to my project&#39;s Reference library.","title":"NoClassDefFoundError in Java: com/google/common/base/Function","body":"<p>I had the same issue. I found that I forgot to add selenium-2.53.0/selenium-java-2.53.0-srcs.jar file to my project's Reference library.</p>\n"},{"tags":[],"owner":{"account_id":11084949,"reputation":69,"user_id":8138984,"display_name":"Rahul k"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1497037181,"creation_date":1497037047,"answer_id":44465530,"question_id":5134953,"body_markdown":"I got the same error, but it was resolved if you add the libraries of selenium (again if you haven&#39;t), if you are using INTELIJ\r\n\r\n&gt; project&gt;projectStructure&gt;Module&gt;+&gt;add the selenium jars (both from lib folder and outside ones.). \r\n\r\nSame needs to be done for other IDE&#39;s as well, like eclipse.","title":"NoClassDefFoundError in Java: com/google/common/base/Function","body":"<p>I got the same error, but it was resolved if you add the libraries of selenium (again if you haven't), if you are using INTELIJ</p>\n\n<blockquote>\n  <p>project>projectStructure>Module>+>add the selenium jars (both from lib folder and outside ones.). </p>\n</blockquote>\n\n<p>Same needs to be done for other IDE's as well, like eclipse.</p>\n"},{"tags":[],"owner":{"account_id":11466376,"reputation":55,"user_id":8404470,"accept_rate":100,"display_name":"inderpreet kaur"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1509008259,"creation_date":1501834036,"answer_id":45501440,"question_id":5134953,"body_markdown":"    this is for chrome  \r\n    System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;D:\\\\Testing_offical\\\\chromedriver.exe&quot;);\r\n    driver =new ChromeDriver();\r\n    this is for fire fox \r\n    System.setProperty(&quot;webdriver.gecko.driver&quot;,&quot;&quot;D:\\\\Testing_offical\\\\geckodriver.exe&quot;&quot;);\r\n    driver =new FirefoxDriver();\r\n\r\npattern :\r\n\r\n    System.setProperty(&quot;webdriver.gecko.driver&quot;,&quot;**Path of the gecko driver** &quot;);\r\n\r\nNote download gecko from here  :- http://docs.seleniumhq.org/download/ \r\n\r\n","title":"NoClassDefFoundError in Java: com/google/common/base/Function","body":"<pre><code>this is for chrome  \nSystem.setProperty(\"webdriver.chrome.driver\",\"D:\\\\Testing_offical\\\\chromedriver.exe\");\ndriver =new ChromeDriver();\nthis is for fire fox \nSystem.setProperty(\"webdriver.gecko.driver\",\"\"D:\\\\Testing_offical\\\\geckodriver.exe\"\");\ndriver =new FirefoxDriver();\n</code></pre>\n\n<p>pattern :</p>\n\n<pre><code>System.setProperty(\"webdriver.gecko.driver\",\"**Path of the gecko driver** \");\n</code></pre>\n\n<p>Note download gecko from here  :- <a href=\"http://docs.seleniumhq.org/download/\" rel=\"nofollow noreferrer\">http://docs.seleniumhq.org/download/</a> </p>\n"}],"owner":{"account_id":714406,"reputation":601,"user_id":636698,"display_name":"vijaymsc"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":220896,"favorite_count":0,"down_vote_count":0,"up_vote_count":60,"answer_count":15,"score":60,"last_activity_date":1671849665,"creation_date":1298830685,"question_id":5134953,"body_markdown":"When I executing the following code: \r\n\r\n    public static void main(String[] args) {\r\n\t\ttry {\r\n\t\t    FirefoxDriver driver = new FirefoxDriver();\r\n\t\t    driver.get(&quot;http:www.yahoo.com&quot;);\r\n        } catch (NoClassDefFoundError ex) {\r\n            System.out.println(&quot;error: &quot; + ex.getStackTrace());\r\n\t\t}\r\n\t}\r\n\r\nI&#39;m facing the following error: \r\n\r\n&gt;error:[Ljava.lang.StackTraceElement;@80f4cb\r\n&gt;\r\n&gt;Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/google/common/base/Function\r\n\r\n&lt;br&gt;\r\nCould someone help me to find the solution or reason for this?","title":"NoClassDefFoundError in Java: com/google/common/base/Function","body":"<p>When I executing the following code: </p>\n\n<pre><code>public static void main(String[] args) {\n    try {\n        FirefoxDriver driver = new FirefoxDriver();\n        driver.get(\"http:www.yahoo.com\");\n    } catch (NoClassDefFoundError ex) {\n        System.out.println(\"error: \" + ex.getStackTrace());\n    }\n}\n</code></pre>\n\n<p>I'm facing the following error: </p>\n\n<blockquote>\n  <p>error:[Ljava.lang.StackTraceElement;@80f4cb</p>\n  \n  <p>Exception in thread \"main\" java.lang.NoClassDefFoundError: com/google/common/base/Function</p>\n</blockquote>\n\n<p><br>\nCould someone help me to find the solution or reason for this?</p>\n"},{"tags":["java","javafx","jdbc"],"answers":[{"tags":[],"owner":{"account_id":20961162,"reputation":1462,"user_id":15400571,"display_name":"noah1400"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671848905,"creation_date":1671848570,"answer_id":74905264,"question_id":74899927,"body_markdown":"You get this error because the MariaDB JDBC driver has a dependency on the Waffle JNA (Java Native Access) library.\r\n\r\nTo get rid of this error you need add the waffle.jna library to your `module-info.java` file:\r\n```java\r\nrequires waffle.jna\r\n```\r\nOr include the library to your `pom.xml` if you are using Maven\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.github.waffle&lt;/groupId&gt;\r\n    &lt;artifactId&gt;waffle-jna&lt;/artifactId&gt;\r\n    &lt;version&gt;3.2.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nIf you&#39;re using Gradle add it to your `build.gradle`\r\n```\r\ndependencies {\r\n  implementation group: &#39;com.github.waffle&#39;, name: &#39;waffle-jna&#39;, version: &#39;3.2.0&#39;\r\n}\r\n```\r\nIf you&#39;re using java eclipse u can add it to the `.classpath` file\r\n```xml\r\n&lt;classpathentry kind=&quot;lib&quot; path=&quot;/path/to/waffle-jna-3.2.0.jar&quot;/&gt;\r\n```\r\nYou can download the jar file [here][1]\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/com.github.waffle/waffle-jna/3.2.0","title":"Module waffle.jna not found, required by org.mariadb.jdbc","body":"<p>You get this error because the MariaDB JDBC driver has a dependency on the Waffle JNA (Java Native Access) library.</p>\n<p>To get rid of this error you need add the waffle.jna library to your <code>module-info.java</code> file:</p>\n<pre class=\"lang-java prettyprint-override\"><code>requires waffle.jna\n</code></pre>\n<p>Or include the library to your <code>pom.xml</code> if you are using Maven</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.github.waffle&lt;/groupId&gt;\n    &lt;artifactId&gt;waffle-jna&lt;/artifactId&gt;\n    &lt;version&gt;3.2.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>If you're using Gradle add it to your <code>build.gradle</code></p>\n<pre><code>dependencies {\n  implementation group: 'com.github.waffle', name: 'waffle-jna', version: '3.2.0'\n}\n</code></pre>\n<p>If you're using java eclipse u can add it to the <code>.classpath</code> file</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;classpathentry kind=&quot;lib&quot; path=&quot;/path/to/waffle-jna-3.2.0.jar&quot;/&gt;\n</code></pre>\n<p>You can download the jar file <a href=\"https://mvnrepository.com/artifact/com.github.waffle/waffle-jna/3.2.0\" rel=\"nofollow noreferrer\">here</a></p>\n"}],"owner":{"account_id":23452248,"reputation":11,"user_id":17508254,"display_name":"ismail"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":897,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671848905,"creation_date":1671800417,"question_id":74899927,"body_markdown":"I doing my first JDBC project with javaFX\r\n\r\n```\r\nmodule com.example.obs {\r\n    requires javafx.controls;\r\n    requires javafx.fxml;\r\n\r\n    requires org.controlsfx.controls;\r\n    requires org.kordamp.bootstrapfx.core;\r\n    requires javafx.graphics;\r\n    requires java.sql;\r\n    requires org.mariadb.jdbc;\r\n\r\n    opens com.example.obs to javafx.fxml;\r\n    exports com.example.obs;\r\n\r\n}\r\n```\r\n\r\n\r\nI&#39;m getting this excaption\r\n\r\n\r\n```\r\njava: java.lang.reflect.InvocationTargetException\r\nModule waffle.jna not found, required by org.mariadb.jdbc\r\n```\r\n\r\n","title":"Module waffle.jna not found, required by org.mariadb.jdbc","body":"<p>I doing my first JDBC project with javaFX</p>\n<pre><code>module com.example.obs {\n    requires javafx.controls;\n    requires javafx.fxml;\n\n    requires org.controlsfx.controls;\n    requires org.kordamp.bootstrapfx.core;\n    requires javafx.graphics;\n    requires java.sql;\n    requires org.mariadb.jdbc;\n\n    opens com.example.obs to javafx.fxml;\n    exports com.example.obs;\n\n}\n</code></pre>\n<p>I'm getting this excaption</p>\n<pre><code>java: java.lang.reflect.InvocationTargetException\nModule waffle.jna not found, required by org.mariadb.jdbc\n</code></pre>\n"},{"tags":["java","spring-boot","maven","apache-flink"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1671849096,"post_id":74905265,"comment_id":132188628,"body_markdown":"You could try using a [dependency exclusion](https://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html) to exclude one version of the dependency.  But if the two intermediate dependencies (`flink-kubetnets` and `flink-kubernrts-operator`) **really** need those specific versions of `kubernets-client`, you need to look for and use alternate (compatible) versions of **them**.","body":"You could try using a <a href=\"https://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html\" rel=\"nofollow noreferrer\">dependency exclusion</a> to exclude one version of the dependency.  But if the two intermediate dependencies (<code>flink-kubetnets</code> and <code>flink-kubernrts-operator</code>) <b>really</b> need those specific versions of <code>kubernets-client</code>, you need to look for and use alternate (compatible) versions of <b>them</b>."},{"owner":{"account_id":27340213,"reputation":1,"user_id":20850996,"display_name":"ikiler"},"score":0,"creation_date":1671850350,"post_id":74905265,"comment_id":132188748,"body_markdown":"thx. So there really is no way to coexist ?","body":"thx. So there really is no way to coexist ?"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1671851082,"post_id":74905265,"comment_id":132188797,"body_markdown":"Technically, they can.  But you would need to load the relevant parts of `fklink-kubetnets` and `flink-kubernrts-operator` in separate classloaders so that they can load the two versions of `kubernets-client`.  That&#39;s complicated, and it may well be impractical.  And you are adding a whole lot of *technical debt* to your project.","body":"Technically, they can.  But you would need to load the relevant parts of <code>fklink-kubetnets</code> and <code>flink-kubernrts-operator</code> in separate classloaders so that they can load the two versions of <code>kubernets-client</code>.  That&#39;s complicated, and it may well be impractical.  And you are adding a whole lot of <i>technical debt</i> to your project."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1671906636,"post_id":74905265,"comment_id":132195987,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"owner":{"account_id":27340213,"reputation":1,"user_id":20850996,"display_name":"ikiler"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671848577,"creation_date":1671848577,"question_id":74905265,"body_markdown":"My project has two dependencies\r\nflink-kubetnets and flink-kubernrts-operator, Let&#39;s call him A, B\r\nThe A shaded the kubernets-client into itself and not change package name, and B also dependend  kubernets-client with different version.\r\nSo they conflict, how to solve it?\r\n\r\n I tried packing again with shaded, but no, It seems that this situation can no longer be solved with shaded.\r\nBecause both A and B call kubernets-client, shaded cannot change their internal codes","title":"How to solve the conflict caused by shaded without changing the package name？","body":"<p>My project has two dependencies\nflink-kubetnets and flink-kubernrts-operator, Let's call him A, B\nThe A shaded the kubernets-client into itself and not change package name, and B also dependend  kubernets-client with different version.\nSo they conflict, how to solve it?</p>\n<p>I tried packing again with shaded, but no, It seems that this situation can no longer be solved with shaded.\nBecause both A and B call kubernets-client, shaded cannot change their internal codes</p>\n"},{"tags":["java","android","android-actionbar"],"answers":[{"tags":[],"owner":{"account_id":4933970,"reputation":2891,"user_id":3972773,"accept_rate":88,"display_name":"JRsz"},"down_vote_count":2,"up_vote_count":119,"is_accepted":true,"score":117,"last_activity_date":1671848551,"creation_date":1410855070,"answer_id":25863690,"question_id":25863676,"body_markdown":"Haha, I have been stuck at that point a while ago as well, so I am glad I can help you out with a solution, that worked for me at least :)\r\n\r\nWhat you want to do is define a new style within values/styles.xml so it looks like this\r\n\r\n    &lt;resources&gt;\r\n        &lt;style name = &quot;AppTheme&quot; parent = &quot;android:Theme.Holo.Light.DarkActionBar&quot;&gt;\r\n            &lt;!-- Customize your theme here. --&gt;\r\n        &lt;/style&gt;\r\n    \r\n        &lt;style name = &quot;NoActionBar&quot; parent = &quot;@android:style/Theme.Holo.Light&quot;&gt;\r\n            &lt;item name = &quot;android:windowActionBar&quot;&gt;false&lt;/item&gt;\r\n            &lt;item name = &quot;android:windowNoTitle&quot;&gt;true&lt;/item&gt;\r\n        &lt;/style&gt;\r\n    \r\n    &lt;/resources&gt;\r\n\r\n\r\nOnly the NoActionBar style is intresting for you. At last you have to set is as your application&#39;s theme in the AndroidManifest.xml so it looks like this\r\n\r\n    &lt;application\r\n        android:allowBackup = &quot;true&quot;\r\n        android:icon = &quot;@drawable/ic_launcher&quot;\r\n        android:label = &quot;@string/app_name&quot;\r\n        android:theme = &quot;@style/NoActionBar&quot;   &lt;!--This is the important line--&gt;\r\n        &gt;\r\n        &lt;activity\r\n    \t[...]","title":"Android Activity without ActionBar","body":"<p>Haha, I have been stuck at that point a while ago as well, so I am glad I can help you out with a solution, that worked for me at least :)</p>\n<p>What you want to do is define a new style within values/styles.xml so it looks like this</p>\n<pre><code>&lt;resources&gt;\n    &lt;style name = &quot;AppTheme&quot; parent = &quot;android:Theme.Holo.Light.DarkActionBar&quot;&gt;\n        &lt;!-- Customize your theme here. --&gt;\n    &lt;/style&gt;\n\n    &lt;style name = &quot;NoActionBar&quot; parent = &quot;@android:style/Theme.Holo.Light&quot;&gt;\n        &lt;item name = &quot;android:windowActionBar&quot;&gt;false&lt;/item&gt;\n        &lt;item name = &quot;android:windowNoTitle&quot;&gt;true&lt;/item&gt;\n    &lt;/style&gt;\n\n&lt;/resources&gt;\n</code></pre>\n<p>Only the NoActionBar style is intresting for you. At last you have to set is as your application's theme in the AndroidManifest.xml so it looks like this</p>\n<pre><code>&lt;application\n    android:allowBackup = &quot;true&quot;\n    android:icon = &quot;@drawable/ic_launcher&quot;\n    android:label = &quot;@string/app_name&quot;\n    android:theme = &quot;@style/NoActionBar&quot;   &lt;!--This is the important line--&gt;\n    &gt;\n    &lt;activity\n    [...]\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user4009281"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1410855573,"creation_date":1410855573,"answer_id":25863848,"question_id":25863676,"body_markdown":"I will try to show it as simple as i can:\r\n\r\nDECLARE FULL SCREEN ACTIVITY IN ANDROID MAINIFEST file:\r\n\r\n \r\n\r\n    &lt;activity\r\n                android:name=&quot;.GameActivity&quot;\r\n                android:label=&quot;@string/title_activity_game&quot;\r\n                android:theme=&quot;@android:style/Theme.NoTitleBar.Fullscreen&quot;&gt;\r\n\r\nNow in Android studio (if you using it) open your Activity xml file ( in my example activity_game.xml) in designer and select theme (above mobile phone in designer click button with small circle) and then select Mainfest Themes on the left side and then NoTitleBar.Fullscreen.\r\n\r\nHope it will help! ","title":"Android Activity without ActionBar","body":"<p>I will try to show it as simple as i can:</p>\n\n<p>DECLARE FULL SCREEN ACTIVITY IN ANDROID MAINIFEST file:</p>\n\n<pre><code>&lt;activity\n            android:name=\".GameActivity\"\n            android:label=\"@string/title_activity_game\"\n            android:theme=\"@android:style/Theme.NoTitleBar.Fullscreen\"&gt;\n</code></pre>\n\n<p>Now in Android studio (if you using it) open your Activity xml file ( in my example activity_game.xml) in designer and select theme (above mobile phone in designer click button with small circle) and then select Mainfest Themes on the left side and then NoTitleBar.Fullscreen.</p>\n\n<p>Hope it will help! </p>\n"},{"tags":[],"owner":{"account_id":3787937,"reputation":5676,"user_id":3886922,"accept_rate":69,"display_name":"Confuse"},"down_vote_count":1,"up_vote_count":90,"is_accepted":false,"score":89,"last_activity_date":1485253825,"creation_date":1410855612,"answer_id":25863861,"question_id":25863676,"body_markdown":"There are multiple ways of doing this.\n\n\n# 1) Change the theme in Android Manifest\n\nBelow the Application element, you will find theme tag. Replace it with this one -\n\n    android:theme=&quot;@android:style/Theme.NoTitleBar&quot;\n\nIf you are using AppCompat, use `@android:style/Theme.AppCompat.NoActionBar`.\n\nThis will set the theme for all activities. If you don&#39;t need the action bar in a specific acitivity, then set the theme in the activity container, ie\n\n    &lt;activity android:theme=&quot;@android:style/Theme.NoTitleBar&quot; ...&gt;\n\nYou may also set `android:theme=&quot;@android:style/Theme.NoTitleBar&quot;` theme in the styles and use it later on.\n\n___\n\n# 2) Create a Custom Theme\n\nAdd this in `res/values/styles.xml`\n\n    &lt;style name=&quot;NoActionBar&quot; parent=&quot;@android:style/Theme.Holo.Light&quot;&gt;\n         &lt;item name=&quot;windowActionBar&quot;&gt;false&lt;/item&gt;\n         &lt;item name=&quot;android:windowNoTitle&quot;&gt;true&lt;/item&gt;\n    &lt;/style&gt;\n\nand then set it as your activity&#39;s theme in Manifest:\n\n    &lt;activity android:theme=&quot;@style/NoActionBar&quot; ... /&gt;\n\n___\n\n# 3) Dynamically Remove the Action Bar\n\nPut this code in the `onCreate` method **before setting content view** -\n\n    getWindow().requestFeature(Window.FEATURE_ACTION_BAR);\n    getActionBar().hide();\n\nIf you are using the support library use `getSupportActionBar()`.","title":"Android Activity without ActionBar","body":"<p>There are multiple ways of doing this.</p>\n<h1>1) Change the theme in Android Manifest</h1>\n<p>Below the Application element, you will find theme tag. Replace it with this one -</p>\n<pre><code>android:theme=&quot;@android:style/Theme.NoTitleBar&quot;\n</code></pre>\n<p>If you are using AppCompat, use <code>@android:style/Theme.AppCompat.NoActionBar</code>.</p>\n<p>This will set the theme for all activities. If you don't need the action bar in a specific acitivity, then set the theme in the activity container, ie</p>\n<pre><code>&lt;activity android:theme=&quot;@android:style/Theme.NoTitleBar&quot; ...&gt;\n</code></pre>\n<p>You may also set <code>android:theme=&quot;@android:style/Theme.NoTitleBar&quot;</code> theme in the styles and use it later on.</p>\n<hr />\n<h1>2) Create a Custom Theme</h1>\n<p>Add this in <code>res/values/styles.xml</code></p>\n<pre><code>&lt;style name=&quot;NoActionBar&quot; parent=&quot;@android:style/Theme.Holo.Light&quot;&gt;\n     &lt;item name=&quot;windowActionBar&quot;&gt;false&lt;/item&gt;\n     &lt;item name=&quot;android:windowNoTitle&quot;&gt;true&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n<p>and then set it as your activity's theme in Manifest:</p>\n<pre><code>&lt;activity android:theme=&quot;@style/NoActionBar&quot; ... /&gt;\n</code></pre>\n<hr />\n<h1>3) Dynamically Remove the Action Bar</h1>\n<p>Put this code in the <code>onCreate</code> method <strong>before setting content view</strong> -</p>\n<pre><code>getWindow().requestFeature(Window.FEATURE_ACTION_BAR);\ngetActionBar().hide();\n</code></pre>\n<p>If you are using the support library use <code>getSupportActionBar()</code>.</p>\n"},{"tags":[],"owner":{"account_id":3482475,"reputation":27230,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1442072716,"creation_date":1442068533,"answer_id":32539993,"question_id":25863676,"body_markdown":"You may also change inheritance from ActionBarActivity to Activity as written [here][1].\r\n\r\nUPDATE\r\n\r\nA good solution is [here][2]:\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        getWindow().requestFeature(Window.FEATURE_ACTION_BAR);\r\n        super.onCreate(savedInstanceState);\r\n        getSupportActionBar().hide();\r\n        setContentView(R.layout.activity_main);\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/21815015/2914140\r\n  [2]: https://stackoverflow.com/a/28618934/2914140","title":"Android Activity without ActionBar","body":"<p>You may also change inheritance from ActionBarActivity to Activity as written <a href=\"https://stackoverflow.com/a/21815015/2914140\">here</a>.</p>\n\n<p>UPDATE</p>\n\n<p>A good solution is <a href=\"https://stackoverflow.com/a/28618934/2914140\">here</a>:</p>\n\n<pre><code>@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    getWindow().requestFeature(Window.FEATURE_ACTION_BAR);\n    super.onCreate(savedInstanceState);\n    getSupportActionBar().hide();\n    setContentView(R.layout.activity_main);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4838192,"reputation":3540,"user_id":3904085,"accept_rate":71,"display_name":"Eugene H"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1442076304,"creation_date":1442071397,"answer_id":32540466,"question_id":25863676,"body_markdown":"Considering everyone is posting older ways of hiding the ActionBar here is the proper way of implementing it within styles for AppCompat support library. Which I highly suggest moving toward if you haven&#39;t already. \r\n\r\nSimply removing the ActionBar\r\n\r\n    &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.NoActionBar&quot;&gt;\r\n    &lt;/style&gt;\r\n\r\nIf you are using the appcompat support libraries, this is the easiest and recommended way of hiding the ActionBar to make full screen or start implementing to toolbar within your layouts.\r\n\r\n    &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.NoActionBar&quot;&gt;\r\n        &lt;!-- Your Toolbar Color--&gt;\r\n        &lt;item name=&quot;colorPrimary&quot;&gt;@color/primary&lt;/item&gt;\r\n\r\n        &lt;!-- colorPrimaryDark is used for the status bar --&gt;\r\n        &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/primary_dark&lt;/item&gt;\r\n\r\n        &lt;!-- colorAccent is used as the default value for colorControlActivated,\r\n         which is used to tint widgets --&gt;\r\n        &lt;item name=&quot;colorAccent&quot;&gt;@color/accent&lt;/item&gt;\r\n\r\n        &lt;!-- You can also set colorControlNormal, colorControlActivated\r\n         colorControlHighlight, and colorSwitchThumbNormal. --&gt;\r\n    &lt;/style&gt;\r\n\r\nThen to change your toolbar color\r\n\r\n\r\n\t&lt;android.support.v7.widget.Toolbar\r\n\t\tandroid:id=”@+id/my_awesome_toolbar”\r\n\t\tandroid:layout_height=”wrap_content”\r\n\t\tandroid:layout_width=”match_parent”\r\n\t\tandroid:minHeight=”?attr/actionBarSize”\r\n\t\tandroid:background=”?attr/primary” /&gt;\r\n\r\nLast note: Your Activity class should extend AppCompatActivity\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n\t\r\n\t&lt;!--Activity Items --&gt;\r\n\t\r\n\t}","title":"Android Activity without ActionBar","body":"<p>Considering everyone is posting older ways of hiding the ActionBar here is the proper way of implementing it within styles for AppCompat support library. Which I highly suggest moving toward if you haven't already. </p>\n\n<p>Simply removing the ActionBar</p>\n\n<pre><code>&lt;style name=\"AppTheme\" parent=\"Theme.AppCompat.Light.NoActionBar\"&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p>If you are using the appcompat support libraries, this is the easiest and recommended way of hiding the ActionBar to make full screen or start implementing to toolbar within your layouts.</p>\n\n<pre><code>&lt;style name=\"AppTheme\" parent=\"Theme.AppCompat.Light.NoActionBar\"&gt;\n    &lt;!-- Your Toolbar Color--&gt;\n    &lt;item name=\"colorPrimary\"&gt;@color/primary&lt;/item&gt;\n\n    &lt;!-- colorPrimaryDark is used for the status bar --&gt;\n    &lt;item name=\"colorPrimaryDark\"&gt;@color/primary_dark&lt;/item&gt;\n\n    &lt;!-- colorAccent is used as the default value for colorControlActivated,\n     which is used to tint widgets --&gt;\n    &lt;item name=\"colorAccent\"&gt;@color/accent&lt;/item&gt;\n\n    &lt;!-- You can also set colorControlNormal, colorControlActivated\n     colorControlHighlight, and colorSwitchThumbNormal. --&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p>Then to change your toolbar color</p>\n\n<pre><code>&lt;android.support.v7.widget.Toolbar\n    android:id=”@+id/my_awesome_toolbar”\n    android:layout_height=”wrap_content”\n    android:layout_width=”match_parent”\n    android:minHeight=”?attr/actionBarSize”\n    android:background=”?attr/primary” /&gt;\n</code></pre>\n\n<p>Last note: Your Activity class should extend AppCompatActivity</p>\n\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n&lt;!--Activity Items --&gt;\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1139624,"reputation":687,"user_id":1123898,"display_name":"atablash"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1548019479,"creation_date":1446051341,"answer_id":33397039,"question_id":25863676,"body_markdown":"If you&#39;re using `AppCompat`, declare your activity in `AndroidManifest.xml` as follows:\r\n\r\n    &lt;activity\r\n        android:name=&quot;.SomeActivity&quot;\r\n        ...\r\n        android:theme=&quot;@style/Theme.AppCompat.Light.NoActionBar&quot; /&gt;\r\n\r\n","title":"Android Activity without ActionBar","body":"<p>If you're using <code>AppCompat</code>, declare your activity in <code>AndroidManifest.xml</code> as follows:</p>\n\n<pre><code>&lt;activity\n    android:name=\".SomeActivity\"\n    ...\n    android:theme=\"@style/Theme.AppCompat.Light.NoActionBar\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5407099,"reputation":479,"user_id":4305240,"display_name":"Claude"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1462892297,"creation_date":1462892297,"answer_id":37142193,"question_id":25863676,"body_markdown":"If you want most of your activities to have an action bar you would probably inherit your base theme from the default one (this is automatically generated by Android Studio per default):\r\n\r\n    &lt;!-- Base application theme. --&gt;\r\n        &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.DarkActionBar&quot;&gt;\r\n            &lt;!-- Customize your theme here. --&gt;\r\n            &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorPrimary&lt;/item&gt;\r\n            &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorPrimaryDark&lt;/item&gt;\r\n            &lt;item name=&quot;colorAccent&quot;&gt;@color/colorAccent&lt;/item&gt;\r\n        &lt;/style&gt;\r\n\r\nAnd then add a special theme for your bar-less activity:\r\n\r\n    &lt;style name=&quot;AppTheme.NoTitle&quot; parent=&quot;AppTheme&quot;&gt;\r\n            &lt;item name=&quot;windowNoTitle&quot;&gt;true&lt;/item&gt;\r\n            &lt;item name=&quot;windowActionBar&quot;&gt;false&lt;/item&gt;\r\n            &lt;item name=&quot;actionBarTheme&quot;&gt;@null&lt;/item&gt;\r\n        &lt;/style&gt;\r\nFor me, setting *actionBarTheme* to *@null* was the solution.\r\n\r\nFinally setup the activity in your manifest file:\r\n\r\n    &lt;activity ... android:theme=&quot;@style/AppTheme.NoTitle&quot; ... &gt;","title":"Android Activity without ActionBar","body":"<p>If you want most of your activities to have an action bar you would probably inherit your base theme from the default one (this is automatically generated by Android Studio per default):</p>\n\n<pre><code>&lt;!-- Base application theme. --&gt;\n    &lt;style name=\"AppTheme\" parent=\"Theme.AppCompat.Light.DarkActionBar\"&gt;\n        &lt;!-- Customize your theme here. --&gt;\n        &lt;item name=\"colorPrimary\"&gt;@color/colorPrimary&lt;/item&gt;\n        &lt;item name=\"colorPrimaryDark\"&gt;@color/colorPrimaryDark&lt;/item&gt;\n        &lt;item name=\"colorAccent\"&gt;@color/colorAccent&lt;/item&gt;\n    &lt;/style&gt;\n</code></pre>\n\n<p>And then add a special theme for your bar-less activity:</p>\n\n<pre><code>&lt;style name=\"AppTheme.NoTitle\" parent=\"AppTheme\"&gt;\n        &lt;item name=\"windowNoTitle\"&gt;true&lt;/item&gt;\n        &lt;item name=\"windowActionBar\"&gt;false&lt;/item&gt;\n        &lt;item name=\"actionBarTheme\"&gt;@null&lt;/item&gt;\n    &lt;/style&gt;\n</code></pre>\n\n<p>For me, setting <em>actionBarTheme</em> to <em>@null</em> was the solution.</p>\n\n<p>Finally setup the activity in your manifest file:</p>\n\n<pre><code>&lt;activity ... android:theme=\"@style/AppTheme.NoTitle\" ... &gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8738664,"reputation":281,"user_id":6536369,"display_name":"Karthick"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1507622564,"creation_date":1507622564,"answer_id":46661527,"question_id":25863676,"body_markdown":"Create an new Style with any name, in my case &quot;Theme.Alert.NoActionBar&quot;\r\n\r\n    &lt;style name=&quot;Theme.Alert.NoActionBar&quot; parent=&quot;Theme.AppCompat.Dialog&quot;&gt;\r\n        &lt;item name=&quot;windowNoTitle&quot;&gt;true&lt;/item&gt;\r\n        &lt;item name=&quot;windowActionBar&quot;&gt;false&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\nset its parent as &quot;Theme.AppCompat.Dialog&quot; like in the above code\r\n\r\nopen AndoridManifest.xml and customize the activity you want to show as Alert Dialog like this\r\n\r\n        &lt;activity\r\n            android:excludeFromRecents=&quot;true&quot;\r\n            android:theme=&quot;@style/Theme.Alert.NoActionBar&quot;\r\n            android:name=&quot;.activities.UserLoginActivity&quot; /&gt;\r\n\r\nin my app i want show my user login activity as Alert Dialog, these are the codes i used. hope this works for you!!!","title":"Android Activity without ActionBar","body":"<p>Create an new Style with any name, in my case \"Theme.Alert.NoActionBar\"</p>\n\n<pre><code>&lt;style name=\"Theme.Alert.NoActionBar\" parent=\"Theme.AppCompat.Dialog\"&gt;\n    &lt;item name=\"windowNoTitle\"&gt;true&lt;/item&gt;\n    &lt;item name=\"windowActionBar\"&gt;false&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p>set its parent as \"Theme.AppCompat.Dialog\" like in the above code</p>\n\n<p>open AndoridManifest.xml and customize the activity you want to show as Alert Dialog like this</p>\n\n<pre><code>    &lt;activity\n        android:excludeFromRecents=\"true\"\n        android:theme=\"@style/Theme.Alert.NoActionBar\"\n        android:name=\".activities.UserLoginActivity\" /&gt;\n</code></pre>\n\n<p>in my app i want show my user login activity as Alert Dialog, these are the codes i used. hope this works for you!!!</p>\n"},{"tags":[],"owner":{"account_id":12175559,"reputation":1820,"user_id":8888756,"display_name":"Mahmoud Salah Eldin"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1536348080,"creation_date":1536348080,"answer_id":52228510,"question_id":25863676,"body_markdown":"open Manifest and add attribute theme = &quot;@style/Theme.AppCompat.Light.NoActionBar&quot; to activity you want it without actionbar :\r\n\r\n    &lt;application\r\n        ...\r\n        android:theme=&quot;@style/AppTheme&quot;&gt;\r\n        &lt;activity android:name=&quot;.MainActivity&quot;\r\n            android:theme=&quot;@style/Theme.AppCompat.Light.NoActionBar&quot;&gt;\r\n            ...\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;","title":"Android Activity without ActionBar","body":"<p>open Manifest and add attribute theme = \"@style/Theme.AppCompat.Light.NoActionBar\" to activity you want it without actionbar :</p>\n\n<pre><code>&lt;application\n    ...\n    android:theme=\"@style/AppTheme\"&gt;\n    &lt;activity android:name=\".MainActivity\"\n        android:theme=\"@style/Theme.AppCompat.Light.NoActionBar\"&gt;\n        ...\n    &lt;/activity&gt;\n&lt;/application&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7360764,"reputation":2305,"user_id":5604117,"accept_rate":30,"display_name":"D. Sergeev"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1547372932,"creation_date":1547372932,"answer_id":54167686,"question_id":25863676,"body_markdown":"Please find the default theme in styles.xml\r\n\r\n    &lt;!-- Base application theme. --&gt;\r\n        &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.DarkActionBar&quot;&gt;\r\n            &lt;!-- Customize your theme here. --&gt;\r\n            &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorPrimary&lt;/item&gt;\r\n            &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorPrimaryDark&lt;/item&gt;\r\n            &lt;item name=&quot;colorAccent&quot;&gt;@color/colorAccent&lt;/item&gt;\r\n        &lt;/style&gt;\r\n\r\nAnd change parent this way \r\n\r\n    &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.NoActionBar&quot;&gt;","title":"Android Activity without ActionBar","body":"<p>Please find the default theme in styles.xml</p>\n\n<pre><code>&lt;!-- Base application theme. --&gt;\n    &lt;style name=\"AppTheme\" parent=\"Theme.AppCompat.Light.DarkActionBar\"&gt;\n        &lt;!-- Customize your theme here. --&gt;\n        &lt;item name=\"colorPrimary\"&gt;@color/colorPrimary&lt;/item&gt;\n        &lt;item name=\"colorPrimaryDark\"&gt;@color/colorPrimaryDark&lt;/item&gt;\n        &lt;item name=\"colorAccent\"&gt;@color/colorAccent&lt;/item&gt;\n    &lt;/style&gt;\n</code></pre>\n\n<p>And change parent this way </p>\n\n<pre><code>&lt;style name=\"AppTheme\" parent=\"Theme.AppCompat.Light.NoActionBar\"&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10078460,"reputation":3,"user_id":7449688,"display_name":"mustansir makda"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1549276660,"creation_date":1549272784,"answer_id":54513307,"question_id":25863676,"body_markdown":"It&#39;s Really Simple Just go to your `styles.xml` change the parent Theme to either\r\n`Theme.AppCompat.Light.NoActionBar` or `Theme.AppCompat.NoActionbar` and you are done.. :)","title":"Android Activity without ActionBar","body":"<p>It's Really Simple Just go to your <code>styles.xml</code> change the parent Theme to either\n<code>Theme.AppCompat.Light.NoActionBar</code> or <code>Theme.AppCompat.NoActionbar</code> and you are done.. :)</p>\n"},{"tags":[],"owner":{"account_id":13390389,"reputation":121,"user_id":9662902,"display_name":"Prashant Mhetre"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1555917578,"creation_date":1555917578,"answer_id":55790630,"question_id":25863676,"body_markdown":"Default style you getting in res/value/style.xml like \r\n\r\n```\r\n  &lt;style name=&quot;AppTheme.NoActionBar&quot;&gt;\r\n        &lt;item name=&quot;windowActionBar&quot;&gt;false&lt;/item&gt;\r\n        &lt;item name=&quot;windowNoTitle&quot;&gt;true&lt;/item&gt;\r\n  &lt;/style&gt;\r\n```\r\nAnd just the below like in your activity tag,\r\n\r\n```\r\nandroid:theme=&quot;@style/AppTheme.NoActionBar&quot;\r\n```\r\n","title":"Android Activity without ActionBar","body":"<p>Default style you getting in res/value/style.xml like </p>\n\n<pre><code>  &lt;style name=\"AppTheme.NoActionBar\"&gt;\n        &lt;item name=\"windowActionBar\"&gt;false&lt;/item&gt;\n        &lt;item name=\"windowNoTitle\"&gt;true&lt;/item&gt;\n  &lt;/style&gt;\n</code></pre>\n\n<p>And just the below like in your activity tag,</p>\n\n<pre><code>android:theme=\"@style/AppTheme.NoActionBar\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13733259,"reputation":1173,"user_id":9910265,"display_name":"Mohamed Ben Romdhane"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1603977650,"creation_date":1603977650,"answer_id":64591962,"question_id":25863676,"body_markdown":"Put this line in your `Activity` in the `Manifest`:\r\n\r\n````\r\n&lt;activity android:name=&quot;.MainActivity&quot;\r\n        android:theme=&quot;@style/Theme.AppCompat.Light.NoActionBar&quot;&gt;\r\n        ...\r\n    &lt;/activity&gt;\r\n````\r\nand make sure you didn&#39;t put `Toolbar` in your layout\r\n\r\n````\r\n &lt;androidx.appcompat.widget.Toolbar\r\n            android:id=&quot;@+id/toolbar&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;?attr/actionBarSize&quot;\r\n            /&gt;\r\n````","title":"Android Activity without ActionBar","body":"<p>Put this line in your <code>Activity</code> in the <code>Manifest</code>:</p>\n<pre><code>&lt;activity android:name=&quot;.MainActivity&quot;\n        android:theme=&quot;@style/Theme.AppCompat.Light.NoActionBar&quot;&gt;\n        ...\n    &lt;/activity&gt;\n</code></pre>\n<p>and make sure you didn't put <code>Toolbar</code> in your layout</p>\n<pre><code> &lt;androidx.appcompat.widget.Toolbar\n            android:id=&quot;@+id/toolbar&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;?attr/actionBarSize&quot;\n            /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6993660,"reputation":8646,"user_id":5361964,"accept_rate":40,"display_name":"Zohab Ali"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1628716361,"creation_date":1628716361,"answer_id":68748983,"question_id":25863676,"body_markdown":"    android:theme=&quot;@style/Theme.MaterialComponents.Light.NoActionBar&quot;\r\n\r\nUsing this theme worked for me","title":"Android Activity without ActionBar","body":"<pre><code>android:theme=&quot;@style/Theme.MaterialComponents.Light.NoActionBar&quot;\n</code></pre>\n<p>Using this theme worked for me</p>\n"}],"owner":{"account_id":5022111,"reputation":1152,"user_id":4035306,"display_name":"Mentos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":166313,"favorite_count":0,"down_vote_count":1,"up_vote_count":82,"accepted_answer_id":25863690,"answer_count":14,"score":81,"last_activity_date":1671848551,"creation_date":1410855014,"question_id":25863676,"body_markdown":"I have different `Activities` in my App and in all of them I do not want the `Action Bar`. I cannot find how to disable it. I have tried to find an attribute to apply it to the `main_activity.xml` but so far I did not find anything. Can somebody help me please?","title":"Android Activity without ActionBar","body":"<p>I have different <code>Activities</code> in my App and in all of them I do not want the <code>Action Bar</code>. I cannot find how to disable it. I have tried to find an attribute to apply it to the <code>main_activity.xml</code> but so far I did not find anything. Can somebody help me please?</p>\n"},{"tags":["java","android","json","android-arrayadapter"],"comments":[{"owner":{"account_id":1018150,"reputation":45383,"user_id":1029225,"display_name":"MH."},"score":1,"creation_date":1330132318,"post_id":9440138,"comment_id":11939116,"body_markdown":"There&#39;s tons of [similar question asked before on SO](http://stackoverflow.com/search?q=json+array+listview) - did you have a browse through those? If all you want to do is show a list of names, there&#39;s no need to subclass ArrayAdapter.","body":"There&#39;s tons of <a href=\"http://stackoverflow.com/search?q=json+array+listview\">similar question asked before on SO</a> - did you have a browse through those? If all you want to do is show a list of names, there&#39;s no need to subclass ArrayAdapter."}],"answers":[{"tags":[],"owner":{"account_id":137918,"reputation":30865,"user_id":342473,"accept_rate":77,"display_name":"Mariusz Jamro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1330132193,"creation_date":1330132193,"answer_id":9440207,"question_id":9440138,"body_markdown":"Put the data into an Array and use ArrayAdapter to bind data to a list items.\r\n\r\nSee the article on:\r\n\r\nhttp://www.josecgomez.com/2010/05/03/android-putting-custom-objects-in-listview/","title":"How to convert JSONArray to ListView?","body":"<p>Put the data into an Array and use ArrayAdapter to bind data to a list items.</p>\n\n<p>See the article on:</p>\n\n<p><a href=\"http://www.josecgomez.com/2010/05/03/android-putting-custom-objects-in-listview/\" rel=\"nofollow\">http://www.josecgomez.com/2010/05/03/android-putting-custom-objects-in-listview/</a></p>\n"},{"tags":[],"owner":{"account_id":1263496,"reputation":1555,"user_id":1221286,"accept_rate":100,"display_name":"unbekant"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1671846963,"creation_date":1330133153,"answer_id":9440282,"question_id":9440138,"body_markdown":"Inside your for loop where you are printing the names, you should be loading an array list containing the values you would like to insert to the list later.\r\nNotice that the example uses the following:\r\n        \r\n&lt;code&gt;ArrayList&lt; HashMap &lt; String, String &gt; &gt; mylist = new ArrayList &lt; HashMap &lt; String, String &gt; &gt; ();&lt;/code&gt;\r\n\r\nAnd you have an integer and a string to add to the structure so you could simply turn that ID into a String and problem solved.\r\nAfterwards you can use a list adapter without the need  of creating a separate class:\r\n   \r\n&lt;code&gt; ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.main, new String[] { &quot;name&quot;, &quot;id&quot; }, new int[] { R.id.item_title, R.id.item_subtitle });&lt;/code&gt;\r\n\r\nWhere &quot;name&quot; and &quot;id&quot; will be the keys in your map for the name and id values returned by json and item_title, item_subtitle the views to &quot;adapt&quot; the text on.\r\n","title":"How to convert JSONArray to ListView?","body":"<p>Inside your for loop where you are printing the names, you should be loading an array list containing the values you would like to insert to the list later.\nNotice that the example uses the following:</p>\n<p><code>ArrayList&lt; HashMap &lt; String, String &gt; &gt; mylist = new ArrayList &lt; HashMap &lt; String, String &gt; &gt; ();</code></p>\n<p>And you have an integer and a string to add to the structure so you could simply turn that ID into a String and problem solved.\nAfterwards you can use a list adapter without the need  of creating a separate class:</p>\n<p><code> ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.main, new String[] { &quot;name&quot;, &quot;id&quot; }, new int[] { R.id.item_title, R.id.item_subtitle });</code></p>\n<p>Where &quot;name&quot; and &quot;id&quot; will be the keys in your map for the name and id values returned by json and item_title, item_subtitle the views to &quot;adapt&quot; the text on.</p>\n"},{"tags":[],"owner":{"account_id":1228367,"reputation":1446,"user_id":1193475,"display_name":"ByteMe"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1330134787,"creation_date":1330134787,"answer_id":9440439,"question_id":9440138,"body_markdown":"If you just want to display a list of textViews you don&#39;t need to override anything, you can just add all of the items into an arrayList and use an arrayAdapter. \r\n\r\nPut a list view in your xml that is named android:list and then create your arrayAdapter with the textView you want to use.\r\n\r\nAfter that all you have to do is call setListAdapter(mArrayAdapter) and it should populate your list.\r\n\r\n    ArrayList&lt;String&gt; items = new ArrayList&lt;String&gt;();\r\n    for(int i=0; i &lt; jArray.length() ; i++) {\r\n        json_data = jArray.getJSONObject(i);\r\n        int id=json_data.getInt(&quot;id&quot;);\r\n        String name=json_data.getString(&quot;name&quot;);\r\n        items.add(name);\r\n        Log.d(name,&quot;Output&quot;);\r\n    }\r\n\r\n    ArrayAdapter&lt;String&gt; mArrayAdapter = new ArrayAdapter&lt;String&gt;(this,  \r\n               android.R.layout.simple_expandable_list_item_1, items));\r\n    setListAdapter(mArrayAdapter)\r\n\r\n\r\nhope this helps!","title":"How to convert JSONArray to ListView?","body":"<p>If you just want to display a list of textViews you don't need to override anything, you can just add all of the items into an arrayList and use an arrayAdapter. </p>\n\n<p>Put a list view in your xml that is named android:list and then create your arrayAdapter with the textView you want to use.</p>\n\n<p>After that all you have to do is call setListAdapter(mArrayAdapter) and it should populate your list.</p>\n\n<pre><code>ArrayList&lt;String&gt; items = new ArrayList&lt;String&gt;();\nfor(int i=0; i &lt; jArray.length() ; i++) {\n    json_data = jArray.getJSONObject(i);\n    int id=json_data.getInt(\"id\");\n    String name=json_data.getString(\"name\");\n    items.add(name);\n    Log.d(name,\"Output\");\n}\n\nArrayAdapter&lt;String&gt; mArrayAdapter = new ArrayAdapter&lt;String&gt;(this,  \n           android.R.layout.simple_expandable_list_item_1, items));\nsetListAdapter(mArrayAdapter)\n</code></pre>\n\n<p>hope this helps!</p>\n"},{"tags":[],"owner":{"account_id":105957,"reputation":6322,"user_id":282484,"display_name":"Luca Rocchi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1396254736,"creation_date":1396254736,"answer_id":22756925,"question_id":9440138,"body_markdown":"I do not like to remap data while i already have them in a JSON array\r\nso this is my code ... it is simple enough for me ....hope it helps\r\n\r\n    package ...;\r\n    import android.content.Context;\r\n    import android.os.Bundle;\r\n    import android.support.v4.app.ListFragment;\r\n    import android.util.Log;\r\n    import android.view.LayoutInflater;\r\n    import android.view.View;\r\n    import android.view.ViewGroup;\r\n    import android.widget.BaseAdapter;\r\n    import android.widget.ListView;\r\n    import android.widget.TextView;\r\n    \r\n    import org.json.JSONArray;\r\n    import org.json.JSONException;\r\n    import org.json.JSONObject;\r\n    \r\n    public class DataListFragment extends ListFragment{\r\n    \tJSONArray data;\r\n    \r\n    \tpublic DataListFragment(){\r\n    \r\n    \t}\r\n    \r\n    \t@Override \r\n    \tpublic void onActivityCreated(Bundle savedInstanceState) {\r\n    \t\tsuper.onActivityCreated(savedInstanceState);\r\n    \t\tLog.i(&quot;mycode&quot;, &quot;DataListFragment onActivityCreated&quot;);\r\n    \t\tdata=((MainActivity)this.getActivity()).data;\r\n    \t\tLog.i(&quot;mycode&quot;, &quot;data length &quot;+data.toString());\r\n    \t\tsetEmptyText(&quot;No Data Here&quot;);\r\n    \t\tfinal JSONArrayAdapter adapter = new JSONArrayAdapter(this.getActivity(),data);\r\n    \t\tsetListAdapter(adapter);\r\n    \r\n    \t\t// Start out with a progress indicator.\r\n    \t\t//setListShown(false);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void onListItemClick(ListView l, View v, int position, long id) {\r\n    \t\t// Insert desired behavior here.\r\n    \t\tLog.i(&quot;mycode&quot;, &quot;Item clicked: &quot; + id);\r\n    \t}\r\n    \r\n    \tprivate class JSONArrayAdapter extends BaseAdapter {\r\n    \t\tJSONArray data;\r\n    \t\tContext context;\r\n    \r\n    \t\tpublic JSONArrayAdapter(Context context,JSONArray data) {\r\n    \t\t\tsuper();\r\n    \t\t\tthis.context=context;\r\n    \t\t\tthis.data=data;\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic int getCount() {\r\n    \t\t\treturn data.length();\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic Object getItem(int arg0) {\r\n    \t\t\t// TODO Auto-generated method stub\r\n    \t\t\ttry {\r\n    \t\t\t\treturn data.getJSONObject(arg0);\r\n    \t\t\t} catch (JSONException e) {\r\n    \t\t\t\t// TODO Auto-generated catch block\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t}\r\n    \t\t\treturn null;\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic long getItemId(int arg0) {\r\n    \t\t\treturn arg0;\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic boolean hasStableIds(){\r\n    \t\t\treturn true;\r\n    \t\t}\r\n    \t\t\r\n    \t\t@Override\r\n    \t\tpublic boolean isEmpty(){\r\n    \t\t\treturn data==null || data.length()==0;\r\n    \t\t}\r\n    \t\t\r\n    \t\t@Override\r\n    \t\tpublic View getView(int position, View convertView, ViewGroup parent) {\r\n    \t\t\tLayoutInflater inflater = (LayoutInflater) context\r\n    \t\t\t\t\t.getSystemService(Context.LAYOUT_INFLATER_SERVICE);\r\n    \t\t\tView rowView = inflater.inflate(R.layout.single_item, parent, false);\r\n    \t\t\tTextView textView1 = (TextView) rowView.findViewById(R.id.firstLine);\r\n    \t\t\tTextView textView2 = (TextView) rowView.findViewById(R.id.secondLine);\r\n    \t\t\t//ImageView imageView = (ImageView) rowView.findViewById(R.id.icon);\r\n    \t\t\ttry {\r\n    \t\t\t\tJSONObject jo = (JSONObject) data.get(position);\r\n    \t\t\t\ttextView1.setText(jo.getString(&quot;category_title&quot;));\r\n    \t\t\t\ttextView2.setText(jo.getString(&quot;description&quot;));\r\n    \t\t\t} catch (JSONException e) {\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t}\r\n    \t\t\treturn rowView;\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n    &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:layout_width=&quot;fill_parent&quot;\r\n        android:layout_height=&quot;?android:attr/listPreferredItemHeight&quot;\r\n        android:padding=&quot;6dip&quot; &gt;\r\n    \r\n        &lt;ImageView\r\n            android:id=&quot;@+id/icon&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;fill_parent&quot;\r\n            android:layout_alignParentBottom=&quot;true&quot;\r\n            android:layout_alignParentTop=&quot;true&quot;\r\n            android:layout_marginRight=&quot;6dip&quot;\r\n            android:contentDescription=&quot;icon&quot;\r\n            android:src=&quot;@drawable/ic_launcher&quot; /&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/secondLine&quot;\r\n            android:layout_width=&quot;fill_parent&quot;\r\n            android:layout_height=&quot;26dip&quot;\r\n            android:layout_alignParentBottom=&quot;true&quot;\r\n            android:layout_alignParentRight=&quot;true&quot;\r\n            android:layout_toRightOf=&quot;@id/icon&quot;\r\n            android:ellipsize=&quot;marquee&quot;\r\n            android:singleLine=&quot;true&quot;\r\n            android:textSize=&quot;12sp&quot; /&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/firstLine&quot;\r\n            android:layout_width=&quot;fill_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_above=&quot;@id/secondLine&quot;\r\n            android:layout_alignParentRight=&quot;true&quot;\r\n            android:layout_alignParentTop=&quot;true&quot;\r\n            android:layout_alignWithParentIfMissing=&quot;true&quot;\r\n            android:layout_toRightOf=&quot;@id/icon&quot;\r\n            android:gravity=&quot;center_vertical&quot;\r\n            android:textSize=&quot;16sp&quot; /&gt;\r\n    \r\n    &lt;/RelativeLayout&gt; ","title":"How to convert JSONArray to ListView?","body":"<p>I do not like to remap data while i already have them in a JSON array\nso this is my code ... it is simple enough for me ....hope it helps</p>\n\n<pre><code>package ...;\nimport android.content.Context;\nimport android.os.Bundle;\nimport android.support.v4.app.ListFragment;\nimport android.util.Log;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.BaseAdapter;\nimport android.widget.ListView;\nimport android.widget.TextView;\n\nimport org.json.JSONArray;\nimport org.json.JSONException;\nimport org.json.JSONObject;\n\npublic class DataListFragment extends ListFragment{\n    JSONArray data;\n\n    public DataListFragment(){\n\n    }\n\n    @Override \n    public void onActivityCreated(Bundle savedInstanceState) {\n        super.onActivityCreated(savedInstanceState);\n        Log.i(\"mycode\", \"DataListFragment onActivityCreated\");\n        data=((MainActivity)this.getActivity()).data;\n        Log.i(\"mycode\", \"data length \"+data.toString());\n        setEmptyText(\"No Data Here\");\n        final JSONArrayAdapter adapter = new JSONArrayAdapter(this.getActivity(),data);\n        setListAdapter(adapter);\n\n        // Start out with a progress indicator.\n        //setListShown(false);\n    }\n\n    @Override\n    public void onListItemClick(ListView l, View v, int position, long id) {\n        // Insert desired behavior here.\n        Log.i(\"mycode\", \"Item clicked: \" + id);\n    }\n\n    private class JSONArrayAdapter extends BaseAdapter {\n        JSONArray data;\n        Context context;\n\n        public JSONArrayAdapter(Context context,JSONArray data) {\n            super();\n            this.context=context;\n            this.data=data;\n        }\n\n        @Override\n        public int getCount() {\n            return data.length();\n        }\n\n        @Override\n        public Object getItem(int arg0) {\n            // TODO Auto-generated method stub\n            try {\n                return data.getJSONObject(arg0);\n            } catch (JSONException e) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();\n            }\n            return null;\n        }\n\n        @Override\n        public long getItemId(int arg0) {\n            return arg0;\n        }\n\n        @Override\n        public boolean hasStableIds(){\n            return true;\n        }\n\n        @Override\n        public boolean isEmpty(){\n            return data==null || data.length()==0;\n        }\n\n        @Override\n        public View getView(int position, View convertView, ViewGroup parent) {\n            LayoutInflater inflater = (LayoutInflater) context\n                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);\n            View rowView = inflater.inflate(R.layout.single_item, parent, false);\n            TextView textView1 = (TextView) rowView.findViewById(R.id.firstLine);\n            TextView textView2 = (TextView) rowView.findViewById(R.id.secondLine);\n            //ImageView imageView = (ImageView) rowView.findViewById(R.id.icon);\n            try {\n                JSONObject jo = (JSONObject) data.get(position);\n                textView1.setText(jo.getString(\"category_title\"));\n                textView2.setText(jo.getString(\"description\"));\n            } catch (JSONException e) {\n                e.printStackTrace();\n            }\n            return rowView;\n        }\n\n    }\n\n}\n\n\n&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"fill_parent\"\n    android:layout_height=\"?android:attr/listPreferredItemHeight\"\n    android:padding=\"6dip\" &gt;\n\n    &lt;ImageView\n        android:id=\"@+id/icon\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"fill_parent\"\n        android:layout_alignParentBottom=\"true\"\n        android:layout_alignParentTop=\"true\"\n        android:layout_marginRight=\"6dip\"\n        android:contentDescription=\"icon\"\n        android:src=\"@drawable/ic_launcher\" /&gt;\n\n    &lt;TextView\n        android:id=\"@+id/secondLine\"\n        android:layout_width=\"fill_parent\"\n        android:layout_height=\"26dip\"\n        android:layout_alignParentBottom=\"true\"\n        android:layout_alignParentRight=\"true\"\n        android:layout_toRightOf=\"@id/icon\"\n        android:ellipsize=\"marquee\"\n        android:singleLine=\"true\"\n        android:textSize=\"12sp\" /&gt;\n\n    &lt;TextView\n        android:id=\"@+id/firstLine\"\n        android:layout_width=\"fill_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_above=\"@id/secondLine\"\n        android:layout_alignParentRight=\"true\"\n        android:layout_alignParentTop=\"true\"\n        android:layout_alignWithParentIfMissing=\"true\"\n        android:layout_toRightOf=\"@id/icon\"\n        android:gravity=\"center_vertical\"\n        android:textSize=\"16sp\" /&gt;\n\n&lt;/RelativeLayout&gt; \n</code></pre>\n"}],"owner":{"account_id":1128103,"reputation":109,"user_id":1114866,"accept_rate":71,"display_name":"Beetle"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27806,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":9440439,"answer_count":4,"score":5,"last_activity_date":1671846963,"creation_date":1330131419,"question_id":9440138,"body_markdown":"I have a code which does following - \r\n\r\n1. Connect to a web service via HttpClient to PHP file\r\n2. Returns a result from an SQL query\r\n3. Returns format is a jArray (a JSONArray)\r\n\r\n&lt;b&gt;&lt;/b&gt;\r\n\r\n    for(int i=0; i &lt; jArray.length() ; i++) {\r\n        json_data = jArray.getJSONObject(i);\r\n        int id=json_data.getInt(&quot;id&quot;);\r\n        String name=json_data.getString(&quot;name&quot;);\r\n        Log.d(name,&quot;Output&quot;);\r\n    }\r\n\r\nWhen I look at the LogCat, I see all the &quot;names&quot; of the query, Each record is printed. I just need to plug these results into a ListView. How can I accomplish this ? \r\n\r\nPS - I do not have a separate class for an ArrayAdapter. Could this be the reason ? ","title":"How to convert JSONArray to ListView?","body":"<p>I have a code which does following - </p>\n\n<ol>\n<li>Connect to a web service via HttpClient to PHP file</li>\n<li>Returns a result from an SQL query</li>\n<li>Returns format is a jArray (a JSONArray)</li>\n</ol>\n\n<p><b></b></p>\n\n<pre><code>for(int i=0; i &lt; jArray.length() ; i++) {\n    json_data = jArray.getJSONObject(i);\n    int id=json_data.getInt(\"id\");\n    String name=json_data.getString(\"name\");\n    Log.d(name,\"Output\");\n}\n</code></pre>\n\n<p>When I look at the LogCat, I see all the \"names\" of the query, Each record is printed. I just need to plug these results into a ListView. How can I accomplish this ? </p>\n\n<p>PS - I do not have a separate class for an ArrayAdapter. Could this be the reason ? </p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":430960,"reputation":16088,"user_id":814702,"accept_rate":100,"display_name":"informatik01"},"score":19,"creation_date":1387484475,"post_id":250517,"comment_id":30987483,"body_markdown":"There is a a nice [**Java Conceptual Diagram**](http://docs.oracle.com/javase/7/docs/index.html) (with clickable links) that can help too.","body":"There is a a nice <a href=\"http://docs.oracle.com/javase/7/docs/index.html\" rel=\"nofollow noreferrer\"><b>Java Conceptual Diagram</b></a> (with clickable links) that can help too."}],"answers":[{"tags":[],"owner":{"account_id":8423,"reputation":735986,"user_id":15168,"accept_rate":100,"display_name":"Jonathan Leffler"},"down_vote_count":0,"up_vote_count":203,"is_accepted":false,"score":203,"last_activity_date":1430361606,"creation_date":1225379592,"answer_id":250534,"question_id":250517,"body_markdown":"* JDK - Java Development Kit\r\n* JRE - Java Runtime Environment\r\n* Java SE - Java Standard Edition\r\n\r\nSE defines a set of capabilities and functionalities; there are more complex editions (Enterprise Edition – EE) and simpler ones (Micro Edition – ME – for mobile environments).\r\n\r\nThe JDK includes the compiler and other tools needed to develop Java applications; JRE does not.  So, to run a Java application someone else provides, you need JRE; to develop a Java application, you need JDK.\r\n\r\n*Edited*:\r\nAs Chris Marasti-Georg pointed out in a comment, you can find out lots of information at Sun&#39;s [Java][1] web site, and in particular from the [Java SE][2] section, (2nd option, Java SE Development Kit (JDK) 6 Update 10).\r\n\r\n&lt;hr&gt;\r\n\r\n*Edited 2011-04-06:*\r\nThe world turns, and Java is now managed by Oracle, which bought Sun.  Later this year, the `sun.com` domain is supposed to go dark.  The new page (based on a redirect) is this [Java][3] page at the Oracle Tech Network.  (See also [java.com][4].)\r\n\r\n&lt;hr&gt;\r\n\r\n*Edited 2013-01-11:* And the world keeps on turning (2012-12-21 notwithstanding), and lo and behold, JRE 6 is about to reach its end of support.  [Oracle](http://www.oracle.com/technetwork/java/eol-135779.html) says no more public updates to Java 6 after February 2013.\r\n\r\nWithin a given version of Java, this answer remains valid.  JDK is the Java Development Kit, JRE is the Java Runtime Environment, Java SE is the standard edition, and so on.  But the version 6 (1.6) is becoming antiquated.\r\n\r\n*Edited 2015-04-29:* And with another couple of revolutions around the sun, the time has come for the end of support for Java SE 7, too.  In April 2015, Oracle [affirmed](http://www.oracle.com/technetwork/java/eol-135779.html) that it was no longer providing public updates to Java SE 7.  The tentative end of public updates for Java SE 8 is March 2017, but that end date is subject to change (later, not earlier).\r\n\r\n\r\n  [1]: http://java.sun.com/\r\n  [2]: http://java.sun.com/javase/downloads/index.jsp\r\n  [3]: http://www.oracle.com/technetwork/java/index.html\r\n  [4]: http://java.com/","title":"Java SE 6 vs. JRE 1.6 vs. JDK 1.6 - What do these mean?","body":"<ul>\n<li>JDK - Java Development Kit</li>\n<li>JRE - Java Runtime Environment</li>\n<li>Java SE - Java Standard Edition</li>\n</ul>\n\n<p>SE defines a set of capabilities and functionalities; there are more complex editions (Enterprise Edition – EE) and simpler ones (Micro Edition – ME – for mobile environments).</p>\n\n<p>The JDK includes the compiler and other tools needed to develop Java applications; JRE does not.  So, to run a Java application someone else provides, you need JRE; to develop a Java application, you need JDK.</p>\n\n<p><em>Edited</em>:\nAs Chris Marasti-Georg pointed out in a comment, you can find out lots of information at Sun's <a href=\"http://java.sun.com/\" rel=\"noreferrer\">Java</a> web site, and in particular from the <a href=\"http://java.sun.com/javase/downloads/index.jsp\" rel=\"noreferrer\">Java SE</a> section, (2nd option, Java SE Development Kit (JDK) 6 Update 10).</p>\n\n<hr>\n\n<p><em>Edited 2011-04-06:</em>\nThe world turns, and Java is now managed by Oracle, which bought Sun.  Later this year, the <code>sun.com</code> domain is supposed to go dark.  The new page (based on a redirect) is this <a href=\"http://www.oracle.com/technetwork/java/index.html\" rel=\"noreferrer\">Java</a> page at the Oracle Tech Network.  (See also <a href=\"http://java.com/\" rel=\"noreferrer\">java.com</a>.)</p>\n\n<hr>\n\n<p><em>Edited 2013-01-11:</em> And the world keeps on turning (2012-12-21 notwithstanding), and lo and behold, JRE 6 is about to reach its end of support.  <a href=\"http://www.oracle.com/technetwork/java/eol-135779.html\" rel=\"noreferrer\">Oracle</a> says no more public updates to Java 6 after February 2013.</p>\n\n<p>Within a given version of Java, this answer remains valid.  JDK is the Java Development Kit, JRE is the Java Runtime Environment, Java SE is the standard edition, and so on.  But the version 6 (1.6) is becoming antiquated.</p>\n\n<p><em>Edited 2015-04-29:</em> And with another couple of revolutions around the sun, the time has come for the end of support for Java SE 7, too.  In April 2015, Oracle <a href=\"http://www.oracle.com/technetwork/java/eol-135779.html\" rel=\"noreferrer\">affirmed</a> that it was no longer providing public updates to Java SE 7.  The tentative end of public updates for Java SE 8 is March 2017, but that end date is subject to change (later, not earlier).</p>\n"},{"tags":[],"owner":{"account_id":2397,"reputation":179869,"user_id":3333,"accept_rate":80,"display_name":"Paul Tomblin"},"down_vote_count":4,"up_vote_count":65,"is_accepted":true,"score":61,"last_activity_date":1225380409,"creation_date":1225379949,"answer_id":250559,"question_id":250517,"body_markdown":"When you type &quot;java -version&quot;, you see three version numbers - the java version (on mine, that&#39;s &quot;`1.6.0_07`&quot;), the Java SE Runtime Environment version (&quot;build `1.6.0_07-b06`&quot;), and the HotSpot version (on mine, that&#39;s &quot;`build 10.0-b23, mixed mode&quot;`).  I suspect the &quot;11.0&quot; you are seeing is the HotSpot version.\r\n\r\nUpdate: HotSpot is (or used to be, now they seem to use it to mean the whole VM) the just-in-time compiler that is built in to the Java Virtual Machine.  God only knows why Sun gives it a separate version number.","title":"Java SE 6 vs. JRE 1.6 vs. JDK 1.6 - What do these mean?","body":"<p>When you type \"java -version\", you see three version numbers - the java version (on mine, that's \"<code>1.6.0_07</code>\"), the Java SE Runtime Environment version (\"build <code>1.6.0_07-b06</code>\"), and the HotSpot version (on mine, that's \"<code>build 10.0-b23, mixed mode\"</code>).  I suspect the \"11.0\" you are seeing is the HotSpot version.</p>\n\n<p>Update: HotSpot is (or used to be, now they seem to use it to mean the whole VM) the just-in-time compiler that is built in to the Java Virtual Machine.  God only knows why Sun gives it a separate version number.</p>\n"},{"tags":[],"owner":{"account_id":2379,"reputation":49899,"user_id":3295,"accept_rate":62,"display_name":"toolkit"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1617718142,"creation_date":1225380052,"answer_id":250569,"question_id":250517,"body_markdown":"With the release of Java 5, the product version was made distinct from the developer version as described [here](http://java.sun.com/j2se/1.5.0/docs/relnotes/version-5.0.html)\r\n\r\n## Version 1.5.0 or 5.0?\r\n\r\nBoth version numbers &quot;1.5.0&quot; and &quot;5.0&quot; are used to identify this release of the Java 2 Platform Standard Edition. Version &quot;5.0&quot; is the product version, while &quot;1.5.0&quot; is the developer version. The number &quot;5.0&quot; is used to better reflect the level of maturity, stability, scalability and security of the J2SE.\r\n\r\n### &quot;Version 5.0&quot; Used in Platform and Product Names\r\n\r\nVersion 5.0 is used in the platform and product names as given in this table:\r\n\r\n|                  | Full Name | Abbreviation |\r\n|------------------|----------------|--------------|\r\n| Platform name    | Java&amp;trade; 2 Platform Standard Edition 5.0 | J2SE&amp;trade; 5.0 |\r\n| Products delivered under the platform | J2SE&amp;trade; Development Kit 5.0 | JDK&amp;trade; 5.0 |\r\n|                   | J2SE&amp;trade; Runtime Environment 5.0 | JRE 5.0 |\r\n\r\n### &quot;Version 1.5.0&quot; Used by Developers\r\n\r\nJ2SE also keeps the version number 1.5.0 (or 1.5) in some places that are visible only to developers, or where the version number is parsed by programs. As mentioned, 1.5.0 refers to exactly the same platform and products numbered 5.0. Version numbers 1.5.0 and 1.5 are used at:\r\n\r\n- java -version (among other info, returns  java version &quot;1.5.0&quot;)\r\n- java -fullversion (returns  java full version &quot;1.5.0-b64&quot;)\r\n- javac -source 1.5 (javac -source 5  also works)\r\n- java.version system property \r\n- java.vm.version system property\r\n- @since 1.5 tag values\r\n- jdk1.5.0 installation directory\r\n- jre1.5.0 installation directory\r\n- http://java.sun.com/j2se/1.5.0 website (http://java.sun.com/j2se/5.0\r\n   also works)\r\n\r\n","title":"Java SE 6 vs. JRE 1.6 vs. JDK 1.6 - What do these mean?","body":"<p>With the release of Java 5, the product version was made distinct from the developer version as described <a href=\"http://java.sun.com/j2se/1.5.0/docs/relnotes/version-5.0.html\" rel=\"nofollow noreferrer\">here</a></p>\n<h2>Version 1.5.0 or 5.0?</h2>\n<p>Both version numbers &quot;1.5.0&quot; and &quot;5.0&quot; are used to identify this release of the Java 2 Platform Standard Edition. Version &quot;5.0&quot; is the product version, while &quot;1.5.0&quot; is the developer version. The number &quot;5.0&quot; is used to better reflect the level of maturity, stability, scalability and security of the J2SE.</p>\n<h3>&quot;Version 5.0&quot; Used in Platform and Product Names</h3>\n<p>Version 5.0 is used in the platform and product names as given in this table:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th></th>\n<th>Full Name</th>\n<th>Abbreviation</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Platform name</td>\n<td>Java™ 2 Platform Standard Edition 5.0</td>\n<td>J2SE™ 5.0</td>\n</tr>\n<tr>\n<td>Products delivered under the platform</td>\n<td>J2SE™ Development Kit 5.0</td>\n<td>JDK™ 5.0</td>\n</tr>\n<tr>\n<td></td>\n<td>J2SE™ Runtime Environment 5.0</td>\n<td>JRE 5.0</td>\n</tr>\n</tbody>\n</table>\n</div><h3>&quot;Version 1.5.0&quot; Used by Developers</h3>\n<p>J2SE also keeps the version number 1.5.0 (or 1.5) in some places that are visible only to developers, or where the version number is parsed by programs. As mentioned, 1.5.0 refers to exactly the same platform and products numbered 5.0. Version numbers 1.5.0 and 1.5 are used at:</p>\n<ul>\n<li>java -version (among other info, returns  java version &quot;1.5.0&quot;)</li>\n<li>java -fullversion (returns  java full version &quot;1.5.0-b64&quot;)</li>\n<li>javac -source 1.5 (javac -source 5  also works)</li>\n<li>java.version system property</li>\n<li>java.vm.version system property</li>\n<li>@since 1.5 tag values</li>\n<li>jdk1.5.0 installation directory</li>\n<li>jre1.5.0 installation directory</li>\n<li><a href=\"http://java.sun.com/j2se/1.5.0\" rel=\"nofollow noreferrer\">http://java.sun.com/j2se/1.5.0</a> website (<a href=\"http://java.sun.com/j2se/5.0\" rel=\"nofollow noreferrer\">http://java.sun.com/j2se/5.0</a>\nalso works)</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":541586,"reputation":15722,"user_id":910201,"accept_rate":73,"display_name":"Xonatron"},"down_vote_count":0,"up_vote_count":123,"is_accepted":false,"score":123,"last_activity_date":1671846945,"creation_date":1314728247,"answer_id":7247851,"question_id":250517,"body_markdown":"This might help someone:\r\n\r\nI am installing the latest Java on my system for development, and currently it&#39;s Java SE 7. Now, let&#39;s dive into this &quot;madness&quot;, as you put it...\r\n\r\nAll of these are the same (when developers are talking about Java for development):\r\n\r\n - Java SE 7\r\n - Java SE v1.7.0\r\n - Java SE Development Kit 7\r\n\r\nStarting with Java v1.5:\r\n\r\n - v5 = v1.5.\r\n - v6 = v1.6.\r\n - v7 = v1.7.\r\n\r\nAnd we can assume this will remain for future versions.\r\n\r\nNext, for developers, download JDK, not JRE.\r\n\r\nJDK will contain JRE. If you need JDK and JRE, get JDK. Both will be installed from the single JDK install, as you will see below.\r\n\r\nAs someone above mentioned:\r\n\r\n - JDK = Java Development Kit (developers need this, this is you if you code in Java)\r\n - JRE = Java Runtime Environment (users need this, this is every computer user today)\r\n - Java SE = Java Standard Edition\r\n\r\nHere&#39;s the step by step links I followed (one step leads to the next, this is all for a single download) to download Java for development (JDK):\r\n\r\n1. Visit &quot;Java SE Downloads&quot;: http://www.oracle.com/technetwork/java/javase/downloads/index.html\r\n2. Click &quot;JDK Download&quot; and visit &quot;Java SE Development Kit 7 Downloads&quot;: http://www.oracle.com/technetwork/java/javase/downloads/java-se-jdk-7-download-432154.html (note that following the link from step #1 will take you to a different link as JDK 1.7 updates, later versions, are now out)\r\n3. Accept agreement :)\r\n4. Click &quot;Java SE Development Kit 7 (Windows x64)&quot;: http://download.oracle.com/otn-pub/java/jdk/7/jdk-7-windows-x64.exe (for my 64-bit Windows 7 system)\r\n5. You are now downloading (hopefully the latest) JDK for your system! :)\r\n\r\nKeep in mind the above links are for reference purposes only, to show you the step by step method of what it takes to download the JDK.\r\n\r\nAnd install with default settings to:\r\n\r\n - “C:\\Program Files\\Java\\jdk1.7.0\\” (JDK)\r\n - “C:\\Program Files\\Java\\jre7\\” (JRE) &lt;--- why did it ask a new install folder? it&#39;s JRE!\r\n\r\nRemember from above that JDK contains JRE, which makes sense if you know what they both are. Again, see above.\r\n\r\nAfter your install, double check “C:\\Program Files\\Java” to see both these folders. Now you know what they are and why they are there.","title":"Java SE 6 vs. JRE 1.6 vs. JDK 1.6 - What do these mean?","body":"<p>This might help someone:</p>\n<p>I am installing the latest Java on my system for development, and currently it's Java SE 7. Now, let's dive into this &quot;madness&quot;, as you put it...</p>\n<p>All of these are the same (when developers are talking about Java for development):</p>\n<ul>\n<li>Java SE 7</li>\n<li>Java SE v1.7.0</li>\n<li>Java SE Development Kit 7</li>\n</ul>\n<p>Starting with Java v1.5:</p>\n<ul>\n<li>v5 = v1.5.</li>\n<li>v6 = v1.6.</li>\n<li>v7 = v1.7.</li>\n</ul>\n<p>And we can assume this will remain for future versions.</p>\n<p>Next, for developers, download JDK, not JRE.</p>\n<p>JDK will contain JRE. If you need JDK and JRE, get JDK. Both will be installed from the single JDK install, as you will see below.</p>\n<p>As someone above mentioned:</p>\n<ul>\n<li>JDK = Java Development Kit (developers need this, this is you if you code in Java)</li>\n<li>JRE = Java Runtime Environment (users need this, this is every computer user today)</li>\n<li>Java SE = Java Standard Edition</li>\n</ul>\n<p>Here's the step by step links I followed (one step leads to the next, this is all for a single download) to download Java for development (JDK):</p>\n<ol>\n<li>Visit &quot;Java SE Downloads&quot;: <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/index.html\" rel=\"nofollow noreferrer\">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a></li>\n<li>Click &quot;JDK Download&quot; and visit &quot;Java SE Development Kit 7 Downloads&quot;: <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/java-se-jdk-7-download-432154.html\" rel=\"nofollow noreferrer\">http://www.oracle.com/technetwork/java/javase/downloads/java-se-jdk-7-download-432154.html</a> (note that following the link from step #1 will take you to a different link as JDK 1.7 updates, later versions, are now out)</li>\n<li>Accept agreement :)</li>\n<li>Click &quot;Java SE Development Kit 7 (Windows x64)&quot;: <a href=\"http://download.oracle.com/otn-pub/java/jdk/7/jdk-7-windows-x64.exe\" rel=\"nofollow noreferrer\">http://download.oracle.com/otn-pub/java/jdk/7/jdk-7-windows-x64.exe</a> (for my 64-bit Windows 7 system)</li>\n<li>You are now downloading (hopefully the latest) JDK for your system! :)</li>\n</ol>\n<p>Keep in mind the above links are for reference purposes only, to show you the step by step method of what it takes to download the JDK.</p>\n<p>And install with default settings to:</p>\n<ul>\n<li>“C:\\Program Files\\Java\\jdk1.7.0\\” (JDK)</li>\n<li>“C:\\Program Files\\Java\\jre7\\” (JRE) &lt;--- why did it ask a new install folder? it's JRE!</li>\n</ul>\n<p>Remember from above that JDK contains JRE, which makes sense if you know what they both are. Again, see above.</p>\n<p>After your install, double check “C:\\Program Files\\Java” to see both these folders. Now you know what they are and why they are there.</p>\n"},{"tags":[],"owner":{"account_id":3008778,"reputation":51,"user_id":2552701,"display_name":"mario"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1373007549,"creation_date":1373007549,"answer_id":17482886,"question_id":250517,"body_markdown":"Java SE Runtime is for end user, so you need Java JRE version, the first version of Java was the 1, then 1.1 - 1.2 - 1.3 - 1.4 - 1.5 - 1.6 etc and usually each version is named by version so JRE 6 means Java jre 1.6, anyway there is the update version, for example 1.6 update 45, which is named java jre 6u45.\r\n\r\nFrom what I know, they preferred to use the number 6 instead using 1.6 to better reflect the level of maturity, stability, scalability, security and more","title":"Java SE 6 vs. JRE 1.6 vs. JDK 1.6 - What do these mean?","body":"<p>Java SE Runtime is for end user, so you need Java JRE version, the first version of Java was the 1, then 1.1 - 1.2 - 1.3 - 1.4 - 1.5 - 1.6 etc and usually each version is named by version so JRE 6 means Java jre 1.6, anyway there is the update version, for example 1.6 update 45, which is named java jre 6u45.</p>\n\n<p>From what I know, they preferred to use the number 6 instead using 1.6 to better reflect the level of maturity, stability, scalability, security and more</p>\n"},{"tags":[],"owner":{"account_id":47640,"reputation":10124,"user_id":141220,"accept_rate":72,"display_name":"Manav"},"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1399208415,"creation_date":1399208415,"answer_id":23456523,"question_id":250517,"body_markdown":"## A Brief and Maybe Incorrect History of Java Versions ##\r\n\r\n* Java is a platform. It consists of two products - the software development kit, and the runtime environment.\r\n\r\n* When Java was first released, it was apparently just called __Java__. If you were a developer, you also knew the version, which was a normal &quot;1.0&quot; and later a &quot;1.1&quot;. The two products that were part of the platform were also given names:\r\n\r\n  * JDK - &quot;Java Development Kit&quot;\r\n  * JRE - &quot;Java Runtime Environment&quot;\r\n\r\n* Apparently the changes in version 1.2 so significant that they started calling the platform as __Java 2__. \r\n\r\n  * The default &quot;distribution&quot; of the platform was given the moniker &quot;standard&quot; to contrast it with its siblings. So you had three platforms:\r\n\r\n      * __&quot;Java 2 Standard Edition (J2SE)&quot;__\r\n      * __&quot;Java 2 Enterprise Edition (J2EE)&quot;__\r\n      * __&quot;Java 2 Mobile Edition (J2ME)&quot;__\r\n\r\n  * The JDK was officially renamed to &quot;Java 2 Software Development Kit&quot;.\r\n\r\n* When version 1.5 came out, the suits decided that they needed to &quot;rebrand&quot; the product. So the Java platform got two versions - the product version &quot;5&quot; and the developer version &quot;1.5&quot; (Yes, the rule is explicitly mentioned -- &quot;drop the &#39;1.&#39;). However, the &quot;2&quot; was retained in the name. So now the platform is officially called __&quot;Java 2 Platform Standard Edition 5.0 (J2SE 5.0)&quot;__.\r\n   * The suits also realized that the development community was not picking up their renaming of the JDK. But instead of reverting their change, they just decide to drop the &quot;2&quot; from the name of the individual products, which now get be __&quot;J2SE Development Kit 5.0 (JDK 5.0)&quot;__ and __&quot;J2SE Runtime Environment 5.0 (JRE 5.0)&quot;__.\r\n\r\n* When version 1.6 come out, someone realized that having two numbers in the name was weird. So they decide to completely drop the 2 (and the &quot;.0&quot; suffix), and we end up with the __&quot;Java Platform, Standard Edition 6 (Java SE 6)&quot;__ containing the __&quot;Java SE Development Kit 6 (JDK 6)&quot;__ and the __&quot;Java SE Runtime Environment 6 (JRE 6)&quot;__.\r\n\r\n* Version 1.7 did not do anything stupid. If I had to guess, the next big change would be dropping the &quot;SE&quot;, so that the cycle completes and the JDK again gets to be called the &quot;Java Development Kit&quot;.\r\n\r\n### Notes\r\n\r\n* For simplicity, a bunch of trademark signs were omitted. So assume Java™, JDK™ and JRE™.\r\n\r\n* SO seems to have trouble rendering nested lists.\r\n\r\n### References\r\n\r\n* http://www.oracle.com/technetwork/java/javase/namechange-140185.html\r\n\r\n### Epilogue\r\n\r\nJust drop the &quot;1.&quot; from versions printed by `javac -version` and `java -version` and you&#39;re good to go.\r\n","title":"Java SE 6 vs. JRE 1.6 vs. JDK 1.6 - What do these mean?","body":"<h2>A Brief and Maybe Incorrect History of Java Versions</h2>\n\n<ul>\n<li><p>Java is a platform. It consists of two products - the software development kit, and the runtime environment.</p></li>\n<li><p>When Java was first released, it was apparently just called <strong>Java</strong>. If you were a developer, you also knew the version, which was a normal \"1.0\" and later a \"1.1\". The two products that were part of the platform were also given names:</p>\n\n<ul>\n<li>JDK - \"Java Development Kit\"</li>\n<li>JRE - \"Java Runtime Environment\"</li>\n</ul></li>\n<li><p>Apparently the changes in version 1.2 so significant that they started calling the platform as <strong>Java 2</strong>. </p>\n\n<ul>\n<li><p>The default \"distribution\" of the platform was given the moniker \"standard\" to contrast it with its siblings. So you had three platforms:</p>\n\n<ul>\n<li><strong>\"Java 2 Standard Edition (J2SE)\"</strong></li>\n<li><strong>\"Java 2 Enterprise Edition (J2EE)\"</strong></li>\n<li><strong>\"Java 2 Mobile Edition (J2ME)\"</strong></li>\n</ul></li>\n<li><p>The JDK was officially renamed to \"Java 2 Software Development Kit\".</p></li>\n</ul></li>\n<li><p>When version 1.5 came out, the suits decided that they needed to \"rebrand\" the product. So the Java platform got two versions - the product version \"5\" and the developer version \"1.5\" (Yes, the rule is explicitly mentioned -- \"drop the '1.'). However, the \"2\" was retained in the name. So now the platform is officially called <strong>\"Java 2 Platform Standard Edition 5.0 (J2SE 5.0)\"</strong>.</p>\n\n<ul>\n<li>The suits also realized that the development community was not picking up their renaming of the JDK. But instead of reverting their change, they just decide to drop the \"2\" from the name of the individual products, which now get be <strong>\"J2SE Development Kit 5.0 (JDK 5.0)\"</strong> and <strong>\"J2SE Runtime Environment 5.0 (JRE 5.0)\"</strong>.</li>\n</ul></li>\n<li><p>When version 1.6 come out, someone realized that having two numbers in the name was weird. So they decide to completely drop the 2 (and the \".0\" suffix), and we end up with the <strong>\"Java Platform, Standard Edition 6 (Java SE 6)\"</strong> containing the <strong>\"Java SE Development Kit 6 (JDK 6)\"</strong> and the <strong>\"Java SE Runtime Environment 6 (JRE 6)\"</strong>.</p></li>\n<li><p>Version 1.7 did not do anything stupid. If I had to guess, the next big change would be dropping the \"SE\", so that the cycle completes and the JDK again gets to be called the \"Java Development Kit\".</p></li>\n</ul>\n\n<h3>Notes</h3>\n\n<ul>\n<li><p>For simplicity, a bunch of trademark signs were omitted. So assume Java™, JDK™ and JRE™.</p></li>\n<li><p>SO seems to have trouble rendering nested lists.</p></li>\n</ul>\n\n<h3>References</h3>\n\n<ul>\n<li><a href=\"http://www.oracle.com/technetwork/java/javase/namechange-140185.html\">http://www.oracle.com/technetwork/java/javase/namechange-140185.html</a></li>\n</ul>\n\n<h3>Epilogue</h3>\n\n<p>Just drop the \"1.\" from versions printed by <code>javac -version</code> and <code>java -version</code> and you're good to go.</p>\n"}],"owner":{"account_id":1160,"reputation":9209,"user_id":1541,"accept_rate":78,"display_name":"Joe Schneider"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":308160,"favorite_count":0,"down_vote_count":1,"up_vote_count":209,"accepted_answer_id":250559,"answer_count":6,"score":208,"last_activity_date":1671846945,"creation_date":1225379409,"question_id":250517,"body_markdown":"I see many different Java terms floating around.  I need to install the JDK 1.6.  It was my understanding that Java 6 == Java 1.6.  However, when I install Java SE 6, I get a JVM that reports as version 11.0!  Who can solve the madness?","title":"Java SE 6 vs. JRE 1.6 vs. JDK 1.6 - What do these mean?","body":"<p>I see many different Java terms floating around.  I need to install the JDK 1.6.  It was my understanding that Java 6 == Java 1.6.  However, when I install Java SE 6, I get a JVM that reports as version 11.0!  Who can solve the madness?</p>\n"},{"tags":["java","algorithm","data-structures","stack","big-o"],"comments":[{"owner":{"account_id":239868,"reputation":2418,"user_id":509746,"accept_rate":90,"display_name":"Jetti"},"score":2,"creation_date":1313868434,"post_id":7134129,"comment_id":8553002,"body_markdown":"Is this homework? Do you need to use a stack?","body":"Is this homework? Do you need to use a stack?"},{"owner":{"account_id":306208,"reputation":19010,"user_id":616815,"accept_rate":100,"display_name":"Ken Wayne VanderLinde"},"score":9,"creation_date":1313868511,"post_id":7134129,"comment_id":8553011,"body_markdown":"Searching for min/max values isn&#39;t a normal stack operation.","body":"Searching for min/max values isn&#39;t a normal stack operation."},{"owner":{"account_id":796583,"reputation":551,"user_id":904017,"display_name":"Techkriti"},"score":1,"creation_date":1313868603,"post_id":7134129,"comment_id":8553026,"body_markdown":"@Jetti Yes, need a stack implementation","body":"@Jetti Yes, need a stack implementation"},{"owner":{"account_id":237126,"reputation":604212,"user_id":505088,"accept_rate":91,"display_name":"David Heffernan"},"score":0,"creation_date":1313868821,"post_id":7134129,"comment_id":8553055,"body_markdown":"What do you need beyond min and max?","body":"What do you need beyond min and max?"},{"owner":{"account_id":237126,"reputation":604212,"user_id":505088,"accept_rate":91,"display_name":"David Heffernan"},"score":0,"creation_date":1313869209,"post_id":7134129,"comment_id":8553114,"body_markdown":"Your question is all backwards. Your performance issue is not with the stack, but the algo for min/max tracking. Do you mean to know min/max after every push/pop?","body":"Your question is all backwards. Your performance issue is not with the stack, but the algo for min/max tracking. Do you mean to know min/max after every push/pop?"},{"owner":{"account_id":796583,"reputation":551,"user_id":904017,"display_name":"Techkriti"},"score":0,"creation_date":1313869543,"post_id":7134129,"comment_id":8553165,"body_markdown":"@David I mean to implement each function min/max and push/pop so that any function can be called in the main program anytime whenever required.","body":"@David I mean to implement each function min/max and push/pop so that any function can be called in the main program anytime whenever required."},{"owner":{"account_id":94218,"reputation":27823,"user_id":257356,"accept_rate":59,"display_name":"SyntaxT3rr0r"},"score":0,"creation_date":1313872422,"post_id":7134129,"comment_id":8553642,"body_markdown":"@Ken Wayne VanderLinde: not a normal stack operation so what?  This is an excellent interview/teaching question and it has +4 nice upvotes and a nice answer also has +4 nice upvotes.","body":"@Ken Wayne VanderLinde: not a normal stack operation so what?  This is an excellent interview/teaching question and it has +4 nice upvotes and a nice answer also has +4 nice upvotes."},{"owner":{"account_id":306208,"reputation":19010,"user_id":616815,"accept_rate":100,"display_name":"Ken Wayne VanderLinde"},"score":1,"creation_date":1313880461,"post_id":7134129,"comment_id":8554708,"body_markdown":"@SyntaxT3rr0r: I didn&#39;t mean to come off that way. I meant to ask whether a stack was really necessary (as the original question didn&#39;t really emphasize this).","body":"@SyntaxT3rr0r: I didn&#39;t mean to come off that way. I meant to ask whether a stack was really necessary (as the original question didn&#39;t really emphasize this)."},{"owner":{"account_id":237126,"reputation":604212,"user_id":505088,"accept_rate":91,"display_name":"David Heffernan"},"score":1,"creation_date":1313949420,"post_id":7134129,"comment_id":8562176,"body_markdown":"@Syntax template helpfully re-wrote the question. The original question was unclear and the early comments were appropriate at that time.","body":"@Syntax template helpfully re-wrote the question. The original question was unclear and the early comments were appropriate at that time."},{"owner":{"account_id":133649,"reputation":925,"user_id":335175,"accept_rate":94,"display_name":"Nemanja Vujacic"},"score":0,"creation_date":1355424282,"post_id":7134129,"comment_id":19101674,"body_markdown":"Good example and explanation with C# code could be found here: [Stack with GetMinimum O(1)](http://stackoverflow.com/questions/685060/design-a-stack-such-that-getminimum-should-be-o1)","body":"Good example and explanation with C# code could be found here: <a href=\"http://stackoverflow.com/questions/685060/design-a-stack-such-that-getminimum-should-be-o1\">Stack with GetMinimum O(1)</a>"}],"answers":[{"tags":[],"owner":{"account_id":235018,"reputation":364834,"user_id":501557,"accept_rate":90,"display_name":"templatetypedef"},"down_vote_count":0,"up_vote_count":122,"is_accepted":false,"score":122,"last_activity_date":1671846932,"creation_date":1313869018,"answer_id":7134189,"question_id":7134129,"body_markdown":"This is a classic data structures question.  The intuition behind the problem is as follows - the only way that the maximum and minimum can change is if you push a new value onto the stack or pop a new value off of the stack.  Given this, suppose that at each level in the stack you keep track of the maximum and minimum values at or below that point in the stack.  Then, when you push a new element onto the stack, you can easily (in O(1) time) compute the maximum and minimum value anywhere in the stack by comparing the new element you just pushed to the current maximum and minimum.  Similarly, when you pop off an element, you will expose the element in the stack one step below the top, which already has the maximum and minimum values in the rest of the stack stored alongside it.\r\n\r\nVisually, suppose that we have a stack and add the values 2, 7, 1, 8, 3, and 9, in that order.  We start by pushing 2, and so we push 2 onto our stack.  Since 2 is now the largest and smallest value in the stack as well, we record this:\r\n\r\n     2  (max 2, min 2)\r\n\r\nNow, let&#39;s push 7.  Since 7 is greater than 2 (the current max), we end up with this:\r\n\r\n     7  (max 7, min 2)\r\n     2  (max 2, min 2)\r\n\r\nNotice that right now we can read off the max and min of the stack by looking at the top of the stack and seeing that 7 is the max and 2 is the min.  If we now push 1, we get\r\n\r\n     1  (max 7, min 1)\r\n     7  (max 7, min 2)\r\n     2  (max 2, min 2)\r\n\r\nHere, we know that 1 is the minimum, since we can compare 1 to the cached min value stored atop the stack (2).  As an exercise, make sure you understand why after adding 8, 3, and 9, we get this:\r\n\r\n     9  (max 9, min 1)\r\n     3  (max 8, min 1)\r\n     8  (max 8, min 1)\r\n     1  (max 7, min 1)\r\n     7  (max 7, min 2)\r\n     2  (max 2, min 2)\r\n\r\nNow, if we want to query the max and min, we can do so in O(1) by just reading off the stored max and min atop the stack (9 and 1, respectively).\r\n\r\nNow, suppose that we pop off the top element.  This yields 9 and modifies the stack to be \r\n\r\n     3  (max 8, min 1)\r\n     8  (max 8, min 1)\r\n     1  (max 7, min 1)\r\n     7  (max 7, min 2)\r\n     2  (max 2, min 2)\r\n\r\nAnd now notice that the max of these elements is 8, exactly the correct answer!  If we then pushed 0, we&#39;d get this:\r\n\r\n     0  (max 8, min 0)\r\n     3  (max 8, min 1)\r\n     8  (max 8, min 1)\r\n     1  (max 7, min 1)\r\n     7  (max 7, min 2)\r\n     2  (max 2, min 2)\r\n\r\nAnd, as you can see, the max and min are computed correctly.\r\n\r\nOverall, this leads to an implementation of the stack that has O(1) push, pop, find-max, and find-min, which is as asymptotically as good as it gets.  I&#39;ll leave the implementation as an exercise. :-)  However, you may want to consider implementing the stack using one of the standard stack implementation techniques, such as using a [dynamic array][1] or [linked list][2] of objects, each of which holds the stack element, min, and max.  You could do this easily by leveraging off of `ArrayList` or `LinkedList`.  Alternatively, you could use the provided Java `Stack` class, though IIRC it has some overhead due to synchronization that might be unnecessary for this application.\r\n\r\nInterestingly, once you&#39;ve built a stack with these properties, you can use it as a building block to construct [a queue with the same properties][3] and time guarantees.  You can also use it in a more complex construction to build a double-ended queue with these properties as well.\r\n\r\n**EDIT:** If you&#39;re curious, I have C++ implementations of **[a min-stack][6]** and a the aforementioned **[min-queue][5]** on my personal site.  Hopefully this shows off what this might look like in practice!\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Dynamic_array\r\n  [2]: http://en.wikipedia.org/wiki/Linked_list\r\n  [3]: https://stackoverflow.com/questions/4802038/implement-a-queue-in-which-push-rear-pop-front-and-get-min-are-all-constan/4802260#4802260\r\n  [4]: http://en.wikipedia.org/wiki/Dynamic_array\r\n  [5]: http://keithschwarz.com/interesting/code/?dir=min-queue\r\n  [6]: http://www.keithschwarz.com/interesting/code/?dir=min-stack","title":"Stack with find-min/find-max more efficient than O(n)?","body":"<p>This is a classic data structures question.  The intuition behind the problem is as follows - the only way that the maximum and minimum can change is if you push a new value onto the stack or pop a new value off of the stack.  Given this, suppose that at each level in the stack you keep track of the maximum and minimum values at or below that point in the stack.  Then, when you push a new element onto the stack, you can easily (in O(1) time) compute the maximum and minimum value anywhere in the stack by comparing the new element you just pushed to the current maximum and minimum.  Similarly, when you pop off an element, you will expose the element in the stack one step below the top, which already has the maximum and minimum values in the rest of the stack stored alongside it.</p>\n<p>Visually, suppose that we have a stack and add the values 2, 7, 1, 8, 3, and 9, in that order.  We start by pushing 2, and so we push 2 onto our stack.  Since 2 is now the largest and smallest value in the stack as well, we record this:</p>\n<pre><code> 2  (max 2, min 2)\n</code></pre>\n<p>Now, let's push 7.  Since 7 is greater than 2 (the current max), we end up with this:</p>\n<pre><code> 7  (max 7, min 2)\n 2  (max 2, min 2)\n</code></pre>\n<p>Notice that right now we can read off the max and min of the stack by looking at the top of the stack and seeing that 7 is the max and 2 is the min.  If we now push 1, we get</p>\n<pre><code> 1  (max 7, min 1)\n 7  (max 7, min 2)\n 2  (max 2, min 2)\n</code></pre>\n<p>Here, we know that 1 is the minimum, since we can compare 1 to the cached min value stored atop the stack (2).  As an exercise, make sure you understand why after adding 8, 3, and 9, we get this:</p>\n<pre><code> 9  (max 9, min 1)\n 3  (max 8, min 1)\n 8  (max 8, min 1)\n 1  (max 7, min 1)\n 7  (max 7, min 2)\n 2  (max 2, min 2)\n</code></pre>\n<p>Now, if we want to query the max and min, we can do so in O(1) by just reading off the stored max and min atop the stack (9 and 1, respectively).</p>\n<p>Now, suppose that we pop off the top element.  This yields 9 and modifies the stack to be</p>\n<pre><code> 3  (max 8, min 1)\n 8  (max 8, min 1)\n 1  (max 7, min 1)\n 7  (max 7, min 2)\n 2  (max 2, min 2)\n</code></pre>\n<p>And now notice that the max of these elements is 8, exactly the correct answer!  If we then pushed 0, we'd get this:</p>\n<pre><code> 0  (max 8, min 0)\n 3  (max 8, min 1)\n 8  (max 8, min 1)\n 1  (max 7, min 1)\n 7  (max 7, min 2)\n 2  (max 2, min 2)\n</code></pre>\n<p>And, as you can see, the max and min are computed correctly.</p>\n<p>Overall, this leads to an implementation of the stack that has O(1) push, pop, find-max, and find-min, which is as asymptotically as good as it gets.  I'll leave the implementation as an exercise. :-)  However, you may want to consider implementing the stack using one of the standard stack implementation techniques, such as using a <a href=\"http://en.wikipedia.org/wiki/Dynamic_array\" rel=\"nofollow noreferrer\">dynamic array</a> or <a href=\"http://en.wikipedia.org/wiki/Linked_list\" rel=\"nofollow noreferrer\">linked list</a> of objects, each of which holds the stack element, min, and max.  You could do this easily by leveraging off of <code>ArrayList</code> or <code>LinkedList</code>.  Alternatively, you could use the provided Java <code>Stack</code> class, though IIRC it has some overhead due to synchronization that might be unnecessary for this application.</p>\n<p>Interestingly, once you've built a stack with these properties, you can use it as a building block to construct <a href=\"https://stackoverflow.com/questions/4802038/implement-a-queue-in-which-push-rear-pop-front-and-get-min-are-all-constan/4802260#4802260\">a queue with the same properties</a> and time guarantees.  You can also use it in a more complex construction to build a double-ended queue with these properties as well.</p>\n<p><strong>EDIT:</strong> If you're curious, I have C++ implementations of <strong><a href=\"http://www.keithschwarz.com/interesting/code/?dir=min-stack\" rel=\"nofollow noreferrer\">a min-stack</a></strong> and a the aforementioned <strong><a href=\"http://keithschwarz.com/interesting/code/?dir=min-queue\" rel=\"nofollow noreferrer\">min-queue</a></strong> on my personal site.  Hopefully this shows off what this might look like in practice!</p>\n"},{"tags":[],"owner":{"account_id":114674,"reputation":4892,"user_id":301444,"accept_rate":78,"display_name":"Vasu"},"down_vote_count":0,"up_vote_count":34,"is_accepted":false,"score":34,"last_activity_date":1368197369,"creation_date":1368197369,"answer_id":16485020,"question_id":7134129,"body_markdown":"Although the [answer][1] is right, but we can do better. If the stack has lot of elements, then we are wasting a lot of space. However, we can save this useless space as follow:\r\n\r\nInstead of saving min(or max) value with each element, we can use two stacks. Because change in the minimum(or maximum) value will not be so frequent, we push the min(or max) value to its respective stack only when the new value is `&lt;=`(or `&gt;=`) to the current min(or max) value.\r\n\r\nHere is the implementation in `Java`:\r\n\r\n    public class StackWithMinMax extends Stack&lt;Integer&gt; {\r\n    \r\n    \tprivate Stack&lt;Integer&gt; minStack;\r\n    \tprivate Stack&lt;Integer&gt; maxStack;\r\n    \r\n    \tpublic StackWithMinMax () {\r\n    \t\tminStack = new Stack&lt;Integer&gt;();\t\r\n    \t\tmaxStack = new Stack&lt;Integer&gt;();\t\r\n    \t}\r\n    \r\n    \tpublic void push(int value){\r\n    \t\tif (value &lt;= min()) { // Note the &#39;=&#39; sign here\r\n    \t\t\tminStack.push(value);\r\n    \t\t}\r\n    \r\n    \t\tif (value &gt;= max()) {\r\n    \t\t\tmaxStack.push(value);\r\n    \t\t}\r\n    \r\n    \t\tsuper.push(value);\r\n    \t}\r\n    \r\n    \tpublic Integer pop() {\r\n    \t\tint value = super.pop();\r\n    \r\n    \t\tif (value == min()) {\r\n    \t\t\tminStack.pop();\t\t\t\r\n    \t\t}\r\n    \r\n    \t\tif (value == max()) {\r\n    \t\t\tmaxStack.pop();\t\t\t\r\n    \t\t}\r\n    \r\n    \t\treturn value;\r\n    \t}\r\n    \r\n    \tpublic int min() {\r\n    \t\tif (minStack.isEmpty()) {\r\n    \t\t\treturn Integer.MAX_VALUE;\r\n    \t\t} else {\r\n    \t\t\treturn minStack.peek();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic int max() {\r\n    \t\tif (maxStack.isEmpty()) {\r\n    \t\t\treturn Integer.MIN_VALUE;\r\n    \t\t} else {\r\n    \t\t\treturn maxStack.peek();\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n\r\nNote that using this approach, we would have very few elements in `minStack` &amp; `maxStack`, thus saving space. e.g.\r\n\r\n    Stack : MinStack : MaxStack\r\n    \r\n    7         7         7\r\n    4         4         7\r\n    5         1         8 (TOP)\r\n    6         1 (TOP)         \r\n    7\r\n    8                 \r\n    1                  \r\n    1                  \r\n    7\r\n    2\r\n    4\r\n    2 (TOP)     \r\n\r\n  [1]: https://stackoverflow.com/a/7134189/301444","title":"Stack with find-min/find-max more efficient than O(n)?","body":"<p>Although the <a href=\"https://stackoverflow.com/a/7134189/301444\">answer</a> is right, but we can do better. If the stack has lot of elements, then we are wasting a lot of space. However, we can save this useless space as follow:</p>\n\n<p>Instead of saving min(or max) value with each element, we can use two stacks. Because change in the minimum(or maximum) value will not be so frequent, we push the min(or max) value to its respective stack only when the new value is <code>&lt;=</code>(or <code>&gt;=</code>) to the current min(or max) value.</p>\n\n<p>Here is the implementation in <code>Java</code>:</p>\n\n<pre><code>public class StackWithMinMax extends Stack&lt;Integer&gt; {\n\n    private Stack&lt;Integer&gt; minStack;\n    private Stack&lt;Integer&gt; maxStack;\n\n    public StackWithMinMax () {\n        minStack = new Stack&lt;Integer&gt;();    \n        maxStack = new Stack&lt;Integer&gt;();    \n    }\n\n    public void push(int value){\n        if (value &lt;= min()) { // Note the '=' sign here\n            minStack.push(value);\n        }\n\n        if (value &gt;= max()) {\n            maxStack.push(value);\n        }\n\n        super.push(value);\n    }\n\n    public Integer pop() {\n        int value = super.pop();\n\n        if (value == min()) {\n            minStack.pop();         \n        }\n\n        if (value == max()) {\n            maxStack.pop();         \n        }\n\n        return value;\n    }\n\n    public int min() {\n        if (minStack.isEmpty()) {\n            return Integer.MAX_VALUE;\n        } else {\n            return minStack.peek();\n        }\n    }\n\n    public int max() {\n        if (maxStack.isEmpty()) {\n            return Integer.MIN_VALUE;\n        } else {\n            return maxStack.peek();\n        }\n    }\n}\n</code></pre>\n\n<p>Note that using this approach, we would have very few elements in <code>minStack</code> &amp; <code>maxStack</code>, thus saving space. e.g.</p>\n\n<pre><code>Stack : MinStack : MaxStack\n\n7         7         7\n4         4         7\n5         1         8 (TOP)\n6         1 (TOP)         \n7\n8                 \n1                  \n1                  \n7\n2\n4\n2 (TOP)     \n</code></pre>\n"},{"tags":[],"owner":{"account_id":716676,"reputation":1474,"user_id":644011,"display_name":"Sanjay Kumar"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1442413475,"creation_date":1442413475,"answer_id":32611396,"question_id":7134129,"body_markdown":"May be too late to reply but just for the sake of record. Here is the java code.\r\n\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class MinStack {\r\n    \tList&lt;Node&gt; items;\r\n    \r\n    \tpublic void push(int num) {\r\n    \t\tif (items == null) {\r\n    \t\t\titems = new ArrayList&lt;Node&gt;();\r\n    \t\t}\r\n    \t\tNode node = new Node(num);\r\n    \t\tif (items.size() &gt; 0) {\r\n    \t\t\tnode.min = Math.min(items.get(items.size() - 1).min, num);\r\n    \t\t\tnode.max = Math.max(items.get(items.size() - 1).max, num);\r\n    \r\n    \t\t} else {\r\n    \t\t\tnode.min = num;\r\n    \t\t\tnode.max = num;\r\n    \t\t}\r\n    \t\titems.add(node);\r\n    \t\tprintStack();\r\n    \t}\r\n    \r\n    \tpublic Node pop() {\r\n    \t\tNode popThis = null;\r\n    \t\tif (items != null &amp;&amp; items.size() &gt; 0) {\r\n    \t\t\tpopThis = this.items.get(items.size() - 1);\r\n    \t\t\titems.remove(items.size() - 1);\t\t\t\r\n    \t\t}\r\n    \t\tprintStack();\r\n    \t\treturn popThis;\r\n    \t}\r\n    \r\n    \tpublic int getMin() {\r\n    \t\tif (items != null &amp;&amp; items.size() &gt; 0) {\r\n    \t\t\tint min = this.items.get(items.size() - 1).min;\r\n    \t\t\tSystem.out.println(&quot;Minimum Element &gt; &quot; + min);\r\n    \t\t\treturn min;\r\n    \t\t}\r\n    \t\treturn -1;\r\n    \t}\r\n    \t\r\n    \tpublic int getMax() {\r\n    \t\tif (items != null &amp;&amp; items.size() &gt; 0) {\r\n    \t\t\tint max = this.items.get(items.size() - 1).max;\r\n    \t\t\tSystem.out.println(&quot;Maximum Element &gt; &quot; + max);\r\n    \t\t\treturn max;\r\n    \t\t}\r\n    \t\treturn -1;\r\n    \t}\r\n    \r\n    \tpublic void printStack() {\r\n    \t\tint i = 0;\r\n    \t\tfor (Node n : items) {\r\n    \t\t\tSystem.out.print(n.data + &quot; &gt; &quot;);\r\n    \t\t\tif (i == items.size() - 1) {\r\n    \t\t\t\tSystem.out.print(&quot; | Min = &quot; + n.min + &quot; |&quot;);\r\n    \t\t\t\tSystem.out.print(&quot; | Max = &quot; + n.max + &quot; |&quot;);\r\n    \r\n    \t\t\t}\r\n    \t\t\ti++;\r\n    \t\t}\r\n    \t\tSystem.out.println();\r\n    \t}\r\n    \r\n    \tpublic static void main(String args[]) {\r\n    \t\tMinStack stack = new MinStack();\r\n    \t\tstack.push(10);\r\n    \t\t\r\n    \t\tstack.push(13);\r\n    \t\tstack.push(19);\r\n    \t\tstack.push(3);\r\n    \t\tstack.push(2);\r\n    \t\tstack.push(2);\r\n    \t\tstack.printStack();\r\n    \t\tstack.pop();\r\n    \t\t//stack.getMin();\r\n    \t\tstack.printStack();\r\n    \r\n    \t}\r\n    }\r\n\r\nStack Class:\r\n\r\n    class Node {\r\n        \r\n        \tint data;\r\n        \tint min;\r\n        \tint max;\r\n        \r\n        \tpublic Node(int data) {\r\n        \t\tsuper();\r\n        \t\tthis.data = data;\r\n        \t}\r\n        \r\n        \tpublic Node() {\r\n        \t\tsuper();\r\n        \t}\r\n        }\r\n","title":"Stack with find-min/find-max more efficient than O(n)?","body":"<p>May be too late to reply but just for the sake of record. Here is the java code.</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\npublic class MinStack {\n    List&lt;Node&gt; items;\n\n    public void push(int num) {\n        if (items == null) {\n            items = new ArrayList&lt;Node&gt;();\n        }\n        Node node = new Node(num);\n        if (items.size() &gt; 0) {\n            node.min = Math.min(items.get(items.size() - 1).min, num);\n            node.max = Math.max(items.get(items.size() - 1).max, num);\n\n        } else {\n            node.min = num;\n            node.max = num;\n        }\n        items.add(node);\n        printStack();\n    }\n\n    public Node pop() {\n        Node popThis = null;\n        if (items != null &amp;&amp; items.size() &gt; 0) {\n            popThis = this.items.get(items.size() - 1);\n            items.remove(items.size() - 1);         \n        }\n        printStack();\n        return popThis;\n    }\n\n    public int getMin() {\n        if (items != null &amp;&amp; items.size() &gt; 0) {\n            int min = this.items.get(items.size() - 1).min;\n            System.out.println(\"Minimum Element &gt; \" + min);\n            return min;\n        }\n        return -1;\n    }\n\n    public int getMax() {\n        if (items != null &amp;&amp; items.size() &gt; 0) {\n            int max = this.items.get(items.size() - 1).max;\n            System.out.println(\"Maximum Element &gt; \" + max);\n            return max;\n        }\n        return -1;\n    }\n\n    public void printStack() {\n        int i = 0;\n        for (Node n : items) {\n            System.out.print(n.data + \" &gt; \");\n            if (i == items.size() - 1) {\n                System.out.print(\" | Min = \" + n.min + \" |\");\n                System.out.print(\" | Max = \" + n.max + \" |\");\n\n            }\n            i++;\n        }\n        System.out.println();\n    }\n\n    public static void main(String args[]) {\n        MinStack stack = new MinStack();\n        stack.push(10);\n\n        stack.push(13);\n        stack.push(19);\n        stack.push(3);\n        stack.push(2);\n        stack.push(2);\n        stack.printStack();\n        stack.pop();\n        //stack.getMin();\n        stack.printStack();\n\n    }\n}\n</code></pre>\n\n<p>Stack Class:</p>\n\n<pre><code>class Node {\n\n        int data;\n        int min;\n        int max;\n\n        public Node(int data) {\n            super();\n            this.data = data;\n        }\n\n        public Node() {\n            super();\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6389039,"reputation":495,"user_id":4955885,"accept_rate":86,"display_name":"Nikita Gupta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1488682142,"creation_date":1488682142,"answer_id":42603911,"question_id":7134129,"body_markdown":"Using Linkedlist:\r\n\r\n    \r\n    public class MaxMinStack {\r\n    \tMaxMinLLNode headMin = null;\r\n    \tMaxMinLLNode headMax = null;\r\n    \tMaxMinLLNode tailMin = null;\r\n    \tMaxMinLLNode tailMax = null;\r\n    \r\n    \tpublic void push(int data) {\r\n    \t\tMaxMinLLNode node = new MaxMinLLNode(data, null);\r\n    \t\tif (headMin == null) {\r\n    \t\t\theadMin = node;\r\n    \t\t\ttailMin = node;\r\n    \t\t} else {\r\n    \t\t\tif (data &lt; headMin.data) {\r\n    \t\t\t\ttailMin = headMin;\r\n    \t\t\t\theadMin = node;\r\n    \t\t\t\tnode.nextNodeReference = tailMin;\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\tif (headMax == null) {\r\n    \t\t\theadMax = node;\r\n    \t\t\ttailMax = node;\r\n    \t\t} else {\r\n    \t\t\tif (data &gt; headMax.data) {\r\n    \t\t\t\ttailMax = headMax;\r\n    \t\t\t\theadMax = node;\r\n    \t\t\t\tnode.nextNodeReference = tailMax;\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    \tpublic void pop() {\r\n    \t\tSystem.out.println(&quot;Max Element:&quot; + &quot; &quot; + String.valueOf(headMax.data));\r\n    \t\tSystem.out.println(&quot;Min Element:&quot; + &quot; &quot; + String.valueOf(headMin.data));\r\n    \t}\r\n    \r\n    \tpublic void traverse() {\r\n    \t\tMaxMinLLNode ptrMin = headMin;\r\n    \t\tMaxMinLLNode ptrMax = headMax;\r\n    \t\tSystem.out.println(&quot;Min&quot;);\r\n    \t\twhile (ptrMin != null) {\r\n    \t\t\tSystem.out.println(ptrMin.data);\r\n    \t\t\tptrMin = ptrMin.nextNodeReference;\r\n    \t\t}\r\n    \r\n    \t\tSystem.out.println(&quot;Max&quot;);\r\n    \t\twhile (ptrMax != null) {\r\n    \t\t\tSystem.out.println(ptrMax.data);\r\n    \t\t\tptrMax = ptrMax.nextNodeReference;\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tMaxMinStack m = new MaxMinStack();\r\n    \t\t m.push(7);\r\n    \t\t m.push(4);\r\n    \t\t m.push(5);\r\n    \t\t m.push(6);\r\n    \t\t m.push(7);\r\n    \t\t m.push(8);\r\n    \t\t m.push(1);\r\n    \t\t m.push(1);\r\n    \t\t m.push(7);\r\n    \t\t m.push(2);\r\n    \t\t m.push(4);\r\n    \t\t m.push(2);\r\n    \t\t m.traverse();\r\n    \t\t m.pop();\r\n    \t}\r\n    \r\n    }\r\n    \r\n    class MaxMinLLNode {\r\n    \tint data;\r\n    \tMaxMinLLNode nextNodeReference;\r\n    \r\n    \tMaxMinLLNode(int data, MaxMinLLNode node) {\r\n    \t\tthis.data = data;\r\n    \t\tthis.nextNodeReference = node;\r\n    \t}\r\n    }\r\n\r\n","title":"Stack with find-min/find-max more efficient than O(n)?","body":"<p>Using Linkedlist:</p>\n\n<pre><code>public class MaxMinStack {\n    MaxMinLLNode headMin = null;\n    MaxMinLLNode headMax = null;\n    MaxMinLLNode tailMin = null;\n    MaxMinLLNode tailMax = null;\n\n    public void push(int data) {\n        MaxMinLLNode node = new MaxMinLLNode(data, null);\n        if (headMin == null) {\n            headMin = node;\n            tailMin = node;\n        } else {\n            if (data &lt; headMin.data) {\n                tailMin = headMin;\n                headMin = node;\n                node.nextNodeReference = tailMin;\n            }\n        }\n\n        if (headMax == null) {\n            headMax = node;\n            tailMax = node;\n        } else {\n            if (data &gt; headMax.data) {\n                tailMax = headMax;\n                headMax = node;\n                node.nextNodeReference = tailMax;\n            }\n        }\n\n    }\n\n    public void pop() {\n        System.out.println(\"Max Element:\" + \" \" + String.valueOf(headMax.data));\n        System.out.println(\"Min Element:\" + \" \" + String.valueOf(headMin.data));\n    }\n\n    public void traverse() {\n        MaxMinLLNode ptrMin = headMin;\n        MaxMinLLNode ptrMax = headMax;\n        System.out.println(\"Min\");\n        while (ptrMin != null) {\n            System.out.println(ptrMin.data);\n            ptrMin = ptrMin.nextNodeReference;\n        }\n\n        System.out.println(\"Max\");\n        while (ptrMax != null) {\n            System.out.println(ptrMax.data);\n            ptrMax = ptrMax.nextNodeReference;\n        }\n\n    }\n\n    public static void main(String[] args) {\n        MaxMinStack m = new MaxMinStack();\n         m.push(7);\n         m.push(4);\n         m.push(5);\n         m.push(6);\n         m.push(7);\n         m.push(8);\n         m.push(1);\n         m.push(1);\n         m.push(7);\n         m.push(2);\n         m.push(4);\n         m.push(2);\n         m.traverse();\n         m.pop();\n    }\n\n}\n\nclass MaxMinLLNode {\n    int data;\n    MaxMinLLNode nextNodeReference;\n\n    MaxMinLLNode(int data, MaxMinLLNode node) {\n        this.data = data;\n        this.nextNodeReference = node;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":796583,"reputation":551,"user_id":904017,"display_name":"Techkriti"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42350,"favorite_count":0,"down_vote_count":0,"up_vote_count":55,"answer_count":4,"score":55,"last_activity_date":1671846932,"creation_date":1313868261,"question_id":7134129,"body_markdown":"I am interested in creating a Java data structure similar to a stack that supports the following operations as efficiently as possible:\r\n\r\n* Push, which adds a new element atop the stack,\r\n* Pop, which removes the top element of the stack,\r\n* Find-Max, which returns (but does not remove) the largest element of the stack, and\r\n* Find-Min, which returns (but does not remove) the smallest element of the stack, and\r\n\r\nWhat would be the fastest implementation of this data structure?  How might I go about writing it in Java?","title":"Stack with find-min/find-max more efficient than O(n)?","body":"<p>I am interested in creating a Java data structure similar to a stack that supports the following operations as efficiently as possible:</p>\n\n<ul>\n<li>Push, which adds a new element atop the stack,</li>\n<li>Pop, which removes the top element of the stack,</li>\n<li>Find-Max, which returns (but does not remove) the largest element of the stack, and</li>\n<li>Find-Min, which returns (but does not remove) the smallest element of the stack, and</li>\n</ul>\n\n<p>What would be the fastest implementation of this data structure?  How might I go about writing it in Java?</p>\n"},{"tags":["java","sql","database","postgresql","jdbc"],"comments":[{"owner":{"account_id":6897470,"reputation":9957,"user_id":5298879,"display_name":"Zegarek"},"score":0,"creation_date":1671786946,"post_id":74897757,"comment_id":132175715,"body_markdown":"You can take a look at [`pg_locks`](https://www.postgresql.org/docs/current/view-pg-locks.html) and fail if there&#39;s a lock that satisfies your criteria.","body":"You can take a look at <a href=\"https://www.postgresql.org/docs/current/view-pg-locks.html\" rel=\"nofollow noreferrer\"><code>pg_locks</code></a> and fail if there&#39;s a lock that satisfies your criteria."},{"owner":{"account_id":22807677,"reputation":414,"user_id":16959486,"display_name":"Teddy Tsai"},"score":0,"creation_date":1671787140,"post_id":74897757,"comment_id":132175773,"body_markdown":"I have thought about that but wouldn&#39;t there be a chance (although slim) of the table  being locked between processing the pg_locks select result and performing the select statement?","body":"I have thought about that but wouldn&#39;t there be a chance (although slim) of the table  being locked between processing the pg_locks select result and performing the select statement?"},{"owner":{"account_id":6897470,"reputation":9957,"user_id":5298879,"display_name":"Zegarek"},"score":2,"creation_date":1671789860,"post_id":74897757,"comment_id":132176401,"body_markdown":"You&#39;re right. How about `LOCK TABLE SOME_TABLE IN ACCESS EXCLUSIVE MODE`[**`NOWAIT;`**](https://www.postgresql.org/docs/8.0/sql-lock.html)? The `NOWAIT` support reaches back all the way to 8.0. I&#39;m also wondering what your use case is - why don&#39;t you want to read the snapshot made available to the `select`? Or maybe you&#39;re trying to emulate some kind of [serializable](https://www.postgresql.org/docs/9.2/transaction-iso.html#XACT-SERIALIZABLE) behaviour?","body":"You&#39;re right. How about <code>LOCK TABLE SOME_TABLE IN ACCESS EXCLUSIVE MODE</code><a href=\"https://www.postgresql.org/docs/8.0/sql-lock.html\" rel=\"nofollow noreferrer\"><b><code>NOWAIT;</code></b></a>? The <code>NOWAIT</code> support reaches back all the way to 8.0. I&#39;m also wondering what your use case is - why don&#39;t you want to read the snapshot made available to the <code>select</code>? Or maybe you&#39;re trying to emulate some kind of <a href=\"https://www.postgresql.org/docs/9.2/transaction-iso.html#XACT-SERIALIZABLE\" rel=\"nofollow noreferrer\">serializable</a> behaviour?"},{"owner":{"account_id":1906465,"reputation":39489,"user_id":1721239,"display_name":"jjanes"},"score":0,"creation_date":1671812749,"post_id":74897757,"comment_id":132182457,"body_markdown":"Lord knows what might be possible in an ancient but unspecified version.","body":"Lord knows what might be possible in an ancient but unspecified version."},{"owner":{"account_id":6897470,"reputation":9957,"user_id":5298879,"display_name":"Zegarek"},"score":0,"creation_date":1671813741,"post_id":74897757,"comment_id":132182717,"body_markdown":"@jjanes Presence of [`pg_sleep()` suggests at least 8.2](https://www.postgresql.org/docs/release/8.2.0/#:~:text=server%2Dside%20sleep%20function), lack of [9.3&#39;s `lock_timeout`](https://www.postgresql.org/docs/release/9.3.0/#:~:text=configuration%20variable%20lock_timeout) suggests 9.2 tops. I agree version should be specified, and an update is long overdue.","body":"@jjanes Presence of <a href=\"https://www.postgresql.org/docs/release/8.2.0/#:~:text=server%2Dside%20sleep%20function\" rel=\"nofollow noreferrer\"><code>pg_sleep()</code> suggests at least 8.2</a>, lack of <a href=\"https://www.postgresql.org/docs/release/9.3.0/#:~:text=configuration%20variable%20lock_timeout\" rel=\"nofollow noreferrer\">9.3&#39;s <code>lock_timeout</code></a> suggests 9.2 tops. I agree version should be specified, and an update is long overdue."},{"owner":{"account_id":22807677,"reputation":414,"user_id":16959486,"display_name":"Teddy Tsai"},"score":0,"creation_date":1671843872,"post_id":74897757,"comment_id":132188220,"body_markdown":"@jjanes Yeah sorry it&#39;s GaussDB, not actaully postgres, it&#39;s developed based on Postgres (basically it&#39;s postgres), so I don&#39;t know which version of Postgres was used to develop the version I&#39;m using, if I do Select version(); it gives me the GaussDB version which is basically useless. I would have specified the version otherwise.","body":"@jjanes Yeah sorry it&#39;s GaussDB, not actaully postgres, it&#39;s developed based on Postgres (basically it&#39;s postgres), so I don&#39;t know which version of Postgres was used to develop the version I&#39;m using, if I do Select version(); it gives me the GaussDB version which is basically useless. I would have specified the version otherwise."},{"owner":{"account_id":22807677,"reputation":414,"user_id":16959486,"display_name":"Teddy Tsai"},"score":0,"creation_date":1671844591,"post_id":74897757,"comment_id":132188280,"body_markdown":"@Zegarek I have a table that&#39;s refreshed every xx hours by a service and have a data cleaning job reading from it and caches it with its own interval, I can&#39;t have it read it while the table is being updated or the data would be bad. Problem is that the update cache part from the job also has its own timeout which  only considers the reading time, so if it has to wait for the lock it would most liekly time out, and adjusting time out has its own problems, so I&#39;ve decided to implement my own retry mechanism in case the table is being updated.","body":"@Zegarek I have a table that&#39;s refreshed every xx hours by a service and have a data cleaning job reading from it and caches it with its own interval, I can&#39;t have it read it while the table is being updated or the data would be bad. Problem is that the update cache part from the job also has its own timeout which  only considers the reading time, so if it has to wait for the lock it would most liekly time out, and adjusting time out has its own problems, so I&#39;ve decided to implement my own retry mechanism in case the table is being updated."}],"answers":[{"tags":[],"owner":{"account_id":6897470,"reputation":9957,"user_id":5298879,"display_name":"Zegarek"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671814360,"creation_date":1671814360,"answer_id":74902112,"question_id":74897757,"body_markdown":"As suggested in [the comment][1] earlier: it sounds like it&#39;s exactly what [`NOWAIT`][2] is for:\r\n\r\n&gt; ***NOWAIT***\r\nSpecifies that LOCK TABLE should not wait for any conflicting locks to be released: if the specified lock(s) cannot be acquired immediately without waiting, the transaction is aborted.\r\n\r\nSo you should be able to replace this:\r\n```lang-sql\r\nLOCK TABLE SOME_TABLE IN ACCESS EXCLUSIVE MODE;\r\n```\r\nWith this:\r\n```lang-sql\r\nLOCK TABLE SOME_TABLE IN ACCESS EXCLUSIVE MODE NOWAIT;\r\n```\r\nWithout the need for `pg_sleep()` and it will fail if the lock isn&#39;t available immediately.\r\n\r\nGuessing from the fact that you&#39;re already using [8.2&#39;s `pg_sleep()`][3] but don&#39;t yet have the [9.3&#39;s `lock_timeout`][4], your version should be covered by [`NOWAIT` support starting with 8.0][5].\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/74897757/fail-select-query-if-table-is-locked-in-postgresql?noredirect=1#comment132176401_74897757\r\n  [2]: https://www.postgresql.org/docs/8.0/sql-lock.html\r\n  [3]: https://www.postgresql.org/docs/release/8.2.0/#:~:text=server%2Dside%20sleep%20function\r\n  [4]: https://www.postgresql.org/docs/release/9.3.0/#:~:text=configuration%20variable%20lock_timeout\r\n  [5]: https://www.postgresql.org/docs/release/8.0.0/#:~:text=Add%20NOWAIT%20option%20to%20LOCK","title":"Fail SELECT Query if table is locked in PostgreSQL","body":"<p>As suggested in <a href=\"https://stackoverflow.com/questions/74897757/fail-select-query-if-table-is-locked-in-postgresql?noredirect=1#comment132176401_74897757\">the comment</a> earlier: it sounds like it's exactly what <a href=\"https://www.postgresql.org/docs/8.0/sql-lock.html\" rel=\"nofollow noreferrer\"><code>NOWAIT</code></a> is for:</p>\n<blockquote>\n<p><em><strong>NOWAIT</strong></em>\nSpecifies that LOCK TABLE should not wait for any conflicting locks to be released: if the specified lock(s) cannot be acquired immediately without waiting, the transaction is aborted.</p>\n</blockquote>\n<p>So you should be able to replace this:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>LOCK TABLE SOME_TABLE IN ACCESS EXCLUSIVE MODE;\n</code></pre>\n<p>With this:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>LOCK TABLE SOME_TABLE IN ACCESS EXCLUSIVE MODE NOWAIT;\n</code></pre>\n<p>Without the need for <code>pg_sleep()</code> and it will fail if the lock isn't available immediately.</p>\n<p>Guessing from the fact that you're already using <a href=\"https://www.postgresql.org/docs/release/8.2.0/#:%7E:text=server%2Dside%20sleep%20function\" rel=\"nofollow noreferrer\">8.2's <code>pg_sleep()</code></a> but don't yet have the <a href=\"https://www.postgresql.org/docs/release/9.3.0/#:%7E:text=configuration%20variable%20lock_timeout\" rel=\"nofollow noreferrer\">9.3's <code>lock_timeout</code></a>, your version should be covered by <a href=\"https://www.postgresql.org/docs/release/8.0.0/#:%7E:text=Add%20NOWAIT%20option%20to%20LOCK\" rel=\"nofollow noreferrer\"><code>NOWAIT</code> support starting with 8.0</a>.</p>\n"}],"owner":{"account_id":22807677,"reputation":414,"user_id":16959486,"display_name":"Teddy Tsai"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":778,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":74902112,"answer_count":1,"score":3,"last_activity_date":1671845608,"creation_date":1671785270,"question_id":74897757,"body_markdown":"Is there a way to fail a select query if a table is locked for access instead of waiting for the lock to be released?\r\n\r\nI would prefer resolving it with SQL but doing it at JDBC level in the code is also OK.\r\n\r\nI cannot use LOCK_TIMEOUT because Postgres version is too old.\r\n\r\nbasically I would like this \r\n```\r\nSELECT * \r\nFROM SOME_TABLE\r\n```\r\nto fail immediately instead of waiting for this\r\n\r\n```\r\nBEGIN;\r\nLOCK TABLE SOME_TABLE IN ACCESS EXCLUSIVE MODE;\r\nSELECT pg_sleep(10);\r\nCOMMIT TRANSACTION;\r\n```\r\n\r\nEDIT: Version is unknown because the DBMS I&#39;m using is actually GaussDB, PostghreSQL, but it basically behaves like Postgres since it&#39;s developed based on Postgres. So I don&#39;t know which version of Postgres my version corresponds to. SELECT VERSION() will give me Gauss version instead of Postgre version.","title":"Fail SELECT Query if table is locked in PostgreSQL","body":"<p>Is there a way to fail a select query if a table is locked for access instead of waiting for the lock to be released?</p>\n<p>I would prefer resolving it with SQL but doing it at JDBC level in the code is also OK.</p>\n<p>I cannot use LOCK_TIMEOUT because Postgres version is too old.</p>\n<p>basically I would like this</p>\n<pre><code>SELECT * \nFROM SOME_TABLE\n</code></pre>\n<p>to fail immediately instead of waiting for this</p>\n<pre><code>BEGIN;\nLOCK TABLE SOME_TABLE IN ACCESS EXCLUSIVE MODE;\nSELECT pg_sleep(10);\nCOMMIT TRANSACTION;\n</code></pre>\n<p>EDIT: Version is unknown because the DBMS I'm using is actually GaussDB, PostghreSQL, but it basically behaves like Postgres since it's developed based on Postgres. So I don't know which version of Postgres my version corresponds to. SELECT VERSION() will give me Gauss version instead of Postgre version.</p>\n"},{"tags":["java","regex","regex-lookarounds"],"answers":[{"tags":[],"owner":{"account_id":4739783,"reputation":612575,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671728312,"creation_date":1671728312,"answer_id":74891625,"question_id":74891555,"body_markdown":"You can use\r\n```none\r\n(\\G(?!^)|=)(.*?)\\bold\\b\r\n```\r\nAnd replace with `$1$2new`, see the [regex demo][1].\r\n\r\n*Details*:\r\n\r\n - `(\\G(?!^)|=)` - Group 1 (`$1`): either the end of the previous successful match or `=`\r\n - `(.*?)` - Group 2 (`$2`): any zero or more chars other than line break chars, as few as possible\r\n - `\\bold\\b` - a whole word `old`.\r\n\r\n  [1]: https://regex101.com/r/bO67qs/2","title":"Regexp multiple match in a part of a string after a specific value","body":"<p>You can use</p>\n<pre class=\"lang-none prettyprint-override\"><code>(\\G(?!^)|=)(.*?)\\bold\\b\n</code></pre>\n<p>And replace with <code>$1$2new</code>, see the <a href=\"https://regex101.com/r/bO67qs/2\" rel=\"nofollow noreferrer\">regex demo</a>.</p>\n<p><em>Details</em>:</p>\n<ul>\n<li><code>(\\G(?!^)|=)</code> - Group 1 (<code>$1</code>): either the end of the previous successful match or <code>=</code></li>\n<li><code>(.*?)</code> - Group 2 (<code>$2</code>): any zero or more chars other than line break chars, as few as possible</li>\n<li><code>\\bold\\b</code> - a whole word <code>old</code>.</li>\n</ul>\n"}],"owner":{"account_id":6377624,"reputation":11,"user_id":8357534,"display_name":"Alex"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1671845550,"creation_date":1671727981,"question_id":74891555,"body_markdown":"I need to replace some values in the properties files without touching the keys, so for the example input string, I need to replace &#39;old&#39; with &#39;new&#39; only in the substring after the &#39;=&#39; sign. \r\n\r\n&gt;Input:\r\nmessage.document.**old**.text=This **old **document is very **old **and will stay **old **forever\r\n\r\n&gt;Output\r\nmessage.document.**old**.text=This **new **document is very **new **and will stay **new **forever\r\n\r\n\r\n\r\n\r\nPositive lookbehind (?&lt;=\\=).*old gives a single match &quot;This old document is very old and will stay old&quot; whilst the desired result is three matches &#39;old old old&#39; just like the primitive expression &#39;old&#39; would return if the original string is just &#39;This old document is very old and will stay old forever&#39; without a key","title":"Regexp multiple match in a part of a string after a specific value","body":"<p>I need to replace some values in the properties files without touching the keys, so for the example input string, I need to replace 'old' with 'new' only in the substring after the '=' sign.</p>\n<blockquote>\n<p>Input:\nmessage.document.<strong>old</strong>.text=This **old **document is very **old **and will stay **old **forever</p>\n</blockquote>\n<blockquote>\n<p>Output\nmessage.document.<strong>old</strong>.text=This **new **document is very **new **and will stay **new **forever</p>\n</blockquote>\n<p>Positive lookbehind (?&lt;==).*old gives a single match &quot;This old document is very old and will stay old&quot; whilst the desired result is three matches 'old old old' just like the primitive expression 'old' would return if the original string is just 'This old document is very old and will stay old forever' without a key</p>\n"},{"tags":["java","mysql","exception","try-catch"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1671835679,"post_id":74904532,"comment_id":132187207,"body_markdown":"You need to call `resultSet.next()`.","body":"You need to call <code>resultSet.next()</code>."},{"owner":{"account_id":18655,"reputation":4922,"user_id":42962,"accept_rate":71,"display_name":"hooknc"},"score":0,"creation_date":1671835690,"post_id":74904532,"comment_id":132187210,"body_markdown":"While this doesn&#39;t answer your question, I would urge you to take a peek at [Java Bean Validation](https://www.baeldung.com/javax-validation).","body":"While this doesn&#39;t answer your question, I would urge you to take a peek at <a href=\"https://www.baeldung.com/javax-validation\" rel=\"nofollow noreferrer\">Java Bean Validation</a>."},{"owner":{"account_id":26581595,"reputation":11,"user_id":20206157,"display_name":"Adryan Reis"},"score":1,"creation_date":1671836436,"post_id":74904532,"comment_id":132187330,"body_markdown":"it was the result set, i did resultSet.next() &amp;&amp; ..., I&#39;ll take a look at java bean validation, thank you guys","body":"it was the result set, i did resultSet.next() &amp;&amp; ..., I&#39;ll take a look at java bean validation, thank you guys"},{"owner":{"account_id":3793951,"reputation":655,"user_id":3149693,"display_name":"Arnas"},"score":0,"creation_date":1671857494,"post_id":74904532,"comment_id":132189237,"body_markdown":"Add `if (resultSet.next()) { // your checking logic here }`","body":"Add <code>if (resultSet.next()) { &#47;&#47; your checking logic here }</code>"}],"owner":{"account_id":26581595,"reputation":11,"user_id":20206157,"display_name":"Adryan Reis"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":204,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1671845510,"creation_date":1671835435,"question_id":74904532,"body_markdown":"I create the first try/catch to check if user,email or phone number is already registered, but I got a `java.sql.SQLException: Illegal operation on empty result set`, when I set a non registered name. When I send a registered name got `java.sql.SQLException: Before start of result set`. What&#39;s happening?\r\n\r\n\r\n```\r\n\r\n\tpublic void createUser(User user) throws NameFieldNotFilledException,EmailFieldNotFilledException, PhoneFieldNotFilledException,\r\n\tPasswordFieldNotFilledException, PasswordConfirmationDoesNotMatchException, EmailNotValidException, PasswordInvalidException, \r\n\tUserAlreadyRegisteredException, EmailAlreadyRegisteredException, PhoneAlreadyRegisteredException{\r\n\t\t\r\n\t\tString userSalt = PBKDF2Salt.getSalt();\r\n\t\tMatcher matcherEmail = patternEmail.matcher(user.getEmail());\r\n\t\tMatcher matcherPassword = patternPassword.matcher(user.getPassword());\r\n\t\t\r\n\t\t\r\n\t\ttry {\r\n\t\t\tPreparedStatement preparedStatement = this.databaseMySQL.getConnection().\r\n\t\t\t\t\tprepareStatement(&quot;SELECT * FROM OS_USERS WHERE USR_NAME = ? ;&quot;);\r\n\t\t\tpreparedStatement.setString(1, user.getName());\r\n\t\t\tResultSet resultSet = preparedStatement.executeQuery();\r\n\t\t\tif (resultSet.getString(&quot;USR_NAME&quot;).equals(user.getName())) \r\n\t\t\t\tthrow new UserAlreadyRegisteredException(&quot;User already registered&quot;);\r\n\t\t\tif (resultSet.getString(&quot;USR_EMAIL&quot;).equals(user.getEmail()))\r\n\t\t\t\tthrow new EmailAlreadyRegisteredException(&quot;Email already registered&quot;);\r\n\t\t\tif (resultSet.getString(&quot;USR_PHONE&quot;).equals(user.getPhone())) \r\n\t\t\t\tthrow new PhoneAlreadyRegisteredException(&quot;Phone already registered&quot;);\r\n\t\t}catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\t\r\n\t\tif (user.getName() == null || user.getName().equalsIgnoreCase(&quot;&quot;) || user.getName().equalsIgnoreCase(&quot;\\n&quot;)) \r\n\t\t\tthrow new NameFieldNotFilledException(&quot;Name is required&quot;);\r\n\t\telse if (user.getEmail() == null || user.getEmail().equalsIgnoreCase(&quot;&quot;) || user.getEmail().equalsIgnoreCase(&quot;\\n&quot;))\r\n\t\t\tthrow new EmailFieldNotFilledException(&quot;Email is required&quot;);\r\n\t\telse if (user.getPhone() == null || user.getPhone().equalsIgnoreCase(&quot;&quot;) || user.getPhone().equalsIgnoreCase(&quot;\\n&quot;))\r\n\t\t\tthrow new PhoneFieldNotFilledException(&quot;Phone is required&quot;);\r\n\t\telse if (user.getPassword() == null || user.getPassword().equalsIgnoreCase(&quot;&quot;) || user.getPassword().equalsIgnoreCase(&quot;\\n&quot;))\r\n\t\t\tthrow new PasswordFieldNotFilledException(&quot;Password is required&quot;);\r\n\t\telse if (! user.getConfirmPassword().equals(user.getPassword()))\r\n\t\t\tthrow new PasswordConfirmationDoesNotMatchException(&quot;Password and confirm password do not match&quot;);\r\n\t\telse if (! matcherEmail.matches())\r\n\t\t\tthrow new EmailNotValidException(&quot;Email format invalid. Example valid: user@domain.com&quot;);\r\n\t\telse if (! matcherPassword.matches())\r\n\t\t\tthrow new PasswordInvalidException(&quot;Invalid password&quot;);\r\n\t\telse {\r\n\t\t\ttry {\r\n\t\t\t\tPreparedStatement preparedStatement = this.databaseMySQL.getConnection().prepareStatement(&quot;INSERT INTO OS_USERS VALUES (?, ?, ?, ?, ?, ?);&quot;);\r\n\t\t\t\tpreparedStatement.setInt(1, user.getId());\r\n\t\t\t\tpreparedStatement.setString(2, user.getName());\r\n\t\t\t\tpreparedStatement.setString(3, user.getEmail());\r\n\t\t\t\tpreparedStatement.setString(4, user.getPhone());\r\n\t\t\t\tpreparedStatement.setString(5, PBKDF2Salt.hashing(user.getPassword(),userSalt));\r\n\t\t\t\tpreparedStatement.setString(6,userSalt);\r\n\t\t\t\tpreparedStatement.execute();\r\n\t\t\t}catch(SQLException exception){\r\n\t\t\t\texception.printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n```\r\n\r\nI want to throw these exception if already exists username, email or phone in my database","title":"Check if user,phone or email is already registered using java and mysql","body":"<p>I create the first try/catch to check if user,email or phone number is already registered, but I got a <code>java.sql.SQLException: Illegal operation on empty result set</code>, when I set a non registered name. When I send a registered name got <code>java.sql.SQLException: Before start of result set</code>. What's happening?</p>\n<pre><code>\n    public void createUser(User user) throws NameFieldNotFilledException,EmailFieldNotFilledException, PhoneFieldNotFilledException,\n    PasswordFieldNotFilledException, PasswordConfirmationDoesNotMatchException, EmailNotValidException, PasswordInvalidException, \n    UserAlreadyRegisteredException, EmailAlreadyRegisteredException, PhoneAlreadyRegisteredException{\n        \n        String userSalt = PBKDF2Salt.getSalt();\n        Matcher matcherEmail = patternEmail.matcher(user.getEmail());\n        Matcher matcherPassword = patternPassword.matcher(user.getPassword());\n        \n        \n        try {\n            PreparedStatement preparedStatement = this.databaseMySQL.getConnection().\n                    prepareStatement(&quot;SELECT * FROM OS_USERS WHERE USR_NAME = ? ;&quot;);\n            preparedStatement.setString(1, user.getName());\n            ResultSet resultSet = preparedStatement.executeQuery();\n            if (resultSet.getString(&quot;USR_NAME&quot;).equals(user.getName())) \n                throw new UserAlreadyRegisteredException(&quot;User already registered&quot;);\n            if (resultSet.getString(&quot;USR_EMAIL&quot;).equals(user.getEmail()))\n                throw new EmailAlreadyRegisteredException(&quot;Email already registered&quot;);\n            if (resultSet.getString(&quot;USR_PHONE&quot;).equals(user.getPhone())) \n                throw new PhoneAlreadyRegisteredException(&quot;Phone already registered&quot;);\n        }catch (Exception e) {\n            e.printStackTrace();\n        }\n        \n        if (user.getName() == null || user.getName().equalsIgnoreCase(&quot;&quot;) || user.getName().equalsIgnoreCase(&quot;\\n&quot;)) \n            throw new NameFieldNotFilledException(&quot;Name is required&quot;);\n        else if (user.getEmail() == null || user.getEmail().equalsIgnoreCase(&quot;&quot;) || user.getEmail().equalsIgnoreCase(&quot;\\n&quot;))\n            throw new EmailFieldNotFilledException(&quot;Email is required&quot;);\n        else if (user.getPhone() == null || user.getPhone().equalsIgnoreCase(&quot;&quot;) || user.getPhone().equalsIgnoreCase(&quot;\\n&quot;))\n            throw new PhoneFieldNotFilledException(&quot;Phone is required&quot;);\n        else if (user.getPassword() == null || user.getPassword().equalsIgnoreCase(&quot;&quot;) || user.getPassword().equalsIgnoreCase(&quot;\\n&quot;))\n            throw new PasswordFieldNotFilledException(&quot;Password is required&quot;);\n        else if (! user.getConfirmPassword().equals(user.getPassword()))\n            throw new PasswordConfirmationDoesNotMatchException(&quot;Password and confirm password do not match&quot;);\n        else if (! matcherEmail.matches())\n            throw new EmailNotValidException(&quot;Email format invalid. Example valid: user@domain.com&quot;);\n        else if (! matcherPassword.matches())\n            throw new PasswordInvalidException(&quot;Invalid password&quot;);\n        else {\n            try {\n                PreparedStatement preparedStatement = this.databaseMySQL.getConnection().prepareStatement(&quot;INSERT INTO OS_USERS VALUES (?, ?, ?, ?, ?, ?);&quot;);\n                preparedStatement.setInt(1, user.getId());\n                preparedStatement.setString(2, user.getName());\n                preparedStatement.setString(3, user.getEmail());\n                preparedStatement.setString(4, user.getPhone());\n                preparedStatement.setString(5, PBKDF2Salt.hashing(user.getPassword(),userSalt));\n                preparedStatement.setString(6,userSalt);\n                preparedStatement.execute();\n            }catch(SQLException exception){\n                exception.printStackTrace();\n            }\n        }\n    }\n</code></pre>\n<p>I want to throw these exception if already exists username, email or phone in my database</p>\n"},{"tags":["java","montecarlo","birthday-paradox"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1671581204,"post_id":74870013,"comment_id":132128922,"body_markdown":"It looks like if exactly two people in your sample share a birthday, then `Collision` will return 1.  But in your main loop, if your inputs are 20 and 2, you&#39;ll only count a success when `Collision` returns 2 or more (which would happen if there are two pairs of birthday sharers, or three people who share a birthday).  There&#39;s no way that happens 41% of the time.","body":"It looks like if exactly two people in your sample share a birthday, then <code>Collision</code> will return 1.  But in your main loop, if your inputs are 20 and 2, you&#39;ll only count a success when <code>Collision</code> returns 2 or more (which would happen if there are two pairs of birthday sharers, or three people who share a birthday).  There&#39;s no way that happens 41% of the time."},{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1671585941,"post_id":74870013,"comment_id":132129556,"body_markdown":"Also, it loops for one less (`for int i = 1;..` should be `for (int i = 0; ...`).","body":"Also, it loops for one less (<code>for int i = 1;..</code> should be <code>for (int i = 0; ...</code>)."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1671589035,"post_id":74870013,"comment_id":132129969,"body_markdown":"@rzwitserloot I don&#39;t think that will actually affect the calculation.","body":"@rzwitserloot I don&#39;t think that will actually affect the calculation."},{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1671591194,"post_id":74870013,"comment_id":132130233,"body_markdown":"@DawoodibnKareem By sheer luck, indeed, locking the birthday of at most 1 classmate to a specific date (in this case, jan 1st), wouldn&#39;t. But leaving that bug in there means further experimentation with this code will then start running into this. With monte carlo simulations, things are complicated - normally you can just debug and follow along with your algorithm, check for problems. With MC, you may not see such stochastic errors.","body":"@DawoodibnKareem By sheer luck, indeed, locking the birthday of at most 1 classmate to a specific date (in this case, jan 1st), wouldn&#39;t. But leaving that bug in there means further experimentation with this code will then start running into this. With monte carlo simulations, things are complicated - normally you can just debug and follow along with your algorithm, check for problems. With MC, you may not see such stochastic errors."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1671593996,"post_id":74870013,"comment_id":132130655,"body_markdown":"&quot;find probability of n people in a class of x&quot; -- Is that *exactly* `n`? Or is it at least n?  Suppose, for example, `classSize` is 25, and `birthPpl` is 2. Suppose there are 3 people that share a birthday. How should your program handle that?  What if there are 3 pairs of shared birthdays?","body":"&quot;find probability of n people in a class of x&quot; -- Is that <i>exactly</i> <code>n</code>? Or is it at least n?  Suppose, for example, <code>classSize</code> is 25, and <code>birthPpl</code> is 2. Suppose there are 3 people that share a birthday. How should your program handle that?  What if there are 3 pairs of shared birthdays?"}],"answers":[{"tags":[],"owner":{"account_id":27312415,"reputation":1,"user_id":20827360,"display_name":"rimvoo"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1671845492,"creation_date":1671626506,"answer_id":74876214,"question_id":74870013,"body_markdown":"```java\r\nimport java.util.Scanner;\r\n\r\npublic class Birthday {\r\n    public static void main(String[] args) {\r\n        Scanner sc = new Scanner(System.in);\r\n        int n = sc.nextInt(); // class size\r\n        int x = sc.nextInt(); // people who share the same birthday\r\n        double tests = 1_000_000;\r\n        double success = 0;\r\n\r\n\r\n        // fills array of birthdays and breaks out when x amount of people share \r\n        // a birthday. then we find the % of successes.\r\n        for (int i = 0; i &lt; tests; i++) {\r\n            int[] year = new int[365];\r\n\r\n            for (int j = 0; j &lt; n; j++) {\r\n                int birthday = (int) (Math.random() * 365);\r\n                year[birthday]++;\r\n                if (year[birthday] &gt;= x) {\r\n                    success++;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        System.out.println(Math.round(success * 100 / tests));\r\n    }\r\n}\r\n```","title":"find probability of n people in a class of x share the same birthday using monte carlo simulation in java","body":"<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\n\npublic class Birthday {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        int n = sc.nextInt(); // class size\n        int x = sc.nextInt(); // people who share the same birthday\n        double tests = 1_000_000;\n        double success = 0;\n\n\n        // fills array of birthdays and breaks out when x amount of people share \n        // a birthday. then we find the % of successes.\n        for (int i = 0; i &lt; tests; i++) {\n            int[] year = new int[365];\n\n            for (int j = 0; j &lt; n; j++) {\n                int birthday = (int) (Math.random() * 365);\n                year[birthday]++;\n                if (year[birthday] &gt;= x) {\n                    success++;\n                    break;\n                }\n            }\n        }\n\n        System.out.println(Math.round(success * 100 / tests));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671814018,"creation_date":1671814018,"answer_id":74902062,"question_id":74870013,"body_markdown":"You could also make use the [Random](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Random.html#Random()) and [HashMap](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/HashMap.html#HashMap()) classes. [Map.merge](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Map.html#merge(K,V,java.util.function.BiFunction)) will take the key, a birthday in this case, then a default value of `1`, and continues to add `1` to the existing value which is returned and compared to `x`. Then success is appropriately updated.  The Random class provides a variety of methods to return random numbers and is usually preferred over `Math.random.`\r\n```\r\ndouble success = 0;\r\nint tests = 1_000_000;\r\n\r\n// instantiate a Random class for selecting the next birthday\r\nRandom r = new Random();\r\n\r\n// a map to hold the frequency count of same birthdays\r\nMap&lt;Integer,Integer&gt; birthdays = new HashMap&lt;&gt;();\r\n\r\n\r\nint n = 23;\r\nint x = 2;\r\n\r\nfor(int i=0; i&lt; tests; i++) {\r\n   for (int j = 0; j &lt; n; j++) {\r\n       if (birthdays.merge(r.nextInt(365), 1, Integer::sum) &gt;= x) {\r\n           success++;\r\n           break;\r\n       }\r\n   }\r\n   // clear the map for the next run\r\n   birthdays.clear();\r\n}\r\n```\r\nUsing [System.out.printf](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/io/PrintStream.html#printf(java.lang.String,java.lang.Object...)) facilitates formatting the output.\r\n```\r\nSystem.out.printf(&quot;probability = %4.1f%%%n&quot;, (success/tests) * 100);\r\n```\r\nprints something like the following:\r\n```\r\nprobability = 50.7%","title":"find probability of n people in a class of x share the same birthday using monte carlo simulation in java","body":"<p>You could also make use the <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Random.html#Random()\" rel=\"nofollow noreferrer\">Random</a> and <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/HashMap.html#HashMap()\" rel=\"nofollow noreferrer\">HashMap</a> classes. <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Map.html#merge(K,V,java.util.function.BiFunction)\" rel=\"nofollow noreferrer\">Map.merge</a> will take the key, a birthday in this case, then a default value of <code>1</code>, and continues to add <code>1</code> to the existing value which is returned and compared to <code>x</code>. Then success is appropriately updated.  The Random class provides a variety of methods to return random numbers and is usually preferred over <code>Math.random.</code></p>\n<pre><code>double success = 0;\nint tests = 1_000_000;\n\n// instantiate a Random class for selecting the next birthday\nRandom r = new Random();\n\n// a map to hold the frequency count of same birthdays\nMap&lt;Integer,Integer&gt; birthdays = new HashMap&lt;&gt;();\n\n\nint n = 23;\nint x = 2;\n\nfor(int i=0; i&lt; tests; i++) {\n   for (int j = 0; j &lt; n; j++) {\n       if (birthdays.merge(r.nextInt(365), 1, Integer::sum) &gt;= x) {\n           success++;\n           break;\n       }\n   }\n   // clear the map for the next run\n   birthdays.clear();\n}\n</code></pre>\n<p>Using <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/io/PrintStream.html#printf(java.lang.String,java.lang.Object...)\" rel=\"nofollow noreferrer\">System.out.printf</a> facilitates formatting the output.</p>\n<pre><code>System.out.printf(&quot;probability = %4.1f%%%n&quot;, (success/tests) * 100);\n</code></pre>\n<p>prints something like the following:</p>\n<pre><code>probability = 50.7%\n</code></pre>\n"}],"owner":{"account_id":27312415,"reputation":1,"user_id":20827360,"display_name":"rimvoo"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":154,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1671845492,"creation_date":1671579835,"question_id":74870013,"body_markdown":"As the problem states, i must use monte carlo(randomness) to solve the question given. I am running the simulation 1,000,000 times. \r\n\r\n```java\r\nimport java.util.*;\r\n\r\npublic class MonteCarlo {\r\n    public static void main(String[] args) {\r\n       Scanner sc = new Scanner(System.in);\r\n       System.out.println(&quot;Please enter size of the class: &quot;);\r\n       int classSize = sc.nextInt();\r\n       System.out.println(&quot;Please enter the amount of people who share the same birthday: &quot;);\r\n       int birthPpl = sc.nextInt();\r\n       System.out.println(&quot;calculate the probability that &quot;+birthPpl+&quot; people share the same Birthday in a class size of &quot;+classSize);\r\n      \r\n       sc.close();\r\n       \r\n       int birthdays [] = new int[classSize];\r\n       int simulations = 0;\r\n       int success=0;\r\n       for(int i=0; i&lt;1000000; i++){\r\n            simulations++;\r\n            if(Collision(birthdays)&gt;=birthPpl){\r\n                success++;\r\n            }\r\n       }\r\n       System.out.println(success+&quot; &quot;+simulations);\r\n       System.out.println(&quot;Answer: &quot;+ (success*100)/simulations + &quot;%&quot;);\r\n    }\r\n\r\n    public static int Collision(int birthday[]){\r\n        Random rand = new Random();\r\n        for(int i=1; i&lt;birthday.length; i++){\r\n            birthday[i]= rand.nextInt(365);\r\n        }\r\n\r\n        int count = 0;\r\n        for(int i=0; i&lt;birthday.length; i++){\r\n            for(int j= i+1; j&lt;birthday.length; j++){\r\n                \r\n                if(birthday[i]==birthday[j]){\r\n                    count++;\r\n                }\r\n            }\r\n        }\r\n        return count;\r\n    }\r\n}\r\n```\r\n\r\nAs per a couple of psuedo code solutions i have seen online i have tried looping through the size of the class x and inserting in a random birthday. then comparing birthdays , reducing the birthdays i look through by 1 each time. I then check the number of collisions against the amount sof ppl who should a birthday , if it is greater or equal to it than i increase the count. i have been given sample imput 20 and 2 which should give 41 % but my program gives eithe 7 or 8 %\r\n\r\nWhat&#39;s the problem, and how can it be fixed?","title":"find probability of n people in a class of x share the same birthday using monte carlo simulation in java","body":"<p>As the problem states, i must use monte carlo(randomness) to solve the question given. I am running the simulation 1,000,000 times.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.*;\n\npublic class MonteCarlo {\n    public static void main(String[] args) {\n       Scanner sc = new Scanner(System.in);\n       System.out.println(&quot;Please enter size of the class: &quot;);\n       int classSize = sc.nextInt();\n       System.out.println(&quot;Please enter the amount of people who share the same birthday: &quot;);\n       int birthPpl = sc.nextInt();\n       System.out.println(&quot;calculate the probability that &quot;+birthPpl+&quot; people share the same Birthday in a class size of &quot;+classSize);\n      \n       sc.close();\n       \n       int birthdays [] = new int[classSize];\n       int simulations = 0;\n       int success=0;\n       for(int i=0; i&lt;1000000; i++){\n            simulations++;\n            if(Collision(birthdays)&gt;=birthPpl){\n                success++;\n            }\n       }\n       System.out.println(success+&quot; &quot;+simulations);\n       System.out.println(&quot;Answer: &quot;+ (success*100)/simulations + &quot;%&quot;);\n    }\n\n    public static int Collision(int birthday[]){\n        Random rand = new Random();\n        for(int i=1; i&lt;birthday.length; i++){\n            birthday[i]= rand.nextInt(365);\n        }\n\n        int count = 0;\n        for(int i=0; i&lt;birthday.length; i++){\n            for(int j= i+1; j&lt;birthday.length; j++){\n                \n                if(birthday[i]==birthday[j]){\n                    count++;\n                }\n            }\n        }\n        return count;\n    }\n}\n</code></pre>\n<p>As per a couple of psuedo code solutions i have seen online i have tried looping through the size of the class x and inserting in a random birthday. then comparing birthdays , reducing the birthdays i look through by 1 each time. I then check the number of collisions against the amount sof ppl who should a birthday , if it is greater or equal to it than i increase the count. i have been given sample imput 20 and 2 which should give 41 % but my program gives eithe 7 or 8 %</p>\n<p>What's the problem, and how can it be fixed?</p>\n"},{"tags":["java","jboss","resteasy"],"answers":[{"tags":[],"owner":{"account_id":1249752,"reputation":357,"user_id":1210397,"accept_rate":33,"display_name":"MFH"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671845452,"creation_date":1671845452,"answer_id":74905125,"question_id":74819640,"body_markdown":"No and @RoleAllowed does not invoke SecurityContext isUserInRole(String role) method.\r\n\r\nTherefore, create @Namebinding annotation based filter to handle the permission by SecurityContext isUserInRole(String role) is the best way to go.","title":"Can I use JAX-RS @RoleAllowed in the Rest API resource&#39;s method, if EJB is used","body":"<p>No and @RoleAllowed does not invoke SecurityContext isUserInRole(String role) method.</p>\n<p>Therefore, create @Namebinding annotation based filter to handle the permission by SecurityContext isUserInRole(String role) is the best way to go.</p>\n"}],"owner":{"account_id":1249752,"reputation":357,"user_id":1210397,"accept_rate":33,"display_name":"MFH"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671845452,"creation_date":1671158247,"question_id":74819640,"body_markdown":"\r\nAccording to the JBoss 7.1 Enterprise Edition, @RolesAllowed is not advised in the Resource&#39;s method, if RESTful services use EJB.\r\n\r\n&gt; Do not activate role-based security if the application uses EJBs. The\r\n&gt; EJB container will provide the functionality, instead of RESTEasy.\r\n&gt; \r\n&gt; Ref:\r\n&gt; &lt;https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.1/html/developing_web_services_applications/developing_jax_rs_web_services#Enable_Role-Based_Security_RESTEasy_JAX-RS_Web_Service&gt;\r\n\r\nI am confused about the above statement. My application is build by JAX-RS layer and EJB layer. I am resolving role in the implementation of SecurityContext isUserInRole(String role) mehod. My web.xml is empty. Does it mean I am not allowed to use @RolesAllowed on my Resource&#39;s method because my REST services use EJB under the hood?\r\n","title":"Can I use JAX-RS @RoleAllowed in the Rest API resource&#39;s method, if EJB is used","body":"<p>According to the JBoss 7.1 Enterprise Edition, @RolesAllowed is not advised in the Resource's method, if RESTful services use EJB.</p>\n<blockquote>\n<p>Do not activate role-based security if the application uses EJBs. The\nEJB container will provide the functionality, instead of RESTEasy.</p>\n<p>Ref:\n<a href=\"https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.1/html/developing_web_services_applications/developing_jax_rs_web_services#Enable_Role-Based_Security_RESTEasy_JAX-RS_Web_Service\" rel=\"nofollow noreferrer\">https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.1/html/developing_web_services_applications/developing_jax_rs_web_services#Enable_Role-Based_Security_RESTEasy_JAX-RS_Web_Service</a></p>\n</blockquote>\n<p>I am confused about the above statement. My application is build by JAX-RS layer and EJB layer. I am resolving role in the implementation of SecurityContext isUserInRole(String role) mehod. My web.xml is empty. Does it mean I am not allowed to use @RolesAllowed on my Resource's method because my REST services use EJB under the hood?</p>\n"},{"tags":["java","sql","spring","jpa","specifications"],"comments":[{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1671767895,"post_id":74895699,"comment_id":132172643,"body_markdown":"Try `Expression&lt;String&gt; rootKey = ((ExpressionImplementor)root.get(criteria.getKey()).asString();` instead of `Path&lt;String&gt; rootKey = root.get(criteria.getKey();`","body":"Try <code>Expression&lt;String&gt; rootKey = ((ExpressionImplementor)root.get(criteria.getKey()).asString&zwnj;&#8203;();</code> instead of <code>Path&lt;String&gt; rootKey = root.get(criteria.getKey();</code>"},{"owner":{"account_id":27022743,"reputation":3,"user_id":20580494,"display_name":"hum_ChrisWU"},"score":0,"creation_date":1671778958,"post_id":74895699,"comment_id":132174095,"body_markdown":"@AndreyB.Panfilov Unfortunately , it gives me the same exception:\n`Parameter value [%ASE%] did not match expected type [com.scm.co.constant.CoApplicationType (n/a)]`","body":"@AndreyB.Panfilov Unfortunately , it gives me the same exception: <code>Parameter value [%ASE%] did not match expected type [com.scm.co.constant.CoApplicationType (n&#47;a)]</code>"}],"answers":[{"tags":[],"owner":{"account_id":10342917,"reputation":31,"user_id":7628711,"display_name":"Rajvee Shah"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671845212,"creation_date":1671779215,"answer_id":74897004,"question_id":74895699,"body_markdown":"You have to add\r\n```java\r\n@Enumerated(EnumType.STRING) // dataType of your enum\r\n@Column(insertable = false, updatable = false , name = &quot;co_application_type&quot;)\r\nprivate CoApplicationType coApplicationType; //DB column is CHAR(255);\r\n```\r\nfor enums you have to add `@Enumerated` annotation before your column. \r\n\r\n","title":"Spring JPA specification with enum mapping","body":"<p>You have to add</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Enumerated(EnumType.STRING) // dataType of your enum\n@Column(insertable = false, updatable = false , name = &quot;co_application_type&quot;)\nprivate CoApplicationType coApplicationType; //DB column is CHAR(255);\n</code></pre>\n<p>for enums you have to add <code>@Enumerated</code> annotation before your column.</p>\n"}],"owner":{"account_id":27022743,"reputation":3,"user_id":20580494,"display_name":"hum_ChrisWU"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1477,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74897004,"answer_count":1,"score":0,"last_activity_date":1671845212,"creation_date":1671764064,"question_id":74895699,"body_markdown":"In my project, I used a complicated enum for my entity, and I want to do some search function with specification using JPA.\r\n\r\n(Entity)\r\nCoDocument.java\r\n```\r\n@Getter @Setter\r\n@Entity\r\n@Table(name =&quot;co_document&quot;)\r\npublic class CoDocument {\r\n\r\n  @Id\r\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n  @Column(name = &quot;Id&quot;, nullable = false)\r\n  private Long id;\r\n\r\n  @Column(insertable = false, updatable = false , name = &quot;co_application_type&quot;)\r\n  private CoApplicationType coApplicationType; //DB column is CHAR(255)\r\n\r\n\r\n}\r\n```\r\n\r\n(Specification)\r\nRepositorySpecification.java\r\n```\r\npublic class RepositorySpecification implements Specification&lt;CoDocument&gt; {\r\n    @Serial\r\n    private static final long serialVersionUID = -7694054498602732930L;\r\n    private final List&lt;SearchCriteria&gt; list;\r\n\r\n    public CoapRepositorySpecification(List&lt;SearchCriteria&gt; list) {\r\n        this.list = list != null ? list : new ArrayList&lt;&gt;();\r\n    }\r\n\r\n    @Override\r\n    public Predicate toPredicate(Root&lt;CoDocument&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder builder) {\r\n        List&lt;Predicate&gt; andPredicates = new ArrayList&lt;&gt;();\r\n        for (SearchCriteria criteria : list) {\r\n            if (criteria.getValue() == null || !StringUtils.hasLength(criteria.getValue().toString())) {\r\n                continue;\r\n            }\r\n\r\n            Path&lt;String&gt; rootKey = root.get(criteria.getKey();\r\n\r\n            andPredicates.add(builder.like(\r\n                     rootKey,\r\n                     &quot;%&quot; + criteria.getValue().toString().toLowerCase() + &quot;%&quot;));\r\n        }\r\n        return builder.and(andPredicates.toArray(new Predicate[0]));\r\n    }\r\n```\r\n\r\n(Enum)\r\nCoApplicationType.java\r\n```\r\n@Getter @Setter\r\npublic enum CoApplicationType {\r\n    CO_TYPE_A(&quot;CO(Maldives)&quot;,&quot;CO_MALDIVES&quot;),\r\n    CO_TYPE_B(&quot;CO(ASE)&quot;,&quot;CO_ASE&quot;);\r\n\r\n    private String applicationType;\r\n    private String formName;\r\n\r\n    private CoApplicationType(String appicationType, String formName){\r\n        this.applicationType = appicationType;\r\n        this.formName = formName;\r\n    }\r\n```\r\n\r\n(Enum converter)\r\nCoApplicationTypeConverter.java\r\n```\r\n@Converter(autoApply = true)\r\npublic class CoApplicationTypeConverter implements AttributeConverter&lt;CoApplicationType, String&gt; {\r\n    @Override\r\n    public String convertToDatabaseColumn(CoApplicationType coApplicationType) {\r\n        if (coApplicationType == null) {\r\n            return null;\r\n        }\r\n        return coApplicationType.getAppicationType();\r\n    }\r\n\r\n    @Override\r\n    public CoApplicationType convertToEntityAttribute(String applicationType) {\r\n        if (applicationType == null) {\r\n            return null;\r\n        }\r\n\r\n        return Stream.of(CoApplicationType.values())\r\n                .filter(c -&gt; c.getAppicationType().equals(applicationType))\r\n                .findFirst()\r\n                .orElseThrow(IllegalArgumentException::new);\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nBut here comes the exception: \r\n`Parameter value [%ASE%] did not match expected type [com.scm.co.constant.CoApplicationType (n/a)]`\r\nThere&#39;s something wrong with the type in the entity, and I have no clue searching the document online.\r\n\r\nWhat I want to do in SQL statement is like:\r\n`SELECT * FROM co_document WHERE coApplicationType like &quot;%ASE%&quot;;`\r\nand it does work in MySQL Workbench.\r\n\r\nBut I&#39;m not sure how to convert it into JPA with specification, and with complicated enum structure.\r\n\r\nAny reply would be appreciated!","title":"Spring JPA specification with enum mapping","body":"<p>In my project, I used a complicated enum for my entity, and I want to do some search function with specification using JPA.</p>\n<p>(Entity)\nCoDocument.java</p>\n<pre><code>@Getter @Setter\n@Entity\n@Table(name =&quot;co_document&quot;)\npublic class CoDocument {\n\n  @Id\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\n  @Column(name = &quot;Id&quot;, nullable = false)\n  private Long id;\n\n  @Column(insertable = false, updatable = false , name = &quot;co_application_type&quot;)\n  private CoApplicationType coApplicationType; //DB column is CHAR(255)\n\n\n}\n</code></pre>\n<p>(Specification)\nRepositorySpecification.java</p>\n<pre><code>public class RepositorySpecification implements Specification&lt;CoDocument&gt; {\n    @Serial\n    private static final long serialVersionUID = -7694054498602732930L;\n    private final List&lt;SearchCriteria&gt; list;\n\n    public CoapRepositorySpecification(List&lt;SearchCriteria&gt; list) {\n        this.list = list != null ? list : new ArrayList&lt;&gt;();\n    }\n\n    @Override\n    public Predicate toPredicate(Root&lt;CoDocument&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder builder) {\n        List&lt;Predicate&gt; andPredicates = new ArrayList&lt;&gt;();\n        for (SearchCriteria criteria : list) {\n            if (criteria.getValue() == null || !StringUtils.hasLength(criteria.getValue().toString())) {\n                continue;\n            }\n\n            Path&lt;String&gt; rootKey = root.get(criteria.getKey();\n\n            andPredicates.add(builder.like(\n                     rootKey,\n                     &quot;%&quot; + criteria.getValue().toString().toLowerCase() + &quot;%&quot;));\n        }\n        return builder.and(andPredicates.toArray(new Predicate[0]));\n    }\n</code></pre>\n<p>(Enum)\nCoApplicationType.java</p>\n<pre><code>@Getter @Setter\npublic enum CoApplicationType {\n    CO_TYPE_A(&quot;CO(Maldives)&quot;,&quot;CO_MALDIVES&quot;),\n    CO_TYPE_B(&quot;CO(ASE)&quot;,&quot;CO_ASE&quot;);\n\n    private String applicationType;\n    private String formName;\n\n    private CoApplicationType(String appicationType, String formName){\n        this.applicationType = appicationType;\n        this.formName = formName;\n    }\n</code></pre>\n<p>(Enum converter)\nCoApplicationTypeConverter.java</p>\n<pre><code>@Converter(autoApply = true)\npublic class CoApplicationTypeConverter implements AttributeConverter&lt;CoApplicationType, String&gt; {\n    @Override\n    public String convertToDatabaseColumn(CoApplicationType coApplicationType) {\n        if (coApplicationType == null) {\n            return null;\n        }\n        return coApplicationType.getAppicationType();\n    }\n\n    @Override\n    public CoApplicationType convertToEntityAttribute(String applicationType) {\n        if (applicationType == null) {\n            return null;\n        }\n\n        return Stream.of(CoApplicationType.values())\n                .filter(c -&gt; c.getAppicationType().equals(applicationType))\n                .findFirst()\n                .orElseThrow(IllegalArgumentException::new);\n    }\n}\n\n</code></pre>\n<p>But here comes the exception:\n<code>Parameter value [%ASE%] did not match expected type [com.scm.co.constant.CoApplicationType (n/a)]</code>\nThere's something wrong with the type in the entity, and I have no clue searching the document online.</p>\n<p>What I want to do in SQL statement is like:\n<code>SELECT * FROM co_document WHERE coApplicationType like &quot;%ASE%&quot;;</code>\nand it does work in MySQL Workbench.</p>\n<p>But I'm not sure how to convert it into JPA with specification, and with complicated enum structure.</p>\n<p>Any reply would be appreciated!</p>\n"},{"tags":["java","file","file-io","directory","temporary-directory"],"answers":[{"tags":[],"owner":{"account_id":2397,"reputation":179869,"user_id":3333,"accept_rate":80,"display_name":"Paul Tomblin"},"down_vote_count":4,"up_vote_count":9,"is_accepted":false,"score":5,"last_activity_date":1229545983,"creation_date":1229545983,"answer_id":375925,"question_id":617414,"body_markdown":"Well, &quot;createTempFile&quot; actually creates the file.  So why not just delete it first, and then do the mkdir on it?","title":"How to create a temporary directory/folder in Java?","body":"<p>Well, \"createTempFile\" actually creates the file.  So why not just delete it first, and then do the mkdir on it?</p>\n"},{"tags":[],"owner":{"account_id":7745,"reputation":189755,"user_id":13531,"accept_rate":75,"display_name":"Michael Myers"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1229618932,"creation_date":1229546036,"answer_id":375927,"question_id":617414,"body_markdown":"As discussed in [this RFE][1] and its comments, you could call `tempDir.delete()` first. Or you could use `System.getProperty(&quot;java.io.tmpdir&quot;)` and create a directory there. Either way, you should remember to call `tempDir.deleteOnExit()`, or the file won&#39;t be deleted after you&#39;re done.\r\n\r\n\r\n  [1]: https://bugs.java.com/bugdatabase/view_bug?bug_id=4735419","title":"How to create a temporary directory/folder in Java?","body":"<p>As discussed in <a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=4735419\" rel=\"nofollow noreferrer\">this RFE</a> and its comments, you could call <code>tempDir.delete()</code> first. Or you could use <code>System.getProperty(&quot;java.io.tmpdir&quot;)</code> and create a directory there. Either way, you should remember to call <code>tempDir.deleteOnExit()</code>, or the file won't be deleted after you're done.</p>\n"},{"tags":[],"owner":{"account_id":3001,"reputation":138707,"user_id":4249,"accept_rate":84,"display_name":"matt b"},"down_vote_count":4,"up_vote_count":8,"is_accepted":false,"score":4,"last_activity_date":1229547324,"creation_date":1229547324,"answer_id":375997,"question_id":617414,"body_markdown":"This code should work reasonably well:\r\n\r\n    public static File createTempDir() {\r\n        final String baseTempPath = System.getProperty(&quot;java.io.tmpdir&quot;);\r\n\r\n        Random rand = new Random();\r\n        int randomInt = 1 + rand.nextInt();\r\n        \r\n        File tempDir = new File(baseTempPath + File.separator + &quot;tempDir&quot; + randomInt);\r\n        if (tempDir.exists() == false) {\r\n            tempDir.mkdir();\r\n        }\r\n\r\n        tempDir.deleteOnExit();\r\n        \r\n        return tempDir;\r\n    }\r\n","title":"How to create a temporary directory/folder in Java?","body":"<p>This code should work reasonably well:</p>\n\n<pre><code>public static File createTempDir() {\n    final String baseTempPath = System.getProperty(\"java.io.tmpdir\");\n\n    Random rand = new Random();\n    int randomInt = 1 + rand.nextInt();\n\n    File tempDir = new File(baseTempPath + File.separator + \"tempDir\" + randomInt);\n    if (tempDir.exists() == false) {\n        tempDir.mkdir();\n    }\n\n    tempDir.deleteOnExit();\n\n    return tempDir;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25591,"reputation":61024,"user_id":65868,"accept_rate":68,"display_name":"TofuBeer"},"down_vote_count":20,"up_vote_count":462,"is_accepted":true,"score":442,"last_activity_date":1538168285,"creation_date":1236303087,"answer_id":617438,"question_id":617414,"body_markdown":"If you are using JDK 7 use the new [Files.createTempDirectory][1] class to create the temporary directory.\r\n\r\n    Path tempDirWithPrefix = Files.createTempDirectory(prefix);\r\n\r\nBefore JDK 7 this should do it:\r\n\r\n    public static File createTempDirectory()\r\n        throws IOException\r\n    {\r\n        final File temp;\r\n        \r\n        temp = File.createTempFile(&quot;temp&quot;, Long.toString(System.nanoTime()));\r\n        \r\n        if(!(temp.delete()))\r\n        {\r\n            throw new IOException(&quot;Could not delete temp file: &quot; + temp.getAbsolutePath());\r\n        }\r\n        \r\n        if(!(temp.mkdir()))\r\n        {\r\n            throw new IOException(&quot;Could not create temp directory: &quot; + temp.getAbsolutePath());\r\n        }\r\n        \r\n        return (temp);\r\n    }\r\n\r\nYou could make better exceptions (subclass IOException) if you want.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#createTempDirectory%28java.nio.file.Path,%20java.lang.String,%20java.nio.file.attribute.FileAttribute...%29","title":"How to create a temporary directory/folder in Java?","body":"<p>If you are using JDK 7 use the new <a href=\"http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#createTempDirectory%28java.nio.file.Path,%20java.lang.String,%20java.nio.file.attribute.FileAttribute...%29\" rel=\"noreferrer\">Files.createTempDirectory</a> class to create the temporary directory.</p>\n\n<pre><code>Path tempDirWithPrefix = Files.createTempDirectory(prefix);\n</code></pre>\n\n<p>Before JDK 7 this should do it:</p>\n\n<pre><code>public static File createTempDirectory()\n    throws IOException\n{\n    final File temp;\n\n    temp = File.createTempFile(\"temp\", Long.toString(System.nanoTime()));\n\n    if(!(temp.delete()))\n    {\n        throw new IOException(\"Could not delete temp file: \" + temp.getAbsolutePath());\n    }\n\n    if(!(temp.mkdir()))\n    {\n        throw new IOException(\"Could not create temp directory: \" + temp.getAbsolutePath());\n    }\n\n    return (temp);\n}\n</code></pre>\n\n<p>You could make better exceptions (subclass IOException) if you want.</p>\n"},{"tags":[],"owner":{"account_id":5580,"reputation":3140,"user_id":9069,"display_name":"ordnungswidrig"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1236333344,"creation_date":1236333344,"answer_id":618273,"question_id":617414,"body_markdown":"Using `File#createTempFile` and `delete` to create a unique name for the directory seems ok. You should add a `ShutdownHook` to delete the directory (recursively) on JVM shutdown. ","title":"How to create a temporary directory/folder in Java?","body":"<p>Using <code>File#createTempFile</code> and <code>delete</code> to create a unique name for the directory seems ok. You should add a <code>ShutdownHook</code> to delete the directory (recursively) on JVM shutdown. </p>\n"},{"tags":[],"owner":{"account_id":53518,"reputation":2820,"user_id":160015,"accept_rate":85,"display_name":"Keith"},"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1250772422,"creation_date":1250772422,"answer_id":1305966,"question_id":617414,"body_markdown":"This is what I decided to do for my own code:\r\n\r\n    /**\r\n     * Create a new temporary directory. Use something like\r\n     * {@link #recursiveDelete(File)} to clean this directory up since it isn&#39;t\r\n     * deleted automatically\r\n     * @return  the new directory\r\n     * @throws IOException if there is an error creating the temporary directory\r\n     */\r\n    public static File createTempDir() throws IOException\r\n    {\r\n        final File sysTempDir = new File(System.getProperty(&quot;java.io.tmpdir&quot;));\r\n        File newTempDir;\r\n        final int maxAttempts = 9;\r\n        int attemptCount = 0;\r\n        do\r\n        {\r\n            attemptCount++;\r\n            if(attemptCount &gt; maxAttempts)\r\n            {\r\n                throw new IOException(\r\n                        &quot;The highly improbable has occurred! Failed to &quot; +\r\n                        &quot;create a unique temporary directory after &quot; +\r\n                        maxAttempts + &quot; attempts.&quot;);\r\n            }\r\n            String dirName = UUID.randomUUID().toString();\r\n            newTempDir = new File(sysTempDir, dirName);\r\n        } while(newTempDir.exists());\r\n        \r\n        if(newTempDir.mkdirs())\r\n        {\r\n            return newTempDir;\r\n        }\r\n        else\r\n        {\r\n            throw new IOException(\r\n                    &quot;Failed to create temp dir named &quot; +\r\n                    newTempDir.getAbsolutePath());\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Recursively delete file or directory\r\n     * @param fileOrDir\r\n     *          the file or dir to delete\r\n     * @return\r\n     *          true iff all files are successfully deleted\r\n     */\r\n    public static boolean recursiveDelete(File fileOrDir)\r\n    {\r\n        if(fileOrDir.isDirectory())\r\n        {\r\n            // recursively delete contents\r\n            for(File innerFile: fileOrDir.listFiles())\r\n            {\r\n                if(!FileUtilities.recursiveDelete(innerFile))\r\n                {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        \r\n        return fileOrDir.delete();\r\n    }\r\n\r\n","title":"How to create a temporary directory/folder in Java?","body":"<p>This is what I decided to do for my own code:</p>\n\n<pre><code>/**\n * Create a new temporary directory. Use something like\n * {@link #recursiveDelete(File)} to clean this directory up since it isn't\n * deleted automatically\n * @return  the new directory\n * @throws IOException if there is an error creating the temporary directory\n */\npublic static File createTempDir() throws IOException\n{\n    final File sysTempDir = new File(System.getProperty(\"java.io.tmpdir\"));\n    File newTempDir;\n    final int maxAttempts = 9;\n    int attemptCount = 0;\n    do\n    {\n        attemptCount++;\n        if(attemptCount &gt; maxAttempts)\n        {\n            throw new IOException(\n                    \"The highly improbable has occurred! Failed to \" +\n                    \"create a unique temporary directory after \" +\n                    maxAttempts + \" attempts.\");\n        }\n        String dirName = UUID.randomUUID().toString();\n        newTempDir = new File(sysTempDir, dirName);\n    } while(newTempDir.exists());\n\n    if(newTempDir.mkdirs())\n    {\n        return newTempDir;\n    }\n    else\n    {\n        throw new IOException(\n                \"Failed to create temp dir named \" +\n                newTempDir.getAbsolutePath());\n    }\n}\n\n/**\n * Recursively delete file or directory\n * @param fileOrDir\n *          the file or dir to delete\n * @return\n *          true iff all files are successfully deleted\n */\npublic static boolean recursiveDelete(File fileOrDir)\n{\n    if(fileOrDir.isDirectory())\n    {\n        // recursively delete contents\n        for(File innerFile: fileOrDir.listFiles())\n        {\n            if(!FileUtilities.recursiveDelete(innerFile))\n            {\n                return false;\n            }\n        }\n    }\n\n    return fileOrDir.delete();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":563810,"reputation":301,"user_id":182790,"display_name":"Developer Dude"},"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1298034654,"creation_date":1254434888,"answer_id":1506777,"question_id":617414,"body_markdown":"Do not use `deleteOnExit()` even if you explicitly delete it later.\r\n\r\n[Google &#39;deleteonexit is evil&#39;][1] for more info, but the gist of the problem is:\r\n\r\n1. `deleteOnExit()` only deletes for normal JVM shutdowns, not crashes or killing the JVM process.\r\n\r\n2. `deleteOnExit()` only deletes on JVM shutdown - not good for long running server processes because:\r\n\r\n3. The most evil of all - `deleteOnExit()` consumes memory for each temp file entry. If your process is running for months, or creates a lot of temp files in a short time, you consume memory and never release it until the JVM shuts down.\r\n\r\n\r\n  [1]: http://www.google.com/search?q=deleteonexit+is+evil","title":"How to create a temporary directory/folder in Java?","body":"<p>Do not use <code>deleteOnExit()</code> even if you explicitly delete it later.</p>\n\n<p><a href=\"http://www.google.com/search?q=deleteonexit+is+evil\" rel=\"noreferrer\">Google 'deleteonexit is evil'</a> for more info, but the gist of the problem is:</p>\n\n<ol>\n<li><p><code>deleteOnExit()</code> only deletes for normal JVM shutdowns, not crashes or killing the JVM process.</p></li>\n<li><p><code>deleteOnExit()</code> only deletes on JVM shutdown - not good for long running server processes because:</p></li>\n<li><p>The most evil of all - <code>deleteOnExit()</code> consumes memory for each temp file entry. If your process is running for months, or creates a lot of temp files in a short time, you consume memory and never release it until the JVM shuts down.</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":698283,"reputation":11,"user_id":573233,"display_name":"Chris Lott"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1315905319,"creation_date":1294859070,"answer_id":4672884,"question_id":617414,"body_markdown":"I like the multiple attempts at creating a unique name but even this solution does not rule out a race condition.  Another process can slip in after the test for `exists()` and the `if(newTempDir.mkdirs())` method invocation.  I have no idea how to completely make this safe without resorting to native code, which I presume is what&#39;s buried inside `File.createTempFile()`.","title":"How to create a temporary directory/folder in Java?","body":"<p>I like the multiple attempts at creating a unique name but even this solution does not rule out a race condition.  Another process can slip in after the test for <code>exists()</code> and the <code>if(newTempDir.mkdirs())</code> method invocation.  I have no idea how to completely make this safe without resorting to native code, which I presume is what's buried inside <code>File.createTempFile()</code>.</p>\n"},{"tags":[],"owner":{"account_id":115659,"reputation":32567,"user_id":303598,"accept_rate":84,"display_name":"matsev"},"down_vote_count":1,"up_vote_count":181,"is_accepted":false,"score":180,"last_activity_date":1549607605,"creation_date":1306833049,"answer_id":6185359,"question_id":617414,"body_markdown":"If you need a temporary directory for testing and you are using jUnit, `@Rule` together with `TemporaryFolder` solves your problem:\r\n\r\n    @Rule\r\n    public TemporaryFolder folder = new TemporaryFolder();\r\n\r\nFrom the [documentation][1]:\r\n\r\n&gt; The TemporaryFolder Rule allows creation of files and folders that are guaranteed to be deleted when the test method finishes (whether it passes or fails) \r\n\r\n\r\n---\r\n\r\n**Update:** \r\n\r\nIf you are using JUnit Jupiter (version 5.1.1 or greater), you have the option to use JUnit Pioneer which is the JUnit 5 Extension Pack. \r\n\r\nCopied from the [project documentation][2]:\r\n\r\n&gt; For example, the following test registers the extension for a single test method, creates and writes a file to the temporary directory and checks its content.\r\n\r\n    @Test\r\n    @ExtendWith(TempDirectory.class)\r\n    void test(@TempDir Path tempDir) {\r\n        Path file = tempDir.resolve(&quot;test.txt&quot;);\r\n        writeFile(file);\r\n        assertExpectedFileContent(file);\r\n    }\r\n\r\nMore info in the [JavaDoc][3] and the [JavaDoc of TempDirectory][4]\r\n\r\nGradle:\r\n\r\n    dependencies {\r\n        testImplementation &#39;org.junit-pioneer:junit-pioneer:0.1.2&#39;\r\n    }\r\n\r\nMaven:\r\n\r\n    &lt;dependency&gt;\r\n       &lt;groupId&gt;org.junit-pioneer&lt;/groupId&gt;\r\n       &lt;artifactId&gt;junit-pioneer&lt;/artifactId&gt;\r\n       &lt;version&gt;0.1.2&lt;/version&gt;\r\n       &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\n---\r\n\r\n**Update 2:**\r\n\r\nThe [@TempDir][5] annotation was added to the JUnit Jupiter 5.4.0 release as an experimental feature. Example copied from the [JUnit 5 User Guide][6]:\r\n\r\n    @Test\r\n    void writeItemsToFile(@TempDir Path tempDir) throws IOException {\r\n        Path file = tempDir.resolve(&quot;test.txt&quot;);\r\n    \r\n        new ListWriter(file).write(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;);\r\n    \r\n        assertEquals(singletonList(&quot;a,b,c&quot;), Files.readAllLines(file));\r\n    }\r\n\r\n\r\n  [1]: https://junit.org/junit4/javadoc/latest/index.html\r\n  [2]: https://junit-pioneer.org/docs/temp-directory/\r\n  [3]: https://javadoc.io/doc/org.junit-pioneer/junit-pioneer/0.1.2\r\n  [4]: https://static.javadoc.io/org.junit-pioneer/junit-pioneer/0.1.2/org/junitpioneer/jupiter/TempDirectory.html\r\n  [5]: https://junit.org/junit5/docs/5.4.0/api/org/junit/jupiter/api/io/TempDir.html\r\n  [6]: https://junit.org/junit5/docs/5.4.0/user-guide/#writing-tests-built-in-extensions-TempDirectory","title":"How to create a temporary directory/folder in Java?","body":"<p>If you need a temporary directory for testing and you are using jUnit, <code>@Rule</code> together with <code>TemporaryFolder</code> solves your problem:</p>\n\n<pre><code>@Rule\npublic TemporaryFolder folder = new TemporaryFolder();\n</code></pre>\n\n<p>From the <a href=\"https://junit.org/junit4/javadoc/latest/index.html\" rel=\"noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <p>The TemporaryFolder Rule allows creation of files and folders that are guaranteed to be deleted when the test method finishes (whether it passes or fails) </p>\n</blockquote>\n\n<hr>\n\n<p><strong>Update:</strong> </p>\n\n<p>If you are using JUnit Jupiter (version 5.1.1 or greater), you have the option to use JUnit Pioneer which is the JUnit 5 Extension Pack. </p>\n\n<p>Copied from the <a href=\"https://junit-pioneer.org/docs/temp-directory/\" rel=\"noreferrer\">project documentation</a>:</p>\n\n<blockquote>\n  <p>For example, the following test registers the extension for a single test method, creates and writes a file to the temporary directory and checks its content.</p>\n</blockquote>\n\n<pre><code>@Test\n@ExtendWith(TempDirectory.class)\nvoid test(@TempDir Path tempDir) {\n    Path file = tempDir.resolve(\"test.txt\");\n    writeFile(file);\n    assertExpectedFileContent(file);\n}\n</code></pre>\n\n<p>More info in the <a href=\"https://javadoc.io/doc/org.junit-pioneer/junit-pioneer/0.1.2\" rel=\"noreferrer\">JavaDoc</a> and the <a href=\"https://static.javadoc.io/org.junit-pioneer/junit-pioneer/0.1.2/org/junitpioneer/jupiter/TempDirectory.html\" rel=\"noreferrer\">JavaDoc of TempDirectory</a></p>\n\n<p>Gradle:</p>\n\n<pre><code>dependencies {\n    testImplementation 'org.junit-pioneer:junit-pioneer:0.1.2'\n}\n</code></pre>\n\n<p>Maven:</p>\n\n<pre><code>&lt;dependency&gt;\n   &lt;groupId&gt;org.junit-pioneer&lt;/groupId&gt;\n   &lt;artifactId&gt;junit-pioneer&lt;/artifactId&gt;\n   &lt;version&gt;0.1.2&lt;/version&gt;\n   &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<hr>\n\n<p><strong>Update 2:</strong></p>\n\n<p>The <a href=\"https://junit.org/junit5/docs/5.4.0/api/org/junit/jupiter/api/io/TempDir.html\" rel=\"noreferrer\">@TempDir</a> annotation was added to the JUnit Jupiter 5.4.0 release as an experimental feature. Example copied from the <a href=\"https://junit.org/junit5/docs/5.4.0/user-guide/#writing-tests-built-in-extensions-TempDirectory\" rel=\"noreferrer\">JUnit 5 User Guide</a>:</p>\n\n<pre><code>@Test\nvoid writeItemsToFile(@TempDir Path tempDir) throws IOException {\n    Path file = tempDir.resolve(\"test.txt\");\n\n    new ListWriter(file).write(\"a\", \"b\", \"c\");\n\n    assertEquals(singletonList(\"a,b,c\"), Files.readAllLines(file));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":56959,"reputation":9026,"user_id":170587,"accept_rate":79,"display_name":"Spina"},"down_vote_count":1,"up_vote_count":185,"is_accepted":false,"score":184,"last_activity_date":1464385770,"creation_date":1308503717,"answer_id":6403880,"question_id":617414,"body_markdown":"The Google Guava library has a ton of helpful utilities. One of note here is the [Files class](http://google.github.io/guava/releases/19.0/api/docs/com/google/common/io/Files.html). It has a bunch of useful methods including:\r\n\r\n    File myTempDir = Files.createTempDir();\r\n\r\nThis does exactly what you asked for in one line. If you read the documentation [here][1] you&#39;ll see that the proposed adaptation of `File.createTempFile(&quot;install&quot;, &quot;dir&quot;)` typically introduces security vulnerabilities.\r\n\r\n  [1]: http://google.github.io/guava/releases/19.0/api/docs/com/google/common/io/Files.html#createTempDir()","title":"How to create a temporary directory/folder in Java?","body":"<p>The Google Guava library has a ton of helpful utilities. One of note here is the <a href=\"http://google.github.io/guava/releases/19.0/api/docs/com/google/common/io/Files.html\" rel=\"noreferrer\">Files class</a>. It has a bunch of useful methods including:</p>\n\n<pre><code>File myTempDir = Files.createTempDir();\n</code></pre>\n\n<p>This does exactly what you asked for in one line. If you read the documentation <a href=\"http://google.github.io/guava/releases/19.0/api/docs/com/google/common/io/Files.html#createTempDir()\" rel=\"noreferrer\">here</a> you'll see that the proposed adaptation of <code>File.createTempFile(\"install\", \"dir\")</code> typically introduces security vulnerabilities.</p>\n"},{"tags":[],"owner":{"account_id":159068,"reputation":2936,"user_id":378130,"display_name":"Greg Price"},"down_vote_count":0,"up_vote_count":44,"is_accepted":false,"score":44,"last_activity_date":1671844908,"creation_date":1318922512,"answer_id":7803748,"question_id":617414,"body_markdown":"Naively written code to solve this problem suffers from race conditions, including several of the answers here.  Historically you could think carefully about race conditions and write it yourself, or you could use a third-party library like Google&#39;s Guava (as Spina&#39;s answer suggested.) Or you could write buggy code.\r\n\r\nBut as of JDK 7, there is good news! The Java standard library itself now provides a properly working (non-racy) solution to this problem. You want [java.nio.file.Files#createTempDirectory()][1]. From the [documentation][1]:\r\n\r\n    public static Path createTempDirectory(Path dir,\r\n                           String prefix,\r\n                           FileAttribute&lt;?&gt;... attrs)\r\n                                    throws IOException\r\n\r\n&gt; Creates a new directory in the specified directory, using the given prefix to generate its name. The resulting Path is associated with the same FileSystem as the given directory.\r\n\r\n&gt; The details as to how the name of the directory is constructed is implementation dependent and therefore not specified. Where possible the prefix is used to construct candidate names.\r\n\r\nThis effectively resolves the [embarrassingly ancient bug report](https://bugs.java.com/bugdatabase/view_bug.do?bug_id=4735419) in the Sun bug tracker which asked for just such a function.\r\n\r\n[1]: http://download.oracle.com/javase/7/docs/api/java/nio/file/Files.html#createTempDirectory(java.nio.file.Path,%20java.lang.String,%20java.nio.file.attribute.FileAttribute...)\r\n","title":"How to create a temporary directory/folder in Java?","body":"<p>Naively written code to solve this problem suffers from race conditions, including several of the answers here.  Historically you could think carefully about race conditions and write it yourself, or you could use a third-party library like Google's Guava (as Spina's answer suggested.) Or you could write buggy code.</p>\n<p>But as of JDK 7, there is good news! The Java standard library itself now provides a properly working (non-racy) solution to this problem. You want <a href=\"http://download.oracle.com/javase/7/docs/api/java/nio/file/Files.html#createTempDirectory(java.nio.file.Path,%20java.lang.String,%20java.nio.file.attribute.FileAttribute...)\" rel=\"nofollow noreferrer\">java.nio.file.Files#createTempDirectory()</a>. From the <a href=\"http://download.oracle.com/javase/7/docs/api/java/nio/file/Files.html#createTempDirectory(java.nio.file.Path,%20java.lang.String,%20java.nio.file.attribute.FileAttribute...)\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n<pre><code>public static Path createTempDirectory(Path dir,\n                       String prefix,\n                       FileAttribute&lt;?&gt;... attrs)\n                                throws IOException\n</code></pre>\n<blockquote>\n<p>Creates a new directory in the specified directory, using the given prefix to generate its name. The resulting Path is associated with the same FileSystem as the given directory.</p>\n</blockquote>\n<blockquote>\n<p>The details as to how the name of the directory is constructed is implementation dependent and therefore not specified. Where possible the prefix is used to construct candidate names.</p>\n</blockquote>\n<p>This effectively resolves the <a href=\"https://bugs.java.com/bugdatabase/view_bug.do?bug_id=4735419\" rel=\"nofollow noreferrer\">embarrassingly ancient bug report</a> in the Sun bug tracker which asked for just such a function.</p>\n"},{"tags":[],"owner":{"account_id":478919,"reputation":671,"user_id":891292,"display_name":"seeker"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1326141845,"creation_date":1326141198,"answer_id":8794812,"question_id":617414,"body_markdown":"As of Java 1.7 `createTempDirectory(prefix, attrs)` and `createTempDirectory(dir, prefix, attrs)` are included in `java.nio.file.Files`\r\n\r\nExample:\r\n`File tempDir = Files.createTempDirectory(&quot;foobar&quot;).toFile();`","title":"How to create a temporary directory/folder in Java?","body":"<p>As of Java 1.7 <code>createTempDirectory(prefix, attrs)</code> and <code>createTempDirectory(dir, prefix, attrs)</code> are included in <code>java.nio.file.Files</code></p>\n\n<p>Example:\n<code>File tempDir = Files.createTempDirectory(\"foobar\").toFile();</code></p>\n"},{"tags":[],"owner":{"account_id":166831,"reputation":3471,"user_id":391231,"display_name":"Andres Kievsky"},"down_vote_count":1,"up_vote_count":40,"is_accepted":false,"score":39,"last_activity_date":1327474732,"creation_date":1327474732,"answer_id":8998916,"question_id":617414,"body_markdown":"This is the source code to the Guava library&#39;s Files.createTempDir(). It&#39;s nowhere as complex as you might think:\r\n\r\n    public static File createTempDir() {\r\n      File baseDir = new File(System.getProperty(&quot;java.io.tmpdir&quot;));\r\n      String baseName = System.currentTimeMillis() + &quot;-&quot;;\r\n\r\n      for (int counter = 0; counter &lt; TEMP_DIR_ATTEMPTS; counter++) {\r\n        File tempDir = new File(baseDir, baseName + counter);\r\n        if (tempDir.mkdir()) {\r\n          return tempDir;\r\n        }\r\n      }\r\n      throw new IllegalStateException(&quot;Failed to create directory within &quot;\r\n          + TEMP_DIR_ATTEMPTS + &quot; attempts (tried &quot;\r\n          + baseName + &quot;0 to &quot; + baseName + (TEMP_DIR_ATTEMPTS - 1) + &#39;)&#39;);\r\n    }\r\n\r\nBy default:\r\n\r\n    private static final int TEMP_DIR_ATTEMPTS = 10000;\r\n\r\n[See here][1]\r\n\r\n  [1]: http://code.google.com/p/guava-libraries/source/browse/guava/src/com/google/common/io/Files.java","title":"How to create a temporary directory/folder in Java?","body":"<p>This is the source code to the Guava library's Files.createTempDir(). It's nowhere as complex as you might think:</p>\n\n<pre><code>public static File createTempDir() {\n  File baseDir = new File(System.getProperty(\"java.io.tmpdir\"));\n  String baseName = System.currentTimeMillis() + \"-\";\n\n  for (int counter = 0; counter &lt; TEMP_DIR_ATTEMPTS; counter++) {\n    File tempDir = new File(baseDir, baseName + counter);\n    if (tempDir.mkdir()) {\n      return tempDir;\n    }\n  }\n  throw new IllegalStateException(\"Failed to create directory within \"\n      + TEMP_DIR_ATTEMPTS + \" attempts (tried \"\n      + baseName + \"0 to \" + baseName + (TEMP_DIR_ATTEMPTS - 1) + ')');\n}\n</code></pre>\n\n<p>By default:</p>\n\n<pre><code>private static final int TEMP_DIR_ATTEMPTS = 10000;\n</code></pre>\n\n<p><a href=\"http://code.google.com/p/guava-libraries/source/browse/guava/src/com/google/common/io/Files.java\" rel=\"noreferrer\">See here</a></p>\n"},{"tags":[],"owner":{"account_id":2080158,"reputation":43,"user_id":1852316,"display_name":"immoteous"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1359422147,"creation_date":1359422147,"answer_id":14574100,"question_id":617414,"body_markdown":"I got the same problem so this is just another answer for those who are interested, and it&#39;s similar to one of the above:\r\n\r\n    public static final String tempDir = System.getProperty(&quot;java.io.tmpdir&quot;)+&quot;tmp&quot;+System.nanoTime();\r\n    static {\r\n        File f = new File(tempDir);\r\n        if(!f.exists())\r\n            f.mkdir();\r\n    }\r\n\r\nAnd for my application, I decided that to add in a option to clear the **temp** on exit so I added in a shut-down hook:\r\n\r\n    Runtime.getRuntime().addShutdownHook(new Thread() {\r\n            @Override\r\n            public void run() {\r\n                //stackless deletion\r\n                String root = MainWindow.tempDir;\r\n                Stack&lt;String&gt; dirStack = new Stack&lt;String&gt;();\r\n                dirStack.push(root);\r\n                while(!dirStack.empty()) {\r\n                    String dir = dirStack.pop();\r\n                    File f = new File(dir);\r\n                    if(f.listFiles().length==0)\r\n                        f.delete();\r\n                    else {\r\n                        dirStack.push(dir);\r\n                        for(File ff: f.listFiles()) {\r\n                            if(ff.isFile())\r\n                                ff.delete();\r\n                            else if(ff.isDirectory())\r\n                                dirStack.push(ff.getPath());\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\nThe method delete all subdirs and files before deleting the **temp**, without using the callstack (which is totally optional and you could do it with recursion at this point), but I want to be on the safe side.","title":"How to create a temporary directory/folder in Java?","body":"<p>I got the same problem so this is just another answer for those who are interested, and it's similar to one of the above:</p>\n\n<pre><code>public static final String tempDir = System.getProperty(\"java.io.tmpdir\")+\"tmp\"+System.nanoTime();\nstatic {\n    File f = new File(tempDir);\n    if(!f.exists())\n        f.mkdir();\n}\n</code></pre>\n\n<p>And for my application, I decided that to add in a option to clear the <strong>temp</strong> on exit so I added in a shut-down hook:</p>\n\n<pre><code>Runtime.getRuntime().addShutdownHook(new Thread() {\n        @Override\n        public void run() {\n            //stackless deletion\n            String root = MainWindow.tempDir;\n            Stack&lt;String&gt; dirStack = new Stack&lt;String&gt;();\n            dirStack.push(root);\n            while(!dirStack.empty()) {\n                String dir = dirStack.pop();\n                File f = new File(dir);\n                if(f.listFiles().length==0)\n                    f.delete();\n                else {\n                    dirStack.push(dir);\n                    for(File ff: f.listFiles()) {\n                        if(ff.isFile())\n                            ff.delete();\n                        else if(ff.isDirectory())\n                            dirStack.push(ff.getPath());\n                    }\n                }\n            }\n        }\n    });\n</code></pre>\n\n<p>The method delete all subdirs and files before deleting the <strong>temp</strong>, without using the callstack (which is totally optional and you could do it with recursion at this point), but I want to be on the safe side.</p>\n"},{"tags":[],"owner":{"account_id":1536315,"reputation":31,"user_id":1432262,"display_name":"Carsten Engelke"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1403608298,"creation_date":1403605816,"answer_id":24384306,"question_id":617414,"body_markdown":"As you can see in the other answers, no standard approach has arisen.\r\nHence you already mentioned Apache Commons, I propose the following approach using FileUtils from [Apache Commons IO][1]:\r\n\r\n    /**\r\n\t * Creates a temporary subdirectory in the standard temporary directory.\r\n\t * This will be automatically deleted upon exit.\r\n\t * \r\n\t * @param prefix\r\n\t *            the prefix used to create the directory, completed by a\r\n\t *            current timestamp. Use for instance your application&#39;s name\r\n\t * @return the directory\r\n\t */\r\n\tpublic static File createTempDirectory(String prefix) {\r\n\r\n\t\tfinal File tmp = new File(FileUtils.getTempDirectory().getAbsolutePath()\r\n\t\t\t\t+ &quot;/&quot; + prefix + System.currentTimeMillis());\r\n\t\ttmp.mkdir();\r\n\t\tRuntime.getRuntime().addShutdownHook(new Thread() {\r\n\t\t\t\r\n\t\t\t@Override\r\n\t\t\tpublic void run() {\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tFileUtils.deleteDirectory(tmp);\r\n\t\t\t\t} catch (IOException e) {\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn tmp;\r\n\r\n\t}\r\n\r\nThis is preferred since apache commons the library that comes as closest to the asked &quot;standard&quot; and works with both JDK 7 and older versions. This also returns an &quot;old&quot; File instance (which is stream based) and not a &quot;new&quot; Path instance (which is buffer based and would be the result of JDK7&#39;s getTemporaryDirectory() method) -&gt; Therefore it returns what most people need when they want to create a temporary directory.\r\n\r\n  [1]: http://commons.apache.org/proper/commons-io/","title":"How to create a temporary directory/folder in Java?","body":"<p>As you can see in the other answers, no standard approach has arisen.\nHence you already mentioned Apache Commons, I propose the following approach using FileUtils from <a href=\"http://commons.apache.org/proper/commons-io/\" rel=\"nofollow\">Apache Commons IO</a>:</p>\n\n<pre><code>/**\n * Creates a temporary subdirectory in the standard temporary directory.\n * This will be automatically deleted upon exit.\n * \n * @param prefix\n *            the prefix used to create the directory, completed by a\n *            current timestamp. Use for instance your application's name\n * @return the directory\n */\npublic static File createTempDirectory(String prefix) {\n\n    final File tmp = new File(FileUtils.getTempDirectory().getAbsolutePath()\n            + \"/\" + prefix + System.currentTimeMillis());\n    tmp.mkdir();\n    Runtime.getRuntime().addShutdownHook(new Thread() {\n\n        @Override\n        public void run() {\n\n            try {\n                FileUtils.deleteDirectory(tmp);\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n    });\n    return tmp;\n\n}\n</code></pre>\n\n<p>This is preferred since apache commons the library that comes as closest to the asked \"standard\" and works with both JDK 7 and older versions. This also returns an \"old\" File instance (which is stream based) and not a \"new\" Path instance (which is buffer based and would be the result of JDK7's getTemporaryDirectory() method) -> Therefore it returns what most people need when they want to create a temporary directory.</p>\n"},{"tags":[],"owner":{"account_id":221741,"reputation":8017,"user_id":479905,"accept_rate":80,"display_name":"Arne"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1466515865,"creation_date":1466513814,"answer_id":37945114,"question_id":617414,"body_markdown":"Just for completion, this is the code from google guava library. It is not my code, but I think it is valueable to show it here in this thread.\r\n\r\n      /** Maximum loop count when creating temp directories. */\r\n      private static final int TEMP_DIR_ATTEMPTS = 10000;\r\n\r\n      /**\r\n       * Atomically creates a new directory somewhere beneath the system&#39;s temporary directory (as\r\n       * defined by the {@code java.io.tmpdir} system property), and returns its name.\r\n       *\r\n       * &lt;p&gt;Use this method instead of {@link File#createTempFile(String, String)} when you wish to\r\n       * create a directory, not a regular file. A common pitfall is to call {@code createTempFile},\r\n       * delete the file and create a directory in its place, but this leads a race condition which can\r\n       * be exploited to create security vulnerabilities, especially when executable files are to be\r\n       * written into the directory.\r\n       *\r\n       * &lt;p&gt;This method assumes that the temporary volume is writable, has free inodes and free blocks,\r\n       * and that it will not be called thousands of times per second.\r\n       *\r\n       * @return the newly-created directory\r\n       * @throws IllegalStateException if the directory could not be created\r\n       */\r\n      public static File createTempDir() {\r\n        File baseDir = new File(System.getProperty(&quot;java.io.tmpdir&quot;));\r\n        String baseName = System.currentTimeMillis() + &quot;-&quot;;\r\n    \r\n        for (int counter = 0; counter &lt; TEMP_DIR_ATTEMPTS; counter++) {\r\n          File tempDir = new File(baseDir, baseName + counter);\r\n          if (tempDir.mkdir()) {\r\n            return tempDir;\r\n          }\r\n        }\r\n        throw new IllegalStateException(\r\n            &quot;Failed to create directory within &quot;\r\n                + TEMP_DIR_ATTEMPTS\r\n                + &quot; attempts (tried &quot;\r\n                + baseName\r\n                + &quot;0 to &quot;\r\n                + baseName\r\n                + (TEMP_DIR_ATTEMPTS - 1)\r\n                + &#39;)&#39;);\r\n      }","title":"How to create a temporary directory/folder in Java?","body":"<p>Just for completion, this is the code from google guava library. It is not my code, but I think it is valueable to show it here in this thread.</p>\n\n<pre><code>  /** Maximum loop count when creating temp directories. */\n  private static final int TEMP_DIR_ATTEMPTS = 10000;\n\n  /**\n   * Atomically creates a new directory somewhere beneath the system's temporary directory (as\n   * defined by the {@code java.io.tmpdir} system property), and returns its name.\n   *\n   * &lt;p&gt;Use this method instead of {@link File#createTempFile(String, String)} when you wish to\n   * create a directory, not a regular file. A common pitfall is to call {@code createTempFile},\n   * delete the file and create a directory in its place, but this leads a race condition which can\n   * be exploited to create security vulnerabilities, especially when executable files are to be\n   * written into the directory.\n   *\n   * &lt;p&gt;This method assumes that the temporary volume is writable, has free inodes and free blocks,\n   * and that it will not be called thousands of times per second.\n   *\n   * @return the newly-created directory\n   * @throws IllegalStateException if the directory could not be created\n   */\n  public static File createTempDir() {\n    File baseDir = new File(System.getProperty(\"java.io.tmpdir\"));\n    String baseName = System.currentTimeMillis() + \"-\";\n\n    for (int counter = 0; counter &lt; TEMP_DIR_ATTEMPTS; counter++) {\n      File tempDir = new File(baseDir, baseName + counter);\n      if (tempDir.mkdir()) {\n        return tempDir;\n      }\n    }\n    throw new IllegalStateException(\n        \"Failed to create directory within \"\n            + TEMP_DIR_ATTEMPTS\n            + \" attempts (tried \"\n            + baseName\n            + \"0 to \"\n            + baseName\n            + (TEMP_DIR_ATTEMPTS - 1)\n            + ')');\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5907672,"reputation":356,"user_id":4648862,"display_name":"geri"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1494838608,"creation_date":1494838608,"answer_id":43975187,"question_id":617414,"body_markdown":"Before Java 7 you could also:\r\n\r\n    File folder = File.createTempFile(&quot;testFileUtils&quot;, &quot;&quot;); // no suffix\r\n    folder.delete();\r\n    folder.mkdirs();\r\n    folder.deleteOnExit();\r\n","title":"How to create a temporary directory/folder in Java?","body":"<p>Before Java 7 you could also:</p>\n\n<pre><code>File folder = File.createTempFile(\"testFileUtils\", \"\"); // no suffix\nfolder.delete();\nfolder.mkdirs();\nfolder.deleteOnExit();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8571883,"reputation":821,"user_id":6422459,"display_name":"DigitShifter"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1582100967,"creation_date":1581592251,"answer_id":60206442,"question_id":617414,"body_markdown":"**Try this small example:**&lt;br&gt;\r\n\r\n**Code:**\r\n\r\n    try {\r\n\t    Path tmpDir = Files.createTempDirectory(&quot;tmpDir&quot;);\r\n\t    System.out.println(tmpDir.toString());\r\n\t    Files.delete(tmpDir);\r\n    } catch (IOException e) {\r\n\t    e.printStackTrace();\r\n    }\r\n\r\n&lt;br&gt;\r\n**Imports:**&lt;br&gt;\r\njava.io.IOException&lt;br&gt;\r\njava.nio.file.Files&lt;br&gt;\r\njava.nio.file.Path&lt;br&gt;\r\n\r\n**Console output on Windows machine:**&lt;br&gt;\r\nC:\\Users\\userName\\AppData\\Local\\Temp\\tmpDir2908538301081367877\r\n\r\n**Comment:**&lt;br&gt;\r\nFiles.createTempDirectory generates unique ID atomatically - 2908538301081367877. &lt;br&gt;\r\n&lt;br&gt;\r\n**Note:**&lt;br&gt;\r\nRead the following for deleting directories recursively:&lt;br&gt;\r\nhttps://stackoverflow.com/questions/779519/delete-directories-recursively-in-java\r\n","title":"How to create a temporary directory/folder in Java?","body":"<p><strong>Try this small example:</strong><br></p>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>try {\n    Path tmpDir = Files.createTempDirectory(\"tmpDir\");\n    System.out.println(tmpDir.toString());\n    Files.delete(tmpDir);\n} catch (IOException e) {\n    e.printStackTrace();\n}\n</code></pre>\n\n<p><br>\n<strong>Imports:</strong><br>\njava.io.IOException<br>\njava.nio.file.Files<br>\njava.nio.file.Path<br></p>\n\n<p><strong>Console output on Windows machine:</strong><br>\nC:\\Users\\userName\\AppData\\Local\\Temp\\tmpDir2908538301081367877</p>\n\n<p><strong>Comment:</strong><br>\nFiles.createTempDirectory generates unique ID atomatically - 2908538301081367877. <br>\n<br>\n<strong>Note:</strong><br>\nRead the following for deleting directories recursively:<br>\n<a href=\"https://stackoverflow.com/questions/779519/delete-directories-recursively-in-java\">Delete directories recursively in Java</a></p>\n"}],"owner":{"account_id":10475,"reputation":8823,"user_id":19820,"accept_rate":41,"display_name":"Peter Becker"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":468012,"favorite_count":0,"down_vote_count":0,"up_vote_count":415,"accepted_answer_id":617438,"answer_count":18,"score":415,"last_activity_date":1671844908,"creation_date":1236302275,"question_id":617414,"body_markdown":"Is there a standard and reliable way of creating a temporary directory inside a Java application? There&#39;s [an entry in Java&#39;s issue database](http://bugs.java.com/bugdatabase/view_bug.do?bug_id=4735419), which has a bit of code in the comments, but I wonder if there is a standard solution to be found in one of the usual libraries (Apache Commons etc.) ?","title":"How to create a temporary directory/folder in Java?","body":"<p>Is there a standard and reliable way of creating a temporary directory inside a Java application? There's <a href=\"http://bugs.java.com/bugdatabase/view_bug.do?bug_id=4735419\" rel=\"noreferrer\">an entry in Java's issue database</a>, which has a bit of code in the comments, but I wonder if there is a standard solution to be found in one of the usual libraries (Apache Commons etc.) ?</p>\n"},{"tags":["java","performance","algorithm","random"],"comments":[{"owner":{"account_id":44195,"reputation":269033,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":154,"creation_date":1358987835,"post_id":14491966,"comment_id":20196365,"body_markdown":"&quot;seems pretty random&quot;; you should generate a histogram and run some autocorrelation on your sequence...","body":"&quot;seems pretty random&quot;; you should generate a histogram and run some autocorrelation on your sequence..."},{"owner":{"account_id":1266491,"reputation":58067,"user_id":1223693,"accept_rate":96,"display_name":"tckmn"},"score":0,"creation_date":1358987875,"post_id":14491966,"comment_id":20196375,"body_markdown":"@OliCharlesworth I... err... what? I have no idea what you just said :P","body":"@OliCharlesworth I... err... what? I have no idea what you just said :P"},{"owner":{"account_id":9708,"reputation":7331,"user_id":18049,"accept_rate":87,"display_name":"Matt H"},"score":63,"creation_date":1358987933,"post_id":14491966,"comment_id":20196396,"body_markdown":"He means &quot;seems pretty random&quot; isn&#39;t really an objective measure of randomness and you should get some actual statistics.","body":"He means &quot;seems pretty random&quot; isn&#39;t really an objective measure of randomness and you should get some actual statistics."},{"owner":{"account_id":1266491,"reputation":58067,"user_id":1223693,"accept_rate":96,"display_name":"tckmn"},"score":2,"creation_date":1358987970,"post_id":14491966,"comment_id":20196411,"body_markdown":"@MattH The problem is I have no idea how to do that. Which is why I am asking here.","body":"@MattH The problem is I have no idea how to do that. Which is why I am asking here."},{"owner":{"account_id":44195,"reputation":269033,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":23,"creation_date":1358988002,"post_id":14491966,"comment_id":20196419,"body_markdown":"@Doorknob: In layman&#39;s terms, you should investigate whether your numbers have a &quot;flat&quot; distribution between 0 and 1, and see whether there are any periodic/repetitive patterns over time.","body":"@Doorknob: In layman&#39;s terms, you should investigate whether your numbers have a &quot;flat&quot; distribution between 0 and 1, and see whether there are any periodic/repetitive patterns over time."},{"owner":{"account_id":1266491,"reputation":58067,"user_id":1223693,"accept_rate":96,"display_name":"tckmn"},"score":0,"creation_date":1358988034,"post_id":14491966,"comment_id":20196425,"body_markdown":"@OliCharlesworth See previous comment :P Also they don&#39;t need to be **perfectly** random, just &quot;good enough.&quot;","body":"@OliCharlesworth See previous comment :P Also they don&#39;t need to be <b>perfectly</b> random, just &quot;good enough.&quot;"},{"owner":{"account_id":2095246,"reputation":43828,"user_id":1864167,"accept_rate":90,"display_name":"Jeroen Vannevel"},"score":1,"creation_date":1358988042,"post_id":14491966,"comment_id":20196429,"body_markdown":"What does random mean to you? If every value in a range occurs an equal amount of times after a big enough amount of tests has been done, you can conclude it&#39;s random.","body":"What does random mean to you? If every value in a range occurs an equal amount of times after a big enough amount of tests has been done, you can conclude it&#39;s random."},{"owner":{"account_id":9708,"reputation":7331,"user_id":18049,"accept_rate":87,"display_name":"Matt H"},"score":3,"creation_date":1358988076,"post_id":14491966,"comment_id":20196443,"body_markdown":"You could start here: http://en.wikipedia.org/wiki/Statistical_randomness","body":"You could start here: <a href=\"http://en.wikipedia.org/wiki/Statistical_randomness\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Statistical_randomness</a>"},{"owner":{"account_id":1266491,"reputation":58067,"user_id":1223693,"accept_rate":96,"display_name":"tckmn"},"score":0,"creation_date":1358988078,"post_id":14491966,"comment_id":20196445,"body_markdown":"@JeroenVannevel I don&#39;t need it to be *really, really* random. Just good enough to have a human player think it&#39;s random enough.","body":"@JeroenVannevel I don&#39;t need it to be <i>really, really</i> random. Just good enough to have a human player think it&#39;s random enough."},{"owner":{"account_id":44195,"reputation":269033,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":4,"creation_date":1358988105,"post_id":14491966,"comment_id":20196454,"body_markdown":"Also, `Math.random` uses `Random.nextDouble`, which really isn&#39;t as complex as you make out.  Take a look at its source code!","body":"Also, <code>Math.random</code> uses <code>Random.nextDouble</code>, which really isn&#39;t as complex as you make out.  Take a look at its source code!"},{"owner":{"account_id":1266491,"reputation":58067,"user_id":1223693,"accept_rate":96,"display_name":"tckmn"},"score":5,"creation_date":1358988132,"post_id":14491966,"comment_id":20196464,"body_markdown":"@OliCharlesworth Hrm. *I&#39;ve been lied to my whole life* :P","body":"@OliCharlesworth Hrm. <i>I&#39;ve been lied to my whole life</i> :P"},{"owner":{"account_id":44195,"reputation":269033,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":3,"creation_date":1358988157,"post_id":14491966,"comment_id":20196470,"body_markdown":"@Doorknob: Ok, but that&#39;s not really a question we can answer here (how do you define &quot;random enough&quot;?).  But you should just use `Random` (or `Math.random`).","body":"@Doorknob: Ok, but that&#39;s not really a question we can answer here (how do you define &quot;random enough&quot;?).  But you should just use <code>Random</code> (or <code>Math.random</code>)."},{"owner":{"account_id":1266491,"reputation":58067,"user_id":1223693,"accept_rate":96,"display_name":"tckmn"},"score":0,"creation_date":1358988247,"post_id":14491966,"comment_id":20196495,"body_markdown":"@OliCharlesworth 1. It&#39;s faster, that&#39;s why I think I should use it 2. I just want to know if there&#39;s any problems or anything. 3. Hey, this isn&#39;t off topic :P","body":"@OliCharlesworth 1. It&#39;s faster, that&#39;s why I think I should use it 2. I just want to know if there&#39;s any problems or anything. 3. Hey, this isn&#39;t off topic :P"},{"owner":{"account_id":2095246,"reputation":43828,"user_id":1864167,"accept_rate":90,"display_name":"Jeroen Vannevel"},"score":1,"creation_date":1358988353,"post_id":14491966,"comment_id":20196526,"body_markdown":"@Doorknob: Then approximate it to an equal amount. Execute your result a few million times, hold an array which represents each value you could have and increment its value in the array. Afterwards you can output some statistics (max occurrence, min occurence, range, etc) to determine whether or not it&#39;s random enough for you.","body":"@Doorknob: Then approximate it to an equal amount. Execute your result a few million times, hold an array which represents each value you could have and increment its value in the array. Afterwards you can output some statistics (max occurrence, min occurence, range, etc) to determine whether or not it&#39;s random enough for you."},{"owner":{"account_id":1061058,"reputation":6749,"user_id":1062679,"accept_rate":87,"display_name":"user2398029"},"score":5,"creation_date":1358988567,"post_id":14491966,"comment_id":20196589,"body_markdown":"I&#39;m currently trying to look for periodicity. Still running, but from what I have now its &gt; 10^9. By comparison, the Mersenne Twister has a periodicity of 10^6001.","body":"I&#39;m currently trying to look for periodicity. Still running, but from what I have now its &gt; 10^9. By comparison, the Mersenne Twister has a periodicity of 10^6001."},{"owner":{"account_id":44195,"reputation":269033,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":0,"creation_date":1358988727,"post_id":14491966,"comment_id":20196637,"body_markdown":"@louism: You need to do a proper autocorrelation, at a minimum.  And you probably also need to investigate the properties of individual bit positions as well (but this is getting beyond my area of expertise ;) )","body":"@louism: You need to do a proper autocorrelation, at a minimum.  And you probably also need to investigate the properties of individual bit positions as well (but this is getting beyond my area of expertise ;) )"},{"owner":{"account_id":1022885,"reputation":6710,"user_id":1032796,"accept_rate":100,"display_name":"FrankieTheKneeMan"},"score":22,"creation_date":1358989246,"post_id":14491966,"comment_id":20196776,"body_markdown":"Try `new QuickRandom(0,5)` or `new QuickRandom(.5, 2)`.  Those will both repeatedly output 0 for your number.","body":"Try <code>new QuickRandom(0,5)</code> or <code>new QuickRandom(.5, 2)</code>.  Those will both repeatedly output 0 for your number."},{"owner":{"account_id":55732,"reputation":75239,"user_id":166949,"accept_rate":90,"display_name":"steveha"},"score":119,"creation_date":1358989259,"post_id":14491966,"comment_id":20196779,"body_markdown":"Writing your own random number generation algorithm is like writing your own encryption algorithm.  There is so much prior art, by people who are hyper-qualified, that it&#39;s senseless to spend your time trying to get it right.  There is no reason not to use the Java library functions, and if you really want to write your own for some reason, visit Wikipedia and look up algorithms there like Mersenne Twister.","body":"Writing your own random number generation algorithm is like writing your own encryption algorithm.  There is so much prior art, by people who are hyper-qualified, that it&#39;s senseless to spend your time trying to get it right.  There is no reason not to use the Java library functions, and if you really want to write your own for some reason, visit Wikipedia and look up algorithms there like Mersenne Twister."},{"owner":{"account_id":55732,"reputation":75239,"user_id":166949,"accept_rate":90,"display_name":"steveha"},"score":12,"creation_date":1358989441,"post_id":14491966,"comment_id":20196830,"body_markdown":"Also, an RNG that has unexpected patterns can make a game less fun. For example, if you shuffle a card deck and the distribution isn&#39;t really random, the game will suffer.  And on the Urban Dead online web-based game, the RNG is actually something the players complain about in the discussion forums.  (In Urban Dead, the game does things in response to clicks, and the expected percentages are known, so the players can actually get a sense of whether the RNG is random or not!)","body":"Also, an RNG that has unexpected patterns can make a game less fun. For example, if you shuffle a card deck and the distribution isn&#39;t really random, the game will suffer.  And on the Urban Dead online web-based game, the RNG is actually something the players complain about in the discussion forums.  (In Urban Dead, the game does things in response to clicks, and the expected percentages are known, so the players can actually get a sense of whether the RNG is random or not!)"},{"owner":{"account_id":256499,"reputation":1629,"user_id":537252,"display_name":"zxcdw"},"score":6,"creation_date":1359006236,"post_id":14491966,"comment_id":20200827,"body_markdown":"@steveha I wouldn&#39;t go as far as claiming that you absolutely *should not* write your own RNG *if* the intended use is does not bear much responsibility. Of course for things like crypto you definitely should *not* do your own implementations, as lots of crypto relies on the fact that the values from the function are indisinguishable from a truly random generator. The whole cryptosystem goes down if your RNG fails at this. There are valid reasons for requiring high-bandwidth random sequences for which the Java library implementation might be inadequate, that&#39;s when you need to hack a bit. :)","body":"@steveha I wouldn&#39;t go as far as claiming that you absolutely <i>should not</i> write your own RNG <i>if</i> the intended use is does not bear much responsibility. Of course for things like crypto you definitely should <i>not</i> do your own implementations, as lots of crypto relies on the fact that the values from the function are indisinguishable from a truly random generator. The whole cryptosystem goes down if your RNG fails at this. There are valid reasons for requiring high-bandwidth random sequences for which the Java library implementation might be inadequate, that&#39;s when you need to hack a bit. :)"},{"owner":{"account_id":55732,"reputation":75239,"user_id":166949,"accept_rate":90,"display_name":"steveha"},"score":5,"creation_date":1359009061,"post_id":14491966,"comment_id":20201613,"body_markdown":"@zxcdw, the point I meant to make is that other people have worked really hard to figure out really good algorithms, and those algorithms are public.  Given that, the sensible thing to do is to just use the public algorithms with their known good qualities.  If someone just wants to play around with RNG algorithms, I have no objection.  But I think the Java library RNG is unlikely to be a real bottleneck in a game, and if Doorknob really needs something faster, I would recommend using something from: http://en.wikipedia.org/wiki/List_of_random_number_generators","body":"@zxcdw, the point I meant to make is that other people have worked really hard to figure out really good algorithms, and those algorithms are public.  Given that, the sensible thing to do is to just use the public algorithms with their known good qualities.  If someone just wants to play around with RNG algorithms, I have no objection.  But I think the Java library RNG is unlikely to be a real bottleneck in a game, and if Doorknob really needs something faster, I would recommend using something from: <a href=\"http://en.wikipedia.org/wiki/List_of_random_number_generators\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/List_of_random_number_generators</a>"},{"owner":{"account_id":1112090,"reputation":3331,"user_id":1102380,"accept_rate":86,"display_name":"Thomas"},"score":2,"creation_date":1359014241,"post_id":14491966,"comment_id":20203491,"body_markdown":"@steveha I agree with you, with the sole exception of curiosity. If one is genuinely interested in pseudorandom number generation, it is commendable to try and create one&#39;s own algorithm (provided it never leaves the workbench, of course - it&#39;s just for fun). But if your goal is to just get a PRNG up and running, yes, do not reinvent the wheel (obviously).","body":"@steveha I agree with you, with the sole exception of curiosity. If one is genuinely interested in pseudorandom number generation, it is commendable to try and create one&#39;s own algorithm (provided it never leaves the workbench, of course - it&#39;s just for fun). But if your goal is to just get a PRNG up and running, yes, do not reinvent the wheel (obviously)."},{"owner":{"account_id":541610,"reputation":1377,"user_id":910227,"accept_rate":80,"display_name":"Jannis Froese"},"score":14,"creation_date":1359034486,"post_id":14491966,"comment_id":20213619,"body_markdown":"Also, a comparison against Math.random is not fair. Math.random has to be thread save, which is using up a lot of runtime, while your class isn&#39;t thread save. ThreadLocalRandom.getCurrent().nextFloat() is a version which avoids thread issues, and is therefore much more comparable to your class. As ThreadLocalRandom is about two to three times faster than Random it also achieves somewhat similar runtime (while giving better randomness)","body":"Also, a comparison against Math.random is not fair. Math.random has to be thread save, which is using up a lot of runtime, while your class isn&#39;t thread save. ThreadLocalRandom.getCurrent().nextFloat() is a version which avoids thread issues, and is therefore much more comparable to your class. As ThreadLocalRandom is about two to three times faster than Random it also achieves somewhat similar runtime (while giving better randomness)"},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":6,"creation_date":1359050559,"post_id":14491966,"comment_id":20222742,"body_markdown":"I&#39;ll add that even if a user can&#39;t precisely identify *what* the non-randomness is, it *can* be detected. I have a hand-held Yahtzee game that rolls random-ishly, but there are detectable sequences where once I&#39;ve gotten one of (four of a kind, full house, large straight) I&#39;m much more likely to get the other two within 2-3 more rolls. It&#39;s predictable enough that it messes with me when I&#39;m playing a more-random version (like with dice).","body":"I&#39;ll add that even if a user can&#39;t precisely identify <i>what</i> the non-randomness is, it <i>can</i> be detected. I have a hand-held Yahtzee game that rolls random-ishly, but there are detectable sequences where once I&#39;ve gotten one of (four of a kind, full house, large straight) I&#39;m much more likely to get the other two within 2-3 more rolls. It&#39;s predictable enough that it messes with me when I&#39;m playing a more-random version (like with dice)."},{"owner":{"account_id":9921,"reputation":107684,"user_id":18511,"accept_rate":92,"display_name":"Kip"},"score":2,"creation_date":1359059018,"post_id":14491966,"comment_id":20227094,"body_markdown":"You have a bug in your default constructor. `Math.random() * 10` produces a value between 0 and 10, not 1 and 10. You want `Math.random() * 9 + 1`. As written, I think you&#39;ll get an exception approximately 10% of the time...","body":"You have a bug in your default constructor. <code>Math.random() * 10</code> produces a value between 0 and 10, not 1 and 10. You want <code>Math.random() * 9 + 1</code>. As written, I think you&#39;ll get an exception approximately 10% of the time..."},{"owner":{"account_id":539550,"reputation":3750,"user_id":907415,"accept_rate":98,"display_name":"Cris Stringfellow"},"score":9,"creation_date":1359062523,"post_id":14491966,"comment_id":20228803,"body_markdown":"@steveha - Someone needs to speak up for those who find writing compression, PRNGs and encryption fun. Like myself. And actually, probably like the researchers who do it for a living, I&#39;m sure they find it fun, too. Don&#39;t ever let anyone tell you to not do something because 1) You are not good enough; or 2) it has all been done. If you like what you are doing, both 1) and 2) are total bullshit. And actually as far as algorithms go, these are pretty basic and accessible and v cool. More people should play with them not less. A few folk once told Heath Ledger he would never make it as an actor.","body":"@steveha - Someone needs to speak up for those who find writing compression, PRNGs and encryption fun. Like myself. And actually, probably like the researchers who do it for a living, I&#39;m sure they find it fun, too. Don&#39;t ever let anyone tell you to not do something because 1) You are not good enough; or 2) it has all been done. If you like what you are doing, both 1) and 2) are total bullshit. And actually as far as algorithms go, these are pretty basic and accessible and v cool. More people should play with them not less. A few folk once told Heath Ledger he would never make it as an actor."},{"owner":{"account_id":55690,"reputation":2735,"user_id":166848,"display_name":"Zano"},"score":2,"creation_date":1359062811,"post_id":14491966,"comment_id":20228946,"body_markdown":"@CrisStringfellow: I agree. But keep it away from production code.","body":"@CrisStringfellow: I agree. But keep it away from production code."},{"owner":{"account_id":539550,"reputation":3750,"user_id":907415,"accept_rate":98,"display_name":"Cris Stringfellow"},"score":0,"creation_date":1359062937,"post_id":14491966,"comment_id":20229011,"body_markdown":"@Zano : Sure, unless it happens to win an AES, the Wikipedia compression challenge, or actually just kicks arse as a PRNG. PRNGs are the easiest to hack together, you just have to test them properly : compression, and DIEHARD/NIST. Maker-revolution!","body":"@Zano : Sure, unless it happens to win an AES, the Wikipedia compression challenge, or actually just kicks arse as a PRNG. PRNGs are the easiest to hack together, you just have to test them properly : compression, and DIEHARD/NIST. Maker-revolution!"},{"owner":{"account_id":539550,"reputation":3750,"user_id":907415,"accept_rate":98,"display_name":"Cris Stringfellow"},"score":3,"creation_date":1359063713,"post_id":14491966,"comment_id":20229423,"body_markdown":"Actually people writing their own algorithms is much needed -- don&#39;t advise them not to, the very fact that people don&#39;t know about it *is* the very reason more people should play and learn about it. There is a big lack of awareness about crypto and randomness. If more people can write and play with their own stuff, more people are going to learn. That can only be good. An argument could be made that &quot;programming&quot; is very hard, there is so much prior art, and so many experts, no novices should even think about coming to the table. Clearly, this argument is false. Same for new langs/crypto","body":"Actually people writing their own algorithms is much needed -- don&#39;t advise them not to, the very fact that people don&#39;t know about it <i>is</i> the very reason more people should play and learn about it. There is a big lack of awareness about crypto and randomness. If more people can write and play with their own stuff, more people are going to learn. That can only be good. An argument could be made that &quot;programming&quot; is very hard, there is so much prior art, and so many experts, no novices should even think about coming to the table. Clearly, this argument is false. Same for new langs/crypto"},{"owner":{"account_id":55732,"reputation":75239,"user_id":166949,"accept_rate":90,"display_name":"steveha"},"score":7,"creation_date":1359064677,"post_id":14491966,"comment_id":20229876,"body_markdown":"Let me just repeat one part of my comment: &quot;If someone just wants to play around with RNG algorithms, I have no objection.&quot;  You can&#39;t become a master without becoming a journeyman first, and everyone has to start somewhere, and I have no objection to additional people working on the problem of RNG.  But in this case, Doorknob wants to write a game, and clearly doesn&#39;t have a strong background in statistics or math as they relate to RNGs.  I think Doorknob would be better served by using the Java RNG or a known RNG algorithm, and focusing on the actual game.  Or forget the game and study RNG.","body":"Let me just repeat one part of my comment: &quot;If someone just wants to play around with RNG algorithms, I have no objection.&quot;  You can&#39;t become a master without becoming a journeyman first, and everyone has to start somewhere, and I have no objection to additional people working on the problem of RNG.  But in this case, Doorknob wants to write a game, and clearly doesn&#39;t have a strong background in statistics or math as they relate to RNGs.  I think Doorknob would be better served by using the Java RNG or a known RNG algorithm, and focusing on the actual game.  Or forget the game and study RNG."},{"owner":{"display_name":"user2005819"},"score":4,"creation_date":1359071208,"post_id":14491966,"comment_id":20232406,"body_markdown":"I very much recommend finding a copy of _Numerical Recipes_ by Press, Teukolksy, Vetterling, and Flannery (make sure it&#39;s the *third* edition, no other edition will suffice), and read the section on random number generators. In addition to the theory, they give a good history lesson about how many people once thought the way you did.","body":"I very much recommend finding a copy of <i>Numerical Recipes</i> by Press, Teukolksy, Vetterling, and Flannery (make sure it&#39;s the <i>third</i> edition, no other edition will suffice), and read the section on random number generators. In addition to the theory, they give a good history lesson about how many people once thought the way you did."},{"owner":{"account_id":539550,"reputation":3750,"user_id":907415,"accept_rate":98,"display_name":"Cris Stringfellow"},"score":0,"creation_date":1359091505,"post_id":14491966,"comment_id":20237430,"body_markdown":"@steveha I think we are all agreed then. He could also do both game and RNG. However, sometimes mistaken glitches lead to interesting stuff, a unique signature of the games weakly random generator.","body":"@steveha I think we are all agreed then. He could also do both game and RNG. However, sometimes mistaken glitches lead to interesting stuff, a unique signature of the games weakly random generator."},{"owner":{"account_id":10272,"reputation":2703,"user_id":19308,"accept_rate":83,"display_name":"Joshua Drake"},"score":3,"creation_date":1359126219,"post_id":14491966,"comment_id":20251820,"body_markdown":"&quot;Just good enough to have a human player think it&#39;s random enough.&quot;, may be more difficult than you think... Quoth the creator: &quot;I have used Math.random, Random.org and other sources, but have always received numerous complaints that the dice are not random enough.&quot; - [Dice-O-Matic](http://gamesbyemail.com/News/DiceOMatic)","body":"&quot;Just good enough to have a human player think it&#39;s random enough.&quot;, may be more difficult than you think... Quoth the creator: &quot;I have used Math.random, Random.org and other sources, but have always received numerous complaints that the dice are not random enough.&quot; - <a href=\"http://gamesbyemail.com/News/DiceOMatic\" rel=\"nofollow noreferrer\">Dice-O-Matic</a>"},{"owner":{"account_id":370140,"reputation":18565,"user_id":717898,"accept_rate":86,"display_name":"Andrew Lazarus"},"score":0,"creation_date":1359485971,"post_id":14491966,"comment_id":20366272,"body_markdown":"Knuth also has good stuff on Random in _The Art of Computer Programming_. I&#39;ll add my vote that RNGs are fun to play with, but (a) you need to know how to test them and (b) you should know something about prior art.","body":"Knuth also has good stuff on Random in <i>The Art of Computer Programming</i>. I&#39;ll add my vote that RNGs are fun to play with, but (a) you need to know how to test them and (b) you should know something about prior art."},{"owner":{"account_id":2726,"reputation":13431,"user_id":3832,"accept_rate":25,"display_name":"Larry Gritz"},"score":4,"creation_date":1359487539,"post_id":14491966,"comment_id":20367121,"body_markdown":"&quot;Looks pretty random&quot; is the devil talking to you. Humans are notoriously bad at judging what is random. There is extensive literature about what tests are good to evaluate a RNG. Knuth isn&#39;t a bad place to start!","body":"&quot;Looks pretty random&quot; is the devil talking to you. Humans are notoriously bad at judging what is random. There is extensive literature about what tests are good to evaluate a RNG. Knuth isn&#39;t a bad place to start!"},{"owner":{"account_id":466180,"reputation":3061,"user_id":870776,"accept_rate":94,"display_name":"eversor"},"score":0,"creation_date":1360324517,"post_id":14491966,"comment_id":20678901,"body_markdown":"http://search.dilbert.com/comic/Random%20Nine","body":"<a href=\"http://search.dilbert.com/comic/Random%20Nine\" rel=\"nofollow noreferrer\">search.dilbert.com/comic/Random%20Nine</a>"}],"answers":[{"tags":[],"owner":{"account_id":1369656,"reputation":17579,"user_id":1305253,"accept_rate":50,"display_name":"rolfl"},"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1358988720,"creation_date":1358988272,"answer_id":14492043,"question_id":14491966,"body_markdown":"&#39;Random&#39; is more than just about getting numbers.... what you have is [pseudo-random][1]\r\n\r\nIf pseudo-random is good enough for your purposes, then sure, it&#39;s way faster (and XOR+Bitshift will be faster than what you have)\r\n\r\nRolf\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Pseudorandomness\r\n\r\nEdit:\r\n\r\nOK, after being too hasty in this answer, let me answer the real reason why your code is faster:\r\n\r\nFrom the JavaDoc for Math.Random() \r\n\r\n&gt;  This method is properly synchronized to allow correct use by more than one thread. However, if many threads need to generate pseudorandom numbers at a great rate, it may reduce contention for each thread to have its own pseudorandom-number generator.\r\n\r\nThis is likely why your code is faster.","title":"Is this a &quot;good enough&quot; random algorithm; why isn&#39;t it used if it&#39;s faster?","body":"<p>'Random' is more than just about getting numbers.... what you have is <a href=\"http://en.wikipedia.org/wiki/Pseudorandomness\" rel=\"nofollow\">pseudo-random</a></p>\n\n<p>If pseudo-random is good enough for your purposes, then sure, it's way faster (and XOR+Bitshift will be faster than what you have)</p>\n\n<p>Rolf</p>\n\n<p>Edit:</p>\n\n<p>OK, after being too hasty in this answer, let me answer the real reason why your code is faster:</p>\n\n<p>From the JavaDoc for Math.Random() </p>\n\n<blockquote>\n  <p>This method is properly synchronized to allow correct use by more than one thread. However, if many threads need to generate pseudorandom numbers at a great rate, it may reduce contention for each thread to have its own pseudorandom-number generator.</p>\n</blockquote>\n\n<p>This is likely why your code is faster.</p>\n"},{"tags":[],"owner":{"account_id":235018,"reputation":364834,"user_id":501557,"accept_rate":90,"display_name":"templatetypedef"},"down_vote_count":0,"up_vote_count":133,"is_accepted":false,"score":133,"last_activity_date":1671844847,"creation_date":1358988715,"answer_id":14492105,"question_id":14491966,"body_markdown":"What you are describing is a type of random generator called a [linear congruential generator][1].  The generator works as follows:\r\n\r\n* Start with a seed value and multiplier.\r\n* To generate a random number:\r\n   * Multiply the seed by the multiplier.\r\n   * Set the seed equal to this value.\r\n   * Return this value.\r\n\r\nThis generator has many nice properties, but has significant problems as a good random source.  The Wikipedia article linked above describes some of the strengths and weaknesses.  In short, if you need good random values, this is probably not a very good approach.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Linear_congruential_generator","title":"Is this a &quot;good enough&quot; random algorithm; why isn&#39;t it used if it&#39;s faster?","body":"<p>What you are describing is a type of random generator called a <a href=\"http://en.wikipedia.org/wiki/Linear_congruential_generator\" rel=\"nofollow noreferrer\">linear congruential generator</a>.  The generator works as follows:</p>\n<ul>\n<li>Start with a seed value and multiplier.</li>\n<li>To generate a random number:\n<ul>\n<li>Multiply the seed by the multiplier.</li>\n<li>Set the seed equal to this value.</li>\n<li>Return this value.</li>\n</ul>\n</li>\n</ul>\n<p>This generator has many nice properties, but has significant problems as a good random source.  The Wikipedia article linked above describes some of the strengths and weaknesses.  In short, if you need good random values, this is probably not a very good approach.</p>\n"},{"tags":[],"owner":{"display_name":"user149341"},"down_vote_count":1,"up_vote_count":114,"is_accepted":false,"score":113,"last_activity_date":1358988786,"creation_date":1358988786,"answer_id":14492114,"question_id":14491966,"body_markdown":"Your random number function is poor, as it has too little internal state -- the number output by the function at any given step is entirely dependent on the previous number. For instance, if we assume that `magicNumber` is 2 (by way of example), then the sequence:\r\n\r\n    0.10 -&gt; 0.20\r\n\r\nis strongly mirrored by similar sequences:\r\n\r\n    0.09 -&gt; 0.18\r\n    0.11 -&gt; 0.22\r\n\r\nIn many cases, this will generate noticeable correlations in your game -- for instance, if you make successive calls to your function to generate X and Y coordinates for objects, the objects will form clear diagonal patterns.\r\n\r\nUnless you have good reason to believe that the random number generator is slowing your application down (and this is VERY unlikely), there is no good reason to try and write your own.","title":"Is this a &quot;good enough&quot; random algorithm; why isn&#39;t it used if it&#39;s faster?","body":"<p>Your random number function is poor, as it has too little internal state -- the number output by the function at any given step is entirely dependent on the previous number. For instance, if we assume that <code>magicNumber</code> is 2 (by way of example), then the sequence:</p>\n\n<pre><code>0.10 -&gt; 0.20\n</code></pre>\n\n<p>is strongly mirrored by similar sequences:</p>\n\n<pre><code>0.09 -&gt; 0.18\n0.11 -&gt; 0.22\n</code></pre>\n\n<p>In many cases, this will generate noticeable correlations in your game -- for instance, if you make successive calls to your function to generate X and Y coordinates for objects, the objects will form clear diagonal patterns.</p>\n\n<p>Unless you have good reason to believe that the random number generator is slowing your application down (and this is VERY unlikely), there is no good reason to try and write your own.</p>\n"},{"tags":[],"owner":{"account_id":232333,"reputation":21533,"user_id":497106,"display_name":"Patashu"},"down_vote_count":1,"up_vote_count":38,"is_accepted":false,"score":37,"last_activity_date":1358988880,"creation_date":1358988880,"answer_id":14492128,"question_id":14491966,"body_markdown":"One problem with your random number generator is that there is no &#39;hidden state&#39; - if I know what random number you returned on the last call, I know every single random number you will send until the end of time, since there is only one possible next result, and so on and so on.\r\n\r\nAnother thing to consider is the &#39;period&#39; of your random number generator. Obviously with a finite state size, equal to the mantissa portion of a double, it will only be able to return at most 2^52 values before looping. But that&#39;s in the best case - can you prove that there are no loops of period 1, 2, 3, 4...? If there are, your RNG will have awful, degenerate behavior in those cases.\r\n\r\nIn addition, will your random number generation have a uniform distribution for all starting points? If it does not, then your RNG will be biased - or worse, biased in different ways depending on the starting seed.\r\n\r\nIf you can answer all of these questions, awesome. If you can&#39;t, then you know why most people do not re-invent the wheel and use a proven random number generator ;)\r\n\r\n*(By the way, a good adage is: The fastest code is code that does not run. You could make the fastest random() in the world, but it&#39;s no good if it is not very random)*","title":"Is this a &quot;good enough&quot; random algorithm; why isn&#39;t it used if it&#39;s faster?","body":"<p>One problem with your random number generator is that there is no 'hidden state' - if I know what random number you returned on the last call, I know every single random number you will send until the end of time, since there is only one possible next result, and so on and so on.</p>\n\n<p>Another thing to consider is the 'period' of your random number generator. Obviously with a finite state size, equal to the mantissa portion of a double, it will only be able to return at most 2^52 values before looping. But that's in the best case - can you prove that there are no loops of period 1, 2, 3, 4...? If there are, your RNG will have awful, degenerate behavior in those cases.</p>\n\n<p>In addition, will your random number generation have a uniform distribution for all starting points? If it does not, then your RNG will be biased - or worse, biased in different ways depending on the starting seed.</p>\n\n<p>If you can answer all of these questions, awesome. If you can't, then you know why most people do not re-invent the wheel and use a proven random number generator ;)</p>\n\n<p><em>(By the way, a good adage is: The fastest code is code that does not run. You could make the fastest random() in the world, but it's no good if it is not very random)</em></p>\n"},{"tags":[],"owner":{"account_id":149301,"reputation":88700,"user_id":361684,"accept_rate":90,"display_name":"gilly3"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1358990035,"creation_date":1358990035,"answer_id":14492309,"question_id":14491966,"body_markdown":"I put together [a quick mock-up of your algorithm](http://jsfiddle.net/Dhtzh/) in JavaScript to evaluate the results.  It generates 100,000 random integers from 0 - 99 and tracks the instance of each integer.\r\n\r\nThe first thing I notice is that you are more likely to get a low number than a high number.  You see this the most when `seed1` is high and `seed2` is low.  In a couple of instances, I got only 3 numbers.\r\n\r\nAt best, your algorithm needs some refining.","title":"Is this a &quot;good enough&quot; random algorithm; why isn&#39;t it used if it&#39;s faster?","body":"<p>I put together <a href=\"http://jsfiddle.net/Dhtzh/\">a quick mock-up of your algorithm</a> in JavaScript to evaluate the results.  It generates 100,000 random integers from 0 - 99 and tracks the instance of each integer.</p>\n\n<p>The first thing I notice is that you are more likely to get a low number than a high number.  You see this the most when <code>seed1</code> is high and <code>seed2</code> is low.  In a couple of instances, I got only 3 numbers.</p>\n\n<p>At best, your algorithm needs some refining.</p>\n"},{"tags":[],"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":1,"up_vote_count":353,"is_accepted":true,"score":352,"last_activity_date":1362164288,"creation_date":1358990099,"answer_id":14492320,"question_id":14491966,"body_markdown":"Your `QuickRandom` implementation hasn&#39;t really an uniform distribution. The frequencies are generally higher at the lower values while `Math.random()` has a more uniform distribution. Here&#39;s a [SSCCE][1] which shows that:\r\n\r\n    package com.stackoverflow.q14491966;\r\n\r\n    import java.util.Arrays;\r\n\r\n    public class Test {\r\n\r\n        public static void main(String[] args) throws Exception {\r\n            QuickRandom qr = new QuickRandom();\r\n            int[] frequencies = new int[10];\r\n            for (int i = 0; i &lt; 100000; i++) {\r\n                frequencies[(int) (qr.random() * 10)]++;\r\n            }\r\n            printDistribution(&quot;QR&quot;, frequencies);\r\n\r\n            frequencies = new int[10];\r\n            for (int i = 0; i &lt; 100000; i++) {\r\n                frequencies[(int) (Math.random() * 10)]++;\r\n            }\r\n            printDistribution(&quot;MR&quot;, frequencies);\r\n        }\r\n\r\n        public static void printDistribution(String name, int[] frequencies) {\r\n            System.out.printf(&quot;%n%s distribution |8000     |9000     |10000    |11000    |12000%n&quot;, name);\r\n            for (int i = 0; i &lt; 10; i++) {\r\n                char[] bar = &quot;                                                  &quot;.toCharArray(); // 50 chars.\r\n                Arrays.fill(bar, 0, Math.max(0, Math.min(50, frequencies[i] / 100 - 80)), &#39;#&#39;);\r\n                System.out.printf(&quot;0.%dxxx: %6d  :%s%n&quot;, i, frequencies[i], new String(bar));\r\n            }\r\n        }\r\n\r\n    }\r\n\r\nThe average result looks like this:\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    QR distribution |8000     |9000     |10000    |11000    |12000\r\n    0.0xxx:  11376  :#################################                 \r\n    0.1xxx:  11178  :###############################                   \r\n    0.2xxx:  11312  :#################################                 \r\n    0.3xxx:  10809  :############################                      \r\n    0.4xxx:  10242  :######################                            \r\n    0.5xxx:   8860  :########                                          \r\n    0.6xxx:   9004  :##########                                        \r\n    0.7xxx:   8987  :#########                                         \r\n    0.8xxx:   9075  :##########                                        \r\n    0.9xxx:   9157  :###########                                       \r\n    \r\n    MR distribution |8000     |9000     |10000    |11000    |12000\r\n    0.0xxx:  10097  :####################                              \r\n    0.1xxx:   9901  :###################                               \r\n    0.2xxx:  10018  :####################                              \r\n    0.3xxx:   9956  :###################                               \r\n    0.4xxx:   9974  :###################                               \r\n    0.5xxx:  10007  :####################                              \r\n    0.6xxx:  10136  :#####################                             \r\n    0.7xxx:   9937  :###################                               \r\n    0.8xxx:  10029  :####################                              \r\n    0.9xxx:   9945  :###################    \r\n\r\nIf you repeat the test, you&#39;ll see that the QR distribution varies heavily, depending on the initial seeds, while the MR distribution is stable. Sometimes it reaches the desired uniform distribution, but more than often it doesn&#39;t. Here&#39;s one of the more extreme examples, it&#39;s even beyond the borders of the graph:\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    QR distribution |8000     |9000     |10000    |11000    |12000\r\n    0.0xxx:  41788  :##################################################\r\n    0.1xxx:  17495  :##################################################\r\n    0.2xxx:  10285  :######################                            \r\n    0.3xxx:   7273  :                                                  \r\n    0.4xxx:   5643  :                                                  \r\n    0.5xxx:   4608  :                                                  \r\n    0.6xxx:   3907  :                                                  \r\n    0.7xxx:   3350  :                                                  \r\n    0.8xxx:   2999  :                                                  \r\n    0.9xxx:   2652  :                                                  \r\n\r\n\r\n  [1]: http://sscce.org","title":"Is this a &quot;good enough&quot; random algorithm; why isn&#39;t it used if it&#39;s faster?","body":"<p>Your <code>QuickRandom</code> implementation hasn't really an uniform distribution. The frequencies are generally higher at the lower values while <code>Math.random()</code> has a more uniform distribution. Here's a <a href=\"http://sscce.org\" rel=\"noreferrer\">SSCCE</a> which shows that:</p>\n\n<pre><code>package com.stackoverflow.q14491966;\n\nimport java.util.Arrays;\n\npublic class Test {\n\n    public static void main(String[] args) throws Exception {\n        QuickRandom qr = new QuickRandom();\n        int[] frequencies = new int[10];\n        for (int i = 0; i &lt; 100000; i++) {\n            frequencies[(int) (qr.random() * 10)]++;\n        }\n        printDistribution(\"QR\", frequencies);\n\n        frequencies = new int[10];\n        for (int i = 0; i &lt; 100000; i++) {\n            frequencies[(int) (Math.random() * 10)]++;\n        }\n        printDistribution(\"MR\", frequencies);\n    }\n\n    public static void printDistribution(String name, int[] frequencies) {\n        System.out.printf(\"%n%s distribution |8000     |9000     |10000    |11000    |12000%n\", name);\n        for (int i = 0; i &lt; 10; i++) {\n            char[] bar = \"                                                  \".toCharArray(); // 50 chars.\n            Arrays.fill(bar, 0, Math.max(0, Math.min(50, frequencies[i] / 100 - 80)), '#');\n            System.out.printf(\"0.%dxxx: %6d  :%s%n\", i, frequencies[i], new String(bar));\n        }\n    }\n\n}\n</code></pre>\n\n<p>The average result looks like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>QR distribution |8000     |9000     |10000    |11000    |12000\n0.0xxx:  11376  :#################################                 \n0.1xxx:  11178  :###############################                   \n0.2xxx:  11312  :#################################                 \n0.3xxx:  10809  :############################                      \n0.4xxx:  10242  :######################                            \n0.5xxx:   8860  :########                                          \n0.6xxx:   9004  :##########                                        \n0.7xxx:   8987  :#########                                         \n0.8xxx:   9075  :##########                                        \n0.9xxx:   9157  :###########                                       \n\nMR distribution |8000     |9000     |10000    |11000    |12000\n0.0xxx:  10097  :####################                              \n0.1xxx:   9901  :###################                               \n0.2xxx:  10018  :####################                              \n0.3xxx:   9956  :###################                               \n0.4xxx:   9974  :###################                               \n0.5xxx:  10007  :####################                              \n0.6xxx:  10136  :#####################                             \n0.7xxx:   9937  :###################                               \n0.8xxx:  10029  :####################                              \n0.9xxx:   9945  :###################    \n</code></pre>\n\n<p>If you repeat the test, you'll see that the QR distribution varies heavily, depending on the initial seeds, while the MR distribution is stable. Sometimes it reaches the desired uniform distribution, but more than often it doesn't. Here's one of the more extreme examples, it's even beyond the borders of the graph:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>QR distribution |8000     |9000     |10000    |11000    |12000\n0.0xxx:  41788  :##################################################\n0.1xxx:  17495  :##################################################\n0.2xxx:  10285  :######################                            \n0.3xxx:   7273  :                                                  \n0.4xxx:   5643  :                                                  \n0.5xxx:   4608  :                                                  \n0.6xxx:   3907  :                                                  \n0.7xxx:   3350  :                                                  \n0.8xxx:   2999  :                                                  \n0.9xxx:   2652  :                                                  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1300809,"reputation":56617,"user_id":1250772,"accept_rate":45,"display_name":"Kaz"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1359008400,"creation_date":1359008400,"answer_id":14495128,"question_id":14491966,"body_markdown":"If the `Math.Random()` function calls the operating system to get the time of day, then you cannot compare it to your function. Your function is a PRNG, whereas that function is striving for real random numbers. Apples and oranges.\r\n\r\nYour PRNG may be fast, but it does not have enough state information to achieve a long period before it repeats (and its logic is not sophisticated enough to even achieve the periods that are possible with that much state information).\r\n\r\nPeriod is the length of the sequence before your PRNG begins to repeat itself.  This happens as soon as the PRNG machine makes a state transition to a state which is identical to some past state. From there, it will repeat the transitions which began in that state. Another problem with PRNG&#39;s can be a low number of unique sequences, as well as degenerate convergence on a particular sequence which repeats. There can also be undesirable patterns. For instance, suppose that a PRNG looks fairly random when the numbers are printed in decimal, but an inspection of the values in binary shows that bit 4 is simply toggling between 0 and 1 on each call. Oops!\r\n\r\nTake a look at the Mersenne Twister and other algorithms. There are ways to strike a balance between the period length and CPU cycles. One basic approach (used in the Mersenne Twister) is to cycle around in the state vector. That is to say, when a number is being generated, it is not based on the entire state, just on a few words from the state array subject to a few bit operations. But at each step, the algorithm also moves around in the array, scrambling the contents a little bit at a time.\r\n","title":"Is this a &quot;good enough&quot; random algorithm; why isn&#39;t it used if it&#39;s faster?","body":"<p>If the <code>Math.Random()</code> function calls the operating system to get the time of day, then you cannot compare it to your function. Your function is a PRNG, whereas that function is striving for real random numbers. Apples and oranges.</p>\n\n<p>Your PRNG may be fast, but it does not have enough state information to achieve a long period before it repeats (and its logic is not sophisticated enough to even achieve the periods that are possible with that much state information).</p>\n\n<p>Period is the length of the sequence before your PRNG begins to repeat itself.  This happens as soon as the PRNG machine makes a state transition to a state which is identical to some past state. From there, it will repeat the transitions which began in that state. Another problem with PRNG's can be a low number of unique sequences, as well as degenerate convergence on a particular sequence which repeats. There can also be undesirable patterns. For instance, suppose that a PRNG looks fairly random when the numbers are printed in decimal, but an inspection of the values in binary shows that bit 4 is simply toggling between 0 and 1 on each call. Oops!</p>\n\n<p>Take a look at the Mersenne Twister and other algorithms. There are ways to strike a balance between the period length and CPU cycles. One basic approach (used in the Mersenne Twister) is to cycle around in the state vector. That is to say, when a number is being generated, it is not based on the entire state, just on a few words from the state array subject to a few bit operations. But at each step, the algorithm also moves around in the array, scrambling the contents a little bit at a time.</p>\n"},{"tags":[],"owner":{"account_id":1914880,"reputation":11452,"user_id":1839777,"display_name":"vonbrand"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1359033460,"creation_date":1359033460,"answer_id":14502259,"question_id":14491966,"body_markdown":"There are many, many pseudo random number generators out there. For example Knuth&#39;s [ranarray][1], the [Mersenne twister][2], or look for LFSR generators. Knuth&#39;s monumental &quot;Seminumerical algorithms&quot; analizes the area, and proposes some linear congruential generators (simple to implement, fast). \r\n\r\nBut I&#39;d suggest you just stick to `java.util.Random` or `Math.random`, they fast and at least OK for occasional use (i.e., games and such). If you are just paranoid on the distribution (some Monte Carlo program, or a genetic algorithm), check out their implementation (source is available somewhere), and seed them with some truly random number, either from your operating system or from [random.org][3]. If this is required for some application where security is critical, you&#39;ll have to dig yourself. And as in that case you shouldn&#39;t believe what some colored square with missing bits spouts here, I&#39;ll shut up now.\r\n\r\n\r\n  [1]: http://www-cs-faculty.stanford.edu/~uno/programs.html\r\n  [2]: http://saluc.engr.uconn.edu/refs/crypto/rng/matsumoto98mersenne.pdf\r\n  [3]: http://random.org","title":"Is this a &quot;good enough&quot; random algorithm; why isn&#39;t it used if it&#39;s faster?","body":"<p>There are many, many pseudo random number generators out there. For example Knuth's <a href=\"http://www-cs-faculty.stanford.edu/~uno/programs.html\">ranarray</a>, the <a href=\"http://saluc.engr.uconn.edu/refs/crypto/rng/matsumoto98mersenne.pdf\">Mersenne twister</a>, or look for LFSR generators. Knuth's monumental \"Seminumerical algorithms\" analizes the area, and proposes some linear congruential generators (simple to implement, fast). </p>\n\n<p>But I'd suggest you just stick to <code>java.util.Random</code> or <code>Math.random</code>, they fast and at least OK for occasional use (i.e., games and such). If you are just paranoid on the distribution (some Monte Carlo program, or a genetic algorithm), check out their implementation (source is available somewhere), and seed them with some truly random number, either from your operating system or from <a href=\"http://random.org\">random.org</a>. If this is required for some application where security is critical, you'll have to dig yourself. And as in that case you shouldn't believe what some colored square with missing bits spouts here, I'll shut up now.</p>\n"},{"tags":[],"owner":{"account_id":539550,"reputation":3750,"user_id":907415,"accept_rate":98,"display_name":"Cris Stringfellow"},"down_vote_count":0,"up_vote_count":36,"is_accepted":false,"score":36,"last_activity_date":1359061941,"creation_date":1359061941,"answer_id":14510880,"question_id":14491966,"body_markdown":"One common test I always did when developing PRNGs was to :\r\n\r\n 1. Convert output to char values\r\n 2. Write chars value to a file\r\n 3. Compress file\r\n\r\nThis let me quickly iterate on ideas that were &quot;good enough&quot; PRNGs for sequences of around 1 to 20 megabytes. It also gave a better top down picture than just inspecting it by eye, as any &quot;good enough&quot; PRNG with half-a-word of state could quickly exceed your eyes ability to see the cycle point. \r\n\r\nIf I was really picky, I might take the good algorithms and run the DIEHARD/NIST tests on them, to get more of an insight, and then go back and tweak some more.\r\n\r\nThe advantage of the compression test, as opposed to a frequency analysis is that, trivially it is easy to construct a good distribution : simply output a 256 length block containing all chars of values 0 - 255, and do this 100,000 times. But this sequence has a cycle of length 256. \r\n\r\nA skewed distribution, even by a small margin, should be picked up by a compression algorithm, particularly if you give it enough (say 1 megabyte) of the sequence to work with. If some characters, or bigrams, or n-grams occur more frequently, a compression algorithm can encode this distribution skew to codes that favor the frequent occurrences with shorter code words, and you get a delta of compression.\r\n\r\nSince most compression algorithms are fast, and they require no implementation (as OSs have them just lying around), the compression test is a very useful one for quickly rating pass/fail for an PRNG you might be developing.\r\n\r\nGood luck with your experiments!\r\n\r\nOh, I performed this test on the rng you have above, using the following small mod of your code :\r\n\r\n    import java.io.*;\r\n\r\n    public class QuickRandom {\r\n        private double prevNum;\r\n        private double magicNumber;\r\n    \r\n        public QuickRandom(double seed1, double seed2) {\r\n            if (seed1 &gt;= 1 || seed1 &lt; 0) throw new IllegalArgumentException(&quot;Seed 1 must be &gt;= 0 and &lt; 1, not &quot; + seed1);\r\n            prevNum = seed1;\r\n            if (seed2 &lt;= 1 || seed2 &gt; 10) throw new IllegalArgumentException(&quot;Seed 2 must be &gt; 1 and &lt;= 10, not &quot; + seed2);\r\n            magicNumber = seed2;\r\n        }\r\n    \r\n        public QuickRandom() {\r\n            this(Math.random(), Math.random() * 10);\r\n        }\r\n    \r\n        public double random() {\r\n            return prevNum = (prevNum*magicNumber)%1;\r\n        }\r\n    \r\n    \tpublic static void main(String[] args) throws Exception {\r\n    \t\tQuickRandom qr = new QuickRandom();\r\n    \t\tFileOutputStream fout = new FileOutputStream(&quot;qr20M.bin&quot;);\r\n    \r\n    \t\tfor (int i = 0; i &lt; 20000000; i ++) {\r\n    \t\t    fout.write((char)(qr.random()*256));\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nThe results were :\r\n\r\n    Cris-Mac-Book-2:rt cris$ zip -9 qr20M.zip qr20M.bin2\r\n    adding: qr20M.bin2 (deflated 16%)\r\n    Cris-Mac-Book-2:rt cris$ ls -al\r\n    total 104400\r\n    drwxr-xr-x   8 cris  staff       272 Jan 25 05:09 .\r\n    drwxr-xr-x+ 48 cris  staff      1632 Jan 25 05:04 ..\r\n    -rw-r--r--   1 cris  staff      1243 Jan 25 04:54 QuickRandom.class\r\n    -rw-r--r--   1 cris  staff       883 Jan 25 05:04 QuickRandom.java\r\n    -rw-r--r--   1 cris  staff  16717260 Jan 25 04:55 qr20M.bin.gz\r\n    -rw-r--r--   1 cris  staff  20000000 Jan 25 05:07 qr20M.bin2\r\n    -rw-r--r--   1 cris  staff  16717402 Jan 25 05:09 qr20M.zip\r\n\r\n\r\nI would consider an PRNG good if the output file could not be compressed at all.\r\nTo be honest, I did not think your PRNG would do so well, only 16% on ~20 Megs is pretty impressive for such a simple construction. But I still consider it a fail.","title":"Is this a &quot;good enough&quot; random algorithm; why isn&#39;t it used if it&#39;s faster?","body":"<p>One common test I always did when developing PRNGs was to :</p>\n\n<ol>\n<li>Convert output to char values</li>\n<li>Write chars value to a file</li>\n<li>Compress file</li>\n</ol>\n\n<p>This let me quickly iterate on ideas that were \"good enough\" PRNGs for sequences of around 1 to 20 megabytes. It also gave a better top down picture than just inspecting it by eye, as any \"good enough\" PRNG with half-a-word of state could quickly exceed your eyes ability to see the cycle point. </p>\n\n<p>If I was really picky, I might take the good algorithms and run the DIEHARD/NIST tests on them, to get more of an insight, and then go back and tweak some more.</p>\n\n<p>The advantage of the compression test, as opposed to a frequency analysis is that, trivially it is easy to construct a good distribution : simply output a 256 length block containing all chars of values 0 - 255, and do this 100,000 times. But this sequence has a cycle of length 256. </p>\n\n<p>A skewed distribution, even by a small margin, should be picked up by a compression algorithm, particularly if you give it enough (say 1 megabyte) of the sequence to work with. If some characters, or bigrams, or n-grams occur more frequently, a compression algorithm can encode this distribution skew to codes that favor the frequent occurrences with shorter code words, and you get a delta of compression.</p>\n\n<p>Since most compression algorithms are fast, and they require no implementation (as OSs have them just lying around), the compression test is a very useful one for quickly rating pass/fail for an PRNG you might be developing.</p>\n\n<p>Good luck with your experiments!</p>\n\n<p>Oh, I performed this test on the rng you have above, using the following small mod of your code :</p>\n\n<pre><code>import java.io.*;\n\npublic class QuickRandom {\n    private double prevNum;\n    private double magicNumber;\n\n    public QuickRandom(double seed1, double seed2) {\n        if (seed1 &gt;= 1 || seed1 &lt; 0) throw new IllegalArgumentException(\"Seed 1 must be &gt;= 0 and &lt; 1, not \" + seed1);\n        prevNum = seed1;\n        if (seed2 &lt;= 1 || seed2 &gt; 10) throw new IllegalArgumentException(\"Seed 2 must be &gt; 1 and &lt;= 10, not \" + seed2);\n        magicNumber = seed2;\n    }\n\n    public QuickRandom() {\n        this(Math.random(), Math.random() * 10);\n    }\n\n    public double random() {\n        return prevNum = (prevNum*magicNumber)%1;\n    }\n\n    public static void main(String[] args) throws Exception {\n        QuickRandom qr = new QuickRandom();\n        FileOutputStream fout = new FileOutputStream(\"qr20M.bin\");\n\n        for (int i = 0; i &lt; 20000000; i ++) {\n            fout.write((char)(qr.random()*256));\n        }\n    }\n}\n</code></pre>\n\n<p>The results were :</p>\n\n<pre><code>Cris-Mac-Book-2:rt cris$ zip -9 qr20M.zip qr20M.bin2\nadding: qr20M.bin2 (deflated 16%)\nCris-Mac-Book-2:rt cris$ ls -al\ntotal 104400\ndrwxr-xr-x   8 cris  staff       272 Jan 25 05:09 .\ndrwxr-xr-x+ 48 cris  staff      1632 Jan 25 05:04 ..\n-rw-r--r--   1 cris  staff      1243 Jan 25 04:54 QuickRandom.class\n-rw-r--r--   1 cris  staff       883 Jan 25 05:04 QuickRandom.java\n-rw-r--r--   1 cris  staff  16717260 Jan 25 04:55 qr20M.bin.gz\n-rw-r--r--   1 cris  staff  20000000 Jan 25 05:07 qr20M.bin2\n-rw-r--r--   1 cris  staff  16717402 Jan 25 05:09 qr20M.zip\n</code></pre>\n\n<p>I would consider an PRNG good if the output file could not be compressed at all.\nTo be honest, I did not think your PRNG would do so well, only 16% on ~20 Megs is pretty impressive for such a simple construction. But I still consider it a fail.</p>\n"},{"tags":[],"owner":{"account_id":266709,"reputation":11846,"user_id":554431,"display_name":"bestsss"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1359075171,"creation_date":1359075171,"answer_id":14513598,"question_id":14491966,"body_markdown":"java.util.Random is not much different, a basic LCG described by Knuth. However it has main 2 main advantages/differences:\r\n\r\n* thread safe - each update is a CAS which is more expensive than a simple write and needs a branch (even if perfectly predicted single threaded). Depending on the CPU it could be significant difference.\r\n* undisclosed internal state - this is very important for anything non-trivial. You wish the random numbers not to be predictable.\r\n\r\nBelow it&#39;s the main routine generating &#39;random&#39; integers in java.util.Random.\r\n&lt;pre&gt;&lt;code&gt;\r\n  protected int next(int bits) {\r\n        long oldseed, nextseed;\r\n        AtomicLong seed = this.seed;\r\n        do {\r\n          oldseed = seed.get();\r\n          nextseed = (oldseed * multiplier + addend) &amp; mask;\r\n        } while (!seed.compareAndSet(oldseed, nextseed));\r\n        return (int)(nextseed &gt;&gt;&gt; (48 - bits));\r\n    }\r\n\r\n&lt;/code&gt;&lt;/pre&gt;\r\n\r\nIf you remove the AtomicLong and the undisclosed sate (i.e. using all bits of the `long`), you&#39;d get more performance than the double multiplication/modulo. \r\n\r\nLast note: `Math.random` should not be used for anything but simple tests, it&#39;s prone to contention and if you have even a couple of threads calling it concurrently the performance degrades. One little known historical feature of it is the introduction of CAS in java - to beat an infamous benchmark (first by IBM via intrinsics and then Sun made &quot;CAS from Java&quot;) ","title":"Is this a &quot;good enough&quot; random algorithm; why isn&#39;t it used if it&#39;s faster?","body":"<p>java.util.Random is not much different, a basic LCG described by Knuth. However it has main 2 main advantages/differences:</p>\n\n<ul>\n<li>thread safe - each update is a CAS which is more expensive than a simple write and needs a branch (even if perfectly predicted single threaded). Depending on the CPU it could be significant difference.</li>\n<li>undisclosed internal state - this is very important for anything non-trivial. You wish the random numbers not to be predictable.</li>\n</ul>\n\n<p>Below it's the main routine generating 'random' integers in java.util.Random.</p>\n\n<pre><code>\n  protected int next(int bits) {\n        long oldseed, nextseed;\n        AtomicLong seed = this.seed;\n        do {\n          oldseed = seed.get();\n          nextseed = (oldseed * multiplier + addend) & mask;\n        } while (!seed.compareAndSet(oldseed, nextseed));\n        return (int)(nextseed >>> (48 - bits));\n    }\n\n</code></pre>\n\n<p>If you remove the AtomicLong and the undisclosed sate (i.e. using all bits of the <code>long</code>), you'd get more performance than the double multiplication/modulo. </p>\n\n<p>Last note: <code>Math.random</code> should not be used for anything but simple tests, it's prone to contention and if you have even a couple of threads calling it concurrently the performance degrades. One little known historical feature of it is the introduction of CAS in java - to beat an infamous benchmark (first by IBM via intrinsics and then Sun made \"CAS from Java\") </p>\n"},{"tags":[],"owner":{"account_id":47227,"reputation":15660,"user_id":139766,"accept_rate":88,"display_name":"Callum Rogers"},"down_vote_count":0,"up_vote_count":110,"is_accepted":false,"score":110,"last_activity_date":1359249680,"creation_date":1359133399,"answer_id":14526729,"question_id":14491966,"body_markdown":"The real problem with this is that it&#39;s output histogram is dependent on the initial seed far to much - much of the time it will end up with a near uniform output but a lot of the time will have distinctly un-uniform output.\r\n\r\nInspired by [this article about how bad php&#39;s `rand()` function is][1], I made some random matrix images using `QuickRandom` and `System.Random`. This run shows how sometimes the seed can have a bad effect (in this case favouring lower numbers) where as `System.Random` is pretty uniform.\r\n\r\n`QuickRandom`\r\n===\r\n![][2]\r\n\r\n`System.Random`\r\n===\r\n![][3]\r\n\r\nEven Worse\r\n===\r\n\r\nIf we initialise `QuickRandom` as `new QuickRandom(0.01, 1.03)` we get this image:\r\n\r\n![][4]\r\n\r\nThe Code\r\n===\r\n\r\n    using System;\r\n    using System.Drawing;\r\n    using System.Drawing.Imaging;\r\n    \r\n    namespace QuickRandomTest\r\n    {\r\n        public class QuickRandom\r\n        {\r\n            private double prevNum;\r\n            private readonly double magicNumber;\r\n    \r\n            private static readonly Random rand = new Random();\r\n    \r\n            public QuickRandom(double seed1, double seed2)\r\n            {\r\n                if (seed1 &gt;= 1 || seed1 &lt; 0) throw new ArgumentException(&quot;Seed 1 must be &gt;= 0 and &lt; 1, not &quot; + seed1);\r\n                prevNum = seed1;\r\n                if (seed2 &lt;= 1 || seed2 &gt; 10) throw new ArgumentException(&quot;Seed 2 must be &gt; 1 and &lt;= 10, not &quot; + seed2);\r\n                magicNumber = seed2;\r\n            }\r\n    \r\n            public QuickRandom()\r\n                : this(rand.NextDouble(), rand.NextDouble() * 10)\r\n            {\r\n            }\r\n    \r\n            public double Random()\r\n            {\r\n                return prevNum = (prevNum * magicNumber) % 1;\r\n            }\r\n        }\r\n    \r\n        class Program\r\n        {\r\n            static void Main(string[] args)\r\n            {\r\n                var rand = new Random();\r\n                var qrand = new QuickRandom();\r\n                int w = 600;\r\n                int h = 600;\r\n                CreateMatrix(w, h, rand.NextDouble).Save(&quot;System.Random.png&quot;, ImageFormat.Png);\r\n                CreateMatrix(w, h, qrand.Random).Save(&quot;QuickRandom.png&quot;, ImageFormat.Png);\r\n            }\r\n    \r\n            private static Image CreateMatrix(int width, int height, Func&lt;double&gt; f)\r\n            {\r\n                var bitmap = new Bitmap(width, height);\r\n                for (int y = 0; y &lt; height; y++) {\r\n                    for (int x = 0; x &lt; width; x++) {\r\n                        var c = (int) (f()*255);\r\n                        bitmap.SetPixel(x, y, Color.FromArgb(c,c,c));\r\n                    }\r\n                }\r\n    \r\n                return bitmap;\r\n            }\r\n        }\r\n    }\r\n\r\n  [1]: http://boallen.com/random-numbers.html\r\n  [2]: http://i.stack.imgur.com/6LaLK.png\r\n  [3]: http://i.stack.imgur.com/CBwTp.png\r\n  [4]: http://i.stack.imgur.com/p78FO.png","title":"Is this a &quot;good enough&quot; random algorithm; why isn&#39;t it used if it&#39;s faster?","body":"<p>The real problem with this is that it's output histogram is dependent on the initial seed far to much - much of the time it will end up with a near uniform output but a lot of the time will have distinctly un-uniform output.</p>\n\n<p>Inspired by <a href=\"http://boallen.com/random-numbers.html\" rel=\"noreferrer\">this article about how bad php's <code>rand()</code> function is</a>, I made some random matrix images using <code>QuickRandom</code> and <code>System.Random</code>. This run shows how sometimes the seed can have a bad effect (in this case favouring lower numbers) where as <code>System.Random</code> is pretty uniform.</p>\n\n<h1><code>QuickRandom</code></h1>\n\n<p><img src=\"https://i.stack.imgur.com/6LaLK.png\" alt=\"\"></p>\n\n<h1><code>System.Random</code></h1>\n\n<p><img src=\"https://i.stack.imgur.com/CBwTp.png\" alt=\"\"></p>\n\n<h1>Even Worse</h1>\n\n<p>If we initialise <code>QuickRandom</code> as <code>new QuickRandom(0.01, 1.03)</code> we get this image:</p>\n\n<p><img src=\"https://i.stack.imgur.com/p78FO.png\" alt=\"\"></p>\n\n<h1>The Code</h1>\n\n<pre><code>using System;\nusing System.Drawing;\nusing System.Drawing.Imaging;\n\nnamespace QuickRandomTest\n{\n    public class QuickRandom\n    {\n        private double prevNum;\n        private readonly double magicNumber;\n\n        private static readonly Random rand = new Random();\n\n        public QuickRandom(double seed1, double seed2)\n        {\n            if (seed1 &gt;= 1 || seed1 &lt; 0) throw new ArgumentException(\"Seed 1 must be &gt;= 0 and &lt; 1, not \" + seed1);\n            prevNum = seed1;\n            if (seed2 &lt;= 1 || seed2 &gt; 10) throw new ArgumentException(\"Seed 2 must be &gt; 1 and &lt;= 10, not \" + seed2);\n            magicNumber = seed2;\n        }\n\n        public QuickRandom()\n            : this(rand.NextDouble(), rand.NextDouble() * 10)\n        {\n        }\n\n        public double Random()\n        {\n            return prevNum = (prevNum * magicNumber) % 1;\n        }\n    }\n\n    class Program\n    {\n        static void Main(string[] args)\n        {\n            var rand = new Random();\n            var qrand = new QuickRandom();\n            int w = 600;\n            int h = 600;\n            CreateMatrix(w, h, rand.NextDouble).Save(\"System.Random.png\", ImageFormat.Png);\n            CreateMatrix(w, h, qrand.Random).Save(\"QuickRandom.png\", ImageFormat.Png);\n        }\n\n        private static Image CreateMatrix(int width, int height, Func&lt;double&gt; f)\n        {\n            var bitmap = new Bitmap(width, height);\n            for (int y = 0; y &lt; height; y++) {\n                for (int x = 0; x &lt; width; x++) {\n                    var c = (int) (f()*255);\n                    bitmap.SetPixel(x, y, Color.FromArgb(c,c,c));\n                }\n            }\n\n            return bitmap;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1328773,"reputation":37883,"user_id":1273080,"accept_rate":100,"display_name":"Petr Janeček"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1381242080,"creation_date":1359382023,"answer_id":14563808,"question_id":14491966,"body_markdown":"It is very unlikely that random number generation performance would be an issue for any use-case you came up with unless accessing a single `Random` instance from multiple threads (because `Random` is `synchronized`).\r\n\r\nHowever, if that _really_ is the case and you need lots of random numbers fast, your solution is far too unreliable. Sometimes it gives good results, sometimes it gives _horrible_ results (based on the initial settings).\r\n\r\nIf you want the same numbers that the [`Random`](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html) class gives you, only faster, you could get rid of the synchronization in there:\r\n\r\n    public class QuickRandom {\r\n    \r\n    \tprivate long seed;\r\n    \r\n    \tprivate static final long MULTIPLIER = 0x5DEECE66DL;\r\n    \tprivate static final long ADDEND = 0xBL;\r\n    \tprivate static final long MASK = (1L &lt;&lt; 48) - 1;\r\n    \r\n    \tpublic QuickRandom() {\r\n    \t\tthis((8682522807148012L * 181783497276652981L) ^ System.nanoTime());\r\n    \t}\r\n    \t\r\n    \tpublic QuickRandom(long seed) {\r\n    \t\tthis.seed = (seed ^ MULTIPLIER) &amp; MASK;\r\n    \t}\r\n    \r\n    \tpublic double nextDouble() {\r\n    \t\treturn (((long)(next(26)) &lt;&lt; 27) + next(27)) / (double)(1L &lt;&lt; 53);\r\n    \t}\r\n    \r\n    \tprivate int next(int bits) {\r\n    \t\tseed = (seed * MULTIPLIER + ADDEND) &amp; MASK;\r\n    \t\treturn (int)(seed &gt;&gt;&gt; (48 - bits));\r\n    \t}\r\n    \r\n    }\r\n\r\nI simply took the [`java.util.Random`](http://hg.openjdk.java.net/jdk7u/jdk7u-gate/jdk/file/791e94e7b64f/src/share/classes/java/util/Random.java) code and removed the synchronization which results in _twice_ the performance compared to the original on my Oracle HotSpot JVM 7u9. It is still slower than your `QuickRandom`, but it gives much more consistent results. To be precise, for the same `seed` values and single threaded applications, it gives _the same_ pseudo-random numbers as the original `Random` class would.\r\n\r\n---\r\n\r\n&lt;sub&gt;This code is based on the current [`java.util.Random` in OpenJDK 7u](http://hg.openjdk.java.net/jdk7u/jdk7u-gate/jdk/file/791e94e7b64f/src/share/classes/java/util/Random.java) which is licensed under [GNU GPL v2](http://www.gnu.org/licenses/gpl-2.0.html).&lt;/sub&gt;\r\n\r\n---\r\n\r\n__EDIT__ 10 months later:\r\n\r\nI just discovered that you don&#39;t even have to use my code above to get an unsynchronized `Random` instance. There&#39;s one in the JDK, too!\r\n\r\nLook at Java 7&#39;s [`ThreadLocalRandom`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadLocalRandom.html) class. The code inside it is almost identical to my code above. The class is simply a local-thread-isolated `Random` version suitable for generating random numbers quickly. The only downside I can think of is that you can&#39;t set its `seed` manually.\r\n\r\nExample usage:\r\n\r\n    Random random = ThreadLocalRandom.current();","title":"Is this a &quot;good enough&quot; random algorithm; why isn&#39;t it used if it&#39;s faster?","body":"<p>It is very unlikely that random number generation performance would be an issue for any use-case you came up with unless accessing a single <code>Random</code> instance from multiple threads (because <code>Random</code> is <code>synchronized</code>).</p>\n\n<p>However, if that <em>really</em> is the case and you need lots of random numbers fast, your solution is far too unreliable. Sometimes it gives good results, sometimes it gives <em>horrible</em> results (based on the initial settings).</p>\n\n<p>If you want the same numbers that the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Random.html\" rel=\"nofollow\"><code>Random</code></a> class gives you, only faster, you could get rid of the synchronization in there:</p>\n\n<pre><code>public class QuickRandom {\n\n    private long seed;\n\n    private static final long MULTIPLIER = 0x5DEECE66DL;\n    private static final long ADDEND = 0xBL;\n    private static final long MASK = (1L &lt;&lt; 48) - 1;\n\n    public QuickRandom() {\n        this((8682522807148012L * 181783497276652981L) ^ System.nanoTime());\n    }\n\n    public QuickRandom(long seed) {\n        this.seed = (seed ^ MULTIPLIER) &amp; MASK;\n    }\n\n    public double nextDouble() {\n        return (((long)(next(26)) &lt;&lt; 27) + next(27)) / (double)(1L &lt;&lt; 53);\n    }\n\n    private int next(int bits) {\n        seed = (seed * MULTIPLIER + ADDEND) &amp; MASK;\n        return (int)(seed &gt;&gt;&gt; (48 - bits));\n    }\n\n}\n</code></pre>\n\n<p>I simply took the <a href=\"http://hg.openjdk.java.net/jdk7u/jdk7u-gate/jdk/file/791e94e7b64f/src/share/classes/java/util/Random.java\" rel=\"nofollow\"><code>java.util.Random</code></a> code and removed the synchronization which results in <em>twice</em> the performance compared to the original on my Oracle HotSpot JVM 7u9. It is still slower than your <code>QuickRandom</code>, but it gives much more consistent results. To be precise, for the same <code>seed</code> values and single threaded applications, it gives <em>the same</em> pseudo-random numbers as the original <code>Random</code> class would.</p>\n\n<hr>\n\n<p><sub>This code is based on the current <a href=\"http://hg.openjdk.java.net/jdk7u/jdk7u-gate/jdk/file/791e94e7b64f/src/share/classes/java/util/Random.java\" rel=\"nofollow\"><code>java.util.Random</code> in OpenJDK 7u</a> which is licensed under <a href=\"http://www.gnu.org/licenses/gpl-2.0.html\" rel=\"nofollow\">GNU GPL v2</a>.</sub></p>\n\n<hr>\n\n<p><strong>EDIT</strong> 10 months later:</p>\n\n<p>I just discovered that you don't even have to use my code above to get an unsynchronized <code>Random</code> instance. There's one in the JDK, too!</p>\n\n<p>Look at Java 7's <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadLocalRandom.html\" rel=\"nofollow\"><code>ThreadLocalRandom</code></a> class. The code inside it is almost identical to my code above. The class is simply a local-thread-isolated <code>Random</code> version suitable for generating random numbers quickly. The only downside I can think of is that you can't set its <code>seed</code> manually.</p>\n\n<p>Example usage:</p>\n\n<pre><code>Random random = ThreadLocalRandom.current();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1034085,"reputation":15781,"user_id":1041822,"accept_rate":100,"display_name":"higuaro"},"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1373738134,"creation_date":1359426333,"answer_id":14574674,"question_id":14491966,"body_markdown":"The fastest random generator you could implement is this:\r\n   \r\n  ![enter image description here][2]\r\n\r\nXD, jokes apart, besides everything said here, I&#39;d like to contribute citing \r\nthat testing random sequences &quot;is a hard task&quot; [ 1 ], and there are several test \r\nthat check certain properties of pseudo-random numbers, you can find a lot of them\r\nhere: http://www.random.org/analysis/#2005\r\n\r\nOne simple way to evaluate random generator &quot;quality&quot; is the old Chi Square test.\r\n\r\n    static double chisquare(int numberCount, int maxRandomNumber) {\r\n        long[] f = new long[maxRandomNumber];\r\n        for (long i = 0; i &lt; numberCount; i++) {\r\n            f[randomint(maxRandomNumber)]++;\r\n        }\r\n\r\n        long t = 0;\r\n        for (int i = 0; i &lt; maxRandomNumber; i++) {\r\n            t += f[i] * f[i];\r\n        }\r\n        return (((double) maxRandomNumber * t) / numberCount) - (double) (numberCount);\r\n    }\r\n\r\n Citing [ 1 ]\r\n\r\n   &gt; The idea of the χ&#178; test is to check whether or not the numbers produced are \r\n   &gt; spread out reasonably. If we generate _N_ positive numbers less than _r_, then we&#39;d\r\n   &gt; expect to get about _N_ / _r_ numbers of each value. But---and this is the essence of\r\n   &gt; the matter---the frequencies of ocurrence of all the values should not be exactly\r\n   &gt; the same: that wouldn&#39;t be random! \r\n\r\n   &gt; We simply calculate the sum of the squares of the frecuencies of occurrence of \r\n   &gt; each value, scaled by the expected frequency, and then substract off the size of the\r\n   &gt; sequence. This number, the &quot;χ&#178; statistic,&quot; may be expressed mathematically as\r\n\r\n   ![chi squared formula][3]  \r\n\r\n   &gt; If the χ&#178; statistic is close to _r_, then the numbers are random; if it is too far away,\r\n   &gt; then they are not. The notions of &quot;close&quot; and &quot;far away&quot; can be more precisely \r\n   &gt; defined: tables exist that tell exactly how relate the statistic to properties of \r\n   &gt; random sequences. For the simple test that we&#39;re performing, the statistic should\r\n   &gt; be within 2√r\r\n\r\nUsing this theory and the following code:\r\n\r\n\r\n    abstract class RandomFunction {\r\n        public abstract int randomint(int range); \r\n    }\r\n    \r\n    public class test {\r\n        static QuickRandom qr = new QuickRandom();\r\n    \r\n        static double chisquare(int numberCount, int maxRandomNumber, RandomFunction function) {\r\n            long[] f = new long[maxRandomNumber];\r\n            for (long i = 0; i &lt; numberCount; i++) {\r\n                f[function.randomint(maxRandomNumber)]++;\r\n            }\r\n\r\n            long t = 0;\r\n            for (int i = 0; i &lt; maxRandomNumber; i++) {\r\n                t += f[i] * f[i];\r\n            }\r\n            return (((double) maxRandomNumber * t) / numberCount) - (double) (numberCount);\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            final int ITERATION_COUNT = 1000;\r\n            final int N = 5000000;\r\n            final int R = 100000;\r\n\r\n            double total = 0.0;\r\n            RandomFunction qrRandomInt = new RandomFunction() {\r\n                @Override\r\n                public int randomint(int range) {\r\n                    return (int) (qr.random() * range);\r\n                }\r\n            }; \r\n            for (int i = 0; i &lt; ITERATION_COUNT; i++) {\r\n                total += chisquare(N, R, qrRandomInt);\r\n            }\r\n            System.out.printf(&quot;Ave Chi2 for QR: %f \\n&quot;, total / ITERATION_COUNT);        \r\n    \r\n            total = 0.0;\r\n            RandomFunction mathRandomInt = new RandomFunction() {\r\n                @Override\r\n                public int randomint(int range) {\r\n                    return (int) (Math.random() * range);\r\n                }\r\n            };         \r\n            for (int i = 0; i &lt; ITERATION_COUNT; i++) {\r\n                total += chisquare(N, R, mathRandomInt);\r\n            }\r\n            System.out.printf(&quot;Ave Chi2 for Math.random: %f \\n&quot;, total / ITERATION_COUNT);\r\n        }\r\n    }\r\n    \r\n\r\nI got the following result:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    Ave Chi2 for QR: 108965,078640\r\n    Ave Chi2 for Math.random: 99988,629040\r\n\r\nWhich, for QuickRandom, is far away from _r_  (outside of  `r &#177; 2 * sqrt(r)`)\r\n\r\nThat been said, QuickRandom could be fast but (as stated in another answers) is not good as a random number generator\r\n\r\n  [2]: http://i.stack.imgur.com/DeAn9.png\r\n  [3]: http://i.stack.imgur.com/GzPyq.png\r\n\r\n--------------------\r\n[ 1 ] SEDGEWICK ROBERT, [_Algorithms in C_](http://www.goodreads.com/book/show/2398048.Algorithims_in_C), Addinson Wesley Publishing Company, 1990, pages 516 to 518","title":"Is this a &quot;good enough&quot; random algorithm; why isn&#39;t it used if it&#39;s faster?","body":"<p>The fastest random generator you could implement is this:</p>\n\n<p><img src=\"https://i.stack.imgur.com/DeAn9.png\" alt=\"enter image description here\"></p>\n\n<p>XD, jokes apart, besides everything said here, I'd like to contribute citing \nthat testing random sequences \"is a hard task\" [ 1 ], and there are several test \nthat check certain properties of pseudo-random numbers, you can find a lot of them\nhere: <a href=\"http://www.random.org/analysis/#2005\" rel=\"noreferrer\">http://www.random.org/analysis/#2005</a></p>\n\n<p>One simple way to evaluate random generator \"quality\" is the old Chi Square test.</p>\n\n<pre><code>static double chisquare(int numberCount, int maxRandomNumber) {\n    long[] f = new long[maxRandomNumber];\n    for (long i = 0; i &lt; numberCount; i++) {\n        f[randomint(maxRandomNumber)]++;\n    }\n\n    long t = 0;\n    for (int i = 0; i &lt; maxRandomNumber; i++) {\n        t += f[i] * f[i];\n    }\n    return (((double) maxRandomNumber * t) / numberCount) - (double) (numberCount);\n}\n</code></pre>\n\n<p>Citing [ 1 ]</p>\n\n<blockquote>\n  <p>The idea of the χ² test is to check whether or not the numbers produced are \n  spread out reasonably. If we generate <em>N</em> positive numbers less than <em>r</em>, then we'd\n  expect to get about <em>N</em> / <em>r</em> numbers of each value. But---and this is the essence of\n  the matter---the frequencies of ocurrence of all the values should not be exactly\n  the same: that wouldn't be random! </p>\n  \n  <p>We simply calculate the sum of the squares of the frecuencies of occurrence of \n  each value, scaled by the expected frequency, and then substract off the size of the\n  sequence. This number, the \"χ² statistic,\" may be expressed mathematically as</p>\n</blockquote>\n\n<p><img src=\"https://i.stack.imgur.com/GzPyq.png\" alt=\"chi squared formula\">  </p>\n\n<blockquote>\n  <p>If the χ² statistic is close to <em>r</em>, then the numbers are random; if it is too far away,\n  then they are not. The notions of \"close\" and \"far away\" can be more precisely \n  defined: tables exist that tell exactly how relate the statistic to properties of \n  random sequences. For the simple test that we're performing, the statistic should\n  be within 2√r</p>\n</blockquote>\n\n<p>Using this theory and the following code:</p>\n\n<pre><code>abstract class RandomFunction {\n    public abstract int randomint(int range); \n}\n\npublic class test {\n    static QuickRandom qr = new QuickRandom();\n\n    static double chisquare(int numberCount, int maxRandomNumber, RandomFunction function) {\n        long[] f = new long[maxRandomNumber];\n        for (long i = 0; i &lt; numberCount; i++) {\n            f[function.randomint(maxRandomNumber)]++;\n        }\n\n        long t = 0;\n        for (int i = 0; i &lt; maxRandomNumber; i++) {\n            t += f[i] * f[i];\n        }\n        return (((double) maxRandomNumber * t) / numberCount) - (double) (numberCount);\n    }\n\n    public static void main(String[] args) {\n        final int ITERATION_COUNT = 1000;\n        final int N = 5000000;\n        final int R = 100000;\n\n        double total = 0.0;\n        RandomFunction qrRandomInt = new RandomFunction() {\n            @Override\n            public int randomint(int range) {\n                return (int) (qr.random() * range);\n            }\n        }; \n        for (int i = 0; i &lt; ITERATION_COUNT; i++) {\n            total += chisquare(N, R, qrRandomInt);\n        }\n        System.out.printf(\"Ave Chi2 for QR: %f \\n\", total / ITERATION_COUNT);        \n\n        total = 0.0;\n        RandomFunction mathRandomInt = new RandomFunction() {\n            @Override\n            public int randomint(int range) {\n                return (int) (Math.random() * range);\n            }\n        };         \n        for (int i = 0; i &lt; ITERATION_COUNT; i++) {\n            total += chisquare(N, R, mathRandomInt);\n        }\n        System.out.printf(\"Ave Chi2 for Math.random: %f \\n\", total / ITERATION_COUNT);\n    }\n}\n</code></pre>\n\n<p>I got the following result:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Ave Chi2 for QR: 108965,078640\nAve Chi2 for Math.random: 99988,629040\n</code></pre>\n\n<p>Which, for QuickRandom, is far away from <em>r</em>  (outside of  <code>r ± 2 * sqrt(r)</code>)</p>\n\n<p>That been said, QuickRandom could be fast but (as stated in another answers) is not good as a random number generator</p>\n\n<hr>\n\n<p>[ 1 ] SEDGEWICK ROBERT, <a href=\"http://www.goodreads.com/book/show/2398048.Algorithims_in_C\" rel=\"noreferrer\"><em>Algorithms in C</em></a>, Addinson Wesley Publishing Company, 1990, pages 516 to 518</p>\n"},{"tags":[],"owner":{"account_id":83307,"reputation":1753,"user_id":233646,"display_name":"Terje"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1401974657,"creation_date":1401974657,"answer_id":24061450,"question_id":14491966,"body_markdown":"This is the random function I use for my games. It&#39;s pretty fast, and has good (enough) distribution.\r\n\r\n    public class FastRandom {\r\n    \r\n        public static int randSeed;\r\n    \r\n    \t  public static final int random()\r\n    \t  {\r\n    \t    // this makes a &#39;nod&#39; to being potentially called from multiple threads\r\n    \t    int seed = randSeed;\r\n    \t    \r\n    \t    seed    *= 1103515245;\r\n    \t    seed    += 12345;\r\n    \t    randSeed = seed;\r\n    \t    return seed;\r\n    \t  }\r\n    \r\n    \t  public static final int random(int range)\r\n    \t  {\r\n    \t    return ((random()&gt;&gt;&gt;15) * range) &gt;&gt;&gt; 17;\r\n    \t  }\r\n    \r\n    \t  public static final boolean randomBoolean()\r\n    \t  {\r\n    \t     return random() &gt; 0;\r\n    \t  }\r\n    \r\n    \t   public static final float randomFloat()\r\n    \t   {\r\n    \t     return (random()&gt;&gt;&gt;8) * (1.f/(1&lt;&lt;24));\r\n    \t   }\r\n    \t   \r\n    \t   public static final double randomDouble() {\r\n    \t       return (random()&gt;&gt;&gt;8) * (1.0/(1&lt;&lt;24));\r\n    \t   }\r\n    }","title":"Is this a &quot;good enough&quot; random algorithm; why isn&#39;t it used if it&#39;s faster?","body":"<p>This is the random function I use for my games. It's pretty fast, and has good (enough) distribution.</p>\n\n<pre><code>public class FastRandom {\n\n    public static int randSeed;\n\n      public static final int random()\n      {\n        // this makes a 'nod' to being potentially called from multiple threads\n        int seed = randSeed;\n\n        seed    *= 1103515245;\n        seed    += 12345;\n        randSeed = seed;\n        return seed;\n      }\n\n      public static final int random(int range)\n      {\n        return ((random()&gt;&gt;&gt;15) * range) &gt;&gt;&gt; 17;\n      }\n\n      public static final boolean randomBoolean()\n      {\n         return random() &gt; 0;\n      }\n\n       public static final float randomFloat()\n       {\n         return (random()&gt;&gt;&gt;8) * (1.f/(1&lt;&lt;24));\n       }\n\n       public static final double randomDouble() {\n           return (random()&gt;&gt;&gt;8) * (1.0/(1&lt;&lt;24));\n       }\n}\n</code></pre>\n"}],"owner":{"account_id":1266491,"reputation":58067,"user_id":1223693,"accept_rate":96,"display_name":"tckmn"},"comment_count":36,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14420,"favorite_count":0,"down_vote_count":17,"up_vote_count":188,"accepted_answer_id":14492320,"answer_count":14,"score":171,"last_activity_date":1671844847,"creation_date":1358987742,"question_id":14491966,"body_markdown":"I made a class called `QuickRandom`, and its job is to produce random numbers quickly. It&#39;s really simple: just take the old value, multiply by a `double`, and take the decimal part.\r\n\r\nHere is my `QuickRandom` class in its entirety:\r\n\r\n    public class QuickRandom {\r\n    \tprivate double prevNum;\r\n    \tprivate double magicNumber;\r\n    \t\r\n    \tpublic QuickRandom(double seed1, double seed2) {\r\n    \t\tif (seed1 &gt;= 1 || seed1 &lt; 0) throw new IllegalArgumentException(&quot;Seed 1 must be &gt;= 0 and &lt; 1, not &quot; + seed1);\r\n    \t\tprevNum = seed1;\r\n    \t\tif (seed2 &lt;= 1 || seed2 &gt; 10) throw new IllegalArgumentException(&quot;Seed 2 must be &gt; 1 and &lt;= 10, not &quot; + seed2);\r\n    \t\tmagicNumber = seed2;\r\n    \t}\r\n    \t\r\n    \tpublic QuickRandom() {\r\n    \t\tthis(Math.random(), Math.random() * 10);\r\n    \t}\r\n    \t\r\n    \tpublic double random() {\r\n    \t\treturn prevNum = (prevNum*magicNumber)%1;\r\n    \t}\r\n    \r\n    }\r\n\r\nAnd here is the code I wrote to test it:\r\n\r\n\tpublic static void main(String[] args) {\r\n    \t\tQuickRandom qr = new QuickRandom();\r\n    \t\t\r\n    \t\t/*for (int i = 0; i &lt; 20; i ++) {\r\n    \t\t\tSystem.out.println(qr.random());\r\n    \t\t}*/\r\n    \t\t\r\n    \t\t//Warm up\r\n    \t\tfor (int i = 0; i &lt; 10000000; i ++) {\r\n    \t\t\tMath.random();\r\n    \t\t\tqr.random();\r\n    \t\t\tSystem.nanoTime();\r\n    \t\t}\r\n    \t\t\r\n    \t\tlong oldTime;\r\n    \t\t\r\n    \t\toldTime = System.nanoTime();\r\n    \t\tfor (int i = 0; i &lt; 100000000; i ++) {\r\n    \t\t\tMath.random();\r\n    \t\t}\r\n    \t\tSystem.out.println(System.nanoTime() - oldTime);\r\n    \t\t\r\n    \t\toldTime = System.nanoTime();\r\n    \t\tfor (int i = 0; i &lt; 100000000; i ++) {\r\n    \t\t\tqr.random();\r\n    \t\t}\r\n    \t\tSystem.out.println(System.nanoTime() - oldTime);\r\n\t}\r\n\r\nIt is a very simple algorithm that simply multiplies the previous double by a &quot;magic number&quot; double. I threw it together pretty quickly, so I could probably make it better, but strangely, it seems to be working fine.\r\n\r\nThis is sample output of the commented-out lines in the `main` method:\r\n\r\n    0.612201846732229\r\n    0.5823974655091941\r\n    0.31062451498865684\r\n    0.8324473610354004\r\n    0.5907187526770246\r\n    0.38650264675748947\r\n    0.5243464344127049\r\n    0.7812828761272188\r\n    0.12417247811074805\r\n    0.1322738256858378\r\n    0.20614642573072284\r\n    0.8797579436677381\r\n    0.022122999476108518\r\n    0.2017298328387873\r\n    0.8394849894162446\r\n    0.6548917685640614\r\n    0.971667953190428\r\n    0.8602096647696964\r\n    0.8438709031160894\r\n    0.694884972852229\r\n\r\nHm. Pretty random. In fact, that would work for a random number generator in a game.\r\n\r\nHere is sample output of the non-commented out part:\r\n\r\n    5456313909\r\n    1427223941\r\n\r\nWow! It performs almost 4 times faster than `Math.random`.\r\n\r\nI remember reading somewhere that `Math.random` used `System.nanoTime()` and tons of crazy modulus and division stuff. Is that really necessary? My algorithm performs a lot faster and it seems pretty random.\r\n\r\nI have two questions:\r\n\r\n- Is my algorithm &quot;good enough&quot; (for, say, a game, where **really** random numbers aren&#39;t too important)?\r\n- Why does `Math.random` do so much when it seems just simple multiplication and cutting out the decimal will suffice?","title":"Is this a &quot;good enough&quot; random algorithm; why isn&#39;t it used if it&#39;s faster?","body":"<p>I made a class called <code>QuickRandom</code>, and its job is to produce random numbers quickly. It's really simple: just take the old value, multiply by a <code>double</code>, and take the decimal part.</p>\n\n<p>Here is my <code>QuickRandom</code> class in its entirety:</p>\n\n<pre><code>public class QuickRandom {\n    private double prevNum;\n    private double magicNumber;\n\n    public QuickRandom(double seed1, double seed2) {\n        if (seed1 &gt;= 1 || seed1 &lt; 0) throw new IllegalArgumentException(\"Seed 1 must be &gt;= 0 and &lt; 1, not \" + seed1);\n        prevNum = seed1;\n        if (seed2 &lt;= 1 || seed2 &gt; 10) throw new IllegalArgumentException(\"Seed 2 must be &gt; 1 and &lt;= 10, not \" + seed2);\n        magicNumber = seed2;\n    }\n\n    public QuickRandom() {\n        this(Math.random(), Math.random() * 10);\n    }\n\n    public double random() {\n        return prevNum = (prevNum*magicNumber)%1;\n    }\n\n}\n</code></pre>\n\n<p>And here is the code I wrote to test it:</p>\n\n<pre><code>public static void main(String[] args) {\n        QuickRandom qr = new QuickRandom();\n\n        /*for (int i = 0; i &lt; 20; i ++) {\n            System.out.println(qr.random());\n        }*/\n\n        //Warm up\n        for (int i = 0; i &lt; 10000000; i ++) {\n            Math.random();\n            qr.random();\n            System.nanoTime();\n        }\n\n        long oldTime;\n\n        oldTime = System.nanoTime();\n        for (int i = 0; i &lt; 100000000; i ++) {\n            Math.random();\n        }\n        System.out.println(System.nanoTime() - oldTime);\n\n        oldTime = System.nanoTime();\n        for (int i = 0; i &lt; 100000000; i ++) {\n            qr.random();\n        }\n        System.out.println(System.nanoTime() - oldTime);\n}\n</code></pre>\n\n<p>It is a very simple algorithm that simply multiplies the previous double by a \"magic number\" double. I threw it together pretty quickly, so I could probably make it better, but strangely, it seems to be working fine.</p>\n\n<p>This is sample output of the commented-out lines in the <code>main</code> method:</p>\n\n<pre><code>0.612201846732229\n0.5823974655091941\n0.31062451498865684\n0.8324473610354004\n0.5907187526770246\n0.38650264675748947\n0.5243464344127049\n0.7812828761272188\n0.12417247811074805\n0.1322738256858378\n0.20614642573072284\n0.8797579436677381\n0.022122999476108518\n0.2017298328387873\n0.8394849894162446\n0.6548917685640614\n0.971667953190428\n0.8602096647696964\n0.8438709031160894\n0.694884972852229\n</code></pre>\n\n<p>Hm. Pretty random. In fact, that would work for a random number generator in a game.</p>\n\n<p>Here is sample output of the non-commented out part:</p>\n\n<pre><code>5456313909\n1427223941\n</code></pre>\n\n<p>Wow! It performs almost 4 times faster than <code>Math.random</code>.</p>\n\n<p>I remember reading somewhere that <code>Math.random</code> used <code>System.nanoTime()</code> and tons of crazy modulus and division stuff. Is that really necessary? My algorithm performs a lot faster and it seems pretty random.</p>\n\n<p>I have two questions:</p>\n\n<ul>\n<li>Is my algorithm \"good enough\" (for, say, a game, where <strong>really</strong> random numbers aren't too important)?</li>\n<li>Why does <code>Math.random</code> do so much when it seems just simple multiplication and cutting out the decimal will suffice?</li>\n</ul>\n"},{"tags":["java","android","bluetooth"],"comments":[{"owner":{"account_id":10114718,"reputation":2216,"user_id":7473793,"display_name":"Michael Kotzjan"},"score":0,"creation_date":1658498451,"post_id":73081312,"comment_id":129073387,"body_markdown":"Do you want to find Bluetooth Classic or Bluetooth Low Energy devices?","body":"Do you want to find Bluetooth Classic or Bluetooth Low Energy devices?"},{"owner":{"account_id":13820855,"reputation":23,"user_id":9976333,"display_name":"Ravi Khinchi"},"score":0,"creation_date":1658561707,"post_id":73081312,"comment_id":129086369,"body_markdown":"bluetooth classic @MichaelKotzjan","body":"bluetooth classic @MichaelKotzjan"}],"owner":{"account_id":13820855,"reputation":23,"user_id":9976333,"display_name":"Ravi Khinchi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":190,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671843431,"creation_date":1658497209,"question_id":73081312,"body_markdown":"I am trying to discover available bluetooth devices but it seems `bluetoothAdapter.startDiscovery()` is not starting for some reason\r\n\r\nI don&#39;t understand the following\r\n1. why despite explictly requesting for `BLUETOOTH_SCAN` does `bluetoothAdapter.startDiscovery()` statement complain about adding `BLUETOOTH_SCAN` permission\r\n2. why we need location permission for discovering bluetooth devices\r\n3. while going through the logs I came accross the following \r\n\r\n```\r\n3.1 D/BluetoothAdapterService: startDiscovery \r\n3.2 E/BluetoothUtils: Permission denial: Need ACCESS_FINE_LOCATION permission to get scan results \r\n```\r\n\r\n   despite I have asked for `ACCESS_FINE_LOCATION` permissions and it doesn&#39;t seem to go away\r\n4. what is this error\r\n\r\n```\r\n4.1 Could not connect to the &#39;pipe:qemud:wififorward&#39; service: Invalid argument\r\n```\r\n   what is wififorward do here ?\r\n\r\nI really confused, can someone pls explain this\r\n\r\n\r\nmy `MainActivity.java`\r\n\r\n```lang-java\r\n BluetoothAdapter bluetoothAdapter;\r\n\r\n\r\nBroadcastReceiver receiver = new BroadcastReceiver() {\r\n    @Override\r\n    public void onReceive(Context context, Intent intent) {\r\n        String action = intent.getAction();\r\n        Log.i(&quot;Action&quot;, action);\r\n    }\r\n};\r\n\r\n@SuppressLint(&quot;MissingPermission&quot;)\r\n@Override\r\nprotected void onCreate(Bundle savedInstanceState) {\r\n    super.onCreate(savedInstanceState);\r\n    setContentView(R.layout.activity_main);\r\n\r\n    bluetoothAdapter = BluetoothAdapter.getDefaultAdapter();\r\n    IntentFilter intent = new IntentFilter();\r\n    intent.addAction(BluetoothAdapter.ACTION_STATE_CHANGED);\r\n    intent.addAction(BluetoothDevice.ACTION_FOUND);\r\n    intent.addAction(BluetoothAdapter.ACTION_DISCOVERY_STARTED);\r\n    intent.addAction(BluetoothAdapter.ACTION_DISCOVERY_FINISHED);\r\n    registerReceiver(receiver, intent);\r\n\r\n\r\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\r\n        if (ContextCompat.checkSelfPermission(this,\r\n                Manifest.permission.ACCESS_FINE_LOCATION)\r\n                != PackageManager.PERMISSION_GRANTED) {\r\n            requestPermissions(new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, 2);\r\n        }\r\n    }\r\n\r\n\r\n    if (ActivityCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH_SCAN) != PackageManager.PERMISSION_GRANTED) {\r\n        requestPermissions(new String[]{Manifest.permission.BLUETOOTH_SCAN}, 1);\r\n    }\r\n\r\n    try {\r\n        bluetoothAdapter.startDiscovery();\r\n        \r\n    }catch (Exception e){\r\n        \r\n        e.printStackTrace();\r\n    }\r\n\r\n}   \r\n```\r\n\r\nManifest file\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    package=&quot;com.example.bf&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADMIN&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot;/&gt;\r\n   &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot;/&gt;\r\n\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.BF&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n```\r\n\r\n\r\n\r\nbuild.gradle\r\n```\r\nplugins {\r\n    id &#39;com.android.application&#39;\r\n}\r\n\r\nandroid {\r\n    compileSdk 32\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com.example.bf&quot;\r\n        minSdk 24\r\n        targetSdk 30\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation &#39;androidx.appcompat:appcompat:1.4.2&#39;\r\n    implementation &#39;com.google.android.material:material:1.6.1&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.1.4&#39;\r\n    testImplementation &#39;junit:junit:4.13.2&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.3&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.4.0&#39;\r\n}\r\n```\r\n\r\n\r\nhere is Logcat\r\n```\r\n2022-07-22 18:48:02.501 483-483/? E/netmgr: qemu_pipe_open_ns:62: Could not connect to \r\nthe &#39;pipe:qemud:network&#39; service: Invalid argument\r\n2022-07-22 18:48:02.501 483-483/? E/netmgr: Failed to open QEMU pipe &#39;qemud:network&#39;: \r\nInvalid argument\r\n2022-07-22 18:48:04.160 490-490/? E/wifi_forwarder: qemu_pipe_open_ns:62: Could not \r\nconnect to the &#39;pipe:qemud:wififorward&#39; service: Invalid argument\r\n2022-07-22 18:48:04.160 490-490/? E/wifi_forwarder: RemoteConnection failed to \r\ninitialize: RemoteConnection failed to open pipe\r\n2022-07-22 18:48:12.419 1191-5141/? I/PhenotypeProcessReaper: Memory state is: 125\r\n2022-07-22 18:49:02.505 483-483/? E/netmgr: qemu_pipe_open_ns:62: Could not connect to \r\nthe &#39;pipe:qemud:network&#39; service: Invalid argument\r\n2022-07-22 18:49:02.505 483-483/? E/netmgr: Failed to open QEMU pipe &#39;qemud:network&#39;: \r\nInvalid argument\r\n2022-07-22 18:49:04.222 490-490/? E/wifi_forwarder: qemu_pipe_open_ns:62: Could not \r\nconnect to the &#39;pipe:qemud:wififorward&#39; service: Invalid argument\r\n2022-07-22 18:49:04.222 490-490/? E/wifi_forwarder: RemoteConnection failed to \r\ninitialize: RemoteConnection failed to open pipe\r\n2022-07-22 18:49:11.493 2627-2671/? I/Finsky: [203] goa.run(17): Stats for Executor: \r\nBlockingExecutor ivq@4a9b5c1[Running, pool size = 0, active threads = 0, queued tasks = \r\n0, completed tasks = 442]\r\n2022-07-22 18:49:11.493 2627-2671/? I/Finsky: [203] goa.run(17): Stats for Executor: \r\nLightweightExecutor ivq@aefbca7[Running, pool size = 3, active threads = 0, queued tasks \r\n= 0, completed tasks = 700]\r\n2022-07-22 18:49:12.055 2627-2671/? I/Finsky: [203] goa.run(17): Stats for Executor: \r\nbgExecutor ivq@3b86554[Running, pool size = 4, active threads = 0, queued tasks = 0, \r\ncompleted tasks = 4014]\r\n2022-07-22 18:50:02.566 483-483/? E/netmgr: qemu_pipe_open_ns:62: Could not connect to \r\nthe &#39;pipe:qemud:network&#39; service: Invalid argument\r\n2022-07-22 18:50:02.566 483-483/? E/netmgr: Failed to open QEMU pipe &#39;qemud:network&#39;: \r\nInvalid argument\r\n2022-07-22 18:50:04.228 490-490/? E/wifi_forwarder: qemu_pipe_open_ns:62: Could not   \r\nconnect to the &#39;pipe:qemud:wififorward&#39; service: Invalid argument\r\n2022-07-22 18:50:04.228 490-490/? E/wifi_forwarder: RemoteConnection failed to initialize: \r\nRemoteConnection failed to open pipe\r\n2022-07-22 18:50:29.450 1191-6722/? E/WakeLock: GCM_HB_ALARM release without a matched \r\nacquire!\r\n2022-07-22 18:51:02.567 483-483/? E/netmgr: qemu_pipe_open_ns:62: Could not connect to the \r\n&#39;pipe:qemud:network&#39; service: Invalid argument\r\n2022-07-22 18:51:02.567 483-483/? E/netmgr: Failed to open QEMU pipe &#39;qemud:network&#39;: \r\nInvalid argument\r\n2022-07-22 18:51:04.238 490-490/? E/wifi_forwarder: qemu_pipe_open_ns:62: Could not \r\nconnect to the &#39;pipe:qemud:wififorward&#39; service: Invalid argument \r\n2022-07-22 18:51:04.239 490-490/? E/wifi_forwarder: RemoteConnection failed to initialize: \r\nRemoteConnection failed to open pipe\r\n2022-07-22 18:52:02.573 483-483/? E/netmgr: qemu_pipe_open_ns:62: Could not connect to the \r\n&#39;pipe:qemud:network&#39; service: Invalid argument\r\n2022-07-22 18:52:02.573 483-483/? E/netmgr: Failed to open QEMU pipe &#39;qemud:network&#39;: \r\nInvalid argument\r\n2022-07-22 18:52:04.293 490-490/? E/wifi_forwarder: qemu_pipe_open_ns:62: Could not \r\nconnect to the &#39;pipe:qemud:wififorward&#39; service: Invalid argument\r\n2022-07-22 18:52:04.293 490-490/? E/wifi_forwarder: RemoteConnection failed to initialize: \r\nRemoteConnection failed to open pipe\r\n2022-07-22 18:53:02.627 483-483/? E/netmgr: qemu_pipe_open_ns:62: Could not connect to the \r\n&#39;pipe:qemud:network&#39; service: Invalid argument\r\n2022-07-22 18:53:02.628 483-483/? E/netmgr: Failed to open QEMU pipe &#39;qemud:network&#39;: \r\nInvalid argument\r\n2022-07-22 18:53:04.321 490-490/? E/wifi_forwarder: qemu_pipe_open_ns:62: Could not \r\nconnect to the &#39;pipe:qemud:wififorward&#39; service: Invalid argument\r\n2022-07-22 18:53:04.321 490-490/? E/wifi_forwarder: RemoteConnection failed to initialize: \r\nRemoteConnection failed to open pipe\r\n2022-07-22 18:54:02.640 483-483/? E/netmgr: qemu_pipe_open_ns:62: Could not connect to the \r\n&#39;pipe:qemud:network&#39; service: Invalid argument\r\n2022-07-22 18:54:02.640 483-483/? E/netmgr: Failed to open QEMU pipe &#39;qemud:network&#39;: \r\nInvalid argument\r\n2022-07-22 18:54:04.383 490-490/? E/wifi_forwarder: qemu_pipe_open_ns:62: Could not \r\nconnect to the &#39;pipe:qemud:wififorward&#39; service: Invalid argument\r\n2022-07-22 18:54:04.383 490-490/? E/wifi_forwarder: RemoteConnection failed to initialize: \r\nRemoteConnection failed to open pipe}\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  ","title":"error in descovering available bluetooth devices in android studio","body":"<p>I am trying to discover available bluetooth devices but it seems <code>bluetoothAdapter.startDiscovery()</code> is not starting for some reason</p>\n<p>I don't understand the following</p>\n<ol>\n<li>why despite explictly requesting for <code>BLUETOOTH_SCAN</code> does <code>bluetoothAdapter.startDiscovery()</code> statement complain about adding <code>BLUETOOTH_SCAN</code> permission</li>\n<li>why we need location permission for discovering bluetooth devices</li>\n<li>while going through the logs I came accross the following</li>\n</ol>\n<pre><code>3.1 D/BluetoothAdapterService: startDiscovery \n3.2 E/BluetoothUtils: Permission denial: Need ACCESS_FINE_LOCATION permission to get scan results \n</code></pre>\n<p>despite I have asked for <code>ACCESS_FINE_LOCATION</code> permissions and it doesn't seem to go away\n4. what is this error</p>\n<pre><code>4.1 Could not connect to the 'pipe:qemud:wififorward' service: Invalid argument\n</code></pre>\n<p>what is wififorward do here ?</p>\n<p>I really confused, can someone pls explain this</p>\n<p>my <code>MainActivity.java</code></p>\n<pre class=\"lang-java prettyprint-override\"><code> BluetoothAdapter bluetoothAdapter;\n\n\nBroadcastReceiver receiver = new BroadcastReceiver() {\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        String action = intent.getAction();\n        Log.i(&quot;Action&quot;, action);\n    }\n};\n\n@SuppressLint(&quot;MissingPermission&quot;)\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    bluetoothAdapter = BluetoothAdapter.getDefaultAdapter();\n    IntentFilter intent = new IntentFilter();\n    intent.addAction(BluetoothAdapter.ACTION_STATE_CHANGED);\n    intent.addAction(BluetoothDevice.ACTION_FOUND);\n    intent.addAction(BluetoothAdapter.ACTION_DISCOVERY_STARTED);\n    intent.addAction(BluetoothAdapter.ACTION_DISCOVERY_FINISHED);\n    registerReceiver(receiver, intent);\n\n\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\n        if (ContextCompat.checkSelfPermission(this,\n                Manifest.permission.ACCESS_FINE_LOCATION)\n                != PackageManager.PERMISSION_GRANTED) {\n            requestPermissions(new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, 2);\n        }\n    }\n\n\n    if (ActivityCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH_SCAN) != PackageManager.PERMISSION_GRANTED) {\n        requestPermissions(new String[]{Manifest.permission.BLUETOOTH_SCAN}, 1);\n    }\n\n    try {\n        bluetoothAdapter.startDiscovery();\n        \n    }catch (Exception e){\n        \n        e.printStackTrace();\n    }\n\n}   \n</code></pre>\n<p>Manifest file</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    package=&quot;com.example.bf&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADMIN&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot;/&gt;\n   &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot;/&gt;\n\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.BF&quot;&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p>build.gradle</p>\n<pre><code>plugins {\n    id 'com.android.application'\n}\n\nandroid {\n    compileSdk 32\n\n    defaultConfig {\n        applicationId &quot;com.example.bf&quot;\n        minSdk 24\n        targetSdk 30\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n\n    implementation 'androidx.appcompat:appcompat:1.4.2'\n    implementation 'com.google.android.material:material:1.6.1'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.3'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.4.0'\n}\n</code></pre>\n<p>here is Logcat</p>\n<pre><code>2022-07-22 18:48:02.501 483-483/? E/netmgr: qemu_pipe_open_ns:62: Could not connect to \nthe 'pipe:qemud:network' service: Invalid argument\n2022-07-22 18:48:02.501 483-483/? E/netmgr: Failed to open QEMU pipe 'qemud:network': \nInvalid argument\n2022-07-22 18:48:04.160 490-490/? E/wifi_forwarder: qemu_pipe_open_ns:62: Could not \nconnect to the 'pipe:qemud:wififorward' service: Invalid argument\n2022-07-22 18:48:04.160 490-490/? E/wifi_forwarder: RemoteConnection failed to \ninitialize: RemoteConnection failed to open pipe\n2022-07-22 18:48:12.419 1191-5141/? I/PhenotypeProcessReaper: Memory state is: 125\n2022-07-22 18:49:02.505 483-483/? E/netmgr: qemu_pipe_open_ns:62: Could not connect to \nthe 'pipe:qemud:network' service: Invalid argument\n2022-07-22 18:49:02.505 483-483/? E/netmgr: Failed to open QEMU pipe 'qemud:network': \nInvalid argument\n2022-07-22 18:49:04.222 490-490/? E/wifi_forwarder: qemu_pipe_open_ns:62: Could not \nconnect to the 'pipe:qemud:wififorward' service: Invalid argument\n2022-07-22 18:49:04.222 490-490/? E/wifi_forwarder: RemoteConnection failed to \ninitialize: RemoteConnection failed to open pipe\n2022-07-22 18:49:11.493 2627-2671/? I/Finsky: [203] goa.run(17): Stats for Executor: \nBlockingExecutor ivq@4a9b5c1[Running, pool size = 0, active threads = 0, queued tasks = \n0, completed tasks = 442]\n2022-07-22 18:49:11.493 2627-2671/? I/Finsky: [203] goa.run(17): Stats for Executor: \nLightweightExecutor ivq@aefbca7[Running, pool size = 3, active threads = 0, queued tasks \n= 0, completed tasks = 700]\n2022-07-22 18:49:12.055 2627-2671/? I/Finsky: [203] goa.run(17): Stats for Executor: \nbgExecutor ivq@3b86554[Running, pool size = 4, active threads = 0, queued tasks = 0, \ncompleted tasks = 4014]\n2022-07-22 18:50:02.566 483-483/? E/netmgr: qemu_pipe_open_ns:62: Could not connect to \nthe 'pipe:qemud:network' service: Invalid argument\n2022-07-22 18:50:02.566 483-483/? E/netmgr: Failed to open QEMU pipe 'qemud:network': \nInvalid argument\n2022-07-22 18:50:04.228 490-490/? E/wifi_forwarder: qemu_pipe_open_ns:62: Could not   \nconnect to the 'pipe:qemud:wififorward' service: Invalid argument\n2022-07-22 18:50:04.228 490-490/? E/wifi_forwarder: RemoteConnection failed to initialize: \nRemoteConnection failed to open pipe\n2022-07-22 18:50:29.450 1191-6722/? E/WakeLock: GCM_HB_ALARM release without a matched \nacquire!\n2022-07-22 18:51:02.567 483-483/? E/netmgr: qemu_pipe_open_ns:62: Could not connect to the \n'pipe:qemud:network' service: Invalid argument\n2022-07-22 18:51:02.567 483-483/? E/netmgr: Failed to open QEMU pipe 'qemud:network': \nInvalid argument\n2022-07-22 18:51:04.238 490-490/? E/wifi_forwarder: qemu_pipe_open_ns:62: Could not \nconnect to the 'pipe:qemud:wififorward' service: Invalid argument \n2022-07-22 18:51:04.239 490-490/? E/wifi_forwarder: RemoteConnection failed to initialize: \nRemoteConnection failed to open pipe\n2022-07-22 18:52:02.573 483-483/? E/netmgr: qemu_pipe_open_ns:62: Could not connect to the \n'pipe:qemud:network' service: Invalid argument\n2022-07-22 18:52:02.573 483-483/? E/netmgr: Failed to open QEMU pipe 'qemud:network': \nInvalid argument\n2022-07-22 18:52:04.293 490-490/? E/wifi_forwarder: qemu_pipe_open_ns:62: Could not \nconnect to the 'pipe:qemud:wififorward' service: Invalid argument\n2022-07-22 18:52:04.293 490-490/? E/wifi_forwarder: RemoteConnection failed to initialize: \nRemoteConnection failed to open pipe\n2022-07-22 18:53:02.627 483-483/? E/netmgr: qemu_pipe_open_ns:62: Could not connect to the \n'pipe:qemud:network' service: Invalid argument\n2022-07-22 18:53:02.628 483-483/? E/netmgr: Failed to open QEMU pipe 'qemud:network': \nInvalid argument\n2022-07-22 18:53:04.321 490-490/? E/wifi_forwarder: qemu_pipe_open_ns:62: Could not \nconnect to the 'pipe:qemud:wififorward' service: Invalid argument\n2022-07-22 18:53:04.321 490-490/? E/wifi_forwarder: RemoteConnection failed to initialize: \nRemoteConnection failed to open pipe\n2022-07-22 18:54:02.640 483-483/? E/netmgr: qemu_pipe_open_ns:62: Could not connect to the \n'pipe:qemud:network' service: Invalid argument\n2022-07-22 18:54:02.640 483-483/? E/netmgr: Failed to open QEMU pipe 'qemud:network': \nInvalid argument\n2022-07-22 18:54:04.383 490-490/? E/wifi_forwarder: qemu_pipe_open_ns:62: Could not \nconnect to the 'pipe:qemud:wififorward' service: Invalid argument\n2022-07-22 18:54:04.383 490-490/? E/wifi_forwarder: RemoteConnection failed to initialize: \nRemoteConnection failed to open pipe}\n</code></pre>\n"},{"tags":["java","android","background","listener","survey"],"comments":[{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":3,"creation_date":1426780941,"post_id":29149429,"comment_id":46520962,"body_markdown":"If you want to have somebody write your code for you (&quot;i would like you to write me an example&quot;), please hire a consultant. Otherwise, please explain what you tried and what specific problems that you encountered. Or, explain what you think is different about whatever the Pollfish API exposes compared to using a `LocationListener`, so we can explain how to address those differences.","body":"If you want to have somebody write your code for you (&quot;i would like you to write me an example&quot;), please hire a consultant. Otherwise, please explain what you tried and what specific problems that you encountered. Or, explain what you think is different about whatever the Pollfish API exposes compared to using a <code>LocationListener</code>, so we can explain how to address those differences."},{"owner":{"account_id":2422085,"reputation":23,"user_id":2114837,"display_name":"user2114837"},"score":0,"creation_date":1426781089,"post_id":29149429,"comment_id":46521080,"body_markdown":"Ok sorry, could you show me how can i implement a listener in a service? Is it the same as location listener?","body":"Ok sorry, could you show me how can i implement a listener in a service? Is it the same as location listener?"}],"owner":{"account_id":2422085,"reputation":23,"user_id":2114837,"display_name":"user2114837"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":293,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1426818186,"answer_count":0,"score":2,"last_activity_date":1671843302,"creation_date":1426780794,"question_id":29149429,"body_markdown":"I&#39;m a new android developer so excuse me if i ask too much. The thing is i would like you to write me an example of the way i could listen, in background, for survey availability of pollfish (sdk documentation here: https://www.pollfish.com/android) using a service or something.\r\n\r\nI&#39;ve tried searching for background listeners in google but the only thing i found was about location background listeners.\r\n\r\nEdit:(He means to say is there a way to listen for survey availability even in the background when app is closed, and he can! by using background task and the alarm manager, if someone can, link to the answer will also help✌&#127995;).\r\n\r\nAny help is appreciated!","title":"Background listener for pollfish survey availability for android","body":"<p>I'm a new android developer so excuse me if i ask too much. The thing is i would like you to write me an example of the way i could listen, in background, for survey availability of pollfish (sdk documentation here: <a href=\"https://www.pollfish.com/android\" rel=\"nofollow noreferrer\">https://www.pollfish.com/android</a>) using a service or something.</p>\n<p>I've tried searching for background listeners in google but the only thing i found was about location background listeners.</p>\n<p>Edit:(He means to say is there a way to listen for survey availability even in the background when app is closed, and he can! by using background task and the alarm manager, if someone can, link to the answer will also help✌🏻).</p>\n<p>Any help is appreciated!</p>\n"},{"tags":["javascript","java","spring","websocket","spring-webflux"],"comments":[{"owner":{"account_id":16440014,"reputation":692,"user_id":11876612,"display_name":"Felipe Bonfante"},"score":0,"creation_date":1574209112,"post_id":58942599,"comment_id":104147986,"body_markdown":"Have you tried to set CORS configuration on your HandlerMapping?","body":"Have you tried to set CORS configuration on your HandlerMapping?"},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1574256395,"post_id":58942599,"comment_id":104166539,"body_markdown":"are the ports correct?","body":"are the ports correct?"},{"owner":{"account_id":8088563,"reputation":71,"user_id":6095286,"display_name":"At&#237;lio Ara&#250;jo"},"score":0,"creation_date":1574259716,"post_id":58942599,"comment_id":104168661,"body_markdown":"@FelipeBonfante yes, I have already tried CORS configuration but no luck. Anyway my Javascript code is running from inside a jsp file the application itself is serving.","body":"@FelipeBonfante yes, I have already tried CORS configuration but no luck. Anyway my Javascript code is running from inside a jsp file the application itself is serving."},{"owner":{"account_id":8088563,"reputation":71,"user_id":6095286,"display_name":"At&#237;lio Ara&#250;jo"},"score":0,"creation_date":1574259779,"post_id":58942599,"comment_id":104168696,"body_markdown":"@ThomasAndolf yes, they are. I have changed the default 8080 port as I have another application using it.","body":"@ThomasAndolf yes, they are. I have changed the default 8080 port as I have another application using it."}],"answers":[{"tags":[],"owner":{"account_id":8088563,"reputation":71,"user_id":6095286,"display_name":"At&#237;lio Ara&#250;jo"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1574685880,"creation_date":1574685880,"answer_id":59032143,"question_id":58942599,"body_markdown":"I could make it work removing *spring-boot-starter-web* and *tomcat-embed-jasper* dependencies. I suppose *spring-boot-starter-web* might conflict with *spring-boot-starter-webflux*.\r\n\r\nAlso I have changed my *ReactiveWebSocketConfiguration* class to set *WebSocketService* bean using *ReactorNettyRequestUpgradeStrategy* instead of *TomcatRequestUpgradeStrategy*:\r\n\r\n    @Bean\r\n    public WebSocketService webSocketService() {\r\n\t\treturn new HandshakeWebSocketService(new ReactorNettyRequestUpgradeStrategy());\r\n    }\r\n\r\nAfter those changes my jsp pages stopped working as my web container changed from Tomcat to Netty Web Server.\r\nI had to use Thymeleaf (added *spring-boot-starter-thymeleaf* dependency, configured its basic strucute and converted my pages to .html files) instead of traditional jsp.\r\n\r\nI have opted to change from traditional jsp to Thymeleaf due to time constraints as my application has few and simple pages.\r\n\r\nI have created a very simple project with all those configuration including a dummy page connecting to the websocket via javascript.\r\n\r\nhttps://github.com/atilio-araujo/spring-webflux-websocket","title":"Spring WebFlux and WebSocket","body":"<p>I could make it work removing <em>spring-boot-starter-web</em> and <em>tomcat-embed-jasper</em> dependencies. I suppose <em>spring-boot-starter-web</em> might conflict with <em>spring-boot-starter-webflux</em>.</p>\n\n<p>Also I have changed my <em>ReactiveWebSocketConfiguration</em> class to set <em>WebSocketService</em> bean using <em>ReactorNettyRequestUpgradeStrategy</em> instead of <em>TomcatRequestUpgradeStrategy</em>:</p>\n\n<pre><code>@Bean\npublic WebSocketService webSocketService() {\n    return new HandshakeWebSocketService(new ReactorNettyRequestUpgradeStrategy());\n}\n</code></pre>\n\n<p>After those changes my jsp pages stopped working as my web container changed from Tomcat to Netty Web Server.\nI had to use Thymeleaf (added <em>spring-boot-starter-thymeleaf</em> dependency, configured its basic strucute and converted my pages to .html files) instead of traditional jsp.</p>\n\n<p>I have opted to change from traditional jsp to Thymeleaf due to time constraints as my application has few and simple pages.</p>\n\n<p>I have created a very simple project with all those configuration including a dummy page connecting to the websocket via javascript.</p>\n\n<p><a href=\"https://github.com/atilio-araujo/spring-webflux-websocket\" rel=\"nofollow noreferrer\">https://github.com/atilio-araujo/spring-webflux-websocket</a></p>\n"},{"tags":[],"owner":{"account_id":3459421,"reputation":15080,"user_id":2897008,"accept_rate":73,"display_name":"vins"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1627398861,"creation_date":1607219961,"answer_id":65163944,"question_id":58942599,"body_markdown":"# Spring WebFlux WebSocket:\r\n\r\nJust adding this answer for people who are trying to achieve `websocket` with `webflux`.\r\n\r\n1. The OP has both `web` and `webflux` dependencies for some reason. However you just need `WebFlux` dependency only.  \r\n2. Implement a WebSocketHandler\r\n```\r\n    @Service\r\n    public class WebFluxWebSocketHandler implements WebSocketHandler {\r\n    \r\n        @Override\r\n        public Mono&lt;Void&gt; handle(WebSocketSession webSocketSession) {\r\n            Flux&lt;WebSocketMessage&gt; stringFlux = webSocketSession.receive()\r\n                    .map(WebSocketMessage::getPayloadAsText)\r\n                    .map(String::toUpperCase)\r\n                    .map(webSocketSession::textMessage);\r\n            return webSocketSession.send(stringFlux);\r\n        }\r\n    \r\n    }\r\n```\r\n3. Add a path - handler mapping. Here the handler is an instance of the websockethandler.\r\n\r\n ```\r\n      @Bean\r\n        public HandlerMapping handlerMapping(){\r\n            Map&lt;String, WebFluxWebSocketHandler&gt; handlerMap = Map.of(\r\n                    &quot;/test&quot;, handler\r\n            );\r\n            return new SimpleUrlHandlerMapping(handlerMap, 1);\r\n        }\r\n```\r\n\r\nThat&#39;s it! Now the client should be able to connect to `ws://localhost:8080/test`\r\n\r\nCheck here for more info - https://www.vinsguru.com/spring-webflux-websocket/","title":"Spring WebFlux and WebSocket","body":"<h1 id=\"spring-webflux-websocket-bwce\">Spring WebFlux WebSocket:</h1>\n<p>Just adding this answer for people who are trying to achieve <code>websocket</code> with <code>webflux</code>.</p>\n<ol>\n<li>The OP has both <code>web</code> and <code>webflux</code> dependencies for some reason. However you just need <code>WebFlux</code> dependency only.</li>\n<li>Implement a WebSocketHandler</li>\n</ol>\n<pre><code>    @Service\n    public class WebFluxWebSocketHandler implements WebSocketHandler {\n    \n        @Override\n        public Mono&lt;Void&gt; handle(WebSocketSession webSocketSession) {\n            Flux&lt;WebSocketMessage&gt; stringFlux = webSocketSession.receive()\n                    .map(WebSocketMessage::getPayloadAsText)\n                    .map(String::toUpperCase)\n                    .map(webSocketSession::textMessage);\n            return webSocketSession.send(stringFlux);\n        }\n    \n    }\n</code></pre>\n<ol start=\"3\">\n<li>Add a path - handler mapping. Here the handler is an instance of the websockethandler.</li>\n</ol>\n<pre><code>     @Bean\n       public HandlerMapping handlerMapping(){\n           Map&lt;String, WebFluxWebSocketHandler&gt; handlerMap = Map.of(\n                   &quot;/test&quot;, handler\n           );\n           return new SimpleUrlHandlerMapping(handlerMap, 1);\n       }\n</code></pre>\n<p>That's it! Now the client should be able to connect to <code>ws://localhost:8080/test</code></p>\n<p>Check here for more info - <a href=\"https://www.vinsguru.com/spring-webflux-websocket/\" rel=\"nofollow noreferrer\">https://www.vinsguru.com/spring-webflux-websocket/</a></p>\n"}],"owner":{"account_id":8088563,"reputation":71,"user_id":6095286,"display_name":"At&#237;lio Ara&#250;jo"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9310,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":59032143,"answer_count":2,"score":2,"last_activity_date":1671842658,"creation_date":1574196631,"question_id":58942599,"body_markdown":"I am trying to add WebSocket functionality to an existing application which uses Spring WebFlux. It uses:\r\n\r\n - Spring boot 2.2.1.RELEASE\r\n - Tomcat container\r\n - Configured to serve jsp pages\r\n\r\nWhen I try to connect to it through JavaScript (from inside a jsp page) I am receiving the error &quot;*failed: Error during WebSocket handshake: Unexpected response code: 404*&quot;\r\n\r\nI noted that if I create a controller class mapping url &#39;/ws/event-emitter&#39; (the one mapped in my websocket configuration) accepting GET requests, it receives the requests from Javascript call when it tries to open the websocket connection, which made me more confused.\r\n\r\nWhat am I missing?\r\n\r\nAfter read some tutorials on the Internet I set my configuration as below:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.2.1.RELEASE&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;br.com.samsung&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;monitor&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;monitor&lt;/name&gt;\r\n\t&lt;description&gt;Health Check Monitor&lt;/description&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- \r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\r\n\t\t    &lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.projectreactor&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;reactor-spring&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;1.0.1.RELEASE&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\r\n\t\t    &lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- MongoDB --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;spring-data-mongodb&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;spring-data-releasetrain&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;Lovelace-SR9&lt;/version&gt;\r\n\t\t    &lt;type&gt;pom&lt;/type&gt;\r\n\t\t    &lt;scope&gt;import&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n\r\n    @Configuration\r\n    public class ReactiveWebSocketConfiguration {\r\n\r\n        @Autowired\r\n        private WebSocketHandler webSocketHandler;\r\n\r\n        @Bean\r\n        public HandlerMapping webSocketHandlerMapping() {\r\n            Map&lt;String, WebSocketHandler&gt; map = new HashMap&lt;&gt;();\r\n            map.put(&quot;/ws/event-emitter&quot;, webSocketHandler);\r\n\r\n            SimpleUrlHandlerMapping handlerMapping = new SimpleUrlHandlerMapping();\r\n            handlerMapping.setOrder(Ordered.HIGHEST_PRECEDENCE);\r\n            handlerMapping.setUrlMap(map);\r\n            return handlerMapping;\r\n        }\r\n\r\n        @Bean\r\n        public WebSocketHandlerAdapter handlerAdapter(WebSocketService webSocketService) {\r\n            return new WebSocketHandlerAdapter(webSocketService);\r\n        }\r\n \r\n        @Bean\r\n        public WebSocketService webSocketService() {\r\n\t    \tTomcatRequestUpgradeStrategy strategy = new TomcatRequestUpgradeStrategy();\r\n\t    \tstrategy.setMaxSessionIdleTimeout(0L);\r\n\t    \treturn new HandshakeWebSocketService(strategy);\r\n        }\r\n\r\n    }\r\n\r\nand the Web socket handler class\r\n\r\n\r\n    @Component\r\n    public class ReactiveWebSocketHandler implements WebSocketHandler {\r\n\r\n        private static final ObjectMapper json = new ObjectMapper();\r\n\r\n        private Flux&lt;String&gt; eventFlux = Flux.generate(sink -&gt; {\r\n            Event event = new Event(randomUUID().toString(), now().toString());\r\n            try {\r\n                sink.next(json.writeValueAsString(event));\r\n            } catch (JsonProcessingException e) {\r\n                sink.error(e);\r\n            }\r\n        });\r\n\r\n        private Flux&lt;String&gt; intervalFlux = Flux.interval(Duration.ofMillis(1000L))\r\n          .zipWith(eventFlux, (time, event) -&gt; event);\r\n\r\n        @Override\r\n        public Mono&lt;Void&gt; handle(WebSocketSession webSocketSession) {\r\n            return webSocketSession.send(intervalFlux\r\n              .map(webSocketSession::textMessage))\r\n              .and(webSocketSession.receive()\r\n                .map(WebSocketMessage::getPayloadAsText).log());\r\n        }\r\n\r\n    }\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    var clientWebSocket = new WebSocket(&quot;ws://localhost:6600/ws/event-emitter&quot;);\r\n    clientWebSocket.onopen = function() {\r\n      console.log(&quot;clientWebSocket.onopen&quot;, clientWebSocket);\r\n      console.log(&quot;clientWebSocket.readyState&quot;, &quot;websocketstatus&quot;);\r\n      clientWebSocket.send(&quot;event-me-from-browser&quot;);\r\n    }\r\n    clientWebSocket.onclose = function(error) {\r\n      console.log(&quot;clientWebSocket.onclose&quot;, clientWebSocket, error);\r\n      events(&quot;Closing connection&quot;);\r\n    }\r\n    clientWebSocket.onerror = function(error) {\r\n      console.log(&quot;clientWebSocket.onerror&quot;, clientWebSocket, error);\r\n      events(&quot;An error occured&quot;);\r\n    }\r\n    clientWebSocket.onmessage = function(error) {\r\n      console.log(&quot;clientWebSocket.onmessage&quot;, clientWebSocket, error);\r\n      events(error.data);\r\n    }\r\n\r\n    function events(responseEvent) {\r\n      document.querySelector(&quot;.events&quot;).innerHTML += responseEvent + &quot;&lt;br&gt;&quot;;\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Spring WebFlux and WebSocket","body":"<p>I am trying to add WebSocket functionality to an existing application which uses Spring WebFlux. It uses:</p>\n<ul>\n<li>Spring boot 2.2.1.RELEASE</li>\n<li>Tomcat container</li>\n<li>Configured to serve jsp pages</li>\n</ul>\n<p>When I try to connect to it through JavaScript (from inside a jsp page) I am receiving the error &quot;<em>failed: Error during WebSocket handshake: Unexpected response code: 404</em>&quot;</p>\n<p>I noted that if I create a controller class mapping url '/ws/event-emitter' (the one mapped in my websocket configuration) accepting GET requests, it receives the requests from Javascript call when it tries to open the websocket connection, which made me more confused.</p>\n<p>What am I missing?</p>\n<p>After read some tutorials on the Internet I set my configuration as below:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n</code></pre>\n<p>\n4.0.0\n\norg.springframework.boot\nspring-boot-starter-parent\n2.2.1.RELEASE\n \n\nbr.com.samsung\nmonitor\n0.0.1-SNAPSHOT\nmonitor\nHealth Check Monitor</p>\n<pre><code>&lt;properties&gt;\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;!-- \n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n     --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n        &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectreactor&lt;/groupId&gt;\n        &lt;artifactId&gt;reactor-spring&lt;/artifactId&gt;\n        &lt;version&gt;1.0.1.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\n                &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\n        &lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;!-- MongoDB --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-data-mongodb&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-data-releasetrain&lt;/artifactId&gt;\n        &lt;version&gt;Lovelace-SR9&lt;/version&gt;\n        &lt;type&gt;pom&lt;/type&gt;\n        &lt;scope&gt;import&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<pre><code>@Configuration\npublic class ReactiveWebSocketConfiguration {\n\n    @Autowired\n    private WebSocketHandler webSocketHandler;\n\n    @Bean\n    public HandlerMapping webSocketHandlerMapping() {\n        Map&lt;String, WebSocketHandler&gt; map = new HashMap&lt;&gt;();\n        map.put(&quot;/ws/event-emitter&quot;, webSocketHandler);\n\n        SimpleUrlHandlerMapping handlerMapping = new SimpleUrlHandlerMapping();\n        handlerMapping.setOrder(Ordered.HIGHEST_PRECEDENCE);\n        handlerMapping.setUrlMap(map);\n        return handlerMapping;\n    }\n\n    @Bean\n    public WebSocketHandlerAdapter handlerAdapter(WebSocketService webSocketService) {\n        return new WebSocketHandlerAdapter(webSocketService);\n    }\n\n    @Bean\n    public WebSocketService webSocketService() {\n        TomcatRequestUpgradeStrategy strategy = new TomcatRequestUpgradeStrategy();\n        strategy.setMaxSessionIdleTimeout(0L);\n        return new HandshakeWebSocketService(strategy);\n    }\n\n}\n</code></pre>\n<p>and the Web socket handler class</p>\n<pre><code>@Component\npublic class ReactiveWebSocketHandler implements WebSocketHandler {\n\n    private static final ObjectMapper json = new ObjectMapper();\n\n    private Flux&lt;String&gt; eventFlux = Flux.generate(sink -&gt; {\n        Event event = new Event(randomUUID().toString(), now().toString());\n        try {\n            sink.next(json.writeValueAsString(event));\n        } catch (JsonProcessingException e) {\n            sink.error(e);\n        }\n    });\n\n    private Flux&lt;String&gt; intervalFlux = Flux.interval(Duration.ofMillis(1000L))\n      .zipWith(eventFlux, (time, event) -&gt; event);\n\n    @Override\n    public Mono&lt;Void&gt; handle(WebSocketSession webSocketSession) {\n        return webSocketSession.send(intervalFlux\n          .map(webSocketSession::textMessage))\n          .and(webSocketSession.receive()\n            .map(WebSocketMessage::getPayloadAsText).log());\n    }\n\n}\n</code></pre>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var clientWebSocket = new WebSocket(\"ws://localhost:6600/ws/event-emitter\");\nclientWebSocket.onopen = function() {\n  console.log(\"clientWebSocket.onopen\", clientWebSocket);\n  console.log(\"clientWebSocket.readyState\", \"websocketstatus\");\n  clientWebSocket.send(\"event-me-from-browser\");\n}\nclientWebSocket.onclose = function(error) {\n  console.log(\"clientWebSocket.onclose\", clientWebSocket, error);\n  events(\"Closing connection\");\n}\nclientWebSocket.onerror = function(error) {\n  console.log(\"clientWebSocket.onerror\", clientWebSocket, error);\n  events(\"An error occured\");\n}\nclientWebSocket.onmessage = function(error) {\n  console.log(\"clientWebSocket.onmessage\", clientWebSocket, error);\n  events(error.data);\n}\n\nfunction events(responseEvent) {\n  document.querySelector(\".events\").innerHTML += responseEvent + \"&lt;br&gt;\";\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":["java","spring-mvc","ip-address"],"comments":[{"owner":{"account_id":17040681,"reputation":61,"user_id":12328657,"display_name":"Dilip G"},"score":0,"creation_date":1574358878,"post_id":22877350,"comment_id":104214763,"body_markdown":"Try using Spring AOP and handling HttpServletRequest.\nhttps://stackoverflow.com/questions/19271807/how-to-inject-httpservletrequest-into-a-spring-aop-request-custom-scenario","body":"Try using Spring AOP and handling HttpServletRequest. <a href=\"https://stackoverflow.com/questions/19271807/how-to-inject-httpservletrequest-into-a-spring-aop-request-custom-scenario\" title=\"how to inject httpservletrequest into a spring aop request custom scenario\">stackoverflow.com/questions/19271807/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":2102773,"reputation":19013,"user_id":1869933,"accept_rate":88,"display_name":"Koitoer"},"down_vote_count":1,"up_vote_count":192,"is_accepted":true,"score":191,"last_activity_date":1396679599,"creation_date":1396679599,"answer_id":22877465,"question_id":22877350,"body_markdown":"The solution is \r\n\r\n    @RequestMapping(value = &quot;processing&quot;, method = RequestMethod.GET)\r\n    public @ResponseBody ProcessResponse processData(@RequestParam(&quot;workflow&quot;) final String workflow,\r\n        @RequestParam(&quot;conf&quot;) final String value, @RequestParam(&quot;dc&quot;) final String dc, HttpServletRequest request) {\r\n    \r\n            System.out.println(workflow);\r\n            System.out.println(value);\r\n            System.out.println(dc);\r\n            System.out.println(request.getRemoteAddr());\r\n            // some other code\r\n        }\r\n\r\nAdd `HttpServletRequest request` to your method definition and then use the Servlet API\r\n\r\n\r\nSpring Documentation [here][1] said in \r\n\r\n&gt; 15.3.2.3 Supported handler method arguments and return types\r\n\r\n    Handler methods that are annotated with @RequestMapping can have very flexible signatures.\r\n    Most of them can be used in arbitrary order (see below for more details).\r\n    \r\n    Request or response objects (Servlet API). Choose any specific request or response type,\r\n    for example ServletRequest or HttpServletRequest\r\n\r\n\r\n  [1]: http://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/html/mvc.html","title":"How to extract IP Address in Spring MVC Controller get call?","body":"<p>The solution is </p>\n\n<pre><code>@RequestMapping(value = \"processing\", method = RequestMethod.GET)\npublic @ResponseBody ProcessResponse processData(@RequestParam(\"workflow\") final String workflow,\n    @RequestParam(\"conf\") final String value, @RequestParam(\"dc\") final String dc, HttpServletRequest request) {\n\n        System.out.println(workflow);\n        System.out.println(value);\n        System.out.println(dc);\n        System.out.println(request.getRemoteAddr());\n        // some other code\n    }\n</code></pre>\n\n<p>Add <code>HttpServletRequest request</code> to your method definition and then use the Servlet API</p>\n\n<p>Spring Documentation <a href=\"http://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/html/mvc.html\">here</a> said in </p>\n\n<blockquote>\n  <p>15.3.2.3 Supported handler method arguments and return types</p>\n</blockquote>\n\n<pre><code>Handler methods that are annotated with @RequestMapping can have very flexible signatures.\nMost of them can be used in arbitrary order (see below for more details).\n\nRequest or response objects (Servlet API). Choose any specific request or response type,\nfor example ServletRequest or HttpServletRequest\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3882891,"reputation":2008,"user_id":3214988,"display_name":"sunitkatkar"},"down_vote_count":0,"up_vote_count":143,"is_accepted":false,"score":143,"last_activity_date":1671842289,"creation_date":1429070119,"answer_id":29641322,"question_id":22877350,"body_markdown":"I am late here, but this might help someone looking for the answer. Typically `servletRequest.getRemoteAddr()` works. \r\n\r\nIn many cases your application users might be accessing your web server via a proxy server or maybe your application is behind a load balancer.\r\n\r\nSo you should access the [**X-Forwarded-For**][1] http header in such a case to get the user&#39;s IP address.\r\n\r\ne.g. `String ipAddress = request.getHeader(&quot;X-FORWARDED-FOR&quot;);`\r\n\r\n  [1]: http://en.wikipedia.org/wiki/X-Forwarded-For","title":"How to extract IP Address in Spring MVC Controller get call?","body":"<p>I am late here, but this might help someone looking for the answer. Typically <code>servletRequest.getRemoteAddr()</code> works.</p>\n<p>In many cases your application users might be accessing your web server via a proxy server or maybe your application is behind a load balancer.</p>\n<p>So you should access the <a href=\"http://en.wikipedia.org/wiki/X-Forwarded-For\" rel=\"noreferrer\"><strong>X-Forwarded-For</strong></a> http header in such a case to get the user's IP address.</p>\n<p>e.g. <code>String ipAddress = request.getHeader(&quot;X-FORWARDED-FOR&quot;);</code></p>\n"},{"tags":[],"owner":{"account_id":6649080,"reputation":10675,"user_id":5131937,"accept_rate":67,"display_name":"Radouane ROUFID"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1495379674,"creation_date":1495379359,"answer_id":44098402,"question_id":22877350,"body_markdown":"You can get the IP address statically from the `RequestContextHolder` as below : \r\n\r\n    HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder.currentRequestAttributes())\r\n            .getRequest();\r\n\r\n    String ip = request.getRemoteAddr();\r\n\r\n","title":"How to extract IP Address in Spring MVC Controller get call?","body":"<p>You can get the IP address statically from the <code>RequestContextHolder</code> as below : </p>\n\n<pre><code>HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder.currentRequestAttributes())\n        .getRequest();\n\nString ip = request.getRemoteAddr();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2327485,"reputation":3184,"user_id":4865117,"accept_rate":14,"display_name":"Leon"},"down_vote_count":2,"up_vote_count":8,"is_accepted":false,"score":6,"last_activity_date":1551881708,"creation_date":1551881708,"answer_id":55025170,"question_id":22877350,"body_markdown":"Below is the Spring way, with `autowired` request bean in `@Controller` class:\r\n\r\n    @Autowired \r\n    private HttpServletRequest request;\r\n    \r\n    System.out.println(request.getRemoteHost());\r\n    \r\n    ","title":"How to extract IP Address in Spring MVC Controller get call?","body":"<p>Below is the Spring way, with <code>autowired</code> request bean in <code>@Controller</code> class:</p>\n\n<pre><code>@Autowired \nprivate HttpServletRequest request;\n\nSystem.out.println(request.getRemoteHost());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4356026,"reputation":1989,"user_id":3554624,"display_name":"panser"},"down_vote_count":0,"up_vote_count":58,"is_accepted":false,"score":58,"last_activity_date":1573665475,"creation_date":1553103057,"answer_id":55266907,"question_id":22877350,"body_markdown":"I use such method to do this\r\n\r\n```\r\npublic class HttpReqRespUtils {\r\n\r\n    private static final String[] IP_HEADER_CANDIDATES = {\r\n        &quot;X-Forwarded-For&quot;,\r\n        &quot;Proxy-Client-IP&quot;,\r\n        &quot;WL-Proxy-Client-IP&quot;,\r\n        &quot;HTTP_X_FORWARDED_FOR&quot;,\r\n        &quot;HTTP_X_FORWARDED&quot;,\r\n        &quot;HTTP_X_CLUSTER_CLIENT_IP&quot;,\r\n        &quot;HTTP_CLIENT_IP&quot;,\r\n        &quot;HTTP_FORWARDED_FOR&quot;,\r\n        &quot;HTTP_FORWARDED&quot;,\r\n        &quot;HTTP_VIA&quot;,\r\n        &quot;REMOTE_ADDR&quot;\r\n    };\r\n\r\n    public static String getClientIpAddressIfServletRequestExist() {\r\n\r\n        if (RequestContextHolder.getRequestAttributes() == null) {\r\n            return &quot;0.0.0.0&quot;;\r\n        }\r\n\r\n        HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest();\r\n        for (String header: IP_HEADER_CANDIDATES) {\r\n            String ipList = request.getHeader(header);\r\n            if (ipList != null &amp;&amp; ipList.length() != 0 &amp;&amp; !&quot;unknown&quot;.equalsIgnoreCase(ipList)) {\r\n                String ip = ipList.split(&quot;,&quot;)[0];\r\n                return ip;\r\n            }\r\n        }\r\n\r\n        return request.getRemoteAddr();\r\n    }\r\n}\r\n```","title":"How to extract IP Address in Spring MVC Controller get call?","body":"<p>I use such method to do this</p>\n\n<pre><code>public class HttpReqRespUtils {\n\n    private static final String[] IP_HEADER_CANDIDATES = {\n        \"X-Forwarded-For\",\n        \"Proxy-Client-IP\",\n        \"WL-Proxy-Client-IP\",\n        \"HTTP_X_FORWARDED_FOR\",\n        \"HTTP_X_FORWARDED\",\n        \"HTTP_X_CLUSTER_CLIENT_IP\",\n        \"HTTP_CLIENT_IP\",\n        \"HTTP_FORWARDED_FOR\",\n        \"HTTP_FORWARDED\",\n        \"HTTP_VIA\",\n        \"REMOTE_ADDR\"\n    };\n\n    public static String getClientIpAddressIfServletRequestExist() {\n\n        if (RequestContextHolder.getRequestAttributes() == null) {\n            return \"0.0.0.0\";\n        }\n\n        HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest();\n        for (String header: IP_HEADER_CANDIDATES) {\n            String ipList = request.getHeader(header);\n            if (ipList != null &amp;&amp; ipList.length() != 0 &amp;&amp; !\"unknown\".equalsIgnoreCase(ipList)) {\n                String ip = ipList.split(\",\")[0];\n                return ip;\n            }\n        }\n\n        return request.getRemoteAddr();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6829513,"reputation":3942,"user_id":5254103,"accept_rate":0,"display_name":"BaiJiFeiLong"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1565440732,"creation_date":1565440732,"answer_id":57442234,"question_id":22877350,"body_markdown":"Put this method in your BaseController:\r\n\r\n    @SuppressWarnings(&quot;ConstantConditions&quot;)\r\n    protected String fetchClientIpAddr() {\r\n        HttpServletRequest request = ((ServletRequestAttributes) (RequestContextHolder.getRequestAttributes())).getRequest();\r\n        String ip = Optional.ofNullable(request.getHeader(&quot;X-FORWARDED-FOR&quot;)).orElse(request.getRemoteAddr());\r\n        if (ip.equals(&quot;0:0:0:0:0:0:0:1&quot;)) ip = &quot;127.0.0.1&quot;;\r\n        Assert.isTrue(ip.chars().filter($ -&gt; $ == &#39;.&#39;).count() == 3, &quot;Illegal IP: &quot; + ip);\r\n        return ip;\r\n    }","title":"How to extract IP Address in Spring MVC Controller get call?","body":"<p>Put this method in your BaseController:</p>\n\n<pre><code>@SuppressWarnings(\"ConstantConditions\")\nprotected String fetchClientIpAddr() {\n    HttpServletRequest request = ((ServletRequestAttributes) (RequestContextHolder.getRequestAttributes())).getRequest();\n    String ip = Optional.ofNullable(request.getHeader(\"X-FORWARDED-FOR\")).orElse(request.getRemoteAddr());\n    if (ip.equals(\"0:0:0:0:0:0:0:1\")) ip = \"127.0.0.1\";\n    Assert.isTrue(ip.chars().filter($ -&gt; $ == '.').count() == 3, \"Illegal IP: \" + ip);\n    return ip;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7179860,"reputation":141,"user_id":5484266,"display_name":"Vagner Nogueira"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1572800849,"creation_date":1572800849,"answer_id":58682577,"question_id":22877350,"body_markdown":"See below. This code works with spring-boot and spring-boot + apache CXF/SOAP.\r\n\r\n```\r\n    // in your class RequestUtil\r\n    private static final String[] IP_HEADER_NAMES = { \r\n                                                        &quot;X-Forwarded-For&quot;,\r\n                                                        &quot;Proxy-Client-IP&quot;,\r\n                                                        &quot;WL-Proxy-Client-IP&quot;,\r\n                                                        &quot;HTTP_X_FORWARDED_FOR&quot;,\r\n                                                        &quot;HTTP_X_FORWARDED&quot;,\r\n                                                        &quot;HTTP_X_CLUSTER_CLIENT_IP&quot;,\r\n                                                        &quot;HTTP_CLIENT_IP&quot;,\r\n                                                        &quot;HTTP_FORWARDED_FOR&quot;,\r\n                                                        &quot;HTTP_FORWARDED&quot;,\r\n                                                        &quot;HTTP_VIA&quot;,\r\n                                                        &quot;REMOTE_ADDR&quot;\r\n                                                    };\r\n\r\n    public static String getRemoteIP(RequestAttributes requestAttributes)\r\n    {\r\n        if (requestAttributes == null)\r\n        {\r\n            return &quot;0.0.0.0&quot;;\r\n        }\r\n        HttpServletRequest request = ((ServletRequestAttributes) requestAttributes).getRequest();\r\n        String ip = Arrays.asList(IP_HEADER_NAMES)\r\n            .stream()\r\n            .map(request::getHeader)\r\n            .filter(h -&gt; h != null &amp;&amp; h.length() != 0 &amp;&amp; !&quot;unknown&quot;.equalsIgnoreCase(h))\r\n            .map(h -&gt; h.split(&quot;,&quot;)[0])\r\n            .reduce(&quot;&quot;, (h1, h2) -&gt; h1 + &quot;:&quot; + h2);\r\n        return ip + request.getRemoteAddr();\r\n    }\r\n\r\n    //... in service class:\r\n    String remoteAddress = RequestUtil.getRemoteIP(RequestContextHolder.currentRequestAttributes());\r\n```\r\n\r\n:)","title":"How to extract IP Address in Spring MVC Controller get call?","body":"<p>See below. This code works with spring-boot and spring-boot + apache CXF/SOAP.</p>\n\n<pre><code>    // in your class RequestUtil\n    private static final String[] IP_HEADER_NAMES = { \n                                                        \"X-Forwarded-For\",\n                                                        \"Proxy-Client-IP\",\n                                                        \"WL-Proxy-Client-IP\",\n                                                        \"HTTP_X_FORWARDED_FOR\",\n                                                        \"HTTP_X_FORWARDED\",\n                                                        \"HTTP_X_CLUSTER_CLIENT_IP\",\n                                                        \"HTTP_CLIENT_IP\",\n                                                        \"HTTP_FORWARDED_FOR\",\n                                                        \"HTTP_FORWARDED\",\n                                                        \"HTTP_VIA\",\n                                                        \"REMOTE_ADDR\"\n                                                    };\n\n    public static String getRemoteIP(RequestAttributes requestAttributes)\n    {\n        if (requestAttributes == null)\n        {\n            return \"0.0.0.0\";\n        }\n        HttpServletRequest request = ((ServletRequestAttributes) requestAttributes).getRequest();\n        String ip = Arrays.asList(IP_HEADER_NAMES)\n            .stream()\n            .map(request::getHeader)\n            .filter(h -&gt; h != null &amp;&amp; h.length() != 0 &amp;&amp; !\"unknown\".equalsIgnoreCase(h))\n            .map(h -&gt; h.split(\",\")[0])\n            .reduce(\"\", (h1, h2) -&gt; h1 + \":\" + h2);\n        return ip + request.getRemoteAddr();\n    }\n\n    //... in service class:\n    String remoteAddress = RequestUtil.getRemoteIP(RequestContextHolder.currentRequestAttributes());\n</code></pre>\n\n<p>:)</p>\n"},{"tags":[],"owner":{"account_id":6103893,"reputation":850,"user_id":4762075,"accept_rate":47,"display_name":"BaDr Amer"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1588139897,"creation_date":1588139897,"answer_id":61495191,"question_id":22877350,"body_markdown":"In my case, I was using Nginx in front of my application with the following configuration:\r\n\r\n```\r\nlocation / {\r\n     proxy_pass        http://localhost:8080/;\r\n     proxy_set_header  X-Real-IP $remote_addr;\r\n     proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;\r\n     proxy_set_header  Host $http_host;\r\n     add_header Content-Security-Policy &#39;upgrade-insecure-requests&#39;;\r\n}\r\n```\r\nso in my application I get the real user ip like so:\r\n\r\n```\r\nString clientIP = request.getHeader(&quot;X-Real-IP&quot;);\r\n```\r\n\r\n","title":"How to extract IP Address in Spring MVC Controller get call?","body":"<p>In my case, I was using Nginx in front of my application with the following configuration:</p>\n\n<pre><code>location / {\n     proxy_pass        http://localhost:8080/;\n     proxy_set_header  X-Real-IP $remote_addr;\n     proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;\n     proxy_set_header  Host $http_host;\n     add_header Content-Security-Policy 'upgrade-insecure-requests';\n}\n</code></pre>\n\n<p>so in my application I get the real user ip like so:</p>\n\n<pre><code>String clientIP = request.getHeader(\"X-Real-IP\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10225897,"reputation":551,"user_id":7548514,"display_name":"Kyo Huu"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1593102826,"creation_date":1593102826,"answer_id":62580113,"question_id":22877350,"body_markdown":"    private static final String[] IP_HEADER_CANDIDATES = {\r\n                &quot;X-Forwarded-For&quot;,\r\n                &quot;Proxy-Client-IP&quot;,\r\n                &quot;WL-Proxy-Client-IP&quot;,\r\n                &quot;HTTP_X_FORWARDED_FOR&quot;,\r\n                &quot;HTTP_X_FORWARDED&quot;,\r\n                &quot;HTTP_X_CLUSTER_CLIENT_IP&quot;,\r\n                &quot;HTTP_CLIENT_IP&quot;,\r\n                &quot;HTTP_FORWARDED_FOR&quot;,\r\n                &quot;HTTP_FORWARDED&quot;,\r\n                &quot;HTTP_VIA&quot;,\r\n                &quot;REMOTE_ADDR&quot;\r\n        };\r\n    \r\n        public static String getIPFromRequest(HttpServletRequest request) {\r\n            String ip = null;\r\n            if (request == null) {\r\n                if (RequestContextHolder.getRequestAttributes() == null) {\r\n                    return null;\r\n                }\r\n                request = ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest();\r\n            }\r\n    \r\n            try {\r\n                ip = InetAddress.getLocalHost().getHostAddress();\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n            if (!StringUtils.isEmpty(ip))\r\n                return ip;\r\n    \r\n            for (String header : IP_HEADER_CANDIDATES) {\r\n                String ipList = request.getHeader(header);\r\n                if (ipList != null &amp;&amp; ipList.length() != 0 &amp;&amp; !&quot;unknown&quot;.equalsIgnoreCase(ipList)) {\r\n                    return ipList.split(&quot;,&quot;)[0];\r\n                }\r\n            }\r\n    \r\n            return request.getRemoteAddr();\r\n        }\r\n\r\nI combie the code above to this code work for most case. Pass the `HttpServletRequest request` you get from the api to the method","title":"How to extract IP Address in Spring MVC Controller get call?","body":"<pre><code>private static final String[] IP_HEADER_CANDIDATES = {\n            &quot;X-Forwarded-For&quot;,\n            &quot;Proxy-Client-IP&quot;,\n            &quot;WL-Proxy-Client-IP&quot;,\n            &quot;HTTP_X_FORWARDED_FOR&quot;,\n            &quot;HTTP_X_FORWARDED&quot;,\n            &quot;HTTP_X_CLUSTER_CLIENT_IP&quot;,\n            &quot;HTTP_CLIENT_IP&quot;,\n            &quot;HTTP_FORWARDED_FOR&quot;,\n            &quot;HTTP_FORWARDED&quot;,\n            &quot;HTTP_VIA&quot;,\n            &quot;REMOTE_ADDR&quot;\n    };\n\n    public static String getIPFromRequest(HttpServletRequest request) {\n        String ip = null;\n        if (request == null) {\n            if (RequestContextHolder.getRequestAttributes() == null) {\n                return null;\n            }\n            request = ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest();\n        }\n\n        try {\n            ip = InetAddress.getLocalHost().getHostAddress();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        if (!StringUtils.isEmpty(ip))\n            return ip;\n\n        for (String header : IP_HEADER_CANDIDATES) {\n            String ipList = request.getHeader(header);\n            if (ipList != null &amp;&amp; ipList.length() != 0 &amp;&amp; !&quot;unknown&quot;.equalsIgnoreCase(ipList)) {\n                return ipList.split(&quot;,&quot;)[0];\n            }\n        }\n\n        return request.getRemoteAddr();\n    }\n</code></pre>\n<p>I combie the code above to this code work for most case. Pass the <code>HttpServletRequest request</code> you get from the api to the method</p>\n"},{"tags":[],"owner":{"account_id":1939812,"reputation":2762,"user_id":1746258,"accept_rate":72,"display_name":"Ulug&#39;bek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1641970681,"creation_date":1641970681,"answer_id":70677455,"question_id":22877350,"body_markdown":"In my case, I am using this piece of code:\r\n\r\n    private String getRemoteAddr(HttpServletRequest req) {\r\n        if (!StringUtils.isEmpty(req.getHeader(&quot;X-Real-IP&quot;))) {\r\n            return req.getHeader(&quot;X-Real-IP&quot;);\r\n        }\r\n        return req.getRemoteAddr();\r\n    }","title":"How to extract IP Address in Spring MVC Controller get call?","body":"<p>In my case, I am using this piece of code:</p>\n<pre><code>private String getRemoteAddr(HttpServletRequest req) {\n    if (!StringUtils.isEmpty(req.getHeader(&quot;X-Real-IP&quot;))) {\n        return req.getHeader(&quot;X-Real-IP&quot;);\n    }\n    return req.getRemoteAddr();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15901758,"reputation":33,"user_id":11473946,"display_name":"Harsh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669616114,"creation_date":1669616114,"answer_id":74596651,"question_id":22877350,"body_markdown":"In my case request.getRemoteAddr() contains the IP address of system from which user is trying to access the application.\r\nand in case, if I am running my application on localhost or 127.0.0.1 it is returning &quot;0:0:0:0:0:0:0:1&quot;","title":"How to extract IP Address in Spring MVC Controller get call?","body":"<p>In my case request.getRemoteAddr() contains the IP address of system from which user is trying to access the application.\nand in case, if I am running my application on localhost or 127.0.0.1 it is returning &quot;0:0:0:0:0:0:0:1&quot;</p>\n"}],"owner":{"account_id":3344039,"reputation":11379,"user_id":2809564,"accept_rate":82,"display_name":"john"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":245009,"favorite_count":0,"down_vote_count":0,"up_vote_count":146,"accepted_answer_id":22877465,"answer_count":11,"score":146,"last_activity_date":1671842289,"creation_date":1396678875,"question_id":22877350,"body_markdown":"I am working on Spring MVC controller project in which I am making a GET URL call from the browser -\r\n\r\nBelow is the url by which I am making a GET call from the browser -\r\n\r\n\thttp://127.0.0.1:8080/testweb/processing?workflow=test&amp;conf=20140324&amp;dc=all\r\n\r\nAnd below is the code in which the call comes after hitting at the browser - \t\r\n\t\r\n    @RequestMapping(value = &quot;processing&quot;, method = RequestMethod.GET)\r\n    public @ResponseBody ProcessResponse processData(@RequestParam(&quot;workflow&quot;) final String workflow,\r\n        @RequestParam(&quot;conf&quot;) final String value, @RequestParam(&quot;dc&quot;) final String dc) {\r\n    \t\r\n    \t\tSystem.out.println(workflow);\r\n    \t\tSystem.out.println(value);\r\n    \t\tSystem.out.println(dc);\r\n    \t\t\r\n    \t\t// some other code\r\n    \t}\r\n\r\n\t\t\r\n**Problem Statement:-**\r\n\r\nNow is there any way, I can extract IP Address from some header? Meaning I  would like to know from which  IP Address, call is coming, meaning whoever is calling above URL, I need to know their IP Address. Is this possible to do?\r\n","title":"How to extract IP Address in Spring MVC Controller get call?","body":"<p>I am working on Spring MVC controller project in which I am making a GET URL call from the browser -</p>\n\n<p>Below is the url by which I am making a GET call from the browser -</p>\n\n<pre><code>http://127.0.0.1:8080/testweb/processing?workflow=test&amp;conf=20140324&amp;dc=all\n</code></pre>\n\n<p>And below is the code in which the call comes after hitting at the browser -    </p>\n\n<pre><code>@RequestMapping(value = \"processing\", method = RequestMethod.GET)\npublic @ResponseBody ProcessResponse processData(@RequestParam(\"workflow\") final String workflow,\n    @RequestParam(\"conf\") final String value, @RequestParam(\"dc\") final String dc) {\n\n        System.out.println(workflow);\n        System.out.println(value);\n        System.out.println(dc);\n\n        // some other code\n    }\n</code></pre>\n\n<p><strong>Problem Statement:-</strong></p>\n\n<p>Now is there any way, I can extract IP Address from some header? Meaning I  would like to know from which  IP Address, call is coming, meaning whoever is calling above URL, I need to know their IP Address. Is this possible to do?</p>\n"},{"tags":["java","xml","dom","iteration"],"comments":[{"owner":{"account_id":307607,"reputation":812,"user_id":618996,"display_name":"Vance Maverick"},"score":0,"creation_date":1300772316,"post_id":5386991,"comment_id":6091398,"body_markdown":"Recursive invocation of Node.getChildNodes? http://download.oracle.com/javase/6/docs/api/org/w3c/dom/Node.html#getChildNodes%28%29","body":"Recursive invocation of Node.getChildNodes? <a href=\"http://download.oracle.com/javase/6/docs/api/org/w3c/dom/Node.html#getChildNodes%28%29\" rel=\"nofollow noreferrer\">download.oracle.com/javase/6/docs/api/org/w3c/dom/&hellip;</a>"},{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":0,"creation_date":1584217294,"post_id":5386991,"comment_id":107370924,"body_markdown":"I think it&#39;s interesting that the question asked the _most efficient_ method to iterate over all elements of a `Document`, but none of the answers did any tests of efficiency, and the only mention of efficiency was &quot;I think&quot; or similar surmises.","body":"I think it&#39;s interesting that the question asked the <i>most efficient</i> method to iterate over all elements of a <code>Document</code>, but none of the answers did any tests of efficiency, and the only mention of efficiency was &quot;I think&quot; or similar surmises."}],"answers":[{"tags":[],"owner":{"account_id":316863,"reputation":59335,"user_id":633239,"accept_rate":90,"display_name":"javanna"},"down_vote_count":1,"up_vote_count":137,"is_accepted":true,"score":136,"last_activity_date":1671842127,"creation_date":1301648955,"answer_id":5511298,"question_id":5386991,"body_markdown":"Basically you have two ways to iterate over all elements:\r\n\r\n **1. Using recursion** (the most common way I think):\r\n\r\n    public static void main(String[] args) throws SAXException, IOException,\r\n    \t    ParserConfigurationException, TransformerException {\r\n    \r\n    \tDocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory\r\n    \t\t.newInstance();\r\n    \tDocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();\r\n    \tDocument document = docBuilder.parse(new File(&quot;document.xml&quot;));\r\n    \tdoSomething(document.getDocumentElement());\r\n    }\r\n\r\n    public static void doSomething(Node node) {\r\n    \t// do something with the current node instead of System.out\r\n    \tSystem.out.println(node.getNodeName());\r\n    \r\n    \tNodeList nodeList = node.getChildNodes();\r\n    \tfor (int i = 0; i &lt; nodeList.getLength(); i++) {\r\n    \t    Node currentNode = nodeList.item(i);\r\n    \t    if (currentNode.getNodeType() == Node.ELEMENT_NODE) {\r\n    \t\t    //calls this method for all the children which is Element\r\n    \t\t    doSomething(currentNode);\r\n    \t    }\r\n    \t}\r\n    }\r\n\r\n **2. Avoiding recursion** using `getElementsByTagName()` method with `*` as parameter:\r\n\r\n\tpublic static void main(String[] args) throws SAXException, IOException,\r\n\t        ParserConfigurationException, TransformerException {\r\n\r\n\t\tDocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory\r\n\t\t        .newInstance();\r\n\t\tDocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();\r\n\t\tDocument document = docBuilder.parse(new File(&quot;document.xml&quot;));\r\n\t\t\r\n\t\tNodeList nodeList = document.getElementsByTagName(&quot;*&quot;);\r\n\t\tfor (int i = 0; i &lt; nodeList.getLength(); i++) {\r\n\t        Node node = nodeList.item(i);\r\n\t        if (node.getNodeType() == Node.ELEMENT_NODE) {\r\n\t        \t// do something with the current element\r\n\t\t\t\tSystem.out.println(node.getNodeName());\r\n\t        }\r\n        }\r\n\t}\r\n\r\nI think these ways are both efficient.","title":"Java: Most efficient method to iterate over all elements in a org.w3c.dom.Document?","body":"<p>Basically you have two ways to iterate over all elements:</p>\n<p><strong>1. Using recursion</strong> (the most common way I think):</p>\n<pre><code>public static void main(String[] args) throws SAXException, IOException,\n        ParserConfigurationException, TransformerException {\n\n    DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory\n        .newInstance();\n    DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();\n    Document document = docBuilder.parse(new File(&quot;document.xml&quot;));\n    doSomething(document.getDocumentElement());\n}\n\npublic static void doSomething(Node node) {\n    // do something with the current node instead of System.out\n    System.out.println(node.getNodeName());\n\n    NodeList nodeList = node.getChildNodes();\n    for (int i = 0; i &lt; nodeList.getLength(); i++) {\n        Node currentNode = nodeList.item(i);\n        if (currentNode.getNodeType() == Node.ELEMENT_NODE) {\n            //calls this method for all the children which is Element\n            doSomething(currentNode);\n        }\n    }\n}\n</code></pre>\n<p><strong>2. Avoiding recursion</strong> using <code>getElementsByTagName()</code> method with <code>*</code> as parameter:</p>\n<pre><code>public static void main(String[] args) throws SAXException, IOException,\n        ParserConfigurationException, TransformerException {\n\n    DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory\n            .newInstance();\n    DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();\n    Document document = docBuilder.parse(new File(&quot;document.xml&quot;));\n    \n    NodeList nodeList = document.getElementsByTagName(&quot;*&quot;);\n    for (int i = 0; i &lt; nodeList.getLength(); i++) {\n        Node node = nodeList.item(i);\n        if (node.getNodeType() == Node.ELEMENT_NODE) {\n            // do something with the current element\n            System.out.println(node.getNodeName());\n        }\n    }\n}\n</code></pre>\n<p>I think these ways are both efficient.</p>\n"},{"tags":[],"owner":{"account_id":1906666,"reputation":761,"user_id":1721406,"display_name":"Andrew"},"down_vote_count":3,"up_vote_count":40,"is_accepted":false,"score":37,"last_activity_date":1527140321,"creation_date":1349386087,"answer_id":12736268,"question_id":5386991,"body_markdown":" `for (int i = 0; i &lt; nodeList.getLength(); i++)`\r\n\r\nchange to \r\n\r\n `for (int i = 0, len = nodeList.getLength(); i &lt; len; i++)` \r\n\r\nto be more efficient.\r\n\r\nThe second way of javanna answer may be the best as it tends to use a flatter, predictable memory model.","title":"Java: Most efficient method to iterate over all elements in a org.w3c.dom.Document?","body":"<p><code>for (int i = 0; i &lt; nodeList.getLength(); i++)</code></p>\n\n<p>change to </p>\n\n<p><code>for (int i = 0, len = nodeList.getLength(); i &lt; len; i++)</code> </p>\n\n<p>to be more efficient.</p>\n\n<p>The second way of javanna answer may be the best as it tends to use a flatter, predictable memory model.</p>\n"},{"tags":[],"owner":{"account_id":2023908,"reputation":4939,"user_id":1809463,"accept_rate":84,"display_name":"mike"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1391602213,"creation_date":1391599442,"answer_id":21575867,"question_id":5386991,"body_markdown":"I also stumbled over this problem recently. Here is my solution.\r\nI wanted to avoid recursion, so I used a while loop.\r\n\r\nBecause of the adds and removes in arbitrary places on the list,\r\nI went with the `LinkedList` implementation.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    /* traverses tree starting with given node */\r\n      private static List&lt;Node&gt; traverse(Node n)\r\n      {\r\n        return traverse(Arrays.asList(n));\r\n      }\r\n    \r\n      /* traverses tree starting with given nodes */\r\n      private static List&lt;Node&gt; traverse(List&lt;Node&gt; nodes)\r\n      {\r\n        List&lt;Node&gt; open = new LinkedList&lt;Node&gt;(nodes);\r\n        List&lt;Node&gt; visited = new LinkedList&lt;Node&gt;();\r\n    \r\n        ListIterator&lt;Node&gt; it = open.listIterator();\r\n        while (it.hasNext() || it.hasPrevious())\r\n        {\r\n          Node unvisited;\r\n          if (it.hasNext())\r\n            unvisited = it.next();\r\n          else\r\n            unvisited = it.previous();\r\n    \r\n          it.remove();\r\n    \r\n          List&lt;Node&gt; children = getChildren(unvisited);\r\n          for (Node child : children)\r\n            it.add(child);\r\n    \r\n          visited.add(unvisited);\r\n        }\r\n    \r\n        return visited;\r\n      }\r\n    \r\n      private static List&lt;Node&gt; getChildren(Node n)\r\n      {\r\n        List&lt;Node&gt; children = asList(n.getChildNodes());\r\n        Iterator&lt;Node&gt; it = children.iterator();\r\n        while (it.hasNext())\r\n          if (it.next().getNodeType() != Node.ELEMENT_NODE)\r\n            it.remove();\r\n        return children;\r\n      }\r\n\r\n      private static List&lt;Node&gt; asList(NodeList nodes)\r\n      {\r\n        List&lt;Node&gt; list = new ArrayList&lt;Node&gt;(nodes.getLength());\r\n        for (int i = 0, l = nodes.getLength(); i &lt; l; i++)\r\n          list.add(nodes.item(i));\r\n        return list;\r\n      }\r\n\r\n","title":"Java: Most efficient method to iterate over all elements in a org.w3c.dom.Document?","body":"<p>I also stumbled over this problem recently. Here is my solution.\nI wanted to avoid recursion, so I used a while loop.</p>\n\n<p>Because of the adds and removes in arbitrary places on the list,\nI went with the <code>LinkedList</code> implementation.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>/* traverses tree starting with given node */\n  private static List&lt;Node&gt; traverse(Node n)\n  {\n    return traverse(Arrays.asList(n));\n  }\n\n  /* traverses tree starting with given nodes */\n  private static List&lt;Node&gt; traverse(List&lt;Node&gt; nodes)\n  {\n    List&lt;Node&gt; open = new LinkedList&lt;Node&gt;(nodes);\n    List&lt;Node&gt; visited = new LinkedList&lt;Node&gt;();\n\n    ListIterator&lt;Node&gt; it = open.listIterator();\n    while (it.hasNext() || it.hasPrevious())\n    {\n      Node unvisited;\n      if (it.hasNext())\n        unvisited = it.next();\n      else\n        unvisited = it.previous();\n\n      it.remove();\n\n      List&lt;Node&gt; children = getChildren(unvisited);\n      for (Node child : children)\n        it.add(child);\n\n      visited.add(unvisited);\n    }\n\n    return visited;\n  }\n\n  private static List&lt;Node&gt; getChildren(Node n)\n  {\n    List&lt;Node&gt; children = asList(n.getChildNodes());\n    Iterator&lt;Node&gt; it = children.iterator();\n    while (it.hasNext())\n      if (it.next().getNodeType() != Node.ELEMENT_NODE)\n        it.remove();\n    return children;\n  }\n\n  private static List&lt;Node&gt; asList(NodeList nodes)\n  {\n    List&lt;Node&gt; list = new ArrayList&lt;Node&gt;(nodes.getLength());\n    for (int i = 0, l = nodes.getLength(); i &lt; l; i++)\n      list.add(nodes.item(i));\n    return list;\n  }\n</code></pre>\n"}],"owner":{"account_id":151201,"reputation":15045,"user_id":364914,"accept_rate":85,"display_name":"KJW"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":193118,"favorite_count":0,"down_vote_count":0,"up_vote_count":82,"accepted_answer_id":5511298,"answer_count":3,"score":82,"last_activity_date":1671842127,"creation_date":1300769715,"question_id":5386991,"body_markdown":"What is the most efficient way to iterate through all DOM elements in Java?\r\n\r\nSomething like this but for every single DOM elements on current `org.w3c.dom.Document`?\r\n\r\n    for(Node childNode = node.getFirstChild(); childNode!=null;){\r\n        Node nextChild = childNode.getNextSibling();\r\n        // Do something with childNode, including move or delete...\r\n        childNode = nextChild;\r\n    }","title":"Java: Most efficient method to iterate over all elements in a org.w3c.dom.Document?","body":"<p>What is the most efficient way to iterate through all DOM elements in Java?</p>\n\n<p>Something like this but for every single DOM elements on current <code>org.w3c.dom.Document</code>?</p>\n\n<pre><code>for(Node childNode = node.getFirstChild(); childNode!=null;){\n    Node nextChild = childNode.getNextSibling();\n    // Do something with childNode, including move or delete...\n    childNode = nextChild;\n}\n</code></pre>\n"},{"tags":["java","apache-kafka","kafka-consumer-api","spring-kafka"],"answers":[{"tags":[],"owner":{"account_id":16870790,"reputation":26,"user_id":12199323,"display_name":"Nitish Sharma"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1666464730,"creation_date":1666464730,"answer_id":74166304,"question_id":74157919,"body_markdown":"I think you forgot to mention the port in your configuration\r\n\r\nSomething like this in kafka configuration:\r\n\r\n    spring.kafka.bootstrap-servers=localhost:9092","title":"Spring Kafka consumer keep disconnecting from broker at random time intervals","body":"<p>I think you forgot to mention the port in your configuration</p>\n<p>Something like this in kafka configuration:</p>\n<pre><code>spring.kafka.bootstrap-servers=localhost:9092\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671841179,"creation_date":1671841179,"answer_id":74904924,"question_id":74157919,"body_markdown":"Your Spring client timeout is a red-herring. \r\n\r\nYour Broker is failing to connect to Zookeeper, and crashes. Therefore Spring app will also crash. Restarts will only temporarily fix it, so you need to address why the broker is really disconnecting from Zookpeeper (do Zookepeer logs look okay?)","title":"Spring Kafka consumer keep disconnecting from broker at random time intervals","body":"<p>Your Spring client timeout is a red-herring.</p>\n<p>Your Broker is failing to connect to Zookeeper, and crashes. Therefore Spring app will also crash. Restarts will only temporarily fix it, so you need to address why the broker is really disconnecting from Zookpeeper (do Zookepeer logs look okay?)</p>\n"}],"owner":{"account_id":24627106,"reputation":11,"user_id":18526719,"display_name":"music bot"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1394,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1671841179,"creation_date":1666377412,"question_id":74157919,"body_markdown":"My kafka configuration is simple as it can be:\r\n\r\n    @Bean\r\n    public NewTopic generalTopic() {\r\n        return TopicBuilder.name(&quot;topic&quot;)\r\n                .partitions(5)\r\n                .replicas(5)\r\n                .build();\r\n    }\r\n\r\n    @KafkaListener(id= &quot;anyID&quot;, topics=&quot;topic&quot;)\r\n    public void consumer(String message) {\r\n    \tSystem.out.println(message);\r\n    }\r\n\r\nProducer: sending messages invoking kafkaTemplate.send():\r\n\r\n    @Autowired\r\n\tprivate KafkaTemplate&lt;String, String&gt; kafkaTemplate;\r\n\r\n    kafkaTemplate.send(&quot;topic&quot;, &quot;message to send&quot;);\r\n\r\nAnd finnally, kafka configuration:\r\n\r\n    spring.kafka.bootstrap-servers=localhost\r\n    \r\n    spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer\r\n    spring.kafka.consumer.value-deserializer=org.apache.kafka.common.serialization.StringDeserializer\r\n    \r\n    spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer\r\n    spring.kafka.producer.value-serializer= org.apache.kafka.common.serialization.StringSerializer\r\n\r\n\r\nMy application is a desktop application, so every client has it&#39;s own producer and consumer with this very same configuration above (excluding @KafkaListener(id= &quot;anyID&quot;, where anyID is the user name).\r\n\r\nWhen launching the application (right after closing it), sometimes it generates this error message:\r\n\r\n \r\n\r\n    \r\n\r\n    2022-10-21 15:13:42.130 ERROR 3524 --- [JavaFX-Launcher] o.springframework.kafka.core.KafkaAdmin  : Could not configure topics\r\n    \r\n    org.springframework.kafka.KafkaException: Timed out waiting to get existing topics; nested exception is java.util.concurrent.TimeoutException\r\n\r\nChecking the kafka server.log (under logs/server.log), there&#39;s this stack trace:\r\n\r\n        [2022-10-21 18:11:28,519] WARN Unexpected exception (org.apache.zookeeper.server.NIOServerCnxn)\r\n    EndOfStreamException: Unable to read additional data from client, it probably closed the socket: address = /127.0.0.1:34456, session = 0x100a5e36a580005\r\n    \tat org.apache.zookeeper.server.NIOServerCnxn.handleFailedRead(NIOServerCnxn.java:163)\r\n    \tat org.apache.zookeeper.server.NIOServerCnxn.doIO(NIOServerCnxn.java:326)\r\n    \tat org.apache.zookeeper.server.NIOServerCnxnFactory$IOWorkRequest.doWork(NIOServerCnxnFactory.java:522)\r\n    \tat org.apache.zookeeper.server.WorkerService$ScheduledWorkRequest.run(WorkerService.java:154)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n    \tat java.lang.Thread.run(Thread.java:750)\r\n    [2022-10-21 18:11:43,670] INFO Expiring session 0x100a5e36a580005, timeout of 18000ms exceeded (org.apache.zookeeper.server.ZooKeeperServer)\r\n\r\n\r\nI&#39;m sure the error message is related to the log stack trace, but I have no idea what&#39;s is causing it and how to solve it.\r\n\r\n\r\nIn order to get it working back, I just restart kafka with \r\n\r\n&gt; bin/kafka-server-start.sh -daemon config/server.properties\r\n\r\nSo basically I have to keep restarting kafka everytime I get this error.\r\n\r\n\r\nAny thoughts?\r\n\r\nFor reference, here&#39;s a full reference of the error I&#39;m getting in the clients:\r\n\r\n        org.springframework.kafka.KafkaException: Timed out waiting to get existing topics; nested exception is java.util.concurrent.TimeoutException\r\n    \tat org.springframework.kafka.core.KafkaAdmin.lambda$checkPartitions$8(KafkaAdmin.java:388) ~[spring-kafka-2.8.8.jar:2.8.8]\r\n    \tat java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]\r\n    \tat org.springframework.kafka.core.KafkaAdmin.checkPartitions(KafkaAdmin.java:367) ~[spring-kafka-2.8.8.jar:2.8.8]\r\n    \tat org.springframework.kafka.core.KafkaAdmin.addOrModifyTopicsIfNeeded(KafkaAdmin.java:263) ~[spring-kafka-2.8.8.jar:2.8.8]\r\n    \tat org.springframework.kafka.core.KafkaAdmin.initialize(KafkaAdmin.java:200) ~[spring-kafka-2.8.8.jar:2.8.8]\r\n    \tat org.springframework.kafka.core.KafkaAdmin.afterSingletonsInstantiated(KafkaAdmin.java:167) ~[spring-kafka-2.8.8.jar:2.8.8]\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:974) ~[spring-beans-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.3.jar:2.7.3]\r\n    \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.3.jar:2.7.3]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.3.jar:2.7.3]\r\n    \tat org.springframework.boot.builder.SpringApplicationBuilder.run(SpringApplicationBuilder.java:164) ~[spring-boot-2.7.3.jar:2.7.3]\r\n    \tat com.nume.main.MirroredMain.springBootApplicationContext(MirroredMain.java:40) ~[classes/:na]\r\n    \tat com.nume.main.MirroredMain.init(MirroredMain.java:61) ~[classes/:na]\r\n    \tat javafx.graphics@19/com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:825) ~[javafx.graphics.jar:na]\r\n    \tat javafx.graphics@19/com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:196) ~[javafx.graphics.jar:na]\r\n    \tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n    Caused by: java.util.concurrent.TimeoutException: null\r\n    \tat java.base/java.util.concurrent.CompletableFuture.timedGet(CompletableFuture.java:1960) ~[na:na]\r\n    \tat java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2095) ~[na:na]\r\n    \tat org.apache.kafka.common.internals.KafkaFutureImpl.get(KafkaFutureImpl.java:180) ~[kafka-clients-3.1.1.jar:na]\r\n    \tat org.springframework.kafka.core.KafkaAdmin.lambda$checkPartitions$8(KafkaAdmin.java:370) ~[spring-kafka-2.8.8.jar:2.8.8]\r\n    \t... 17 common frames omitted\r\n\r\n","title":"Spring Kafka consumer keep disconnecting from broker at random time intervals","body":"<p>My kafka configuration is simple as it can be:</p>\n<pre><code>@Bean\npublic NewTopic generalTopic() {\n    return TopicBuilder.name(&quot;topic&quot;)\n            .partitions(5)\n            .replicas(5)\n            .build();\n}\n\n@KafkaListener(id= &quot;anyID&quot;, topics=&quot;topic&quot;)\npublic void consumer(String message) {\n    System.out.println(message);\n}\n</code></pre>\n<p>Producer: sending messages invoking kafkaTemplate.send():</p>\n<pre><code>@Autowired\nprivate KafkaTemplate&lt;String, String&gt; kafkaTemplate;\n\nkafkaTemplate.send(&quot;topic&quot;, &quot;message to send&quot;);\n</code></pre>\n<p>And finnally, kafka configuration:</p>\n<pre><code>spring.kafka.bootstrap-servers=localhost\n\nspring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer\nspring.kafka.consumer.value-deserializer=org.apache.kafka.common.serialization.StringDeserializer\n\nspring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer\nspring.kafka.producer.value-serializer= org.apache.kafka.common.serialization.StringSerializer\n</code></pre>\n<p>My application is a desktop application, so every client has it's own producer and consumer with this very same configuration above (excluding @KafkaListener(id= &quot;anyID&quot;, where anyID is the user name).</p>\n<p>When launching the application (right after closing it), sometimes it generates this error message:</p>\n<pre><code>2022-10-21 15:13:42.130 ERROR 3524 --- [JavaFX-Launcher] o.springframework.kafka.core.KafkaAdmin  : Could not configure topics\n\norg.springframework.kafka.KafkaException: Timed out waiting to get existing topics; nested exception is java.util.concurrent.TimeoutException\n</code></pre>\n<p>Checking the kafka server.log (under logs/server.log), there's this stack trace:</p>\n<pre><code>    [2022-10-21 18:11:28,519] WARN Unexpected exception (org.apache.zookeeper.server.NIOServerCnxn)\nEndOfStreamException: Unable to read additional data from client, it probably closed the socket: address = /127.0.0.1:34456, session = 0x100a5e36a580005\n    at org.apache.zookeeper.server.NIOServerCnxn.handleFailedRead(NIOServerCnxn.java:163)\n    at org.apache.zookeeper.server.NIOServerCnxn.doIO(NIOServerCnxn.java:326)\n    at org.apache.zookeeper.server.NIOServerCnxnFactory$IOWorkRequest.doWork(NIOServerCnxnFactory.java:522)\n    at org.apache.zookeeper.server.WorkerService$ScheduledWorkRequest.run(WorkerService.java:154)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at java.lang.Thread.run(Thread.java:750)\n[2022-10-21 18:11:43,670] INFO Expiring session 0x100a5e36a580005, timeout of 18000ms exceeded (org.apache.zookeeper.server.ZooKeeperServer)\n</code></pre>\n<p>I'm sure the error message is related to the log stack trace, but I have no idea what's is causing it and how to solve it.</p>\n<p>In order to get it working back, I just restart kafka with</p>\n<blockquote>\n<p>bin/kafka-server-start.sh -daemon config/server.properties</p>\n</blockquote>\n<p>So basically I have to keep restarting kafka everytime I get this error.</p>\n<p>Any thoughts?</p>\n<p>For reference, here's a full reference of the error I'm getting in the clients:</p>\n<pre><code>    org.springframework.kafka.KafkaException: Timed out waiting to get existing topics; nested exception is java.util.concurrent.TimeoutException\n    at org.springframework.kafka.core.KafkaAdmin.lambda$checkPartitions$8(KafkaAdmin.java:388) ~[spring-kafka-2.8.8.jar:2.8.8]\n    at java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]\n    at org.springframework.kafka.core.KafkaAdmin.checkPartitions(KafkaAdmin.java:367) ~[spring-kafka-2.8.8.jar:2.8.8]\n    at org.springframework.kafka.core.KafkaAdmin.addOrModifyTopicsIfNeeded(KafkaAdmin.java:263) ~[spring-kafka-2.8.8.jar:2.8.8]\n    at org.springframework.kafka.core.KafkaAdmin.initialize(KafkaAdmin.java:200) ~[spring-kafka-2.8.8.jar:2.8.8]\n    at org.springframework.kafka.core.KafkaAdmin.afterSingletonsInstantiated(KafkaAdmin.java:167) ~[spring-kafka-2.8.8.jar:2.8.8]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:974) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.22.jar:5.3.22]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.22.jar:5.3.22]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.builder.SpringApplicationBuilder.run(SpringApplicationBuilder.java:164) ~[spring-boot-2.7.3.jar:2.7.3]\n    at com.nume.main.MirroredMain.springBootApplicationContext(MirroredMain.java:40) ~[classes/:na]\n    at com.nume.main.MirroredMain.init(MirroredMain.java:61) ~[classes/:na]\n    at javafx.graphics@19/com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:825) ~[javafx.graphics.jar:na]\n    at javafx.graphics@19/com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:196) ~[javafx.graphics.jar:na]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\nCaused by: java.util.concurrent.TimeoutException: null\n    at java.base/java.util.concurrent.CompletableFuture.timedGet(CompletableFuture.java:1960) ~[na:na]\n    at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2095) ~[na:na]\n    at org.apache.kafka.common.internals.KafkaFutureImpl.get(KafkaFutureImpl.java:180) ~[kafka-clients-3.1.1.jar:na]\n    at org.springframework.kafka.core.KafkaAdmin.lambda$checkPartitions$8(KafkaAdmin.java:370) ~[spring-kafka-2.8.8.jar:2.8.8]\n    ... 17 common frames omitted\n</code></pre>\n"},{"tags":["java","apache-kafka","spring-kafka"],"answers":[{"tags":[],"owner":{"account_id":1964595,"reputation":25422,"user_id":1765189,"display_name":"Mickael Maison"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1666772127,"creation_date":1666772127,"answer_id":74204603,"question_id":74200119,"body_markdown":"When a consumer groupId does not already exist, consumers will use the [auto.offset.reset][1] setting to find their starting position. This setting defaults to `latest` so it will only consume new records from the topic. \r\n\r\nIf you set `auto.offset.reset=earliest` and switch to a new groupId then consumers will start from the first available offset (which may not necessarily be 0 if retention policies have deleted the oldest records from the topic)\r\n\r\n\r\n  [1]: https://kafka.apache.org/documentation/#consumerconfigs_auto.offset.reset","title":"I&#39;ve built a kafka consumer that consumes from a topic with a specified groupId. If I changed the groupID to start from offset 0, it doesn&#39;t work","body":"<p>When a consumer groupId does not already exist, consumers will use the <a href=\"https://kafka.apache.org/documentation/#consumerconfigs_auto.offset.reset\" rel=\"nofollow noreferrer\">auto.offset.reset</a> setting to find their starting position. This setting defaults to <code>latest</code> so it will only consume new records from the topic.</p>\n<p>If you set <code>auto.offset.reset=earliest</code> and switch to a new groupId then consumers will start from the first available offset (which may not necessarily be 0 if retention policies have deleted the oldest records from the topic)</p>\n"}],"owner":{"account_id":26558931,"reputation":23,"user_id":20277203,"display_name":"dpaine"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74204603,"answer_count":1,"score":2,"last_activity_date":1671841007,"creation_date":1666731448,"question_id":74200119,"body_markdown":"In the following method, I&#39;m able to consume many messages from &quot;my_topic&quot;. From my understanding, if I want to then start consuming from offset 0 again, I can either \r\n\r\na) Reset the offsets using;\r\n\r\n*kafka-consumer-groups.sh --bootstrap-server xxx:9094 --command-config ./xxx --execute --reset-offsets -group my_group -to-earliest*\r\n\r\nor...\r\nb) Rename the groupID to something different the &quot;my_group&quot; e.g. &quot;my_group_2&quot;.\r\n\r\n\r\n```\r\npublic class MessageConsumer extends ConsumerBase {\r\n\r\n  @KafkaListener(topics = &quot;my_topic&quot;, groupId = &quot;my_group&quot;)\r\n  void processReferralEvents(String message) {\r\n    log.info(&quot;message received: [{}]&quot;, message);\r\n\r\n```\r\n\r\n\r\nWhen I do specify my_group_2 as the groupId, then *my_group_2* is created and it automatically assumes the offsets of *my_group*. \r\n\r\nAm I missing something obvious?\r\n","title":"I&#39;ve built a kafka consumer that consumes from a topic with a specified groupId. If I changed the groupID to start from offset 0, it doesn&#39;t work","body":"<p>In the following method, I'm able to consume many messages from &quot;my_topic&quot;. From my understanding, if I want to then start consuming from offset 0 again, I can either</p>\n<p>a) Reset the offsets using;</p>\n<p><em>kafka-consumer-groups.sh --bootstrap-server xxx:9094 --command-config ./xxx --execute --reset-offsets -group my_group -to-earliest</em></p>\n<p>or...\nb) Rename the groupID to something different the &quot;my_group&quot; e.g. &quot;my_group_2&quot;.</p>\n<pre><code>public class MessageConsumer extends ConsumerBase {\n\n  @KafkaListener(topics = &quot;my_topic&quot;, groupId = &quot;my_group&quot;)\n  void processReferralEvents(String message) {\n    log.info(&quot;message received: [{}]&quot;, message);\n\n</code></pre>\n<p>When I do specify my_group_2 as the groupId, then <em>my_group_2</em> is created and it automatically assumes the offsets of <em>my_group</em>.</p>\n<p>Am I missing something obvious?</p>\n"},{"tags":["java","apache-kafka","confluent-schema-registry"],"answers":[{"tags":[],"owner":{"account_id":8860912,"reputation":4843,"user_id":6617152,"display_name":"Ramachandran.A.G"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671606025,"creation_date":1671606025,"answer_id":74872318,"question_id":74871691,"body_markdown":"Fahad , **auto.register.schemas=false** will prevent schemas from being registered. Can you try this option and see how it goes\r\n\r\n    Properties kafkaProps = new Properties();\r\n    kafkaProps.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;&lt;broker-address&gt;&quot;);\r\n    kafkaProps.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, x.class);\r\n    kafkaProps.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, y.class);\r\n    kafkaProps.put(&quot;schema.registry.url&quot;, &quot;&lt;schema-registry&gt;&quot;);\r\n    kafkaProps.put(AbstractKafkaAvroSerDeConfig.AUTO_REGISTER_SCHEMAS, false);","title":"How to stop java producer from updating schema registry?","body":"<p>Fahad , <strong>auto.register.schemas=false</strong> will prevent schemas from being registered. Can you try this option and see how it goes</p>\n<pre><code>Properties kafkaProps = new Properties();\nkafkaProps.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;&lt;broker-address&gt;&quot;);\nkafkaProps.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, x.class);\nkafkaProps.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, y.class);\nkafkaProps.put(&quot;schema.registry.url&quot;, &quot;&lt;schema-registry&gt;&quot;);\nkafkaProps.put(AbstractKafkaAvroSerDeConfig.AUTO_REGISTER_SCHEMAS, false);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671840800,"creation_date":1671840500,"answer_id":74904888,"question_id":74871691,"body_markdown":"&gt; when I produce an invalid message, the topic schema updates in accordance to the invalid message\r\n\r\nDid you disable the default backwards compatibility on the Registry?\r\n\r\nOtherwise, is your schema backwards compatible? What exactly are you changing? If you change the serializer setting, then the Registry is not used anymore. \r\n\r\n&gt; anyone can produce without those configs and alter the schema\r\n\r\nIndeed. \r\n\r\n&gt; defeats the purpose of schema registry\r\n\r\nEnforcement is not its purpose. Its purpose is more of a database of schemas... Anyone can also insert random data into a database without _authorization controls_. \r\n\r\n&gt; enforce schema registry to all topics who produce to it?\r\n\r\nYou can&#39;t (for free, or from the Registry itself). That is currently a (paid) feature of [Confluent Server](https://docs.confluent.io/platform/current/schema-registry/schema-validation.html#change-the-subject-naming-strategy-for-a-topic) only. \r\n\r\nWithout this, you could, instead, setup Security settings on the Registry to prevent &quot;anyone&quot; from registering a schema, and similarly on Kafka to prevent &quot;anyone&quot; from producing to certain topics. This way, only _authorized users_ will &quot;_shoot themselves in the foot_&quot;. ","title":"How to stop java producer from updating schema registry?","body":"<blockquote>\n<p>when I produce an invalid message, the topic schema updates in accordance to the invalid message</p>\n</blockquote>\n<p>Did you disable the default backwards compatibility on the Registry?</p>\n<p>Otherwise, is your schema backwards compatible? What exactly are you changing? If you change the serializer setting, then the Registry is not used anymore.</p>\n<blockquote>\n<p>anyone can produce without those configs and alter the schema</p>\n</blockquote>\n<p>Indeed.</p>\n<blockquote>\n<p>defeats the purpose of schema registry</p>\n</blockquote>\n<p>Enforcement is not its purpose. Its purpose is more of a database of schemas... Anyone can also insert random data into a database without <em>authorization controls</em>.</p>\n<blockquote>\n<p>enforce schema registry to all topics who produce to it?</p>\n</blockquote>\n<p>You can't (for free, or from the Registry itself). That is currently a (paid) feature of <a href=\"https://docs.confluent.io/platform/current/schema-registry/schema-validation.html#change-the-subject-naming-strategy-for-a-topic\" rel=\"nofollow noreferrer\">Confluent Server</a> only.</p>\n<p>Without this, you could, instead, setup Security settings on the Registry to prevent &quot;anyone&quot; from registering a schema, and similarly on Kafka to prevent &quot;anyone&quot; from producing to certain topics. This way, only <em>authorized users</em> will &quot;<em>shoot themselves in the foot</em>&quot;.</p>\n"}],"owner":{"account_id":18944908,"reputation":190,"user_id":13824045,"display_name":"fahadhub"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":556,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1671840815,"creation_date":1671600723,"question_id":74871691,"body_markdown":"I have a java producer which produces to a kafka topic. I use schema registry to make sure the messages which are produced to the topic are valid. But when I produce an invalid message, the topic schema updates in accordance to the invalid message rather than not accepting the invalid message.  \r\nI have come across parameters like auto.register.schemas and use.latest.version but they&#39;re producer configs, and anyone can produce without those configs and alter the schema which defeats the purpose of schema registry.\r\n\r\nHow do I enforce schema registry to all topics who produce to it?","title":"How to stop java producer from updating schema registry?","body":"<p>I have a java producer which produces to a kafka topic. I use schema registry to make sure the messages which are produced to the topic are valid. But when I produce an invalid message, the topic schema updates in accordance to the invalid message rather than not accepting the invalid message.<br />\nI have come across parameters like auto.register.schemas and use.latest.version but they're producer configs, and anyone can produce without those configs and alter the schema which defeats the purpose of schema registry.</p>\n<p>How do I enforce schema registry to all topics who produce to it?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9211,"page":781,"page_size":100}
