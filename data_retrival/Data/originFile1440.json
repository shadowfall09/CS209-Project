{"items":[{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":5282904,"reputation":18287,"user_id":4217682,"accept_rate":50,"display_name":"snachmsm"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649683818,"creation_date":1649675209,"answer_id":71826736,"question_id":71826232,"body_markdown":"As there is a `getInputMethodManager` method in stack, I would try to change default keyboard app set on the device\r\n\r\nYou are getting `NullPointerException` when the framework tries to get access to `InputMethodManager`. e.g. with below method:\r\n\r\n    InputMethodManager imm = (InputMethodManager)\r\n                ctx.getSystemService(Context.INPUT_METHOD_SERVICE);\r\n\r\nyet another suspicion: as `Context` is `null` in your app maybe you should use `AppCompatActivity` from `androidx`, which will carry about `ContextWrapper` also present in posted stack (with proper style set)","title":"Debugging vendor (Vivo) specific stacktrace","body":"<p>As there is a <code>getInputMethodManager</code> method in stack, I would try to change default keyboard app set on the device</p>\n<p>You are getting <code>NullPointerException</code> when the framework tries to get access to <code>InputMethodManager</code>. e.g. with below method:</p>\n<pre><code>InputMethodManager imm = (InputMethodManager)\n            ctx.getSystemService(Context.INPUT_METHOD_SERVICE);\n</code></pre>\n<p>yet another suspicion: as <code>Context</code> is <code>null</code> in your app maybe you should use <code>AppCompatActivity</code> from <code>androidx</code>, which will carry about <code>ContextWrapper</code> also present in posted stack (with proper style set)</p>\n"}],"owner":{"account_id":4992404,"reputation":307,"user_id":4014182,"accept_rate":60,"display_name":"Murtaza Raja"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1649683818,"creation_date":1649672809,"question_id":71826232,"body_markdown":"As soon as I open my Android Application, it crashes with this stack trace. I am using the bare minimum activity to launch after stripping down a lot of classes and subsystems to identify the issue, but no luck. I get the same trace.\r\n\r\n```\r\nE/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: com.domain.example.debug, PID: 4171\r\n    java.lang.NullPointerException: Attempt to invoke virtual method &#39;java.lang.Object android.content.Context.getSystemService(java.lang.String)&#39; on a null object reference\r\n        at android.content.ContextWrapper.getSystemService(ContextWrapper.java:803)\r\n        at android.app.Application.getInputMethodManager(Application.java:687)\r\n        at android.view.VivoViewImpl.switchToStylusInputIfNeed(VivoViewImpl.java:416)\r\n        at android.view.VivoViewImpl.onVisibilityChanged(VivoViewImpl.java:405)\r\n        at android.view.View.onVisibilityChanged(View.java:14846)\r\n        at android.view.View.dispatchAttachedToWindow(View.java:20800)\r\n        at android.view.ViewGroup.dispatchAttachedToWindow(ViewGroup.java:3603)\r\n        at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:2796)\r\n        at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:2286)\r\n        at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:8882)\r\n        at android.view.Choreographer$CallbackRecord.run(Choreographer.java:1137)\r\n        at android.view.Choreographer.doCallbacks(Choreographer.java:951)\r\n        at android.view.Choreographer.doFrame(Choreographer.java:877)\r\n        at android.view.Choreographer$FrameHandler.handleMessage(Choreographer.java:1056)\r\n        at android.os.Handler.dispatchMessage(Handler.java:106)\r\n        at android.os.Looper.loop(Looper.java:257)\r\n        at android.app.ActivityThread.main(ActivityThread.java:8401)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:631)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1032)\r\n```\r\nIndexActivity (the launched activity)\r\n```\r\npublic class IndexActivity extends Activity {\r\n\r\n    @Override\r\n    public void onCreate(@Nullable Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.index);\r\n\r\n    }\r\n}\r\n```\r\nIndex layout\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\nxmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\nandroid:orientation=&quot;vertical&quot;\r\nandroid:layout_width=&quot;match_parent&quot;\r\nandroid:layout_height=&quot;match_parent&quot;&gt;\r\n\r\n    &lt;RelativeLayout\r\n        android:id=&quot;@+id/splashLayout&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;&gt;\r\n    &lt;/RelativeLayout&gt;\r\n\r\n&lt;/LinearLayout&gt;\r\n```\r\nI am not even able to find the source file VivoViewImpl.java. There are no hits on google. So I wanted to know if I can &quot;tap&quot; some of these calls and print some values to debug further. This crash only happens on Android 11 (FunTouch OS v11) on Vivo devices. What do you suggest?","title":"Debugging vendor (Vivo) specific stacktrace","body":"<p>As soon as I open my Android Application, it crashes with this stack trace. I am using the bare minimum activity to launch after stripping down a lot of classes and subsystems to identify the issue, but no luck. I get the same trace.</p>\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.domain.example.debug, PID: 4171\n    java.lang.NullPointerException: Attempt to invoke virtual method 'java.lang.Object android.content.Context.getSystemService(java.lang.String)' on a null object reference\n        at android.content.ContextWrapper.getSystemService(ContextWrapper.java:803)\n        at android.app.Application.getInputMethodManager(Application.java:687)\n        at android.view.VivoViewImpl.switchToStylusInputIfNeed(VivoViewImpl.java:416)\n        at android.view.VivoViewImpl.onVisibilityChanged(VivoViewImpl.java:405)\n        at android.view.View.onVisibilityChanged(View.java:14846)\n        at android.view.View.dispatchAttachedToWindow(View.java:20800)\n        at android.view.ViewGroup.dispatchAttachedToWindow(ViewGroup.java:3603)\n        at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:2796)\n        at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:2286)\n        at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:8882)\n        at android.view.Choreographer$CallbackRecord.run(Choreographer.java:1137)\n        at android.view.Choreographer.doCallbacks(Choreographer.java:951)\n        at android.view.Choreographer.doFrame(Choreographer.java:877)\n        at android.view.Choreographer$FrameHandler.handleMessage(Choreographer.java:1056)\n        at android.os.Handler.dispatchMessage(Handler.java:106)\n        at android.os.Looper.loop(Looper.java:257)\n        at android.app.ActivityThread.main(ActivityThread.java:8401)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:631)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1032)\n</code></pre>\n<p>IndexActivity (the launched activity)</p>\n<pre><code>public class IndexActivity extends Activity {\n\n    @Override\n    public void onCreate(@Nullable Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.index);\n\n    }\n}\n</code></pre>\n<p>Index layout</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\nxmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\nandroid:orientation=&quot;vertical&quot;\nandroid:layout_width=&quot;match_parent&quot;\nandroid:layout_height=&quot;match_parent&quot;&gt;\n\n    &lt;RelativeLayout\n        android:id=&quot;@+id/splashLayout&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;&gt;\n    &lt;/RelativeLayout&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>I am not even able to find the source file VivoViewImpl.java. There are no hits on google. So I wanted to know if I can &quot;tap&quot; some of these calls and print some values to debug further. This crash only happens on Android 11 (FunTouch OS v11) on Vivo devices. What do you suggest?</p>\n"},{"tags":["java","google-chrome","command-line-interface"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1649682576,"post_id":71828289,"comment_id":126931023,"body_markdown":"Try all tokens as separate array elements: `String[] cmd = { &quot;/Applications/Google Chrome.app/Contents/MacOS/Google Chrome&quot;, &quot;--headless&quot;, &quot;--disable-gpu&quot;, &quot;--no-sandbox&quot;, &quot;--run-all-compositor-stages-before-draw&quot;, &quot;--virtual-time-budget=5000&quot;, &quot;--dump-dom&quot;, &quot;https://www.kijiji.ca&quot; };`","body":"Try all tokens as separate array elements: <code>String[] cmd = { &quot;&#47;Applications&#47;Google Chrome.app&#47;Contents&#47;MacOS&#47;Google Chrome&quot;, &quot;--headless&quot;, &quot;--disable-gpu&quot;, &quot;--no-sandbox&quot;, &quot;--run-all-compositor-stages-before-draw&quot;, &quot;--virtual-time-budget=5000&quot;, &quot;--dump-dom&quot;, &quot;https:&#47;&#47;www.kijiji.ca&quot; };</code>"},{"owner":{"account_id":19522753,"reputation":645,"user_id":14284230,"display_name":"AvaTaylor"},"score":0,"creation_date":1649682939,"post_id":71828289,"comment_id":126931178,"body_markdown":"@g00se Thanks!  Getting there, it&#39;s now running as a cmd line app, but I&#39;m getting this error output: `[0411/091458.736854:ERROR:headless_shell.cc(517)] Failed to serialize document: Uncaught` ... any ideas?","body":"@g00se Thanks!  Getting there, it&#39;s now running as a cmd line app, but I&#39;m getting this error output: <code>[0411&#47;091458.736854:ERROR:headless_shell.cc(517)] Failed to serialize document: Uncaught</code> ... any ideas?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1649683283,"post_id":71828289,"comment_id":126931321,"body_markdown":"A Chrome error. That happens without Java too I expect?","body":"A Chrome error. That happens without Java too I expect?"},{"owner":{"account_id":19522753,"reputation":645,"user_id":14284230,"display_name":"AvaTaylor"},"score":0,"creation_date":1649683433,"post_id":71828289,"comment_id":126931389,"body_markdown":"@g00se Yes, it&#39;s now happening at the cmd line too, thanks!  Please post your command as an answer and I&#39;ll mark it correct!  Thanks for the help!","body":"@g00se Yes, it&#39;s now happening at the cmd line too, thanks!  Please post your command as an answer and I&#39;ll mark it correct!  Thanks for the help!"}],"answers":[{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649683779,"creation_date":1649683779,"answer_id":71828730,"question_id":71828289,"body_markdown":"Try all tokens as separate array elements:\r\n\r\n    String[] cmd = { &quot;/Applications/Google Chrome.app/Contents/MacOS/Google Chrome&quot;, &quot;--headless&quot;, &quot;--disable-gpu&quot;, &quot;--no-sandbox&quot;, &quot;--run-all-compositor-stages-before-draw&quot;, &quot;--virtual-time-budget=5000&quot;, &quot;--dump-dom&quot;, &quot;https://www.kijiji.ca&quot; };","title":"When launching Chrome headless as a command line application process from Java, how do I correctly pass arguments in?","body":"<p>Try all tokens as separate array elements:</p>\n<pre><code>String[] cmd = { &quot;/Applications/Google Chrome.app/Contents/MacOS/Google Chrome&quot;, &quot;--headless&quot;, &quot;--disable-gpu&quot;, &quot;--no-sandbox&quot;, &quot;--run-all-compositor-stages-before-draw&quot;, &quot;--virtual-time-budget=5000&quot;, &quot;--dump-dom&quot;, &quot;https://www.kijiji.ca&quot; };\n</code></pre>\n"}],"owner":{"account_id":19522753,"reputation":645,"user_id":14284230,"display_name":"AvaTaylor"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":677,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71828730,"answer_count":1,"score":0,"last_activity_date":1649683779,"creation_date":1649681952,"question_id":71828289,"body_markdown":"When I run this from the command line it works fine:\r\n\r\n    &quot;/Applications/Google Chrome.app/Contents/MacOS/Google Chrome&quot; --headless --disable-gpu --no-sandbox --run-all-compositor-stages-before-draw --virtual-time-budget=5000 --dump-dom &quot;https://www.kijiji.ca&quot;\r\n\r\n(Note: I&#39;m using the &#39;virtual-time-budget&#39; option to give Chrome extra time to load all dynamic portions of the web page before returning the result.)\r\n\r\nWhen I run this simple &#39;ls&#39; command from Java, it works fine and I see the output:\r\n\r\n\t\tRuntime rt = Runtime.getRuntime();\r\n\t\tString[] commands = {&quot;ls&quot;, &quot;-lah&quot;};\r\n\t\t\r\n\t\tProcess proc = rt.exec(commands);\r\n\r\n\t\tBufferedReader stdInput = new BufferedReader(new \r\n\t\t     InputStreamReader(proc.getInputStream()));\r\n\r\n\t\t// Read the output from the command\r\n\t\tSystem.out.println(&quot;Here is the standard output of the command:\\n&quot;);\r\n\t\tString s = null;\r\n\t\twhile ((s = stdInput.readLine()) != null) {\r\n\t\t    System.out.println(s);\r\n\t\t}\r\n\r\nBut when I change the `commands` array like to this to run my original command ...\r\n\r\n\t\tString[] commands = {&quot;/Applications/Google Chrome.app/Contents/MacOS/Google Chrome&quot;, \r\n\t\t\t&quot;--headless --disable-gpu --no-sandbox --run-all-compositor-stages-before-draw --virtual-time-budget=5000 --dump-dom \\&quot;https://www.kijiji.ca\\&quot;&quot;};\r\n\r\n... it opens a blank Chrome application window.  It doesn&#39;t run as a headless command line app, and does not appear to see the command line args.\r\n\r\nWhat am I doing wrong?","title":"When launching Chrome headless as a command line application process from Java, how do I correctly pass arguments in?","body":"<p>When I run this from the command line it works fine:</p>\n<pre><code>&quot;/Applications/Google Chrome.app/Contents/MacOS/Google Chrome&quot; --headless --disable-gpu --no-sandbox --run-all-compositor-stages-before-draw --virtual-time-budget=5000 --dump-dom &quot;https://www.kijiji.ca&quot;\n</code></pre>\n<p>(Note: I'm using the 'virtual-time-budget' option to give Chrome extra time to load all dynamic portions of the web page before returning the result.)</p>\n<p>When I run this simple 'ls' command from Java, it works fine and I see the output:</p>\n<pre><code>    Runtime rt = Runtime.getRuntime();\n    String[] commands = {&quot;ls&quot;, &quot;-lah&quot;};\n    \n    Process proc = rt.exec(commands);\n\n    BufferedReader stdInput = new BufferedReader(new \n         InputStreamReader(proc.getInputStream()));\n\n    // Read the output from the command\n    System.out.println(&quot;Here is the standard output of the command:\\n&quot;);\n    String s = null;\n    while ((s = stdInput.readLine()) != null) {\n        System.out.println(s);\n    }\n</code></pre>\n<p>But when I change the <code>commands</code> array like to this to run my original command ...</p>\n<pre><code>    String[] commands = {&quot;/Applications/Google Chrome.app/Contents/MacOS/Google Chrome&quot;, \n        &quot;--headless --disable-gpu --no-sandbox --run-all-compositor-stages-before-draw --virtual-time-budget=5000 --dump-dom \\&quot;https://www.kijiji.ca\\&quot;&quot;};\n</code></pre>\n<p>... it opens a blank Chrome application window.  It doesn't run as a headless command line app, and does not appear to see the command line args.</p>\n<p>What am I doing wrong?</p>\n"},{"tags":["java","process"],"comments":[{"owner":{"account_id":7745,"reputation":189755,"user_id":13531,"accept_rate":75,"display_name":"Michael Myers"},"score":0,"creation_date":1269982171,"post_id":2548587,"comment_id":2550137,"body_markdown":"How are you reading stdout and stderr? How could there be &quot;partial&quot; output in them?","body":"How are you reading stdout and stderr? How could there be &quot;partial&quot; output in them?"},{"owner":{"account_id":37507,"reputation":9125,"user_id":107245,"accept_rate":61,"display_name":"Lajos Nagy"},"score":0,"creation_date":1269984132,"post_id":2548587,"comment_id":2550393,"body_markdown":"When the process times out and I kill it, there will be partial results. Yet, I still want to capture them for later investigation.","body":"When the process times out and I kill it, there will be partial results. Yet, I still want to capture them for later investigation."}],"answers":[{"tags":[],"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1501465427,"creation_date":1269995394,"answer_id":2549625,"question_id":2548587,"body_markdown":"You should have one or two separate threads reading `stdout` and `stderr` (one if you merge them), apart from the thread that calls `Process.exec()/waitFor()/destroy()`. The reading thread(s) will get any data that is produced up to an EOF. If you call `Process.destroy()`, the EOF may happen sooner, that&#39;s all.","title":"What happens to stderr/stdout streams after Process.destroy() in Java?","body":"<p>You should have one or two separate threads reading <code>stdout</code> and <code>stderr</code> (one if you merge them), apart from the thread that calls <code>Process.exec()/waitFor()/destroy()</code>. The reading thread(s) will get any data that is produced up to an EOF. If you call <code>Process.destroy()</code>, the EOF may happen sooner, that's all.</p>\n"},{"tags":[],"owner":{"account_id":39409,"reputation":47624,"user_id":113632,"accept_rate":84,"display_name":"dimo414"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1436225367,"creation_date":1436225367,"answer_id":31257381,"question_id":2548587,"body_markdown":"*Process handling is inherently OS-specific, I&#39;m looking specifically at how Java handles Unix processes here.*\r\n\r\nIt&#39;s unfortunate that [`Process` closes its streams when you call `.destroy()`][1]. I don&#39;t know why the JDK designers felt that was the right design pattern, but it certainly makes dealing with terminated processes more complicated.\r\n\r\nIt&#39;s worth noting that the `InputStream`s `Process` holds are instances of [`ProcessPipeInputStream`][2] which actually has a `drainInputStream()` method that does exactly what we&#39;d want - it reads in any remaining bytes in the backing file descriptor and stores them in a byte buffer for us.  This method is &quot;called by the process reaper thread when the process exits&quot;, but unfortunately is not called when the process is `TERM`&#39;ed by `.destroy()`.\r\n\r\nThe best you can hope for then is to jury-rig your own `drainInputStream()` behavior and call that for both `stdout` and `stderr` before you call `.destroy()`.  It&#39;s still possible for some data to being written to either stream after you drain them but before `.destroy()` finishes, but this will get *most* of it.\r\n\r\n  [1]: http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/jdk8-b132/src/solaris/classes/java/lang/UNIXProcess.java.linux#l295\r\n  [2]: http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/jdk8-b132/src/solaris/classes/java/lang/UNIXProcess.java.linux#l332","title":"What happens to stderr/stdout streams after Process.destroy() in Java?","body":"<p><em>Process handling is inherently OS-specific, I'm looking specifically at how Java handles Unix processes here.</em></p>\n\n<p>It's unfortunate that <a href=\"http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/jdk8-b132/src/solaris/classes/java/lang/UNIXProcess.java.linux#l295\" rel=\"nofollow\"><code>Process</code> closes its streams when you call <code>.destroy()</code></a>. I don't know why the JDK designers felt that was the right design pattern, but it certainly makes dealing with terminated processes more complicated.</p>\n\n<p>It's worth noting that the <code>InputStream</code>s <code>Process</code> holds are instances of <a href=\"http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/jdk8-b132/src/solaris/classes/java/lang/UNIXProcess.java.linux#l332\" rel=\"nofollow\"><code>ProcessPipeInputStream</code></a> which actually has a <code>drainInputStream()</code> method that does exactly what we'd want - it reads in any remaining bytes in the backing file descriptor and stores them in a byte buffer for us.  This method is \"called by the process reaper thread when the process exits\", but unfortunately is not called when the process is <code>TERM</code>'ed by <code>.destroy()</code>.</p>\n\n<p>The best you can hope for then is to jury-rig your own <code>drainInputStream()</code> behavior and call that for both <code>stdout</code> and <code>stderr</code> before you call <code>.destroy()</code>.  It's still possible for some data to being written to either stream after you drain them but before <code>.destroy()</code> finishes, but this will get <em>most</em> of it.</p>\n"},{"tags":[],"owner":{"account_id":421872,"reputation":8957,"user_id":800334,"accept_rate":90,"display_name":"Amir Abiri"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649683771,"creation_date":1649683771,"answer_id":71828726,"question_id":2548587,"body_markdown":"For any future time-travellers - `Process.destroy()` indeed closes the streams as @dimo414&#39;s answer points out. However the actual termination of the process is handled by its `ProcessHandle` retrieved by `Process.toHandle()` which is what `Process.destroy()` does before it then goes ahead and closes the streams.\r\n\r\nSo to cut a long story short, it is possible to terminate a `Process` without closing the streams by doing:\r\n\r\n    process.toHandle().destroy()","title":"What happens to stderr/stdout streams after Process.destroy() in Java?","body":"<p>For any future time-travellers - <code>Process.destroy()</code> indeed closes the streams as @dimo414's answer points out. However the actual termination of the process is handled by its <code>ProcessHandle</code> retrieved by <code>Process.toHandle()</code> which is what <code>Process.destroy()</code> does before it then goes ahead and closes the streams.</p>\n<p>So to cut a long story short, it is possible to terminate a <code>Process</code> without closing the streams by doing:</p>\n<pre><code>process.toHandle().destroy()\n</code></pre>\n"}],"owner":{"account_id":37507,"reputation":9125,"user_id":107245,"accept_rate":61,"display_name":"Lajos Nagy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1353,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1649683771,"creation_date":1269981974,"question_id":2548587,"body_markdown":"I&#39;d like to have a timeout for a process I start from Java. After the timeout, I&#39;d like to kill the process. So far, so good. Problem is, I want to capture stderr/stdout during both normal execution and after a timeout.  What happens if I kill the process with destroy()? Can I retrieve the (partial) stderr/stdout produced so far? Or are they gone?","title":"What happens to stderr/stdout streams after Process.destroy() in Java?","body":"<p>I'd like to have a timeout for a process I start from Java. After the timeout, I'd like to kill the process. So far, so good. Problem is, I want to capture stderr/stdout during both normal execution and after a timeout.  What happens if I kill the process with destroy()? Can I retrieve the (partial) stderr/stdout produced so far? Or are they gone?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":360576,"reputation":60355,"user_id":702638,"accept_rate":98,"display_name":"Hunter McMillen"},"score":1,"creation_date":1341494049,"post_id":11345061,"comment_id":14939746,"body_markdown":"A property of the final keyword is that it ensures that a variable cannot change state after it has been initialized. It forces the user to initialize when it is declared or in a constructor.","body":"A property of the final keyword is that it ensures that a variable cannot change state after it has been initialized. It forces the user to initialize when it is declared or in a constructor."},{"owner":{"account_id":1400738,"reputation":6226,"user_id":1329572,"accept_rate":100,"display_name":"user1329572"},"score":1,"creation_date":1341494062,"post_id":11345061,"comment_id":14939753,"body_markdown":"Please see [this](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.4).","body":"Please see <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.4\" rel=\"nofollow noreferrer\">this</a>."},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":3,"creation_date":1341494100,"post_id":11345061,"comment_id":14939766,"body_markdown":"A `final` field must be set once and only once. The compiler can only be sure this is the case if it is set in a constructor.","body":"A <code>final</code> field must be set once and only once. The compiler can only be sure this is the case if it is set in a constructor."},{"owner":{"account_id":467422,"reputation":1264,"user_id":872803,"accept_rate":43,"display_name":"cl-r"},"score":0,"creation_date":1341495057,"post_id":11345061,"comment_id":14940218,"body_markdown":"Other use of final in a Class : final can preceed methods parameters (if they are not modified inside the method), or inside a method item can be final when they are declared and remain unchanged up to return statement","body":"Other use of final in a Class : final can preceed methods parameters (if they are not modified inside the method), or inside a method item can be final when they are declared and remain unchanged up to return statement"},{"owner":{"account_id":188605,"reputation":5059,"user_id":427413,"accept_rate":71,"display_name":"marcus"},"score":0,"creation_date":1341495516,"post_id":11345061,"comment_id":14940407,"body_markdown":"If the compiler did not enforce this, what would be the point of declaring the variable &quot;final&quot;?","body":"If the compiler did not enforce this, what would be the point of declaring the variable &quot;final&quot;?"},{"owner":{"account_id":3781857,"reputation":951,"user_id":3141068,"accept_rate":58,"display_name":"tainy"},"score":0,"creation_date":1470149249,"post_id":11345061,"comment_id":64823334,"body_markdown":"I view the answers below but found no one about: why non-final class field can be initialized automatically but final ones do not?","body":"I view the answers below but found no one about: why non-final class field can be initialized automatically but final ones do not?"}],"answers":[{"tags":[],"owner":{"account_id":1549627,"reputation":4287,"user_id":1442340,"display_name":"Adam Monos"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1341494040,"creation_date":1341494040,"answer_id":11345095,"question_id":11345061,"body_markdown":"The `final` modifier prevents your from changeing the variables value, hence you have to initialize it where you declare it. ","title":"Why must a final variable be initialized before constructor completes?","body":"<p>The <code>final</code> modifier prevents your from changeing the variables value, hence you have to initialize it where you declare it. </p>\n"},{"tags":[],"owner":{"account_id":215598,"reputation":5751,"user_id":470341,"accept_rate":75,"display_name":"jopasserat"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1341494800,"creation_date":1341494061,"answer_id":11345103,"question_id":11345061,"body_markdown":"Because `final` prevents you from modifying variables, but it has to be initialized at some point, and the constructors is the right place to do so.\r\n\r\nIn your case, it would be called a [**blank final**](https://en.wikipedia.org/wiki/Final_%28Java%29#Blank_final) because it is not initialized when declared.","title":"Why must a final variable be initialized before constructor completes?","body":"<p>Because <code>final</code> prevents you from modifying variables, but it has to be initialized at some point, and the constructors is the right place to do so.</p>\n\n<p>In your case, it would be called a <a href=\"https://en.wikipedia.org/wiki/Final_%28Java%29#Blank_final\" rel=\"noreferrer\"><strong>blank final</strong></a> because it is not initialized when declared.</p>\n"},{"tags":[],"owner":{"account_id":250725,"reputation":9776,"user_id":527617,"accept_rate":69,"display_name":"UVM"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1587624847,"creation_date":1341494091,"answer_id":11345113,"question_id":11345061,"body_markdown":"`Final` modifier does not allow to **change your variable value**. So you need to assign a value to it at some place and constructor is the place you have to do this in this case.","title":"Why must a final variable be initialized before constructor completes?","body":"<p><code>Final</code> modifier does not allow to <strong>change your variable value</strong>. So you need to assign a value to it at some place and constructor is the place you have to do this in this case.</p>\n"},{"tags":[],"owner":{"account_id":1266891,"reputation":9885,"user_id":1224016,"accept_rate":80,"display_name":"Micha≈Ç Kosmulski"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1341494146,"creation_date":1341494146,"answer_id":11345129,"question_id":11345061,"body_markdown":"The language specification contains specific guarantees about the properties of final variables and fields, and one of them is that a properly constructed object (i.e. one whose constructor finished successfully) must have all its final instance fields initialized and visible to all threads. Thus, the compiler analyzes code paths and requires you to initialize those fields.","title":"Why must a final variable be initialized before constructor completes?","body":"<p>The language specification contains specific guarantees about the properties of final variables and fields, and one of them is that a properly constructed object (i.e. one whose constructor finished successfully) must have all its final instance fields initialized and visible to all threads. Thus, the compiler analyzes code paths and requires you to initialize those fields.</p>\n"},{"tags":[],"owner":{"account_id":2288,"reputation":191195,"user_id":3171,"accept_rate":92,"display_name":"David Webb"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1341494185,"creation_date":1341494185,"answer_id":11345138,"question_id":11345061,"body_markdown":"The value of a `final` variable can only be set once.  The constructor is the only place in the code for a class that you can guarantee this will hold true; the constructor is only ever called once for an object but other methods can be called any number of times.","title":"Why must a final variable be initialized before constructor completes?","body":"<p>The value of a <code>final</code> variable can only be set once.  The constructor is the only place in the code for a class that you can guarantee this will hold true; the constructor is only ever called once for an object but other methods can be called any number of times.</p>\n"},{"tags":[],"owner":{"account_id":156587,"reputation":15475,"user_id":373962,"accept_rate":86,"display_name":"Miquel"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1341494314,"creation_date":1341494314,"answer_id":11345172,"question_id":11345061,"body_markdown":"The `final` keyword applied to a field has one of two effects:\r\n\r\n * on a primitive, it prevents the value of the primitive from being changed (an int can&#39;t change value)\r\n * on an object, it prevents the &quot;value of the variable&quot;, that is, the reference to the object, from being changed. That is to say that, if you have a `final HashMap&lt;String,String&gt; a`, you will only be able to set it once, and you won&#39;t be able to do `this.a=new HashMap&lt;String,String&gt;();` again, *but* nothing keeps you from doing `this.a.put(&quot;a&quot;,&quot;b&quot;)`,s since that doesn&#39;t modify the reference, only the content of the object.","title":"Why must a final variable be initialized before constructor completes?","body":"<p>The <code>final</code> keyword applied to a field has one of two effects:</p>\n\n<ul>\n<li>on a primitive, it prevents the value of the primitive from being changed (an int can't change value)</li>\n<li>on an object, it prevents the \"value of the variable\", that is, the reference to the object, from being changed. That is to say that, if you have a <code>final HashMap&lt;String,String&gt; a</code>, you will only be able to set it once, and you won't be able to do <code>this.a=new HashMap&lt;String,String&gt;();</code> again, <em>but</em> nothing keeps you from doing <code>this.a.put(\"a\",\"b\")</code>,s since that doesn't modify the reference, only the content of the object.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":412598,"reputation":43470,"user_id":785745,"accept_rate":71,"display_name":"Kendall Frey"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1341495499,"creation_date":1341494421,"answer_id":11345207,"question_id":11345061,"body_markdown":"A `final` variable must be initialized at the declaration or in a constructor.\r\n\r\nIf it has not been initialized when the constructor returns, it may never be initialized, and may remain an uninitialized variable. The compiler cannot prove it will be initialized, and thus throws an error.\r\n\r\nThis [Wikipedia excerpt][1] explains it well:\r\n\r\n&gt; A final variable can only be initialized once, either via an initializer or an assignment statement. It does not need to be initialized at the point of declaration: this is called a &quot;blank final&quot; variable. A blank final instance variable of a class must be definitely assigned at the end of every constructor of the class in which it is declared; similarly, a blank final static variable must be definitely assigned in a static initializer of the class in which it is declared: otherwise, a compile-time error occurs in both cases. (Note: If the variable is a reference, this means that the variable cannot be re-bound to reference another object. But the object that it references is still mutable, if it was originally mutable.)\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Final_%28Java%29#Final_variables","title":"Why must a final variable be initialized before constructor completes?","body":"<p>A <code>final</code> variable must be initialized at the declaration or in a constructor.</p>\n\n<p>If it has not been initialized when the constructor returns, it may never be initialized, and may remain an uninitialized variable. The compiler cannot prove it will be initialized, and thus throws an error.</p>\n\n<p>This <a href=\"http://en.wikipedia.org/wiki/Final_%28Java%29#Final_variables\" rel=\"noreferrer\">Wikipedia excerpt</a> explains it well:</p>\n\n<blockquote>\n  <p>A final variable can only be initialized once, either via an initializer or an assignment statement. It does not need to be initialized at the point of declaration: this is called a \"blank final\" variable. A blank final instance variable of a class must be definitely assigned at the end of every constructor of the class in which it is declared; similarly, a blank final static variable must be definitely assigned in a static initializer of the class in which it is declared: otherwise, a compile-time error occurs in both cases. (Note: If the variable is a reference, this means that the variable cannot be re-bound to reference another object. But the object that it references is still mutable, if it was originally mutable.)</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"down_vote_count":0,"up_vote_count":38,"is_accepted":false,"score":38,"last_activity_date":1537924800,"creation_date":1341494794,"answer_id":11345307,"question_id":11345061,"body_markdown":"The **official** reason is that it is defined by the [Java Language Specification 8.3.1.2][1]:\r\n\r\n&gt; **A blank final instance variable must be definitely assigned at the end of every constructor** of the class in which it is declared; otherwise a compile-time error occurs. \r\n\r\nA blank final is a final variable whose declaration lacks an initializer (i.e. what you describe).\r\n\r\n  [1]: http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.1.2","title":"Why must a final variable be initialized before constructor completes?","body":"<p>The <strong>official</strong> reason is that it is defined by the <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.1.2\" rel=\"noreferrer\">Java Language Specification 8.3.1.2</a>:</p>\n\n<blockquote>\n  <p><strong>A blank final instance variable must be definitely assigned at the end of every constructor</strong> of the class in which it is declared; otherwise a compile-time error occurs. </p>\n</blockquote>\n\n<p>A blank final is a final variable whose declaration lacks an initializer (i.e. what you describe).</p>\n"},{"tags":[],"owner":{"account_id":16150672,"reputation":1,"user_id":11659203,"display_name":"Dikshita Goyal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1560777448,"creation_date":1560777448,"answer_id":56632173,"question_id":11345061,"body_markdown":"If an instance variable is declared with final keyword, it means it can not be modified later, which makes it a constant. That is why we have to initialize the variable with final keyword.Initialization must be done explicitly because JVM doesnt provide default value to final instance variable.Final instance variable must be initialized either at the time of declaration like:\r\n\r\n    class Test{\r\n       final int num = 10;\r\n       }\r\n\r\nor it must be declared inside an instance block like:\r\n\r\n    class Test{\r\n     final int x;\r\n      {\r\n       x=10;\r\n      }\r\n    } \r\n\r\nor\r\nit must be declared BEFORE constructor COMPLETION like:\r\n\r\n    class Test{\r\n     final int x;\r\n      Test(){ \r\n       x=10;\r\n      }\r\n    }\r\n\r\nKeep in mind that we can initialize it inside a consructor block because initialization must be done before constructor completion.\r\n","title":"Why must a final variable be initialized before constructor completes?","body":"<p>If an instance variable is declared with final keyword, it means it can not be modified later, which makes it a constant. That is why we have to initialize the variable with final keyword.Initialization must be done explicitly because JVM doesnt provide default value to final instance variable.Final instance variable must be initialized either at the time of declaration like:</p>\n\n<pre><code>class Test{\n   final int num = 10;\n   }\n</code></pre>\n\n<p>or it must be declared inside an instance block like:</p>\n\n<pre><code>class Test{\n final int x;\n  {\n   x=10;\n  }\n} \n</code></pre>\n\n<p>or\nit must be declared BEFORE constructor COMPLETION like:</p>\n\n<pre><code>class Test{\n final int x;\n  Test(){ \n   x=10;\n  }\n}\n</code></pre>\n\n<p>Keep in mind that we can initialize it inside a consructor block because initialization must be done before constructor completion.</p>\n"},{"tags":[],"owner":{"account_id":1130933,"reputation":322,"user_id":1117003,"accept_rate":80,"display_name":"Emmanuel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649683626,"creation_date":1649683626,"answer_id":71828697,"question_id":11345061,"body_markdown":"The moment the constructor completes execution, the object is &#39;open for business&#39; - it can be used, its variables can be accessed.\r\n\r\nThe final keyword on a variable guarantees that its value **will never change**. This means, if the value is ever read, you can be sure that the variable will **always** have that value.\r\n\r\nSince the variable can be accessed (read) at **anytime** after the execution of the constructor, it means it **must never change** after the constructor has executed - just it case it has been read.\r\n\r\nThus, it must, by then, have been set.","title":"Why must a final variable be initialized before constructor completes?","body":"<p>The moment the constructor completes execution, the object is 'open for business' - it can be used, its variables can be accessed.</p>\n<p>The final keyword on a variable guarantees that its value <strong>will never change</strong>. This means, if the value is ever read, you can be sure that the variable will <strong>always</strong> have that value.</p>\n<p>Since the variable can be accessed (read) at <strong>anytime</strong> after the execution of the constructor, it means it <strong>must never change</strong> after the constructor has executed - just it case it has been read.</p>\n<p>Thus, it must, by then, have been set.</p>\n"}],"owner":{"account_id":287330,"reputation":5349,"user_id":1470886,"accept_rate":41,"display_name":"saravanan"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71062,"favorite_count":0,"down_vote_count":1,"up_vote_count":47,"answer_count":10,"score":46,"last_activity_date":1649683626,"creation_date":1341493933,"question_id":11345061,"body_markdown":"Why must a final variable be initialized before constructor completes?\r\n\r\n    public class Ex\r\n    {\r\n      final int q;\r\n    }\r\nWhen I compile this code I get error like this\r\n\r\n*err:variable q might not have been initialized*","title":"Why must a final variable be initialized before constructor completes?","body":"<p>Why must a final variable be initialized before constructor completes?</p>\n\n<pre><code>public class Ex\n{\n  final int q;\n}\n</code></pre>\n\n<p>When I compile this code I get error like this</p>\n\n<p><em>err:variable q might not have been initialized</em></p>\n"},{"tags":["java","spring-boot","spring-security","azure-active-directory","jhipster"],"comments":[{"owner":{"account_id":10235034,"reputation":10879,"user_id":7554328,"display_name":"Darren Forsythe"},"score":0,"creation_date":1578624061,"post_id":59673486,"comment_id":105508158,"body_markdown":"You might want to edit the tenant ID out of the logs too.","body":"You might want to edit the tenant ID out of the logs too."},{"owner":{"account_id":14544430,"reputation":22000,"user_id":10505040,"display_name":"Jim Xu"},"score":0,"creation_date":1578627892,"post_id":59673486,"comment_id":105508834,"body_markdown":"Could you tell me which version of Azure AD you use? Azure AD V1.0 or Azure AD v2.0?","body":"Could you tell me which version of Azure AD you use? Azure AD V1.0 or Azure AD v2.0?"},{"owner":{"account_id":11110432,"reputation":161,"user_id":8156402,"display_name":"Nan"},"score":0,"creation_date":1578672239,"post_id":59673486,"comment_id":105527097,"body_markdown":"I think I am using v1.0","body":"I think I am using v1.0"}],"answers":[{"tags":[],"owner":{"account_id":10235034,"reputation":10879,"user_id":7554328,"display_name":"Darren Forsythe"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1578624330,"creation_date":1578624330,"answer_id":59674885,"question_id":59673486,"body_markdown":"Per the documentation, https://docs.spring.io/spring-security/site/docs/current/reference/html/oauth2.html#oauth2login-boot-property-mappings, \r\n\r\nAll you should need to provide is the `issuer-uri`, you have a trailing `/` the example that should work, `https://login.microsoftonline.com/&lt;TENANT-ID&gt;`. the well known URI will be appended to the end of the issuer URI.","title":"Unable to resolve the OpenID Configuration with the provided Issuer of &quot;https://login.microsoftonline.com/xxxxx/.well-known/openid-configuration&quot;","body":"<p>Per the documentation, <a href=\"https://docs.spring.io/spring-security/site/docs/current/reference/html/oauth2.html#oauth2login-boot-property-mappings\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-security/site/docs/current/reference/html/oauth2.html#oauth2login-boot-property-mappings</a>, </p>\n\n<p>All you should need to provide is the <code>issuer-uri</code>, you have a trailing <code>/</code> the example that should work, <code>https://login.microsoftonline.com/&lt;TENANT-ID&gt;</code>. the well known URI will be appended to the end of the issuer URI.</p>\n"},{"tags":[],"owner":{"account_id":14544430,"reputation":22000,"user_id":10505040,"display_name":"Jim Xu"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1578642827,"creation_date":1578642827,"answer_id":59677441,"question_id":59673486,"body_markdown":"According to my research, if we use spring boot Azure AD, you can define yaml file as below\r\n:\r\n```\r\nazure:\r\n  activedirectory:\r\n    tenant-id: &lt;tenant-id&gt;\r\n    active-directory-groups: group1, group2\r\n\r\nspring:\r\n  security:\r\n    oauth2:\r\n      client:\r\n        registration:\r\n          azure:\r\n            client-id: &lt;client-id&gt;\r\n            client-secret: &lt;client-secret&gt;\r\n```\r\n\r\nFor more details, please refer to the [blob][1] and the [article][2]\r\n\r\n\r\n  [1]: https://dev.to/azure/using-spring-security-with-azure-active-directory-mga\r\n  [2]: https://github.com/microsoft/azure-spring-boot/tree/master/azure-spring-boot-samples/azure-active-directory-spring-boot-backend-sample#want-to-take-full-control-over-every-configuration-property","title":"Unable to resolve the OpenID Configuration with the provided Issuer of &quot;https://login.microsoftonline.com/xxxxx/.well-known/openid-configuration&quot;","body":"<p>According to my research, if we use spring boot Azure AD, you can define yaml file as below\n:</p>\n\n<pre><code>azure:\n  activedirectory:\n    tenant-id: &lt;tenant-id&gt;\n    active-directory-groups: group1, group2\n\nspring:\n  security:\n    oauth2:\n      client:\n        registration:\n          azure:\n            client-id: &lt;client-id&gt;\n            client-secret: &lt;client-secret&gt;\n</code></pre>\n\n<p>For more details, please refer to the <a href=\"https://dev.to/azure/using-spring-security-with-azure-active-directory-mga\" rel=\"nofollow noreferrer\">blob</a> and the <a href=\"https://github.com/microsoft/azure-spring-boot/tree/master/azure-spring-boot-samples/azure-active-directory-spring-boot-backend-sample#want-to-take-full-control-over-every-configuration-property\" rel=\"nofollow noreferrer\">article</a></p>\n"},{"tags":[],"owner":{"account_id":11110432,"reputation":161,"user_id":8156402,"display_name":"Nan"},"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1578692227,"creation_date":1578692227,"answer_id":59689338,"question_id":59673486,"body_markdown":"Finally it works after some changes according to https://github.com/ivan86to/jhipster-ad-azure\r\n\r\nHere are couple more changes in SecurityConfiguration.java\r\n\r\n1. Change the following line in userAuthoritiesMapper() of  since oidcUserAuthority.getUserInfo() will throw NPE\r\n\r\n```\r\nmappedAuthorities.addAll(SecurityUtils.extractAuthorityFromClaims(oidcUserAuthority.getAttributes()));\r\n```\r\n\r\n2. \r\n```\r\n@Value(&quot;${spring.security.oauth2.client.provider.azure.issuer-uri}&quot;)\r\n        private String issuerUri;\r\n```","title":"Unable to resolve the OpenID Configuration with the provided Issuer of &quot;https://login.microsoftonline.com/xxxxx/.well-known/openid-configuration&quot;","body":"<p>Finally it works after some changes according to <a href=\"https://github.com/ivan86to/jhipster-ad-azure\" rel=\"nofollow noreferrer\">https://github.com/ivan86to/jhipster-ad-azure</a></p>\n\n<p>Here are couple more changes in SecurityConfiguration.java</p>\n\n<ol>\n<li>Change the following line in userAuthoritiesMapper() of  since oidcUserAuthority.getUserInfo() will throw NPE</li>\n</ol>\n\n<pre><code>mappedAuthorities.addAll(SecurityUtils.extractAuthorityFromClaims(oidcUserAuthority.getAttributes()));\n</code></pre>\n\n<ol start=\"2\">\n<li><pre><code>@Value(\"${spring.security.oauth2.client.provider.azure.issuer-uri}\")\n        private String issuerUri;\n</code></pre></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":248860,"reputation":2568,"user_id":524504,"accept_rate":75,"display_name":"masterxilo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649683277,"creation_date":1649683277,"answer_id":71828605,"question_id":59673486,"body_markdown":"I had the same problem, turns out I was using different provider names in two different `application-*.yml` files:\r\n\r\n```\r\n# application.yml\r\nspring:\r\n  security:\r\n    oauth2:\r\n      client:\r\n        registration:\r\n          notification_api:\r\n            client-id: notification_api\r\n            client-secret: &#39;******&#39;\r\n            authorization-grant-type: &quot;client_credentials&quot;\r\n            provider: &quot;keycloak-application-tokens-provider&quot; # !!!\r\n\r\n# application-prod.yml\r\nspring:\r\n  security:\r\n    oauth2:\r\n      client:\r\n        provider:\r\n          keycloak-provider: # !!! should be keycloak-application-tokens-provider:\r\n            issuer-uri: &quot;...&quot;\r\n```\r\nso check that those match.","title":"Unable to resolve the OpenID Configuration with the provided Issuer of &quot;https://login.microsoftonline.com/xxxxx/.well-known/openid-configuration&quot;","body":"<p>I had the same problem, turns out I was using different provider names in two different <code>application-*.yml</code> files:</p>\n<pre><code># application.yml\nspring:\n  security:\n    oauth2:\n      client:\n        registration:\n          notification_api:\n            client-id: notification_api\n            client-secret: '******'\n            authorization-grant-type: &quot;client_credentials&quot;\n            provider: &quot;keycloak-application-tokens-provider&quot; # !!!\n\n# application-prod.yml\nspring:\n  security:\n    oauth2:\n      client:\n        provider:\n          keycloak-provider: # !!! should be keycloak-application-tokens-provider:\n            issuer-uri: &quot;...&quot;\n</code></pre>\n<p>so check that those match.</p>\n"}],"owner":{"account_id":11110432,"reputation":161,"user_id":8156402,"display_name":"Nan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15417,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":59689338,"answer_count":4,"score":2,"last_activity_date":1649683277,"creation_date":1578611913,"question_id":59673486,"body_markdown":"I am trying to use azure active directory Oauth2 to authenticate my web app generated by Jhipster.  But I am always getting the following exception:\r\n\r\n```\r\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;securityConfiguration&#39; defined in file [/Users/xxx/IdeaProjects/support-tool-v2/build/classes/java/main/com/xxxxxx/xxxxx/config/SecurityConfiguration.class]: Unsatisfied dependency expressed through constructor parameter 3; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;org.zalando.problem.spring.web.advice.security.SecurityProblemSupport&#39;: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration&#39;: Unsatisfied dependency expressed through method &#39;setConfigurers&#39; parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration&#39;: Unsatisfied dependency expressed through method &#39;setClientRegistrationRepository&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;clientRegistrationRepository&#39; defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method &#39;clientRegistrationRepository&#39; threw exception; nested exception is java.lang.IllegalArgumentException: Unable to resolve the OpenID Configuration with the provided Issuer of &quot;https://login.microsoftonline.com/d2d302fb-0aef-4773-94a5-xxxxxxxxxxxx/.well-known/openid-configuration&quot;\r\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:769)\r\n    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:218)\r\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1340)\r\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(Abstra\r\n    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)\r\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;org.zalando.problem.spring.web.advice.security.SecurityProblemSupport&#39;: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration&#39;: Unsatisfied dependency expressed through method &#39;setConfigurers&#39; parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration&#39;: Unsatisfied dependency expressed through method &#39;setClientRegistrationRepository&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;clientRegistrationRepository&#39; defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method &#39;clientRegistrationRepository&#39; threw exception; nested exception is java.lang.IllegalArgumentException: Unable to resolve the OpenID Configuration with the provided Issuer of &quot;https://login.microsoftonline.com/d2d302fb-0aef-4773-94a5-xxxxxxxxxxxx/.well-known/openid-configuration&quot;\r\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:769)\r\n    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:218)\r\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1340)\r\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1186)\r\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:555)\r\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515)\r\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\r\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\r\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\r\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:277)\r\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1255)\r\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1175)\r\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:857)\r\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:760)\r\n    ... 22 common frames omitted\r\n\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;clientRegistrationRepository&#39; defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method &#39;clientRegistrationRepository&#39; threw exception; nested exception is java.lang.IllegalArgumentException: Unable to resolve the OpenID Configuration with the provided Issuer of &quot;https://login.microsoftonline.com/d2d302fb-0aef-4773-94a5-xxxxxxxxxxxx/.well-known/openid-configuration&quot;\r\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:627)\r\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:456)\r\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1320)\r\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1159)\r\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:555)\r\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515)\r\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\r\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\r\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\r\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:277)\r\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1471)\r\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1435)\r\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1326)\r\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1213)\r\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1175)\r\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:670)\r\n    ... 75 common frames omitted\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method &#39;clientRegistrationRepository&#39; threw exception; nested exception is java.lang.IllegalArgumentException: Unable to resolve the OpenID Configuration with the provided Issuer of &quot;https://login.microsoftonline.com/d2d302fb-0aef-4773-94a5-xxxxxxxxxxxx/.well-known/openid-configuration&quot;\r\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\r\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:622)\r\n    ... 91 common frames omitted\r\nCaused by: java.lang.IllegalArgumentException: Unable to resolve the OpenID Configuration with the provided Issuer of &quot;https://login.microsoftonline.com/d2d302fb-0aef-4773-94a5-xxxxxxxxxxxx/.well-known/openid-configuration&quot;\r\n    at org.springframework.security.oauth2.client.registration.ClientRegistrations.getOpenidConfiguration(ClientRegistrations.java:108)\r\n    at org.springframework.security.oauth2.client.registration.ClientRegistrations.fromOidcIssuerLocation(ClientRegistrations.java:72)\r\n    at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesRegistrationAdapter.getBuilderFromIssuerIfPossible(OAuth2ClientPropertiesRegistrationAdapter.java:84)\r\n    at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesRegistrationAdapter.getClientRegistration(OAuth2ClientPropertiesRegistrationAdapter.java:60)\r\n    at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesRegistrationAdapter.lambda$getClientRegistrations$0(OAuth2ClientPropertiesRegistrationAdapter.java:53)\r\n    at java.util.HashMap.forEach(HashMap.java:1289)\r\n    at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesRegistrationAdapter.getClientRegistrations(OAuth2ClientPropertiesRegistrationAdapter.java:52)\r\n    at org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientRegistrationRepositoryConfiguration.clientRegistrationRepository(OAuth2ClientRegistrationRepositoryConfiguration.java:55)\r\n    at org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientRegistrationRepositoryConfiguration$$EnhancerBySpringCGLIB$$ecb67627.CGLIB$clientRegistrationRepository$0(&lt;generated&gt;)\r\n    at org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientRegistrationRepositoryConfiguration$$EnhancerBySpringCGLIB$$ecb67627$$FastClassBySpringCGLIB$$9757aedd.invoke(&lt;generated&gt;)\r\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244)\r\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:363)\r\n    at org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientRegistrationRepositoryConfiguration$$EnhancerBySpringCGLIB$$ecb67627.clientRegistrationRepository(&lt;generated&gt;)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke(Method.java:498)\r\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\r\n    ... 92 common frames omitted\r\nCaused by: org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found\r\n    at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:85)\r\n    at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:122)\r\n    at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)\r\n    at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n    at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)\r\n    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)\r\n    at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:670)\r\n    at org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:311)\r\n    at org.springframework.security.oauth2.client.registration.ClientRegistrations.getOpenidConfiguration(ClientRegistrations.java:106)\r\n    ... 109 common frames omitted\r\n\r\n```\r\n\r\n**Here is my configuration in application.yml for oauth2**\r\n\r\n```\r\n  security:\r\n    oauth2:\r\n      client:\r\n        provider:\r\n          oidc:\r\n            issuer-uri: https://sts.windows.net/d2d302fb-0aef-4773-94a5-xxxxxxxxxxxx\r\n        registration:\r\n          oidc:\r\n            client-id: e2fd16a6-ac21-4562-a0e6-xxxxxxxxx\r\n            client-secret: olXzoz/-fMpZmh5Qx]qj]xxxxxxxx\r\n\r\nazure:\r\n    activedirectory:\r\n        tenant-id: d2d302fb-0aef-4773-94a5-xxxxxxxxx\r\n        active-directory-groups: group1, group2\r\n```\r\n\r\nI&#39;ve tried different issuer-uris based on https://learn.microsoft.com/en-us/powerapps/maker/portals/configure/configure-openid-settings. But none of them works.\r\nUris I&#39;ve tried:\r\n\r\n    https://login.microsoftonline.com/d2d302fb-0aef-4773-94a5-xxxxxxxxxxxx/\r\n    https://sts.windows.net/d2d302fb-0aef-4773-94a5-xxxxxxxxxxxx\r\n    https://sts.windows.net/d2d302fb-0aef-4773-94a5-xxxxxxxxxxxx/.well-known/openid-configuration\r\n    https://login.microsoftonline.com/d2d302fb-0aef-4773-94a5-xxxxxxxxxxxx/oauth2/token\r\n\r\nI found I should use https://sts.windows.net/d2d302fb-0aef-4773-94a5-xxxxxxxxxxxx for the issuer-url, however, the error becomes &quot;Client id must not be empty&quot;\r\n\r\n\r\n```\r\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;securityConfiguration&#39; defined in file [/Users/jzhang9/IdeaProjects/support-tool-v2/build/classes/java/main/com/xxxxxxxxxxx/instxxx/config/SecurityConfiguration.class]: Unsatisfied dependency expressed through constructor parameter 3; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;org.zalando.problem.spring.web.advice.security.SecurityProblemSupport&#39;: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration&#39;: Unsatisfied dependency expressed through method &#39;setConfigurers&#39; parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration&#39;: Unsatisfied dependency expressed through method &#39;setClientRegistrationRepository&#39; parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientRegistrationRepositoryConfiguration&#39;: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;spring.security.oauth2.client-org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientProperties&#39;: Invocation of init method failed; nested exception is java.lang.IllegalStateException: Client id must not be empty.\r\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:769)\r\n    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:218)\r\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1340)\r\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1186)\r\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:555)\r\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515)\r\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\r\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\r\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\r\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:847)\r\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:877)\r\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549)\r\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:141)\r\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:744)\r\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:391)\r\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:312)\r\n    at com.xxxxxxxxxxx.instxxx.SupportToolV2App.main(SupportToolV2App.java:69)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke(Method.java:498)\r\n    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)\r\n\r\n    ... 75 common frames omitted\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;spring.security.oauth2.client-org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientProperties&#39;: Invocation of init method failed; nested exception is java.lang.IllegalStateException: Client id must not be empty.\r\n    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:139)\r\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:414)\r\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1763)\r\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:593)\r\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515)\r\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\r\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\r\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\r\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:277)\r\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1255)\r\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1175)\r\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:857)\r\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:760)\r\n    ... 100 common frames omitted\r\nCaused by: java.lang.IllegalStateException: Client id must not be empty.\r\n    at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientProperties.validateRegistration(OAuth2ClientProperties.java:65)\r\n    at java.util.HashMap$Values.forEach(HashMap.java:981)\r\n    at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientProperties.validate(OAuth2ClientProperties.java:60)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke(Method.java:498)\r\n    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement.invoke(InitDestroyAnnotationBeanPostProcessor.java:363)\r\n    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:307)\r\n    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:136)\r\n    ... 113 common frames omitted\r\n\r\n\r\nProcess finished with exit code 0\r\n```\r\n\r\n\r\n\r\n**Related Dependencies**\r\n\r\nJHipster version 6.5.1 or 6.6.0\r\n\r\nSpringboot version 2.1.11\r\n\r\nazure-active-directory-spring-boot-starter:2.1.7\r\n\r\nAlso I am attaching my build.gradle [here][1].\r\n\r\n\r\n  [1]: https://drive.google.com/open?id=17Mxys26vDUsM5OxIk-1xfWcAepTkrugy\r\n\r\nCan someone please help? Thanks a lot!\r\n","title":"Unable to resolve the OpenID Configuration with the provided Issuer of &quot;https://login.microsoftonline.com/xxxxx/.well-known/openid-configuration&quot;","body":"<p>I am trying to use azure active directory Oauth2 to authenticate my web app generated by Jhipster.  But I am always getting the following exception:</p>\n\n<pre><code>org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'securityConfiguration' defined in file [/Users/xxx/IdeaProjects/support-tool-v2/build/classes/java/main/com/xxxxxx/xxxxx/config/SecurityConfiguration.class]: Unsatisfied dependency expressed through constructor parameter 3; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.zalando.problem.spring.web.advice.security.SecurityProblemSupport': Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration': Unsatisfied dependency expressed through method 'setConfigurers' parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Unsatisfied dependency expressed through method 'setClientRegistrationRepository' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception; nested exception is java.lang.IllegalArgumentException: Unable to resolve the OpenID Configuration with the provided Issuer of \"https://login.microsoftonline.com/d2d302fb-0aef-4773-94a5-xxxxxxxxxxxx/.well-known/openid-configuration\"\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:769)\n    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:218)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1340)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(Abstra\n    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.zalando.problem.spring.web.advice.security.SecurityProblemSupport': Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration': Unsatisfied dependency expressed through method 'setConfigurers' parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Unsatisfied dependency expressed through method 'setClientRegistrationRepository' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception; nested exception is java.lang.IllegalArgumentException: Unable to resolve the OpenID Configuration with the provided Issuer of \"https://login.microsoftonline.com/d2d302fb-0aef-4773-94a5-xxxxxxxxxxxx/.well-known/openid-configuration\"\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:769)\n    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:218)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1340)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1186)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:555)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:277)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1255)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1175)\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:857)\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:760)\n    ... 22 common frames omitted\n\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception; nested exception is java.lang.IllegalArgumentException: Unable to resolve the OpenID Configuration with the provided Issuer of \"https://login.microsoftonline.com/d2d302fb-0aef-4773-94a5-xxxxxxxxxxxx/.well-known/openid-configuration\"\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:627)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:456)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1320)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1159)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:555)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:277)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1471)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1435)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1326)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1213)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1175)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:670)\n    ... 75 common frames omitted\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception; nested exception is java.lang.IllegalArgumentException: Unable to resolve the OpenID Configuration with the provided Issuer of \"https://login.microsoftonline.com/d2d302fb-0aef-4773-94a5-xxxxxxxxxxxx/.well-known/openid-configuration\"\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:622)\n    ... 91 common frames omitted\nCaused by: java.lang.IllegalArgumentException: Unable to resolve the OpenID Configuration with the provided Issuer of \"https://login.microsoftonline.com/d2d302fb-0aef-4773-94a5-xxxxxxxxxxxx/.well-known/openid-configuration\"\n    at org.springframework.security.oauth2.client.registration.ClientRegistrations.getOpenidConfiguration(ClientRegistrations.java:108)\n    at org.springframework.security.oauth2.client.registration.ClientRegistrations.fromOidcIssuerLocation(ClientRegistrations.java:72)\n    at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesRegistrationAdapter.getBuilderFromIssuerIfPossible(OAuth2ClientPropertiesRegistrationAdapter.java:84)\n    at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesRegistrationAdapter.getClientRegistration(OAuth2ClientPropertiesRegistrationAdapter.java:60)\n    at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesRegistrationAdapter.lambda$getClientRegistrations$0(OAuth2ClientPropertiesRegistrationAdapter.java:53)\n    at java.util.HashMap.forEach(HashMap.java:1289)\n    at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesRegistrationAdapter.getClientRegistrations(OAuth2ClientPropertiesRegistrationAdapter.java:52)\n    at org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientRegistrationRepositoryConfiguration.clientRegistrationRepository(OAuth2ClientRegistrationRepositoryConfiguration.java:55)\n    at org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientRegistrationRepositoryConfiguration$$EnhancerBySpringCGLIB$$ecb67627.CGLIB$clientRegistrationRepository$0(&lt;generated&gt;)\n    at org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientRegistrationRepositoryConfiguration$$EnhancerBySpringCGLIB$$ecb67627$$FastClassBySpringCGLIB$$9757aedd.invoke(&lt;generated&gt;)\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244)\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:363)\n    at org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientRegistrationRepositoryConfiguration$$EnhancerBySpringCGLIB$$ecb67627.clientRegistrationRepository(&lt;generated&gt;)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\n    ... 92 common frames omitted\nCaused by: org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found\n    at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:85)\n    at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:122)\n    at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)\n    at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\n    at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)\n    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)\n    at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:670)\n    at org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:311)\n    at org.springframework.security.oauth2.client.registration.ClientRegistrations.getOpenidConfiguration(ClientRegistrations.java:106)\n    ... 109 common frames omitted\n\n</code></pre>\n\n<p><strong>Here is my configuration in application.yml for oauth2</strong></p>\n\n<pre><code>  security:\n    oauth2:\n      client:\n        provider:\n          oidc:\n            issuer-uri: https://sts.windows.net/d2d302fb-0aef-4773-94a5-xxxxxxxxxxxx\n        registration:\n          oidc:\n            client-id: e2fd16a6-ac21-4562-a0e6-xxxxxxxxx\n            client-secret: olXzoz/-fMpZmh5Qx]qj]xxxxxxxx\n\nazure:\n    activedirectory:\n        tenant-id: d2d302fb-0aef-4773-94a5-xxxxxxxxx\n        active-directory-groups: group1, group2\n</code></pre>\n\n<p>I've tried different issuer-uris based on <a href=\"https://learn.microsoft.com/en-us/powerapps/maker/portals/configure/configure-openid-settings\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/powerapps/maker/portals/configure/configure-openid-settings</a>. But none of them works.\nUris I've tried:</p>\n\n<pre><code>https://login.microsoftonline.com/d2d302fb-0aef-4773-94a5-xxxxxxxxxxxx/\nhttps://sts.windows.net/d2d302fb-0aef-4773-94a5-xxxxxxxxxxxx\nhttps://sts.windows.net/d2d302fb-0aef-4773-94a5-xxxxxxxxxxxx/.well-known/openid-configuration\nhttps://login.microsoftonline.com/d2d302fb-0aef-4773-94a5-xxxxxxxxxxxx/oauth2/token\n</code></pre>\n\n<p>I found I should use <a href=\"https://sts.windows.net/d2d302fb-0aef-4773-94a5-xxxxxxxxxxxx\" rel=\"nofollow noreferrer\">https://sts.windows.net/d2d302fb-0aef-4773-94a5-xxxxxxxxxxxx</a> for the issuer-url, however, the error becomes \"Client id must not be empty\"</p>\n\n<pre><code>org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'securityConfiguration' defined in file [/Users/jzhang9/IdeaProjects/support-tool-v2/build/classes/java/main/com/xxxxxxxxxxx/instxxx/config/SecurityConfiguration.class]: Unsatisfied dependency expressed through constructor parameter 3; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.zalando.problem.spring.web.advice.security.SecurityProblemSupport': Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration': Unsatisfied dependency expressed through method 'setConfigurers' parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Unsatisfied dependency expressed through method 'setClientRegistrationRepository' parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientRegistrationRepositoryConfiguration': Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'spring.security.oauth2.client-org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientProperties': Invocation of init method failed; nested exception is java.lang.IllegalStateException: Client id must not be empty.\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:769)\n    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:218)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1340)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1186)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:555)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:847)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:877)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549)\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:141)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:744)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:391)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:312)\n    at com.xxxxxxxxxxx.instxxx.SupportToolV2App.main(SupportToolV2App.java:69)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)\n\n    ... 75 common frames omitted\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'spring.security.oauth2.client-org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientProperties': Invocation of init method failed; nested exception is java.lang.IllegalStateException: Client id must not be empty.\n    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:139)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:414)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1763)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:593)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:277)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1255)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1175)\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:857)\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:760)\n    ... 100 common frames omitted\nCaused by: java.lang.IllegalStateException: Client id must not be empty.\n    at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientProperties.validateRegistration(OAuth2ClientProperties.java:65)\n    at java.util.HashMap$Values.forEach(HashMap.java:981)\n    at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientProperties.validate(OAuth2ClientProperties.java:60)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement.invoke(InitDestroyAnnotationBeanPostProcessor.java:363)\n    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:307)\n    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:136)\n    ... 113 common frames omitted\n\n\nProcess finished with exit code 0\n</code></pre>\n\n<p><strong>Related Dependencies</strong></p>\n\n<p>JHipster version 6.5.1 or 6.6.0</p>\n\n<p>Springboot version 2.1.11</p>\n\n<p>azure-active-directory-spring-boot-starter:2.1.7</p>\n\n<p>Also I am attaching my build.gradle <a href=\"https://drive.google.com/open?id=17Mxys26vDUsM5OxIk-1xfWcAepTkrugy\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Can someone please help? Thanks a lot!</p>\n"},{"tags":["java","android","android-webview"],"comments":[{"owner":{"account_id":13188604,"reputation":1604,"user_id":9525657,"display_name":"Ilan P"},"score":0,"creation_date":1649682787,"post_id":71828456,"comment_id":126931113,"body_markdown":"Since it&#39;s webview, your loading a page; if the page is yours, and there&#39;s a user system of some sorts, why not attempt to do it on the actual web client (javascript, etc.) that&#39;s a part of the page rendered?","body":"Since it&#39;s webview, your loading a page; if the page is yours, and there&#39;s a user system of some sorts, why not attempt to do it on the actual web client (javascript, etc.) that&#39;s a part of the page rendered?"},{"owner":{"account_id":6926316,"reputation":4123,"user_id":5317298,"accept_rate":70,"display_name":"RGS"},"score":0,"creation_date":1649682899,"post_id":71828456,"comment_id":126931164,"body_markdown":"@IlanP thanks for your answer. Do you know any javascript plugin that I can add to my webviews and would work nice in mobile context?","body":"@IlanP thanks for your answer. Do you know any javascript plugin that I can add to my webviews and would work nice in mobile context?"},{"owner":{"account_id":13188604,"reputation":1604,"user_id":9525657,"display_name":"Ilan P"},"score":1,"creation_date":1649683034,"post_id":71828456,"comment_id":126931217,"body_markdown":"If you take a look at some popular libraries for JQ, https://www.jqueryscript.net/text/ (check the demo on some of these scripts) they can easily be implemented on your web client and retain the functionality when loaded through your android UI; it&#39;s worth checking out.","body":"If you take a look at some popular libraries for JQ, <a href=\"https://www.jqueryscript.net/text/\" rel=\"nofollow noreferrer\">jqueryscript.net/text</a> (check the demo on some of these scripts) they can easily be implemented on your web client and retain the functionality when loaded through your android UI; it&#39;s worth checking out."}],"owner":{"account_id":6926316,"reputation":4123,"user_id":5317298,"accept_rate":70,"display_name":"RGS"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649683244,"creation_date":1649682592,"question_id":71828456,"body_markdown":"I have a webview in my app that I would like to allow users to highlight text in yellow there.\r\n\r\nI need to allow users to select, undo the select text and keep the selected text for next time user open the app. Any ideas how can I archive this in java?\r\n\r\nI saw some other posts here, but they are old and using some basic javascript that not keep the results and do not allow user to undo the selected texts.\r\n\r\nThanks a lot.","title":"Allow users to select text in a webview android","body":"<p>I have a webview in my app that I would like to allow users to highlight text in yellow there.</p>\n<p>I need to allow users to select, undo the select text and keep the selected text for next time user open the app. Any ideas how can I archive this in java?</p>\n<p>I saw some other posts here, but they are old and using some basic javascript that not keep the results and do not allow user to undo the selected texts.</p>\n<p>Thanks a lot.</p>\n"},{"tags":["java","object","methods"],"comments":[{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1649383580,"post_id":71790883,"comment_id":126867351,"body_markdown":"`public static void selectLaptop(){` needs to return something, `public static LaptopSalesOrder selectLaptop(){` for example, then you can just call `selectSupportOptions(selectLaptop());`.  This comes down to [Defining Methods](https://docs.oracle.com/javase/tutorial/java/javaOO/methods.html) and [Passing Information to a Method or a Constructor](https://docs.oracle.com/javase/tutorial/java/javaOO/arguments.html)","body":"<code>public static void selectLaptop(){</code> needs to return something, <code>public static LaptopSalesOrder selectLaptop(){</code> for example, then you can just call <code>selectSupportOptions(selectLaptop());</code>.  This comes down to <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/methods.html\" rel=\"nofollow noreferrer\">Defining Methods</a> and <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/arguments.html\" rel=\"nofollow noreferrer\">Passing Information to a Method or a Constructor</a>"}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649383565,"creation_date":1649383565,"answer_id":71790895,"question_id":71790883,"body_markdown":"You can&#39;t quite do this if the object is _declared_ in the first method.\r\n\r\nHere&#39;s what you _should_ do:\r\n\r\n```\r\n     public static void main(String[] args){\r\n          LaptopSalesOrder laptopOrder = selectLaptop();\r\n          selectSupportOptions(laptopOrder);\r\n     }\r\n     public static LaptopSalesOrder selectLaptop(){\r\n          return new LaptopSalesOrder(&quot;Dell Latitude&quot;, 1399.00);\r\n     }\r\n     public static void selectSupportOptions(LaptopSalesOrder laptopOrder){\r\n          laptopOrder.setBasicIndicator(true);\r\n     }\r\n```","title":"I need to use an object created in one static method in another static method but have issue calling it","body":"<p>You can't quite do this if the object is <em>declared</em> in the first method.</p>\n<p>Here's what you <em>should</em> do:</p>\n<pre><code>     public static void main(String[] args){\n          LaptopSalesOrder laptopOrder = selectLaptop();\n          selectSupportOptions(laptopOrder);\n     }\n     public static LaptopSalesOrder selectLaptop(){\n          return new LaptopSalesOrder(&quot;Dell Latitude&quot;, 1399.00);\n     }\n     public static void selectSupportOptions(LaptopSalesOrder laptopOrder){\n          laptopOrder.setBasicIndicator(true);\n     }\n</code></pre>\n"}],"owner":{"account_id":24865239,"reputation":1,"user_id":18740419,"display_name":"Michael Drobick"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":306,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649683238,"creation_date":1649383423,"question_id":71790883,"body_markdown":"(This is a repost of a previous question I have where I modified the code so it is much easier to understand.)\r\n```\r\npublic class LaptopSaleApp{\r\n     public static void main(String[] args){\r\n          selectLaptop();\r\n          selectSupportOptions(laptopOrder);//This parameter cannot be resolved into a variable\r\n     }\r\n     public static void selectLaptop(){\r\n          LaptopSalesOrder laptopOrder = new LaptopSalesOrder(&quot;Dell Latitude&quot;, 1399.00);\r\n     }\r\n     public static void selectSupportOptions(LaptopSalesOrder laptopOrder){\r\n          laptopOrder.setBasicIndicator(true);\r\n     }\r\n}\r\n```\r\nI need two static methods here. The object has to be declared in the first method, and then is used in the second method for the setBasicIndicator setter. I then need to call both methods in my main to run the program, but I don&#39;t know what to put in the parameters for the method in the main.","title":"I need to use an object created in one static method in another static method but have issue calling it","body":"<p>(This is a repost of a previous question I have where I modified the code so it is much easier to understand.)</p>\n<pre><code>public class LaptopSaleApp{\n     public static void main(String[] args){\n          selectLaptop();\n          selectSupportOptions(laptopOrder);//This parameter cannot be resolved into a variable\n     }\n     public static void selectLaptop(){\n          LaptopSalesOrder laptopOrder = new LaptopSalesOrder(&quot;Dell Latitude&quot;, 1399.00);\n     }\n     public static void selectSupportOptions(LaptopSalesOrder laptopOrder){\n          laptopOrder.setBasicIndicator(true);\n     }\n}\n</code></pre>\n<p>I need two static methods here. The object has to be declared in the first method, and then is used in the second method for the setBasicIndicator setter. I then need to call both methods in my main to run the program, but I don't know what to put in the parameters for the method in the main.</p>\n"},{"tags":["java","spring","spring-security"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1649678886,"post_id":71827291,"comment_id":126929426,"body_markdown":"Create a bean with a method that returns a `boolean` that does the check you need. Then call this method in the `@PreAuthorize`. Something like `@PreAuthorize(@bean.yourMethod)`.","body":"Create a bean with a method that returns a <code>boolean</code> that does the check you need. Then call this method in the <code>@PreAuthorize</code>. Something like <code>@PreAuthorize(@bean.yourMethod)</code>."}],"answers":[{"tags":[],"owner":{"account_id":23490171,"reputation":1,"user_id":17541296,"display_name":"Timo Heinrich"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1649677927,"creation_date":1649677927,"answer_id":71827363,"question_id":71827291,"body_markdown":"Do you have MethodSecurity enabled?\r\n\r\n    @Configuration\r\n    @EnableGlobalMethodSecurity(prePostEnabled = true)\r\n    public class MethodSecurityConfig extends GlobalMethodSecurityConfiguration {\r\n        @Override\r\n        protected MethodSecurityExpressionHandler createExpressionHandler() {\r\n            CustomMethodSecurityExpressionHandler expressionHandler = \r\n              new CustomMethodSecurityExpressionHandler();\r\n            expressionHandler.setPermissionEvaluator(new CustomPermissionEvaluator());\r\n            return expressionHandler;\r\n        }\r\n    }","title":"How to use @PreAuthorize with dynamic user roles?","body":"<p>Do you have MethodSecurity enabled?</p>\n<pre><code>@Configuration\n@EnableGlobalMethodSecurity(prePostEnabled = true)\npublic class MethodSecurityConfig extends GlobalMethodSecurityConfiguration {\n    @Override\n    protected MethodSecurityExpressionHandler createExpressionHandler() {\n        CustomMethodSecurityExpressionHandler expressionHandler = \n          new CustomMethodSecurityExpressionHandler();\n        expressionHandler.setPermissionEvaluator(new CustomPermissionEvaluator());\n        return expressionHandler;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7134819,"reputation":5058,"user_id":5454842,"display_name":"Marcus Hert da Coregio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649683128,"creation_date":1649683128,"answer_id":71828569,"question_id":71827291,"body_markdown":"Using SpeL you can invoke a bean and pass the parameters to the bean method, you could pass the `locale` and the `Authentication` objects, as well as the expected role.\r\n\r\n```java\r\n@Service\r\npublic class AuthorizationService {\r\n\r\n    public boolean hasRoleLocale(String locale, Authentication authentication, String expectedRole) {\r\n        authentication.getAuthorities(); // Use to check the authorities/roles\r\n        expectedRole + request.getLocale() // Use the locale from the request\r\n        // Do the business requirement for the authorization\r\n    }\r\n\r\n}\r\n```\r\n\r\nAnd, in your Controller, you can do like:\r\n\r\n```java\r\n@PreAuthorize(&quot;@authorizationService.hasRoleLocale(locale, authentication, &#39;MODERATOR&#39;)&quot;)\r\n```","title":"How to use @PreAuthorize with dynamic user roles?","body":"<p>Using SpeL you can invoke a bean and pass the parameters to the bean method, you could pass the <code>locale</code> and the <code>Authentication</code> objects, as well as the expected role.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class AuthorizationService {\n\n    public boolean hasRoleLocale(String locale, Authentication authentication, String expectedRole) {\n        authentication.getAuthorities(); // Use to check the authorities/roles\n        expectedRole + request.getLocale() // Use the locale from the request\n        // Do the business requirement for the authorization\n    }\n\n}\n</code></pre>\n<p>And, in your Controller, you can do like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PreAuthorize(&quot;@authorizationService.hasRoleLocale(locale, authentication, 'MODERATOR')&quot;)\n</code></pre>\n"}],"owner":{"account_id":11043084,"reputation":21,"user_id":8110279,"display_name":"einazare"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1309,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1649683128,"creation_date":1649677613,"question_id":71827291,"body_markdown":"I have a project, where I have user roles, based on their language.\r\n\r\nFor example, I have `MODERATOR` roles, which are set based on what languages they speak, for example, `MODERATOR_en_GB`, or `MODERATOR_en_US`.\r\n\r\nOn a given API end-point I would like to check whether the user has the `MODERATOR_language_REGION` role - the `language_REGION` comes as a parameter on that end-point. \r\n\r\nBut I don&#39;t know how to use the `@PreAuthorize(hasAnyRole)` function, with this kind of dynamic role.\r\n\r\nMy `MODERATOR` enum looks like this:\r\n```\r\n        public static enum MODERATOR {\r\n            en_US(&quot;ROLE_MODERATOR_en_US&quot;),\r\n            en_GB(&quot;ROLE_MODERATOR_en_GB&quot;);\r\n\r\n            private final String role;\r\n\r\n            MODERATOR(String role) {\r\n                this.role = role;\r\n            }\r\n\r\n            public String getRole() {\r\n                return role;\r\n            }\r\n        };\r\n```\r\nThen, I have my API endpoint like so:\r\n```\r\n@PreAuthorize(&quot;hasAnyRole(&#39;&quot; + MODERATOR + &quot;&#39;, &#39;&quot; + ADMIN + &quot;&#39;)&quot;)\r\n@GetMapping(&quot;/edit&quot;)\r\npublic List&lt;PostsDto&gt; getPostsForEdit(@RequestParam(required = false, defaultValue = &quot;en_GB&quot;) Language language,\r\n                               @PageableDefault(sort = &quot;skippedCount&quot;) Pageable pageable) {\r\n    ... some code\r\n}\r\n```\r\nObviously, this does not work, since `MODERATOR` is an enum.\r\n\r\nSo I tried to do something like this:\r\n```\r\n@PreAuthorize(&quot;hasAnyRole(MODERATOR.valueOf(#language), &#39;&quot; + ADMIN + &quot;&#39;)&quot;)\r\n```\r\nWhat I did here, was to try and use the `language` parameter from the API end-point on the `@PreAuthorize(hasAnyRole)` function. \r\n\r\nIn the same way, they use the `#foo` in the example from here: https://www.baeldung.com/spring-security-create-new-custom-security-expression#3-example-in-practice\r\n\r\nAny help would be greatly appreciated.","title":"How to use @PreAuthorize with dynamic user roles?","body":"<p>I have a project, where I have user roles, based on their language.</p>\n<p>For example, I have <code>MODERATOR</code> roles, which are set based on what languages they speak, for example, <code>MODERATOR_en_GB</code>, or <code>MODERATOR_en_US</code>.</p>\n<p>On a given API end-point I would like to check whether the user has the <code>MODERATOR_language_REGION</code> role - the <code>language_REGION</code> comes as a parameter on that end-point.</p>\n<p>But I don't know how to use the <code>@PreAuthorize(hasAnyRole)</code> function, with this kind of dynamic role.</p>\n<p>My <code>MODERATOR</code> enum looks like this:</p>\n<pre><code>        public static enum MODERATOR {\n            en_US(&quot;ROLE_MODERATOR_en_US&quot;),\n            en_GB(&quot;ROLE_MODERATOR_en_GB&quot;);\n\n            private final String role;\n\n            MODERATOR(String role) {\n                this.role = role;\n            }\n\n            public String getRole() {\n                return role;\n            }\n        };\n</code></pre>\n<p>Then, I have my API endpoint like so:</p>\n<pre><code>@PreAuthorize(&quot;hasAnyRole('&quot; + MODERATOR + &quot;', '&quot; + ADMIN + &quot;')&quot;)\n@GetMapping(&quot;/edit&quot;)\npublic List&lt;PostsDto&gt; getPostsForEdit(@RequestParam(required = false, defaultValue = &quot;en_GB&quot;) Language language,\n                               @PageableDefault(sort = &quot;skippedCount&quot;) Pageable pageable) {\n    ... some code\n}\n</code></pre>\n<p>Obviously, this does not work, since <code>MODERATOR</code> is an enum.</p>\n<p>So I tried to do something like this:</p>\n<pre><code>@PreAuthorize(&quot;hasAnyRole(MODERATOR.valueOf(#language), '&quot; + ADMIN + &quot;')&quot;)\n</code></pre>\n<p>What I did here, was to try and use the <code>language</code> parameter from the API end-point on the <code>@PreAuthorize(hasAnyRole)</code> function.</p>\n<p>In the same way, they use the <code>#foo</code> in the example from here: <a href=\"https://www.baeldung.com/spring-security-create-new-custom-security-expression#3-example-in-practice\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-security-create-new-custom-security-expression#3-example-in-practice</a></p>\n<p>Any help would be greatly appreciated.</p>\n"},{"tags":["java","azureservicebus","azure-servicebus-queues","azure-servicebus-topics"],"answers":[{"tags":[],"owner":{"account_id":53380,"reputation":6491,"user_id":159548,"display_name":"Jesse Squire"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1649682993,"creation_date":1649165675,"answer_id":71752720,"question_id":71747188,"body_markdown":"Setting application properties can be accomplished by using the `ApplicationProperties` map on `ServiceBusMessage`.   For example:\r\n\r\n```java\r\nServiceBusMessage message = new ServiceBusMessage(ServiceBusMessage(BinaryData.fromString(&quot;Hello&quot;));\r\n        message.getApplicationProperties().put(&quot;EventType&quot;, &quot;com.microsoft.samples.hello-event&quot;);\r\n        message.getApplicationProperties().put(&quot;priority&quot;, 1);\r\n        message.getApplicationProperties().put(&quot;score&quot;, 9.0);\r\n```\r\n\r\nMore context can be found in the [ServiceBusMessage docs](https://learn.microsoft.com/java/api/com.azure.messaging.servicebus.servicebusmessage.getapplicationproperties?view=azure-java-stable#com-azure-messaging-servicebus-servicebusmessage-getapplicationproperties()).","title":"How to set application properties in a ServiceBusMessage?","body":"<p>Setting application properties can be accomplished by using the <code>ApplicationProperties</code> map on <code>ServiceBusMessage</code>.   For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ServiceBusMessage message = new ServiceBusMessage(ServiceBusMessage(BinaryData.fromString(&quot;Hello&quot;));\n        message.getApplicationProperties().put(&quot;EventType&quot;, &quot;com.microsoft.samples.hello-event&quot;);\n        message.getApplicationProperties().put(&quot;priority&quot;, 1);\n        message.getApplicationProperties().put(&quot;score&quot;, 9.0);\n</code></pre>\n<p>More context can be found in the <a href=\"https://learn.microsoft.com/java/api/com.azure.messaging.servicebus.servicebusmessage.getapplicationproperties?view=azure-java-stable#com-azure-messaging-servicebus-servicebusmessage-getapplicationproperties()\" rel=\"nofollow noreferrer\">ServiceBusMessage docs</a>.</p>\n"}],"owner":{"account_id":2772154,"reputation":396,"user_id":2386551,"accept_rate":56,"display_name":"Gaston G"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2085,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71752720,"answer_count":1,"score":1,"last_activity_date":1649682993,"creation_date":1649140370,"question_id":71747188,"body_markdown":"How can we add custom properties or application properties with the latest SDK azure-messaging-servicebus?\r\n\r\nIt seems something doable in the previous package com.microsoft.azure:azure-servicebu like the method setProperties(Map&lt;String,Object&gt; properties) but I cannot find anything with the new SDK...\r\n\r\nIt is also something doable with the .Net or Javascript SDK .","title":"How to set application properties in a ServiceBusMessage?","body":"<p>How can we add custom properties or application properties with the latest SDK azure-messaging-servicebus?</p>\n<p>It seems something doable in the previous package com.microsoft.azure:azure-servicebu like the method setProperties(Map&lt;String,Object&gt; properties) but I cannot find anything with the new SDK...</p>\n<p>It is also something doable with the .Net or Javascript SDK .</p>\n"},{"tags":["java","windows","tomcat","virtual-machine"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1649684379,"post_id":71828543,"comment_id":126931779,"body_markdown":"Well it&#39;s too late to know now.","body":"Well it&#39;s too late to know now."},{"owner":{"account_id":17831397,"reputation":3,"user_id":18772149,"display_name":"Hellboy"},"score":0,"creation_date":1649697078,"post_id":71828543,"comment_id":126936650,"body_markdown":"I&#39;ve the copy of the Tomcat which I deleted(8080)","body":"I&#39;ve the copy of the Tomcat which I deleted(8080)"},{"owner":{"account_id":17831397,"reputation":3,"user_id":18772149,"display_name":"Hellboy"},"score":0,"creation_date":1649698322,"post_id":71828543,"comment_id":126937061,"body_markdown":"I&#39;ve compared all the files in all the directories, all are same.","body":"I&#39;ve compared all the files in all the directories, all are same."}],"owner":{"account_id":17831397,"reputation":3,"user_id":18772149,"display_name":"Hellboy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649682982,"creation_date":1649682982,"question_id":71828543,"body_markdown":"Installed two Tomcat 9.0.60 services in a single windows VM with diff ports(8080 &amp; 9090), did the same config changes, deployed same version of applications which shares the same DB. I found that the Tomcat with port 9090 is dead slow and I couldn&#39;t even open the application. It takes ages to load a single page.\r\n\r\nTried all the ways (Changing Tomcat versions, deploying diff version of Application and changing heap). None resolved my issue. \r\n\r\nSo, I deleted the 9090 Tomcat service and copied the 8080 Tomcat to 9090 Tomcat&#39;s location and started. It works as expected. \r\n\r\nany idea what went wrong ?","title":"Two Tomcat Services in a VM","body":"<p>Installed two Tomcat 9.0.60 services in a single windows VM with diff ports(8080 &amp; 9090), did the same config changes, deployed same version of applications which shares the same DB. I found that the Tomcat with port 9090 is dead slow and I couldn't even open the application. It takes ages to load a single page.</p>\n<p>Tried all the ways (Changing Tomcat versions, deploying diff version of Application and changing heap). None resolved my issue.</p>\n<p>So, I deleted the 9090 Tomcat service and copied the 8080 Tomcat to 9090 Tomcat's location and started. It works as expected.</p>\n<p>any idea what went wrong ?</p>\n"},{"tags":["java","simpledateformat"],"comments":[{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":3,"creation_date":1649225228,"post_id":71761716,"comment_id":126818545,"body_markdown":"First question has to be: why are use using `SimpleDateFormat` in 2022?","body":"First question has to be: why are use using <code>SimpleDateFormat</code> in 2022?"},{"owner":{"account_id":18279728,"reputation":17,"user_id":13308751,"display_name":"Anirudh"},"score":0,"creation_date":1649225400,"post_id":71761716,"comment_id":126818582,"body_markdown":"our application is old one where they are using SimpleDateFormat","body":"our application is old one where they are using SimpleDateFormat"},{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1649225439,"post_id":71761716,"comment_id":126818588,"body_markdown":"`SimpleDateFormat` interprets 2 digit years as between -80 and +20 years of the creation of the formatter instance. `DateTimeFormatter` always interprets 2 digit years as in 2000 - so it solves your issue without and other changes.","body":"<code>SimpleDateFormat</code> interprets 2 digit years as between -80 and +20 years of the creation of the formatter instance. <code>DateTimeFormatter</code> always interprets 2 digit years as in 2000 - so it solves your issue without and other changes."},{"owner":{"account_id":18279728,"reputation":17,"user_id":13308751,"display_name":"Anirudh"},"score":0,"creation_date":1649225595,"post_id":71761716,"comment_id":126818629,"body_markdown":"Nope SimpleDateFormat doesn&#39;t work in my case if I select date as 2099 which defaults to 1999.","body":"Nope SimpleDateFormat doesn&#39;t work in my case if I select date as 2099 which defaults to 1999."},{"owner":{"account_id":18279728,"reputation":17,"user_id":13308751,"display_name":"Anirudh"},"score":0,"creation_date":1649225695,"post_id":71761716,"comment_id":126818665,"body_markdown":"There&#39;s a use case that&#39;s why we are not parsing full year as yyyy. I want this to be resolved by parsing date as yy itself.","body":"There&#39;s a use case that&#39;s why we are not parsing full year as yyyy. I want this to be resolved by parsing date as yy itself."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1649225816,"post_id":71761716,"comment_id":126818714,"body_markdown":"just trying to help, ... maybe you should have explained WHAT the use case is.... but writing there is a use case is the same as no information at all  :-(  || solution can be built based on knowledge of the &quot;-80 and +20&quot; range as documented and commented above","body":"just trying to help, ... maybe you should have explained WHAT the use case is.... but writing there is a use case is the same as no information at all  :-(  || solution can be built based on knowledge of the &quot;-80 and +20&quot; range as documented and commented above"},{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1649225867,"post_id":71761716,"comment_id":126818729,"body_markdown":"@ani I‚Äôm not sure what you mean by your comment. What ‚Äúcase‚Äù are you meaning. 2099 is always going to be more than 20 years in the future if you parse a date today - that‚Äôs just a fact.","body":"@ani I‚Äôm not sure what you mean by your comment. What ‚Äúcase‚Äù are you meaning. 2099 is always going to be more than 20 years in the future if you parse a date today - that‚Äôs just a fact."},{"owner":{"account_id":18279728,"reputation":17,"user_id":13308751,"display_name":"Anirudh"},"score":0,"creation_date":1649225911,"post_id":71761716,"comment_id":126818740,"body_markdown":"our backend application consumes in that format and we can never change that..so we need to parse date in mm/dd/yy format itself.","body":"our backend application consumes in that format and we can never change that..so we need to parse date in mm/dd/yy format itself."},{"owner":{"account_id":18279728,"reputation":17,"user_id":13308751,"display_name":"Anirudh"},"score":0,"creation_date":1649226054,"post_id":71761716,"comment_id":126818788,"body_markdown":"@BoristheSpider we have UI where the user will select start and end date... and the end date can be of any date greater than start date. So the user is trying to select 2099 as the end date which is defaulting to 1999 which is bad.","body":"@BoristheSpider we have UI where the user will select start and end date... and the end date can be of any date greater than start date. So the user is trying to select 2099 as the end date which is defaulting to 1999 which is bad."},{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1649226287,"post_id":71761716,"comment_id":126818862,"body_markdown":"Yes. And as I explained in my comment, `SimpleDateFormat` parses two digit years as -80 to +20 years from the date the formatter was created. I‚Äôm not sure what your comments are getting at. Use a `DateTimeFormatter`.","body":"Yes. And as I explained in my comment, <code>SimpleDateFormat</code> parses two digit years as -80 to +20 years from the date the formatter was created. I‚Äôm not sure what your comments are getting at. Use a <code>DateTimeFormatter</code>."},{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":1,"creation_date":1649226319,"post_id":71761716,"comment_id":126818876,"body_markdown":"&quot;_where they are using SimpleDateFormat_&quot; they aren&#39;t the one writing the code. If you&#39;re using Java 8 or higher, you can use [DateTimeFormatter](https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html), regardless of what _they_ had done. If you&#39;re not using Java 8, come back after you upgrade.","body":"&quot;<i>where they are using SimpleDateFormat</i>&quot; they aren&#39;t the one writing the code. If you&#39;re using Java 8 or higher, you can use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html\" rel=\"nofollow noreferrer\">DateTimeFormatter</a>, regardless of what <i>they</i> had done. If you&#39;re not using Java 8, come back after you upgrade."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1649227422,"post_id":71761716,"comment_id":126819237,"body_markdown":"did you eventually meant that the input year is `&quot;99&quot;`, not `&quot;2099&quot;` (`&quot;42&quot;`, not `&quot;2042&quot;`), that is, only two digits, and that it should be interpreted as `2099` and not as `1999`?","body":"did you eventually meant that the input year is <code>&quot;99&quot;</code>, not <code>&quot;2099&quot;</code> (<code>&quot;42&quot;</code>, not <code>&quot;2042&quot;</code>), that is, only two digits, and that it should be interpreted as <code>2099</code> and not as <code>1999</code>?"},{"owner":{"account_id":18279728,"reputation":17,"user_id":13308751,"display_name":"Anirudh"},"score":0,"creation_date":1649227591,"post_id":71761716,"comment_id":126819296,"body_markdown":"@user16320675 yeah if input year is `&quot;99&quot;` its defaulting to `&quot;1999&quot;` instead of `&quot;2099&quot;`","body":"@user16320675 yeah if input year is <code>&quot;99&quot;</code> its defaulting to <code>&quot;1999&quot;</code> instead of <code>&quot;2099&quot;</code>"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1649355519,"post_id":71761716,"comment_id":126861089,"body_markdown":"Even in old code using the troublesome `SimpleDateFormat` class I recommend you don‚Äôt use `SimpleDateFormat` in the lines that you are modifying or adding. Use `LocalDate` and `DateTimeFormatter`, both from [java.time, the modern Java date and time API](https://docs.oracle.com/javase/tutorial/datetime/).","body":"Even in old code using the troublesome <code>SimpleDateFormat</code> class I recommend you don‚Äôt use <code>SimpleDateFormat</code> in the lines that you are modifying or adding. Use <code>LocalDate</code> and <code>DateTimeFormatter</code>, both from <a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API</a>."}],"answers":[{"tags":[],"owner":{"account_id":3883809,"reputation":895,"user_id":3215705,"accept_rate":75,"display_name":"mystery"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1649226808,"creation_date":1649226808,"answer_id":71762048,"question_id":71761716,"body_markdown":"There is a method as [setTwoDigitYearStart][1] in SimpleDateFormat class where you can mention the century you wan the year to be considered as.\r\n\r\nFor example below snippet\r\n\r\n        SimpleDateFormat sdf = new SimpleDateFormat(&quot;MM/dd/yy&quot;);\r\n        sdf.set2DigitYearStart(new Date());\r\n        sdf.setLenient(false);\r\n        Date d=sdf.parse(&quot;01/01/99&quot;);\r\n        System.out.println(d);\r\nOutputs to\r\n\r\n    Thu Jan 01 00:00:00 BDT 2099\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html#set2DigitYearStart%28java.util.Date%29","title":"SimpleDateFormat fails to parse date format in MM/dd/yy","body":"<p>There is a method as <a href=\"https://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html#set2DigitYearStart%28java.util.Date%29\" rel=\"nofollow noreferrer\">setTwoDigitYearStart</a> in SimpleDateFormat class where you can mention the century you wan the year to be considered as.</p>\n<p>For example below snippet</p>\n<pre><code>    SimpleDateFormat sdf = new SimpleDateFormat(&quot;MM/dd/yy&quot;);\n    sdf.set2DigitYearStart(new Date());\n    sdf.setLenient(false);\n    Date d=sdf.parse(&quot;01/01/99&quot;);\n    System.out.println(d);\n</code></pre>\n<p>Outputs to</p>\n<pre><code>Thu Jan 01 00:00:00 BDT 2099\n</code></pre>\n"}],"owner":{"account_id":18279728,"reputation":17,"user_id":13308751,"display_name":"Anirudh"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":291,"favorite_count":0,"down_vote_count":3,"up_vote_count":2,"answer_count":1,"score":-1,"last_activity_date":1649682895,"creation_date":1649224882,"question_id":71761716,"body_markdown":"We have an application where we are parsing date in MM/dd/yy format which works fine for any date upto 2042. But problem occurs when we select date as 2099 which defaults to 1999. Is there any way we can solve this issue\r\n\r\n```\r\n parseFormat = new SimpleDateFormat(&quot;MM/dd/yy&quot;);\r\n parseFormat.setLenient(false);\r\n```\r\n\r\nTried by changing the date format to mm/dd/yyyy which works perfectly fine, but I want to parse it as mm/dd/yy itself so that we don&#39;t break down our application.","title":"SimpleDateFormat fails to parse date format in MM/dd/yy","body":"<p>We have an application where we are parsing date in MM/dd/yy format which works fine for any date upto 2042. But problem occurs when we select date as 2099 which defaults to 1999. Is there any way we can solve this issue</p>\n<pre><code> parseFormat = new SimpleDateFormat(&quot;MM/dd/yy&quot;);\n parseFormat.setLenient(false);\n</code></pre>\n<p>Tried by changing the date format to mm/dd/yyyy which works perfectly fine, but I want to parse it as mm/dd/yy itself so that we don't break down our application.</p>\n"},{"tags":["java","xml","marshalling"],"comments":[{"owner":{"account_id":23619880,"reputation":21,"user_id":17653368,"display_name":"Sai"},"score":0,"creation_date":1649682846,"post_id":71828238,"comment_id":126931144,"body_markdown":"@M.Deinum added mapping code. Container is not doing it, so looking for alternative.","body":"@M.Deinum added mapping code. Container is not doing it, so looking for alternative."},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1649683594,"post_id":71828238,"comment_id":126931456,"body_markdown":"If your container isn&#39;t doing it then why bother with an ejb-jar.xml etc. in the firstplace? If you need to work around this you either are using the wrong container, or the wrong technology.","body":"If your container isn&#39;t doing it then why bother with an ejb-jar.xml etc. in the firstplace? If you need to work around this you either are using the wrong container, or the wrong technology."}],"owner":{"account_id":23619880,"reputation":21,"user_id":17653368,"display_name":"Sai"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649682750,"creation_date":1649681761,"question_id":71828238,"body_markdown":"I have below ```ejb-jar.xml``` which I am trying to map to POJO. It just maps only one MDB and one Session bean though xml has many. \r\n\r\n**ejb-jar.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;ejb-jar version=&quot;2.1&quot;\r\n        xmlns=&quot;http://java.sun.com/xml/ns/j2ee&quot;\r\n        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/ejb-jar_2_1.xsd&quot;&gt; \r\n        &lt;display-name&gt;TradeEJBs&lt;/display-name&gt;\r\n        &lt;enterprise-beans&gt;\r\n            &lt;session&gt;\r\n                &lt;description&gt;Trade Session EJB manages all Trading services&lt;/description&gt;\r\n                &lt;display-name&gt;TradeEJB&lt;/display-name&gt;\r\n                &lt;ejb-name&gt;TradeEJB&lt;/ejb-name&gt;\r\n                &lt;home&gt;org.apache.geronimo.samples.daytrader.ejb.TradeHome&lt;/home&gt;\r\n                &lt;remote&gt;org.apache.geronimo.samples.daytrader.ejb.Trade&lt;/remote&gt;\r\n                &lt;ejb-class&gt;org.apache.geronimo.samples.daytrader.ejb.TradeBean&lt;/ejb-class&gt;\r\n                &lt;session-type&gt;Stateless&lt;/session-type&gt;\r\n            &lt;/session&gt;\r\n            &lt;session&gt;\r\n                &lt;description&gt;Trade JDBC Session EJB manages all Trading services&lt;/description&gt;\r\n                &lt;display-name&gt;TradeJDBC&lt;/display-name&gt;\r\n                &lt;ejb-name&gt;TradeJDBC&lt;/ejb-name&gt;\r\n                &lt;home&gt;org.apache.geronimo.samples.daytrader.session.TradeJDBCHome&lt;/home&gt;\r\n                &lt;remote&gt;org.apache.geronimo.samples.daytrader.session.TradeJDBC&lt;/remote&gt;\r\n                &lt;ejb-class&gt;org.apache.geronimo.samples.daytrader.session.TradeJDBCBean&lt;/ejb-class&gt;\r\n                &lt;session-type&gt;Stateless&lt;/session-type&gt;\r\n            &lt;/session&gt;\r\n    \t\t&lt;message-driven&gt;\r\n                &lt;ejb-name&gt;TradeStreamerMDB&lt;/ejb-name&gt;\r\n                &lt;ejb-class&gt;org.apache.geronimo.samples.daytrader.ejb.TradeStreamerMDB&lt;/ejb-class&gt;\r\n                &lt;messaging-type&gt;javax.jms.MessageListener&lt;/messaging-type&gt;\r\n                &lt;transaction-type&gt;Container&lt;/transaction-type&gt;\r\n                &lt;message-destination-type&gt;javax.jms.Topic&lt;/message-destination-type&gt;\r\n                &lt;message-destination-link&gt;TradeStreamerTopic&lt;/message-destination-link&gt;\r\n                &lt;/message-driven&gt;\r\n    \t\t&lt;session&gt;\r\n                &lt;display-name&gt;KeySequenceEJB&lt;/display-name&gt;\r\n                &lt;ejb-name&gt;KeySequenceEJB&lt;/ejb-name&gt;\r\n                &lt;local-home&gt;org.apache.geronimo.samples.daytrader.ejb.LocalKeySequenceHome&lt;/local-home&gt;\r\n                &lt;local&gt;org.apache.geronimo.samples.daytrader.ejb.LocalKeySequence&lt;/local&gt;\r\n                &lt;ejb-class&gt;org.apache.geronimo.samples.daytrader.ejb.KeySequenceBean&lt;/ejb-class&gt;\r\n                &lt;session-type&gt;Stateless&lt;/session-type&gt;\r\n            &lt;/session&gt;\r\n    \t\t&lt;message-driven&gt;\r\n                &lt;display-name&gt;TradeBrokerMDB&lt;/display-name&gt;\r\n                &lt;ejb-name&gt;TradeBrokerMDB&lt;/ejb-name&gt;\r\n                &lt;ejb-class&gt;org.apache.geronimo.samples.daytrader.ejb.TradeBrokerMDB&lt;/ejb-class&gt;\r\n                &lt;messaging-type&gt;javax.jms.MessageListener&lt;/messaging-type&gt;\r\n                &lt;transaction-type&gt;Container&lt;/transaction-type&gt;\r\n                &lt;message-destination-type&gt;javax.jms.Queue&lt;/message-destination-type&gt;\r\n                &lt;message-destination-link&gt;TradeBrokerQueue&lt;/message-destination-link&gt;\r\n            &lt;/message-driven&gt;\r\n        &lt;/enterprise-beans&gt;\r\n    &lt;/ejb-jar&gt;\r\n\r\n**Tester Class:**\r\n\r\n**(EjbJarType, MDBModule,SessionModule POJOs are in place with proper Xml annotations)**\r\n\r\n    public class XmlMarshallingTester {\r\n\r\n\tpublic static void main(String[] args) throws Exception {\r\n\t\t\r\n\t\tString configFilePath = &quot;C:\\\\SampleProject\\\\ejb\\\\src\\\\main\\\\resources\\\\META-INF\\\\ejb-jar.xml&quot;;\r\n\t\tEjbJarType ejbJarBean = (EjbJarType) marshal(configFilePath.toString(), EjbJarType.class);\r\n\t\tMap&lt;String, MDBModule&gt; mdbModeulMap = EJBXMLBeanUtil.getMdbDetails(ejbJarBean);\r\n\t\tMap&lt;String, SessionModule&gt; sessionMap = EJBXMLBeanUtil.getSessionBeanData(ejbJarBean);\r\n\t}\r\n\r\n\r\n\tpublic static Object marshal(String filePath, Class&lt;?&gt; targetClass) throws JsonParseException, JsonMappingException,\r\n\tIOException, InstantiationException, IllegalAccessException {\r\n\t\tFileInputStream fi = new FileInputStream(filePath);\r\n\r\n\t\tJacksonXmlModule module = new JacksonXmlModule();\r\n\t\tmodule.setDefaultUseWrapper(false);\r\n\t\tXmlMapper xmlMapper = new XmlMapper(module);\r\n\r\n\t\tObject obj = targetClass.newInstance();\r\n\t\tObject beans = xmlMapper.readValue(fi, obj.getClass());\r\n\t\treturn beans;\r\n\r\n\t}\r\n}\r\n\r\nHowever, if the xml file contains all the same type of nodes grouped sequentially (as below), it maps all the MDBs and Session beans as expected.\r\n\r\n    &lt;enterprise-beans&gt;\r\n        &lt;session&gt;\r\n           &lt;!-- some data --&gt;\r\n        &lt;/session&gt;\r\n        &lt;session&gt;\r\n           &lt;!-- some data --&gt;\r\n        &lt;/session&gt;\r\n\t\t&lt;session&gt;\r\n\t\t\t&lt;!-- some data --&gt;\r\n        &lt;/session&gt;\r\n\t\t&lt;message-driven&gt;\r\n\t\t\t&lt;!-- some data --&gt;\r\n        &lt;/message-driven&gt;\r\n\t\t&lt;message-driven&gt;\r\n\t\t\t&lt;!-- some data --&gt;\r\n        &lt;/message-driven&gt;\r\n    &lt;/enterprise-beans&gt;\r\n\r\nSo, is there any mechanism/way we can follow for reading all the XML nodes in the order as is and mapping to POJO? Pointers appreciated!","title":"XML marshalling not working if different nodes appear in between","body":"<p>I have below <code>ejb-jar.xml</code> which I am trying to map to POJO. It just maps only one MDB and one Session bean though xml has many.</p>\n<p><strong>ejb-jar.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;ejb-jar version=&quot;2.1&quot;\n    xmlns=&quot;http://java.sun.com/xml/ns/j2ee&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/ejb-jar_2_1.xsd&quot;&gt; \n    &lt;display-name&gt;TradeEJBs&lt;/display-name&gt;\n    &lt;enterprise-beans&gt;\n        &lt;session&gt;\n            &lt;description&gt;Trade Session EJB manages all Trading services&lt;/description&gt;\n            &lt;display-name&gt;TradeEJB&lt;/display-name&gt;\n            &lt;ejb-name&gt;TradeEJB&lt;/ejb-name&gt;\n            &lt;home&gt;org.apache.geronimo.samples.daytrader.ejb.TradeHome&lt;/home&gt;\n            &lt;remote&gt;org.apache.geronimo.samples.daytrader.ejb.Trade&lt;/remote&gt;\n            &lt;ejb-class&gt;org.apache.geronimo.samples.daytrader.ejb.TradeBean&lt;/ejb-class&gt;\n            &lt;session-type&gt;Stateless&lt;/session-type&gt;\n        &lt;/session&gt;\n        &lt;session&gt;\n            &lt;description&gt;Trade JDBC Session EJB manages all Trading services&lt;/description&gt;\n            &lt;display-name&gt;TradeJDBC&lt;/display-name&gt;\n            &lt;ejb-name&gt;TradeJDBC&lt;/ejb-name&gt;\n            &lt;home&gt;org.apache.geronimo.samples.daytrader.session.TradeJDBCHome&lt;/home&gt;\n            &lt;remote&gt;org.apache.geronimo.samples.daytrader.session.TradeJDBC&lt;/remote&gt;\n            &lt;ejb-class&gt;org.apache.geronimo.samples.daytrader.session.TradeJDBCBean&lt;/ejb-class&gt;\n            &lt;session-type&gt;Stateless&lt;/session-type&gt;\n        &lt;/session&gt;\n        &lt;message-driven&gt;\n            &lt;ejb-name&gt;TradeStreamerMDB&lt;/ejb-name&gt;\n            &lt;ejb-class&gt;org.apache.geronimo.samples.daytrader.ejb.TradeStreamerMDB&lt;/ejb-class&gt;\n            &lt;messaging-type&gt;javax.jms.MessageListener&lt;/messaging-type&gt;\n            &lt;transaction-type&gt;Container&lt;/transaction-type&gt;\n            &lt;message-destination-type&gt;javax.jms.Topic&lt;/message-destination-type&gt;\n            &lt;message-destination-link&gt;TradeStreamerTopic&lt;/message-destination-link&gt;\n            &lt;/message-driven&gt;\n        &lt;session&gt;\n            &lt;display-name&gt;KeySequenceEJB&lt;/display-name&gt;\n            &lt;ejb-name&gt;KeySequenceEJB&lt;/ejb-name&gt;\n            &lt;local-home&gt;org.apache.geronimo.samples.daytrader.ejb.LocalKeySequenceHome&lt;/local-home&gt;\n            &lt;local&gt;org.apache.geronimo.samples.daytrader.ejb.LocalKeySequence&lt;/local&gt;\n            &lt;ejb-class&gt;org.apache.geronimo.samples.daytrader.ejb.KeySequenceBean&lt;/ejb-class&gt;\n            &lt;session-type&gt;Stateless&lt;/session-type&gt;\n        &lt;/session&gt;\n        &lt;message-driven&gt;\n            &lt;display-name&gt;TradeBrokerMDB&lt;/display-name&gt;\n            &lt;ejb-name&gt;TradeBrokerMDB&lt;/ejb-name&gt;\n            &lt;ejb-class&gt;org.apache.geronimo.samples.daytrader.ejb.TradeBrokerMDB&lt;/ejb-class&gt;\n            &lt;messaging-type&gt;javax.jms.MessageListener&lt;/messaging-type&gt;\n            &lt;transaction-type&gt;Container&lt;/transaction-type&gt;\n            &lt;message-destination-type&gt;javax.jms.Queue&lt;/message-destination-type&gt;\n            &lt;message-destination-link&gt;TradeBrokerQueue&lt;/message-destination-link&gt;\n        &lt;/message-driven&gt;\n    &lt;/enterprise-beans&gt;\n&lt;/ejb-jar&gt;\n</code></pre>\n<p><strong>Tester Class:</strong></p>\n<p><strong>(EjbJarType, MDBModule,SessionModule POJOs are in place with proper Xml annotations)</strong></p>\n<pre><code>public class XmlMarshallingTester {\n\npublic static void main(String[] args) throws Exception {\n    \n    String configFilePath = &quot;C:\\\\SampleProject\\\\ejb\\\\src\\\\main\\\\resources\\\\META-INF\\\\ejb-jar.xml&quot;;\n    EjbJarType ejbJarBean = (EjbJarType) marshal(configFilePath.toString(), EjbJarType.class);\n    Map&lt;String, MDBModule&gt; mdbModeulMap = EJBXMLBeanUtil.getMdbDetails(ejbJarBean);\n    Map&lt;String, SessionModule&gt; sessionMap = EJBXMLBeanUtil.getSessionBeanData(ejbJarBean);\n}\n\n\npublic static Object marshal(String filePath, Class&lt;?&gt; targetClass) throws JsonParseException, JsonMappingException,\nIOException, InstantiationException, IllegalAccessException {\n    FileInputStream fi = new FileInputStream(filePath);\n\n    JacksonXmlModule module = new JacksonXmlModule();\n    module.setDefaultUseWrapper(false);\n    XmlMapper xmlMapper = new XmlMapper(module);\n\n    Object obj = targetClass.newInstance();\n    Object beans = xmlMapper.readValue(fi, obj.getClass());\n    return beans;\n\n}\n</code></pre>\n<p>}</p>\n<p>However, if the xml file contains all the same type of nodes grouped sequentially (as below), it maps all the MDBs and Session beans as expected.</p>\n<pre><code>&lt;enterprise-beans&gt;\n    &lt;session&gt;\n       &lt;!-- some data --&gt;\n    &lt;/session&gt;\n    &lt;session&gt;\n       &lt;!-- some data --&gt;\n    &lt;/session&gt;\n    &lt;session&gt;\n        &lt;!-- some data --&gt;\n    &lt;/session&gt;\n    &lt;message-driven&gt;\n        &lt;!-- some data --&gt;\n    &lt;/message-driven&gt;\n    &lt;message-driven&gt;\n        &lt;!-- some data --&gt;\n    &lt;/message-driven&gt;\n&lt;/enterprise-beans&gt;\n</code></pre>\n<p>So, is there any mechanism/way we can follow for reading all the XML nodes in the order as is and mapping to POJO? Pointers appreciated!</p>\n"},{"tags":["java","runtimeexception","annotations-processing-messager"],"answers":[{"tags":[],"owner":{"account_id":11699486,"reputation":226,"user_id":13751385,"display_name":"Aria"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1649682287,"creation_date":1649682287,"answer_id":71828379,"question_id":71767104,"body_markdown":"I think this paragraph from the documentation of [Processor][1] is a good general guide.\r\n\r\n&gt; If a processor throws an uncaught exception, the tool may cease other\r\n&gt; active annotation processors. If a processor raises an error, the\r\n&gt; current round will run to completion and the subsequent round will\r\n&gt; indicate an error was raised. Since annotation processors are run in a\r\n&gt; cooperative environment, a processor should throw an uncaught\r\n&gt; exception only in situations where no error recovery or reporting is\r\n&gt; feasible.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/6/docs/api/javax/annotation/processing/Processor.html","title":"Java: Messager vs runtime exception","body":"<p>I think this paragraph from the documentation of <a href=\"https://docs.oracle.com/javase/6/docs/api/javax/annotation/processing/Processor.html\" rel=\"nofollow noreferrer\">Processor</a> is a good general guide.</p>\n<blockquote>\n<p>If a processor throws an uncaught exception, the tool may cease other\nactive annotation processors. If a processor raises an error, the\ncurrent round will run to completion and the subsequent round will\nindicate an error was raised. Since annotation processors are run in a\ncooperative environment, a processor should throw an uncaught\nexception only in situations where no error recovery or reporting is\nfeasible.</p>\n</blockquote>\n"}],"owner":{"account_id":11699486,"reputation":226,"user_id":13751385,"display_name":"Aria"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71828379,"answer_count":1,"score":0,"last_activity_date":1649682287,"creation_date":1649249516,"question_id":71767104,"body_markdown":"In annotation processing, I am looking for a general guide as to when to use [`Messager`][1], with `Diagnostic.Kind.ERROR` and when to use runtime exception. I know that using `Messager` will raise an error in the environment.\r\n\r\nLet&#39;s consider this example. I have an annotation that is put on top of interfaces. The job of its processor is to make sure that all the methods wherein have a unique identifier of a specific type. If the processor encounters a violation, should it use `Messager`, or should it throw a runtime exception?\r\n\r\nOne disadvantage of `Messager` is that if that violation causes other issues in the program and other processors, the error message gets lost in other error messages and pollutes the logging.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/javax/annotation/processing/Messager.html","title":"Java: Messager vs runtime exception","body":"<p>In annotation processing, I am looking for a general guide as to when to use <a href=\"https://docs.oracle.com/javase/9/docs/api/javax/annotation/processing/Messager.html\" rel=\"nofollow noreferrer\"><code>Messager</code></a>, with <code>Diagnostic.Kind.ERROR</code> and when to use runtime exception. I know that using <code>Messager</code> will raise an error in the environment.</p>\n<p>Let's consider this example. I have an annotation that is put on top of interfaces. The job of its processor is to make sure that all the methods wherein have a unique identifier of a specific type. If the processor encounters a violation, should it use <code>Messager</code>, or should it throw a runtime exception?</p>\n<p>One disadvantage of <code>Messager</code> is that if that violation causes other issues in the program and other processors, the error message gets lost in other error messages and pollutes the logging.</p>\n"},{"tags":["java","minecraft"],"owner":{"account_id":22467322,"reputation":61,"user_id":16668276,"display_name":"No-Question123"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":164,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1649681412,"answer_count":0,"score":1,"last_activity_date":1649681420,"creation_date":1649625631,"question_id":71820658,"body_markdown":"I&#39;m trying to create a minecraft plugin and I keep getting this error when I hover over `JavaPlugin`. \r\n\r\n    \r\n\r\n[Error when hover over javaplugin][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CBla1.png\r\n\r\nI went into project structure &gt; modules &gt; dependencies &gt; and added the spigot 1.18.2 jar. however I still get this error. Pls help.\r\n\r\nhere&#39;s what my code looks like: \r\n\r\n    package net.superiorcraft;\r\n    \r\n    import org.bukkit.plugin.java.JavaPlugin;\r\n    \r\n    public class myfirstplugin extends JavaPlugin {\r\n    \r\n    }","title":"Cannot resolve symbol &#39;JavaPlugin&#39; intelij","body":"<p>I'm trying to create a minecraft plugin and I keep getting this error when I hover over <code>JavaPlugin</code>.</p>\n<p><a href=\"https://i.stack.imgur.com/CBla1.png\" rel=\"nofollow noreferrer\">Error when hover over javaplugin</a></p>\n<p>I went into project structure &gt; modules &gt; dependencies &gt; and added the spigot 1.18.2 jar. however I still get this error. Pls help.</p>\n<p>here's what my code looks like:</p>\n<pre><code>package net.superiorcraft;\n\nimport org.bukkit.plugin.java.JavaPlugin;\n\npublic class myfirstplugin extends JavaPlugin {\n\n}\n</code></pre>\n"},{"tags":["java","log4j2","vert.x"],"answers":[{"tags":[],"owner":{"account_id":2446461,"reputation":8725,"user_id":2133695,"display_name":"tsegismont"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649681332,"creation_date":1649681332,"answer_id":71828137,"question_id":71821821,"body_markdown":"You can make Log4j2 use another configuration file by setting the `log4j2.configurationFile` system property, as explained in the [configuration section][1] of the documentation:\r\n\r\n    java -Dlog4j2.configurationFile=/path/to/log4j2.xml -jar myapp.jar\r\n\r\n  [1]: https://logging.apache.org/log4j/2.x/manual/configuration.html#AutomaticConfiguration","title":"How to set different logging levels for vertx shadow jar in runtime?","body":"<p>You can make Log4j2 use another configuration file by setting the <code>log4j2.configurationFile</code> system property, as explained in the <a href=\"https://logging.apache.org/log4j/2.x/manual/configuration.html#AutomaticConfiguration\" rel=\"nofollow noreferrer\">configuration section</a> of the documentation:</p>\n<pre><code>java -Dlog4j2.configurationFile=/path/to/log4j2.xml -jar myapp.jar\n</code></pre>\n"}],"owner":{"account_id":15924438,"reputation":137,"user_id":11490407,"display_name":"Bill Billy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71828137,"answer_count":1,"score":0,"last_activity_date":1649681332,"creation_date":1649640197,"question_id":71821821,"body_markdown":"vertx starter use shadow jar plugin to package a fat-jar\r\n\r\n`log4j2.xml` will be put into the jar file\r\n\r\nHow can I run the jar with different log levels? (With springboot I can set `-Dspring.profile.active=test` to use `application-test.yml` for switch on debug logging)","title":"How to set different logging levels for vertx shadow jar in runtime?","body":"<p>vertx starter use shadow jar plugin to package a fat-jar</p>\n<p><code>log4j2.xml</code> will be put into the jar file</p>\n<p>How can I run the jar with different log levels? (With springboot I can set <code>-Dspring.profile.active=test</code> to use <code>application-test.yml</code> for switch on debug logging)</p>\n"},{"tags":["java","spring-security","openid-connect","saml-2.0","spring-saml"],"answers":[{"tags":[],"owner":{"account_id":2588110,"reputation":7132,"user_id":2243324,"display_name":"jzheaux"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1649261541,"creation_date":1649261541,"answer_id":71770203,"question_id":71766820,"body_markdown":"&gt; it sounds like there may be a way for us to convert a SAML2.0 token into a JSON Web Token/OIDC/ID Token\r\n\r\nThis sounds like you are trying to exchange the SAML assertion for an access token. In that case, you can look at [SAML assertion token grants][3]. Another option is to treat [your SAML assertion as a bearer token][4] itself instead of converting it. I don&#39;t believe that Spring Security yet supports either of those, but it wouldn&#39;t hurt to [add a ticket][5] to start that conversation.\r\n\r\n&gt; add OIDC (JWT/id token) support to an existing Java Spring application using SAML2.0\r\n\r\nIf I&#39;m wrong in my understanding, though, and what you are saying is that you want to your app to be able to do the [SAML][1] SP handshake as well as the [OIDC][2] handshake, then Spring Security does support this. You can simply specify both mechanisms like so:\r\n\r\n\r\n```java\r\nhttp\r\n    .authorizeHttpRequests((authorize) -&gt; authorize.anyRequest().authenticated())\r\n    .oauth2Login(Customizer.withDefaults())\r\n    .saml2Login(Customizer.withDefaults());\r\n```\r\n\r\nEach of these will ultimately have its own individual configurations necessary in order to coordinate correctly with your Identity Provider. See the links above for how to do this.\r\n\r\nAlso, there may be some reconciliation you need to do between the user that the Id Token represents and the user that the Assertion represents. That reconciliation will ultimately be up to you to do.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/5.6.1/servlet/saml2/login/index.html\r\n  [2]: https://docs.spring.io/spring-security/reference/5.6.1/servlet/oauth2/login/index.html\r\n  [3]: https://datatracker.ietf.org/doc/rfc7522/\r\n  [4]: https://datatracker.ietf.org/doc/html/draft-ietf-oauth-saml2-bearer-20\r\n  [5]: https://github.com/spring-projects/spring-security/issues/new","title":"Using Spring Security to convert a SAMl2.0 token into a JWT/OIDC","body":"<blockquote>\n<p>it sounds like there may be a way for us to convert a SAML2.0 token into a JSON Web Token/OIDC/ID Token</p>\n</blockquote>\n<p>This sounds like you are trying to exchange the SAML assertion for an access token. In that case, you can look at <a href=\"https://datatracker.ietf.org/doc/rfc7522/\" rel=\"nofollow noreferrer\">SAML assertion token grants</a>. Another option is to treat <a href=\"https://datatracker.ietf.org/doc/html/draft-ietf-oauth-saml2-bearer-20\" rel=\"nofollow noreferrer\">your SAML assertion as a bearer token</a> itself instead of converting it. I don't believe that Spring Security yet supports either of those, but it wouldn't hurt to <a href=\"https://github.com/spring-projects/spring-security/issues/new\" rel=\"nofollow noreferrer\">add a ticket</a> to start that conversation.</p>\n<blockquote>\n<p>add OIDC (JWT/id token) support to an existing Java Spring application using SAML2.0</p>\n</blockquote>\n<p>If I'm wrong in my understanding, though, and what you are saying is that you want to your app to be able to do the <a href=\"https://docs.spring.io/spring-security/reference/5.6.1/servlet/saml2/login/index.html\" rel=\"nofollow noreferrer\">SAML</a> SP handshake as well as the <a href=\"https://docs.spring.io/spring-security/reference/5.6.1/servlet/oauth2/login/index.html\" rel=\"nofollow noreferrer\">OIDC</a> handshake, then Spring Security does support this. You can simply specify both mechanisms like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>http\n    .authorizeHttpRequests((authorize) -&gt; authorize.anyRequest().authenticated())\n    .oauth2Login(Customizer.withDefaults())\n    .saml2Login(Customizer.withDefaults());\n</code></pre>\n<p>Each of these will ultimately have its own individual configurations necessary in order to coordinate correctly with your Identity Provider. See the links above for how to do this.</p>\n<p>Also, there may be some reconciliation you need to do between the user that the Id Token represents and the user that the Assertion represents. That reconciliation will ultimately be up to you to do.</p>\n"}],"owner":{"account_id":10257932,"reputation":358,"user_id":7570259,"display_name":"Tony Pendleton"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1003,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1649681157,"creation_date":1649248378,"question_id":71766820,"body_markdown":"I am working on a team that needs to add OIDC (JWT/id token) support to an existing Java Spring application using SAML2.0. Do you all have any suggestions or resources to help tackle this problem?\r\n\r\nFrom the little research I have done, it sounds like there may be a way for us to convert a SAML2.0 token into a JSON Web Token/OIDC/ID Token. Is that a thing? \r\n\r\nSorry for any poor wording, I am a data scientist by nature so my software development skills are not strong. \r\n\r\nThank you all for any help you can provide. \r\n ","title":"Using Spring Security to convert a SAMl2.0 token into a JWT/OIDC","body":"<p>I am working on a team that needs to add OIDC (JWT/id token) support to an existing Java Spring application using SAML2.0. Do you all have any suggestions or resources to help tackle this problem?</p>\n<p>From the little research I have done, it sounds like there may be a way for us to convert a SAML2.0 token into a JSON Web Token/OIDC/ID Token. Is that a thing?</p>\n<p>Sorry for any poor wording, I am a data scientist by nature so my software development skills are not strong.</p>\n<p>Thank you all for any help you can provide.</p>\n"},{"tags":["java","log4j","log4j2"],"comments":[{"owner":{"account_id":5254099,"reputation":1061,"user_id":4197431,"display_name":"Ralf Renz"},"score":1,"creation_date":1649065763,"post_id":71734408,"comment_id":126773247,"body_markdown":"Difficult to say. I suggest that you build a test app with one class that just logs one message in its main() and migrate that. Maybe it&#39;s easier to see where the problems are.","body":"Difficult to say. I suggest that you build a test app with one class that just logs one message in its main() and migrate that. Maybe it&#39;s easier to see where the problems are."},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1649152414,"post_id":71734408,"comment_id":126797874,"body_markdown":"You need to set `log4j1.compatibility=true` if you want to use a Log4j 1.x configuration.","body":"You need to set <code>log4j1.compatibility=true</code> if you want to use a Log4j 1.x configuration."},{"owner":{"account_id":1941777,"reputation":3143,"user_id":1747834,"accept_rate":58,"display_name":"Mikhail T."},"score":0,"creation_date":1649449281,"post_id":71734408,"comment_id":126887385,"body_markdown":"We have the same problem and I suspect, it is due to our downloading of the `log4j2.xml` via regular (non-encrypted) HTTP -- 2.17.2 only allows such downloads via HTTPS by default. [My own question](/questions/71802718/) asks, how to reenable use of HTTP for this...","body":"We have the same problem and I suspect, it is due to our downloading of the <code>log4j2.xml</code> via regular (non-encrypted) HTTP -- 2.17.2 only allows such downloads via HTTPS by default. <a href=\"/questions/71802718/\">My own question</a> asks, how to reenable use of HTTP for this..."},{"owner":{"account_id":21320273,"reputation":55,"user_id":15693567,"display_name":"Cris_new"},"score":0,"creation_date":1649664782,"post_id":71734408,"comment_id":126924264,"body_markdown":"@PiotrP.Karwasz- Could you please let me know where i need to set this `log4j1.compatibility=true` property?","body":"@PiotrP.Karwasz- Could you please let me know where i need to set this <code>log4j1.compatibility=true</code> property?"},{"owner":{"account_id":21320273,"reputation":55,"user_id":15693567,"display_name":"Cris_new"},"score":0,"creation_date":1649679929,"post_id":71734408,"comment_id":126929828,"body_markdown":"@MikhailT. We are using log4.properties file and we are loading it in our java class. Do i need to modify the log4j properties also to incorporate the log4j 2 changes? My assumption was the bridge jar would take care of this.","body":"@MikhailT. We are using log4.properties file and we are loading it in our java class. Do i need to modify the log4j properties also to incorporate the log4j 2 changes? My assumption was the bridge jar would take care of this."},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1649694339,"post_id":71734408,"comment_id":126935713,"body_markdown":"@Cris_new: [this question](https://stackoverflow.com/q/70843538/11748454) explains where you can set Log4j system properties.","body":"@Cris_new: <a href=\"https://stackoverflow.com/q/70843538/11748454\">this question</a> explains where you can set Log4j system properties."},{"owner":{"account_id":21320273,"reputation":55,"user_id":15693567,"display_name":"Cris_new"},"score":0,"creation_date":1649766232,"post_id":71734408,"comment_id":126954634,"body_markdown":"@PiotrP.Karwasz- I just updated the question with the updated log4j.properties file. I have added `log4j1.compatibility=true` in my log4j.properties file. Still no luck!","body":"@PiotrP.Karwasz- I just updated the question with the updated log4j.properties file. I have added <code>log4j1.compatibility=true</code> in my log4j.properties file. Still no luck!"},{"owner":{"account_id":3373160,"reputation":91,"user_id":2831932,"display_name":"Armando Pinto"},"score":0,"creation_date":1657646417,"post_id":71734408,"comment_id":128858392,"body_markdown":"Did You find a solution? We are facing a similar problem.","body":"Did You find a solution? We are facing a similar problem."},{"owner":{"account_id":21320273,"reputation":55,"user_id":15693567,"display_name":"Cris_new"},"score":0,"creation_date":1659699344,"post_id":71734408,"comment_id":129362083,"body_markdown":"@ArmandoPinto- No, I am continuing using 1.2.17.","body":"@ArmandoPinto- No, I am continuing using 1.2.17."}],"owner":{"account_id":21320273,"reputation":55,"user_id":15693567,"display_name":"Cris_new"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1729,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1649681125,"creation_date":1649062300,"question_id":71734408,"body_markdown":"We have older java code which was using log4j 1.17 and application logs were writing to log file properly. As part of vulnerability fixing we have to migrate to log4j 2.17.2 (Mandatory as part of compliance). We have followed the migration plan as per the Apache blog- https://logging.apache.org/log4j/2.x/manual/migration.html\r\nSo, now we have added the reference of log4j-1.2-api-2.17.2.jar, log4j-api-2.17.2.jar and log4j-core-2.17.2.jar files instead of log4j-1.17.\r\nBut, with log4j-2.17, no logs are populating in the log file....though application is running and functionalities also working....but no logs in the log file.\r\n\r\nAs soon as we refer the log4j-1.17, log files are starts populating. I am not able to figure out what is going wrong here.\r\nBelow is how the logger was instantiated in old code-\r\n\r\n`static Logger log = Logger.getLogger(SendApproverDetails.class);`\r\n\r\nLog4j.Properites files details-\r\n[![enter image description here][1]][1]\r\n\r\n\r\nUpdated the log4j.properites file with \r\n@PiotrP.Karwasz suggestion. Still no luck-\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/SQxXH.jpg\r\n  [2]: https://i.stack.imgur.com/NLo89.jpg","title":"Logs are not populating with Log4j 2.17.2","body":"<p>We have older java code which was using log4j 1.17 and application logs were writing to log file properly. As part of vulnerability fixing we have to migrate to log4j 2.17.2 (Mandatory as part of compliance). We have followed the migration plan as per the Apache blog- <a href=\"https://logging.apache.org/log4j/2.x/manual/migration.html\" rel=\"nofollow noreferrer\">https://logging.apache.org/log4j/2.x/manual/migration.html</a>\nSo, now we have added the reference of log4j-1.2-api-2.17.2.jar, log4j-api-2.17.2.jar and log4j-core-2.17.2.jar files instead of log4j-1.17.\nBut, with log4j-2.17, no logs are populating in the log file....though application is running and functionalities also working....but no logs in the log file.</p>\n<p>As soon as we refer the log4j-1.17, log files are starts populating. I am not able to figure out what is going wrong here.\nBelow is how the logger was instantiated in old code-</p>\n<p><code>static Logger log = Logger.getLogger(SendApproverDetails.class);</code></p>\n<p>Log4j.Properites files details-\n<a href=\"https://i.stack.imgur.com/SQxXH.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SQxXH.jpg\" alt=\"enter image description here\" /></a></p>\n<p>Updated the log4j.properites file with\n@PiotrP.Karwasz suggestion. Still no luck-\n<a href=\"https://i.stack.imgur.com/NLo89.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NLo89.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring","database","hibernate","mariadb"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1649265060,"post_id":71770174,"comment_id":126834185,"body_markdown":"SOrry but there is too little information. You speak of a test, which isn&#39;t included. If there is a leak something must be getting the connection and that must be your own code. You are using HikariCP so please remove the validation query and rely on the connection validation of JDBC4 (unless you are using a very very very old driver you need a validation query).","body":"SOrry but there is too little information. You speak of a test, which isn&#39;t included. If there is a leak something must be getting the connection and that must be your own code. You are using HikariCP so please remove the validation query and rely on the connection validation of JDBC4 (unless you are using a very very very old driver you need a validation query)."},{"owner":{"account_id":483394,"reputation":8917,"user_id":898400,"accept_rate":93,"display_name":"Riccardo T."},"score":0,"creation_date":1649341794,"post_id":71770174,"comment_id":126855826,"body_markdown":"@M.Deinum I removed the validation query which I previously added and forgot in one of the desperate tries to understand the issue. I also rewrote a minimal unit test which also replicates connection leaks in the same way as in my original application (which is a bit less minimal to report here). Please let me know should you think I need to provide yet more information. Thanks, in the meantime.","body":"@M.Deinum I removed the validation query which I previously added and forgot in one of the desperate tries to understand the issue. I also rewrote a minimal unit test which also replicates connection leaks in the same way as in my original application (which is a bit less minimal to report here). Please let me know should you think I need to provide yet more information. Thanks, in the meantime."},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1649400163,"post_id":71770174,"comment_id":126870043,"body_markdown":"I would suggest using a thread pool rather than manually handling threads, but alas. Do you have a hidden `persistence.xml` or `hibernate.properties/cfg.xml` somewhere in your classpath as well? Could you specify the versions of Spring, Hikari and Hibernate you are using? Finally what is with the additional proxyfactorybean? What happens if you leave that out?","body":"I would suggest using a thread pool rather than manually handling threads, but alas. Do you have a hidden <code>persistence.xml</code> or <code>hibernate.properties&#47;cfg.xml</code> somewhere in your classpath as well? Could you specify the versions of Spring, Hikari and Hibernate you are using? Finally what is with the additional proxyfactorybean? What happens if you leave that out?"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1649404185,"post_id":71770174,"comment_id":126871305,"body_markdown":"I did some testing and when using the MySQL dialects with the MariaDB i quite constantly get timeouts. When using a proper MariaDB103Dialect dialect for hibernate things do succeed. So it seems to be due to the wrong dialect that things go wrong.","body":"I did some testing and when using the MySQL dialects with the MariaDB i quite constantly get timeouts. When using a proper MariaDB103Dialect dialect for hibernate things do succeed. So it seems to be due to the wrong dialect that things go wrong."},{"owner":{"account_id":483394,"reputation":8917,"user_id":898400,"accept_rate":93,"display_name":"Riccardo T."},"score":0,"creation_date":1649412808,"post_id":71770174,"comment_id":126874293,"body_markdown":"@M.Deinum unfortunately we&#39;re stuck for now on MariaDB 5.5, so I tried with `MariaDB53Dialect` which would seem to be valid for 5.3 and later 5.x releases, but I still get the same behaviour. Your findings about timeouts though seem to point in the direction of some driver misconfiguration. I wasn&#39;t able to understand what, though. In the meantime I also updated the question by including the dependencies. To answer your other question no, there&#39;s no `persistence.xml` nor `cfg.xml`.","body":"@M.Deinum unfortunately we&#39;re stuck for now on MariaDB 5.5, so I tried with <code>MariaDB53Dialect</code> which would seem to be valid for 5.3 and later 5.x releases, but I still get the same behaviour. Your findings about timeouts though seem to point in the direction of some driver misconfiguration. I wasn&#39;t able to understand what, though. In the meantime I also updated the question by including the dependencies. To answer your other question no, there&#39;s no <code>persistence.xml</code> nor <code>cfg.xml</code>."},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1649439053,"post_id":71770174,"comment_id":126884493,"body_markdown":"I suspect that something in the dialect (not the driver) is causing a deadlock on the database. Which is fixed in later dialects or MariaDB implementations. Could be a thing like not using a sequence for the primary key for instance.","body":"I suspect that something in the dialect (not the driver) is causing a deadlock on the database. Which is fixed in later dialects or MariaDB implementations. Could be a thing like not using a sequence for the primary key for instance."},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1649439681,"post_id":71770174,"comment_id":126884686,"body_markdown":"Using an id with auto generated keys (IDENTITY insteadof AUTO) makes it also work. So it appears to be an issue with using a SEQUENCE or TABLE as a primary key that makes it fail in this combination, probably due to some deadlock in the database itself. You might need to tweak some settings there or switch to an auto-increment column for the id.","body":"Using an id with auto generated keys (IDENTITY insteadof AUTO) makes it also work. So it appears to be an issue with using a SEQUENCE or TABLE as a primary key that makes it fail in this combination, probably due to some deadlock in the database itself. You might need to tweak some settings there or switch to an auto-increment column for the id."},{"owner":{"account_id":483394,"reputation":8917,"user_id":898400,"accept_rate":93,"display_name":"Riccardo T."},"score":0,"creation_date":1649681189,"post_id":71770174,"comment_id":126930385,"body_markdown":"@M.Deinum that was it, thank you so much! I had `SEQUENCE` generated fields for PKs. I tried updating the schema to use mariadb&#39;s `AUTO_INCREMENT` instead and updated the `@Entity` classes to use the `IDENTITY` strategy, and it worked. I updated the question title, tags, and infos to be more fitting and to provide also context about my entities. I&#39;ll gladly accept this as an answer, should you re-write your comment as such.","body":"@M.Deinum that was it, thank you so much! I had <code>SEQUENCE</code> generated fields for PKs. I tried updating the schema to use mariadb&#39;s <code>AUTO_INCREMENT</code> instead and updated the <code>@Entity</code> classes to use the <code>IDENTITY</code> strategy, and it worked. I updated the question title, tags, and infos to be more fitting and to provide also context about my entities. I&#39;ll gladly accept this as an answer, should you re-write your comment as such."}],"owner":{"account_id":483394,"reputation":8917,"user_id":898400,"accept_rate":93,"display_name":"Riccardo T."},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":837,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649680983,"creation_date":1649261411,"question_id":71770174,"body_markdown":"I have a Spring (core) 5.3.18 application configured with a mixed XML/annotation-driven approach.\r\nTo access the backing MariaDB, I use Hibernate core 5.6.7.Final and JPA (`javax.persistence-api:2.2`) with an HikariCP 4.0.3 connection pool.\r\nThe data source is an `HikariDataSource` with a default connection pool size of 10, and with the `leakDetectionThreshold` set to 6 seconds (transactions are really short).\r\nThe configured `JpaTransactionManager` fom spring uses as `entityManagerFactory` a `LocalContainerEntityManagerFactoryBean` that configures Hibernate via the `HibernateJpaVendorAdapter`.\r\n\r\nAt runtime, with just one thread performing DB operations everything works fine.\r\nWhen multiple threads start requiring the DB at the same time though, threads get stuck on what seems like a starvation condition, all waiting to retrieve a connection.\r\nHikariCP reports the following leak, reported 10 times for all of the connections available in the pool:\r\n\r\n```\r\njava.lang.Exception: Apparent connection leak detected\r\n        at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        ...\r\n```\r\n\r\nIn my tests, for `N` threads running apparently I needed a connection pool size of exactly `N*2` to avoid this behaviour, which led me to think that by some mistake (or expected behaviour unknown to me) the application I set up consumes two connections for every transaction, instead of just one.\r\nThis would explain why not even one request succeeds when all threads are sent requests at the same time, but it&#39;s just my guess: each of them acquires the first connection object at some point, and then when they try to acquire the second they all get stuck at the same time.\r\n\r\nI really can&#39;t figure out what&#39;s happening behind Spring&#39;s and JPA&#39;s magic though. In my understanding of the documentation, a public method of a `@Transactional` class be wrapped in a spring proxy that gets the connection just before the transaction occurs, and closes it (actually causing the connection to return to the pool instead of bein phisically closed, see also https://stackoverflow.com/questions/27486104/when-are-connections-returned-to-the-connection-pool-with-spring-jpa-hibernate) after the transactin is committed/rolled-back.\r\n\r\nSomething&#39;s amiss, though. I would really appreciate any help or hint about what to do, I&#39;ve been stuck on this for ages.\r\n\r\nBelow is the XML spring configuration. There are no additional `persistence.xml` nor `hibernate.properties/cfg.xml`.\r\n\r\n```xml\r\n&lt;bean id=&quot;dataSourceHikari&quot; class=&quot;com.zaxxer.hikari.HikariDataSource&quot; destroy-method=&quot;close&quot;&gt;\r\n    &lt;property name=&quot;driverClassName&quot; value=&quot;org.mariadb.jdbc.Driver&quot; /&gt;\r\n    &lt;property name=&quot;jdbcUrl&quot; value=&quot;${db.url}&quot; /&gt;\r\n    &lt;property name=&quot;username&quot; value=&quot;${db.user}&quot; /&gt;\r\n    &lt;property name=&quot;password&quot; value=&quot;${db.password}&quot; /&gt;\r\n    &lt;property name=&quot;dataSourceProperties&quot;&gt;\r\n        &lt;props&gt;\r\n            &lt;prop key=&quot;autoReconnect&quot;&gt;true&lt;/prop&gt;\r\n            &lt;prop key=&quot;zeroDateTimeBehavior&quot;&gt;convertToNull&lt;/prop&gt;\r\n        &lt;/props&gt;\r\n    &lt;/property&gt;\r\n    &lt;property name=&quot;validationTimeout&quot; value=&quot;3000&quot; /&gt;\r\n    &lt;property name=&quot;readOnly&quot; value=&quot;false&quot; /&gt;\r\n    &lt;property name=&quot;connectionTimeout&quot; value=&quot;60000&quot; /&gt;\r\n    &lt;property name=&quot;maxLifetime&quot; value=&quot;60000&quot; /&gt;\r\n    &lt;property name=&quot;maximumPoolSize&quot; value=&quot;${db.maxPoolSize:10}&quot; /&gt;\r\n    &lt;property name=&quot;leakDetectionThreshold&quot; value=&quot;6000&quot; /&gt;\r\n&lt;/bean&gt;\r\n\r\n\r\n&lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot; /&gt;\r\n\r\n&lt;bean id=&quot;entityManagerFactory&quot; class=&quot;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&quot;&gt;\r\n\t&lt;property name=&quot;dataSource&quot; ref=&quot;dataSourceHikari&quot; /&gt;\r\n\t&lt;property name=&quot;packagesToScan&quot; value=&quot;my.application.package&quot; /&gt;\r\n\t&lt;property name=&quot;jpaVendorAdapter&quot;&gt;\r\n\t\t&lt;bean class=&quot;org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter&quot; /&gt;\r\n\t&lt;/property&gt;\r\n\t&lt;property name=&quot;jpaProperties&quot;&gt;\r\n\t\t&lt;props&gt;\r\n\t\t\t&lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL5InnoDBDialect&lt;/prop&gt;\r\n\t\t&lt;/props&gt;\r\n\t&lt;/property&gt;\r\n&lt;/bean&gt;\r\n\r\n&lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.orm.jpa.JpaTransactionManager&quot;&gt;\r\n\t&lt;property name=&quot;entityManagerFactory&quot; ref=&quot;entityManagerFactory&quot; /&gt;\r\n&lt;/bean&gt;\r\n```\r\n\r\nMy DB layer instead looks like this below.\r\nEach application thread simply invokes `DBLayerClass#createSession(String)` on the `@Autowired DBLayerClass myDBObj` once for every incoming request.\r\n\r\n```java\r\nimport javax.persistence.EntityManager;\r\nimport org.springframework.stereotype.Component;\r\nimport org.springframework.transaction.annotation.Transactional;\r\n/* other stuff */\r\n\r\n@Component\r\n@Transactional(readOnly = false, rollbackFor = {RuntimeException.class, MyCustomExceptions.class})\r\npublic class DBLayerClass {\r\n\r\n    @PersistenceContext\r\n    private EntityManager entityManager;\r\n\r\n    public Session createSession(String sessionId) throws MyCustomExceptions {\r\n        try {\r\n            if (getSessionById(sessionId) != null)\r\n                throw new MyCustomExceptions(&quot;...&quot;);\r\n            Session session = new Session(sessionId);\r\n            entityManager.persist(session);\r\n            return session;\r\n        } catch (EntityExistsException e) {\r\n            throw new MyCustomExceptions(&quot;...&quot;, e);\r\n        } catch (PersistenceException e) {\r\n            throw new MyCustomExceptions(&quot;...&quot;, e);\r\n        }\r\n    }\r\n\r\n    private Session getSessionById(String sessionId) throws MyCustomExceptions {\r\n        try {\r\n            CriteriaBuilder cb = entityManager.getCriteriaBuilder();\r\n\r\n            CriteriaQuery&lt;Session&gt; cq = cb.createQuery(Session.class);\r\n            Root&lt;Session&gt; from = cq.from(Session.class);\r\n\r\n            cq.where(cb.equal(from.get(&quot;sessionId&quot;), sessionId));\r\n\r\n            TypedQuery&lt;Session&gt; q = entityManager.createQuery(cq);\r\n\r\n            return q.getSingleResult();\r\n        } catch (NoResultException e) {\r\n            return null;\r\n        } catch (PersistenceException e) {\r\n            throw new MyCustomExceptions(&quot;...&quot;, e);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThe fields on my `@Entity` classes use `@Id @GeneratedValue(strategy = GenerationType.SEQUENCE)` annotations for `Long` primary keys, and other regular annotations such as `@Column` or `@Temporal`. Most fancy ones are collections with `@OneToMany`.\r\n\r\nI re-wrote a simpler and basic test scenario, made to start a bunch of worker threads which keep sending db requests in a loop. A handful of `createSession(...)` might work at first, but the test starves soon enough and the above leaks are reported by HikariCP.\r\n\r\n```java\r\n@RunWith(SpringJUnit4ClassRunner.class)\r\n@ContextConfiguration(locations = { &quot;classpath:/META-INF/spring/dao-test.xml&quot; })\r\npublic class MyTestClass {\r\n\r\n    @Autowired\r\n    private DBLayerClass db;\r\n\r\n    @Test\r\n    public void testConcurrentUsage() throws Exception {\r\n        Callable&lt;Exception&gt; c = new Callable&lt;Exception&gt;() {\r\n            private AtomicLong nextId = new AtomicLong(0);\r\n\r\n            @Override\r\n            public Exception call() throws Exception {\r\n                try {\r\n                    long id;\r\n                    while ((id = nextId.incrementAndGet()) &lt; 100L) {\r\n                        db.createSession(String.format(&quot;session-%d&quot;, id));\r\n                    }\r\n                    return null;\r\n                } catch (Exception e) {\r\n                    return e;\r\n                }\r\n            }\r\n        };\r\n\r\n        final int nThreads = 30;\r\n        Thread[] threads = new Thread[nThreads];\r\n        ArrayList&lt;Future&lt;Exception&gt;&gt; threadResults =  new ArrayList&lt;&gt;(nThreads);\r\n        for (int i = 0; i &lt; threads.length; i++) {\r\n            FutureTask&lt;Exception&gt; threadResult = new FutureTask&lt;&gt;(c);\r\n            threadResults.add(threadResult);\r\n            threads[i] = new Thread(threadResult);\r\n            threads[i].start();\r\n        }\r\n\r\n        for (Future&lt;Exception&gt; result : threadResults) {\r\n            Exception e = result.get();\r\n            if (e != null) {\r\n                for (Thread thread : threads) {\r\n                    thread.stop();\r\n                }\r\n                throw e;\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\nFinally, these below are the dependencies:\r\n```xml\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.mariadb.jdbc&lt;/groupId&gt;\r\n  &lt;artifactId&gt;mariadb-java-client&lt;/artifactId&gt;\r\n  &lt;version&gt;3.0.4&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n  &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n  &lt;version&gt;5.3.18&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n  &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n  &lt;version&gt;5.3.18&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n  &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\r\n  &lt;version&gt;5.3.18&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n  &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\r\n  &lt;version&gt;5.3.18&lt;/version&gt;\r\n  &lt;scope&gt;test&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n  &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\r\n  &lt;version&gt;5.3.18&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n  &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\r\n  &lt;version&gt;5.3.18&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n  &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n  &lt;version&gt;5.6.7.Final&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\r\n  &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\r\n  &lt;version&gt;2.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\r\n  &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n  &lt;version&gt;6.0.23.Final&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;com.zaxxer&lt;/groupId&gt;\r\n  &lt;artifactId&gt;HikariCP&lt;/artifactId&gt;\r\n  &lt;version&gt;4.0.3&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```","title":"Spring JPA with Hibernate transactions deadlock","body":"<p>I have a Spring (core) 5.3.18 application configured with a mixed XML/annotation-driven approach.\nTo access the backing MariaDB, I use Hibernate core 5.6.7.Final and JPA (<code>javax.persistence-api:2.2</code>) with an HikariCP 4.0.3 connection pool.\nThe data source is an <code>HikariDataSource</code> with a default connection pool size of 10, and with the <code>leakDetectionThreshold</code> set to 6 seconds (transactions are really short).\nThe configured <code>JpaTransactionManager</code> fom spring uses as <code>entityManagerFactory</code> a <code>LocalContainerEntityManagerFactoryBean</code> that configures Hibernate via the <code>HibernateJpaVendorAdapter</code>.</p>\n<p>At runtime, with just one thread performing DB operations everything works fine.\nWhen multiple threads start requiring the DB at the same time though, threads get stuck on what seems like a starvation condition, all waiting to retrieve a connection.\nHikariCP reports the following leak, reported 10 times for all of the connections available in the pool:</p>\n<pre><code>java.lang.Exception: Apparent connection leak detected\n        at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        ...\n</code></pre>\n<p>In my tests, for <code>N</code> threads running apparently I needed a connection pool size of exactly <code>N*2</code> to avoid this behaviour, which led me to think that by some mistake (or expected behaviour unknown to me) the application I set up consumes two connections for every transaction, instead of just one.\nThis would explain why not even one request succeeds when all threads are sent requests at the same time, but it's just my guess: each of them acquires the first connection object at some point, and then when they try to acquire the second they all get stuck at the same time.</p>\n<p>I really can't figure out what's happening behind Spring's and JPA's magic though. In my understanding of the documentation, a public method of a <code>@Transactional</code> class be wrapped in a spring proxy that gets the connection just before the transaction occurs, and closes it (actually causing the connection to return to the pool instead of bein phisically closed, see also <a href=\"https://stackoverflow.com/questions/27486104/when-are-connections-returned-to-the-connection-pool-with-spring-jpa-hibernate\">When are connections returned to the connection pool with Spring JPA (Hibernate) Entity Manager?</a>) after the transactin is committed/rolled-back.</p>\n<p>Something's amiss, though. I would really appreciate any help or hint about what to do, I've been stuck on this for ages.</p>\n<p>Below is the XML spring configuration. There are no additional <code>persistence.xml</code> nor <code>hibernate.properties/cfg.xml</code>.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;bean id=&quot;dataSourceHikari&quot; class=&quot;com.zaxxer.hikari.HikariDataSource&quot; destroy-method=&quot;close&quot;&gt;\n    &lt;property name=&quot;driverClassName&quot; value=&quot;org.mariadb.jdbc.Driver&quot; /&gt;\n    &lt;property name=&quot;jdbcUrl&quot; value=&quot;${db.url}&quot; /&gt;\n    &lt;property name=&quot;username&quot; value=&quot;${db.user}&quot; /&gt;\n    &lt;property name=&quot;password&quot; value=&quot;${db.password}&quot; /&gt;\n    &lt;property name=&quot;dataSourceProperties&quot;&gt;\n        &lt;props&gt;\n            &lt;prop key=&quot;autoReconnect&quot;&gt;true&lt;/prop&gt;\n            &lt;prop key=&quot;zeroDateTimeBehavior&quot;&gt;convertToNull&lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n    &lt;property name=&quot;validationTimeout&quot; value=&quot;3000&quot; /&gt;\n    &lt;property name=&quot;readOnly&quot; value=&quot;false&quot; /&gt;\n    &lt;property name=&quot;connectionTimeout&quot; value=&quot;60000&quot; /&gt;\n    &lt;property name=&quot;maxLifetime&quot; value=&quot;60000&quot; /&gt;\n    &lt;property name=&quot;maximumPoolSize&quot; value=&quot;${db.maxPoolSize:10}&quot; /&gt;\n    &lt;property name=&quot;leakDetectionThreshold&quot; value=&quot;6000&quot; /&gt;\n&lt;/bean&gt;\n\n\n&lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot; /&gt;\n\n&lt;bean id=&quot;entityManagerFactory&quot; class=&quot;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&quot;&gt;\n    &lt;property name=&quot;dataSource&quot; ref=&quot;dataSourceHikari&quot; /&gt;\n    &lt;property name=&quot;packagesToScan&quot; value=&quot;my.application.package&quot; /&gt;\n    &lt;property name=&quot;jpaVendorAdapter&quot;&gt;\n        &lt;bean class=&quot;org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter&quot; /&gt;\n    &lt;/property&gt;\n    &lt;property name=&quot;jpaProperties&quot;&gt;\n        &lt;props&gt;\n            &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL5InnoDBDialect&lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.orm.jpa.JpaTransactionManager&quot;&gt;\n    &lt;property name=&quot;entityManagerFactory&quot; ref=&quot;entityManagerFactory&quot; /&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>My DB layer instead looks like this below.\nEach application thread simply invokes <code>DBLayerClass#createSession(String)</code> on the <code>@Autowired DBLayerClass myDBObj</code> once for every incoming request.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javax.persistence.EntityManager;\nimport org.springframework.stereotype.Component;\nimport org.springframework.transaction.annotation.Transactional;\n/* other stuff */\n\n@Component\n@Transactional(readOnly = false, rollbackFor = {RuntimeException.class, MyCustomExceptions.class})\npublic class DBLayerClass {\n\n    @PersistenceContext\n    private EntityManager entityManager;\n\n    public Session createSession(String sessionId) throws MyCustomExceptions {\n        try {\n            if (getSessionById(sessionId) != null)\n                throw new MyCustomExceptions(&quot;...&quot;);\n            Session session = new Session(sessionId);\n            entityManager.persist(session);\n            return session;\n        } catch (EntityExistsException e) {\n            throw new MyCustomExceptions(&quot;...&quot;, e);\n        } catch (PersistenceException e) {\n            throw new MyCustomExceptions(&quot;...&quot;, e);\n        }\n    }\n\n    private Session getSessionById(String sessionId) throws MyCustomExceptions {\n        try {\n            CriteriaBuilder cb = entityManager.getCriteriaBuilder();\n\n            CriteriaQuery&lt;Session&gt; cq = cb.createQuery(Session.class);\n            Root&lt;Session&gt; from = cq.from(Session.class);\n\n            cq.where(cb.equal(from.get(&quot;sessionId&quot;), sessionId));\n\n            TypedQuery&lt;Session&gt; q = entityManager.createQuery(cq);\n\n            return q.getSingleResult();\n        } catch (NoResultException e) {\n            return null;\n        } catch (PersistenceException e) {\n            throw new MyCustomExceptions(&quot;...&quot;, e);\n        }\n    }\n}\n</code></pre>\n<p>The fields on my <code>@Entity</code> classes use <code>@Id @GeneratedValue(strategy = GenerationType.SEQUENCE)</code> annotations for <code>Long</code> primary keys, and other regular annotations such as <code>@Column</code> or <code>@Temporal</code>. Most fancy ones are collections with <code>@OneToMany</code>.</p>\n<p>I re-wrote a simpler and basic test scenario, made to start a bunch of worker threads which keep sending db requests in a loop. A handful of <code>createSession(...)</code> might work at first, but the test starves soon enough and the above leaks are reported by HikariCP.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations = { &quot;classpath:/META-INF/spring/dao-test.xml&quot; })\npublic class MyTestClass {\n\n    @Autowired\n    private DBLayerClass db;\n\n    @Test\n    public void testConcurrentUsage() throws Exception {\n        Callable&lt;Exception&gt; c = new Callable&lt;Exception&gt;() {\n            private AtomicLong nextId = new AtomicLong(0);\n\n            @Override\n            public Exception call() throws Exception {\n                try {\n                    long id;\n                    while ((id = nextId.incrementAndGet()) &lt; 100L) {\n                        db.createSession(String.format(&quot;session-%d&quot;, id));\n                    }\n                    return null;\n                } catch (Exception e) {\n                    return e;\n                }\n            }\n        };\n\n        final int nThreads = 30;\n        Thread[] threads = new Thread[nThreads];\n        ArrayList&lt;Future&lt;Exception&gt;&gt; threadResults =  new ArrayList&lt;&gt;(nThreads);\n        for (int i = 0; i &lt; threads.length; i++) {\n            FutureTask&lt;Exception&gt; threadResult = new FutureTask&lt;&gt;(c);\n            threadResults.add(threadResult);\n            threads[i] = new Thread(threadResult);\n            threads[i].start();\n        }\n\n        for (Future&lt;Exception&gt; result : threadResults) {\n            Exception e = result.get();\n            if (e != null) {\n                for (Thread thread : threads) {\n                    thread.stop();\n                }\n                throw e;\n            }\n        }\n    }\n</code></pre>\n<p>Finally, these below are the dependencies:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.mariadb.jdbc&lt;/groupId&gt;\n  &lt;artifactId&gt;mariadb-java-client&lt;/artifactId&gt;\n  &lt;version&gt;3.0.4&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n  &lt;version&gt;5.3.18&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n  &lt;version&gt;5.3.18&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n  &lt;version&gt;5.3.18&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\n  &lt;version&gt;5.3.18&lt;/version&gt;\n  &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\n  &lt;version&gt;5.3.18&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n  &lt;version&gt;5.3.18&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n  &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n  &lt;version&gt;5.6.7.Final&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\n  &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\n  &lt;version&gt;2.2&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\n  &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n  &lt;version&gt;6.0.23.Final&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;com.zaxxer&lt;/groupId&gt;\n  &lt;artifactId&gt;HikariCP&lt;/artifactId&gt;\n  &lt;version&gt;4.0.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","javafx","fxml"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1649616854,"post_id":71819405,"comment_id":126915392,"body_markdown":"Why are you creating a new button? It should be injected by the `FXMLLoader`. Remove `button1 = new Button(‚Ä¶)`. Don‚Äôt call the `static` method `FXMLLoader.load(URL)`; instead set the location on the `FXMLLoader` instance and call `load()` (with no arguments).","body":"Why are you creating a new button? It should be injected by the <code>FXMLLoader</code>. Remove <code>button1 = new Button(‚Ä¶)</code>. Don‚Äôt call the <code>static</code> method <code>FXMLLoader.load(URL)</code>; instead set the location on the <code>FXMLLoader</code> instance and call <code>load()</code> (with no arguments)."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1649637741,"post_id":71819405,"comment_id":126919145,"body_markdown":"When you create your ClassLoader for loading the plugins, are you specifying a parent ClassLoader?","body":"When you create your ClassLoader for loading the plugins, are you specifying a parent ClassLoader?"}],"answers":[{"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649680874,"creation_date":1649680874,"answer_id":71828032,"question_id":71819405,"body_markdown":"&gt; Because both these classes and the controllers are loaded at runtime using a custom URLClassLoader I am unable to just specify a FXML controller inside my FXML files. If I try to, I get an error saying that the class I am using for a controller could not be found. \r\n\r\nNote that you can [set the Class Loader to be used by the `FXMLLoader`](https://openjfx.io/javadoc/17/javafx.fxml/javafx/fxml/FXMLLoader.html#setClassLoader(java.lang.ClassLoader)).\r\n\r\nThe solution you attempt in which you set the controller manually has a number of errors. Most importantly:\r\n\r\n            String classPath = &quot;com.example.plugindevelopment.Plugin3Controller&quot;;\r\n            mainTabLoader.setController(Class.forName(classPath, true, loader).getConstructor().newInstance());\r\n           \r\n            getMainTab().setContent(mainTabLoader.load(testURL));\r\n\r\n\r\nHere `mainTabLoader.load(testURL)` invokes the *static* method [`FXMLLoader.load(URL)`](https://openjfx.io/javadoc/17/javafx.fxml/javafx/fxml/FXMLLoader.html#load(java.net.URL)). Since this is a static method, it doesn&#39;t reference the `FXMLLoader` instance `mainTabLoader` at all, and in particular won&#39;t be aware of the controller instance. \r\n\r\nYou should use\r\n\r\n            String classPath = &quot;com.example.plugindevelopment.Plugin3Controller&quot;;\r\n            mainTabLoader.setController(Class.forName(classPath, true, loader).getConstructor().newInstance());\r\n            mainTabLoader.setLocation(testURL);\r\n           \r\n            getMainTab().setContent(mainTabLoader.load());\r\n\r\nNote the call to `load()` has no arguments, invoking the *instance* method [`FXMLLoader.load()`](https://openjfx.io/javadoc/17/javafx.fxml/javafx/fxml/FXMLLoader.html#load()).\r\n\r\nOnce the `FXMLLoader` is properly referencing a controller instance, it will invoke `initialize()` automatically. You should remove the line\r\n\r\n            mainTabLoader.getController().getClass().getDeclaredMethod(&quot;initialize&quot;).invoke(mainTabLoader.getController());\r\n\r\n\r\nYou also have an error in your controller implementation (I&#39;m guessing this may have been a desperate attempt to fix the problems caused by the error above).\r\n\r\nIt is *always* a mistake to instantiate objects and assign them to `@FXML`-annotated fields, as you do with \r\n\r\n    button1 = new Button(&quot;Hello&quot;);\r\n\r\nRemove this line. It causes the event handler to be set on a button that is not displayed in the UI, instead of on the button that is declared in the FXML file.\r\n\r\n\r\nIn all you should have\r\n\r\n    public class Plugin3Controller\r\n    {\r\n        @FXML\r\n        VBox root;\r\n        @FXML\r\n        Label label;\r\n        @FXML\r\n        Slider slider;\r\n        @FXML\r\n        Button button1;\r\n    \r\n        protected void onButtonClick(){\r\n            System.out.println(&quot;Hello&quot;);\r\n        }\r\n    \r\n        @FXML\r\n        public void initialize(){\r\n            System.out.println(&quot;Initializing Plugin3Controller&quot;);\r\n            button1.setOnAction(event -&gt; onButtonClick());\r\n        }\r\n    }\r\n\r\nand\r\n\r\n    public class Plugin3 extends Plugin {\r\n        FXMLLoader mainTabLoader;\r\n        URL testURL;\r\n    \r\n        public Plugin3(){\r\n            //Calls Plugin Constructor to initialize mainTab and settingsTab, and set the UI names of the tabs\r\n            super(&quot;Plugin3&quot;);\r\n    \r\n            //Try creating FXMLLoader to setup the UI of the plugin\r\n    \r\n                mainTabLoader = new FXMLLoader();\r\n    \r\n                //mainTabLoader.setController(this);\r\n    \r\n                // This line is patently nonsense: remove it:\r\n                // Plugin3 thisObj = mainTabLoader.getController();\r\n                testURL = getClass().getResource(&quot;testFXML.fxml&quot;);\r\n                //Load the FXML file\r\n    \r\n        }\r\n    \r\n        @Override\r\n        public void save() {\r\n    \r\n        }\r\n    \r\n        //Attempts to set the controller of the FXMLLoader mainTabLoader and call the initialize method of that controller\r\n        @Override\r\n        public void initController() {\r\n            try {\r\n                String classPath = &quot;com.example.plugindevelopment.Plugin3Controller&quot;;\r\n                mainTabLoader.setController(Class.forName(classPath, true, loader).getConstructor().newInstance());\r\n                mailTabLoader.setLocation(testURL);\r\n               \r\n                getMainTab().setContent(mainTabLoader.load());\r\n                \r\n            }catch(Exception e){\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }","title":"Loading a FXML Controller at Runtime from a JAR file","body":"<blockquote>\n<p>Because both these classes and the controllers are loaded at runtime using a custom URLClassLoader I am unable to just specify a FXML controller inside my FXML files. If I try to, I get an error saying that the class I am using for a controller could not be found.</p>\n</blockquote>\n<p>Note that you can <a href=\"https://openjfx.io/javadoc/17/javafx.fxml/javafx/fxml/FXMLLoader.html#setClassLoader(java.lang.ClassLoader)\" rel=\"nofollow noreferrer\">set the Class Loader to be used by the <code>FXMLLoader</code></a>.</p>\n<p>The solution you attempt in which you set the controller manually has a number of errors. Most importantly:</p>\n<pre><code>        String classPath = &quot;com.example.plugindevelopment.Plugin3Controller&quot;;\n        mainTabLoader.setController(Class.forName(classPath, true, loader).getConstructor().newInstance());\n       \n        getMainTab().setContent(mainTabLoader.load(testURL));\n</code></pre>\n<p>Here <code>mainTabLoader.load(testURL)</code> invokes the <em>static</em> method <a href=\"https://openjfx.io/javadoc/17/javafx.fxml/javafx/fxml/FXMLLoader.html#load(java.net.URL)\" rel=\"nofollow noreferrer\"><code>FXMLLoader.load(URL)</code></a>. Since this is a static method, it doesn't reference the <code>FXMLLoader</code> instance <code>mainTabLoader</code> at all, and in particular won't be aware of the controller instance.</p>\n<p>You should use</p>\n<pre><code>        String classPath = &quot;com.example.plugindevelopment.Plugin3Controller&quot;;\n        mainTabLoader.setController(Class.forName(classPath, true, loader).getConstructor().newInstance());\n        mainTabLoader.setLocation(testURL);\n       \n        getMainTab().setContent(mainTabLoader.load());\n</code></pre>\n<p>Note the call to <code>load()</code> has no arguments, invoking the <em>instance</em> method <a href=\"https://openjfx.io/javadoc/17/javafx.fxml/javafx/fxml/FXMLLoader.html#load()\" rel=\"nofollow noreferrer\"><code>FXMLLoader.load()</code></a>.</p>\n<p>Once the <code>FXMLLoader</code> is properly referencing a controller instance, it will invoke <code>initialize()</code> automatically. You should remove the line</p>\n<pre><code>        mainTabLoader.getController().getClass().getDeclaredMethod(&quot;initialize&quot;).invoke(mainTabLoader.getController());\n</code></pre>\n<p>You also have an error in your controller implementation (I'm guessing this may have been a desperate attempt to fix the problems caused by the error above).</p>\n<p>It is <em>always</em> a mistake to instantiate objects and assign them to <code>@FXML</code>-annotated fields, as you do with</p>\n<pre><code>button1 = new Button(&quot;Hello&quot;);\n</code></pre>\n<p>Remove this line. It causes the event handler to be set on a button that is not displayed in the UI, instead of on the button that is declared in the FXML file.</p>\n<p>In all you should have</p>\n<pre><code>public class Plugin3Controller\n{\n    @FXML\n    VBox root;\n    @FXML\n    Label label;\n    @FXML\n    Slider slider;\n    @FXML\n    Button button1;\n\n    protected void onButtonClick(){\n        System.out.println(&quot;Hello&quot;);\n    }\n\n    @FXML\n    public void initialize(){\n        System.out.println(&quot;Initializing Plugin3Controller&quot;);\n        button1.setOnAction(event -&gt; onButtonClick());\n    }\n}\n</code></pre>\n<p>and</p>\n<pre><code>public class Plugin3 extends Plugin {\n    FXMLLoader mainTabLoader;\n    URL testURL;\n\n    public Plugin3(){\n        //Calls Plugin Constructor to initialize mainTab and settingsTab, and set the UI names of the tabs\n        super(&quot;Plugin3&quot;);\n\n        //Try creating FXMLLoader to setup the UI of the plugin\n\n            mainTabLoader = new FXMLLoader();\n\n            //mainTabLoader.setController(this);\n\n            // This line is patently nonsense: remove it:\n            // Plugin3 thisObj = mainTabLoader.getController();\n            testURL = getClass().getResource(&quot;testFXML.fxml&quot;);\n            //Load the FXML file\n\n    }\n\n    @Override\n    public void save() {\n\n    }\n\n    //Attempts to set the controller of the FXMLLoader mainTabLoader and call the initialize method of that controller\n    @Override\n    public void initController() {\n        try {\n            String classPath = &quot;com.example.plugindevelopment.Plugin3Controller&quot;;\n            mainTabLoader.setController(Class.forName(classPath, true, loader).getConstructor().newInstance());\n            mailTabLoader.setLocation(testURL);\n           \n            getMainTab().setContent(mainTabLoader.load());\n            \n        }catch(Exception e){\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":24281946,"reputation":3,"user_id":18228324,"display_name":"Matt"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":299,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71828032,"answer_count":1,"score":0,"last_activity_date":1649680874,"creation_date":1649615058,"question_id":71819405,"body_markdown":"I am working on coding a modular soundboard in Java and JavaFX using FXML. One of key aspects is the ability to load an arbitrary class that implements the Plugin abstract class at runtime.\r\nThe plugin abstract class looks like this:\r\n\r\n    import javafx.scene.control.Tab;\r\n    import java.io.File;\r\n    import java.io.FileReader;\r\n    import java.net.URLClassLoader;\r\n    import java.util.Properties;\r\n\r\n    public abstract class Plugin {\r\n        protected Tab mainTab;\r\n        protected Tab settingsTab;\r\n        protected Properties propertyFile = new Properties();\r\n        protected File fileName;\r\n        protected URLClassLoader loader;\r\n\r\n        public Plugin(){\r\n            mainTab = new Tab();\r\n        }\r\n\r\n        public Plugin(String tabName){\r\n            mainTab = new Tab(tabName);\r\n            settingsTab = new Tab(tabName);\r\n        }\r\n        public abstract void save();\r\n\r\n        public Tab getMainTab(){\r\n            return mainTab;\r\n        }\r\n        public Tab getSettingsTab(){\r\n            return settingsTab;\r\n        }\r\n        public void initPropertyFile(String filename){\r\n            try{\r\n                File file = new File(System.getenv(&quot;APPDATA&quot;)+&quot;\\\\Testing\\\\&quot;+filename+&quot;.properties&quot;);\r\n                if(file.exists())\r\n                    propertyFile.load(new FileReader(file));\r\n                else{\r\n                    file.createNewFile();\r\n                    propertyFile.load(new FileReader(file));\r\n                }\r\n            }catch(Exception e){\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\n        public void setClassLoader(URLClassLoader loader){\r\n             this.loader = loader;\r\n        }\r\n        public abstract void initController();\r\n\r\n        public Properties getPropertyFile(){\r\n            return propertyFile;\r\n        }\r\n\r\n    }\r\nI use a URLClassLoader to load any classes found in a specified JAR file, and then I instantiate any instances of Plugin and collect them inside a list. Where I am having an issue is creating an FXML controller to use for these classes that I instantiate at runtime. Because both these classes and the controllers are loaded at runtime using a custom URLClassLoader I am unable to just specify a FXML controller inside my FXML files. If I try to, I get an error saying that the class I am using for a controller could not be found. If I don&#39;t specify a controller inside the FXML file, it is able to load the UI components, but I can&#39;t specify any actions inside it. I can set a controller using the FXMLLoader.setController() method, but when I load a controller like this though, none of the buttons I am using have any actions. I&#39;ve tried using the initialize() method with FXML annotations, but this method isn&#39;t automatically called by the FXMLLoader. If I call initialize myself then it seems like the FXML hasn&#39;t been injected yet, but the UI components specified by the FXML file appear with the formatting specified by the FXML file on my screen. \r\n```\r\nimport java.net.URL;\r\n\r\npublic class Plugin3 extends Plugin {\r\n    FXMLLoader mainTabLoader;\r\n    URL testURL;\r\n\r\n\r\n    public Plugin3(){\r\n        //Calls Plugin Constructor to initialize mainTab and settingsTab, and set the UI names of the tabs\r\n        super(&quot;Plugin3&quot;);\r\n\r\n        //Try creating FXMLLoader to setup the UI of the plugin\r\n        try {\r\n            mainTabLoader = new FXMLLoader();\r\n\r\n            //mainTabLoader.setController(this);\r\n            Plugin3 thisObj = mainTabLoader.getController();\r\n            testURL = getClass().getResource(&quot;testFXML.fxml&quot;);\r\n            //Load the FXML file\r\n\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n    }\r\n\r\n    @Override\r\n    public void save() {\r\n\r\n    }\r\n\r\n    //Attempts to set the controller of the FXMLLoader mainTabLoader and call the initialize method of that controller\r\n    @Override\r\n    public void initController() {\r\n        try {\r\n            String classPath = &quot;com.example.plugindevelopment.Plugin3Controller&quot;;\r\n            mainTabLoader.setController(Class.forName(classPath, true, loader).getConstructor().newInstance());\r\n           \r\n            getMainTab().setContent(mainTabLoader.load(testURL));\r\n            mainTabLoader.getController().getClass().getDeclaredMethod(&quot;initialize&quot;).invoke(mainTabLoader.getController());\r\n        }catch(Exception e){\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\nThis is the controller:\r\n```\r\nimport javafx.fxml.FXML;\r\nimport javafx.scene.control.Button;\r\nimport javafx.scene.control.Label;\r\nimport javafx.scene.control.Slider;\r\nimport javafx.scene.layout.VBox;\r\n\r\npublic class Plugin3Controller\r\n{\r\n    @FXML\r\n    VBox root;\r\n    @FXML\r\n    Label label;\r\n    @FXML\r\n    Slider slider;\r\n    @FXML\r\n    Button button1;\r\n\r\n    protected void onButtonClick(){\r\n        System.out.println(&quot;Hello&quot;);\r\n    }\r\n\r\n    @FXML\r\n    public void initialize(){\r\n        System.out.println(&quot;Initializing Plugin3Controller&quot;);\r\n        button1 = new Button(&quot;Hello&quot;);\r\n        button1.setOnAction(event -&gt; onButtonClick());\r\n    }\r\n}\r\n```\r\nand this is the FXML file:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;?import javafx.geometry.*?&gt;\r\n&lt;?import javafx.scene.control.*?&gt;\r\n&lt;?import javafx.scene.layout.*?&gt;\r\n\r\n&lt;AnchorPane prefHeight=&quot;400.0&quot; prefWidth=&quot;600.0&quot; xmlns=&quot;http://javafx.com/javafx/16&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot;&gt;\r\n   &lt;children&gt;\r\n      &lt;VBox fx:id=&quot;root&quot; prefHeight=&quot;200.0&quot; prefWidth=&quot;100.0&quot; AnchorPane.bottomAnchor=&quot;0.0&quot; AnchorPane.leftAnchor=&quot;0.0&quot; AnchorPane.rightAnchor=&quot;0.0&quot; AnchorPane.topAnchor=&quot;0.0&quot;&gt;\r\n         &lt;children&gt;\r\n            &lt;Label fx:id=&quot;label&quot; prefHeight=&quot;137.2&quot; text=&quot;text&quot; /&gt;\r\n            &lt;Slider fx:id=&quot;slider&quot;&gt;\r\n               &lt;VBox.margin&gt;\r\n                  &lt;Insets top=&quot;100.0&quot; /&gt;\r\n               &lt;/VBox.margin&gt;\r\n               &lt;padding&gt;\r\n                  &lt;Insets top=&quot;50.0&quot; /&gt;\r\n               &lt;/padding&gt;&lt;/Slider&gt;\r\n            &lt;Button fx:id=&quot;button1&quot; mnemonicParsing=&quot;false&quot; text=&quot;Click Me&quot; /&gt;\r\n         &lt;/children&gt;&lt;/VBox&gt;\r\n   &lt;/children&gt;\r\n&lt;/AnchorPane&gt;\r\n```\r\nI would appreciate any insight anyone can provide, thank you.","title":"Loading a FXML Controller at Runtime from a JAR file","body":"<p>I am working on coding a modular soundboard in Java and JavaFX using FXML. One of key aspects is the ability to load an arbitrary class that implements the Plugin abstract class at runtime.\nThe plugin abstract class looks like this:</p>\n<pre><code>import javafx.scene.control.Tab;\nimport java.io.File;\nimport java.io.FileReader;\nimport java.net.URLClassLoader;\nimport java.util.Properties;\n\npublic abstract class Plugin {\n    protected Tab mainTab;\n    protected Tab settingsTab;\n    protected Properties propertyFile = new Properties();\n    protected File fileName;\n    protected URLClassLoader loader;\n\n    public Plugin(){\n        mainTab = new Tab();\n    }\n\n    public Plugin(String tabName){\n        mainTab = new Tab(tabName);\n        settingsTab = new Tab(tabName);\n    }\n    public abstract void save();\n\n    public Tab getMainTab(){\n        return mainTab;\n    }\n    public Tab getSettingsTab(){\n        return settingsTab;\n    }\n    public void initPropertyFile(String filename){\n        try{\n            File file = new File(System.getenv(&quot;APPDATA&quot;)+&quot;\\\\Testing\\\\&quot;+filename+&quot;.properties&quot;);\n            if(file.exists())\n                propertyFile.load(new FileReader(file));\n            else{\n                file.createNewFile();\n                propertyFile.load(new FileReader(file));\n            }\n        }catch(Exception e){\n            e.printStackTrace();\n        }\n    }\n\n    public void setClassLoader(URLClassLoader loader){\n         this.loader = loader;\n    }\n    public abstract void initController();\n\n    public Properties getPropertyFile(){\n        return propertyFile;\n    }\n\n}\n</code></pre>\n<p>I use a URLClassLoader to load any classes found in a specified JAR file, and then I instantiate any instances of Plugin and collect them inside a list. Where I am having an issue is creating an FXML controller to use for these classes that I instantiate at runtime. Because both these classes and the controllers are loaded at runtime using a custom URLClassLoader I am unable to just specify a FXML controller inside my FXML files. If I try to, I get an error saying that the class I am using for a controller could not be found. If I don't specify a controller inside the FXML file, it is able to load the UI components, but I can't specify any actions inside it. I can set a controller using the FXMLLoader.setController() method, but when I load a controller like this though, none of the buttons I am using have any actions. I've tried using the initialize() method with FXML annotations, but this method isn't automatically called by the FXMLLoader. If I call initialize myself then it seems like the FXML hasn't been injected yet, but the UI components specified by the FXML file appear with the formatting specified by the FXML file on my screen.</p>\n<pre><code>import java.net.URL;\n\npublic class Plugin3 extends Plugin {\n    FXMLLoader mainTabLoader;\n    URL testURL;\n\n\n    public Plugin3(){\n        //Calls Plugin Constructor to initialize mainTab and settingsTab, and set the UI names of the tabs\n        super(&quot;Plugin3&quot;);\n\n        //Try creating FXMLLoader to setup the UI of the plugin\n        try {\n            mainTabLoader = new FXMLLoader();\n\n            //mainTabLoader.setController(this);\n            Plugin3 thisObj = mainTabLoader.getController();\n            testURL = getClass().getResource(&quot;testFXML.fxml&quot;);\n            //Load the FXML file\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    @Override\n    public void save() {\n\n    }\n\n    //Attempts to set the controller of the FXMLLoader mainTabLoader and call the initialize method of that controller\n    @Override\n    public void initController() {\n        try {\n            String classPath = &quot;com.example.plugindevelopment.Plugin3Controller&quot;;\n            mainTabLoader.setController(Class.forName(classPath, true, loader).getConstructor().newInstance());\n           \n            getMainTab().setContent(mainTabLoader.load(testURL));\n            mainTabLoader.getController().getClass().getDeclaredMethod(&quot;initialize&quot;).invoke(mainTabLoader.getController());\n        }catch(Exception e){\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>This is the controller:</p>\n<pre><code>import javafx.fxml.FXML;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.Label;\nimport javafx.scene.control.Slider;\nimport javafx.scene.layout.VBox;\n\npublic class Plugin3Controller\n{\n    @FXML\n    VBox root;\n    @FXML\n    Label label;\n    @FXML\n    Slider slider;\n    @FXML\n    Button button1;\n\n    protected void onButtonClick(){\n        System.out.println(&quot;Hello&quot;);\n    }\n\n    @FXML\n    public void initialize(){\n        System.out.println(&quot;Initializing Plugin3Controller&quot;);\n        button1 = new Button(&quot;Hello&quot;);\n        button1.setOnAction(event -&gt; onButtonClick());\n    }\n}\n</code></pre>\n<p>and this is the FXML file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;?import javafx.geometry.*?&gt;\n&lt;?import javafx.scene.control.*?&gt;\n&lt;?import javafx.scene.layout.*?&gt;\n\n&lt;AnchorPane prefHeight=&quot;400.0&quot; prefWidth=&quot;600.0&quot; xmlns=&quot;http://javafx.com/javafx/16&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot;&gt;\n   &lt;children&gt;\n      &lt;VBox fx:id=&quot;root&quot; prefHeight=&quot;200.0&quot; prefWidth=&quot;100.0&quot; AnchorPane.bottomAnchor=&quot;0.0&quot; AnchorPane.leftAnchor=&quot;0.0&quot; AnchorPane.rightAnchor=&quot;0.0&quot; AnchorPane.topAnchor=&quot;0.0&quot;&gt;\n         &lt;children&gt;\n            &lt;Label fx:id=&quot;label&quot; prefHeight=&quot;137.2&quot; text=&quot;text&quot; /&gt;\n            &lt;Slider fx:id=&quot;slider&quot;&gt;\n               &lt;VBox.margin&gt;\n                  &lt;Insets top=&quot;100.0&quot; /&gt;\n               &lt;/VBox.margin&gt;\n               &lt;padding&gt;\n                  &lt;Insets top=&quot;50.0&quot; /&gt;\n               &lt;/padding&gt;&lt;/Slider&gt;\n            &lt;Button fx:id=&quot;button1&quot; mnemonicParsing=&quot;false&quot; text=&quot;Click Me&quot; /&gt;\n         &lt;/children&gt;&lt;/VBox&gt;\n   &lt;/children&gt;\n&lt;/AnchorPane&gt;\n</code></pre>\n<p>I would appreciate any insight anyone can provide, thank you.</p>\n"},{"tags":["python","java","jpype"],"comments":[{"owner":{"account_id":22880973,"reputation":698,"user_id":17022570,"display_name":"Arsh Coder"},"score":0,"creation_date":1649681327,"post_id":71827937,"comment_id":126930448,"body_markdown":"Instead of JPype use GraalVm :- https://www.graalvm.org/python/","body":"Instead of JPype use GraalVm :- <a href=\"https://www.graalvm.org/python/\" rel=\"nofollow noreferrer\">graalvm.org/python</a>"},{"owner":{"account_id":18980983,"reputation":41,"user_id":13852383,"display_name":"pikcahu420"},"score":0,"creation_date":1649681791,"post_id":71827937,"comment_id":126930665,"body_markdown":"do you have tutorial or example how to write the same logic using GraalVm","body":"do you have tutorial or example how to write the same logic using GraalVm"},{"owner":{"account_id":22880973,"reputation":698,"user_id":17022570,"display_name":"Arsh Coder"},"score":0,"creation_date":1649770795,"post_id":71827937,"comment_id":126956511,"body_markdown":"See https://www.graalvm.org/22.0/reference-manual/python/","body":"See <a href=\"https://www.graalvm.org/22.0/reference-manual/python/\" rel=\"nofollow noreferrer\">graalvm.org/22.0/reference-manual/python</a>"}],"answers":[{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649680745,"creation_date":1649680745,"answer_id":71828002,"question_id":71827937,"body_markdown":"You have two options:\r\n\r\n* Install and use Python 3.8.10 32bit (together with Java 1.8.0_311 32bit) instead of Python 3.8.10 64bit\r\n* Install and use Java 1.8.0_311 64bit (together with Python 3.8.10 64bit) instead of Java 1.8.0_311 32bit","title":"Python JPype importin Java class get JVM mismatch","body":"<p>You have two options:</p>\n<ul>\n<li>Install and use Python 3.8.10 32bit (together with Java 1.8.0_311 32bit) instead of Python 3.8.10 64bit</li>\n<li>Install and use Java 1.8.0_311 64bit (together with Python 3.8.10 64bit) instead of Java 1.8.0_311 32bit</li>\n</ul>\n"}],"owner":{"account_id":18980983,"reputation":41,"user_id":13852383,"display_name":"pikcahu420"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":704,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649680745,"creation_date":1649680493,"question_id":71827937,"body_markdown":"I am trying to load JAR file to my python program and use the jar classes and functions.\r\nI&#39;m using:\r\n\r\n - Java 1.8.0_311 32bit\r\n - Python 3.8.10 64bit\r\n\r\nmy code looks like:\r\n\r\n    import jpype\r\n    import jpype.imports\r\n    from jpype.types import *\r\n    classPath = &quot;-Djava.class.path=&#39;assets/JAR.jar&#39;&quot;\r\n    javaClass = jpype.startJVM(jpype.getDefaultJVMPath(), classPath)\r\n\r\ni got an exception: \r\n\r\n    jpype._jvmfinder.JVMNotSupportedException: JVM mismatch, python is 64 bit and JVM is 32 bit.\r\nwell its pretty obvious that the exception is the difference between python&#39;s and java&#39;s enviroments.\r\n\r\nDoes it have a workaround?","title":"Python JPype importin Java class get JVM mismatch","body":"<p>I am trying to load JAR file to my python program and use the jar classes and functions.\nI'm using:</p>\n<ul>\n<li>Java 1.8.0_311 32bit</li>\n<li>Python 3.8.10 64bit</li>\n</ul>\n<p>my code looks like:</p>\n<pre><code>import jpype\nimport jpype.imports\nfrom jpype.types import *\nclassPath = &quot;-Djava.class.path='assets/JAR.jar'&quot;\njavaClass = jpype.startJVM(jpype.getDefaultJVMPath(), classPath)\n</code></pre>\n<p>i got an exception:</p>\n<pre><code>jpype._jvmfinder.JVMNotSupportedException: JVM mismatch, python is 64 bit and JVM is 32 bit.\n</code></pre>\n<p>well its pretty obvious that the exception is the difference between python's and java's enviroments.</p>\n<p>Does it have a workaround?</p>\n"},{"tags":["java","hibernate","ninjaframework"],"comments":[{"owner":{"account_id":20400956,"reputation":51,"user_id":14966680,"display_name":"WoFVi"},"score":0,"creation_date":1649680447,"post_id":71827898,"comment_id":126930054,"body_markdown":"Sorry, forgot to mention, it is java17, the database is postgresql","body":"Sorry, forgot to mention, it is java17, the database is postgresql"}],"owner":{"account_id":20400956,"reputation":51,"user_id":14966680,"display_name":"WoFVi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":324,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1649680328,"creation_date":1649680328,"question_id":71827898,"body_markdown":"The framework I am using is `ninjaframework 6.9.0` and `hibernate 5.6.7`,and `Guice` used by this framework.\r\n\r\nIt is java17, The database is postgresql 14.2.\r\n\r\nI have a model like this:\r\n\r\n    @Entity\r\n    @Table(name = &quot;data&quot;)\r\n    \r\n    public class Data {\r\n         @Id\r\n         @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n         @Column(name = &quot;id&quot;, nullable = false)\r\n         private Long id;\r\n    \r\n         @Column(name = &quot;name&quot;)\r\n         private String name;\r\n    \r\n         @Column(name = &quot;labels&quot;)\r\n         @Type(type = &quot;com.vladmihalcea.hibernate.type.array.StringArrayType&quot;)\r\n         private String[] labels;\r\n    \r\n    }\r\nI query using a query statement like this:\r\n\r\n    String queryString = &quot;FROM Data data WHERE :label in elements(data.labels) &quot;;\r\n    TypedQuery&lt;Data&gt; dataTypeQuery = entityManager.createQuery(queryString,Data.class);\r\n    dataTypeQuery.setParameter(&quot;label&quot;,&quot;aLabel&quot;);\r\n    List&lt;Data&gt; dataList = dataTypeQuery.getResultList();\r\n\r\nI will get an exception at `entityManager.createQuery()`:\r\n\r\n    java.lang.NullPointerException: Cannot invoke &quot;org.hibernate.persister.collection.QueryableCollection.getElementPersister()&quot; because &quot;queryableCollection&quot; is null\r\n        at org.hibernate.hql.internal.ast.tree.MethodNode.resolveCollectionProperty(MethodNode.java:153)\r\n        at org.hibernate.hql.internal.ast.tree.CollectionFunction.resolve(CollectionFunction.java:26)\r\n        at org.hibernate.hql.internal.ast.HqlSqlWalker.processFunction(HqlSqlWalker.java:1253)\r\n        at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.collectionFunction(HqlSqlBaseWalker.java:3132)\r\n        at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.collectionFunctionOrSubselect(HqlSqlBaseWalker.java:5012)\r\n        at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.inRhs(HqlSqlBaseWalker.java:4919)\r\n        at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.comparisonExpr(HqlSqlBaseWalker.java:4578)\r\n        at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.logicalExpr(HqlSqlBaseWalker.java:2180)\r\n        at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.logicalExpr(HqlSqlBaseWalker.java:2108)\r\n        at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.whereClause(HqlSqlBaseWalker.java:841)\r\n        at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:635)\r\n        at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker.java:339)\r\n        at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:287)\r\n        at org.hibernate.hql.internal.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:276)\r\n        at org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:192)\r\n        at org.hibernate.hql.internal.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:144)\r\n        at org.hibernate.engine.query.spi.HQLQueryPlan.&lt;init&gt;(HQLQueryPlan.java:113)\r\n        at org.hibernate.engine.query.spi.HQLQueryPlan.&lt;init&gt;(HQLQueryPlan.java:73)\r\n        at org.hibernate.engine.query.spi.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:162)\r\n        at org.hibernate.internal.AbstractSharedSessionContract.getQueryPlan(AbstractSharedSessionContract.java:636)\r\n        at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:748)\r\n        at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:848)\r\n        at org.hibernate.internal.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:23)\r\n        at mag.beanbot.qqepipeline.dao.QqeTeacherDao.findByDate(QqeTeacherDao.java:100)\r\n        at mag.beanbot.schedulesearcher.service.SsTeacherScheduleService.findScheduleByDateV2(SsTeacherScheduleService.java:455)\r\n        at ninja.jpa.UnitOfWorkInterceptor.invoke(UnitOfWorkInterceptor.java:66)\r\n        at mag.beanbot.schedulesearcher.controller.ScheduleSearcherController.timeSearch(ScheduleSearcherController.java:181)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n        at ninja.params.ControllerMethodInvoker.invoke(ControllerMethodInvoker.java:76)\r\n        at ninja.FilterChainEnd.next(FilterChainEnd.java:45)\r\n        at filters.LoggerFilter.filter(LoggerFilter.java:49)\r\n        at ninja.FilterChainImpl.next(FilterChainImpl.java:36)\r\n        at ninja.NinjaDefault.onRouteRequest(NinjaDefault.java:112)\r\n        at ninja.servlet.NinjaServletDispatcher.service(NinjaServletDispatcher.java:86)\r\n        at com.google.inject.servlet.ServletDefinition.doServiceImpl(ServletDefinition.java:290)\r\n        at com.google.inject.servlet.ServletDefinition.doService(ServletDefinition.java:280)\r\n        at com.google.inject.servlet.ServletDefinition.service(ServletDefinition.java:184)\r\n        at com.google.inject.servlet.ManagedServletPipeline.service(ManagedServletPipeline.java:89)\r\n        at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:85)\r\n        at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:121)\r\n        at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:133)\r\n        at ninja.servlet.NinjaServletFilter.doFilter(NinjaServletFilter.java:106)\r\n        at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\r\n        at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)\r\n        at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:548)\r\n        at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:233)\r\n        at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1434)\r\n        at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:188)\r\n        at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:501)\r\n        at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:186)\r\n        at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1349)\r\n        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\r\n        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\r\n        at org.eclipse.jetty.server.Server.handle(Server.java:516)\r\n        at org.eclipse.jetty.server.HttpChannel.lambda$handle$1(HttpChannel.java:400)\r\n        at org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:645)\r\n        at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:392)\r\n        at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:277)\r\n        at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:311)\r\n        at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:105)\r\n        at org.eclipse.jetty.io.ChannelEndPoint$1.run(ChannelEndPoint.java:104)\r\n        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:883)\r\n        at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1034)\r\n        at java.base/java.lang.Thread.run(Thread.java:833) \r\n\r\n\r\nI&#39;m not sure what&#39;s going on. I tried with different hibernate versions, still doesn&#39;t work. model is normal.\r\nIs it an error in the query statement?\r\n\r\n\r\nBelow is the pom.xml for hibernate.\r\nninjaframework is hibernate version 3.4, I upgraded it to 5.6.7.\r\n\r\n        &lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-core --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n            &lt;version&gt;5.6.7.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-c3p0 --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-c3p0&lt;/artifactId&gt;\r\n            &lt;version&gt;5.6.7.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-entitymanager --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n            &lt;version&gt;5.6.7.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\nThanks.","title":"When I use jpql like `:label in elements(labels)` in hibernate, there is an exception","body":"<p>The framework I am using is <code>ninjaframework 6.9.0</code> and <code>hibernate 5.6.7</code>,and <code>Guice</code> used by this framework.</p>\n<p>It is java17, The database is postgresql 14.2.</p>\n<p>I have a model like this:</p>\n<pre><code>@Entity\n@Table(name = &quot;data&quot;)\n\npublic class Data {\n     @Id\n     @GeneratedValue(strategy = GenerationType.IDENTITY)\n     @Column(name = &quot;id&quot;, nullable = false)\n     private Long id;\n\n     @Column(name = &quot;name&quot;)\n     private String name;\n\n     @Column(name = &quot;labels&quot;)\n     @Type(type = &quot;com.vladmihalcea.hibernate.type.array.StringArrayType&quot;)\n     private String[] labels;\n\n}\n</code></pre>\n<p>I query using a query statement like this:</p>\n<pre><code>String queryString = &quot;FROM Data data WHERE :label in elements(data.labels) &quot;;\nTypedQuery&lt;Data&gt; dataTypeQuery = entityManager.createQuery(queryString,Data.class);\ndataTypeQuery.setParameter(&quot;label&quot;,&quot;aLabel&quot;);\nList&lt;Data&gt; dataList = dataTypeQuery.getResultList();\n</code></pre>\n<p>I will get an exception at <code>entityManager.createQuery()</code>:</p>\n<pre><code>java.lang.NullPointerException: Cannot invoke &quot;org.hibernate.persister.collection.QueryableCollection.getElementPersister()&quot; because &quot;queryableCollection&quot; is null\n    at org.hibernate.hql.internal.ast.tree.MethodNode.resolveCollectionProperty(MethodNode.java:153)\n    at org.hibernate.hql.internal.ast.tree.CollectionFunction.resolve(CollectionFunction.java:26)\n    at org.hibernate.hql.internal.ast.HqlSqlWalker.processFunction(HqlSqlWalker.java:1253)\n    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.collectionFunction(HqlSqlBaseWalker.java:3132)\n    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.collectionFunctionOrSubselect(HqlSqlBaseWalker.java:5012)\n    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.inRhs(HqlSqlBaseWalker.java:4919)\n    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.comparisonExpr(HqlSqlBaseWalker.java:4578)\n    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.logicalExpr(HqlSqlBaseWalker.java:2180)\n    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.logicalExpr(HqlSqlBaseWalker.java:2108)\n    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.whereClause(HqlSqlBaseWalker.java:841)\n    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:635)\n    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker.java:339)\n    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:287)\n    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:276)\n    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:192)\n    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:144)\n    at org.hibernate.engine.query.spi.HQLQueryPlan.&lt;init&gt;(HQLQueryPlan.java:113)\n    at org.hibernate.engine.query.spi.HQLQueryPlan.&lt;init&gt;(HQLQueryPlan.java:73)\n    at org.hibernate.engine.query.spi.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:162)\n    at org.hibernate.internal.AbstractSharedSessionContract.getQueryPlan(AbstractSharedSessionContract.java:636)\n    at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:748)\n    at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:848)\n    at org.hibernate.internal.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:23)\n    at mag.beanbot.qqepipeline.dao.QqeTeacherDao.findByDate(QqeTeacherDao.java:100)\n    at mag.beanbot.schedulesearcher.service.SsTeacherScheduleService.findScheduleByDateV2(SsTeacherScheduleService.java:455)\n    at ninja.jpa.UnitOfWorkInterceptor.invoke(UnitOfWorkInterceptor.java:66)\n    at mag.beanbot.schedulesearcher.controller.ScheduleSearcherController.timeSearch(ScheduleSearcherController.java:181)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at ninja.params.ControllerMethodInvoker.invoke(ControllerMethodInvoker.java:76)\n    at ninja.FilterChainEnd.next(FilterChainEnd.java:45)\n    at filters.LoggerFilter.filter(LoggerFilter.java:49)\n    at ninja.FilterChainImpl.next(FilterChainImpl.java:36)\n    at ninja.NinjaDefault.onRouteRequest(NinjaDefault.java:112)\n    at ninja.servlet.NinjaServletDispatcher.service(NinjaServletDispatcher.java:86)\n    at com.google.inject.servlet.ServletDefinition.doServiceImpl(ServletDefinition.java:290)\n    at com.google.inject.servlet.ServletDefinition.doService(ServletDefinition.java:280)\n    at com.google.inject.servlet.ServletDefinition.service(ServletDefinition.java:184)\n    at com.google.inject.servlet.ManagedServletPipeline.service(ManagedServletPipeline.java:89)\n    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:85)\n    at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:121)\n    at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:133)\n    at ninja.servlet.NinjaServletFilter.doFilter(NinjaServletFilter.java:106)\n    at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\n    at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)\n    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:548)\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:233)\n    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1434)\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:188)\n    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:501)\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:186)\n    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1349)\n    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\n    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\n    at org.eclipse.jetty.server.Server.handle(Server.java:516)\n    at org.eclipse.jetty.server.HttpChannel.lambda$handle$1(HttpChannel.java:400)\n    at org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:645)\n    at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:392)\n    at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:277)\n    at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:311)\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:105)\n    at org.eclipse.jetty.io.ChannelEndPoint$1.run(ChannelEndPoint.java:104)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:883)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1034)\n    at java.base/java.lang.Thread.run(Thread.java:833) \n</code></pre>\n<p>I'm not sure what's going on. I tried with different hibernate versions, still doesn't work. model is normal.\nIs it an error in the query statement?</p>\n<p>Below is the pom.xml for hibernate.\nninjaframework is hibernate version 3.4, I upgraded it to 5.6.7.</p>\n<pre><code>    &lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-core --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n        &lt;version&gt;5.6.7.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-c3p0 --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-c3p0&lt;/artifactId&gt;\n        &lt;version&gt;5.6.7.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-entitymanager --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n        &lt;version&gt;5.6.7.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Thanks.</p>\n"},{"tags":["java","spring-mvc","thymeleaf"],"comments":[{"owner":{"account_id":1441892,"reputation":13687,"user_id":1361787,"accept_rate":68,"display_name":"ChiefTwoPencils"},"score":1,"creation_date":1492560594,"post_id":43484142,"comment_id":74024056,"body_markdown":"Did `u.engines.size()` not work?","body":"Did <code>u.engines.size()</code> not work?"},{"owner":{"account_id":5748525,"reputation":407,"user_id":5976536,"display_name":"F0ulash"},"score":0,"creation_date":1492560637,"post_id":43484142,"comment_id":74024069,"body_markdown":"no it didn&#39;t work either","body":"no it didn&#39;t work either"},{"owner":{"account_id":49071,"reputation":8670,"user_id":145976,"accept_rate":40,"display_name":"Charlie"},"score":0,"creation_date":1492561207,"post_id":43484142,"comment_id":74024196,"body_markdown":"Can you add your controller/context and model code?","body":"Can you add your controller/context and model code?"},{"owner":{"account_id":5748525,"reputation":407,"user_id":5976536,"display_name":"F0ulash"},"score":0,"creation_date":1492561455,"post_id":43484142,"comment_id":74024263,"body_markdown":"@Charlie here is my controller code and where i declared the lists","body":"@Charlie here is my controller code and where i declared the lists"},{"owner":{"account_id":49071,"reputation":8670,"user_id":145976,"accept_rate":40,"display_name":"Charlie"},"score":0,"creation_date":1492570729,"post_id":43484142,"comment_id":74026511,"body_markdown":"What do you mean it didn&#39;t work? Did you get an error? If you attach a debugger or log the engines object, what does it say is inside? Does it have a size?","body":"What do you mean it didn&#39;t work? Did you get an error? If you attach a debugger or log the engines object, what does it say is inside? Does it have a size?"},{"owner":{"account_id":49071,"reputation":8670,"user_id":145976,"accept_rate":40,"display_name":"Charlie"},"score":0,"creation_date":1492571172,"post_id":43484142,"comment_id":74026629,"body_markdown":"u.engines.size() really should have worked; can you try it again and update the code to reflect what you tried?","body":"u.engines.size() really should have worked; can you try it again and update the code to reflect what you tried?"}],"answers":[{"tags":[],"owner":{"account_id":65396,"reputation":8715,"user_id":192465,"accept_rate":85,"display_name":"riddle_me_this"},"down_vote_count":0,"up_vote_count":65,"is_accepted":true,"score":65,"last_activity_date":1513465939,"creation_date":1492572852,"answer_id":43485872,"question_id":43484142,"body_markdown":"Try using the utility method for `org.thymeleaf.expression.Lists`:\r\n\r\n    &lt;td th:text=&quot;${#lists.size(u.engines)}&quot;&gt;[Engine Size]&lt;/td&gt;","title":"How to print Array size in thymeleaf?","body":"<p>Try using the utility method for <code>org.thymeleaf.expression.Lists</code>:</p>\n\n<pre><code>&lt;td th:text=\"${#lists.size(u.engines)}\"&gt;[Engine Size]&lt;/td&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1603786065,"creation_date":1603786065,"answer_id":64550336,"question_id":43484142,"body_markdown":"Besides the util method [vphilipnyc][1] described, instead of list.size, use list.size().\r\n\r\nWhen writing list.size, it&#39;s trying to call list.getSize() and an List (or a collection) doesn&#39;t have a getter named like this.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/43485872/7082956","title":"How to print Array size in thymeleaf?","body":"<p>Besides the util method <a href=\"https://stackoverflow.com/a/43485872/7082956\">vphilipnyc</a> described, instead of list.size, use list.size().</p>\n<p>When writing list.size, it's trying to call list.getSize() and an List (or a collection) doesn't have a getter named like this.</p>\n"},{"tags":[],"owner":{"account_id":5445447,"reputation":1726,"user_id":4332176,"accept_rate":25,"display_name":"Dila Gurung"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649680239,"creation_date":1649680239,"answer_id":71827882,"question_id":43484142,"body_markdown":"The easiest thing is to make use of length property\r\n\r\nExample Snippet written below\r\n\r\n    &lt;p id=&quot;clientCountTracker&quot; style=&quot;display: block&quot;\r\n                            th:text=&quot;${contentDTO.clients.length}&quot;\r\n                            &gt;&lt;/p&gt;\r\n\r\nWhere &quot;client&quot; is an array","title":"How to print Array size in thymeleaf?","body":"<p>The easiest thing is to make use of length property</p>\n<p>Example Snippet written below</p>\n<pre><code>&lt;p id=&quot;clientCountTracker&quot; style=&quot;display: block&quot;\n                        th:text=&quot;${contentDTO.clients.length}&quot;\n                        &gt;&lt;/p&gt;\n</code></pre>\n<p>Where &quot;client&quot; is an array</p>\n"}],"owner":{"account_id":5748525,"reputation":407,"user_id":5976536,"display_name":"F0ulash"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62794,"favorite_count":0,"down_vote_count":1,"up_vote_count":28,"accepted_answer_id":43485872,"answer_count":3,"score":27,"last_activity_date":1649680239,"creation_date":1492560386,"question_id":43484142,"body_markdown":"I&#39;m using **Thymeleaf** with **spring mvc 4** but I have a problem when I want to print a list size\n\n&lt;!-- language: lang-html --&gt;\n\n    &lt;tr th:each=&quot;u : ${users}&quot; th:id=&quot;${u.username}&quot; class=&quot;odd gradeX&quot;&gt;\n        &lt;th&gt;&lt;/th&gt;\n        &lt;td th:text=&quot;${u.username}&quot;&gt;&lt;/td&gt;\n        &lt;td th:text=&quot;${u.email}&quot;&gt;&lt;/td&gt;\n        &lt;td th:switch=&quot;${u.enabled}&quot;&gt;\n            &lt;span th:case=&quot;true&quot; class=&quot;badge badge-primary&quot;&gt;Acitf&lt;/span&gt;\n            &lt;span th:case=&quot;false&quot; class=&quot;badge badge-danger&quot;&gt;D&#233;sactiv&#233;e&lt;/span&gt;\n            &lt;span th:case=&quot;*&quot; class=&quot;badge badge-dark&quot;&gt;Inconnue&lt;/span&gt;\n        &lt;/td&gt;\n        &lt;td th:switch=&quot;${u.roles}&quot;&gt;\n            &lt;span th:case=&quot;ROLE_SUPER_ADMIN&quot;&gt;Super ADmin&lt;/span&gt;\n            &lt;span th:case=&quot;ROLE_MANGER&quot;&gt;Manager&lt;/span&gt;\n            &lt;span th:case=&quot;ROLE_SUPERVISEUR&quot;&gt;Superviseur&lt;/span&gt;\n            &lt;span th:case=&quot;ROLE_USER&quot;&gt;User&lt;/span&gt;\n            &lt;span th:case=&quot;*&quot;&gt;Inconnue&lt;/span&gt;\n    \n        &lt;/td&gt;\n        &lt;td th:text=&quot;${#calendars.format(u.creationDate,&#39;dd/MM/yyyy hh:mm&#39;)}&quot;&gt;&lt;/td&gt;\n        &lt;td th:text=&quot;${#calendars.format(u.lastLogin,&#39;dd/MM/yyyy hh:mm&#39;)}&quot;&gt;&lt;/td&gt;\n        **\n        &lt;td th:text=&quot;${u.engines}&quot;&gt;&lt;/td&gt;\n        &lt;td th:text=&quot;${u.subordonnes}&quot;&gt;&lt;/td&gt;\n        **\n        &lt;td&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n\nthe problem is here `th:text=&quot;${u.engines}&lt;/td&gt;`. `engines` is an ArrayList in my `User` entity. I tried `th:size` and `th:list` but it didn&#39;t work.\n\nCan anyone help me please\n\n## Edited \n\nhere is my `User` entity:\n\n    @OneToMany(mappedBy = &quot;superieur&quot;)\n    @JsonIgnore\n    private List&lt;User&gt; subordonnes = new ArrayList&lt;User&gt;();\n\n    @ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)\n    @JoinTable(name = &quot;USERS_ENGINES&quot;, joinColumns = @JoinColumn(name = &quot;USER_ID&quot;), inverseJoinColumns = @JoinColumn(name = &quot;NUM_EQUIPMENT&quot;))\n    @JsonIgnore\n    private List&lt;Engine&gt; engines = new ArrayList&lt;Engine&gt;();\n\nand my Controller method:\n\n    @RequestMapping(value = {&quot;/listeUsers&quot;})\n    public ModelAndView userlistePage() {\n        ModelAndView model = new ModelAndView();\n        User logedUser = (User) SecurityContextHolder.getContext().getAuthentication().getPrincipal();\n        \n        List&lt;User&gt; users = new ArrayList&lt;User&gt;();\n        users = userService.findUserSub(logedUser);\n        model.addObject(&quot;users&quot;, users);\n        model.setViewName(&quot;utilisateur/list_users&quot;);\n        return model;\n    }\n","title":"How to print Array size in thymeleaf?","body":"<p>I'm using <strong>Thymeleaf</strong> with <strong>spring mvc 4</strong> but I have a problem when I want to print a list size</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;tr th:each=&quot;u : ${users}&quot; th:id=&quot;${u.username}&quot; class=&quot;odd gradeX&quot;&gt;\n    &lt;th&gt;&lt;/th&gt;\n    &lt;td th:text=&quot;${u.username}&quot;&gt;&lt;/td&gt;\n    &lt;td th:text=&quot;${u.email}&quot;&gt;&lt;/td&gt;\n    &lt;td th:switch=&quot;${u.enabled}&quot;&gt;\n        &lt;span th:case=&quot;true&quot; class=&quot;badge badge-primary&quot;&gt;Acitf&lt;/span&gt;\n        &lt;span th:case=&quot;false&quot; class=&quot;badge badge-danger&quot;&gt;D√©sactiv√©e&lt;/span&gt;\n        &lt;span th:case=&quot;*&quot; class=&quot;badge badge-dark&quot;&gt;Inconnue&lt;/span&gt;\n    &lt;/td&gt;\n    &lt;td th:switch=&quot;${u.roles}&quot;&gt;\n        &lt;span th:case=&quot;ROLE_SUPER_ADMIN&quot;&gt;Super ADmin&lt;/span&gt;\n        &lt;span th:case=&quot;ROLE_MANGER&quot;&gt;Manager&lt;/span&gt;\n        &lt;span th:case=&quot;ROLE_SUPERVISEUR&quot;&gt;Superviseur&lt;/span&gt;\n        &lt;span th:case=&quot;ROLE_USER&quot;&gt;User&lt;/span&gt;\n        &lt;span th:case=&quot;*&quot;&gt;Inconnue&lt;/span&gt;\n\n    &lt;/td&gt;\n    &lt;td th:text=&quot;${#calendars.format(u.creationDate,'dd/MM/yyyy hh:mm')}&quot;&gt;&lt;/td&gt;\n    &lt;td th:text=&quot;${#calendars.format(u.lastLogin,'dd/MM/yyyy hh:mm')}&quot;&gt;&lt;/td&gt;\n    **\n    &lt;td th:text=&quot;${u.engines}&quot;&gt;&lt;/td&gt;\n    &lt;td th:text=&quot;${u.subordonnes}&quot;&gt;&lt;/td&gt;\n    **\n    &lt;td&gt;&lt;/td&gt;\n&lt;/tr&gt;\n</code></pre>\n<p>the problem is here <code>th:text=&quot;${u.engines}&lt;/td&gt;</code>. <code>engines</code> is an ArrayList in my <code>User</code> entity. I tried <code>th:size</code> and <code>th:list</code> but it didn't work.</p>\n<p>Can anyone help me please</p>\n<h2>Edited</h2>\n<p>here is my <code>User</code> entity:</p>\n<pre><code>@OneToMany(mappedBy = &quot;superieur&quot;)\n@JsonIgnore\nprivate List&lt;User&gt; subordonnes = new ArrayList&lt;User&gt;();\n\n@ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)\n@JoinTable(name = &quot;USERS_ENGINES&quot;, joinColumns = @JoinColumn(name = &quot;USER_ID&quot;), inverseJoinColumns = @JoinColumn(name = &quot;NUM_EQUIPMENT&quot;))\n@JsonIgnore\nprivate List&lt;Engine&gt; engines = new ArrayList&lt;Engine&gt;();\n</code></pre>\n<p>and my Controller method:</p>\n<pre><code>@RequestMapping(value = {&quot;/listeUsers&quot;})\npublic ModelAndView userlistePage() {\n    ModelAndView model = new ModelAndView();\n    User logedUser = (User) SecurityContextHolder.getContext().getAuthentication().getPrincipal();\n    \n    List&lt;User&gt; users = new ArrayList&lt;User&gt;();\n    users = userService.findUserSub(logedUser);\n    model.addObject(&quot;users&quot;, users);\n    model.setViewName(&quot;utilisateur/list_users&quot;);\n    return model;\n}\n</code></pre>\n"},{"tags":["java","list","data-structures","multidimensional-array"],"comments":[{"owner":{"account_id":2118345,"reputation":12755,"user_id":1882149,"display_name":"Achintya Jha"},"score":0,"creation_date":1366865298,"post_id":16206551,"comment_id":23174691,"body_markdown":"You have to use nested  for loop .","body":"You have to use nested  for loop ."},{"owner":{"account_id":1867908,"reputation":4350,"user_id":1690982,"display_name":"ddmps"},"score":4,"creation_date":1366865794,"post_id":16206551,"comment_id":23174850,"body_markdown":"You have the solution right there. There is no quicker way really.","body":"You have the solution right there. There is no quicker way really."},{"owner":{"account_id":407825,"reputation":22412,"user_id":778118,"accept_rate":67,"display_name":"jahroy"},"score":0,"creation_date":1366866510,"post_id":16206551,"comment_id":23175075,"body_markdown":"Everybody always wants to avoid loops... Eventually you or some library must to use one.","body":"Everybody always wants to avoid loops... Eventually you or some library must to use one."},{"owner":{"account_id":1781872,"reputation":14665,"user_id":1624376,"accept_rate":76,"display_name":"Aubin"},"score":0,"creation_date":1366868203,"post_id":16206551,"comment_id":23175585,"body_markdown":"Why not mixing both? List&lt;double[]&gt;: no autoboxing ==&gt; better performance","body":"Why not mixing both? List&lt;double[]&gt;: no autoboxing ==&gt; better performance"}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1366867898,"creation_date":1366866200,"answer_id":16206735,"question_id":16206551,"body_markdown":"The only faster way to do this would be with a fancier view; you could do this with [Guava][1] like so:\r\n\r\n    Double[][] array;\r\n    List&lt;List&lt;Double&gt;&gt; list = Lists.transform(Arrays.asList(array),\r\n      new Function&lt;Double[], List&lt;Double&gt;&gt;() {\r\n        @Override public List&lt;Double&gt; apply(Double[] row) {\r\n          return Arrays.asList(row);\r\n        }\r\n      }\r\n    }\r\n\r\nThat returns a view in constant time.\r\n\r\nShort of that, you already have the best solution.\r\n\r\n(FWIW, if you do end up using Guava, you could use `Doubles.asList(double[])` so you could use a primitive `double[][]` instead of a boxed `Double[][]`.)\r\n\r\n  [1]: http://guava-libraries.googlecode.com","title":"Casting 2d Array to List of lists in Java","body":"<p>The only faster way to do this would be with a fancier view; you could do this with <a href=\"http://guava-libraries.googlecode.com\" rel=\"nofollow\">Guava</a> like so:</p>\n\n<pre><code>Double[][] array;\nList&lt;List&lt;Double&gt;&gt; list = Lists.transform(Arrays.asList(array),\n  new Function&lt;Double[], List&lt;Double&gt;&gt;() {\n    @Override public List&lt;Double&gt; apply(Double[] row) {\n      return Arrays.asList(row);\n    }\n  }\n}\n</code></pre>\n\n<p>That returns a view in constant time.</p>\n\n<p>Short of that, you already have the best solution.</p>\n\n<p>(FWIW, if you do end up using Guava, you could use <code>Doubles.asList(double[])</code> so you could use a primitive <code>double[][]</code> instead of a boxed <code>Double[][]</code>.)</p>\n"},{"tags":[],"owner":{"account_id":2934808,"reputation":366,"user_id":2514026,"display_name":"tejp124"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1568225931,"creation_date":1568225931,"answer_id":57894755,"question_id":16206551,"body_markdown":"After `JAVA 8 stream APIs` we can get the list of lists from 2d array in a much faster and cleaner way.\r\n\r\n    Double[][] old= new Double[width][height];\r\n    List&lt;List&lt;Double&gt;&gt; listOfLists = Arrays.stream(Objects.requireNonNull(old)).map(row -&gt; {\r\n            return Arrays.asList((row != null) ? row : new Double[0]);\r\n        }).collect(Collectors.toList());\r\n    ","title":"Casting 2d Array to List of lists in Java","body":"<p>After <code>JAVA 8 stream APIs</code> we can get the list of lists from 2d array in a much faster and cleaner way.</p>\n\n<pre><code>Double[][] old= new Double[width][height];\nList&lt;List&lt;Double&gt;&gt; listOfLists = Arrays.stream(Objects.requireNonNull(old)).map(row -&gt; {\n        return Arrays.asList((row != null) ? row : new Double[0]);\n    }).collect(Collectors.toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6432067,"reputation":21,"user_id":4984771,"display_name":"Ching Liu"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1621476630,"creation_date":1621476630,"answer_id":67613049,"question_id":16206551,"body_markdown":"As Java8 you do `Arrays.stream(array).map(Arrays::asList).collect(Collectors.toList())`.","title":"Casting 2d Array to List of lists in Java","body":"<p>As Java8 you do <code>Arrays.stream(array).map(Arrays::asList).collect(Collectors.toList())</code>.</p>\n"},{"tags":[],"owner":{"account_id":19566622,"reputation":45,"user_id":14318622,"display_name":"PBKN"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649680161,"creation_date":1649680161,"answer_id":71827870,"question_id":16206551,"body_markdown":"Consider matrix as your 2d array then\r\n\r\n    List&lt;List&lt;Integer&gt;&gt; resList = new ArrayList&lt;&gt;();\r\n        for(int[] rows : matrix) {\r\n    resList.add(Arrays.stream(rows).boxed().collect(Collectors.toList()));\r\n        }","title":"Casting 2d Array to List of lists in Java","body":"<p>Consider matrix as your 2d array then</p>\n<pre><code>List&lt;List&lt;Integer&gt;&gt; resList = new ArrayList&lt;&gt;();\n    for(int[] rows : matrix) {\nresList.add(Arrays.stream(rows).boxed().collect(Collectors.toList()));\n    }\n</code></pre>\n"}],"owner":{"account_id":1347354,"reputation":21526,"user_id":1287834,"accept_rate":87,"display_name":"Slater Victoroff"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6230,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":16206735,"answer_count":4,"score":1,"last_activity_date":1649680161,"creation_date":1366865105,"question_id":16206551,"body_markdown":"So, this might be a simple question, but I wasn&#39;t able to find any easy or elegant way to do this. Converting an array to a list is trivial in Java\r\n\r\n    Double[] old = new Double[size];\r\n    List&lt;Double&gt; cast = Arrays.asList(old);\r\n\r\nBut I&#39;m dealing with images currently and I would like the ability to extend this functionality to a 2d array without having to iterate through one dimension of the array appending to a list.\r\n\r\n    Double[][] -&gt; List&lt;List&lt;Double&gt;&gt;\r\n\r\nIs basically what I would like to achieve. I have a solution along the lines of:\r\n\r\n    Double[][] old= new Double[width][height];\r\n    List&lt;List&lt;Double&gt;&gt; new= new ArrayList&lt;List&lt;Double&gt;&gt;();\r\n    for (int i=0;i&lt;old.length();i++){\r\n        new.add(Arrays.asList(old[i]));\r\n    }\r\n\r\nI would like something better and potentially faster than this.","title":"Casting 2d Array to List of lists in Java","body":"<p>So, this might be a simple question, but I wasn't able to find any easy or elegant way to do this. Converting an array to a list is trivial in Java</p>\n\n<pre><code>Double[] old = new Double[size];\nList&lt;Double&gt; cast = Arrays.asList(old);\n</code></pre>\n\n<p>But I'm dealing with images currently and I would like the ability to extend this functionality to a 2d array without having to iterate through one dimension of the array appending to a list.</p>\n\n<pre><code>Double[][] -&gt; List&lt;List&lt;Double&gt;&gt;\n</code></pre>\n\n<p>Is basically what I would like to achieve. I have a solution along the lines of:</p>\n\n<pre><code>Double[][] old= new Double[width][height];\nList&lt;List&lt;Double&gt;&gt; new= new ArrayList&lt;List&lt;Double&gt;&gt;();\nfor (int i=0;i&lt;old.length();i++){\n    new.add(Arrays.asList(old[i]));\n}\n</code></pre>\n\n<p>I would like something better and potentially faster than this.</p>\n"},{"tags":["java","mapstruct"],"answers":[{"tags":[],"owner":{"account_id":1402854,"reputation":3712,"user_id":1331297,"accept_rate":82,"display_name":"Sjaak"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1555104884,"creation_date":1555104884,"answer_id":55659720,"question_id":55650681,"body_markdown":"try:\r\n\r\n        @Mapper \r\n        public interface MyMapper {\r\n        \r\n             @Mapping( target = &quot;accounts&quot;, ignore = true ) \r\n             void fromDto(UserDetialsDTO dto, @MappingTarget UserDetails userDetails);\r\n    \r\n             @AfterMapping\r\n             default void handleAccounts(UserDetialsDTO dto, @MappingTarget UserDetails userDetails) {\r\n                 userDetails.accounts\r\n                   .stream()\r\n                   .forEach(acct -&gt; acct.setFavourite(dto.favouriteAccountId.equals(acct.id))) ;\r\n             }\r\n        }","title":"Mapstruct: How to use custom mappers with @MappingTarget","body":"<p>try:</p>\n\n<pre><code>    @Mapper \n    public interface MyMapper {\n\n         @Mapping( target = \"accounts\", ignore = true ) \n         void fromDto(UserDetialsDTO dto, @MappingTarget UserDetails userDetails);\n\n         @AfterMapping\n         default void handleAccounts(UserDetialsDTO dto, @MappingTarget UserDetails userDetails) {\n             userDetails.accounts\n               .stream()\n               .forEach(acct -&gt; acct.setFavourite(dto.favouriteAccountId.equals(acct.id))) ;\n         }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":239746,"reputation":6175,"user_id":509565,"accept_rate":69,"display_name":"lrkwz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649680031,"creation_date":1649676154,"answer_id":71826934,"question_id":55650681,"body_markdown":"You can use a [decorator][1], to implement both:\r\n\r\n* initialization of `Account` list\r\n* favorite custom logic\r\n\r\nsuch as:\r\n\r\n```java\r\n@Mapper\r\n@DecoratedWith(MyMapperDecorator.class)\r\npublic interface MyMapper {\r\n    void fromDto(UserDetialsDTO dto, @MappingTarget UserDetails userDetails);\r\n}\r\n\r\npublic class MyMapperDecorator implements MyMapper{\r\n\r\n    @Override\r\n    public void fromDto(final UserDetialsDTO dto, final UserDetails userDetails) {\r\n        if(dto == null){\r\n            return;\r\n        }\r\n\r\n        dto.getAccountIds().forEach(a -&gt; {\r\n            final Account account = new Account();\r\n            account.setId(a);\r\n            account.setFavourite(a.equals(dto.getFavouriteAccountId()));\r\n            userDetails.getAccounts().add(new Account());\r\n        });\r\n\r\n    }\r\n}\r\n\r\n```\r\n\r\nIn order to avoid duplicates I would suggest to use `Set&lt;Account&gt;` instead of `List` and implement `Account.equals()` accordingly.\r\n\r\nAn alternative (sligtly) more sophisticated approach could involve defining a `String` to `Account` mapper use it:\r\n\r\n```java\r\n@Mapper(uses = AccountMapper.class)\r\n@DecoratedWith(MyMapperDecorator.class)\r\ninterface MyMapper {\r\n\r\n    MyMapper INSTANCE = Mappers.getMapper( MyMapper.class );\r\n\r\n    @Mapping(target = &quot;accounts&quot;, source=&quot;accountIds&quot;)\r\n    abstract void update(UserDetialsDTO dto, @MappingTarget UserDetails userDetails);\r\n\r\n}\r\n\r\npublic abstract class MyMapperDecorator implements MyMapper{\r\n\r\n    private final MyMapper delegate;\r\n\r\n    MyMapperDecorator(final MyMapper delegate){\r\n        this.delegate = delegate;\r\n    }\r\n\r\n    @Override\r\n    public void update(final UserDetialsDTO dto, final UserDetails userDetails) {\r\n        if(dto == null){\r\n            return;\r\n        }\r\n\r\n        delegate.update(dto, userDetails);\r\n\r\n        userDetails.accounts\r\n                .stream()\r\n                .forEach(acct -&gt; acct.setFavourite(dto.favouriteAccountId.equals(acct.id))) ;\r\n\r\n    }\r\n}\r\n\r\n@Mapper\r\npublic interface AccountMapper {\r\n    Account fromString(String id);\r\n\r\n    void update(String id, @MappingTarget Account account);\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n\r\n  [1]: https://mapstruct.org/documentation/stable/reference/html/#customizing-mappers-using-decorators","title":"Mapstruct: How to use custom mappers with @MappingTarget","body":"<p>You can use a <a href=\"https://mapstruct.org/documentation/stable/reference/html/#customizing-mappers-using-decorators\" rel=\"nofollow noreferrer\">decorator</a>, to implement both:</p>\n<ul>\n<li>initialization of <code>Account</code> list</li>\n<li>favorite custom logic</li>\n</ul>\n<p>such as:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Mapper\n@DecoratedWith(MyMapperDecorator.class)\npublic interface MyMapper {\n    void fromDto(UserDetialsDTO dto, @MappingTarget UserDetails userDetails);\n}\n\npublic class MyMapperDecorator implements MyMapper{\n\n    @Override\n    public void fromDto(final UserDetialsDTO dto, final UserDetails userDetails) {\n        if(dto == null){\n            return;\n        }\n\n        dto.getAccountIds().forEach(a -&gt; {\n            final Account account = new Account();\n            account.setId(a);\n            account.setFavourite(a.equals(dto.getFavouriteAccountId()));\n            userDetails.getAccounts().add(new Account());\n        });\n\n    }\n}\n\n</code></pre>\n<p>In order to avoid duplicates I would suggest to use <code>Set&lt;Account&gt;</code> instead of <code>List</code> and implement <code>Account.equals()</code> accordingly.</p>\n<p>An alternative (sligtly) more sophisticated approach could involve defining a <code>String</code> to <code>Account</code> mapper use it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Mapper(uses = AccountMapper.class)\n@DecoratedWith(MyMapperDecorator.class)\ninterface MyMapper {\n\n    MyMapper INSTANCE = Mappers.getMapper( MyMapper.class );\n\n    @Mapping(target = &quot;accounts&quot;, source=&quot;accountIds&quot;)\n    abstract void update(UserDetialsDTO dto, @MappingTarget UserDetails userDetails);\n\n}\n\npublic abstract class MyMapperDecorator implements MyMapper{\n\n    private final MyMapper delegate;\n\n    MyMapperDecorator(final MyMapper delegate){\n        this.delegate = delegate;\n    }\n\n    @Override\n    public void update(final UserDetialsDTO dto, final UserDetails userDetails) {\n        if(dto == null){\n            return;\n        }\n\n        delegate.update(dto, userDetails);\n\n        userDetails.accounts\n                .stream()\n                .forEach(acct -&gt; acct.setFavourite(dto.favouriteAccountId.equals(acct.id))) ;\n\n    }\n}\n\n@Mapper\npublic interface AccountMapper {\n    Account fromString(String id);\n\n    void update(String id, @MappingTarget Account account);\n}\n\n</code></pre>\n"}],"owner":{"account_id":1479530,"reputation":6711,"user_id":1389219,"accept_rate":50,"display_name":"vegemite4me"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10880,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":55659720,"answer_count":2,"score":0,"last_activity_date":1649680031,"creation_date":1555068633,"question_id":55650681,"body_markdown":"I am using Mapstruct and I need to update an existing bean using `@MappingTarget`, but need to apply some complex logic to set the correct field in the target.\r\n\r\nLets say I have a target bean that looks like this. A user has a list of accounts, and one of those accounts is marked as favourite.\r\n\r\n    UserDetails {\r\n      String name;\r\n      List&lt;Account&gt; accounts;\r\n    }\r\n\r\n    Account {\r\n      String id;\r\n      boolean favourite;\r\n    }\r\n\r\nThe DTO class contains the account ID of their favourite account.\r\n\r\n    UserDetialsDTO {\r\n      String name;\r\n      String favouriteAccountId;\r\n      List&lt;String&gt; accountIds;\r\n    }\r\n\r\nI need to use some complex logic to update the correct `Account` in the list of accounts. \r\n\r\n    UserDetails fromDto(UserDetialsDTO dto, @MappingTarget UserDetails userDetails);\r\n\r\n The logic of finding and updating the correct `Account` to make it favourite is something like this:\r\n \r\n    userDetails.accounts\r\n               .stream()\r\n               .forEach(acct -&gt; acct.setFavourite(dto.favouriteAccountId.equals(acct.id))) ;\r\n\r\n **How can I tell Mapstruct to use this custom logic when updating a `@MapingTarget`?**\r\n","title":"Mapstruct: How to use custom mappers with @MappingTarget","body":"<p>I am using Mapstruct and I need to update an existing bean using <code>@MappingTarget</code>, but need to apply some complex logic to set the correct field in the target.</p>\n\n<p>Lets say I have a target bean that looks like this. A user has a list of accounts, and one of those accounts is marked as favourite.</p>\n\n<pre><code>UserDetails {\n  String name;\n  List&lt;Account&gt; accounts;\n}\n\nAccount {\n  String id;\n  boolean favourite;\n}\n</code></pre>\n\n<p>The DTO class contains the account ID of their favourite account.</p>\n\n<pre><code>UserDetialsDTO {\n  String name;\n  String favouriteAccountId;\n  List&lt;String&gt; accountIds;\n}\n</code></pre>\n\n<p>I need to use some complex logic to update the correct <code>Account</code> in the list of accounts. </p>\n\n<pre><code>UserDetails fromDto(UserDetialsDTO dto, @MappingTarget UserDetails userDetails);\n</code></pre>\n\n<p>The logic of finding and updating the correct <code>Account</code> to make it favourite is something like this:</p>\n\n<pre><code>userDetails.accounts\n           .stream()\n           .forEach(acct -&gt; acct.setFavourite(dto.favouriteAccountId.equals(acct.id))) ;\n</code></pre>\n\n<p><strong>How can I tell Mapstruct to use this custom logic when updating a <code>@MapingTarget</code>?</strong></p>\n"},{"tags":["java","scala","file","io"],"comments":[{"owner":{"account_id":31493,"reputation":30113,"user_id":86485,"accept_rate":93,"display_name":"Seth Tisue"},"score":0,"creation_date":1648567343,"post_id":71530311,"comment_id":126654640,"body_markdown":"Writing + printing = wrinting? &#128540;","body":"Writing + printing = wrinting? üòú"}],"answers":[{"tags":[],"owner":{"account_id":31493,"reputation":30113,"user_id":86485,"accept_rate":93,"display_name":"Seth Tisue"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1647879404,"creation_date":1647879404,"answer_id":71560755,"question_id":71530311,"body_markdown":"Works for me:\r\n\r\n```\r\n% mkdir -p src/test/resources\r\n% /usr/local/scala/scala-2.13.8/bin/scala\r\nWelcome to Scala 2.13.8 (OpenJDK 64-Bit Server VM, Java 17.0.2).\r\nType in expressions for evaluation. Or try :help.\r\n\r\nscala&gt; import java.io.FileWriter\r\nimport java.io.FileWriter\r\n\r\nscala&gt; val pw =  new FileWriter(&quot;src/test/resources/config&quot;) \r\n     |  pw.write(&quot;file contents&quot;)\r\n     |  pw.append(&quot;keke&quot;)\r\n     |  pw.flush() \r\n     |  pw.close()\r\nval pw: java.io.FileWriter = java.io.FileWriter@241fbec\r\n\r\nscala&gt; \r\n:quit\r\n\r\n% cat src/test/resources/config \r\nfile contentskeke%\r\n\r\n```\r\n\r\nBut note that the file doesn&#39;t end with a newline character (because your code doesn&#39;t do anything that would add one). This can confuse some tools. Perhaps you are mistaken that the resulting file is empty. What method are you using for determining that it is empty?","title":"Writing in a file goes wrong","body":"<p>Works for me:</p>\n<pre><code>% mkdir -p src/test/resources\n% /usr/local/scala/scala-2.13.8/bin/scala\nWelcome to Scala 2.13.8 (OpenJDK 64-Bit Server VM, Java 17.0.2).\nType in expressions for evaluation. Or try :help.\n\nscala&gt; import java.io.FileWriter\nimport java.io.FileWriter\n\nscala&gt; val pw =  new FileWriter(&quot;src/test/resources/config&quot;) \n     |  pw.write(&quot;file contents&quot;)\n     |  pw.append(&quot;keke&quot;)\n     |  pw.flush() \n     |  pw.close()\nval pw: java.io.FileWriter = java.io.FileWriter@241fbec\n\nscala&gt; \n:quit\n\n% cat src/test/resources/config \nfile contentskeke%\n\n</code></pre>\n<p>But note that the file doesn't end with a newline character (because your code doesn't do anything that would add one). This can confuse some tools. Perhaps you are mistaken that the resulting file is empty. What method are you using for determining that it is empty?</p>\n"}],"owner":{"account_id":13390881,"reputation":679,"user_id":9663278,"display_name":"toto"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1649679699,"creation_date":1647621234,"question_id":71530311,"body_markdown":"Hello I am trying to add a line to a file using scala. \r\n\r\nI tried this   \r\n\r\n\r\n     val pw =  new FileWriter(&quot;src/test/resources/config&quot;) \r\n     pw.write(&quot;file contents&quot;)\r\n     pw.append(&quot;keke&quot;)\r\n     pw.flush() \r\n     pw.close()\r\n  \r\nThe file is created but nothing in it :/.   ","title":"Writing in a file goes wrong","body":"<p>Hello I am trying to add a line to a file using scala.</p>\n<p>I tried this</p>\n<pre><code> val pw =  new FileWriter(&quot;src/test/resources/config&quot;) \n pw.write(&quot;file contents&quot;)\n pw.append(&quot;keke&quot;)\n pw.flush() \n pw.close()\n</code></pre>\n<p>The file is created but nothing in it :/.</p>\n"},{"tags":["java","testing","junit","mocking"],"owner":{"account_id":24900718,"reputation":11,"user_id":18771429,"display_name":"ProBeginner"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1649679692,"creation_date":1649678216,"question_id":71827433,"body_markdown":"Here is main Class\r\n```\r\npublic class ServerConnector {\r\n\r\n    private String ipAddress;\r\n    private int portNumber;\r\n    private Socket socket;\r\n    private DataOutputStream dataOutputStream;\r\n    private DataInputStream dataInputStream;\r\n\r\n    public ServerConnector(String ipAddress, int portNumber){\r\n        this.ipAddress = ipAddress;\r\n        this.portNumber = portNumber;\r\n    }\r\n\r\n    public void connect(){\r\n        socket = new Socket();\r\n        InetSocketAddress socketAddress = new InetSocketAddress(ipAddress, portNumber);\r\n        socket.connect(socketAddress, 5000);\r\n        dataOutputStream = new DataOutputStream(new BufferedOutputStream(socket.getOutputStream()));\r\n        dataInputStream = new DataInputStream((new BufferedInputStream(socket.getInputStream())));\r\n\r\n    }\r\n\r\n    public void send(byte[] sendingData){\r\n        dataOutputStream.writeInt(sendingData.length);\r\n        dataOutputStream.write(sendingData);\r\n        dataOutputStream.flush();\r\n    }\r\n\r\n...\r\n\r\n}\r\n\r\n```\r\n\r\nand this is what I want to do for testing send method\r\n\r\n```\r\npublic class ServerConnectorTest {\r\n\r\n    @Mock\r\n    private DataOutputStream mockDataOutputStream = new DataOutputStream(null);\r\n\r\n    @InjectMocks\r\n    ServerConnector connector = new ServerConnector(&quot;10.10.10.10&quot;, 1234);\r\n\r\n    @Captor\r\n    private ArgumentCaptor&lt;byte[]&gt; byteValueCapture;\r\n\r\n    @Captor\r\n    private ArgumentCaptor&lt;Integer&gt; intValueCapture;\r\n\r\n    @Test\r\n    @DisplayName(&quot;Send Data Test&quot;)\r\n    void should_send_data_to_server(){\r\n        MockitoAnnotations.openMocks(this);\r\n        try {\r\n            byte[] sendingData = &quot;Test&quot;.getBytes(StandardCharsets.UTF_8);\r\n            connector.send(sendingData);\r\n            Mockito.verify(mockDataOutputStream).writeInt(intValueCapture.capture());\r\n            Mockito.verify(mockDataOutputStream).write(byteValueCapture.capture());\r\n            int writtenInt = intValueCapture.getValue();\r\n            byte[] writtenData = byteValueCapture.getValue();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\nI&#39;d like to test connector.send() method but it fails due to dataOutputStream is null.\r\nI could&#39;t find what the problem is.. I already found similar inject and mock testing but didn&#39;t help. \r\n","title":"Test outputstream by using InjectMocks","body":"<p>Here is main Class</p>\n<pre><code>public class ServerConnector {\n\n    private String ipAddress;\n    private int portNumber;\n    private Socket socket;\n    private DataOutputStream dataOutputStream;\n    private DataInputStream dataInputStream;\n\n    public ServerConnector(String ipAddress, int portNumber){\n        this.ipAddress = ipAddress;\n        this.portNumber = portNumber;\n    }\n\n    public void connect(){\n        socket = new Socket();\n        InetSocketAddress socketAddress = new InetSocketAddress(ipAddress, portNumber);\n        socket.connect(socketAddress, 5000);\n        dataOutputStream = new DataOutputStream(new BufferedOutputStream(socket.getOutputStream()));\n        dataInputStream = new DataInputStream((new BufferedInputStream(socket.getInputStream())));\n\n    }\n\n    public void send(byte[] sendingData){\n        dataOutputStream.writeInt(sendingData.length);\n        dataOutputStream.write(sendingData);\n        dataOutputStream.flush();\n    }\n\n...\n\n}\n\n</code></pre>\n<p>and this is what I want to do for testing send method</p>\n<pre><code>public class ServerConnectorTest {\n\n    @Mock\n    private DataOutputStream mockDataOutputStream = new DataOutputStream(null);\n\n    @InjectMocks\n    ServerConnector connector = new ServerConnector(&quot;10.10.10.10&quot;, 1234);\n\n    @Captor\n    private ArgumentCaptor&lt;byte[]&gt; byteValueCapture;\n\n    @Captor\n    private ArgumentCaptor&lt;Integer&gt; intValueCapture;\n\n    @Test\n    @DisplayName(&quot;Send Data Test&quot;)\n    void should_send_data_to_server(){\n        MockitoAnnotations.openMocks(this);\n        try {\n            byte[] sendingData = &quot;Test&quot;.getBytes(StandardCharsets.UTF_8);\n            connector.send(sendingData);\n            Mockito.verify(mockDataOutputStream).writeInt(intValueCapture.capture());\n            Mockito.verify(mockDataOutputStream).write(byteValueCapture.capture());\n            int writtenInt = intValueCapture.getValue();\n            byte[] writtenData = byteValueCapture.getValue();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n    }\n\n}\n</code></pre>\n<p>I'd like to test connector.send() method but it fails due to dataOutputStream is null.\nI could't find what the problem is.. I already found similar inject and mock testing but didn't help.</p>\n"},{"tags":["java","arrays","class","oop","methods"],"comments":[{"owner":{"account_id":15856821,"reputation":2451,"user_id":11441011,"display_name":"maloomeister"},"score":1,"creation_date":1649674709,"post_id":71826569,"comment_id":126927967,"body_markdown":"The `Phone[] phonebooks` in your `read()` method is a local variable and therefore has nothing to do with your class level `phonebooks`. In your `read()`, change the variable declaration to `phonebooks = new Phone[repeat]`. Also, there is no point in your class variables being `static` in my opinion.","body":"The <code>Phone[] phonebooks</code> in your <code>read()</code> method is a local variable and therefore has nothing to do with your class level <code>phonebooks</code>. In your <code>read()</code>, change the variable declaration to <code>phonebooks = new Phone[repeat]</code>. Also, there is no point in your class variables being <code>static</code> in my opinion."},{"owner":{"account_id":15856821,"reputation":2451,"user_id":11441011,"display_name":"maloomeister"},"score":0,"creation_date":1649674887,"post_id":71826569,"comment_id":126928025,"body_markdown":"Another sidenote, because of `if (phonebooks[i].getName() == search)` -&gt; [How do I compare Strings in Java?](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)","body":"Another sidenote, because of <code>if (phonebooks[i].getName() == search)</code> -&gt; <a href=\"https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java\">How do I compare Strings in Java?</a>"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1649674888,"post_id":71826569,"comment_id":126928026,"body_markdown":"Your naming is confusing. What you call &#39;Phone&#39; should probably be `Contact`. `Phonebook` would encapsulate a collection (or an array) of `Contact`. The whole app (main class) might be called `Phone`","body":"Your naming is confusing. What you call &#39;Phone&#39; should probably be <code>Contact</code>. <code>Phonebook</code> would encapsulate a collection (or an array) of <code>Contact</code>. The whole app (main class) might be called <code>Phone</code>"}],"answers":[{"tags":[],"owner":{"account_id":6475519,"reputation":4496,"user_id":5014221,"accept_rate":71,"display_name":"Ashish Patil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1649679685,"creation_date":1649679685,"answer_id":71827761,"question_id":71826569,"body_markdown":"There are few issues in your code, below are some suggestions to make it work--\r\n 1. change member variables from `static private` to only `private` in `Phone`\r\n\r\n\r\n 2. Don&#39;t redeclare `repeat` &amp; `phonebooks` in `read().`    \r\n&lt;/br&gt;\r\n3. Change `if (phonebooks[i].getName() == search)` call in `run()` to `if (phonebooks[i].getName().equalsIgnoreCase(search))` so that it will search &amp; match search string.\r\n","title":"Changing and using one object array in two methods","body":"<p>There are few issues in your code, below are some suggestions to make it work--</p>\n<ol>\n<li><p>change member variables from <code>static private</code> to only <code>private</code> in <code>Phone</code></p>\n</li>\n<li><p>Don't redeclare <code>repeat</code> &amp; <code>phonebooks</code> in <code>read().</code><br />\n</p>\n</li>\n<li><p>Change <code>if (phonebooks[i].getName() == search)</code> call in <code>run()</code> to <code>if (phonebooks[i].getName().equalsIgnoreCase(search))</code> so that it will search &amp; match search string.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":24900160,"reputation":13,"user_id":18770937,"display_name":"AlessoFan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71827761,"answer_count":1,"score":1,"last_activity_date":1649679685,"creation_date":1649674494,"question_id":71826569,"body_markdown":"I&#39;m making a phone class and a phone book class right now. The phone class declares name and phone number fields, and the phone book class has read and run methods. When run() method is executed in the main function, information is input through the read() method, and information is retrieved and output through the run() method. However, I declared an instance array called phonebooks and tried to input the information received from the read() method into the array, but when I tried to output it through the run method, the array instances were not saved properly. There seems to be an issue where something isn&#39;t saving properly, how do I fix it?\r\n\r\n\r\n\r\n\r\n\r\n\r\n    import java.util.Scanner;\r\n    class Phone {\r\n        static private String name;\r\n        static private String tel;\r\n        public String getNum() {\r\n            return tel;\r\n        }\r\n        public String getName() {\r\n            return name;\r\n        }\r\n    \r\n        public Phone(String name, String tel) {\r\n            this.name = name;\r\n            this.tel = tel;\r\n    \r\n        }\r\n    }\r\n    \r\n    public class PhoneBook {\r\n        private Scanner scanner;\r\n        static int repeat;\r\n        static Phone[] phonebooks;\r\n        public PhoneBook() {\r\n            scanner = new Scanner(System.in);\r\n        }\r\n    \r\n        void read() {\r\n            System.out.print(&quot;Number of person to store? &gt;&gt; &quot;);\r\n            int repeat = scanner.nextInt();\r\n            Phone[] phonebooks = new Phone[repeat];\r\n            for (int i = 0; i &lt; repeat; i++) {\r\n                System.out.print(&quot;Name and Tel. No. &gt;&gt; &quot;);\r\n                String name = scanner.next();\r\n                String tel = scanner.next();\r\n                phonebooks[i] = new Phone(name, tel);\r\n                if (i == repeat - 1) break;\r\n            }\r\n            System.out.println(&quot;Saved.&quot;);\r\n        }\r\n    \r\n        void run() {\r\n            read();\r\n            while (true) {\r\n                System.out.print(&quot;Who do you wanna search for? &gt;&gt; &quot;);\r\n                String search = scanner.next();\r\n                if (search.equals(&quot;stop&quot;)) break;\r\n                int i;\r\n                for (i = 0; i &lt; repeat; i++) {\r\n                    if (phonebooks[i].getName() == search)\r\n                        System.out.println(search + &quot;&#39;s number is &quot; + phonebooks[i].getNum());\r\n                    break;\r\n                }\r\n            }\r\n            scanner.close();\r\n        }\r\n    \r\n    \r\n        public static void main(String[] args) {\r\n            new PhoneBook().run();\r\n        }\r\n    }\r\n\r\n","title":"Changing and using one object array in two methods","body":"<p>I'm making a phone class and a phone book class right now. The phone class declares name and phone number fields, and the phone book class has read and run methods. When run() method is executed in the main function, information is input through the read() method, and information is retrieved and output through the run() method. However, I declared an instance array called phonebooks and tried to input the information received from the read() method into the array, but when I tried to output it through the run method, the array instances were not saved properly. There seems to be an issue where something isn't saving properly, how do I fix it?</p>\n<pre><code>import java.util.Scanner;\nclass Phone {\n    static private String name;\n    static private String tel;\n    public String getNum() {\n        return tel;\n    }\n    public String getName() {\n        return name;\n    }\n\n    public Phone(String name, String tel) {\n        this.name = name;\n        this.tel = tel;\n\n    }\n}\n\npublic class PhoneBook {\n    private Scanner scanner;\n    static int repeat;\n    static Phone[] phonebooks;\n    public PhoneBook() {\n        scanner = new Scanner(System.in);\n    }\n\n    void read() {\n        System.out.print(&quot;Number of person to store? &gt;&gt; &quot;);\n        int repeat = scanner.nextInt();\n        Phone[] phonebooks = new Phone[repeat];\n        for (int i = 0; i &lt; repeat; i++) {\n            System.out.print(&quot;Name and Tel. No. &gt;&gt; &quot;);\n            String name = scanner.next();\n            String tel = scanner.next();\n            phonebooks[i] = new Phone(name, tel);\n            if (i == repeat - 1) break;\n        }\n        System.out.println(&quot;Saved.&quot;);\n    }\n\n    void run() {\n        read();\n        while (true) {\n            System.out.print(&quot;Who do you wanna search for? &gt;&gt; &quot;);\n            String search = scanner.next();\n            if (search.equals(&quot;stop&quot;)) break;\n            int i;\n            for (i = 0; i &lt; repeat; i++) {\n                if (phonebooks[i].getName() == search)\n                    System.out.println(search + &quot;'s number is &quot; + phonebooks[i].getNum());\n                break;\n            }\n        }\n        scanner.close();\n    }\n\n\n    public static void main(String[] args) {\n        new PhoneBook().run();\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","liquibase","testcontainers","changelog"],"answers":[{"tags":[],"owner":{"account_id":23150425,"reputation":21,"user_id":17252515,"display_name":"Adeel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636473571,"creation_date":1636473571,"answer_id":69901290,"question_id":69843065,"body_markdown":"You may just need this path `resources/db/changelog/db.changelog-test.xml` or this path: `../test/resources/db/changelog/db.changelog-test.xml`.","title":"Liquibase is unable to find changelog file for integration tests with versions 4.0 and higher","body":"<p>You may just need this path <code>resources/db/changelog/db.changelog-test.xml</code> or this path: <code>../test/resources/db/changelog/db.changelog-test.xml</code>.</p>\n"},{"tags":[],"owner":{"account_id":11841565,"reputation":1,"user_id":8665267,"display_name":"Mart&#237;n Battaglia"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649679463,"creation_date":1649679463,"answer_id":71827711,"question_id":69843065,"body_markdown":"Use a ClassLoaderResourceAccessor Instead of the FileSystemResourceAccessor:\r\n\r\n    ResourceAccessor resourceAccessor = new ClassLoaderResourceAccessor();\r\n\r\nThen, just access your changelog relatively to your resource folder:\r\n\r\n    new Liquibase(&quot;db/changelog/db.changelog-test.xml&quot;)","title":"Liquibase is unable to find changelog file for integration tests with versions 4.0 and higher","body":"<p>Use a ClassLoaderResourceAccessor Instead of the FileSystemResourceAccessor:</p>\n<pre><code>ResourceAccessor resourceAccessor = new ClassLoaderResourceAccessor();\n</code></pre>\n<p>Then, just access your changelog relatively to your resource folder:</p>\n<pre><code>new Liquibase(&quot;db/changelog/db.changelog-test.xml&quot;)\n</code></pre>\n"}],"owner":{"account_id":14731813,"reputation":35,"user_id":14650328,"display_name":"Aram"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2007,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1649679463,"creation_date":1636045066,"question_id":69843065,"body_markdown":"\r\nI have a Spring Boot test to check if the Gradle embedded Postgres database has been successfully created. I&#39;m using [TestContainers with the JDBC URL][1] and an init function for liquibase.\r\n\r\n```\r\npublic class TestcontainersPgIT {\r\n\r\n    public static final String EMBEDDED_JDBC_URL = &quot;jdbc:tc:postgresql:12.5://localhost:5432/postgres?TC_INITFUNCTION=&lt;package names&gt;.db.LiquibaseRunner::runUpdate&quot;;\r\n\r\n    @Test\r\n    public void testEmbeddedPg() throws Exception {\r\n        Connection conn = DriverManager.getConnection(EMBEDDED_JDBC_URL);\r\n        Statement statement = conn.createStatement();\r\n        ResultSet rs = statement.executeQuery(&quot;select 1&quot;);\r\n        assertTrue(rs.next());\r\n        String result = rs.getString(1);\r\n        assertEquals(&quot;1&quot;, result);\r\n    }\r\n\r\n```\r\n\r\nWhat happens above is that the line `Connection conn =...` will end up calling my liquibase runner function below.\r\n\r\n```\r\npublic final class LiquibaseRunner {\r\n\r\n    private LiquibaseRunner() {\r\n    }\r\n\r\n    public static void runUpdate(Connection connection) throws LiquibaseException {\r\n        Database database = DatabaseFactory.getInstance().findCorrectDatabaseImplementation(new JdbcConnection(connection));\r\n\r\n        Liquibase liquibase = new liquibase.Liquibase(&quot;src/test/resources/db/changelog/db.changelog-test.xml&quot;, new FileSystemResourceAccessor(), database);\r\n        liquibase.update(new Contexts(), new LabelExpression());\r\n\r\n\r\n```\r\n\r\nThe line that creates the new liquibase instance and passes in a path ( `Liquibase liquibase = new...` ) to the changelog file is the source off these errors in any Liquibase version &gt;= 4.0. It seems unable to find the changelog file inside my `tests/resources/db/changelog` directory.I know this directory is copied over into the JAR/Build when it is compiled so I know the files are there. The error it throws is shown below.\r\n\r\n```Caused by: liquibase.exception.ChangeLogParseException: The file src/test/resources/db/changelog/db.changelog-test.xml was not found in\r\nSpecifying files by absolute path was removed in Liquibase 4.0. Please use a relative path or add &#39;/&#39; to the classpath parameter.\r\n\tat liquibase.parser.core.xml.XMLChangeLogSAXParser.parseToNode(XMLChangeLogSAXParser.java:82)\r\n\tat liquibase.parser.core.xml.AbstractChangeLogParser.parse(AbstractChangeLogParser.java:15)\r\n\tat liquibase.Liquibase.getDatabaseChangeLog(Liquibase.java:377)\r\n\tat liquibase.Liquibase.lambda$update$1(Liquibase.java:230)\r\n\tat liquibase.Scope.lambda$child$0(Scope.java:160)\r\n\tat liquibase.Scope.child(Scope.java:169)\r\n\tat liquibase.Scope.child(Scope.java:159)\r\n\tat liquibase.Scope.child(Scope.java:138)\r\n\tat liquibase.Liquibase.runInScope(Liquibase.java:2369)\r\n\tat liquibase.Liquibase.update(Liquibase.java:217)\r\n\tat liquibase.Liquibase.update(Liquibase.java:203)\r\n```\r\n\r\nI&#39;ve tried many different file paths to be passed in, including using `class path` and relative file paths and it&#39;s still unable to find the changelog file for integration tests.\r\n\r\nFilepaths I&#39;ve tried\r\n1. `classpath:db/changelog/db.changelog-test.xml`\r\n2. `classpath:/db/changelog/db.changelog-test.xml`\r\n3. Relative file paths\r\n\r\n  [1]: https://www.testcontainers.org/modules/databases/jdbc/","title":"Liquibase is unable to find changelog file for integration tests with versions 4.0 and higher","body":"<p>I have a Spring Boot test to check if the Gradle embedded Postgres database has been successfully created. I'm using <a href=\"https://www.testcontainers.org/modules/databases/jdbc/\" rel=\"nofollow noreferrer\">TestContainers with the JDBC URL</a> and an init function for liquibase.</p>\n<pre><code>public class TestcontainersPgIT {\n\n    public static final String EMBEDDED_JDBC_URL = &quot;jdbc:tc:postgresql:12.5://localhost:5432/postgres?TC_INITFUNCTION=&lt;package names&gt;.db.LiquibaseRunner::runUpdate&quot;;\n\n    @Test\n    public void testEmbeddedPg() throws Exception {\n        Connection conn = DriverManager.getConnection(EMBEDDED_JDBC_URL);\n        Statement statement = conn.createStatement();\n        ResultSet rs = statement.executeQuery(&quot;select 1&quot;);\n        assertTrue(rs.next());\n        String result = rs.getString(1);\n        assertEquals(&quot;1&quot;, result);\n    }\n\n</code></pre>\n<p>What happens above is that the line <code>Connection conn =...</code> will end up calling my liquibase runner function below.</p>\n<pre><code>public final class LiquibaseRunner {\n\n    private LiquibaseRunner() {\n    }\n\n    public static void runUpdate(Connection connection) throws LiquibaseException {\n        Database database = DatabaseFactory.getInstance().findCorrectDatabaseImplementation(new JdbcConnection(connection));\n\n        Liquibase liquibase = new liquibase.Liquibase(&quot;src/test/resources/db/changelog/db.changelog-test.xml&quot;, new FileSystemResourceAccessor(), database);\n        liquibase.update(new Contexts(), new LabelExpression());\n\n\n</code></pre>\n<p>The line that creates the new liquibase instance and passes in a path ( <code>Liquibase liquibase = new...</code> ) to the changelog file is the source off these errors in any Liquibase version &gt;= 4.0. It seems unable to find the changelog file inside my <code>tests/resources/db/changelog</code> directory.I know this directory is copied over into the JAR/Build when it is compiled so I know the files are there. The error it throws is shown below.</p>\n<pre><code>Specifying files by absolute path was removed in Liquibase 4.0. Please use a relative path or add '/' to the classpath parameter.\n    at liquibase.parser.core.xml.XMLChangeLogSAXParser.parseToNode(XMLChangeLogSAXParser.java:82)\n    at liquibase.parser.core.xml.AbstractChangeLogParser.parse(AbstractChangeLogParser.java:15)\n    at liquibase.Liquibase.getDatabaseChangeLog(Liquibase.java:377)\n    at liquibase.Liquibase.lambda$update$1(Liquibase.java:230)\n    at liquibase.Scope.lambda$child$0(Scope.java:160)\n    at liquibase.Scope.child(Scope.java:169)\n    at liquibase.Scope.child(Scope.java:159)\n    at liquibase.Scope.child(Scope.java:138)\n    at liquibase.Liquibase.runInScope(Liquibase.java:2369)\n    at liquibase.Liquibase.update(Liquibase.java:217)\n    at liquibase.Liquibase.update(Liquibase.java:203)\n</code></pre>\n<p>I've tried many different file paths to be passed in, including using <code>class path</code> and relative file paths and it's still unable to find the changelog file for integration tests.</p>\n<p>Filepaths I've tried</p>\n<ol>\n<li><code>classpath:db/changelog/db.changelog-test.xml</code></li>\n<li><code>classpath:/db/changelog/db.changelog-test.xml</code></li>\n<li>Relative file paths</li>\n</ol>\n"},{"tags":["python","java","pdfbox","pypdf"],"comments":[{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1649676865,"post_id":71826777,"comment_id":126928643,"body_markdown":"is your question about pypdf or about pdfbox? What calls to PDFBox are you using, what parameters are you passing?","body":"is your question about pypdf or about pdfbox? What calls to PDFBox are you using, what parameters are you passing?"},{"owner":{"account_id":13962914,"reputation":161,"user_id":10083556,"display_name":"MOHAMED AZARUDEEN"},"score":0,"creation_date":1649678660,"post_id":71826777,"comment_id":126929338,"body_markdown":"I am using PDFBox  jar with my Python application. Hence I don&#39;t want to change anything on jar library since the error comes from JAR. I need to decrypt before pass the pdf to JAR.","body":"I am using PDFBox  jar with my Python application. Hence I don&#39;t want to change anything on jar library since the error comes from JAR. I need to decrypt before pass the pdf to JAR."},{"owner":{"account_id":22225922,"reputation":4268,"user_id":16462878,"display_name":"cards"},"score":0,"creation_date":1649679391,"post_id":71826777,"comment_id":126929606,"body_markdown":"Did you add it or was already like that? Have you tried to inspect the pdf.getDocumentInfo()? ‚Äì","body":"Did you add it or was already like that? Have you tried to inspect the pdf.getDocumentInfo()? ‚Äì"}],"owner":{"account_id":13962914,"reputation":161,"user_id":10083556,"display_name":"MOHAMED AZARUDEEN"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":640,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649679352,"creation_date":1649675398,"question_id":71826777,"body_markdown":"I am reading PDF through Python PYPDF. The PDF file which contains an encryption dictionary flags specifying the allowed operations (Signing: Not Allowed).\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI want to decrypt the PDF file. I used following but not working for me.\r\n\r\n    pdf = PdfFileReader(pdf_file, strict=False)\r\n    pdf.decrypt(b&#39;&#39;)\r\n    pdf.getPage(0)\r\n\r\n\r\nI got the following error when passing this pdf to JAVA library Apache PDFBox jar.\r\n    \r\n&gt; ERROR: PDF contains an encryption dictionary, please remove it with setAllSecurityToBeRemoved()\r\n\r\nHow to fix this in my python code before send pdf to Java library?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JEasQ.png","title":"How to decrypt a PDF which contains an encryption dictionary flags specifying the allowed operations - Python PYPDF2","body":"<p>I am reading PDF through Python PYPDF. The PDF file which contains an encryption dictionary flags specifying the allowed operations (Signing: Not Allowed).</p>\n<p><a href=\"https://i.stack.imgur.com/JEasQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JEasQ.png\" alt=\"enter image description here\" /></a></p>\n<p>I want to decrypt the PDF file. I used following but not working for me.</p>\n<pre><code>pdf = PdfFileReader(pdf_file, strict=False)\npdf.decrypt(b'')\npdf.getPage(0)\n</code></pre>\n<p>I got the following error when passing this pdf to JAVA library Apache PDFBox jar.</p>\n<blockquote>\n<p>ERROR: PDF contains an encryption dictionary, please remove it with setAllSecurityToBeRemoved()</p>\n</blockquote>\n<p>How to fix this in my python code before send pdf to Java library?</p>\n"},{"tags":["java","junit","junit5","spring-test"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":1,"creation_date":1649678059,"post_id":71827319,"comment_id":126929091,"body_markdown":"the problem here is that you are providing  a mock for a service call that doesn&#39;t occur. Just remove that specific mocking","body":"the problem here is that you are providing  a mock for a service call that doesn&#39;t occur. Just remove that specific mocking"}],"answers":[{"tags":[],"owner":{"account_id":997351,"reputation":1031,"user_id":1012978,"accept_rate":38,"display_name":"Milo van der Zee"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649679150,"creation_date":1649679150,"answer_id":71827636,"question_id":71827319,"body_markdown":"Your match for the mock might not match. You provide an &#39;angebot&#39; but that is a new object and does not match the &#39;angebot&#39; during the actual call. I think using something like &#39;any()&#39; is a better choice.\r\n\r\n    provideDruckdaten(eq(angebot), Mockito.anyMap())","title":"JUnit Test fails with error &quot;Wanted but not invoked&quot; - how to fix broken Unittest?","body":"<p>Your match for the mock might not match. You provide an 'angebot' but that is a new object and does not match the 'angebot' during the actual call. I think using something like 'any()' is a better choice.</p>\n<pre><code>provideDruckdaten(eq(angebot), Mockito.anyMap())\n</code></pre>\n"}],"owner":{"account_id":1134918,"reputation":530,"user_id":1120165,"accept_rate":96,"display_name":"DWA"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":403,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71827636,"answer_count":1,"score":0,"last_activity_date":1649679150,"creation_date":1649677719,"question_id":71827319,"body_markdown":"I have a Java class that I want to test; it should display a direct debit authorisation in a view: \r\n\r\n    package com.xxx.provider;\r\n    \r\n    import static xxx.Constants.DATE_FORMATTER;\r\n    \r\n    import com.xxx.business.druck.DruckDaten;\r\n    import com.xxx.business.druck.DruckKategorie;\r\n    import com.xxx.business.druck.DruckParameter;\r\n    import com.xxx.services.model.Angebot;\r\n    import com.xxx.services.model.Beitragszahler;\r\n    import com.xxx.services.model.Inkassodaten;\r\n    import com.xxx.services.model.partner.NatuerlichePerson;\r\n    import com.xxx.services.model.partner.Partner;\r\n    import com.xxx.services.model.partner.PartnerTyp;\r\n    import java.io.Serializable;\r\n    import java.time.LocalDate;\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    import java.util.stream.Collectors;\r\n    import lombok.RequiredArgsConstructor;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    @Component\r\n    @RequiredArgsConstructor\r\n    public class DruckDatenProviderSepaMandat extends AbstractAngebotAntragDruckdatenProvider {\r\n    \r\n      private static final String SEPAMANDAT_FO = &quot;sepamandat_konsolidiert.fo&quot;;\r\n    \r\n      private final AntragsnummerDruckdatenProvider antragsnummerDruckdatenProvider;\r\n    \r\n      public DruckDaten provideDruckdaten(\r\n          Angebot angebot,\r\n          Partner partner,\r\n          Beitragszahler beitragszahler,\r\n          NatuerlichePerson natuerlichePerson) {\r\n        DruckDaten druckDaten = new DruckDaten();\r\n        Map&lt;String, Serializable&gt; parameters = new HashMap&lt;&gt;();\r\n    \r\n        addBeitragszahler(parameters, angebot);\r\n        Inkassodaten inkassodaten = beitragszahler.getInkassodaten();\r\n        putAllgemeineDaten(parameters);\r\n    \r\n        mapWithFormatted(parameters, &quot;anwendung&quot;, &quot;ExpertOnline&quot;);\r\n        mapWithFormatted(parameters, &quot;antragsnummer&quot;, &quot;xxx&quot;);\r\n        mapWithFormatted(parameters, &quot;antragseinreichungsArt&quot;, &quot;xxx&quot;);\r\n        mapWithFormatted(parameters, &quot;antragsDatum&quot;, DATE_FORMATTER.format(LocalDate.now()));\r\n        mapWithFormatted(parameters, &quot;dokumentTyp&quot;, &quot;xxx&quot;);\r\n        mapWithFormatted(parameters, &quot;bic&quot;, inkassodaten.getBic());\r\n        mapWithFormatted(parameters, &quot;hausnummerBeitragszahler&quot;, &quot;xxx&quot;);\r\n        mapWithFormatted(parameters, &quot;iban&quot;, &quot;Grundfaehigkeit&quot;);\r\n        mapWithFormatted(parameters, &quot;istVoransicht&quot;, false);\r\n        mapWithFormatted(parameters, &quot;istTeilantrag&quot;, false);\r\n        mapWithFormatted(parameters, &quot;antragseinreichungsArt&quot;, &quot;Unterschrift&quot;);\r\n        mapWithFormatted(parameters, &quot;logischJa&quot;, true);\r\n        mapWithFormatted(parameters, &quot;logischNein&quot;, false);\r\n        mapWithFormatted(parameters, &quot;name&quot;, &quot;xxx&quot;);\r\n        mapWithFormatted(parameters, &quot;nameBeitragszahler&quot;, &quot;xxx&quot;);\r\n        if (partner.getNamenszusatz() != null) {\r\n          mapWithFormatted(parameters, &quot;namenszusatzBeitragszahler&quot;, partner.getNamenszusatz());\r\n        }\r\n        mapWithFormatted(parameters, &quot;ortBeitragszahler&quot;, partner.getZustelladresse().getOrtsname());\r\n        mapWithFormatted(\r\n            parameters, &quot;plzBeitragszahler&quot;, partner.getZustelladresse().getPostleitzahl());\r\n        mapWithFormatted(parameters, &quot;pnrBeitragszahler&quot;, partner.getPnr());\r\n        mapWithFormatted(parameters, &quot;rechtsformBeitragszahler&quot;, PartnerTyp.NATUERLICHE_PERSON);\r\n        mapWithFormatted(parameters, &quot;strasse&quot;, partner.getZustelladresse().getStrassenname());\r\n        mapWithFormatted(\r\n            parameters, &quot;strasseBeitragszahler&quot;, partner.getZustelladresse().getStrassenname());\r\n        mapWithFormatted(parameters, &quot;titelBeitragszahler&quot;, natuerlichePerson.getTitel());\r\n        mapWithFormatted(parameters, &quot;vornameBeitragszahler&quot;, partner.getName());\r\n    \r\n        antragsnummerDruckdatenProvider.provideDruckdaten(angebot, parameters);\r\n    \r\n        druckDaten.setKategorie(DruckKategorie.MANDAT);\r\n        druckDaten.setName(SEPAMANDAT_FO);\r\n        druckDaten.setBenoetigtVermittlerDaten(true);\r\n        druckDaten.setParameter(\r\n            parameters.entrySet().stream()\r\n                .map(entry -&gt; new DruckParameter(entry.getKey(), entry.getValue()))\r\n                .collect(Collectors.toList()));\r\n        return druckDaten;\r\n      }\r\n    \r\n      @Override\r\n      public DruckDaten provideDruckdaten(Angebot angebot) {\r\n        return null;\r\n      }\r\n    \r\n      public boolean isResponsibleFor(\r\n          DruckKategorie kategorie, Map&lt;String, String&gt; documentSpecificParam) {\r\n        return kategorie == DruckKategorie.MANDAT;\r\n      }\r\n    \r\n      @Override\r\n      public boolean isResponsibleFor(Angebot angebot, Map&lt;String, String&gt; druckstueckKeys) {\r\n        return super.isResponsibleFor(angebot, druckstueckKeys);\r\n      }\r\n    \r\n      @Override\r\n      public void mapWithFormatted(Map&lt;String, Serializable&gt; parameter, String key, Serializable value) {\r\n        super.mapWithFormatted(parameter, key, value);\r\n      }\r\n    \r\n      @Override\r\n      public boolean matchDruckKategorie(Map&lt;String, String&gt; druckstueckKey, DruckKategorie druckKategorie) {\r\n        return super.matchDruckKategorie(druckstueckKey, druckKategorie);\r\n      }\r\n    \r\n      @Override\r\n      public boolean isAntragValidMarkedSet(Map&lt;String, String&gt; druckstueckKeys) {\r\n        return super.isAntragValidMarkedSet(druckstueckKeys);\r\n      }\r\n    }\r\n\r\nThe Unit Test Class that is used to test this class looks like this: \r\n\r\n    package com.xxx.services.business.druck.provider;\r\n    \r\n    import static com.xxx.services.business.commons.Constants.DATE_FORMATTER;\r\n    import static org.mockito.ArgumentMatchers.eq;\r\n    import com.xxx.services.TestUtil;\r\n    import com.xxx.services.business.druck.DruckDaten;\r\n    import com.xxx.business.druck.DruckKategorie;\r\n    import com.xxx.services.model.Angebot;\r\n    import java.time.LocalDate;\r\n    import java.util.Arrays;\r\n    import org.assertj.core.api.SoftAssertions;\r\n    import org.assertj.core.api.WithAssertions;\r\n    import org.assertj.core.api.junit.jupiter.SoftAssertionsExtension;\r\n    import org.junit.jupiter.api.Test;\r\n    import org.junit.jupiter.api.extension.ExtendWith;\r\n    import org.mockito.InjectMocks;\r\n    import org.mockito.Mock;\r\n    import org.mockito.Mockito;\r\n    import org.mockito.junit.jupiter.MockitoExtension;\r\n    \r\n    @ExtendWith(MockitoExtension.class)\r\n    @SuppressWarnings(&quot;java:S2970&quot;)\r\n    @ExtendWith(SoftAssertionsExtension.class)\r\n    class DruckDatenProviderSepaMandatTest implements WithAssertions {\r\n    \r\n    \r\n      @Mock AntragsnummerDruckdatenProvider antragsnummerDruckdatenProvider;\r\n    \r\n      @InjectMocks\r\n      DruckDatenProviderSepaMandat druckDatenProviderSepaMandat;\r\n    \r\n      @Test\r\n      public void provideDruckdatenTest(SoftAssertions softly) {\r\n        // GIVEN\r\n        Angebot angebot = TestUtil.createAngebot();\r\n    \r\n        // WHEN\r\n        DruckDaten druckDaten = druckDatenProviderSepaMandat.provideDruckdaten(angebot);\r\n    \r\n        // THEN\r\n        softly.assertThat(druckDaten).isNotNull();\r\n        softly\r\n            .assertThat(druckDaten.get(&quot;antragsDatum&quot;))\r\n            .isEqualTo(DATE_FORMATTER.format(LocalDate.now()));\r\n        softly.assertThat(druckDaten.get(&quot;rechtsformBeitragszahler&quot;)).isEqualTo(&quot;Privatperson&quot;);\r\n        softly.assertThat(druckDaten.get(&quot;namenszusatzBeitragszahler&quot;)).isEqualTo(&quot;Namenszusatz&quot;);\r\n        softly.assertThat(druckDaten.get(&quot;titelBeitragszahler&quot;)).isEqualTo(&quot;Graf&quot;);\r\n        softly.assertThat(druckDaten.get(&quot;vornameBeitragszahler&quot;)).isEqualTo(&quot;xxx&quot;);\r\n        softly.assertThat(druckDaten.get(&quot;nameBeitragszahler&quot;)).isEqualTo(&quot;xxx&quot;);\r\n        softly.assertThat(druckDaten.get(&quot;pnrBeitragszahler&quot;)).isEqualTo(&quot;xxx&quot;);\r\n        softly.assertThat(druckDaten.get(&quot;plzBeitragszahler&quot;)).isEqualTo(&quot;xxx&quot;);\r\n        softly.assertThat(druckDaten.get(&quot;ortBeitragszahler&quot;)).isEqualTo(&quot;xxx&quot;);\r\n        softly.assertThat(druckDaten.get(&quot;strasseBeitragszahler&quot;)).isEqualTo(&quot;xxx.&quot;);\r\n        softly.assertThat(druckDaten.get(&quot;hausnummerBeitragszahler&quot;)).isEqualTo(&quot;x&quot;);\r\n        softly.assertThat(druckDaten.get(&quot;iban&quot;)).isEqualTo(&quot;xxxxxxxxxxxxxxxxx0000&quot;);\r\n        softly.assertThat(druckDaten.get(&quot;bic&quot;)).isEqualTo(&quot;BIC00000000&quot;);\r\n        softly.assertThat(druckDaten.get(&quot;bank&quot;)).isEqualTo(&quot;Kreditinstitut&quot;);\r\n      }\r\n    \r\n      @Test\r\n      public void antragsnummerTest(SoftAssertions softly) {\r\n        Angebot angebot = TestUtil.createAngebot();\r\n        angebot.getAntrag().setAntragsnummer(&quot;xxx&quot;);\r\n    \r\n        // THEN\r\n        DruckDaten daten = druckDatenProviderSepaMandat.provideDruckdaten(angebot);\r\n    \r\n        Mockito.verify(antragsnummerDruckdatenProvider, Mockito.times(1))\r\n            .provideDruckdaten(eq(angebot), Mockito.anyMap());\r\n      }\r\n    \r\n      @Test\r\n      public void isResponsibleFor(SoftAssertions softly) {\r\n        softly\r\n            .assertThat(druckDatenProviderSepaMandat.isResponsibleFor(DruckKategorie.MANDAT, null))\r\n            .isTrue();\r\n    \r\n        Arrays.stream(DruckKategorie.values())\r\n            .filter(druckKategorie -&gt; DruckKategorie.MANDAT != druckKategorie)\r\n            .forEach(\r\n                kategorie -&gt;\r\n                    softly\r\n                        .assertThat(druckDatenProviderSepaMandat.isResponsibleFor(kategorie, null))\r\n                        .isFalse());\r\n      }\r\n    }\r\n\r\nThe Test Class fails with the following errors that I couldn`t figure out myself although investing lot of web research; hence, I would be delighted for any useful hints on how to solve this errors and how to make the Test Class work again:\r\n\r\n\r\n    Wanted but not invoked:\r\n    antragsnummerDruckdatenProvider.provideDruckdaten(\r\n        Angebot(angebotId=null, angebotApiId=null, warenkorbApiId=xxx, provisionsbeitragssumme=null, antrag=Antrag(antragId=null, antragsnummer=xxx, antragsteller=Antragsteller(antragstellerId=null, gbs=00, partnerdaten=Partner(partnerId=null, natuerlichePerson=NatuerlichePerson(natuerlichePersonId=null, anrede=EINTRAG2, anredezusatz=null, titel=xxx, vorname=xxx, geburtsname=null, geburtsort=null, geburtsdatum=xxx, familienstand=UNBEKANNT, beruf=Experte), zustelladresse=Zustelladresse(zustelladresseId=null, laenderkennzeichen=EINTRAG51, postleitzahl=xxx, ortsname=xxx, ortsteilname=xxx, strassenname=xxx, hausnummer=x, adressmerkmal=EINTRAG0, adresszusatz=zusatz), onlineAdressen=[], telekommunikation=[], partnerTyp=NATUERLICHE_PERSON, rechtsform=EINTRAG1, name=xxx, namenszusatz=Namenszusatz, nationalitaet=EINTRAG0, pnr=xxx, arbeitgeber=null, branche=null, steuerid=null, telefonkontakt=null, partnergemeinschaftsart=null), brancheGbs=SONSTIGE, arbeitsverhaeltnisGbs=OHNE_TAETIGKEIT, vorhandeneAnbuendelungen=[xxx], sondervereinbarungArbeitgeber=[Sondervereinbarung(id=null, agpnr=null, agname=Arbeitgeber, agvereinb1=null, agvereinb2=null, agpnrLeben=null)], sondervereinbarungMitgliedschaften=[Sondervereinbarung(id=null, agpnr=null, agname=Mitgliedschaft, agvereinb1=null, agvereinb2=null, agpnrLeben=null)], bezugsperson=Bezugsperson(id=null, vorname=xxx, nachname=xxx, arbeitgeber=xxx, verwandtschaftsgrad=drei, gemeinsamerHaushalt=JA)), versichertePerson=VersichertePerson(id=null, gbs=null, partnerdaten=Partner(partnerId=null, natuerlichePerson=NatuerlichePerson(natuerlichePersonId=null, anrede=EINTRAG2, anredezusatz=null, titel=null, vorname=xxx, geburtsname=null, geburtsort=null, geburtsdatum=xxx, familienstand=UNBEKANNT, beruf=xxx), zustelladresse=Zustelladresse(zustelladresseId=null, laenderkennzeichen=EINTRAG51, postleitzahl=xxx, ortsname=xxx, ortsteilname=xxx, strassenname=xxx., hausnummer=x, adressmerkmal=EINTRAG0, adresszusatz=zusatz), onlineAdressen=[], telekommunikation=[], partnerTyp=NATUERLICHE_PERSON, rechtsform=EINTRAG1, name=Bl&#246;d, namenszusatz=null, nationalitaet=EINTRAG0, pnr=null, arbeitgeber=null, branche=null, steuerid=null, telefonkontakt=null, partnergemeinschaftsart=null), brancheGbs=null, arbeitsverhaeltnisGbs=null, compassInformation=CompassInformation(id=null, arbeitsverhaeltnis=ANGESTELLTE, berufsgruppe=BERUFSGRUPPE_1, risikoklasse=RISIKOKLASSE_1, xxx=xxx, xxx=null, berufsId=null), gesundheitsfragen=Gesundheitsfragen(id=null, anzeigepflichtbelehrungAnswer=false, beantworteteGesundheitsfragen=[]), xxx=false, xxx=xxx(id=null, mhsGewuenscht=JA, terminvereinbarungsart=PER_EMAIL, email=test@web.de, telefonnummer=Telekommunikation(telekommunikationId=null, telekommunikationArt=PRIVAT, telekommunikationTyp=FESTNETZ, landvorwahl=+49, vorwahl=xxx, rufnummer=xxx), zustelladresse=Zustelladresse(zustelladresseId=null, laenderkennzeichen=EINTRAG51, postleitzahl=xxx, ortsname=xxx, ortsteilname=xxx, strassenname=xxx, hausnummer=x, adressmerkmal=EINTRAG0, adresszusatz=zusatz), telefonischVon=xxx, telefonischBis=xxx, xxx=JA, xxx=aua)), bezugsberechtigtePerson=BezugsberechtigtePerson(id=0, naeheverhaeltnis=UNBEKANNT, artBezugsrechtErleben=WIDERRUFLICH, xxx=VERSICHERTE_PERSON, artNaeheverhaeltnis=null, gbs=null, brancheGbs=null, arbeitsverhaeltnisGbs=null, partnerdaten=Partner(partnerId=null, natuerlichePerson=NatuerlichePerson(natuerlichePersonId=null, anrede=EINTRAG2, anredezusatz=null, titel=null, vorname=xxx, geburtsname=null, geburtsort=null, geburtsdatum=xxx, familienstand=UNBEKANNT, beruf=xxx), zustelladresse=Zustelladresse(zustelladresseId=null, laenderkennzeichen=EINTRAG51, postleitzahl=xxx, ortsname=xxx, ortsteilname=xxx, strassenname=xxx, hausnummer=x, adressmerkmal=EINTRAG0, adresszusatz=zusatz), onlineAdressen=[], telekommunikation=[], partnerTyp=NATUERLICHE_PERSON, rechtsform=EINTRAG1, name=xxx, namenszusatz=null, nationalitaet=EINTRAG0, pnr=null, arbeitgeber=null, branche=null, steuerid=null, telefonkontakt=null, partnergemeinschaftsart=null)), beitragszahler=Beitragszahler(beitragszahlerId=null, gbs=null, partnerdaten=Partner(partnerId=null, natuerlichePerson=NatuerlichePerson(natuerlichePersonId=null, anrede=EINTRAG2, anredezusatz=null, titel=xxx, vorname=xxx, geburtsname=null, geburtsort=null, geburtsdatum=xxx, familienstand=UNBEKANNT, beruf=Experte), zustelladresse=Zustelladresse(zustelladresseId=null, laenderkennzeichen=EINTRAG51, postleitzahl=xxx, ortsname=xxx, ortsteilname=xxx, strassenname=xxx, hausnummer=x, adressmerkmal=EINTRAG0, adresszusatz=zusatz), onlineAdressen=[], telekommunikation=[], partnerTyp=NATUERLICHE_PERSON, rechtsform=EINTRAG1, name=xxx, namenszusatz=Namenszusatz, nationalitaet=EINTRAG0, pnr=xxx, arbeitgeber=null, branche=null, steuerid=null, telefonkontakt=null, partnergemeinschaftsart=null), brancheGbs=null, arbeitsverhaeltnisGbs=null, antragstellerGleichBeitragszahler=JA, inkassodaten=Inkassodaten(inkassodatenId=null, zahlungsart=LASTSCHRIFT, iban=xxx, bic=xxx, kreditinstitut=Kreditinstitut, mandatsreferenznummer=null, ibanErrorCode=null)), vermittlerdaten=xxx.services.model.xxx, beratungsprotokoll=Beratungsprotokoll(id=null, beratungZuSpaeteremTerminErwuenscht=NEIN, spaetereBeratungDatum=null, zusaetzlicheHinweiseAntragstellerVorhanden=NEIN, zusaetzlicheHinweiseAntragstellerText=null, beratenePersonNichtAntragsteller=NEIN, verhaeltnisBeratenePersonZumAntragsteller=null, beratenePerson=null, weitereTeilnehmerVorhanden=NEIN, ersterWeitererTeilnehmer=null, zweiterWeitererTeilnehmer=null, dritterWeitererTeilnehmer=null), aktionsnummer=null, aufnahmeort=EINTRAG0, kundeninformationMedium=DATEI_EMAIL, kundeninformationStand=null, nebenabredenVorhanden=NEIN, nebenabreden=null, endeSchulzeit=null, schweigepflichtentbindungErlebensfall=null, schweigepflichtentbindungTodesfall=null, kundeninformationEmailVersandt=false, antragValid=false), unternehmensKennzeichen=N, besondereAntragsaufnahme=NEIN, beratungsfragen=[Beratungsfrage(id=null, absicherung=null, type=BEITRAGS_DYNAMIK), Beratungsfrage(id=null, absicherung=null, type=SCHWERE_KRANKHEITEN), Beratungsfrage(id=null, absicherung=null, type=JAEHRLICHE_ERHOEHUNG_LEISTUNGSFALL), Beratungsfrage(id=null, absicherung=null, type=KRANKENTAGEGELD)], produktlinienfragen=[Produktlinienfrage(id=null, type=VERLUST_GLEICHGEWICHTSINN, ausgewaehlt=null), Produktlinienfrage(id=null, type=VERLUST_FINGERFERTIGKEIT, ausgewaehlt=null), Produktlinienfrage(id=null, type=VERLUST_INTELLEKTUELLE_FAEHIGKEITEN, ausgewaehlt=null), Produktlinienfrage(id=null, type=PLUS_EMPFOHLEN, ausgewaehlt=null), Produktlinienfrage(id=null, type=VERLUST_FAEHIGKEIT_EIGENVERANTWORTLICHES_HANDELN, ausgewaehlt=null), Produktlinienfrage(id=null, type=VERLUST_FAEHIGKEIT_AUTOFAHREN, ausgewaehlt=null)], risiken=[Risiko(id=null, kosten=Kosten(kostenId=null, gesamtzillmerKosten=4.45, amortisationsKosten=20.0, prozentualeAmortisationskosten=4.2, prozentualeUngezillmerteAbschlussAmortisationsKosten=4, absoluteUngezillmerteAbschlusskosten=25.0, prozentualeUngezillmerteAbschlusskosten=33.33, prozentualeEinmaligeGezillmerteAbschlusskosten=1.23, verwaltungsKosten=18.2, verwaltungsKostenLeistung=25.66, verwaltungsKostenBeitragsfrei=30.9, prozentualeVerwaltungskostenBeitrag=5, prozentualeVerwaltungskostenBeitragsfrei=5, absoluteAusProzentualeVerwaltungskostenBeitragsfrei=null, absoluteVerwaltungskostenLeistungsfall=400), risikoKennung=KRANKHEIT, tarifkennung=xxxx, tarifgeneration=2018_07, ueberschussverwendungssystem=VORWEGABZUG, leistungsende=2059-10-01, versicherungsende=2060-10-01, beitragszahlungsende=2058-10-01, beitrag=50, vorwegabzug=5, rente=null, versicherungssumme=24000), Risiko(id=null, kosten=Kosten(kostenId=null, gesamtzillmerKosten=12.45, amortisationsKosten=20.0, prozentualeAmortisationskosten=4.2, prozentualeUngezillmerteAbschlussAmortisationsKosten=4, absoluteUngezillmerteAbschlusskosten=25.0, prozentualeUngezillmerteAbschlusskosten=33.33, prozentualeEinmaligeGezillmerteAbschlusskosten=1.23, verwaltungsKosten=18.2, verwaltungsKostenLeistung=25.66, verwaltungsKostenBeitragsfrei=30.9, prozentualeVerwaltungskostenBeitrag=5, prozentualeVerwaltungskostenBeitragsfrei=5, absoluteAusProzentualeVerwaltungskostenBeitragsfrei=null, absoluteVerwaltungskostenLeistungsfall=null), risikoKennung=GRUNDFAEHIGKEIT, tarifkennung=GF, tarifgeneration=2018_07, ueberschussverwendungssystem=VORWEGABZUG, leistungsende=2056-10-01, versicherungsende=2057-10-01, beitragszahlungsende=2055-10-01, beitrag=100, vorwegabzug=15, rente=1000, versicherungssumme=null)], verlaeufe=[Verlaufzeile(verlaufzeileId=null, verlauftyp=GARANTIE_LEISTUNG_WERTE_OHNE_DYNAMIK, verlaufzeileIndex=0, verlaufzeileDatum=2021-05-15, beitragGesamt=10.1, renteGrundfaehigkeit=120.12, renteBeitragsfreiGrundfaeigkeit=11.11, versicherungssummeBeitragsfreiSchwereKrankheiten=13.13, stornoabschlag=5.0), Verlaufzeile(verlaufzeileId=null, verlauftyp=GARANTIE_LEISTUNG_WERTE_OHNE_DYNAMIK, verlaufzeileIndex=1, verlaufzeileDatum=2022-05-15, beitragGesamt=20.2, renteGrundfaehigkeit=230.22, renteBeitragsfreiGrundfaeigkeit=22.22, versicherungssummeBeitragsfreiSchwereKrankheiten=23.23, stornoabschlag=10.0), Verlaufzeile(verlaufzeileId=null, verlauftyp=GARANTIE_LEISTUNG_WERTE_MIT_DYNAMIK, verlaufzeileIndex=0, verlaufzeileDatum=2021-05-15, beitragGesamt=90.9, renteGrundfaehigkeit=920.92, renteBeitragsfreiGrundfaeigkeit=99.99, versicherungssummeBeitragsfreiSchwereKrankheiten=93.93, stornoabschlag=5.0)], vorversicherungsnummer=123456785, aktuellerStatus=UNVOLLSTAENDIG, bavGewuenscht=JA, vitaProtectGewuenscht=NEIN, produktEmpfehlung=GF, mitReduziertenAnfangsbeitraegen=DYNAMIK_UND_NACHVERSICHERUNGSGARANTIE, zahlungsrhythmus=VIERTELJAEHRLICH, prozentsatzDynamik=DYNAMIK_03, prozentsatzDynamikArt=INDIVIDUELL, berechnungsBasis=_RENTE, prozentsatzRentensteigerung=DYNAMIK_01, zahlungsrhythmusRente=MONATLICH, versicherungsbeginn=2020-06-01, mitPlusPaket=JA, mitSchwereKrankheiten=JA, berechnungsBasisBeitrag=150, berechnungsBasisRente=1000, gesamtBeitrag=333.33, berechnungsBasisDatum=ENDALTER, versicherungsEndalter=65, beitragszahlungsEndalter=66, leistungsEndalter=67, versicherungsDauerInMonaten=165, beitragszahlungsDauerInMonaten=266, leistungsDauerInMonaten=367, endalterMonatsgenauZumGeburtsdatum=JA, angebotValid=false),\r\n        &lt;any map&gt;\r\n    );\r\n    -&gt; at com.devk.vpu.grundfaehigkeit.services.business.druck.provider.DruckDatenProviderSepaMandatTest.antragsnummerTest(DruckDatenProviderSepaMandatTest.java:70)\r\n    Actually, there were zero interactions with this mock.\r\n    \r\n    Wanted but not invoked:\r\n(...)\r\n    -&gt; at com.xxx.DruckDatenProviderSepaMandatTest.antragsnummerTest(DruckDatenProviderSepaMandatTest.java:70)\r\n    Actually, there were zero interactions with this mock.\r\n    \r\n    \tat com.xxx.provider.DruckDatenProviderSepaMandatTest.antragsnummerTest(DruckDatenProviderSepaMandatTest.java:70)\r\n    \tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\r\n    \tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n    \tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\r\n    \tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\r\n    \tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\r\n    \tat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\r\n    \tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n    \tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\r\n    \tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:214)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:210)\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n    \tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n    \tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n    \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n    \tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n    \tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n    \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n    \tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n    \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\r\n    \tat org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\r\n    \tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\r\n    \tat com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\r\n    \tat com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\r\n    \tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\r\n    \tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\r\n    \tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\r\n\r\n\r\n\r\n","title":"JUnit Test fails with error &quot;Wanted but not invoked&quot; - how to fix broken Unittest?","body":"<p>I have a Java class that I want to test; it should display a direct debit authorisation in a view:</p>\n<pre><code>package com.xxx.provider;\n\nimport static xxx.Constants.DATE_FORMATTER;\n\nimport com.xxx.business.druck.DruckDaten;\nimport com.xxx.business.druck.DruckKategorie;\nimport com.xxx.business.druck.DruckParameter;\nimport com.xxx.services.model.Angebot;\nimport com.xxx.services.model.Beitragszahler;\nimport com.xxx.services.model.Inkassodaten;\nimport com.xxx.services.model.partner.NatuerlichePerson;\nimport com.xxx.services.model.partner.Partner;\nimport com.xxx.services.model.partner.PartnerTyp;\nimport java.io.Serializable;\nimport java.time.LocalDate;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.stream.Collectors;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Component;\n\n@Component\n@RequiredArgsConstructor\npublic class DruckDatenProviderSepaMandat extends AbstractAngebotAntragDruckdatenProvider {\n\n  private static final String SEPAMANDAT_FO = &quot;sepamandat_konsolidiert.fo&quot;;\n\n  private final AntragsnummerDruckdatenProvider antragsnummerDruckdatenProvider;\n\n  public DruckDaten provideDruckdaten(\n      Angebot angebot,\n      Partner partner,\n      Beitragszahler beitragszahler,\n      NatuerlichePerson natuerlichePerson) {\n    DruckDaten druckDaten = new DruckDaten();\n    Map&lt;String, Serializable&gt; parameters = new HashMap&lt;&gt;();\n\n    addBeitragszahler(parameters, angebot);\n    Inkassodaten inkassodaten = beitragszahler.getInkassodaten();\n    putAllgemeineDaten(parameters);\n\n    mapWithFormatted(parameters, &quot;anwendung&quot;, &quot;ExpertOnline&quot;);\n    mapWithFormatted(parameters, &quot;antragsnummer&quot;, &quot;xxx&quot;);\n    mapWithFormatted(parameters, &quot;antragseinreichungsArt&quot;, &quot;xxx&quot;);\n    mapWithFormatted(parameters, &quot;antragsDatum&quot;, DATE_FORMATTER.format(LocalDate.now()));\n    mapWithFormatted(parameters, &quot;dokumentTyp&quot;, &quot;xxx&quot;);\n    mapWithFormatted(parameters, &quot;bic&quot;, inkassodaten.getBic());\n    mapWithFormatted(parameters, &quot;hausnummerBeitragszahler&quot;, &quot;xxx&quot;);\n    mapWithFormatted(parameters, &quot;iban&quot;, &quot;Grundfaehigkeit&quot;);\n    mapWithFormatted(parameters, &quot;istVoransicht&quot;, false);\n    mapWithFormatted(parameters, &quot;istTeilantrag&quot;, false);\n    mapWithFormatted(parameters, &quot;antragseinreichungsArt&quot;, &quot;Unterschrift&quot;);\n    mapWithFormatted(parameters, &quot;logischJa&quot;, true);\n    mapWithFormatted(parameters, &quot;logischNein&quot;, false);\n    mapWithFormatted(parameters, &quot;name&quot;, &quot;xxx&quot;);\n    mapWithFormatted(parameters, &quot;nameBeitragszahler&quot;, &quot;xxx&quot;);\n    if (partner.getNamenszusatz() != null) {\n      mapWithFormatted(parameters, &quot;namenszusatzBeitragszahler&quot;, partner.getNamenszusatz());\n    }\n    mapWithFormatted(parameters, &quot;ortBeitragszahler&quot;, partner.getZustelladresse().getOrtsname());\n    mapWithFormatted(\n        parameters, &quot;plzBeitragszahler&quot;, partner.getZustelladresse().getPostleitzahl());\n    mapWithFormatted(parameters, &quot;pnrBeitragszahler&quot;, partner.getPnr());\n    mapWithFormatted(parameters, &quot;rechtsformBeitragszahler&quot;, PartnerTyp.NATUERLICHE_PERSON);\n    mapWithFormatted(parameters, &quot;strasse&quot;, partner.getZustelladresse().getStrassenname());\n    mapWithFormatted(\n        parameters, &quot;strasseBeitragszahler&quot;, partner.getZustelladresse().getStrassenname());\n    mapWithFormatted(parameters, &quot;titelBeitragszahler&quot;, natuerlichePerson.getTitel());\n    mapWithFormatted(parameters, &quot;vornameBeitragszahler&quot;, partner.getName());\n\n    antragsnummerDruckdatenProvider.provideDruckdaten(angebot, parameters);\n\n    druckDaten.setKategorie(DruckKategorie.MANDAT);\n    druckDaten.setName(SEPAMANDAT_FO);\n    druckDaten.setBenoetigtVermittlerDaten(true);\n    druckDaten.setParameter(\n        parameters.entrySet().stream()\n            .map(entry -&gt; new DruckParameter(entry.getKey(), entry.getValue()))\n            .collect(Collectors.toList()));\n    return druckDaten;\n  }\n\n  @Override\n  public DruckDaten provideDruckdaten(Angebot angebot) {\n    return null;\n  }\n\n  public boolean isResponsibleFor(\n      DruckKategorie kategorie, Map&lt;String, String&gt; documentSpecificParam) {\n    return kategorie == DruckKategorie.MANDAT;\n  }\n\n  @Override\n  public boolean isResponsibleFor(Angebot angebot, Map&lt;String, String&gt; druckstueckKeys) {\n    return super.isResponsibleFor(angebot, druckstueckKeys);\n  }\n\n  @Override\n  public void mapWithFormatted(Map&lt;String, Serializable&gt; parameter, String key, Serializable value) {\n    super.mapWithFormatted(parameter, key, value);\n  }\n\n  @Override\n  public boolean matchDruckKategorie(Map&lt;String, String&gt; druckstueckKey, DruckKategorie druckKategorie) {\n    return super.matchDruckKategorie(druckstueckKey, druckKategorie);\n  }\n\n  @Override\n  public boolean isAntragValidMarkedSet(Map&lt;String, String&gt; druckstueckKeys) {\n    return super.isAntragValidMarkedSet(druckstueckKeys);\n  }\n}\n</code></pre>\n<p>The Unit Test Class that is used to test this class looks like this:</p>\n<pre><code>package com.xxx.services.business.druck.provider;\n\nimport static com.xxx.services.business.commons.Constants.DATE_FORMATTER;\nimport static org.mockito.ArgumentMatchers.eq;\nimport com.xxx.services.TestUtil;\nimport com.xxx.services.business.druck.DruckDaten;\nimport com.xxx.business.druck.DruckKategorie;\nimport com.xxx.services.model.Angebot;\nimport java.time.LocalDate;\nimport java.util.Arrays;\nimport org.assertj.core.api.SoftAssertions;\nimport org.assertj.core.api.WithAssertions;\nimport org.assertj.core.api.junit.jupiter.SoftAssertionsExtension;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.mockito.InjectMocks;\nimport org.mockito.Mock;\nimport org.mockito.Mockito;\nimport org.mockito.junit.jupiter.MockitoExtension;\n\n@ExtendWith(MockitoExtension.class)\n@SuppressWarnings(&quot;java:S2970&quot;)\n@ExtendWith(SoftAssertionsExtension.class)\nclass DruckDatenProviderSepaMandatTest implements WithAssertions {\n\n\n  @Mock AntragsnummerDruckdatenProvider antragsnummerDruckdatenProvider;\n\n  @InjectMocks\n  DruckDatenProviderSepaMandat druckDatenProviderSepaMandat;\n\n  @Test\n  public void provideDruckdatenTest(SoftAssertions softly) {\n    // GIVEN\n    Angebot angebot = TestUtil.createAngebot();\n\n    // WHEN\n    DruckDaten druckDaten = druckDatenProviderSepaMandat.provideDruckdaten(angebot);\n\n    // THEN\n    softly.assertThat(druckDaten).isNotNull();\n    softly\n        .assertThat(druckDaten.get(&quot;antragsDatum&quot;))\n        .isEqualTo(DATE_FORMATTER.format(LocalDate.now()));\n    softly.assertThat(druckDaten.get(&quot;rechtsformBeitragszahler&quot;)).isEqualTo(&quot;Privatperson&quot;);\n    softly.assertThat(druckDaten.get(&quot;namenszusatzBeitragszahler&quot;)).isEqualTo(&quot;Namenszusatz&quot;);\n    softly.assertThat(druckDaten.get(&quot;titelBeitragszahler&quot;)).isEqualTo(&quot;Graf&quot;);\n    softly.assertThat(druckDaten.get(&quot;vornameBeitragszahler&quot;)).isEqualTo(&quot;xxx&quot;);\n    softly.assertThat(druckDaten.get(&quot;nameBeitragszahler&quot;)).isEqualTo(&quot;xxx&quot;);\n    softly.assertThat(druckDaten.get(&quot;pnrBeitragszahler&quot;)).isEqualTo(&quot;xxx&quot;);\n    softly.assertThat(druckDaten.get(&quot;plzBeitragszahler&quot;)).isEqualTo(&quot;xxx&quot;);\n    softly.assertThat(druckDaten.get(&quot;ortBeitragszahler&quot;)).isEqualTo(&quot;xxx&quot;);\n    softly.assertThat(druckDaten.get(&quot;strasseBeitragszahler&quot;)).isEqualTo(&quot;xxx.&quot;);\n    softly.assertThat(druckDaten.get(&quot;hausnummerBeitragszahler&quot;)).isEqualTo(&quot;x&quot;);\n    softly.assertThat(druckDaten.get(&quot;iban&quot;)).isEqualTo(&quot;xxxxxxxxxxxxxxxxx0000&quot;);\n    softly.assertThat(druckDaten.get(&quot;bic&quot;)).isEqualTo(&quot;BIC00000000&quot;);\n    softly.assertThat(druckDaten.get(&quot;bank&quot;)).isEqualTo(&quot;Kreditinstitut&quot;);\n  }\n\n  @Test\n  public void antragsnummerTest(SoftAssertions softly) {\n    Angebot angebot = TestUtil.createAngebot();\n    angebot.getAntrag().setAntragsnummer(&quot;xxx&quot;);\n\n    // THEN\n    DruckDaten daten = druckDatenProviderSepaMandat.provideDruckdaten(angebot);\n\n    Mockito.verify(antragsnummerDruckdatenProvider, Mockito.times(1))\n        .provideDruckdaten(eq(angebot), Mockito.anyMap());\n  }\n\n  @Test\n  public void isResponsibleFor(SoftAssertions softly) {\n    softly\n        .assertThat(druckDatenProviderSepaMandat.isResponsibleFor(DruckKategorie.MANDAT, null))\n        .isTrue();\n\n    Arrays.stream(DruckKategorie.values())\n        .filter(druckKategorie -&gt; DruckKategorie.MANDAT != druckKategorie)\n        .forEach(\n            kategorie -&gt;\n                softly\n                    .assertThat(druckDatenProviderSepaMandat.isResponsibleFor(kategorie, null))\n                    .isFalse());\n  }\n}\n</code></pre>\n<p>The Test Class fails with the following errors that I couldn`t figure out myself although investing lot of web research; hence, I would be delighted for any useful hints on how to solve this errors and how to make the Test Class work again:</p>\n<pre><code>Wanted but not invoked:\nantragsnummerDruckdatenProvider.provideDruckdaten(\n    Angebot(angebotId=null, angebotApiId=null, warenkorbApiId=xxx, provisionsbeitragssumme=null, antrag=Antrag(antragId=null, antragsnummer=xxx, antragsteller=Antragsteller(antragstellerId=null, gbs=00, partnerdaten=Partner(partnerId=null, natuerlichePerson=NatuerlichePerson(natuerlichePersonId=null, anrede=EINTRAG2, anredezusatz=null, titel=xxx, vorname=xxx, geburtsname=null, geburtsort=null, geburtsdatum=xxx, familienstand=UNBEKANNT, beruf=Experte), zustelladresse=Zustelladresse(zustelladresseId=null, laenderkennzeichen=EINTRAG51, postleitzahl=xxx, ortsname=xxx, ortsteilname=xxx, strassenname=xxx, hausnummer=x, adressmerkmal=EINTRAG0, adresszusatz=zusatz), onlineAdressen=[], telekommunikation=[], partnerTyp=NATUERLICHE_PERSON, rechtsform=EINTRAG1, name=xxx, namenszusatz=Namenszusatz, nationalitaet=EINTRAG0, pnr=xxx, arbeitgeber=null, branche=null, steuerid=null, telefonkontakt=null, partnergemeinschaftsart=null), brancheGbs=SONSTIGE, arbeitsverhaeltnisGbs=OHNE_TAETIGKEIT, vorhandeneAnbuendelungen=[xxx], sondervereinbarungArbeitgeber=[Sondervereinbarung(id=null, agpnr=null, agname=Arbeitgeber, agvereinb1=null, agvereinb2=null, agpnrLeben=null)], sondervereinbarungMitgliedschaften=[Sondervereinbarung(id=null, agpnr=null, agname=Mitgliedschaft, agvereinb1=null, agvereinb2=null, agpnrLeben=null)], bezugsperson=Bezugsperson(id=null, vorname=xxx, nachname=xxx, arbeitgeber=xxx, verwandtschaftsgrad=drei, gemeinsamerHaushalt=JA)), versichertePerson=VersichertePerson(id=null, gbs=null, partnerdaten=Partner(partnerId=null, natuerlichePerson=NatuerlichePerson(natuerlichePersonId=null, anrede=EINTRAG2, anredezusatz=null, titel=null, vorname=xxx, geburtsname=null, geburtsort=null, geburtsdatum=xxx, familienstand=UNBEKANNT, beruf=xxx), zustelladresse=Zustelladresse(zustelladresseId=null, laenderkennzeichen=EINTRAG51, postleitzahl=xxx, ortsname=xxx, ortsteilname=xxx, strassenname=xxx., hausnummer=x, adressmerkmal=EINTRAG0, adresszusatz=zusatz), onlineAdressen=[], telekommunikation=[], partnerTyp=NATUERLICHE_PERSON, rechtsform=EINTRAG1, name=Bl√∂d, namenszusatz=null, nationalitaet=EINTRAG0, pnr=null, arbeitgeber=null, branche=null, steuerid=null, telefonkontakt=null, partnergemeinschaftsart=null), brancheGbs=null, arbeitsverhaeltnisGbs=null, compassInformation=CompassInformation(id=null, arbeitsverhaeltnis=ANGESTELLTE, berufsgruppe=BERUFSGRUPPE_1, risikoklasse=RISIKOKLASSE_1, xxx=xxx, xxx=null, berufsId=null), gesundheitsfragen=Gesundheitsfragen(id=null, anzeigepflichtbelehrungAnswer=false, beantworteteGesundheitsfragen=[]), xxx=false, xxx=xxx(id=null, mhsGewuenscht=JA, terminvereinbarungsart=PER_EMAIL, email=test@web.de, telefonnummer=Telekommunikation(telekommunikationId=null, telekommunikationArt=PRIVAT, telekommunikationTyp=FESTNETZ, landvorwahl=+49, vorwahl=xxx, rufnummer=xxx), zustelladresse=Zustelladresse(zustelladresseId=null, laenderkennzeichen=EINTRAG51, postleitzahl=xxx, ortsname=xxx, ortsteilname=xxx, strassenname=xxx, hausnummer=x, adressmerkmal=EINTRAG0, adresszusatz=zusatz), telefonischVon=xxx, telefonischBis=xxx, xxx=JA, xxx=aua)), bezugsberechtigtePerson=BezugsberechtigtePerson(id=0, naeheverhaeltnis=UNBEKANNT, artBezugsrechtErleben=WIDERRUFLICH, xxx=VERSICHERTE_PERSON, artNaeheverhaeltnis=null, gbs=null, brancheGbs=null, arbeitsverhaeltnisGbs=null, partnerdaten=Partner(partnerId=null, natuerlichePerson=NatuerlichePerson(natuerlichePersonId=null, anrede=EINTRAG2, anredezusatz=null, titel=null, vorname=xxx, geburtsname=null, geburtsort=null, geburtsdatum=xxx, familienstand=UNBEKANNT, beruf=xxx), zustelladresse=Zustelladresse(zustelladresseId=null, laenderkennzeichen=EINTRAG51, postleitzahl=xxx, ortsname=xxx, ortsteilname=xxx, strassenname=xxx, hausnummer=x, adressmerkmal=EINTRAG0, adresszusatz=zusatz), onlineAdressen=[], telekommunikation=[], partnerTyp=NATUERLICHE_PERSON, rechtsform=EINTRAG1, name=xxx, namenszusatz=null, nationalitaet=EINTRAG0, pnr=null, arbeitgeber=null, branche=null, steuerid=null, telefonkontakt=null, partnergemeinschaftsart=null)), beitragszahler=Beitragszahler(beitragszahlerId=null, gbs=null, partnerdaten=Partner(partnerId=null, natuerlichePerson=NatuerlichePerson(natuerlichePersonId=null, anrede=EINTRAG2, anredezusatz=null, titel=xxx, vorname=xxx, geburtsname=null, geburtsort=null, geburtsdatum=xxx, familienstand=UNBEKANNT, beruf=Experte), zustelladresse=Zustelladresse(zustelladresseId=null, laenderkennzeichen=EINTRAG51, postleitzahl=xxx, ortsname=xxx, ortsteilname=xxx, strassenname=xxx, hausnummer=x, adressmerkmal=EINTRAG0, adresszusatz=zusatz), onlineAdressen=[], telekommunikation=[], partnerTyp=NATUERLICHE_PERSON, rechtsform=EINTRAG1, name=xxx, namenszusatz=Namenszusatz, nationalitaet=EINTRAG0, pnr=xxx, arbeitgeber=null, branche=null, steuerid=null, telefonkontakt=null, partnergemeinschaftsart=null), brancheGbs=null, arbeitsverhaeltnisGbs=null, antragstellerGleichBeitragszahler=JA, inkassodaten=Inkassodaten(inkassodatenId=null, zahlungsart=LASTSCHRIFT, iban=xxx, bic=xxx, kreditinstitut=Kreditinstitut, mandatsreferenznummer=null, ibanErrorCode=null)), vermittlerdaten=xxx.services.model.xxx, beratungsprotokoll=Beratungsprotokoll(id=null, beratungZuSpaeteremTerminErwuenscht=NEIN, spaetereBeratungDatum=null, zusaetzlicheHinweiseAntragstellerVorhanden=NEIN, zusaetzlicheHinweiseAntragstellerText=null, beratenePersonNichtAntragsteller=NEIN, verhaeltnisBeratenePersonZumAntragsteller=null, beratenePerson=null, weitereTeilnehmerVorhanden=NEIN, ersterWeitererTeilnehmer=null, zweiterWeitererTeilnehmer=null, dritterWeitererTeilnehmer=null), aktionsnummer=null, aufnahmeort=EINTRAG0, kundeninformationMedium=DATEI_EMAIL, kundeninformationStand=null, nebenabredenVorhanden=NEIN, nebenabreden=null, endeSchulzeit=null, schweigepflichtentbindungErlebensfall=null, schweigepflichtentbindungTodesfall=null, kundeninformationEmailVersandt=false, antragValid=false), unternehmensKennzeichen=N, besondereAntragsaufnahme=NEIN, beratungsfragen=[Beratungsfrage(id=null, absicherung=null, type=BEITRAGS_DYNAMIK), Beratungsfrage(id=null, absicherung=null, type=SCHWERE_KRANKHEITEN), Beratungsfrage(id=null, absicherung=null, type=JAEHRLICHE_ERHOEHUNG_LEISTUNGSFALL), Beratungsfrage(id=null, absicherung=null, type=KRANKENTAGEGELD)], produktlinienfragen=[Produktlinienfrage(id=null, type=VERLUST_GLEICHGEWICHTSINN, ausgewaehlt=null), Produktlinienfrage(id=null, type=VERLUST_FINGERFERTIGKEIT, ausgewaehlt=null), Produktlinienfrage(id=null, type=VERLUST_INTELLEKTUELLE_FAEHIGKEITEN, ausgewaehlt=null), Produktlinienfrage(id=null, type=PLUS_EMPFOHLEN, ausgewaehlt=null), Produktlinienfrage(id=null, type=VERLUST_FAEHIGKEIT_EIGENVERANTWORTLICHES_HANDELN, ausgewaehlt=null), Produktlinienfrage(id=null, type=VERLUST_FAEHIGKEIT_AUTOFAHREN, ausgewaehlt=null)], risiken=[Risiko(id=null, kosten=Kosten(kostenId=null, gesamtzillmerKosten=4.45, amortisationsKosten=20.0, prozentualeAmortisationskosten=4.2, prozentualeUngezillmerteAbschlussAmortisationsKosten=4, absoluteUngezillmerteAbschlusskosten=25.0, prozentualeUngezillmerteAbschlusskosten=33.33, prozentualeEinmaligeGezillmerteAbschlusskosten=1.23, verwaltungsKosten=18.2, verwaltungsKostenLeistung=25.66, verwaltungsKostenBeitragsfrei=30.9, prozentualeVerwaltungskostenBeitrag=5, prozentualeVerwaltungskostenBeitragsfrei=5, absoluteAusProzentualeVerwaltungskostenBeitragsfrei=null, absoluteVerwaltungskostenLeistungsfall=400), risikoKennung=KRANKHEIT, tarifkennung=xxxx, tarifgeneration=2018_07, ueberschussverwendungssystem=VORWEGABZUG, leistungsende=2059-10-01, versicherungsende=2060-10-01, beitragszahlungsende=2058-10-01, beitrag=50, vorwegabzug=5, rente=null, versicherungssumme=24000), Risiko(id=null, kosten=Kosten(kostenId=null, gesamtzillmerKosten=12.45, amortisationsKosten=20.0, prozentualeAmortisationskosten=4.2, prozentualeUngezillmerteAbschlussAmortisationsKosten=4, absoluteUngezillmerteAbschlusskosten=25.0, prozentualeUngezillmerteAbschlusskosten=33.33, prozentualeEinmaligeGezillmerteAbschlusskosten=1.23, verwaltungsKosten=18.2, verwaltungsKostenLeistung=25.66, verwaltungsKostenBeitragsfrei=30.9, prozentualeVerwaltungskostenBeitrag=5, prozentualeVerwaltungskostenBeitragsfrei=5, absoluteAusProzentualeVerwaltungskostenBeitragsfrei=null, absoluteVerwaltungskostenLeistungsfall=null), risikoKennung=GRUNDFAEHIGKEIT, tarifkennung=GF, tarifgeneration=2018_07, ueberschussverwendungssystem=VORWEGABZUG, leistungsende=2056-10-01, versicherungsende=2057-10-01, beitragszahlungsende=2055-10-01, beitrag=100, vorwegabzug=15, rente=1000, versicherungssumme=null)], verlaeufe=[Verlaufzeile(verlaufzeileId=null, verlauftyp=GARANTIE_LEISTUNG_WERTE_OHNE_DYNAMIK, verlaufzeileIndex=0, verlaufzeileDatum=2021-05-15, beitragGesamt=10.1, renteGrundfaehigkeit=120.12, renteBeitragsfreiGrundfaeigkeit=11.11, versicherungssummeBeitragsfreiSchwereKrankheiten=13.13, stornoabschlag=5.0), Verlaufzeile(verlaufzeileId=null, verlauftyp=GARANTIE_LEISTUNG_WERTE_OHNE_DYNAMIK, verlaufzeileIndex=1, verlaufzeileDatum=2022-05-15, beitragGesamt=20.2, renteGrundfaehigkeit=230.22, renteBeitragsfreiGrundfaeigkeit=22.22, versicherungssummeBeitragsfreiSchwereKrankheiten=23.23, stornoabschlag=10.0), Verlaufzeile(verlaufzeileId=null, verlauftyp=GARANTIE_LEISTUNG_WERTE_MIT_DYNAMIK, verlaufzeileIndex=0, verlaufzeileDatum=2021-05-15, beitragGesamt=90.9, renteGrundfaehigkeit=920.92, renteBeitragsfreiGrundfaeigkeit=99.99, versicherungssummeBeitragsfreiSchwereKrankheiten=93.93, stornoabschlag=5.0)], vorversicherungsnummer=123456785, aktuellerStatus=UNVOLLSTAENDIG, bavGewuenscht=JA, vitaProtectGewuenscht=NEIN, produktEmpfehlung=GF, mitReduziertenAnfangsbeitraegen=DYNAMIK_UND_NACHVERSICHERUNGSGARANTIE, zahlungsrhythmus=VIERTELJAEHRLICH, prozentsatzDynamik=DYNAMIK_03, prozentsatzDynamikArt=INDIVIDUELL, berechnungsBasis=_RENTE, prozentsatzRentensteigerung=DYNAMIK_01, zahlungsrhythmusRente=MONATLICH, versicherungsbeginn=2020-06-01, mitPlusPaket=JA, mitSchwereKrankheiten=JA, berechnungsBasisBeitrag=150, berechnungsBasisRente=1000, gesamtBeitrag=333.33, berechnungsBasisDatum=ENDALTER, versicherungsEndalter=65, beitragszahlungsEndalter=66, leistungsEndalter=67, versicherungsDauerInMonaten=165, beitragszahlungsDauerInMonaten=266, leistungsDauerInMonaten=367, endalterMonatsgenauZumGeburtsdatum=JA, angebotValid=false),\n    &lt;any map&gt;\n);\n-&gt; at com.devk.vpu.grundfaehigkeit.services.business.druck.provider.DruckDatenProviderSepaMandatTest.antragsnummerTest(DruckDatenProviderSepaMandatTest.java:70)\nActually, there were zero interactions with this mock.\n\nWanted but not invoked:\n</code></pre>\n<p>(...)\n-&gt; at com.xxx.DruckDatenProviderSepaMandatTest.antragsnummerTest(DruckDatenProviderSepaMandatTest.java:70)\nActually, there were zero interactions with this mock.</p>\n<pre><code>    at com.xxx.provider.DruckDatenProviderSepaMandatTest.antragsnummerTest(DruckDatenProviderSepaMandatTest.java:70)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\n    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:214)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:210)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\n    at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\n</code></pre>\n"},{"tags":["java","spring","spring-boot","vpn"],"comments":[{"owner":{"account_id":5363666,"reputation":1950,"user_id":4274223,"display_name":"Gregorio Palam&#224;"},"score":3,"creation_date":1631186432,"post_id":69117236,"comment_id":122157820,"body_markdown":"It&#39;s not the Spring Boot application that needs to connect to the VPN, but the underlying system needs to. If you&#39;re deploying the application to a server, that server needs to connect to the VPN","body":"It&#39;s not the Spring Boot application that needs to connect to the VPN, but the underlying system needs to. If you&#39;re deploying the application to a server, that server needs to connect to the VPN"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1631191781,"post_id":69117236,"comment_id":122160179,"body_markdown":"A similar question was asked a few hours ago.  See https://stackoverflow.com/questions/69113833.  The answer to this one is basically the same.  There is no Java API to connect to a VPN in general.  Some specific JPN products *may* offer Java libraries ... but a better idea is to do the connection setup outside of Java ... using whatever tools the VPN product provides.","body":"A similar question was asked a few hours ago.  See <a href=\"https://stackoverflow.com/questions/69113833\">stackoverflow.com/questions/69113833</a>.  The answer to this one is basically the same.  There is no Java API to connect to a VPN in general.  Some specific JPN products <i>may</i> offer Java libraries ... but a better idea is to do the connection setup outside of Java ... using whatever tools the VPN product provides."},{"owner":{"account_id":22701851,"reputation":11,"user_id":16869144,"display_name":"Manoj Popalghat"},"score":0,"creation_date":1631520389,"post_id":69117236,"comment_id":122234373,"body_markdown":"@GregorioPalam&#224; Thank you, but I how did server will connect to vpn ?","body":"@GregorioPalam&#224; Thank you, but I how did server will connect to vpn ?"},{"owner":{"account_id":22701851,"reputation":11,"user_id":16869144,"display_name":"Manoj Popalghat"},"score":0,"creation_date":1631520709,"post_id":69117236,"comment_id":122234511,"body_markdown":"Thank you @StephenC for the link [is-there-a-way-to-connect-to-rest-api-which-is-behind-a-vpn-connection-in-java](https://stackoverflow.com/questions/69113833/is-there-a-way-to-connect-to-rest-api-which-is-behind-a-vpn-connection-in-java)","body":"Thank you @StephenC for the link <a href=\"https://stackoverflow.com/questions/69113833/is-there-a-way-to-connect-to-rest-api-which-is-behind-a-vpn-connection-in-java\">is-there-a-way-to-connect-to-rest-api-which-is-behind-a-vpn-&zwnj;&#8203;connection-in-java</a>"}],"owner":{"account_id":22701851,"reputation":11,"user_id":16869144,"display_name":"Manoj Popalghat"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1380,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1649678661,"creation_date":1631186268,"question_id":69117236,"body_markdown":"**How to connect to a VPN via Spring Boot API ?**\r\nI need an JAVA API which will connect to a VPN so we can connect to that particular network where our server is located, and then we are able to hit other API&#39;s.","title":"Api to connect VPN","body":"<p><strong>How to connect to a VPN via Spring Boot API ?</strong>\nI need an JAVA API which will connect to a VPN so we can connect to that particular network where our server is located, and then we are able to hit other API's.</p>\n"},{"tags":["java","arrays","performance","unsafe","reinterpret-cast"],"answers":[{"tags":[],"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1607871463,"creation_date":1607869905,"answer_id":65276765,"question_id":65276625,"body_markdown":"For `byte[]` in particular you can use `MethodHandles::byteArrayViewVarHandle`:\r\n\r\n    public static void main(String[] args) {\r\n        VarHandle varHandle = MethodHandles.byteArrayViewVarHandle(long[].class,\r\n                                                                   ByteOrder.nativeOrder());\r\n\r\n        byte[] array = new byte[32];\r\n\r\n        printArray(array);\r\n        varHandle.set(array, 1, 5);\r\n        printArray(array);\r\n\r\n        System.out.println(varHandle.get(array, 1));\r\n    }\r\n\r\n    private static void printArray(byte[] array) {\r\n        System.out.println(Arrays.toString(array));\r\n    }\r\n\r\n---\r\n\r\nThere are some hoops you have to jump through with VarHandles to make them just as fast as Unsafe; \r\n\r\n 1. Make sure the VarHandle itself is constant, this can be done by putting it in a static final field and accessing it from there.\r\n 2. Make sure the VarHandle invocation is exact. Here this would mean\r\n    casting the second argument to a long since the VarHandle excepts a\r\n    long as well. (in the latest JDK you can use `VarHandle::withInvokeExactBehavior` to enforce that).\r\n\r\nThis could be made easier by wrapping the VarHandle set and get calls in  helper methods that do the cast:\r\n\r\n    private static final VarHandle LONG_ARR_HANDLE \r\n            = MethodHandles.byteArrayViewVarHandle(long[].class,\r\n                                                   ByteOrder.nativeOrder());\r\n    \r\n    public static void setLong(byte[] bytes, int index, long value) {\r\n        LONG_ARR_HANDLE.set(bytes, index, value);\r\n    }   \r\n    \r\n    public static long getLong(byte[] bytes, int index) {\r\n        return (long) LONG_ARR_HANDLE.get(bytes, index);\r\n    }    ","title":"What is the most efficient way to reinterpret underlying bit patterns and write it into and array or field?","body":"<p>For <code>byte[]</code> in particular you can use <code>MethodHandles::byteArrayViewVarHandle</code>:</p>\n<pre><code>public static void main(String[] args) {\n    VarHandle varHandle = MethodHandles.byteArrayViewVarHandle(long[].class,\n                                                               ByteOrder.nativeOrder());\n\n    byte[] array = new byte[32];\n\n    printArray(array);\n    varHandle.set(array, 1, 5);\n    printArray(array);\n\n    System.out.println(varHandle.get(array, 1));\n}\n\nprivate static void printArray(byte[] array) {\n    System.out.println(Arrays.toString(array));\n}\n</code></pre>\n<hr />\n<p>There are some hoops you have to jump through with VarHandles to make them just as fast as Unsafe;</p>\n<ol>\n<li>Make sure the VarHandle itself is constant, this can be done by putting it in a static final field and accessing it from there.</li>\n<li>Make sure the VarHandle invocation is exact. Here this would mean\ncasting the second argument to a long since the VarHandle excepts a\nlong as well. (in the latest JDK you can use <code>VarHandle::withInvokeExactBehavior</code> to enforce that).</li>\n</ol>\n<p>This could be made easier by wrapping the VarHandle set and get calls in  helper methods that do the cast:</p>\n<pre><code>private static final VarHandle LONG_ARR_HANDLE \n        = MethodHandles.byteArrayViewVarHandle(long[].class,\n                                               ByteOrder.nativeOrder());\n\npublic static void setLong(byte[] bytes, int index, long value) {\n    LONG_ARR_HANDLE.set(bytes, index, value);\n}   \n\npublic static long getLong(byte[] bytes, int index) {\n    return (long) LONG_ARR_HANDLE.get(bytes, index);\n}    \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1328773,"reputation":37883,"user_id":1273080,"accept_rate":100,"display_name":"Petr Janeƒçek"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1649678639,"creation_date":1639285218,"answer_id":70321060,"question_id":65276625,"body_markdown":"The canonical way, using `ByteBuffer`, is also the fastest way as of Java 17. Measure for yourself (and/or consider other options) if you&#39;re not on Java 17 yet.\r\n```java\r\nByteBuffer byteBuffer = ByteBuffer.allocate(bytesLength);\r\nbyteBuffer.asLongBuffer().put(longs);\r\nreturn byteBuffer.array();\r\n```\r\n\r\n[I did an experiment with serializing `float[]` to `byte[]`](https://gitlab.com/janecekpetr/benchmarks/-/blob/master/src/main/java/com/gitlab/janecekpetr/benchmark/FloatSerializationBenchmark.java) and depending on the required byte order and Java version different methods came out differently, but `ByteBuffer` and `MemorySegment` and `Unsafe` or libraries using them were on top. VarHandles are not very far behind, but they&#39;re still loopy.\r\n\r\nOn OpenJDK 17 using G1, on my MBP 16&quot; 2019, the results were:\r\n\r\n```\r\nBenchmark             (size)  Mode  Cnt      Score      Error  Units\r\n\r\nbeByteBuffer             512  avgt    5    193.351 &#177;   21.366  ns/op\r\nbeByteBufferWrap         512  avgt    5    197.477 &#177;   43.743  ns/op\r\nbeDataOutputStream       512  avgt    5   1590.887 &#177;   60.744  ns/op\r\nbeKryo                   512  avgt    5    861.624 &#177;   11.927  ns/op\r\nbeManualUnpacking        512  avgt    5    861.573 &#177;   10.108  ns/op\r\nbeObjectOutputStream     512  avgt    5   2168.386 &#177;   12.950  ns/op\r\nbeVarHandle              512  avgt    5    225.611 &#177;    1.839  ns/op\r\n\r\nleByteBuffer             512  avgt    5    155.345 &#177;    1.229  ns/op\r\nleByteBufferWrap         512  avgt    5    154.523 &#177;    0.853  ns/op\r\nleDataOutputStream       512  avgt    5  55414.147 &#177; 9390.669  ns/op\r\nleKryoUnsafe             512  avgt    5    156.019 &#177;   18.235  ns/op\r\nleManualUnpacking        512  avgt    5    880.687 &#177;   12.856  ns/op\r\nleMemorySegment          512  avgt    5    148.483 &#177;    0.897  ns/op\r\nleUnsafeCopyMemory       512  avgt    5    149.107 &#177;    2.011  ns/op\r\nleVarHandle              512  avgt    5    225.615 &#177;    1.357  ns/op\r\n```\r\n\r\nNote that if you&#39;re not on Java 17 yet, your results may be very different! The `ObjectOutputStream` was way slower before Java 17, and [two of the four `*byteBuffer` variants were 2* as slow too](https://bugs.openjdk.java.net/browse/JDK-8264762). Therefore, measure for your particular JVM and JVM config. In general, though, `ByteBuffer` or `MemorySegment` is the way to go going forward.","title":"What is the most efficient way to reinterpret underlying bit patterns and write it into and array or field?","body":"<p>The canonical way, using <code>ByteBuffer</code>, is also the fastest way as of Java 17. Measure for yourself (and/or consider other options) if you're not on Java 17 yet.</p>\n<pre class=\"lang-java prettyprint-override\"><code>ByteBuffer byteBuffer = ByteBuffer.allocate(bytesLength);\nbyteBuffer.asLongBuffer().put(longs);\nreturn byteBuffer.array();\n</code></pre>\n<p><a href=\"https://gitlab.com/janecekpetr/benchmarks/-/blob/master/src/main/java/com/gitlab/janecekpetr/benchmark/FloatSerializationBenchmark.java\" rel=\"nofollow noreferrer\">I did an experiment with serializing <code>float[]</code> to <code>byte[]</code></a> and depending on the required byte order and Java version different methods came out differently, but <code>ByteBuffer</code> and <code>MemorySegment</code> and <code>Unsafe</code> or libraries using them were on top. VarHandles are not very far behind, but they're still loopy.</p>\n<p>On OpenJDK 17 using G1, on my MBP 16&quot; 2019, the results were:</p>\n<pre><code>Benchmark             (size)  Mode  Cnt      Score      Error  Units\n\nbeByteBuffer             512  avgt    5    193.351 ¬±   21.366  ns/op\nbeByteBufferWrap         512  avgt    5    197.477 ¬±   43.743  ns/op\nbeDataOutputStream       512  avgt    5   1590.887 ¬±   60.744  ns/op\nbeKryo                   512  avgt    5    861.624 ¬±   11.927  ns/op\nbeManualUnpacking        512  avgt    5    861.573 ¬±   10.108  ns/op\nbeObjectOutputStream     512  avgt    5   2168.386 ¬±   12.950  ns/op\nbeVarHandle              512  avgt    5    225.611 ¬±    1.839  ns/op\n\nleByteBuffer             512  avgt    5    155.345 ¬±    1.229  ns/op\nleByteBufferWrap         512  avgt    5    154.523 ¬±    0.853  ns/op\nleDataOutputStream       512  avgt    5  55414.147 ¬± 9390.669  ns/op\nleKryoUnsafe             512  avgt    5    156.019 ¬±   18.235  ns/op\nleManualUnpacking        512  avgt    5    880.687 ¬±   12.856  ns/op\nleMemorySegment          512  avgt    5    148.483 ¬±    0.897  ns/op\nleUnsafeCopyMemory       512  avgt    5    149.107 ¬±    2.011  ns/op\nleVarHandle              512  avgt    5    225.615 ¬±    1.357  ns/op\n</code></pre>\n<p>Note that if you're not on Java 17 yet, your results may be very different! The <code>ObjectOutputStream</code> was way slower before Java 17, and <a href=\"https://bugs.openjdk.java.net/browse/JDK-8264762\" rel=\"nofollow noreferrer\">two of the four <code>*byteBuffer</code> variants were 2* as slow too</a>. Therefore, measure for your particular JVM and JVM config. In general, though, <code>ByteBuffer</code> or <code>MemorySegment</code> is the way to go going forward.</p>\n"}],"owner":{"account_id":344368,"reputation":1841,"user_id":676644,"accept_rate":87,"display_name":"Suminda Sirinath S. Dharmasena"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":754,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":65276765,"answer_count":2,"score":2,"last_activity_date":1649678639,"creation_date":1607869024,"question_id":65276625,"body_markdown":"Using `Unsafe.putXXX` one can put primitive type into an array or object field.\r\n\r\nBut code like the following generate errors.\r\n\r\n```java\r\nimport java.lang.invoke.MethodHandles;\r\nimport java.lang.invoke.VarHandle;\r\nimport java.util.Arrays;\r\n\r\npublic class Main {\r\n\r\n  public static void main(String[] args) {\r\n    VarHandle varHandle = MethodHandles.arrayElementVarHandle(long[].class);\r\n\r\n    byte[] array = new byte[32];\r\n\r\n    printArray(array);\r\n    varHandle.set(array, 1, 5);\r\n    printArray(array);\r\n\r\n    System.out.println(varHandle.get(array, 1));\r\n  }\r\n\r\n  private static void printArray(byte[] array) {\r\n    System.out.println(Arrays.toString(array));\r\n  }\r\n\r\n}\r\n```\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.ClassCastException: Cannot cast [B to [J\r\n\tat java.base/java.lang.Class.cast(Class.java:3780)\r\n\tat Main.main(Main.java:15)\r\n```\r\n\r\nAlso the `bytes` may be write as:\r\n\r\n```java\r\nbyte[] array = new byte[32];\r\nlong v = 5,\r\nint i = 8;\r\nint high = (int) (v &gt;&gt;&gt; 32);\r\nint low = (int) v;\r\narray[i + 0] = (byte) (high &gt;&gt;&gt; 24);\r\narray[i + 1] = (byte) (high &gt;&gt;&gt; 16);\r\narray[i + 2] = (byte) (high &gt;&gt;&gt; 8);\r\narray[i + 3] = (byte) high;\r\narray[i + 4] = (byte) (low &gt;&gt;&gt; 24);\r\narray[i + 5] = (byte) (low &gt;&gt;&gt; 16);\r\narray[i + 6] = (byte) (low &gt;&gt;&gt; 8);\r\narray[i + 7] = (byte) low;\r\n```\r\n\r\nIs there an efficient way to write reinterpret different types and write them into fields and arrays possibly avoiding `Unsafe` but as efficient. \r\n\r\nAny special cases where the compiler or JIT will recognise the intent and optimise accordingly.","title":"What is the most efficient way to reinterpret underlying bit patterns and write it into and array or field?","body":"<p>Using <code>Unsafe.putXXX</code> one can put primitive type into an array or object field.</p>\n<p>But code like the following generate errors.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.lang.invoke.MethodHandles;\nimport java.lang.invoke.VarHandle;\nimport java.util.Arrays;\n\npublic class Main {\n\n  public static void main(String[] args) {\n    VarHandle varHandle = MethodHandles.arrayElementVarHandle(long[].class);\n\n    byte[] array = new byte[32];\n\n    printArray(array);\n    varHandle.set(array, 1, 5);\n    printArray(array);\n\n    System.out.println(varHandle.get(array, 1));\n  }\n\n  private static void printArray(byte[] array) {\n    System.out.println(Arrays.toString(array));\n  }\n\n}\n</code></pre>\n<pre><code>Exception in thread &quot;main&quot; java.lang.ClassCastException: Cannot cast [B to [J\n    at java.base/java.lang.Class.cast(Class.java:3780)\n    at Main.main(Main.java:15)\n</code></pre>\n<p>Also the <code>bytes</code> may be write as:</p>\n<pre class=\"lang-java prettyprint-override\"><code>byte[] array = new byte[32];\nlong v = 5,\nint i = 8;\nint high = (int) (v &gt;&gt;&gt; 32);\nint low = (int) v;\narray[i + 0] = (byte) (high &gt;&gt;&gt; 24);\narray[i + 1] = (byte) (high &gt;&gt;&gt; 16);\narray[i + 2] = (byte) (high &gt;&gt;&gt; 8);\narray[i + 3] = (byte) high;\narray[i + 4] = (byte) (low &gt;&gt;&gt; 24);\narray[i + 5] = (byte) (low &gt;&gt;&gt; 16);\narray[i + 6] = (byte) (low &gt;&gt;&gt; 8);\narray[i + 7] = (byte) low;\n</code></pre>\n<p>Is there an efficient way to write reinterpret different types and write them into fields and arrays possibly avoiding <code>Unsafe</code> but as efficient.</p>\n<p>Any special cases where the compiler or JIT will recognise the intent and optimise accordingly.</p>\n"},{"tags":["java","spring","apache-kafka","confluent-platform","verifyerror"],"comments":[{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1649673907,"post_id":71824499,"comment_id":126927702,"body_markdown":"Generally, this means that incompatible versions of dependencies are pulled in. Check the dependencies report to see which versions are pulled in and fix that.","body":"Generally, this means that incompatible versions of dependencies are pulled in. Check the dependencies report to see which versions are pulled in and fix that."},{"owner":{"account_id":2898137,"reputation":1813,"user_id":2485458,"accept_rate":48,"display_name":"Panadol Chong"},"score":0,"creation_date":1649678203,"post_id":71824499,"comment_id":126929162,"body_markdown":"Hi @MarkRotteveel, I try with gradle dependencies command, I saw that its using `com.fasterxml.jackson.core:jackson-databind:2.10.5.1`, may I know how can I know its incompatible version?","body":"Hi @MarkRotteveel, I try with gradle dependencies command, I saw that its using <code>com.fasterxml.jackson.core:jackson-databind:2.10.5.1</code>, may I know how can I know its incompatible version?"}],"owner":{"account_id":2898137,"reputation":1813,"user_id":2485458,"accept_rate":48,"display_name":"Panadol Chong"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":508,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649678363,"creation_date":1649664323,"question_id":71824499,"body_markdown":"I would like to try on the Synchronous Kafka on https://dzone.com/articles/synchronous-kafka-using-spring-request-reply-1\r\n\r\nHowever, I am hitting `java.lang.VerifyError: Bad return type` when it&#39;s loading the `ConsumerFactory` Bean.\r\n\r\nThe following is my code of the `ConsumerFactory` bean:\r\n\r\n    import org.springframework.kafka.support.serializer.JsonDeserializer;\r\n\r\n    // Default Consumer Factory\r\n    \t@Bean\r\n    \tpublic ConsumerFactory&lt;String, JSONObject&gt; consumerFactory() {\r\n    \t  return new DefaultKafkaConsumerFactory&lt;&gt;(producerConfigs(),new StringDeserializer(),new JsonDeserializer&lt;&gt;(JSONObject.class));\r\n    \t}\r\n\r\nAnd the following is my error in my eclipse console:\r\n\r\n    Exception Details:\r\n      Location:\r\n        com/fasterxml/jackson/databind/cfg/MapperBuilder.streamFactory()Lcom/fasterxml/jackson/core/TokenStreamFactory; @7: areturn\r\n      Reason:\r\n        Type &#39;com/fasterxml/jackson/core/JsonFactory&#39; (current frame, stack[0]) is not assignable to &#39;com/fasterxml/jackson/core/TokenStreamFactory&#39; (from method signature)\r\n      Current Frame:\r\n        bci: @7\r\n        flags: { }\r\n        locals: { &#39;com/fasterxml/jackson/databind/cfg/MapperBuilder&#39; }\r\n        stack: { &#39;com/fasterxml/jackson/core/JsonFactory&#39; }\r\n      Bytecode:\r\n        0x0000000: 2ab4 0002 b600 08b0                    \r\n    \r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:652)\r\n    \t... 62 more\r\n    Caused by: java.lang.VerifyError: Bad return type\r\n    Exception Details:\r\n      Location:\r\n        com/fasterxml/jackson/databind/cfg/MapperBuilder.streamFactory()Lcom/fasterxml/jackson/core/TokenStreamFactory; @7: areturn\r\n      Reason:\r\n        Type &#39;com/fasterxml/jackson/core/JsonFactory&#39; (current frame, stack[0]) is not assignable to &#39;com/fasterxml/jackson/core/TokenStreamFactory&#39; (from method signature)\r\n      Current Frame:\r\n        bci: @7\r\n        flags: { }\r\n        locals: { &#39;com/fasterxml/jackson/databind/cfg/MapperBuilder&#39; }\r\n        stack: { &#39;com/fasterxml/jackson/core/JsonFactory&#39; }\r\n      Bytecode:\r\n        0x0000000: 2ab4 0002 b600 08b0                    \r\n    \r\n    \tat com.fasterxml.jackson.databind.json.JsonMapper.builder(JsonMapper.java:114)\r\n    \tat org.springframework.kafka.support.JacksonUtils.enhancedObjectMapper(JacksonUtils.java:58)\r\n    \tat org.springframework.kafka.support.JacksonUtils.enhancedObjectMapper(JacksonUtils.java:47)\r\n    \tat org.springframework.kafka.support.serializer.JsonDeserializer.&lt;init&gt;(JsonDeserializer.java:179)\r\n    \tat org.springframework.kafka.support.serializer.JsonDeserializer.&lt;init&gt;(JsonDeserializer.java:148)\r\n    \tat com.beans.eai.config.WebConfig.consumerFactory(WebConfig.java:70)\r\n    15:57:53,966 INFO  [org.jboss.as.controller] (Controller Boot Thread) WFLYCTL0183: Service status report\r\n    WFLYCTL0186:   Services which failed to start:      service jboss.undertow.deployment.default-server.default-host./eai: java.lang.RuntimeException: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;ReplyingKafkaTemplate&#39; defined in com.beans.eai.config.WebConfig: Unsatisfied dependency expressed through method &#39;replyKafkaTemplate&#39; parameter 1; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;replyContainer&#39; defined in com.beans.eai.config.WebConfig: Unsatisfied dependency expressed through method &#39;replyContainer&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;consumerFactory&#39; defined in com.beans.eai.config.WebConfig: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.kafka.core.ConsumerFactory]: Factory method &#39;consumerFactory&#39; threw exception; nested exception is java.lang.VerifyError: Bad return type\r\n    Exception Details:\r\n      Location:\r\n        com/fasterxml/jackson/databind/cfg/MapperBuilder.streamFactory()Lcom/fasterxml/jackson/core/TokenStreamFactory; @7: areturn\r\n      Reason:\r\n        Type &#39;com/fasterxml/jackson/core/JsonFactory&#39; (current frame, stack[0]) is not assignable to &#39;com/fasterxml/jackson/core/TokenStreamFactory&#39; (from method signature)\r\n      Current Frame:\r\n        bci: @7\r\n        flags: { }\r\n        locals: { &#39;com/fasterxml/jackson/databind/cfg/MapperBuilder&#39; }\r\n        stack: { &#39;com/fasterxml/jackson/core/JsonFactory&#39; }\r\n      Bytecode:\r\n        0x0000000: 2ab4 0002 b600 08b0     \r\n\r\nAnd the following is my build.gradle:\r\n\r\n    apply plugin: &#39;java&#39;\r\n    apply plugin: &#39;war&#39;\r\n    apply plugin: &#39;eclipse&#39;\r\n    apply plugin: &#39;application&#39;\r\n    \r\n    mainClassName = &quot;EAIDelegateBeanServiceSkeleton&quot;\r\n    \r\n    repositories { \r\n        mavenCentral() \r\n        maven {\r\n            url &quot;https://packages.confluent.io/maven&quot;\r\n        }\r\n    }\r\n    \r\n    sourceCompatibility = 1.8\r\n    targetCompatibility = 1.8\r\n    \r\n    dependencies {\r\n    \tcompile &quot;com.google.guava:guava:17.0&quot;\r\n    \tcompile &#39;com.googlecode.json-simple:json-simple:1.1.1&#39;\r\n    \tcompile &#39;org.apache.kafka:kafka-clients:3.1.0&#39;\r\n    \tcompile &#39;com.google.code.gson:gson:2.8.2&#39;\r\n    \tcompile &#39;io.confluent:kafka-json-serializer:6.2.0&#39;\r\n    \tcompile &quot;org.springframework.kafka:spring-kafka:2.6.13&quot;\r\n    \tcompile &quot;org.springframework:spring-web:5.2.19.RELEASE&quot;\r\n        testImplementation &quot;junit:junit:4.12&quot;\r\n    }\r\n\r\nNot sure is it I using the wrong version of library.\r\n\r\nI am deploying this web app in Jboss EAP 7.1, java 1.8.\r\n\r\nAttached with my `gradle dependencies` result:\r\n\r\n    ------------------------------------------------------------\r\n    Root project\r\n    ------------------------------------------------------------\r\n    \r\n    annotationProcessor - Annotation processors and their dependencies for source set &#39;main&#39;.\r\n    No dependencies\r\n    \r\n    apiElements - API elements for main. (n)\r\n    No dependencies\r\n    \r\n    archives - Configuration for archive artifacts.\r\n    No dependencies\r\n    \r\n    compile - Dependencies for source set &#39;main&#39; (deprecated, use &#39;implementation &#39; instead).\r\n    +--- com.google.guava:guava:17.0\r\n    +--- com.googlecode.json-simple:json-simple:1.1.1\r\n    |    \\--- junit:junit:4.10\r\n    |         \\--- org.hamcrest:hamcrest-core:1.1\r\n    +--- org.apache.kafka:kafka-clients:3.1.0\r\n    |    +--- com.github.luben:zstd-jni:1.5.0-4\r\n    |    +--- org.lz4:lz4-java:1.8.0\r\n    |    +--- org.xerial.snappy:snappy-java:1.1.8.4\r\n    |    \\--- org.slf4j:slf4j-api:1.7.30\r\n    +--- com.google.code.gson:gson:2.8.2\r\n    +--- io.confluent:kafka-json-serializer:6.2.0\r\n    |    +--- com.fasterxml.jackson.core:jackson-databind:2.10.5.1\r\n    |    |    +--- com.fasterxml.jackson.core:jackson-annotations:2.10.5\r\n    |    |    \\--- com.fasterxml.jackson.core:jackson-core:2.10.5\r\n    |    +--- io.confluent:common-config:6.2.0\r\n    |    |    +--- io.confluent:common-utils:6.2.0\r\n    |    |    |    \\--- org.slf4j:slf4j-api:1.7.30\r\n    |    |    \\--- org.slf4j:slf4j-api:1.7.30\r\n    |    +--- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:2.10.5\r\n    |    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\r\n    |    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\r\n    |    +--- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.10.5\r\n    |    |    +--- com.fasterxml.jackson.core:jackson-annotations:2.10.5\r\n    |    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\r\n    |    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\r\n    |    +--- com.fasterxml.jackson.module:jackson-module-parameter-names:2.10.5\r\n    |    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\r\n    |    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\r\n    |    \\--- io.confluent:common-utils:6.2.0 (*)\r\n    +--- org.springframework.kafka:spring-kafka:2.6.13\r\n    |    +--- org.springframework:spring-context:5.2.19.RELEASE\r\n    |    |    +--- org.springframework:spring-aop:5.2.19.RELEASE\r\n    |    |    |    +--- org.springframework:spring-beans:5.2.19.RELEASE\r\n    |    |    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE\r\n    |    |    |    |         \\--- org.springframework:spring-jcl:5.2.19.RELEASE\r\n    |    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    |    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\r\n    |    |    +--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    |    |    \\--- org.springframework:spring-expression:5.2.19.RELEASE\r\n    |    |         \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    |    +--- org.springframework:spring-messaging:5.2.19.RELEASE\r\n    |    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\r\n    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    |    +--- org.springframework:spring-tx:5.2.19.RELEASE\r\n    |    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\r\n    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    |    +--- org.springframework.retry:spring-retry:1.3.1\r\n    |    \\--- org.apache.kafka:kafka-clients:2.6.3 -&gt; 3.1.0 (*)\r\n    \\--- org.springframework:spring-web:5.2.19.RELEASE\r\n         +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\r\n         \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    \r\n    \r\n    compileClasspath - Compile classpath for source set &#39;main&#39;.\r\n    +--- com.google.guava:guava:17.0\r\n    +--- com.googlecode.json-simple:json-simple:1.1.1\r\n    |    \\--- junit:junit:4.10\r\n    |         \\--- org.hamcrest:hamcrest-core:1.1\r\n    +--- org.apache.kafka:kafka-clients:3.1.0\r\n    |    +--- com.github.luben:zstd-jni:1.5.0-4\r\n    |    +--- org.lz4:lz4-java:1.8.0\r\n    |    +--- org.xerial.snappy:snappy-java:1.1.8.4\r\n    |    \\--- org.slf4j:slf4j-api:1.7.30\r\n    +--- com.google.code.gson:gson:2.8.2\r\n    +--- io.confluent:kafka-json-serializer:6.2.0\r\n    |    +--- com.fasterxml.jackson.core:jackson-databind:2.10.5.1\r\n    |    |    +--- com.fasterxml.jackson.core:jackson-annotations:2.10.5\r\n    |    |    \\--- com.fasterxml.jackson.core:jackson-core:2.10.5\r\n    |    +--- io.confluent:common-config:6.2.0\r\n    |    |    +--- io.confluent:common-utils:6.2.0\r\n    |    |    |    \\--- org.slf4j:slf4j-api:1.7.30\r\n    |    |    \\--- org.slf4j:slf4j-api:1.7.30\r\n    |    +--- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:2.10.5\r\n    |    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\r\n    |    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\r\n    |    +--- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.10.5\r\n    |    |    +--- com.fasterxml.jackson.core:jackson-annotations:2.10.5\r\n    |    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\r\n    |    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\r\n    |    +--- com.fasterxml.jackson.module:jackson-module-parameter-names:2.10.5\r\n    |    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\r\n    |    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\r\n    |    \\--- io.confluent:common-utils:6.2.0 (*)\r\n    +--- org.springframework.kafka:spring-kafka:2.6.13\r\n    |    +--- org.springframework:spring-context:5.2.19.RELEASE\r\n    |    |    +--- org.springframework:spring-aop:5.2.19.RELEASE\r\n    |    |    |    +--- org.springframework:spring-beans:5.2.19.RELEASE\r\n    |    |    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE\r\n    |    |    |    |         \\--- org.springframework:spring-jcl:5.2.19.RELEASE\r\n    |    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    |    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\r\n    |    |    +--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    |    |    \\--- org.springframework:spring-expression:5.2.19.RELEASE\r\n    |    |         \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    |    +--- org.springframework:spring-messaging:5.2.19.RELEASE\r\n    |    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\r\n    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    |    +--- org.springframework:spring-tx:5.2.19.RELEASE\r\n    |    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\r\n    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    |    +--- org.springframework.retry:spring-retry:1.3.1\r\n    |    \\--- org.apache.kafka:kafka-clients:2.6.3 -&gt; 3.1.0 (*)\r\n    \\--- org.springframework:spring-web:5.2.19.RELEASE\r\n         +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\r\n         \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    \r\n    compileOnly - Compile only dependencies for source set &#39;main&#39;.\r\n    No dependencies\r\n    \r\n    default - Configuration for default artifacts.\r\n    +--- com.google.guava:guava:17.0\r\n    +--- com.googlecode.json-simple:json-simple:1.1.1\r\n    |    \\--- junit:junit:4.10\r\n    |         \\--- org.hamcrest:hamcrest-core:1.1\r\n    +--- org.apache.kafka:kafka-clients:3.1.0\r\n    |    +--- com.github.luben:zstd-jni:1.5.0-4\r\n    |    +--- org.lz4:lz4-java:1.8.0\r\n    |    +--- org.xerial.snappy:snappy-java:1.1.8.4\r\n    |    \\--- org.slf4j:slf4j-api:1.7.30\r\n    +--- com.google.code.gson:gson:2.8.2\r\n    +--- io.confluent:kafka-json-serializer:6.2.0\r\n    |    +--- com.fasterxml.jackson.core:jackson-databind:2.10.5.1\r\n    |    |    +--- com.fasterxml.jackson.core:jackson-annotations:2.10.5\r\n    |    |    \\--- com.fasterxml.jackson.core:jackson-core:2.10.5\r\n    |    +--- io.confluent:common-config:6.2.0\r\n    |    |    +--- io.confluent:common-utils:6.2.0\r\n    |    |    |    \\--- org.slf4j:slf4j-api:1.7.30\r\n    |    |    \\--- org.slf4j:slf4j-api:1.7.30\r\n    |    +--- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:2.10.5\r\n    |    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\r\n    |    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\r\n    |    +--- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.10.5\r\n    |    |    +--- com.fasterxml.jackson.core:jackson-annotations:2.10.5\r\n    |    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\r\n    |    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\r\n    |    +--- com.fasterxml.jackson.module:jackson-module-parameter-names:2.10.5\r\n    |    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\r\n    |    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\r\n    |    \\--- io.confluent:common-utils:6.2.0 (*)\r\n    +--- org.springframework.kafka:spring-kafka:2.6.13\r\n    |    +--- org.springframework:spring-context:5.2.19.RELEASE\r\n    |    |    +--- org.springframework:spring-aop:5.2.19.RELEASE\r\n    |    |    |    +--- org.springframework:spring-beans:5.2.19.RELEASE\r\n    |    |    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE\r\n    |    |    |    |         \\--- org.springframework:spring-jcl:5.2.19.RELEASE\r\n    |    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    |    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\r\n    |    |    +--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    |    |    \\--- org.springframework:spring-expression:5.2.19.RELEASE\r\n    |    |         \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    |    +--- org.springframework:spring-messaging:5.2.19.RELEASE\r\n    |    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\r\n    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    |    +--- org.springframework:spring-tx:5.2.19.RELEASE\r\n    |    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\r\n    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    |    +--- org.springframework.retry:spring-retry:1.3.1\r\n    |    \\--- org.apache.kafka:kafka-clients:2.6.3 -&gt; 3.1.0 (*)\r\n    \\--- org.springframework:spring-web:5.2.19.RELEASE\r\n         +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\r\n         \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    \r\n    implementation - Implementation only dependencies for source set &#39;main&#39;. (n)\r\n    No dependencies\r\n    \r\n    providedCompile - Additional compile classpath for libraries that should not be part of the WAR archive.\r\n    No dependencies\r\n    \r\n    providedRuntime - Additional runtime classpath for libraries that should not be part of the WAR archive.\r\n    No dependencies\r\n    \r\n    runtime - Runtime dependencies for source set &#39;main&#39; (deprecated, use &#39;runtimeOnly &#39; instead).\r\n    +--- com.google.guava:guava:17.0\r\n    +--- com.googlecode.json-simple:json-simple:1.1.1\r\n    |    \\--- junit:junit:4.10\r\n    |         \\--- org.hamcrest:hamcrest-core:1.1\r\n    +--- org.apache.kafka:kafka-clients:3.1.0\r\n    |    +--- com.github.luben:zstd-jni:1.5.0-4\r\n    |    +--- org.lz4:lz4-java:1.8.0\r\n    |    +--- org.xerial.snappy:snappy-java:1.1.8.4\r\n    |    \\--- org.slf4j:slf4j-api:1.7.30\r\n    +--- com.google.code.gson:gson:2.8.2\r\n    +--- io.confluent:kafka-json-serializer:6.2.0\r\n    |    +--- com.fasterxml.jackson.core:jackson-databind:2.10.5.1\r\n    |    |    +--- com.fasterxml.jackson.core:jackson-annotations:2.10.5\r\n    |    |    \\--- com.fasterxml.jackson.core:jackson-core:2.10.5\r\n    |    +--- io.confluent:common-config:6.2.0\r\n    |    |    +--- io.confluent:common-utils:6.2.0\r\n    |    |    |    \\--- org.slf4j:slf4j-api:1.7.30\r\n    |    |    \\--- org.slf4j:slf4j-api:1.7.30\r\n    |    +--- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:2.10.5\r\n    |    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\r\n    |    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\r\n    |    +--- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.10.5\r\n    |    |    +--- com.fasterxml.jackson.core:jackson-annotations:2.10.5\r\n    |    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\r\n    |    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\r\n    |    +--- com.fasterxml.jackson.module:jackson-module-parameter-names:2.10.5\r\n    |    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\r\n    |    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\r\n    |    \\--- io.confluent:common-utils:6.2.0 (*)\r\n    +--- org.springframework.kafka:spring-kafka:2.6.13\r\n    |    +--- org.springframework:spring-context:5.2.19.RELEASE\r\n    |    |    +--- org.springframework:spring-aop:5.2.19.RELEASE\r\n    |    |    |    +--- org.springframework:spring-beans:5.2.19.RELEASE\r\n    |    |    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE\r\n    |    |    |    |         \\--- org.springframework:spring-jcl:5.2.19.RELEASE\r\n    |    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    |    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\r\n    |    |    +--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    |    |    \\--- org.springframework:spring-expression:5.2.19.RELEASE\r\n    |    |         \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    |    +--- org.springframework:spring-messaging:5.2.19.RELEASE\r\n    |    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\r\n    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    |    +--- org.springframework:spring-tx:5.2.19.RELEASE\r\n    |    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\r\n    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    |    +--- org.springframework.retry:spring-retry:1.3.1\r\n    |    \\--- org.apache.kafka:kafka-clients:2.6.3 -&gt; 3.1.0 (*)\r\n    \\--- org.springframework:spring-web:5.2.19.RELEASE\r\n         +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\r\n         \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    \r\n    runtimeClasspath - Runtime classpath of source set &#39;main&#39;.\r\n    +--- com.google.guava:guava:17.0\r\n    +--- com.googlecode.json-simple:json-simple:1.1.1\r\n    |    \\--- junit:junit:4.10\r\n    |         \\--- org.hamcrest:hamcrest-core:1.1\r\n    +--- org.apache.kafka:kafka-clients:3.1.0\r\n    |    +--- com.github.luben:zstd-jni:1.5.0-4\r\n    |    +--- org.lz4:lz4-java:1.8.0\r\n    |    +--- org.xerial.snappy:snappy-java:1.1.8.4\r\n    |    \\--- org.slf4j:slf4j-api:1.7.30\r\n    +--- com.google.code.gson:gson:2.8.2\r\n    +--- io.confluent:kafka-json-serializer:6.2.0\r\n    |    +--- com.fasterxml.jackson.core:jackson-databind:2.10.5.1\r\n    |    |    +--- com.fasterxml.jackson.core:jackson-annotations:2.10.5\r\n    |    |    \\--- com.fasterxml.jackson.core:jackson-core:2.10.5\r\n    |    +--- io.confluent:common-config:6.2.0\r\n    |    |    +--- io.confluent:common-utils:6.2.0\r\n    |    |    |    \\--- org.slf4j:slf4j-api:1.7.30\r\n    |    |    \\--- org.slf4j:slf4j-api:1.7.30\r\n    |    +--- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:2.10.5\r\n    |    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\r\n    |    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\r\n    |    +--- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.10.5\r\n    |    |    +--- com.fasterxml.jackson.core:jackson-annotations:2.10.5\r\n    |    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\r\n    |    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\r\n    |    +--- com.fasterxml.jackson.module:jackson-module-parameter-names:2.10.5\r\n    |    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\r\n    |    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\r\n    |    \\--- io.confluent:common-utils:6.2.0 (*)\r\n    +--- org.springframework.kafka:spring-kafka:2.6.13\r\n    |    +--- org.springframework:spring-context:5.2.19.RELEASE\r\n    |    |    +--- org.springframework:spring-aop:5.2.19.RELEASE\r\n    |    |    |    +--- org.springframework:spring-beans:5.2.19.RELEASE\r\n    |    |    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE\r\n    |    |    |    |         \\--- org.springframework:spring-jcl:5.2.19.RELEASE\r\n    |    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    |    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\r\n    |    |    +--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    |    |    \\--- org.springframework:spring-expression:5.2.19.RELEASE\r\n    |    |         \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    |    +--- org.springframework:spring-messaging:5.2.19.RELEASE\r\n    |    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\r\n    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    |    +--- org.springframework:spring-tx:5.2.19.RELEASE\r\n    |    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\r\n    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    |    +--- org.springframework.retry:spring-retry:1.3.1\r\n    |    \\--- org.apache.kafka:kafka-clients:2.6.3 -&gt; 3.1.0 (*)\r\n    \\--- org.springframework:spring-web:5.2.19.RELEASE\r\n         +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\r\n         \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    \r\n    runtimeElements - Elements of runtime for main. (n)\r\n    No dependencies\r\n    \r\n    runtimeOnly - Runtime only dependencies for source set &#39;main&#39;. (n)\r\n    No dependencies\r\n    \r\n    testAnnotationProcessor - Annotation processors and their dependencies for source set &#39;test&#39;.\r\n    No dependencies\r\n    \r\n    testCompile - Dependencies for source set &#39;test&#39; (deprecated, use &#39;testImplementation &#39; instead).\r\n    +--- com.google.guava:guava:17.0\r\n    +--- com.googlecode.json-simple:json-simple:1.1.1\r\n    |    \\--- junit:junit:4.10\r\n    |         \\--- org.hamcrest:hamcrest-core:1.1\r\n    +--- org.apache.kafka:kafka-clients:3.1.0\r\n    |    +--- com.github.luben:zstd-jni:1.5.0-4\r\n    |    +--- org.lz4:lz4-java:1.8.0\r\n    |    +--- org.xerial.snappy:snappy-java:1.1.8.4\r\n    |    \\--- org.slf4j:slf4j-api:1.7.30\r\n    +--- com.google.code.gson:gson:2.8.2\r\n    +--- io.confluent:kafka-json-serializer:6.2.0\r\n    |    +--- com.fasterxml.jackson.core:jackson-databind:2.10.5.1\r\n    |    |    +--- com.fasterxml.jackson.core:jackson-annotations:2.10.5\r\n    |    |    \\--- com.fasterxml.jackson.core:jackson-core:2.10.5\r\n    |    +--- io.confluent:common-config:6.2.0\r\n    |    |    +--- io.confluent:common-utils:6.2.0\r\n    |    |    |    \\--- org.slf4j:slf4j-api:1.7.30\r\n    |    |    \\--- org.slf4j:slf4j-api:1.7.30\r\n    |    +--- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:2.10.5\r\n    |    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\r\n    |    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\r\n    |    +--- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.10.5\r\n    |    |    +--- com.fasterxml.jackson.core:jackson-annotations:2.10.5\r\n    |    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\r\n    |    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\r\n    |    +--- com.fasterxml.jackson.module:jackson-module-parameter-names:2.10.5\r\n    |    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\r\n    |    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\r\n    |    \\--- io.confluent:common-utils:6.2.0 (*)\r\n    +--- org.springframework.kafka:spring-kafka:2.6.13\r\n    |    +--- org.springframework:spring-context:5.2.19.RELEASE\r\n    |    |    +--- org.springframework:spring-aop:5.2.19.RELEASE\r\n    |    |    |    +--- org.springframework:spring-beans:5.2.19.RELEASE\r\n    |    |    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE\r\n    |    |    |    |         \\--- org.springframework:spring-jcl:5.2.19.RELEASE\r\n    |    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    |    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\r\n    |    |    +--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    |    |    \\--- org.springframework:spring-expression:5.2.19.RELEASE\r\n    |    |         \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    |    +--- org.springframework:spring-messaging:5.2.19.RELEASE\r\n    |    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\r\n    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    |    +--- org.springframework:spring-tx:5.2.19.RELEASE\r\n    |    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\r\n    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    |    +--- org.springframework.retry:spring-retry:1.3.1\r\n    |    \\--- org.apache.kafka:kafka-clients:2.6.3 -&gt; 3.1.0 (*)\r\n    \\--- org.springframework:spring-web:5.2.19.RELEASE\r\n         +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\r\n         \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\r\n    ","title":"java.lang.VerifyError: Bad return type when using org.springframework.kafka.support.serializer.JsonDeserializer()","body":"<p>I would like to try on the Synchronous Kafka on <a href=\"https://dzone.com/articles/synchronous-kafka-using-spring-request-reply-1\" rel=\"nofollow noreferrer\">https://dzone.com/articles/synchronous-kafka-using-spring-request-reply-1</a></p>\n<p>However, I am hitting <code>java.lang.VerifyError: Bad return type</code> when it's loading the <code>ConsumerFactory</code> Bean.</p>\n<p>The following is my code of the <code>ConsumerFactory</code> bean:</p>\n<pre><code>import org.springframework.kafka.support.serializer.JsonDeserializer;\n\n// Default Consumer Factory\n    @Bean\n    public ConsumerFactory&lt;String, JSONObject&gt; consumerFactory() {\n      return new DefaultKafkaConsumerFactory&lt;&gt;(producerConfigs(),new StringDeserializer(),new JsonDeserializer&lt;&gt;(JSONObject.class));\n    }\n</code></pre>\n<p>And the following is my error in my eclipse console:</p>\n<pre><code>Exception Details:\n  Location:\n    com/fasterxml/jackson/databind/cfg/MapperBuilder.streamFactory()Lcom/fasterxml/jackson/core/TokenStreamFactory; @7: areturn\n  Reason:\n    Type 'com/fasterxml/jackson/core/JsonFactory' (current frame, stack[0]) is not assignable to 'com/fasterxml/jackson/core/TokenStreamFactory' (from method signature)\n  Current Frame:\n    bci: @7\n    flags: { }\n    locals: { 'com/fasterxml/jackson/databind/cfg/MapperBuilder' }\n    stack: { 'com/fasterxml/jackson/core/JsonFactory' }\n  Bytecode:\n    0x0000000: 2ab4 0002 b600 08b0                    \n\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:652)\n    ... 62 more\nCaused by: java.lang.VerifyError: Bad return type\nException Details:\n  Location:\n    com/fasterxml/jackson/databind/cfg/MapperBuilder.streamFactory()Lcom/fasterxml/jackson/core/TokenStreamFactory; @7: areturn\n  Reason:\n    Type 'com/fasterxml/jackson/core/JsonFactory' (current frame, stack[0]) is not assignable to 'com/fasterxml/jackson/core/TokenStreamFactory' (from method signature)\n  Current Frame:\n    bci: @7\n    flags: { }\n    locals: { 'com/fasterxml/jackson/databind/cfg/MapperBuilder' }\n    stack: { 'com/fasterxml/jackson/core/JsonFactory' }\n  Bytecode:\n    0x0000000: 2ab4 0002 b600 08b0                    \n\n    at com.fasterxml.jackson.databind.json.JsonMapper.builder(JsonMapper.java:114)\n    at org.springframework.kafka.support.JacksonUtils.enhancedObjectMapper(JacksonUtils.java:58)\n    at org.springframework.kafka.support.JacksonUtils.enhancedObjectMapper(JacksonUtils.java:47)\n    at org.springframework.kafka.support.serializer.JsonDeserializer.&lt;init&gt;(JsonDeserializer.java:179)\n    at org.springframework.kafka.support.serializer.JsonDeserializer.&lt;init&gt;(JsonDeserializer.java:148)\n    at com.beans.eai.config.WebConfig.consumerFactory(WebConfig.java:70)\n15:57:53,966 INFO  [org.jboss.as.controller] (Controller Boot Thread) WFLYCTL0183: Service status report\nWFLYCTL0186:   Services which failed to start:      service jboss.undertow.deployment.default-server.default-host./eai: java.lang.RuntimeException: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'ReplyingKafkaTemplate' defined in com.beans.eai.config.WebConfig: Unsatisfied dependency expressed through method 'replyKafkaTemplate' parameter 1; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'replyContainer' defined in com.beans.eai.config.WebConfig: Unsatisfied dependency expressed through method 'replyContainer' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'consumerFactory' defined in com.beans.eai.config.WebConfig: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.kafka.core.ConsumerFactory]: Factory method 'consumerFactory' threw exception; nested exception is java.lang.VerifyError: Bad return type\nException Details:\n  Location:\n    com/fasterxml/jackson/databind/cfg/MapperBuilder.streamFactory()Lcom/fasterxml/jackson/core/TokenStreamFactory; @7: areturn\n  Reason:\n    Type 'com/fasterxml/jackson/core/JsonFactory' (current frame, stack[0]) is not assignable to 'com/fasterxml/jackson/core/TokenStreamFactory' (from method signature)\n  Current Frame:\n    bci: @7\n    flags: { }\n    locals: { 'com/fasterxml/jackson/databind/cfg/MapperBuilder' }\n    stack: { 'com/fasterxml/jackson/core/JsonFactory' }\n  Bytecode:\n    0x0000000: 2ab4 0002 b600 08b0     \n</code></pre>\n<p>And the following is my build.gradle:</p>\n<pre><code>apply plugin: 'java'\napply plugin: 'war'\napply plugin: 'eclipse'\napply plugin: 'application'\n\nmainClassName = &quot;EAIDelegateBeanServiceSkeleton&quot;\n\nrepositories { \n    mavenCentral() \n    maven {\n        url &quot;https://packages.confluent.io/maven&quot;\n    }\n}\n\nsourceCompatibility = 1.8\ntargetCompatibility = 1.8\n\ndependencies {\n    compile &quot;com.google.guava:guava:17.0&quot;\n    compile 'com.googlecode.json-simple:json-simple:1.1.1'\n    compile 'org.apache.kafka:kafka-clients:3.1.0'\n    compile 'com.google.code.gson:gson:2.8.2'\n    compile 'io.confluent:kafka-json-serializer:6.2.0'\n    compile &quot;org.springframework.kafka:spring-kafka:2.6.13&quot;\n    compile &quot;org.springframework:spring-web:5.2.19.RELEASE&quot;\n    testImplementation &quot;junit:junit:4.12&quot;\n}\n</code></pre>\n<p>Not sure is it I using the wrong version of library.</p>\n<p>I am deploying this web app in Jboss EAP 7.1, java 1.8.</p>\n<p>Attached with my <code>gradle dependencies</code> result:</p>\n<pre><code>------------------------------------------------------------\nRoot project\n------------------------------------------------------------\n\nannotationProcessor - Annotation processors and their dependencies for source set 'main'.\nNo dependencies\n\napiElements - API elements for main. (n)\nNo dependencies\n\narchives - Configuration for archive artifacts.\nNo dependencies\n\ncompile - Dependencies for source set 'main' (deprecated, use 'implementation ' instead).\n+--- com.google.guava:guava:17.0\n+--- com.googlecode.json-simple:json-simple:1.1.1\n|    \\--- junit:junit:4.10\n|         \\--- org.hamcrest:hamcrest-core:1.1\n+--- org.apache.kafka:kafka-clients:3.1.0\n|    +--- com.github.luben:zstd-jni:1.5.0-4\n|    +--- org.lz4:lz4-java:1.8.0\n|    +--- org.xerial.snappy:snappy-java:1.1.8.4\n|    \\--- org.slf4j:slf4j-api:1.7.30\n+--- com.google.code.gson:gson:2.8.2\n+--- io.confluent:kafka-json-serializer:6.2.0\n|    +--- com.fasterxml.jackson.core:jackson-databind:2.10.5.1\n|    |    +--- com.fasterxml.jackson.core:jackson-annotations:2.10.5\n|    |    \\--- com.fasterxml.jackson.core:jackson-core:2.10.5\n|    +--- io.confluent:common-config:6.2.0\n|    |    +--- io.confluent:common-utils:6.2.0\n|    |    |    \\--- org.slf4j:slf4j-api:1.7.30\n|    |    \\--- org.slf4j:slf4j-api:1.7.30\n|    +--- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:2.10.5\n|    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\n|    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\n|    +--- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.10.5\n|    |    +--- com.fasterxml.jackson.core:jackson-annotations:2.10.5\n|    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\n|    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\n|    +--- com.fasterxml.jackson.module:jackson-module-parameter-names:2.10.5\n|    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\n|    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\n|    \\--- io.confluent:common-utils:6.2.0 (*)\n+--- org.springframework.kafka:spring-kafka:2.6.13\n|    +--- org.springframework:spring-context:5.2.19.RELEASE\n|    |    +--- org.springframework:spring-aop:5.2.19.RELEASE\n|    |    |    +--- org.springframework:spring-beans:5.2.19.RELEASE\n|    |    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE\n|    |    |    |         \\--- org.springframework:spring-jcl:5.2.19.RELEASE\n|    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\n|    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\n|    |    +--- org.springframework:spring-core:5.2.19.RELEASE (*)\n|    |    \\--- org.springframework:spring-expression:5.2.19.RELEASE\n|    |         \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\n|    +--- org.springframework:spring-messaging:5.2.19.RELEASE\n|    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\n|    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\n|    +--- org.springframework:spring-tx:5.2.19.RELEASE\n|    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\n|    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\n|    +--- org.springframework.retry:spring-retry:1.3.1\n|    \\--- org.apache.kafka:kafka-clients:2.6.3 -&gt; 3.1.0 (*)\n\\--- org.springframework:spring-web:5.2.19.RELEASE\n     +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\n     \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\n\n\ncompileClasspath - Compile classpath for source set 'main'.\n+--- com.google.guava:guava:17.0\n+--- com.googlecode.json-simple:json-simple:1.1.1\n|    \\--- junit:junit:4.10\n|         \\--- org.hamcrest:hamcrest-core:1.1\n+--- org.apache.kafka:kafka-clients:3.1.0\n|    +--- com.github.luben:zstd-jni:1.5.0-4\n|    +--- org.lz4:lz4-java:1.8.0\n|    +--- org.xerial.snappy:snappy-java:1.1.8.4\n|    \\--- org.slf4j:slf4j-api:1.7.30\n+--- com.google.code.gson:gson:2.8.2\n+--- io.confluent:kafka-json-serializer:6.2.0\n|    +--- com.fasterxml.jackson.core:jackson-databind:2.10.5.1\n|    |    +--- com.fasterxml.jackson.core:jackson-annotations:2.10.5\n|    |    \\--- com.fasterxml.jackson.core:jackson-core:2.10.5\n|    +--- io.confluent:common-config:6.2.0\n|    |    +--- io.confluent:common-utils:6.2.0\n|    |    |    \\--- org.slf4j:slf4j-api:1.7.30\n|    |    \\--- org.slf4j:slf4j-api:1.7.30\n|    +--- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:2.10.5\n|    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\n|    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\n|    +--- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.10.5\n|    |    +--- com.fasterxml.jackson.core:jackson-annotations:2.10.5\n|    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\n|    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\n|    +--- com.fasterxml.jackson.module:jackson-module-parameter-names:2.10.5\n|    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\n|    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\n|    \\--- io.confluent:common-utils:6.2.0 (*)\n+--- org.springframework.kafka:spring-kafka:2.6.13\n|    +--- org.springframework:spring-context:5.2.19.RELEASE\n|    |    +--- org.springframework:spring-aop:5.2.19.RELEASE\n|    |    |    +--- org.springframework:spring-beans:5.2.19.RELEASE\n|    |    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE\n|    |    |    |         \\--- org.springframework:spring-jcl:5.2.19.RELEASE\n|    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\n|    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\n|    |    +--- org.springframework:spring-core:5.2.19.RELEASE (*)\n|    |    \\--- org.springframework:spring-expression:5.2.19.RELEASE\n|    |         \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\n|    +--- org.springframework:spring-messaging:5.2.19.RELEASE\n|    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\n|    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\n|    +--- org.springframework:spring-tx:5.2.19.RELEASE\n|    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\n|    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\n|    +--- org.springframework.retry:spring-retry:1.3.1\n|    \\--- org.apache.kafka:kafka-clients:2.6.3 -&gt; 3.1.0 (*)\n\\--- org.springframework:spring-web:5.2.19.RELEASE\n     +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\n     \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\n\ncompileOnly - Compile only dependencies for source set 'main'.\nNo dependencies\n\ndefault - Configuration for default artifacts.\n+--- com.google.guava:guava:17.0\n+--- com.googlecode.json-simple:json-simple:1.1.1\n|    \\--- junit:junit:4.10\n|         \\--- org.hamcrest:hamcrest-core:1.1\n+--- org.apache.kafka:kafka-clients:3.1.0\n|    +--- com.github.luben:zstd-jni:1.5.0-4\n|    +--- org.lz4:lz4-java:1.8.0\n|    +--- org.xerial.snappy:snappy-java:1.1.8.4\n|    \\--- org.slf4j:slf4j-api:1.7.30\n+--- com.google.code.gson:gson:2.8.2\n+--- io.confluent:kafka-json-serializer:6.2.0\n|    +--- com.fasterxml.jackson.core:jackson-databind:2.10.5.1\n|    |    +--- com.fasterxml.jackson.core:jackson-annotations:2.10.5\n|    |    \\--- com.fasterxml.jackson.core:jackson-core:2.10.5\n|    +--- io.confluent:common-config:6.2.0\n|    |    +--- io.confluent:common-utils:6.2.0\n|    |    |    \\--- org.slf4j:slf4j-api:1.7.30\n|    |    \\--- org.slf4j:slf4j-api:1.7.30\n|    +--- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:2.10.5\n|    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\n|    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\n|    +--- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.10.5\n|    |    +--- com.fasterxml.jackson.core:jackson-annotations:2.10.5\n|    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\n|    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\n|    +--- com.fasterxml.jackson.module:jackson-module-parameter-names:2.10.5\n|    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\n|    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\n|    \\--- io.confluent:common-utils:6.2.0 (*)\n+--- org.springframework.kafka:spring-kafka:2.6.13\n|    +--- org.springframework:spring-context:5.2.19.RELEASE\n|    |    +--- org.springframework:spring-aop:5.2.19.RELEASE\n|    |    |    +--- org.springframework:spring-beans:5.2.19.RELEASE\n|    |    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE\n|    |    |    |         \\--- org.springframework:spring-jcl:5.2.19.RELEASE\n|    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\n|    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\n|    |    +--- org.springframework:spring-core:5.2.19.RELEASE (*)\n|    |    \\--- org.springframework:spring-expression:5.2.19.RELEASE\n|    |         \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\n|    +--- org.springframework:spring-messaging:5.2.19.RELEASE\n|    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\n|    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\n|    +--- org.springframework:spring-tx:5.2.19.RELEASE\n|    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\n|    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\n|    +--- org.springframework.retry:spring-retry:1.3.1\n|    \\--- org.apache.kafka:kafka-clients:2.6.3 -&gt; 3.1.0 (*)\n\\--- org.springframework:spring-web:5.2.19.RELEASE\n     +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\n     \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\n\nimplementation - Implementation only dependencies for source set 'main'. (n)\nNo dependencies\n\nprovidedCompile - Additional compile classpath for libraries that should not be part of the WAR archive.\nNo dependencies\n\nprovidedRuntime - Additional runtime classpath for libraries that should not be part of the WAR archive.\nNo dependencies\n\nruntime - Runtime dependencies for source set 'main' (deprecated, use 'runtimeOnly ' instead).\n+--- com.google.guava:guava:17.0\n+--- com.googlecode.json-simple:json-simple:1.1.1\n|    \\--- junit:junit:4.10\n|         \\--- org.hamcrest:hamcrest-core:1.1\n+--- org.apache.kafka:kafka-clients:3.1.0\n|    +--- com.github.luben:zstd-jni:1.5.0-4\n|    +--- org.lz4:lz4-java:1.8.0\n|    +--- org.xerial.snappy:snappy-java:1.1.8.4\n|    \\--- org.slf4j:slf4j-api:1.7.30\n+--- com.google.code.gson:gson:2.8.2\n+--- io.confluent:kafka-json-serializer:6.2.0\n|    +--- com.fasterxml.jackson.core:jackson-databind:2.10.5.1\n|    |    +--- com.fasterxml.jackson.core:jackson-annotations:2.10.5\n|    |    \\--- com.fasterxml.jackson.core:jackson-core:2.10.5\n|    +--- io.confluent:common-config:6.2.0\n|    |    +--- io.confluent:common-utils:6.2.0\n|    |    |    \\--- org.slf4j:slf4j-api:1.7.30\n|    |    \\--- org.slf4j:slf4j-api:1.7.30\n|    +--- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:2.10.5\n|    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\n|    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\n|    +--- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.10.5\n|    |    +--- com.fasterxml.jackson.core:jackson-annotations:2.10.5\n|    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\n|    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\n|    +--- com.fasterxml.jackson.module:jackson-module-parameter-names:2.10.5\n|    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\n|    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\n|    \\--- io.confluent:common-utils:6.2.0 (*)\n+--- org.springframework.kafka:spring-kafka:2.6.13\n|    +--- org.springframework:spring-context:5.2.19.RELEASE\n|    |    +--- org.springframework:spring-aop:5.2.19.RELEASE\n|    |    |    +--- org.springframework:spring-beans:5.2.19.RELEASE\n|    |    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE\n|    |    |    |         \\--- org.springframework:spring-jcl:5.2.19.RELEASE\n|    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\n|    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\n|    |    +--- org.springframework:spring-core:5.2.19.RELEASE (*)\n|    |    \\--- org.springframework:spring-expression:5.2.19.RELEASE\n|    |         \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\n|    +--- org.springframework:spring-messaging:5.2.19.RELEASE\n|    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\n|    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\n|    +--- org.springframework:spring-tx:5.2.19.RELEASE\n|    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\n|    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\n|    +--- org.springframework.retry:spring-retry:1.3.1\n|    \\--- org.apache.kafka:kafka-clients:2.6.3 -&gt; 3.1.0 (*)\n\\--- org.springframework:spring-web:5.2.19.RELEASE\n     +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\n     \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\n\nruntimeClasspath - Runtime classpath of source set 'main'.\n+--- com.google.guava:guava:17.0\n+--- com.googlecode.json-simple:json-simple:1.1.1\n|    \\--- junit:junit:4.10\n|         \\--- org.hamcrest:hamcrest-core:1.1\n+--- org.apache.kafka:kafka-clients:3.1.0\n|    +--- com.github.luben:zstd-jni:1.5.0-4\n|    +--- org.lz4:lz4-java:1.8.0\n|    +--- org.xerial.snappy:snappy-java:1.1.8.4\n|    \\--- org.slf4j:slf4j-api:1.7.30\n+--- com.google.code.gson:gson:2.8.2\n+--- io.confluent:kafka-json-serializer:6.2.0\n|    +--- com.fasterxml.jackson.core:jackson-databind:2.10.5.1\n|    |    +--- com.fasterxml.jackson.core:jackson-annotations:2.10.5\n|    |    \\--- com.fasterxml.jackson.core:jackson-core:2.10.5\n|    +--- io.confluent:common-config:6.2.0\n|    |    +--- io.confluent:common-utils:6.2.0\n|    |    |    \\--- org.slf4j:slf4j-api:1.7.30\n|    |    \\--- org.slf4j:slf4j-api:1.7.30\n|    +--- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:2.10.5\n|    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\n|    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\n|    +--- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.10.5\n|    |    +--- com.fasterxml.jackson.core:jackson-annotations:2.10.5\n|    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\n|    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\n|    +--- com.fasterxml.jackson.module:jackson-module-parameter-names:2.10.5\n|    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\n|    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\n|    \\--- io.confluent:common-utils:6.2.0 (*)\n+--- org.springframework.kafka:spring-kafka:2.6.13\n|    +--- org.springframework:spring-context:5.2.19.RELEASE\n|    |    +--- org.springframework:spring-aop:5.2.19.RELEASE\n|    |    |    +--- org.springframework:spring-beans:5.2.19.RELEASE\n|    |    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE\n|    |    |    |         \\--- org.springframework:spring-jcl:5.2.19.RELEASE\n|    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\n|    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\n|    |    +--- org.springframework:spring-core:5.2.19.RELEASE (*)\n|    |    \\--- org.springframework:spring-expression:5.2.19.RELEASE\n|    |         \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\n|    +--- org.springframework:spring-messaging:5.2.19.RELEASE\n|    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\n|    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\n|    +--- org.springframework:spring-tx:5.2.19.RELEASE\n|    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\n|    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\n|    +--- org.springframework.retry:spring-retry:1.3.1\n|    \\--- org.apache.kafka:kafka-clients:2.6.3 -&gt; 3.1.0 (*)\n\\--- org.springframework:spring-web:5.2.19.RELEASE\n     +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\n     \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\n\nruntimeElements - Elements of runtime for main. (n)\nNo dependencies\n\nruntimeOnly - Runtime only dependencies for source set 'main'. (n)\nNo dependencies\n\ntestAnnotationProcessor - Annotation processors and their dependencies for source set 'test'.\nNo dependencies\n\ntestCompile - Dependencies for source set 'test' (deprecated, use 'testImplementation ' instead).\n+--- com.google.guava:guava:17.0\n+--- com.googlecode.json-simple:json-simple:1.1.1\n|    \\--- junit:junit:4.10\n|         \\--- org.hamcrest:hamcrest-core:1.1\n+--- org.apache.kafka:kafka-clients:3.1.0\n|    +--- com.github.luben:zstd-jni:1.5.0-4\n|    +--- org.lz4:lz4-java:1.8.0\n|    +--- org.xerial.snappy:snappy-java:1.1.8.4\n|    \\--- org.slf4j:slf4j-api:1.7.30\n+--- com.google.code.gson:gson:2.8.2\n+--- io.confluent:kafka-json-serializer:6.2.0\n|    +--- com.fasterxml.jackson.core:jackson-databind:2.10.5.1\n|    |    +--- com.fasterxml.jackson.core:jackson-annotations:2.10.5\n|    |    \\--- com.fasterxml.jackson.core:jackson-core:2.10.5\n|    +--- io.confluent:common-config:6.2.0\n|    |    +--- io.confluent:common-utils:6.2.0\n|    |    |    \\--- org.slf4j:slf4j-api:1.7.30\n|    |    \\--- org.slf4j:slf4j-api:1.7.30\n|    +--- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:2.10.5\n|    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\n|    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\n|    +--- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.10.5\n|    |    +--- com.fasterxml.jackson.core:jackson-annotations:2.10.5\n|    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\n|    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\n|    +--- com.fasterxml.jackson.module:jackson-module-parameter-names:2.10.5\n|    |    +--- com.fasterxml.jackson.core:jackson-core:2.10.5\n|    |    \\--- com.fasterxml.jackson.core:jackson-databind:2.10.5 -&gt; 2.10.5.1 (*)\n|    \\--- io.confluent:common-utils:6.2.0 (*)\n+--- org.springframework.kafka:spring-kafka:2.6.13\n|    +--- org.springframework:spring-context:5.2.19.RELEASE\n|    |    +--- org.springframework:spring-aop:5.2.19.RELEASE\n|    |    |    +--- org.springframework:spring-beans:5.2.19.RELEASE\n|    |    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE\n|    |    |    |         \\--- org.springframework:spring-jcl:5.2.19.RELEASE\n|    |    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\n|    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\n|    |    +--- org.springframework:spring-core:5.2.19.RELEASE (*)\n|    |    \\--- org.springframework:spring-expression:5.2.19.RELEASE\n|    |         \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\n|    +--- org.springframework:spring-messaging:5.2.19.RELEASE\n|    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\n|    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\n|    +--- org.springframework:spring-tx:5.2.19.RELEASE\n|    |    +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\n|    |    \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\n|    +--- org.springframework.retry:spring-retry:1.3.1\n|    \\--- org.apache.kafka:kafka-clients:2.6.3 -&gt; 3.1.0 (*)\n\\--- org.springframework:spring-web:5.2.19.RELEASE\n     +--- org.springframework:spring-beans:5.2.19.RELEASE (*)\n     \\--- org.springframework:spring-core:5.2.19.RELEASE (*)\n</code></pre>\n"},{"tags":["java","list","arraylist","io"],"comments":[{"owner":{"account_id":212417,"reputation":43624,"user_id":465223,"accept_rate":75,"display_name":"dunni"},"score":5,"creation_date":1649605665,"post_id":71818158,"comment_id":126912796,"body_markdown":"You never store the input in the lists.","body":"You never store the input in the lists."},{"owner":{"account_id":24379785,"reputation":37,"user_id":18311550,"display_name":"Mario"},"score":0,"creation_date":1649606056,"post_id":71818158,"comment_id":126912901,"body_markdown":"Hi @dunni\nThanks for the advice, I appreciate it. \nSo, should I print the variables names and ages instead of name and age, or are you saying I need to store it by using String[] names = new String []; and int [] ages = new int [];?","body":"Hi @dunni Thanks for the advice, I appreciate it.  So, should I print the variables names and ages instead of name and age, or are you saying I need to store it by using String[] names = new String []; and int [] ages = new int [];?"},{"owner":{"account_id":127329,"reputation":2592,"user_id":324407,"accept_rate":25,"display_name":"Delta George"},"score":0,"creation_date":1649606597,"post_id":71818158,"comment_id":126913032,"body_markdown":"See this question: https://stackoverflow.com/questions/29640718/user-input-not-working-with-keyboard-nextline-and-string-java","body":"See this question: <a href=\"https://stackoverflow.com/questions/29640718/user-input-not-working-with-keyboard-nextline-and-string-java\" title=\"user input not working with keyboard nextline and string java\">stackoverflow.com/questions/29640718/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":8761405,"reputation":1504,"user_id":6551263,"display_name":"Chetan Ahirrao"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1649605857,"creation_date":1649605857,"answer_id":71818205,"question_id":71818158,"body_markdown":"Missing\r\n```\r\n names.add(name);\r\n ages.add(age);\r\n```","title":"Trying to populate two Lists with names and ages entered by the user, and then print them into the Console","body":"<p>Missing</p>\n<pre><code> names.add(name);\n ages.add(age);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649633240,"creation_date":1649628598,"answer_id":71820934,"question_id":71818158,"body_markdown":"You last loop for printing should be more like:\r\n\r\n    for (int i = 0; i &lt; names.length; i++) {\r\n        System.out.println(names.get(i) + &quot; is &quot; + ages.get(i) + &quot; years old&quot;);\r\n    }\r\n\r\n---\r\n\r\nIt&#39;s never a good idea to have a separate data structure (in this case a List) for each attribute of your objects. Rather, create a class for the object and have a single data structure (ie List) for your objects, which you create using the input.\r\n\r\nFor example:\r\n\r\n    public record Person (String name, int age) {}\r\n\r\nThen at the top of your method:\r\n\r\n    List&lt;Person&gt; people = new ArrayList&lt;&gt;();\r\n\r\nand in your input loop:\r\n\r\n    people.add(new Person(name, Integer.parseInt(age));\r\n\r\nthen to print:\r\n\r\n    people.forEach(System.out::println);\r\n\r\nThe print uses the default `toString()` implementation, but you can override it as you like.\r\n","title":"Trying to populate two Lists with names and ages entered by the user, and then print them into the Console","body":"<p>You last loop for printing should be more like:</p>\n<pre><code>for (int i = 0; i &lt; names.length; i++) {\n    System.out.println(names.get(i) + &quot; is &quot; + ages.get(i) + &quot; years old&quot;);\n}\n</code></pre>\n<hr />\n<p>It's never a good idea to have a separate data structure (in this case a List) for each attribute of your objects. Rather, create a class for the object and have a single data structure (ie List) for your objects, which you create using the input.</p>\n<p>For example:</p>\n<pre><code>public record Person (String name, int age) {}\n</code></pre>\n<p>Then at the top of your method:</p>\n<pre><code>List&lt;Person&gt; people = new ArrayList&lt;&gt;();\n</code></pre>\n<p>and in your input loop:</p>\n<pre><code>people.add(new Person(name, Integer.parseInt(age));\n</code></pre>\n<p>then to print:</p>\n<pre><code>people.forEach(System.out::println);\n</code></pre>\n<p>The print uses the default <code>toString()</code> implementation, but you can override it as you like.</p>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1649643364,"creation_date":1649633493,"answer_id":71821311,"question_id":71818158,"body_markdown":"Don&#39;t store two lists of names and ages separately, it makes your solution very brittle. Use the power of objects instead. \r\n\r\nProperties `name` and `age` has to associated not via indices of lists but has to be combined into an object.\r\n\r\nNow you have two attributes of the user. And you have to modify both list simultaneously while adding or removing user. And what if you decide that you need the third and the fourth user property? Adding more lists is not an option. `User` must be an object.\r\n\r\nWith Java 16 a special kind of class call [`record`](https://docs.oracle.com/en/java/javase/17/language/records.html) was introduced in the language. Records are transparent carriers of data with a very concise syntax, to define a record with two properties `name` and `age` you need only this line:\r\n```\r\npublic record User(String name, int age) {}\r\n```\r\nThat is the equivalent of a class with a constructor, getter, `equals/hasCode` and `toString()` (all this code will be generated by the compiler for you).\r\n\r\nIn order to organize the code nicer, I suggest you to extract the functionality for adding a user and printing the user list into separate methods.\r\n\r\n```\r\npublic class UserManager {\r\n    \r\n    public record User(String name, int age) {}\r\n    \r\n    public Scanner keyboard = new Scanner(System.in);\r\n    public List&lt;User&gt; users = new ArrayList&lt;&gt;();\r\n    \r\n    public void startMainMenu() {\r\n        System.out.println(&quot;&quot;&quot;\r\n                To add a new record enter N\r\n                To print existing records enter P\r\n                To exit enter Q&quot;&quot;&quot;);\r\n    \r\n        boolean quit = false;\r\n        while (!quit) {\r\n            String command = keyboard.nextLine().toUpperCase();\r\n            switch(command.charAt(0)) {\r\n                case &#39;N&#39; -&gt; addNewUser();\r\n                case &#39;P&#39; -&gt; print();\r\n                case &#39;Q&#39; -&gt; quit = true;\r\n            }\r\n        }\r\n    }\r\n    \r\n    public void addNewUser() {\r\n        String answer = &quot;no&quot;;\r\n        do {\r\n            System.out.println(&quot;What&#39;s your name? &quot;);\r\n            String name = keyboard.nextLine(); // Get the users name\r\n            \r\n            System.out.println(&quot;What&#39;s your age? &quot;);\r\n            int age = keyboard.nextInt(); // Adds the names and ages from the user input into the Arrays\r\n            keyboard.nextLine();\r\n            \r\n            users.add(new User(name, age));\r\n            \r\n            // Ask the user if they want to enter in another record\r\n            System.out.println(&quot;Do you want to enter an additional record? &quot;);\r\n            answer = keyboard.nextLine();\r\n            \r\n        } while (answer.equalsIgnoreCase(&quot;yes&quot;));\r\n        \r\n        System.out.println(&quot;--- Main menu --- enter N, P or Q&quot;);\r\n    }\r\n    \r\n    public void print() {\r\n        for (User user: users) System.out.println(user);\r\n        System.out.println(&quot;--- Main menu --- enter N, P or Q&quot;);\r\n    }\r\n}\r\n```\r\n`main()` - demo    \r\n    \r\n    public static void main(String[] args) {\r\n        UserManager userManager = new UserManager();\r\n        userManager.startMainMenu();\r\n    }\r\n______________________________\r\nWriting to a file\r\n\r\n    public static void writeToFile(List&lt;String&gt; names, List&lt;String&gt; ages) {\r\n        // Prompt for the filename\r\n        System.out.println(&quot;Enter your filename: &quot;);\r\n        String fileName = keyboard.nextLine();\r\n        \r\n        try(PrintWriter outputFile = new PrintWriter(fileName)) {\r\n            for (int i = 0; i &lt; names.size(); i++) {\r\n                outputFile.println(&quot;name: &quot; + names.get(i) + &quot;, age: &quot; + ages.get(i));\r\n            }\r\n        } catch (FileNotFoundException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }","title":"Trying to populate two Lists with names and ages entered by the user, and then print them into the Console","body":"<p>Don't store two lists of names and ages separately, it makes your solution very brittle. Use the power of objects instead.</p>\n<p>Properties <code>name</code> and <code>age</code> has to associated not via indices of lists but has to be combined into an object.</p>\n<p>Now you have two attributes of the user. And you have to modify both list simultaneously while adding or removing user. And what if you decide that you need the third and the fourth user property? Adding more lists is not an option. <code>User</code> must be an object.</p>\n<p>With Java 16 a special kind of class call <a href=\"https://docs.oracle.com/en/java/javase/17/language/records.html\" rel=\"nofollow noreferrer\"><code>record</code></a> was introduced in the language. Records are transparent carriers of data with a very concise syntax, to define a record with two properties <code>name</code> and <code>age</code> you need only this line:</p>\n<pre><code>public record User(String name, int age) {}\n</code></pre>\n<p>That is the equivalent of a class with a constructor, getter, <code>equals/hasCode</code> and <code>toString()</code> (all this code will be generated by the compiler for you).</p>\n<p>In order to organize the code nicer, I suggest you to extract the functionality for adding a user and printing the user list into separate methods.</p>\n<pre><code>public class UserManager {\n    \n    public record User(String name, int age) {}\n    \n    public Scanner keyboard = new Scanner(System.in);\n    public List&lt;User&gt; users = new ArrayList&lt;&gt;();\n    \n    public void startMainMenu() {\n        System.out.println(&quot;&quot;&quot;\n                To add a new record enter N\n                To print existing records enter P\n                To exit enter Q&quot;&quot;&quot;);\n    \n        boolean quit = false;\n        while (!quit) {\n            String command = keyboard.nextLine().toUpperCase();\n            switch(command.charAt(0)) {\n                case 'N' -&gt; addNewUser();\n                case 'P' -&gt; print();\n                case 'Q' -&gt; quit = true;\n            }\n        }\n    }\n    \n    public void addNewUser() {\n        String answer = &quot;no&quot;;\n        do {\n            System.out.println(&quot;What's your name? &quot;);\n            String name = keyboard.nextLine(); // Get the users name\n            \n            System.out.println(&quot;What's your age? &quot;);\n            int age = keyboard.nextInt(); // Adds the names and ages from the user input into the Arrays\n            keyboard.nextLine();\n            \n            users.add(new User(name, age));\n            \n            // Ask the user if they want to enter in another record\n            System.out.println(&quot;Do you want to enter an additional record? &quot;);\n            answer = keyboard.nextLine();\n            \n        } while (answer.equalsIgnoreCase(&quot;yes&quot;));\n        \n        System.out.println(&quot;--- Main menu --- enter N, P or Q&quot;);\n    }\n    \n    public void print() {\n        for (User user: users) System.out.println(user);\n        System.out.println(&quot;--- Main menu --- enter N, P or Q&quot;);\n    }\n}\n</code></pre>\n<p><code>main()</code> - demo</p>\n<pre><code>public static void main(String[] args) {\n    UserManager userManager = new UserManager();\n    userManager.startMainMenu();\n}\n</code></pre>\n<hr />\n<p>Writing to a file</p>\n<pre><code>public static void writeToFile(List&lt;String&gt; names, List&lt;String&gt; ages) {\n    // Prompt for the filename\n    System.out.println(&quot;Enter your filename: &quot;);\n    String fileName = keyboard.nextLine();\n    \n    try(PrintWriter outputFile = new PrintWriter(fileName)) {\n        for (int i = 0; i &lt; names.size(); i++) {\n            outputFile.println(&quot;name: &quot; + names.get(i) + &quot;, age: &quot; + ages.get(i));\n        }\n    } catch (FileNotFoundException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":24379785,"reputation":37,"user_id":18311550,"display_name":"Mario"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1993,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71821311,"answer_count":3,"score":0,"last_activity_date":1649678306,"creation_date":1649605545,"question_id":71818158,"body_markdown":"So, I&#39;m trying to make an &quot;Unlimited&quot; Array List of names and ages that the user inputs, specifically when they&#39;re asked if they want to enter another name and age, and say &quot;yes&quot;.\r\nHowever, I&#39;m able to only get the name and age that&#39;s been inputted the most recently by the user.\r\n\r\nI&#39;m trying to have the program the names and ages to the Console when the user says &quot;no&quot; to inputting another name and age. However, it will print the name and age before I even it an answer to that question.\r\n\r\n\r\nI&#39;ll post the code in question below.\r\n\r\n        String add;\r\n\t\tString answer;\r\n\r\n        ArrayList&lt;String&gt; names = new ArrayList&lt;&gt;();\r\n\t\tArrayList&lt;int[]&gt; ages = new ArrayList&lt;&gt;();\r\n\r\n        do\t\t\r\n\t\t{\r\n\t\t\t// Get the users name\r\n\t\t\tSystem.out.println(&quot;What&#39;s your name? &quot;);\r\n\t\t\tname = keyboard.nextLine();\r\n\t\t\t\r\n\t\t\t// Get the users name\r\n\t\t\tSystem.out.println(&quot;What&#39;s your age? &quot;);\r\n\t\t\tage = keyboard.nextInt();\r\n\r\n           // Adds the names and ages from the user input into the Arrays\r\n            names.add(name);\r\n\t\t\tages.add(age);\r\n\t\t\t\r\n\t\t\t// Ask the user if they want to enter in another record\r\n\t\t\tSystem.out.println(&quot;Do you want to enter an additional record? &quot;);\r\n\t\t\tanswer = keyboard.nextLine();\r\n\t\t}\r\n\t\t\r\n\t\twhile (answer.equals(&quot;yes&quot;));\r\n\r\n        do\r\n\t\t{\r\n\t\t\t// System.out.println(name);\r\n\t\t\t// System.out.println(age);\r\n\t\t\t/* System.out.println(Arrays.asList(print) + &quot;, &quot; + (ages));\r\n\t\t\t // Printing the records to different lines of the console\r\n\t\t\t   System.out.println(&quot;&quot;);\r\n\t\t\t*/\r\n        for (String print : names)\r\n\t\t\t{\r\n\t\t        // System.out.println(names);\r\n\t\t        // System.out.println(ages);\r\n\t\t\t\t  System.out.println(print + &quot;, &quot; + (ages)); \r\n\t\t\t\t \r\n\t\t\t    // Printing the records to different lines of the console\r\n\t\t\t\t  System.out.println(&quot;&quot;);\r\n\t\t\t\t  break;\r\n\t\t\t}\t\r\n\t\t}\r\n\t\twhile (answer.equals(&quot;no&quot;));\r\n\r\n\r\nAlso, I&#39;m asking the user if they want to write the name and age Arrays to a file. Yes means write to the file, no means I write a message that says &quot;Thanks for playing&quot;. However, depending on where I the following if I type in &quot;yes&quot; or &quot;no&quot;, it will either not give the file prompt, or goes into an infinite loop with the names and ages printed, depending on where I put it.\r\n\r\n    String answer2;\r\n    String write;\r\n    String fileName;\r\n    \r\n    ArrayList&lt;String&gt; names = new ArrayList&lt;&gt;();\r\n    ArrayList&lt;String&gt; ages = new ArrayList&lt;&gt;();\r\n\r\n\r\n    // If I put it here, it will do a infinite loop of the names and ages inputted.\r\n    // Prompt the user if they want to write to a file.\r\n    System.out.println(&quot;Do you want to write to a file? &quot;);\r\n    answer2 = keyboard.nextLine();\r\n\r\n    do\r\n    {\r\n     // If I put it here, it will continue to ask me the question infinitely.\r\n              // Prompt the user if they want to write to a file.\r\n              // System.out.println(&quot;Do you want to write to a file? &quot;);\r\n              //answer2 = keyboard.nextLine();\r\n    }\r\n    while (answer.equals(&quot;no&quot;));\r\n\r\n    do\r\n    {\r\n        // Prompt for the filename\r\n        System.out.println(&quot;Enter your filename: &quot;);\r\n        fileName = keyboard.nextLine();\r\n        //break;\r\n        \r\n        //PrintWriter outputFile;\r\n        try \r\n        {\r\n            PrintWriter outputFile = new PrintWriter(fileName);\r\n            \r\n            // Write the name(s) and age(s) to the file\r\n            outputFile.println(names);\r\n            outputFile.println(ages);\r\n            \r\n            outputFile.close();\r\n        } \r\n        \r\n        catch (FileNotFoundException e) \r\n        {\r\n            // \r\n            e.printStackTrace();\r\n            break;\r\n        }\r\n    }   \r\n    \r\n    while (answer2.equals(&quot;yes&quot;));\r\n    \r\n    do\r\n    {\r\n        System.out.println(&quot;Thanks for playing!&quot;);\r\n        break;\r\n    }\r\n    \r\n    while (answer2.equals(&quot;no&quot;));\r\n    keyboard.close();","title":"Trying to populate two Lists with names and ages entered by the user, and then print them into the Console","body":"<p>So, I'm trying to make an &quot;Unlimited&quot; Array List of names and ages that the user inputs, specifically when they're asked if they want to enter another name and age, and say &quot;yes&quot;.\nHowever, I'm able to only get the name and age that's been inputted the most recently by the user.</p>\n<p>I'm trying to have the program the names and ages to the Console when the user says &quot;no&quot; to inputting another name and age. However, it will print the name and age before I even it an answer to that question.</p>\n<p>I'll post the code in question below.</p>\n<pre><code>    String add;\n    String answer;\n\n    ArrayList&lt;String&gt; names = new ArrayList&lt;&gt;();\n    ArrayList&lt;int[]&gt; ages = new ArrayList&lt;&gt;();\n\n    do      \n    {\n        // Get the users name\n        System.out.println(&quot;What's your name? &quot;);\n        name = keyboard.nextLine();\n        \n        // Get the users name\n        System.out.println(&quot;What's your age? &quot;);\n        age = keyboard.nextInt();\n\n       // Adds the names and ages from the user input into the Arrays\n        names.add(name);\n        ages.add(age);\n        \n        // Ask the user if they want to enter in another record\n        System.out.println(&quot;Do you want to enter an additional record? &quot;);\n        answer = keyboard.nextLine();\n    }\n    \n    while (answer.equals(&quot;yes&quot;));\n\n    do\n    {\n        // System.out.println(name);\n        // System.out.println(age);\n        /* System.out.println(Arrays.asList(print) + &quot;, &quot; + (ages));\n         // Printing the records to different lines of the console\n           System.out.println(&quot;&quot;);\n        */\n    for (String print : names)\n        {\n            // System.out.println(names);\n            // System.out.println(ages);\n              System.out.println(print + &quot;, &quot; + (ages)); \n             \n            // Printing the records to different lines of the console\n              System.out.println(&quot;&quot;);\n              break;\n        }   \n    }\n    while (answer.equals(&quot;no&quot;));\n</code></pre>\n<p>Also, I'm asking the user if they want to write the name and age Arrays to a file. Yes means write to the file, no means I write a message that says &quot;Thanks for playing&quot;. However, depending on where I the following if I type in &quot;yes&quot; or &quot;no&quot;, it will either not give the file prompt, or goes into an infinite loop with the names and ages printed, depending on where I put it.</p>\n<pre><code>String answer2;\nString write;\nString fileName;\n\nArrayList&lt;String&gt; names = new ArrayList&lt;&gt;();\nArrayList&lt;String&gt; ages = new ArrayList&lt;&gt;();\n\n\n// If I put it here, it will do a infinite loop of the names and ages inputted.\n// Prompt the user if they want to write to a file.\nSystem.out.println(&quot;Do you want to write to a file? &quot;);\nanswer2 = keyboard.nextLine();\n\ndo\n{\n // If I put it here, it will continue to ask me the question infinitely.\n          // Prompt the user if they want to write to a file.\n          // System.out.println(&quot;Do you want to write to a file? &quot;);\n          //answer2 = keyboard.nextLine();\n}\nwhile (answer.equals(&quot;no&quot;));\n\ndo\n{\n    // Prompt for the filename\n    System.out.println(&quot;Enter your filename: &quot;);\n    fileName = keyboard.nextLine();\n    //break;\n    \n    //PrintWriter outputFile;\n    try \n    {\n        PrintWriter outputFile = new PrintWriter(fileName);\n        \n        // Write the name(s) and age(s) to the file\n        outputFile.println(names);\n        outputFile.println(ages);\n        \n        outputFile.close();\n    } \n    \n    catch (FileNotFoundException e) \n    {\n        // \n        e.printStackTrace();\n        break;\n    }\n}   \n\nwhile (answer2.equals(&quot;yes&quot;));\n\ndo\n{\n    System.out.println(&quot;Thanks for playing!&quot;);\n    break;\n}\n\nwhile (answer2.equals(&quot;no&quot;));\nkeyboard.close();\n</code></pre>\n"},{"tags":["java","android","xml","shadow","material-design"],"comments":[{"owner":{"account_id":1824296,"reputation":23996,"user_id":1657537,"display_name":"alanv"},"score":2,"creation_date":1427015603,"post_id":29187313,"comment_id":46599002,"body_markdown":"No, the color of the shadow provided by the framework cannot be changed.","body":"No, the color of the shadow provided by the framework cannot be changed."},{"owner":{"account_id":4142568,"reputation":3246,"user_id":3397345,"accept_rate":25,"display_name":"Davideas"},"score":0,"creation_date":1436363836,"post_id":29187313,"comment_id":50580391,"body_markdown":"Since I&#39;m interested for a shadow color on CardView I&#39;ve found something, but didn&#39;t understand how to use it: `https://github.com/gabrielemariotti/cardslib/blob/master/doc/SHADOW.md` and I&#39;ve also found this: `http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/5.0.1_r1/frameworks/support/v7/cardview/res/values/colors.xml`","body":"Since I&#39;m interested for a shadow color on CardView I&#39;ve found something, but didn&#39;t understand how to use it: <code>https:&#47;&#47;github.com&#47;gabrielemariotti&#47;cardslib&#47;blob&#47;master&#47;doc&zwnj;&#8203;&#47;SHADOW.md</code> and I&#39;ve also found this: <code>http:&#47;&#47;grepcode.com&#47;file&#47;repository.grepcode.com&#47;java&#47;ext&#47;co&zwnj;&#8203;m.google.android&#47;and&zwnj;&#8203;roid&#47;5.0.1_r1&#47;framew&zwnj;&#8203;orks&#47;support&#47;v7&#47;card&zwnj;&#8203;view&#47;res&#47;values&#47;colo&zwnj;&#8203;rs.xml</code>"},{"owner":{"account_id":4142568,"reputation":3246,"user_id":3397345,"accept_rate":25,"display_name":"Davideas"},"score":0,"creation_date":1436365547,"post_id":29187313,"comment_id":50581824,"body_markdown":"And this: `https://developer.android.com/training/material/shadows-clipping.html`","body":"And this: <code>https:&#47;&#47;developer.android.com&#47;training&#47;material&#47;shadows-clip&zwnj;&#8203;ping.html</code>"},{"owner":{"account_id":4271998,"reputation":96,"user_id":3493613,"display_name":"FaBioInsolia"},"score":0,"creation_date":1487700623,"post_id":29187313,"comment_id":71898891,"body_markdown":"[According to this post](http://stackoverflow.com/questions/39514252/how-to-set-elevation-color) looks like is not possible to change the color of the shadow","body":"<a href=\"http://stackoverflow.com/questions/39514252/how-to-set-elevation-color\">According to this post</a> looks like is not possible to change the color of the shadow"}],"answers":[{"tags":[],"owner":{"account_id":556949,"reputation":16299,"user_id":919219,"display_name":"Zielony"},"down_vote_count":1,"up_vote_count":66,"is_accepted":true,"score":65,"last_activity_date":1547660876,"creation_date":1489147392,"answer_id":42717993,"question_id":29187313,"body_markdown":"I know that this question is very old and probably the author doesn&#39;t need the answer anymore. I&#39;ll just leave it here so others can find it.\r\n\r\nLollipop&#39;s elevation system doesn&#39;t support colored shadows.\r\n\r\nBut, if you need colored shadows, it&#39;s possible to get them using Carbon. It&#39;s a kind-of support library for Material Design and in the most recent version there is an option to change shadow color. There&#39;s a ton of nice designs on Behance featuring colored shadows and I thought it would be nice to have them despite lack of such feature in Android. It&#39;s important to note that colored shadows are emulated on **all** Android versions, on 5.0+ too.\r\n\r\nhttps://github.com/ZieIony/Carbon\r\n\r\nThe following image and code can be found in Carbon&#39;s samples.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nCode:\r\n\r\n    &lt;carbon.widget.LinearLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:orientation=&quot;horizontal&quot;&gt;\r\n\r\n        &lt;carbon.widget.Button\r\n            android:layout_width=&quot;56dp&quot;\r\n            android:layout_height=&quot;56dp&quot;\r\n            android:layout_margin=&quot;@dimen/carbon_padding&quot;\r\n            android:background=&quot;#ffffff&quot;\r\n            app:carbon_cornerRadius=&quot;2dp&quot;\r\n            app:carbon_elevation=&quot;8dp&quot;\r\n            app:carbon_elevationShadowColor=&quot;@color/carbon_red_700&quot;/&gt;\r\n\r\n    &lt;/carbon.widget.LinearLayout&gt;\r\n\r\n&quot;CardView&quot;:\r\n\r\n    &lt;carbon.widget.LinearLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:orientation=&quot;horizontal&quot;&gt;\r\n\r\n        &lt;carbon.widget.LinearLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;160dp&quot;\r\n            android:layout_margin=&quot;@dimen/carbon_margin&quot;\r\n            android:background=&quot;#ffffff&quot;\r\n            app:carbon_cornerRadius=&quot;2dp&quot;\r\n            app:carbon_elevation=&quot;8dp&quot;\r\n            app:carbon_elevationShadowColor=&quot;@color/carbon_red_700&quot;&gt;\r\n\r\n            &lt;carbon.widget.ImageView\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;0dp&quot;\r\n                android:layout_weight=&quot;1&quot;\r\n                android:src=&quot;@drawable/test_image&quot;/&gt;\r\n\r\n            &lt;carbon.widget.TextView\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:text=&quot;test text&quot;/&gt;\r\n        &lt;/carbon.widget.LinearLayout&gt;\r\n\r\n    &lt;/carbon.widget.LinearLayout&gt;\r\n  [1]: https://i.stack.imgur.com/9WvsR.png","title":"Android change Material elevation shadow color","body":"<p>I know that this question is very old and probably the author doesn't need the answer anymore. I'll just leave it here so others can find it.</p>\n\n<p>Lollipop's elevation system doesn't support colored shadows.</p>\n\n<p>But, if you need colored shadows, it's possible to get them using Carbon. It's a kind-of support library for Material Design and in the most recent version there is an option to change shadow color. There's a ton of nice designs on Behance featuring colored shadows and I thought it would be nice to have them despite lack of such feature in Android. It's important to note that colored shadows are emulated on <strong>all</strong> Android versions, on 5.0+ too.</p>\n\n<p><a href=\"https://github.com/ZieIony/Carbon\" rel=\"noreferrer\">https://github.com/ZieIony/Carbon</a></p>\n\n<p>The following image and code can be found in Carbon's samples.</p>\n\n<p><a href=\"https://i.stack.imgur.com/9WvsR.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/9WvsR.png\" alt=\"enter image description here\"></a></p>\n\n<p>Code:</p>\n\n<pre><code>&lt;carbon.widget.LinearLayout\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:orientation=\"horizontal\"&gt;\n\n    &lt;carbon.widget.Button\n        android:layout_width=\"56dp\"\n        android:layout_height=\"56dp\"\n        android:layout_margin=\"@dimen/carbon_padding\"\n        android:background=\"#ffffff\"\n        app:carbon_cornerRadius=\"2dp\"\n        app:carbon_elevation=\"8dp\"\n        app:carbon_elevationShadowColor=\"@color/carbon_red_700\"/&gt;\n\n&lt;/carbon.widget.LinearLayout&gt;\n</code></pre>\n\n<p>\"CardView\":</p>\n\n<pre><code>&lt;carbon.widget.LinearLayout\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:orientation=\"horizontal\"&gt;\n\n    &lt;carbon.widget.LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"160dp\"\n        android:layout_margin=\"@dimen/carbon_margin\"\n        android:background=\"#ffffff\"\n        app:carbon_cornerRadius=\"2dp\"\n        app:carbon_elevation=\"8dp\"\n        app:carbon_elevationShadowColor=\"@color/carbon_red_700\"&gt;\n\n        &lt;carbon.widget.ImageView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"0dp\"\n            android:layout_weight=\"1\"\n            android:src=\"@drawable/test_image\"/&gt;\n\n        &lt;carbon.widget.TextView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:text=\"test text\"/&gt;\n    &lt;/carbon.widget.LinearLayout&gt;\n\n&lt;/carbon.widget.LinearLayout&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4163904,"reputation":4878,"user_id":3413324,"accept_rate":83,"display_name":"Gauthier"},"down_vote_count":0,"up_vote_count":53,"is_accepted":false,"score":53,"last_activity_date":1550576877,"creation_date":1550576877,"answer_id":54765631,"question_id":29187313,"body_markdown":"Starting API 28 (Pie) [View#setOutlineAmbientShadowColor(int color)][1] and [View#setOutlineSpotShadowColor(int color)][2] are available in the View class.\r\n\r\nIf you use elevation on your View, you can use both methods to change the color of the shadow.\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/view/View.html#setOutlineAmbientShadowColor(int)\r\n  [2]: https://developer.android.com/reference/android/view/View.html#setOutlineSpotShadowColor(int)","title":"Android change Material elevation shadow color","body":"<p>Starting API 28 (Pie) <a href=\"https://developer.android.com/reference/android/view/View.html#setOutlineAmbientShadowColor(int)\" rel=\"noreferrer\">View#setOutlineAmbientShadowColor(int color)</a> and <a href=\"https://developer.android.com/reference/android/view/View.html#setOutlineSpotShadowColor(int)\" rel=\"noreferrer\">View#setOutlineSpotShadowColor(int color)</a> are available in the View class.</p>\n\n<p>If you use elevation on your View, you can use both methods to change the color of the shadow.</p>\n"},{"tags":[],"owner":{"account_id":10671711,"reputation":821,"user_id":7856586,"display_name":"Roman Soviak"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1559913480,"creation_date":1559913480,"answer_id":56495136,"question_id":29187313,"body_markdown":"You can use [Shadow Layout](https://github.com/Devlight/ShadowLayout). Check my [answer](https://stackoverflow.com/a/52736354/7856586).","title":"Android change Material elevation shadow color","body":"<p>You can use <a href=\"https://github.com/Devlight/ShadowLayout\" rel=\"nofollow noreferrer\">Shadow Layout</a>. Check my <a href=\"https://stackoverflow.com/a/52736354/7856586\">answer</a>.</p>\n"},{"tags":[],"owner":{"account_id":24480349,"reputation":1,"user_id":18398843,"display_name":"Waleed Hassan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649678251,"creation_date":1649678251,"answer_id":71827442,"question_id":29187313,"body_markdown":"I know I&#39;m late but I want to share the solution as I searched hard for this issue, and the approved method as above ref: https://stackoverflow.com/a/42717993/18398843 is not working well, these shadows show some random shapes in small size of application..\r\nBTW the solution is You have to use &quot;ComplexView&quot; to create your custom shadow,\r\n\r\ndependency: `implementation &#39;com.github.BluRe-CN:ComplexView:v1.1&#39;`\r\n\r\nXML\r\n\r\n    &lt;com.blure.complexview.ComplexView\r\n       android:id=&quot;@+id/shadow_card_1&quot;\r\n       android:layout_width=&quot;@dimen/_65sdp&quot;\r\n       android:layout_height=&quot;@dimen/_65sdp&quot;\r\n       android:layout_centerInParent=&quot;true&quot;\r\n       app:radius=&quot;@dimen/_30sdp&quot;\r\n       app:shadow=&quot;true&quot;\r\n       app:shadowAlpha=&quot;250&quot;\r\n       app:shadowSpread=&quot;2&quot;/&gt;\r\n\r\n//this will create the circular shadow for my need you can reduce the radius\r\n\r\nCustom View\r\n\r\n    val shadow = ComplexView(context)\r\n    val radii = floatArrayOf(100f, 100f, 100f, 100f, 100f, 100f, 100f, 100f)//customise according to your requirement\r\n    val opacity = 150//customise according to your requirement\r\n     shadow.shadow =Shadow(\r\n           2,\r\n           opacity,\r\n           &quot;#96B9BB&quot;,\r\n           GradientDrawable.RECTANGLE,\r\n           radii,\r\n           Shadow.Position.CENTER\r\n          )\r\n    \r\n    val param: RelativeLayout.LayoutParams =\r\n                        RelativeLayout.LayoutParams(\r\n                            context.resources.getDimension(R.dimen._160sdp).toInt(),\r\n                            context.resources.getDimension(R.dimen._160sdp).toInt()\r\n                        )\r\n    shadow.layoutParams = param\r\n    shadow.addView(yourCustomView)\r\n\r\nthanks :)","title":"Android change Material elevation shadow color","body":"<p>I know I'm late but I want to share the solution as I searched hard for this issue, and the approved method as above ref: <a href=\"https://stackoverflow.com/a/42717993/18398843\">https://stackoverflow.com/a/42717993/18398843</a> is not working well, these shadows show some random shapes in small size of application..\nBTW the solution is You have to use &quot;ComplexView&quot; to create your custom shadow,</p>\n<p>dependency: <code>implementation 'com.github.BluRe-CN:ComplexView:v1.1'</code></p>\n<p>XML</p>\n<pre><code>&lt;com.blure.complexview.ComplexView\n   android:id=&quot;@+id/shadow_card_1&quot;\n   android:layout_width=&quot;@dimen/_65sdp&quot;\n   android:layout_height=&quot;@dimen/_65sdp&quot;\n   android:layout_centerInParent=&quot;true&quot;\n   app:radius=&quot;@dimen/_30sdp&quot;\n   app:shadow=&quot;true&quot;\n   app:shadowAlpha=&quot;250&quot;\n   app:shadowSpread=&quot;2&quot;/&gt;\n</code></pre>\n<p>//this will create the circular shadow for my need you can reduce the radius</p>\n<p>Custom View</p>\n<pre><code>val shadow = ComplexView(context)\nval radii = floatArrayOf(100f, 100f, 100f, 100f, 100f, 100f, 100f, 100f)//customise according to your requirement\nval opacity = 150//customise according to your requirement\n shadow.shadow =Shadow(\n       2,\n       opacity,\n       &quot;#96B9BB&quot;,\n       GradientDrawable.RECTANGLE,\n       radii,\n       Shadow.Position.CENTER\n      )\n\nval param: RelativeLayout.LayoutParams =\n                    RelativeLayout.LayoutParams(\n                        context.resources.getDimension(R.dimen._160sdp).toInt(),\n                        context.resources.getDimension(R.dimen._160sdp).toInt()\n                    )\nshadow.layoutParams = param\nshadow.addView(yourCustomView)\n</code></pre>\n<p>thanks :)</p>\n"}],"owner":{"account_id":5234909,"reputation":1353,"user_id":4183825,"accept_rate":54,"display_name":"Broadwell"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92206,"favorite_count":0,"down_vote_count":0,"up_vote_count":47,"accepted_answer_id":42717993,"answer_count":4,"score":47,"last_activity_date":1649678251,"creation_date":1426967529,"question_id":29187313,"body_markdown":"is it possible to change the shadow color produced by the xml elevation property?\r\nI want the shadow be dynamically changed by code.","title":"Android change Material elevation shadow color","body":"<p>is it possible to change the shadow color produced by the xml elevation property?\nI want the shadow be dynamically changed by code.</p>\n"},{"tags":["java","sftp","testcontainers","docker-java"],"answers":[{"tags":[],"owner":{"account_id":231683,"reputation":4218,"user_id":496038,"display_name":"pringi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648208229,"creation_date":1648204695,"answer_id":71615559,"question_id":71613887,"body_markdown":"First check if port 2222 is free in the machine that is launching the TestContainer.\r\n\r\nSecond, change you setup of GenericContainer to:\r\n\r\n    sftpContainer = new GenericContainer&lt;&gt;(DockerImageName.parse(&quot;atmoz/sftp:latest&quot;)).withExposedPorts(PORT)\r\n            .withCommand(&quot;foo:pass:::folder&quot;)\r\n            .withCreateContainerCmdModifier(\r\n                cmd -&gt; cmd.withHostConfig(\r\n                    new HostConfig()\r\n                        .withPortBindings(new PortBinding(Ports.Binding.bindPort(22), new ExposedPort(PORT)))));\r\n\r\nYou need to map the exposed port (in your case 2222) into the internal port (22).\r\n\r\nThis example run on version 1.16.0 of testcontainers.","title":"Testcontainers with sftp image throws Error on &quot;nc not found&quot; or &quot;Address Not Available&quot;","body":"<p>First check if port 2222 is free in the machine that is launching the TestContainer.</p>\n<p>Second, change you setup of GenericContainer to:</p>\n<pre><code>sftpContainer = new GenericContainer&lt;&gt;(DockerImageName.parse(&quot;atmoz/sftp:latest&quot;)).withExposedPorts(PORT)\n        .withCommand(&quot;foo:pass:::folder&quot;)\n        .withCreateContainerCmdModifier(\n            cmd -&gt; cmd.withHostConfig(\n                new HostConfig()\n                    .withPortBindings(new PortBinding(Ports.Binding.bindPort(22), new ExposedPort(PORT)))));\n</code></pre>\n<p>You need to map the exposed port (in your case 2222) into the internal port (22).</p>\n<p>This example run on version 1.16.0 of testcontainers.</p>\n"},{"tags":[],"owner":{"account_id":1488715,"reputation":1432,"user_id":1396362,"display_name":"Kevin Wittek"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1648452707,"creation_date":1648452707,"answer_id":71643823,"question_id":71613887,"body_markdown":"Testcontainers runs a couple of commands from within the container to determine when the intenral port of the container is available:\r\nhttps://github.com/testcontainers/testcontainers-java/blob/5e6dbc791b6184f0de6d1f9d184a78324c1ec945/core/src/main/java/org/testcontainers/containers/wait/internal/InternalCommandPortListeningCheck.java#L29-L38\r\n\r\nThis is part of the default `HostPortWaitStrategy`. It might be the case, that the `atmoz/sftp:latest` does not allow any of those commands to be run. \r\n\r\nAlso, your log level is on `DEBUG`, you should not give extra attention to those messages. What is the actual error you are getting?","title":"Testcontainers with sftp image throws Error on &quot;nc not found&quot; or &quot;Address Not Available&quot;","body":"<p>Testcontainers runs a couple of commands from within the container to determine when the intenral port of the container is available:\n<a href=\"https://github.com/testcontainers/testcontainers-java/blob/5e6dbc791b6184f0de6d1f9d184a78324c1ec945/core/src/main/java/org/testcontainers/containers/wait/internal/InternalCommandPortListeningCheck.java#L29-L38\" rel=\"nofollow noreferrer\">https://github.com/testcontainers/testcontainers-java/blob/5e6dbc791b6184f0de6d1f9d184a78324c1ec945/core/src/main/java/org/testcontainers/containers/wait/internal/InternalCommandPortListeningCheck.java#L29-L38</a></p>\n<p>This is part of the default <code>HostPortWaitStrategy</code>. It might be the case, that the <code>atmoz/sftp:latest</code> does not allow any of those commands to be run.</p>\n<p>Also, your log level is on <code>DEBUG</code>, you should not give extra attention to those messages. What is the actual error you are getting?</p>\n"}],"owner":{"account_id":5536607,"reputation":94,"user_id":4394685,"display_name":"tepetrol"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3015,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1649678182,"creation_date":1648196174,"question_id":71613887,"body_markdown":"I have this very simple code for running my integration test:\r\n(using Testcontainer artifact version 1.16.2)\r\nNote: I have tested whether this port in test is available before running the test case.\r\n\r\n```java\r\n@Testcontainers\r\npublic class SftpServerTestContainer {\r\n    private static final int PORT = 2222;\r\n    private static final String DOCKER_IMAGE_NAME = &quot;atmoz/sftp:latest&quot;;\r\n    private static final String USER_PASS = &quot;foo:pass:::folder&quot;;\r\n\r\n    @Container\r\n    private static final GenericContainer sftpContainer =\r\n            new GenericContainer&lt;&gt;(DockerImageName.parse(DOCKER_IMAGE_NAME));\r\n\r\n    @Bean\r\n    @Profile(&quot;test&quot;)\r\n    public GenericContainer sftpContainerAsABean(){\r\n        sftpContainer\r\n            .withAccessToHost(true)  \r\n                .withExposedPorts(PORT)\r\n                .withCommand(USER_PASS);\r\n        sftpContainer.start();\r\n        return sftpContainer;\r\n    }\r\n}\r\n```\r\nIt has a very simple startup process of a `GenericContainer` with a given name. But i could never start it up and end up in the following failure:\r\n\r\n```bash\r\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] wire - http-outgoing-4 &gt;&gt; &quot;Content-Length: 26[\\r][\\n]&quot;\r\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] wire - http-outgoing-4 &gt;&gt; &quot;Host: localhost:2375[\\r][\\n]&quot;\r\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] wire - http-outgoing-4 &gt;&gt; &quot;Connection: keep-alive[\\r][\\n]&quot;\r\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] wire - http-outgoing-4 &gt;&gt; &quot;User-Agent: Apache-HttpClient/5.0.3 (Java/17)[\\r][\\n]&quot;\r\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] wire - http-outgoing-4 &gt;&gt; &quot;[\\r][\\n]&quot;\r\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] wire - http-outgoing-4 &gt;&gt; &quot;{&quot;Detach&quot;:null,&quot;Tty&quot;:null}&quot;\r\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;HTTP/1.1 200 OK[\\r][\\n]&quot;\r\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;Content-Type: application/vnd.docker.raw-stream[\\r][\\n]&quot;\r\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;Api-Version&quot;\r\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;: 1.41[\\r][\\n]&quot;\r\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;Docker-Experimental: false[\\r][\\n]&quot;\r\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;Ostype: linux[\\r][\\n]&quot;\r\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;Server: Docker/20.10.13 (linux)[\\r][\\n]&quot;\r\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;[\\r][\\n]&quot;\r\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] headers - http-outgoing-4 &lt;&lt; HTTP/1.1 200 OK\r\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] headers - http-outgoing-4 &lt;&lt; Content-Type: application/vnd.docker.raw-stream\r\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] headers - http-outgoing-4 &lt;&lt; Api-Version: 1.41\r\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] headers - http-outgoing-4 &lt;&lt; Docker-Experimental: false\r\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] headers - http-outgoing-4 &lt;&lt; Ostype: linux\r\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] headers - http-outgoing-4 &lt;&lt; Server: Docker/20.10.13 (linux)\r\n[DEBUG] 2022-03-25 09:06:43.137 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;[0x2][0x0][0x0][0x0][0x0][0x0][0x0][0x1a]/bin/sh: 1: nc: not found[\\n]&quot;\r\n[DEBUG] 2022-03-25 09:06:43.138 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;[0x2][0x0][0x0][0x0][0x0][0x0][0x0]x/bin/bash: connect: Cannot assign requested address[\\n]&quot;\r\n[DEBUG] 2022-03-25 09:06:43.138 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;/bin/bash: /dev/tcp/localhost/2222: Cannot assign requested address[\\n]&quot;\r\n[DEBUG] 2022-03-25 09:06:43.242 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;[0x2][0x0][0x0][0x0][0x0][0x0][0x0][0x1a]/bin/sh: 1: nc: not found[\\n]&quot;\r\n[DEBUG] 2022-03-25 09:06:43.243 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;[0x2][0x0][0x0][0x0][0x0][0x0][0x0]x/bin/bash: connect: Cannot assign requested address[\\n]&quot;\r\n[DEBUG] 2022-03-25 09:06:43.243 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;/bin/bash: /dev/tcp/localhost/2222: Cannot assign requested address[\\n]&quot;\r\n[DEBUG] 2022-03-25 09:06:43.346 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;[0x2][0x0][0x0][0x0][0x0][0x0][0x0][0x1a]/bin/sh: 1: nc: not found[\\n]&quot;\r\n[DEBUG] 2022-03-25 09:06:43.347 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;[0x2][0x0][0x0][0x0][0x0][0x0][0x0]x/bin/bash: connect: Cannot assign requested address[\\n]&quot;\r\n[DEBUG] 2022-03-25 09:06:43.347 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;/bin/bash: /dev/tcp/localhost/2222: Cannot assign requested address[\\n]&quot;\r\n[DEBUG] 2022-03-25 09:06:43.451 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;[0x2][0x0][0x0][0x0][0x0][0x0][0x0][0x1a]/bin/sh: 1: nc: not found[\\n]&quot;\r\n[DEBUG] 2022-03-25 09:06:43.452 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;[0x2][0x0][0x0][0x0][0x0][0x0][0x0]x/bin/bash: connect: Cannot assign requested address[\\n]&quot;\r\n[DEBUG] 2022-03-25 09:06:43.452 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;/bin/bash: /dev/tcp/localhost/2222: Cannot assign requested address[\\n]&quot;\r\n[DEBUG] 2022-03-25 09:06:43.555 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;[0x2][0x0][0x0][0x0][0x0][0x0][0x0][0x1a]/bin/sh: 1: nc: not found[\\n]&quot;\r\n[DEBUG] 2022-03-25 09:06:43.556 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;[0x2][0x0][0x0][0x0][0x0][0x0][0x0]x/bin/bash: connect: Cannot assign requested address[\\n]&quot;\r\n[DEBUG] 2022-03-25 09:06:43.556 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;/bin/bash: /dev/tcp/localhost/2222: Cannot assign requested address[\\n]&quot;\r\n[DEBUG] 2022-03-25 09:06:43.665 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;[0x2][0x0][0x0][0x0][0x0][0x0][0x0][0x1a]/bin/sh: 1: nc: not found[\\n]&quot;\r\n[DEBUG] 2022-03-25 09:06:43.668 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;[0x2][0x0][0x0][0x0][0x0][0x0][0x0]x/bin/bash: connect: Cannot assign requested address[\\n]&quot;\r\n[DEBUG] 2022-03-25 09:06:43.668 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;/bin/bash: /dev/tcp/localhost/2222: Cannot assign requested address[\\n]&quot;\r\n[DEBUG] 2022-03-25 09:06:43.778 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;[0x2][0x0][0x0][0x0][0x0][0x0][0x0][0x1a]/bin/sh: 1: nc: not found[\\n]&quot;\r\n[DEBUG] 2022-03-25 09:06:43.780 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;[0x2][0x0][0x0][0x0][0x0][0x0][0x0]x/bin/bash: connect: Cannot assign requested address[\\n]&quot;\r\n[DEBUG] 2022-03-25 09:06:43.780 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;/bin/bash: /dev/tcp/localhost/2222: Cannot assign requested address[\\n]&quot;\r\n[DEBUG] 2022-03-25 09:06:43.890 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;[0x2][0x0][0\r\n\r\n```\r\n\r\nFor some reason, I think `docker-java` lib that `TestContainers` is using `nc` to do some networking stuff. But if it is because of that, i quickly changed the image to `atmoz/sftp:alpine` and I received the following error (similar but not the same):\r\n\r\n```bash\r\n[DEBUG] 2022-03-25 09:11:36.145 [docker-java-stream--355075128] wire - http-outgoing-4 &lt;&lt; &quot;/bin/bash: line 1: /dev/tcp/localhost/2222: Address not available[\\n]&quot;\r\n[DEBUG] 2022-03-25 09:11:36.250 [docker-java-stream--355075128] wire - http-outgoing-4 &lt;&lt; &quot;[0x2][0x0][0x0][0x0][0x0][0x0][0x0]l/bin/bash: connect: Address not available[\\n]&quot;\r\n[DEBUG] 2022-03-25 09:11:36.250 [docker-java-stream--355075128] wire - http-outgoing-4 &lt;&lt; &quot;/bin/bash: line 1: /dev/tcp/localhost/2222: Address not available[\\n]&quot;\r\n```\r\n\r\nSo I do not understand the underlying mechanism of Testcontainers in this case.\r\n\r\nBy the way, I also ran same integration test on keycloak image, and discovered that I always have `nc not found` error as well. But I think that&#39;s because Keycloak base image hardens the image for security purposes.","title":"Testcontainers with sftp image throws Error on &quot;nc not found&quot; or &quot;Address Not Available&quot;","body":"<p>I have this very simple code for running my integration test:\n(using Testcontainer artifact version 1.16.2)\nNote: I have tested whether this port in test is available before running the test case.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Testcontainers\npublic class SftpServerTestContainer {\n    private static final int PORT = 2222;\n    private static final String DOCKER_IMAGE_NAME = &quot;atmoz/sftp:latest&quot;;\n    private static final String USER_PASS = &quot;foo:pass:::folder&quot;;\n\n    @Container\n    private static final GenericContainer sftpContainer =\n            new GenericContainer&lt;&gt;(DockerImageName.parse(DOCKER_IMAGE_NAME));\n\n    @Bean\n    @Profile(&quot;test&quot;)\n    public GenericContainer sftpContainerAsABean(){\n        sftpContainer\n            .withAccessToHost(true)  \n                .withExposedPorts(PORT)\n                .withCommand(USER_PASS);\n        sftpContainer.start();\n        return sftpContainer;\n    }\n}\n</code></pre>\n<p>It has a very simple startup process of a <code>GenericContainer</code> with a given name. But i could never start it up and end up in the following failure:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] wire - http-outgoing-4 &gt;&gt; &quot;Content-Length: 26[\\r][\\n]&quot;\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] wire - http-outgoing-4 &gt;&gt; &quot;Host: localhost:2375[\\r][\\n]&quot;\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] wire - http-outgoing-4 &gt;&gt; &quot;Connection: keep-alive[\\r][\\n]&quot;\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] wire - http-outgoing-4 &gt;&gt; &quot;User-Agent: Apache-HttpClient/5.0.3 (Java/17)[\\r][\\n]&quot;\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] wire - http-outgoing-4 &gt;&gt; &quot;[\\r][\\n]&quot;\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] wire - http-outgoing-4 &gt;&gt; &quot;{&quot;Detach&quot;:null,&quot;Tty&quot;:null}&quot;\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;HTTP/1.1 200 OK[\\r][\\n]&quot;\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;Content-Type: application/vnd.docker.raw-stream[\\r][\\n]&quot;\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;Api-Version&quot;\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;: 1.41[\\r][\\n]&quot;\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;Docker-Experimental: false[\\r][\\n]&quot;\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;Ostype: linux[\\r][\\n]&quot;\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;Server: Docker/20.10.13 (linux)[\\r][\\n]&quot;\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;[\\r][\\n]&quot;\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] headers - http-outgoing-4 &lt;&lt; HTTP/1.1 200 OK\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] headers - http-outgoing-4 &lt;&lt; Content-Type: application/vnd.docker.raw-stream\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] headers - http-outgoing-4 &lt;&lt; Api-Version: 1.41\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] headers - http-outgoing-4 &lt;&lt; Docker-Experimental: false\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] headers - http-outgoing-4 &lt;&lt; Ostype: linux\n[DEBUG] 2022-03-25 09:06:43.078 [docker-java-stream-164976604] headers - http-outgoing-4 &lt;&lt; Server: Docker/20.10.13 (linux)\n[DEBUG] 2022-03-25 09:06:43.137 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;[0x2][0x0][0x0][0x0][0x0][0x0][0x0][0x1a]/bin/sh: 1: nc: not found[\\n]&quot;\n[DEBUG] 2022-03-25 09:06:43.138 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;[0x2][0x0][0x0][0x0][0x0][0x0][0x0]x/bin/bash: connect: Cannot assign requested address[\\n]&quot;\n[DEBUG] 2022-03-25 09:06:43.138 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;/bin/bash: /dev/tcp/localhost/2222: Cannot assign requested address[\\n]&quot;\n[DEBUG] 2022-03-25 09:06:43.242 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;[0x2][0x0][0x0][0x0][0x0][0x0][0x0][0x1a]/bin/sh: 1: nc: not found[\\n]&quot;\n[DEBUG] 2022-03-25 09:06:43.243 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;[0x2][0x0][0x0][0x0][0x0][0x0][0x0]x/bin/bash: connect: Cannot assign requested address[\\n]&quot;\n[DEBUG] 2022-03-25 09:06:43.243 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;/bin/bash: /dev/tcp/localhost/2222: Cannot assign requested address[\\n]&quot;\n[DEBUG] 2022-03-25 09:06:43.346 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;[0x2][0x0][0x0][0x0][0x0][0x0][0x0][0x1a]/bin/sh: 1: nc: not found[\\n]&quot;\n[DEBUG] 2022-03-25 09:06:43.347 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;[0x2][0x0][0x0][0x0][0x0][0x0][0x0]x/bin/bash: connect: Cannot assign requested address[\\n]&quot;\n[DEBUG] 2022-03-25 09:06:43.347 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;/bin/bash: /dev/tcp/localhost/2222: Cannot assign requested address[\\n]&quot;\n[DEBUG] 2022-03-25 09:06:43.451 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;[0x2][0x0][0x0][0x0][0x0][0x0][0x0][0x1a]/bin/sh: 1: nc: not found[\\n]&quot;\n[DEBUG] 2022-03-25 09:06:43.452 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;[0x2][0x0][0x0][0x0][0x0][0x0][0x0]x/bin/bash: connect: Cannot assign requested address[\\n]&quot;\n[DEBUG] 2022-03-25 09:06:43.452 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;/bin/bash: /dev/tcp/localhost/2222: Cannot assign requested address[\\n]&quot;\n[DEBUG] 2022-03-25 09:06:43.555 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;[0x2][0x0][0x0][0x0][0x0][0x0][0x0][0x1a]/bin/sh: 1: nc: not found[\\n]&quot;\n[DEBUG] 2022-03-25 09:06:43.556 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;[0x2][0x0][0x0][0x0][0x0][0x0][0x0]x/bin/bash: connect: Cannot assign requested address[\\n]&quot;\n[DEBUG] 2022-03-25 09:06:43.556 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;/bin/bash: /dev/tcp/localhost/2222: Cannot assign requested address[\\n]&quot;\n[DEBUG] 2022-03-25 09:06:43.665 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;[0x2][0x0][0x0][0x0][0x0][0x0][0x0][0x1a]/bin/sh: 1: nc: not found[\\n]&quot;\n[DEBUG] 2022-03-25 09:06:43.668 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;[0x2][0x0][0x0][0x0][0x0][0x0][0x0]x/bin/bash: connect: Cannot assign requested address[\\n]&quot;\n[DEBUG] 2022-03-25 09:06:43.668 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;/bin/bash: /dev/tcp/localhost/2222: Cannot assign requested address[\\n]&quot;\n[DEBUG] 2022-03-25 09:06:43.778 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;[0x2][0x0][0x0][0x0][0x0][0x0][0x0][0x1a]/bin/sh: 1: nc: not found[\\n]&quot;\n[DEBUG] 2022-03-25 09:06:43.780 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;[0x2][0x0][0x0][0x0][0x0][0x0][0x0]x/bin/bash: connect: Cannot assign requested address[\\n]&quot;\n[DEBUG] 2022-03-25 09:06:43.780 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;/bin/bash: /dev/tcp/localhost/2222: Cannot assign requested address[\\n]&quot;\n[DEBUG] 2022-03-25 09:06:43.890 [docker-java-stream-164976604] wire - http-outgoing-4 &lt;&lt; &quot;[0x2][0x0][0\n\n</code></pre>\n<p>For some reason, I think <code>docker-java</code> lib that <code>TestContainers</code> is using <code>nc</code> to do some networking stuff. But if it is because of that, i quickly changed the image to <code>atmoz/sftp:alpine</code> and I received the following error (similar but not the same):</p>\n<pre class=\"lang-sh prettyprint-override\"><code>[DEBUG] 2022-03-25 09:11:36.145 [docker-java-stream--355075128] wire - http-outgoing-4 &lt;&lt; &quot;/bin/bash: line 1: /dev/tcp/localhost/2222: Address not available[\\n]&quot;\n[DEBUG] 2022-03-25 09:11:36.250 [docker-java-stream--355075128] wire - http-outgoing-4 &lt;&lt; &quot;[0x2][0x0][0x0][0x0][0x0][0x0][0x0]l/bin/bash: connect: Address not available[\\n]&quot;\n[DEBUG] 2022-03-25 09:11:36.250 [docker-java-stream--355075128] wire - http-outgoing-4 &lt;&lt; &quot;/bin/bash: line 1: /dev/tcp/localhost/2222: Address not available[\\n]&quot;\n</code></pre>\n<p>So I do not understand the underlying mechanism of Testcontainers in this case.</p>\n<p>By the way, I also ran same integration test on keycloak image, and discovered that I always have <code>nc not found</code> error as well. But I think that's because Keycloak base image hardens the image for security purposes.</p>\n"},{"tags":["java","lombok"],"comments":[{"owner":{"account_id":4947846,"reputation":9433,"user_id":3982755,"accept_rate":79,"display_name":"Bentaye"},"score":0,"creation_date":1649329829,"post_id":71778791,"comment_id":126850826,"body_markdown":"If you remove `(toBuilder = true)` it seems works. Do you need it?","body":"If you remove <code>(toBuilder = true)</code> it seems works. Do you need it?"},{"owner":{"account_id":3710331,"reputation":1513,"user_id":3087839,"display_name":"Gurkan ƒ∞lleez"},"score":0,"creation_date":1649424029,"post_id":71778791,"comment_id":126878576,"body_markdown":"You can use delombok and see what is wrong in this type of situation","body":"You can use delombok and see what is wrong in this type of situation"}],"answers":[{"tags":[],"owner":{"account_id":13887193,"reputation":7307,"user_id":10026074,"display_name":"Jan Rieke"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1649424733,"creation_date":1649423782,"answer_id":71797715,"question_id":71778791,"body_markdown":"You are using `toBuilder = true`, and you have constructor parameters whose names differ from the corresponding fields in your superclass. Thus, lombok does not know how to extract the field values from an instance when populating a builder in the `toBuilder()` method.\r\n\r\nTo solve this problem, you can either use exactly the same names as your constructor parameters (if the fields are accessible from your subclass, e.g. `protected`), or give lombok a hint in which way to retrieve the field value. The latter can be achieved using the `@Builder.ObtainVia` annotation:\r\n\r\n    public EventData(@Builder.ObtainVia(method = &quot;getName&quot;) String eventName, String errorCode, @Builder.ObtainVia(method = &quot;getMessage&quot;) String eventMessage, String api, String errorMessage) {\r\n        super(eventName, EventSource.BARCLAYS_GIL_PLUGIN_A_REST_SERVICE, eventMessage);\r\n        this.errorCode = errorCode;\r\n        this.errorMessage = errorMessage;\r\n        this.api = api;\r\n    }","title":"@Builder(toBuilder = true) on constructor: Error &quot;has private access&quot;","body":"<p>You are using <code>toBuilder = true</code>, and you have constructor parameters whose names differ from the corresponding fields in your superclass. Thus, lombok does not know how to extract the field values from an instance when populating a builder in the <code>toBuilder()</code> method.</p>\n<p>To solve this problem, you can either use exactly the same names as your constructor parameters (if the fields are accessible from your subclass, e.g. <code>protected</code>), or give lombok a hint in which way to retrieve the field value. The latter can be achieved using the <code>@Builder.ObtainVia</code> annotation:</p>\n<pre><code>public EventData(@Builder.ObtainVia(method = &quot;getName&quot;) String eventName, String errorCode, @Builder.ObtainVia(method = &quot;getMessage&quot;) String eventMessage, String api, String errorMessage) {\n    super(eventName, EventSource.BARCLAYS_GIL_PLUGIN_A_REST_SERVICE, eventMessage);\n    this.errorCode = errorCode;\n    this.errorMessage = errorMessage;\n    this.api = api;\n}\n</code></pre>\n"}],"owner":{"account_id":1467167,"reputation":1919,"user_id":1379706,"accept_rate":62,"display_name":"stallion"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1003,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1649677973,"creation_date":1649320283,"question_id":71778791,"body_markdown":"I have the following 2 parent-child classes..\r\n\r\n```\r\n@AllArgsConstructor\r\npublic abstract class Data {\r\n\r\n    @Getter\r\n    private final String name;\r\n\r\n    @Getter\r\n    private final String source;\r\n\r\n    @Getter\r\n    private final String message;\r\n}\r\n```\r\n\r\nAnd \r\n\r\n```\r\npublic class EventData extends Data {\r\n\r\n    @Getter\r\n    private String errorCode;\r\n\r\n    @Getter\r\n    private String errorMessage;\r\n\r\n    @Getter\r\n    private String api;\r\n\r\n\r\n    @Builder(toBuilder = true)\r\n    public EventData(String eventName, String errorCode, String eventMessage, String api, String errorMessage) {\r\n        super(eventName, EventSource.BARCLAYS_GIL_PLUGIN_A_REST_SERVICE, eventMessage);\r\n        this.errorCode = errorCode;\r\n        this.errorMessage = errorMessage;\r\n        this.api = api;\r\n    }\r\n\r\n}\r\n```\r\n\r\nI am getting the following error:\r\n\r\n```\r\n    [javac] /local/home/vishivan/workplace/xyx/src/ABC/src/com/LOL/mno/models/EventData.java:36: error: eventMessage has private access in Data\r\n    [javac]     @Builder(toBuilder = true)\r\n    [javac]     ^\r\n    [javac] 1 error\r\n\r\n```\r\n\r\nSo here are my constraints \r\n\r\ni need a builder in EventData and i need a copyconstructor to create the EventData object as well.. I tried adding setter@ and it resulted in error as final variables cant have setter defined... how can i solve this?","title":"@Builder(toBuilder = true) on constructor: Error &quot;has private access&quot;","body":"<p>I have the following 2 parent-child classes..</p>\n<pre><code>@AllArgsConstructor\npublic abstract class Data {\n\n    @Getter\n    private final String name;\n\n    @Getter\n    private final String source;\n\n    @Getter\n    private final String message;\n}\n</code></pre>\n<p>And</p>\n<pre><code>public class EventData extends Data {\n\n    @Getter\n    private String errorCode;\n\n    @Getter\n    private String errorMessage;\n\n    @Getter\n    private String api;\n\n\n    @Builder(toBuilder = true)\n    public EventData(String eventName, String errorCode, String eventMessage, String api, String errorMessage) {\n        super(eventName, EventSource.BARCLAYS_GIL_PLUGIN_A_REST_SERVICE, eventMessage);\n        this.errorCode = errorCode;\n        this.errorMessage = errorMessage;\n        this.api = api;\n    }\n\n}\n</code></pre>\n<p>I am getting the following error:</p>\n<pre><code>    [javac] /local/home/vishivan/workplace/xyx/src/ABC/src/com/LOL/mno/models/EventData.java:36: error: eventMessage has private access in Data\n    [javac]     @Builder(toBuilder = true)\n    [javac]     ^\n    [javac] 1 error\n\n</code></pre>\n<p>So here are my constraints</p>\n<p>i need a builder in EventData and i need a copyconstructor to create the EventData object as well.. I tried adding setter@ and it resulted in error as final variables cant have setter defined... how can i solve this?</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database","google-cloud-platform"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1649676162,"post_id":71826663,"comment_id":126928436,"body_markdown":"I&#39;m not sure I understand. The last screenshot is what you want to achieve? &quot;dan ned&quot; is the name of the user that comes from FirebaseUser object?","body":"I&#39;m not sure I understand. The last screenshot is what you want to achieve? &quot;dan ned&quot; is the name of the user that comes from FirebaseUser object?"},{"owner":{"display_name":"user18722136"},"score":0,"creation_date":1649676597,"post_id":71826663,"comment_id":126928551,"body_markdown":"Last screenshot is what i have now. dan ned comes from register page i just combine name and lastname. Now i want to show data on my page and for that i have to do child(&quot;dan ned&quot;) or make user == &quot;dan ned&quot;. Thats what i think.","body":"Last screenshot is what i have now. dan ned comes from register page i just combine name and lastname. Now i want to show data on my page and for that i have to do child(&quot;dan ned&quot;) or make user == &quot;dan ned&quot;. Thats what i think."},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1649676779,"post_id":71826663,"comment_id":126928613,"body_markdown":"So you don&#39;t know how to read the data under &quot;dan ned&quot;?","body":"So you don&#39;t know how to read the data under &quot;dan ned&quot;?"},{"owner":{"display_name":"user18722136"},"score":0,"creation_date":1649676961,"post_id":71826663,"comment_id":126928678,"body_markdown":"I know how to read data under &quot;dan ned&quot; thats more like i dont know how to read &quot;dan ned&quot;. I will edit my question to show my full code.","body":"I know how to read data under &quot;dan ned&quot; thats more like i dont know how to read &quot;dan ned&quot;. I will edit my question to show my full code."},{"owner":{"display_name":"user18722136"},"score":0,"creation_date":1649677239,"post_id":71826663,"comment_id":126928778,"body_markdown":"I dont know how to read data under &quot;dan ned &quot; now whan i changed UID to &quot;dan ned&quot; before i just called UID of current user but now i cant do it.","body":"I dont know how to read data under &quot;dan ned &quot; now whan i changed UID to &quot;dan ned&quot; before i just called UID of current user but now i cant do it."}],"answers":[{"tags":[],"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649677674,"creation_date":1649677674,"answer_id":71827307,"question_id":71826663,"body_markdown":"There is no need to attach three listeners in order to read those three values. You can use only one, as you can see in the following lines of code:\r\n\r\n    String name = FirebaseAuth.getInstance().getCurrentUser().getDisplayName();\r\n\tDatabaseReference db = FirebaseDatabase.getInstance().getReference();\r\n\tDatabaseReference nameRef = db.child(&quot;No server&quot;).child(name);\r\n    nameRef.get().addOnCompleteListener(new OnCompleteListener&lt;DataSnapshot&gt;() {\r\n\t\t@Override\r\n\t\tpublic void onComplete(@NonNull Task&lt;DataSnapshot&gt; task) {\r\n\t\t\tif (task.isSuccessful()) {\r\n                DataSnapshot snapshot = task.getResult();\r\n                String key = snapshot.getKey();\r\n\t\t\t\tLog.d(&quot;TAG&quot;, key); //It will print &quot;dan ned&quot;\r\n\t\t        String email = snapshot.child(&quot;email&quot;).getValue(String.class);\r\n\t\t\t\tLog.d(&quot;TAG&quot;, email); //It will print &quot;DanilNed@gmail.com&quot;\r\n\t\t        String lastName = snapshot.child(&quot;lastName&quot;).getValue(String.class);\r\n\t\t\t\tLog.d(&quot;TAG&quot;, lastName); //It will print &quot;Ned&quot;\r\n\t\t        String name = snapshot.child(&quot;name&quot;).getValue(String.class);\r\n\t\t\t\tLog.d(&quot;TAG&quot;, name); //It will print &quot;Dan&quot;\r\n\t\t\t} else {\r\n\t\t\t\tLog.d(&quot;TAG&quot;, task.getException().getMessage()); //Never ignore potential errors!\r\n\t\t\t}\r\n\t\t}\r\n\t});","title":"Current user to string","body":"<p>There is no need to attach three listeners in order to read those three values. You can use only one, as you can see in the following lines of code:</p>\n<pre><code>String name = FirebaseAuth.getInstance().getCurrentUser().getDisplayName();\nDatabaseReference db = FirebaseDatabase.getInstance().getReference();\nDatabaseReference nameRef = db.child(&quot;No server&quot;).child(name);\nnameRef.get().addOnCompleteListener(new OnCompleteListener&lt;DataSnapshot&gt;() {\n    @Override\n    public void onComplete(@NonNull Task&lt;DataSnapshot&gt; task) {\n        if (task.isSuccessful()) {\n            DataSnapshot snapshot = task.getResult();\n            String key = snapshot.getKey();\n            Log.d(&quot;TAG&quot;, key); //It will print &quot;dan ned&quot;\n            String email = snapshot.child(&quot;email&quot;).getValue(String.class);\n            Log.d(&quot;TAG&quot;, email); //It will print &quot;DanilNed@gmail.com&quot;\n            String lastName = snapshot.child(&quot;lastName&quot;).getValue(String.class);\n            Log.d(&quot;TAG&quot;, lastName); //It will print &quot;Ned&quot;\n            String name = snapshot.child(&quot;name&quot;).getValue(String.class);\n            Log.d(&quot;TAG&quot;, name); //It will print &quot;Dan&quot;\n        } else {\n            Log.d(&quot;TAG&quot;, task.getException().getMessage()); //Never ignore potential errors!\n        }\n    }\n});\n</code></pre>\n"}],"owner":{"display_name":"user18722136"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71827307,"answer_count":1,"score":1,"last_activity_date":1649677709,"creation_date":1649674921,"question_id":71826663,"body_markdown":"I faced a problem with showing data. Before I used current users UID as a key but now I&#39;m using the custom key and I don&#39;t know how to call this key as a string in my code.\r\n\r\nMy code this part ( child(user.getUid() )\r\n\r\n[![enter image description here][1]][1]\r\n\r\n```\r\nFirebaseUser userUID;\r\nuserUID = FirebaseAuth.getInstance().getCurrentUser();\r\n\r\n        final DatabaseReference NameRef = database.getReference().child(&quot;No server&quot;).child(userUID.getUid()).child(&quot;name&quot;);\r\n        final DatabaseReference LastNameRef = database.getReference().child(&quot;No server&quot;).child(userUID.getUid()).child(&quot;lastName&quot;);\r\n        final DatabaseReference EmailRef = database.getReference().child(&quot;No server&quot;).child(userUID.getUid()).child(&quot;email&quot;);\r\n```\r\n\r\n\r\nWhat changed\r\n\r\n[![enter image description here][2]][2]\r\n\r\n  [1]: https://i.stack.imgur.com/1XvNk.png\r\n  [2]: https://i.stack.imgur.com/Q6ExT.png\r\n\r\nI want make user a string &quot;dan ned&quot;.\r\n\r\nEdit:\r\n\r\n```\r\n FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n\r\n        final DatabaseReference NameRef = database.getReference().child(&quot;No server&quot;).child(user.getUid()).child(&quot;name&quot;);\r\n        final DatabaseReference LastNameRef = database.getReference().child(&quot;No server&quot;).child(user.getUid()).child(&quot;lastName&quot;);\r\n        final DatabaseReference EmailRef = database.getReference().child(&quot;No server&quot;).child(user.getUid()).child(&quot;email&quot;);\r\n\r\n      NameRef.addValueEventListener(new ValueEventListener() {\r\n          @Override\r\n          public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n              if (dataSnapshot.exists()){\r\n                  final String strName = dataSnapshot.getValue(String.class);\r\n                  textName.setText(strName);\r\n              }\r\n          }\r\n\r\n          @Override\r\n          public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n          }\r\n      });\r\n\r\n        LastNameRef.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                if (dataSnapshot.exists()){\r\n                    final String strLastName = dataSnapshot.getValue(String.class);\r\n                    textLastName.setText(strLastName);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n\r\n        EmailRef.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                if (dataSnapshot.exists()){\r\n                    final String strEmail = dataSnapshot.getValue(String.class);\r\n                    textEmail.setText(strEmail);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n\r\n```","title":"Current user to string","body":"<p>I faced a problem with showing data. Before I used current users UID as a key but now I'm using the custom key and I don't know how to call this key as a string in my code.</p>\n<p>My code this part ( child(user.getUid() )</p>\n<p><a href=\"https://i.stack.imgur.com/1XvNk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1XvNk.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>FirebaseUser userUID;\nuserUID = FirebaseAuth.getInstance().getCurrentUser();\n\n        final DatabaseReference NameRef = database.getReference().child(&quot;No server&quot;).child(userUID.getUid()).child(&quot;name&quot;);\n        final DatabaseReference LastNameRef = database.getReference().child(&quot;No server&quot;).child(userUID.getUid()).child(&quot;lastName&quot;);\n        final DatabaseReference EmailRef = database.getReference().child(&quot;No server&quot;).child(userUID.getUid()).child(&quot;email&quot;);\n</code></pre>\n<p>What changed</p>\n<p><a href=\"https://i.stack.imgur.com/Q6ExT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Q6ExT.png\" alt=\"enter image description here\" /></a></p>\n<p>I want make user a string &quot;dan ned&quot;.</p>\n<p>Edit:</p>\n<pre><code> FirebaseDatabase database = FirebaseDatabase.getInstance();\n\n        final DatabaseReference NameRef = database.getReference().child(&quot;No server&quot;).child(user.getUid()).child(&quot;name&quot;);\n        final DatabaseReference LastNameRef = database.getReference().child(&quot;No server&quot;).child(user.getUid()).child(&quot;lastName&quot;);\n        final DatabaseReference EmailRef = database.getReference().child(&quot;No server&quot;).child(user.getUid()).child(&quot;email&quot;);\n\n      NameRef.addValueEventListener(new ValueEventListener() {\n          @Override\n          public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\n              if (dataSnapshot.exists()){\n                  final String strName = dataSnapshot.getValue(String.class);\n                  textName.setText(strName);\n              }\n          }\n\n          @Override\n          public void onCancelled(@NonNull DatabaseError error) {\n\n          }\n      });\n\n        LastNameRef.addValueEventListener(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\n                if (dataSnapshot.exists()){\n                    final String strLastName = dataSnapshot.getValue(String.class);\n                    textLastName.setText(strLastName);\n                }\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError error) {\n\n            }\n        });\n\n        EmailRef.addValueEventListener(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\n                if (dataSnapshot.exists()){\n                    final String strEmail = dataSnapshot.getValue(String.class);\n                    textEmail.setText(strEmail);\n                }\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError error) {\n\n            }\n        });\n\n</code></pre>\n"},{"tags":["java","methods"],"answers":[{"tags":[],"owner":{"account_id":1142966,"reputation":3482,"user_id":1126380,"accept_rate":75,"display_name":"Arturo Volpe"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1649677693,"creation_date":1649475563,"answer_id":71805077,"question_id":71804925,"body_markdown":"The ref to `String::compareTo` is a special kind of method reference called [&quot;Reference to an Instance Method of an Arbitrary Object of a Particular Type&quot;](https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html).\r\n\r\nIn this case, the compiler knows that we are referencing a not-static method of a given class, and it can translate to a functional interface with the desired signature. \r\n\r\nFor example:\r\n\r\n```java\r\nString t1 = &quot;t1&quot;;\r\nString t2 = &quot;t2&quot;;\r\n\r\n// this\r\nComparator&lt;String&gt; comparator = String::compareTo;\r\ncomparator.compareTo(t1, t2);\r\n\r\n// will be &#39;translated&#39; to:\r\nComparator&lt;String&gt; comparator = (String s1, String s2) -&gt; s1.compareTo(s2);\r\nt1.compareTo(t2);\r\n\r\n```\r\n\r\n&gt; Note that the method will be called with the context of the first parameter (the this used will be `t1`).\r\n\r\nPoints 8 and 9 of [State of lambda](http://cr.openjdk.java.net/%7Ebriangoetz/lambda/lambda-state-final.html) give a rationale for this implementation.\r\n\r\n\r\nFrom [Overview of method references][1] youtube video\r\n\r\n[![Overview of method references][2]][2]\r\n\r\n\r\n  [1]: https://www.youtube.com/watch?v=4bykHgnNXuA\r\n  [2]: https://i.stack.imgur.com/WklGq.png","title":"How does Java method reference String::compareTo implementing Comparator&lt;String&gt; works?","body":"<p>The ref to <code>String::compareTo</code> is a special kind of method reference called <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\" rel=\"nofollow noreferrer\">&quot;Reference to an Instance Method of an Arbitrary Object of a Particular Type&quot;</a>.</p>\n<p>In this case, the compiler knows that we are referencing a not-static method of a given class, and it can translate to a functional interface with the desired signature.</p>\n<p>For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String t1 = &quot;t1&quot;;\nString t2 = &quot;t2&quot;;\n\n// this\nComparator&lt;String&gt; comparator = String::compareTo;\ncomparator.compareTo(t1, t2);\n\n// will be 'translated' to:\nComparator&lt;String&gt; comparator = (String s1, String s2) -&gt; s1.compareTo(s2);\nt1.compareTo(t2);\n\n</code></pre>\n<blockquote>\n<p>Note that the method will be called with the context of the first parameter (the this used will be <code>t1</code>).</p>\n</blockquote>\n<p>Points 8 and 9 of <a href=\"http://cr.openjdk.java.net/%7Ebriangoetz/lambda/lambda-state-final.html\" rel=\"nofollow noreferrer\">State of lambda</a> give a rationale for this implementation.</p>\n<p>From <a href=\"https://www.youtube.com/watch?v=4bykHgnNXuA\" rel=\"nofollow noreferrer\">Overview of method references</a> youtube video</p>\n<p><a href=\"https://i.stack.imgur.com/WklGq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WklGq.png\" alt=\"Overview of method references\" /></a></p>\n"}],"owner":{"account_id":17730,"reputation":5723,"user_id":39998,"accept_rate":73,"display_name":"David Hofmann"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":187,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71805077,"answer_count":1,"score":1,"last_activity_date":1649677693,"creation_date":1649472893,"question_id":71804925,"body_markdown":"\r\n    java.util.Comparator&lt;String&gt; lambda = (s1, s2) -&gt; s1.compareTo(s2); // line 1\r\n    java.util.Comparator&lt;String&gt; methodRef = String::compareTo;         // line 2\r\n\r\nI can&#39;t understand why line 2 works without error, and why it is equivalent to line 1. Line 2 is returning a method reference that receives a string and returns and int (i.e. `int compare(String s)` ), however, comparator functional method signature is `int compare(T o1, T o2);`","title":"How does Java method reference String::compareTo implementing Comparator&lt;String&gt; works?","body":"<pre><code>java.util.Comparator&lt;String&gt; lambda = (s1, s2) -&gt; s1.compareTo(s2); // line 1\njava.util.Comparator&lt;String&gt; methodRef = String::compareTo;         // line 2\n</code></pre>\n<p>I can't understand why line 2 works without error, and why it is equivalent to line 1. Line 2 is returning a method reference that receives a string and returns and int (i.e. <code>int compare(String s)</code> ), however, comparator functional method signature is <code>int compare(T o1, T o2);</code></p>\n"},{"tags":["java","swing","netbeans","jframe","look-and-feel"],"comments":[{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1391383371,"post_id":21516365,"comment_id":32487720,"body_markdown":"See [The Use of Multiple JFrames, Good/Bad Practice?](http://stackoverflow.com/a/9554657/418556)","body":"See <a href=\"http://stackoverflow.com/a/9554657/418556\">The Use of Multiple JFrames, Good/Bad Practice?</a>"}],"answers":[{"tags":[],"owner":{"account_id":701757,"reputation":121151,"user_id":592139,"display_name":"Ian Roberts"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1391377467,"creation_date":1391377467,"answer_id":21516633,"question_id":21516365,"body_markdown":"From the [JavaDocs of UIManager][1]:\r\n\r\n&gt; Once the look and feel has been changed it is imperative to invoke `updateUI` on all `JComponents`. The method [`SwingUtilities.updateComponentTreeUI(java.awt.Component)`][2] makes it easy to apply `updateUI` to a containment hierarchy. Refer to it for details. The exact behavior of not invoking `updateUI` after changing the look and feel is unspecified. It is very possible to receive unexpected exceptions, painting problems, or worse.\r\n\r\nIf you change the look and feel after creating your frames (even if they&#39;re not yet visible) then you need to `updateUI` for the change to take effect (or better, if you know you&#39;re always going to want to use a specific look and feel then set that in your main class before you create the frames in the first place).\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/javax/swing/UIManager.html\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html#updateComponentTreeUI%28java.awt.Component%29","title":"Setting different look and feel is not working on a java class opened my from main class","body":"<p>From the <a href=\"http://docs.oracle.com/javase/7/docs/api/javax/swing/UIManager.html\" rel=\"nofollow\">JavaDocs of UIManager</a>:</p>\n\n<blockquote>\n  <p>Once the look and feel has been changed it is imperative to invoke <code>updateUI</code> on all <code>JComponents</code>. The method <a href=\"http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html#updateComponentTreeUI%28java.awt.Component%29\" rel=\"nofollow\"><code>SwingUtilities.updateComponentTreeUI(java.awt.Component)</code></a> makes it easy to apply <code>updateUI</code> to a containment hierarchy. Refer to it for details. The exact behavior of not invoking <code>updateUI</code> after changing the look and feel is unspecified. It is very possible to receive unexpected exceptions, painting problems, or worse.</p>\n</blockquote>\n\n<p>If you change the look and feel after creating your frames (even if they're not yet visible) then you need to <code>updateUI</code> for the change to take effect (or better, if you know you're always going to want to use a specific look and feel then set that in your main class before you create the frames in the first place).</p>\n"},{"tags":[],"owner":{"account_id":12462280,"reputation":21,"user_id":9073533,"display_name":"Alex Delphi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649677578,"creation_date":1649676839,"answer_id":71827085,"question_id":21516365,"body_markdown":"Yes. Same problem. If set LookAndFeel BEFORE create form, all works )\r\nif set after creation, it may be not work )\r\n\r\nInstalled LookAndFeel can be show\r\n```\r\n        LookAndFeelInfo [] lf = UIManager.getInstalledLookAndFeels();\r\n        for(int n = 0; n &lt; lf.length; n++) {\r\n            System.out.println(lf[n].getClassName());\r\n        }\r\n```","title":"Setting different look and feel is not working on a java class opened my from main class","body":"<p>Yes. Same problem. If set LookAndFeel BEFORE create form, all works )\nif set after creation, it may be not work )</p>\n<p>Installed LookAndFeel can be show</p>\n<pre><code>        LookAndFeelInfo [] lf = UIManager.getInstalledLookAndFeels();\n        for(int n = 0; n &lt; lf.length; n++) {\n            System.out.println(lf[n].getClassName());\n        }\n</code></pre>\n"}],"owner":{"account_id":3835341,"reputation":67,"user_id":3179804,"accept_rate":60,"display_name":"Adam K"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2720,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":21516633,"answer_count":2,"score":0,"last_activity_date":1649677578,"creation_date":1391375880,"question_id":21516365,"body_markdown":"My java program has multiple classes, each containing a separate JFrame. All three JFrames are started in my main class, and are set to setVisible(false) so they are hidden. When a button from a JPopUpMenu is clicked, the respective JFrame is set to setVisible(true). In these classes I have defined:\r\n\r\n     UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());\r\n\r\nWhen I run each class separately by right-clicking the .java file in NetBeans and choosing Run File, the Look and Feel works perfectly. However, when I run the main class and setVisible(true) on the JFrame, the look and feel does not work. I thought this may have been just an error with NetBeans, so I tried building the .jar and running it. The problem is still there. The main class&#39;s Look and Feel has been set using the same code, and that works perfectly. I am not sure what to do. Any help is appreciated.","title":"Setting different look and feel is not working on a java class opened my from main class","body":"<p>My java program has multiple classes, each containing a separate JFrame. All three JFrames are started in my main class, and are set to setVisible(false) so they are hidden. When a button from a JPopUpMenu is clicked, the respective JFrame is set to setVisible(true). In these classes I have defined:</p>\n\n<pre><code> UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());\n</code></pre>\n\n<p>When I run each class separately by right-clicking the .java file in NetBeans and choosing Run File, the Look and Feel works perfectly. However, when I run the main class and setVisible(true) on the JFrame, the look and feel does not work. I thought this may have been just an error with NetBeans, so I tried building the .jar and running it. The problem is still there. The main class's Look and Feel has been set using the same code, and that works perfectly. I am not sure what to do. Any help is appreciated.</p>\n"},{"tags":["java","oracle"],"comments":[{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1649349853,"post_id":71785718,"comment_id":126859179,"body_markdown":"Use `?` parameter placeholders and pass arguments via `setXxx()`. First and foremost to stop being vulnerable to SQL injection (look that up).","body":"Use <code>?</code> parameter placeholders and pass arguments via <code>setXxx()</code>. First and foremost to stop being vulnerable to SQL injection (look that up)."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1649349916,"post_id":71785718,"comment_id":126859202,"body_markdown":"I recommend you don‚Äôt use `java.util.Date` and `java.sql.Timestamp`. Those classes are poorly designed and long outdated. Instead use `Instant` and/or other classes from [java.time, the modern Java date and time API](https://docs.oracle.com/javase/tutorial/datetime/).","body":"I recommend you don‚Äôt use <code>java.util.Date</code> and <code>java.sql.Timestamp</code>. Those classes are poorly designed and long outdated. Instead use <code>Instant</code> and/or other classes from <a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API</a>."},{"owner":{"account_id":1186841,"reputation":1019,"user_id":1160629,"accept_rate":43,"display_name":"KS1"},"score":0,"creation_date":1649677537,"post_id":71785718,"comment_id":126928880,"body_markdown":"@OleV.V. - Hi Ole, thanks for that, I have added additional comment o the question, should have mentioned this is all because for some reason in Oracle 19c, the PreparedStatement hangs for a long period, before returning results.","body":"@OleV.V. - Hi Ole, thanks for that, I have added additional comment o the question, should have mentioned this is all because for some reason in Oracle 19c, the PreparedStatement hangs for a long period, before returning results."}],"owner":{"account_id":1186841,"reputation":1019,"user_id":1160629,"accept_rate":43,"display_name":"KS1"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649677459,"creation_date":1649348534,"question_id":71785718,"body_markdown":"Pretty much as the title says, I am trying to put a simple Java time value into my SQL for Oracle but I get the below error when the code runs the query. \r\n\r\n&gt; Exception:java.sql.SQLSyntaxErrorException: ORA-00920: invalid\r\n&gt; relational operator\r\n\r\n    Long theTime = new java.util.Date().getTime();\r\n    StringBuffer sql = new StringBuffer(&quot;SELECT...&quot;);\r\n    ...\r\n    sql.append(&quot; WHERE from_date &lt;= &quot;+new java.sql.Timestamp(theTime));\r\n\r\n    Statement stmt = conn.createStatement();\r\n    ResultSet rs = stmt.executeQuery(sql.toString());\r\n\r\nHow can I resolve this exception?\r\n\r\n**Additional information**\r\nI should add that for reasons unknown, when using this against Oracle 19c (does&#39;t happen on 12c) we are having an issue with PreparedStatement. \r\n\r\nThis line &#39;hangs&#39; for 3 hours, before running and returning results, hence why I&#39;m suing the example above. \r\n\r\n    StringBuffer sql = new StringBuffer(&quot;SELECT...&quot;);\r\n    ...\r\n    sql.append(&quot; WHERE from_date &lt;= ?&quot;);\r\n    PreparedStatement ps = conn.getConnection().prepareStatement(sql.toString()); // Hangs here for 3 hours!\r\n\r\nThanks in advance\r\n\r\nK.","title":"invalid relational operator when using Java.util.Date.getTime() in Oracle Timestamp","body":"<p>Pretty much as the title says, I am trying to put a simple Java time value into my SQL for Oracle but I get the below error when the code runs the query.</p>\n<blockquote>\n<p>Exception:java.sql.SQLSyntaxErrorException: ORA-00920: invalid\nrelational operator</p>\n</blockquote>\n<pre><code>Long theTime = new java.util.Date().getTime();\nStringBuffer sql = new StringBuffer(&quot;SELECT...&quot;);\n...\nsql.append(&quot; WHERE from_date &lt;= &quot;+new java.sql.Timestamp(theTime));\n\nStatement stmt = conn.createStatement();\nResultSet rs = stmt.executeQuery(sql.toString());\n</code></pre>\n<p>How can I resolve this exception?</p>\n<p><strong>Additional information</strong>\nI should add that for reasons unknown, when using this against Oracle 19c (does't happen on 12c) we are having an issue with PreparedStatement.</p>\n<p>This line 'hangs' for 3 hours, before running and returning results, hence why I'm suing the example above.</p>\n<pre><code>StringBuffer sql = new StringBuffer(&quot;SELECT...&quot;);\n...\nsql.append(&quot; WHERE from_date &lt;= ?&quot;);\nPreparedStatement ps = conn.getConnection().prepareStatement(sql.toString()); // Hangs here for 3 hours!\n</code></pre>\n<p>Thanks in advance</p>\n<p>K.</p>\n"},{"tags":["java","spring","api","serialization","serializable"],"comments":[{"owner":{"account_id":5168089,"reputation":26671,"user_id":4137489,"accept_rate":100,"display_name":"marstran"},"score":1,"creation_date":1649675802,"post_id":71826801,"comment_id":126928324,"body_markdown":"This depends on which library you are using to do serialization. If you&#39;re just serializing to JSON using Jackson, Gson or something similar, you don&#39;t need to add that interface.","body":"This depends on which library you are using to do serialization. If you&#39;re just serializing to JSON using Jackson, Gson or something similar, you don&#39;t need to add that interface."},{"owner":{"account_id":23500273,"reputation":123,"user_id":17550246,"display_name":"Abdu Muhammadal"},"score":0,"creation_date":1649676259,"post_id":71826801,"comment_id":126928465,"body_markdown":"Yeah, I just serialize to JSON using Jackson. If I remove the interface, everything works well. This means I don&#39;t need it?","body":"Yeah, I just serialize to JSON using Jackson. If I remove the interface, everything works well. This means I don&#39;t need it?"},{"owner":{"account_id":5168089,"reputation":26671,"user_id":4137489,"accept_rate":100,"display_name":"marstran"},"score":1,"creation_date":1649676490,"post_id":71826801,"comment_id":126928528,"body_markdown":"Yes, it is unrelated to Jackson.","body":"Yes, it is unrelated to Jackson."}],"answers":[{"tags":[],"owner":{"display_name":"user18770531"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1649676577,"creation_date":1649676577,"answer_id":71827021,"question_id":71826801,"body_markdown":"You don&#39;t need to implement Serializable and Deserializable for your DTO because it is already handled by Spring Boot Jackson Package.","title":"Should I use Serializable for my DTO and why should I use?","body":"<p>You don't need to implement Serializable and Deserializable for your DTO because it is already handled by Spring Boot Jackson Package.</p>\n"}],"owner":{"account_id":23500273,"reputation":123,"user_id":17550246,"display_name":"Abdu Muhammadal"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3303,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":71827021,"answer_count":1,"score":2,"last_activity_date":1649677188,"creation_date":1649675530,"question_id":71826801,"body_markdown":"As far as I know, Serializable should be used when deserialization is needed e.g. using dto as return object in APIs. But should I use Serializable for the whole DTO objects or just for the general one?\r\n\r\n    @Data\r\n    @AllArgsConstructor\r\n    public class GaDTO implements Serializable {\r\n    \r\n        private static final long serialVersionUID = -xxxx;\r\n    \r\n        private String id;\r\n        private GaStatus gaStatus;\r\n        private PlaTurn plaTurn;\r\n        private PlaDTO pla1;\r\n        private PlaDTO pla2;\r\n    \r\n    }\r\n\r\nThis DTO is the return type of `ResponseEntity` but there are other DTOs that this GaDTO uses.\r\n\r\n    @Data\r\n    @Builder\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    public class PlaDTO implements Serializable {\r\n    \r\n        private static final long serialVersionUID = -yyyyyy;\r\n    \r\n        private List&lt;PiDTO&gt; pis;\r\n    \r\n        private PiDTO mainPi;\r\n    \r\n    }\r\n\r\n    @Data\r\n    @Builder\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    public class PiDTO implements Serializable {\r\n    \r\n        private static final long serialVersionUID = -zzzzzz;\r\n    \r\n        private Integer stos;\r\n    \r\n    }\r\n\r\nShould I only use Serializable for GaDTO or do other DTOs need it too?\r\nAnd why should I use it?","title":"Should I use Serializable for my DTO and why should I use?","body":"<p>As far as I know, Serializable should be used when deserialization is needed e.g. using dto as return object in APIs. But should I use Serializable for the whole DTO objects or just for the general one?</p>\n<pre><code>@Data\n@AllArgsConstructor\npublic class GaDTO implements Serializable {\n\n    private static final long serialVersionUID = -xxxx;\n\n    private String id;\n    private GaStatus gaStatus;\n    private PlaTurn plaTurn;\n    private PlaDTO pla1;\n    private PlaDTO pla2;\n\n}\n</code></pre>\n<p>This DTO is the return type of <code>ResponseEntity</code> but there are other DTOs that this GaDTO uses.</p>\n<pre><code>@Data\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\npublic class PlaDTO implements Serializable {\n\n    private static final long serialVersionUID = -yyyyyy;\n\n    private List&lt;PiDTO&gt; pis;\n\n    private PiDTO mainPi;\n\n}\n\n@Data\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\npublic class PiDTO implements Serializable {\n\n    private static final long serialVersionUID = -zzzzzz;\n\n    private Integer stos;\n\n}\n</code></pre>\n<p>Should I only use Serializable for GaDTO or do other DTOs need it too?\nAnd why should I use it?</p>\n"},{"tags":["java","spring","testing","integration-testing","spring-boot-test"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1649676118,"post_id":71826796,"comment_id":126928424,"body_markdown":"By not doing it like this... The application context is started before the test class infra is being called. So `@BeforeAll` is called after the context started. If you need the `init` called before that annotate it with `@PostConstruct` so that it is part of the bean lifecycle.","body":"By not doing it like this... The application context is started before the test class infra is being called. So <code>@BeforeAll</code> is called after the context started. If you need the <code>init</code> called before that annotate it with <code>@PostConstruct</code> so that it is part of the bean lifecycle."},{"owner":{"account_id":442668,"reputation":1431,"user_id":833399,"accept_rate":75,"display_name":"Knight Industries"},"score":0,"creation_date":1649676992,"post_id":71826796,"comment_id":126928692,"body_markdown":"Thanks a lot, this would be the accepted answer. Why don&#39;t you write it as such?","body":"Thanks a lot, this would be the accepted answer. Why don&#39;t you write it as such?"}],"answers":[{"tags":[],"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1649677108,"creation_date":1649677108,"answer_id":71827162,"question_id":71826796,"body_markdown":"That is not how it works. How would the test be able to call a method on an `@Autowired` instance without the application context being started? That simply is not how it works, hence the result you see. \r\n\r\nHowever as you just want to call an method after the object has been constructed mark the method with `@PostConstruct`. With this the `init` method will be called as soon as the `MockServer` instance has been created and got everything injected. ","title":"Initialize Spring Boot test beans before tested Application","body":"<p>That is not how it works. How would the test be able to call a method on an <code>@Autowired</code> instance without the application context being started? That simply is not how it works, hence the result you see.</p>\n<p>However as you just want to call an method after the object has been constructed mark the method with <code>@PostConstruct</code>. With this the <code>init</code> method will be called as soon as the <code>MockServer</code> instance has been created and got everything injected.</p>\n"}],"owner":{"account_id":442668,"reputation":1431,"user_id":833399,"accept_rate":75,"display_name":"Knight Industries"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5303,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":71827162,"answer_count":1,"score":2,"last_activity_date":1649677108,"creation_date":1649675494,"question_id":71826796,"body_markdown":"Given a Spring Boot application that does something on start that needs a mock server:\r\n\r\n```java\r\n@SpringBootApplication\r\npublic class Application implements ApplicationListener&lt;ApplicationReadyEvent&gt; {\r\n\r\n  @Override\r\n  public void onApplicationEvent(ApplicationReadyEvent event) {\r\n    System.err.println(&quot;should be 2nd: application init (needs the mock server)&quot;);\r\n  }\r\n\r\n  public boolean doSomething() {\r\n    System.err.println(&quot;should be 3rd: test execution&quot;);\r\n    return true;\r\n  }\r\n}\r\n```\r\n\r\nTherefore, the mock server should be initialized beforehand:\r\n\r\n```java\r\n@SpringBootTest\r\n@TestInstance(Lifecycle.PER_CLASS)\r\nclass ApplicationITest {\r\n\r\n  @Autowired\r\n  MockServer mockServer;\r\n\r\n  @Autowired\r\n  Application underTest;\r\n\r\n  @BeforeAll\r\n  void setUpInfrastructure() {\r\n    mockServer.init();\r\n  }\r\n\r\n  @Test\r\n  void doSomething() {\r\n    assertTrue(underTest.doSomething());\r\n  }\r\n}\r\n\r\n@Component\r\nclass MockServer {\r\n  void init() {\r\n    System.err.println(&quot;should be 1st: mock server init&quot;);\r\n  }\r\n}\r\n```\r\n\r\nBut the application seems to be initialized always first:\r\n\r\n```plaintext\r\nshould be 2nd: application init (needs the mock server)\r\nshould be 1st: mock server init\r\nshould be 3rd: test execution\r\n```\r\n\r\nHow can I get those to be executed in the intended order?\r\n\r\nI tried using `Order(Ordered.HIGHEST_PRECEDENCE)` and `@AutoConfigureBefore` with no success.","title":"Initialize Spring Boot test beans before tested Application","body":"<p>Given a Spring Boot application that does something on start that needs a mock server:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\npublic class Application implements ApplicationListener&lt;ApplicationReadyEvent&gt; {\n\n  @Override\n  public void onApplicationEvent(ApplicationReadyEvent event) {\n    System.err.println(&quot;should be 2nd: application init (needs the mock server)&quot;);\n  }\n\n  public boolean doSomething() {\n    System.err.println(&quot;should be 3rd: test execution&quot;);\n    return true;\n  }\n}\n</code></pre>\n<p>Therefore, the mock server should be initialized beforehand:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest\n@TestInstance(Lifecycle.PER_CLASS)\nclass ApplicationITest {\n\n  @Autowired\n  MockServer mockServer;\n\n  @Autowired\n  Application underTest;\n\n  @BeforeAll\n  void setUpInfrastructure() {\n    mockServer.init();\n  }\n\n  @Test\n  void doSomething() {\n    assertTrue(underTest.doSomething());\n  }\n}\n\n@Component\nclass MockServer {\n  void init() {\n    System.err.println(&quot;should be 1st: mock server init&quot;);\n  }\n}\n</code></pre>\n<p>But the application seems to be initialized always first:</p>\n<pre><code>should be 2nd: application init (needs the mock server)\nshould be 1st: mock server init\nshould be 3rd: test execution\n</code></pre>\n<p>How can I get those to be executed in the intended order?</p>\n<p>I tried using <code>Order(Ordered.HIGHEST_PRECEDENCE)</code> and <code>@AutoConfigureBefore</code> with no success.</p>\n"},{"tags":["java","constraints","optaplanner"],"answers":[{"tags":[],"owner":{"account_id":14879486,"reputation":964,"user_id":10744614,"display_name":"Radovan Synek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649675486,"creation_date":1649675486,"answer_id":71826795,"question_id":71825707,"body_markdown":"Have you considered using a different type, e.g. `long`, to represent values you need to `sum()` in your constraint?\r\n\r\nUsing [floating-point numbers in the score calculation is generally not recommended][1] as it may lead to score corruption.\r\n\r\n\r\n  [1]: https://www.optaplanner.org/docs/optaplanner/latest/score-calculation/score-calculation.html#avoidFloatingPointNumbersInScoreCalculation","title":"Custom &quot;sumDouble()&quot; function in OptaPlanner for constraints","body":"<p>Have you considered using a different type, e.g. <code>long</code>, to represent values you need to <code>sum()</code> in your constraint?</p>\n<p>Using <a href=\"https://www.optaplanner.org/docs/optaplanner/latest/score-calculation/score-calculation.html#avoidFloatingPointNumbersInScoreCalculation\" rel=\"nofollow noreferrer\">floating-point numbers in the score calculation is generally not recommended</a> as it may lead to score corruption.</p>\n"},{"tags":[],"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225;≈° Petrovick&#253;"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649676967,"creation_date":1649676505,"answer_id":71827005,"question_id":71825707,"body_markdown":"First of all, Radovan is completely correct in his answer. In fact, the potential score corruptions are the reason why `sumDouble()` is not provided. Instead, we provide `sumBigDecimal()`, which doesn&#39;t suffer from the same issue. However, it will suffer in terms of performance. The preferred solution is to use either `sum()` or `sumLong()`, using fixed-point arithmetic if necessary. \r\n\r\nThat said, implementing `sumDouble()` is relatively simple, and you do not need composition to achieve that:\r\n\r\n    public static &lt;A&gt; UniConstraintCollector&lt;A, ?, Double&gt; sum(ToDoubleFunction&lt;? super A&gt; groupValueMapping) {\r\n        return new DefaultUniConstraintCollector&lt;&gt;(\r\n            () -&gt; new double[1],\r\n            (resultContainer, a) -&gt; {\r\n                int value = groupValueMapping.applyAsDouble(a);\r\n                resultContainer[0] += value;\r\n                return () -&gt; resultContainer[0] -= value;\r\n            },\r\n            resultContainer -&gt; resultContainer[0]);\r\n    }\r\n\r\nNow, `DefaultUniConstraintCollector` is not a public type. But you can use an anonymous class instead:\r\n\r\n    public static &lt;A&gt; UniConstraintCollector&lt;A, ?, Integer&gt; sum(ToDoubleFunction&lt;? super A&gt; groupValueMapping) {\r\n        return new UniConstraintCollector&lt;A, double[], Double&gt;() {\r\n            @Override\r\n            public Supplier&lt;double[]&gt; supplier() {\r\n                return () -&gt; new double[1];\r\n            }\r\n\r\n            @Override\r\n            public BiFunction&lt;double[], A, Runnable&gt; accumulator() {\r\n                return (resultContainer, a) -&gt; {\r\n                    double value = groupValueMapping.applyAsDouble(a);\r\n                    resultContainer[0] += value;\r\n                    return () -&gt; resultContainer[0] -= value;\r\n                };\r\n            }\r\n            \r\n            @Override\r\n            public Function&lt;double[], Double&gt; finisher() {\r\n                return resultContainer -&gt; resultContainer[0];\r\n            }\r\n        }\r\n    }\r\n\r\nUse this at your own risk, and make sure you [check for score corruptions][1], preferrably in a very long solver run.\r\n\r\n\r\n  [1]: https://www.optaplanner.org/docs/optaplanner/latest/planner-configuration/planner-configuration.html#environmentMode","title":"Custom &quot;sumDouble()&quot; function in OptaPlanner for constraints","body":"<p>First of all, Radovan is completely correct in his answer. In fact, the potential score corruptions are the reason why <code>sumDouble()</code> is not provided. Instead, we provide <code>sumBigDecimal()</code>, which doesn't suffer from the same issue. However, it will suffer in terms of performance. The preferred solution is to use either <code>sum()</code> or <code>sumLong()</code>, using fixed-point arithmetic if necessary.</p>\n<p>That said, implementing <code>sumDouble()</code> is relatively simple, and you do not need composition to achieve that:</p>\n<pre><code>public static &lt;A&gt; UniConstraintCollector&lt;A, ?, Double&gt; sum(ToDoubleFunction&lt;? super A&gt; groupValueMapping) {\n    return new DefaultUniConstraintCollector&lt;&gt;(\n        () -&gt; new double[1],\n        (resultContainer, a) -&gt; {\n            int value = groupValueMapping.applyAsDouble(a);\n            resultContainer[0] += value;\n            return () -&gt; resultContainer[0] -= value;\n        },\n        resultContainer -&gt; resultContainer[0]);\n}\n</code></pre>\n<p>Now, <code>DefaultUniConstraintCollector</code> is not a public type. But you can use an anonymous class instead:</p>\n<pre><code>public static &lt;A&gt; UniConstraintCollector&lt;A, ?, Integer&gt; sum(ToDoubleFunction&lt;? super A&gt; groupValueMapping) {\n    return new UniConstraintCollector&lt;A, double[], Double&gt;() {\n        @Override\n        public Supplier&lt;double[]&gt; supplier() {\n            return () -&gt; new double[1];\n        }\n\n        @Override\n        public BiFunction&lt;double[], A, Runnable&gt; accumulator() {\n            return (resultContainer, a) -&gt; {\n                double value = groupValueMapping.applyAsDouble(a);\n                resultContainer[0] += value;\n                return () -&gt; resultContainer[0] -= value;\n            };\n        }\n        \n        @Override\n        public Function&lt;double[], Double&gt; finisher() {\n            return resultContainer -&gt; resultContainer[0];\n        }\n    }\n}\n</code></pre>\n<p>Use this at your own risk, and make sure you <a href=\"https://www.optaplanner.org/docs/optaplanner/latest/planner-configuration/planner-configuration.html#environmentMode\" rel=\"nofollow noreferrer\">check for score corruptions</a>, preferrably in a very long solver run.</p>\n"}],"owner":{"account_id":24899181,"reputation":3,"user_id":18770061,"display_name":"MAK"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":197,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71827005,"answer_count":2,"score":0,"last_activity_date":1649676967,"creation_date":1649670207,"question_id":71825707,"body_markdown":"I need a sum functionality that sums up double values for my ConstraintProviding functionality. Currently OptaPlanner offers sum() and sumBigDecimal() functionality, where the first is only summing integer values and the second BigDecimal values. So therefore I started with the compose approach as described in the manual chapter 6.4.5.3. for implementing my own functionality (didn&#39;t want to override the original one). \r\n\r\nDeriving from there and taking the implementation of the sum functionality from the ConstraintCollector.java class of the OptaPlanner source code itself, I ended up with the following code:\r\n\r\n```\r\n    public static &lt;A&gt; UniConstraintCollector&lt;A, ?, Double&gt; sumDouble(ToDoubleFunction&lt;A&gt; groupValueMapping) {\r\n            return compose((resultContainer, a) -&gt; {\r\n                        double value = groupValueMapping.applyAsDouble(a);\r\n                        resultContainer[0] += value;\r\n                        return () -&gt; resultContainer[0] -= value;\r\n                    },\r\n                    resultContainer -&gt; resultContainer[0]);\r\n        }\r\n```\r\n\r\nwithin my &quot;OwnConstraintProvider&quot; class. But this doesn&#39;t work out. The error is:\r\n```\r\n    java: method compose in interface java.lang.module.ModuleFinder cannot be applied to given types;\r\n  required: java.lang.module.ModuleFinder[]\r\n  found: (resultCon[...]ue; },(resultCon[...]er[0]\r\n  reason: varargs mismatch; java.lang.module.ModuleFinder is not a functional interface\r\n      multiple non-overriding abstract methods found in interface java.lang.module.ModuleFinder\r\n```\r\n\r\nI am aware that there must be a clearer relationship and calculation approach between the input A and the result.\r\n\r\nFrankly speaking I have only recently starting Java programming seriously. So I can&#39;t sort out where I am mistaken in that case. In the manual of the current version used (8.19.0) there is &quot;a generic sum() variant for summing up custom types&quot; mentioned in chapter 6.4.5.1.3. but I have no glue about the details on that.\r\n\r\nCan anybody give me a hint on this please.\r\n\r\nThanks in advance!","title":"Custom &quot;sumDouble()&quot; function in OptaPlanner for constraints","body":"<p>I need a sum functionality that sums up double values for my ConstraintProviding functionality. Currently OptaPlanner offers sum() and sumBigDecimal() functionality, where the first is only summing integer values and the second BigDecimal values. So therefore I started with the compose approach as described in the manual chapter 6.4.5.3. for implementing my own functionality (didn't want to override the original one).</p>\n<p>Deriving from there and taking the implementation of the sum functionality from the ConstraintCollector.java class of the OptaPlanner source code itself, I ended up with the following code:</p>\n<pre><code>    public static &lt;A&gt; UniConstraintCollector&lt;A, ?, Double&gt; sumDouble(ToDoubleFunction&lt;A&gt; groupValueMapping) {\n            return compose((resultContainer, a) -&gt; {\n                        double value = groupValueMapping.applyAsDouble(a);\n                        resultContainer[0] += value;\n                        return () -&gt; resultContainer[0] -= value;\n                    },\n                    resultContainer -&gt; resultContainer[0]);\n        }\n</code></pre>\n<p>within my &quot;OwnConstraintProvider&quot; class. But this doesn't work out. The error is:</p>\n<pre><code>    java: method compose in interface java.lang.module.ModuleFinder cannot be applied to given types;\n  required: java.lang.module.ModuleFinder[]\n  found: (resultCon[...]ue; },(resultCon[...]er[0]\n  reason: varargs mismatch; java.lang.module.ModuleFinder is not a functional interface\n      multiple non-overriding abstract methods found in interface java.lang.module.ModuleFinder\n</code></pre>\n<p>I am aware that there must be a clearer relationship and calculation approach between the input A and the result.</p>\n<p>Frankly speaking I have only recently starting Java programming seriously. So I can't sort out where I am mistaken in that case. In the manual of the current version used (8.19.0) there is &quot;a generic sum() variant for summing up custom types&quot; mentioned in chapter 6.4.5.1.3. but I have no glue about the details on that.</p>\n<p>Can anybody give me a hint on this please.</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","netbeans","javaoptions"],"comments":[{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1621599367,"post_id":67635696,"comment_id":119550990,"body_markdown":"Possible duplicate of: [Picked up _JAVA_OPTIONS: -Xmx512M](https://stackoverflow.com/questions/44648599/picked-up-java-options-xmx512m). In other words, check your Linux/Windows environment variables, as mentioned in the link.","body":"Possible duplicate of: <a href=\"https://stackoverflow.com/questions/44648599/picked-up-java-options-xmx512m\">Picked up _JAVA_OPTIONS: -Xmx512M</a>. In other words, check your Linux/Windows environment variables, as mentioned in the link."},{"owner":{"account_id":21396156,"reputation":81,"user_id":15759183,"display_name":"Viraj Madhushan"},"score":0,"creation_date":1622108632,"post_id":67635696,"comment_id":119697809,"body_markdown":"Thank you sir, for letting me know. I figured out that problem occurred because of user and system variables of _JAVA_OPTIONS. It resolved after I deleted that variables.","body":"Thank you sir, for letting me know. I figured out that problem occurred because of user and system variables of _JAVA_OPTIONS. It resolved after I deleted that variables."}],"answers":[{"tags":[],"owner":{"account_id":24881495,"reputation":1,"user_id":18754634,"display_name":"Jovan Ki≈°"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649676567,"creation_date":1649676567,"answer_id":71827019,"question_id":67635696,"body_markdown":"I have had problem (Linux OS) with\r\n\r\n&gt; Picked up _JAVA_OPTIONS: -Dawt.useSystemAAFontSettings=on -Dswing.aatext=true\r\n\r\nand it was solved with terminal command \r\n&gt; unset _JAVA_OPTIONS ","title":"Picked up _JAVA_OPTIONS: -Djava.net.preferIPv4Stack=true in NetBeans","body":"<p>I have had problem (Linux OS) with</p>\n<blockquote>\n<p>Picked up _JAVA_OPTIONS: -Dawt.useSystemAAFontSettings=on -Dswing.aatext=true</p>\n</blockquote>\n<p>and it was solved with terminal command</p>\n<blockquote>\n<p>unset _JAVA_OPTIONS</p>\n</blockquote>\n"}],"owner":{"account_id":21396156,"reputation":81,"user_id":15759183,"display_name":"Viraj Madhushan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":793,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649676567,"creation_date":1621595416,"question_id":67635696,"body_markdown":"Why always show,\r\n\r\n&gt; **Picked up _JAVA_OPTIONS: -Djava.net.preferIPv4Stack=true**\r\n\r\nRed colored line when I run every code in NetBeans.\r\nHow can I fix this issue?","title":"Picked up _JAVA_OPTIONS: -Djava.net.preferIPv4Stack=true in NetBeans","body":"<p>Why always show,</p>\n<blockquote>\n<p><strong>Picked up _JAVA_OPTIONS: -Djava.net.preferIPv4Stack=true</strong></p>\n</blockquote>\n<p>Red colored line when I run every code in NetBeans.\nHow can I fix this issue?</p>\n"},{"tags":["java","spring","spring-boot","maven","github"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1649661689,"post_id":71823908,"comment_id":126923252,"body_markdown":"Remove the `maven-deploy-plugin` configuration.. The application properties will be packaged into the resulting jar while using spring-boot-maven-plugin...","body":"Remove the <code>maven-deploy-plugin</code> configuration.. The application properties will be packaged into the resulting jar while using spring-boot-maven-plugin..."},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1649671970,"post_id":71823908,"comment_id":126926995,"body_markdown":"files are included automatically when in the proper location. property files should be in `src/main/resources` not sure where you are putting them.","body":"files are included automatically when in the proper location. property files should be in <code>src&#47;main&#47;resources</code> not sure where you are putting them."},{"owner":{"account_id":15190407,"reputation":13087,"user_id":10961238,"display_name":"Romil Patel"},"score":0,"creation_date":1649672728,"post_id":71823908,"comment_id":126927288,"body_markdown":"Hello @khmarbaise, If I remove `maven-deploy-plugin` and deploy and use it as a dependency and do return the same null value when I read the value from the application properties file of project A. If I add `spring-boot-maven-plugin` I am not able to resolve classes of Project A in other projects as discussed here (https://stackoverflow.com/q/71749753/10961238). Can you please suggest on it?","body":"Hello @khmarbaise, If I remove <code>maven-deploy-plugin</code> and deploy and use it as a dependency and do return the same null value when I read the value from the application properties file of project A. If I add <code>spring-boot-maven-plugin</code> I am not able to resolve classes of Project A in other projects as discussed here (<a href=\"https://stackoverflow.com/q/71749753/10961238\">stackoverflow.com/q/71749753/10961238</a>). Can you please suggest on it?"},{"owner":{"account_id":15190407,"reputation":13087,"user_id":10961238,"display_name":"Romil Patel"},"score":0,"creation_date":1649672914,"post_id":71823908,"comment_id":126927365,"body_markdown":"Hello @M.Deinum. Yes I am placing the application properties file in `src/main/resources` in Project A and if I execute a test of Project A I am correctly getting the value but when I deploy the artifact of project A and use it as a dependency in project B I do get `null` value in the method which is written in project A which do read the value from the application properties file. Can you please guide on it?","body":"Hello @M.Deinum. Yes I am placing the application properties file in <code>src&#47;main&#47;resources</code> in Project A and if I execute a test of Project A I am correctly getting the value but when I deploy the artifact of project A and use it as a dependency in project B I do get <code>null</code> value in the method which is written in project A which do read the value from the application properties file. Can you please guide on it?"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1649675570,"post_id":71823908,"comment_id":126928239,"body_markdown":"Only 1 `application.properties` will be read. So if project B has an `application.properties` as well only that will be read.","body":"Only 1 <code>application.properties</code> will be read. So if project B has an <code>application.properties</code> as well only that will be read."},{"owner":{"account_id":7788702,"reputation":836,"user_id":5892518,"display_name":"Harsh"},"score":0,"creation_date":1649675631,"post_id":71823908,"comment_id":126928258,"body_markdown":"Should not ideally happen , but check if this helps , Try to deploy the project with full resources and dependencies like the answer in following article https://stackoverflow.com/questions/574594/how-can-i-create-an-executable-jar-with-dependencies-using-maven","body":"Should not ideally happen , but check if this helps , Try to deploy the project with full resources and dependencies like the answer in following article <a href=\"https://stackoverflow.com/questions/574594/how-can-i-create-an-executable-jar-with-dependencies-using-maven\" title=\"how can i create an executable jar with dependencies using maven\">stackoverflow.com/questions/574594/&hellip;</a>"},{"owner":{"account_id":15190407,"reputation":13087,"user_id":10961238,"display_name":"Romil Patel"},"score":0,"creation_date":1649676472,"post_id":71823908,"comment_id":126928522,"body_markdown":"@M.Deinum. Yes, project B do have its `application.properties` file. Is there any chance to load both `application.properties` file from project A and B? Can we use rename application.properties file and use spring profiles?","body":"@M.Deinum. Yes, project B do have its <code>application.properties</code> file. Is there any chance to load both <code>application.properties</code> file from project A and B? Can we use rename application.properties file and use spring profiles?"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1649676807,"post_id":71823908,"comment_id":126928620,"body_markdown":"That would be abusing profiles to achieve something. If you want to provide defaults why not hardcode them into your configuration instead of the step of putting them in a properties file. You can still override them from Project B if needed.","body":"That would be abusing profiles to achieve something. If you want to provide defaults why not hardcode them into your configuration instead of the step of putting them in a properties file. You can still override them from Project B if needed."}],"owner":{"account_id":15190407,"reputation":13087,"user_id":10961238,"display_name":"Romil Patel"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":938,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649676552,"creation_date":1649661050,"question_id":71823908,"body_markdown":"I have a spring boot project (Project A) created which do contains commonly used methods and I have hosted this project in GitHub deployed artifacts and used it as a dependency in other projects (Project B, C ..) to reuse those methods. I have one common method created in Project A which does read the value from the application properties file which works fine locally but when I deploy the artifacts to GitHub and use it as a dependency it is not able to read the value from an application properties file and read as null. Maybe I am not including the properties files while deploying artifacts for Project A correctly. \r\n\r\n\r\npom.xml (Project A)\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.6.6&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.abc&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;api-authenticator&lt;/artifactId&gt;\r\n    \t&lt;version&gt;1.0.2&lt;/version&gt;\r\n    \t&lt;name&gt;API Authenticator&lt;/name&gt;\r\n    \t&lt;description&gt;Project to authenticate API usage&lt;/description&gt;\r\n    \r\n    \t&lt;distributionManagement&gt;\r\n    \t\t&lt;repository&gt;\r\n    \t\t\t&lt;id&gt;internal.repo&lt;/id&gt;\r\n    \t\t\t&lt;name&gt;Staging Repository&lt;/name&gt;\r\n    \t\t\t&lt;url&gt;file://${project.build.directory}/${version}&lt;/url&gt;\r\n    \t\t&lt;/repository&gt;\r\n    \t&lt;/distributionManagement&gt;\r\n    \r\n    \t&lt;properties&gt;\r\n    \t\t&lt;github.global.server&gt;github&lt;/github.global.server&gt;\r\n    \t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n    \t\t&lt;java-jwt.version&gt;3.16.0&lt;/java-jwt.version&gt;\r\n    \t\t&lt;jwks-rsa.version&gt;0.18.0&lt;/jwks-rsa.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.auth0&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;java-jwt&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${java-jwt.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.auth0&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jwks-rsa&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${jwks-rsa.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;resources&gt;\r\n    \t\t\t&lt;resource&gt;\r\n    \t\t\t\t&lt;directory&gt;resources&lt;/directory&gt;\r\n    \t\t\t\t&lt;targetPath&gt;src/main/resources&lt;/targetPath&gt;\r\n    \t\t\t\t&lt;includes&gt;\r\n    \t\t\t\t\t&lt;include&gt;**/**&lt;/include&gt;\r\n    \t\t\t\t&lt;/includes&gt;\r\n    \t\t\t&lt;/resource&gt;\r\n    \t\t&lt;/resources&gt;\r\n    \t\t&lt;pluginManagement&gt;\r\n    \t\t\t&lt;plugins&gt;\r\n    \t\t\t\t&lt;plugin&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t\t&lt;source&gt;11&lt;/source&gt;\r\n    \t\t\t\t\t\t&lt;target&gt;11&lt;/target&gt;\r\n    \t\t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;/plugins&gt;\r\n    \t\t&lt;/pluginManagement&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;com.github.github&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;site-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;0.12&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;message&gt;Maven artifacts for ${project.version}&lt;/message&gt;\r\n    \t\t\t\t\t&lt;noJekyll&gt;true&lt;/noJekyll&gt;\r\n    \t\t\t\t\t&lt;outputDirectory&gt;${project.build.directory}&lt;/outputDirectory&gt;\r\n    \t\t\t\t\t&lt;branch&gt;refs/heads/${version}&lt;/branch&gt;\r\n    \t\t\t\t\t&lt;includes&gt;\r\n    \t\t\t\t\t\t&lt;include&gt;**/*&lt;/include&gt;\r\n    \t\t\t\t\t&lt;/includes&gt;\r\n    \t\t\t\t\t&lt;merge&gt;true&lt;/merge&gt;\r\n    \t\t\t\t\t&lt;repositoryName&gt;api-authenticator&lt;/repositoryName&gt;\r\n    \t\t\t\t\t&lt;repositoryOwner&gt;me&lt;/repositoryOwner&gt;\r\n    \t\t\t\t\t&lt;server&gt;github&lt;/server&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t\t&lt;executions&gt;\r\n    \t\t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t\t&lt;goals&gt;\r\n    \t\t\t\t\t\t\t&lt;goal&gt;site&lt;/goal&gt;\r\n    \t\t\t\t\t\t&lt;/goals&gt;\r\n    \t\t\t\t\t\t&lt;phase&gt;deploy&lt;/phase&gt;\r\n    \t\t\t\t\t&lt;/execution&gt;\r\n    \t\t\t\t&lt;/executions&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;2.8.2&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;files&gt;\r\n    \t\t\t\t\t\t&lt;file&gt;\r\n    \t\t\t\t\t\t\t${project.basedir}/src/main/resources/application.properties\r\n    \t\t\t\t\t\t&lt;/file&gt;\r\n    \t\t\t\t\t&lt;/files&gt;\r\n    \t\t\t\t\t&lt;altDeploymentRepository&gt;\r\n    \t\t\t\t\t\tinternal.repo::default::file://${project.build.directory}/${version}\r\n    \t\t\t\t\t&lt;/altDeploymentRepository&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n   ","title":"Include application properties files in maven artifacts","body":"<p>I have a spring boot project (Project A) created which do contains commonly used methods and I have hosted this project in GitHub deployed artifacts and used it as a dependency in other projects (Project B, C ..) to reuse those methods. I have one common method created in Project A which does read the value from the application properties file which works fine locally but when I deploy the artifacts to GitHub and use it as a dependency it is not able to read the value from an application properties file and read as null. Maybe I am not including the properties files while deploying artifacts for Project A correctly.</p>\n<p>pom.xml (Project A)</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.6.6&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.abc&lt;/groupId&gt;\n    &lt;artifactId&gt;api-authenticator&lt;/artifactId&gt;\n    &lt;version&gt;1.0.2&lt;/version&gt;\n    &lt;name&gt;API Authenticator&lt;/name&gt;\n    &lt;description&gt;Project to authenticate API usage&lt;/description&gt;\n\n    &lt;distributionManagement&gt;\n        &lt;repository&gt;\n            &lt;id&gt;internal.repo&lt;/id&gt;\n            &lt;name&gt;Staging Repository&lt;/name&gt;\n            &lt;url&gt;file://${project.build.directory}/${version}&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/distributionManagement&gt;\n\n    &lt;properties&gt;\n        &lt;github.global.server&gt;github&lt;/github.global.server&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n        &lt;java-jwt.version&gt;3.16.0&lt;/java-jwt.version&gt;\n        &lt;jwks-rsa.version&gt;0.18.0&lt;/jwks-rsa.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.auth0&lt;/groupId&gt;\n            &lt;artifactId&gt;java-jwt&lt;/artifactId&gt;\n            &lt;version&gt;${java-jwt.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.auth0&lt;/groupId&gt;\n            &lt;artifactId&gt;jwks-rsa&lt;/artifactId&gt;\n            &lt;version&gt;${jwks-rsa.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;resources&gt;\n            &lt;resource&gt;\n                &lt;directory&gt;resources&lt;/directory&gt;\n                &lt;targetPath&gt;src/main/resources&lt;/targetPath&gt;\n                &lt;includes&gt;\n                    &lt;include&gt;**/**&lt;/include&gt;\n                &lt;/includes&gt;\n            &lt;/resource&gt;\n        &lt;/resources&gt;\n        &lt;pluginManagement&gt;\n            &lt;plugins&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                    &lt;configuration&gt;\n                        &lt;source&gt;11&lt;/source&gt;\n                        &lt;target&gt;11&lt;/target&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n            &lt;/plugins&gt;\n        &lt;/pluginManagement&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;com.github.github&lt;/groupId&gt;\n                &lt;artifactId&gt;site-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.12&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;message&gt;Maven artifacts for ${project.version}&lt;/message&gt;\n                    &lt;noJekyll&gt;true&lt;/noJekyll&gt;\n                    &lt;outputDirectory&gt;${project.build.directory}&lt;/outputDirectory&gt;\n                    &lt;branch&gt;refs/heads/${version}&lt;/branch&gt;\n                    &lt;includes&gt;\n                        &lt;include&gt;**/*&lt;/include&gt;\n                    &lt;/includes&gt;\n                    &lt;merge&gt;true&lt;/merge&gt;\n                    &lt;repositoryName&gt;api-authenticator&lt;/repositoryName&gt;\n                    &lt;repositoryOwner&gt;me&lt;/repositoryOwner&gt;\n                    &lt;server&gt;github&lt;/server&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;site&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;phase&gt;deploy&lt;/phase&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.8.2&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;files&gt;\n                        &lt;file&gt;\n                            ${project.basedir}/src/main/resources/application.properties\n                        &lt;/file&gt;\n                    &lt;/files&gt;\n                    &lt;altDeploymentRepository&gt;\n                        internal.repo::default::file://${project.build.directory}/${version}\n                    &lt;/altDeploymentRepository&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","c++","swig","swig-template"],"comments":[{"owner":{"account_id":7100370,"reputation":597,"user_id":5432208,"accept_rate":62,"display_name":"Remixt"},"score":0,"creation_date":1649838987,"post_id":71826827,"comment_id":126974691,"body_markdown":"You need to state a question and format the code.","body":"You need to state a question and format the code."}],"answers":[{"tags":[],"owner":{"account_id":5129776,"reputation":2205,"user_id":4110406,"accept_rate":87,"display_name":"Ludwig Schulze"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649676388,"creation_date":1649676066,"answer_id":71826914,"question_id":71826827,"body_markdown":"Swig documentation (*) says:\r\n\r\n&gt; some language modules support a subset of the above and some support\r\n&gt; additional STL classes. Please look for the library files in the\r\n&gt; appropriate language library directory.\r\n\r\ntherefore it appears that std_complex.i is not implemented for Java as the target language. The reason may be that Java does not have a data type for complex numbers.\r\n\r\nIn order to interface existing C++ code that uses complex numbers to Java with swig, you would have to write your own type maps or write wrapper functions in C++ that accept and return separated real and imaginary parts.\r\n\r\n(*): https://swig.org/Doc4.0/SWIGDocumentation.html, search for complex.i","title":"SWIG: How to pass a vector of complex numbers from C++ to Java","body":"<p>Swig documentation (*) says:</p>\n<blockquote>\n<p>some language modules support a subset of the above and some support\nadditional STL classes. Please look for the library files in the\nappropriate language library directory.</p>\n</blockquote>\n<p>therefore it appears that std_complex.i is not implemented for Java as the target language. The reason may be that Java does not have a data type for complex numbers.</p>\n<p>In order to interface existing C++ code that uses complex numbers to Java with swig, you would have to write your own type maps or write wrapper functions in C++ that accept and return separated real and imaginary parts.</p>\n<p>(*): <a href=\"https://swig.org/Doc4.0/SWIGDocumentation.html\" rel=\"nofollow noreferrer\">https://swig.org/Doc4.0/SWIGDocumentation.html</a>, search for complex.i</p>\n"}],"owner":{"account_id":24898898,"reputation":21,"user_id":18769811,"display_name":"DevD1"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1649676388,"creation_date":1649675635,"question_id":71826827,"body_markdown":"%include &lt;std_complex.i&gt;\r\n\r\nmanager.i:21: Error: Unable to find &#39;std_complex.i&#39;","title":"SWIG: How to pass a vector of complex numbers from C++ to Java","body":"<p>%include &lt;std_complex.i&gt;</p>\n<p>manager.i:21: Error: Unable to find 'std_complex.i'</p>\n"},{"tags":["java","android","encryption","rsa"],"comments":[{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":2,"creation_date":1649678900,"post_id":71826971,"comment_id":126929431,"body_markdown":"This is what the Java [`KeyStore`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/security/KeyStore.html) class is for.","body":"This is what the Java <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/security/KeyStore.html\" rel=\"nofollow noreferrer\"><code>KeyStore</code></a> class is for."},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1649717673,"post_id":71826971,"comment_id":126942611,"body_markdown":"Generally you should avoid storing keys - especially private keys - as text. However, if you must, you can use .PEM format. Bouncy Castle has PEM parsers / writers.","body":"Generally you should avoid storing keys - especially private keys - as text. However, if you must, you can use .PEM format. Bouncy Castle has PEM parsers / writers."}],"owner":{"account_id":24819863,"reputation":1,"user_id":18700326,"display_name":"Unusualer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649676368,"creation_date":1649676368,"question_id":71826971,"body_markdown":"I&#39;m kinda new to thisand what I&#39;m trying to do is store those private and public keys so that they don&#39;t regenerate every time i open the app if that&#39;s how it&#39;s supposed to be. Thank you to anyone who knows how to help.\r\ni don&#39;t where to put FileOutputStream to store\r\nand Files.readAllBytes to read","title":"Java help needed storing the public and private keys in a local file (.txt)","body":"<p>I'm kinda new to thisand what I'm trying to do is store those private and public keys so that they don't regenerate every time i open the app if that's how it's supposed to be. Thank you to anyone who knows how to help.\ni don't where to put FileOutputStream to store\nand Files.readAllBytes to read</p>\n"},{"tags":["java","html","soap","illegal-characters"],"comments":[{"owner":{"account_id":12031516,"reputation":3365,"user_id":8801599,"display_name":"Rob Moll"},"score":0,"creation_date":1580997393,"post_id":60096433,"comment_id":106288171,"body_markdown":"Try escaping the colon with a preceding backslash. `headers.addHeader(&quot;Authorization\\: Basic &quot;, &quot;123456789123456789&quot;);`","body":"Try escaping the colon with a preceding backslash. <code>headers.addHeader(&quot;Authorization\\: Basic &quot;, &quot;123456789123456789&quot;);</code>"},{"owner":{"account_id":54959,"reputation":3943,"user_id":164497,"accept_rate":54,"display_name":"mouthpiec"},"score":0,"creation_date":1580997768,"post_id":60096433,"comment_id":106288420,"body_markdown":"thanks @RobMoll ... tried it but it does not compile &quot;smsWebService.java:74: illegal escape character&quot;\nsmsWebService.java:74: illegal escape character\n        headers.addHeader(&quot;Authorization\\: Basic&quot;, &quot;123456789123456789&quot;);","body":"thanks @RobMoll ... tried it but it does not compile &quot;smsWebService.java:74: illegal escape character&quot; smsWebService.java:74: illegal escape character         headers.addHeader(&quot;Authorization\\: Basic&quot;, &quot;123456789123456789&quot;);"},{"owner":{"account_id":12031516,"reputation":3365,"user_id":8801599,"display_name":"Rob Moll"},"score":0,"creation_date":1580998135,"post_id":60096433,"comment_id":106288656,"body_markdown":"How about unicode? Try `\\u003A` in place of the colon.","body":"How about unicode? Try <code>\\u003A</code> in place of the colon."},{"owner":{"account_id":54959,"reputation":3943,"user_id":164497,"accept_rate":54,"display_name":"mouthpiec"},"score":0,"creation_date":1580998787,"post_id":60096433,"comment_id":106289071,"body_markdown":"@RobMoll ... tried it ... compile ok, but same error:\nCaused by: java.lang.IllegalArgumentException: Illegal character(s) in message header field: Authorization: Basic","body":"@RobMoll ... tried it ... compile ok, but same error: Caused by: java.lang.IllegalArgumentException: Illegal character(s) in message header field: Authorization: Basic"},{"owner":{"account_id":12031516,"reputation":3365,"user_id":8801599,"display_name":"Rob Moll"},"score":0,"creation_date":1580998977,"post_id":60096433,"comment_id":106289196,"body_markdown":"Okay. My last attempt: Remove the blank space at the end of the string after &quot;Basic&quot;: `headers.addHeader(&quot;Authorization: Basic&quot;, &quot;123456789123456789&quot;);`","body":"Okay. My last attempt: Remove the blank space at the end of the string after &quot;Basic&quot;: <code>headers.addHeader(&quot;Authorization: Basic&quot;, &quot;123456789123456789&quot;);</code>"},{"owner":{"account_id":54959,"reputation":3943,"user_id":164497,"accept_rate":54,"display_name":"mouthpiec"},"score":0,"creation_date":1580999145,"post_id":60096433,"comment_id":106289301,"body_markdown":"tried it ... same result :(\nThe same class file in another server is working fine if this gives an indication about the solution","body":"tried it ... same result :( The same class file in another server is working fine if this gives an indication about the solution"},{"owner":{"account_id":12031516,"reputation":3365,"user_id":8801599,"display_name":"Rob Moll"},"score":0,"creation_date":1580999287,"post_id":60096433,"comment_id":106289413,"body_markdown":"I just edited my previous comment. I took out the escape character from in front of the colon. Please try removing the blank space and removing the escape character. Sorry.","body":"I just edited my previous comment. I took out the escape character from in front of the colon. Please try removing the blank space and removing the escape character. Sorry."},{"owner":{"account_id":54959,"reputation":3943,"user_id":164497,"accept_rate":54,"display_name":"mouthpiec"},"score":0,"creation_date":1580999529,"post_id":60096433,"comment_id":106289565,"body_markdown":"same error :( once I remove the : it executes but I get an error from the remote server. btw thanks for helping out :)","body":"same error :( once I remove the : it executes but I get an error from the remote server. btw thanks for helping out :)"},{"owner":{"account_id":54959,"reputation":3943,"user_id":164497,"accept_rate":54,"display_name":"mouthpiec"},"score":0,"creation_date":1581002790,"post_id":60096433,"comment_id":106291588,"body_markdown":"Solved by replacing:\n\n        headers.addHeader(&quot;Authorization: Basic &quot;, &quot;123456789123456789&quot;);\n\nwith\n\n        headers.addHeader(&quot;Authorization&quot;, &quot;Basic 123456789123456789&quot;);","body":"Solved by replacing:          headers.addHeader(&quot;Authorization: Basic &quot;, &quot;123456789123456789&quot;);  with          headers.addHeader(&quot;Authorization&quot;, &quot;Basic 123456789123456789&quot;);"}],"answers":[{"tags":[],"owner":{"account_id":54959,"reputation":3943,"user_id":164497,"accept_rate":54,"display_name":"mouthpiec"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1581002885,"creation_date":1581002885,"answer_id":60098455,"question_id":60096433,"body_markdown":"Solved by replacing: \r\n\r\n    headers.addHeader(&quot;Authorization: Basic &quot;, &quot;123456789123456789&quot;); \r\n\r\nwith \r\n\r\n    headers.addHeader(&quot;Authorization&quot;, &quot;Basic 123456789123456789&quot;);","title":"java.lang.IllegalArgumentException: Illegal character(s) in message header field: Authorization: Basic","body":"<p>Solved by replacing: </p>\n\n<pre><code>headers.addHeader(\"Authorization: Basic \", \"123456789123456789\"); \n</code></pre>\n\n<p>with </p>\n\n<pre><code>headers.addHeader(\"Authorization\", \"Basic 123456789123456789\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4347614,"reputation":61,"user_id":3549139,"display_name":"i2B"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649676364,"creation_date":1649676364,"answer_id":71826970,"question_id":60096433,"body_markdown":"I had copied the headers from a cURL call, which had &quot;Authorization: &quot;. Removing the colon solved the problem.","title":"java.lang.IllegalArgumentException: Illegal character(s) in message header field: Authorization: Basic","body":"<p>I had copied the headers from a cURL call, which had &quot;Authorization: &quot;. Removing the colon solved the problem.</p>\n"}],"owner":{"account_id":54959,"reputation":3943,"user_id":164497,"accept_rate":54,"display_name":"mouthpiec"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2827,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1649676364,"creation_date":1580996774,"question_id":60096433,"body_markdown":"I am writing a java class to trigger a webservice, but I am getting the error when trying to execute it.\r\n\r\n    java.lang.IllegalArgumentException: Illegal character(s) in message header field: Authorization: Basic\r\n\r\nwhen I remove the colon character from &quot;Authorization: Basic &quot;, I am not getting the error.\r\n\r\n    MimeHeaders headers = soapMessage.getMimeHeaders();\r\n    headers.addHeader(&quot;SOAPAction&quot;, serverURI  + &quot;send&quot;);\r\n    headers.addHeader(&quot;Authorization: Basic &quot;, &quot;123456789123456789&quot;);\r\n\r\n\r\nIs there a way to send the colon without any errors?\r\n\r\n    java -version\r\n    java version &quot;1.7.0_131&quot;\r\n    OpenJDK Runtime Environment (rhel-2.6.9.0.el6_8-x86_64 u131-b00)\r\n    OpenJDK 64-Bit Server VM (build 24.131-b00, mixed mode)\r\n\r\n","title":"java.lang.IllegalArgumentException: Illegal character(s) in message header field: Authorization: Basic","body":"<p>I am writing a java class to trigger a webservice, but I am getting the error when trying to execute it.</p>\n\n<pre><code>java.lang.IllegalArgumentException: Illegal character(s) in message header field: Authorization: Basic\n</code></pre>\n\n<p>when I remove the colon character from \"Authorization: Basic \", I am not getting the error.</p>\n\n<pre><code>MimeHeaders headers = soapMessage.getMimeHeaders();\nheaders.addHeader(\"SOAPAction\", serverURI  + \"send\");\nheaders.addHeader(\"Authorization: Basic \", \"123456789123456789\");\n</code></pre>\n\n<p>Is there a way to send the colon without any errors?</p>\n\n<pre><code>java -version\njava version \"1.7.0_131\"\nOpenJDK Runtime Environment (rhel-2.6.9.0.el6_8-x86_64 u131-b00)\nOpenJDK 64-Bit Server VM (build 24.131-b00, mixed mode)\n</code></pre>\n"},{"tags":["java","java-11","wsdl2java"],"comments":[{"owner":{"account_id":174361,"reputation":496,"user_id":403675,"accept_rate":62,"display_name":"Petr Kostroun"},"score":0,"creation_date":1649676909,"post_id":71826941,"comment_id":126928661,"body_markdown":"No, this is problem with checkstyle plugin, and I have problem with WSDL2JAVA plugin.","body":"No, this is problem with checkstyle plugin, and I have problem with WSDL2JAVA plugin."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1649687196,"post_id":71826941,"comment_id":126932932,"body_markdown":"The answer still is the same. Update the particular software to a version that does not incorrectly assume that there has to be a `tools.jar`.","body":"The answer still is the same. Update the particular software to a version that does not incorrectly assume that there has to be a <code>tools.jar</code>."}],"owner":{"account_id":174361,"reputation":496,"user_id":403675,"accept_rate":62,"display_name":"Petr Kostroun"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":332,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1649953001,"answer_count":0,"score":0,"last_activity_date":1649676191,"creation_date":1649676191,"question_id":71826941,"body_markdown":"I have problem with build with wsdl2java on java 11 jdk. It returns me this error : \r\n\r\n    [ERROR] Failed to execute goal org.apache.cxf:cxf-codegen-plugin:3.3.6:wsdl2java (generate-sources) on project dhl-wc: Execution generate-sources of goal org.apach\r\n    e.cxf:cxf-codegen-plugin:3.3.6:wsdl2java failed: Plugin org.apache.cxf:cxf-codegen-plugin:3.3.6 or one of its dependencies could not be resolved: Could not find ar\r\n    tifact sun.jdk:tools:jar:1.5.0 at specified path C:\\Apps\\jdk-11.0.13_windows-x64_bin\\jdk-11.0.13/../lib/tools.jar -&gt; [\r\n\r\nMaven pom conf is :\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n    \r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;com.dhl.webcommon&lt;/groupId&gt;\r\n        &lt;artifactId&gt;dhl-wc&lt;/artifactId&gt;\r\n        &lt;version&gt;1.3.3.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;packaging&gt;jar&lt;/packaging&gt;\r\n        &lt;name&gt;dhl-wc&lt;/name&gt;\r\n        &lt;description&gt;Library for DHL web projects&lt;/description&gt;\r\n    \r\n        &lt;properties&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n            &lt;spring.version&gt;5.3.18&lt;/spring.version&gt;\r\n            &lt;spring.security.version&gt;4.2.17.RELEASE&lt;/spring.security.version&gt;\r\n            &lt;spring.batch.version&gt;3.0.10.RELEASE&lt;/spring.batch.version&gt;\r\n    \r\n            &lt;wicket.version&gt;8.8.0&lt;/wicket.version&gt;\r\n            &lt;wicketstuff.version&gt;8.8.0&lt;/wicketstuff.version&gt;\r\n            &lt;wicket-select2.version&gt;4.1&lt;/wicket-select2.version&gt;\r\n            &lt;wicket-bean-validation.version&gt;8.8.0&lt;/wicket-bean-validation.version&gt;\r\n            &lt;wicket-jquery-ui.version&gt;8.8.0&lt;/wicket-jquery-ui.version&gt;\r\n    \r\n            &lt;joda.hibernate.version&gt;1.4&lt;/joda.hibernate.version&gt;\r\n            &lt;common.dbcp&gt;1.4&lt;/common.dbcp&gt;\r\n            &lt;org.jadira.usertype&gt;2.0.1&lt;/org.jadira.usertype&gt;\r\n    \r\n            &lt;casclient&gt;2.1.1&lt;/casclient&gt;\r\n            &lt;org.apache.poi&gt;4.1.2&lt;/org.apache.poi&gt;\r\n            &lt;icu4j&gt;67.1&lt;/icu4j&gt;\r\n            &lt;aspectj&gt;1.9.5&lt;/aspectj&gt;\r\n            &lt;cxf-codegen-plugin.version&gt;3.3.6&lt;/cxf-codegen-plugin.version&gt;\r\n            &lt;cxf.version&gt;3.3.6&lt;/cxf.version&gt;\r\n            &lt;saml.filter.version&gt;1.0.10.0&lt;/saml.filter.version&gt;\r\n    \r\n            &lt;jackson.version&gt;2.9.4&lt;/jackson.version&gt;\r\n            &lt;commons-io&gt;2.6&lt;/commons-io&gt;\r\n            &lt;commons-codec&gt;1.14&lt;/commons-codec&gt;\r\n            &lt;log4j&gt;2.13.3&lt;/log4j&gt;\r\n    \r\n            &lt;!--        &lt;flywayVersion&gt;6.4.4&lt;/flywayVersion&gt; TODO migrate to newer version--&gt;\r\n            &lt;flywayVersion&gt;4.0.3&lt;/flywayVersion&gt;\r\n            &lt;hsqldb.version&gt;2.5.0&lt;/hsqldb.version&gt;\r\n            &lt;junit.version&gt;4.13&lt;/junit.version&gt;\r\n    \r\n            &lt;dhl.dbc.dao.version&gt;1.1.2.0-SNAPSHOT&lt;/dhl.dbc.dao.version&gt;\r\n            &lt;dhl.resources.version&gt;1.1.160.0&lt;/dhl.resources.version&gt;\r\n            &lt;cdmConfigInMemoryDaoVersion&gt;1.0.14.0&lt;/cdmConfigInMemoryDaoVersion&gt;\r\n            &lt;cdmConfigWrapperEntities&gt;1.0.13.0&lt;/cdmConfigWrapperEntities&gt;\r\n        &lt;/properties&gt;\r\n    \r\n        &lt;scm&gt;\r\n            \r\n    \r\n     &lt;build&gt;\r\n    \r\n            &lt;resources&gt;\r\n                &lt;resource&gt;\r\n                    &lt;filtering&gt;false&lt;/filtering&gt;\r\n                    &lt;directory&gt;${basedir}/src/main/java&lt;/directory&gt;\r\n                    &lt;excludes&gt;\r\n                        &lt;exclude&gt;**/*.java&lt;/exclude&gt;\r\n                    &lt;/excludes&gt;\r\n                &lt;/resource&gt;\r\n                &lt;resource&gt;\r\n                    &lt;filtering&gt;false&lt;/filtering&gt;\r\n                    &lt;directory&gt;${basedir}/src/main/resources&lt;/directory&gt;\r\n                &lt;/resource&gt;\r\n            &lt;/resources&gt;\r\n    \r\n            &lt;testResources&gt;\r\n                &lt;testResource&gt;\r\n                    &lt;filtering&gt;false&lt;/filtering&gt;\r\n                    &lt;directory&gt;${basedir}/src/test/resources&lt;/directory&gt;\r\n                &lt;/testResource&gt;\r\n            &lt;/testResources&gt;\r\n    \r\n            &lt;plugins&gt;\r\n    \r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.5.3&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n    \r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.8.1&lt;/version&gt;\r\n                    &lt;inherited&gt;true&lt;/inherited&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;11&lt;/source&gt;\r\n                        &lt;target&gt;11&lt;/target&gt;\r\n                        &lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n    \r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.4&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n    \r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.2.1&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;attach-sources&lt;/id&gt;\r\n                            &lt;phase&gt;verify&lt;/phase&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;jar-no-fork&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n    \r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.2.0&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;sourcepath&gt;${basedir}/dummy&lt;/sourcepath&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                    &lt;!-- JUnit 5 requires Surefire version 2.22.0 or higher --&gt;\r\n                    &lt;version&gt;3.0.0-M6&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n    \r\n                &lt;!-- WSDL -&gt; Java (start) --&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;!-- !!! READ !!! --&gt;\r\n                    &lt;!-- mvn cxf-codegen-plugin:wsdl2java NOT working, comment phase and\r\n                        run &quot;mvn clean process-resources&quot;) --&gt;\r\n                    &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;cxf-codegen-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;${cxf-codegen-plugin.version}&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;generate-sources&lt;/id&gt;\r\n                            &lt;phase&gt;generate-sources&lt;/phase&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;wsdlOptions&gt;\r\n                                    &lt;wsdlOption&gt;\r\n                                        &lt;wsdl&gt;${basedir}/src/main/resources/wsdl/UserManagementWs.wsdl&lt;/wsdl&gt;\r\n                                        &lt;extraargs&gt;\r\n                                            &lt;extraarg&gt;-verbose&lt;/extraarg&gt;\r\n                                            &lt;extraarg&gt;-p&lt;/extraarg&gt;\r\n                                            &lt;extraarg&gt;com.dhl.common.service.ws.gen&lt;/extraarg&gt;\r\n                                        &lt;/extraargs&gt;\r\n                                    &lt;/wsdlOption&gt;\r\n                                &lt;/wsdlOptions&gt;\r\n                            &lt;/configuration&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;wsdl2java&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                    &lt;dependencies&gt;\r\n                        &lt;dependency&gt;\r\n                            &lt;groupId&gt;org.codehaus.woodstox&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;stax2-api&lt;/artifactId&gt;\r\n                            &lt;version&gt;3.1.1&lt;/version&gt;\r\n                        &lt;/dependency&gt;\r\n                        &lt;dependency&gt;\r\n                            &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;cxf-xjc-ts&lt;/artifactId&gt;\r\n                            &lt;version&gt;2.2.12&lt;/version&gt;\r\n                        &lt;/dependency&gt;\r\n                        &lt;dependency&gt;\r\n                            &lt;groupId&gt;org.jvnet.jaxb2_commons&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;jaxb2-basics-jaxb-xjc&lt;/artifactId&gt;\r\n                            &lt;version&gt;2.1.13&lt;/version&gt;\r\n                        &lt;/dependency&gt;\r\n                    &lt;/dependencies&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    \r\n        &lt;distributionManagement&gt;\r\n            &lt;repository&gt;\r\n                &lt;id&gt;releases&lt;/id&gt;\r\n                &lt;url&gt;http://czcholstc000112.prg-dc.dhl.com:8272/nexus/content/repositories/releases&lt;/url&gt;\r\n            &lt;/repository&gt;\r\n            &lt;snapshotRepository&gt;\r\n                &lt;id&gt;snapshots&lt;/id&gt;\r\n                &lt;url&gt;http://czcholstc000112.prg-dc.dhl.com:8272/nexus/content/repositories/snapshots&lt;/url&gt;\r\n            &lt;/snapshotRepository&gt;\r\n        &lt;/distributionManagement&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n                &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\r\n                &lt;version&gt;2.5&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-expression&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-jms&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-security-core&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.security.version}&lt;/version&gt;\r\n                &lt;exclusions&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;artifactId&gt;org.springframework&lt;/artifactId&gt;\r\n                        &lt;groupId&gt;spring-aop&lt;/groupId&gt;\r\n                    &lt;/exclusion&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;artifactId&gt;org.springframework&lt;/artifactId&gt;\r\n                        &lt;groupId&gt;spring-beans&lt;/groupId&gt;\r\n                    &lt;/exclusion&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;artifactId&gt;org.springframework&lt;/artifactId&gt;\r\n                        &lt;groupId&gt;spring-context&lt;/groupId&gt;\r\n                    &lt;/exclusion&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;artifactId&gt;org.springframework&lt;/artifactId&gt;\r\n                        &lt;groupId&gt;spring-core&lt;/groupId&gt;\r\n                    &lt;/exclusion&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;artifactId&gt;org.springframework&lt;/artifactId&gt;\r\n                        &lt;groupId&gt;spring-expression&lt;/groupId&gt;\r\n                    &lt;/exclusion&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;artifactId&gt;spring-expression&lt;/artifactId&gt;\r\n                        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                    &lt;/exclusion&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;\r\n                        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                    &lt;/exclusion&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\r\n                        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                    &lt;/exclusion&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n                        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                    &lt;/exclusion&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n                        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                    &lt;/exclusion&gt;\r\n                &lt;/exclusions&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.security.version}&lt;/version&gt;\r\n                &lt;exclusions&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;artifactId&gt;org.springframework.security&lt;/artifactId&gt;\r\n                        &lt;groupId&gt;spring-security-core&lt;/groupId&gt;\r\n                    &lt;/exclusion&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;artifactId&gt;org.springframework&lt;/artifactId&gt;\r\n                        &lt;groupId&gt;spring-beans&lt;/groupId&gt;\r\n                    &lt;/exclusion&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;artifactId&gt;org.springframework&lt;/artifactId&gt;\r\n                        &lt;groupId&gt;spring-context&lt;/groupId&gt;\r\n                    &lt;/exclusion&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;artifactId&gt;org.springframework&lt;/artifactId&gt;\r\n                        &lt;groupId&gt;spring-core&lt;/groupId&gt;\r\n                    &lt;/exclusion&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;artifactId&gt;org.springframework&lt;/artifactId&gt;\r\n                        &lt;groupId&gt;spring-expression&lt;/groupId&gt;\r\n                    &lt;/exclusion&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;artifactId&gt;org.springframework&lt;/artifactId&gt;\r\n                        &lt;groupId&gt;spring-web&lt;/groupId&gt;\r\n                    &lt;/exclusion&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n                        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                    &lt;/exclusion&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;artifactId&gt;spring-expression&lt;/artifactId&gt;\r\n                        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                    &lt;/exclusion&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\r\n                        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                    &lt;/exclusion&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n                        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                    &lt;/exclusion&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n                        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                    &lt;/exclusion&gt;\r\n                &lt;/exclusions&gt;\r\n            &lt;/dependency&gt;\r\n         \r\n\r\n\r\nCan someone give a point how to solve this issue? WSDL2JAVA plugin seems not to be outdated.I\r\nfind some questions on this problem, but there is not question solving this problem. When I try to build this project on java 1.8, build runs smoothly.\r\nThank you\r\n","title":"Could not find artifact sun.jdk:tools:jar:1.5.0 + wsdl2java","body":"<p>I have problem with build with wsdl2java on java 11 jdk. It returns me this error :</p>\n<pre><code>[ERROR] Failed to execute goal org.apache.cxf:cxf-codegen-plugin:3.3.6:wsdl2java (generate-sources) on project dhl-wc: Execution generate-sources of goal org.apach\ne.cxf:cxf-codegen-plugin:3.3.6:wsdl2java failed: Plugin org.apache.cxf:cxf-codegen-plugin:3.3.6 or one of its dependencies could not be resolved: Could not find ar\ntifact sun.jdk:tools:jar:1.5.0 at specified path C:\\Apps\\jdk-11.0.13_windows-x64_bin\\jdk-11.0.13/../lib/tools.jar -&gt; [\n</code></pre>\n<p>Maven pom conf is :</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.dhl.webcommon&lt;/groupId&gt;\n    &lt;artifactId&gt;dhl-wc&lt;/artifactId&gt;\n    &lt;version&gt;1.3.3.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;name&gt;dhl-wc&lt;/name&gt;\n    &lt;description&gt;Library for DHL web projects&lt;/description&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;spring.version&gt;5.3.18&lt;/spring.version&gt;\n        &lt;spring.security.version&gt;4.2.17.RELEASE&lt;/spring.security.version&gt;\n        &lt;spring.batch.version&gt;3.0.10.RELEASE&lt;/spring.batch.version&gt;\n\n        &lt;wicket.version&gt;8.8.0&lt;/wicket.version&gt;\n        &lt;wicketstuff.version&gt;8.8.0&lt;/wicketstuff.version&gt;\n        &lt;wicket-select2.version&gt;4.1&lt;/wicket-select2.version&gt;\n        &lt;wicket-bean-validation.version&gt;8.8.0&lt;/wicket-bean-validation.version&gt;\n        &lt;wicket-jquery-ui.version&gt;8.8.0&lt;/wicket-jquery-ui.version&gt;\n\n        &lt;joda.hibernate.version&gt;1.4&lt;/joda.hibernate.version&gt;\n        &lt;common.dbcp&gt;1.4&lt;/common.dbcp&gt;\n        &lt;org.jadira.usertype&gt;2.0.1&lt;/org.jadira.usertype&gt;\n\n        &lt;casclient&gt;2.1.1&lt;/casclient&gt;\n        &lt;org.apache.poi&gt;4.1.2&lt;/org.apache.poi&gt;\n        &lt;icu4j&gt;67.1&lt;/icu4j&gt;\n        &lt;aspectj&gt;1.9.5&lt;/aspectj&gt;\n        &lt;cxf-codegen-plugin.version&gt;3.3.6&lt;/cxf-codegen-plugin.version&gt;\n        &lt;cxf.version&gt;3.3.6&lt;/cxf.version&gt;\n        &lt;saml.filter.version&gt;1.0.10.0&lt;/saml.filter.version&gt;\n\n        &lt;jackson.version&gt;2.9.4&lt;/jackson.version&gt;\n        &lt;commons-io&gt;2.6&lt;/commons-io&gt;\n        &lt;commons-codec&gt;1.14&lt;/commons-codec&gt;\n        &lt;log4j&gt;2.13.3&lt;/log4j&gt;\n\n        &lt;!--        &lt;flywayVersion&gt;6.4.4&lt;/flywayVersion&gt; TODO migrate to newer version--&gt;\n        &lt;flywayVersion&gt;4.0.3&lt;/flywayVersion&gt;\n        &lt;hsqldb.version&gt;2.5.0&lt;/hsqldb.version&gt;\n        &lt;junit.version&gt;4.13&lt;/junit.version&gt;\n\n        &lt;dhl.dbc.dao.version&gt;1.1.2.0-SNAPSHOT&lt;/dhl.dbc.dao.version&gt;\n        &lt;dhl.resources.version&gt;1.1.160.0&lt;/dhl.resources.version&gt;\n        &lt;cdmConfigInMemoryDaoVersion&gt;1.0.14.0&lt;/cdmConfigInMemoryDaoVersion&gt;\n        &lt;cdmConfigWrapperEntities&gt;1.0.13.0&lt;/cdmConfigWrapperEntities&gt;\n    &lt;/properties&gt;\n\n    &lt;scm&gt;\n        \n\n &lt;build&gt;\n\n        &lt;resources&gt;\n            &lt;resource&gt;\n                &lt;filtering&gt;false&lt;/filtering&gt;\n                &lt;directory&gt;${basedir}/src/main/java&lt;/directory&gt;\n                &lt;excludes&gt;\n                    &lt;exclude&gt;**/*.java&lt;/exclude&gt;\n                &lt;/excludes&gt;\n            &lt;/resource&gt;\n            &lt;resource&gt;\n                &lt;filtering&gt;false&lt;/filtering&gt;\n                &lt;directory&gt;${basedir}/src/main/resources&lt;/directory&gt;\n            &lt;/resource&gt;\n        &lt;/resources&gt;\n\n        &lt;testResources&gt;\n            &lt;testResource&gt;\n                &lt;filtering&gt;false&lt;/filtering&gt;\n                &lt;directory&gt;${basedir}/src/test/resources&lt;/directory&gt;\n            &lt;/testResource&gt;\n        &lt;/testResources&gt;\n\n        &lt;plugins&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.5.3&lt;/version&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.1&lt;/version&gt;\n                &lt;inherited&gt;true&lt;/inherited&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;11&lt;/source&gt;\n                    &lt;target&gt;11&lt;/target&gt;\n                    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.4&lt;/version&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.2.1&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;attach-sources&lt;/id&gt;\n                        &lt;phase&gt;verify&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;jar-no-fork&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.2.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;sourcepath&gt;${basedir}/dummy&lt;/sourcepath&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;!-- JUnit 5 requires Surefire version 2.22.0 or higher --&gt;\n                &lt;version&gt;3.0.0-M6&lt;/version&gt;\n            &lt;/plugin&gt;\n\n            &lt;!-- WSDL -&gt; Java (start) --&gt;\n            &lt;plugin&gt;\n                &lt;!-- !!! READ !!! --&gt;\n                &lt;!-- mvn cxf-codegen-plugin:wsdl2java NOT working, comment phase and\n                    run &quot;mvn clean process-resources&quot;) --&gt;\n                &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n                &lt;artifactId&gt;cxf-codegen-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${cxf-codegen-plugin.version}&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;generate-sources&lt;/id&gt;\n                        &lt;phase&gt;generate-sources&lt;/phase&gt;\n                        &lt;configuration&gt;\n                            &lt;wsdlOptions&gt;\n                                &lt;wsdlOption&gt;\n                                    &lt;wsdl&gt;${basedir}/src/main/resources/wsdl/UserManagementWs.wsdl&lt;/wsdl&gt;\n                                    &lt;extraargs&gt;\n                                        &lt;extraarg&gt;-verbose&lt;/extraarg&gt;\n                                        &lt;extraarg&gt;-p&lt;/extraarg&gt;\n                                        &lt;extraarg&gt;com.dhl.common.service.ws.gen&lt;/extraarg&gt;\n                                    &lt;/extraargs&gt;\n                                &lt;/wsdlOption&gt;\n                            &lt;/wsdlOptions&gt;\n                        &lt;/configuration&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;wsdl2java&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n                &lt;dependencies&gt;\n                    &lt;dependency&gt;\n                        &lt;groupId&gt;org.codehaus.woodstox&lt;/groupId&gt;\n                        &lt;artifactId&gt;stax2-api&lt;/artifactId&gt;\n                        &lt;version&gt;3.1.1&lt;/version&gt;\n                    &lt;/dependency&gt;\n                    &lt;dependency&gt;\n                        &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n                        &lt;artifactId&gt;cxf-xjc-ts&lt;/artifactId&gt;\n                        &lt;version&gt;2.2.12&lt;/version&gt;\n                    &lt;/dependency&gt;\n                    &lt;dependency&gt;\n                        &lt;groupId&gt;org.jvnet.jaxb2_commons&lt;/groupId&gt;\n                        &lt;artifactId&gt;jaxb2-basics-jaxb-xjc&lt;/artifactId&gt;\n                        &lt;version&gt;2.1.13&lt;/version&gt;\n                    &lt;/dependency&gt;\n                &lt;/dependencies&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;distributionManagement&gt;\n        &lt;repository&gt;\n            &lt;id&gt;releases&lt;/id&gt;\n            &lt;url&gt;http://czcholstc000112.prg-dc.dhl.com:8272/nexus/content/repositories/releases&lt;/url&gt;\n        &lt;/repository&gt;\n        &lt;snapshotRepository&gt;\n            &lt;id&gt;snapshots&lt;/id&gt;\n            &lt;url&gt;http://czcholstc000112.prg-dc.dhl.com:8272/nexus/content/repositories/snapshots&lt;/url&gt;\n        &lt;/snapshotRepository&gt;\n    &lt;/distributionManagement&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;2.5&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-expression&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-jms&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-core&lt;/artifactId&gt;\n            &lt;version&gt;${spring.security.version}&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;org.springframework&lt;/artifactId&gt;\n                    &lt;groupId&gt;spring-aop&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;org.springframework&lt;/artifactId&gt;\n                    &lt;groupId&gt;spring-beans&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;org.springframework&lt;/artifactId&gt;\n                    &lt;groupId&gt;spring-context&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;org.springframework&lt;/artifactId&gt;\n                    &lt;groupId&gt;spring-core&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;org.springframework&lt;/artifactId&gt;\n                    &lt;groupId&gt;spring-expression&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;spring-expression&lt;/artifactId&gt;\n                    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;\n                    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n                    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n                    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n                    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\n            &lt;version&gt;${spring.security.version}&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;org.springframework.security&lt;/artifactId&gt;\n                    &lt;groupId&gt;spring-security-core&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;org.springframework&lt;/artifactId&gt;\n                    &lt;groupId&gt;spring-beans&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;org.springframework&lt;/artifactId&gt;\n                    &lt;groupId&gt;spring-context&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;org.springframework&lt;/artifactId&gt;\n                    &lt;groupId&gt;spring-core&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;org.springframework&lt;/artifactId&gt;\n                    &lt;groupId&gt;spring-expression&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;org.springframework&lt;/artifactId&gt;\n                    &lt;groupId&gt;spring-web&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n                    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;spring-expression&lt;/artifactId&gt;\n                    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n                    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n                    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n                    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n     \n</code></pre>\n<p>Can someone give a point how to solve this issue? WSDL2JAVA plugin seems not to be outdated.I\nfind some questions on this problem, but there is not question solving this problem. When I try to build this project on java 1.8, build runs smoothly.\nThank you</p>\n"},{"tags":["java","spring","spring-boot","rest","spring-data-jpa"],"comments":[{"owner":{"account_id":16404603,"reputation":359,"user_id":11849527,"display_name":"Salem loress"},"score":0,"creation_date":1649642317,"post_id":71801634,"comment_id":126919766,"body_markdown":"Can you try to delete Cascade All and Fetch Eager ?","body":"Can you try to delete Cascade All and Fetch Eager ?"},{"owner":{"account_id":19226814,"reputation":21,"user_id":14049527,"display_name":"Teo"},"score":0,"creation_date":1649859506,"post_id":71801634,"comment_id":126983037,"body_markdown":"The Cascade didn&#39;t exist on the described problem, that was the previous code but I deleted fetch eager and same error :/","body":"The Cascade didn&#39;t exist on the described problem, that was the previous code but I deleted fetch eager and same error :/"}],"owner":{"account_id":19226814,"reputation":21,"user_id":14049527,"display_name":"Teo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":509,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1649676125,"creation_date":1649442146,"question_id":71801634,"body_markdown":"I&#39;m currently trying to update a system which has users and user profile information working.\r\n\r\nThe idea is to keep a few versions of the profile information in certain conditions and as such **I intended to switch the profile information from being identified by the user id (that is the username) to be identified by a sequentially generated id (to keep track of the order).**\r\n\r\nPreviously the relationship was a simple OneToOne and now I wanted to do switch it to a OneToMany as I had done before for other cases.\r\n\r\nProblem is the error I mentioned above **whenever trying to add new profile information to the database**:\r\n\r\n    Caused by: java.sql.SQLIntegrityConstraintViolationException: (conn=48) Duplicate entry &#39;usernameInQuestion&#39; for key &#39;UK_141232asdas78k552&#39;\r\n\r\nThe profile information class was previously this:\r\n\r\n    @Id\r\n    @Column(name = &quot;username&quot;)\r\n    private String username;\r\n\r\n    @MapsId\r\n    @OneToOne(cascade = CascadeType.ALL)\r\n    @JoinColumn(name = &quot;username&quot;, referencedColumnName = &quot;username&quot;)\r\n    private User user;\r\n\r\nAnd was now changed to this:\r\n\r\n    @Id\r\n    @GeneratedValue\r\n    private Long id;\r\n    \r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;username&quot;)\r\n    private User user;\r\n\r\nWhile previously the User entity didn&#39;t reference the profile information and now:\r\n\r\n    @Id\r\n    @Column(name = &quot;username&quot;, nullable = false)\r\n    private String username;\r\n\r\n    @OneToMany(mappedBy = &quot;user&quot;, fetch = FetchType.EAGER)\r\n    private List&lt;ProfileInformation&gt; infos;\r\n\r\nThis occurs in the creation of profile information:\r\n        \r\n        ProfileInformation info = new ProfileInformation(infoDto, user);\r\n        [...]\r\n        info = profileInformationRepository.save(info);\r\n\r\nI would need to still add the ProfileInformation to the User but the error occurs before that, I have tried that before so I expect it not to be the source of the problem, **I think it is in the actual saving of the Profile Information that it expects the username mapping to be unique... but why is that?**\r\n\r\nI have no clue why doesn&#39;t this work as I have a similar relationship between the Profile Information and another entity (but in reverse, where there are many of those others entities for a single profile information) and it fully works.\r\n\r\nPS - When talking to a friend I got reminded to add further information, I have already tried dropping the database and creating it again in fear that this was some weird limbo effect of a constraint from being previously OneToOne. This error occurs in a clean database.\r\n\r\n\r\n","title":"Spring JPA | Duplicate entry &quot;username&quot; for key &quot;...&quot; when adding to a ManyToOne relationship","body":"<p>I'm currently trying to update a system which has users and user profile information working.</p>\n<p>The idea is to keep a few versions of the profile information in certain conditions and as such <strong>I intended to switch the profile information from being identified by the user id (that is the username) to be identified by a sequentially generated id (to keep track of the order).</strong></p>\n<p>Previously the relationship was a simple OneToOne and now I wanted to do switch it to a OneToMany as I had done before for other cases.</p>\n<p>Problem is the error I mentioned above <strong>whenever trying to add new profile information to the database</strong>:</p>\n<pre><code>Caused by: java.sql.SQLIntegrityConstraintViolationException: (conn=48) Duplicate entry 'usernameInQuestion' for key 'UK_141232asdas78k552'\n</code></pre>\n<p>The profile information class was previously this:</p>\n<pre><code>@Id\n@Column(name = &quot;username&quot;)\nprivate String username;\n\n@MapsId\n@OneToOne(cascade = CascadeType.ALL)\n@JoinColumn(name = &quot;username&quot;, referencedColumnName = &quot;username&quot;)\nprivate User user;\n</code></pre>\n<p>And was now changed to this:</p>\n<pre><code>@Id\n@GeneratedValue\nprivate Long id;\n\n@ManyToOne\n@JoinColumn(name = &quot;username&quot;)\nprivate User user;\n</code></pre>\n<p>While previously the User entity didn't reference the profile information and now:</p>\n<pre><code>@Id\n@Column(name = &quot;username&quot;, nullable = false)\nprivate String username;\n\n@OneToMany(mappedBy = &quot;user&quot;, fetch = FetchType.EAGER)\nprivate List&lt;ProfileInformation&gt; infos;\n</code></pre>\n<p>This occurs in the creation of profile information:</p>\n<pre><code>    ProfileInformation info = new ProfileInformation(infoDto, user);\n    [...]\n    info = profileInformationRepository.save(info);\n</code></pre>\n<p>I would need to still add the ProfileInformation to the User but the error occurs before that, I have tried that before so I expect it not to be the source of the problem, <strong>I think it is in the actual saving of the Profile Information that it expects the username mapping to be unique... but why is that?</strong></p>\n<p>I have no clue why doesn't this work as I have a similar relationship between the Profile Information and another entity (but in reverse, where there are many of those others entities for a single profile information) and it fully works.</p>\n<p>PS - When talking to a friend I got reminded to add further information, I have already tried dropping the database and creating it again in fear that this was some weird limbo effect of a constraint from being previously OneToOne. This error occurs in a clean database.</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","spring-security"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":3,"creation_date":1649671875,"post_id":71824081,"comment_id":126926952,"body_markdown":"Your `UserService` needs beans created by the `ScurityConfig` while your `SpringDataUserDetailsService` requires the `UserService` and your `SecurityConfig` requires the `SpringDataUserDetailsService`. Hence circulair dependencies. To make things worse the `SpringDatauserDetailsService` needs the `UserService` and vice-versa. I suggest go back to the design board and redesign this,","body":"Your <code>UserService</code> needs beans created by the <code>ScurityConfig</code> while your <code>SpringDataUserDetailsService</code> requires the <code>UserService</code> and your <code>SecurityConfig</code> requires the <code>SpringDataUserDetailsService</code>. Hence circulair dependencies. To make things worse the <code>SpringDatauserDetailsService</code> needs the <code>UserService</code> and vice-versa. I suggest go back to the design board and redesign this,"},{"owner":{"account_id":15841746,"reputation":6011,"user_id":11430047,"display_name":"Eleftheria Stein-Kousathana"},"score":0,"creation_date":1649845654,"post_id":71824081,"comment_id":126977319,"body_markdown":"Note that calling `configureGlobal(AuthenticationManagerBuilder auth)` is redundant. Since `customUserDetailsService` and` passwordEncoder` are beans, Spring Security will pick them up automatically.","body":"Note that calling <code>configureGlobal(AuthenticationManagerBuilder auth)</code> is redundant. Since <code>customUserDetailsService</code> and` passwordEncoder` are beans, Spring Security will pick them up automatically."}],"answers":[{"tags":[],"owner":{"account_id":9045259,"reputation":5321,"user_id":6737860,"display_name":"Thomas K&#229;sene"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649676072,"creation_date":1649676072,"answer_id":71826916,"question_id":71824081,"body_markdown":"The project you&#39;re referring to uses Spring Boot 1.5.10. If you&#39;re trying to use Spring Boot 2.6.0 or higher, you&#39;ll need to either resolve the circular references as mentioned by others, or set `spring.main.allow-circular-references` to `true`.\r\n\r\nSee the [Spring Boot 2.6 release notes][1] for more information.\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.6-Release-Notes#circular-references-prohibited-by-default","title":"Error creating bean with name &#39;securityConfig&#39;: Requested bean is currently in creation: Is there an unresolvable circular reference?","body":"<p>The project you're referring to uses Spring Boot 1.5.10. If you're trying to use Spring Boot 2.6.0 or higher, you'll need to either resolve the circular references as mentioned by others, or set <code>spring.main.allow-circular-references</code> to <code>true</code>.</p>\n<p>See the <a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.6-Release-Notes#circular-references-prohibited-by-default\" rel=\"nofollow noreferrer\">Spring Boot 2.6 release notes</a> for more information.</p>\n"}],"owner":{"account_id":14478307,"reputation":2090,"user_id":10458333,"display_name":"Cipher"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3385,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1649676072,"creation_date":1649662072,"question_id":71824081,"body_markdown":"Reference taken from here (My code exactly same as this repo)- https://github.com/DamianMielcarek/CRM/tree/master/src/main/java/crm\r\n\r\nError \r\n\r\n```\r\norg.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name &#39;securityConfig&#39;: Requested bean is currently in creation: Is there an unresolvable circular reference?\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.beforeSingletonCreation(DefaultSingletonBeanRegistry.java:355) ~[spring-beans-5.3.18.jar:5.3.18]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:227) ~[spring-beans-5.3.18.jar:5.3.18]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.18.jar:5.3.18]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.18.jar:5.3.18]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:410) ~[spring-beans-5.3.18.jar:5.3.18]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.18.jar:5.3.18]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.18.jar:5.3.18]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.18.jar:5.3.18]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.18.jar:5.3.18]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.18.jar:5.3.18]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.18.jar:5.3.18]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.18.jar:5.3.18]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.18.jar:5.3.18]\r\n\tat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.resolveBeanReference(ConfigurationClassEnhancer.java:362) ~[spring-context-5.3.18.jar:5.3.18]\r\n\tat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:334) ~[spring-context-5.3.18.jar:5.3.18]\r\n\tat com.SecurityConfig$$EnhancerBySpringCGLIB$$4ce77a01.customUserDetailsService(&lt;generated&gt;) ~[classes/:na]\r\n\tat com.SecurityConfig.configureGlobal(SecurityConfig.java:31) ~[classes/:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:724) ~[spring-beans-5.3.18.jar:5.3.18]\r\n\tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119) ~[spring-beans-5.3.18.jar:5.3.18]\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399) ~[spring-beans-5.3.18.jar:5.3.18]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431) ~[spring-beans-5.3.18.jar:5.3.18]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619) ~[spring-beans-5.3.18.jar:5.3.18]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.18.jar:5.3.18]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.18.jar:5.3.18]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.18.jar:5.3.18]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.18.jar:5.3.18]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.18.jar:5.3.18]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.18.jar:5.3.18]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.18.jar:5.3.18]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.18.jar:5.3.18]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.6.6.jar:2.6.6]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:740) ~[spring-boot-2.6.6.jar:2.6.6]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:415) ~[spring-boot-2.6.6.jar:2.6.6]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:303) ~[spring-boot-2.6.6.jar:2.6.6]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1312) ~[spring-boot-2.6.6.jar:2.6.6]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1301) ~[spring-boot-2.6.6.jar:2.6.6]\r\n\tat com..BenimcarsApplication.main(BenimcarsApplication.java:16) ~[classes/:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n\tat org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-2.6.6.jar:2.6.6]\r\n```\r\n\r\nSecurityConfig.java\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\n@EnableGlobalMethodSecurity(securedEnabled = true)\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    @Bean\r\n    public BCryptPasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n\r\n    @Bean\r\n    public SpringDataUserDetailsService customUserDetailsService() {\r\n        return new SpringDataUserDetailsService();\r\n    }\r\n\r\n    @Autowired\r\n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\r\n        auth.userDetailsService(customUserDetailsService()).passwordEncoder(passwordEncoder());\r\n    }\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.authorizeRequests()\r\n                .antMatchers(&quot;/admin/**&quot;, &quot;/user/delete/**&quot;).hasRole(&quot;ADMIN&quot;)\r\n                .antMatchers(&quot;/pdf-generator&quot;, &quot;/search/**&quot;, &quot;/customer/**&quot;, &quot;/user/edit/**&quot;, &quot;/user/list&quot;, &quot;/contract/**&quot;).hasAnyRole( &quot;ADMIN&quot;, &quot;USER&quot;, &quot;MANAGER&quot;, &quot;OWNER&quot;)\r\n                .anyRequest().permitAll()\r\n                .and()\r\n                .formLogin().loginPage(&quot;/login&quot;).permitAll()\r\n                .and()\r\n                .logout().logoutSuccessUrl(&quot;/&quot;).permitAll()\r\n                .and()\r\n                .exceptionHandling().accessDeniedPage(&quot;/403&quot;);\r\n    }\r\n\r\n}\r\n```\r\n\r\nUserService.java\r\n```\r\npublic interface UserService {\r\n    User findByUsername(String username);\r\n    Iterable&lt;User&gt; listAllUsers();\r\n    User showUser(Long id);\r\n    void saveUser(User user);\r\n    void editUser(User user);\r\n    void deleteUser(User user);\r\n\r\n}\r\n```\r\nUserServiceImpl.java\r\n```\r\n@Service\r\npublic class UserServiceImpl implements UserService {\r\n\r\n    private UserRepository userRepository;\r\n    private RoleRepository roleRepository;\r\n    private BCryptPasswordEncoder passwordEncoder;\r\n    private AuthenticationManager authenticationManager;\r\n    private SpringDataUserDetailsService springDataUserDetailsService;\r\n\r\n    @Autowired\r\n    public void setUserRepository(UserRepository userRepository) {\r\n        this.userRepository = userRepository;\r\n    }\r\n\r\n    @Autowired\r\n    public void setRoleRepository(RoleRepository roleRepository) {\r\n        this.roleRepository = roleRepository;\r\n    }\r\n\r\n    @Autowired\r\n    public void setPasswordEncoder(BCryptPasswordEncoder passwordEncoder) {\r\n        this.passwordEncoder = passwordEncoder;\r\n    }\r\n\r\n    @Autowired\r\n    public void setAuthenticationManager(AuthenticationManager authenticationManager) {\r\n        this.authenticationManager = authenticationManager;\r\n    }\r\n\r\n    @Autowired\r\n    public void setSpringDataUserDetailsService(SpringDataUserDetailsService springDataUserDetailsService) {\r\n        this.springDataUserDetailsService = springDataUserDetailsService;\r\n    }\r\n\r\n    @Override\r\n    public User findByUsername(String username) {\r\n        return userRepository.findByUsername(username);\r\n    }\r\n\r\n    @Override\r\n    public Iterable&lt;User&gt; listAllUsers() {\r\n        return userRepository.findAllByEnabled(1);\r\n    }\r\n\r\n    @Override\r\n    public User showUser(Long id) {\r\n        return userRepository.findOne(id);\r\n    }\r\n\r\n    @Override\r\n    public void saveUser(User user) {\r\n        Role userRole = roleRepository.findByName(&quot;ROLE_USER&quot;);\r\n        user.setRole(userRole);\r\n        user.setEnabled(1);\r\n        String password = user.getPassword();\r\n        user.setPassword(passwordEncoder.encode(password));\r\n        userRepository.save(user);\r\n        if (user.getId().equals(1L)) {\r\n            userRole = roleRepository.findByName(&quot;ROLE_ADMIN&quot;);\r\n            user.setRole(userRole);\r\n            userRepository.save(user);\r\n        }\r\n        UserDetails userDetails = springDataUserDetailsService.loadUserByUsername(user.getUsername());\r\n        UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken =\r\n                new UsernamePasswordAuthenticationToken(userDetails, password, userDetails.getAuthorities());\r\n        authenticationManager.authenticate(usernamePasswordAuthenticationToken);\r\n        SecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\r\n    }\r\n\r\n    @Override\r\n    public void editUser(User user) {\r\n        String password = user.getPassword();\r\n        user.setPassword(passwordEncoder.encode(password));\r\n        Role userRole = roleRepository.findByName(&quot;ROLE_USER&quot;);\r\n        try {\r\n            userRole = roleRepository.findById(user.getRole().getId()).orElse(null);;\r\n        } catch (NullPointerException e) {\r\n            userRole = roleRepository.findByName(&quot;ROLE_USER&quot;);\r\n        } finally {\r\n            user.setRole(userRole);\r\n            user.setEnabled(1);\r\n            userRepository.save(user);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void deleteUser(User user) {\r\n        user.setEnabled(0);\r\n        user.setPassword(null);\r\n        userRepository.save(user);\r\n    }\r\n\r\n}\r\n```\r\nSpringDataUserDetailsService.java\r\n\r\n```\r\n@Service\r\npublic class SpringDataUserDetailsService implements UserDetailsService {\r\n\r\n    @Autowired\r\n    UserService userService;\r\n\r\n    @Override\r\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n        User user = userService.findByUsername(username);\r\n        if (user == null) {\r\n            throw new UsernameNotFoundException(username);\r\n        }\r\n        String role = user.getRole().getName();\r\n        Set&lt;GrantedAuthority&gt; grantedAuthorities = new HashSet&lt;&gt;();\r\n        grantedAuthorities.add(new SimpleGrantedAuthority(role));\r\n        CurrentUser currentUser = new CurrentUser();\r\n        currentUser.setUser(user);\r\n        currentUser.setAuthorities(grantedAuthorities);\r\n        return currentUser;\r\n    }\r\n\r\n}\r\n```\r\n\r\n","title":"Error creating bean with name &#39;securityConfig&#39;: Requested bean is currently in creation: Is there an unresolvable circular reference?","body":"<p>Reference taken from here (My code exactly same as this repo)- <a href=\"https://github.com/DamianMielcarek/CRM/tree/master/src/main/java/crm\" rel=\"nofollow noreferrer\">https://github.com/DamianMielcarek/CRM/tree/master/src/main/java/crm</a></p>\n<p>Error</p>\n<pre><code>org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'securityConfig': Requested bean is currently in creation: Is there an unresolvable circular reference?\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.beforeSingletonCreation(DefaultSingletonBeanRegistry.java:355) ~[spring-beans-5.3.18.jar:5.3.18]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:227) ~[spring-beans-5.3.18.jar:5.3.18]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.18.jar:5.3.18]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.18.jar:5.3.18]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:410) ~[spring-beans-5.3.18.jar:5.3.18]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.18.jar:5.3.18]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.18.jar:5.3.18]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.18.jar:5.3.18]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.18.jar:5.3.18]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.18.jar:5.3.18]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.18.jar:5.3.18]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.18.jar:5.3.18]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.18.jar:5.3.18]\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.resolveBeanReference(ConfigurationClassEnhancer.java:362) ~[spring-context-5.3.18.jar:5.3.18]\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:334) ~[spring-context-5.3.18.jar:5.3.18]\n    at com.SecurityConfig$$EnhancerBySpringCGLIB$$4ce77a01.customUserDetailsService(&lt;generated&gt;) ~[classes/:na]\n    at com.SecurityConfig.configureGlobal(SecurityConfig.java:31) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:724) ~[spring-beans-5.3.18.jar:5.3.18]\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119) ~[spring-beans-5.3.18.jar:5.3.18]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399) ~[spring-beans-5.3.18.jar:5.3.18]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431) ~[spring-beans-5.3.18.jar:5.3.18]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619) ~[spring-beans-5.3.18.jar:5.3.18]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.18.jar:5.3.18]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.18.jar:5.3.18]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.18.jar:5.3.18]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.18.jar:5.3.18]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.18.jar:5.3.18]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.18.jar:5.3.18]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.18.jar:5.3.18]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.18.jar:5.3.18]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.6.6.jar:2.6.6]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:740) ~[spring-boot-2.6.6.jar:2.6.6]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:415) ~[spring-boot-2.6.6.jar:2.6.6]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:303) ~[spring-boot-2.6.6.jar:2.6.6]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1312) ~[spring-boot-2.6.6.jar:2.6.6]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1301) ~[spring-boot-2.6.6.jar:2.6.6]\n    at com..BenimcarsApplication.main(BenimcarsApplication.java:16) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-2.6.6.jar:2.6.6]\n</code></pre>\n<p>SecurityConfig.java</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(securedEnabled = true)\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Bean\n    public BCryptPasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    @Bean\n    public SpringDataUserDetailsService customUserDetailsService() {\n        return new SpringDataUserDetailsService();\n    }\n\n    @Autowired\n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\n        auth.userDetailsService(customUserDetailsService()).passwordEncoder(passwordEncoder());\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.authorizeRequests()\n                .antMatchers(&quot;/admin/**&quot;, &quot;/user/delete/**&quot;).hasRole(&quot;ADMIN&quot;)\n                .antMatchers(&quot;/pdf-generator&quot;, &quot;/search/**&quot;, &quot;/customer/**&quot;, &quot;/user/edit/**&quot;, &quot;/user/list&quot;, &quot;/contract/**&quot;).hasAnyRole( &quot;ADMIN&quot;, &quot;USER&quot;, &quot;MANAGER&quot;, &quot;OWNER&quot;)\n                .anyRequest().permitAll()\n                .and()\n                .formLogin().loginPage(&quot;/login&quot;).permitAll()\n                .and()\n                .logout().logoutSuccessUrl(&quot;/&quot;).permitAll()\n                .and()\n                .exceptionHandling().accessDeniedPage(&quot;/403&quot;);\n    }\n\n}\n</code></pre>\n<p>UserService.java</p>\n<pre><code>public interface UserService {\n    User findByUsername(String username);\n    Iterable&lt;User&gt; listAllUsers();\n    User showUser(Long id);\n    void saveUser(User user);\n    void editUser(User user);\n    void deleteUser(User user);\n\n}\n</code></pre>\n<p>UserServiceImpl.java</p>\n<pre><code>@Service\npublic class UserServiceImpl implements UserService {\n\n    private UserRepository userRepository;\n    private RoleRepository roleRepository;\n    private BCryptPasswordEncoder passwordEncoder;\n    private AuthenticationManager authenticationManager;\n    private SpringDataUserDetailsService springDataUserDetailsService;\n\n    @Autowired\n    public void setUserRepository(UserRepository userRepository) {\n        this.userRepository = userRepository;\n    }\n\n    @Autowired\n    public void setRoleRepository(RoleRepository roleRepository) {\n        this.roleRepository = roleRepository;\n    }\n\n    @Autowired\n    public void setPasswordEncoder(BCryptPasswordEncoder passwordEncoder) {\n        this.passwordEncoder = passwordEncoder;\n    }\n\n    @Autowired\n    public void setAuthenticationManager(AuthenticationManager authenticationManager) {\n        this.authenticationManager = authenticationManager;\n    }\n\n    @Autowired\n    public void setSpringDataUserDetailsService(SpringDataUserDetailsService springDataUserDetailsService) {\n        this.springDataUserDetailsService = springDataUserDetailsService;\n    }\n\n    @Override\n    public User findByUsername(String username) {\n        return userRepository.findByUsername(username);\n    }\n\n    @Override\n    public Iterable&lt;User&gt; listAllUsers() {\n        return userRepository.findAllByEnabled(1);\n    }\n\n    @Override\n    public User showUser(Long id) {\n        return userRepository.findOne(id);\n    }\n\n    @Override\n    public void saveUser(User user) {\n        Role userRole = roleRepository.findByName(&quot;ROLE_USER&quot;);\n        user.setRole(userRole);\n        user.setEnabled(1);\n        String password = user.getPassword();\n        user.setPassword(passwordEncoder.encode(password));\n        userRepository.save(user);\n        if (user.getId().equals(1L)) {\n            userRole = roleRepository.findByName(&quot;ROLE_ADMIN&quot;);\n            user.setRole(userRole);\n            userRepository.save(user);\n        }\n        UserDetails userDetails = springDataUserDetailsService.loadUserByUsername(user.getUsername());\n        UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken =\n                new UsernamePasswordAuthenticationToken(userDetails, password, userDetails.getAuthorities());\n        authenticationManager.authenticate(usernamePasswordAuthenticationToken);\n        SecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\n    }\n\n    @Override\n    public void editUser(User user) {\n        String password = user.getPassword();\n        user.setPassword(passwordEncoder.encode(password));\n        Role userRole = roleRepository.findByName(&quot;ROLE_USER&quot;);\n        try {\n            userRole = roleRepository.findById(user.getRole().getId()).orElse(null);;\n        } catch (NullPointerException e) {\n            userRole = roleRepository.findByName(&quot;ROLE_USER&quot;);\n        } finally {\n            user.setRole(userRole);\n            user.setEnabled(1);\n            userRepository.save(user);\n        }\n    }\n\n    @Override\n    public void deleteUser(User user) {\n        user.setEnabled(0);\n        user.setPassword(null);\n        userRepository.save(user);\n    }\n\n}\n</code></pre>\n<p>SpringDataUserDetailsService.java</p>\n<pre><code>@Service\npublic class SpringDataUserDetailsService implements UserDetailsService {\n\n    @Autowired\n    UserService userService;\n\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        User user = userService.findByUsername(username);\n        if (user == null) {\n            throw new UsernameNotFoundException(username);\n        }\n        String role = user.getRole().getName();\n        Set&lt;GrantedAuthority&gt; grantedAuthorities = new HashSet&lt;&gt;();\n        grantedAuthorities.add(new SimpleGrantedAuthority(role));\n        CurrentUser currentUser = new CurrentUser();\n        currentUser.setUser(user);\n        currentUser.setAuthorities(grantedAuthorities);\n        return currentUser;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","junit"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":1,"creation_date":1649675559,"post_id":71826782,"comment_id":126928235,"body_markdown":"Chances are it&#39;s not a Junit annotation. Any decent IDE will tell you what package that annotation comes from, which should help you narrow your search down.","body":"Chances are it&#39;s not a Junit annotation. Any decent IDE will tell you what package that annotation comes from, which should help you narrow your search down."},{"owner":{"account_id":6475519,"reputation":4496,"user_id":5014221,"accept_rate":71,"display_name":"Ashish Patil"},"score":1,"creation_date":1649677330,"post_id":71826782,"comment_id":126928818,"body_markdown":"May be this junit class has some import which will give you hint what this `Score(1)` is all about?","body":"May be this junit class has some import which will give you hint what this <code>Score(1)</code> is all about?"}],"owner":{"account_id":23236348,"reputation":57,"user_id":18618821,"display_name":"Arron Starmer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649675404,"creation_date":1649675404,"question_id":71826782,"body_markdown":"Some legacy code has @SCORE(1) on top of a JUNIT test case and I&#39;m not sure what it means and both Google and the API aren&#39;t turning much up","title":"What does @SCORE(1) mean in JUNIT?","body":"<p>Some legacy code has @SCORE(1) on top of a JUNIT test case and I'm not sure what it means and both Google and the API aren't turning much up</p>\n"},{"tags":["java","spring","ldap"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1649680105,"post_id":71826763,"comment_id":126929900,"body_markdown":"Write a proper spring boot expression.","body":"Write a proper spring boot expression."},{"owner":{"account_id":22712634,"reputation":334,"user_id":16878379,"display_name":"Louis Chopard"},"score":0,"creation_date":1649681278,"post_id":71826763,"comment_id":126930430,"body_markdown":"I don&#39;t see what you mean. Write a proper spring boot expression for what? The requests ? The connections?","body":"I don&#39;t see what you mean. Write a proper spring boot expression for what? The requests ? The connections?"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1649681404,"post_id":71826763,"comment_id":126930494,"body_markdown":"Sorry that should have been spring security not sprign boot. You are using Spring Security, then write an expression that one needs to be authenticated to access your application.","body":"Sorry that should have been spring security not sprign boot. You are using Spring Security, then write an expression that one needs to be authenticated to access your application."},{"owner":{"account_id":22712634,"reputation":334,"user_id":16878379,"display_name":"Louis Chopard"},"score":0,"creation_date":1649681620,"post_id":71826763,"comment_id":126930591,"body_markdown":"Can you give me any example please?","body":"Can you give me any example please?"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1649681883,"post_id":71826763,"comment_id":126930705,"body_markdown":"There are plenty examples in the reference guide or other spring security related questions. That is the `http.authorizeRequest` stuff that should be in your configuration.","body":"There are plenty examples in the reference guide or other spring security related questions. That is the <code>http.authorizeRequest</code> stuff that should be in your configuration."},{"owner":{"account_id":22712634,"reputation":334,"user_id":16878379,"display_name":"Louis Chopard"},"score":0,"creation_date":1649682172,"post_id":71826763,"comment_id":126930833,"body_markdown":"Yes, sorry. I have this for the moment `http.csrf().disable().authorizeRequests().antMatchers(&quot;/&quot;).permitAll()` (no permissions). I don&#39;t know how to add authenticated user (with my AD authentication). This is the part that gives me a bit of a problem. I don&#39;t know how to go about it.","body":"Yes, sorry. I have this for the moment <code>http.csrf().disable().authorizeRequests().antMatchers(&quot;&#47;&quot;).p&zwnj;&#8203;ermitAll()</code> (no permissions). I don&#39;t know how to add authenticated user (with my AD authentication). This is the part that gives me a bit of a problem. I don&#39;t know how to go about it."},{"owner":{"account_id":22712634,"reputation":334,"user_id":16878379,"display_name":"Louis Chopard"},"score":0,"creation_date":1649682306,"post_id":71826763,"comment_id":126930889,"body_markdown":"I didn&#39;t find any documentation that explains clearly how `http.authorizeRequest` works and how to use each method.","body":"I didn&#39;t find any documentation that explains clearly how <code>http.authorizeRequest</code> works and how to use each method."},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1649682477,"post_id":71826763,"comment_id":126930970,"body_markdown":"`/` is only ther oot URL nothing underneath. add `anyRequest().authenticated()` I would also strongly suggest a read of the Spring Security documentation","body":"<code>&#47;</code> is only ther oot URL nothing underneath. add <code>anyRequest().authenticated()</code> I would also strongly suggest a read of the Spring Security documentation"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1649682638,"post_id":71826763,"comment_id":126931055,"body_markdown":"The [Spring Security Documentation](https://docs.spring.io/spring-security/reference/servlet/authorization/authorize-http-requests.html) explains this fairly well. There is also [an overview of all expressions](https://docs.spring.io/spring-security/reference/servlet/authorization/expression-based.html) you can use.","body":"The <a href=\"https://docs.spring.io/spring-security/reference/servlet/authorization/authorize-http-requests.html\" rel=\"nofollow noreferrer\">Spring Security Documentation</a> explains this fairly well. There is also <a href=\"https://docs.spring.io/spring-security/reference/servlet/authorization/expression-based.html\" rel=\"nofollow noreferrer\">an overview of all expressions</a> you can use."},{"owner":{"account_id":22712634,"reputation":334,"user_id":16878379,"display_name":"Louis Chopard"},"score":0,"creation_date":1649682747,"post_id":71826763,"comment_id":126931094,"body_markdown":"I tried this. The problem is that I don&#39;t know how to authenticated my user. I used to use this `http.authorizeRequests().anyRequest().fullyAuthenticated() .and() .formLogin()`. But it opens me. I want the form login the be in frontend side (be authenticated with a request) . I&#39;ll check the documentation, thank you.","body":"I tried this. The problem is that I don&#39;t know how to authenticated my user. I used to use this <code>http.authorizeRequests().anyRequest().fullyAuthenticated() .and() .formLogin()</code>. But it opens me. I want the form login the be in frontend side (be authenticated with a request) . I&#39;ll check the documentation, thank you."},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1649683253,"post_id":71826763,"comment_id":126931305,"body_markdown":"You don&#39;t need the `formLogin`... That is what you get from copy / pasting code.","body":"You don&#39;t need the <code>formLogin</code>... That is what you get from copy / pasting code."},{"owner":{"account_id":22712634,"reputation":334,"user_id":16878379,"display_name":"Louis Chopard"},"score":0,"creation_date":1649683409,"post_id":71826763,"comment_id":126931381,"body_markdown":"Yes I know. It was just easier for me for testing. But I&#39;ll check your doc. Thank you.","body":"Yes I know. It was just easier for me for testing. But I&#39;ll check your doc. Thank you."}],"owner":{"account_id":22712634,"reputation":334,"user_id":16878379,"display_name":"Louis Chopard"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1649675345,"creation_date":1649675345,"question_id":71826763,"body_markdown":"I have a problem for a backend solution developpement. I need someone to guide me.\r\n\r\nI&#39;m developping a backend solution with SpringBoot.\r\n\r\nMy backend should :\r\n\r\n 1. Connect to an Active Directory\r\n 2. Use a token system for the security part\r\n 3. Give special access for each request (based on AD group) \r\n\r\nAfter a lot of tests and research, I already have this :\r\n\r\n**Connect to an Active Directory**\r\n\r\nFor the connection to AD part, I did this :\r\n\r\nInside a class that extends `WebSecurityConfigurerAdapter`\r\n\r\n```\r\n    @Override\r\n    public void configure(AuthenticationManagerBuilder auth) {\r\n        ActiveDirectoryLdapAuthenticationProvider adProvider\r\n                = new ActiveDirectoryLdapAuthenticationProvider(&quot;domain.com&quot;, &quot;ldap&quot;, &quot;ou,dc&quot;);\r\n        adProvider.setConvertSubErrorCodesToExceptions(true);\r\n        adProvider.setUseAuthenticationRequestCredentials(true);\r\n        adProvider.setUserDetailsContextMapper(userDetailsContextMapper());\r\n        auth.authenticationProvider(adProvider);\r\n    }\r\n```\r\n\r\n`userDetailsContextMapper()` simply maps the info to an user class that contains the `username`, the `lastname` and the list `memberOf` of the user (AD groups).\r\n\r\n**Using token** \r\n\r\nI use this method for the token. It works too.\r\n\r\n```\r\n     public SignedJWT getToken(String username) {\r\n        JWSSigner signer = null;\r\n\r\n        SecureRandom random = new SecureRandom();\r\n        byte[] sharedSecret = new byte[32];\r\n        random.nextBytes(sharedSecret);\r\n\r\n        signer = new MACSigner(sharedSecret);\r\n\r\n        JWTClaimsSet claimsSet = new JWTClaimsSet.Builder()\r\n                .subject(username)\r\n                .issuer(&quot;domain&quot;)\r\n                .expirationTime(new Date(new Date().getTime() + 60 * 1000))\r\n                .build();    \r\n        SignedJWT signedJWT = new SignedJWT(new JWSHeader(JWSAlgorithm.HS256), claimsSet);\r\n        signedJWT.sign(signer);   \r\n        String serializedToken = signedJWT.serialize();\r\n\r\n        return signedJWT;\r\n               \r\n   }\r\n```\r\n\r\n**Access per request**\r\n\r\n\r\nFor the third part I want to give access to a specific request only for a given AD group.\r\n\r\nImagine I have two correctly mapped request :\r\n\r\n`domain.com/sales/2022/all`  : Return all the sales values for the year 2022\r\n`domain.com/IT/inventory/all`: Return all the IT inventory\r\n\r\nI want only the people that are from the group `IT` that can get a result from the IT&#39;s request and for the sale&#39;s request, only someone who is a member of the groupe `sales`.\r\n\r\nBut first of all, I want only people who are authenticated and have a valid token who can call a request.\r\n\r\nI searched and tested different solutions on the internet but I did not find anything compatible with my two previous method.\r\n\r\nCan you help me ? I&#39;m not specially looking for a solution, a link to a good documentation or some example are enough for me.","title":"What is the best method to secure requests based on an Active Directory authentication solution","body":"<p>I have a problem for a backend solution developpement. I need someone to guide me.</p>\n<p>I'm developping a backend solution with SpringBoot.</p>\n<p>My backend should :</p>\n<ol>\n<li>Connect to an Active Directory</li>\n<li>Use a token system for the security part</li>\n<li>Give special access for each request (based on AD group)</li>\n</ol>\n<p>After a lot of tests and research, I already have this :</p>\n<p><strong>Connect to an Active Directory</strong></p>\n<p>For the connection to AD part, I did this :</p>\n<p>Inside a class that extends <code>WebSecurityConfigurerAdapter</code></p>\n<pre><code>    @Override\n    public void configure(AuthenticationManagerBuilder auth) {\n        ActiveDirectoryLdapAuthenticationProvider adProvider\n                = new ActiveDirectoryLdapAuthenticationProvider(&quot;domain.com&quot;, &quot;ldap&quot;, &quot;ou,dc&quot;);\n        adProvider.setConvertSubErrorCodesToExceptions(true);\n        adProvider.setUseAuthenticationRequestCredentials(true);\n        adProvider.setUserDetailsContextMapper(userDetailsContextMapper());\n        auth.authenticationProvider(adProvider);\n    }\n</code></pre>\n<p><code>userDetailsContextMapper()</code> simply maps the info to an user class that contains the <code>username</code>, the <code>lastname</code> and the list <code>memberOf</code> of the user (AD groups).</p>\n<p><strong>Using token</strong></p>\n<p>I use this method for the token. It works too.</p>\n<pre><code>     public SignedJWT getToken(String username) {\n        JWSSigner signer = null;\n\n        SecureRandom random = new SecureRandom();\n        byte[] sharedSecret = new byte[32];\n        random.nextBytes(sharedSecret);\n\n        signer = new MACSigner(sharedSecret);\n\n        JWTClaimsSet claimsSet = new JWTClaimsSet.Builder()\n                .subject(username)\n                .issuer(&quot;domain&quot;)\n                .expirationTime(new Date(new Date().getTime() + 60 * 1000))\n                .build();    \n        SignedJWT signedJWT = new SignedJWT(new JWSHeader(JWSAlgorithm.HS256), claimsSet);\n        signedJWT.sign(signer);   \n        String serializedToken = signedJWT.serialize();\n\n        return signedJWT;\n               \n   }\n</code></pre>\n<p><strong>Access per request</strong></p>\n<p>For the third part I want to give access to a specific request only for a given AD group.</p>\n<p>Imagine I have two correctly mapped request :</p>\n<p><code>domain.com/sales/2022/all</code>  : Return all the sales values for the year 2022\n<code>domain.com/IT/inventory/all</code>: Return all the IT inventory</p>\n<p>I want only the people that are from the group <code>IT</code> that can get a result from the IT's request and for the sale's request, only someone who is a member of the groupe <code>sales</code>.</p>\n<p>But first of all, I want only people who are authenticated and have a valid token who can call a request.</p>\n<p>I searched and tested different solutions on the internet but I did not find anything compatible with my two previous method.</p>\n<p>Can you help me ? I'm not specially looking for a solution, a link to a good documentation or some example are enough for me.</p>\n"},{"tags":["java","spring","jpa","hibernate-search"],"comments":[{"owner":{"account_id":35487,"reputation":64776,"user_id":100516,"accept_rate":69,"display_name":"Roman"},"score":0,"creation_date":1261394824,"post_id":1939540,"comment_id":1849246,"body_markdown":"Are you sure that your DB supports full text search?","body":"Are you sure that your DB supports full text search?"},{"owner":{"account_id":82963,"reputation":527,"user_id":232912,"accept_rate":33,"display_name":"Jeroen"},"score":0,"creation_date":1261406542,"post_id":1939540,"comment_id":1850263,"body_markdown":"correction: the domain objects are not correctly indexed.","body":"correction: the domain objects are not correctly indexed."},{"owner":{"account_id":11089,"reputation":400030,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"score":0,"creation_date":1261570496,"post_id":1939540,"comment_id":1864015,"body_markdown":"@Roman: the whole point of Hibernate Search is that it *doesn&#39;t* use the database&#39;s full-text-search capability, it&#39;s done in the application layer.","body":"@Roman: the whole point of Hibernate Search is that it <i>doesn&#39;t</i> use the database&#39;s full-text-search capability, it&#39;s done in the application layer."}],"answers":[{"tags":[],"owner":{"account_id":82963,"reputation":527,"user_id":232912,"accept_rate":33,"display_name":"Jeroen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1261407929,"creation_date":1261407929,"answer_id":1940614,"question_id":1939540,"body_markdown":"Finally managed getting it to work.. apparently the objects are not automatically indexed.. or not committed at least. My implementation now looks as follows:\r\n\r\n    public List&lt;Role&gt; searchRoles(String keyword) {\r\n            // Index domain object (works)\r\n            EntityManager manager = factory.createEntityManager();\r\n            FullTextEntityManager ftManager = Search.getFullTextEntityManager(manager);\r\n            ftManager.getTransaction().begin();\r\n    \r\n            List&lt;Role&gt; roles = ftManager.createQuery(&quot;select e from &quot; + Role.class.getName() + &quot; e&quot;).getResultList();\r\n            for (Role role : roles) {\r\n                ftManager.index(role);\r\n            }\r\n            ftManager.getTransaction().commit();\r\n    \r\n            // Retrieve element from search (works)\r\n            TermQuery tquery = new TermQuery(new Term(&quot;authority&quot;, keyword));\r\n            FullTextQuery query = ftManager.createFullTextQuery(tquery, Role.class);\r\n            return query.getResultList();\r\n    }\r\n\r\nBy performing the index and getTransactionCommit functions the indexes are correctly stored in my indexes folder. This implementation, however, is pretty unnatural as I make an alternative entity manager for text searching. Is there a &quot;cleaner&quot; way to index( and commit ) records using the @Transactional annotations???","title":"hibernate search + spring3 + jpa","body":"<p>Finally managed getting it to work.. apparently the objects are not automatically indexed.. or not committed at least. My implementation now looks as follows:</p>\n\n<pre><code>public List&lt;Role&gt; searchRoles(String keyword) {\n        // Index domain object (works)\n        EntityManager manager = factory.createEntityManager();\n        FullTextEntityManager ftManager = Search.getFullTextEntityManager(manager);\n        ftManager.getTransaction().begin();\n\n        List&lt;Role&gt; roles = ftManager.createQuery(\"select e from \" + Role.class.getName() + \" e\").getResultList();\n        for (Role role : roles) {\n            ftManager.index(role);\n        }\n        ftManager.getTransaction().commit();\n\n        // Retrieve element from search (works)\n        TermQuery tquery = new TermQuery(new Term(\"authority\", keyword));\n        FullTextQuery query = ftManager.createFullTextQuery(tquery, Role.class);\n        return query.getResultList();\n}\n</code></pre>\n\n<p>By performing the index and getTransactionCommit functions the indexes are correctly stored in my indexes folder. This implementation, however, is pretty unnatural as I make an alternative entity manager for text searching. Is there a \"cleaner\" way to index( and commit ) records using the @Transactional annotations???</p>\n"},{"tags":[],"owner":{"account_id":68960,"reputation":910,"user_id":200911,"display_name":"Emmanuel Bernard"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1261478575,"creation_date":1261478575,"answer_id":1945546,"question_id":1939540,"body_markdown":"In theory it all works but there might be a few problems:\r\n\r\n - did you initially index your existing objects? While Hibernate Search index all new changes, it is not aware of the pre-existing objects and thus you need to initially index them (using ftem#index())\r\n - by default, HSearch hooks into either Hibernate or JTA transactions to listen to before and after transaction events. Maybe your Spring tx configuration bypasses that and thus HSearch is not triggered and thus cannot index. The best approach really is to use a real JTA transaction manager and avoid these facades.\r\n - if you&#39;re talking about the initial indexing (using index()), you can alternatively use #flushToIndexes() to force the indexing even if the tx is not committed.\r\n - last but not least, your last piece of code will likely throw an OutOfMemoryException because you load all the objects in memory before indexing them. Check the Hibernate Search reference documentation on how to properly index loads of objects in batch. Hibernate Search in Action by Manning (I&#39;m the author) also goes deeper into all of this.","title":"hibernate search + spring3 + jpa","body":"<p>In theory it all works but there might be a few problems:</p>\n\n<ul>\n<li>did you initially index your existing objects? While Hibernate Search index all new changes, it is not aware of the pre-existing objects and thus you need to initially index them (using ftem#index())</li>\n<li>by default, HSearch hooks into either Hibernate or JTA transactions to listen to before and after transaction events. Maybe your Spring tx configuration bypasses that and thus HSearch is not triggered and thus cannot index. The best approach really is to use a real JTA transaction manager and avoid these facades.</li>\n<li>if you're talking about the initial indexing (using index()), you can alternatively use #flushToIndexes() to force the indexing even if the tx is not committed.</li>\n<li>last but not least, your last piece of code will likely throw an OutOfMemoryException because you load all the objects in memory before indexing them. Check the Hibernate Search reference documentation on how to properly index loads of objects in batch. Hibernate Search in Action by Manning (I'm the author) also goes deeper into all of this.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":567343,"reputation":21,"user_id":205092,"display_name":"Jeroen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1261570419,"creation_date":1261570419,"answer_id":1952463,"question_id":1939540,"body_markdown":"Eventually my problem was solved by attaching the following property:\r\nhibernate.search.worker.batch_size=1\r\n\r\nNot only can I now properly query, but the indexes are also automatically updated whenever I persist my domain object. The only problem I&#39;m having now is that the data inserted via my import.sql are not automatically indexed. Is there some kind of &quot;magic&quot; hibernate.search property available for this problem or should I index them manually?","title":"hibernate search + spring3 + jpa","body":"<p>Eventually my problem was solved by attaching the following property:\nhibernate.search.worker.batch_size=1</p>\n\n<p>Not only can I now properly query, but the indexes are also automatically updated whenever I persist my domain object. The only problem I'm having now is that the data inserted via my import.sql are not automatically indexed. Is there some kind of \"magic\" hibernate.search property available for this problem or should I index them manually?</p>\n"}],"owner":{"account_id":82963,"reputation":527,"user_id":232912,"accept_rate":33,"display_name":"Jeroen"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4419,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1649675344,"creation_date":1261394429,"question_id":1939540,"body_markdown":"I&#39;m trying to integrate hibernate search in my project. My models are indexed, but for some reason my search queries do not return any results. I&#39;ve been trying to solve this issue for a few hours now, but nothing I do seems to work.\r\n\r\nDomain object:\r\n\r\n    @Entity\r\n    @Table(name = &quot;roles&quot;)\r\n    @Indexed\r\n    public class Role implements GrantedAuthority {\r\n    private static final long serialVersionUID = 8227887773948216849L;\r\n\r\n        @Id @GeneratedValue\r\n        @DocumentId\r\n        private Long ID;\r\n        \r\n        @Column(name = &quot;authority&quot;, nullable = false)\r\n        @Field(index = Index.TOKENIZED, store = Store.YES)\r\n        private String authority;\r\n        \r\n        @ManyToMany\r\n        @JoinTable(name = &quot;user_roles&quot;, joinColumns = { @JoinColumn(name = &quot;role_id&quot;) }, inverseJoinColumns = { @JoinColumn(name = &quot;username&quot;) })\r\n        @ContainedIn\r\n        private List&lt;User&gt; users;\r\n        \r\n        ...\r\n    \r\n    }\r\n\r\nDAO:\r\n\r\n    public abstract class GenericPersistenceDao&lt;T&gt; implements IGenericDao&lt;T&gt; {\r\n    \r\n    @PersistenceContext\r\n    private EntityManager entityManager;\r\n    \r\n    ...\r\n    \r\n        @Override\r\n        public FullTextEntityManager getSearchManager() {\r\n            return Search.getFullTextEntityManager(entityManager);\r\n        }\r\n    \r\n    }\r\n\r\nService:\r\n\r\n    @Service(value = &quot;roleService&quot;)\r\n    public class RoleServiceImpl implements RoleService {\r\n    \r\n        @Autowired\r\n        private RoleDao roleDAO;\r\n    \r\n        ...\r\n    \r\n        @Override\r\n        @SuppressWarnings(&quot;unchecked&quot;)\r\n        public List&lt;Role&gt; searchRoles(String keyword) throws ParseException {\r\n            FullTextEntityManager manager = roleDAO.getSearchManager();\r\n            TermQuery tquery = new TermQuery(new Term(&quot;authority&quot;, keyword));\r\n            FullTextQuery query = manager.createFullTextQuery(tquery, Role.class);\r\n            return query.getResultList();\r\n        }\r\n    \r\n    }\r\n\r\nTest:\r\n\r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n    @ContextConfiguration(locations = { &quot;classpath:applicationContext.xml&quot; })\r\n    @Transactional\r\n    public class TestRoleService extends Assert {\r\n    \r\n        @Autowired\r\n        private RoleService roleService;\r\n    \r\n        @Test\r\n        public void testSearchRoles() {\r\n           roleService.saveRole(/* role with authority=&quot;test&quot; */);\r\n           List&lt;Role&gt; roles = roleService.searchRoles(&quot;test&quot;);\r\n           assertEquals(1, roles.size()); // returns 0\r\n        }\r\n    \r\n    }\r\n\r\nConfigurations\r\n\r\n    &lt;persistence-unit name=&quot;hibernatePersistence&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\r\n            &lt;provider&gt;org.hibernate.ejb.HibernatePersistence&lt;/provider&gt;\r\n            &lt;properties&gt;\r\n    \t\t\t&lt;property name=&quot;hibernate.search.default.directory_provider&quot; value=&quot;org.hibernate.search.store.FSDirectoryProvider&quot; /&gt;\r\n    \t\t\t&lt;property name=&quot;hibernate.search.default.indexBase&quot; value=&quot;indexes&quot; /&gt;\r\n            &lt;/properties&gt;\r\n    &lt;/persistence-unit&gt;\r\n\r\n    &lt;!-- Entity manager --&gt;\r\n    &lt;bean id=&quot;entityManagerFactory&quot; class=&quot;org.springframework.orm.jpa.LocalEntityManagerFactoryBean&quot;&gt;\r\n        &lt;property name=&quot;persistenceUnitName&quot; value=&quot;hibernatePersistence&quot; /&gt;\r\n    &lt;/bean&gt;\r\n    \r\n    &lt;!-- Transaction manager --&gt;\r\n    &lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.orm.jpa.JpaTransactionManager&quot;&gt;\r\n        &lt;property name=&quot;entityManagerFactory&quot; ref=&quot;entityManagerFactory&quot; /&gt;\r\n    &lt;/bean&gt;\r\n    \r\n    &lt;!-- Enable the configuration of transaction behavior based on annotations --&gt;\r\n    &lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot; /&gt;\r\n\r\n    &lt;context:component-scan base-package=&quot;org.myproject&quot; /&gt;\r\n\r\nThe database is in fact filled with a role matching that authority field value. The entity manager is valid as all my regular CRUD tests succeed. Meaning the error is entirely hibernate search(3.1.1.GA) related, but where does it go wrong?","title":"hibernate search + spring3 + jpa","body":"<p>I'm trying to integrate hibernate search in my project. My models are indexed, but for some reason my search queries do not return any results. I've been trying to solve this issue for a few hours now, but nothing I do seems to work.</p>\n\n<p>Domain object:</p>\n\n<pre><code>@Entity\n@Table(name = \"roles\")\n@Indexed\npublic class Role implements GrantedAuthority {\nprivate static final long serialVersionUID = 8227887773948216849L;\n\n    @Id @GeneratedValue\n    @DocumentId\n    private Long ID;\n\n    @Column(name = \"authority\", nullable = false)\n    @Field(index = Index.TOKENIZED, store = Store.YES)\n    private String authority;\n\n    @ManyToMany\n    @JoinTable(name = \"user_roles\", joinColumns = { @JoinColumn(name = \"role_id\") }, inverseJoinColumns = { @JoinColumn(name = \"username\") })\n    @ContainedIn\n    private List&lt;User&gt; users;\n\n    ...\n\n}\n</code></pre>\n\n<p>DAO:</p>\n\n<pre><code>public abstract class GenericPersistenceDao&lt;T&gt; implements IGenericDao&lt;T&gt; {\n\n@PersistenceContext\nprivate EntityManager entityManager;\n\n...\n\n    @Override\n    public FullTextEntityManager getSearchManager() {\n        return Search.getFullTextEntityManager(entityManager);\n    }\n\n}\n</code></pre>\n\n<p>Service:</p>\n\n<pre><code>@Service(value = \"roleService\")\npublic class RoleServiceImpl implements RoleService {\n\n    @Autowired\n    private RoleDao roleDAO;\n\n    ...\n\n    @Override\n    @SuppressWarnings(\"unchecked\")\n    public List&lt;Role&gt; searchRoles(String keyword) throws ParseException {\n        FullTextEntityManager manager = roleDAO.getSearchManager();\n        TermQuery tquery = new TermQuery(new Term(\"authority\", keyword));\n        FullTextQuery query = manager.createFullTextQuery(tquery, Role.class);\n        return query.getResultList();\n    }\n\n}\n</code></pre>\n\n<p>Test:</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations = { \"classpath:applicationContext.xml\" })\n@Transactional\npublic class TestRoleService extends Assert {\n\n    @Autowired\n    private RoleService roleService;\n\n    @Test\n    public void testSearchRoles() {\n       roleService.saveRole(/* role with authority=\"test\" */);\n       List&lt;Role&gt; roles = roleService.searchRoles(\"test\");\n       assertEquals(1, roles.size()); // returns 0\n    }\n\n}\n</code></pre>\n\n<p>Configurations</p>\n\n<pre><code>&lt;persistence-unit name=\"hibernatePersistence\" transaction-type=\"RESOURCE_LOCAL\"&gt;\n        &lt;provider&gt;org.hibernate.ejb.HibernatePersistence&lt;/provider&gt;\n        &lt;properties&gt;\n            &lt;property name=\"hibernate.search.default.directory_provider\" value=\"org.hibernate.search.store.FSDirectoryProvider\" /&gt;\n            &lt;property name=\"hibernate.search.default.indexBase\" value=\"indexes\" /&gt;\n        &lt;/properties&gt;\n&lt;/persistence-unit&gt;\n\n&lt;!-- Entity manager --&gt;\n&lt;bean id=\"entityManagerFactory\" class=\"org.springframework.orm.jpa.LocalEntityManagerFactoryBean\"&gt;\n    &lt;property name=\"persistenceUnitName\" value=\"hibernatePersistence\" /&gt;\n&lt;/bean&gt;\n\n&lt;!-- Transaction manager --&gt;\n&lt;bean id=\"transactionManager\" class=\"org.springframework.orm.jpa.JpaTransactionManager\"&gt;\n    &lt;property name=\"entityManagerFactory\" ref=\"entityManagerFactory\" /&gt;\n&lt;/bean&gt;\n\n&lt;!-- Enable the configuration of transaction behavior based on annotations --&gt;\n&lt;tx:annotation-driven transaction-manager=\"transactionManager\" /&gt;\n\n&lt;context:component-scan base-package=\"org.myproject\" /&gt;\n</code></pre>\n\n<p>The database is in fact filled with a role matching that authority field value. The entity manager is valid as all my regular CRUD tests succeed. Meaning the error is entirely hibernate search(3.1.1.GA) related, but where does it go wrong?</p>\n"},{"tags":["java","oauth-2.0"],"answers":[{"tags":[],"owner":{"account_id":12855846,"reputation":283,"user_id":9299215,"display_name":"Mohit_Kalra"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1548678026,"creation_date":1519038758,"answer_id":48864892,"question_id":48821666,"body_markdown":"As you are using authorization code flow, the client requires a user agent (i.e browser or mobile app) to get the authorization code from the authorization server.\r\n\r\nThe whole purpose of using authorization code is that it can be passed via the user&#39;s web browser (user agent) instead of passing the access tokens directly via the web browser (user agent) which is not desired. Using authorization code,the Client then can directly retrieve an Access Token from the authorization server. \r\n\r\nSo the user agent is required to get the authorization code and act as an intermediary between client and authorization server.\r\n\r\nIf you do not require a browser then authorization code flow may not the correct choice. OAuth 2.0 supports several different grants i.e ways of retrieving an Access Token. Deciding which one is suited for your case depends mostly on your Client&#39;s type.\r\n\r\nThis might help you in deciding which flow to use\r\nhttps://auth0.com/docs/api-auth/which-oauth-flow-to-use","title":"Is it possible to get authorization_code in OAuth 2.0 without web browser in Java?","body":"<p>As you are using authorization code flow, the client requires a user agent (i.e browser or mobile app) to get the authorization code from the authorization server.</p>\n\n<p>The whole purpose of using authorization code is that it can be passed via the user's web browser (user agent) instead of passing the access tokens directly via the web browser (user agent) which is not desired. Using authorization code,the Client then can directly retrieve an Access Token from the authorization server. </p>\n\n<p>So the user agent is required to get the authorization code and act as an intermediary between client and authorization server.</p>\n\n<p>If you do not require a browser then authorization code flow may not the correct choice. OAuth 2.0 supports several different grants i.e ways of retrieving an Access Token. Deciding which one is suited for your case depends mostly on your Client's type.</p>\n\n<p>This might help you in deciding which flow to use\n<a href=\"https://auth0.com/docs/api-auth/which-oauth-flow-to-use\" rel=\"nofollow noreferrer\">https://auth0.com/docs/api-auth/which-oauth-flow-to-use</a></p>\n"},{"tags":[],"owner":{"account_id":6160013,"reputation":111,"user_id":4801932,"display_name":"Marko"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1649675175,"creation_date":1649675175,"answer_id":71826727,"question_id":48821666,"body_markdown":"You should use client credentials to obtain token without browser or any client. But if you need to use user credentials to get access token and id token of the user without browser or mobile app you need to implement you own client which will do the necessary logic for you and fetch the token for you. I already did it in java for the testing purpose. I don&#39;t know why you need to do it but you can implement your own client in almost any programming language . But in case you will decide to go this way you have to handle lot of things.\r\n\r\n 1. I expect your authorization server requires Proof-Key for Code\r\n    Exchange (PKCE) - so first of all before you start to communication\r\n    with server you have to create code verifier and code challenge\r\n    (google can help you with that :) in java it is quite simple)\r\n 2. Then you should start communication with server sending get request to url which ends with &#39;auth&#39; you should send query params as: response_type (which is &#39;authorization_code&#39; in your case), redirect_uri, client_id, code_verifier, code_challenge, scope, code_challenge_method (probably &#39;S256&#39;)\r\n 3. Then you receive I think two redirects from server so it is better to have some client in java which will automatically call those redirects. I used apache http client for my implementation. It has lot of features.\r\n 4. After successful redirect server will return login page to your client. It depends on authorization server but in this page you should put the data as username and password and submit the page. I have simply parsed the returned page and get the url for user authentication from it and simply make post request to that url with user credentials data sent in encoded form entity. In apache http client you will have all cookies from previous communication set (until you close the client) since apache http client automatically set all cookies returned in previous communication from server.\r\n 5. After make authentication request server will send you two redirects and you can store those redirects int http client context which you will provide for http client when you call authentication url.\r\n 6. In the last redirect there will be query parameter sent be server named &quot;CODE&quot; this is really important for you since you will use it to get token from the server\r\n 7. And finally you have to make one last post request to authorization server with url ended as token. So make a post request with GRANT_TYPE, REDIRECT_URI, CODE (you received in previous redirect), CLIENT_ID, CODE_VERIFIER (you have generated at the beginning);\r\n 8. Then authorization server will send you token and that&#39;s all\r\n\r\n","title":"Is it possible to get authorization_code in OAuth 2.0 without web browser in Java?","body":"<p>You should use client credentials to obtain token without browser or any client. But if you need to use user credentials to get access token and id token of the user without browser or mobile app you need to implement you own client which will do the necessary logic for you and fetch the token for you. I already did it in java for the testing purpose. I don't know why you need to do it but you can implement your own client in almost any programming language . But in case you will decide to go this way you have to handle lot of things.</p>\n<ol>\n<li>I expect your authorization server requires Proof-Key for Code\nExchange (PKCE) - so first of all before you start to communication\nwith server you have to create code verifier and code challenge\n(google can help you with that :) in java it is quite simple)</li>\n<li>Then you should start communication with server sending get request to url which ends with 'auth' you should send query params as: response_type (which is 'authorization_code' in your case), redirect_uri, client_id, code_verifier, code_challenge, scope, code_challenge_method (probably 'S256')</li>\n<li>Then you receive I think two redirects from server so it is better to have some client in java which will automatically call those redirects. I used apache http client for my implementation. It has lot of features.</li>\n<li>After successful redirect server will return login page to your client. It depends on authorization server but in this page you should put the data as username and password and submit the page. I have simply parsed the returned page and get the url for user authentication from it and simply make post request to that url with user credentials data sent in encoded form entity. In apache http client you will have all cookies from previous communication set (until you close the client) since apache http client automatically set all cookies returned in previous communication from server.</li>\n<li>After make authentication request server will send you two redirects and you can store those redirects int http client context which you will provide for http client when you call authentication url.</li>\n<li>In the last redirect there will be query parameter sent be server named &quot;CODE&quot; this is really important for you since you will use it to get token from the server</li>\n<li>And finally you have to make one last post request to authorization server with url ended as token. So make a post request with GRANT_TYPE, REDIRECT_URI, CODE (you received in previous redirect), CLIENT_ID, CODE_VERIFIER (you have generated at the beginning);</li>\n<li>Then authorization server will send you token and that's all</li>\n</ol>\n"}],"owner":{"account_id":6047683,"reputation":397,"user_id":7453591,"accept_rate":43,"display_name":"–ò–ª—å—è –ë–µ–ª–µ–π—á–µ–≤"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10865,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":48864892,"answer_count":2,"score":9,"last_activity_date":1649675175,"creation_date":1518764762,"question_id":48821666,"body_markdown":"As I understand, in authorization code flow we need to get authorization code and use it to get token after. We can get this code only when user confirms specified access. After that browser redirects us to redirect_uri and response will contain authorization code as parameter. So, the question: is it possible to get this authorization code without browser or any self made UI? Can we get it in application after correct request to, for example `https://mysite.tuz/authorize` ?","title":"Is it possible to get authorization_code in OAuth 2.0 without web browser in Java?","body":"<p>As I understand, in authorization code flow we need to get authorization code and use it to get token after. We can get this code only when user confirms specified access. After that browser redirects us to redirect_uri and response will contain authorization code as parameter. So, the question: is it possible to get this authorization code without browser or any self made UI? Can we get it in application after correct request to, for example <code>https://mysite.tuz/authorize</code> ?</p>\n"},{"tags":["java","reflection","constructor","private"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":4,"creation_date":1649664664,"post_id":71824535,"comment_id":126924232,"body_markdown":"check in which class the constructor is being called, throw an Exception if it&#39;s another class. But this really seems like overkill","body":"check in which class the constructor is being called, throw an Exception if it&#39;s another class. But this really seems like overkill"},{"owner":{"account_id":551394,"reputation":8315,"user_id":916225,"accept_rate":69,"display_name":"seenukarthi"},"score":1,"creation_date":1649664801,"post_id":71824535,"comment_id":126924273,"body_markdown":"https://stackoverflow.com/questions/6994393/singleton-how-to-stop-create-instance-via-reflection Might Help","body":"<a href=\"https://stackoverflow.com/questions/6994393/singleton-how-to-stop-create-instance-via-reflection\" title=\"singleton how to stop create instance via reflection\">stackoverflow.com/questions/6994393/&hellip;</a> Might Help"},{"owner":{"account_id":17813818,"reputation":1473,"user_id":12937828,"display_name":"Aman Singh Rajpoot"},"score":1,"creation_date":1649664965,"post_id":71824535,"comment_id":126924328,"body_markdown":"I knew an object can be created using reflection but the interviewer asked me to make sure the object should not be created from any other class. I felt like he was really stretching and said I don&#39;t know, but never thought to add the validation that you mentioned .  @Stultuske","body":"I knew an object can be created using reflection but the interviewer asked me to make sure the object should not be created from any other class. I felt like he was really stretching and said I don&#39;t know, but never thought to add the validation that you mentioned .  @Stultuske"},{"owner":{"account_id":17813818,"reputation":1473,"user_id":12937828,"display_name":"Aman Singh Rajpoot"},"score":1,"creation_date":1649665980,"post_id":71824535,"comment_id":126924710,"body_markdown":"This worked ```class Test   \n{\n\n   private Test() throws IllegalAccessException  //private constructor\n   {\n\t   \n\t   \n\t   if (new Exception().getStackTrace()[1].getClassName() != this.getClass().getName())\n\t   {\n\t\t   throw new IllegalAccessException();\n\t   }\n\t   \n   } \n \n   \n}```","body":"This worked <code>class Test    {     private Test() throws IllegalAccessException  &#47;&#47;private constructor    { \t    \t    \t   if (new Exception().getStackTrace()[1].getClassName() != this.getClass().getName()) \t   { \t\t   throw new IllegalAccessException(); \t   } \t       }        }</code>"}],"answers":[{"tags":[],"owner":{"account_id":6475519,"reputation":4496,"user_id":5014221,"accept_rate":71,"display_name":"Ashish Patil"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1649667566,"creation_date":1649667566,"answer_id":71825136,"question_id":71824535,"body_markdown":"One way you already mentioned in comments by using Exception &amp; another way to do this is using `Thread.currentThread()`\r\n\r\n   \r\n\r\n     package app.test;\r\n        public class Test19 {\r\n        ..\r\n        \tprivate Test19() {\r\n        \r\n        \t\tif (Thread.currentThread().getStackTrace()[1].getClassName() == &quot;app.test.Test19&quot;) {\r\n        \t\t\t// initialize member fields etc.\r\n        \t\t} else {\r\n        \t\t\tthrow new IllegalAccessException();\r\n        \t\t}\r\n        \t}\r\n         }\r\n        ","title":"How to make sure instance of a class with a private constructor can not be created from outside of the class using Reflection?","body":"<p>One way you already mentioned in comments by using Exception &amp; another way to do this is using <code>Thread.currentThread()</code></p>\n<pre><code> package app.test;\n    public class Test19 {\n    ..\n        private Test19() {\n    \n            if (Thread.currentThread().getStackTrace()[1].getClassName() == &quot;app.test.Test19&quot;) {\n                // initialize member fields etc.\n            } else {\n                throw new IllegalAccessException();\n            }\n        }\n     }\n    \n</code></pre>\n"},{"tags":[],"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1649675154,"creation_date":1649675154,"answer_id":71826720,"question_id":71824535,"body_markdown":"There are several ways to prevent the creation - but it is hard to tell which one is appropriate for your use-case:\r\n\r\n1. Throw an exception in the constructor\r\n\r\n    You can either unconditionally throw an exception - making it (near) impossible to instantiate an instance - or only throw under certain conditions.\r\n\r\n    Some conditions can be:\r\n\r\n    * Inspecting the caller - using [`StackWalker`](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/StackWalker.html) for example.\r\n    * Passing a &quot;secret&quot; passphrase to the constructor. [JMH does this](https://github.com/openjdk/jmh/blob/99e9c19c80a0133c28f6532ef2b5776d5b8bd023/jmh-core/src/main/java/org/openjdk/jmh/infra/Blackhole.java#L268-L291) for example.\r\n\r\n2. Use Java Modules.\r\n\r\n    As other modules can&#39;t deeply reflect into other named modules, `Constructor.setAccessible` will not work on your class outside of your own module.  \r\n    Of course this restriction doesn&#39;t apply to your own module - but you should be able to control your own module ;).\r\n\r\n3. Install a [`SecurityManager`](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/SecurityManager.html).\r\n\r\n    Prevents `Constructor.setAccessible` from returning successfully.  \r\n    But the security manager is deprecated for removal, so I can&#39;t recommend it&#39;s use.\r\n\r\nNote: Most of those solutions can be circumvented in some way. And it is sometimes possible to add additional defenses against that. But at the end, it&#39;ll become a game of cat and mouse.","title":"How to make sure instance of a class with a private constructor can not be created from outside of the class using Reflection?","body":"<p>There are several ways to prevent the creation - but it is hard to tell which one is appropriate for your use-case:</p>\n<ol>\n<li><p>Throw an exception in the constructor</p>\n<p>You can either unconditionally throw an exception - making it (near) impossible to instantiate an instance - or only throw under certain conditions.</p>\n<p>Some conditions can be:</p>\n<ul>\n<li>Inspecting the caller - using <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/StackWalker.html\" rel=\"nofollow noreferrer\"><code>StackWalker</code></a> for example.</li>\n<li>Passing a &quot;secret&quot; passphrase to the constructor. <a href=\"https://github.com/openjdk/jmh/blob/99e9c19c80a0133c28f6532ef2b5776d5b8bd023/jmh-core/src/main/java/org/openjdk/jmh/infra/Blackhole.java#L268-L291\" rel=\"nofollow noreferrer\">JMH does this</a> for example.</li>\n</ul>\n</li>\n<li><p>Use Java Modules.</p>\n<p>As other modules can't deeply reflect into other named modules, <code>Constructor.setAccessible</code> will not work on your class outside of your own module.<br />\nOf course this restriction doesn't apply to your own module - but you should be able to control your own module ;).</p>\n</li>\n<li><p>Install a <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/SecurityManager.html\" rel=\"nofollow noreferrer\"><code>SecurityManager</code></a>.</p>\n<p>Prevents <code>Constructor.setAccessible</code> from returning successfully.<br />\nBut the security manager is deprecated for removal, so I can't recommend it's use.</p>\n</li>\n</ol>\n<p>Note: Most of those solutions can be circumvented in some way. And it is sometimes possible to add additional defenses against that. But at the end, it'll become a game of cat and mouse.</p>\n"}],"owner":{"account_id":17813818,"reputation":1473,"user_id":12937828,"display_name":"Aman Singh Rajpoot"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":545,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":71826720,"answer_count":2,"score":1,"last_activity_date":1649675154,"creation_date":1649664559,"question_id":71824535,"body_markdown":"I know that an instance of a class with a private constructor can be created using reflection but is there any way to make sure that the instance of the class can only be created within the same class using its own private constructor?\r\n\r\nLet&#39;s take an example of a class Test, with a private constructor.\r\n\r\n```\r\nimport java.lang.reflect.Constructor;\r\n\r\n   import java.lang.reflect.InvocationTargetException;\r\n\r\n   class Test   \r\n   {\r\n\r\n      private Test()  //private constructor\r\n      {\r\n      } \r\n   }\r\n\r\n  public class Sample{\r\n\r\n      public static void main(String args[]) throws ClassNotFoundException, InstantiationException, IllegalAccessException, NoSuchMethodException, SecurityException, IllegalArgumentException, InvocationTargetException\r\n     {\r\n\r\n       Class c=Class.forName(&quot;Test&quot;); //specify class name in quotes\r\n\r\n       //----Accessing private constructor\r\n       Constructor con=c.getDeclaredConstructor();\r\n       con.setAccessible(true);     \r\n       Object obj=con.newInstance();\r\n   }   \r\n} \r\n```\r\nMy question is - is there any way to ensure that the instance of the class can only be created within the same class and not from outside using reflection or any other method?","title":"How to make sure instance of a class with a private constructor can not be created from outside of the class using Reflection?","body":"<p>I know that an instance of a class with a private constructor can be created using reflection but is there any way to make sure that the instance of the class can only be created within the same class using its own private constructor?</p>\n<p>Let's take an example of a class Test, with a private constructor.</p>\n<pre><code>import java.lang.reflect.Constructor;\n\n   import java.lang.reflect.InvocationTargetException;\n\n   class Test   \n   {\n\n      private Test()  //private constructor\n      {\n      } \n   }\n\n  public class Sample{\n\n      public static void main(String args[]) throws ClassNotFoundException, InstantiationException, IllegalAccessException, NoSuchMethodException, SecurityException, IllegalArgumentException, InvocationTargetException\n     {\n\n       Class c=Class.forName(&quot;Test&quot;); //specify class name in quotes\n\n       //----Accessing private constructor\n       Constructor con=c.getDeclaredConstructor();\n       con.setAccessible(true);     \n       Object obj=con.newInstance();\n   }   \n} \n</code></pre>\n<p>My question is - is there any way to ensure that the instance of the class can only be created within the same class and not from outside using reflection or any other method?</p>\n"},{"tags":["java","spring","java-stream"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1649673230,"post_id":71826129,"comment_id":126927474,"body_markdown":"How are the `String rating;` specified? Probably easier if rating is numeric. If its numeric, you can use `min()` to find the lowest rating for a person, and then again use `min()` to find person with lowest rating","body":"How are the <code>String rating;</code> specified? Probably easier if rating is numeric. If its numeric, you can use <code>min()</code> to find the lowest rating for a person, and then again use <code>min()</code> to find person with lowest rating"},{"owner":{"account_id":16863369,"reputation":89,"user_id":12193648,"display_name":"bohunn"},"score":0,"creation_date":1649673989,"post_id":71826129,"comment_id":126927732,"body_markdown":"Yes, exactly however I do not fully understand how the second usage of min should do, meaning how the Comparator should look like. Let&#39;s say listLowest is my ```List&lt;Person&gt;``` with only lowest rating.\nIf I switch the rating attribute to Integer, would the pipeline be like ```listLowest.stream().min(Comparator.comparing(element -&gt; element.getRatingList().stream().min(Comparator.comparing(Rating::getRating)).orElse(new Rating)))... ```","body":"Yes, exactly however I do not fully understand how the second usage of min should do, meaning how the Comparator should look like. Let&#39;s say listLowest is my <code>List&lt;Person&gt;</code> with only lowest rating. If I switch the rating attribute to Integer, would the pipeline be like <code>listLowest.stream().min(Comparator.comparing(element -&gt; element.getRatingList().stream().min(Comparator.comparing(Ra&zwnj;&#8203;ting::getRating)).or&zwnj;&#8203;Else(new Rating)))... </code>"},{"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"score":0,"creation_date":1649674601,"post_id":71826129,"comment_id":126927931,"body_markdown":"Can you share a sample input and the expected output?","body":"Can you share a sample input and the expected output?"}],"answers":[{"tags":[],"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649675042,"creation_date":1649674005,"answer_id":71826459,"question_id":71826129,"body_markdown":"Here is fully functional example on how you could do it. The difference is that I changed rating to `int` for easier comparing. However it shouldn&#39;t be to hard to adapt it to `String` type.\r\n\r\nThe important part of this code is \r\n\r\n    persons.stream().min((e1, e2) -&gt; e1.ratingList.stream().min((o1, o2) -&gt; o1.rating - o2.rating).get().rating\r\n                            - e2.ratingList.stream().min((o1, o2) -&gt; o1.rating - o2.rating).get().rating).get()\r\n\r\nWhat it does, is to compare persons by their lowest ratings, to find the person with the lowest rating. \r\n\r\nAnother approach requires an additional field which you can map the lowest rating to. This approach looks cleaner and is also probably more performant:\r\n\r\n    persons.stream()\r\n    \t\t\t\t.map(e -&gt; t.new Person(e.id, e.ratingList.stream().min((o1, o2) -&gt; o1.rating - o2.rating).get().rating))\r\n    \t\t\t\t.min((e1, e2) -&gt; e1.lowestRating - e2.lowestRating).get()\r\n\r\n\r\nThe classes I adapted are:\r\n\r\n\tclass Person {\r\n\t\tprivate String id;\r\n\t\tprivate List&lt;Rating&gt; ratingList;\r\n\t\tprivate int lowestRating;\r\n\r\n\t\tpublic Person() {\r\n\r\n\t\t}\r\n\r\n\t\tpublic Person(String id2, int rating) {\r\n\t\t\tid = id2;\r\n\t\t\tlowestRating = rating;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tclass Rating {\r\n\t\tprivate int rating;\r\n\t\tprivate LocalDate ratingDate;\r\n\r\n\t\tRating(int rating, LocalDate date) {\r\n\t\t\tthis.rating = rating;\r\n\t\t\tratingDate = date;\r\n\t\t}\r\n\t}","title":"Best way to get an object with a lowest rating","body":"<p>Here is fully functional example on how you could do it. The difference is that I changed rating to <code>int</code> for easier comparing. However it shouldn't be to hard to adapt it to <code>String</code> type.</p>\n<p>The important part of this code is</p>\n<pre><code>persons.stream().min((e1, e2) -&gt; e1.ratingList.stream().min((o1, o2) -&gt; o1.rating - o2.rating).get().rating\n                        - e2.ratingList.stream().min((o1, o2) -&gt; o1.rating - o2.rating).get().rating).get()\n</code></pre>\n<p>What it does, is to compare persons by their lowest ratings, to find the person with the lowest rating.</p>\n<p>Another approach requires an additional field which you can map the lowest rating to. This approach looks cleaner and is also probably more performant:</p>\n<pre><code>persons.stream()\n                .map(e -&gt; t.new Person(e.id, e.ratingList.stream().min((o1, o2) -&gt; o1.rating - o2.rating).get().rating))\n                .min((e1, e2) -&gt; e1.lowestRating - e2.lowestRating).get()\n</code></pre>\n<p>The classes I adapted are:</p>\n<pre><code>class Person {\n    private String id;\n    private List&lt;Rating&gt; ratingList;\n    private int lowestRating;\n\n    public Person() {\n\n    }\n\n    public Person(String id2, int rating) {\n        id = id2;\n        lowestRating = rating;\n    }\n\n}\n\nclass Rating {\n    private int rating;\n    private LocalDate ratingDate;\n\n    Rating(int rating, LocalDate date) {\n        this.rating = rating;\n        ratingDate = date;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":16863369,"reputation":89,"user_id":12193648,"display_name":"bohunn"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71826459,"answer_count":1,"score":1,"last_activity_date":1649675042,"creation_date":1649672323,"question_id":71826129,"body_markdown":"I have a list of objects and would like to get the person object with the lowest score.\r\nI&#39;m relatively new to the streaming subject and was thinking what would be the best way to handle it.\r\n   \r\n    public class Person {\r\n      private String id;\r\n      private List&lt;Rating&gt; ratingList;\r\n    }\r\n\r\n    public class Rating {\r\n      private String rating;\r\n      private LocalDate ratingDate;\r\n    }\r\n\r\nI have a service that gets a list of Person objects with ratings from the DB.\r\nFirstly I grouped the List to have a list of persons with ratings\r\n```Map&lt;String, List&lt;Rating&gt;&gt; groupedList```\r\nThen I mapped it to have a List of Person Objects with a latest rating only\r\n\r\n    groupedList.entrySet().stream.map(element -&gt; new Person(element.getKey(), element.getValue().stream().max(Comparator.comparing(Rating::getRatingDate)).stream().collect(Collectors.toList())))\r\n\r\nAnd here is the question when I already have a list of Persons with the latest rating what would be the best way to only have a one Person returned that has the lowest rating of all.\r\nI was thinking to use the .reduce() method but I always ended up with a List having all persons from the initial list","title":"Best way to get an object with a lowest rating","body":"<p>I have a list of objects and would like to get the person object with the lowest score.\nI'm relatively new to the streaming subject and was thinking what would be the best way to handle it.</p>\n<pre><code>public class Person {\n  private String id;\n  private List&lt;Rating&gt; ratingList;\n}\n\npublic class Rating {\n  private String rating;\n  private LocalDate ratingDate;\n}\n</code></pre>\n<p>I have a service that gets a list of Person objects with ratings from the DB.\nFirstly I grouped the List to have a list of persons with ratings\n<code>Map&lt;String, List&lt;Rating&gt;&gt; groupedList</code>\nThen I mapped it to have a List of Person Objects with a latest rating only</p>\n<pre><code>groupedList.entrySet().stream.map(element -&gt; new Person(element.getKey(), element.getValue().stream().max(Comparator.comparing(Rating::getRatingDate)).stream().collect(Collectors.toList())))\n</code></pre>\n<p>And here is the question when I already have a list of Persons with the latest rating what would be the best way to only have a one Person returned that has the lowest rating of all.\nI was thinking to use the .reduce() method but I always ended up with a List having all persons from the initial list</p>\n"},{"tags":["java","apache-spark","pyspark","apache-spark-sql","greenplum"],"comments":[{"owner":{"account_id":320466,"reputation":8954,"user_id":638764,"display_name":"mazaneicha"},"score":0,"creation_date":1642170966,"post_id":70710486,"comment_id":125006744,"body_markdown":"`SparkSession should only be created and accessed on the driver` means you tried to use SparkSession in your udf or lambda function which is not possible.","body":"<code>SparkSession should only be created and accessed on the driver</code> means you tried to use SparkSession in your udf or lambda function which is not possible."},{"owner":{"account_id":1085803,"reputation":110,"user_id":1081558,"display_name":"Lawren Alex"},"score":0,"creation_date":1642397150,"post_id":70710486,"comment_id":125050881,"body_markdown":"@mazaneicha, thanks for your reply. How can I write my dataframe to greenplum database? pls help, URL which I have referred https://greenplum-spark.docs.pivotal.io/1-6/rw_example.html","body":"@mazaneicha, thanks for your reply. How can I write my dataframe to greenplum database? pls help, URL which I have referred <a href=\"https://greenplum-spark.docs.pivotal.io/1-6/rw_example.html\" rel=\"nofollow noreferrer\">greenplum-spark.docs.pivotal.io/1-6/rw_example.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":11519430,"reputation":1,"user_id":8441759,"display_name":"L_gp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649674830,"creation_date":1649674830,"answer_id":71826647,"question_id":70710486,"body_markdown":"I was able to get around this issue by downgrading Spark to 2.1.3.","title":"Writing from Spark into Greenplum Database using greenplum-connector-apache-spark-scala_2.12-2.1.0 - java.lang.IllegalStateException","body":"<p>I was able to get around this issue by downgrading Spark to 2.1.3.</p>\n"}],"owner":{"account_id":1085803,"reputation":110,"user_id":1081558,"display_name":"Lawren Alex"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":525,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1649674830,"creation_date":1642162844,"question_id":70710486,"body_markdown":"Writing from Spark into Greenplum Database using greenplum-connector-apache-spark-scala_2.12-2.1.0 - java.lang.IllegalStateException\r\n\r\nGreenplum version:\r\nPostgreSQL 9.4.24 (Greenplum Database 6.8.1 build commit:xxxxxxx) on x86_64-unknown-linux-gnu, compiled by gcc (Ubuntu 7.5.0-3ubuntu1~18.04) 7.5.0, 64-bit compiled on Jun 16 2020 18:53:13\r\n\r\nConnector :\r\ngreenplum-connector-apache-spark-scala_2.12-2.1.0.jar\r\n\r\nSpark Version:\r\nWelcome to spark version 3.1.2\r\n\r\n         \r\nUsing Scala version 2.12.10 (OpenJDK 64-Bit Server VM, Java 1.8.0_312)\r\n\r\n\r\nERROR Executor: Exception in task 1.0 in stage 3.0 (TID 12)\r\njava.lang.IllegalStateException: SparkSession should only be created and accessed on the driver.\r\n\r\n    import org.apache.spark.sql.SaveMode\r\n \r\n    val gscWriteOptionMap = Map(\r\n          &quot;url&quot; -&gt; &quot;jdbc:postgresql://xxx.xxx.xxx.xx:5432/database&quot;,\r\n          &quot;user&quot; -&gt; &quot;user&quot;,\r\n          &quot;password&quot; -&gt; &quot;pass&quot;,\r\n          &quot;dbschema&quot; -&gt; &quot;schema&quot;,\r\n          &quot;dbtable&quot; -&gt; &quot;table&quot;\r\n    )\r\n    dataFrame.write.format(&quot;greenplum&quot;)\r\n          .options(gscWriteOptionMap)\r\n          .mode(SaveMode.Append)\r\n          .save()\r\n    \r\n    // Exiting paste mode, now interpreting.\r\n    \r\n    22/01/14 12:02:29 ERROR Executor: Exception in task 1.0 in stage 3.0 (TID 12)\r\n    java.lang.IllegalStateException: SparkSession should only be created and accessed on the driver.\r\n    \tat org.apache.spark.sql.SparkSession$.org$apache$spark$sql$SparkSession$$assertOnDriver(SparkSession.scala:1126)\r\n    \tat org.apache.spark.sql.SparkSession$Builder.getOrCreate(SparkSession.scala:919)\r\n    \tat io.pivotal.greenplum.spark.externaltable.GpfdistServiceManager$.getService(GpfdistServiceManager.scala:59)\r\n    \tat io.pivotal.greenplum.spark.externaltable.GreenplumRowIterator.&lt;init&gt;(GreenplumRowIterator.scala:67)\r\n    \tat io.pivotal.greenplum.spark.GreenplumRDD.compute(GreenplumRDD.scala:55)\r\n    \tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\r\n    \tat org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\r\n    \tat org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\r\n    \tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\r\n    \tat org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\r\n    \tat org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\r\n    \tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\r\n    \tat org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\r\n    \tat org.apache.spark.sql.execution.SQLExecutionRDD.compute(SQLExecutionRDD.scala:55)\r\n    \tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\r\n    \tat org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\r\n    \tat org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\r\n    \tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\r\n    \tat org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\r\n    \tat org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\r\n    \tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\r\n    \tat org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\r\n    \tat org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:90)\r\n    \tat org.apache.spark.scheduler.Task.run(Task.scala:131)\r\n    \tat org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:497)\r\n    \tat org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1439)\r\n    \tat org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:500)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n    \tat java.lang.Thread.run(Thread.java:748)\r\n    22/01/14 12:02:29 WARN TaskSetManager: Lost task 1.0 in stage 3.0 (TID 12) (spark executor driver): java.lang.IllegalStateException: SparkSession should only be created and accessed on the driver.\r\n    \tat org.apache.spark.sql.SparkSession$.org$apache$spark$sql$SparkSession$$assertOnDriver(SparkSession.scala:1126)\r\n    \tat org.apache.spark.sql.SparkSession$Builder.getOrCreate(SparkSession.scala:919)\r\n    \tat io.pivotal.greenplum.spark.externaltable.GpfdistServiceManager$.getService(GpfdistServiceManager.scala:59)\r\n    \tat io.pivotal.greenplum.spark.externaltable.GreenplumRowIterator.&lt;init&gt;(GreenplumRowIterator.scala:67)\r\n    \tat io.pivotal.greenplum.spark.GreenplumRDD.compute(GreenplumRDD.scala:55)\r\n    \tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\r\n    \tat org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\r\n    \tat org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\r\n    \tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\r\n    \tat org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\r\n    \tat org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\r\n    \tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\r\n    \tat org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\r\n    \tat org.apache.spark.sql.execution.SQLExecutionRDD.compute(SQLExecutionRDD.scala:55)\r\n    \tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\r\n    \tat org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\r\n    \tat org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\r\n    \tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\r\n    \tat org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\r\n    \tat org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\r\n    \tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\r\n    \tat org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\r\n    \tat org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:90)\r\n    \tat org.apache.spark.scheduler.Task.run(Task.scala:131)\r\n    \tat org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:497)\r\n    \tat org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1439)\r\n    \tat org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:500)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n    \tat java.lang.Thread.run(Thread.java:748)\r\n    \r\n    22/01/14 12:02:29 ERROR TaskSetManager: Task 1 in stage 3.0 failed 1 times; aborting job\r\n    22/01/14 12:02:29 WARN TaskSetManager: Lost task 2.0 in stage 3.0 (TID 13) (spark executor driver): TaskKilled (Stage cancelled)\r\n    22/01/14 12:02:29 WARN TaskSetManager: Lost task 0.0 in stage 3.0 (TID 11) (spark executor driver): TaskKilled (Stage cancelled)\r\n    org.apache.spark.SparkException: Job aborted due to stage failure: Task 1 in stage 3.0 failed 1 times, most recent failure: Lost task 1.0 in stage 3.0 (TID 12) (spark executor driver): java.lang.IllegalStateException: SparkSession should only be created and accessed on the driver.\r\n    \tat org.apache.spark.sql.SparkSession$.org$apache$spark$sql$SparkSession$$assertOnDriver(SparkSession.scala:1126)\r\n    \tat org.apache.spark.sql.SparkSession$Builder.getOrCreate(SparkSession.scala:919)\r\n    \tat io.pivotal.greenplum.spark.externaltable.GpfdistServiceManager$.getService(GpfdistServiceManager.scala:59)\r\n    \tat io.pivotal.greenplum.spark.externaltable.GreenplumRowIterator.&lt;init&gt;(GreenplumRowIterator.scala:67)\r\n    \tat io.pivotal.greenplum.spark.GreenplumRDD.compute(GreenplumRDD.scala:55)\r\n    \tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\r\n    \tat org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\r\n    \tat org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\r\n    \tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\r\n    \tat org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\r\n    \tat org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\r\n    \tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\r\n    \tat org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\r\n    \tat org.apache.spark.sql.execution.SQLExecutionRDD.compute(SQLExecutionRDD.scala:55)\r\n    \tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\r\n    \tat org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\r\n    \tat org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\r\n    \tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\r\n    \tat org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\r\n    \tat org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\r\n    \tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\r\n    \tat org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\r\n    \tat org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:90)\r\n    \tat org.apache.spark.scheduler.Task.run(Task.scala:131)\r\n    \tat org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:497)\r\n    \tat org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1439)\r\n    \tat org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:500)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n    \tat java.lang.Thread.run(Thread.java:748)\r\n    \r\n    Driver stacktrace:\r\n      at org.apache.spark.scheduler.DAGScheduler.failJobAndIndependentStages(DAGScheduler.scala:2258)\r\n      at org.apache.spark.scheduler.DAGScheduler.$anonfun$abortStage$2(DAGScheduler.scala:2207)\r\n      at org.apache.spark.scheduler.DAGScheduler.$anonfun$abortStage$2$adapted(DAGScheduler.scala:2206)\r\n      at scala.collection.mutable.ResizableArray.foreach(ResizableArray.scala:62)\r\n      at scala.collection.mutable.ResizableArray.foreach$(ResizableArray.scala:55)\r\n      at scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:49)\r\n      at org.apache.spark.scheduler.DAGScheduler.abortStage(DAGScheduler.scala:2206)\r\n      at org.apache.spark.scheduler.DAGScheduler.$anonfun$handleTaskSetFailed$1(DAGScheduler.scala:1079)\r\n      at org.apache.spark.scheduler.DAGScheduler.$anonfun$handleTaskSetFailed$1$adapted(DAGScheduler.scala:1079)\r\n      at scala.Option.foreach(Option.scala:407)\r\n      at org.apache.spark.scheduler.DAGScheduler.handleTaskSetFailed(DAGScheduler.scala:1079)\r\n      at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.doOnReceive(DAGScheduler.scala:2445)\r\n      at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:2387)\r\n      at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:2376)\r\n      at org.apache.spark.util.EventLoop$$anon$1.run(EventLoop.scala:49)\r\n      at org.apache.spark.scheduler.DAGScheduler.runJob(DAGScheduler.scala:868)\r\n      at org.apache.spark.SparkContext.runJob(SparkContext.scala:2196)\r\n      at org.apache.spark.SparkContext.runJob(SparkContext.scala:2291)\r\n      at org.apache.spark.rdd.RDD.$anonfun$fold$1(RDD.scala:1183)\r\n      at org.apache.spark.rdd.RDDOperationScope$.withScope(RDDOperationScope.scala:151)\r\n      at org.apache.spark.rdd.RDDOperationScope$.withScope(RDDOperationScope.scala:112)\r\n      at org.apache.spark.rdd.RDD.withScope(RDD.scala:414)\r\n      at org.apache.spark.rdd.RDD.fold(RDD.scala:1177)\r\n      at io.pivotal.greenplum.spark.GreenplumRelationProvider.saveDataFrame(GreenplumRelationProvider.scala:158)\r\n      at io.pivotal.greenplum.spark.GreenplumRelationProvider.createRelation(GreenplumRelationProvider.scala:115)\r\n      at org.apache.spark.sql.execution.datasources.SaveIntoDataSourceCommand.run(SaveIntoDataSourceCommand.scala:46)\r\n      at org.apache.spark.sql.execution.command.ExecutedCommandExec.sideEffectResult$lzycompute(commands.scala:70)\r\n      at org.apache.spark.sql.execution.command.ExecutedCommandExec.sideEffectResult(commands.scala:68)\r\n      at org.apache.spark.sql.execution.command.ExecutedCommandExec.doExecute(commands.scala:90)\r\n      at org.apache.spark.sql.execution.SparkPlan.$anonfun$execute$1(SparkPlan.scala:180)\r\n      at org.apache.spark.sql.execution.SparkPlan.$anonfun$executeQuery$1(SparkPlan.scala:218)\r\n      at org.apache.spark.rdd.RDDOperationScope$.withScope(RDDOperationScope.scala:151)\r\n      at org.apache.spark.sql.execution.SparkPlan.executeQuery(SparkPlan.scala:215)\r\n      at org.apache.spark.sql.execution.SparkPlan.execute(SparkPlan.scala:176)\r\n      at org.apache.spark.sql.execution.QueryExecution.toRdd$lzycompute(QueryExecution.scala:132)\r\n      at org.apache.spark.sql.execution.QueryExecution.toRdd(QueryExecution.scala:131)\r\n      at org.apache.spark.sql.DataFrameWriter.$anonfun$runCommand$1(DataFrameWriter.scala:989)\r\n      at org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$5(SQLExecution.scala:103)\r\n      at org.apache.spark.sql.execution.SQLExecution$.withSQLConfPropagated(SQLExecution.scala:163)\r\n      at org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$1(SQLExecution.scala:90)\r\n      at org.apache.spark.sql.SparkSession.withActive(SparkSession.scala:775)\r\n      at org.apache.spark.sql.execution.SQLExecution$.withNewExecutionId(SQLExecution.scala:64)\r\n      at org.apache.spark.sql.DataFrameWriter.runCommand(DataFrameWriter.scala:989)\r\n      at org.apache.spark.sql.DataFrameWriter.saveToV1Source(DataFrameWriter.scala:438)\r\n      at org.apache.spark.sql.DataFrameWriter.saveInternal(DataFrameWriter.scala:415)\r\n      at org.apache.spark.sql.DataFrameWriter.save(DataFrameWriter.scala:301)\r\n      ... 55 elided\r\n    Caused by: java.lang.IllegalStateException: SparkSession should only be created and accessed on the driver.\r\n      at org.apache.spark.sql.SparkSession$.org$apache$spark$sql$SparkSession$$assertOnDriver(SparkSession.scala:1126)\r\n      at org.apache.spark.sql.SparkSession$Builder.getOrCreate(SparkSession.scala:919)\r\n      at io.pivotal.greenplum.spark.externaltable.GpfdistServiceManager$.getService(GpfdistServiceManager.scala:59)\r\n      at io.pivotal.greenplum.spark.externaltable.GreenplumRowIterator.&lt;init&gt;(GreenplumRowIterator.scala:67)\r\n      at io.pivotal.greenplum.spark.GreenplumRDD.compute(GreenplumRDD.scala:55)\r\n      at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\r\n      at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\r\n      at org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\r\n      at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\r\n      at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\r\n      at org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\r\n      at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\r\n      at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\r\n      at org.apache.spark.sql.execution.SQLExecutionRDD.compute(SQLExecutionRDD.scala:55)\r\n      at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\r\n      at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\r\n      at org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\r\n      at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\r\n      at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\r\n      at org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\r\n      at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\r\n      at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\r\n      at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:90)\r\n      at org.apache.spark.scheduler.Task.run(Task.scala:131)\r\n      at org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:497)\r\n      at org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1439)\r\n      at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:500)\r\n      at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n      at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n      at java.lang.Thread.run(Thread.java:748)","title":"Writing from Spark into Greenplum Database using greenplum-connector-apache-spark-scala_2.12-2.1.0 - java.lang.IllegalStateException","body":"<p>Writing from Spark into Greenplum Database using greenplum-connector-apache-spark-scala_2.12-2.1.0 - java.lang.IllegalStateException</p>\n<p>Greenplum version:\nPostgreSQL 9.4.24 (Greenplum Database 6.8.1 build commit:xxxxxxx) on x86_64-unknown-linux-gnu, compiled by gcc (Ubuntu 7.5.0-3ubuntu1~18.04) 7.5.0, 64-bit compiled on Jun 16 2020 18:53:13</p>\n<p>Connector :\ngreenplum-connector-apache-spark-scala_2.12-2.1.0.jar</p>\n<p>Spark Version:\nWelcome to spark version 3.1.2</p>\n<p>Using Scala version 2.12.10 (OpenJDK 64-Bit Server VM, Java 1.8.0_312)</p>\n<p>ERROR Executor: Exception in task 1.0 in stage 3.0 (TID 12)\njava.lang.IllegalStateException: SparkSession should only be created and accessed on the driver.</p>\n<pre><code>import org.apache.spark.sql.SaveMode\n\nval gscWriteOptionMap = Map(\n      &quot;url&quot; -&gt; &quot;jdbc:postgresql://xxx.xxx.xxx.xx:5432/database&quot;,\n      &quot;user&quot; -&gt; &quot;user&quot;,\n      &quot;password&quot; -&gt; &quot;pass&quot;,\n      &quot;dbschema&quot; -&gt; &quot;schema&quot;,\n      &quot;dbtable&quot; -&gt; &quot;table&quot;\n)\ndataFrame.write.format(&quot;greenplum&quot;)\n      .options(gscWriteOptionMap)\n      .mode(SaveMode.Append)\n      .save()\n\n// Exiting paste mode, now interpreting.\n\n22/01/14 12:02:29 ERROR Executor: Exception in task 1.0 in stage 3.0 (TID 12)\njava.lang.IllegalStateException: SparkSession should only be created and accessed on the driver.\n    at org.apache.spark.sql.SparkSession$.org$apache$spark$sql$SparkSession$$assertOnDriver(SparkSession.scala:1126)\n    at org.apache.spark.sql.SparkSession$Builder.getOrCreate(SparkSession.scala:919)\n    at io.pivotal.greenplum.spark.externaltable.GpfdistServiceManager$.getService(GpfdistServiceManager.scala:59)\n    at io.pivotal.greenplum.spark.externaltable.GreenplumRowIterator.&lt;init&gt;(GreenplumRowIterator.scala:67)\n    at io.pivotal.greenplum.spark.GreenplumRDD.compute(GreenplumRDD.scala:55)\n    at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\n    at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\n    at org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\n    at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\n    at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\n    at org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\n    at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\n    at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\n    at org.apache.spark.sql.execution.SQLExecutionRDD.compute(SQLExecutionRDD.scala:55)\n    at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\n    at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\n    at org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\n    at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\n    at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\n    at org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\n    at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\n    at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\n    at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:90)\n    at org.apache.spark.scheduler.Task.run(Task.scala:131)\n    at org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:497)\n    at org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1439)\n    at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:500)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at java.lang.Thread.run(Thread.java:748)\n22/01/14 12:02:29 WARN TaskSetManager: Lost task 1.0 in stage 3.0 (TID 12) (spark executor driver): java.lang.IllegalStateException: SparkSession should only be created and accessed on the driver.\n    at org.apache.spark.sql.SparkSession$.org$apache$spark$sql$SparkSession$$assertOnDriver(SparkSession.scala:1126)\n    at org.apache.spark.sql.SparkSession$Builder.getOrCreate(SparkSession.scala:919)\n    at io.pivotal.greenplum.spark.externaltable.GpfdistServiceManager$.getService(GpfdistServiceManager.scala:59)\n    at io.pivotal.greenplum.spark.externaltable.GreenplumRowIterator.&lt;init&gt;(GreenplumRowIterator.scala:67)\n    at io.pivotal.greenplum.spark.GreenplumRDD.compute(GreenplumRDD.scala:55)\n    at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\n    at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\n    at org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\n    at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\n    at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\n    at org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\n    at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\n    at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\n    at org.apache.spark.sql.execution.SQLExecutionRDD.compute(SQLExecutionRDD.scala:55)\n    at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\n    at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\n    at org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\n    at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\n    at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\n    at org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\n    at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\n    at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\n    at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:90)\n    at org.apache.spark.scheduler.Task.run(Task.scala:131)\n    at org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:497)\n    at org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1439)\n    at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:500)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at java.lang.Thread.run(Thread.java:748)\n\n22/01/14 12:02:29 ERROR TaskSetManager: Task 1 in stage 3.0 failed 1 times; aborting job\n22/01/14 12:02:29 WARN TaskSetManager: Lost task 2.0 in stage 3.0 (TID 13) (spark executor driver): TaskKilled (Stage cancelled)\n22/01/14 12:02:29 WARN TaskSetManager: Lost task 0.0 in stage 3.0 (TID 11) (spark executor driver): TaskKilled (Stage cancelled)\norg.apache.spark.SparkException: Job aborted due to stage failure: Task 1 in stage 3.0 failed 1 times, most recent failure: Lost task 1.0 in stage 3.0 (TID 12) (spark executor driver): java.lang.IllegalStateException: SparkSession should only be created and accessed on the driver.\n    at org.apache.spark.sql.SparkSession$.org$apache$spark$sql$SparkSession$$assertOnDriver(SparkSession.scala:1126)\n    at org.apache.spark.sql.SparkSession$Builder.getOrCreate(SparkSession.scala:919)\n    at io.pivotal.greenplum.spark.externaltable.GpfdistServiceManager$.getService(GpfdistServiceManager.scala:59)\n    at io.pivotal.greenplum.spark.externaltable.GreenplumRowIterator.&lt;init&gt;(GreenplumRowIterator.scala:67)\n    at io.pivotal.greenplum.spark.GreenplumRDD.compute(GreenplumRDD.scala:55)\n    at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\n    at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\n    at org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\n    at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\n    at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\n    at org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\n    at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\n    at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\n    at org.apache.spark.sql.execution.SQLExecutionRDD.compute(SQLExecutionRDD.scala:55)\n    at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\n    at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\n    at org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\n    at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\n    at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\n    at org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\n    at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\n    at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\n    at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:90)\n    at org.apache.spark.scheduler.Task.run(Task.scala:131)\n    at org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:497)\n    at org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1439)\n    at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:500)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at java.lang.Thread.run(Thread.java:748)\n\nDriver stacktrace:\n  at org.apache.spark.scheduler.DAGScheduler.failJobAndIndependentStages(DAGScheduler.scala:2258)\n  at org.apache.spark.scheduler.DAGScheduler.$anonfun$abortStage$2(DAGScheduler.scala:2207)\n  at org.apache.spark.scheduler.DAGScheduler.$anonfun$abortStage$2$adapted(DAGScheduler.scala:2206)\n  at scala.collection.mutable.ResizableArray.foreach(ResizableArray.scala:62)\n  at scala.collection.mutable.ResizableArray.foreach$(ResizableArray.scala:55)\n  at scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:49)\n  at org.apache.spark.scheduler.DAGScheduler.abortStage(DAGScheduler.scala:2206)\n  at org.apache.spark.scheduler.DAGScheduler.$anonfun$handleTaskSetFailed$1(DAGScheduler.scala:1079)\n  at org.apache.spark.scheduler.DAGScheduler.$anonfun$handleTaskSetFailed$1$adapted(DAGScheduler.scala:1079)\n  at scala.Option.foreach(Option.scala:407)\n  at org.apache.spark.scheduler.DAGScheduler.handleTaskSetFailed(DAGScheduler.scala:1079)\n  at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.doOnReceive(DAGScheduler.scala:2445)\n  at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:2387)\n  at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:2376)\n  at org.apache.spark.util.EventLoop$$anon$1.run(EventLoop.scala:49)\n  at org.apache.spark.scheduler.DAGScheduler.runJob(DAGScheduler.scala:868)\n  at org.apache.spark.SparkContext.runJob(SparkContext.scala:2196)\n  at org.apache.spark.SparkContext.runJob(SparkContext.scala:2291)\n  at org.apache.spark.rdd.RDD.$anonfun$fold$1(RDD.scala:1183)\n  at org.apache.spark.rdd.RDDOperationScope$.withScope(RDDOperationScope.scala:151)\n  at org.apache.spark.rdd.RDDOperationScope$.withScope(RDDOperationScope.scala:112)\n  at org.apache.spark.rdd.RDD.withScope(RDD.scala:414)\n  at org.apache.spark.rdd.RDD.fold(RDD.scala:1177)\n  at io.pivotal.greenplum.spark.GreenplumRelationProvider.saveDataFrame(GreenplumRelationProvider.scala:158)\n  at io.pivotal.greenplum.spark.GreenplumRelationProvider.createRelation(GreenplumRelationProvider.scala:115)\n  at org.apache.spark.sql.execution.datasources.SaveIntoDataSourceCommand.run(SaveIntoDataSourceCommand.scala:46)\n  at org.apache.spark.sql.execution.command.ExecutedCommandExec.sideEffectResult$lzycompute(commands.scala:70)\n  at org.apache.spark.sql.execution.command.ExecutedCommandExec.sideEffectResult(commands.scala:68)\n  at org.apache.spark.sql.execution.command.ExecutedCommandExec.doExecute(commands.scala:90)\n  at org.apache.spark.sql.execution.SparkPlan.$anonfun$execute$1(SparkPlan.scala:180)\n  at org.apache.spark.sql.execution.SparkPlan.$anonfun$executeQuery$1(SparkPlan.scala:218)\n  at org.apache.spark.rdd.RDDOperationScope$.withScope(RDDOperationScope.scala:151)\n  at org.apache.spark.sql.execution.SparkPlan.executeQuery(SparkPlan.scala:215)\n  at org.apache.spark.sql.execution.SparkPlan.execute(SparkPlan.scala:176)\n  at org.apache.spark.sql.execution.QueryExecution.toRdd$lzycompute(QueryExecution.scala:132)\n  at org.apache.spark.sql.execution.QueryExecution.toRdd(QueryExecution.scala:131)\n  at org.apache.spark.sql.DataFrameWriter.$anonfun$runCommand$1(DataFrameWriter.scala:989)\n  at org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$5(SQLExecution.scala:103)\n  at org.apache.spark.sql.execution.SQLExecution$.withSQLConfPropagated(SQLExecution.scala:163)\n  at org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$1(SQLExecution.scala:90)\n  at org.apache.spark.sql.SparkSession.withActive(SparkSession.scala:775)\n  at org.apache.spark.sql.execution.SQLExecution$.withNewExecutionId(SQLExecution.scala:64)\n  at org.apache.spark.sql.DataFrameWriter.runCommand(DataFrameWriter.scala:989)\n  at org.apache.spark.sql.DataFrameWriter.saveToV1Source(DataFrameWriter.scala:438)\n  at org.apache.spark.sql.DataFrameWriter.saveInternal(DataFrameWriter.scala:415)\n  at org.apache.spark.sql.DataFrameWriter.save(DataFrameWriter.scala:301)\n  ... 55 elided\nCaused by: java.lang.IllegalStateException: SparkSession should only be created and accessed on the driver.\n  at org.apache.spark.sql.SparkSession$.org$apache$spark$sql$SparkSession$$assertOnDriver(SparkSession.scala:1126)\n  at org.apache.spark.sql.SparkSession$Builder.getOrCreate(SparkSession.scala:919)\n  at io.pivotal.greenplum.spark.externaltable.GpfdistServiceManager$.getService(GpfdistServiceManager.scala:59)\n  at io.pivotal.greenplum.spark.externaltable.GreenplumRowIterator.&lt;init&gt;(GreenplumRowIterator.scala:67)\n  at io.pivotal.greenplum.spark.GreenplumRDD.compute(GreenplumRDD.scala:55)\n  at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\n  at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\n  at org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\n  at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\n  at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\n  at org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\n  at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\n  at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\n  at org.apache.spark.sql.execution.SQLExecutionRDD.compute(SQLExecutionRDD.scala:55)\n  at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\n  at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\n  at org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\n  at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\n  at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\n  at org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\n  at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\n  at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\n  at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:90)\n  at org.apache.spark.scheduler.Task.run(Task.scala:131)\n  at org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:497)\n  at org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1439)\n  at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:500)\n  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n  at java.lang.Thread.run(Thread.java:748)\n</code></pre>\n"},{"tags":["java","spring","spring-boot","hibernate"],"answers":[{"tags":[],"owner":{"account_id":19174743,"reputation":36,"user_id":14007685,"display_name":"zahra souri"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649511592,"creation_date":1649511592,"answer_id":71808575,"question_id":71808346,"body_markdown":"the problem is in your findUserRoleById because spring match the exact field name and you have to put roleId -&gt; findUserRoleByRoleId","title":"No property found for type error in springboot","body":"<p>the problem is in your findUserRoleById because spring match the exact field name and you have to put roleId -&gt; findUserRoleByRoleId</p>\n"},{"tags":[],"owner":{"account_id":14605352,"reputation":151,"user_id":10548414,"display_name":"Subham"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649521482,"creation_date":1649521482,"answer_id":71809874,"question_id":71808346,"body_markdown":"In UserRoleRepository interface, as you mentioned the method name is findUserRoleById, according to JPA conventions this method will look for an id column in UserRole and try to match it with roleId you&#39;re passing as @Param. But, the UserRole class has no id property and hence you&#39;re facing the error.\r\n\r\nYou&#39;ve got two options \r\n\r\n1. You can change the method name to\r\n\r\n       findUserRolebyRoleId(@Param(&quot;role_id&quot;) Integer roleId)\r\n   as that&#39;s the property name you defined in UserRole @Entity is roleId and not id.  \r\n\r\n2. If you don&#39;t want to change the method name you can annotate the method with @Query annotation like this \r\n\r\n       @Query(&quot;FROM UserRole ur WHERE ur.roleId = :role_id&quot;)\r\n       public interface UserRolesRepository extends CrudRepository&lt;UserRole, Integer&gt; {\r\n        UserRole findUserRoleById(@Param(&quot;role_id&quot;) Integer roleId);\r\n       }\r\n ","title":"No property found for type error in springboot","body":"<p>In UserRoleRepository interface, as you mentioned the method name is findUserRoleById, according to JPA conventions this method will look for an id column in UserRole and try to match it with roleId you're passing as @Param. But, the UserRole class has no id property and hence you're facing the error.</p>\n<p>You've got two options</p>\n<ol>\n<li><p>You can change the method name to</p>\n<pre><code>findUserRolebyRoleId(@Param(&quot;role_id&quot;) Integer roleId)\n</code></pre>\n<p>as that's the property name you defined in UserRole @Entity is roleId and not id.</p>\n</li>\n<li><p>If you don't want to change the method name you can annotate the method with @Query annotation like this</p>\n<pre><code>@Query(&quot;FROM UserRole ur WHERE ur.roleId = :role_id&quot;)\npublic interface UserRolesRepository extends CrudRepository&lt;UserRole, Integer&gt; {\n UserRole findUserRoleById(@Param(&quot;role_id&quot;) Integer roleId);\n}\n</code></pre>\n</li>\n</ol>\n"}],"owner":{"account_id":12612034,"reputation":226,"user_id":9170790,"display_name":"JamieRhys"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7362,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1649674211,"creation_date":1649509591,"question_id":71808346,"body_markdown":"I&#39;m getting the following error when trying to create a one to many (and many to one) relationship:\r\n\r\n```\r\nCaused by: org.springframework.data.mapping.PropertyReferenceException: No property &#39;id&#39; found for type &#39;UserRole&#39;!\r\n```\r\n\r\nHere&#39;s the full story. I have the following at the moment in these classes:\r\n\r\nLoginUser.java\r\n```\r\n@Entity\r\n@Table(name = &quot;table_users&quot;)\r\npublic class LoginUser {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;user_id&quot;, nullable = false, unique = true, updatable = false)\r\n    private int userId;\r\n\r\n    @Column(name = &quot;first_name&quot;, nullable = false)\r\n    private String firstName;\r\n\r\n    @Column(name = &quot;last_name&quot;, nullable = false)\r\n    private String lastName;\r\n\r\n    @Column(name = &quot;username&quot;, nullable = false, unique = true)\r\n    private String username;\r\n\r\n    @JsonIgnore\r\n    @Column(name = &quot;password&quot;, nullable = false)\r\n    private String password;\r\n\r\n    //@Column(name = &quot;user_role&quot;, nullable = false)\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;role_id&quot;, referencedColumnName = &quot;role_id&quot;, nullable = false)\r\n    private UserRole userRole;\r\n\r\n    @Column(name = &quot;is_active&quot;, nullable = false)\r\n    private boolean isActive;\r\n\r\n    public LoginUser() {}\r\n\r\n    public LoginUser(\r\n            String firstName,\r\n            String lastName,\r\n            String username,\r\n            String password,\r\n            UserRole userRole,\r\n            boolean isActive\r\n    ) {\r\n        this.firstName = firstName;\r\n        this.lastName = lastName;\r\n        this.username = username;\r\n        this.password = password;\r\n        this.userRole = userRole;\r\n        this.isActive = isActive;\r\n    }\r\n\r\n... Getters and Setters ...\r\n```\r\n\r\nUserRole.java\r\n```\r\n@Entity\r\n@Table(name = &quot;lu_user_roles&quot;)\r\npublic class UserRole {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @PrimaryKeyJoinColumn\r\n    @Column(name = &quot;role_id&quot;)\r\n    private int roleId;\r\n\r\n    @Column(name = &quot;role_title&quot;, nullable = false, unique = true, updatable = false)\r\n    private String roleTitle;\r\n\r\n    @OneToMany(mappedBy = &quot;userRole&quot;)\r\n    private List&lt;LoginUser&gt; loginUsers;\r\n\r\n    public UserRole() {}\r\n\r\n    public UserRole(String roleTitle) {\r\n        this.roleTitle = roleTitle;\r\n    }\r\n\r\n... Getters and Setters ...\r\n```\r\n\r\nUserRolesRepository.java\r\n```\r\npublic interface UserRolesRepository extends CrudRepository&lt;UserRole, Integer&gt; {\r\n    UserRole findUserRoleById(@Param(&quot;role_id&quot;) Integer roleId);\r\n}\r\n```\r\n\r\nStartDatabase.java\r\n```\r\n@Configuration\r\npublic class StartDatabase {\r\n    private static final Logger LOG = LoggerFactory.getLogger(StartDatabase.class);\r\n\r\n    @Autowired UserRolesRepository userRolesRepository;\r\n\r\n    @Bean\r\n    CommandLineRunner initUserRolesTable(UserRolesRepository repository) {\r\n        return args -&gt; {\r\n            if(((List&lt;UserRole&gt;) repository.findAll()).size() == 0) {\r\n                LOG.info(&quot;Adding &quot; + repository.save(new UserRole(&quot;Developer&quot;)));\r\n                LOG.info(&quot;Adding &quot; + repository.save(new UserRole(&quot;Admin&quot;)));\r\n                LOG.info(&quot;Adding &quot; + repository.save(new UserRole(&quot;User&quot;)));\r\n            }\r\n        };\r\n    }\r\n\r\n    @Bean\r\n    CommandLineRunner initUserTable(LoginUserRepository repository) {\r\n        return args -&gt; {\r\n            if(((List&lt;LoginUser&gt;) repository.findAll()).size() == 0) {\r\n                LOG.info(&quot;Preloading &quot; + repository.save(\r\n                        new LoginUser(\r\n                                &quot;Jamie&quot;,\r\n                                &quot;Edwards&quot;,\r\n                                &quot;jamie.edwards&quot;,\r\n                                &quot;password1&quot;,\r\n                                userRolesRepository.findUserRoleById(1),\r\n                                true\r\n                        )\r\n                ));\r\n            }\r\n        };\r\n    }\r\n}\r\n```\r\n\r\nThe full errors I&#39;m getting are:\r\n\r\n```\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;userRolesRepository&#39; defined in com.jre.assetregister.database.repositories.loginuser.UserRolesRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract com.jre.assetregister.database.entities.loginuser.UserRole com.jre.assetregister.database.repositories.loginuser.UserRolesRepository.findUserRoleById(java.lang.Integer)! Reason: Failed to create query for method public abstract com.jre.assetregister.database.entities.loginuser.UserRole com.jre.assetregister.database.repositories.loginuser.UserRolesRepository.findUserRoleById(java.lang.Integer)! No property &#39;id&#39; found for type &#39;UserRole&#39;!; nested exception is java.lang.IllegalArgumentException: Failed to create query for method public abstract com.jre.assetregister.database.entities.loginuser.UserRole com.jre.assetregister.database.repositories.loginuser.UserRolesRepository.findUserRoleById(java.lang.Integer)! No property &#39;id&#39; found for type &#39;UserRole&#39;!\r\n\r\n\r\nCaused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract com.jre.assetregister.database.entities.loginuser.UserRole com.jre.assetregister.database.repositories.loginuser.UserRolesRepository.findUserRoleById(java.lang.Integer)! Reason: Failed to create query for method public abstract com.jre.assetregister.database.entities.loginuser.UserRole com.jre.assetregister.database.repositories.loginuser.UserRolesRepository.findUserRoleById(java.lang.Integer)! No property &#39;id&#39; found for type &#39;UserRole&#39;!; nested exception is java.lang.IllegalArgumentException: Failed to create query for method public abstract com.jre.assetregister.database.entities.loginuser.UserRole com.jre.assetregister.database.repositories.loginuser.UserRolesRepository.findUserRoleById(java.lang.Integer)! No property &#39;id&#39; found for type &#39;UserRole&#39;!\r\n\r\n\r\nCaused by: java.lang.IllegalArgumentException: Failed to create query for method public abstract com.jre.assetregister.database.entities.loginuser.UserRole com.jre.assetregister.database.repositories.loginuser.UserRolesRepository.findUserRoleById(java.lang.Integer)! No property &#39;id&#39; found for type &#39;UserRole&#39;!\r\n\r\n\r\nCaused by: org.springframework.data.mapping.PropertyReferenceException: No property &#39;id&#39; found for type &#39;UserRole&#39;!\r\n```\r\n\r\nI&#39;m not entirely sure where or why it&#39;s trying to find a property of id when I clearly have set all types of UserRole.","title":"No property found for type error in springboot","body":"<p>I'm getting the following error when trying to create a one to many (and many to one) relationship:</p>\n<pre><code>Caused by: org.springframework.data.mapping.PropertyReferenceException: No property 'id' found for type 'UserRole'!\n</code></pre>\n<p>Here's the full story. I have the following at the moment in these classes:</p>\n<p>LoginUser.java</p>\n<pre><code>@Entity\n@Table(name = &quot;table_users&quot;)\npublic class LoginUser {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;user_id&quot;, nullable = false, unique = true, updatable = false)\n    private int userId;\n\n    @Column(name = &quot;first_name&quot;, nullable = false)\n    private String firstName;\n\n    @Column(name = &quot;last_name&quot;, nullable = false)\n    private String lastName;\n\n    @Column(name = &quot;username&quot;, nullable = false, unique = true)\n    private String username;\n\n    @JsonIgnore\n    @Column(name = &quot;password&quot;, nullable = false)\n    private String password;\n\n    //@Column(name = &quot;user_role&quot;, nullable = false)\n    @ManyToOne\n    @JoinColumn(name = &quot;role_id&quot;, referencedColumnName = &quot;role_id&quot;, nullable = false)\n    private UserRole userRole;\n\n    @Column(name = &quot;is_active&quot;, nullable = false)\n    private boolean isActive;\n\n    public LoginUser() {}\n\n    public LoginUser(\n            String firstName,\n            String lastName,\n            String username,\n            String password,\n            UserRole userRole,\n            boolean isActive\n    ) {\n        this.firstName = firstName;\n        this.lastName = lastName;\n        this.username = username;\n        this.password = password;\n        this.userRole = userRole;\n        this.isActive = isActive;\n    }\n\n... Getters and Setters ...\n</code></pre>\n<p>UserRole.java</p>\n<pre><code>@Entity\n@Table(name = &quot;lu_user_roles&quot;)\npublic class UserRole {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @PrimaryKeyJoinColumn\n    @Column(name = &quot;role_id&quot;)\n    private int roleId;\n\n    @Column(name = &quot;role_title&quot;, nullable = false, unique = true, updatable = false)\n    private String roleTitle;\n\n    @OneToMany(mappedBy = &quot;userRole&quot;)\n    private List&lt;LoginUser&gt; loginUsers;\n\n    public UserRole() {}\n\n    public UserRole(String roleTitle) {\n        this.roleTitle = roleTitle;\n    }\n\n... Getters and Setters ...\n</code></pre>\n<p>UserRolesRepository.java</p>\n<pre><code>public interface UserRolesRepository extends CrudRepository&lt;UserRole, Integer&gt; {\n    UserRole findUserRoleById(@Param(&quot;role_id&quot;) Integer roleId);\n}\n</code></pre>\n<p>StartDatabase.java</p>\n<pre><code>@Configuration\npublic class StartDatabase {\n    private static final Logger LOG = LoggerFactory.getLogger(StartDatabase.class);\n\n    @Autowired UserRolesRepository userRolesRepository;\n\n    @Bean\n    CommandLineRunner initUserRolesTable(UserRolesRepository repository) {\n        return args -&gt; {\n            if(((List&lt;UserRole&gt;) repository.findAll()).size() == 0) {\n                LOG.info(&quot;Adding &quot; + repository.save(new UserRole(&quot;Developer&quot;)));\n                LOG.info(&quot;Adding &quot; + repository.save(new UserRole(&quot;Admin&quot;)));\n                LOG.info(&quot;Adding &quot; + repository.save(new UserRole(&quot;User&quot;)));\n            }\n        };\n    }\n\n    @Bean\n    CommandLineRunner initUserTable(LoginUserRepository repository) {\n        return args -&gt; {\n            if(((List&lt;LoginUser&gt;) repository.findAll()).size() == 0) {\n                LOG.info(&quot;Preloading &quot; + repository.save(\n                        new LoginUser(\n                                &quot;Jamie&quot;,\n                                &quot;Edwards&quot;,\n                                &quot;jamie.edwards&quot;,\n                                &quot;password1&quot;,\n                                userRolesRepository.findUserRoleById(1),\n                                true\n                        )\n                ));\n            }\n        };\n    }\n}\n</code></pre>\n<p>The full errors I'm getting are:</p>\n<pre><code>Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userRolesRepository' defined in com.jre.assetregister.database.repositories.loginuser.UserRolesRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract com.jre.assetregister.database.entities.loginuser.UserRole com.jre.assetregister.database.repositories.loginuser.UserRolesRepository.findUserRoleById(java.lang.Integer)! Reason: Failed to create query for method public abstract com.jre.assetregister.database.entities.loginuser.UserRole com.jre.assetregister.database.repositories.loginuser.UserRolesRepository.findUserRoleById(java.lang.Integer)! No property 'id' found for type 'UserRole'!; nested exception is java.lang.IllegalArgumentException: Failed to create query for method public abstract com.jre.assetregister.database.entities.loginuser.UserRole com.jre.assetregister.database.repositories.loginuser.UserRolesRepository.findUserRoleById(java.lang.Integer)! No property 'id' found for type 'UserRole'!\n\n\nCaused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract com.jre.assetregister.database.entities.loginuser.UserRole com.jre.assetregister.database.repositories.loginuser.UserRolesRepository.findUserRoleById(java.lang.Integer)! Reason: Failed to create query for method public abstract com.jre.assetregister.database.entities.loginuser.UserRole com.jre.assetregister.database.repositories.loginuser.UserRolesRepository.findUserRoleById(java.lang.Integer)! No property 'id' found for type 'UserRole'!; nested exception is java.lang.IllegalArgumentException: Failed to create query for method public abstract com.jre.assetregister.database.entities.loginuser.UserRole com.jre.assetregister.database.repositories.loginuser.UserRolesRepository.findUserRoleById(java.lang.Integer)! No property 'id' found for type 'UserRole'!\n\n\nCaused by: java.lang.IllegalArgumentException: Failed to create query for method public abstract com.jre.assetregister.database.entities.loginuser.UserRole com.jre.assetregister.database.repositories.loginuser.UserRolesRepository.findUserRoleById(java.lang.Integer)! No property 'id' found for type 'UserRole'!\n\n\nCaused by: org.springframework.data.mapping.PropertyReferenceException: No property 'id' found for type 'UserRole'!\n</code></pre>\n<p>I'm not entirely sure where or why it's trying to find a property of id when I clearly have set all types of UserRole.</p>\n"},{"tags":["java","amazon-s3"],"comments":[{"owner":{"account_id":3748384,"reputation":576,"user_id":3116512,"accept_rate":33,"display_name":"Mayur"},"score":0,"creation_date":1594885924,"post_id":62928869,"comment_id":111284902,"body_markdown":"Java sample code is available on aws developer guide, https://docs.aws.amazon.com/AmazonS3/latest/dev/AuthUsingTempSessionTokenJava.html, Make sure you are using same java aws sdk version. sometime it won&#39;t work with some sdk version.","body":"Java sample code is available on aws developer guide, <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/dev/AuthUsingTempSessionTokenJava.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/AmazonS3/latest/dev/&hellip;</a>, Make sure you are using same java aws sdk version. sometime it won&#39;t work with some sdk version."},{"owner":{"account_id":2458401,"reputation":729,"user_id":2143023,"accept_rate":11,"display_name":"Yosefarr"},"score":0,"creation_date":1594897923,"post_id":62928869,"comment_id":111291131,"body_markdown":"still not working","body":"still not working"},{"owner":{"account_id":3748384,"reputation":576,"user_id":3116512,"accept_rate":33,"display_name":"Mayur"},"score":0,"creation_date":1594908058,"post_id":62928869,"comment_id":111296550,"body_markdown":"What exception your code is throwing ?","body":"What exception your code is throwing ?"}],"owner":{"account_id":2458401,"reputation":729,"user_id":2143023,"accept_rate":11,"display_name":"Yosefarr"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2162,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649674043,"creation_date":1594881270,"question_id":62928869,"body_markdown":"i have the working python code that success to connect and get files from S3:\r\n\r\n    import boto3  # 1.7.4\r\n    import sys\r\n    \r\n    AWS_ACCESS_KEY_ID = &#39;....&#39;\r\n    AWS_SECRET_ACCESS_KEY = &#39;...&#39;\r\n    ROLE_NAME = &#39;...&#39;\r\n    EXTERNAL_ID = &#39;...&#39; \r\n    S3_BUCKET = &#39;my_bucket&#39;\r\n\r\n    ROLE_SESSION_NAME = &#39;data-platform1&#39;\r\n    BASE_ROLE_ARN = &#39;arn:aws:iam::794878508111:role/&#39;\r\n    ROLE_ARN = BASE_ROLE_ARN + ROLE_NAME\r\n    DURATION_SECONDS = 3600\r\n    client = boto3.client(\r\n        &#39;sts&#39;,\r\n        aws_access_key_id=AWS_ACCESS_KEY_ID,\r\n        aws_secret_access_key=AWS_SECRET_ACCESS_KEY\r\n    )\r\n    \r\n    role = client.assume_role(\r\n        RoleArn=ROLE_ARN,\r\n        RoleSessionName=ROLE_SESSION_NAME,\r\n        DurationSeconds=DURATION_SECONDS,\r\n        ExternalId=EXTERNAL_ID\r\n    )\r\n    session = boto3.session.Session(\r\n        aws_access_key_id=role[&#39;Credentials&#39;][&#39;AccessKeyId&#39;],\r\n        aws_secret_access_key=role[&#39;Credentials&#39;][&#39;SecretAccessKey&#39;],\r\n        aws_session_token=role[&#39;Credentials&#39;][&#39;SessionToken&#39;]\r\n    )\r\n    S3 = session.resource(&#39;s3&#39;)\r\n    my_bucket = S3.Bucket(S3_BUCKET)\r\n\r\nWhen i&#39;m using the java code:\r\n\r\n    AWSCredentials awsCredentials1 = new AWSCredentials() {\r\n                    @Override public String getAWSAccessKeyId() {\r\n                        return &quot;...&quot;;\r\n                    }\r\n                    @Override public String getAWSSecretKey() {\r\n                        return &quot;...&quot;;\r\n                    }\r\n                };\r\n    \r\n                AWSCredentials awsCredentials = new BasicAWSCredentials(awsCredentials1.getAWSAccessKeyId(), awsCredentials1.getAWSSecretKey());\r\n                AWSSecurityTokenService stsClient = AWSSecurityTokenServiceClientBuilder.standard()\r\n                        .withRegion(Regions.US_EAST_1)\r\n                        .withCredentials(new AWSStaticCredentialsProvider(awsCredentials))\r\n                        .build();\r\n    \r\n                AssumeRoleRequest roleRequest = new AssumeRoleRequest()\r\n                        .withRoleArn(&quot;arn:aws:iam::794878508111:role/DPA-Havasedge&quot;)\r\n                        .withRoleSessionName(&quot;...&quot;)\r\n                        .withDurationSeconds(3600)\r\n                        .withExternalId(&quot;...&quot;);\r\n    \r\n                AssumeRoleResult roleResponse = stsClient.assumeRole(roleRequest);\r\n                BasicSessionCredentials basicSessionCredentials = new BasicSessionCredentials(roleResponse.getCredentials().getAccessKeyId(), roleResponse.getCredentials().getSecretAccessKey(),\r\n                        roleResponse.getCredentials().getSessionToken());\r\n    \r\n    \r\n                AmazonS3Client s3Client = (AmazonS3Client) AmazonS3ClientBuilder.standard()\r\n                        .withCredentials(new AWSStaticCredentialsProvider(basicSessionCredentials))\r\n                        .withRegion(Regions.US_EAST_1)\r\n                        .build();\r\n    \r\n                List&lt;Bucket&gt; buckets = s3Client.listBuckets();\r\n\r\nI fail with the error:\r\n\r\n    com.amazonaws.services.s3.model.AmazonS3Exception: Access Denied (Service: Amazon S3; Status Code: 403; Error Code: AccessDenied; Request ID: 86CF26DA1AE92E98; S3 Extended Request ID: BqA2Pj9vgjrqanBKFY4XMtGgL7NwUCaiF+sC2jJvvRBlrmsdnFbI9XUDIY/NG3rke21xrCdvMYI=), S3 Extended Request ID: BqA2Pj9vgjrqanBKFY4XMtGgL7NwUCaiF+sC2jJvvRBlrmsdnFbI9XUDIY/NG3rke21xrCdvMYI=\r\n\r\n\r\nI&#39;m using the same connection parameters as in python:\r\n```\r\n(AWS_ACCESS_KEY_ID,AWS_SECRET_ACCESS_KEY,ROLE_NAME,EXTERNAL_ID,S3_BUCKET,ROLE_SESSION_NAME,BASE_ROLE_ARN,)\r\n```\r\n\r\nplease help be to find out what is wrong with my java code\r\n\r\nThanks \r\n\r\n---\r\n\r\nthe exception i receive :\r\n\r\n    com.amazonaws.services.s3.model.AmazonS3Exception: Access Denied (Service: Amazon S3; Status Code: 403; Error Code: AccessDenied; Request ID: 0100BB5ADF1A6E06; S3 Extended Request ID: S5KsCFckCOeyx6VGqPnrda56C+IMPttpeqfMLQ/dbAfYQlvKUJ+xhEt9ux1QgVzbHasXNA2yybI=), S3 Extended Request ID: S5KsCFckCOeyx6VGqPnrda56C+IMPttpeqfMLQ/dbAfYQlvKUJ+xhEt9ux1QgVzbHasXNA2yybI=\r\n\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.handleErrorResponse(AmazonHttpClient.java:1630)\r\n\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeOneRequest(AmazonHttpClient.java:1302)\r\n\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeHelper(AmazonHttpClient.java:1056)\r\n\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.doExecute(AmazonHttpClient.java:743)\r\n\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeWithTimer(AmazonHttpClient.java:717)\r\n\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.execute(AmazonHttpClient.java:699)\r\n\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.access$500(AmazonHttpClient.java:667)\r\n\tat com.amazonaws.http.AmazonHttpClient$RequestExecutionBuilderImpl.execute(AmazonHttpClient.java:649)\r\n\tat com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:513)\r\n\tat com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:4330)\r\n\tat com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:4277)\r\n\tat com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:4271)\r\n\tat com.amazonaws.services.s3.AmazonS3Client.listBuckets(AmazonS3Client.java:930)\r\n\tat com.amazonaws.services.s3.AmazonS3Client.listBuckets(AmazonS3Client.java:936)","title":"connect to AWS S3 using ARN Role in Java","body":"<p>i have the working python code that success to connect and get files from S3:</p>\n<pre><code>import boto3  # 1.7.4\nimport sys\n\nAWS_ACCESS_KEY_ID = '....'\nAWS_SECRET_ACCESS_KEY = '...'\nROLE_NAME = '...'\nEXTERNAL_ID = '...' \nS3_BUCKET = 'my_bucket'\n\nROLE_SESSION_NAME = 'data-platform1'\nBASE_ROLE_ARN = 'arn:aws:iam::794878508111:role/'\nROLE_ARN = BASE_ROLE_ARN + ROLE_NAME\nDURATION_SECONDS = 3600\nclient = boto3.client(\n    'sts',\n    aws_access_key_id=AWS_ACCESS_KEY_ID,\n    aws_secret_access_key=AWS_SECRET_ACCESS_KEY\n)\n\nrole = client.assume_role(\n    RoleArn=ROLE_ARN,\n    RoleSessionName=ROLE_SESSION_NAME,\n    DurationSeconds=DURATION_SECONDS,\n    ExternalId=EXTERNAL_ID\n)\nsession = boto3.session.Session(\n    aws_access_key_id=role['Credentials']['AccessKeyId'],\n    aws_secret_access_key=role['Credentials']['SecretAccessKey'],\n    aws_session_token=role['Credentials']['SessionToken']\n)\nS3 = session.resource('s3')\nmy_bucket = S3.Bucket(S3_BUCKET)\n</code></pre>\n<p>When i'm using the java code:</p>\n<pre><code>AWSCredentials awsCredentials1 = new AWSCredentials() {\n                @Override public String getAWSAccessKeyId() {\n                    return &quot;...&quot;;\n                }\n                @Override public String getAWSSecretKey() {\n                    return &quot;...&quot;;\n                }\n            };\n\n            AWSCredentials awsCredentials = new BasicAWSCredentials(awsCredentials1.getAWSAccessKeyId(), awsCredentials1.getAWSSecretKey());\n            AWSSecurityTokenService stsClient = AWSSecurityTokenServiceClientBuilder.standard()\n                    .withRegion(Regions.US_EAST_1)\n                    .withCredentials(new AWSStaticCredentialsProvider(awsCredentials))\n                    .build();\n\n            AssumeRoleRequest roleRequest = new AssumeRoleRequest()\n                    .withRoleArn(&quot;arn:aws:iam::794878508111:role/DPA-Havasedge&quot;)\n                    .withRoleSessionName(&quot;...&quot;)\n                    .withDurationSeconds(3600)\n                    .withExternalId(&quot;...&quot;);\n\n            AssumeRoleResult roleResponse = stsClient.assumeRole(roleRequest);\n            BasicSessionCredentials basicSessionCredentials = new BasicSessionCredentials(roleResponse.getCredentials().getAccessKeyId(), roleResponse.getCredentials().getSecretAccessKey(),\n                    roleResponse.getCredentials().getSessionToken());\n\n\n            AmazonS3Client s3Client = (AmazonS3Client) AmazonS3ClientBuilder.standard()\n                    .withCredentials(new AWSStaticCredentialsProvider(basicSessionCredentials))\n                    .withRegion(Regions.US_EAST_1)\n                    .build();\n\n            List&lt;Bucket&gt; buckets = s3Client.listBuckets();\n</code></pre>\n<p>I fail with the error:</p>\n<pre><code>com.amazonaws.services.s3.model.AmazonS3Exception: Access Denied (Service: Amazon S3; Status Code: 403; Error Code: AccessDenied; Request ID: 86CF26DA1AE92E98; S3 Extended Request ID: BqA2Pj9vgjrqanBKFY4XMtGgL7NwUCaiF+sC2jJvvRBlrmsdnFbI9XUDIY/NG3rke21xrCdvMYI=), S3 Extended Request ID: BqA2Pj9vgjrqanBKFY4XMtGgL7NwUCaiF+sC2jJvvRBlrmsdnFbI9XUDIY/NG3rke21xrCdvMYI=\n</code></pre>\n<p>I'm using the same connection parameters as in python:</p>\n<pre><code>(AWS_ACCESS_KEY_ID,AWS_SECRET_ACCESS_KEY,ROLE_NAME,EXTERNAL_ID,S3_BUCKET,ROLE_SESSION_NAME,BASE_ROLE_ARN,)\n</code></pre>\n<p>please help be to find out what is wrong with my java code</p>\n<p>Thanks</p>\n<hr />\n<p>the exception i receive :</p>\n<pre><code>com.amazonaws.services.s3.model.AmazonS3Exception: Access Denied (Service: Amazon S3; Status Code: 403; Error Code: AccessDenied; Request ID: 0100BB5ADF1A6E06; S3 Extended Request ID: S5KsCFckCOeyx6VGqPnrda56C+IMPttpeqfMLQ/dbAfYQlvKUJ+xhEt9ux1QgVzbHasXNA2yybI=), S3 Extended Request ID: S5KsCFckCOeyx6VGqPnrda56C+IMPttpeqfMLQ/dbAfYQlvKUJ+xhEt9ux1QgVzbHasXNA2yybI=\nat com.amazonaws.http.AmazonHttpClient$RequestExecutor.handleErrorResponse(AmazonHttpClient.java:1630)\nat com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeOneRequest(AmazonHttpClient.java:1302)\nat com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeHelper(AmazonHttpClient.java:1056)\nat com.amazonaws.http.AmazonHttpClient$RequestExecutor.doExecute(AmazonHttpClient.java:743)\nat com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeWithTimer(AmazonHttpClient.java:717)\nat com.amazonaws.http.AmazonHttpClient$RequestExecutor.execute(AmazonHttpClient.java:699)\nat com.amazonaws.http.AmazonHttpClient$RequestExecutor.access$500(AmazonHttpClient.java:667)\nat com.amazonaws.http.AmazonHttpClient$RequestExecutionBuilderImpl.execute(AmazonHttpClient.java:649)\nat com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:513)\nat com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:4330)\nat com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:4277)\nat com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:4271)\nat com.amazonaws.services.s3.AmazonS3Client.listBuckets(AmazonS3Client.java:930)\nat com.amazonaws.services.s3.AmazonS3Client.listBuckets(AmazonS3Client.java:936)\n</code></pre>\n"},{"tags":["java","encapsulation","getter"],"comments":[{"owner":{"account_id":8087134,"reputation":28351,"user_id":6094348,"accept_rate":100,"display_name":"Yousaf"},"score":1,"creation_date":1649654903,"post_id":71823020,"comment_id":126921524,"body_markdown":"Problem: You always create a _new_ instance of `ClassA` in `ClassB`","body":"Problem: You always create a <i>new</i> instance of <code>ClassA</code> in <code>ClassB</code>"},{"owner":{"account_id":4362282,"reputation":92954,"user_id":3558960,"accept_rate":60,"display_name":"Robby Cornelissen"},"score":1,"creation_date":1649654988,"post_id":71823020,"comment_id":126921537,"body_markdown":"The `classA` instance inside `ClassB` is not the same instance as the one you create in your driver. Different instances, different instance properties.","body":"The <code>classA</code> instance inside <code>ClassB</code> is not the same instance as the one you create in your driver. Different instances, different instance properties."},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1649655607,"post_id":71823020,"comment_id":126921647,"body_markdown":"make classA:a static","body":"make classA:a static"}],"answers":[{"tags":[],"owner":{"account_id":11331264,"reputation":121,"user_id":8308739,"display_name":"Khalil Harar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1649673722,"creation_date":1649655028,"answer_id":71823070,"question_id":71823020,"body_markdown":"You instantiate class A two times, the instance from class B and Driver class is different, you didn&#39;t assign value of a for instance in class B. you have to use one instance class of A\r\n\r\n    class ClassB {\r\n    private ClassA classA = new ClassA();\r\n\r\n    private int a = classA.getA();\r\n    public void setvalueOfA(int a){\r\n       this.a=a;\r\n       this.classA.setA(a);\r\n      }\r\n\r\n    public void print() {\r\n        System.out.println(&quot;value a in ClassB: &quot; + a);\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n    public class Main {\r\n    public static void main(String[] args) {\r\n        ClassB classB = new ClassB();\r\n        classB.setValueOfA(10);\r\n        \r\n\r\n        classB.classA.print();\r\n        classB.print();\r\n    }\r\n}","title":"Getters method is return value in same class but return 0 in another class","body":"<p>You instantiate class A two times, the instance from class B and Driver class is different, you didn't assign value of a for instance in class B. you have to use one instance class of A</p>\n<pre><code>class ClassB {\nprivate ClassA classA = new ClassA();\n\nprivate int a = classA.getA();\npublic void setvalueOfA(int a){\n   this.a=a;\n   this.classA.setA(a);\n  }\n\npublic void print() {\n    System.out.println(&quot;value a in ClassB: &quot; + a);\n}\n</code></pre>\n<p>}</p>\n<pre><code>public class Main {\npublic static void main(String[] args) {\n    ClassB classB = new ClassB();\n    classB.setValueOfA(10);\n    \n\n    classB.classA.print();\n    classB.print();\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":24896330,"reputation":11,"user_id":18767541,"display_name":"Ararya"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":276,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1649674022,"creation_date":1649654629,"question_id":71823020,"body_markdown":"First, I&#39;m new in java and programming. I have a project that has OOP in it. Before I started writing this question, I already searched for the answer on the internet. There are some question like this, but I think that&#39;s not a same question that I really mean.\r\n\r\nI made an encapsulation class that can setter &amp; getter value in ClassA. Here&#39;s the code:\r\n```\r\nclass ClassA {\r\n    private int a;\r\n\r\n    public void setA(int a) {\r\n        this.a = a;\r\n    }\r\n\r\n    public int getA() {\r\n        return a;\r\n    }\r\n\r\n    public void print() {\r\n        System.out.println(&quot;value a in ClassA: &quot; + a);\r\n    }\r\n}\r\n```\r\n\r\nI&#39;m trying to call that getter from ClassB and initialize it in &quot;private int a&quot;. Here&#39;s the code:\r\n```\r\nclass ClassB {\r\n    private ClassA classA = new ClassA();\r\n\r\n    private int a = classA.getA();\r\n\r\n    public void print() {\r\n        System.out.println(&quot;value a in ClassB: &quot; + a);\r\n    }\r\n}\r\n```\r\nAnd here&#39;s the driver code:\r\n```\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        ClassA classA = new ClassA();\r\n        ClassB classB = new ClassB();\r\n    \r\n        classA.setA(10);\r\n\r\n        classA.print();\r\n        classB.print();\r\n    }\r\n}\r\n```\r\n\r\nThe output from driver code is:\r\n```none\r\nvalue a in classA: 10\r\nvalue a in classB: 0\r\n```\r\n\r\nThe output that I want is:\r\n```none\r\nvalue a in classA: 10\r\nvalue a in classB: 10\r\n```\r\n\r\nIn my expectation, when I call setA with value 10 in ClassA, I can return that value from getA() into ClassB and initialize it to &quot;int a&quot; in that class. But when I try to print it, the value &quot;int a&quot; in ClassB is always set to 0 but &quot;int a&quot; in ClassA is initialized and print the correct value. \r\n\r\nWhen I just call getA() in driver code like this:\r\n```\r\nSystem.out.println(classA.getA());\r\n```\r\n\r\nIt can still print a correct value of 10, so that means that the method still can return a value. \r\n\r\nThe problem is, I just can&#39;t get that return value into another class. Please help me to fix that return value from getter can be initialized in another class.","title":"Getters method is return value in same class but return 0 in another class","body":"<p>First, I'm new in java and programming. I have a project that has OOP in it. Before I started writing this question, I already searched for the answer on the internet. There are some question like this, but I think that's not a same question that I really mean.</p>\n<p>I made an encapsulation class that can setter &amp; getter value in ClassA. Here's the code:</p>\n<pre><code>class ClassA {\n    private int a;\n\n    public void setA(int a) {\n        this.a = a;\n    }\n\n    public int getA() {\n        return a;\n    }\n\n    public void print() {\n        System.out.println(&quot;value a in ClassA: &quot; + a);\n    }\n}\n</code></pre>\n<p>I'm trying to call that getter from ClassB and initialize it in &quot;private int a&quot;. Here's the code:</p>\n<pre><code>class ClassB {\n    private ClassA classA = new ClassA();\n\n    private int a = classA.getA();\n\n    public void print() {\n        System.out.println(&quot;value a in ClassB: &quot; + a);\n    }\n}\n</code></pre>\n<p>And here's the driver code:</p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        ClassA classA = new ClassA();\n        ClassB classB = new ClassB();\n    \n        classA.setA(10);\n\n        classA.print();\n        classB.print();\n    }\n}\n</code></pre>\n<p>The output from driver code is:</p>\n<pre class=\"lang-none prettyprint-override\"><code>value a in classA: 10\nvalue a in classB: 0\n</code></pre>\n<p>The output that I want is:</p>\n<pre class=\"lang-none prettyprint-override\"><code>value a in classA: 10\nvalue a in classB: 10\n</code></pre>\n<p>In my expectation, when I call setA with value 10 in ClassA, I can return that value from getA() into ClassB and initialize it to &quot;int a&quot; in that class. But when I try to print it, the value &quot;int a&quot; in ClassB is always set to 0 but &quot;int a&quot; in ClassA is initialized and print the correct value.</p>\n<p>When I just call getA() in driver code like this:</p>\n<pre><code>System.out.println(classA.getA());\n</code></pre>\n<p>It can still print a correct value of 10, so that means that the method still can return a value.</p>\n<p>The problem is, I just can't get that return value into another class. Please help me to fix that return value from getter can be initialized in another class.</p>\n"},{"tags":["java","algorithm","sorting","data-structures"],"comments":[{"owner":{"account_id":22571027,"reputation":5269,"user_id":16757174,"display_name":"kcsquared"},"score":1,"creation_date":1649645489,"post_id":71822077,"comment_id":126920178,"body_markdown":"If your sequence is `3,5,8,6,2,3,4`, why isn&#39;t 5 the closest value that&#39;s greater than or equal to 5?","body":"If your sequence is <code>3,5,8,6,2,3,4</code>, why isn&#39;t 5 the closest value that&#39;s greater than or equal to 5?"}],"answers":[{"tags":[],"owner":{"account_id":7142980,"reputation":323253,"user_id":5459839,"display_name":"trincot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649673983,"creation_date":1649673983,"answer_id":71826454,"question_id":71822077,"body_markdown":"You don&#39;t need a complex data structure. All you need is the variable `minimum` that has the given value (5 in your case) and a variable `closest` that will have the result *so far*. \r\n\r\nWhen you start, that `closest` variable will need to be some predefined value that is extremely large. For instance, if you work with floating point data type, you can use *infinity* as an initial value. \r\n\r\nThen, if ever you encounter an input value that is not less than `minimum`, but is less than `closest`, update the variable `closest` so it becomes equal to that input value.\r\n\r\nAfter doing that for all input values, `closest` will have the desired value.","title":"Data structure for finding an element with closest index value to x that is also greater than x","body":"<p>You don't need a complex data structure. All you need is the variable <code>minimum</code> that has the given value (5 in your case) and a variable <code>closest</code> that will have the result <em>so far</em>.</p>\n<p>When you start, that <code>closest</code> variable will need to be some predefined value that is extremely large. For instance, if you work with floating point data type, you can use <em>infinity</em> as an initial value.</p>\n<p>Then, if ever you encounter an input value that is not less than <code>minimum</code>, but is less than <code>closest</code>, update the variable <code>closest</code> so it becomes equal to that input value.</p>\n<p>After doing that for all input values, <code>closest</code> will have the desired value.</p>\n"}],"owner":{"account_id":11171135,"reputation":1,"user_id":8198066,"display_name":"querying_questioner"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":94,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1649673983,"creation_date":1649643550,"question_id":71822077,"body_markdown":"Given a file with integers to be read in one line at a time (one integer at a time), what is the most efficient method/ data structure for finding the element that is closest to x (by line or index both equivalent in this case) that has a value greater than or equal to x. \r\nEx. if sequence of numbers were read in as follows: 3,5,8,6,2,3,4 and the next value was to be 5 what is the most efficient data structure and implementation to determine that the closest value that&#39;s greater than or equal to 5 is 6?  ","title":"Data structure for finding an element with closest index value to x that is also greater than x","body":"<p>Given a file with integers to be read in one line at a time (one integer at a time), what is the most efficient method/ data structure for finding the element that is closest to x (by line or index both equivalent in this case) that has a value greater than or equal to x.\nEx. if sequence of numbers were read in as follows: 3,5,8,6,2,3,4 and the next value was to be 5 what is the most efficient data structure and implementation to determine that the closest value that's greater than or equal to 5 is 6?</p>\n"},{"tags":["java","facebook-graph-api","chatbot","facebook-messenger-bot","facebook-webhooks"],"answers":[{"tags":[],"owner":{"account_id":15490363,"reputation":13,"user_id":11850476,"display_name":"MSWS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649667604,"creation_date":1649667604,"answer_id":71825145,"question_id":71825053,"body_markdown":"You&#39;re responding to yourself I assume. Similar to how the Discord API works, your `post` method is being called when you receive your own message. You most likely want to check if the message author is from yourself.","title":"A Facebook Messenger BOT With Java","body":"<p>You're responding to yourself I assume. Similar to how the Discord API works, your <code>post</code> method is being called when you receive your own message. You most likely want to check if the message author is from yourself.</p>\n"}],"owner":{"account_id":24578827,"reputation":1,"user_id":18484282,"display_name":"liban11"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":460,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649673914,"creation_date":1649667192,"question_id":71825053,"body_markdown":"I try to create a facebook messenger bot\r\nI  tried Victor de la Cruz method,the code is below\r\n, and here is the origin code:\r\nhttps://www.codementor.io/@vcg_cruz/a-facebook-messenger-bot-m2g6wgcxb#comments-m2g6wgcxb\r\nit works but when I send a message it generates an infinite loop of conversation\r\n[this the result screen shot][1]\r\n\r\n\r\n\r\n        @RestController()\r\n    @RequestMapping(&quot;webhook&quot;)\r\n    public class WebHook {\r\n    \r\n        private final String PAGE_TOKEN =&quot;THIS_IS_THE_TOKEN_YOU_COPIED_BEFORE&quot;;\r\n        private final String VERIFY_TOKEN=&quot;A_SECRET_VERIFY_TOKEN&quot;;\r\n        //this is for reply messages\r\n        private final String FB_MSG_URL=&quot;https://graph.facebook.com/v2.6/me/messages?access_token=&quot;\r\n                + PAGE_TOKEN;\r\n    \r\n      //logger to watch whats happening in our bot\r\n        private final Logger logger = LoggerFactory.getLogger(WebHook.class);\r\n        private final RestTemplate template = new RestTemplate();\r\n    \r\n    \r\n      //This is necessary for register a webhook in facebook \r\n        @GetMapping()\r\n        @ResponseStatus(HttpStatus.OK)\r\n        public String get(@RequestParam(name = &quot;hub.verify_token&quot;)String token,\r\n                        @RequestParam(name = &quot;hub.challenge&quot;)String challenge){\r\n            if(token!=null &amp;&amp; !token.isEmpty() &amp;&amp; token.equals(VERIFY_TOKEN)){\r\n                return challenge;\r\n            }else{\r\n                return &quot;Wrong Token&quot;;\r\n            }\r\n        }\r\n    \r\n      //This method  reply all messages with: &#39;This is a test message&#39;\r\n        @PostMapping\r\n        @ResponseStatus(HttpStatus.OK)\r\n        public void post(@RequestBody FacebookHookRequest request){\r\n            logger.info(&quot;Message from chat: {}&quot;,request);\r\n            request.getEntry().forEach(e-&gt;{\r\n                e.getMessaging().forEach(m-&gt;{\r\n                    String id = m.getSender().get(&quot;id&quot;);\r\n                    sendReply(id,&quot;This is a test message&quot;);\r\n                });\r\n            });\r\n        }\r\n    \r\n        private void sendReply(String id,String text){\r\n            FacebookMessageResponse response = new FacebookMessageResponse();\r\n            response.setMessage_type(&quot;text&quot;);\r\n            response.getRecipient().put(&quot;id&quot;,id);\r\n            response.getMessage().put(&quot;text&quot;,text);\r\n            HttpEntity&lt;FacebookMessageResponse&gt; entity = new HttpEntity&lt;&gt;(response);\r\n            String result = template.postForEntity(FB_MSG_URL,entity,String.class).getBody();\r\n            logger.info(&quot;Message result: {}&quot;,result);\r\n    \r\n        }\r\n    }\r\n    /************************************/\r\n    @Data\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @ToString\r\n    public class FacebookEntry implements Serializable {\r\n        private String id;\r\n        private Long time;\r\n        private List&lt;FacebookMessaging&gt; messaging = new ArrayList&lt;&gt;();\r\n    \r\n    }\r\n    \r\n    @Data\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @ToString\r\n    public class FacebookHookRequest implements Serializable {\r\n        private String object;\r\n        private List&lt;FacebookEntry&gt; entry = new ArrayList&lt;&gt;();\r\n    }\r\n    \r\n    \r\n    @Data\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @ToString\r\n    public class FacebookMessage implements Serializable {\r\n        private String mid;\r\n        private Long seq;\r\n        private String text;\r\n    }\r\n    \r\n    @Data\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @ToString\r\n    public class FacebookMessageResponse implements Serializable {\r\n        private String message_type;\r\n        private Map&lt;String,String&gt; recipient = new HashMap&lt;&gt;();\r\n        private Map&lt;String,String&gt; message = new HashMap&lt;&gt;();\r\n    }\r\n    \r\n    \r\n    @Data\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @ToString\r\n    public class FacebookMessaging implements Serializable {\r\n        private Map&lt;String,String&gt; sender;\r\n        private Map&lt;String,String&gt; recipient;\r\n        private Long timestamp;\r\n        private FacebookMessage message;\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/47BLx.jpg","title":"A Facebook Messenger BOT With Java","body":"<p>I try to create a facebook messenger bot\nI  tried Victor de la Cruz method,the code is below\n, and here is the origin code:\n<a href=\"https://www.codementor.io/@vcg_cruz/a-facebook-messenger-bot-m2g6wgcxb#comments-m2g6wgcxb\" rel=\"nofollow noreferrer\">https://www.codementor.io/@vcg_cruz/a-facebook-messenger-bot-m2g6wgcxb#comments-m2g6wgcxb</a>\nit works but when I send a message it generates an infinite loop of conversation\n<a href=\"https://i.stack.imgur.com/47BLx.jpg\" rel=\"nofollow noreferrer\">this the result screen shot</a></p>\n<pre><code>    @RestController()\n@RequestMapping(&quot;webhook&quot;)\npublic class WebHook {\n\n    private final String PAGE_TOKEN =&quot;THIS_IS_THE_TOKEN_YOU_COPIED_BEFORE&quot;;\n    private final String VERIFY_TOKEN=&quot;A_SECRET_VERIFY_TOKEN&quot;;\n    //this is for reply messages\n    private final String FB_MSG_URL=&quot;https://graph.facebook.com/v2.6/me/messages?access_token=&quot;\n            + PAGE_TOKEN;\n\n  //logger to watch whats happening in our bot\n    private final Logger logger = LoggerFactory.getLogger(WebHook.class);\n    private final RestTemplate template = new RestTemplate();\n\n\n  //This is necessary for register a webhook in facebook \n    @GetMapping()\n    @ResponseStatus(HttpStatus.OK)\n    public String get(@RequestParam(name = &quot;hub.verify_token&quot;)String token,\n                    @RequestParam(name = &quot;hub.challenge&quot;)String challenge){\n        if(token!=null &amp;&amp; !token.isEmpty() &amp;&amp; token.equals(VERIFY_TOKEN)){\n            return challenge;\n        }else{\n            return &quot;Wrong Token&quot;;\n        }\n    }\n\n  //This method  reply all messages with: 'This is a test message'\n    @PostMapping\n    @ResponseStatus(HttpStatus.OK)\n    public void post(@RequestBody FacebookHookRequest request){\n        logger.info(&quot;Message from chat: {}&quot;,request);\n        request.getEntry().forEach(e-&gt;{\n            e.getMessaging().forEach(m-&gt;{\n                String id = m.getSender().get(&quot;id&quot;);\n                sendReply(id,&quot;This is a test message&quot;);\n            });\n        });\n    }\n\n    private void sendReply(String id,String text){\n        FacebookMessageResponse response = new FacebookMessageResponse();\n        response.setMessage_type(&quot;text&quot;);\n        response.getRecipient().put(&quot;id&quot;,id);\n        response.getMessage().put(&quot;text&quot;,text);\n        HttpEntity&lt;FacebookMessageResponse&gt; entity = new HttpEntity&lt;&gt;(response);\n        String result = template.postForEntity(FB_MSG_URL,entity,String.class).getBody();\n        logger.info(&quot;Message result: {}&quot;,result);\n\n    }\n}\n/************************************/\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@ToString\npublic class FacebookEntry implements Serializable {\n    private String id;\n    private Long time;\n    private List&lt;FacebookMessaging&gt; messaging = new ArrayList&lt;&gt;();\n\n}\n\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@ToString\npublic class FacebookHookRequest implements Serializable {\n    private String object;\n    private List&lt;FacebookEntry&gt; entry = new ArrayList&lt;&gt;();\n}\n\n\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@ToString\npublic class FacebookMessage implements Serializable {\n    private String mid;\n    private Long seq;\n    private String text;\n}\n\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@ToString\npublic class FacebookMessageResponse implements Serializable {\n    private String message_type;\n    private Map&lt;String,String&gt; recipient = new HashMap&lt;&gt;();\n    private Map&lt;String,String&gt; message = new HashMap&lt;&gt;();\n}\n\n\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@ToString\npublic class FacebookMessaging implements Serializable {\n    private Map&lt;String,String&gt; sender;\n    private Map&lt;String,String&gt; recipient;\n    private Long timestamp;\n    private FacebookMessage message;\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":7373320,"reputation":17364,"user_id":5612858,"display_name":"Arnaud"},"score":0,"creation_date":1649662436,"post_id":71824123,"comment_id":126923489,"body_markdown":"See if this helps : https://stackoverflow.com/questions/7925053/how-to-post-byte-array-via-resttemplate","body":"See if this helps : <a href=\"https://stackoverflow.com/questions/7925053/how-to-post-byte-array-via-resttemplate\" title=\"how to post byte array via resttemplate\">stackoverflow.com/questions/7925053/&hellip;</a>"},{"owner":{"account_id":19534415,"reputation":539,"user_id":14293486,"display_name":"Marcin_S"},"score":0,"creation_date":1649665537,"post_id":71824123,"comment_id":126924534,"body_markdown":"It&#39;s seems to different from my issue.","body":"It&#39;s seems to different from my issue."}],"owner":{"account_id":19534415,"reputation":539,"user_id":14293486,"display_name":"Marcin_S"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":228,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649673561,"creation_date":1649662294,"question_id":71824123,"body_markdown":"I want to send the file via API request, below is my code:\r\n\r\n    MultiValueMap&lt;String, Object&gt; body  = new LinkedMultiValueMap&lt;&gt;();\r\n    FileSystemResource file = new FileSystemResource(&quot;my_file_path&quot;);\r\n    body.add(&quot;dagFile&quot;, file);\r\n\r\n    HttpEntity&lt;MultiValueMap&lt;String, Object&gt;&gt; requestEntity\r\n            = new HttpEntity&lt;&gt;(body, headers);\r\n\r\n    RestTemplate restTemplate = restTemplate();\r\n\r\n    ResponseEntity&lt;String&gt; response = restTemplate\r\n            .postForEntity(serverUrl, requestEntity, String.class);\r\n\r\nHere i am providing the `file path` i.e file should be there present in the disk, is there any way via which i can create file in-memory and process my request :\r\nSudo Code :\r\n   \r\n\r\n        String filecontent = &quot;12345&quot;;\r\n        MultiValueMap&lt;String, Object&gt; body  = new LinkedMultiValueMap&lt;&gt;();\r\n        FileSystemResource file = new FileSystemResource(filecontent); // passing content as string\r\n        body.add(&quot;dagFile&quot;, file);","title":"Send File to API POST Request","body":"<p>I want to send the file via API request, below is my code:</p>\n<pre><code>MultiValueMap&lt;String, Object&gt; body  = new LinkedMultiValueMap&lt;&gt;();\nFileSystemResource file = new FileSystemResource(&quot;my_file_path&quot;);\nbody.add(&quot;dagFile&quot;, file);\n\nHttpEntity&lt;MultiValueMap&lt;String, Object&gt;&gt; requestEntity\n        = new HttpEntity&lt;&gt;(body, headers);\n\nRestTemplate restTemplate = restTemplate();\n\nResponseEntity&lt;String&gt; response = restTemplate\n        .postForEntity(serverUrl, requestEntity, String.class);\n</code></pre>\n<p>Here i am providing the <code>file path</code> i.e file should be there present in the disk, is there any way via which i can create file in-memory and process my request :\nSudo Code :</p>\n<pre><code>    String filecontent = &quot;12345&quot;;\n    MultiValueMap&lt;String, Object&gt; body  = new LinkedMultiValueMap&lt;&gt;();\n    FileSystemResource file = new FileSystemResource(filecontent); // passing content as string\n    body.add(&quot;dagFile&quot;, file);\n</code></pre>\n"},{"tags":["java","pdfbox"],"comments":[{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1551097222,"post_id":54862830,"comment_id":96502544,"body_markdown":"This is contradictional. Do you want to save all pages in a PDDocument or all pages in (different) PDDocuments ?","body":"This is contradictional. Do you want to save all pages in a PDDocument or all pages in (different) PDDocuments ?"}],"answers":[{"tags":[],"owner":{"account_id":15147294,"reputation":4578,"user_id":10931455,"display_name":"Freddy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551088741,"creation_date":1551088404,"answer_id":54863480,"question_id":54862830,"body_markdown":"Please try (untested):\r\n\r\n    PDDocument pageDocument = new PDDocument();\r\n    for (int i = 0; i &lt; pdDocument.getNumberOfPages(); i++) {\r\n        pageDocument.add(pdDocument.getPage(i));\r\n    }\r\n    pageDocument.save(&quot;c:\\temp\\page&quot;);\r\n\r\nIt should be possible to add multiple pages to a PDDocument.","title":"How do I save all the pages of a PDDocument in seperate .pdf files?","body":"<p>Please try (untested):</p>\n\n<pre><code>PDDocument pageDocument = new PDDocument();\nfor (int i = 0; i &lt; pdDocument.getNumberOfPages(); i++) {\n    pageDocument.add(pdDocument.getPage(i));\n}\npageDocument.save(\"c:\\temp\\page\");\n</code></pre>\n\n<p>It should be possible to add multiple pages to a PDDocument.</p>\n"},{"tags":[],"owner":{"account_id":11146382,"reputation":283,"user_id":8180996,"display_name":"Kiran Kandel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649673537,"creation_date":1649669872,"answer_id":71825633,"question_id":54862830,"body_markdown":"Use splitter to split the PDDocument into seperate PDDocuments, simple example can be\r\n\r\n    Splitter splitter = new Splitter();\r\n    splitter.setStartPage(start); //page to start from\r\n    splitter.setEndPage(end); //page to end at\r\n    List&lt;PDDocument&gt; splittedItems = splitter.split(doc); //doc is original document\r\n    for(int index = 0; index &lt; splittedItem.length(); index++){\r\n        splittedItem[index].save(&quot;destination to save&quot;);\r\n    }\r\n\r\nIn your case it would be, \r\n\r\n  \r\n\r\n      int numberOfPages = pdDocument.getNumberOfPages();\r\n      Splitter splitter = new Splitter();\r\n      splitter.setStartPage(1);\r\n      splitter.setEndPage(numberOfPages); //page to end at\r\n      List&lt;PDDocument&gt; splittedItems = splitter.split(pdDocument); \r\n        for(int index = 0; index &lt; splittedItem.length(); index++){\r\n            splittedItem[index].save(&quot;c:\\temp\\page&quot; + (index+1));\r\n        }\r\n\r\nFor more information you can check out documentation \r\nhttps://pdfbox.apache.org/docs/2.0.3/javadocs/org/apache/pdfbox/multipdf/Splitter.html\r\n\r\n\r\n\r\n\r\n\r\n","title":"How do I save all the pages of a PDDocument in seperate .pdf files?","body":"<p>Use splitter to split the PDDocument into seperate PDDocuments, simple example can be</p>\n<pre><code>Splitter splitter = new Splitter();\nsplitter.setStartPage(start); //page to start from\nsplitter.setEndPage(end); //page to end at\nList&lt;PDDocument&gt; splittedItems = splitter.split(doc); //doc is original document\nfor(int index = 0; index &lt; splittedItem.length(); index++){\n    splittedItem[index].save(&quot;destination to save&quot;);\n}\n</code></pre>\n<p>In your case it would be,</p>\n<pre><code>  int numberOfPages = pdDocument.getNumberOfPages();\n  Splitter splitter = new Splitter();\n  splitter.setStartPage(1);\n  splitter.setEndPage(numberOfPages); //page to end at\n  List&lt;PDDocument&gt; splittedItems = splitter.split(pdDocument); \n    for(int index = 0; index &lt; splittedItem.length(); index++){\n        splittedItem[index].save(&quot;c:\\temp\\page&quot; + (index+1));\n    }\n</code></pre>\n<p>For more information you can check out documentation\n<a href=\"https://pdfbox.apache.org/docs/2.0.3/javadocs/org/apache/pdfbox/multipdf/Splitter.html\" rel=\"nofollow noreferrer\">https://pdfbox.apache.org/docs/2.0.3/javadocs/org/apache/pdfbox/multipdf/Splitter.html</a></p>\n"}],"owner":{"account_id":14590229,"reputation":97,"user_id":10537620,"display_name":"Bladerunner"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":826,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1649673537,"creation_date":1551086108,"question_id":54862830,"body_markdown":"I want to save all the pages of a PDDocument in a seperate pdf file.\r\nI programmed it like this:\r\n\r\n    int numberOfPages = pdDocument.getNumberOfPages();\r\n    for (int i = 0; i &lt; numberOfPages; i++) {\r\n        PDDocument pageDocument = new PDDocument();\r\n        PDPage page = pdDocument.getPage(i);\r\n        pageDocument.add(page);\r\n        pageDocument.save(&quot;c:\\temp\\page&quot; + (i+1));\r\n    }\r\n\r\nIs this the correct way to do it? Do I have to create each time a new PDDocument and add the page to it or is there a better way to save the pages of a PDDocument individually?\r\n\r\nTo be more clear:\r\nI want to save each page in a PDDocument in separate pdfs.\r\nSo, if I have a PDDocument with 25 pages in it, I want to save each page in a separate pdf.&lt;br&gt;\r\nLike this:&lt;br&gt;\r\n-page1.pdf&lt;br&gt;\r\n-page2.pdf&lt;br&gt;\r\n-page3.pdf&lt;br&gt;\r\n...&lt;br&gt;\r\n-page25.pdf&lt;br&gt;\r\n\r\nI&#39;m just wondering if I have to make a new PDDocument object for each page to save it to a pdf.","title":"How do I save all the pages of a PDDocument in seperate .pdf files?","body":"<p>I want to save all the pages of a PDDocument in a seperate pdf file.\nI programmed it like this:</p>\n\n<pre><code>int numberOfPages = pdDocument.getNumberOfPages();\nfor (int i = 0; i &lt; numberOfPages; i++) {\n    PDDocument pageDocument = new PDDocument();\n    PDPage page = pdDocument.getPage(i);\n    pageDocument.add(page);\n    pageDocument.save(\"c:\\temp\\page\" + (i+1));\n}\n</code></pre>\n\n<p>Is this the correct way to do it? Do I have to create each time a new PDDocument and add the page to it or is there a better way to save the pages of a PDDocument individually?</p>\n\n<p>To be more clear:\nI want to save each page in a PDDocument in separate pdfs.\nSo, if I have a PDDocument with 25 pages in it, I want to save each page in a separate pdf.<br>\nLike this:<br>\n-page1.pdf<br>\n-page2.pdf<br>\n-page3.pdf<br>\n...<br>\n-page25.pdf<br></p>\n\n<p>I'm just wondering if I have to make a new PDDocument object for each page to save it to a pdf.</p>\n"},{"tags":["java","stream","hashmap"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1649620287,"post_id":71820048,"comment_id":126916173,"body_markdown":"What are you trying to sort here? (update: can you describe the goal, and also add more code to reproduce the exception please)","body":"What are you trying to sort here? (update: can you describe the goal, and also add more code to reproduce the exception please)"},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1649621531,"post_id":71820048,"comment_id":126916463,"body_markdown":"Your example code works nice for me - as long as I don&#39;t add any map entries with a numeric key and a `null` value.","body":"Your example code works nice for me - as long as I don&#39;t add any map entries with a numeric key and a <code>null</code> value."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1649624024,"post_id":71820048,"comment_id":126917009,"body_markdown":"Where do `n` and `arr` come frome?  Your update looks weird and doesn&#39;t compile, probably you have a typo in `if(hm.get(arr[i]!=null))` - right parenthesis in the wrong place? Also your `hm.put(arr[i], hm.get(arr[i] + 1);` is missing a right parenthesis and now it is not clear, where it should go.","body":"Where do <code>n</code> and <code>arr</code> come frome?  Your update looks weird and doesn&#39;t compile, probably you have a typo in <code>if(hm.get(arr[i]!=null))</code> - right parenthesis in the wrong place? Also your <code>hm.put(arr[i], hm.get(arr[i] + 1);</code> is missing a right parenthesis and now it is not clear, where it should go."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1649624859,"post_id":71820048,"comment_id":126917165,"body_markdown":"I actually could reproduce the problem with some fixes to make it compile (just guessed what might be correct) and this short array: `Integer[] arr = new Integer[] {2,1,2};` If you can confirm that this causes the problem for you as well (and maybe fix your code), I can post an answer","body":"I actually could reproduce the problem with some fixes to make it compile (just guessed what might be correct) and this short array: <code>Integer[] arr = new Integer[] {2,1,2};</code> If you can confirm that this causes the problem for you as well (and maybe fix your code), I can post an answer"}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1649621372,"creation_date":1649621372,"answer_id":71820184,"question_id":71820048,"body_markdown":"Your error says you have a null value in the map so that is what is causing the error.  So either ensure there are no nulls when the map is constructed or filter them out as shown below.\r\n```\r\nList&lt;Integer&gt; temp= hm.entrySet()\r\n                .stream()\r\n                .filter(e -&gt; e.getValue() != null) // &lt;-- added\r\n                .sorted(Entry.comparingByValue())\r\n                .map(Entry::getKey)\r\n                .collect(Collectors.toList());","title":"Sorting an Map using streams throws&quot;Cannot invoke &quot;java.lang.Comparable.compareTo(Object) stream&quot;","body":"<p>Your error says you have a null value in the map so that is what is causing the error.  So either ensure there are no nulls when the map is constructed or filter them out as shown below.</p>\n<pre><code>List&lt;Integer&gt; temp= hm.entrySet()\n                .stream()\n                .filter(e -&gt; e.getValue() != null) // &lt;-- added\n                .sorted(Entry.comparingByValue())\n                .map(Entry::getKey)\n                .collect(Collectors.toList());\n</code></pre>\n"}],"owner":{"account_id":16631224,"reputation":109,"user_id":12019034,"display_name":"JAGRITI BANSAL"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1921,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71820184,"answer_count":1,"score":0,"last_activity_date":1649673481,"creation_date":1649620155,"question_id":71820048,"body_markdown":"I have a HashMap with an Integer key and value. I am trying to sort this hashMap by values and store the keys of this sorted map in a list.\r\n\r\nI want to use stream to sort HashMap. Below is my code snippet\r\n\r\n    Map&lt;Integer, Integer&gt; hm\r\n                = new HashMap&lt;Integer, Integer&gt;();\r\n    \r\n    int arr[]=new int[]{1,2,2,3,3,3,4,4,5};\r\n    n-arr.length;\r\n\r\n        for (int i = 0; i &lt; n; i++) {\r\n            if(hm.get(arr[i])!=null)\r\n                hm.put(arr[i], hm.get(arr[i]) + 1);\r\n            else\r\n                hm.put(arr[i],1);\r\n    \r\n    List&lt;Integer&gt; temp= hm.entrySet()\r\n                    .stream()\r\n                    .sorted(Map.Entry.comparingByValue())\r\n                    .map(entry -&gt; entry.getKey())\r\n                    .collect(Collectors.toList());\r\n\r\nHow can I fix it?\r\n\r\nThe error is thrown:\r\n\r\n    java.lang.NullPointerException: Cannot invoke &quot;java.lang.Comparable.compareTo(Object)&quot; because the return value of &quot;java.util.Map$Entry.getValue()&quot; is null\r\n      at line 541, java.base/java.util.Map$Entry.lambda$comparingByValue$1065357e$1\r\n      at line 355, java.base/java.util.TimSort.countRunAndMakeAscending\r\n      at line 220, java.base/java.util.TimSort.sort\r\n      at line 1307, java.base/java.util.Arrays.sort\r\n      at line 353, java.base/java.util.stream.SortedOps$SizedRefSortingSink.end\r\n      at line 510, java.base/java.util.stream.AbstractPipeline.copyInto\r\n      at line 499, java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto\r\n      at line 921, java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential\r\n      at line 234, java.base/java.util.stream.AbstractPipeline.evaluate\r\n      at line 682, java.base/java.util.stream.ReferencePipeline.collect\r\n      at line 16, Solution.topKFrequent\r\n      at line 54, __DriverSolution__.__helper__\r\n      at line 87, __Driver__.main\r\n\r\n","title":"Sorting an Map using streams throws&quot;Cannot invoke &quot;java.lang.Comparable.compareTo(Object) stream&quot;","body":"<p>I have a HashMap with an Integer key and value. I am trying to sort this hashMap by values and store the keys of this sorted map in a list.</p>\n<p>I want to use stream to sort HashMap. Below is my code snippet</p>\n<pre><code>Map&lt;Integer, Integer&gt; hm\n            = new HashMap&lt;Integer, Integer&gt;();\n\nint arr[]=new int[]{1,2,2,3,3,3,4,4,5};\nn-arr.length;\n\n    for (int i = 0; i &lt; n; i++) {\n        if(hm.get(arr[i])!=null)\n            hm.put(arr[i], hm.get(arr[i]) + 1);\n        else\n            hm.put(arr[i],1);\n\nList&lt;Integer&gt; temp= hm.entrySet()\n                .stream()\n                .sorted(Map.Entry.comparingByValue())\n                .map(entry -&gt; entry.getKey())\n                .collect(Collectors.toList());\n</code></pre>\n<p>How can I fix it?</p>\n<p>The error is thrown:</p>\n<pre><code>java.lang.NullPointerException: Cannot invoke &quot;java.lang.Comparable.compareTo(Object)&quot; because the return value of &quot;java.util.Map$Entry.getValue()&quot; is null\n  at line 541, java.base/java.util.Map$Entry.lambda$comparingByValue$1065357e$1\n  at line 355, java.base/java.util.TimSort.countRunAndMakeAscending\n  at line 220, java.base/java.util.TimSort.sort\n  at line 1307, java.base/java.util.Arrays.sort\n  at line 353, java.base/java.util.stream.SortedOps$SizedRefSortingSink.end\n  at line 510, java.base/java.util.stream.AbstractPipeline.copyInto\n  at line 499, java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto\n  at line 921, java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential\n  at line 234, java.base/java.util.stream.AbstractPipeline.evaluate\n  at line 682, java.base/java.util.stream.ReferencePipeline.collect\n  at line 16, Solution.topKFrequent\n  at line 54, __DriverSolution__.__helper__\n  at line 87, __Driver__.main\n</code></pre>\n"},{"tags":["java","unit-testing","junit","junit5","pact"],"comments":[{"owner":{"account_id":8915876,"reputation":3560,"user_id":6654475,"accept_rate":100,"display_name":"Francislainy Campos"},"score":0,"creation_date":1649672823,"post_id":71148011,"comment_id":126927325,"body_markdown":"I have some pact contracts using Junit5 written here if perhaps useful to you. https://github.com/francislainy/mbbackend/tree/master/src/test/java/com/example/mbbackend/pact/consumer","body":"I have some pact contracts using Junit5 written here if perhaps useful to you. <a href=\"https://github.com/francislainy/mbbackend/tree/master/src/test/java/com/example/mbbackend/pact/consumer\" rel=\"nofollow noreferrer\">github.com/francislainy/mbbackend/tree/master/src/test/java/&zwnj;&#8203;com/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":8915876,"reputation":3560,"user_id":6654475,"accept_rate":100,"display_name":"Francislainy Campos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649673251,"creation_date":1649673251,"answer_id":71826319,"question_id":71148011,"body_markdown":"Not sure if that&#39;s just the gist you&#39;ve posted here but I see the `return` word missing and also the `@PactTestFor` annotation missing the provider and version. Here is an example I have that works for my project.\r\n```\r\nimport au.com.dius.pact.consumer.dsl.DslPart;\r\nimport au.com.dius.pact.consumer.dsl.PactDslJsonBody;\r\nimport au.com.dius.pact.consumer.dsl.PactDslWithProvider;\r\nimport au.com.dius.pact.consumer.junit5.PactConsumerTestExt;\r\nimport au.com.dius.pact.consumer.junit5.PactTestFor;\r\nimport au.com.dius.pact.core.model.PactSpecVersion;\r\nimport au.com.dius.pact.core.model.RequestResponsePact;\r\nimport au.com.dius.pact.core.model.annotations.Pact;\r\nimport io.restassured.response.Response;\r\nimport io.restassured.specification.RequestSpecification;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.junit.jupiter.api.extension.ExtendWith;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\nimport static com.example.mbbackend.config.Constants.*;\r\nimport static com.example.mbbackend.util.Utils.getRequestSpecification;\r\nimport static org.junit.jupiter.api.Assertions.assertEquals;\r\n\r\n@ExtendWith(PactConsumerTestExt.class)\r\nclass GetActorIT {\r\n\r\n    Map&lt;String, String&gt; headers = new HashMap&lt;&gt;();\r\n\r\n    String path = &quot;/api/mb/actor/&quot;;\r\n\r\n    @Pact(provider = PACT_PROVIDER, consumer = PACT_CONSUMER)\r\n    public RequestResponsePact createPact(PactDslWithProvider builder) {\r\n\r\n        headers.put(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n\r\n        DslPart bodyReturned = new PactDslJsonBody()\r\n                .uuid(&quot;id&quot;, &quot;1bfff94a-b70e-4b39-bd2a-be1c0f898589&quot;)\r\n                .stringType(&quot;name&quot;, &quot;A name&quot;)\r\n                .stringType(&quot;family&quot;, &quot;A family&quot;)\r\n                .stringType(&quot;imageUrl&quot;, &quot;http://anyimage.com&quot;)\r\n                .close();\r\n\r\n        return builder\r\n                .given(&quot;A request to retrieve an actor&quot;)\r\n                .uponReceiving(&quot;A request to retrieve an actor&quot;)\r\n                .pathFromProviderState(path + &quot;${actorId}&quot;, path + &quot;1bfff94a-b70e-4b39-bd2a-be1c0f898589&quot;)\r\n                .method(&quot;GET&quot;)\r\n                .headers(headers)\r\n                .willRespondWith()\r\n                .status(200)\r\n                .body(bodyReturned)\r\n                .toPact();\r\n    }\r\n\r\n    @Test\r\n    @PactTestFor(providerName = PACT_PROVIDER, port = PACT_PORT, pactVersion = PactSpecVersion.V3)\r\n    void runTest() {\r\n\r\n        //Mock url\r\n        RequestSpecification rq = getRequestSpecification().baseUri(MOCK_PACT_URL).headers(headers);\r\n\r\n        Response response = rq.get(path + &quot;1bfff94a-b70e-4b39-bd2a-be1c0f898589&quot;);\r\n\r\n        assertEquals(200, response.getStatusCode());\r\n    }\r\n\r\n}\r\n\r\n```","title":"Unable to run JUnit5 PACT test. No method annotated with @Pact was found on test class ConsumerContractTest for provider &#39;&#39;","body":"<p>Not sure if that's just the gist you've posted here but I see the <code>return</code> word missing and also the <code>@PactTestFor</code> annotation missing the provider and version. Here is an example I have that works for my project.</p>\n<pre><code>import au.com.dius.pact.consumer.dsl.DslPart;\nimport au.com.dius.pact.consumer.dsl.PactDslJsonBody;\nimport au.com.dius.pact.consumer.dsl.PactDslWithProvider;\nimport au.com.dius.pact.consumer.junit5.PactConsumerTestExt;\nimport au.com.dius.pact.consumer.junit5.PactTestFor;\nimport au.com.dius.pact.core.model.PactSpecVersion;\nimport au.com.dius.pact.core.model.RequestResponsePact;\nimport au.com.dius.pact.core.model.annotations.Pact;\nimport io.restassured.response.Response;\nimport io.restassured.specification.RequestSpecification;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport static com.example.mbbackend.config.Constants.*;\nimport static com.example.mbbackend.util.Utils.getRequestSpecification;\nimport static org.junit.jupiter.api.Assertions.assertEquals;\n\n@ExtendWith(PactConsumerTestExt.class)\nclass GetActorIT {\n\n    Map&lt;String, String&gt; headers = new HashMap&lt;&gt;();\n\n    String path = &quot;/api/mb/actor/&quot;;\n\n    @Pact(provider = PACT_PROVIDER, consumer = PACT_CONSUMER)\n    public RequestResponsePact createPact(PactDslWithProvider builder) {\n\n        headers.put(&quot;Content-Type&quot;, &quot;application/json&quot;);\n\n        DslPart bodyReturned = new PactDslJsonBody()\n                .uuid(&quot;id&quot;, &quot;1bfff94a-b70e-4b39-bd2a-be1c0f898589&quot;)\n                .stringType(&quot;name&quot;, &quot;A name&quot;)\n                .stringType(&quot;family&quot;, &quot;A family&quot;)\n                .stringType(&quot;imageUrl&quot;, &quot;http://anyimage.com&quot;)\n                .close();\n\n        return builder\n                .given(&quot;A request to retrieve an actor&quot;)\n                .uponReceiving(&quot;A request to retrieve an actor&quot;)\n                .pathFromProviderState(path + &quot;${actorId}&quot;, path + &quot;1bfff94a-b70e-4b39-bd2a-be1c0f898589&quot;)\n                .method(&quot;GET&quot;)\n                .headers(headers)\n                .willRespondWith()\n                .status(200)\n                .body(bodyReturned)\n                .toPact();\n    }\n\n    @Test\n    @PactTestFor(providerName = PACT_PROVIDER, port = PACT_PORT, pactVersion = PactSpecVersion.V3)\n    void runTest() {\n\n        //Mock url\n        RequestSpecification rq = getRequestSpecification().baseUri(MOCK_PACT_URL).headers(headers);\n\n        Response response = rq.get(path + &quot;1bfff94a-b70e-4b39-bd2a-be1c0f898589&quot;);\n\n        assertEquals(200, response.getStatusCode());\n    }\n\n}\n\n</code></pre>\n"}],"owner":{"account_id":22980755,"reputation":45,"user_id":17107715,"display_name":"Billtaz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1357,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649673251,"creation_date":1645038920,"question_id":71148011,"body_markdown":"I&#39;m trying to get a PACT test running on JUnit5.  We use JUnit4 for others, but this one will be JUnit5.  The error occurs when running the JUnit5 test using the pact annotation on the `RequestResponsePact` method.  \r\n\r\nError : ```No method annotated with @Pact was found on test class ConsumerContractTest for provider &#39;&#39;```.\r\n\r\nI&#39;ve seen https://stackoverflow.com/questions/66008002/basic-pact-junit5-test-setup-fails-no-method-annotated-with-pact-was-found-for, but this is issue was due to the `@PactTestFor(pactMethod = &quot;examplePact&quot;)` not matching the `@Pact` method name.  But on my code it does match.\r\n\r\nI can&#39;t seem to figure out why I get the error and especially why the error has an empty provider(`provider &#39;&#39;`) despite defining one(`&quot;some-provider&quot;`).\r\n\r\nExample code :\r\n```\r\nimport au.com.dius.pact.consumer.MockServer\r\nimport au.com.dius.pact.consumer.Pact\r\nimport au.com.dius.pact.consumer.dsl.PactDslJsonArray\r\nimport au.com.dius.pact.consumer.dsl.PactDslWithProvider\r\nimport au.com.dius.pact.consumer.junit5.PactConsumerTestExt\r\nimport au.com.dius.pact.consumer.junit5.PactTestFor\r\nimport au.com.dius.pact.model.RequestResponsePact\r\nimport groovyx.net.http.RESTClient\r\nimport org.junit.jupiter.api.Test\r\nimport org.junit.jupiter.api.extension.ExtendWith\r\nimport org.springframework.http.HttpStatus\r\n\r\n\r\n@ExtendWith(PactConsumerTestExt.class)\r\nclass ConsumerContractTest {\r\n\r\n\r\n    @Pact(consumer = &quot;some-consumer&quot;, provider = &quot;some-provider&quot;)\r\n    RequestResponsePact examplePact(PactDslWithProvider builder) {\r\n\r\n        builder\r\n                .given(&quot;provider state&quot;)\r\n                .uponReceiving(&quot;Contract description&quot;)\r\n                .method(&quot;GET&quot;)\r\n                .matchPath(&quot;/endpoint&quot;)\r\n                .willRespondWith()\r\n                .status(200)\r\n                .headers([&quot;Content-Type&quot;: &quot;application/vnd.pnf.v1+json&quot;])\r\n                .body(new PactDslJsonArray())\r\n                .toPact()\r\n    }\r\n\r\n    @Test\r\n    @PactTestFor(pactMethod = &quot;examplePact&quot;)\r\n    void exampleTest(MockServer mockServer) {\r\n        def client = new RESTClient(mockServer.getUrl())\r\n    }\r\n}\r\n```","title":"Unable to run JUnit5 PACT test. No method annotated with @Pact was found on test class ConsumerContractTest for provider &#39;&#39;","body":"<p>I'm trying to get a PACT test running on JUnit5.  We use JUnit4 for others, but this one will be JUnit5.  The error occurs when running the JUnit5 test using the pact annotation on the <code>RequestResponsePact</code> method.</p>\n<p>Error : <code>No method annotated with @Pact was found on test class ConsumerContractTest for provider ''</code>.</p>\n<p>I've seen <a href=\"https://stackoverflow.com/questions/66008002/basic-pact-junit5-test-setup-fails-no-method-annotated-with-pact-was-found-for\">Basic Pact/Junit5 Test Setup fails. No method annotated with @Pact was found for provider error</a>, but this is issue was due to the <code>@PactTestFor(pactMethod = &quot;examplePact&quot;)</code> not matching the <code>@Pact</code> method name.  But on my code it does match.</p>\n<p>I can't seem to figure out why I get the error and especially why the error has an empty provider(<code>provider ''</code>) despite defining one(<code>&quot;some-provider&quot;</code>).</p>\n<p>Example code :</p>\n<pre><code>import au.com.dius.pact.consumer.MockServer\nimport au.com.dius.pact.consumer.Pact\nimport au.com.dius.pact.consumer.dsl.PactDslJsonArray\nimport au.com.dius.pact.consumer.dsl.PactDslWithProvider\nimport au.com.dius.pact.consumer.junit5.PactConsumerTestExt\nimport au.com.dius.pact.consumer.junit5.PactTestFor\nimport au.com.dius.pact.model.RequestResponsePact\nimport groovyx.net.http.RESTClient\nimport org.junit.jupiter.api.Test\nimport org.junit.jupiter.api.extension.ExtendWith\nimport org.springframework.http.HttpStatus\n\n\n@ExtendWith(PactConsumerTestExt.class)\nclass ConsumerContractTest {\n\n\n    @Pact(consumer = &quot;some-consumer&quot;, provider = &quot;some-provider&quot;)\n    RequestResponsePact examplePact(PactDslWithProvider builder) {\n\n        builder\n                .given(&quot;provider state&quot;)\n                .uponReceiving(&quot;Contract description&quot;)\n                .method(&quot;GET&quot;)\n                .matchPath(&quot;/endpoint&quot;)\n                .willRespondWith()\n                .status(200)\n                .headers([&quot;Content-Type&quot;: &quot;application/vnd.pnf.v1+json&quot;])\n                .body(new PactDslJsonArray())\n                .toPact()\n    }\n\n    @Test\n    @PactTestFor(pactMethod = &quot;examplePact&quot;)\n    void exampleTest(MockServer mockServer) {\n        def client = new RESTClient(mockServer.getUrl())\n    }\n}\n</code></pre>\n"},{"tags":["java","google-cloud-platform","service-accounts"],"answers":[{"tags":[],"owner":{"account_id":15760814,"reputation":68973,"user_id":11372593,"display_name":"guillaume blaquiere"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649672901,"creation_date":1649672901,"answer_id":71826251,"question_id":71824161,"body_markdown":"When you create a cluster, you use the compute engine default service account. When you use compute engine default service account on a VM, you have limited scope by default. That limited scope doesn&#39;t apply if you use a custom service account or another service account. (That explains why it doesn&#39;t work with the default service account, and works with your service account key file)\r\n\r\nOn Dataproc, you have the capacity to allow all the Google Cloud scope on your cluster, in the security part during the cluster duration:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/eyAH7.png","title":"Insufficient authentication scopes when using default Service Account","body":"<p>When you create a cluster, you use the compute engine default service account. When you use compute engine default service account on a VM, you have limited scope by default. That limited scope doesn't apply if you use a custom service account or another service account. (That explains why it doesn't work with the default service account, and works with your service account key file)</p>\n<p>On Dataproc, you have the capacity to allow all the Google Cloud scope on your cluster, in the security part during the cluster duration:\n<a href=\"https://i.stack.imgur.com/eyAH7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eyAH7.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":10539562,"reputation":1769,"user_id":7766158,"display_name":"Nakeuh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1056,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71826251,"answer_count":1,"score":0,"last_activity_date":1649672901,"creation_date":1649662540,"question_id":71824161,"body_markdown":"I retrieve data from google workspace APIs. I authenticate to those APIs with Service Account from a Dataproc cluster. \r\n\r\nI have two ways to authenticate with my Service Account. Either I use a JSON key file to authenticate with my SA `SA-with-keyfile` or I use the default SA of my Dataproc cluster  : `SA-default`.\r\n\r\nBoth SA are authorized to access the data and I provided them with the same scopes. Here is a sample of the code generating the Google Credentials : \r\n\r\n    import com.google.auth.oauth2.GoogleCredentials;\r\n    import com.google.auth.oauth2.ServiceAccountCredentials;\r\n    \r\n    import java.io.ByteArrayInputStream;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    \r\n    /**\r\n     * Generate GoogleCredentials from config (minimal code example)\r\n     */\r\n    public class ServiceAccountUtil {\r\n    \r\n        // Generate GoogleCredentials from a Service Account JSON key file\r\n        public static GoogleCredentials getCredentialsWithKey(String scopes, String privateKeyJson) throws IOException {\r\n            ServiceAccountCredentials serviceAccountCredentials;\r\n    \r\n            try (InputStream stream = new ByteArrayInputStream(privateKeyJson.getBytes())) {\r\n                serviceAccountCredentials = ServiceAccountCredentials.fromStream(stream);\r\n            }\r\n    \r\n            return serviceAccountCredentials.createScoped(scopes.split(&quot; &quot;));\r\n        }\r\n    \r\n        // Generate GoogleCredentials using the default Service Account\r\n        public static GoogleCredentials getCredentialsDefault(String scopes) throws IOException {\r\n            return ServiceAccountCredentials.getApplicationDefault().createScoped(scopes.split(&quot; &quot;));\r\n        }\r\n    }\r\n\r\nWhen using the SA `SA-with-keyfile`, everythink works fine and I retrieve my data. \r\n\r\nHowever, when using the `SA-default`, the API answers with : \r\n\r\n    {\r\n      &quot;error&quot;: {\r\n        &quot;code&quot;: 403,\r\n        &quot;message&quot;: &quot;Request had insufficient authentication scopes.&quot;,\r\n        &quot;errors&quot;: [\r\n          {\r\n            &quot;message&quot;: &quot;Insufficient Permission&quot;,\r\n            &quot;domain&quot;: &quot;global&quot;,\r\n            &quot;reason&quot;: &quot;insufficientPermissions&quot;\r\n          }\r\n        ],\r\n        &quot;status&quot;: &quot;PERMISSION_DENIED&quot;,\r\n        &quot;details&quot;: [\r\n          {\r\n            &quot;@type&quot;: &quot;type.googleapis.com/google.rpc.ErrorInfo&quot;,\r\n            &quot;reason&quot;: &quot;ACCESS_TOKEN_SCOPE_INSUFFICIENT&quot;,\r\n            &quot;domain&quot;: &quot;googleapis.com&quot;,\r\n            &quot;metadata&quot;: {\r\n              &quot;service&quot;: &quot;admin.googleapis.com&quot;,\r\n              &quot;method&quot;: &quot;ccc.hosted.frontend.directory.v1.DirectoryGroups.List&quot;\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    }\r\n\r\nI don&#39;t understand why I am getting this error in one case (SA without JSON key file) since I am using the same scopes in both cases. \r\n","title":"Insufficient authentication scopes when using default Service Account","body":"<p>I retrieve data from google workspace APIs. I authenticate to those APIs with Service Account from a Dataproc cluster.</p>\n<p>I have two ways to authenticate with my Service Account. Either I use a JSON key file to authenticate with my SA <code>SA-with-keyfile</code> or I use the default SA of my Dataproc cluster  : <code>SA-default</code>.</p>\n<p>Both SA are authorized to access the data and I provided them with the same scopes. Here is a sample of the code generating the Google Credentials :</p>\n<pre><code>import com.google.auth.oauth2.GoogleCredentials;\nimport com.google.auth.oauth2.ServiceAccountCredentials;\n\nimport java.io.ByteArrayInputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\n\n/**\n * Generate GoogleCredentials from config (minimal code example)\n */\npublic class ServiceAccountUtil {\n\n    // Generate GoogleCredentials from a Service Account JSON key file\n    public static GoogleCredentials getCredentialsWithKey(String scopes, String privateKeyJson) throws IOException {\n        ServiceAccountCredentials serviceAccountCredentials;\n\n        try (InputStream stream = new ByteArrayInputStream(privateKeyJson.getBytes())) {\n            serviceAccountCredentials = ServiceAccountCredentials.fromStream(stream);\n        }\n\n        return serviceAccountCredentials.createScoped(scopes.split(&quot; &quot;));\n    }\n\n    // Generate GoogleCredentials using the default Service Account\n    public static GoogleCredentials getCredentialsDefault(String scopes) throws IOException {\n        return ServiceAccountCredentials.getApplicationDefault().createScoped(scopes.split(&quot; &quot;));\n    }\n}\n</code></pre>\n<p>When using the SA <code>SA-with-keyfile</code>, everythink works fine and I retrieve my data.</p>\n<p>However, when using the <code>SA-default</code>, the API answers with :</p>\n<pre><code>{\n  &quot;error&quot;: {\n    &quot;code&quot;: 403,\n    &quot;message&quot;: &quot;Request had insufficient authentication scopes.&quot;,\n    &quot;errors&quot;: [\n      {\n        &quot;message&quot;: &quot;Insufficient Permission&quot;,\n        &quot;domain&quot;: &quot;global&quot;,\n        &quot;reason&quot;: &quot;insufficientPermissions&quot;\n      }\n    ],\n    &quot;status&quot;: &quot;PERMISSION_DENIED&quot;,\n    &quot;details&quot;: [\n      {\n        &quot;@type&quot;: &quot;type.googleapis.com/google.rpc.ErrorInfo&quot;,\n        &quot;reason&quot;: &quot;ACCESS_TOKEN_SCOPE_INSUFFICIENT&quot;,\n        &quot;domain&quot;: &quot;googleapis.com&quot;,\n        &quot;metadata&quot;: {\n          &quot;service&quot;: &quot;admin.googleapis.com&quot;,\n          &quot;method&quot;: &quot;ccc.hosted.frontend.directory.v1.DirectoryGroups.List&quot;\n        }\n      }\n    ]\n  }\n}\n</code></pre>\n<p>I don't understand why I am getting this error in one case (SA without JSON key file) since I am using the same scopes in both cases.</p>\n"},{"tags":["java","jboss","drools","jbpm"],"answers":[{"tags":[],"owner":{"account_id":7802965,"reputation":1601,"user_id":5901697,"display_name":"Abhijit Humbe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1636193511,"creation_date":1636193511,"answer_id":69863077,"question_id":69862172,"body_markdown":"To get new object you have to use &#39;kieSession.getObject&#39; after &#39;fireAllRules&#39; command, like as:\r\n\r\n    kieSession.fireAllRules()\r\n    kieSession.getObject(factHandle)","title":"A dedicated object in response to a rule in DROOLS","body":"<p>To get new object you have to use 'kieSession.getObject' after 'fireAllRules' command, like as:</p>\n<pre><code>kieSession.fireAllRules()\nkieSession.getObject(factHandle)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14794402,"reputation":1,"user_id":10684385,"display_name":"Soheil Babadi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1639210535,"creation_date":1639210535,"answer_id":70313588,"question_id":69862172,"body_markdown":"I found the solution and I hope it will be useful for others\r\nWe define an object and that is our output model\r\n\r\n    rule &quot;min Policy Duration&quot;\r\n     when\r\n     $response:ResponseModel();\r\n     $model:LifeModel(duration&lt;5 )\r\n     then\r\n     $response.addMessage(&quot;Error message&quot;);\r\n     $response.setValid(false);\r\n    end;\r\n\r\nNow we write the name of the output model in the request and in this way the model can be obtained.\r\n\r\n\r\n    {\r\n        &quot;commands&quot;: [\r\n            {\r\n                &quot;insert&quot;: {\r\n                     &quot;out-identifier&quot;: &quot;PhysiciansLiability_1.0.0-SNAPSHOT&quot;,\r\n                    &quot;return-object&quot;: &quot;true&quot;,\r\n                    &quot;object&quot;: {\r\n                        &quot;ResponseModel&quot;: {\r\n                            &quot;expireAt&quot;: &quot;2019-04-23&quot;,\r\n                           &quot;issueAt&quot;: &quot;2022-04-23&quot;,\r\n            },\r\n            {\r\n                &quot;fire-all-rules&quot;: &quot;&quot;\r\n            }\r\n\r\n","title":"A dedicated object in response to a rule in DROOLS","body":"<p>I found the solution and I hope it will be useful for others\nWe define an object and that is our output model</p>\n<pre><code>rule &quot;min Policy Duration&quot;\n when\n $response:ResponseModel();\n $model:LifeModel(duration&lt;5 )\n then\n $response.addMessage(&quot;Error message&quot;);\n $response.setValid(false);\nend;\n</code></pre>\n<p>Now we write the name of the output model in the request and in this way the model can be obtained.</p>\n<pre><code>{\n    &quot;commands&quot;: [\n        {\n            &quot;insert&quot;: {\n                 &quot;out-identifier&quot;: &quot;PhysiciansLiability_1.0.0-SNAPSHOT&quot;,\n                &quot;return-object&quot;: &quot;true&quot;,\n                &quot;object&quot;: {\n                    &quot;ResponseModel&quot;: {\n                        &quot;expireAt&quot;: &quot;2019-04-23&quot;,\n                       &quot;issueAt&quot;: &quot;2022-04-23&quot;,\n        },\n        {\n            &quot;fire-all-rules&quot;: &quot;&quot;\n        }\n</code></pre>\n"}],"owner":{"account_id":14794402,"reputation":1,"user_id":10684385,"display_name":"Soheil Babadi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":555,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70313588,"answer_count":2,"score":1,"last_activity_date":1649672866,"creation_date":1636183773,"question_id":69862172,"body_markdown":"In the drool engine, how can a new object be filled in as a response in the THEN section?\r\nInstead of `LiabilityRequestDto`, I want to return the answer with another dedicated object.\r\n\r\n    rule &quot;validate Date&quot;\r\n    salience 100\r\n        when\r\n        \r\n        $req : LiabilityRequestDto(expireAt before issueAt || issueAt before getNow())\r\n        \r\n        then\r\n               $req.setResultMessage(&quot;\\\\n&quot;+&quot; invalid date&quot;);\r\n               $req.setIsValid(false);\r\n    end;\r\n\r\nI use Drools Workbench, so I have no access to `kieSession` directly.","title":"A dedicated object in response to a rule in DROOLS","body":"<p>In the drool engine, how can a new object be filled in as a response in the THEN section?\nInstead of <code>LiabilityRequestDto</code>, I want to return the answer with another dedicated object.</p>\n<pre><code>rule &quot;validate Date&quot;\nsalience 100\n    when\n    \n    $req : LiabilityRequestDto(expireAt before issueAt || issueAt before getNow())\n    \n    then\n           $req.setResultMessage(&quot;\\\\n&quot;+&quot; invalid date&quot;);\n           $req.setIsValid(false);\nend;\n</code></pre>\n<p>I use Drools Workbench, so I have no access to <code>kieSession</code> directly.</p>\n"},{"tags":["java","swing","menu","jpanel","visibility"],"comments":[{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1649672426,"post_id":71825964,"comment_id":126927187,"body_markdown":"So is this new panel supposed to appear in a space in the GUI that is already defined? [If so, use a `CardLayout`.] **BTW:** `this.setLayout(null);` Don&#39;t do that.","body":"So is this new panel supposed to appear in a space in the GUI that is already defined? [If so, use a <code>CardLayout</code>.] <b>BTW:</b> <code>this.setLayout(null);</code> Don&#39;t do that."},{"owner":{"account_id":19932760,"reputation":49,"user_id":14606099,"display_name":"ilMichigan"},"score":0,"creation_date":1649674178,"post_id":71825964,"comment_id":126927798,"body_markdown":"This new panel should cover all the space of the mainPanel. I tried using this.setLayout(new BorderLayout); and than mainPanel.add(pausePanel, BorderLayout.CENTER); but it doesn&#39;t work","body":"This new panel should cover all the space of the mainPanel. I tried using this.setLayout(new BorderLayout); and than mainPanel.add(pausePanel, BorderLayout.CENTER); but it doesn&#39;t work"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":1,"creation_date":1649680758,"post_id":71825964,"comment_id":126930196,"body_markdown":"*&quot;This new panel should cover all the space of the mainPanel.&quot;* It seems then like a `CardLayout` is the way to go. It is designed to flip between panels (or components).","body":"<i>&quot;This new panel should cover all the space of the mainPanel.&quot;</i> It seems then like a <code>CardLayout</code> is the way to go. It is designed to flip between panels (or components)."}],"owner":{"account_id":19932760,"reputation":49,"user_id":14606099,"display_name":"ilMichigan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649672548,"creation_date":1649671509,"question_id":71825964,"body_markdown":"I have created a `MainPanel` in which I make a bird fly. To this panel, I have to add a `PausePanel` panel at the press of a button. If I only use `pausePanel.setVisible (true / false)` when pressing the key, this works. But, if the bird starts before the first keypress, the panel will never be displayed. \r\n\r\nI, therefore, thought of adding and removing the `PausePanel` every time I press the key. Unfortunately, the game pauses but the `PausePanel` does not appear.\r\n\r\nHere&#39;s the code:\r\n\r\n**PausePanel:**\r\n```java\r\npublic class PausePanel extends JPanel {\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\tprivate static final long serialVersionUID = -3943280654281528696L;\r\n\tprivate final JLabel resumeLabel = new JLabel(&quot;ESC: RESUME&quot;, SwingConstants.CENTER);\r\n\tprivate final JLabel exitLabel = new JLabel(&quot;ENTER: EXIT THE GAME&quot;, SwingConstants.CENTER);\r\n\tprivate final MainFontLoader fontLoader = new MainFontLoader();\r\n\tprivate final Font gameFont = fontLoader.load();\r\n\r\n\tpublic PausePanel() {\r\n\t\texitLabel.setFont(gameFont);\r\n\t\tresumeLabel.setFont(gameFont);\r\n\t\tresumeLabel.setVerticalAlignment(JLabel.BOTTOM);\r\n\t\texitLabel.setVerticalAlignment(JLabel.NORTH);\r\n\t\tresumeLabel.setForeground(Color.WHITE);\r\n\t\texitLabel.setForeground(Color.WHITE);\r\n\t\t\r\n\t\tthis.setBackground(Color.BLACK);\r\n\t\tthis.setLayout(new GridLayout(0, 1));\r\n\t\tthis.add(resumeLabel);\r\n        this.add(exitLabel);\r\n        this.setVisible(false);\r\n    }\r\n\t\r\n\tpublic boolean getVisibility() {\r\n\t\treturn this.isVisible();\r\n\t}\r\n}\r\n````\r\n\r\nHere I need the `getVisibility` method for another `ExitButton` that should only work when this panel is visible.\r\n\r\n**PauseButton:**\r\n```java\r\npublic class PauseButton {\r\n\r\n    private boolean pause = false;\r\n    \r\n    public PauseButton(JPanel mainPanel, JPanel pausePanel, BirdVisual visual) {\r\n\r\n        final KeyStroke escKey = KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE, 0, false);\r\n        mainPanel.getInputMap().put(escKey, &quot;Esc&quot;);\r\n        mainPanel.getActionMap().put(&quot;Esc&quot;, new AbstractAction(){\r\n        \t\r\n\t\tprivate static final long serialVersionUID = -534997922777581539L;\r\n\r\n        @Override\r\n        public void actionPerformed(ActionEvent e) {\r\n            setVisibility(mainPanel, pausePanel, visual);\r\n        }\r\n    });\r\n}\r\n\r\n    public void setVisibility(JPanel mainPanel, JPanel pausePanel, BirdVisual visual) {\r\n    \tif(!pause){\r\n            mainPanel.add(pausePanel);\r\n            pausePanel.setVisible(true);\r\n            pausePanel.revalidate();\r\n            pausePanel.repaint();\r\n            visual.setPause();\r\n            pause = true;\r\n        } else {\r\n            mainPanel.remove(pausePanel);\r\n            pausePanel.setVisible(false);\r\n            visual.setPause();\r\n            pause = false;\r\n        }\r\n    }\r\n}\r\n```\r\n**MainPanel:**\r\n```java\r\npublic class MainPanel extends JPanel{\r\n\t\r\n\t/**\r\n\t * \r\n\t */\r\n\tprivate static final long serialVersionUID = -5567586066880648121L;\r\n\tprivate PausePanel pausePanel = new PausePanel();\r\n\tprivate final BirdVisual visual = new BirdVisual(this);\r\n\r\n\t\r\n\tpublic MainPanel() {\r\n\t\tthis.setBackground(Color.WHITE);\r\n\t\tthis.setLayout(null);\r\n\t\tnew PauseButton(this, pausePanel, visual);\r\n\t\tnew ExitButton(this, pausePanel);\r\n\t}\r\n\r\n\tpublic BirdVisual getVisual() {\r\n\t\treturn this.visual;\r\n\t}\r\n\r\n}\r\n```","title":"Adding JPanel on another JPanel on button press","body":"<p>I have created a <code>MainPanel</code> in which I make a bird fly. To this panel, I have to add a <code>PausePanel</code> panel at the press of a button. If I only use <code>pausePanel.setVisible (true / false)</code> when pressing the key, this works. But, if the bird starts before the first keypress, the panel will never be displayed.</p>\n<p>I, therefore, thought of adding and removing the <code>PausePanel</code> every time I press the key. Unfortunately, the game pauses but the <code>PausePanel</code> does not appear.</p>\n<p>Here's the code:</p>\n<p><strong>PausePanel:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class PausePanel extends JPanel {\n\n    /**\n     * \n     */\n    private static final long serialVersionUID = -3943280654281528696L;\n    private final JLabel resumeLabel = new JLabel(&quot;ESC: RESUME&quot;, SwingConstants.CENTER);\n    private final JLabel exitLabel = new JLabel(&quot;ENTER: EXIT THE GAME&quot;, SwingConstants.CENTER);\n    private final MainFontLoader fontLoader = new MainFontLoader();\n    private final Font gameFont = fontLoader.load();\n\n    public PausePanel() {\n        exitLabel.setFont(gameFont);\n        resumeLabel.setFont(gameFont);\n        resumeLabel.setVerticalAlignment(JLabel.BOTTOM);\n        exitLabel.setVerticalAlignment(JLabel.NORTH);\n        resumeLabel.setForeground(Color.WHITE);\n        exitLabel.setForeground(Color.WHITE);\n        \n        this.setBackground(Color.BLACK);\n        this.setLayout(new GridLayout(0, 1));\n        this.add(resumeLabel);\n        this.add(exitLabel);\n        this.setVisible(false);\n    }\n    \n    public boolean getVisibility() {\n        return this.isVisible();\n    }\n}\n</code></pre>\n<p>Here I need the <code>getVisibility</code> method for another <code>ExitButton</code> that should only work when this panel is visible.</p>\n<p><strong>PauseButton:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class PauseButton {\n\n    private boolean pause = false;\n    \n    public PauseButton(JPanel mainPanel, JPanel pausePanel, BirdVisual visual) {\n\n        final KeyStroke escKey = KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE, 0, false);\n        mainPanel.getInputMap().put(escKey, &quot;Esc&quot;);\n        mainPanel.getActionMap().put(&quot;Esc&quot;, new AbstractAction(){\n            \n        private static final long serialVersionUID = -534997922777581539L;\n\n        @Override\n        public void actionPerformed(ActionEvent e) {\n            setVisibility(mainPanel, pausePanel, visual);\n        }\n    });\n}\n\n    public void setVisibility(JPanel mainPanel, JPanel pausePanel, BirdVisual visual) {\n        if(!pause){\n            mainPanel.add(pausePanel);\n            pausePanel.setVisible(true);\n            pausePanel.revalidate();\n            pausePanel.repaint();\n            visual.setPause();\n            pause = true;\n        } else {\n            mainPanel.remove(pausePanel);\n            pausePanel.setVisible(false);\n            visual.setPause();\n            pause = false;\n        }\n    }\n}\n</code></pre>\n<p><strong>MainPanel:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MainPanel extends JPanel{\n    \n    /**\n     * \n     */\n    private static final long serialVersionUID = -5567586066880648121L;\n    private PausePanel pausePanel = new PausePanel();\n    private final BirdVisual visual = new BirdVisual(this);\n\n    \n    public MainPanel() {\n        this.setBackground(Color.WHITE);\n        this.setLayout(null);\n        new PauseButton(this, pausePanel, visual);\n        new ExitButton(this, pausePanel);\n    }\n\n    public BirdVisual getVisual() {\n        return this.visual;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","json","gson"],"comments":[{"owner":{"account_id":6349182,"reputation":3625,"user_id":4928801,"accept_rate":71,"display_name":"Gaurav"},"score":0,"creation_date":1649671309,"post_id":71825836,"comment_id":126926762,"body_markdown":"what json you want from POJO, add details in question","body":"what json you want from POJO, add details in question"},{"owner":{"account_id":3142733,"reputation":616,"user_id":2657875,"accept_rate":77,"display_name":"menteith"},"score":0,"creation_date":1649671476,"post_id":71825836,"comment_id":126926816,"body_markdown":"Not sure if I follow. I want a list of `Author` objects. In each `Author` there is only one field - `name`/","body":"Not sure if I follow. I want a list of <code>Author</code> objects. In each <code>Author</code> there is only one field - <code>name</code>/"},{"owner":{"account_id":6349182,"reputation":3625,"user_id":4928801,"accept_rate":71,"display_name":"Gaurav"},"score":0,"creation_date":1649675978,"post_id":71825836,"comment_id":126928383,"body_markdown":"Replace `List&lt;AuthorsItem&gt; authors;` with `List&lt;Author&gt; authors;`","body":"Replace <code>List&lt;AuthorsItem&gt; authors;</code> with <code>List&lt;Author&gt; authors;</code>"},{"owner":{"account_id":16914570,"reputation":1532,"user_id":12232870,"display_name":"terrorrussia-keeps-killing"},"score":0,"creation_date":1649691230,"post_id":71825836,"comment_id":126934564,"body_markdown":"Sometimes it&#39;s easier to keep it all as is. Your classes already reflect the structure of the JSON payloads perfectly, and I don&#39;t think it&#39;s that bad. Implementing a type adapter (/factory) to be assigned to a certain field of lists with items to be unwrapped may bring more complexity than you think (verbosity is not that bad as you might think).","body":"Sometimes it&#39;s easier to keep it all as is. Your classes already reflect the structure of the JSON payloads perfectly, and I don&#39;t think it&#39;s that bad. Implementing a type adapter (/factory) to be assigned to a certain field of lists with items to be unwrapped may bring more complexity than you think (verbosity is not that bad as you might think)."}],"answers":[{"tags":[],"owner":{"account_id":9566147,"reputation":446,"user_id":7105377,"accept_rate":57,"display_name":"Dilini Peiris"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649672319,"creation_date":1649672319,"answer_id":71826128,"question_id":71825836,"body_markdown":"If I understand you correctly, you can only define the Author class and just have the List&lt;Author&gt; from where you are accessing the data right? (Maybe as a method in a controller class)\r\n\r\nExample: `void saveAuthors(List&lt;Author&gt; authors) {}`\r\n\r\n    class Author {\r\n    \r\n        @SerializedName(&quot;name&quot;)\r\n        private String name;\r\n    }\r\n\r\nThen your JSON would have to be structured as follows.\r\n\r\n    [\r\n      {\r\n         &quot;name&quot;: &quot;Foo Bar&quot;\r\n      },\r\n      {\r\n         &quot;name&quot;: &quot;Bar Foo&quot;\r\n      }\r\n    ]\r\n\r\nWhen deserializing, you can do the deserialization in a way that it identifies the list correctly.\r\n\r\nYou can refer to this tutorial for more info: [How to Serialize Deserialize List of Objects in Java? Java Serialization Example][1] \r\n\r\n\r\n  [1]: https://crunchify.com/how-to-serialize-deserialize-list-of-objects-in-java-java-serialization-example/","title":"Simplifying POJO to be used by Gson","body":"<p>If I understand you correctly, you can only define the Author class and just have the List from where you are accessing the data right? (Maybe as a method in a controller class)</p>\n<p>Example: <code>void saveAuthors(List&lt;Author&gt; authors) {}</code></p>\n<pre><code>class Author {\n\n    @SerializedName(&quot;name&quot;)\n    private String name;\n}\n</code></pre>\n<p>Then your JSON would have to be structured as follows.</p>\n<pre><code>[\n  {\n     &quot;name&quot;: &quot;Foo Bar&quot;\n  },\n  {\n     &quot;name&quot;: &quot;Bar Foo&quot;\n  }\n]\n</code></pre>\n<p>When deserializing, you can do the deserialization in a way that it identifies the list correctly.</p>\n<p>You can refer to this tutorial for more info: <a href=\"https://crunchify.com/how-to-serialize-deserialize-list-of-objects-in-java-java-serialization-example/\" rel=\"nofollow noreferrer\">How to Serialize Deserialize List of Objects in Java? Java Serialization Example</a></p>\n"}],"owner":{"account_id":3142733,"reputation":616,"user_id":2657875,"accept_rate":77,"display_name":"menteith"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1649672319,"creation_date":1649670916,"question_id":71825836,"body_markdown":"I have a JSON with the following part:\r\n\r\n    {\r\n      &quot;authors&quot;: [\r\n        {\r\n          &quot;author&quot;: {\r\n            &quot;name&quot;: &quot;Foo Bar&quot;\r\n          }\r\n        },\r\n        {\r\n          &quot;author&quot;: {\r\n            &quot;name&quot;: &quot;Bar Foo&quot;\r\n          }\r\n        }\r\n      ]\r\n    }\r\n\r\nIt can easilby be mapped to the following DTO:\r\n\r\n    public class Response {\r\n    \r\n        @SerializedName(&quot;authors&quot;)\r\n        private List&lt;AuthorsItem&gt; authors;\r\n    }\r\n    \r\n    class AuthorsItem {\r\n    \r\n        @SerializedName(&quot;author&quot;)\r\n        private Author author;\r\n    }\r\n    \r\n    class Author {\r\n    \r\n        @SerializedName(&quot;name&quot;)\r\n        private String name;\r\n    }\r\n\r\ngetters/setters omitted for brevity\r\n\r\nIs there a way to avoid such a complicated structure and have e.g. `List&lt;Author&gt; authors`? It can be done by writing a class implementing `JsonDeserializer` but this is quite verbose.","title":"Simplifying POJO to be used by Gson","body":"<p>I have a JSON with the following part:</p>\n<pre><code>{\n  &quot;authors&quot;: [\n    {\n      &quot;author&quot;: {\n        &quot;name&quot;: &quot;Foo Bar&quot;\n      }\n    },\n    {\n      &quot;author&quot;: {\n        &quot;name&quot;: &quot;Bar Foo&quot;\n      }\n    }\n  ]\n}\n</code></pre>\n<p>It can easilby be mapped to the following DTO:</p>\n<pre><code>public class Response {\n\n    @SerializedName(&quot;authors&quot;)\n    private List&lt;AuthorsItem&gt; authors;\n}\n\nclass AuthorsItem {\n\n    @SerializedName(&quot;author&quot;)\n    private Author author;\n}\n\nclass Author {\n\n    @SerializedName(&quot;name&quot;)\n    private String name;\n}\n</code></pre>\n<p>getters/setters omitted for brevity</p>\n<p>Is there a way to avoid such a complicated structure and have e.g. <code>List&lt;Author&gt; authors</code>? It can be done by writing a class implementing <code>JsonDeserializer</code> but this is quite verbose.</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":14894401,"reputation":186,"user_id":10755186,"display_name":"Amrit Malla"},"score":0,"creation_date":1649616054,"post_id":71819479,"comment_id":126915230,"body_markdown":"Your problem seems like this one https://stackoverflow.com/questions/6378526/org-hibernate-persistentobjectexception-detached-entity-passed-to-persist Can you check on that?","body":"Your problem seems like this one <a href=\"https://stackoverflow.com/questions/6378526/org-hibernate-persistentobjectexception-detached-entity-passed-to-persist\" title=\"org hibernate persistentobjectexception detached entity passed to persist\">stackoverflow.com/questions/6378526/&hellip;</a> Can you check on that?"},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1649620134,"post_id":71819479,"comment_id":126916140,"body_markdown":"But here you should find what you need: https://stackoverflow.com/a/4438358/2846138 - you have a detached _dish_ because it&#39;s from a transfer object (or does suffix TO mean something different), so it means in the database there should be a dish entity with the same ID. That answer discusses how to re-attach it. Be sure to read other answers there as well.","body":"But here you should find what you need: <a href=\"https://stackoverflow.com/a/4438358/2846138\">stackoverflow.com/a/4438358/2846138</a> - you have a detached <i>dish</i> because it&#39;s from a transfer object (or does suffix TO mean something different), so it means in the database there should be a dish entity with the same ID. That answer discusses how to re-attach it. Be sure to read other answers there as well."},{"owner":{"account_id":24000983,"reputation":11,"user_id":17985903,"display_name":"Nerale"},"score":0,"creation_date":1649620528,"post_id":71819479,"comment_id":126916225,"body_markdown":"@cyberbrain thank you, but i accidentally found that it works properly if i initialize dish in update method by setters.","body":"@cyberbrain thank you, but i accidentally found that it works properly if i initialize dish in update method by setters."},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1649672170,"post_id":71819479,"comment_id":126927088,"body_markdown":"Please don&#39;t add things like &quot;solved&quot; to your question title. Instead, post an answer, and accept it after the timeout. Acceptance of an answer is what signals a question is solved.","body":"Please don&#39;t add things like &quot;solved&quot; to your question title. Instead, post an answer, and accept it after the timeout. Acceptance of an answer is what signals a question is solved."}],"answers":[{"tags":[],"owner":{"account_id":24000983,"reputation":11,"user_id":17985903,"display_name":"Nerale"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649672208,"creation_date":1649620993,"answer_id":71820145,"question_id":71819479,"body_markdown":"Problem is solved. Right now, I absolutely have no idea why, but when I changed dish initialization from constructor to setter, it started working properly. \r\n\r\nSolution:\r\n```java\r\n@Transactional\r\npublic void update(DishTo dishTo, int id) {\r\n    log.info(&quot;update {} {}&quot;, dishTo, id);\r\n    Dish dish = new Dish();\r\n    ValidationUtil.assureIdConsistent(dish, id);\r\n\r\n    dish.setName(dishTo.getName());\r\n    dish.setPrice(dishTo.getPrice());\r\n    dish.setRestaurant(\r\n            getRestaurantById(dishTo.getRestaurantId())\r\n    );\r\n\r\n    repository.save(dish);\r\n}\r\n```","title":"Troubles with updating hibernate entity","body":"<p>Problem is solved. Right now, I absolutely have no idea why, but when I changed dish initialization from constructor to setter, it started working properly.</p>\n<p>Solution:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Transactional\npublic void update(DishTo dishTo, int id) {\n    log.info(&quot;update {} {}&quot;, dishTo, id);\n    Dish dish = new Dish();\n    ValidationUtil.assureIdConsistent(dish, id);\n\n    dish.setName(dishTo.getName());\n    dish.setPrice(dishTo.getPrice());\n    dish.setRestaurant(\n            getRestaurantById(dishTo.getRestaurantId())\n    );\n\n    repository.save(dish);\n}\n</code></pre>\n"}],"owner":{"account_id":24000983,"reputation":11,"user_id":17985903,"display_name":"Nerale"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":223,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649672284,"creation_date":1649615532,"question_id":71819479,"body_markdown":"I&#39;m trying to configure many-to-one relationship between dish and restaurant. Create/read/delete operations work properly, but I face this error when I&#39;m trying to update dish entity:\r\n\r\n```none\r\norg.hibernate.PersistentObjectException: detached entity passed to persist: org.polik.votingsystem.model.Dish\r\n\tat org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:120) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\tat org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\tat org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:760) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\tat org.hibernate.internal.SessionImpl.persist(SessionImpl.java:746) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n\tat org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:362) ~[spring-orm-5.3.16.jar:5.3.16]\r\n\tat jdk.proxy3/jdk.proxy3.$Proxy115.persist(Unknown Source) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n\tat org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311) ~[spring-orm-5.3.16.jar:5.3.16]\r\n\tat jdk.proxy3/jdk.proxy3.$Proxy115.persist(Unknown Source) ~[na:na]\r\n\tat org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:637) ~[spring-data-jpa-2.6.2.jar:2.6.2]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n\tat org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:529) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n\tat org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n\tat org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:639) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.16.jar:5.3.16]\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:163) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:138) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.16.jar:5.3.16]\r\n\tat org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:80) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.16.jar:5.3.16]\r\n```\r\n\r\nDish entity:\r\n```java\r\n@Entity\r\n@Table(name = &quot;dishes&quot;)\r\n@Getter\r\n@Setter\r\n@ToString\r\n@NoArgsConstructor\r\npublic class Dish extends BaseEntity {\r\n    @Column(name = &quot;name&quot;)\r\n    @NotNull\r\n    private String name;\r\n\r\n    @Column(name = &quot;price&quot;)\r\n    @NotNull\r\n    private Integer price;\r\n\r\n    @ManyToOne(fetch = FetchType.EAGER, cascade = {CascadeType.MERGE, CascadeType.REFRESH})\r\n    @JoinColumn(name = &quot;restaurant_id&quot;)\r\n    private Restaurant restaurant;\r\n\r\n    @Column(name = &quot;date&quot;)\r\n    @CreationTimestamp\r\n    private LocalDate date;\r\n\r\n    public Dish(Integer id, String name, Integer price) {\r\n        super(id);\r\n        this.name = name;\r\n        this.price = price;\r\n    }\r\n\r\n    public Dish(Integer id, String name, Integer price, Restaurant restaurant, LocalDate date) {\r\n        super(id);\r\n        this.name = name;\r\n        this.price = price;\r\n        this.restaurant = restaurant;\r\n        this.date = date;\r\n    }\r\n}\r\n```\r\nrestaurant entity\r\n```java\r\n@Entity\r\n@Table(name = &quot;restaurant&quot;)\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\npublic class Restaurant extends BaseEntity {\r\n    @Column(name = &quot;name&quot;)\r\n    @NotNull\r\n    private String name;\r\n}\r\n```\r\nbase entity\r\n```java\r\n@MappedSuperclass\r\n@Access(AccessType.FIELD)\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\npublic abstract class BaseEntity implements Persistable&lt;Integer&gt; {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    protected Integer id;\r\n\r\n    public BaseEntity(Integer id) {\r\n        this.id = id;\r\n    }\r\n\r\n    @Override\r\n    public boolean isNew() {\r\n        return id != null;\r\n    }\r\n\r\n    @Override\r\n    public boolean equals(Object o) {\r\n        if (this == o) {\r\n            return true;\r\n        }\r\n        if (o == null || !getClass().equals(Hibernate.getClass(o))) {\r\n            return false;\r\n        }\r\n        BaseEntity that = (BaseEntity) o;\r\n        return id != null &amp;&amp; id.equals(that.id);\r\n    }\r\n\r\n    @Override\r\n    public int hashCode() {\r\n        return id == null ? 0 : id;\r\n    }\r\n}\r\n```\r\nupdate method\r\n```java\r\n@Transactional\r\npublic void update(DishTo dishTo, int id) {\r\n    Dish dish = new Dish(\r\n            id,\r\n            dishTo.getName(),\r\n            dishTo.getPrice(),\r\n            getRestaurantById(dishTo.getRestaurantId()),\r\n            LocalDate.now()\r\n    );\r\n\r\n    log.info(&quot;update {}&quot;, dish);\r\n\r\n    checkNotFound(repository.save(dish), &quot;id=&quot; + id);\r\n}\r\n```\r\nWhat I&#39;ve tried:\r\n1. change cascadetype\r\n2. change generatedstrategy\r\n3. set fetchtype to eager\r\n\r\n\r\n\r\n","title":"Troubles with updating hibernate entity","body":"<p>I'm trying to configure many-to-one relationship between dish and restaurant. Create/read/delete operations work properly, but I face this error when I'm trying to update dish entity:</p>\n<pre class=\"lang-none prettyprint-override\"><code>org.hibernate.PersistentObjectException: detached entity passed to persist: org.polik.votingsystem.model.Dish\n    at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:120) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:760) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:746) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:362) ~[spring-orm-5.3.16.jar:5.3.16]\n    at jdk.proxy3/jdk.proxy3.$Proxy115.persist(Unknown Source) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311) ~[spring-orm-5.3.16.jar:5.3.16]\n    at jdk.proxy3/jdk.proxy3.$Proxy115.persist(Unknown Source) ~[na:na]\n    at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:637) ~[spring-data-jpa-2.6.2.jar:2.6.2]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:529) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:639) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.16.jar:5.3.16]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:163) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:138) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.16.jar:5.3.16]\n    at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:80) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.16.jar:5.3.16]\n</code></pre>\n<p>Dish entity:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;dishes&quot;)\n@Getter\n@Setter\n@ToString\n@NoArgsConstructor\npublic class Dish extends BaseEntity {\n    @Column(name = &quot;name&quot;)\n    @NotNull\n    private String name;\n\n    @Column(name = &quot;price&quot;)\n    @NotNull\n    private Integer price;\n\n    @ManyToOne(fetch = FetchType.EAGER, cascade = {CascadeType.MERGE, CascadeType.REFRESH})\n    @JoinColumn(name = &quot;restaurant_id&quot;)\n    private Restaurant restaurant;\n\n    @Column(name = &quot;date&quot;)\n    @CreationTimestamp\n    private LocalDate date;\n\n    public Dish(Integer id, String name, Integer price) {\n        super(id);\n        this.name = name;\n        this.price = price;\n    }\n\n    public Dish(Integer id, String name, Integer price, Restaurant restaurant, LocalDate date) {\n        super(id);\n        this.name = name;\n        this.price = price;\n        this.restaurant = restaurant;\n        this.date = date;\n    }\n}\n</code></pre>\n<p>restaurant entity</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;restaurant&quot;)\n@Getter\n@Setter\n@NoArgsConstructor\npublic class Restaurant extends BaseEntity {\n    @Column(name = &quot;name&quot;)\n    @NotNull\n    private String name;\n}\n</code></pre>\n<p>base entity</p>\n<pre class=\"lang-java prettyprint-override\"><code>@MappedSuperclass\n@Access(AccessType.FIELD)\n@Getter\n@Setter\n@NoArgsConstructor\npublic abstract class BaseEntity implements Persistable&lt;Integer&gt; {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    protected Integer id;\n\n    public BaseEntity(Integer id) {\n        this.id = id;\n    }\n\n    @Override\n    public boolean isNew() {\n        return id != null;\n    }\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) {\n            return true;\n        }\n        if (o == null || !getClass().equals(Hibernate.getClass(o))) {\n            return false;\n        }\n        BaseEntity that = (BaseEntity) o;\n        return id != null &amp;&amp; id.equals(that.id);\n    }\n\n    @Override\n    public int hashCode() {\n        return id == null ? 0 : id;\n    }\n}\n</code></pre>\n<p>update method</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Transactional\npublic void update(DishTo dishTo, int id) {\n    Dish dish = new Dish(\n            id,\n            dishTo.getName(),\n            dishTo.getPrice(),\n            getRestaurantById(dishTo.getRestaurantId()),\n            LocalDate.now()\n    );\n\n    log.info(&quot;update {}&quot;, dish);\n\n    checkNotFound(repository.save(dish), &quot;id=&quot; + id);\n}\n</code></pre>\n<p>What I've tried:</p>\n<ol>\n<li>change cascadetype</li>\n<li>change generatedstrategy</li>\n<li>set fetchtype to eager</li>\n</ol>\n"},{"tags":["java","android","permissions"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1649672371,"post_id":71826040,"comment_id":126927165,"body_markdown":"https://stackoverflow.com/questions/71824925/file-created-with-android-mediastore-is-not-visible-anymore-after-application-re","body":"<a href=\"https://stackoverflow.com/questions/71824925/file-created-with-android-mediastore-is-not-visible-anymore-after-application-re\" title=\"file created with android mediastore is not visible anymore after application re\">stackoverflow.com/questions/71824925/&hellip;</a>"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1649672431,"post_id":71826040,"comment_id":126927189,"body_markdown":"But for 29 you should not have this problem.","body":"But for 29 you should not have this problem."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1649672747,"post_id":71826040,"comment_id":126927297,"body_markdown":"There is no code that creates any file.","body":"There is no code that creates any file."},{"owner":{"account_id":22583588,"reputation":21,"user_id":16767893,"display_name":"ProxoJ"},"score":0,"creation_date":1649672898,"post_id":71826040,"comment_id":126927356,"body_markdown":"The code which adds files is not a part of this file. This file purely lists existing files and leads the user to a frame to create new files.","body":"The code which adds files is not a part of this file. This file purely lists existing files and leads the user to a frame to create new files."}],"owner":{"account_id":22583588,"reputation":21,"user_id":16767893,"display_name":"ProxoJ"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1649672186,"creation_date":1649671912,"question_id":71826040,"body_markdown":"I&#39;m trying to access files in the android document folder. The code below works as long as the current installation of the app has created the files. After reinstalling the app or adding documents any other way the app can&#39;t access the files anymore. The file list shows up empty. Upon creating a new file, the newly created file is listed and accessible. I suspect my app is not allowed to use files in the document folder, if they are not created by the app itself - how do i change the permissions accordingly? Saving the files in the app folder  is not an option.\r\nThe API version is 29.\r\n\r\n    package com.example.pos1;\r\n    \r\n    import static com.example.example.pos1.*;\r\n    \r\n    import static org.apache.commons.io.FilenameUtils.removeExtension;\r\n    \r\n    import android.Manifest;\r\n    import android.app.Activity;\r\n    import android.content.Intent;\r\n    import android.content.pm.PackageManager;\r\n    import android.os.Build;\r\n    import android.os.Bundle;\r\n    import android.os.Environment;\r\n    import android.view.View;\r\n    import android.widget.AdapterView;\r\n    import android.widget.ArrayAdapter;\r\n    import android.widget.Button;\r\n    import android.widget.ListView;\r\n    import android.widget.Toast;\r\n    \r\n    import androidx.core.app.ActivityCompat;\r\n    \r\n    import java.io.File;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class MainActivity extends Activity {\r\n    \r\n        private Button startnPButton;\r\n    \r\n    \r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n    \r\n            requestStoragePermission();\r\n    \r\n    \r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            startnPButton = (Button) findViewById(R.id.nPButton);\r\n            startnPButton.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    openNew();\r\n                }\r\n            });\r\n    \r\n    \r\n            ImportMA();\r\n    \r\n    \r\n    \r\n        }\r\n    \r\n        private void requestStoragePermission()\r\n        {\r\n         \r\n            ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.READ_EXTERNAL_STORAGE,Manifest.permission.WRITE_EXTERNAL_STORAGE}, PackageManager.PERMISSION_GRANTED);\r\n    \r\n    \r\n    \r\n        }\r\n    \r\n        public void openNew() {\r\n            Intent intent = new Intent(this, neuesProjekt.class);\r\n            startActivity(intent);\r\n        }\r\n    \r\n        public void loadexisting() {\r\n            Intent intent = new Intent(this, NeueWohnung.class);\r\n            startActivity(intent);\r\n    \r\n    \r\n        }\r\n    \r\n        public void ImportMA()\r\n        {\r\n    \r\n            ListView listView=findViewById(R.id.listview);\r\n    \r\n            List&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n    \r\n            ArrayAdapter arrayAdapter = new ArrayAdapter(getApplicationContext(), android.R.layout.simple_list_item_1,list);\r\n    \r\n            File path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOCUMENTS);\r\n            File[] files = path.listFiles();\r\n    \r\n            \r\n    \r\n            if (files.length&gt;0)\r\n            {\r\n    \r\n                for(int i = 0; i &lt; files.length; i++)\r\n                {\r\n                    System.out.println(files[i].getName());\r\n                    list.add(removeExtension(files[i].getName()));\r\n    \r\n                }\r\n    \r\n            }\r\n            else\r\n            {\r\n                list.add(&quot;No elements!&quot;);\r\n    \r\n            }\r\n            listView.setAdapter(arrayAdapter);\r\n    \r\n            listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n                @Override\r\n                public void onItemClick(AdapterView&lt;?&gt; parent, View view,\r\n                                        int position, long id) {\r\n    \r\n                    String x = (String) listView.getItemAtPosition(position);\r\n                    String filepath = new String (Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOCUMENTS)+&quot;/&quot;+x+&quot;.xls&quot;);\r\n                    setFilepath(filepath);\r\n                    setName(x);\r\n    \r\n                    Toast.makeText(getApplicationContext(),\r\n                            &quot;Projekt: &quot;+getName(), Toast.LENGTH_SHORT)\r\n                            .show();\r\n    \r\n    \r\n    \r\n                    loadexisting();\r\n    \r\n                }\r\n    \r\n    \r\n            });\r\n    \r\n        }\r\n    \r\n    \r\n    }","title":"Missing permission for Android document folder","body":"<p>I'm trying to access files in the android document folder. The code below works as long as the current installation of the app has created the files. After reinstalling the app or adding documents any other way the app can't access the files anymore. The file list shows up empty. Upon creating a new file, the newly created file is listed and accessible. I suspect my app is not allowed to use files in the document folder, if they are not created by the app itself - how do i change the permissions accordingly? Saving the files in the app folder  is not an option.\nThe API version is 29.</p>\n<pre><code>package com.example.pos1;\n\nimport static com.example.example.pos1.*;\n\nimport static org.apache.commons.io.FilenameUtils.removeExtension;\n\nimport android.Manifest;\nimport android.app.Activity;\nimport android.content.Intent;\nimport android.content.pm.PackageManager;\nimport android.os.Build;\nimport android.os.Bundle;\nimport android.os.Environment;\nimport android.view.View;\nimport android.widget.AdapterView;\nimport android.widget.ArrayAdapter;\nimport android.widget.Button;\nimport android.widget.ListView;\nimport android.widget.Toast;\n\nimport androidx.core.app.ActivityCompat;\n\nimport java.io.File;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class MainActivity extends Activity {\n\n    private Button startnPButton;\n\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n\n        requestStoragePermission();\n\n\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        startnPButton = (Button) findViewById(R.id.nPButton);\n        startnPButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                openNew();\n            }\n        });\n\n\n        ImportMA();\n\n\n\n    }\n\n    private void requestStoragePermission()\n    {\n     \n        ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.READ_EXTERNAL_STORAGE,Manifest.permission.WRITE_EXTERNAL_STORAGE}, PackageManager.PERMISSION_GRANTED);\n\n\n\n    }\n\n    public void openNew() {\n        Intent intent = new Intent(this, neuesProjekt.class);\n        startActivity(intent);\n    }\n\n    public void loadexisting() {\n        Intent intent = new Intent(this, NeueWohnung.class);\n        startActivity(intent);\n\n\n    }\n\n    public void ImportMA()\n    {\n\n        ListView listView=findViewById(R.id.listview);\n\n        List&lt;String&gt; list = new ArrayList&lt;&gt;();\n\n        ArrayAdapter arrayAdapter = new ArrayAdapter(getApplicationContext(), android.R.layout.simple_list_item_1,list);\n\n        File path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOCUMENTS);\n        File[] files = path.listFiles();\n\n        \n\n        if (files.length&gt;0)\n        {\n\n            for(int i = 0; i &lt; files.length; i++)\n            {\n                System.out.println(files[i].getName());\n                list.add(removeExtension(files[i].getName()));\n\n            }\n\n        }\n        else\n        {\n            list.add(&quot;No elements!&quot;);\n\n        }\n        listView.setAdapter(arrayAdapter);\n\n        listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {\n            @Override\n            public void onItemClick(AdapterView&lt;?&gt; parent, View view,\n                                    int position, long id) {\n\n                String x = (String) listView.getItemAtPosition(position);\n                String filepath = new String (Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOCUMENTS)+&quot;/&quot;+x+&quot;.xls&quot;);\n                setFilepath(filepath);\n                setName(x);\n\n                Toast.makeText(getApplicationContext(),\n                        &quot;Projekt: &quot;+getName(), Toast.LENGTH_SHORT)\n                        .show();\n\n\n\n                loadexisting();\n\n            }\n\n\n        });\n\n    }\n\n\n}\n</code></pre>\n"},{"tags":["java","android","android-manifest"],"comments":[{"owner":{"account_id":14186902,"reputation":229,"user_id":10248593,"display_name":"Jinal Patel"},"score":0,"creation_date":1649672646,"post_id":71826088,"comment_id":126927262,"body_markdown":"Only Activity/services/broadcast receivers required exported attribute. for launcher activity it should be true and false for rest of the components.","body":"Only Activity/services/broadcast receivers required exported attribute. for launcher activity it should be true and false for rest of the components."},{"owner":{"account_id":5282904,"reputation":18287,"user_id":4217682,"accept_rate":50,"display_name":"snachmsm"},"score":0,"creation_date":1649672901,"post_id":71826088,"comment_id":126927358,"body_markdown":"post your merged manifest as text, not screenshot of sum-upof all dependencies","body":"post your merged manifest as text, not screenshot of sum-upof all dependencies"}],"owner":{"account_id":22545518,"reputation":21,"user_id":16735519,"display_name":"Engin &#214;R&#220;N"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":279,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649672132,"creation_date":1649672132,"question_id":71826088,"body_markdown":"i have reviewed many threads about this error but it is not resolved. Finally, I exported everything in the manifest file, but this did not solve it either. Can you help me?\r\n\r\nConsole Error\r\n```\r\nManifest merger failed : android:exported needs to be explicitly specified for &lt;activity&gt;. Apps targeting Android 12 and higher are required to specify an explicit value for android:exported` when the corresponding component has an intent filter defined. See https://developer.android.com/guide/topics/manifest/activity-element#exported for details.\r\n```\r\n\r\nMy Manifest File;\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    package=&quot;com.educationyks.yksapp&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.CAMERA&quot; tools:node=&quot;remove&quot; /&gt;\r\n\r\n    &lt;uses-feature android:name=&quot;android.hardware.camera&quot; /&gt;\r\n    &lt;queries android:exported=&quot;true&quot;&gt;\r\n        &lt;intent android:exported=&quot;true&quot;&gt;\r\n            &lt;action android:name=&quot;com.google.android.youtube.api.service.START&quot; android:exported=&quot;true&quot;/&gt;\r\n        &lt;/intent&gt;\r\n    &lt;/queries&gt;\r\n\r\n    &lt;application\r\n        android:name=&quot;.ApplicationClass&quot;\r\n        android:allowBackup=&quot;true&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:requestLegacyExternalStorage=&quot;true&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:exported=&quot;true&quot;\r\n        android:theme=&quot;@style/AppFullScreenTheme&quot;\r\n        android:usesCleartextTraffic=&quot;true&quot;&gt;\r\n\r\n        &lt;activity android:name=&quot;.ui.Forum.ForumMyPostsActivity&quot;\r\n            android:exported=&quot;true&quot; /&gt;\r\n        &lt;activity android:name=&quot;.ui.Forum.ForumTekliPostActivity&quot;\r\n            android:exported=&quot;true&quot; /&gt;\r\n        &lt;activity android:name=&quot;.Activities.TekliSoruGosterActivity&quot;\r\n            android:exported=&quot;true&quot;/&gt;\r\n\r\n        &lt;meta-data\r\n            android:name=&quot;com.google.firebase.messaging.default_notification_icon&quot;\r\n            android:resource=&quot;@drawable/ic_stat_onesignal_default&quot;\r\n            android:exported=&quot;true&quot;/&gt;\r\n\r\n        &lt;meta-data\r\n            android:name=&quot;com.facebook.sdk.ApplicationId&quot;\r\n            android:value=&quot;@string/facebook_app_id&quot;\r\n            tools:replace=&quot;android:value&quot;\r\n            android:exported=&quot;true&quot;/&gt;\r\n\r\n        &lt;activity\r\n            android:name=&quot;.Activities.DersVideoActivity&quot;\r\n            android:configChanges=&quot;keyboardHidden|orientation|screenSize&quot;\r\n            android:exported=&quot;true&quot;/&gt;\r\n\r\n        &lt;activity android:name=&quot;.Activities.LoginActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter android:exported=&quot;true&quot;&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; android:exported=&quot;true&quot;/&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; android:exported=&quot;true&quot;/&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n\r\n        &lt;activity android:name=&quot;.Activities.UniversitySelectionActivity&quot;\r\n            android:exported=&quot;true&quot; /&gt;\r\n\r\n        &lt;activity\r\n            android:name=&quot;.Activities.MainActivity&quot;\r\n            android:label=&quot;@string/app_name&quot;\r\n            android:exported=&quot;true&quot;/&gt;\r\n\r\n        &lt;receiver android:name=&quot;.Activities.AlarmReceiver&quot;\r\n            android:exported=&quot;true&quot;/&gt;\r\n\r\n        &lt;meta-data\r\n            android:name=&quot;com.google.android.gms.ads.APPLICATION_ID&quot;\r\n            android:value=&quot;ca-app-pub-2414658395986510~9865466288&quot;\r\n            android:exported=&quot;true&quot;\r\n            /&gt;\r\n\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n```\r\nMerged Manifest;\r\n\r\n[![Merged Manifest Screenshot][1]][1]\r\n\r\nLastly, All of my implementations are up-to-date. I tried all the methods that I can think of and read, but I can&#39;t find a solution. I request your help on the matter.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/03sl2.png","title":"android:exported needs to be explicitly specified for &lt;activity&gt;.Android 12 and higher are required to specify an explicit value for `android:exported","body":"<p>i have reviewed many threads about this error but it is not resolved. Finally, I exported everything in the manifest file, but this did not solve it either. Can you help me?</p>\n<p>Console Error</p>\n<pre><code>Manifest merger failed : android:exported needs to be explicitly specified for &lt;activity&gt;. Apps targeting Android 12 and higher are required to specify an explicit value for android:exported` when the corresponding component has an intent filter defined. See https://developer.android.com/guide/topics/manifest/activity-element#exported for details.\n</code></pre>\n<p>My Manifest File;</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    package=&quot;com.educationyks.yksapp&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.CAMERA&quot; tools:node=&quot;remove&quot; /&gt;\n\n    &lt;uses-feature android:name=&quot;android.hardware.camera&quot; /&gt;\n    &lt;queries android:exported=&quot;true&quot;&gt;\n        &lt;intent android:exported=&quot;true&quot;&gt;\n            &lt;action android:name=&quot;com.google.android.youtube.api.service.START&quot; android:exported=&quot;true&quot;/&gt;\n        &lt;/intent&gt;\n    &lt;/queries&gt;\n\n    &lt;application\n        android:name=&quot;.ApplicationClass&quot;\n        android:allowBackup=&quot;true&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:requestLegacyExternalStorage=&quot;true&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:exported=&quot;true&quot;\n        android:theme=&quot;@style/AppFullScreenTheme&quot;\n        android:usesCleartextTraffic=&quot;true&quot;&gt;\n\n        &lt;activity android:name=&quot;.ui.Forum.ForumMyPostsActivity&quot;\n            android:exported=&quot;true&quot; /&gt;\n        &lt;activity android:name=&quot;.ui.Forum.ForumTekliPostActivity&quot;\n            android:exported=&quot;true&quot; /&gt;\n        &lt;activity android:name=&quot;.Activities.TekliSoruGosterActivity&quot;\n            android:exported=&quot;true&quot;/&gt;\n\n        &lt;meta-data\n            android:name=&quot;com.google.firebase.messaging.default_notification_icon&quot;\n            android:resource=&quot;@drawable/ic_stat_onesignal_default&quot;\n            android:exported=&quot;true&quot;/&gt;\n\n        &lt;meta-data\n            android:name=&quot;com.facebook.sdk.ApplicationId&quot;\n            android:value=&quot;@string/facebook_app_id&quot;\n            tools:replace=&quot;android:value&quot;\n            android:exported=&quot;true&quot;/&gt;\n\n        &lt;activity\n            android:name=&quot;.Activities.DersVideoActivity&quot;\n            android:configChanges=&quot;keyboardHidden|orientation|screenSize&quot;\n            android:exported=&quot;true&quot;/&gt;\n\n        &lt;activity android:name=&quot;.Activities.LoginActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter android:exported=&quot;true&quot;&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; android:exported=&quot;true&quot;/&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; android:exported=&quot;true&quot;/&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n\n        &lt;activity android:name=&quot;.Activities.UniversitySelectionActivity&quot;\n            android:exported=&quot;true&quot; /&gt;\n\n        &lt;activity\n            android:name=&quot;.Activities.MainActivity&quot;\n            android:label=&quot;@string/app_name&quot;\n            android:exported=&quot;true&quot;/&gt;\n\n        &lt;receiver android:name=&quot;.Activities.AlarmReceiver&quot;\n            android:exported=&quot;true&quot;/&gt;\n\n        &lt;meta-data\n            android:name=&quot;com.google.android.gms.ads.APPLICATION_ID&quot;\n            android:value=&quot;ca-app-pub-2414658395986510~9865466288&quot;\n            android:exported=&quot;true&quot;\n            /&gt;\n\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p>Merged Manifest;</p>\n<p><a href=\"https://i.stack.imgur.com/03sl2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/03sl2.png\" alt=\"Merged Manifest Screenshot\" /></a></p>\n<p>Lastly, All of my implementations are up-to-date. I tried all the methods that I can think of and read, but I can't find a solution. I request your help on the matter.</p>\n"},{"tags":["java","cucumber","picocontainer"],"comments":[{"owner":{"account_id":11380920,"reputation":8254,"user_id":8343843,"display_name":"Alexey R."},"score":0,"creation_date":1649663790,"post_id":71823206,"comment_id":126923943,"body_markdown":"What exactly not working? Can you narrow down your issue? Can check if your parallel executions use different instances of `WebDriver`?","body":"What exactly not working? Can you narrow down your issue? Can check if your parallel executions use different instances of <code>WebDriver</code>?"},{"owner":{"account_id":11380920,"reputation":8254,"user_id":8343843,"display_name":"Alexey R."},"score":0,"creation_date":1649664068,"post_id":71823206,"comment_id":126924032,"body_markdown":"Also can you please clean up your code? remove commented code, bring it to somewhat that could be at least compiled.. Because this `public HomeStepDef(PicoHelperpage picHelper;) {` wouldn&#39;t..","body":"Also can you please clean up your code? remove commented code, bring it to somewhat that could be at least compiled.. Because this <code>public HomeStepDef(PicoHelperpage picHelper;) {</code> wouldn&#39;t.."},{"owner":{"account_id":16918250,"reputation":85,"user_id":12235678,"display_name":"Niks"},"score":0,"creation_date":1649665805,"post_id":71823206,"comment_id":126924640,"body_markdown":"hi @AlexeyR. The issue i am facing is \n1. IF we have two feature file in a feature file and we try to run them using test runner, It will not run in parrellel.\n2. If i have more than 2 scenario that are depending to share driver and data They do not get executed. And Browser just open for each scenario in feature file.\nI will try to make it a generic example if i can. But I can not share company code in here.","body":"hi @AlexeyR. The issue i am facing is  1. IF we have two feature file in a feature file and we try to run them using test runner, It will not run in parrellel. 2. If i have more than 2 scenario that are depending to share driver and data They do not get executed. And Browser just open for each scenario in feature file. I will try to make it a generic example if i can. But I can not share company code in here."},{"owner":{"account_id":11380920,"reputation":8254,"user_id":8343843,"display_name":"Alexey R."},"score":0,"creation_date":1649665977,"post_id":71823206,"comment_id":126924707,"body_markdown":"What does it mean &quot;not run in parallel&quot;? They will run sequentially or they fail with some error?","body":"What does it mean &quot;not run in parallel&quot;? They will run sequentially or they fail with some error?"},{"owner":{"account_id":16918250,"reputation":85,"user_id":12235678,"display_name":"Niks"},"score":0,"creation_date":1649666148,"post_id":71823206,"comment_id":126924767,"body_markdown":"If i do not make my webdriver static in DriverFactory.\nit just does not execute 2nd secenario of feature file 3 and gives error. \n&#39;org.openqa.selenium.NoSuchElementException: no such element: Unable to locate element&#39;\nand also open a blank browser window","body":"If i do not make my webdriver static in DriverFactory. it just does not execute 2nd secenario of feature file 3 and gives error.  &#39;org.openqa.selenium.NoSuchElementException: no such element: Unable to locate element&#39; and also open a blank browser window"},{"owner":{"account_id":16918250,"reputation":85,"user_id":12235678,"display_name":"Niks"},"score":0,"creation_date":1649666751,"post_id":71823206,"comment_id":126925014,"body_markdown":"Also, if i use &quot;static&quot; wedriver then my runner does not run all the feature file.\nFor 2nd feature file it gives me error\n~~~\norg.openqa.selenium.NoSuchSessionException: Session ID is null. Using WebDriver after calling quit()?\n\n~~~","body":"Also, if i use &quot;static&quot; wedriver then my runner does not run all the feature file. For 2nd feature file it gives me error ~~~ org.openqa.selenium.NoSuchSessionException: Session ID is null. Using WebDriver after calling quit()?  ~~~"},{"owner":{"account_id":16918250,"reputation":85,"user_id":12235678,"display_name":"Niks"},"score":0,"creation_date":1649667123,"post_id":71823206,"comment_id":126925153,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/243778/discussion-between-niks-and-alexey-r).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/243778/discussion-between-niks-and-alexey-r\">continue this discussion in chat</a>."},{"owner":{"account_id":11380920,"reputation":8254,"user_id":8343843,"display_name":"Alexey R."},"score":0,"creation_date":1649677768,"post_id":71823206,"comment_id":126928968,"body_markdown":"If you are using PicoContainer then I would suggest to check [this example](https://www.webelement.click/en/cucumber_java_8_selenium_pageobject_picocontainer_tutorial). There you can find the clue on how to use WebDriver with PicoContainer. Pay attention to `LazyWebDriver` implementation.","body":"If you are using PicoContainer then I would suggest to check <a href=\"https://www.webelement.click/en/cucumber_java_8_selenium_pageobject_picocontainer_tutorial\" rel=\"nofollow noreferrer\">this example</a>. There you can find the clue on how to use WebDriver with PicoContainer. Pay attention to <code>LazyWebDriver</code> implementation."}],"owner":{"account_id":16918250,"reputation":85,"user_id":12235678,"display_name":"Niks"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":267,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649671888,"creation_date":1649656329,"question_id":71823206,"body_markdown":"Background: We had a very big step definition and it was getting difficult to manage it. \r\nSo, we have decided to split step definition into multiple small definitions using this new automation base.\r\n\r\nStack: Selenium, Java, Cucumber,Junit, Picocontainer.\r\n\r\nTo achieve the above, we have looked for lot of suggestions on various websites and stackoverflow discussion, There are many suggestions like using Dependency Injection (Picocontainer), use Constructor Injection, spring etc.\r\n\r\nAfter going through all those suggestions **we used Pico Container dependency injection solution**. It helped in:\r\n\r\n 1. To divide 1 big stepdef into multiple.\r\n 2. Sharing data between step defs as well.\r\n\r\nNow, we are facing below problems:\r\n\r\n 1. When we use are running Smoke test using ScenarioOutline and example. Feature File1 example. then we get error\r\n like: org.openqa.selenium.NoSuchSessionException: Session ID is null. Using WebDriver after calling quit()?\r\n \r\n 2. Unable to Run multiple feature file in feature folder using 1 TestRunner Class.\r\n\r\nSolution tried:\r\nWhen we do not use static Webdriver in DriverFactoryManager then, it works perfectly, I can run Feature File1 with ScenarioOutline\r\nalso,\r\nI can run multiple feature file in sequence using 1 test runner.\r\n\r\nHowever, If a feature file has more than 1 test scenario like FeatureFile2 , then it does not run 2nd scenario.and give error.\r\nIn DriverFactory when we make Webdriver static then it keep the session and helps to execute all scenarios listed in 1 feature file.\r\n\r\nCould you please help to achieve 3 things :\r\n1. MY Feature file with multiple scenario for eCommerce website should be able to execute all cases listed with 1 browser session.\r\n2. All the feature file listed in Feature file can be executed in parallel or sequential using Test Runner.\r\n\r\n\r\n~~~\r\nsrc/main/java\r\n|-&gt;baseFramework\r\n  |--&gt;pagefactory\r\n  |    |----- LoginPage.class\r\n  |    |----- HomePage.class\r\n  |    |----- ProductPage.class\r\n  |    |----- PaymentPage.class\r\n  |--&gt;picoHelper\r\n  |    |-----PicoHelperPage.class   \r\n  |    |-----SharedData.class   \t\t\r\n  |--&gt;helpers\r\n  |    |--&gt;wait\r\n  |    |-----waitHelper.class\r\n  |    |--&gt;util\r\n  |    |-----DriverFactoryManager.class\r\n  |    |-----PageFactoryManager.class \r\n~~~\r\n\r\n~~~\r\nsrc/test/testBase\r\n  |--&gt;stepDefinition\r\n  |    |-----LoginStepDef.class\r\n  |    |-----HomePageStepDef.class\r\n  |    |-----ProductStepDef.class\r\n  |    |-----PaymentStepDef.class\r\n  |--&gt;Runner\r\n  |    |-----TestRunner\r\nsrc/test/features\r\n  |--&gt;SanityTest\r\n  |    |-----Login.feature\r\n  |    |-----Product.feature\r\n~~~\r\n\r\nFeature file1:\r\n~~~\r\n#Author : Nikhil Kumar\r\n#Feature: Smoke login test for all different version of test and staging environment\r\n@Smoke\r\nFeature: To Test the functionality of login and logout of various environment and tenant\r\n\r\n  Scenario Outline: Smoke login test for all different version of test and staging environment\r\n    Given Browser has been launched\r\n    When User navigate to loginpage of &quot;&lt;Environment&gt;&quot; environment\r\n    And User enters &lt;username&gt; and &lt;password&gt;\r\n    And Clicks on SignIn button\r\n    Then User should be able to see homepage\r\n    And User should be able to logout\r\n\r\n    Examples:\r\n      | Environment | username  | password        |\r\n      | Test        | xxx.x@com | qwert |\r\n\t  \r\n~~~\r\n\r\nFeature file2:\r\n~~~\r\n#Author : Nikhil Kumar\r\n#Feature: Smoke login test for all different  version of test and staging environment\r\n@Smoke\r\nFeature: A test\r\n\r\n  Scenario: Successful Login to  with Valid Credentials\r\n    Given Browser has been launched\r\n    When User navigate to loginpage of &quot;Test&quot; environment \r\n    And User enters valid credentials for Tenant &quot;Test1&quot;\r\n    And Clicks on SignIn button\r\n    Then User should be able to see homepage\r\n\r\n  Scenario:check logout link\r\n    Given User is logged in\r\n    When User clicks on user avatar\r\n    Then User should see logout link and logout sucessfully\r\n\r\n\r\n~~~\r\n\r\nDriverFactoryManager\r\n~~~\r\n\r\npublic class DriverFactoryManager {\r\n\r\n    static WebDriver driver = null;\r\n    public DriverFactoryManager() {\r\n\r\n        //Blank\r\n    }\r\n\r\n    // To launch driver\r\n    public WebDriver getDriver() {\r\n        if (driver == null) {\r\n            WebDriverManager.chromedriver().setup();\r\n            driver = new ChromeDriver();\r\n        }\r\n        return driver;\r\n\r\n    }\r\n  \r\n~~~\r\n\r\nPageObjectManager\r\n~~~\r\n\tprivate  WebDriver driver;\r\n    private LoginPage login;\r\n    private AdvanceSearchPage objAdvSrh;\r\n    private ProductManagerPage objPM;\r\n    private HomePage home;\r\n\r\n    public PageObjectManager(WebDriver driver) {\r\n\r\n        this.driver = driver;\r\n\r\n    }\r\n\r\n    public LoginPage getLoginPage() {\r\n        if (login == null) {\r\n            login = new LoginPage(driver);\r\n        }\r\n        return login;\r\n        //  return (lp == null) ? lp = new LoginPage(driver) : lp;\r\n\r\n    }\r\n\r\n    public HomePage getHomePage() {\r\n\r\n        return (home == null) ? home = new HomePage(driver) : home;\r\n    }\r\n\r\n    public ProductManagerPage getProductManagerPage() {\r\n\r\n        return (objPM == null) ? objPM = new ProductManagerPage(driver) : objPM;\r\n\r\n    }\r\n\t\r\n\tand so on for all pages.....\r\n~~~\r\n\r\npicoHelperPage looks like:\r\n\r\n~~~\r\npublic class PicoHelperPage {\r\n\r\n     DriverFactoryManager driverFactoryManager;\r\n     PageObjectManager pageObjectManager;\r\n \r\n    public PicoHelperPage() {\r\n        driverFactoryManager = new DriverFactoryManager();\r\n        pageObjectManager = new PageObjectManager(driverFactoryManager.getDriver());\r\n\t\t  log.info(&quot;PicContainer : Starting Execution from Initializing constructor for PicContainer class&quot;);\r\n    }\r\n\r\n    public DriverFactoryManager getDriverFactoryManager() {\r\n        return driverFactoryManager;\r\n    }\r\n\r\n    public PageObjectManager getPageObjectManager() {\r\n\r\n        return pageObjectManager;\r\n    }\r\n   \r\n}\r\n~~~\r\n\r\nStep definition: LoginStepDef\r\n~~~\r\npublic class LoginStepDef {\r\n    LoginPage login;\r\n    PicoHelperPage picoHelper;\r\n\r\n\r\n    private Logger log = LoggerHelper.getLogger(LoginStepDef.class);\r\n\r\n\r\n    public LoginStepDef(PicoHelperPage picHelper) throws IOException {\r\n\t  picoHelper = picHelper;\r\n        login = picoHelper.getPageObjectManager().getLoginPage();\r\n\r\n\r\n    }\r\n\r\n    @When(&quot;User navigate to loginpage of \\&quot;(.*)\\&quot; environment of Comestri$&quot;)\r\n    public void userNavigateToHomepageOfComestri(String env) {\r\n        login.navigateTo_HomePage(env);\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * COMESTRI: ADMIN PAGE CREDENTIALS\r\n     */\r\n    @And(&quot;^User enters valid credentials for Comestri Tenant \\&quot;(.*)\\&quot;$&quot;)\r\n    public void userEntersCredentials(String version) {\r\n        login.entersCredentials(version);\r\n\r\n    }\r\n\r\n\r\n    @When(&quot;^User enters (.*) and (.*)$&quot;)\r\n    public void userEntersUsernameAndPassword(String Username, String Password) {\r\n        System.out.println(&quot;entering credentials&quot;);\r\n        login.entersUsername(Username);\r\n        login.entersPassword(Password);\r\n\r\n    }\r\n\r\n      @And(&quot;Clicks on SignIn button&quot;)\r\n    public void clicksOnSignInButton() {\r\n        login.clickSigin();\r\n        try {\r\n            Thread.sleep(2000);\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n        String errorMsg = &quot;Invalid Email or password.&quot;;\r\n        if (login.getPageSource().contains(errorMsg)) {\r\n            Assert.fail(&quot;User with Invalid Credential is trying to Login. Test case failed...&quot;);\r\n\r\n        } else {\r\n            System.out.println(&quot;valid user is trying to login....&quot;);\r\n        }\r\n    }\r\n\t\r\n\t\r\n~~~\r\n\r\n\r\nHomepage StepDefs\r\n~~~\r\npackage CucumberTest.stepDefinitions;\r\n\r\nimport cucumber.api.java.en.And;\r\nimport cucumber.api.java.en.Then;\r\nimport cucumber.api.java.en.When;\r\nimport cucumberBase.driverFactory.managers.PageObjectManager;\r\nimport cucumberBase.helpers.logger.LoggerHelper;\r\nimport cucumberBase.pageFactory.HomePage;\r\nimport cucumberBase.picoHelper.TestContext;\r\nimport org.apache.log4j.Logger;\r\n\r\n\r\npublic class HomeStepDef {\r\n\r\n    PicoHelperpage picHelper;\r\n    WebDriver driver;\r\n    HomePage home;\r\n   \r\n\r\n    public HomeStepDef(PicoHelperpage picHelper;) {\r\n        picoHelper= picHelper;\r\n        home = picoHelper.getPageObjectManager().getHomePage();\r\n\r\n    }\r\n\r\n\r\n    @When(&quot;User clicks on user avatar&quot;)\r\n    public void userClicksOnUserAvatar() {\r\n        home.clickSignOutMenu();\r\n        log.info(&quot;Avatar Icon is clicked...&quot;);\r\n    }\r\n\r\n\r\n    @Then(&quot;User should see logout link and logout sucessfully&quot;)\r\n    public void userShouldSeeLogoutLink() {\r\n        log.info(&quot;Signout button must be visible now&quot;);\r\n        home.clickLogOut();\r\n        log.info(&quot;User Logged out Successfully.......&quot;);\r\n\t\t// THis below line will close driver...\r\n       home.driverClose();\r\n    }\r\n\r\n    @And(&quot;User should be able to logout&quot;)\r\n    public void Logout() {\r\n        home.clickSignOutMenu();\r\n        try {\r\n            Thread.sleep(1000);\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        home.clickLogOut();\r\n        log.info(&quot;Successfully Logout of system....&quot;);\r\n        home.driverClose();\r\n    }\r\n\r\n    @When(&quot;User click at link on LHS menu&quot;)\r\n    public void userClickAtLinkOnLHSMenu() {\r\n        System.out.println(&quot;LHS all links are clickable...&quot;);\r\n    }\r\n\r\n    @Then(&quot;User should be able to see proper pages&quot;)\r\n    public void userShouldBeAbleToSeeProperPages() {\r\n        System.out.println(&quot;Expected pages are visible/............&quot;);\r\n    }\r\n\r\n}\r\n\r\n~~~\r\n\r\nLoginPage\r\n~~~\r\npackage cucumberBase.pageFactory;\r\n\r\n\r\nimport cucumberBase.helpers.dropDown.DropDownHelper;\r\nimport cucumberBase.helpers.javaScript.JavaScriptHelper;\r\nimport cucumberBase.helpers.logger.LoggerHelper;\r\nimport cucumberBase.helpers.wait.WaitHelper;\r\nimport org.apache.log4j.Logger;\r\nimport org.openqa.selenium.By;\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.WebElement;\r\nimport org.openqa.selenium.support.CacheLookup;\r\nimport org.openqa.selenium.support.FindBy;\r\nimport org.openqa.selenium.support.PageFactory;\r\n\r\n\r\npublic class LoginPage  {\r\n    WebDriver driver;\r\n    WaitHelper waitHelper;\r\n    JavaScriptHelper jsHelper;\r\n    DropDownHelper selectHelper;\r\n    private final Logger log = LoggerHelper.getLogger(LoginPage.class);\r\n    /**\r\n     * THese are all locator for Login section\r\n     */\r\n\r\n\r\n    @FindBy(id = &quot;user_email&quot;)\r\n    @CacheLookup\r\n    WebElement txt_userEmail;\r\n\r\n    @FindBy(id = &quot;user_password&quot;)\r\n    @CacheLookup\r\n    WebElement txt_password;\r\n\r\n    @FindBy(xpath = &quot;..xpath...&quot;)\r\n    @CacheLookup\r\n    WebElement btn_SignIn;\r\n\r\n    /**\r\n     * This is constuctor of class\r\n     */\r\n    public LoginPage(WebDriver driver) {\r\n        this.driver = driver;\r\n        PageFactory.initElements(driver, this);\r\n\r\n    }\r\n\r\n    /**\r\n     * These are Action methods for Login page elements\r\n     */\r\n\r\n\r\n    public void entersUsername(String strUserName) {\r\n        txt_userEmail.sendKeys(strUserName);\r\n\r\n\r\n    }\r\n\r\n    public void entersPassword(String strPassword) {\r\n        txt_password.sendKeys(strPassword);\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * These are Action methods for SignIn page elements\r\n     */\r\n    public void clickSigin() {\r\n        btn_SignIn.click();\r\n\r\n    }\r\n\r\n\r\n    public void entersCredentials(String version) {\r\n        switch (version) {\r\n            case (&quot;Test1&quot;):\r\n                String strUserName = &quot;username1&quot;;\r\n                String strPassword = &quot;password1&quot;);\r\n                this.entersUsername(strUserName);\r\n                this.entersPassword(strPassword);\r\n                break;\r\n            case (&quot;Test2&quot;):\r\n                String strUserName1 = &quot;Username2&quot;;\r\n                String strPassword1 = &quot;password2&quot;;\r\n                this.entersUsername(strUserName1);\r\n                this.entersPassword(strPassword1);\r\n                break;\r\n           \r\n        }\r\n        log.info(&quot;Method Action: enterCredentials has been completed....&quot;);\r\n    }\r\n\r\n\r\n    //\r\n    public void navigateTo_HomePage(String env) {\r\n        if (env.equals(&quot;Test&quot;)) {\r\n            driver.get(&quot;https://www.gmail.com&quot;);\r\n            driver.manage().window().maximize();\r\n            log.info(&quot; Test: Navigated to admin page....&quot;); // 22/04 : added by nikhil\r\n        } else if (env.equals(&quot;Staging&quot;)) {\r\n            driver.get(&quot;https://www.amazon.com);\r\n            driver.manage().window().maximize();\r\n            log.info(&quot;STAGING ENV: Navigated to admin page....&quot;); // 22/04 : added by nikhil\r\n        }\r\n\r\n    }\r\n\r\n\r\n    // This method used for assertions and get Page Tile\r\n    public String getPageTitle() {\r\n        return driver.getTitle();\r\n    }\r\n\r\n    // This method used for validation pageSource content\r\n    public String getPageSource() {\r\n        return driver.getPageSource();\r\n    }\r\n\r\n\r\n    public String getCurrentUrl() {\r\n        return driver.getCurrentUrl();\r\n    }\r\n\r\n\r\n   \r\n\r\n}\r\n\r\n~~~\r\n\r\nHomePage\r\n~~~\r\npackage cucumberBase.pageFactory;\r\n\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.WebElement;\r\nimport org.openqa.selenium.interactions.Actions;\r\nimport org.openqa.selenium.support.FindBy;\r\nimport org.openqa.selenium.support.PageFactory;\r\n\r\npublic class HomePage {\r\n    WebDriver driver;\r\n    /**\r\n     * These are Element Locators\r\n     */\r\n\r\n    @FindBy(xpath = &quot;//div[@class=&#39;avatar-label&#39;]&quot;)\r\n    private WebElement btn_signOutMenu;\r\n\r\n    @FindBy(xpath = &quot;//a[contains(.,&#39;Sign Out&#39;)]&quot;)\r\n    private WebElement lnk_signoutLink;\r\n\r\n    /**\r\n     * This is a Constructor, used to pass driver of stepdef to maintain same session\r\n     *\r\n     * @param driver is refering to driver declared in main step def\r\n     *               initElements is used to initialize all element of this page,whenever obj of this class gets created.\r\n     */\r\n    public HomePage(WebDriver driver) {\r\n        this.driver = driver;\r\n        PageFactory.initElements(driver, this);\r\n\r\n    }\r\n\r\n    /**\r\n     * These are Action methods for Login page elements\r\n     */\r\n\r\n\r\n    public void clickSignOutMenu() {\r\n        btn_signOutMenu.click();\r\n\r\n    }\r\n\r\n    public void clickLogOut() {\r\n        Actions action = new Actions(driver);\r\n        action.moveToElement(lnk_signoutLink).click();\r\n        action.perform();\r\n\r\n    }\r\n\r\n    public void driverClose() {\r\n        System.out.println(&quot;homepage&quot;);\r\n        driver.close();\r\n        driver.quit();\r\n    }\r\n}\r\n\r\n~~~\r\n\r\nPom File\r\n~~~\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;groupId&gt;com&lt;/groupId&gt;\r\n    &lt;artifactId&gt;projectname&lt;/artifactId&gt;\r\n    &lt;version&gt;5.1&lt;/version&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;cucumber.version&gt;4.3.0&lt;/cucumber.version&gt;\r\n        &lt;selenium.version&gt;3.141.5&lt;/selenium.version&gt;\r\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n        &lt;maven.compiler.version&gt;3.8.1&lt;/maven.compiler.version&gt;\r\n        &lt;maven.surefire.version&gt;2.22.2&lt;/maven.surefire.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n            &lt;version&gt;${selenium.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n            &lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\r\n            &lt;version&gt;${cucumber.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n            &lt;artifactId&gt;cucumber-junit&lt;/artifactId&gt;\r\n            &lt;version&gt;${cucumber.version}&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n            &lt;artifactId&gt;cucumber-picocontainer&lt;/artifactId&gt;\r\n            &lt;version&gt;${cucumber.version}&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/io.github.bonigarcia/webdrivermanager --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\r\n            &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\r\n            &lt;version&gt;5.1.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;net.masterthought&lt;/groupId&gt;\r\n            &lt;artifactId&gt;cucumber-reporting&lt;/artifactId&gt;\r\n            &lt;version&gt;4.10.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/tech.grasshopper/extentreports-cucumber6-adapter --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;tech.grasshopper&lt;/groupId&gt;\r\n            &lt;artifactId&gt;extentreports-cucumber6-adapter&lt;/artifactId&gt;\r\n            &lt;version&gt;2.10.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/com.aventstack/extentreports --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.aventstack&lt;/groupId&gt;\r\n            &lt;artifactId&gt;extentreports&lt;/artifactId&gt;\r\n            &lt;version&gt;5.0.9&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n            &lt;version&gt;5.5.1&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;log4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;log4j&lt;/artifactId&gt;\r\n            &lt;version&gt;1.2.17&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n            &lt;version&gt;1.7.25&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\r\n            &lt;version&gt;1.7.25&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.assertj&lt;/groupId&gt;\r\n            &lt;artifactId&gt;assertj-core&lt;/artifactId&gt;\r\n            &lt;version&gt;3.12.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;net.sourceforge.jexcelapi&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jxl&lt;/artifactId&gt;\r\n            &lt;version&gt;2.6.12&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.mashape.unirest&lt;/groupId&gt;\r\n            &lt;artifactId&gt;unirest-java&lt;/artifactId&gt;\r\n            &lt;version&gt;1.4.9&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.jtwig&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jtwig-core&lt;/artifactId&gt;\r\n            &lt;version&gt;5.87.0.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n            &lt;version&gt;2.6&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;defaultGoal&gt;compile&lt;/defaultGoal&gt;\r\n        &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;${maven.compiler.version}&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n                        &lt;source&gt;${java.version}&lt;/source&gt;\r\n                        &lt;target&gt;${java.version}&lt;/target&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;${maven.surefire.version}&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;includes&gt;\r\n                            &lt;include&gt;**/*Runner.*&lt;/include&gt;\r\n                        &lt;/includes&gt;\r\n                        &lt;parallel&gt;methods&lt;/parallel&gt;\r\n                        &lt;threadCount&gt;4&lt;/threadCount&gt;\r\n                        &lt;perCoreThreadCount&gt;true&lt;/perCoreThreadCount&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;!-- clean lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#clean_Lifecycle --&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.1.0&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;!-- default lifecycle, jar packaging: see https://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging --&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.0.2&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.0.2&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.5.2&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.8.2&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;!-- site lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#site_Lifecycle --&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.7.1&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.0.0&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/pluginManagement&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n~~~\r\nCould someone please suggest a way to resolve my issues","title":"PicoContainer, Selenium Junit : Runner does not run more than 1 feature file when we pass webdriver as static in cucumber Bdd framework","body":"<p>Background: We had a very big step definition and it was getting difficult to manage it.\nSo, we have decided to split step definition into multiple small definitions using this new automation base.</p>\n<p>Stack: Selenium, Java, Cucumber,Junit, Picocontainer.</p>\n<p>To achieve the above, we have looked for lot of suggestions on various websites and stackoverflow discussion, There are many suggestions like using Dependency Injection (Picocontainer), use Constructor Injection, spring etc.</p>\n<p>After going through all those suggestions <strong>we used Pico Container dependency injection solution</strong>. It helped in:</p>\n<ol>\n<li>To divide 1 big stepdef into multiple.</li>\n<li>Sharing data between step defs as well.</li>\n</ol>\n<p>Now, we are facing below problems:</p>\n<ol>\n<li><p>When we use are running Smoke test using ScenarioOutline and example. Feature File1 example. then we get error\nlike: org.openqa.selenium.NoSuchSessionException: Session ID is null. Using WebDriver after calling quit()?</p>\n</li>\n<li><p>Unable to Run multiple feature file in feature folder using 1 TestRunner Class.</p>\n</li>\n</ol>\n<p>Solution tried:\nWhen we do not use static Webdriver in DriverFactoryManager then, it works perfectly, I can run Feature File1 with ScenarioOutline\nalso,\nI can run multiple feature file in sequence using 1 test runner.</p>\n<p>However, If a feature file has more than 1 test scenario like FeatureFile2 , then it does not run 2nd scenario.and give error.\nIn DriverFactory when we make Webdriver static then it keep the session and helps to execute all scenarios listed in 1 feature file.</p>\n<p>Could you please help to achieve 3 things :</p>\n<ol>\n<li>MY Feature file with multiple scenario for eCommerce website should be able to execute all cases listed with 1 browser session.</li>\n<li>All the feature file listed in Feature file can be executed in parallel or sequential using Test Runner.</li>\n</ol>\n<pre><code>src/main/java\n|-&gt;baseFramework\n  |--&gt;pagefactory\n  |    |----- LoginPage.class\n  |    |----- HomePage.class\n  |    |----- ProductPage.class\n  |    |----- PaymentPage.class\n  |--&gt;picoHelper\n  |    |-----PicoHelperPage.class   \n  |    |-----SharedData.class           \n  |--&gt;helpers\n  |    |--&gt;wait\n  |    |-----waitHelper.class\n  |    |--&gt;util\n  |    |-----DriverFactoryManager.class\n  |    |-----PageFactoryManager.class \n</code></pre>\n<pre><code>src/test/testBase\n  |--&gt;stepDefinition\n  |    |-----LoginStepDef.class\n  |    |-----HomePageStepDef.class\n  |    |-----ProductStepDef.class\n  |    |-----PaymentStepDef.class\n  |--&gt;Runner\n  |    |-----TestRunner\nsrc/test/features\n  |--&gt;SanityTest\n  |    |-----Login.feature\n  |    |-----Product.feature\n</code></pre>\n<p>Feature file1:</p>\n<pre><code>#Author : Nikhil Kumar\n#Feature: Smoke login test for all different version of test and staging environment\n@Smoke\nFeature: To Test the functionality of login and logout of various environment and tenant\n\n  Scenario Outline: Smoke login test for all different version of test and staging environment\n    Given Browser has been launched\n    When User navigate to loginpage of &quot;&lt;Environment&gt;&quot; environment\n    And User enters &lt;username&gt; and &lt;password&gt;\n    And Clicks on SignIn button\n    Then User should be able to see homepage\n    And User should be able to logout\n\n    Examples:\n      | Environment | username  | password        |\n      | Test        | xxx.x@com | qwert |\n      \n</code></pre>\n<p>Feature file2:</p>\n<pre><code>#Author : Nikhil Kumar\n#Feature: Smoke login test for all different  version of test and staging environment\n@Smoke\nFeature: A test\n\n  Scenario: Successful Login to  with Valid Credentials\n    Given Browser has been launched\n    When User navigate to loginpage of &quot;Test&quot; environment \n    And User enters valid credentials for Tenant &quot;Test1&quot;\n    And Clicks on SignIn button\n    Then User should be able to see homepage\n\n  Scenario:check logout link\n    Given User is logged in\n    When User clicks on user avatar\n    Then User should see logout link and logout sucessfully\n\n\n</code></pre>\n<p>DriverFactoryManager</p>\n<pre><code>\npublic class DriverFactoryManager {\n\n    static WebDriver driver = null;\n    public DriverFactoryManager() {\n\n        //Blank\n    }\n\n    // To launch driver\n    public WebDriver getDriver() {\n        if (driver == null) {\n            WebDriverManager.chromedriver().setup();\n            driver = new ChromeDriver();\n        }\n        return driver;\n\n    }\n  \n</code></pre>\n<p>PageObjectManager</p>\n<pre><code>    private  WebDriver driver;\n    private LoginPage login;\n    private AdvanceSearchPage objAdvSrh;\n    private ProductManagerPage objPM;\n    private HomePage home;\n\n    public PageObjectManager(WebDriver driver) {\n\n        this.driver = driver;\n\n    }\n\n    public LoginPage getLoginPage() {\n        if (login == null) {\n            login = new LoginPage(driver);\n        }\n        return login;\n        //  return (lp == null) ? lp = new LoginPage(driver) : lp;\n\n    }\n\n    public HomePage getHomePage() {\n\n        return (home == null) ? home = new HomePage(driver) : home;\n    }\n\n    public ProductManagerPage getProductManagerPage() {\n\n        return (objPM == null) ? objPM = new ProductManagerPage(driver) : objPM;\n\n    }\n    \n    and so on for all pages.....\n</code></pre>\n<p>picoHelperPage looks like:</p>\n<pre><code>public class PicoHelperPage {\n\n     DriverFactoryManager driverFactoryManager;\n     PageObjectManager pageObjectManager;\n \n    public PicoHelperPage() {\n        driverFactoryManager = new DriverFactoryManager();\n        pageObjectManager = new PageObjectManager(driverFactoryManager.getDriver());\n          log.info(&quot;PicContainer : Starting Execution from Initializing constructor for PicContainer class&quot;);\n    }\n\n    public DriverFactoryManager getDriverFactoryManager() {\n        return driverFactoryManager;\n    }\n\n    public PageObjectManager getPageObjectManager() {\n\n        return pageObjectManager;\n    }\n   \n}\n</code></pre>\n<p>Step definition: LoginStepDef</p>\n<pre><code>public class LoginStepDef {\n    LoginPage login;\n    PicoHelperPage picoHelper;\n\n\n    private Logger log = LoggerHelper.getLogger(LoginStepDef.class);\n\n\n    public LoginStepDef(PicoHelperPage picHelper) throws IOException {\n      picoHelper = picHelper;\n        login = picoHelper.getPageObjectManager().getLoginPage();\n\n\n    }\n\n    @When(&quot;User navigate to loginpage of \\&quot;(.*)\\&quot; environment of Comestri$&quot;)\n    public void userNavigateToHomepageOfComestri(String env) {\n        login.navigateTo_HomePage(env);\n\n    }\n\n\n    /**\n     * COMESTRI: ADMIN PAGE CREDENTIALS\n     */\n    @And(&quot;^User enters valid credentials for Comestri Tenant \\&quot;(.*)\\&quot;$&quot;)\n    public void userEntersCredentials(String version) {\n        login.entersCredentials(version);\n\n    }\n\n\n    @When(&quot;^User enters (.*) and (.*)$&quot;)\n    public void userEntersUsernameAndPassword(String Username, String Password) {\n        System.out.println(&quot;entering credentials&quot;);\n        login.entersUsername(Username);\n        login.entersPassword(Password);\n\n    }\n\n      @And(&quot;Clicks on SignIn button&quot;)\n    public void clicksOnSignInButton() {\n        login.clickSigin();\n        try {\n            Thread.sleep(2000);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        String errorMsg = &quot;Invalid Email or password.&quot;;\n        if (login.getPageSource().contains(errorMsg)) {\n            Assert.fail(&quot;User with Invalid Credential is trying to Login. Test case failed...&quot;);\n\n        } else {\n            System.out.println(&quot;valid user is trying to login....&quot;);\n        }\n    }\n    \n    \n</code></pre>\n<p>Homepage StepDefs</p>\n<pre><code>package CucumberTest.stepDefinitions;\n\nimport cucumber.api.java.en.And;\nimport cucumber.api.java.en.Then;\nimport cucumber.api.java.en.When;\nimport cucumberBase.driverFactory.managers.PageObjectManager;\nimport cucumberBase.helpers.logger.LoggerHelper;\nimport cucumberBase.pageFactory.HomePage;\nimport cucumberBase.picoHelper.TestContext;\nimport org.apache.log4j.Logger;\n\n\npublic class HomeStepDef {\n\n    PicoHelperpage picHelper;\n    WebDriver driver;\n    HomePage home;\n   \n\n    public HomeStepDef(PicoHelperpage picHelper;) {\n        picoHelper= picHelper;\n        home = picoHelper.getPageObjectManager().getHomePage();\n\n    }\n\n\n    @When(&quot;User clicks on user avatar&quot;)\n    public void userClicksOnUserAvatar() {\n        home.clickSignOutMenu();\n        log.info(&quot;Avatar Icon is clicked...&quot;);\n    }\n\n\n    @Then(&quot;User should see logout link and logout sucessfully&quot;)\n    public void userShouldSeeLogoutLink() {\n        log.info(&quot;Signout button must be visible now&quot;);\n        home.clickLogOut();\n        log.info(&quot;User Logged out Successfully.......&quot;);\n        // THis below line will close driver...\n       home.driverClose();\n    }\n\n    @And(&quot;User should be able to logout&quot;)\n    public void Logout() {\n        home.clickSignOutMenu();\n        try {\n            Thread.sleep(1000);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n\n        home.clickLogOut();\n        log.info(&quot;Successfully Logout of system....&quot;);\n        home.driverClose();\n    }\n\n    @When(&quot;User click at link on LHS menu&quot;)\n    public void userClickAtLinkOnLHSMenu() {\n        System.out.println(&quot;LHS all links are clickable...&quot;);\n    }\n\n    @Then(&quot;User should be able to see proper pages&quot;)\n    public void userShouldBeAbleToSeeProperPages() {\n        System.out.println(&quot;Expected pages are visible/............&quot;);\n    }\n\n}\n\n</code></pre>\n<p>LoginPage</p>\n<pre><code>package cucumberBase.pageFactory;\n\n\nimport cucumberBase.helpers.dropDown.DropDownHelper;\nimport cucumberBase.helpers.javaScript.JavaScriptHelper;\nimport cucumberBase.helpers.logger.LoggerHelper;\nimport cucumberBase.helpers.wait.WaitHelper;\nimport org.apache.log4j.Logger;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.support.CacheLookup;\nimport org.openqa.selenium.support.FindBy;\nimport org.openqa.selenium.support.PageFactory;\n\n\npublic class LoginPage  {\n    WebDriver driver;\n    WaitHelper waitHelper;\n    JavaScriptHelper jsHelper;\n    DropDownHelper selectHelper;\n    private final Logger log = LoggerHelper.getLogger(LoginPage.class);\n    /**\n     * THese are all locator for Login section\n     */\n\n\n    @FindBy(id = &quot;user_email&quot;)\n    @CacheLookup\n    WebElement txt_userEmail;\n\n    @FindBy(id = &quot;user_password&quot;)\n    @CacheLookup\n    WebElement txt_password;\n\n    @FindBy(xpath = &quot;..xpath...&quot;)\n    @CacheLookup\n    WebElement btn_SignIn;\n\n    /**\n     * This is constuctor of class\n     */\n    public LoginPage(WebDriver driver) {\n        this.driver = driver;\n        PageFactory.initElements(driver, this);\n\n    }\n\n    /**\n     * These are Action methods for Login page elements\n     */\n\n\n    public void entersUsername(String strUserName) {\n        txt_userEmail.sendKeys(strUserName);\n\n\n    }\n\n    public void entersPassword(String strPassword) {\n        txt_password.sendKeys(strPassword);\n\n    }\n\n\n    /**\n     * These are Action methods for SignIn page elements\n     */\n    public void clickSigin() {\n        btn_SignIn.click();\n\n    }\n\n\n    public void entersCredentials(String version) {\n        switch (version) {\n            case (&quot;Test1&quot;):\n                String strUserName = &quot;username1&quot;;\n                String strPassword = &quot;password1&quot;);\n                this.entersUsername(strUserName);\n                this.entersPassword(strPassword);\n                break;\n            case (&quot;Test2&quot;):\n                String strUserName1 = &quot;Username2&quot;;\n                String strPassword1 = &quot;password2&quot;;\n                this.entersUsername(strUserName1);\n                this.entersPassword(strPassword1);\n                break;\n           \n        }\n        log.info(&quot;Method Action: enterCredentials has been completed....&quot;);\n    }\n\n\n    //\n    public void navigateTo_HomePage(String env) {\n        if (env.equals(&quot;Test&quot;)) {\n            driver.get(&quot;https://www.gmail.com&quot;);\n            driver.manage().window().maximize();\n            log.info(&quot; Test: Navigated to admin page....&quot;); // 22/04 : added by nikhil\n        } else if (env.equals(&quot;Staging&quot;)) {\n            driver.get(&quot;https://www.amazon.com);\n            driver.manage().window().maximize();\n            log.info(&quot;STAGING ENV: Navigated to admin page....&quot;); // 22/04 : added by nikhil\n        }\n\n    }\n\n\n    // This method used for assertions and get Page Tile\n    public String getPageTitle() {\n        return driver.getTitle();\n    }\n\n    // This method used for validation pageSource content\n    public String getPageSource() {\n        return driver.getPageSource();\n    }\n\n\n    public String getCurrentUrl() {\n        return driver.getCurrentUrl();\n    }\n\n\n   \n\n}\n\n</code></pre>\n<p>HomePage</p>\n<pre><code>package cucumberBase.pageFactory;\n\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.interactions.Actions;\nimport org.openqa.selenium.support.FindBy;\nimport org.openqa.selenium.support.PageFactory;\n\npublic class HomePage {\n    WebDriver driver;\n    /**\n     * These are Element Locators\n     */\n\n    @FindBy(xpath = &quot;//div[@class='avatar-label']&quot;)\n    private WebElement btn_signOutMenu;\n\n    @FindBy(xpath = &quot;//a[contains(.,'Sign Out')]&quot;)\n    private WebElement lnk_signoutLink;\n\n    /**\n     * This is a Constructor, used to pass driver of stepdef to maintain same session\n     *\n     * @param driver is refering to driver declared in main step def\n     *               initElements is used to initialize all element of this page,whenever obj of this class gets created.\n     */\n    public HomePage(WebDriver driver) {\n        this.driver = driver;\n        PageFactory.initElements(driver, this);\n\n    }\n\n    /**\n     * These are Action methods for Login page elements\n     */\n\n\n    public void clickSignOutMenu() {\n        btn_signOutMenu.click();\n\n    }\n\n    public void clickLogOut() {\n        Actions action = new Actions(driver);\n        action.moveToElement(lnk_signoutLink).click();\n        action.perform();\n\n    }\n\n    public void driverClose() {\n        System.out.println(&quot;homepage&quot;);\n        driver.close();\n        driver.quit();\n    }\n}\n\n</code></pre>\n<p>Pom File</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com&lt;/groupId&gt;\n    &lt;artifactId&gt;projectname&lt;/artifactId&gt;\n    &lt;version&gt;5.1&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;cucumber.version&gt;4.3.0&lt;/cucumber.version&gt;\n        &lt;selenium.version&gt;3.141.5&lt;/selenium.version&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n        &lt;maven.compiler.version&gt;3.8.1&lt;/maven.compiler.version&gt;\n        &lt;maven.surefire.version&gt;2.22.2&lt;/maven.surefire.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n            &lt;version&gt;${selenium.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n            &lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\n            &lt;version&gt;${cucumber.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n            &lt;artifactId&gt;cucumber-junit&lt;/artifactId&gt;\n            &lt;version&gt;${cucumber.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n            &lt;artifactId&gt;cucumber-picocontainer&lt;/artifactId&gt;\n            &lt;version&gt;${cucumber.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/io.github.bonigarcia/webdrivermanager --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\n            &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\n            &lt;version&gt;5.1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;net.masterthought&lt;/groupId&gt;\n            &lt;artifactId&gt;cucumber-reporting&lt;/artifactId&gt;\n            &lt;version&gt;4.10.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/tech.grasshopper/extentreports-cucumber6-adapter --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;tech.grasshopper&lt;/groupId&gt;\n            &lt;artifactId&gt;extentreports-cucumber6-adapter&lt;/artifactId&gt;\n            &lt;version&gt;2.10.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/com.aventstack/extentreports --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.aventstack&lt;/groupId&gt;\n            &lt;artifactId&gt;extentreports&lt;/artifactId&gt;\n            &lt;version&gt;5.0.9&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n            &lt;version&gt;5.5.1&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n            &lt;version&gt;1.2.17&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n            &lt;version&gt;1.7.25&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\n            &lt;version&gt;1.7.25&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.assertj&lt;/groupId&gt;\n            &lt;artifactId&gt;assertj-core&lt;/artifactId&gt;\n            &lt;version&gt;3.12.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;net.sourceforge.jexcelapi&lt;/groupId&gt;\n            &lt;artifactId&gt;jxl&lt;/artifactId&gt;\n            &lt;version&gt;2.6.12&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mashape.unirest&lt;/groupId&gt;\n            &lt;artifactId&gt;unirest-java&lt;/artifactId&gt;\n            &lt;version&gt;1.4.9&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jtwig&lt;/groupId&gt;\n            &lt;artifactId&gt;jtwig-core&lt;/artifactId&gt;\n            &lt;version&gt;5.87.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n            &lt;version&gt;2.6&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;defaultGoal&gt;compile&lt;/defaultGoal&gt;\n        &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;\n            &lt;plugins&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;${maven.compiler.version}&lt;/version&gt;\n                    &lt;configuration&gt;\n                        &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n                        &lt;source&gt;${java.version}&lt;/source&gt;\n                        &lt;target&gt;${java.version}&lt;/target&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;${maven.surefire.version}&lt;/version&gt;\n                    &lt;configuration&gt;\n                        &lt;includes&gt;\n                            &lt;include&gt;**/*Runner.*&lt;/include&gt;\n                        &lt;/includes&gt;\n                        &lt;parallel&gt;methods&lt;/parallel&gt;\n                        &lt;threadCount&gt;4&lt;/threadCount&gt;\n                        &lt;perCoreThreadCount&gt;true&lt;/perCoreThreadCount&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n                &lt;!-- clean lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#clean_Lifecycle --&gt;\n                &lt;plugin&gt;\n                    &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.1.0&lt;/version&gt;\n                &lt;/plugin&gt;\n                &lt;!-- default lifecycle, jar packaging: see https://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging --&gt;\n                &lt;plugin&gt;\n                    &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.0.2&lt;/version&gt;\n                &lt;/plugin&gt;\n\n                &lt;plugin&gt;\n                    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.0.2&lt;/version&gt;\n                &lt;/plugin&gt;\n                &lt;plugin&gt;\n                    &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;2.5.2&lt;/version&gt;\n                &lt;/plugin&gt;\n                &lt;plugin&gt;\n                    &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;2.8.2&lt;/version&gt;\n                &lt;/plugin&gt;\n                &lt;!-- site lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#site_Lifecycle --&gt;\n                &lt;plugin&gt;\n                    &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.7.1&lt;/version&gt;\n                &lt;/plugin&gt;\n                &lt;plugin&gt;\n                    &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.0.0&lt;/version&gt;\n                &lt;/plugin&gt;\n            &lt;/plugins&gt;\n        &lt;/pluginManagement&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Could someone please suggest a way to resolve my issues</p>\n"},{"tags":["java","android","kotlin","mobile","google-play"],"comments":[{"owner":{"account_id":4824539,"reputation":969,"user_id":3894304,"display_name":"Marcel Hofgesang"},"score":0,"creation_date":1649676997,"post_id":71825877,"comment_id":126928695,"body_markdown":"Do you mean something like that? https://stackoverflow.com/a/48288676/3894304","body":"Do you mean something like that? <a href=\"https://stackoverflow.com/a/48288676/3894304\">stackoverflow.com/a/48288676/3894304</a>"},{"owner":{"account_id":24899589,"reputation":11,"user_id":18770424,"display_name":"Kappi"},"score":0,"creation_date":1649685277,"post_id":71825877,"comment_id":126932120,"body_markdown":"i think its not the same thing the link you mentioned is about InstantApps","body":"i think its not the same thing the link you mentioned is about InstantApps"}],"owner":{"account_id":24899589,"reputation":11,"user_id":18770424,"display_name":"Kappi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":233,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1649671126,"creation_date":1649671126,"question_id":71825877,"body_markdown":"I am looking for a way to show google play install app prompt dialog inside app [example: facebook ad install dialog][1]\r\n\r\nThis type of install dialog is also used on youtube\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/VJXcZ.jpg\r\n\r\nI tried:\r\n    \t\r\n\r\n    market://launch?id=&lt;package_name&gt;\r\nBut its redirecting me to Google play app\r\n\r\nIs there a way to use this type of dialog?\r\n\r\nThanks in advance","title":"Android: show google play dialog inside app","body":"<p>I am looking for a way to show google play install app prompt dialog inside app <a href=\"https://i.stack.imgur.com/VJXcZ.jpg\" rel=\"nofollow noreferrer\">example: facebook ad install dialog</a></p>\n<p>This type of install dialog is also used on youtube</p>\n<p>I tried:</p>\n<pre><code>market://launch?id=&lt;package_name&gt;\n</code></pre>\n<p>But its redirecting me to Google play app</p>\n<p>Is there a way to use this type of dialog?</p>\n<p>Thanks in advance</p>\n"},{"tags":["java","selenium","maven","frameworks","testng"],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649667958,"creation_date":1649667958,"answer_id":71825206,"question_id":71825086,"body_markdown":"I don&#39;t see you using the _`Pages.FundsPage.driver`_ instance within the first two lines which are successfully executed within `fundClick()` method. \r\n\r\nYou were using _`btnfunds`_ element. Hence when you try to access _**driver**_ instance, you see the error:\r\n\r\n    org.openqa.selenium.WebDriver.getWindowHandles()&quot; because &quot;Pages.FundsPage.driver&quot; is null","title":"Selenium TestNG Throw Exception get null pointer exception while Opening Chilld browser","body":"<p>I don't see you using the <em><code>Pages.FundsPage.driver</code></em> instance within the first two lines which are successfully executed within <code>fundClick()</code> method.</p>\n<p>You were using <em><code>btnfunds</code></em> element. Hence when you try to access <em><strong>driver</strong></em> instance, you see the error:</p>\n<pre><code>org.openqa.selenium.WebDriver.getWindowHandles()&quot; because &quot;Pages.FundsPage.driver&quot; is null\n</code></pre>\n"}],"owner":{"account_id":24128869,"reputation":11,"user_id":18096738,"display_name":"Kedar Patil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":132,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1649670010,"creation_date":1649667344,"question_id":71825086,"body_markdown":"In above code at this line:\r\n\r\n    Set&lt;String&gt; statmentwindow = driver.getWindowHandles();\r\n\r\nthe compiler will throw an exception and the Test Case will be failed. Exception was like:\r\n\r\n    Cannot invoke &quot;org.openqa.selenium.WebDriver.getWindowHandles()&quot; because &quot;Pages.FundsPage.driver&quot; is null\r\n\r\nCode trials:\t\r\n\r\n    public void fundClick() throws InterruptedException\r\n    \t{\r\n    \t\t\tbtnfunds.click();\r\n    \t\t\tThread.sleep(2000);\r\n    \t\t\tbtnaddfunds.click();\r\n    \t\t\tThread.sleep(2000);\r\n    \t\t\tSet&lt;String&gt; statmentwindow = driver.getWindowHandles();\r\n    \t\t\tSystem.out.println(statmentwindow);\r\n    \t\t\tString[] win2 =new String[10];\r\n    \t\t\tIterator&lt;String&gt; itr = statmentwindow.iterator();\r\n    \t\t\tfor (int i=0;i&lt;statmentwindow.size();i++) \r\n    \t\t\t{\r\n    \t\t\t\twin2[i]=itr.next();\r\n    \t\t\t\tSystem.out.println(win2[i]);\r\n    \t\t\t}\r\n    \t\t\tdriver.switchTo().window(win2[1]);\r\n    \t\t\tdriver.close():\r\n        }","title":"Selenium TestNG Throw Exception get null pointer exception while Opening Chilld browser","body":"<p>In above code at this line:</p>\n<pre><code>Set&lt;String&gt; statmentwindow = driver.getWindowHandles();\n</code></pre>\n<p>the compiler will throw an exception and the Test Case will be failed. Exception was like:</p>\n<pre><code>Cannot invoke &quot;org.openqa.selenium.WebDriver.getWindowHandles()&quot; because &quot;Pages.FundsPage.driver&quot; is null\n</code></pre>\n<p>Code trials:</p>\n<pre><code>public void fundClick() throws InterruptedException\n    {\n            btnfunds.click();\n            Thread.sleep(2000);\n            btnaddfunds.click();\n            Thread.sleep(2000);\n            Set&lt;String&gt; statmentwindow = driver.getWindowHandles();\n            System.out.println(statmentwindow);\n            String[] win2 =new String[10];\n            Iterator&lt;String&gt; itr = statmentwindow.iterator();\n            for (int i=0;i&lt;statmentwindow.size();i++) \n            {\n                win2[i]=itr.next();\n                System.out.println(win2[i]);\n            }\n            driver.switchTo().window(win2[1]);\n            driver.close():\n    }\n</code></pre>\n"},{"tags":["java","hibernate","jpa","spring-data-jpa","spring-data"],"comments":[{"owner":{"account_id":12842085,"reputation":101,"user_id":9289813,"display_name":"Hassan Liasu"},"score":0,"creation_date":1649664106,"post_id":71824269,"comment_id":126924044,"body_markdown":"you can use the @query annotation to construct your query, that way you will have more control.","body":"you can use the @query annotation to construct your query, that way you will have more control."},{"owner":{"account_id":7301358,"reputation":158,"user_id":7341580,"accept_rate":60,"display_name":"wp42"},"score":0,"creation_date":1649664536,"post_id":71824269,"comment_id":126924189,"body_markdown":"@HassanLiasu got an example?","body":"@HassanLiasu got an example?"},{"owner":{"account_id":12842085,"reputation":101,"user_id":9289813,"display_name":"Hassan Liasu"},"score":0,"creation_date":1649667171,"post_id":71824269,"comment_id":126925171,"body_markdown":"i wiil try to come up with one.","body":"i wiil try to come up with one."}],"owner":{"account_id":7301358,"reputation":158,"user_id":7341580,"accept_rate":60,"display_name":"wp42"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":374,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649669862,"creation_date":1649663144,"question_id":71824269,"body_markdown":"Consider a class `Car`\r\n\r\n    @Entity\r\n    class Car{\r\n    \t@Id\r\n    \tprivate UUID id; // primary key- this is the only thing that can&#39;t change.\r\n    \t\r\n    \tprivate String name;\r\n    \t\r\n    \tprivate String brand;\r\n    \t\r\n    \tprivate string model;\r\n    \t\r\n        @Data\r\n    \tpublic static class Key{\r\n    \t\tprivate String brand;\r\n    \t\tprivate String model;\r\n    \t}\r\n    }\r\n\r\nThere is a `List.of(new Key(&quot;brand1&quot;,&quot;model1&quot;), new Key(&quot;brand2&quot;,&quot;model2&quot;))`.\r\nHow is it possible to find all those given cars by those keys?\r\n\r\nIs it doable with only JPA methods? Do I need to write native query? Can I modify something (besides primary key) in order to do it correctly?\r\n\r\nI went to the direction of `@EmbeddedId` and then use the JPA method `findAllById(Collection ..)` which would be the na&#239;ve solution, but it&#39;s impossible since it must be the primary key in order to work.","title":"Hibernate/JPA - How to find all records, that match the pairs of given parameters, when they are not the primary key?","body":"<p>Consider a class <code>Car</code></p>\n<pre><code>@Entity\nclass Car{\n    @Id\n    private UUID id; // primary key- this is the only thing that can't change.\n    \n    private String name;\n    \n    private String brand;\n    \n    private string model;\n    \n    @Data\n    public static class Key{\n        private String brand;\n        private String model;\n    }\n}\n</code></pre>\n<p>There is a <code>List.of(new Key(&quot;brand1&quot;,&quot;model1&quot;), new Key(&quot;brand2&quot;,&quot;model2&quot;))</code>.\nHow is it possible to find all those given cars by those keys?</p>\n<p>Is it doable with only JPA methods? Do I need to write native query? Can I modify something (besides primary key) in order to do it correctly?</p>\n<p>I went to the direction of <code>@EmbeddedId</code> and then use the JPA method <code>findAllById(Collection ..)</code> which would be the na√Øve solution, but it's impossible since it must be the primary key in order to work.</p>\n"},{"tags":["javascript","java","selenium","appium","appium-android"],"comments":[{"owner":{"account_id":552377,"reputation":2219,"user_id":917492,"display_name":"jasie"},"score":0,"creation_date":1649675640,"post_id":71825622,"comment_id":126928263,"body_markdown":"Welcome! Please don&#39;t just ask us to solve the problem for you. Show us how you tried to solve the problem yourself, then show us exactly what the result was, and tell us why you feel it didn&#39;t work. Give us a clear explanation of what isn&#39;t working and provide a [Minimal, Complete, and Verifiable example](https://stackoverflow.com/help/mcve). Read [How to Ask a good question](https://stackoverflow.com/help/how-to-ask). Be sure to take the tour and read this.","body":"Welcome! Please don&#39;t just ask us to solve the problem for you. Show us how you tried to solve the problem yourself, then show us exactly what the result was, and tell us why you feel it didn&#39;t work. Give us a clear explanation of what isn&#39;t working and provide a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>. Read <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask a good question</a>. Be sure to take the tour and read this."},{"owner":{"account_id":16422586,"reputation":1841,"user_id":11863448,"display_name":"Akzy"},"score":0,"creation_date":1649686146,"post_id":71825622,"comment_id":126932478,"body_markdown":"Checkout this will help you to resolve your issue.\n\n https://discuss.appium.io/t/how-to-do-scroll-action-till-the-particular-element-is-present-or-not/6003","body":"Checkout this will help you to resolve your issue.   <a href=\"https://discuss.appium.io/t/how-to-do-scroll-action-till-the-particular-element-is-present-or-not/6003\" rel=\"nofollow noreferrer\">discuss.appium.io/t/&hellip;</a>"}],"owner":{"account_id":24899390,"reputation":11,"user_id":18770242,"display_name":"Nithi Sivaa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":272,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1649669826,"creation_date":1649669826,"question_id":71825622,"body_markdown":"In the Android Native View I need to scroll to the end of the screen where the elements are dynamic. Sometimes there will be a list of 10 elements and sometimes there will be list of 20 very dynamic elements. I need to scroll to the bottom of the screen. \r\n\r\n","title":"In Android Appium is there any method to scroll to the end of the screen. The elements at the end of the screen is dynamic","body":"<p>In the Android Native View I need to scroll to the end of the screen where the elements are dynamic. Sometimes there will be a list of 10 elements and sometimes there will be list of 20 very dynamic elements. I need to scroll to the bottom of the screen.</p>\n"},{"tags":["java","number-formatting"],"comments":[{"owner":{"account_id":178679,"reputation":11876,"user_id":410824,"accept_rate":81,"display_name":"Grammin"},"score":1,"creation_date":1295561739,"post_id":4753251,"comment_id":5257020,"body_markdown":"If no one has a library would you mind posting your code?","body":"If no one has a library would you mind posting your code?"},{"owner":{"account_id":268636,"reputation":8124,"user_id":557500,"display_name":"rfeak"},"score":1,"creation_date":1295562133,"post_id":4753251,"comment_id":5257130,"body_markdown":"This may assist, though this isn&#39;t a dup. http://stackoverflow.com/questions/529432","body":"This may assist, though this isn&#39;t a dup. <a href=\"http://stackoverflow.com/questions/529432\">stackoverflow.com/questions/529432</a>"},{"owner":{"account_id":242372,"reputation":23523,"user_id":513838,"accept_rate":100,"display_name":"jzd"},"score":1,"creation_date":1295635790,"post_id":4753251,"comment_id":5269045,"body_markdown":"@Mat I was curious as to what solution you were using before.  If you don&#39;t mind would you post it as an answer as well.","body":"@Mat I was curious as to what solution you were using before.  If you don&#39;t mind would you post it as an answer as well."},{"owner":{"account_id":6136413,"reputation":8488,"user_id":4785110,"display_name":"maraca"},"score":0,"creation_date":1433677787,"post_id":4753251,"comment_id":49444866,"body_markdown":"Check my solution, it&#39;s the fastest and more important it doesn&#39;t fail for certain numbers which all answers casting to double (even the one which got the earlier bounty) are doing because of rounding errors due to casting!","body":"Check my solution, it&#39;s the fastest and more important it doesn&#39;t fail for certain numbers which all answers casting to double (even the one which got the earlier bounty) are doing because of rounding errors due to casting!"},{"owner":{"account_id":3506652,"reputation":9764,"user_id":2932052,"accept_rate":73,"display_name":"Wolf"},"score":2,"creation_date":1433931429,"post_id":4753251,"comment_id":49560667,"body_markdown":"What&#39;s the idea behind `No rounding is necessary` this seems absurd to me. Is it just to complicate things? Wouldn&#39;t it be better to rephrase this to *`Rounding is not necessary, but welcome`*?","body":"What&#39;s the idea behind <code>No rounding is necessary</code> this seems absurd to me. Is it just to complicate things? Wouldn&#39;t it be better to rephrase this to <i><code>Rounding is not necessary, but welcome</code></i>?"},{"owner":{"account_id":958617,"reputation":4858,"user_id":983430,"accept_rate":100,"display_name":"Amos M. Carpenter"},"score":0,"creation_date":1433948585,"post_id":4753251,"comment_id":49573228,"body_markdown":"@Wolf: I agree; I&#39;d imagine rounding `HALF_UP`, or perhaps `HALF_EVEN` in some domains would be more commonly required than just truncating. [My solution below](http://stackoverflow.com/a/30759915/983430) should allow any rounding mode (though not tested with all).","body":"@Wolf: I agree; I&#39;d imagine rounding <code>HALF_UP</code>, or perhaps <code>HALF_EVEN</code> in some domains would be more commonly required than just truncating. <a href=\"http://stackoverflow.com/a/30759915/983430\">My solution below</a> should allow any rounding mode (though not tested with all)."},{"owner":{"account_id":3506652,"reputation":9764,"user_id":2932052,"accept_rate":73,"display_name":"Wolf"},"score":0,"creation_date":1433950174,"post_id":4753251,"comment_id":49574428,"body_markdown":"Downvote for inattention regarding the `101800 to 101k` case - this can only be an error.","body":"Downvote for inattention regarding the <code>101800 to 101k</code> case - this can only be an error."},{"owner":{"account_id":212390,"reputation":26536,"user_id":465179,"accept_rate":99,"display_name":"MatBanik"},"score":1,"creation_date":1433968067,"post_id":4753251,"comment_id":49585376,"body_markdown":"In case you didn&#39;t notice the numbers being displayed with k and m appended are more of analog gauge indicating approximation not precise article of logic. Hence rounding is irrelevant mainly due to nature of variable than can increase or decrees several digits even while you are looking at the cashed result.","body":"In case you didn&#39;t notice the numbers being displayed with k and m appended are more of analog gauge indicating approximation not precise article of logic. Hence rounding is irrelevant mainly due to nature of variable than can increase or decrees several digits even while you are looking at the cashed result."},{"owner":{"account_id":3506652,"reputation":9764,"user_id":2932052,"accept_rate":73,"display_name":"Wolf"},"score":0,"creation_date":1434019053,"post_id":4753251,"comment_id":49606923,"body_markdown":"@MatBanik Ok, I see. I&#39;d remove my downvote (and maybe upvote instead) as soon as there is this (the analog gauge idea) becomes evident in the question itself.","body":"@MatBanik Ok, I see. I&#39;d remove my downvote (and maybe upvote instead) as soon as there is this (the analog gauge idea) becomes evident in the question itself."},{"owner":{"account_id":11361864,"reputation":311,"user_id":8329786,"display_name":"Ashav Kothari"},"score":0,"creation_date":1589527138,"post_id":4753251,"comment_id":109334839,"body_markdown":"[Here is the easiest way to do formation.](https://stackoverflow.com/a/59984378/8329786)","body":"<a href=\"https://stackoverflow.com/a/59984378/8329786\">Here is the easiest way to do formation.</a>"},{"owner":{"account_id":6686072,"reputation":714,"user_id":5956589,"display_name":"Richard Muvirimi"},"score":0,"creation_date":1617700716,"post_id":4753251,"comment_id":118370708,"body_markdown":"Try out this library https://github.com/tygalive/Number-Shortener [Disclaimer am the owner]","body":"Try out this library <a href=\"https://github.com/tygalive/Number-Shortener\" rel=\"nofollow noreferrer\">github.com/tygalive/Number-Shortener</a> [Disclaimer am the owner]"}],"answers":[{"tags":[],"owner":{"display_name":"user565869"},"down_vote_count":2,"up_vote_count":7,"is_accepted":false,"score":5,"last_activity_date":1295623875,"creation_date":1295562613,"answer_id":4753415,"question_id":4753251,"body_markdown":"My Java is rusty, but here&#39;s how I&#39;d implement it in C#:\r\n\r\n\tprivate string  FormatNumber(double value)\r\n\t\t{\r\n\t\tstring[]  suffixes = new string[] {&quot; k&quot;, &quot; m&quot;, &quot; b&quot;, &quot; t&quot;, &quot; q&quot;};\r\n\t\tfor (int j = suffixes.Length;  j &gt; 0;  j--)\r\n\t\t\t{\r\n\t\t\tdouble  unit = Math.Pow(1000, j);\r\n\t\t\tif (value &gt;= unit)\r\n\t\t\t\treturn (value / unit).ToString(&quot;#,##0.0&quot;) + suffixes[--j];\r\n\t\t\t}\r\n\t\treturn value.ToString(&quot;#,##0&quot;);\r\n\t\t}\r\n\r\n\r\nIt&#39;d be easy to adjust this to use CS kilos (1,024) rather than metric kilos, or to add more units.  It formats 1,000 as &quot;1.0 k&quot; rather than &quot;1 k&quot;, but I trust that&#39;s immaterial.\r\n\r\nTo meet the more specific requirement &quot;no more than four characters&quot;, remove the spaces before the suffixes and adjust the middle block like this:\r\n\r\n    if (value &gt;= unit)\r\n      {\r\n      value /= unit;\r\n      return (value).ToString(value &gt;= unit * 9.95 ? &quot;#,##0&quot; : &quot;#,##0.0&quot;) + suffixes[--j];\r\n      }\r\n","title":"How to go about formatting 1200 to 1.2k in java","body":"<p>My Java is rusty, but here's how I'd implement it in C#:</p>\n\n<pre><code>private string  FormatNumber(double value)\n    {\n    string[]  suffixes = new string[] {\" k\", \" m\", \" b\", \" t\", \" q\"};\n    for (int j = suffixes.Length;  j &gt; 0;  j--)\n        {\n        double  unit = Math.Pow(1000, j);\n        if (value &gt;= unit)\n            return (value / unit).ToString(\"#,##0.0\") + suffixes[--j];\n        }\n    return value.ToString(\"#,##0\");\n    }\n</code></pre>\n\n<p>It'd be easy to adjust this to use CS kilos (1,024) rather than metric kilos, or to add more units.  It formats 1,000 as \"1.0 k\" rather than \"1 k\", but I trust that's immaterial.</p>\n\n<p>To meet the more specific requirement \"no more than four characters\", remove the spaces before the suffixes and adjust the middle block like this:</p>\n\n<pre><code>if (value &gt;= unit)\n  {\n  value /= unit;\n  return (value).ToString(value &gt;= unit * 9.95 ? \"#,##0\" : \"#,##0.0\") + suffixes[--j];\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":118722,"reputation":19094,"user_id":309946,"accept_rate":75,"display_name":"Ilya Saunkin"},"down_vote_count":2,"up_vote_count":109,"is_accepted":false,"score":107,"last_activity_date":1295592362,"creation_date":1295566105,"answer_id":4753866,"question_id":4753251,"body_markdown":"I know, this looks more like a C program, but it&#39;s super lightweight!\r\n\r\n    public static void main(String args[]) {\r\n    \tlong[] numbers = new long[]{1000, 5821, 10500, 101800, 2000000, 7800000, 92150000, 123200000, 9999999};\r\n    \tfor(long n : numbers) {\r\n    \t\tSystem.out.println(n + &quot; =&gt; &quot; + coolFormat(n, 0));\r\n    \t}\r\n    }\r\n    \r\n    private static char[] c = new char[]{&#39;k&#39;, &#39;m&#39;, &#39;b&#39;, &#39;t&#39;};\r\n    \t\r\n    /**\r\n     * Recursive implementation, invokes itself for each factor of a thousand, increasing the class on each invokation.\r\n     * @param n the number to format\r\n     * @param iteration in fact this is the class from the array c\r\n     * @return a String representing the number n formatted in a cool looking way.\r\n     */\r\n    private static String coolFormat(double n, int iteration) {\r\n    \tdouble d = ((long) n / 100) / 10.0;\r\n    \tboolean isRound = (d * 10) %10 == 0;//true if the decimal part is equal to 0 (then it&#39;s trimmed anyway)\r\n    \treturn (d &lt; 1000? //this determines the class, i.e. &#39;k&#39;, &#39;m&#39; etc\r\n    \t\t((d &gt; 99.9 || isRound || (!isRound &amp;&amp; d &gt; 9.99)? //this decides whether to trim the decimals\r\n    \t\t (int) d * 10 / 10 : d + &quot;&quot; // (int) d * 10 / 10 drops the decimal\r\n    \t\t ) + &quot;&quot; + c[iteration]) \r\n    \t\t: coolFormat(d, iteration+1));\r\n    \t\r\n    }\r\n\r\nIt outputs:\r\n\r\n    1000 =&gt; 1k\r\n    5821 =&gt; 5.8k\r\n    10500 =&gt; 10k\r\n    101800 =&gt; 101k\r\n    2000000 =&gt; 2m\r\n    7800000 =&gt; 7.8m\r\n    92150000 =&gt; 92m\r\n    123200000 =&gt; 123m\r\n    9999999 =&gt; 9.9m","title":"How to go about formatting 1200 to 1.2k in java","body":"<p>I know, this looks more like a C program, but it's super lightweight!</p>\n\n<pre><code>public static void main(String args[]) {\n    long[] numbers = new long[]{1000, 5821, 10500, 101800, 2000000, 7800000, 92150000, 123200000, 9999999};\n    for(long n : numbers) {\n        System.out.println(n + \" =&gt; \" + coolFormat(n, 0));\n    }\n}\n\nprivate static char[] c = new char[]{'k', 'm', 'b', 't'};\n\n/**\n * Recursive implementation, invokes itself for each factor of a thousand, increasing the class on each invokation.\n * @param n the number to format\n * @param iteration in fact this is the class from the array c\n * @return a String representing the number n formatted in a cool looking way.\n */\nprivate static String coolFormat(double n, int iteration) {\n    double d = ((long) n / 100) / 10.0;\n    boolean isRound = (d * 10) %10 == 0;//true if the decimal part is equal to 0 (then it's trimmed anyway)\n    return (d &lt; 1000? //this determines the class, i.e. 'k', 'm' etc\n        ((d &gt; 99.9 || isRound || (!isRound &amp;&amp; d &gt; 9.99)? //this decides whether to trim the decimals\n         (int) d * 10 / 10 : d + \"\" // (int) d * 10 / 10 drops the decimal\n         ) + \"\" + c[iteration]) \n        : coolFormat(d, iteration+1));\n\n}\n</code></pre>\n\n<p>It outputs:</p>\n\n<pre><code>1000 =&gt; 1k\n5821 =&gt; 5.8k\n10500 =&gt; 10k\n101800 =&gt; 101k\n2000000 =&gt; 2m\n7800000 =&gt; 7.8m\n92150000 =&gt; 92m\n123200000 =&gt; 123m\n9999999 =&gt; 9.9m\n</code></pre>\n"},{"tags":[],"owner":{"account_id":87407,"reputation":8627,"user_id":242397,"accept_rate":91,"display_name":"jhurtado"},"down_vote_count":2,"up_vote_count":26,"is_accepted":false,"score":24,"last_activity_date":1295586692,"creation_date":1295569834,"answer_id":4754243,"question_id":4753251,"body_markdown":"Need some improvement, but: StrictMath to the rescue!  \r\nYou can put the suffix in a String or array and fetch&#39;em based on power, or something like that.  \r\nThe division can also be managed around the power, i think almost everything is about the power value.\r\nHope it helps!\r\n\r\n\tpublic static String formatValue(double value) {\r\n\tint power; \r\n\t\tString suffix = &quot; kmbt&quot;;\r\n\t\tString formattedNumber = &quot;&quot;;\r\n\t\t\r\n\t\tNumberFormat formatter = new DecimalFormat(&quot;#,###.#&quot;);\r\n\t\tpower = (int)StrictMath.log10(value);\r\n\t\tvalue = value/(Math.pow(10,(power/3)*3));\r\n\t\tformattedNumber=formatter.format(value);\r\n\t\tformattedNumber = formattedNumber + suffix.charAt(power/3);\r\n\t\treturn formattedNumber.length()&gt;4 ?  formattedNumber.replaceAll(&quot;\\\\.[0-9]+&quot;, &quot;&quot;) : formattedNumber;  \r\n    }\r\n\r\noutputs:   \r\n\r\n&gt; 999  \r\n&gt; 1.2k  \r\n&gt; 98k  \r\n&gt; 911k  \r\n&gt; 1.1m  \r\n&gt; 11b   \r\n&gt; 712b  \r\n&gt; 34t  ","title":"How to go about formatting 1200 to 1.2k in java","body":"<p>Need some improvement, but: StrictMath to the rescue!<br>\nYou can put the suffix in a String or array and fetch'em based on power, or something like that.<br>\nThe division can also be managed around the power, i think almost everything is about the power value.\nHope it helps!</p>\n\n<pre><code>public static String formatValue(double value) {\nint power; \n    String suffix = \" kmbt\";\n    String formattedNumber = \"\";\n\n    NumberFormat formatter = new DecimalFormat(\"#,###.#\");\n    power = (int)StrictMath.log10(value);\n    value = value/(Math.pow(10,(power/3)*3));\n    formattedNumber=formatter.format(value);\n    formattedNumber = formattedNumber + suffix.charAt(power/3);\n    return formattedNumber.length()&gt;4 ?  formattedNumber.replaceAll(\"\\\\.[0-9]+\", \"\") : formattedNumber;  \n}\n</code></pre>\n\n<p>outputs:   </p>\n\n<blockquote>\n  <p>999<br>\n  1.2k<br>\n  98k<br>\n  911k<br>\n  1.1m<br>\n  11b<br>\n  712b<br>\n  34t  </p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":242372,"reputation":23523,"user_id":513838,"accept_rate":100,"display_name":"jzd"},"down_vote_count":5,"up_vote_count":50,"is_accepted":false,"score":45,"last_activity_date":1383575457,"creation_date":1295574816,"answer_id":4754692,"question_id":4753251,"body_markdown":"Here a solution that makes use of DecimalFormat&#39;s engineering notation:\r\n\r\n\tpublic static void main(String args[]) {\r\n\t    long[] numbers = new long[]{7, 12, 856, 1000, 5821, 10500, 101800, 2000000, 7800000, 92150000, 123200000, 9999999};\r\n\t    for(long number : numbers) {\r\n\t        System.out.println(number + &quot; = &quot; + format(number));\r\n\t    }\r\n\t}\r\n\r\n\tprivate static String[] suffix = new String[]{&quot;&quot;,&quot;k&quot;, &quot;m&quot;, &quot;b&quot;, &quot;t&quot;};\r\n\tprivate static int MAX_LENGTH = 4;\r\n\t\r\n\tprivate static String format(double number) {\r\n\t\tString r = new DecimalFormat(&quot;##0E0&quot;).format(number);\r\n\t\tr = r.replaceAll(&quot;E[0-9]&quot;, suffix[Character.getNumericValue(r.charAt(r.length() - 1)) / 3]);\r\n\t\twhile(r.length() &gt; MAX_LENGTH || r.matches(&quot;[0-9]+\\\\.[a-z]&quot;)){\r\n\t\t\tr = r.substring(0, r.length()-2) + r.substring(r.length() - 1);\r\n\t\t}\r\n\t\treturn r;\r\n\t}\r\n\r\nOutput: \r\n\r\n    7 = 7\r\n    12 = 12\r\n    856 = 856\r\n    1000 = 1k\r\n    5821 = 5.8k\r\n    10500 = 10k\r\n    101800 = 102k\r\n    2000000 = 2m\r\n    7800000 = 7.8m\r\n    92150000 = 92m\r\n    123200000 = 123m\r\n    9999999 = 10m","title":"How to go about formatting 1200 to 1.2k in java","body":"<p>Here a solution that makes use of DecimalFormat's engineering notation:</p>\n\n<pre><code>public static void main(String args[]) {\n    long[] numbers = new long[]{7, 12, 856, 1000, 5821, 10500, 101800, 2000000, 7800000, 92150000, 123200000, 9999999};\n    for(long number : numbers) {\n        System.out.println(number + \" = \" + format(number));\n    }\n}\n\nprivate static String[] suffix = new String[]{\"\",\"k\", \"m\", \"b\", \"t\"};\nprivate static int MAX_LENGTH = 4;\n\nprivate static String format(double number) {\n    String r = new DecimalFormat(\"##0E0\").format(number);\n    r = r.replaceAll(\"E[0-9]\", suffix[Character.getNumericValue(r.charAt(r.length() - 1)) / 3]);\n    while(r.length() &gt; MAX_LENGTH || r.matches(\"[0-9]+\\\\.[a-z]\")){\n        r = r.substring(0, r.length()-2) + r.substring(r.length() - 1);\n    }\n    return r;\n}\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>7 = 7\n12 = 12\n856 = 856\n1000 = 1k\n5821 = 5.8k\n10500 = 10k\n101800 = 102k\n2000000 = 2m\n7800000 = 7.8m\n92150000 = 92m\n123200000 = 123m\n9999999 = 10m\n</code></pre>\n"},{"tags":[],"owner":{"account_id":157346,"reputation":54254,"user_id":375232,"accept_rate":100,"display_name":"Landei"},"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1302615579,"creation_date":1302592438,"answer_id":5631664,"question_id":4753251,"body_markdown":"The [ICU lib][1] has a rule based formatter for numbers, which can be used for number spellout etc. I think using ICU would give you a readable and maintanable solution.\r\n\r\n**[Usage]**\r\n\r\nThe right class is RuleBasedNumberFormat. The format itself can be stored as separate file (or as String constant, IIRC).\r\n\r\nExample from http://userguide.icu-project.org/formatparse/numbers \r\n\r\n    double num = 2718.28;\r\n    NumberFormat formatter = \r\n        new RuleBasedNumberFormat(RuleBasedNumberFormat.SPELLOUT);\r\n    String result = formatter.format(num);\r\n    System.out.println(result);\r\n\r\nThe same page shows Roman numerals, so I guess your case should be possible, too.\r\n\r\n  [1]: http://site.icu-project.org/","title":"How to go about formatting 1200 to 1.2k in java","body":"<p>The <a href=\"http://site.icu-project.org/\" rel=\"noreferrer\">ICU lib</a> has a rule based formatter for numbers, which can be used for number spellout etc. I think using ICU would give you a readable and maintanable solution.</p>\n\n<p><strong>[Usage]</strong></p>\n\n<p>The right class is RuleBasedNumberFormat. The format itself can be stored as separate file (or as String constant, IIRC).</p>\n\n<p>Example from <a href=\"http://userguide.icu-project.org/formatparse/numbers\" rel=\"noreferrer\">http://userguide.icu-project.org/formatparse/numbers</a> </p>\n\n<pre><code>double num = 2718.28;\nNumberFormat formatter = \n    new RuleBasedNumberFormat(RuleBasedNumberFormat.SPELLOUT);\nString result = formatter.format(num);\nSystem.out.println(result);\n</code></pre>\n\n<p>The same page shows Roman numerals, so I guess your case should be possible, too.</p>\n"},{"tags":[],"owner":{"account_id":379230,"reputation":9463,"user_id":732454,"accept_rate":73,"display_name":"stefan bachert"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1433598523,"creation_date":1335967695,"answer_id":10415454,"question_id":4753251,"body_markdown":"My favorite. You could use &quot;k&quot; and so on as indicator for decimal too, as common in the electronic domain. This will give you an extra digit without additional space\r\n\r\nSecond column tries to use as much digits as possible\r\n\r\n    1000 =&gt; 1.0k | 1000\r\n    5821 =&gt; 5.8k | 5821\r\n    10500 =&gt; 10k | 10k5\r\n    101800 =&gt; 101k | 101k\r\n    2000000 =&gt; 2.0m | 2m\r\n    7800000 =&gt; 7.8m | 7m8\r\n    92150000 =&gt; 92m | 92m1\r\n    123200000 =&gt; 123m | 123m\r\n    9999999 =&gt; 9.9m | 9m99\r\n\r\nThis is the code\r\n\r\n\r\n    public class HTTest {\r\n\tprivate static String[] unit = {&quot;u&quot;, &quot;k&quot;, &quot;m&quot;, &quot;g&quot;, &quot;t&quot;};\r\n\t/**\r\n\t * @param args\r\n\t */\r\n\tpublic static void main(String[] args) {\r\n\t    int[] numbers = new int[]{1000, 5821, 10500, 101800, 2000000, 7800000, 92150000, 123200000, 9999999};\r\n\t    for(int n : numbers) {\r\n\t        System.out.println(n + &quot; =&gt; &quot; + myFormat(n) + &quot; | &quot; + myFormat2(n));\r\n\t    }\r\n\t}\r\n\r\n\tprivate static String myFormat(int pN) {\r\n\t\tString str = Integer.toString(pN);\r\n\t\tint len = str.length ()-1;\r\n\t\tif (len &lt;= 3) return str;\r\n\t\tint level = len / 3;\r\n\t\tint mode = len % 3;\r\n\t\tswitch (mode) {\r\n\t\tcase 0: return str.substring(0, 1) + &quot;.&quot; + str.substring(1, 2) + unit[level];\r\n\t\tcase 1: return str.substring(0, 2) + unit[level];\r\n\t\tcase 2: return str.substring(0, 3) + unit[level];\r\n\t\t}\r\n\t\treturn &quot;how that?&quot;;\r\n\t}\r\n\tprivate static String trim1 (String pVal) {\r\n\t\tif (pVal.equals(&quot;0&quot;)) return &quot;&quot;;\r\n\t\treturn pVal;\r\n\t}\r\n\tprivate static String trim2 (String pVal) {\r\n\t\tif (pVal.equals(&quot;00&quot;)) return &quot;&quot;;\r\n\t\treturn pVal.substring(0, 1) + trim1(pVal.substring(1,2));\r\n\t}\r\n\tprivate static String myFormat2(int pN) {\r\n\t\tString str = Integer.toString(pN);\r\n\t\tint len = str.length () - 1;\r\n\t\tif (len &lt;= 3) return str;\r\n\t\tint level = len / 3;\r\n\t\tint mode = len % 3;\r\n\t\tswitch (mode) {\r\n\t\tcase 0: return str.substring(0, 1) + unit[level] + trim2(str.substring(1, 3));\r\n\t\tcase 2: return str.substring(0, 3) + unit[level];\r\n\t\tcase 1: return str.substring(0, 2) + unit[level] + trim1(str.substring(2, 3));\r\n\t\t}\r\n\t\treturn &quot;how that?&quot;;\r\n\t}\r\n    }\r\n","title":"How to go about formatting 1200 to 1.2k in java","body":"<p>My favorite. You could use \"k\" and so on as indicator for decimal too, as common in the electronic domain. This will give you an extra digit without additional space</p>\n\n<p>Second column tries to use as much digits as possible</p>\n\n<pre><code>1000 =&gt; 1.0k | 1000\n5821 =&gt; 5.8k | 5821\n10500 =&gt; 10k | 10k5\n101800 =&gt; 101k | 101k\n2000000 =&gt; 2.0m | 2m\n7800000 =&gt; 7.8m | 7m8\n92150000 =&gt; 92m | 92m1\n123200000 =&gt; 123m | 123m\n9999999 =&gt; 9.9m | 9m99\n</code></pre>\n\n<p>This is the code</p>\n\n<pre><code>public class HTTest {\nprivate static String[] unit = {\"u\", \"k\", \"m\", \"g\", \"t\"};\n/**\n * @param args\n */\npublic static void main(String[] args) {\n    int[] numbers = new int[]{1000, 5821, 10500, 101800, 2000000, 7800000, 92150000, 123200000, 9999999};\n    for(int n : numbers) {\n        System.out.println(n + \" =&gt; \" + myFormat(n) + \" | \" + myFormat2(n));\n    }\n}\n\nprivate static String myFormat(int pN) {\n    String str = Integer.toString(pN);\n    int len = str.length ()-1;\n    if (len &lt;= 3) return str;\n    int level = len / 3;\n    int mode = len % 3;\n    switch (mode) {\n    case 0: return str.substring(0, 1) + \".\" + str.substring(1, 2) + unit[level];\n    case 1: return str.substring(0, 2) + unit[level];\n    case 2: return str.substring(0, 3) + unit[level];\n    }\n    return \"how that?\";\n}\nprivate static String trim1 (String pVal) {\n    if (pVal.equals(\"0\")) return \"\";\n    return pVal;\n}\nprivate static String trim2 (String pVal) {\n    if (pVal.equals(\"00\")) return \"\";\n    return pVal.substring(0, 1) + trim1(pVal.substring(1,2));\n}\nprivate static String myFormat2(int pN) {\n    String str = Integer.toString(pN);\n    int len = str.length () - 1;\n    if (len &lt;= 3) return str;\n    int level = len / 3;\n    int mode = len % 3;\n    switch (mode) {\n    case 0: return str.substring(0, 1) + unit[level] + trim2(str.substring(1, 3));\n    case 2: return str.substring(0, 3) + unit[level];\n    case 1: return str.substring(0, 2) + unit[level] + trim1(str.substring(2, 3));\n    }\n    return \"how that?\";\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2389671,"reputation":19,"user_id":2089762,"display_name":"user2089762"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1361337250,"creation_date":1361336142,"answer_id":14972548,"question_id":4753251,"body_markdown":"    //code longer but work sure...\r\n\r\n\tpublic static String formatK(int number) {\r\n\t    if (number &lt; 999) {\r\n\t    \treturn String.valueOf(number);\r\n\t    }\r\n\t    \r\n\t    if (number &lt; 9999) {\r\n\t    \tString strNumber = String.valueOf(number);\r\n\t    \tString str1 = strNumber.substring(0, 1);\r\n\t    \tString str2 = strNumber.substring(1, 2);\r\n\t    \tif (str2.equals(&quot;0&quot;)) {\r\n\t    \t\treturn str1 + &quot;k&quot;;\r\n\t    \t} else {\r\n\t    \t\treturn str1 + &quot;.&quot; + str2 + &quot;k&quot;;\r\n\t    \t}\r\n\t    }\r\n\t    \r\n\t    if (number &lt; 99999) {\r\n\t    \tString strNumber = String.valueOf(number);\r\n\t    \tString str1 = strNumber.substring(0, 2);\r\n\t    \treturn str1 + &quot;k&quot;;\r\n\t    }\r\n\t    \r\n\t    if (number &lt; 999999) {\r\n\t    \tString strNumber = String.valueOf(number);\r\n\t    \tString str1 = strNumber.substring(0, 3);\r\n\t    \treturn str1 + &quot;k&quot;;\r\n\t    }\r\n\t    \r\n\t    if (number &lt; 9999999) {\r\n\t    \tString strNumber = String.valueOf(number);\r\n\t    \tString str1 = strNumber.substring(0, 1);\r\n\t    \tString str2 = strNumber.substring(1, 2);\r\n\t    \tif (str2.equals(&quot;0&quot;)) {\r\n\t    \t\treturn str1 + &quot;m&quot;;\r\n\t    \t} else {\r\n\t    \t\treturn str1 + &quot;.&quot; + str2 + &quot;m&quot;;\r\n\t    \t}\r\n\t    }\r\n\t    \r\n\t    if (number &lt; 99999999) {\r\n\t    \tString strNumber = String.valueOf(number);\r\n\t    \tString str1 = strNumber.substring(0, 2);\r\n\t    \treturn str1 + &quot;m&quot;;\r\n\t    }\r\n\t    \r\n\t    if (number &lt; 999999999) {\r\n\t    \tString strNumber = String.valueOf(number);\r\n\t    \tString str1 = strNumber.substring(0, 3);\r\n\t    \treturn str1 + &quot;m&quot;;\r\n\t    }\r\n\t    \r\n\t\tNumberFormat formatterHasDigi = new DecimalFormat(&quot;###,###,###&quot;);\r\n\t\treturn formatterHasDigi.format(number);\r\n\t}","title":"How to go about formatting 1200 to 1.2k in java","body":"<pre><code>//code longer but work sure...\n\npublic static String formatK(int number) {\n    if (number &lt; 999) {\n        return String.valueOf(number);\n    }\n\n    if (number &lt; 9999) {\n        String strNumber = String.valueOf(number);\n        String str1 = strNumber.substring(0, 1);\n        String str2 = strNumber.substring(1, 2);\n        if (str2.equals(\"0\")) {\n            return str1 + \"k\";\n        } else {\n            return str1 + \".\" + str2 + \"k\";\n        }\n    }\n\n    if (number &lt; 99999) {\n        String strNumber = String.valueOf(number);\n        String str1 = strNumber.substring(0, 2);\n        return str1 + \"k\";\n    }\n\n    if (number &lt; 999999) {\n        String strNumber = String.valueOf(number);\n        String str1 = strNumber.substring(0, 3);\n        return str1 + \"k\";\n    }\n\n    if (number &lt; 9999999) {\n        String strNumber = String.valueOf(number);\n        String str1 = strNumber.substring(0, 1);\n        String str2 = strNumber.substring(1, 2);\n        if (str2.equals(\"0\")) {\n            return str1 + \"m\";\n        } else {\n            return str1 + \".\" + str2 + \"m\";\n        }\n    }\n\n    if (number &lt; 99999999) {\n        String strNumber = String.valueOf(number);\n        String str1 = strNumber.substring(0, 2);\n        return str1 + \"m\";\n    }\n\n    if (number &lt; 999999999) {\n        String strNumber = String.valueOf(number);\n        String str1 = strNumber.substring(0, 3);\n        return str1 + \"m\";\n    }\n\n    NumberFormat formatterHasDigi = new DecimalFormat(\"###,###,###\");\n    return formatterHasDigi.format(number);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3609353,"reputation":79,"user_id":3010767,"display_name":"Eduardo Aviles"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1384898011,"creation_date":1384898011,"answer_id":20082877,"question_id":4753251,"body_markdown":"I don&#39;t know if it&#39;s the best approach but, this is what i did.\r\n\r\n    7=&gt;7\r\n    12=&gt;12\r\n    856=&gt;856\r\n    1000=&gt;1.0k\r\n    5821=&gt;5.82k\r\n    10500=&gt;10.5k\r\n    101800=&gt;101.8k\r\n    2000000=&gt;2.0m\r\n    7800000=&gt;7.8m\r\n    92150000=&gt;92.15m\r\n    123200000=&gt;123.2m\r\n    9999999=&gt;10.0m\r\n\r\n--- Code---\r\n\r\n    public String Format(Integer number){\r\n        String[] suffix = new String[]{&quot;k&quot;,&quot;m&quot;,&quot;b&quot;,&quot;t&quot;};\r\n        int size = (number.intValue() != 0) ? (int) Math.log10(number) : 0;\r\n        if (size &gt;= 3){\r\n            while (size % 3 != 0) {\r\n                size = size - 1;\r\n            }\r\n        }\r\n        double notation = Math.pow(10, size);\r\n        String result = (size &gt;= 3) ? + (Math.round((number / notation) * 100) / 100.0d)+suffix[(size/3) - 1] : + number + &quot;&quot;;\r\n        return result\r\n    }\r\n\r\n","title":"How to go about formatting 1200 to 1.2k in java","body":"<p>I don't know if it's the best approach but, this is what i did.</p>\n\n<pre><code>7=&gt;7\n12=&gt;12\n856=&gt;856\n1000=&gt;1.0k\n5821=&gt;5.82k\n10500=&gt;10.5k\n101800=&gt;101.8k\n2000000=&gt;2.0m\n7800000=&gt;7.8m\n92150000=&gt;92.15m\n123200000=&gt;123.2m\n9999999=&gt;10.0m\n</code></pre>\n\n<p>--- Code---</p>\n\n<pre><code>public String Format(Integer number){\n    String[] suffix = new String[]{\"k\",\"m\",\"b\",\"t\"};\n    int size = (number.intValue() != 0) ? (int) Math.log10(number) : 0;\n    if (size &gt;= 3){\n        while (size % 3 != 0) {\n            size = size - 1;\n        }\n    }\n    double notation = Math.pow(10, size);\n    String result = (size &gt;= 3) ? + (Math.round((number / notation) * 100) / 100.0d)+suffix[(size/3) - 1] : + number + \"\";\n    return result\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1921,"reputation":185672,"user_id":2648,"accept_rate":52,"display_name":"D&#243;nal"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1406160759,"creation_date":1406123242,"answer_id":24912229,"question_id":4753251,"body_markdown":"Problems with Current Answers\r\n-----------------------------\r\n\r\n - Many of the current solutions are using these prefixes k=10&lt;sup&gt;3&lt;/sup&gt;, m=10&lt;sup&gt;6&lt;/sup&gt;, b=10&lt;sup&gt;9&lt;/sup&gt;, t=10&lt;sup&gt;12&lt;/sup&gt;. However, according to [various][1] [sources][2], the correct prefixes are k=10&lt;sup&gt;3&lt;/sup&gt;, M=10&lt;sup&gt;6&lt;/sup&gt;, G=10&lt;sup&gt;9&lt;/sup&gt;, T=10&lt;sup&gt;12&lt;/sup&gt;\r\n - Lack of support for negative numbers (or at least a lack of tests demonstrating that negative numbers are supported)\r\n - Lack of support for the inverse operation, e.g. converting 1.1k to 1100  (though this is outside the scope of the original question)\r\n\r\nJava Solution\r\n----------\r\nThis solution (an extension of [this answer][3]) addresses the above issues.\r\n\r\n    import org.apache.commons.lang.math.NumberUtils;\r\n    \r\n    import java.text.DecimalFormat;\r\n    import java.text.FieldPosition;\r\n    import java.text.Format;\r\n    import java.text.ParsePosition;\r\n    import java.util.regex.Pattern;\r\n    \r\n    \r\n    /**\r\n     * Converts a number to a string in &lt;a href=&quot;http://en.wikipedia.org/wiki/Metric_prefix&quot;&gt;metric prefix&lt;/a&gt; format.\r\n     * For example, 7800000 will be formatted as &#39;7.8M&#39;. Numbers under 1000 will be unchanged. Refer to the tests for further examples.\r\n     */\r\n    class RoundedMetricPrefixFormat extends Format {\r\n    \r\n        private static final String[] METRIC_PREFIXES = new String[]{&quot;&quot;, &quot;k&quot;, &quot;M&quot;, &quot;G&quot;, &quot;T&quot;};\r\n    \r\n        /**\r\n         * The maximum number of characters in the output, excluding the negative sign\r\n         */\r\n        private static final Integer MAX_LENGTH = 4;\r\n    \r\n        private static final Pattern TRAILING_DECIMAL_POINT = Pattern.compile(&quot;[0-9]+\\\\.[kMGT]&quot;);\r\n    \r\n        private static final Pattern METRIC_PREFIXED_NUMBER = Pattern.compile(&quot;\\\\-?[0-9]+(\\\\.[0-9])?[kMGT]&quot;);\r\n    \r\n        @Override\r\n        public StringBuffer format(Object obj, StringBuffer output, FieldPosition pos) {\r\n    \r\n            Double number = Double.valueOf(obj.toString());\r\n    \r\n            // if the number is negative, convert it to a positive number and add the minus sign to the output at the end\r\n            boolean isNegative = number &lt; 0;\r\n            number = Math.abs(number);\r\n    \r\n            String result = new DecimalFormat(&quot;##0E0&quot;).format(number);\r\n    \r\n            Integer index = Character.getNumericValue(result.charAt(result.length() - 1)) / 3;\r\n            result = result.replaceAll(&quot;E[0-9]&quot;, METRIC_PREFIXES[index]);\r\n    \r\n            while (result.length() &gt; MAX_LENGTH || TRAILING_DECIMAL_POINT.matcher(result).matches()) {\r\n                int length = result.length();\r\n                result = result.substring(0, length - 2) + result.substring(length - 1);\r\n            }\r\n    \r\n            return output.append(isNegative ? &quot;-&quot; + result : result);\r\n        }\r\n    \r\n        /**\r\n         * Convert a String produced by &lt;tt&gt;format()&lt;/tt&gt; back to a number. This will generally not restore\r\n         * the original number because &lt;tt&gt;format()&lt;/tt&gt; is a lossy operation, e.g.\r\n         *\r\n         * &lt;pre&gt;\r\n         * {@code\r\n         * def formatter = new RoundedMetricPrefixFormat()\r\n         * Long number = 5821L\r\n         * String formattedNumber = formatter.format(number)\r\n         * assert formattedNumber == &#39;5.8k&#39;\r\n         *\r\n         * Long parsedNumber = formatter.parseObject(formattedNumber)\r\n         * assert parsedNumber == 5800\r\n         * assert parsedNumber != number\r\n         * }\r\n         * &lt;/pre&gt;\r\n         *\r\n         * @param source a number that may have a metric prefix\r\n         * @param pos if parsing succeeds, this should be updated to the index after the last parsed character\r\n         * @return a Number if the the string is a number without a metric prefix, or a Long if it has a metric prefix\r\n         */\r\n        @Override\r\n        public Object parseObject(String source, ParsePosition pos) {\r\n    \r\n            if (NumberUtils.isNumber(source)) {\r\n    \r\n                // if the value is a number (without a prefix) don&#39;t return it as a Long or we&#39;ll lose any decimals\r\n                pos.setIndex(source.length());\r\n                return toNumber(source);\r\n    \r\n            } else if (METRIC_PREFIXED_NUMBER.matcher(source).matches()) {\r\n    \r\n                boolean isNegative = source.charAt(0) == &#39;-&#39;;\r\n                int length = source.length();\r\n    \r\n                String number = isNegative ? source.substring(1, length - 1) : source.substring(0, length - 1);\r\n                String metricPrefix = Character.toString(source.charAt(length - 1));\r\n    \r\n                Number absoluteNumber = toNumber(number);\r\n    \r\n                int index = 0;\r\n    \r\n                for (; index &lt; METRIC_PREFIXES.length; index++) {\r\n                    if (METRIC_PREFIXES[index].equals(metricPrefix)) {\r\n                        break;\r\n                    }\r\n                }\r\n    \r\n                Integer exponent = 3 * index;\r\n                Double factor = Math.pow(10, exponent);\r\n                factor *= isNegative ? -1 : 1;\r\n    \r\n                pos.setIndex(source.length());\r\n                Float result = absoluteNumber.floatValue() * factor.longValue();\r\n                return result.longValue();\r\n            }\r\n    \r\n            return null;\r\n        }\r\n    \r\n        private static Number toNumber(String number) {\r\n            return NumberUtils.createNumber(number);\r\n        }\r\n    }\r\n\r\nGroovy Solution\r\n----------\r\nThe solution was originally written in Groovy as shown below.\r\n\r\n    import org.apache.commons.lang.math.NumberUtils\r\n    \r\n    import java.text.DecimalFormat\r\n    import java.text.FieldPosition\r\n    import java.text.Format\r\n    import java.text.ParsePosition\r\n    import java.util.regex.Pattern\r\n    \r\n    \r\n    /**\r\n     * Converts a number to a string in &lt;a href=&quot;http://en.wikipedia.org/wiki/Metric_prefix&quot;&gt;metric prefix&lt;/a&gt; format.\r\n     * For example, 7800000 will be formatted as &#39;7.8M&#39;. Numbers under 1000 will be unchanged. Refer to the tests for further examples.\r\n     */\r\n    class RoundedMetricPrefixFormat extends Format {\r\n    \r\n        private static final METRIC_PREFIXES = [&quot;&quot;, &quot;k&quot;, &quot;M&quot;, &quot;G&quot;, &quot;T&quot;]\r\n    \r\n        /**\r\n         * The maximum number of characters in the output, excluding the negative sign\r\n         */\r\n        private static final Integer MAX_LENGTH = 4\r\n    \r\n        private static final Pattern TRAILING_DECIMAL_POINT = ~/[0-9]+\\.[kMGT]/\r\n    \r\n        private static final Pattern METRIC_PREFIXED_NUMBER = ~/\\-?[0-9]+(\\.[0-9])?[kMGT]/\r\n    \r\n        @Override\r\n        StringBuffer format(Object obj, StringBuffer output, FieldPosition pos) {\r\n    \r\n            Double number = obj as Double\r\n    \r\n            // if the number is negative, convert it to a positive number and add the minus sign to the output at the end\r\n            boolean isNegative = number &lt; 0\r\n            number = Math.abs(number)\r\n    \r\n            String result = new DecimalFormat(&quot;##0E0&quot;).format(number)\r\n    \r\n            Integer index = Character.getNumericValue(result.charAt(result.size() - 1)) / 3\r\n            result = result.replaceAll(&quot;E[0-9]&quot;, METRIC_PREFIXES[index])\r\n    \r\n            while (result.size() &gt; MAX_LENGTH || TRAILING_DECIMAL_POINT.matcher(result).matches()) {\r\n                int length = result.size()\r\n                result = result.substring(0, length - 2) + result.substring(length - 1)\r\n            }\r\n    \r\n            output &lt;&lt; (isNegative ? &quot;-$result&quot; : result)\r\n        }\r\n    \r\n        /**\r\n         * Convert a String produced by &lt;tt&gt;format()&lt;/tt&gt; back to a number. This will generally not restore\r\n         * the original number because &lt;tt&gt;format()&lt;/tt&gt; is a lossy operation, e.g.\r\n         *\r\n         * &lt;pre&gt;\r\n         * {@code\r\n         * def formatter = new RoundedMetricPrefixFormat()\r\n         * Long number = 5821L\r\n         * String formattedNumber = formatter.format(number)\r\n         * assert formattedNumber == &#39;5.8k&#39;\r\n         *\r\n         * Long parsedNumber = formatter.parseObject(formattedNumber)\r\n         * assert parsedNumber == 5800\r\n         * assert parsedNumber != number\r\n         * }\r\n         * &lt;/pre&gt;\r\n         *\r\n         * @param source a number that may have a metric prefix\r\n         * @param pos if parsing succeeds, this should be updated to the index after the last parsed character\r\n         * @return a Number if the the string is a number without a metric prefix, or a Long if it has a metric prefix\r\n         */\r\n        @Override\r\n        Object parseObject(String source, ParsePosition pos) {\r\n    \r\n            if (source.isNumber()) {\r\n    \r\n                // if the value is a number (without a prefix) don&#39;t return it as a Long or we&#39;ll lose any decimals\r\n                pos.index = source.size()\r\n                toNumber(source)\r\n    \r\n            } else if (METRIC_PREFIXED_NUMBER.matcher(source).matches()) {\r\n    \r\n                boolean isNegative = source[0] == &#39;-&#39;\r\n\r\n                String number = isNegative ? source[1..-2] : source[0..-2]\r\n                String metricPrefix = source[-1]\r\n\r\n                Number absoluteNumber = toNumber(number)\r\n\r\n                Integer exponent = 3 * METRIC_PREFIXES.indexOf(metricPrefix)\r\n                Long factor = 10 ** exponent\r\n                factor *= isNegative ? -1 : 1\r\n\r\n                pos.index = source.size()\r\n                (absoluteNumber * factor) as Long\r\n            }\r\n        }\r\n    \r\n        private static Number toNumber(String number) {\r\n            NumberUtils.createNumber(number)\r\n        }\r\n    }\r\n\r\nTests (Groovy)\r\n-----\r\nThe tests are written in Groovy but can be used to verify either either the Java or Groovy class (because they both have the same name and API).\r\n\r\n    import java.text.Format\r\n    import java.text.ParseException\r\n    \r\n    class RoundedMetricPrefixFormatTests extends GroovyTestCase {\r\n    \r\n        private Format roundedMetricPrefixFormat = new RoundedMetricPrefixFormat()\r\n    \r\n        void testNumberFormatting() {\r\n    \r\n            [\r\n                    7L         : &#39;7&#39;,\r\n                    12L        : &#39;12&#39;,\r\n                    856L       : &#39;856&#39;,\r\n                    1000L      : &#39;1k&#39;,\r\n                    (-1000L)   : &#39;-1k&#39;,\r\n                    5821L      : &#39;5.8k&#39;,\r\n                    10500L     : &#39;10k&#39;,\r\n                    101800L    : &#39;102k&#39;,\r\n                    2000000L   : &#39;2M&#39;,\r\n                    7800000L   : &#39;7.8M&#39;,\r\n                    (-7800000L): &#39;-7.8M&#39;,\r\n                    92150000L  : &#39;92M&#39;,\r\n                    123200000L : &#39;123M&#39;,\r\n                    9999999L   : &#39;10M&#39;,\r\n                    (-9999999L): &#39;-10M&#39;\r\n            ].each { Long rawValue, String expectedRoundValue -&gt;\r\n    \r\n                assertEquals expectedRoundValue, roundedMetricPrefixFormat.format(rawValue)\r\n            }\r\n        }\r\n    \r\n        void testStringParsingSuccess() {\r\n            [\r\n                    &#39;7&#39;    : 7,\r\n                    &#39;8.2&#39;  : 8.2F,\r\n                    &#39;856&#39;  : 856,\r\n                    &#39;-856&#39; : -856,\r\n                    &#39;1k&#39;   : 1000,\r\n                    &#39;5.8k&#39; : 5800,\r\n                    &#39;-5.8k&#39;: -5800,\r\n                    &#39;10k&#39;  : 10000,\r\n                    &#39;102k&#39; : 102000,\r\n                    &#39;2M&#39;   : 2000000,\r\n                    &#39;7.8M&#39; : 7800000L,\r\n                    &#39;92M&#39;  : 92000000L,\r\n                    &#39;-92M&#39; : -92000000L,\r\n                    &#39;123M&#39; : 123000000L,\r\n                    &#39;10M&#39;  : 10000000L\r\n    \r\n            ].each { String metricPrefixNumber, Number expectedValue -&gt;\r\n    \r\n                def parsedNumber = roundedMetricPrefixFormat.parseObject(metricPrefixNumber)\r\n                assertEquals expectedValue, parsedNumber\r\n            }\r\n        }\r\n    \r\n        void testStringParsingFail() {\r\n    \r\n            shouldFail(ParseException) {\r\n                roundedMetricPrefixFormat.parseObject(&#39;notNumber&#39;)\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n  [1]: http://physics.nist.gov/cuu/Units/prefixes.html\r\n  [2]: http://en.wikipedia.org/wiki/Metric_prefix#List_of_SI_prefixes\r\n  [3]: https://stackoverflow.com/a/4754692/2648","title":"How to go about formatting 1200 to 1.2k in java","body":"<h2>Problems with Current Answers</h2>\n\n<ul>\n<li>Many of the current solutions are using these prefixes k=10<sup>3</sup>, m=10<sup>6</sup>, b=10<sup>9</sup>, t=10<sup>12</sup>. However, according to <a href=\"http://physics.nist.gov/cuu/Units/prefixes.html\" rel=\"nofollow noreferrer\">various</a> <a href=\"http://en.wikipedia.org/wiki/Metric_prefix#List_of_SI_prefixes\" rel=\"nofollow noreferrer\">sources</a>, the correct prefixes are k=10<sup>3</sup>, M=10<sup>6</sup>, G=10<sup>9</sup>, T=10<sup>12</sup></li>\n<li>Lack of support for negative numbers (or at least a lack of tests demonstrating that negative numbers are supported)</li>\n<li>Lack of support for the inverse operation, e.g. converting 1.1k to 1100  (though this is outside the scope of the original question)</li>\n</ul>\n\n<h2>Java Solution</h2>\n\n<p>This solution (an extension of <a href=\"https://stackoverflow.com/a/4754692/2648\">this answer</a>) addresses the above issues.</p>\n\n<pre><code>import org.apache.commons.lang.math.NumberUtils;\n\nimport java.text.DecimalFormat;\nimport java.text.FieldPosition;\nimport java.text.Format;\nimport java.text.ParsePosition;\nimport java.util.regex.Pattern;\n\n\n/**\n * Converts a number to a string in &lt;a href=\"http://en.wikipedia.org/wiki/Metric_prefix\"&gt;metric prefix&lt;/a&gt; format.\n * For example, 7800000 will be formatted as '7.8M'. Numbers under 1000 will be unchanged. Refer to the tests for further examples.\n */\nclass RoundedMetricPrefixFormat extends Format {\n\n    private static final String[] METRIC_PREFIXES = new String[]{\"\", \"k\", \"M\", \"G\", \"T\"};\n\n    /**\n     * The maximum number of characters in the output, excluding the negative sign\n     */\n    private static final Integer MAX_LENGTH = 4;\n\n    private static final Pattern TRAILING_DECIMAL_POINT = Pattern.compile(\"[0-9]+\\\\.[kMGT]\");\n\n    private static final Pattern METRIC_PREFIXED_NUMBER = Pattern.compile(\"\\\\-?[0-9]+(\\\\.[0-9])?[kMGT]\");\n\n    @Override\n    public StringBuffer format(Object obj, StringBuffer output, FieldPosition pos) {\n\n        Double number = Double.valueOf(obj.toString());\n\n        // if the number is negative, convert it to a positive number and add the minus sign to the output at the end\n        boolean isNegative = number &lt; 0;\n        number = Math.abs(number);\n\n        String result = new DecimalFormat(\"##0E0\").format(number);\n\n        Integer index = Character.getNumericValue(result.charAt(result.length() - 1)) / 3;\n        result = result.replaceAll(\"E[0-9]\", METRIC_PREFIXES[index]);\n\n        while (result.length() &gt; MAX_LENGTH || TRAILING_DECIMAL_POINT.matcher(result).matches()) {\n            int length = result.length();\n            result = result.substring(0, length - 2) + result.substring(length - 1);\n        }\n\n        return output.append(isNegative ? \"-\" + result : result);\n    }\n\n    /**\n     * Convert a String produced by &lt;tt&gt;format()&lt;/tt&gt; back to a number. This will generally not restore\n     * the original number because &lt;tt&gt;format()&lt;/tt&gt; is a lossy operation, e.g.\n     *\n     * &lt;pre&gt;\n     * {@code\n     * def formatter = new RoundedMetricPrefixFormat()\n     * Long number = 5821L\n     * String formattedNumber = formatter.format(number)\n     * assert formattedNumber == '5.8k'\n     *\n     * Long parsedNumber = formatter.parseObject(formattedNumber)\n     * assert parsedNumber == 5800\n     * assert parsedNumber != number\n     * }\n     * &lt;/pre&gt;\n     *\n     * @param source a number that may have a metric prefix\n     * @param pos if parsing succeeds, this should be updated to the index after the last parsed character\n     * @return a Number if the the string is a number without a metric prefix, or a Long if it has a metric prefix\n     */\n    @Override\n    public Object parseObject(String source, ParsePosition pos) {\n\n        if (NumberUtils.isNumber(source)) {\n\n            // if the value is a number (without a prefix) don't return it as a Long or we'll lose any decimals\n            pos.setIndex(source.length());\n            return toNumber(source);\n\n        } else if (METRIC_PREFIXED_NUMBER.matcher(source).matches()) {\n\n            boolean isNegative = source.charAt(0) == '-';\n            int length = source.length();\n\n            String number = isNegative ? source.substring(1, length - 1) : source.substring(0, length - 1);\n            String metricPrefix = Character.toString(source.charAt(length - 1));\n\n            Number absoluteNumber = toNumber(number);\n\n            int index = 0;\n\n            for (; index &lt; METRIC_PREFIXES.length; index++) {\n                if (METRIC_PREFIXES[index].equals(metricPrefix)) {\n                    break;\n                }\n            }\n\n            Integer exponent = 3 * index;\n            Double factor = Math.pow(10, exponent);\n            factor *= isNegative ? -1 : 1;\n\n            pos.setIndex(source.length());\n            Float result = absoluteNumber.floatValue() * factor.longValue();\n            return result.longValue();\n        }\n\n        return null;\n    }\n\n    private static Number toNumber(String number) {\n        return NumberUtils.createNumber(number);\n    }\n}\n</code></pre>\n\n<h2>Groovy Solution</h2>\n\n<p>The solution was originally written in Groovy as shown below.</p>\n\n<pre><code>import org.apache.commons.lang.math.NumberUtils\n\nimport java.text.DecimalFormat\nimport java.text.FieldPosition\nimport java.text.Format\nimport java.text.ParsePosition\nimport java.util.regex.Pattern\n\n\n/**\n * Converts a number to a string in &lt;a href=\"http://en.wikipedia.org/wiki/Metric_prefix\"&gt;metric prefix&lt;/a&gt; format.\n * For example, 7800000 will be formatted as '7.8M'. Numbers under 1000 will be unchanged. Refer to the tests for further examples.\n */\nclass RoundedMetricPrefixFormat extends Format {\n\n    private static final METRIC_PREFIXES = [\"\", \"k\", \"M\", \"G\", \"T\"]\n\n    /**\n     * The maximum number of characters in the output, excluding the negative sign\n     */\n    private static final Integer MAX_LENGTH = 4\n\n    private static final Pattern TRAILING_DECIMAL_POINT = ~/[0-9]+\\.[kMGT]/\n\n    private static final Pattern METRIC_PREFIXED_NUMBER = ~/\\-?[0-9]+(\\.[0-9])?[kMGT]/\n\n    @Override\n    StringBuffer format(Object obj, StringBuffer output, FieldPosition pos) {\n\n        Double number = obj as Double\n\n        // if the number is negative, convert it to a positive number and add the minus sign to the output at the end\n        boolean isNegative = number &lt; 0\n        number = Math.abs(number)\n\n        String result = new DecimalFormat(\"##0E0\").format(number)\n\n        Integer index = Character.getNumericValue(result.charAt(result.size() - 1)) / 3\n        result = result.replaceAll(\"E[0-9]\", METRIC_PREFIXES[index])\n\n        while (result.size() &gt; MAX_LENGTH || TRAILING_DECIMAL_POINT.matcher(result).matches()) {\n            int length = result.size()\n            result = result.substring(0, length - 2) + result.substring(length - 1)\n        }\n\n        output &lt;&lt; (isNegative ? \"-$result\" : result)\n    }\n\n    /**\n     * Convert a String produced by &lt;tt&gt;format()&lt;/tt&gt; back to a number. This will generally not restore\n     * the original number because &lt;tt&gt;format()&lt;/tt&gt; is a lossy operation, e.g.\n     *\n     * &lt;pre&gt;\n     * {@code\n     * def formatter = new RoundedMetricPrefixFormat()\n     * Long number = 5821L\n     * String formattedNumber = formatter.format(number)\n     * assert formattedNumber == '5.8k'\n     *\n     * Long parsedNumber = formatter.parseObject(formattedNumber)\n     * assert parsedNumber == 5800\n     * assert parsedNumber != number\n     * }\n     * &lt;/pre&gt;\n     *\n     * @param source a number that may have a metric prefix\n     * @param pos if parsing succeeds, this should be updated to the index after the last parsed character\n     * @return a Number if the the string is a number without a metric prefix, or a Long if it has a metric prefix\n     */\n    @Override\n    Object parseObject(String source, ParsePosition pos) {\n\n        if (source.isNumber()) {\n\n            // if the value is a number (without a prefix) don't return it as a Long or we'll lose any decimals\n            pos.index = source.size()\n            toNumber(source)\n\n        } else if (METRIC_PREFIXED_NUMBER.matcher(source).matches()) {\n\n            boolean isNegative = source[0] == '-'\n\n            String number = isNegative ? source[1..-2] : source[0..-2]\n            String metricPrefix = source[-1]\n\n            Number absoluteNumber = toNumber(number)\n\n            Integer exponent = 3 * METRIC_PREFIXES.indexOf(metricPrefix)\n            Long factor = 10 ** exponent\n            factor *= isNegative ? -1 : 1\n\n            pos.index = source.size()\n            (absoluteNumber * factor) as Long\n        }\n    }\n\n    private static Number toNumber(String number) {\n        NumberUtils.createNumber(number)\n    }\n}\n</code></pre>\n\n<h2>Tests (Groovy)</h2>\n\n<p>The tests are written in Groovy but can be used to verify either either the Java or Groovy class (because they both have the same name and API).</p>\n\n<pre><code>import java.text.Format\nimport java.text.ParseException\n\nclass RoundedMetricPrefixFormatTests extends GroovyTestCase {\n\n    private Format roundedMetricPrefixFormat = new RoundedMetricPrefixFormat()\n\n    void testNumberFormatting() {\n\n        [\n                7L         : '7',\n                12L        : '12',\n                856L       : '856',\n                1000L      : '1k',\n                (-1000L)   : '-1k',\n                5821L      : '5.8k',\n                10500L     : '10k',\n                101800L    : '102k',\n                2000000L   : '2M',\n                7800000L   : '7.8M',\n                (-7800000L): '-7.8M',\n                92150000L  : '92M',\n                123200000L : '123M',\n                9999999L   : '10M',\n                (-9999999L): '-10M'\n        ].each { Long rawValue, String expectedRoundValue -&gt;\n\n            assertEquals expectedRoundValue, roundedMetricPrefixFormat.format(rawValue)\n        }\n    }\n\n    void testStringParsingSuccess() {\n        [\n                '7'    : 7,\n                '8.2'  : 8.2F,\n                '856'  : 856,\n                '-856' : -856,\n                '1k'   : 1000,\n                '5.8k' : 5800,\n                '-5.8k': -5800,\n                '10k'  : 10000,\n                '102k' : 102000,\n                '2M'   : 2000000,\n                '7.8M' : 7800000L,\n                '92M'  : 92000000L,\n                '-92M' : -92000000L,\n                '123M' : 123000000L,\n                '10M'  : 10000000L\n\n        ].each { String metricPrefixNumber, Number expectedValue -&gt;\n\n            def parsedNumber = roundedMetricPrefixFormat.parseObject(metricPrefixNumber)\n            assertEquals expectedValue, parsedNumber\n        }\n    }\n\n    void testStringParsingFail() {\n\n        shouldFail(ParseException) {\n            roundedMetricPrefixFormat.parseObject('notNumber')\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1421425,"reputation":658,"user_id":1345954,"accept_rate":82,"display_name":"LearningDeveloper"},"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1409899246,"creation_date":1409899246,"answer_id":25679958,"question_id":4753251,"body_markdown":"Adding my own answer, Java code, self explanatory code..\r\n\r\n\r\n    import java.math.BigDecimal;\r\n    \r\n    /**\r\n     * Method to convert number to formatted number.\r\n     * \r\n     * @author Gautham PJ\r\n     */\r\n    public class ShortFormatNumbers\r\n    {\r\n        \r\n        /**\r\n         * Main method. Execution starts here.\r\n         */\r\n        public static void main(String[] args)\r\n        {\r\n            \r\n            // The numbers that are being converted.\r\n            int[] numbers = {999, 1400, 2500, 45673463, 983456, 234234567};\r\n            \r\n            \r\n            // Call the &quot;formatNumber&quot; method on individual numbers to format \r\n            // the number.\r\n            for(int number : numbers)\r\n            {\r\n                System.out.println(number + &quot;: &quot; + formatNumber(number));\r\n            }\r\n            \r\n        }\r\n        \r\n        \r\n        /**\r\n         * Format the number to display it in short format.\r\n         * \r\n         * The number is divided by 1000 to find which denomination to be added \r\n         * to the number. Dividing the number will give the smallest possible \r\n         * value with the denomination.\r\n         * \r\n         * @param the number that needs to be converted to short hand notation.\r\n         * @return the converted short hand notation for the number.\r\n         */\r\n        private static String formatNumber(double number)\r\n        {\r\n            String[] denominations = {&quot;&quot;, &quot;k&quot;, &quot;m&quot;, &quot;b&quot;, &quot;t&quot;};\r\n            int denominationIndex = 0;\r\n            \r\n            // If number is greater than 1000, divide the number by 1000 and \r\n            // increment the index for the denomination.\r\n            while(number &gt; 1000.0)\r\n            {\r\n                denominationIndex++;\r\n                number = number / 1000.0;\r\n            }\r\n            \r\n            // To round it to 2 digits.\r\n            BigDecimal bigDecimal = new BigDecimal(number);\r\n            bigDecimal = bigDecimal.setScale(2, BigDecimal.ROUND_HALF_EVEN);\r\n            \r\n            \r\n            // Add the number with the denomination to get the final value.\r\n            String formattedNumber = bigDecimal + denominations[denominationIndex];\r\n            return formattedNumber;\r\n        }\r\n        \r\n    }","title":"How to go about formatting 1200 to 1.2k in java","body":"<p>Adding my own answer, Java code, self explanatory code..</p>\n\n<pre><code>import java.math.BigDecimal;\n\n/**\n * Method to convert number to formatted number.\n * \n * @author Gautham PJ\n */\npublic class ShortFormatNumbers\n{\n\n    /**\n     * Main method. Execution starts here.\n     */\n    public static void main(String[] args)\n    {\n\n        // The numbers that are being converted.\n        int[] numbers = {999, 1400, 2500, 45673463, 983456, 234234567};\n\n\n        // Call the \"formatNumber\" method on individual numbers to format \n        // the number.\n        for(int number : numbers)\n        {\n            System.out.println(number + \": \" + formatNumber(number));\n        }\n\n    }\n\n\n    /**\n     * Format the number to display it in short format.\n     * \n     * The number is divided by 1000 to find which denomination to be added \n     * to the number. Dividing the number will give the smallest possible \n     * value with the denomination.\n     * \n     * @param the number that needs to be converted to short hand notation.\n     * @return the converted short hand notation for the number.\n     */\n    private static String formatNumber(double number)\n    {\n        String[] denominations = {\"\", \"k\", \"m\", \"b\", \"t\"};\n        int denominationIndex = 0;\n\n        // If number is greater than 1000, divide the number by 1000 and \n        // increment the index for the denomination.\n        while(number &gt; 1000.0)\n        {\n            denominationIndex++;\n            number = number / 1000.0;\n        }\n\n        // To round it to 2 digits.\n        BigDecimal bigDecimal = new BigDecimal(number);\n        bigDecimal = bigDecimal.setScale(2, BigDecimal.ROUND_HALF_EVEN);\n\n\n        // Add the number with the denomination to get the final value.\n        String formattedNumber = bigDecimal + denominations[denominationIndex];\n        return formattedNumber;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"down_vote_count":0,"up_vote_count":187,"is_accepted":true,"score":187,"last_activity_date":1436980330,"creation_date":1433491668,"answer_id":30661479,"question_id":4753251,"body_markdown":"Here is ***a solution that works for any long value*** and that I find quite readable (the core logic is done in the bottom three lines of the `format` method).\n\nIt leverages `TreeMap` to find the appropriate suffix. It is surprisingly more efficient than a previous solution I wrote that was using arrays and was more difficult to read.\n\n    private static final NavigableMap&lt;Long, String&gt; suffixes = new TreeMap&lt;&gt; ();\n    static {\n      suffixes.put(1_000L, &quot;k&quot;);\n      suffixes.put(1_000_000L, &quot;M&quot;);\n      suffixes.put(1_000_000_000L, &quot;G&quot;);\n      suffixes.put(1_000_000_000_000L, &quot;T&quot;);\n      suffixes.put(1_000_000_000_000_000L, &quot;P&quot;);\n      suffixes.put(1_000_000_000_000_000_000L, &quot;E&quot;);\n    }\n\n    public static String format(long value) {\n      //Long.MIN_VALUE == -Long.MIN_VALUE so we need an adjustment here\n      if (value == Long.MIN_VALUE) return format(Long.MIN_VALUE + 1);\n      if (value &lt; 0) return &quot;-&quot; + format(-value);\n      if (value &lt; 1000) return Long.toString(value); //deal with easy case\n\n      Entry&lt;Long, String&gt; e = suffixes.floorEntry(value);\n      Long divideBy = e.getKey();\n      String suffix = e.getValue();\n\n      long truncated = value / (divideBy / 10); //the number part of the output times 10\n      boolean hasDecimal = truncated &lt; 100 &amp;&amp; (truncated / 10d) != (truncated / 10);\n      return hasDecimal ? (truncated / 10d) + suffix : (truncated / 10) + suffix;\n    }\n\n---\n## Test code\n\n    public static void main(String args[]) {\n      long[] numbers = {0, 5, 999, 1_000, -5_821, 10_500, -101_800, 2_000_000, -7_800_000, 92_150_000, 123_200_000, 9_999_999, 999_999_999_999_999_999L, 1_230_000_000_000_000L, Long.MIN_VALUE, Long.MAX_VALUE};\n      String[] expected = {&quot;0&quot;, &quot;5&quot;, &quot;999&quot;, &quot;1k&quot;, &quot;-5.8k&quot;, &quot;10k&quot;, &quot;-101k&quot;, &quot;2M&quot;, &quot;-7.8M&quot;, &quot;92M&quot;, &quot;123M&quot;, &quot;9.9M&quot;, &quot;999P&quot;, &quot;1.2P&quot;, &quot;-9.2E&quot;, &quot;9.2E&quot;};\n      for (int i = 0; i &lt; numbers.length; i++) {\n        long n = numbers[i];\n        String formatted = format(n);\n        System.out.println(n + &quot; =&gt; &quot; + formatted);\n        if (!formatted.equals(expected[i])) throw new AssertionError(&quot;Expected: &quot; + expected[i] + &quot; but found: &quot; + formatted);\n      }\n    }","title":"How to go about formatting 1200 to 1.2k in java","body":"<p>Here is <em><strong>a solution that works for any long value</strong></em> and that I find quite readable (the core logic is done in the bottom three lines of the <code>format</code> method).</p>\n<p>It leverages <code>TreeMap</code> to find the appropriate suffix. It is surprisingly more efficient than a previous solution I wrote that was using arrays and was more difficult to read.</p>\n<pre><code>private static final NavigableMap&lt;Long, String&gt; suffixes = new TreeMap&lt;&gt; ();\nstatic {\n  suffixes.put(1_000L, &quot;k&quot;);\n  suffixes.put(1_000_000L, &quot;M&quot;);\n  suffixes.put(1_000_000_000L, &quot;G&quot;);\n  suffixes.put(1_000_000_000_000L, &quot;T&quot;);\n  suffixes.put(1_000_000_000_000_000L, &quot;P&quot;);\n  suffixes.put(1_000_000_000_000_000_000L, &quot;E&quot;);\n}\n\npublic static String format(long value) {\n  //Long.MIN_VALUE == -Long.MIN_VALUE so we need an adjustment here\n  if (value == Long.MIN_VALUE) return format(Long.MIN_VALUE + 1);\n  if (value &lt; 0) return &quot;-&quot; + format(-value);\n  if (value &lt; 1000) return Long.toString(value); //deal with easy case\n\n  Entry&lt;Long, String&gt; e = suffixes.floorEntry(value);\n  Long divideBy = e.getKey();\n  String suffix = e.getValue();\n\n  long truncated = value / (divideBy / 10); //the number part of the output times 10\n  boolean hasDecimal = truncated &lt; 100 &amp;&amp; (truncated / 10d) != (truncated / 10);\n  return hasDecimal ? (truncated / 10d) + suffix : (truncated / 10) + suffix;\n}\n</code></pre>\n<hr />\n<h2>Test code</h2>\n<pre><code>public static void main(String args[]) {\n  long[] numbers = {0, 5, 999, 1_000, -5_821, 10_500, -101_800, 2_000_000, -7_800_000, 92_150_000, 123_200_000, 9_999_999, 999_999_999_999_999_999L, 1_230_000_000_000_000L, Long.MIN_VALUE, Long.MAX_VALUE};\n  String[] expected = {&quot;0&quot;, &quot;5&quot;, &quot;999&quot;, &quot;1k&quot;, &quot;-5.8k&quot;, &quot;10k&quot;, &quot;-101k&quot;, &quot;2M&quot;, &quot;-7.8M&quot;, &quot;92M&quot;, &quot;123M&quot;, &quot;9.9M&quot;, &quot;999P&quot;, &quot;1.2P&quot;, &quot;-9.2E&quot;, &quot;9.2E&quot;};\n  for (int i = 0; i &lt; numbers.length; i++) {\n    long n = numbers[i];\n    String formatted = format(n);\n    System.out.println(n + &quot; =&gt; &quot; + formatted);\n    if (!formatted.equals(expected[i])) throw new AssertionError(&quot;Expected: &quot; + expected[i] + &quot; but found: &quot; + formatted);\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6136413,"reputation":8488,"user_id":4785110,"display_name":"maraca"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1433920584,"creation_date":1433635742,"answer_id":30688774,"question_id":4753251,"body_markdown":"**Important:** Answers casting to `double` will fail for numbers like `99999999999999999L` and return `100P` instead of `99P` because `double` uses the &lt;a href=&quot;http://en.wikipedia.org/wiki/Double-precision_floating-point_format&quot;&gt;`IEEE` standard&lt;/a&gt;: \r\n&gt;If a decimal string with *at most 15 significant digits* is converted to IEEE 754 double precision representation and then converted back to a string with the same number of significant digits, then the final string should match the original. [`long` has *up to 19 significant digits*.]\r\n\r\n    System.out.println((long)(double)99999999999999992L); // 100000000000000000\r\n    System.out.println((long)(double)99999999999999991L); //  99999999999999984\r\n    // it is even worse for the logarithm:\r\n    System.out.println(Math.log10(99999999999999600L)); // 17.0\r\n    System.out.println(Math.log10(99999999999999500L)); // 16.999999999999996\r\n&lt;hr&gt;\r\n\r\n**This solution cuts off unwanted digits and works for all `long` values**. Simple but performant implementation (comparison below). -120k can&#39;t be expressed with 4 characters, even -0.1M is too long, that&#39;s why for negative numbers 5 characters have to be okay:\r\n\r\n    private static final char[] magnitudes = {&#39;k&#39;, &#39;M&#39;, &#39;G&#39;, &#39;T&#39;, &#39;P&#39;, &#39;E&#39;}; // enough for long\r\n\r\n    public static final String convert(long number) {\r\n        String ret;\r\n        if (number &gt;= 0) {\r\n            ret = &quot;&quot;;\r\n        } else if (number &lt;= -9200000000000000000L) {\r\n\t\t\treturn &quot;-9.2E&quot;;\r\n        } else {\r\n            ret = &quot;-&quot;;\r\n            number = -number;\r\n        }\r\n        if (number &lt; 1000)\r\n            return ret + number;\r\n        for (int i = 0; ; i++) {\r\n            if (number &lt; 10000 &amp;&amp; number % 1000 &gt;= 100)\r\n                return ret + (number / 1000) + &#39;.&#39; + ((number % 1000) / 100) + magnitudes[i];\r\n            number /= 1000;\r\n            if (number &lt; 1000)\r\n                return ret + number + magnitudes[i];\r\n        }\r\n    }\r\n\r\nThe test in the `else if` at the beginning is necessairy because the min is `-(2^63)` and the max is `(2^63)-1` and therefore the assignment `number = -number` would fail if `number == Long.MIN_VALUE`. If we have to do a check, then we can as well include as many numbers as possible instead of just checking for `number == Long.MIN_VALUE`.\r\n\r\nThe comparison of this implementation with the one who got the most upvotes (said to be the fastest currently) showed that it is **more than 5 times faster** (it depends on the test settings, but with more numbers the gain gets bigger and this implementation has to do more checks because it handles all cases, so if the other one would be fixed the difference would become even bigger). It is that fast because there are no floating point operations, no logarithm, no power, no recursion, no regex, no sophisticated formatters and minimization of the amount of objects created.\r\n\r\n&lt;hr&gt;\r\n\r\nHere is the test program:\r\n\r\n    public class Test {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tlong[] numbers = new long[20000000];\r\n    \t\tfor (int i = 0; i &lt; numbers.length; i++)\r\n    \t\t\tnumbers[i] = Math.random() &lt; 0.5 ? (long) (Math.random() * Long.MAX_VALUE) : (long) (Math.random() * Long.MIN_VALUE);\r\n    \t\tSystem.out.println(convert1(numbers) + &quot; vs. &quot; + convert2(numbers));\r\n    \t}\r\n    \t\r\n    \tprivate static long convert1(long[] numbers) {\r\n    \t\tlong l = System.currentTimeMillis();\r\n    \t\tfor (int i = 0; i &lt; numbers.length; i++)\r\n    \t\t\tConverter1.convert(numbers[i]);\r\n    \t\treturn System.currentTimeMillis() - l;\r\n    \t}\r\n    \t\r\n    \tprivate static long convert2(long[] numbers) {\r\n    \t\tlong l = System.currentTimeMillis();\r\n    \t\tfor (int i = 0; i &lt; numbers.length; i++)\r\n    \t\t\tConverter2.coolFormat(numbers[i], 0);\r\n    \t\treturn System.currentTimeMillis() - l;\r\n    \t}\r\n    \t\r\n    }\r\n\r\nPossible output: `2309 vs. 11591` (about the same when only using positive numbers and much more extreme when reversing the order of execution, maybe it has something to do with garbage collection)","title":"How to go about formatting 1200 to 1.2k in java","body":"<p><strong>Important:</strong> Answers casting to <code>double</code> will fail for numbers like <code>99999999999999999L</code> and return <code>100P</code> instead of <code>99P</code> because <code>double</code> uses the <a href=\"http://en.wikipedia.org/wiki/Double-precision_floating-point_format\" rel=\"noreferrer\"><code>IEEE</code> standard</a>: </p>\n\n<blockquote>\n  <p>If a decimal string with <em>at most 15 significant digits</em> is converted to IEEE 754 double precision representation and then converted back to a string with the same number of significant digits, then the final string should match the original. [<code>long</code> has <em>up to 19 significant digits</em>.]</p>\n</blockquote>\n\n<pre><code>System.out.println((long)(double)99999999999999992L); // 100000000000000000\nSystem.out.println((long)(double)99999999999999991L); //  99999999999999984\n// it is even worse for the logarithm:\nSystem.out.println(Math.log10(99999999999999600L)); // 17.0\nSystem.out.println(Math.log10(99999999999999500L)); // 16.999999999999996\n</code></pre>\n\n<hr>\n\n<p><strong>This solution cuts off unwanted digits and works for all <code>long</code> values</strong>. Simple but performant implementation (comparison below). -120k can't be expressed with 4 characters, even -0.1M is too long, that's why for negative numbers 5 characters have to be okay:</p>\n\n<pre><code>private static final char[] magnitudes = {'k', 'M', 'G', 'T', 'P', 'E'}; // enough for long\n\npublic static final String convert(long number) {\n    String ret;\n    if (number &gt;= 0) {\n        ret = \"\";\n    } else if (number &lt;= -9200000000000000000L) {\n        return \"-9.2E\";\n    } else {\n        ret = \"-\";\n        number = -number;\n    }\n    if (number &lt; 1000)\n        return ret + number;\n    for (int i = 0; ; i++) {\n        if (number &lt; 10000 &amp;&amp; number % 1000 &gt;= 100)\n            return ret + (number / 1000) + '.' + ((number % 1000) / 100) + magnitudes[i];\n        number /= 1000;\n        if (number &lt; 1000)\n            return ret + number + magnitudes[i];\n    }\n}\n</code></pre>\n\n<p>The test in the <code>else if</code> at the beginning is necessairy because the min is <code>-(2^63)</code> and the max is <code>(2^63)-1</code> and therefore the assignment <code>number = -number</code> would fail if <code>number == Long.MIN_VALUE</code>. If we have to do a check, then we can as well include as many numbers as possible instead of just checking for <code>number == Long.MIN_VALUE</code>.</p>\n\n<p>The comparison of this implementation with the one who got the most upvotes (said to be the fastest currently) showed that it is <strong>more than 5 times faster</strong> (it depends on the test settings, but with more numbers the gain gets bigger and this implementation has to do more checks because it handles all cases, so if the other one would be fixed the difference would become even bigger). It is that fast because there are no floating point operations, no logarithm, no power, no recursion, no regex, no sophisticated formatters and minimization of the amount of objects created.</p>\n\n<hr>\n\n<p>Here is the test program:</p>\n\n<pre><code>public class Test {\n\n    public static void main(String[] args) {\n        long[] numbers = new long[20000000];\n        for (int i = 0; i &lt; numbers.length; i++)\n            numbers[i] = Math.random() &lt; 0.5 ? (long) (Math.random() * Long.MAX_VALUE) : (long) (Math.random() * Long.MIN_VALUE);\n        System.out.println(convert1(numbers) + \" vs. \" + convert2(numbers));\n    }\n\n    private static long convert1(long[] numbers) {\n        long l = System.currentTimeMillis();\n        for (int i = 0; i &lt; numbers.length; i++)\n            Converter1.convert(numbers[i]);\n        return System.currentTimeMillis() - l;\n    }\n\n    private static long convert2(long[] numbers) {\n        long l = System.currentTimeMillis();\n        for (int i = 0; i &lt; numbers.length; i++)\n            Converter2.coolFormat(numbers[i], 0);\n        return System.currentTimeMillis() - l;\n    }\n\n}\n</code></pre>\n\n<p>Possible output: <code>2309 vs. 11591</code> (about the same when only using positive numbers and much more extreme when reversing the order of execution, maybe it has something to do with garbage collection)</p>\n"},{"tags":[],"owner":{"account_id":958617,"reputation":4858,"user_id":983430,"accept_rate":100,"display_name":"Amos M. Carpenter"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1433950276,"creation_date":1433947933,"answer_id":30759915,"question_id":4753251,"body_markdown":"Staying true to my comment that I&#39;d value readability above performance, here&#39;s a version where it should be clear what&#39;s happening (assuming you&#39;ve used `BigDecimal`s before) without excessive commenting (I believe in self-documenting code), without worrying about performance (since I can&#39;t picture a scenario where you&#39;d want to do this so many millions of times that performance even becomes a consideration).\r\n\r\nThis version:\r\n\r\n - uses `BigDecimal`s for precision and to avoid rounding issues\r\n - works for rounding down as requested by the OP\r\n - works for other rounding modes, e.g. `HALF_UP` as in the tests\r\n - allows you to adjust the precision (change `REQUIRED_PRECISION`)\r\n - uses an `enum` to define the thresholds, i.e. could easily be adjusted to use KB/MB/GB/TB instead of k/m/b/t, etc., and could of course be extended beyond `TRILLION` if required\r\n - comes with thorough unit tests, since the test cases in the question weren&#39;t testing the borders\r\n - should work for zero and negative numbers\r\n\r\n**Threshold.java**:\r\n\r\n    import java.math.BigDecimal;\r\n    \r\n    public enum Threshold {\r\n      TRILLION(&quot;1000000000000&quot;, 12, &#39;t&#39;, null),\r\n      BILLION(&quot;1000000000&quot;, 9, &#39;b&#39;, TRILLION),\r\n      MILLION(&quot;1000000&quot;, 6, &#39;m&#39;, BILLION),\r\n      THOUSAND(&quot;1000&quot;, 3, &#39;k&#39;, MILLION),\r\n      ZERO(&quot;0&quot;, 0, null, THOUSAND);\r\n    \r\n      private BigDecimal value;\r\n      private int zeroes;\r\n      protected Character suffix;\r\n      private Threshold higherThreshold;\r\n    \r\n      private Threshold(String aValueString, int aNumberOfZeroes, Character aSuffix,\r\n          Threshold aThreshold) {\r\n        value = new BigDecimal(aValueString);\r\n        zeroes = aNumberOfZeroes;\r\n        suffix = aSuffix;\r\n        higherThreshold = aThreshold;\r\n      }\r\n    \r\n      public static Threshold thresholdFor(long aValue) {\r\n        return thresholdFor(new BigDecimal(aValue));\r\n      }\r\n    \r\n      public static Threshold thresholdFor(BigDecimal aValue) {\r\n        for (Threshold eachThreshold : Threshold.values()) {\r\n          if (eachThreshold.value.compareTo(aValue) &lt;= 0) {\r\n            return eachThreshold;\r\n          }\r\n        }\r\n        return TRILLION; // shouldn&#39;t be needed, but you might have to extend the enum\r\n      }\r\n    \r\n      public int getNumberOfZeroes() {\r\n        return zeroes;\r\n      }\r\n    \r\n      public String getSuffix() {\r\n        return suffix == null ? &quot;&quot; : &quot;&quot; + suffix;\r\n      }\r\n    \r\n      public Threshold getHigherThreshold() {\r\n        return higherThreshold;\r\n      }\r\n    }\r\n\r\n**NumberShortener.java**:\r\n\r\n    import java.math.BigDecimal;\r\n    import java.math.RoundingMode;\r\n    \r\n    public class NumberShortener {\r\n    \r\n      public static final int REQUIRED_PRECISION = 2;\r\n    \r\n      public static BigDecimal toPrecisionWithoutLoss(BigDecimal aBigDecimal,\r\n          int aPrecision, RoundingMode aMode) {\r\n        int previousScale = aBigDecimal.scale();\r\n        int previousPrecision = aBigDecimal.precision();\r\n        int newPrecision = Math.max(previousPrecision - previousScale, aPrecision);\r\n        return aBigDecimal.setScale(previousScale + newPrecision - previousPrecision,\r\n            aMode);\r\n      }\r\n    \r\n      private static BigDecimal scaledNumber(BigDecimal aNumber, RoundingMode aMode) {\r\n        Threshold threshold = Threshold.thresholdFor(aNumber);\r\n        BigDecimal adjustedNumber = aNumber.movePointLeft(threshold.getNumberOfZeroes());\r\n        BigDecimal scaledNumber = toPrecisionWithoutLoss(adjustedNumber, REQUIRED_PRECISION,\r\n            aMode).stripTrailingZeros();\r\n        // System.out.println(&quot;Number: &lt;&quot; + aNumber + &quot;&gt;, adjusted: &lt;&quot; + adjustedNumber\r\n        // + &quot;&gt;, rounded: &lt;&quot; + scaledNumber + &quot;&gt;&quot;);\r\n        return scaledNumber;\r\n      }\r\n    \r\n      public static String shortenedNumber(long aNumber, RoundingMode aMode) {\r\n        boolean isNegative = aNumber &lt; 0;\r\n        BigDecimal numberAsBigDecimal = new BigDecimal(isNegative ? -aNumber : aNumber);\r\n        Threshold threshold = Threshold.thresholdFor(numberAsBigDecimal);\r\n        BigDecimal scaledNumber = aNumber == 0 ? numberAsBigDecimal : scaledNumber(\r\n            numberAsBigDecimal, aMode);\r\n        if (scaledNumber.compareTo(new BigDecimal(&quot;1000&quot;)) &gt;= 0) {\r\n          scaledNumber = scaledNumber(scaledNumber, aMode);\r\n          threshold = threshold.getHigherThreshold();\r\n        }\r\n        String sign = isNegative ? &quot;-&quot; : &quot;&quot;;\r\n        String printNumber = sign + scaledNumber.stripTrailingZeros().toPlainString()\r\n            + threshold.getSuffix();\r\n        // System.out.println(&quot;Number: &lt;&quot; + sign + numberAsBigDecimal + &quot;&gt;, rounded: &lt;&quot;\r\n        // + sign + scaledNumber + &quot;&gt;, print: &lt;&quot; + printNumber + &quot;&gt;&quot;);\r\n        return printNumber;\r\n      }\r\n    }\r\n\r\n(Uncomment the `println` statements or change to use your favourite logger to see what it&#39;s doing.)\r\n\r\nAnd finally, the tests in **NumberShortenerTest** (plain JUnit 4):\r\n\r\n    import static org.junit.Assert.*;\r\n    \r\n    import java.math.BigDecimal;\r\n    import java.math.RoundingMode;\r\n    \r\n    import org.junit.Test;\r\n    \r\n    public class NumberShortenerTest {\r\n    \r\n      private static final long[] NUMBERS_FROM_OP = new long[] { 1000, 5821, 10500, 101800, 2000000, 7800000, 92150000, 123200000 };\r\n      private static final String[] EXPECTED_FROM_OP = new String[] { &quot;1k&quot;, &quot;5.8k&quot;, &quot;10k&quot;, &quot;101k&quot;, &quot;2m&quot;, &quot;7.8m&quot;, &quot;92m&quot;, &quot;123m&quot; };\r\n      private static final String[] EXPECTED_FROM_OP_HALF_UP = new String[] { &quot;1k&quot;, &quot;5.8k&quot;, &quot;11k&quot;, &quot;102k&quot;, &quot;2m&quot;, &quot;7.8m&quot;, &quot;92m&quot;, &quot;123m&quot; };\r\n      private static final long[] NUMBERS_TO_TEST = new long[] { 1, 500, 999, 1000, 1001, 1009, 1049, 1050, 1099, 1100, 12345, 123456, 999999, 1000000,\r\n          1000099, 1000999, 1009999, 1099999, 1100000, 1234567, 999999999, 1000000000, 9123456789L, 123456789123L };\r\n      private static final String[] EXPECTED_FROM_TEST = new String[] { &quot;1&quot;, &quot;500&quot;, &quot;999&quot;, &quot;1k&quot;, &quot;1k&quot;, &quot;1k&quot;, &quot;1k&quot;, &quot;1k&quot;, &quot;1k&quot;, &quot;1.1k&quot;, &quot;12k&quot;, &quot;123k&quot;,\r\n          &quot;999k&quot;, &quot;1m&quot;, &quot;1m&quot;, &quot;1m&quot;, &quot;1m&quot;, &quot;1m&quot;, &quot;1.1m&quot;, &quot;1.2m&quot;, &quot;999m&quot;, &quot;1b&quot;, &quot;9.1b&quot;, &quot;123b&quot; };\r\n      private static final String[] EXPECTED_FROM_TEST_HALF_UP = new String[] { &quot;1&quot;, &quot;500&quot;, &quot;999&quot;, &quot;1k&quot;, &quot;1k&quot;, &quot;1k&quot;, &quot;1k&quot;, &quot;1.1k&quot;, &quot;1.1k&quot;, &quot;1.1k&quot;, &quot;12k&quot;,\r\n          &quot;123k&quot;, &quot;1m&quot;, &quot;1m&quot;, &quot;1m&quot;, &quot;1m&quot;, &quot;1m&quot;, &quot;1.1m&quot;, &quot;1.1m&quot;, &quot;1.2m&quot;, &quot;1b&quot;, &quot;1b&quot;, &quot;9.1b&quot;, &quot;123b&quot; };\r\n    \r\n      @Test\r\n      public void testThresholdFor() {\r\n        assertEquals(Threshold.ZERO, Threshold.thresholdFor(1));\r\n        assertEquals(Threshold.ZERO, Threshold.thresholdFor(999));\r\n        assertEquals(Threshold.THOUSAND, Threshold.thresholdFor(1000));\r\n        assertEquals(Threshold.THOUSAND, Threshold.thresholdFor(1234));\r\n        assertEquals(Threshold.THOUSAND, Threshold.thresholdFor(9999));\r\n        assertEquals(Threshold.THOUSAND, Threshold.thresholdFor(999999));\r\n        assertEquals(Threshold.MILLION, Threshold.thresholdFor(1000000));\r\n      }\r\n    \r\n      @Test\r\n      public void testToPrecision() {\r\n        RoundingMode mode = RoundingMode.DOWN;\r\n        assertEquals(new BigDecimal(&quot;1&quot;), NumberShortener.toPrecisionWithoutLoss(new BigDecimal(&quot;1.23456&quot;), 1, mode));\r\n        assertEquals(new BigDecimal(&quot;1.2&quot;), NumberShortener.toPrecisionWithoutLoss(new BigDecimal(&quot;1.23456&quot;), 2, mode));\r\n        assertEquals(new BigDecimal(&quot;1.23&quot;), NumberShortener.toPrecisionWithoutLoss(new BigDecimal(&quot;1.23456&quot;), 3, mode));\r\n        assertEquals(new BigDecimal(&quot;1.234&quot;), NumberShortener.toPrecisionWithoutLoss(new BigDecimal(&quot;1.23456&quot;), 4, mode));\r\n        assertEquals(new BigDecimal(&quot;999&quot;).toPlainString(), NumberShortener.toPrecisionWithoutLoss(new BigDecimal(&quot;999&quot;), 4, mode).stripTrailingZeros()\r\n            .toPlainString());\r\n        assertEquals(new BigDecimal(&quot;999&quot;).toPlainString(), NumberShortener.toPrecisionWithoutLoss(new BigDecimal(&quot;999&quot;), 2, mode).stripTrailingZeros()\r\n            .toPlainString());\r\n        assertEquals(new BigDecimal(&quot;999&quot;).toPlainString(), NumberShortener.toPrecisionWithoutLoss(new BigDecimal(&quot;999.9&quot;), 2, mode).stripTrailingZeros()\r\n            .toPlainString());\r\n    \r\n        mode = RoundingMode.HALF_UP;\r\n        assertEquals(new BigDecimal(&quot;1&quot;), NumberShortener.toPrecisionWithoutLoss(new BigDecimal(&quot;1.23456&quot;), 1, mode));\r\n        assertEquals(new BigDecimal(&quot;1.2&quot;), NumberShortener.toPrecisionWithoutLoss(new BigDecimal(&quot;1.23456&quot;), 2, mode));\r\n        assertEquals(new BigDecimal(&quot;1.23&quot;), NumberShortener.toPrecisionWithoutLoss(new BigDecimal(&quot;1.23456&quot;), 3, mode));\r\n        assertEquals(new BigDecimal(&quot;1.235&quot;), NumberShortener.toPrecisionWithoutLoss(new BigDecimal(&quot;1.23456&quot;), 4, mode));\r\n        assertEquals(new BigDecimal(&quot;999&quot;).toPlainString(), NumberShortener.toPrecisionWithoutLoss(new BigDecimal(&quot;999&quot;), 4, mode).stripTrailingZeros()\r\n            .toPlainString());\r\n        assertEquals(new BigDecimal(&quot;999&quot;).toPlainString(), NumberShortener.toPrecisionWithoutLoss(new BigDecimal(&quot;999&quot;), 2, mode).stripTrailingZeros()\r\n            .toPlainString());\r\n        assertEquals(new BigDecimal(&quot;1000&quot;).toPlainString(), NumberShortener.toPrecisionWithoutLoss(new BigDecimal(&quot;999.9&quot;), 2, mode)\r\n            .stripTrailingZeros().toPlainString());\r\n      }\r\n    \r\n      @Test\r\n      public void testNumbersFromOP() {\r\n        for (int i = 0; i &lt; NUMBERS_FROM_OP.length; i++) {\r\n          assertEquals(&quot;Index &quot; + i + &quot;: &quot; + NUMBERS_FROM_OP[i], EXPECTED_FROM_OP[i],\r\n              NumberShortener.shortenedNumber(NUMBERS_FROM_OP[i], RoundingMode.DOWN));\r\n          assertEquals(&quot;Index &quot; + i + &quot;: &quot; + NUMBERS_FROM_OP[i], EXPECTED_FROM_OP_HALF_UP[i],\r\n              NumberShortener.shortenedNumber(NUMBERS_FROM_OP[i], RoundingMode.HALF_UP));\r\n        }\r\n      }\r\n    \r\n      @Test\r\n      public void testBorders() {\r\n        assertEquals(&quot;Zero: &quot; + 0, &quot;0&quot;, NumberShortener.shortenedNumber(0, RoundingMode.DOWN));\r\n        assertEquals(&quot;Zero: &quot; + 0, &quot;0&quot;, NumberShortener.shortenedNumber(0, RoundingMode.HALF_UP));\r\n        for (int i = 0; i &lt; NUMBERS_TO_TEST.length; i++) {\r\n          assertEquals(&quot;Index &quot; + i + &quot;: &quot; + NUMBERS_TO_TEST[i], EXPECTED_FROM_TEST[i],\r\n              NumberShortener.shortenedNumber(NUMBERS_TO_TEST[i], RoundingMode.DOWN));\r\n          assertEquals(&quot;Index &quot; + i + &quot;: &quot; + NUMBERS_TO_TEST[i], EXPECTED_FROM_TEST_HALF_UP[i],\r\n              NumberShortener.shortenedNumber(NUMBERS_TO_TEST[i], RoundingMode.HALF_UP));\r\n        }\r\n      }\r\n      \r\n      @Test\r\n      public void testNegativeBorders() {\r\n        for (int i = 0; i &lt; NUMBERS_TO_TEST.length; i++) {\r\n          assertEquals(&quot;Index &quot; + i + &quot;: -&quot; + NUMBERS_TO_TEST[i], &quot;-&quot; + EXPECTED_FROM_TEST[i],\r\n              NumberShortener.shortenedNumber(-NUMBERS_TO_TEST[i], RoundingMode.DOWN));\r\n          assertEquals(&quot;Index &quot; + i + &quot;: -&quot; + NUMBERS_TO_TEST[i], &quot;-&quot; + EXPECTED_FROM_TEST_HALF_UP[i],\r\n              NumberShortener.shortenedNumber(-NUMBERS_TO_TEST[i], RoundingMode.HALF_UP));\r\n        }\r\n      }\r\n    }\r\n\r\nFeel free to point out in the comments if I missed a significant test case or if expected values should be adjusted.","title":"How to go about formatting 1200 to 1.2k in java","body":"<p>Staying true to my comment that I'd value readability above performance, here's a version where it should be clear what's happening (assuming you've used <code>BigDecimal</code>s before) without excessive commenting (I believe in self-documenting code), without worrying about performance (since I can't picture a scenario where you'd want to do this so many millions of times that performance even becomes a consideration).</p>\n\n<p>This version:</p>\n\n<ul>\n<li>uses <code>BigDecimal</code>s for precision and to avoid rounding issues</li>\n<li>works for rounding down as requested by the OP</li>\n<li>works for other rounding modes, e.g. <code>HALF_UP</code> as in the tests</li>\n<li>allows you to adjust the precision (change <code>REQUIRED_PRECISION</code>)</li>\n<li>uses an <code>enum</code> to define the thresholds, i.e. could easily be adjusted to use KB/MB/GB/TB instead of k/m/b/t, etc., and could of course be extended beyond <code>TRILLION</code> if required</li>\n<li>comes with thorough unit tests, since the test cases in the question weren't testing the borders</li>\n<li>should work for zero and negative numbers</li>\n</ul>\n\n<p><strong>Threshold.java</strong>:</p>\n\n<pre><code>import java.math.BigDecimal;\n\npublic enum Threshold {\n  TRILLION(\"1000000000000\", 12, 't', null),\n  BILLION(\"1000000000\", 9, 'b', TRILLION),\n  MILLION(\"1000000\", 6, 'm', BILLION),\n  THOUSAND(\"1000\", 3, 'k', MILLION),\n  ZERO(\"0\", 0, null, THOUSAND);\n\n  private BigDecimal value;\n  private int zeroes;\n  protected Character suffix;\n  private Threshold higherThreshold;\n\n  private Threshold(String aValueString, int aNumberOfZeroes, Character aSuffix,\n      Threshold aThreshold) {\n    value = new BigDecimal(aValueString);\n    zeroes = aNumberOfZeroes;\n    suffix = aSuffix;\n    higherThreshold = aThreshold;\n  }\n\n  public static Threshold thresholdFor(long aValue) {\n    return thresholdFor(new BigDecimal(aValue));\n  }\n\n  public static Threshold thresholdFor(BigDecimal aValue) {\n    for (Threshold eachThreshold : Threshold.values()) {\n      if (eachThreshold.value.compareTo(aValue) &lt;= 0) {\n        return eachThreshold;\n      }\n    }\n    return TRILLION; // shouldn't be needed, but you might have to extend the enum\n  }\n\n  public int getNumberOfZeroes() {\n    return zeroes;\n  }\n\n  public String getSuffix() {\n    return suffix == null ? \"\" : \"\" + suffix;\n  }\n\n  public Threshold getHigherThreshold() {\n    return higherThreshold;\n  }\n}\n</code></pre>\n\n<p><strong>NumberShortener.java</strong>:</p>\n\n<pre><code>import java.math.BigDecimal;\nimport java.math.RoundingMode;\n\npublic class NumberShortener {\n\n  public static final int REQUIRED_PRECISION = 2;\n\n  public static BigDecimal toPrecisionWithoutLoss(BigDecimal aBigDecimal,\n      int aPrecision, RoundingMode aMode) {\n    int previousScale = aBigDecimal.scale();\n    int previousPrecision = aBigDecimal.precision();\n    int newPrecision = Math.max(previousPrecision - previousScale, aPrecision);\n    return aBigDecimal.setScale(previousScale + newPrecision - previousPrecision,\n        aMode);\n  }\n\n  private static BigDecimal scaledNumber(BigDecimal aNumber, RoundingMode aMode) {\n    Threshold threshold = Threshold.thresholdFor(aNumber);\n    BigDecimal adjustedNumber = aNumber.movePointLeft(threshold.getNumberOfZeroes());\n    BigDecimal scaledNumber = toPrecisionWithoutLoss(adjustedNumber, REQUIRED_PRECISION,\n        aMode).stripTrailingZeros();\n    // System.out.println(\"Number: &lt;\" + aNumber + \"&gt;, adjusted: &lt;\" + adjustedNumber\n    // + \"&gt;, rounded: &lt;\" + scaledNumber + \"&gt;\");\n    return scaledNumber;\n  }\n\n  public static String shortenedNumber(long aNumber, RoundingMode aMode) {\n    boolean isNegative = aNumber &lt; 0;\n    BigDecimal numberAsBigDecimal = new BigDecimal(isNegative ? -aNumber : aNumber);\n    Threshold threshold = Threshold.thresholdFor(numberAsBigDecimal);\n    BigDecimal scaledNumber = aNumber == 0 ? numberAsBigDecimal : scaledNumber(\n        numberAsBigDecimal, aMode);\n    if (scaledNumber.compareTo(new BigDecimal(\"1000\")) &gt;= 0) {\n      scaledNumber = scaledNumber(scaledNumber, aMode);\n      threshold = threshold.getHigherThreshold();\n    }\n    String sign = isNegative ? \"-\" : \"\";\n    String printNumber = sign + scaledNumber.stripTrailingZeros().toPlainString()\n        + threshold.getSuffix();\n    // System.out.println(\"Number: &lt;\" + sign + numberAsBigDecimal + \"&gt;, rounded: &lt;\"\n    // + sign + scaledNumber + \"&gt;, print: &lt;\" + printNumber + \"&gt;\");\n    return printNumber;\n  }\n}\n</code></pre>\n\n<p>(Uncomment the <code>println</code> statements or change to use your favourite logger to see what it's doing.)</p>\n\n<p>And finally, the tests in <strong>NumberShortenerTest</strong> (plain JUnit 4):</p>\n\n<pre><code>import static org.junit.Assert.*;\n\nimport java.math.BigDecimal;\nimport java.math.RoundingMode;\n\nimport org.junit.Test;\n\npublic class NumberShortenerTest {\n\n  private static final long[] NUMBERS_FROM_OP = new long[] { 1000, 5821, 10500, 101800, 2000000, 7800000, 92150000, 123200000 };\n  private static final String[] EXPECTED_FROM_OP = new String[] { \"1k\", \"5.8k\", \"10k\", \"101k\", \"2m\", \"7.8m\", \"92m\", \"123m\" };\n  private static final String[] EXPECTED_FROM_OP_HALF_UP = new String[] { \"1k\", \"5.8k\", \"11k\", \"102k\", \"2m\", \"7.8m\", \"92m\", \"123m\" };\n  private static final long[] NUMBERS_TO_TEST = new long[] { 1, 500, 999, 1000, 1001, 1009, 1049, 1050, 1099, 1100, 12345, 123456, 999999, 1000000,\n      1000099, 1000999, 1009999, 1099999, 1100000, 1234567, 999999999, 1000000000, 9123456789L, 123456789123L };\n  private static final String[] EXPECTED_FROM_TEST = new String[] { \"1\", \"500\", \"999\", \"1k\", \"1k\", \"1k\", \"1k\", \"1k\", \"1k\", \"1.1k\", \"12k\", \"123k\",\n      \"999k\", \"1m\", \"1m\", \"1m\", \"1m\", \"1m\", \"1.1m\", \"1.2m\", \"999m\", \"1b\", \"9.1b\", \"123b\" };\n  private static final String[] EXPECTED_FROM_TEST_HALF_UP = new String[] { \"1\", \"500\", \"999\", \"1k\", \"1k\", \"1k\", \"1k\", \"1.1k\", \"1.1k\", \"1.1k\", \"12k\",\n      \"123k\", \"1m\", \"1m\", \"1m\", \"1m\", \"1m\", \"1.1m\", \"1.1m\", \"1.2m\", \"1b\", \"1b\", \"9.1b\", \"123b\" };\n\n  @Test\n  public void testThresholdFor() {\n    assertEquals(Threshold.ZERO, Threshold.thresholdFor(1));\n    assertEquals(Threshold.ZERO, Threshold.thresholdFor(999));\n    assertEquals(Threshold.THOUSAND, Threshold.thresholdFor(1000));\n    assertEquals(Threshold.THOUSAND, Threshold.thresholdFor(1234));\n    assertEquals(Threshold.THOUSAND, Threshold.thresholdFor(9999));\n    assertEquals(Threshold.THOUSAND, Threshold.thresholdFor(999999));\n    assertEquals(Threshold.MILLION, Threshold.thresholdFor(1000000));\n  }\n\n  @Test\n  public void testToPrecision() {\n    RoundingMode mode = RoundingMode.DOWN;\n    assertEquals(new BigDecimal(\"1\"), NumberShortener.toPrecisionWithoutLoss(new BigDecimal(\"1.23456\"), 1, mode));\n    assertEquals(new BigDecimal(\"1.2\"), NumberShortener.toPrecisionWithoutLoss(new BigDecimal(\"1.23456\"), 2, mode));\n    assertEquals(new BigDecimal(\"1.23\"), NumberShortener.toPrecisionWithoutLoss(new BigDecimal(\"1.23456\"), 3, mode));\n    assertEquals(new BigDecimal(\"1.234\"), NumberShortener.toPrecisionWithoutLoss(new BigDecimal(\"1.23456\"), 4, mode));\n    assertEquals(new BigDecimal(\"999\").toPlainString(), NumberShortener.toPrecisionWithoutLoss(new BigDecimal(\"999\"), 4, mode).stripTrailingZeros()\n        .toPlainString());\n    assertEquals(new BigDecimal(\"999\").toPlainString(), NumberShortener.toPrecisionWithoutLoss(new BigDecimal(\"999\"), 2, mode).stripTrailingZeros()\n        .toPlainString());\n    assertEquals(new BigDecimal(\"999\").toPlainString(), NumberShortener.toPrecisionWithoutLoss(new BigDecimal(\"999.9\"), 2, mode).stripTrailingZeros()\n        .toPlainString());\n\n    mode = RoundingMode.HALF_UP;\n    assertEquals(new BigDecimal(\"1\"), NumberShortener.toPrecisionWithoutLoss(new BigDecimal(\"1.23456\"), 1, mode));\n    assertEquals(new BigDecimal(\"1.2\"), NumberShortener.toPrecisionWithoutLoss(new BigDecimal(\"1.23456\"), 2, mode));\n    assertEquals(new BigDecimal(\"1.23\"), NumberShortener.toPrecisionWithoutLoss(new BigDecimal(\"1.23456\"), 3, mode));\n    assertEquals(new BigDecimal(\"1.235\"), NumberShortener.toPrecisionWithoutLoss(new BigDecimal(\"1.23456\"), 4, mode));\n    assertEquals(new BigDecimal(\"999\").toPlainString(), NumberShortener.toPrecisionWithoutLoss(new BigDecimal(\"999\"), 4, mode).stripTrailingZeros()\n        .toPlainString());\n    assertEquals(new BigDecimal(\"999\").toPlainString(), NumberShortener.toPrecisionWithoutLoss(new BigDecimal(\"999\"), 2, mode).stripTrailingZeros()\n        .toPlainString());\n    assertEquals(new BigDecimal(\"1000\").toPlainString(), NumberShortener.toPrecisionWithoutLoss(new BigDecimal(\"999.9\"), 2, mode)\n        .stripTrailingZeros().toPlainString());\n  }\n\n  @Test\n  public void testNumbersFromOP() {\n    for (int i = 0; i &lt; NUMBERS_FROM_OP.length; i++) {\n      assertEquals(\"Index \" + i + \": \" + NUMBERS_FROM_OP[i], EXPECTED_FROM_OP[i],\n          NumberShortener.shortenedNumber(NUMBERS_FROM_OP[i], RoundingMode.DOWN));\n      assertEquals(\"Index \" + i + \": \" + NUMBERS_FROM_OP[i], EXPECTED_FROM_OP_HALF_UP[i],\n          NumberShortener.shortenedNumber(NUMBERS_FROM_OP[i], RoundingMode.HALF_UP));\n    }\n  }\n\n  @Test\n  public void testBorders() {\n    assertEquals(\"Zero: \" + 0, \"0\", NumberShortener.shortenedNumber(0, RoundingMode.DOWN));\n    assertEquals(\"Zero: \" + 0, \"0\", NumberShortener.shortenedNumber(0, RoundingMode.HALF_UP));\n    for (int i = 0; i &lt; NUMBERS_TO_TEST.length; i++) {\n      assertEquals(\"Index \" + i + \": \" + NUMBERS_TO_TEST[i], EXPECTED_FROM_TEST[i],\n          NumberShortener.shortenedNumber(NUMBERS_TO_TEST[i], RoundingMode.DOWN));\n      assertEquals(\"Index \" + i + \": \" + NUMBERS_TO_TEST[i], EXPECTED_FROM_TEST_HALF_UP[i],\n          NumberShortener.shortenedNumber(NUMBERS_TO_TEST[i], RoundingMode.HALF_UP));\n    }\n  }\n\n  @Test\n  public void testNegativeBorders() {\n    for (int i = 0; i &lt; NUMBERS_TO_TEST.length; i++) {\n      assertEquals(\"Index \" + i + \": -\" + NUMBERS_TO_TEST[i], \"-\" + EXPECTED_FROM_TEST[i],\n          NumberShortener.shortenedNumber(-NUMBERS_TO_TEST[i], RoundingMode.DOWN));\n      assertEquals(\"Index \" + i + \": -\" + NUMBERS_TO_TEST[i], \"-\" + EXPECTED_FROM_TEST_HALF_UP[i],\n          NumberShortener.shortenedNumber(-NUMBERS_TO_TEST[i], RoundingMode.HALF_UP));\n    }\n  }\n}\n</code></pre>\n\n<p>Feel free to point out in the comments if I missed a significant test case or if expected values should be adjusted.</p>\n"},{"tags":[],"owner":{"account_id":3838375,"reputation":10942,"user_id":3182188,"accept_rate":75,"display_name":"Raniz"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1443436466,"creation_date":1433992478,"answer_id":30770931,"question_id":4753251,"body_markdown":"Here&#39;s a short implementation without recursion and just a very small loop. Doesn&#39;t work with negative numbers but supports all positive `long`s up to `Long.MAX_VALUE`:\r\n\r\n    private static final char[] SUFFIXES = {&#39;k&#39;, &#39;m&#39;, &#39;g&#39;, &#39;t&#39;, &#39;p&#39;, &#39;e&#39; };\r\n\r\n    public static String format(long number) {\r\n        if(number &lt; 1000) {\r\n            // No need to format this\r\n            return String.valueOf(number);\r\n        }\r\n        // Convert to a string\r\n        final String string = String.valueOf(number);\r\n        // The suffix we&#39;re using, 1-based\r\n        final int magnitude = (string.length() - 1) / 3;\r\n        // The number of digits we must show before the prefix\r\n        final int digits = (string.length() - 1) % 3 + 1;\r\n\r\n        // Build the string\r\n        char[] value = new char[4];\r\n        for(int i = 0; i &lt; digits; i++) {\r\n            value[i] = string.charAt(i);\r\n        }\r\n        int valueLength = digits;\r\n        // Can and should we add a decimal point and an additional number?\r\n        if(digits == 1 &amp;&amp; string.charAt(1) != &#39;0&#39;) {\r\n            value[valueLength++] = &#39;.&#39;;\r\n            value[valueLength++] = string.charAt(1);\r\n        }\r\n        value[valueLength++] = SUFFIXES[magnitude - 1];\r\n        return new String(value, 0, valueLength);\r\n    }\r\n\r\nOutputs:\r\n\r\n&gt; 1k  \r\n&gt; 5.8k  \r\n&gt; 10k  \r\n&gt; 101k  \r\n&gt; 2m  \r\n&gt; 7.8m  \r\n&gt; 92m  \r\n&gt; 123m  \r\n&gt; 9.2e (this is `Long.MAX_VALUE`)\r\n\r\nI also did some really simple benchmarking (formatting 10 million random longs) and it&#39;s considerably faster than Elijah&#39;s implementation and slightly faster than assylias&#39; implementation.\r\n\r\n&gt; Mine: 1137.028 ms  \r\n&gt; Elijah&#39;s: 2664.396 ms  \r\n&gt; assylias&#39;: 1373.473 ms","title":"How to go about formatting 1200 to 1.2k in java","body":"<p>Here's a short implementation without recursion and just a very small loop. Doesn't work with negative numbers but supports all positive <code>long</code>s up to <code>Long.MAX_VALUE</code>:</p>\n\n<pre><code>private static final char[] SUFFIXES = {'k', 'm', 'g', 't', 'p', 'e' };\n\npublic static String format(long number) {\n    if(number &lt; 1000) {\n        // No need to format this\n        return String.valueOf(number);\n    }\n    // Convert to a string\n    final String string = String.valueOf(number);\n    // The suffix we're using, 1-based\n    final int magnitude = (string.length() - 1) / 3;\n    // The number of digits we must show before the prefix\n    final int digits = (string.length() - 1) % 3 + 1;\n\n    // Build the string\n    char[] value = new char[4];\n    for(int i = 0; i &lt; digits; i++) {\n        value[i] = string.charAt(i);\n    }\n    int valueLength = digits;\n    // Can and should we add a decimal point and an additional number?\n    if(digits == 1 &amp;&amp; string.charAt(1) != '0') {\n        value[valueLength++] = '.';\n        value[valueLength++] = string.charAt(1);\n    }\n    value[valueLength++] = SUFFIXES[magnitude - 1];\n    return new String(value, 0, valueLength);\n}\n</code></pre>\n\n<p>Outputs:</p>\n\n<blockquote>\n  <p>1k<br>\n  5.8k<br>\n  10k<br>\n  101k<br>\n  2m<br>\n  7.8m<br>\n  92m<br>\n  123m<br>\n  9.2e (this is <code>Long.MAX_VALUE</code>)</p>\n</blockquote>\n\n<p>I also did some really simple benchmarking (formatting 10 million random longs) and it's considerably faster than Elijah's implementation and slightly faster than assylias' implementation.</p>\n\n<blockquote>\n  <p>Mine: 1137.028 ms<br>\n  Elijah's: 2664.396 ms<br>\n  assylias': 1373.473 ms</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":8291,"reputation":860447,"user_id":14860,"accept_rate":100,"display_name":"paxdiablo"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1523238146,"creation_date":1433995049,"answer_id":30771311,"question_id":4753251,"body_markdown":"The following code shows how you can do this with easy expansion in mind.\r\n\r\nThe &quot;magic&quot; lies mostly in the `makeDecimal` function which, for the correct values passed in, guarantees you will never have more than four characters in the output.\r\n\r\nIt first extracts the whole and tenths portions for a given divisor so, for example, `12,345,678` with a divisor of `1,000,000` will give a `whole` value of `12` and a `tenths` value of `3`.\r\n\r\nFrom that, it can decide whether it outputs just the whole part or both the whole and tenths part, using the rules:\r\n\r\n  - If tenths part is zero, just output whole part and suffix.\r\n  - If whole part is greater than nine, just output whole part and suffix.\r\n  - Otherwise, output whole part, tenths part and suffix.\r\n\r\nThe code for that follows:\r\n\r\n    static private String makeDecimal(long val, long div, String sfx) {\r\n        val = val / (div / 10);\r\n        long whole = val / 10;\r\n        long tenths = val % 10;\r\n        if ((tenths == 0) || (whole &gt;= 10))\r\n            return String.format(&quot;%d%s&quot;, whole, sfx);\r\n        return String.format(&quot;%d.%d%s&quot;, whole, tenths, sfx);\r\n    }\r\n\r\nThen, it&#39;s a simple matter of calling that helper function with the correct values, including some constants to make life easier for the developer:\r\n    \t\r\n    static final long THOU =                1000L;\r\n    static final long MILL =             1000000L;\r\n    static final long BILL =          1000000000L;\r\n    static final long TRIL =       1000000000000L;\r\n    static final long QUAD =    1000000000000000L;\r\n    static final long QUIN = 1000000000000000000L;\r\n\r\n    static private String Xlat(long val) {\r\n        if (val &lt; THOU) return Long.toString(val);\r\n        if (val &lt; MILL) return makeDecimal(val, THOU, &quot;k&quot;);\r\n        if (val &lt; BILL) return makeDecimal(val, MILL, &quot;m&quot;);\r\n        if (val &lt; TRIL) return makeDecimal(val, BILL, &quot;b&quot;);\r\n        if (val &lt; QUAD) return makeDecimal(val, TRIL, &quot;t&quot;);\r\n        if (val &lt; QUIN) return makeDecimal(val, QUAD, &quot;q&quot;);\r\n        return makeDecimal(val, QUIN, &quot;u&quot;);\r\n    }\r\n\r\nThe fact that the `makeDecimal` function does the grunt work means that expanding beyond `999,999,999` is just a matter of adding an extra line to `Xlat`, so easy that I&#39;ve done it for you.\r\n\r\nThe final `return` in `Xlat` doesn&#39;t need a conditional since the largest value you can hold in a 64-bit signed long is only about 9.2 quintillion.\r\n\r\nBut if, by some bizarre requirement, Oracle decides to add a 128-bit `longer` type or a 1024-bit `damn_long` type, you&#39;ll be ready for it :-)\r\n\r\n---\r\n\r\nAnd, finally, a little test harness you can use for validating the functionality.\r\n\r\n    public static void main(String[] args) {\r\n        long vals[] = {\r\n            999L, 1000L, 5821L, 10500L, 101800L, 2000000L,\r\n            7800000L, 92150000L, 123200000L, 999999999L,\r\n            1000000000L, 1100000000L, 999999999999L,\r\n            1000000000000L, 999999999999999L,\r\n            1000000000000000L, 9223372036854775807L\r\n        };\r\n        for (long val: vals)\r\n            System.out.println (&quot;&quot; + val + &quot; -&gt; &quot; + Xlat(val));\r\n        }\r\n    }\r\n\r\nYou can see from the output that it gives you what you need:\r\n\r\n    999 -&gt; 999\r\n    1000 -&gt; 1k\r\n    5821 -&gt; 5.8k\r\n    10500 -&gt; 10k\r\n    101800 -&gt; 101k\r\n    2000000 -&gt; 2m\r\n    7800000 -&gt; 7.8m\r\n    92150000 -&gt; 92m\r\n    123200000 -&gt; 123m\r\n    999999999 -&gt; 999m\r\n    1000000000 -&gt; 1b\r\n    1100000000 -&gt; 1.1b\r\n    999999999999 -&gt; 999b\r\n    1000000000000 -&gt; 1t\r\n    999999999999999 -&gt; 999t\r\n    1000000000000000 -&gt; 1q\r\n    9223372036854775807 -&gt; 9.2u\r\n\r\n---\r\n\r\n&gt; And, as an aside, be aware that passing in a negative number to this function will result in a string too long for your requirements, since it follows the `&lt; THOU` path). I figured that was okay since you only mention non-negative values in the question.\r\n","title":"How to go about formatting 1200 to 1.2k in java","body":"<p>The following code shows how you can do this with easy expansion in mind.</p>\n\n<p>The \"magic\" lies mostly in the <code>makeDecimal</code> function which, for the correct values passed in, guarantees you will never have more than four characters in the output.</p>\n\n<p>It first extracts the whole and tenths portions for a given divisor so, for example, <code>12,345,678</code> with a divisor of <code>1,000,000</code> will give a <code>whole</code> value of <code>12</code> and a <code>tenths</code> value of <code>3</code>.</p>\n\n<p>From that, it can decide whether it outputs just the whole part or both the whole and tenths part, using the rules:</p>\n\n<ul>\n<li>If tenths part is zero, just output whole part and suffix.</li>\n<li>If whole part is greater than nine, just output whole part and suffix.</li>\n<li>Otherwise, output whole part, tenths part and suffix.</li>\n</ul>\n\n<p>The code for that follows:</p>\n\n<pre><code>static private String makeDecimal(long val, long div, String sfx) {\n    val = val / (div / 10);\n    long whole = val / 10;\n    long tenths = val % 10;\n    if ((tenths == 0) || (whole &gt;= 10))\n        return String.format(\"%d%s\", whole, sfx);\n    return String.format(\"%d.%d%s\", whole, tenths, sfx);\n}\n</code></pre>\n\n<p>Then, it's a simple matter of calling that helper function with the correct values, including some constants to make life easier for the developer:</p>\n\n<pre><code>static final long THOU =                1000L;\nstatic final long MILL =             1000000L;\nstatic final long BILL =          1000000000L;\nstatic final long TRIL =       1000000000000L;\nstatic final long QUAD =    1000000000000000L;\nstatic final long QUIN = 1000000000000000000L;\n\nstatic private String Xlat(long val) {\n    if (val &lt; THOU) return Long.toString(val);\n    if (val &lt; MILL) return makeDecimal(val, THOU, \"k\");\n    if (val &lt; BILL) return makeDecimal(val, MILL, \"m\");\n    if (val &lt; TRIL) return makeDecimal(val, BILL, \"b\");\n    if (val &lt; QUAD) return makeDecimal(val, TRIL, \"t\");\n    if (val &lt; QUIN) return makeDecimal(val, QUAD, \"q\");\n    return makeDecimal(val, QUIN, \"u\");\n}\n</code></pre>\n\n<p>The fact that the <code>makeDecimal</code> function does the grunt work means that expanding beyond <code>999,999,999</code> is just a matter of adding an extra line to <code>Xlat</code>, so easy that I've done it for you.</p>\n\n<p>The final <code>return</code> in <code>Xlat</code> doesn't need a conditional since the largest value you can hold in a 64-bit signed long is only about 9.2 quintillion.</p>\n\n<p>But if, by some bizarre requirement, Oracle decides to add a 128-bit <code>longer</code> type or a 1024-bit <code>damn_long</code> type, you'll be ready for it :-)</p>\n\n<hr>\n\n<p>And, finally, a little test harness you can use for validating the functionality.</p>\n\n<pre><code>public static void main(String[] args) {\n    long vals[] = {\n        999L, 1000L, 5821L, 10500L, 101800L, 2000000L,\n        7800000L, 92150000L, 123200000L, 999999999L,\n        1000000000L, 1100000000L, 999999999999L,\n        1000000000000L, 999999999999999L,\n        1000000000000000L, 9223372036854775807L\n    };\n    for (long val: vals)\n        System.out.println (\"\" + val + \" -&gt; \" + Xlat(val));\n    }\n}\n</code></pre>\n\n<p>You can see from the output that it gives you what you need:</p>\n\n<pre><code>999 -&gt; 999\n1000 -&gt; 1k\n5821 -&gt; 5.8k\n10500 -&gt; 10k\n101800 -&gt; 101k\n2000000 -&gt; 2m\n7800000 -&gt; 7.8m\n92150000 -&gt; 92m\n123200000 -&gt; 123m\n999999999 -&gt; 999m\n1000000000 -&gt; 1b\n1100000000 -&gt; 1.1b\n999999999999 -&gt; 999b\n1000000000000 -&gt; 1t\n999999999999999 -&gt; 999t\n1000000000000000 -&gt; 1q\n9223372036854775807 -&gt; 9.2u\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>And, as an aside, be aware that passing in a negative number to this function will result in a string too long for your requirements, since it follows the <code>&lt; THOU</code> path). I figured that was okay since you only mention non-negative values in the question.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":132488,"reputation":4390,"user_id":333214,"accept_rate":86,"display_name":"KimKha"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1441032802,"creation_date":1441031854,"answer_id":32313833,"question_id":4753251,"body_markdown":"This code snippet just deadly simple, and clean code, and totally works:\r\n\r\n    private static char[] c = new char[]{&#39;K&#39;, &#39;M&#39;, &#39;B&#39;, &#39;T&#39;};\r\n    private String formatK(double n, int iteration) {\r\n        if (n &lt; 1000) {\r\n            // print 999 or 999K\r\n            if (iteration &lt;= 0) {\r\n                return String.valueOf((long) n);\r\n            } else {\r\n                return String.format(&quot;%d%s&quot;, Math.round(n), c[iteration-1]);\r\n            }\r\n        } else if (n &lt; 10000) {\r\n            // Print 9.9K\r\n            return String.format(&quot;%.1f%s&quot;, n/1000, c[iteration]);\r\n        } else {\r\n            // Increase 1 iteration\r\n            return formatK(Math.round(n/1000), iteration+1);\r\n        }\r\n    }","title":"How to go about formatting 1200 to 1.2k in java","body":"<p>This code snippet just deadly simple, and clean code, and totally works:</p>\n\n<pre><code>private static char[] c = new char[]{'K', 'M', 'B', 'T'};\nprivate String formatK(double n, int iteration) {\n    if (n &lt; 1000) {\n        // print 999 or 999K\n        if (iteration &lt;= 0) {\n            return String.valueOf((long) n);\n        } else {\n            return String.format(\"%d%s\", Math.round(n), c[iteration-1]);\n        }\n    } else if (n &lt; 10000) {\n        // Print 9.9K\n        return String.format(\"%.1f%s\", n/1000, c[iteration]);\n    } else {\n        // Increase 1 iteration\n        return formatK(Math.round(n/1000), iteration+1);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1636849,"reputation":81,"user_id":1510111,"display_name":"Chris"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1466110933,"creation_date":1466110933,"answer_id":37869288,"question_id":4753251,"body_markdown":"For anyone that wants to round. This is a great, easy to read solution, that takes advantage of the Java.Lang.Math library\r\n\r\n     public static String formatNumberExample(Number number) {\r\n            char[] suffix = {&#39; &#39;, &#39;k&#39;, &#39;M&#39;, &#39;B&#39;, &#39;T&#39;, &#39;P&#39;, &#39;E&#39;};\r\n            long numValue = number.longValue();\r\n            int value = (int) Math.floor(Math.log10(numValue));\r\n            int base = value / 3;\r\n            if (value &gt;= 3 &amp;&amp; base &lt; suffix.length) {\r\n                return new DecimalFormat(&quot;~#0.0&quot;).format(numValue / Math.pow(10, base * 3)) + suffix[base];\r\n            } else {\r\n                return new DecimalFormat(&quot;#,##0&quot;).format(numValue);\r\n            }\r\n        }","title":"How to go about formatting 1200 to 1.2k in java","body":"<p>For anyone that wants to round. This is a great, easy to read solution, that takes advantage of the Java.Lang.Math library</p>\n\n<pre><code> public static String formatNumberExample(Number number) {\n        char[] suffix = {' ', 'k', 'M', 'B', 'T', 'P', 'E'};\n        long numValue = number.longValue();\n        int value = (int) Math.floor(Math.log10(numValue));\n        int base = value / 3;\n        if (value &gt;= 3 &amp;&amp; base &lt; suffix.length) {\n            return new DecimalFormat(\"~#0.0\").format(numValue / Math.pow(10, base * 3)) + suffix[base];\n        } else {\n            return new DecimalFormat(\"#,##0\").format(numValue);\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3859809,"reputation":647,"user_id":3197818,"accept_rate":67,"display_name":"AzizAhmad"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1479937634,"creation_date":1479937634,"answer_id":40774675,"question_id":4753251,"body_markdown":"try this :\r\n\r\n    public String Format(Integer number){\r\n        String[] suffix = new String[]{&quot;k&quot;,&quot;m&quot;,&quot;b&quot;,&quot;t&quot;};\r\n        int size = (number.intValue() != 0) ? (int) Math.log10(number) : 0;\r\n        if (size &gt;= 3){\r\n            while (size % 3 != 0) {\r\n                size = size - 1;\r\n            }\r\n        }\r\n        double notation = Math.pow(10, size);\r\n        String result = (size &gt;= 3) ? + (Math.round((number / notation) * 100) / 100.0d)+suffix[(size/3) - 1] : + number + &quot;&quot;;\r\n        return result\r\n    }","title":"How to go about formatting 1200 to 1.2k in java","body":"<p>try this :</p>\n\n<pre><code>public String Format(Integer number){\n    String[] suffix = new String[]{\"k\",\"m\",\"b\",\"t\"};\n    int size = (number.intValue() != 0) ? (int) Math.log10(number) : 0;\n    if (size &gt;= 3){\n        while (size % 3 != 0) {\n            size = size - 1;\n        }\n    }\n    double notation = Math.pow(10, size);\n    String result = (size &gt;= 3) ? + (Math.round((number / notation) * 100) / 100.0d)+suffix[(size/3) - 1] : + number + \"\";\n    return result\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7022638,"reputation":58830,"user_id":5381331,"accept_rate":60,"display_name":"Linh"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1539324726,"creation_date":1539324726,"answer_id":52773332,"question_id":4753251,"body_markdown":"My function for convert big number to small number (with 2 digits). You can change the number of digits by change `#.##` in `DecimalFormat`\r\n\r\n    public String formatValue(float value) {\r\n        String arr[] = {&quot;&quot;, &quot;K&quot;, &quot;M&quot;, &quot;B&quot;, &quot;T&quot;, &quot;P&quot;, &quot;E&quot;};\r\n        int index = 0;\r\n        while ((value / 1000) &gt;= 1) {\r\n            value = value / 1000;\r\n            index++;\r\n        }\r\n        DecimalFormat decimalFormat = new DecimalFormat(&quot;#.##&quot;);\r\n        return String.format(&quot;%s %s&quot;, decimalFormat.format(value), arr[index]);\r\n    }\r\n\r\n**Testing**\r\n\r\n    System.out.println(formatValue(100));     //  100\r\n    System.out.println(formatValue(1000));    // 1 K\r\n    System.out.println(formatValue(10345));   // 10.35 K\r\n    System.out.println(formatValue(10012));   // 10.01 K\r\n    System.out.println(formatValue(123456));  // 123.46 K\r\n    System.out.println(formatValue(4384324)); // 4.38 M\r\n    System.out.println(formatValue(10000000)); // 10 M\r\n    System.out.println(formatValue(Long.MAX_VALUE)); // 9.22 E\r\n\r\nHope it help","title":"How to go about formatting 1200 to 1.2k in java","body":"<p>My function for convert big number to small number (with 2 digits). You can change the number of digits by change <code>#.##</code> in <code>DecimalFormat</code></p>\n\n<pre><code>public String formatValue(float value) {\n    String arr[] = {\"\", \"K\", \"M\", \"B\", \"T\", \"P\", \"E\"};\n    int index = 0;\n    while ((value / 1000) &gt;= 1) {\n        value = value / 1000;\n        index++;\n    }\n    DecimalFormat decimalFormat = new DecimalFormat(\"#.##\");\n    return String.format(\"%s %s\", decimalFormat.format(value), arr[index]);\n}\n</code></pre>\n\n<p><strong>Testing</strong></p>\n\n<pre><code>System.out.println(formatValue(100));     //  100\nSystem.out.println(formatValue(1000));    // 1 K\nSystem.out.println(formatValue(10345));   // 10.35 K\nSystem.out.println(formatValue(10012));   // 10.01 K\nSystem.out.println(formatValue(123456));  // 123.46 K\nSystem.out.println(formatValue(4384324)); // 4.38 M\nSystem.out.println(formatValue(10000000)); // 10 M\nSystem.out.println(formatValue(Long.MAX_VALUE)); // 9.22 E\n</code></pre>\n\n<p>Hope it help</p>\n"},{"tags":[],"owner":{"account_id":7360311,"reputation":61,"user_id":10613519,"display_name":"Ebrahim sadeghi"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1541513491,"creation_date":1541513491,"answer_id":53173623,"question_id":4753251,"body_markdown":"this is my code. clean and simple .\r\n\r\n    public static String getRoughNumber(long value) {\r\n        if (value &lt;= 999) {\r\n            return String.valueOf(value);\r\n        }\r\n\r\n        final String[] units = new String[]{&quot;&quot;, &quot;K&quot;, &quot;M&quot;, &quot;B&quot;, &quot;P&quot;};\r\n        int digitGroups = (int) (Math.log10(value) / Math.log10(1000));\r\n        return new DecimalFormat(&quot;#,##0.#&quot;).format(value / Math.pow(1000, digitGroups)) + &quot;&quot; + units[digitGroups];\r\n\r\n    }","title":"How to go about formatting 1200 to 1.2k in java","body":"<p>this is my code. clean and simple .</p>\n\n<pre><code>public static String getRoughNumber(long value) {\n    if (value &lt;= 999) {\n        return String.valueOf(value);\n    }\n\n    final String[] units = new String[]{\"\", \"K\", \"M\", \"B\", \"P\"};\n    int digitGroups = (int) (Math.log10(value) / Math.log10(1000));\n    return new DecimalFormat(\"#,##0.#\").format(value / Math.pow(1000, digitGroups)) + \"\" + units[digitGroups];\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1585317533,"creation_date":1547038817,"answer_id":54110758,"question_id":4753251,"body_markdown":"With **Java-12 +**, you can use [`NumberFormat.getCompactNumberInstance `](https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/text/NumberFormat.html#getCompactNumberInstance(java.util.Locale,java.text.NumberFormat.Style)) to format the numbers. You can create a `NumberFormat` first as\r\n\r\n    NumberFormat fmt = NumberFormat.getCompactNumberInstance(Locale.US, NumberFormat.Style.SHORT);\r\n\r\nand then use it to `format`:\r\n\r\n&gt;     fmt.format(1000)\r\n&gt;     $5 ==&gt; &quot;1K&quot;\r\n&gt; \r\n&gt;     fmt.format(10000000)\r\n&gt;     $9 ==&gt; &quot;10M&quot;\r\n&gt; \r\n&gt;     fmt.format(1000000000)\r\n&gt;     $11 ==&gt; &quot;1B&quot;\r\n\r\n","title":"How to go about formatting 1200 to 1.2k in java","body":"<p>With <strong>Java-12 +</strong>, you can use <a href=\"https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/text/NumberFormat.html#getCompactNumberInstance(java.util.Locale,java.text.NumberFormat.Style)\" rel=\"noreferrer\"><code>NumberFormat.getCompactNumberInstance</code></a> to format the numbers. You can create a <code>NumberFormat</code> first as</p>\n\n<pre><code>NumberFormat fmt = NumberFormat.getCompactNumberInstance(Locale.US, NumberFormat.Style.SHORT);\n</code></pre>\n\n<p>and then use it to <code>format</code>:</p>\n\n<blockquote>\n<pre><code>fmt.format(1000)\n$5 ==&gt; \"1K\"\n\nfmt.format(10000000)\n$9 ==&gt; \"10M\"\n\nfmt.format(1000000000)\n$11 ==&gt; \"1B\"\n</code></pre>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":15214588,"reputation":325,"user_id":10978300,"display_name":"Ankit Singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1550746420,"creation_date":1550743884,"answer_id":54804461,"question_id":4753251,"body_markdown":"    public class NumberToReadableWordFormat {\r\n\r\n\t    public static void main(String[] args) {\r\n\t\t    Integer[] numbers = new Integer[]{1000, 5821, 10500, 101800, 2000000, 7800000, 92150000, 123200000, 9999999,999};\r\n\t\t    for(int n : numbers) {\r\n\t\t        System.out.println(n + &quot; =&gt; &quot; + coolFormat(n));\r\n\t\t    }\r\n        }\r\n\r\n\t    private static String[] c = new String[]{&quot;K&quot;, &quot;L&quot;, &quot;Cr&quot;};\r\n\t    private static String coolFormat(int n) {\r\n\t\t\tint size = String.valueOf(n).length();\r\n\t\t\tif (size&gt;=4 &amp;&amp; size&lt;6) {\r\n\t\t\t\t\tint value = (int) Math.pow(10, 1);\r\n\t\t\t\t\tdouble d = (double) Math.round(n/1000.0 * value) / value;\r\n\t\t\t\t\treturn (double) Math.round(n/1000.0 * value) / value+&quot; &quot;+c[0];\r\n\t\t\t} else if(size&gt;5 &amp;&amp; size&lt;8) {\r\n\t\t\t\t\tint value = (int) Math.pow(10, 1);\r\n\t\t\t\t\treturn (double) Math.round(n/100000.0 * value) / value+&quot; &quot;+c[1];\r\n\t\t\t} else if(size&gt;=8) {\r\n\t\t\t\t\tint value = (int) Math.pow(10, 1);\r\n\t\t\t\t\treturn (double) Math.round(n/10000000.0 * value) / value+&quot; &quot;+c[2];\r\n\t\t\t} else {\r\n\t\t\t\treturn n+&quot;&quot;;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nOutput:\r\n\r\n    1000 =&gt; 1.0 K\r\n    \r\n    5821 =&gt; 5.8 K\r\n    \r\n    10500 =&gt; 10.5 K\r\n    \r\n    101800 =&gt; 1.0 L\r\n    \r\n    2000000 =&gt; 20.0 L\r\n    \r\n    7800000 =&gt; 78.0 L\r\n    \r\n    92150000 =&gt; 9.2 Cr\r\n    \r\n    123200000 =&gt; 12.3 Cr\r\n    \r\n    9999999 =&gt; 100.0 L\r\n    \r\n    999 =&gt; 999","title":"How to go about formatting 1200 to 1.2k in java","body":"<pre><code>public class NumberToReadableWordFormat {\n\n    public static void main(String[] args) {\n        Integer[] numbers = new Integer[]{1000, 5821, 10500, 101800, 2000000, 7800000, 92150000, 123200000, 9999999,999};\n        for(int n : numbers) {\n            System.out.println(n + \" =&gt; \" + coolFormat(n));\n        }\n    }\n\n    private static String[] c = new String[]{\"K\", \"L\", \"Cr\"};\n    private static String coolFormat(int n) {\n        int size = String.valueOf(n).length();\n        if (size&gt;=4 &amp;&amp; size&lt;6) {\n                int value = (int) Math.pow(10, 1);\n                double d = (double) Math.round(n/1000.0 * value) / value;\n                return (double) Math.round(n/1000.0 * value) / value+\" \"+c[0];\n        } else if(size&gt;5 &amp;&amp; size&lt;8) {\n                int value = (int) Math.pow(10, 1);\n                return (double) Math.round(n/100000.0 * value) / value+\" \"+c[1];\n        } else if(size&gt;=8) {\n                int value = (int) Math.pow(10, 1);\n                return (double) Math.round(n/10000000.0 * value) / value+\" \"+c[2];\n        } else {\n            return n+\"\";\n        }\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1000 =&gt; 1.0 K\n\n5821 =&gt; 5.8 K\n\n10500 =&gt; 10.5 K\n\n101800 =&gt; 1.0 L\n\n2000000 =&gt; 20.0 L\n\n7800000 =&gt; 78.0 L\n\n92150000 =&gt; 9.2 Cr\n\n123200000 =&gt; 12.3 Cr\n\n9999999 =&gt; 100.0 L\n\n999 =&gt; 999\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10122987,"reputation":541,"user_id":7479307,"display_name":"Sunil Sunny"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1599756352,"creation_date":1599756352,"answer_id":63834196,"question_id":4753251,"body_markdown":"Here is a another simple solution for your problem.\r\nlet say \r\n\r\n    String abbr=&quot;M,K,T,B&quot;;\r\ndouble yvalue=some random number;\r\nString string =&quot;#.##&quot; //decimal places whatever you want\r\n\r\n\r\n\r\n    public  String format(Double yvalue, String string,String abbr) {\r\n\t\tDecimalFormat df = new DecimalFormat(getnumberformatpattern(string));\r\n\t\t  if (yvalue &lt; 0) return &quot;-&quot; + format(-yvalue,string,abbr);\r\n\t\t\t  double finalvalue= yvalue;\r\n\t\t\t  String newnumber=&quot;&quot;;\r\n\t\t\t  \r\n\t\t\t\t\tif (abbr.indexOf(&quot;K&quot;)&gt;0){\t\r\n\t\t\t\t\t\tfinalvalue= (yvalue / 1e3);\r\n\t\t\t\t\t\tnewnumber=df.format(finalvalue) +&#39;K&#39;;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (abbr.indexOf(&quot;M&quot;)&gt;0 ){\r\n\t\t\t\t\tif(yvalue&gt;=1e6){\r\n\t\t\t\t\t\tfinalvalue= (yvalue / 1e6);\r\n\t\t\t\t\t\tnewnumber=df.format(finalvalue) +&#39;M&#39;;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t \tif (abbr.indexOf(&quot;B&quot;)&gt;0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\tif((newnumber.indexOf(&quot;M&quot;)&lt;0) || yvalue&gt;=1e9){\r\n\t\t\t\t\t\tfinalvalue= (yvalue / 1e9);\r\n\t\t\t\t\t\tnewnumber=df.format(finalvalue) +&#39;B&#39;;\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (abbr.indexOf(&quot;T&quot;)&gt;0 ){ \r\n\t\t\t\t\tif((newnumber.indexOf(&quot;B&quot;)&lt;0) || yvalue&gt;=1e12){\r\n\t\t\t\t\t\tfinalvalue= (yvalue / 1e12);\r\n\t\t\t\t\t\tnewnumber=df.format(finalvalue) +&#39;T&#39;;\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn newnumber;\r\n\t\t}\r\n","title":"How to go about formatting 1200 to 1.2k in java","body":"<p>Here is a another simple solution for your problem.\nlet say</p>\n<pre><code>String abbr=&quot;M,K,T,B&quot;;\n</code></pre>\n<p>double yvalue=some random number;\nString string =&quot;#.##&quot; //decimal places whatever you want</p>\n<pre><code>public  String format(Double yvalue, String string,String abbr) {\n    DecimalFormat df = new DecimalFormat(getnumberformatpattern(string));\n      if (yvalue &lt; 0) return &quot;-&quot; + format(-yvalue,string,abbr);\n          double finalvalue= yvalue;\n          String newnumber=&quot;&quot;;\n          \n                if (abbr.indexOf(&quot;K&quot;)&gt;0){   \n                    finalvalue= (yvalue / 1e3);\n                    newnumber=df.format(finalvalue) +'K';\n                }\n                if (abbr.indexOf(&quot;M&quot;)&gt;0 ){\n                if(yvalue&gt;=1e6){\n                    finalvalue= (yvalue / 1e6);\n                    newnumber=df.format(finalvalue) +'M';\n                    };\n                }\n                if (abbr.indexOf(&quot;B&quot;)&gt;0 )\n                {\n                if((newnumber.indexOf(&quot;M&quot;)&lt;0) || yvalue&gt;=1e9){\n                    finalvalue= (yvalue / 1e9);\n                    newnumber=df.format(finalvalue) +'B';                   }\n                }\n                if (abbr.indexOf(&quot;T&quot;)&gt;0 ){ \n                if((newnumber.indexOf(&quot;B&quot;)&lt;0) || yvalue&gt;=1e12){\n                    finalvalue= (yvalue / 1e12);\n                    newnumber=df.format(finalvalue) +'T';                   }\n                }\n                return newnumber;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8736919,"reputation":129,"user_id":6535239,"display_name":"Elegant.Obj"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1620817100,"creation_date":1620757835,"answer_id":67492472,"question_id":4753251,"body_markdown":"There is a solution on the Maven Central\r\n```\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;com.github.bogdanovmn.humanreadablevalues&lt;/groupId&gt;\r\n  &lt;artifactId&gt;human-readable-values&lt;/artifactId&gt;\r\n  &lt;version&gt;1.0.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nYou can just get values for amount of bytes or seconds. Also you can create you own factorization class.\r\n\r\n**Docs**\r\nhttps://github.com/bogdanovmn/java-human-readable-values\r\n\r\n**Seconds example**\r\n```\r\nassertEquals(\r\n\t&quot;2h 46m 40s&quot;,\r\n\tnew SecondsValue(10000).fullString()\r\n);\r\n\r\nassertEquals(\r\n\t&quot;2.8h&quot;,\r\n\tnew SecondsValue(10000).shortString()\r\n);\r\n```\r\n\r\n**Bytes example**\r\n```\r\nassertEquals(\r\n\t&quot;9K 784b&quot;,\r\n\tnew BytesValue(10000).fullString()\r\n);\r\n\r\nassertEquals(\r\n\t&quot;9.8K&quot;,\r\n\tnew BytesValue(10000).shortString()\r\n);\r\n```","title":"How to go about formatting 1200 to 1.2k in java","body":"<p>There is a solution on the Maven Central</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.github.bogdanovmn.humanreadablevalues&lt;/groupId&gt;\n  &lt;artifactId&gt;human-readable-values&lt;/artifactId&gt;\n  &lt;version&gt;1.0.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>You can just get values for amount of bytes or seconds. Also you can create you own factorization class.</p>\n<p><strong>Docs</strong>\n<a href=\"https://github.com/bogdanovmn/java-human-readable-values\" rel=\"nofollow noreferrer\">https://github.com/bogdanovmn/java-human-readable-values</a></p>\n<p><strong>Seconds example</strong></p>\n<pre><code>assertEquals(\n    &quot;2h 46m 40s&quot;,\n    new SecondsValue(10000).fullString()\n);\n\nassertEquals(\n    &quot;2.8h&quot;,\n    new SecondsValue(10000).shortString()\n);\n</code></pre>\n<p><strong>Bytes example</strong></p>\n<pre><code>assertEquals(\n    &quot;9K 784b&quot;,\n    new BytesValue(10000).fullString()\n);\n\nassertEquals(\n    &quot;9.8K&quot;,\n    new BytesValue(10000).shortString()\n);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13279731,"reputation":105,"user_id":9587830,"display_name":"adam"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1628440733,"creation_date":1628440733,"answer_id":68702786,"question_id":4753251,"body_markdown":"Set the divisor according to the the input number: 1000, 100000, 1000000, 1000000000 etc...\r\n\r\ncheck the whole part(first part without fraction) of the number if its size is 1 then cast the input to long + String. \r\nif the size is &gt;= 2 then divide the input and use DecimalFormat to show fractional part as desired.\r\n\r\nyou can use // .setRoundingMode(RoundingMode.DOWN) to deal with rounding\r\n\r\n```\r\npublic static String format(long num) {\r\n\r\n\t\tString suffix = &quot;&quot;, result;\r\n\t\tdouble divisor = 0;\r\n\r\n\t\tDecimalFormat df = new DecimalFormat(&quot;##&quot;);\r\n\t\tDecimalFormat ds = new DecimalFormat(&quot;##.#&quot;);\r\n\t\t// ds.setRoundingMode(RoundingMode.DOWN);\r\n\r\n\t\tif ( num &gt;= 1000  &amp;&amp; num &lt; 1000000 ) {\r\n\t\t\tdivisor = 1000;\r\n\t\t\tsuffix = &quot;K&quot;;\r\n\t\t} else if ( num &gt;= 1000000 &amp;&amp; num &lt; 1000000000 ) {\r\n\t\t\tdivisor = 1000000;\r\n\t\t\tsuffix = &quot;M&quot;;\r\n\t\t} else if (num &gt;= 1000000000) {\r\n\t\t\tdivisor = 1000000000;\r\n\t\t\tsuffix = &quot;B&quot;;\r\n\t\t} else {\r\n\t\t\tSystem.out.print(&quot;The number is Too big &gt; T or TOO small &lt; K&quot;);\r\n\t\t}\r\n\r\n\t\tint numlengt = df.format(num / divisor).length();\r\n\r\n\t\tif (numlengt &gt;= 2) {\r\n\t\t\tresult = (long) (num / divisor) + suffix;\r\n\t\t} else {\r\n\t\t\tresult = ds.format(num / divisor) + suffix;\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n```","title":"How to go about formatting 1200 to 1.2k in java","body":"<p>Set the divisor according to the the input number: 1000, 100000, 1000000, 1000000000 etc...</p>\n<p>check the whole part(first part without fraction) of the number if its size is 1 then cast the input to long + String.\nif the size is &gt;= 2 then divide the input and use DecimalFormat to show fractional part as desired.</p>\n<p>you can use // .setRoundingMode(RoundingMode.DOWN) to deal with rounding</p>\n<pre><code>public static String format(long num) {\n\n        String suffix = &quot;&quot;, result;\n        double divisor = 0;\n\n        DecimalFormat df = new DecimalFormat(&quot;##&quot;);\n        DecimalFormat ds = new DecimalFormat(&quot;##.#&quot;);\n        // ds.setRoundingMode(RoundingMode.DOWN);\n\n        if ( num &gt;= 1000  &amp;&amp; num &lt; 1000000 ) {\n            divisor = 1000;\n            suffix = &quot;K&quot;;\n        } else if ( num &gt;= 1000000 &amp;&amp; num &lt; 1000000000 ) {\n            divisor = 1000000;\n            suffix = &quot;M&quot;;\n        } else if (num &gt;= 1000000000) {\n            divisor = 1000000000;\n            suffix = &quot;B&quot;;\n        } else {\n            System.out.print(&quot;The number is Too big &gt; T or TOO small &lt; K&quot;);\n        }\n\n        int numlengt = df.format(num / divisor).length();\n\n        if (numlengt &gt;= 2) {\n            result = (long) (num / divisor) + suffix;\n        } else {\n            result = ds.format(num / divisor) + suffix;\n        }\n        return result;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7541339,"reputation":181,"user_id":5725819,"display_name":"Ranajit Sawant"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649669759,"creation_date":1649669759,"answer_id":71825607,"question_id":4753251,"body_markdown":"      fun getKLCrValue(input: Long):String{\r\n            return if(input.toString().length&lt;4){\r\n                input.toString()\r\n            }else if(input.toString().length&lt;5)\r\n                ( &quot;&quot;+getExactValue(input.toString()[0] +&quot;.&quot;+ input.toString()[1]) +&quot;K&quot;)\r\n            else if(input.toString().length&lt;6)\r\n                (&quot;&quot;+getExactValue(&quot;&quot;+input.toString().subSequence(0, 2) +&quot;.&quot;+ input.toString()[2]) +&quot;K&quot;)\r\n            else if(input.toString().length&lt;7)\r\n                (&quot;&quot;+ getExactValue( input.toString()[0] +&quot;.&quot;+input.toString().subSequence(1, 3))+&quot;L&quot;)\r\n            else if(input.toString().length&lt;8)\r\n                (&quot;&quot;+ getExactValue( &quot;&quot;+input.toString().subSequence(0, 2)+&quot;.&quot;+input.toString().subSequence(2,4))+&quot;L&quot;)\r\n            else if(input.toString().length&lt;9)\r\n                (&quot;&quot;+ getExactValue( input.toString()[0] +&quot;.&quot;+input.toString().subSequence(1,3))+&quot;Cr&quot;)\r\n            else\r\n                (&quot;&quot;+ getExactValue( &quot;&quot;+input.toString().subSequence(0, input.toString().length-7)+&quot;.&quot;+input.toString().subSequence( input.toString().length-7, input.toString().length-5))+&quot;cr&quot;)\r\n\r\n        }\r\n\r\n        private fun getExactValue(value: String): String {\r\n            return value.replace(&quot;.00&quot;, &quot;&quot;)\r\n        }\r\n\r\nYou can just call getKLCrValue(1234) and you will get desired output\r\n\r\nOutput--&gt;\r\n\r\n    1 -&gt; 1\r\n    10 -&gt; 10\r\n    12 -&gt; 12\r\n    100 -&gt; 100\r\n    123 -&gt; 123\r\n    1000 -&gt; 1K\r\n    1234 -&gt; 1.2K\r\n    10000 -&gt; 10K\r\n    12345 -&gt; 12.3K\r\n    100000 -&gt; 1L\r\n    123456 -&gt; 1.23L\r\n    1000000 -&gt; 10L\r\n    1234567 -&gt; 12.34L\r\n    10000000 -&gt; 1cr\r\n    12345678 -&gt; 1.23cr\r\n    100000000 -&gt; 10cr\r\n    123456789 -&gt; 12.34cr\r\n    1000000000 -&gt; 100cr\r\n    1234567890 -&gt; 123.45cr\r\n    10000000000 -&gt; 1000cr\r\n    11111111111 -&gt; 1111.11cr","title":"How to go about formatting 1200 to 1.2k in java","body":"<pre><code>  fun getKLCrValue(input: Long):String{\n        return if(input.toString().length&lt;4){\n            input.toString()\n        }else if(input.toString().length&lt;5)\n            ( &quot;&quot;+getExactValue(input.toString()[0] +&quot;.&quot;+ input.toString()[1]) +&quot;K&quot;)\n        else if(input.toString().length&lt;6)\n            (&quot;&quot;+getExactValue(&quot;&quot;+input.toString().subSequence(0, 2) +&quot;.&quot;+ input.toString()[2]) +&quot;K&quot;)\n        else if(input.toString().length&lt;7)\n            (&quot;&quot;+ getExactValue( input.toString()[0] +&quot;.&quot;+input.toString().subSequence(1, 3))+&quot;L&quot;)\n        else if(input.toString().length&lt;8)\n            (&quot;&quot;+ getExactValue( &quot;&quot;+input.toString().subSequence(0, 2)+&quot;.&quot;+input.toString().subSequence(2,4))+&quot;L&quot;)\n        else if(input.toString().length&lt;9)\n            (&quot;&quot;+ getExactValue( input.toString()[0] +&quot;.&quot;+input.toString().subSequence(1,3))+&quot;Cr&quot;)\n        else\n            (&quot;&quot;+ getExactValue( &quot;&quot;+input.toString().subSequence(0, input.toString().length-7)+&quot;.&quot;+input.toString().subSequence( input.toString().length-7, input.toString().length-5))+&quot;cr&quot;)\n\n    }\n\n    private fun getExactValue(value: String): String {\n        return value.replace(&quot;.00&quot;, &quot;&quot;)\n    }\n</code></pre>\n<p>You can just call getKLCrValue(1234) and you will get desired output</p>\n<p>Output--&gt;</p>\n<pre><code>1 -&gt; 1\n10 -&gt; 10\n12 -&gt; 12\n100 -&gt; 100\n123 -&gt; 123\n1000 -&gt; 1K\n1234 -&gt; 1.2K\n10000 -&gt; 10K\n12345 -&gt; 12.3K\n100000 -&gt; 1L\n123456 -&gt; 1.23L\n1000000 -&gt; 10L\n1234567 -&gt; 12.34L\n10000000 -&gt; 1cr\n12345678 -&gt; 1.23cr\n100000000 -&gt; 10cr\n123456789 -&gt; 12.34cr\n1000000000 -&gt; 100cr\n1234567890 -&gt; 123.45cr\n10000000000 -&gt; 1000cr\n11111111111 -&gt; 1111.11cr\n</code></pre>\n"}],"owner":{"account_id":212390,"reputation":26536,"user_id":465179,"accept_rate":99,"display_name":"MatBanik"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82136,"favorite_count":0,"down_vote_count":3,"up_vote_count":193,"accepted_answer_id":30661479,"answer_count":26,"score":190,"last_activity_date":1649669759,"creation_date":1295561576,"question_id":4753251,"body_markdown":"I&#39;d like to format following numbers into the numbers next to them with java:\r\n    \r\n    1000 to 1k\r\n    5821 to 5.8k\r\n    10500 to 10k\r\n    101800 to 101k\r\n    2000000 to 2m\r\n    7800000 to 7.8m\r\n    92150000 to 92m\r\n    123200000 to 123m\r\n\r\nThe number on the right will be long or integer the number on the left will be string.\r\nHow should I approach this. I already did little algorithm for this but I thought there might be already something invented out there that does nicer job at it and doesn&#39;t require additional testing if I start dealing with billions and trillions :)\r\n\r\nAdditional Requirements:\r\n\r\n - The format should have maximum of 4 characters   \r\n - The above means 1.1k is OK 11.2k is not. Same for 7.8m is OK 19.1m is not. Only one digit before decimal point is allowed to have decimal point. Two digits before decimal point means not digits after decimal point.  \r\n - No rounding is necessary.  (Numbers being displayed with k and m appended are more of analog gauge indicating approximation not precise article of logic. Hence rounding is irrelevant mainly due to nature of variable than can increase or decrees several digits even while you are looking at the cached result.)\r\n","title":"How to go about formatting 1200 to 1.2k in java","body":"<p>I'd like to format following numbers into the numbers next to them with java:</p>\n\n<pre><code>1000 to 1k\n5821 to 5.8k\n10500 to 10k\n101800 to 101k\n2000000 to 2m\n7800000 to 7.8m\n92150000 to 92m\n123200000 to 123m\n</code></pre>\n\n<p>The number on the right will be long or integer the number on the left will be string.\nHow should I approach this. I already did little algorithm for this but I thought there might be already something invented out there that does nicer job at it and doesn't require additional testing if I start dealing with billions and trillions :)</p>\n\n<p>Additional Requirements:</p>\n\n<ul>\n<li>The format should have maximum of 4 characters   </li>\n<li>The above means 1.1k is OK 11.2k is not. Same for 7.8m is OK 19.1m is not. Only one digit before decimal point is allowed to have decimal point. Two digits before decimal point means not digits after decimal point.  </li>\n<li>No rounding is necessary.  (Numbers being displayed with k and m appended are more of analog gauge indicating approximation not precise article of logic. Hence rounding is irrelevant mainly due to nature of variable than can increase or decrees several digits even while you are looking at the cached result.)</li>\n</ul>\n"},{"tags":["java","spring-boot","amazon-dynamodb","apache-camel"],"answers":[{"tags":[],"owner":{"account_id":2269593,"reputation":43907,"user_id":1997376,"accept_rate":100,"display_name":"Nicolas Filotto"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1649669469,"creation_date":1649669469,"answer_id":71825529,"question_id":71823504,"body_markdown":"Assuming that you use Spring Boot as Camel runtime, the simplest way in your case is to configure the `DynamoDbClient` used by Camel thanks to options set in the `application.properties` as next:\r\n\r\n```\r\n# The value of the access key used by the component aws2-ddb\r\ncamel.component.aws2-ddb.accessKey=test\r\n# The value of the secret key used by the component aws2-ddb\r\ncamel.component.aws2-ddb.secretKey=test\r\n# The value of the region used by the component aws2-ddb \r\ncamel.component.aws2-ddb.region=us-east-1\r\n# Indicates that the component aws2-ddb should use the new URI endpoint\r\ncamel.component.aws2-ddb.override-endpoint=true\r\n# The value of the URI endpoint used by the component aws2-ddb \r\ncamel.component.aws2-ddb.uri-endpoint-override=http://localhost:8000\r\n```\r\n\r\nFor more details please refer to the documentation of those options:\r\n* [camel.component.aws2-ddb.accessKey][1]\r\n* [camel.component.aws2-ddb.secretKey][2]\r\n* [camel.component.aws2-ddb.region][3]\r\n* [camel.component.aws2-ddb.override-endpoint][4]\r\n* [camel.component.aws2-ddb.uri-endpoint-override][5]\r\n\r\n\r\n  [1]: https://camel.apache.org/components/next/aws2-ddb-component.html#_sb_option_camel_component_aws2-ddb_access-key\r\n  [2]: https://camel.apache.org/components/next/aws2-ddb-component.html#_sb_option_camel_component_aws2-ddb_secret-key\r\n  [3]: https://camel.apache.org/components/next/aws2-ddb-component.html#_sb_option_camel_component_aws2-ddb_region\r\n  [4]: https://camel.apache.org/components/next/aws2-ddb-component.html#_sb_option_camel_component_aws2-ddb_override-endpoint\r\n  [5]: https://camel.apache.org/components/next/aws2-ddb-component.html#_sb_option_camel_component_aws2-ddb_uri-endpoint-override\r\n\r\n---\r\n\r\nFor other runtimes, it can be configured programatically as next:\r\n\r\n    Ddb2Component ddb2Component = new Ddb2Component(context);\r\n    String accessKey = &quot;test&quot;;\r\n    String secretKey = &quot;test&quot;;\r\n    String region = &quot;us-east-1&quot;;\r\n    String endpoint = &quot;http://localhost:8000&quot;;\r\n    ddb2Component.getConfiguration().setAmazonDDBClient(\r\n        DynamoDbClient.builder()\r\n            .endpointOverride(URI.create(endpoint))\r\n            .credentialsProvider(\r\n                StaticCredentialsProvider.create(\r\n                    AwsBasicCredentials.create(accessKey, secretKey)\r\n                )\r\n            )\r\n            .region(Region.of(region))\r\n            .build()\r\n    );","title":"How to configure AWS DynamoDB Camel component","body":"<p>Assuming that you use Spring Boot as Camel runtime, the simplest way in your case is to configure the <code>DynamoDbClient</code> used by Camel thanks to options set in the <code>application.properties</code> as next:</p>\n<pre><code># The value of the access key used by the component aws2-ddb\ncamel.component.aws2-ddb.accessKey=test\n# The value of the secret key used by the component aws2-ddb\ncamel.component.aws2-ddb.secretKey=test\n# The value of the region used by the component aws2-ddb \ncamel.component.aws2-ddb.region=us-east-1\n# Indicates that the component aws2-ddb should use the new URI endpoint\ncamel.component.aws2-ddb.override-endpoint=true\n# The value of the URI endpoint used by the component aws2-ddb \ncamel.component.aws2-ddb.uri-endpoint-override=http://localhost:8000\n</code></pre>\n<p>For more details please refer to the documentation of those options:</p>\n<ul>\n<li><a href=\"https://camel.apache.org/components/next/aws2-ddb-component.html#_sb_option_camel_component_aws2-ddb_access-key\" rel=\"nofollow noreferrer\">camel.component.aws2-ddb.accessKey</a></li>\n<li><a href=\"https://camel.apache.org/components/next/aws2-ddb-component.html#_sb_option_camel_component_aws2-ddb_secret-key\" rel=\"nofollow noreferrer\">camel.component.aws2-ddb.secretKey</a></li>\n<li><a href=\"https://camel.apache.org/components/next/aws2-ddb-component.html#_sb_option_camel_component_aws2-ddb_region\" rel=\"nofollow noreferrer\">camel.component.aws2-ddb.region</a></li>\n<li><a href=\"https://camel.apache.org/components/next/aws2-ddb-component.html#_sb_option_camel_component_aws2-ddb_override-endpoint\" rel=\"nofollow noreferrer\">camel.component.aws2-ddb.override-endpoint</a></li>\n<li><a href=\"https://camel.apache.org/components/next/aws2-ddb-component.html#_sb_option_camel_component_aws2-ddb_uri-endpoint-override\" rel=\"nofollow noreferrer\">camel.component.aws2-ddb.uri-endpoint-override</a></li>\n</ul>\n<hr />\n<p>For other runtimes, it can be configured programatically as next:</p>\n<pre><code>Ddb2Component ddb2Component = new Ddb2Component(context);\nString accessKey = &quot;test&quot;;\nString secretKey = &quot;test&quot;;\nString region = &quot;us-east-1&quot;;\nString endpoint = &quot;http://localhost:8000&quot;;\nddb2Component.getConfiguration().setAmazonDDBClient(\n    DynamoDbClient.builder()\n        .endpointOverride(URI.create(endpoint))\n        .credentialsProvider(\n            StaticCredentialsProvider.create(\n                AwsBasicCredentials.create(accessKey, secretKey)\n            )\n        )\n        .region(Region.of(region))\n        .build()\n);\n</code></pre>\n"}],"owner":{"account_id":1310169,"reputation":3813,"user_id":1258319,"accept_rate":81,"display_name":"Julian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":238,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71825529,"answer_count":1,"score":1,"last_activity_date":1649669756,"creation_date":1649658742,"question_id":71823504,"body_markdown":"I am trying to POC accessing DynamoDB via an Apache Camel application. Obviously Dynamo DB will run in AWS but for development purposes we have it running locally as a docker container.\r\n\r\nIt was very easy to create a Dynamo BD table locally and put some items in there manually. I used for this my intelij Dynamo DB console and all I had to provide was a custom end point `http://localhost:8000` and the Default credential provider chain.\r\n\r\nNow at some certain times of the day I would like to trigger a job that will scan the Dynamo DB items and perform some actions on the returned data.\r\n\r\n    from(&quot;cron:myCron?schedule=0 */5 * * * *&quot;)\r\n            .log(&quot;Running myCron scheduler&quot;)\r\n            .setHeader(Ddb2Constants.OPERATION, () -&gt; Ddb2Operations.Scan)\r\n            .to(&quot;aws2-ddb:myTable&quot;)\r\n            .log(&quot;Performing some work on items&quot;);\r\n\r\n When I am trying to run my application it fails to start complaining that the security token is expired which makes me think it is trying to go to AWS rather than accessing the local. I was unable to find anything about how would I set this. The camel dynamo db component (https://camel.apache.org/components/3.15.x/aws2-ddb-component.html) is talking about being able to configure the component with a `DynamoDbClient` but this is an interface and its implementation called `DefaultDynamoDbClient` is not public and so is the `DefaultDynamoDbClientBuilder`.\r\n","title":"How to configure AWS DynamoDB Camel component","body":"<p>I am trying to POC accessing DynamoDB via an Apache Camel application. Obviously Dynamo DB will run in AWS but for development purposes we have it running locally as a docker container.</p>\n<p>It was very easy to create a Dynamo BD table locally and put some items in there manually. I used for this my intelij Dynamo DB console and all I had to provide was a custom end point <code>http://localhost:8000</code> and the Default credential provider chain.</p>\n<p>Now at some certain times of the day I would like to trigger a job that will scan the Dynamo DB items and perform some actions on the returned data.</p>\n<pre><code>from(&quot;cron:myCron?schedule=0 */5 * * * *&quot;)\n        .log(&quot;Running myCron scheduler&quot;)\n        .setHeader(Ddb2Constants.OPERATION, () -&gt; Ddb2Operations.Scan)\n        .to(&quot;aws2-ddb:myTable&quot;)\n        .log(&quot;Performing some work on items&quot;);\n</code></pre>\n<p>When I am trying to run my application it fails to start complaining that the security token is expired which makes me think it is trying to go to AWS rather than accessing the local. I was unable to find anything about how would I set this. The camel dynamo db component (<a href=\"https://camel.apache.org/components/3.15.x/aws2-ddb-component.html\" rel=\"nofollow noreferrer\">https://camel.apache.org/components/3.15.x/aws2-ddb-component.html</a>) is talking about being able to configure the component with a <code>DynamoDbClient</code> but this is an interface and its implementation called <code>DefaultDynamoDbClient</code> is not public and so is the <code>DefaultDynamoDbClientBuilder</code>.</p>\n"},{"tags":["java","plugins","sparql","graphdb"],"answers":[{"tags":[],"owner":{"account_id":442668,"reputation":1431,"user_id":833399,"accept_rate":75,"display_name":"Knight Industries"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649523967,"creation_date":1649523967,"answer_id":71810180,"question_id":71665112,"body_markdown":"Did you try `res[1] = new SimpleIRI(&quot;http://example.com/testGraph&quot;);`?","title":"ContextUpdateHandler interface does not work for a specific context","body":"<p>Did you try <code>res[1] = new SimpleIRI(&quot;http://example.com/testGraph&quot;);</code>?</p>\n"},{"tags":[],"owner":{"account_id":20150556,"reputation":23,"user_id":14777961,"display_name":"MrAni"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649669735,"creation_date":1649669735,"answer_id":71825599,"question_id":71665112,"body_markdown":"Or check the backend code for route differentials\r\nAnd try adding / to path","title":"ContextUpdateHandler interface does not work for a specific context","body":"<p>Or check the backend code for route differentials\nAnd try adding / to path</p>\n"}],"owner":{"account_id":7120536,"reputation":358,"user_id":5445329,"accept_rate":58,"display_name":"Greenfish"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1649669735,"creation_date":1648568876,"question_id":71665112,"body_markdown":"I tried to catch a specific context/named graph by implementing following function of the ContextUpdateHandler interface:\r\n\r\n    @Override\r\n    public Resource[] getUpdateContexts() {\r\n       getLogger().info(&quot;getUpdateContexts&quot;);\r\n       Resource[] res = new Resource[2];\r\n    \r\n       res[0] = () -&gt; &quot;&quot;;\r\n       res[1] = () -&gt; &quot;http://example.com/testGraph&quot;;\r\n    \r\n       return res;\r\n    }\r\n\r\nWhen I make an insert or delete to the default graph, it works perfectly and it gets me into the handleContextUpdate() method where I can further process the update request. However, when I do any insert or delete on a specific context, say http://example.com/testGraph, it does not get recognized. Do you know what might be the problem?\r\n\r\nI also tried to write it like this: `&lt;http://example.com/testGraph&gt;` and it didnt work\r\n\r\nThese are my queries:\r\n    \r\n    # Does not work.\r\n    delete data { \r\n        graph &lt;http://example.com/testGraph&gt; { \r\n            &lt;http://example.com/s/deleteThis2&gt; \r\n            &lt;http://example.com/p/deleteThis2&gt; \r\n            &lt;http://example.com/o/deleteThis2&gt; }\r\n    }\r\n\r\n    # Works perfectly fine.\r\n    delete data { \r\n            &lt;http://example.com/s/deleteThis2&gt; \r\n            &lt;http://example.com/p/deleteThis2&gt; \r\n            &lt;http://example.com/o/deleteThis2&gt; \r\n    }\r\n\r\nThanks!","title":"ContextUpdateHandler interface does not work for a specific context","body":"<p>I tried to catch a specific context/named graph by implementing following function of the ContextUpdateHandler interface:</p>\n<pre><code>@Override\npublic Resource[] getUpdateContexts() {\n   getLogger().info(&quot;getUpdateContexts&quot;);\n   Resource[] res = new Resource[2];\n\n   res[0] = () -&gt; &quot;&quot;;\n   res[1] = () -&gt; &quot;http://example.com/testGraph&quot;;\n\n   return res;\n}\n</code></pre>\n<p>When I make an insert or delete to the default graph, it works perfectly and it gets me into the handleContextUpdate() method where I can further process the update request. However, when I do any insert or delete on a specific context, say <a href=\"http://example.com/testGraph\" rel=\"nofollow noreferrer\">http://example.com/testGraph</a>, it does not get recognized. Do you know what might be the problem?</p>\n<p>I also tried to write it like this: <code>&lt;http://example.com/testGraph&gt;</code> and it didnt work</p>\n<p>These are my queries:</p>\n<pre><code># Does not work.\ndelete data { \n    graph &lt;http://example.com/testGraph&gt; { \n        &lt;http://example.com/s/deleteThis2&gt; \n        &lt;http://example.com/p/deleteThis2&gt; \n        &lt;http://example.com/o/deleteThis2&gt; }\n}\n\n# Works perfectly fine.\ndelete data { \n        &lt;http://example.com/s/deleteThis2&gt; \n        &lt;http://example.com/p/deleteThis2&gt; \n        &lt;http://example.com/o/deleteThis2&gt; \n}\n</code></pre>\n<p>Thanks!</p>\n"},{"tags":["java","kubernetes","architecture","grpc","publish-subscribe"],"answers":[{"tags":[],"owner":{"account_id":3314736,"reputation":3800,"user_id":2787364,"accept_rate":75,"display_name":"Cosmin Ioni»õƒÉ"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1649669322,"creation_date":1649669322,"answer_id":71825487,"question_id":71809821,"body_markdown":"Here are a couple of aspects that I&#39;m thinking:\r\n\r\n - Any chat system has some limits in terms of chatroom size. How many subscribers do you want to support? If you want to support tens (or even hundreds) of subscribers, I believe it works well with an in-memory list of subscribers, since it&#39;s much faster than having the subscriber&#39;s list in an external cache\r\n* When you need to send a message to the entire list of subscribers, instead of looping on that list, you can do that in parallel, using an IO-optimized thread-pool.\r\n* Deploying your chat-service in a pod is a good idea, you need the ability to scale horizontally, but you also need a smart-gateway in front of your service, to route the requests from a given user, to the pod that stores its information (if the subscribers list is stored in memory). Otherwise, if this info is stored externally (in a cache), your chat service can be fully stateless. \r\n\r\n","title":"How to scale up a gRPC pub/sub chat service?","body":"<p>Here are a couple of aspects that I'm thinking:</p>\n<ul>\n<li>Any chat system has some limits in terms of chatroom size. How many subscribers do you want to support? If you want to support tens (or even hundreds) of subscribers, I believe it works well with an in-memory list of subscribers, since it's much faster than having the subscriber's list in an external cache</li>\n</ul>\n<ul>\n<li>When you need to send a message to the entire list of subscribers, instead of looping on that list, you can do that in parallel, using an IO-optimized thread-pool.</li>\n<li>Deploying your chat-service in a pod is a good idea, you need the ability to scale horizontally, but you also need a smart-gateway in front of your service, to route the requests from a given user, to the pod that stores its information (if the subscribers list is stored in memory). Otherwise, if this info is stored externally (in a cache), your chat service can be fully stateless.</li>\n</ul>\n"}],"owner":{"account_id":19256881,"reputation":210,"user_id":14073575,"display_name":"Ray"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":639,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":71825487,"answer_count":1,"score":3,"last_activity_date":1649669322,"creation_date":1649521152,"question_id":71809821,"body_markdown":"I&#39;m studying how to make a chat service with gRPC. I notice that most of the examples store all the subscriber&#39;s connections into a List data structure. When the chatroom got a new message, the server will loop through that List and send new messages.\r\n\r\nStores subscribers in [source code&#39;s][1] variable **subscribers**.\r\n\r\nMy question is that when the subscriber number grows up and storing all the subscribers in the HashMap seems like a bad idea because that will cost too much memory? I have tried to store those connections in Redis but it might be impossible [due to the connection is not serializable.][2]\r\n\r\nMy Idea is when I deploy multiple pod instances in Kubernetes. Each chat service becomes independent. How could I get the subscribers correctly when they are distributed on different servers?\r\n\r\n  [1]: https://github.com/Raaaaaaaay86/grpc-chat-server/blob/master/src/main/java/com/example/grpcchatserver/observer/ChannelObserver.java\r\n  [2]: https://stackoverflow.com/questions/57848633/how-to-make-grpc-streamobserver-object-serializable-in-java","title":"How to scale up a gRPC pub/sub chat service?","body":"<p>I'm studying how to make a chat service with gRPC. I notice that most of the examples store all the subscriber's connections into a List data structure. When the chatroom got a new message, the server will loop through that List and send new messages.</p>\n<p>Stores subscribers in <a href=\"https://github.com/Raaaaaaaay86/grpc-chat-server/blob/master/src/main/java/com/example/grpcchatserver/observer/ChannelObserver.java\" rel=\"nofollow noreferrer\">source code's</a> variable <strong>subscribers</strong>.</p>\n<p>My question is that when the subscriber number grows up and storing all the subscribers in the HashMap seems like a bad idea because that will cost too much memory? I have tried to store those connections in Redis but it might be impossible <a href=\"https://stackoverflow.com/questions/57848633/how-to-make-grpc-streamobserver-object-serializable-in-java\">due to the connection is not serializable.</a></p>\n<p>My Idea is when I deploy multiple pod instances in Kubernetes. Each chat service becomes independent. How could I get the subscribers correctly when they are distributed on different servers?</p>\n"},{"tags":["java","spring","mongodb","spring-data"],"comments":[{"owner":{"account_id":6500113,"reputation":49680,"user_id":5031275,"display_name":"Blakes Seven"},"score":0,"creation_date":1440737412,"post_id":32263434,"comment_id":52406192,"body_markdown":"possible duplicate of [How to query mongodb with &quot;like&quot;?](http://stackoverflow.com/questions/3305561/how-to-query-mongodb-with-like)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/3305561/how-to-query-mongodb-with-like\">How to query mongodb with &quot;like&quot;?</a>"},{"owner":{"account_id":6500113,"reputation":49680,"user_id":5031275,"display_name":"Blakes Seven"},"score":0,"creation_date":1440737524,"post_id":32263434,"comment_id":52406217,"body_markdown":"Basically anything with a regular expression or possibly and/or the `$in` operator, which also supports regular expressions in addition to a list of exact arguments.","body":"Basically anything with a regular expression or possibly and/or the <code>$in</code> operator, which also supports regular expressions in addition to a list of exact arguments."},{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":1,"creation_date":1441028927,"post_id":32263434,"comment_id":52500708,"body_markdown":"@BlakesSeven Not a duplicate. This question is specifically about Spring Data.","body":"@BlakesSeven Not a duplicate. This question is specifically about Spring Data."},{"owner":{"account_id":6500113,"reputation":49680,"user_id":5031275,"display_name":"Blakes Seven"},"score":0,"creation_date":1441029514,"post_id":32263434,"comment_id":52501119,"body_markdown":"@chrylis So what? The end result is the same, which is &quot;use a regular expression&quot;. And the next time you decide to get so &quot;high and mighty&quot; then please read the revision history and realize the duplicate was marked &quot;before&quot; all of the revisions made to the question to put it into it&#39;s current form. Now it may not deserve immediate closure depending on whether there is a reasonable outcome. At which time I may reconsider. Okay by you? Also noting &quot;zero&quot; communication from the OP. Which is something that could be a lot better.","body":"@chrylis So what? The end result is the same, which is &quot;use a regular expression&quot;. And the next time you decide to get so &quot;high and mighty&quot; then please read the revision history and realize the duplicate was marked &quot;before&quot; all of the revisions made to the question to put it into it&#39;s current form. Now it may not deserve immediate closure depending on whether there is a reasonable outcome. At which time I may reconsider. Okay by you? Also noting &quot;zero&quot; communication from the OP. Which is something that could be a lot better."},{"owner":{"account_id":768732,"reputation":59580,"user_id":971888,"accept_rate":86,"display_name":"Rolando"},"score":2,"creation_date":1441029845,"post_id":32263434,"comment_id":52501349,"body_markdown":"The original question without any revision contained specifically &quot;but am not sure how to do it in java with spring data&quot;, &quot;I am using annotations in spring data to support querying. &quot;","body":"The original question without any revision contained specifically &quot;but am not sure how to do it in java with spring data&quot;, &quot;I am using annotations in spring data to support querying. &quot;"}],"answers":[{"tags":[],"owner":{"account_id":270417,"reputation":373,"user_id":560350,"display_name":"loc"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1649669198,"creation_date":1441032496,"answer_id":32314019,"question_id":32263434,"body_markdown":"Did you try it with [query method][1]?\r\n\r\n    public interface UserRepository extends MongoRepository&lt;UserId, String&gt; {\r\n    {\r\n\r\n        public List&lt;Users&gt; findByNameLike(String username);\r\n\r\n    }\r\n    \r\n\r\n\r\n  [1]: http://docs.spring.io/spring-data/mongodb/docs/current/reference/html/#repositories.query-methods.details","title":"Java Spring data mongodb how to use wildcards?","body":"<p>Did you try it with <a href=\"http://docs.spring.io/spring-data/mongodb/docs/current/reference/html/#repositories.query-methods.details\" rel=\"nofollow noreferrer\">query method</a>?</p>\n<pre><code>public interface UserRepository extends MongoRepository&lt;UserId, String&gt; {\n{\n\n    public List&lt;Users&gt; findByNameLike(String username);\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7524459,"reputation":1433,"user_id":6224662,"accept_rate":71,"display_name":"fireball.1"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1563481361,"creation_date":1563481361,"answer_id":57102123,"question_id":32263434,"body_markdown":"Why dont you use regex like you&#39;re trying to in the following manner :\r\n```\r\npublic interface UserRepository extends MongoRepository&lt;UserId, String&gt; {\r\n{\r\n    @Query(&quot;{&#39;name&#39; : {$regex : ?0}}&quot;)\r\n    public List&lt;Users&gt; findByName(String regexp);\r\n}\r\n```\r\nand in your service form a query somewhat like this :\r\n\r\n```\r\n@Mock\r\nUserRepository userRepository; \r\n\r\nString queryInput = &quot;^R.*$&quot;;\r\nList&lt;Users&gt; users = userRepository.findByName(queryInput);\r\n```\r\n\r\nfind more detailed answers in [here][1] in section 4.2\r\n\r\n\r\n  [1]: https://www.baeldung.com/queries-in-spring-data-mongodb","title":"Java Spring data mongodb how to use wildcards?","body":"<p>Why dont you use regex like you're trying to in the following manner :</p>\n\n<pre><code>public interface UserRepository extends MongoRepository&lt;UserId, String&gt; {\n{\n    @Query(\"{'name' : {$regex : ?0}}\")\n    public List&lt;Users&gt; findByName(String regexp);\n}\n</code></pre>\n\n<p>and in your service form a query somewhat like this :</p>\n\n<pre><code>@Mock\nUserRepository userRepository; \n\nString queryInput = \"^R.*$\";\nList&lt;Users&gt; users = userRepository.findByName(queryInput);\n</code></pre>\n\n<p>find more detailed answers in <a href=\"https://www.baeldung.com/queries-in-spring-data-mongodb\" rel=\"nofollow noreferrer\">here</a> in section 4.2</p>\n"}],"owner":{"account_id":768732,"reputation":59580,"user_id":971888,"accept_rate":86,"display_name":"Rolando"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3661,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":32314019,"answer_count":2,"score":3,"last_activity_date":1649669198,"creation_date":1440736655,"question_id":32263434,"body_markdown":"I have a field in my mongodb called &quot;name&quot;. I am using annotations in spring data to support querying. My question is, is there a way to support wildcard? i.e. If I have values for &quot;name&quot; called &quot;Robert&quot;, &quot;Roberto&quot; &quot;Ramano&quot;, I could support queries that allow me to pass say &quot;R&quot; to a function, and it will match on everything that starts with R? Right now I have to basically do an &quot;exact spelling&quot; of Robert, or any one of those names to get an exact match.\r\n\r\nI know how to do wildcard search with mongodb directly, but am not sure how to do it in java with spring data. I have a model class representing my Student documents that I use annotations to describe how to query.\r\n\r\n    db.users.find({&quot;name&quot;: /.*m.*/})\r\n\r\nI don&#39;t know how to translate that into java as I want to pass in a variable. For example:\r\n\r\nPseudocode:\r\n\r\n    String myvar = &quot;R&quot;;\r\n    db.users.find({/.*&lt;variable here&gt;*/})\r\n\r\nThe following is what I have on my &quot;MongoRepository&quot; implementation:\r\n\r\n    public interface UserRepository extends MongoRepository&lt;UserId, String&gt; {\r\n    {\r\n        @Query(&quot;{&#39;name&#39; : {$regex : ?0}}&quot;)\r\n        public List&lt;Users&gt; findByName(String username);\r\n    }\r\n\r\nWhen I pass in the full name &quot;Robert&quot;, then it is able to find &quot;Robert&quot;. However, if I put &quot;R&quot;, it does not find anything.","title":"Java Spring data mongodb how to use wildcards?","body":"<p>I have a field in my mongodb called \"name\". I am using annotations in spring data to support querying. My question is, is there a way to support wildcard? i.e. If I have values for \"name\" called \"Robert\", \"Roberto\" \"Ramano\", I could support queries that allow me to pass say \"R\" to a function, and it will match on everything that starts with R? Right now I have to basically do an \"exact spelling\" of Robert, or any one of those names to get an exact match.</p>\n\n<p>I know how to do wildcard search with mongodb directly, but am not sure how to do it in java with spring data. I have a model class representing my Student documents that I use annotations to describe how to query.</p>\n\n<pre><code>db.users.find({\"name\": /.*m.*/})\n</code></pre>\n\n<p>I don't know how to translate that into java as I want to pass in a variable. For example:</p>\n\n<p>Pseudocode:</p>\n\n<pre><code>String myvar = \"R\";\ndb.users.find({/.*&lt;variable here&gt;*/})\n</code></pre>\n\n<p>The following is what I have on my \"MongoRepository\" implementation:</p>\n\n<pre><code>public interface UserRepository extends MongoRepository&lt;UserId, String&gt; {\n{\n    @Query(\"{'name' : {$regex : ?0}}\")\n    public List&lt;Users&gt; findByName(String username);\n}\n</code></pre>\n\n<p>When I pass in the full name \"Robert\", then it is able to find \"Robert\". However, if I put \"R\", it does not find anything.</p>\n"},{"tags":["java","spring-boot","debugging","amazon-ec2","remote-debugging"],"comments":[{"owner":{"account_id":2318392,"reputation":849,"user_id":2034850,"display_name":"Alon Yampolski"},"score":0,"creation_date":1649670016,"post_id":71825456,"comment_id":126926237,"body_markdown":"not sure how your microservices are detecting each other but in case you&#39;re using Eureka, you can run A on your local machine and direct it to the Eureka server. i believe that if your using other configurations you can still flow the same concept.","body":"not sure how your microservices are detecting each other but in case you&#39;re using Eureka, you can run A on your local machine and direct it to the Eureka server. i believe that if your using other configurations you can still flow the same concept."},{"owner":{"account_id":2664369,"reputation":8184,"user_id":2303252,"accept_rate":47,"display_name":"Aaron Shen"},"score":0,"creation_date":1649670309,"post_id":71825456,"comment_id":126926352,"body_markdown":"@AlonYampolski yes, I&#39;m using eureka. Not sure what you mean direct it to the Eureka server? the local machine can get the other services ip address, but those are VPC internal, from the local machine, I think it won&#39;t be able to call them successfully considering Security group &amp; VPC restrictions.","body":"@AlonYampolski yes, I&#39;m using eureka. Not sure what you mean direct it to the Eureka server? the local machine can get the other services ip address, but those are VPC internal, from the local machine, I think it won&#39;t be able to call them successfully considering Security group &amp; VPC restrictions."},{"owner":{"account_id":2318392,"reputation":849,"user_id":2034850,"display_name":"Alon Yampolski"},"score":0,"creation_date":1649671321,"post_id":71825456,"comment_id":126926769,"body_markdown":"as i said, it&#39;s hard to provide a good answer while not knowing the full setup but i&#39;ll try to provide a general solution anyway. you can either enable your local machine in the security group or peer your VPC to another VPC and enable it there while redirecting your calls to the original one. as for the Eureka server, when you run springboot you need to specify its location and then you&#39;ll be registered on it.","body":"as i said, it&#39;s hard to provide a good answer while not knowing the full setup but i&#39;ll try to provide a general solution anyway. you can either enable your local machine in the security group or peer your VPC to another VPC and enable it there while redirecting your calls to the original one. as for the Eureka server, when you run springboot you need to specify its location and then you&#39;ll be registered on it."}],"owner":{"account_id":2664369,"reputation":8184,"user_id":2303252,"accept_rate":47,"display_name":"Aaron Shen"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":184,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649669117,"creation_date":1649669117,"question_id":71825456,"body_markdown":"I&#39;m writing java services deployed to EC2 instances on AWS.\r\nWe&#39;re based on micro-services architecture.\r\n\r\nWhen a service talks to a bunch of other services, it makes local dev environment hard to set up, I have to spin up the dependent services on localhost, and configure to call local apis. Not to mention mocking other AWS resources, sqs, sns, dynamodb...\r\n\r\nImagine, I have micro service: A, B, C, D, E deployed on AWS EC2. A will call B, C, D, E.\r\nWhen a request come and hits A service, I want to somehow &quot;hijack&quot; the A service to use the java code on my local machine instead of the jar deployed on that EC2 instance, and it should be able to stop at the break points set in my local IDE. After I press execute, the execution continues to call B, C, D, E services which are deployed on AWS EC2.\r\n\r\nIs this even possible?\r\n\r\n\r\n","title":"Is it possible handle/debug requests hitting on remote EC2 instance with local java code?","body":"<p>I'm writing java services deployed to EC2 instances on AWS.\nWe're based on micro-services architecture.</p>\n<p>When a service talks to a bunch of other services, it makes local dev environment hard to set up, I have to spin up the dependent services on localhost, and configure to call local apis. Not to mention mocking other AWS resources, sqs, sns, dynamodb...</p>\n<p>Imagine, I have micro service: A, B, C, D, E deployed on AWS EC2. A will call B, C, D, E.\nWhen a request come and hits A service, I want to somehow &quot;hijack&quot; the A service to use the java code on my local machine instead of the jar deployed on that EC2 instance, and it should be able to stop at the break points set in my local IDE. After I press execute, the execution continues to call B, C, D, E services which are deployed on AWS EC2.</p>\n<p>Is this even possible?</p>\n"},{"tags":["java","spring","docker","jboss","wildfly"],"answers":[{"tags":[],"owner":{"account_id":332563,"reputation":1973,"user_id":657945,"display_name":"jazgot"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1649669061,"creation_date":1461869984,"answer_id":36923323,"question_id":36889201,"body_markdown":"You can do this by overwriting entrypoint script. Here is example run.sh script which creates application.properties file before booting application.\r\n\r\n**run.sh**\r\n\r\n    #!/bin/bash -x\r\n    PROPERTIES=/opt/jboss/application.properties\r\n    echo &quot;db_url = jdbc:mysql://${MYSQL_HOST}:${MYSQL_PORT}&quot; &gt; ${PROPERTIES}\r\n    echo &quot;db_username = ${MYSQL_USER}&quot; &gt;&gt; ${PROPERTIES}\r\n    echo &quot;db_password = ${MYSQL_PASS}&quot; &gt;&gt; ${PROPERTIES}\r\n    exec /opt/jboss/wildfly/bin/standalone.sh -b 0.0.0.0 $@\r\n\r\n**Dockerfile**\r\n\r\n    FROM jboss/wildfly\r\n    ADD run.sh /run.sh\r\n    CMD /run.sh\r\n    ADD spring_application.war /opt/jboss/wildfly/standalone/deployments/\r\n\r\nRun this with:\r\n\r\n    docker run -e MYSQL_HOST=mysqlhost -e MYSQL_USER=user -e MYSQL_PASS=pass wildflyimage","title":"update custom configuration file in Docker","body":"<p>You can do this by overwriting entrypoint script. Here is example run.sh script which creates application.properties file before booting application.</p>\n<p><strong>run.sh</strong></p>\n<pre><code>#!/bin/bash -x\nPROPERTIES=/opt/jboss/application.properties\necho &quot;db_url = jdbc:mysql://${MYSQL_HOST}:${MYSQL_PORT}&quot; &gt; ${PROPERTIES}\necho &quot;db_username = ${MYSQL_USER}&quot; &gt;&gt; ${PROPERTIES}\necho &quot;db_password = ${MYSQL_PASS}&quot; &gt;&gt; ${PROPERTIES}\nexec /opt/jboss/wildfly/bin/standalone.sh -b 0.0.0.0 $@\n</code></pre>\n<p><strong>Dockerfile</strong></p>\n<pre><code>FROM jboss/wildfly\nADD run.sh /run.sh\nCMD /run.sh\nADD spring_application.war /opt/jboss/wildfly/standalone/deployments/\n</code></pre>\n<p>Run this with:</p>\n<pre><code>docker run -e MYSQL_HOST=mysqlhost -e MYSQL_USER=user -e MYSQL_PASS=pass wildflyimage\n</code></pre>\n"}],"owner":{"account_id":6776872,"reputation":525,"user_id":5218399,"display_name":"Bharath Dasararaju"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2162,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":36923323,"answer_count":1,"score":2,"last_activity_date":1649669061,"creation_date":1461758478,"question_id":36889201,"body_markdown":"I am new to **Docker**. My requirement is to create a docker file which should install `Wildfly` server, add war file to `Wildfly`, add custom property file (which contains db connection strings which will read by application)\r\n\r\n**My Docker file**\r\n\r\n    FROM jboss/wildfly\r\n    Add application.properties /opt/jboss/\r\n    ADD spring_application.war /opt/jboss/wildfly/standalone/deployments/\r\n\r\n**application.properties** \r\n\r\n    db_url = jdbc:mysql://**server host name**:**port**\r\n    db_username = **username**\r\n    db_password = **password**\r\n\r\nNote: in the above file server host name, port, username, password should be dynamic\r\n\r\n**War** file (spring rest application) will read parameters from application.properties\r\n\r\nI am able successfully install `Wildfly` and deployed application. Now i need to pass parameters in application.properties at runtime. Please help me if anyone has solution.","title":"update custom configuration file in Docker","body":"<p>I am new to <strong>Docker</strong>. My requirement is to create a docker file which should install <code>Wildfly</code> server, add war file to <code>Wildfly</code>, add custom property file (which contains db connection strings which will read by application)</p>\n\n<p><strong>My Docker file</strong></p>\n\n<pre><code>FROM jboss/wildfly\nAdd application.properties /opt/jboss/\nADD spring_application.war /opt/jboss/wildfly/standalone/deployments/\n</code></pre>\n\n<p><strong>application.properties</strong> </p>\n\n<pre><code>db_url = jdbc:mysql://**server host name**:**port**\ndb_username = **username**\ndb_password = **password**\n</code></pre>\n\n<p>Note: in the above file server host name, port, username, password should be dynamic</p>\n\n<p><strong>War</strong> file (spring rest application) will read parameters from application.properties</p>\n\n<p>I am able successfully install <code>Wildfly</code> and deployed application. Now i need to pass parameters in application.properties at runtime. Please help me if anyone has solution.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1649656740,"post_id":71821711,"comment_id":126921897,"body_markdown":"Whats wrong with passing the DTO, that contains all the information you need?","body":"Whats wrong with passing the DTO, that contains all the information you need?"}],"answers":[{"tags":[],"owner":{"account_id":16404603,"reputation":359,"user_id":11849527,"display_name":"Salem loress"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649641422,"creation_date":1649641422,"answer_id":71821906,"question_id":71821711,"body_markdown":"Try to use getter and setter or use Jackson Annotations.","title":"(SpringBoot) In this case how to pass the parameters from controller layer to service layer?","body":"<p>Try to use getter and setter or use Jackson Annotations.</p>\n"},{"tags":[],"owner":{"account_id":7473996,"reputation":310,"user_id":5680977,"display_name":"Dhiraj Surve"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649641662,"creation_date":1649641662,"answer_id":71821921,"question_id":71821711,"body_markdown":"You can pass it as List&lt;Object&gt; where Object can be any class type from the 10 class . \r\nAnd at service layer side use below implementation to identify type of class . \r\n\r\n        pseudo code\r\n        for()\r\n        {\r\n        if(list.get(i).getClass().equals(First.class))\r\n          {\r\n           logic for class first\r\n        }\r\n    else if(..)\r\n       //same way you can do it using if else or switch\r\n\r\n}\r\n\r\n   ","title":"(SpringBoot) In this case how to pass the parameters from controller layer to service layer?","body":"<p>You can pass it as List where Object can be any class type from the 10 class .\nAnd at service layer side use below implementation to identify type of class .</p>\n<pre><code>    pseudo code\n    for()\n    {\n    if(list.get(i).getClass().equals(First.class))\n      {\n       logic for class first\n    }\nelse if(..)\n   //same way you can do it using if else or switch\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":20833547,"reputation":1212,"user_id":15302273,"display_name":"stacktrace2234"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":595,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1649669046,"creation_date":1649638592,"question_id":71821711,"body_markdown":"The json that I have to send looks like this:\r\n\r\n```\r\n{\r\n  &quot;id&quot;: 0,\r\n  &quot;height&quot;: 0,\r\n  &quot;name&quot;: &quot;string&quot;,\r\n  &quot;list&quot;: [\r\n    {\r\n      &quot;klk&quot;: 0,\r\n      &quot;name&quot;: &quot;string&quot;,\r\n      &quot;subject&quot;: 0,\r\n      &quot;subjectType&quot;: &quot;string&quot;,\r\n      &quot;target&quot;: 0\r\n    }\r\n  ],\r\n  &quot;type&quot;: &quot;string&quot;,\r\n  &quot;group&quot;: 0,\r\n  &quot;width&quot;: 0\r\n}\r\n```\r\n\r\n```\r\nclass First {\r\n   private Long id;\r\n   private Integer height;\r\n   private Integer width;\r\n   private String name;\r\n   private String type;\r\n   private Long group;\r\n   private List&lt;Second&gt; list;\r\n}\r\n\r\nclass Second {\r\n   private Long klk;\r\n   private String name;\r\n   private String subjectType;\r\n   private Long subject;\r\n   private Long target;\r\n}\r\n```\r\nSo basically I have a DTO that contains a list of DTOs. As you can see both DTOs have a lot of parameters. \r\n\r\nHow to pass the values to the service layer without passing 10 parameters (or the DTO itself)?\r\n\r\nI need some ideas...","title":"(SpringBoot) In this case how to pass the parameters from controller layer to service layer?","body":"<p>The json that I have to send looks like this:</p>\n<pre><code>{\n  &quot;id&quot;: 0,\n  &quot;height&quot;: 0,\n  &quot;name&quot;: &quot;string&quot;,\n  &quot;list&quot;: [\n    {\n      &quot;klk&quot;: 0,\n      &quot;name&quot;: &quot;string&quot;,\n      &quot;subject&quot;: 0,\n      &quot;subjectType&quot;: &quot;string&quot;,\n      &quot;target&quot;: 0\n    }\n  ],\n  &quot;type&quot;: &quot;string&quot;,\n  &quot;group&quot;: 0,\n  &quot;width&quot;: 0\n}\n</code></pre>\n<pre><code>class First {\n   private Long id;\n   private Integer height;\n   private Integer width;\n   private String name;\n   private String type;\n   private Long group;\n   private List&lt;Second&gt; list;\n}\n\nclass Second {\n   private Long klk;\n   private String name;\n   private String subjectType;\n   private Long subject;\n   private Long target;\n}\n</code></pre>\n<p>So basically I have a DTO that contains a list of DTOs. As you can see both DTOs have a lot of parameters.</p>\n<p>How to pass the values to the service layer without passing 10 parameters (or the DTO itself)?</p>\n<p>I need some ideas...</p>\n"},{"tags":["java","aop","aspectj","aspect","aspectj-maven-plugin"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1544581411,"post_id":53600820,"comment_id":94323736,"body_markdown":"I have not copied your code and POM yet and tried to compile it, but at first glance two things strike me as odd: You apply compile-time weaving, but also provide an _aop.xml_ which is only needed for load-time weaving. So which way do you want to go? For CTW you can just remove it. Secondly, the pointcut  `execution(org.kayd.Client.data())` should yield a compile error because the syntax is invalid (no return type specified for the method signature). You should rather use something like `execution(* org.kayd.Client.data())` or `execution(void org.kayd.Client.data())`. Does that help?","body":"I have not copied your code and POM yet and tried to compile it, but at first glance two things strike me as odd: You apply compile-time weaving, but also provide an <i>aop.xml</i> which is only needed for load-time weaving. So which way do you want to go? For CTW you can just remove it. Secondly, the pointcut  <code>execution(org.kayd.Client.data())</code> should yield a compile error because the syntax is invalid (no return type specified for the method signature). You should rather use something like <code>execution(* org.kayd.Client.data())</code> or <code>execution(void org.kayd.Client.data())</code>. Does that help?"}],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1649668908,"creation_date":1544591394,"answer_id":53736430,"question_id":53600820,"body_markdown":"I just had a little bit of time and recreated your Maven project on my machine. What I said in my comment is actually true, so I am quoting myself here in order to turn it into an answer:\r\n\r\n&gt; At first glance two things strike me as odd:\r\n&gt;\r\n&gt; * You apply compile-time weaving, but also provide an _aop.xml_ which is only needed for load-time weaving. So which way do you want to go? For CTW you can just remove it.\r\n&gt; * Secondly, the pointcut `execution(org.kayd.Client.data())` should yield a compile error because the syntax is invalid (no return type specified for the method signature). You should rather use something like `execution(* org.kayd.Client.data())` or `execution(void org.kayd.Client.data())`.\r\n\r\nI want to add that using `after` as a method name is not advised because in AspectJ native syntax it is a reserved keyword. The compiler does not complain, but still you should be careful here.\r\n\r\nI modified your aspect like this to avoid the Maven compile error and also to see some more information on the console:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package org.kayd;\r\n    \r\n    import org.aspectj.lang.JoinPoint;\r\n    import org.aspectj.lang.annotation.After;\r\n    import org.aspectj.lang.annotation.Aspect;\r\n    import org.aspectj.lang.annotation.Before;\r\n    import org.aspectj.lang.annotation.Pointcut;\r\n    \r\n    @Aspect\r\n    public class AspectTest {\r\n      @Pointcut(&quot;execution(* *(..))&quot;)\r\n      public void defineEntryPoint() {}\r\n    \r\n      @Before(&quot;defineEntryPoint()&quot;)\r\n      public void log(JoinPoint joinPoint) {\r\n        System.out.println(&quot;Before advice on &quot; + joinPoint);\r\n      }\r\n    \r\n      @After(&quot;execution(org.kayd.Client.data())&quot;)\r\n      public void afterAdvice(JoinPoint joinPoint) {\r\n        System.out.println(&quot;After advice on &quot; + joinPoint);\r\n      }\r\n    }\r\n\r\nI also pimped your POM a bit because you use the latest AspectJ version on one hand, but an old version of AspectJ Maven plugin depending on an older version, which leads to strange log output on the Maven console. Furthermore, I added a One-JAR packager and Maven Exec plugin, so you have your whole application in one &#220;ber-JAR and can just run it without anything else on the classpath.\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n      &lt;groupId&gt;org.kayd&lt;/groupId&gt;\r\n      &lt;artifactId&gt;AOP&lt;/artifactId&gt;\r\n      &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n      &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;java.source-target.version&gt;1.8&lt;/java.source-target.version&gt;\r\n        &lt;aspectj.version&gt;1.9.2&lt;/aspectj.version&gt;\r\n        &lt;main-class&gt;org.kayd.Client&lt;/main-class&gt;\r\n      &lt;/properties&gt;\r\n\r\n      &lt;build&gt;\r\n\r\n        &lt;pluginManagement&gt;\r\n          &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n              &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n              &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;3.3&lt;/version&gt;\r\n              &lt;configuration&gt;\r\n                &lt;source&gt;${java.source-target.version}&lt;/source&gt;\r\n                &lt;target&gt;${java.source-target.version}&lt;/target&gt;\r\n                &lt;!-- IMPORTANT --&gt;\r\n                &lt;useIncrementalCompilation&gt;false&lt;/useIncrementalCompilation&gt;\r\n              &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n              &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n              &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;1.11&lt;/version&gt;\r\n              &lt;configuration&gt;\r\n                &lt;!--&lt;showWeaveInfo&gt;true&lt;/showWeaveInfo&gt;--&gt;\r\n                &lt;source&gt;${java.source-target.version}&lt;/source&gt;\r\n                &lt;target&gt;${java.source-target.version}&lt;/target&gt;\r\n                &lt;Xlint&gt;ignore&lt;/Xlint&gt;\r\n                &lt;complianceLevel&gt;${java.source-target.version}&lt;/complianceLevel&gt;\r\n                &lt;encoding&gt;${project.build.sourceEncoding}&lt;/encoding&gt;\r\n                &lt;!--&lt;verbose&gt;true&lt;/verbose&gt;--&gt;\r\n                &lt;!--&lt;warn&gt;constructorName,packageDefaultMethod,deprecation,maskedCatchBlocks,unusedLocals,unusedArguments,unusedImport&lt;/warn&gt;--&gt;\r\n              &lt;/configuration&gt;\r\n              &lt;executions&gt;\r\n                &lt;execution&gt;\r\n                  &lt;!-- IMPORTANT --&gt;\r\n                  &lt;phase&gt;process-sources&lt;/phase&gt;\r\n                  &lt;goals&gt;\r\n                    &lt;goal&gt;compile&lt;/goal&gt;\r\n                    &lt;goal&gt;test-compile&lt;/goal&gt;\r\n                  &lt;/goals&gt;\r\n                &lt;/execution&gt;\r\n              &lt;/executions&gt;\r\n              &lt;dependencies&gt;\r\n                &lt;dependency&gt;\r\n                  &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n                  &lt;artifactId&gt;aspectjtools&lt;/artifactId&gt;\r\n                  &lt;version&gt;${aspectj.version}&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                  &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n                  &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\r\n                  &lt;version&gt;${aspectj.version}&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n              &lt;/dependencies&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n              &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n              &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;1.4.0&lt;/version&gt;\r\n              &lt;configuration&gt;\r\n                &lt;mainClass&gt;${main-class}&lt;/mainClass&gt;\r\n              &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n              &lt;groupId&gt;com.jolira&lt;/groupId&gt;\r\n              &lt;artifactId&gt;onejar-maven-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;1.4.4&lt;/version&gt;\r\n              &lt;executions&gt;\r\n                &lt;execution&gt;\r\n                  &lt;goals&gt;\r\n                    &lt;goal&gt;one-jar&lt;/goal&gt;\r\n                  &lt;/goals&gt;\r\n                &lt;/execution&gt;\r\n              &lt;/executions&gt;\r\n              &lt;configuration&gt;\r\n                &lt;onejarVersion&gt;0.96&lt;/onejarVersion&gt;\r\n                &lt;mainClass&gt;de.scrum_master.app.FooBar&lt;/mainClass&gt;\r\n                &lt;attachToBuild&gt;true&lt;/attachToBuild&gt;\r\n              &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n          &lt;/plugins&gt;\r\n        &lt;/pluginManagement&gt;\r\n\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n            &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\r\n          &lt;/plugin&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;com.jolira&lt;/groupId&gt;\r\n            &lt;artifactId&gt;onejar-maven-plugin&lt;/artifactId&gt;\r\n            &lt;configuration&gt;\r\n              &lt;mainClass&gt;${main-class}&lt;/mainClass&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n            &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n\r\n      &lt;/build&gt;\r\n\r\n      &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n          &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\r\n          &lt;version&gt;${aspectj.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n      &lt;/dependencies&gt;\r\n\r\n    &lt;/project&gt;\r\n\r\nThen do something like `mvn clean verify` and afterwards either of those two:\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    $ mvn exec:java\r\n\r\n    [INFO] Scanning for projects...\r\n    [INFO]\r\n    [INFO] ----------------------------&lt; org.kayd:AOP &gt;----------------------------\r\n    [INFO] Building AOP 1.0-SNAPSHOT\r\n    [INFO] --------------------------------[ jar ]---------------------------------\r\n    [INFO]\r\n    [INFO] --- exec-maven-plugin:1.4.0:java (default-cli) @ AOP ---\r\n    Before advice on execution(void org.kayd.Client.main(String[]))\r\n    Before advice on execution(void org.kayd.Client.data())\r\n    kayd\r\n    After advice on execution(void org.kayd.Client.data())\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD SUCCESS\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time: 1.043 s\r\n    [INFO] Finished at: 2018-12-12T12:07:59+07:00\r\n    [INFO] ------------------------------------------------------------------------\r\n\r\nOr if you want to run the &#220;ber-JAR:\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    $ java -jar target\\AOP-1.0-SNAPSHOT.one-jar.jar\r\n\r\n    Before advice on execution(void org.kayd.Client.main(String[]))\r\n    Before advice on execution(void org.kayd.Client.data())\r\n    kayd\r\n    After advice on execution(void org.kayd.Client.data())","title":"Project not compiling properly with AspectJ Maven","body":"<p>I just had a little bit of time and recreated your Maven project on my machine. What I said in my comment is actually true, so I am quoting myself here in order to turn it into an answer:</p>\n<blockquote>\n<p>At first glance two things strike me as odd:</p>\n<ul>\n<li>You apply compile-time weaving, but also provide an <em>aop.xml</em> which is only needed for load-time weaving. So which way do you want to go? For CTW you can just remove it.</li>\n<li>Secondly, the pointcut <code>execution(org.kayd.Client.data())</code> should yield a compile error because the syntax is invalid (no return type specified for the method signature). You should rather use something like <code>execution(* org.kayd.Client.data())</code> or <code>execution(void org.kayd.Client.data())</code>.</li>\n</ul>\n</blockquote>\n<p>I want to add that using <code>after</code> as a method name is not advised because in AspectJ native syntax it is a reserved keyword. The compiler does not complain, but still you should be careful here.</p>\n<p>I modified your aspect like this to avoid the Maven compile error and also to see some more information on the console:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.kayd;\n\nimport org.aspectj.lang.JoinPoint;\nimport org.aspectj.lang.annotation.After;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Before;\nimport org.aspectj.lang.annotation.Pointcut;\n\n@Aspect\npublic class AspectTest {\n  @Pointcut(&quot;execution(* *(..))&quot;)\n  public void defineEntryPoint() {}\n\n  @Before(&quot;defineEntryPoint()&quot;)\n  public void log(JoinPoint joinPoint) {\n    System.out.println(&quot;Before advice on &quot; + joinPoint);\n  }\n\n  @After(&quot;execution(org.kayd.Client.data())&quot;)\n  public void afterAdvice(JoinPoint joinPoint) {\n    System.out.println(&quot;After advice on &quot; + joinPoint);\n  }\n}\n</code></pre>\n<p>I also pimped your POM a bit because you use the latest AspectJ version on one hand, but an old version of AspectJ Maven plugin depending on an older version, which leads to strange log output on the Maven console. Furthermore, I added a One-JAR packager and Maven Exec plugin, so you have your whole application in one √úber-JAR and can just run it without anything else on the classpath.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;org.kayd&lt;/groupId&gt;\n  &lt;artifactId&gt;AOP&lt;/artifactId&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;java.source-target.version&gt;1.8&lt;/java.source-target.version&gt;\n    &lt;aspectj.version&gt;1.9.2&lt;/aspectj.version&gt;\n    &lt;main-class&gt;org.kayd.Client&lt;/main-class&gt;\n  &lt;/properties&gt;\n\n  &lt;build&gt;\n\n    &lt;pluginManagement&gt;\n      &lt;plugins&gt;\n        &lt;plugin&gt;\n          &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.3&lt;/version&gt;\n          &lt;configuration&gt;\n            &lt;source&gt;${java.source-target.version}&lt;/source&gt;\n            &lt;target&gt;${java.source-target.version}&lt;/target&gt;\n            &lt;!-- IMPORTANT --&gt;\n            &lt;useIncrementalCompilation&gt;false&lt;/useIncrementalCompilation&gt;\n          &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n          &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\n          &lt;version&gt;1.11&lt;/version&gt;\n          &lt;configuration&gt;\n            &lt;!--&lt;showWeaveInfo&gt;true&lt;/showWeaveInfo&gt;--&gt;\n            &lt;source&gt;${java.source-target.version}&lt;/source&gt;\n            &lt;target&gt;${java.source-target.version}&lt;/target&gt;\n            &lt;Xlint&gt;ignore&lt;/Xlint&gt;\n            &lt;complianceLevel&gt;${java.source-target.version}&lt;/complianceLevel&gt;\n            &lt;encoding&gt;${project.build.sourceEncoding}&lt;/encoding&gt;\n            &lt;!--&lt;verbose&gt;true&lt;/verbose&gt;--&gt;\n            &lt;!--&lt;warn&gt;constructorName,packageDefaultMethod,deprecation,maskedCatchBlocks,unusedLocals,unusedArguments,unusedImport&lt;/warn&gt;--&gt;\n          &lt;/configuration&gt;\n          &lt;executions&gt;\n            &lt;execution&gt;\n              &lt;!-- IMPORTANT --&gt;\n              &lt;phase&gt;process-sources&lt;/phase&gt;\n              &lt;goals&gt;\n                &lt;goal&gt;compile&lt;/goal&gt;\n                &lt;goal&gt;test-compile&lt;/goal&gt;\n              &lt;/goals&gt;\n            &lt;/execution&gt;\n          &lt;/executions&gt;\n          &lt;dependencies&gt;\n            &lt;dependency&gt;\n              &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n              &lt;artifactId&gt;aspectjtools&lt;/artifactId&gt;\n              &lt;version&gt;${aspectj.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n              &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n              &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\n              &lt;version&gt;${aspectj.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n          &lt;/dependencies&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n          &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n          &lt;version&gt;1.4.0&lt;/version&gt;\n          &lt;configuration&gt;\n            &lt;mainClass&gt;${main-class}&lt;/mainClass&gt;\n          &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;groupId&gt;com.jolira&lt;/groupId&gt;\n          &lt;artifactId&gt;onejar-maven-plugin&lt;/artifactId&gt;\n          &lt;version&gt;1.4.4&lt;/version&gt;\n          &lt;executions&gt;\n            &lt;execution&gt;\n              &lt;goals&gt;\n                &lt;goal&gt;one-jar&lt;/goal&gt;\n              &lt;/goals&gt;\n            &lt;/execution&gt;\n          &lt;/executions&gt;\n          &lt;configuration&gt;\n            &lt;onejarVersion&gt;0.96&lt;/onejarVersion&gt;\n            &lt;mainClass&gt;de.scrum_master.app.FooBar&lt;/mainClass&gt;\n            &lt;attachToBuild&gt;true&lt;/attachToBuild&gt;\n          &lt;/configuration&gt;\n        &lt;/plugin&gt;\n      &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n        &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;com.jolira&lt;/groupId&gt;\n        &lt;artifactId&gt;onejar-maven-plugin&lt;/artifactId&gt;\n        &lt;configuration&gt;\n          &lt;mainClass&gt;${main-class}&lt;/mainClass&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n        &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n\n  &lt;/build&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n      &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\n      &lt;version&gt;${aspectj.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Then do something like <code>mvn clean verify</code> and afterwards either of those two:</p>\n<pre class=\"lang-none prettyprint-override\"><code>$ mvn exec:java\n\n[INFO] Scanning for projects...\n[INFO]\n[INFO] ----------------------------&lt; org.kayd:AOP &gt;----------------------------\n[INFO] Building AOP 1.0-SNAPSHOT\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO]\n[INFO] --- exec-maven-plugin:1.4.0:java (default-cli) @ AOP ---\nBefore advice on execution(void org.kayd.Client.main(String[]))\nBefore advice on execution(void org.kayd.Client.data())\nkayd\nAfter advice on execution(void org.kayd.Client.data())\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 1.043 s\n[INFO] Finished at: 2018-12-12T12:07:59+07:00\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n<p>Or if you want to run the √úber-JAR:</p>\n<pre class=\"lang-none prettyprint-override\"><code>$ java -jar target\\AOP-1.0-SNAPSHOT.one-jar.jar\n\nBefore advice on execution(void org.kayd.Client.main(String[]))\nBefore advice on execution(void org.kayd.Client.data())\nkayd\nAfter advice on execution(void org.kayd.Client.data())\n</code></pre>\n"}],"owner":{"display_name":"user6457056"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2982,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":53736430,"answer_count":1,"score":0,"last_activity_date":1649668908,"creation_date":1543866361,"question_id":53600820,"body_markdown":"I am trying to work with **AspectJ** in **IntelliJ Community Edition**. \r\n\r\nIt&#39;s not working as expected. Where do am I making a mistake? Any help/insights would be very much appreciated.\r\n\r\n**Technology Ref:**\r\n\r\n 1. IntelliJ IDEA 2018.2.4 (Community Edition)\r\n 2. java version &quot;1.8.0_77&quot;\r\n\r\n```java\r\npackage org.kayd;\r\n    \r\npublic class Client {\r\n  public static void main(String[] args) {\r\n    Client data = new Client();\r\n    data.data();\r\n  }\r\n\r\n  public void data() {\r\n    System.out.println(&quot;kayd&quot;);\r\n  }\r\n}\r\n```\r\n\r\n*Aspect Class*\r\n\r\n```java\r\npackage org.kayd;\r\n\r\nimport org.aspectj.lang.JoinPoint;\r\nimport org.aspectj.lang.annotation.After;\r\nimport org.aspectj.lang.annotation.Aspect;\r\nimport org.aspectj.lang.annotation.Before;\r\nimport org.aspectj.lang.annotation.Pointcut;\r\n\r\n@Aspect\r\npublic class AspectTest {\r\n  @Pointcut(&quot;execution(* *(..))&quot;)\r\n  public void defineEntryPoint() {}\r\n\r\n  @Before(&quot;defineEntryPoint()&quot;)\r\n  public void log(JoinPoint joinPoint) {\r\n    System.out.println(&quot;log&quot;);\r\n  }\r\n\r\n  @After(&quot;execution(org.kayd.Client.data())&quot;)\r\n  public void after() {\r\n    System.out.println(&quot;log&quot;);\r\n  }\r\n}\r\n```\r\n\r\n*AOP.xml*\r\n\r\n```xml\r\n&lt;aspectj&gt;\r\n  &lt;aspects&gt;\r\n    &lt;aspect name=&quot;org.kayd.AspectTest&quot;/&gt;\r\n  &lt;/aspects&gt;\r\n&lt;/aspectj&gt;\r\n```\r\n\r\n*pom.xml*\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n  &lt;groupId&gt;org.kayd&lt;/groupId&gt;\r\n  &lt;artifactId&gt;AOP&lt;/artifactId&gt;\r\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n      &lt;version&gt;5.3.2&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n      &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\r\n      &lt;version&gt;1.9.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n      &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\r\n      &lt;version&gt;1.9.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n\r\n  &lt;build&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n        &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;1.9&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;showWeaveInfo&gt;true&lt;/showWeaveInfo&gt;\r\n          &lt;source&gt;1.8&lt;/source&gt;\r\n          &lt;target&gt;1.8&lt;/target&gt;\r\n          &lt;Xlint&gt;ignore&lt;/Xlint&gt;\r\n          &lt;complianceLevel&gt;${java.version}&lt;/complianceLevel&gt;\r\n          &lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n          &lt;verbose&gt;true&lt;/verbose&gt;\r\n        &lt;/configuration&gt;\r\n        &lt;executions&gt;\r\n          &lt;execution&gt;\r\n            &lt;phase&gt;process-sources&lt;/phase&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;compile&lt;/goal&gt;\r\n              &lt;goal&gt;test-compile&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n          &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n**Screenshot**\r\n\r\n[![Project Structure][1]][1]\r\n\r\n**Ref**: I already looked into these questions but still not working.\r\n\r\n - [AspectJ with Maven (still) not working][2]\r\n - [The White Blog][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/i91HA.png\r\n  [2]: https://stackoverflow.com/questions/44491891/aspectj-with-maven-still-not-working\r\n  [3]: http://www.andrewewhite.net/wordpress/2010/03/17/aspectj-annotation-tutorial/","title":"Project not compiling properly with AspectJ Maven","body":"<p>I am trying to work with <strong>AspectJ</strong> in <strong>IntelliJ Community Edition</strong>.</p>\n<p>It's not working as expected. Where do am I making a mistake? Any help/insights would be very much appreciated.</p>\n<p><strong>Technology Ref:</strong></p>\n<ol>\n<li>IntelliJ IDEA 2018.2.4 (Community Edition)</li>\n<li>java version &quot;1.8.0_77&quot;</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>package org.kayd;\n    \npublic class Client {\n  public static void main(String[] args) {\n    Client data = new Client();\n    data.data();\n  }\n\n  public void data() {\n    System.out.println(&quot;kayd&quot;);\n  }\n}\n</code></pre>\n<p><em>Aspect Class</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.kayd;\n\nimport org.aspectj.lang.JoinPoint;\nimport org.aspectj.lang.annotation.After;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Before;\nimport org.aspectj.lang.annotation.Pointcut;\n\n@Aspect\npublic class AspectTest {\n  @Pointcut(&quot;execution(* *(..))&quot;)\n  public void defineEntryPoint() {}\n\n  @Before(&quot;defineEntryPoint()&quot;)\n  public void log(JoinPoint joinPoint) {\n    System.out.println(&quot;log&quot;);\n  }\n\n  @After(&quot;execution(org.kayd.Client.data())&quot;)\n  public void after() {\n    System.out.println(&quot;log&quot;);\n  }\n}\n</code></pre>\n<p><em>AOP.xml</em></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;aspectj&gt;\n  &lt;aspects&gt;\n    &lt;aspect name=&quot;org.kayd.AspectTest&quot;/&gt;\n  &lt;/aspects&gt;\n&lt;/aspectj&gt;\n</code></pre>\n<p><em>pom.xml</em></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;org.kayd&lt;/groupId&gt;\n  &lt;artifactId&gt;AOP&lt;/artifactId&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n      &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n      &lt;version&gt;5.3.2&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n      &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\n      &lt;version&gt;1.9.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n      &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\n      &lt;version&gt;1.9.2&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n        &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;1.9&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;showWeaveInfo&gt;true&lt;/showWeaveInfo&gt;\n          &lt;source&gt;1.8&lt;/source&gt;\n          &lt;target&gt;1.8&lt;/target&gt;\n          &lt;Xlint&gt;ignore&lt;/Xlint&gt;\n          &lt;complianceLevel&gt;${java.version}&lt;/complianceLevel&gt;\n          &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n          &lt;verbose&gt;true&lt;/verbose&gt;\n        &lt;/configuration&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;phase&gt;process-sources&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;compile&lt;/goal&gt;\n              &lt;goal&gt;test-compile&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p><strong>Screenshot</strong></p>\n<p><a href=\"https://i.stack.imgur.com/i91HA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/i91HA.png\" alt=\"Project Structure\" /></a></p>\n<p><strong>Ref</strong>: I already looked into these questions but still not working.</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/44491891/aspectj-with-maven-still-not-working\">AspectJ with Maven (still) not working</a></li>\n<li><a href=\"http://www.andrewewhite.net/wordpress/2010/03/17/aspectj-annotation-tutorial/\" rel=\"nofollow noreferrer\">The White Blog</a></li>\n</ul>\n"},{"tags":["java","json","jolt"],"answers":[{"tags":[],"owner":{"account_id":7712415,"reputation":60542,"user_id":5841306,"display_name":"Barbaros &#214;zhan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649668731,"creation_date":1649668731,"answer_id":71825379,"question_id":71819470,"body_markdown":"Need to divide key names starting with `approachType` one more time in order to seperate them by means of `Min` and `Max`, to derive the lower case grade to match the extracted methods (`a` and `b`). \r\n\r\nSo, use the following specs : \r\n```json\r\n[\r\n  {\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;test1&quot;: &quot;value1&quot;,\r\n      &quot;test2&quot;: &quot;value2&quot;,\r\n      &quot;description&quot;: &quot;desc1&quot;,\r\n      &quot;name1&quot;: &quot;nameValue&quot;,\r\n      &quot;active&quot;: {\r\n        &quot;true&quot;: {\r\n          &quot;#Active&quot;: &quot;status&quot;\r\n        },\r\n        &quot;false&quot;: {\r\n          &quot;#Inactive&quot;: &quot;status&quot;\r\n        }\r\n      },\r\n      &quot;date1&quot;: &quot;beginDate&quot;,\r\n      &quot;date2&quot;: &quot;endDate&quot;,\r\n      &quot;grade&quot;: &quot;&amp;&quot;,\r\n      &quot;quantity&quot;: &quot;qtn&quot;,\r\n      &quot;additionalInfo&quot;: &quot;information&quot;,\r\n      &quot;favorite&quot;: &quot;fvt&quot;,\r\n      &quot;maxValue&quot;: &quot;max&quot;,\r\n      &quot;approachType*\\\\[zone*, method=*]&quot;: &quot;cA&amp;(0,1).&amp;(0,3)&quot;\r\n    }\r\n  },\r\n  {\r\n    &quot;operation&quot;: &quot;modify-overwrite-beta&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;grade_l&quot;: &quot;=toLower(@(1,grade))&quot;\r\n    }\r\n  },\r\n  {\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;*&quot;: &quot;&amp;&quot;,\r\n      &quot;grade_l&quot;: {\r\n        &quot;*&quot;: {\r\n          &quot;@(2,grade)&quot;: &quot;testGrade.value&quot;,\r\n          &quot;#2&quot;: &quot;testGrade.defaultValue&quot;,\r\n          &quot;@(2,cAMin.&amp;)&quot;: &quot;convertedApproachMin&quot;,\r\n          &quot;@(2,cAMax.&amp;)&quot;: &quot;convertedApproachMax&quot;\r\n        }\r\n      }\r\n    }\r\n  },\r\n  {\r\n    &quot;operation&quot;: &quot;remove&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;grade&quot;: &quot;&quot;,\r\n      &quot;cA*&quot;: &quot;&quot;\r\n    }\r\n  }\r\n]\r\n```\r\n\r\nthe ***demo*** on the site http://jolt-demo.appspot.com/ :\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ihpMf.jpg","title":"Filter values depends on another field","body":"<p>Need to divide key names starting with <code>approachType</code> one more time in order to seperate them by means of <code>Min</code> and <code>Max</code>, to derive the lower case grade to match the extracted methods (<code>a</code> and <code>b</code>).</p>\n<p>So, use the following specs :</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;test1&quot;: &quot;value1&quot;,\n      &quot;test2&quot;: &quot;value2&quot;,\n      &quot;description&quot;: &quot;desc1&quot;,\n      &quot;name1&quot;: &quot;nameValue&quot;,\n      &quot;active&quot;: {\n        &quot;true&quot;: {\n          &quot;#Active&quot;: &quot;status&quot;\n        },\n        &quot;false&quot;: {\n          &quot;#Inactive&quot;: &quot;status&quot;\n        }\n      },\n      &quot;date1&quot;: &quot;beginDate&quot;,\n      &quot;date2&quot;: &quot;endDate&quot;,\n      &quot;grade&quot;: &quot;&amp;&quot;,\n      &quot;quantity&quot;: &quot;qtn&quot;,\n      &quot;additionalInfo&quot;: &quot;information&quot;,\n      &quot;favorite&quot;: &quot;fvt&quot;,\n      &quot;maxValue&quot;: &quot;max&quot;,\n      &quot;approachType*\\\\[zone*, method=*]&quot;: &quot;cA&amp;(0,1).&amp;(0,3)&quot;\n    }\n  },\n  {\n    &quot;operation&quot;: &quot;modify-overwrite-beta&quot;,\n    &quot;spec&quot;: {\n      &quot;grade_l&quot;: &quot;=toLower(@(1,grade))&quot;\n    }\n  },\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;*&quot;: &quot;&amp;&quot;,\n      &quot;grade_l&quot;: {\n        &quot;*&quot;: {\n          &quot;@(2,grade)&quot;: &quot;testGrade.value&quot;,\n          &quot;#2&quot;: &quot;testGrade.defaultValue&quot;,\n          &quot;@(2,cAMin.&amp;)&quot;: &quot;convertedApproachMin&quot;,\n          &quot;@(2,cAMax.&amp;)&quot;: &quot;convertedApproachMax&quot;\n        }\n      }\n    }\n  },\n  {\n    &quot;operation&quot;: &quot;remove&quot;,\n    &quot;spec&quot;: {\n      &quot;grade&quot;: &quot;&quot;,\n      &quot;cA*&quot;: &quot;&quot;\n    }\n  }\n]\n</code></pre>\n<p>the <em><strong>demo</strong></em> on the site <a href=\"http://jolt-demo.appspot.com/\" rel=\"nofollow noreferrer\">http://jolt-demo.appspot.com/</a> :</p>\n<p><a href=\"https://i.stack.imgur.com/ihpMf.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ihpMf.jpg\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":7556417,"reputation":83,"user_id":5735858,"display_name":"Yawyaw1"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71825379,"answer_count":1,"score":1,"last_activity_date":1649668731,"creation_date":1649615455,"question_id":71819470,"body_markdown":"I have some issue finding the right way to filter in my input json file using jolt as described in the following:\r\n\r\n**Input :**\r\n```json\r\n{\r\n  &quot;test1&quot;: 2242,\r\n  &quot;test2&quot;: 23456,\r\n  &quot;description&quot;: &quot;desc, desc, desc&quot;,\r\n  &quot;name1&quot;: &quot;foo&quot;,\r\n  &quot;active&quot;: true,\r\n  &quot;date1&quot;: &quot;xx-xx-xx&quot;,\r\n  &quot;date2&quot;: &quot;xx-xx-xx&quot;,\r\n  &quot;grade&quot;: &quot;A&quot;,\r\n  &quot;quantity&quot;: 10,\r\n  &quot;information&quot;: &quot;info, info, info&quot;,\r\n  &quot;favorite&quot;: &quot;Y&quot;,\r\n  &quot;maxValue&quot;: 100,\r\n  &quot;approachTypeMin[zone=MAR, method=a]&quot;: &quot;12&quot;,\r\n  &quot;approachTypeMax[zone=MAR, method=a]&quot;: &quot;50&quot;,\r\n  &quot;approachTypeMin[zone=NOR, method=b]&quot;: &quot;3&quot;,\r\n  &quot;approachTypeMax[zone=NOR, method=b]&quot;: &quot;10&quot;\r\n}\r\n```\r\nThis is my Spec \r\n```json\r\n[\r\n  {\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;test1&quot;: &quot;value1&quot;,\r\n      &quot;test2&quot;: &quot;value2&quot;,\r\n      &quot;description&quot;: &quot;desc1&quot;,\r\n      &quot;name1&quot;: &quot;nameValue&quot;,\r\n      &quot;active&quot;: {\r\n        &quot;true&quot;: {\r\n          &quot;#Active&quot;: &quot;status&quot;\r\n        },\r\n        &quot;false&quot;: {\r\n          &quot;#Inactive&quot;: &quot;status&quot;\r\n        }\r\n      },\r\n      &quot;date1&quot;: &quot;beginDate&quot;,\r\n      &quot;date2&quot;: &quot;endDate&quot;,\r\n      &quot;grade&quot;: {\r\n        &quot;*&quot;: {\r\n          &quot;$&quot;: &quot;testGrade.value&quot;,\r\n          &quot;@(2,type)&quot;: &quot;testGrade.type&quot;,\r\n          &quot;#2&quot;: &quot;testGrade.defaultValue&quot;\r\n        }\r\n      },\r\n      &quot;quantity&quot;: &quot;qtn&quot;,\r\n      &quot;additionalInfo&quot;: &quot;information&quot;,\r\n      &quot;favorite&quot;: &quot;fvt&quot;,\r\n      &quot;maxValue&quot;: &quot;max&quot;,\r\n      &quot;approachType*, method=*]&quot;: &quot;test.&amp;(0,2)&quot;\r\n    }\r\n  }\r\n]\r\n```\r\n\r\nThis is my actual Output \r\n```json\r\n{\r\n  &quot;value1&quot; : 2242,\r\n  &quot;value2&quot; : 23456,\r\n  &quot;desc1&quot; : &quot;desc, desc, desc&quot;,\r\n  &quot;nameValue&quot; : &quot;foo&quot;,\r\n  &quot;status&quot; : &quot;Active&quot;,\r\n  &quot;beginDate&quot; : &quot;xx-xx-xx&quot;,\r\n  &quot;endDate&quot; : &quot;xx-xx-xx&quot;,\r\n  &quot;testGrade&quot; : {\r\n    &quot;value&quot; : &quot;A&quot;,\r\n    &quot;defaultValue&quot; : &quot;2&quot;\r\n  },\r\n  &quot;qtn&quot; : 10,\r\n  &quot;fvt&quot; : &quot;Y&quot;,\r\n  &quot;max&quot; : 100,\r\n  &quot;test&quot; : {\r\n    &quot;A&quot; : [ &quot;12&quot;, &quot;50&quot; ],\r\n    &quot;B&quot; : [ &quot;3&quot;, &quot;10&quot; ]\r\n  }\r\n}\r\n```\r\nMy issue is that i can&#39;t find a way to get something like the result above depending on the grade(e.g grade A==Approach method):\r\n```json        \r\n{\r\n  &quot;value1&quot;: 2242,\r\n  &quot;value2&quot;: 23456,\r\n  &quot;desc1&quot;: &quot;desc, desc, desc&quot;,\r\n  &quot;nameValue&quot;: &quot;foo&quot;,\r\n  &quot;status&quot;: &quot;Active&quot;,\r\n  &quot;beginDate&quot;: &quot;xx-xx-xx&quot;,\r\n  &quot;endDate&quot;: &quot;xx-xx-xx&quot;,\r\n  &quot;value&quot;: &quot;X&quot;,\r\n  &quot;testGrade&quot;: {\r\n    &quot;type&quot;: &quot;A&quot;,\r\n    &quot;defaultValue&quot;: &quot;2&quot;\r\n  },\r\n  &quot;qtn&quot;: &quot;10&quot;,\r\n  &quot;fvt&quot;: &quot;Y&quot;,\r\n  &quot;max&quot;: &quot;100&quot;,\r\n  &quot;convertedApproachMin&quot;: 12,\r\n  &quot;convertedApproachMax&quot;: 50\r\n\r\n}\r\n```\r\n Thanks for any help!\r\n\r\n","title":"Filter values depends on another field","body":"<p>I have some issue finding the right way to filter in my input json file using jolt as described in the following:</p>\n<p><strong>Input :</strong></p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;test1&quot;: 2242,\n  &quot;test2&quot;: 23456,\n  &quot;description&quot;: &quot;desc, desc, desc&quot;,\n  &quot;name1&quot;: &quot;foo&quot;,\n  &quot;active&quot;: true,\n  &quot;date1&quot;: &quot;xx-xx-xx&quot;,\n  &quot;date2&quot;: &quot;xx-xx-xx&quot;,\n  &quot;grade&quot;: &quot;A&quot;,\n  &quot;quantity&quot;: 10,\n  &quot;information&quot;: &quot;info, info, info&quot;,\n  &quot;favorite&quot;: &quot;Y&quot;,\n  &quot;maxValue&quot;: 100,\n  &quot;approachTypeMin[zone=MAR, method=a]&quot;: &quot;12&quot;,\n  &quot;approachTypeMax[zone=MAR, method=a]&quot;: &quot;50&quot;,\n  &quot;approachTypeMin[zone=NOR, method=b]&quot;: &quot;3&quot;,\n  &quot;approachTypeMax[zone=NOR, method=b]&quot;: &quot;10&quot;\n}\n</code></pre>\n<p>This is my Spec</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;test1&quot;: &quot;value1&quot;,\n      &quot;test2&quot;: &quot;value2&quot;,\n      &quot;description&quot;: &quot;desc1&quot;,\n      &quot;name1&quot;: &quot;nameValue&quot;,\n      &quot;active&quot;: {\n        &quot;true&quot;: {\n          &quot;#Active&quot;: &quot;status&quot;\n        },\n        &quot;false&quot;: {\n          &quot;#Inactive&quot;: &quot;status&quot;\n        }\n      },\n      &quot;date1&quot;: &quot;beginDate&quot;,\n      &quot;date2&quot;: &quot;endDate&quot;,\n      &quot;grade&quot;: {\n        &quot;*&quot;: {\n          &quot;$&quot;: &quot;testGrade.value&quot;,\n          &quot;@(2,type)&quot;: &quot;testGrade.type&quot;,\n          &quot;#2&quot;: &quot;testGrade.defaultValue&quot;\n        }\n      },\n      &quot;quantity&quot;: &quot;qtn&quot;,\n      &quot;additionalInfo&quot;: &quot;information&quot;,\n      &quot;favorite&quot;: &quot;fvt&quot;,\n      &quot;maxValue&quot;: &quot;max&quot;,\n      &quot;approachType*, method=*]&quot;: &quot;test.&amp;(0,2)&quot;\n    }\n  }\n]\n</code></pre>\n<p>This is my actual Output</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;value1&quot; : 2242,\n  &quot;value2&quot; : 23456,\n  &quot;desc1&quot; : &quot;desc, desc, desc&quot;,\n  &quot;nameValue&quot; : &quot;foo&quot;,\n  &quot;status&quot; : &quot;Active&quot;,\n  &quot;beginDate&quot; : &quot;xx-xx-xx&quot;,\n  &quot;endDate&quot; : &quot;xx-xx-xx&quot;,\n  &quot;testGrade&quot; : {\n    &quot;value&quot; : &quot;A&quot;,\n    &quot;defaultValue&quot; : &quot;2&quot;\n  },\n  &quot;qtn&quot; : 10,\n  &quot;fvt&quot; : &quot;Y&quot;,\n  &quot;max&quot; : 100,\n  &quot;test&quot; : {\n    &quot;A&quot; : [ &quot;12&quot;, &quot;50&quot; ],\n    &quot;B&quot; : [ &quot;3&quot;, &quot;10&quot; ]\n  }\n}\n</code></pre>\n<p>My issue is that i can't find a way to get something like the result above depending on the grade(e.g grade A==Approach method):</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;value1&quot;: 2242,\n  &quot;value2&quot;: 23456,\n  &quot;desc1&quot;: &quot;desc, desc, desc&quot;,\n  &quot;nameValue&quot;: &quot;foo&quot;,\n  &quot;status&quot;: &quot;Active&quot;,\n  &quot;beginDate&quot;: &quot;xx-xx-xx&quot;,\n  &quot;endDate&quot;: &quot;xx-xx-xx&quot;,\n  &quot;value&quot;: &quot;X&quot;,\n  &quot;testGrade&quot;: {\n    &quot;type&quot;: &quot;A&quot;,\n    &quot;defaultValue&quot;: &quot;2&quot;\n  },\n  &quot;qtn&quot;: &quot;10&quot;,\n  &quot;fvt&quot;: &quot;Y&quot;,\n  &quot;max&quot;: &quot;100&quot;,\n  &quot;convertedApproachMin&quot;: 12,\n  &quot;convertedApproachMax&quot;: 50\n\n}\n</code></pre>\n<p>Thanks for any help!</p>\n"},{"tags":["java","image","image-processing","crop"],"answers":[{"tags":[],"owner":{"account_id":136959,"reputation":1253,"user_id":340841,"accept_rate":67,"display_name":"Yonathan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1278881962,"creation_date":1278881962,"answer_id":3224609,"question_id":3224561,"body_markdown":"I think this is exactly what you should do, loop through the array of pixels, check for alpha and then discard. Although when you for example would have a star shape it will not resize the image to be smaller be aware of this.","title":"Crop image to smallest size by removing transparent pixels in java","body":"<p>I think this is exactly what you should do, loop through the array of pixels, check for alpha and then discard. Although when you for example would have a star shape it will not resize the image to be smaller be aware of this.</p>\n"},{"tags":[],"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1278903648,"creation_date":1278886190,"answer_id":3224808,"question_id":3224561,"body_markdown":"If your sheet already has transparent pixels, the `BufferedImage` returned by `getSubimage()` will, too. The default `Graphics2D` [composite rule][1] is `AlphaComposite.SRC_OVER`, which should suffice for `drawImage()`.\r\n\r\nIf the sub-images have a distinct background color, use a [`LookupOp`][2] with a four-component `LookupTable` that sets the alpha component to zero for colors that match the background.\r\n\r\nI&#39;d traverse the pixel raster only as a last resort.\r\n\r\nAddendum: Extra transparent pixels may interfere with collision detection, etc. Cropping them will require working with a [`WritableRaster`][3] directly. Rather than working from the center out, I&#39;d start with the borders, using a pair of `getPixels()`/`setPixels()` methods that can modify a row or column at a time. If a whole row or column has zero alpha, mark it for elimination when you later get a sub-image.\r\n\r\n[1]:http://sites.google.com/site/drjohnbmatthews/composite\r\n[2]:http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/api/java/awt/image/LookupOp.html\r\n[3]:http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/api/java/awt/image/WritableRaster.html","title":"Crop image to smallest size by removing transparent pixels in java","body":"<p>If your sheet already has transparent pixels, the <code>BufferedImage</code> returned by <code>getSubimage()</code> will, too. The default <code>Graphics2D</code> <a href=\"http://sites.google.com/site/drjohnbmatthews/composite\" rel=\"nofollow noreferrer\">composite rule</a> is <code>AlphaComposite.SRC_OVER</code>, which should suffice for <code>drawImage()</code>.</p>\n\n<p>If the sub-images have a distinct background color, use a <a href=\"http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/api/java/awt/image/LookupOp.html\" rel=\"nofollow noreferrer\"><code>LookupOp</code></a> with a four-component <code>LookupTable</code> that sets the alpha component to zero for colors that match the background.</p>\n\n<p>I'd traverse the pixel raster only as a last resort.</p>\n\n<p>Addendum: Extra transparent pixels may interfere with collision detection, etc. Cropping them will require working with a <a href=\"http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/api/java/awt/image/WritableRaster.html\" rel=\"nofollow noreferrer\"><code>WritableRaster</code></a> directly. Rather than working from the center out, I'd start with the borders, using a pair of <code>getPixels()</code>/<code>setPixels()</code> methods that can modify a row or column at a time. If a whole row or column has zero alpha, mark it for elimination when you later get a sub-image.</p>\n"},{"tags":[],"owner":{"account_id":1933468,"reputation":677,"user_id":1742374,"display_name":"pepan"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1401726317,"creation_date":1401726317,"answer_id":23999123,"question_id":3224561,"body_markdown":"This code works for me. The algorithm is simple, it iterates from left/top/right/bottom of the picture and finds the very first pixel in the column/row which is not transparent. It then remembers the new corner of the trimmed picture and finally it returns the sub image of the original image.\r\n\r\nThere are things which could be improved.\r\n\r\n1. The algorithm expects, there is the alpha byte in the data. It will fail on an index out of array exception if there is not.\r\n\r\n2. The algorithm expects, there is at least one non-transparent pixel in the picture. It will fail if the picture is completely transparent.\r\n\r\n        private static BufferedImage trimImage(BufferedImage img) {\r\n        final byte[] pixels = ((DataBufferByte) img.getRaster().getDataBuffer()).getData();\r\n        int width = img.getWidth();\r\n        int height = img.getHeight();\r\n        int x0, y0, x1, y1;                      // the new corners of the trimmed image\r\n        int i, j;                                // i - horizontal iterator; j - vertical iterator\r\n        leftLoop:\r\n        for (i = 0; i &lt; width; i++) {\r\n            for (j = 0; j &lt; height; j++) {\r\n                if (pixels[(j*width+i)*4] != 0) { // alpha is the very first byte and then every fourth one\r\n                    break leftLoop;\r\n                }\r\n            }\r\n        }\r\n        x0 = i;\r\n        topLoop:\r\n        for (j = 0; j &lt; height; j++) {\r\n            for (i = 0; i &lt; width; i++) {\r\n                if (pixels[(j*width+i)*4] != 0) {\r\n                    break topLoop;\r\n                }\r\n            }\r\n        }\r\n        y0 = j;\r\n        rightLoop:\r\n        for (i = width-1; i &gt;= 0; i--) {\r\n            for (j = 0; j &lt; height; j++) {\r\n                if (pixels[(j*width+i)*4] != 0) {\r\n                    break rightLoop;\r\n                }\r\n            }\r\n        }\r\n        x1 = i+1;\r\n        bottomLoop:\r\n        for (j = height-1; j &gt;= 0; j--) {\r\n            for (i = 0; i &lt; width; i++) {\r\n                if (pixels[(j*width+i)*4] != 0) {\r\n                    break bottomLoop;\r\n                }\r\n            }\r\n        }\r\n        y1 = j+1;\r\n        return img.getSubimage(x0, y0, x1-x0, y1-y0);\r\n    }\r\n","title":"Crop image to smallest size by removing transparent pixels in java","body":"<p>This code works for me. The algorithm is simple, it iterates from left/top/right/bottom of the picture and finds the very first pixel in the column/row which is not transparent. It then remembers the new corner of the trimmed picture and finally it returns the sub image of the original image.</p>\n\n<p>There are things which could be improved.</p>\n\n<ol>\n<li><p>The algorithm expects, there is the alpha byte in the data. It will fail on an index out of array exception if there is not.</p></li>\n<li><p>The algorithm expects, there is at least one non-transparent pixel in the picture. It will fail if the picture is completely transparent.</p>\n\n<pre><code>private static BufferedImage trimImage(BufferedImage img) {\nfinal byte[] pixels = ((DataBufferByte) img.getRaster().getDataBuffer()).getData();\nint width = img.getWidth();\nint height = img.getHeight();\nint x0, y0, x1, y1;                      // the new corners of the trimmed image\nint i, j;                                // i - horizontal iterator; j - vertical iterator\nleftLoop:\nfor (i = 0; i &lt; width; i++) {\n    for (j = 0; j &lt; height; j++) {\n        if (pixels[(j*width+i)*4] != 0) { // alpha is the very first byte and then every fourth one\n            break leftLoop;\n        }\n    }\n}\nx0 = i;\ntopLoop:\nfor (j = 0; j &lt; height; j++) {\n    for (i = 0; i &lt; width; i++) {\n        if (pixels[(j*width+i)*4] != 0) {\n            break topLoop;\n        }\n    }\n}\ny0 = j;\nrightLoop:\nfor (i = width-1; i &gt;= 0; i--) {\n    for (j = 0; j &lt; height; j++) {\n        if (pixels[(j*width+i)*4] != 0) {\n            break rightLoop;\n        }\n    }\n}\nx1 = i+1;\nbottomLoop:\nfor (j = height-1; j &gt;= 0; j--) {\n    for (i = 0; i &lt; width; i++) {\n        if (pixels[(j*width+i)*4] != 0) {\n            break bottomLoop;\n        }\n    }\n}\ny1 = j+1;\nreturn img.getSubimage(x0, y0, x1-x0, y1-y0);\n</code></pre>\n\n<p>}</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":3063996,"reputation":5861,"user_id":2596109,"accept_rate":50,"display_name":"Oleg Mikhailov"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1649668691,"creation_date":1461934470,"answer_id":36938923,"question_id":3224561,"body_markdown":"[![image on transparent background][1]][1]\r\n\r\n  [1]: http://i.stack.imgur.com/1Icj0.png\r\n\r\nThere&#39;s a trivial solution ‚Äì to scan every pixel. The algorithm bellow has a constant performance of `O(w‚Ä¢h)`.\r\n\r\n    private static BufferedImage trimImage(BufferedImage image) {\r\n        int width = image.getWidth();\r\n        int height = image.getHeight();\r\n        int top = height / 2;\r\n        int bottom = top;\r\n        int left = width / 2 ;\r\n        int right = left;\r\n        for (int x = 0; x &lt; width; x++) {\r\n            for (int y = 0; y &lt; height; y++) {\r\n                if (image.getRGB(x, y) != 0){\r\n                    top    = Math.min(top, y);\r\n                    bottom = Math.max(bottom, y);\r\n                    left   = Math.min(left, x);\r\n                    right  = Math.max(right, x);\r\n                }\r\n            }\r\n        }\r\n        return image.getSubimage(left, top, right - left + 1, bottom - top + 1);\r\n    }\r\n\r\nBut this is much more effective:\r\n\r\n    private static BufferedImage trimImage(BufferedImage image) {\r\n        WritableRaster raster = image.getAlphaRaster();\r\n        int width = raster.getWidth();\r\n        int height = raster.getHeight();\r\n        int left = 0;\r\n        int top = 0;\r\n        int right = width - 1;\r\n        int bottom = height - 1;\r\n        int minRight = width - 1;\r\n        int minBottom = height - 1;\r\n\r\n        top:\r\n        for (;top &lt;= bottom; top++){\r\n            for (int x = 0; x &lt; width; x++){\r\n                if (raster.getSample(x, top, 0) != 0){\r\n                    minRight = x;\r\n                    minBottom = top;\r\n                    break top;\r\n                }\r\n            }\r\n        }\r\n\r\n        left:\r\n        for (;left &lt; minRight; left++){\r\n            for (int y = height - 1; y &gt; top; y--){\r\n                if (raster.getSample(left, y, 0) != 0){\r\n                    minBottom = y;\r\n                    break left;\r\n                }\r\n            }\r\n        }\r\n\r\n        bottom:\r\n        for (;bottom &gt; minBottom; bottom--){\r\n            for (int x = width - 1; x &gt;= left; x--){\r\n                if (raster.getSample(x, bottom, 0) != 0){\r\n                    minRight = x;\r\n                    break bottom;\r\n                }\r\n            }\r\n        }\r\n\r\n        right:\r\n        for (;right &gt; minRight; right--){\r\n            for (int y = bottom; y &gt;= top; y--){\r\n                if (raster.getSample(right, y, 0) != 0){\r\n                    break right;\r\n                }\r\n            }\r\n        }\r\n\r\n        return image.getSubimage(left, top, right - left + 1, bottom - top + 1);\r\n    }\r\n\r\n\r\nThis algorithm follows the idea from **pepan**&#39;s answer (see above) and is 2 to 4 times more effective. The difference is: it never scans any pixel twice and tries to contract search range on each stage.\r\n\r\nThe worst case of the method&#39;s performance is `O(w‚Ä¢h‚Äìa‚Ä¢b)`\r\n","title":"Crop image to smallest size by removing transparent pixels in java","body":"<p><a href=\"https://i.stack.imgur.com/1Icj0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1Icj0.png\" alt=\"image on transparent background\" /></a></p>\n<p>There's a trivial solution ‚Äì to scan every pixel. The algorithm bellow has a constant performance of <code>O(w‚Ä¢h)</code>.</p>\n<pre><code>private static BufferedImage trimImage(BufferedImage image) {\n    int width = image.getWidth();\n    int height = image.getHeight();\n    int top = height / 2;\n    int bottom = top;\n    int left = width / 2 ;\n    int right = left;\n    for (int x = 0; x &lt; width; x++) {\n        for (int y = 0; y &lt; height; y++) {\n            if (image.getRGB(x, y) != 0){\n                top    = Math.min(top, y);\n                bottom = Math.max(bottom, y);\n                left   = Math.min(left, x);\n                right  = Math.max(right, x);\n            }\n        }\n    }\n    return image.getSubimage(left, top, right - left + 1, bottom - top + 1);\n}\n</code></pre>\n<p>But this is much more effective:</p>\n<pre><code>private static BufferedImage trimImage(BufferedImage image) {\n    WritableRaster raster = image.getAlphaRaster();\n    int width = raster.getWidth();\n    int height = raster.getHeight();\n    int left = 0;\n    int top = 0;\n    int right = width - 1;\n    int bottom = height - 1;\n    int minRight = width - 1;\n    int minBottom = height - 1;\n\n    top:\n    for (;top &lt;= bottom; top++){\n        for (int x = 0; x &lt; width; x++){\n            if (raster.getSample(x, top, 0) != 0){\n                minRight = x;\n                minBottom = top;\n                break top;\n            }\n        }\n    }\n\n    left:\n    for (;left &lt; minRight; left++){\n        for (int y = height - 1; y &gt; top; y--){\n            if (raster.getSample(left, y, 0) != 0){\n                minBottom = y;\n                break left;\n            }\n        }\n    }\n\n    bottom:\n    for (;bottom &gt; minBottom; bottom--){\n        for (int x = width - 1; x &gt;= left; x--){\n            if (raster.getSample(x, bottom, 0) != 0){\n                minRight = x;\n                break bottom;\n            }\n        }\n    }\n\n    right:\n    for (;right &gt; minRight; right--){\n        for (int y = bottom; y &gt;= top; y--){\n            if (raster.getSample(right, y, 0) != 0){\n                break right;\n            }\n        }\n    }\n\n    return image.getSubimage(left, top, right - left + 1, bottom - top + 1);\n}\n</code></pre>\n<p>This algorithm follows the idea from <strong>pepan</strong>'s answer (see above) and is 2 to 4 times more effective. The difference is: it never scans any pixel twice and tries to contract search range on each stage.</p>\n<p>The worst case of the method's performance is <code>O(w‚Ä¢h‚Äìa‚Ä¢b)</code></p>\n"},{"tags":[],"owner":{"account_id":2192013,"reputation":667,"user_id":1938767,"display_name":"rafaelnaskar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1575224274,"creation_date":1575224274,"answer_id":59128515,"question_id":3224561,"body_markdown":"A simple fix for code above. I used the median for RGB and fixed the min() function of x and y:\r\n\r\n    private static BufferedImage trim(BufferedImage img) {\r\n        int width = img.getWidth();\r\n        int height = img.getHeight();\r\n        \r\n        int top = height / 2;\r\n        int bottom = top;\r\n        \r\n        int left = width / 2 ;\r\n        int right = left;\r\n        \r\n        for (int x = 0; x &lt; width; x++) {\r\n            for (int y = 0; y &lt; height; y++) {\r\n                if (isFg(img.getRGB(x, y))){\r\n                \t\r\n                    top    = Math.min(top, y);\r\n                    bottom = Math.max(bottom, y);\r\n                    \r\n                    left   = Math.min(left, x);\r\n                    right  = Math.max(right, x);\r\n                    \r\n                }\r\n            }\r\n        }\r\n        \r\n        return img.getSubimage(left, top, right - left, bottom - top);\r\n\t}\r\n\r\n\tprivate static boolean isFg(int v) {\r\n\t\tColor c = new Color(v);\r\n\t\treturn(isColor((c.getRed() + c.getGreen() + c.getBlue())/2));\r\n\t}\r\n\t\r\n\tprivate static boolean isColor(int c) {\r\n\t\treturn c &gt; 0 &amp;&amp; c &lt; 255;\r\n    }\r\n\r\n","title":"Crop image to smallest size by removing transparent pixels in java","body":"<p>A simple fix for code above. I used the median for RGB and fixed the min() function of x and y:</p>\n\n<pre><code>private static BufferedImage trim(BufferedImage img) {\n    int width = img.getWidth();\n    int height = img.getHeight();\n\n    int top = height / 2;\n    int bottom = top;\n\n    int left = width / 2 ;\n    int right = left;\n\n    for (int x = 0; x &lt; width; x++) {\n        for (int y = 0; y &lt; height; y++) {\n            if (isFg(img.getRGB(x, y))){\n\n                top    = Math.min(top, y);\n                bottom = Math.max(bottom, y);\n\n                left   = Math.min(left, x);\n                right  = Math.max(right, x);\n\n            }\n        }\n    }\n\n    return img.getSubimage(left, top, right - left, bottom - top);\n}\n\nprivate static boolean isFg(int v) {\n    Color c = new Color(v);\n    return(isColor((c.getRed() + c.getGreen() + c.getBlue())/2));\n}\n\nprivate static boolean isColor(int c) {\n    return c &gt; 0 &amp;&amp; c &lt; 255;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19462487,"reputation":11,"user_id":14236499,"display_name":"Michael"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1599494000,"creation_date":1599494000,"answer_id":63780801,"question_id":3224561,"body_markdown":"[Hi I tried the following. In the images file idle1.png is the image with a big transparent box while testing.png is the same image with minimum bounding box\r\n\r\n    &#39;BufferedImage tempImg = (ImageIO.read(new File(fileNPath)));\r\n                    WritableRaster tempRaster = tempImg.getAlphaRaster();\r\n                    int x1 = getX1(tempRaster);\r\n                    int y1 = getY1(tempRaster);\r\n                    int x2 = getX2(tempRaster);\r\n                    int y2 = getY2(tempRaster);\r\n                    System.out.println(&quot;x1:&quot;+x1+&quot; y1:&quot;+y1+&quot; x2:&quot;+x2+&quot; y2:&quot;+y2);\r\n                    BufferedImage temp = tempImg.getSubimage(x1, y1, x2 - x1, y2 - y1);\r\n\r\n                    //for idle1.png\r\n                    String filePath = fileChooser.getCurrentDirectory() + &quot;\\\\&quot;+&quot;testing.png&quot;;\r\n                    System.out.println(&quot;filePath:&quot;+filePath);\r\n                    ImageIO.write(temp,&quot;png&quot;,new File(filePath));\r\n\r\n\r\nwhere the get functions are\r\n\r\npublic int getY1(WritableRaster raster) {\r\n        //top of character\r\n\r\n        for (int y = 0; y &lt; raster.getHeight(); y++) {\r\n            for (int x = 0; x &lt; raster.getWidth(); x++) {\r\n                if (raster.getSample(x, y,0) != 0) {\r\n                    if(y&gt;0) {\r\n                        return y - 1;\r\n                    }else{\r\n                        return y;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    public int getY2(WritableRaster raster) {\r\n        //ground plane of character\r\n\r\n        for (int y = raster.getHeight()-1; y &gt; 0; y--) {\r\n            for (int x = 0; x &lt; raster.getWidth(); x++) {\r\n                if (raster.getSample(x, y,0) != 0) {\r\n                    return y + 1;\r\n                }\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    public int getX1(WritableRaster raster) {\r\n        //left side of character\r\n\r\n        for (int x = 0; x &lt; raster.getWidth(); x++) {\r\n            for (int y = 0; y &lt; raster.getHeight(); y++) {\r\n                if (raster.getSample(x, y,0) != 0) {\r\n                    if(x &gt; 0){\r\n                        return x - 1;\r\n                    }else{\r\n                        return x;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    public int getX2(WritableRaster raster) {\r\n        //right side of character\r\n\r\n        for (int x = raster.getWidth()-1; x &gt; 0; x--) {\r\n            for (int y = 0; y &lt; raster.getHeight(); y++) {\r\n                if (raster.getSample(x, y,0) != 0) {\r\n                    return x + 1;\r\n                }\r\n            }\r\n        }\r\n        return 0;\r\n    }&#39;[Look at Idle1.png and the minimum bounding box idle = testing.png][1]\r\n\r\n\r\n\r\nThank you for your help regards Michael.Look at Idle1.png and the minimum bounding box idle = testing.png][images here]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/i9tRJ.png\r\n  [images here]: https://i.stack.imgur.com/g34sS.png","title":"Crop image to smallest size by removing transparent pixels in java","body":"<p>[Hi I tried the following. In the images file idle1.png is the image with a big transparent box while testing.png is the same image with minimum bounding box</p>\n<pre><code>'BufferedImage tempImg = (ImageIO.read(new File(fileNPath)));\n                WritableRaster tempRaster = tempImg.getAlphaRaster();\n                int x1 = getX1(tempRaster);\n                int y1 = getY1(tempRaster);\n                int x2 = getX2(tempRaster);\n                int y2 = getY2(tempRaster);\n                System.out.println(&quot;x1:&quot;+x1+&quot; y1:&quot;+y1+&quot; x2:&quot;+x2+&quot; y2:&quot;+y2);\n                BufferedImage temp = tempImg.getSubimage(x1, y1, x2 - x1, y2 - y1);\n\n                //for idle1.png\n                String filePath = fileChooser.getCurrentDirectory() + &quot;\\\\&quot;+&quot;testing.png&quot;;\n                System.out.println(&quot;filePath:&quot;+filePath);\n                ImageIO.write(temp,&quot;png&quot;,new File(filePath));\n</code></pre>\n<p>where the get functions are</p>\n<p>public int getY1(WritableRaster raster) {\n//top of character</p>\n<pre><code>    for (int y = 0; y &lt; raster.getHeight(); y++) {\n        for (int x = 0; x &lt; raster.getWidth(); x++) {\n            if (raster.getSample(x, y,0) != 0) {\n                if(y&gt;0) {\n                    return y - 1;\n                }else{\n                    return y;\n                }\n            }\n        }\n    }\n    return 0;\n}\n\npublic int getY2(WritableRaster raster) {\n    //ground plane of character\n\n    for (int y = raster.getHeight()-1; y &gt; 0; y--) {\n        for (int x = 0; x &lt; raster.getWidth(); x++) {\n            if (raster.getSample(x, y,0) != 0) {\n                return y + 1;\n            }\n        }\n    }\n    return 0;\n}\n\npublic int getX1(WritableRaster raster) {\n    //left side of character\n\n    for (int x = 0; x &lt; raster.getWidth(); x++) {\n        for (int y = 0; y &lt; raster.getHeight(); y++) {\n            if (raster.getSample(x, y,0) != 0) {\n                if(x &gt; 0){\n                    return x - 1;\n                }else{\n                    return x;\n                }\n            }\n        }\n    }\n    return 0;\n}\n\npublic int getX2(WritableRaster raster) {\n    //right side of character\n\n    for (int x = raster.getWidth()-1; x &gt; 0; x--) {\n        for (int y = 0; y &lt; raster.getHeight(); y++) {\n            if (raster.getSample(x, y,0) != 0) {\n                return x + 1;\n            }\n        }\n    }\n    return 0;\n}'[Look at Idle1.png and the minimum bounding box idle = testing.png][1]\n</code></pre>\n<p>Thank you for your help regards Michael.Look at Idle1.png and the minimum bounding box idle = testing.png]<a href=\"https://i.stack.imgur.com/g34sS.png\" rel=\"nofollow noreferrer\">images here</a></p>\n"}],"owner":{"account_id":19172,"reputation":1610,"user_id":44700,"accept_rate":100,"display_name":"Ruggs"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8431,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":3224609,"answer_count":6,"score":4,"last_activity_date":1649668691,"creation_date":1278880947,"question_id":3224561,"body_markdown":"I have a sprite sheet which has each image centered in a 32x32 cell.  The actual images are not 32x32, but slightly smaller.  What I&#39;d like to do is take a cell and crop the transparent pixels so the image is as small as it can be.\r\n\r\nHow would I do that in Java (JDK 6)?\r\n\r\nHere is an example of how I&#39;m currently breaking up the tile sheet into cells:\r\n\r\n    BufferedImage tilesheet = ImageIO.read(getClass().getResourceAsStream(&quot;/sheet.png&quot;);\r\n    for (int i = 0; i &lt; 15; i++) {\r\n      Image img = tilesheet.getSubimage(i * 32, 0, 32, 32);\r\n      // crop here..\r\n    }\r\n\r\nMy current idea was to test each pixel from the center working my way out to see if it is transparent, but I was wondering if there would be a faster/cleaner way of doing this.","title":"Crop image to smallest size by removing transparent pixels in java","body":"<p>I have a sprite sheet which has each image centered in a 32x32 cell.  The actual images are not 32x32, but slightly smaller.  What I'd like to do is take a cell and crop the transparent pixels so the image is as small as it can be.</p>\n\n<p>How would I do that in Java (JDK 6)?</p>\n\n<p>Here is an example of how I'm currently breaking up the tile sheet into cells:</p>\n\n<pre><code>BufferedImage tilesheet = ImageIO.read(getClass().getResourceAsStream(\"/sheet.png\");\nfor (int i = 0; i &lt; 15; i++) {\n  Image img = tilesheet.getSubimage(i * 32, 0, 32, 32);\n  // crop here..\n}\n</code></pre>\n\n<p>My current idea was to test each pixel from the center working my way out to see if it is transparent, but I was wondering if there would be a faster/cleaner way of doing this.</p>\n"},{"tags":["java","c++","arduino","arduino-uno","hc-05"],"answers":[{"tags":[],"owner":{"account_id":2731479,"reputation":2519,"user_id":2355176,"accept_rate":50,"display_name":"Zain Ul Abidin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1649668685,"creation_date":1649668685,"answer_id":71825367,"question_id":71758666,"body_markdown":"Finally i myself figured out the issue, basically the problem was with the EEPROM of the Arduino the problematic section of the code is following\r\n\r\n    String admin = ReadAdmin();\r\n    if(admin == &quot;&quot;)\r\n    {\r\n         //on first run it never returned empty string, may be my reading function bug\r\n         admin = doc[&quot;admin&quot;];\r\n         WriteAdmin(admin);\r\n    }\r\n                \r\n    if(admin == doc[&quot;admin&quot;])\r\n    {\r\n         //due to garbage value compared with actual one this block never executed\r\n         rocessCommand((const char*) doc[&quot;command&quot;]);\r\n    }\r\n    else\r\n    {\r\n         Blink(ledfalse, 2);\r\n    }\r\n\r\nFirst condition is for the first run so that when there is no admin stored in the EEPROM, then store the one coming in the JSON, but i don&#39;t know why but it was always some garbage value instead of empty or null string that&#39;s why the admin was not being matched e.g. the garbage value and the one received in JSON and thus not running the Unlock sequence","title":"Arduino Servo working in setup function but not with bluetooth command","body":"<p>Finally i myself figured out the issue, basically the problem was with the EEPROM of the Arduino the problematic section of the code is following</p>\n<pre><code>String admin = ReadAdmin();\nif(admin == &quot;&quot;)\n{\n     //on first run it never returned empty string, may be my reading function bug\n     admin = doc[&quot;admin&quot;];\n     WriteAdmin(admin);\n}\n            \nif(admin == doc[&quot;admin&quot;])\n{\n     //due to garbage value compared with actual one this block never executed\n     rocessCommand((const char*) doc[&quot;command&quot;]);\n}\nelse\n{\n     Blink(ledfalse, 2);\n}\n</code></pre>\n<p>First condition is for the first run so that when there is no admin stored in the EEPROM, then store the one coming in the JSON, but i don't know why but it was always some garbage value instead of empty or null string that's why the admin was not being matched e.g. the garbage value and the one received in JSON and thus not running the Unlock sequence</p>\n"}],"owner":{"account_id":2731479,"reputation":2519,"user_id":2355176,"accept_rate":50,"display_name":"Zain Ul Abidin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":71825367,"answer_count":1,"score":-1,"last_activity_date":1649668685,"creation_date":1649194607,"question_id":71758666,"body_markdown":"i am experiencing a very strange issue, i wrote code for arduino UNO 3 which is designed to unlock door using servo motor, components attached are following\r\n\r\n 1. Servo Motor\r\n 2. 1 Red Led (for failure alert)\r\n 3. 1 Green Led (for success alert)\r\n 4. 1 Buzzer (for audible alert on unlock)\r\n\r\nThe code is following\r\n\r\n    #include &lt;Arduino_JSON.h&gt;\r\n    #include &lt;SoftwareSerial.h&gt;\r\n    #include &lt;EEPROM.h&gt;\r\n    #include &lt;Servo.h&gt;\r\n    \r\n    String com = &quot;&quot;;\r\n    \r\n    const int buzzer    = 6;\r\n    const int ledfalse  = 8;\r\n    const int ledtrue   = 13;\r\n    const int servo     = 11;\r\n    \r\n    Servo myservo;\r\n    SoftwareSerial mySerial(2, 3);\r\n    \r\n    void ResetAdmin()\r\n    {\r\n        for (int i = 0 ; i &lt; EEPROM.length() ; i++)\r\n    \t\t    EEPROM.write(i, 0);\r\n    \r\n        Blink(ledtrue, 2);\r\n    }\r\n    \r\n    void WriteAdmin(String admin)\r\n    {\r\n        byte len = admin.length();\r\n        EEPROM.write(0, len);\r\n        for (int i = 0; i &lt; len; i++)\r\n        {\r\n            EEPROM.write(i + 1, admin[i]);\r\n        }\r\n    \t\r\n        Blink(ledtrue, 2);\r\n    }\r\n    \r\n    String ReadAdmin()\r\n    {\r\n        int newStrLen = EEPROM.read(0);\r\n        char data[newStrLen + 1];\r\n        for (int i = 0; i &lt; newStrLen; i++)\r\n        {\r\n            data[i] = EEPROM.read(i + 1);\r\n        }\r\n        \r\n        data[newStrLen] = &#39;\\0&#39;;\r\n        return String(data);\r\n    }\r\n    \r\n    void Unlock()\r\n    {\r\n        Alert();\r\n        myservo.write(0);\r\n        delay(500);\r\n        myservo.write(90);\r\n        delay(6500);\r\n        myservo.write(360);\r\n        delay(500);\r\n        myservo.write(90);\r\n    }\r\n    \r\n    void Blink(int type, int times)\r\n    {\r\n    \t  for(int i = 1; i &lt;= times; i++)\r\n    \t  {\r\n    \t\t    digitalWrite(type, HIGH);\r\n    \t\t    delay(80);\r\n    \t\t    digitalWrite(type, LOW);\r\n    \t\t    delay(80);\r\n    \t  }\r\n    }\r\n    \r\n    void Alert()\r\n    {\r\n    \t  for(int i = 1; i &lt;= 4; i++)\r\n    \t  {\r\n    \t\t    tone(buzzer, 1000);\r\n    \t\t    delay(80);\r\n    \t\t    noTone(buzzer);\r\n    \t\t    delay(80);\r\n    \t  }\r\n    }\r\n    \r\n    void ProcessCommand(String command)\r\n    {\r\n    \t  if(command == &quot;unlock&quot;)\r\n    \t\t    Unlock(); //not works here\r\n    \t  else if(command == &quot;reset&quot;)\r\n    \t\t    ResetAdmin();\r\n    \t  else\r\n    \t  {\r\n    \t\t    Blink(ledfalse, 2);\r\n    \t  }\r\n    }\r\n    \r\n    void setup() \r\n    { \r\n        myservo.attach(servo);\r\n        mySerial.begin(9600);\r\n    \r\n        pinMode(buzzer, OUTPUT);\r\n    \t  pinMode(ledfalse, OUTPUT);\r\n    \t  pinMode(ledtrue, OUTPUT);\r\n         //Unlock() or Blink(ledtrue, 4) or Alert() works here    \r\n\r\n        digitalWrite(ledtrue, HIGH);\r\n        digitalWrite(ledfalse, HIGH);\r\n        delay(3000);\r\n        digitalWrite(ledtrue, LOW);\r\n        digitalWrite(ledfalse, LOW);\r\n    }\r\n    \r\n    void loop()\r\n    {\r\n        while(mySerial.available() &gt; 0)\r\n    \t  {\r\n    \t\t    delay(10);\r\n    \t\t    com += (char)Serial.read();\r\n    \t  }\r\n    \t\r\n    \t  if(com.length() &gt; 0)\r\n    \t  {\r\n    \t\t    JSONVar doc = JSON.parse(com);\r\n    \r\n    \t\t    if (JSON.typeof(doc) != &quot;undefined&quot;) \r\n    \t\t    {\r\n    \t\t\t      String admin = ReadAdmin();\r\n    \t\t\t      if(admin == &quot;&quot;)\r\n    \t\t\t      {\r\n    \t\t\t\t        admin = doc[&quot;admin&quot;];\r\n    \t\t\t\t        WriteAdmin(admin);\r\n    \t\t\t      }\r\n    \t\t\t\r\n    \t\t\t      if(admin == doc[&quot;admin&quot;])\r\n    \t\t\t      {\r\n    \t\t\t\t        ProcessCommand((const char*) doc[&quot;command&quot;]);\r\n    \t\t\t      }\r\n    \t\t\t      else\r\n    \t\t\t      {\r\n    \t\t\t\t        Blink(ledfalse, 2);\r\n    \t\t\t      }\r\n    \t\t    }\r\n    \t\t    else\r\n    \t\t    {\r\n    \t\t\t      Blink(ledfalse, 2);\r\n    \t\t    }\r\n    \t\t\r\n    \t\t    com = &quot;&quot;;\r\n    \t  }\r\n    \t\r\n    \t  delay(10);\r\n    }\r\n\r\n\r\nThe java snippet for sending command is following\r\n\r\n    private void Unlock() {\r\n            if (btSocket != null) {\r\n                try {\r\n                    String payload = &quot;{\\&quot;admin\\&quot;: \\&quot;&quot; + getUUID() + &quot;\\&quot;, \\&quot;command\\&quot;: \\&quot;unlock\\&quot;}&quot;;\r\n                    btSocket.getOutputStream().write(payload.getBytes());\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                    biometricLoginButton.setImageResource(R.drawable.warning);\r\n                    failed = true;\r\n                    Toast.makeText(getBaseContext(), &quot;Error occurred while unlocking&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n            } else {\r\n                Toast.makeText(getBaseContext(), &quot;Door Lock not connected&quot;, Toast.LENGTH_SHORT).show();\r\n                biometricLoginButton.setImageResource(R.drawable.warning);\r\n                failed = true;\r\n            }\r\n        }\r\n\r\nThe issue is when i put the `Alert()`, `Unlock()` &amp; `Blink()` function in the Arduino setup function then alert is working fine and so do the other two, but when the same functions called using Bluetooth signal none of them works. Note that the function is called as servo try to move but not correctly, this shows  that Bluetooth is receiving data correctly from android and conditions are being evaluated correctly.","title":"Arduino Servo working in setup function but not with bluetooth command","body":"<p>i am experiencing a very strange issue, i wrote code for arduino UNO 3 which is designed to unlock door using servo motor, components attached are following</p>\n<ol>\n<li>Servo Motor</li>\n<li>1 Red Led (for failure alert)</li>\n<li>1 Green Led (for success alert)</li>\n<li>1 Buzzer (for audible alert on unlock)</li>\n</ol>\n<p>The code is following</p>\n<pre><code>#include &lt;Arduino_JSON.h&gt;\n#include &lt;SoftwareSerial.h&gt;\n#include &lt;EEPROM.h&gt;\n#include &lt;Servo.h&gt;\n\nString com = &quot;&quot;;\n\nconst int buzzer    = 6;\nconst int ledfalse  = 8;\nconst int ledtrue   = 13;\nconst int servo     = 11;\n\nServo myservo;\nSoftwareSerial mySerial(2, 3);\n\nvoid ResetAdmin()\n{\n    for (int i = 0 ; i &lt; EEPROM.length() ; i++)\n            EEPROM.write(i, 0);\n\n    Blink(ledtrue, 2);\n}\n\nvoid WriteAdmin(String admin)\n{\n    byte len = admin.length();\n    EEPROM.write(0, len);\n    for (int i = 0; i &lt; len; i++)\n    {\n        EEPROM.write(i + 1, admin[i]);\n    }\n    \n    Blink(ledtrue, 2);\n}\n\nString ReadAdmin()\n{\n    int newStrLen = EEPROM.read(0);\n    char data[newStrLen + 1];\n    for (int i = 0; i &lt; newStrLen; i++)\n    {\n        data[i] = EEPROM.read(i + 1);\n    }\n    \n    data[newStrLen] = '\\0';\n    return String(data);\n}\n\nvoid Unlock()\n{\n    Alert();\n    myservo.write(0);\n    delay(500);\n    myservo.write(90);\n    delay(6500);\n    myservo.write(360);\n    delay(500);\n    myservo.write(90);\n}\n\nvoid Blink(int type, int times)\n{\n      for(int i = 1; i &lt;= times; i++)\n      {\n            digitalWrite(type, HIGH);\n            delay(80);\n            digitalWrite(type, LOW);\n            delay(80);\n      }\n}\n\nvoid Alert()\n{\n      for(int i = 1; i &lt;= 4; i++)\n      {\n            tone(buzzer, 1000);\n            delay(80);\n            noTone(buzzer);\n            delay(80);\n      }\n}\n\nvoid ProcessCommand(String command)\n{\n      if(command == &quot;unlock&quot;)\n            Unlock(); //not works here\n      else if(command == &quot;reset&quot;)\n            ResetAdmin();\n      else\n      {\n            Blink(ledfalse, 2);\n      }\n}\n\nvoid setup() \n{ \n    myservo.attach(servo);\n    mySerial.begin(9600);\n\n    pinMode(buzzer, OUTPUT);\n      pinMode(ledfalse, OUTPUT);\n      pinMode(ledtrue, OUTPUT);\n     //Unlock() or Blink(ledtrue, 4) or Alert() works here    \n\n    digitalWrite(ledtrue, HIGH);\n    digitalWrite(ledfalse, HIGH);\n    delay(3000);\n    digitalWrite(ledtrue, LOW);\n    digitalWrite(ledfalse, LOW);\n}\n\nvoid loop()\n{\n    while(mySerial.available() &gt; 0)\n      {\n            delay(10);\n            com += (char)Serial.read();\n      }\n    \n      if(com.length() &gt; 0)\n      {\n            JSONVar doc = JSON.parse(com);\n\n            if (JSON.typeof(doc) != &quot;undefined&quot;) \n            {\n                  String admin = ReadAdmin();\n                  if(admin == &quot;&quot;)\n                  {\n                        admin = doc[&quot;admin&quot;];\n                        WriteAdmin(admin);\n                  }\n            \n                  if(admin == doc[&quot;admin&quot;])\n                  {\n                        ProcessCommand((const char*) doc[&quot;command&quot;]);\n                  }\n                  else\n                  {\n                        Blink(ledfalse, 2);\n                  }\n            }\n            else\n            {\n                  Blink(ledfalse, 2);\n            }\n        \n            com = &quot;&quot;;\n      }\n    \n      delay(10);\n}\n</code></pre>\n<p>The java snippet for sending command is following</p>\n<pre><code>private void Unlock() {\n        if (btSocket != null) {\n            try {\n                String payload = &quot;{\\&quot;admin\\&quot;: \\&quot;&quot; + getUUID() + &quot;\\&quot;, \\&quot;command\\&quot;: \\&quot;unlock\\&quot;}&quot;;\n                btSocket.getOutputStream().write(payload.getBytes());\n            } catch (Exception e) {\n                e.printStackTrace();\n                biometricLoginButton.setImageResource(R.drawable.warning);\n                failed = true;\n                Toast.makeText(getBaseContext(), &quot;Error occurred while unlocking&quot;, Toast.LENGTH_SHORT).show();\n            }\n        } else {\n            Toast.makeText(getBaseContext(), &quot;Door Lock not connected&quot;, Toast.LENGTH_SHORT).show();\n            biometricLoginButton.setImageResource(R.drawable.warning);\n            failed = true;\n        }\n    }\n</code></pre>\n<p>The issue is when i put the <code>Alert()</code>, <code>Unlock()</code> &amp; <code>Blink()</code> function in the Arduino setup function then alert is working fine and so do the other two, but when the same functions called using Bluetooth signal none of them works. Note that the function is called as servo try to move but not correctly, this shows  that Bluetooth is receiving data correctly from android and conditions are being evaluated correctly.</p>\n"},{"tags":["java","html","spring-boot","thymeleaf","bootstrap-5"],"answers":[{"tags":[],"owner":{"account_id":6734881,"reputation":2313,"user_id":5190019,"accept_rate":91,"display_name":"Asoub"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649668306,"creation_date":1649419799,"answer_id":71796760,"question_id":71795281,"body_markdown":"If projects/sample.html is your template forlder, then try:\r\n\r\n    &lt;div th:insert&quot;~{projects/sample :: content}&quot;&gt;&lt;/div&gt;\r\n\r\nIf you want to change loaded template in real time (on click) you can:\r\n\r\n - Use dynamic loading: This question is close to yours: https://stackoverflow.com/questions/22692712/when-click-on-list-item-hide-other-items\r\n\r\n - Load the div, hide it by CSS and display it with javascript: https://stackoverflow.com/questions/17561093/how-to-show-and-hide-a-simple-ol-list-with-onclick  (and to use JS with thymeleaf https://stackoverflow.com/questions/26526037/javascript-function-call-with-thymeleaf )\r\n\r\n - Lastly, if you ould like to load the full content depending on the current URL, I think you&#39;re taking the problem on the wrong end. Every page should include the header/menu/footer (by referencing them as insert), and use th:href to load content depending on the url (see https://stackoverflow.com/questions/33753975/thymeleaf-using-path-variables-to-thhref)\r\n","title":"Attaching a specific fragment to a springboot thymeleaf project","body":"<p>If projects/sample.html is your template forlder, then try:</p>\n<pre><code>&lt;div th:insert&quot;~{projects/sample :: content}&quot;&gt;&lt;/div&gt;\n</code></pre>\n<p>If you want to change loaded template in real time (on click) you can:</p>\n<ul>\n<li><p>Use dynamic loading: This question is close to yours: <a href=\"https://stackoverflow.com/questions/22692712/when-click-on-list-item-hide-other-items\">when click on list item hide other items</a></p>\n</li>\n<li><p>Load the div, hide it by CSS and display it with javascript: <a href=\"https://stackoverflow.com/questions/17561093/how-to-show-and-hide-a-simple-ol-list-with-onclick\">How to show and hide a simple &lt;ol&gt; list with onclick?</a>  (and to use JS with thymeleaf <a href=\"https://stackoverflow.com/questions/26526037/javascript-function-call-with-thymeleaf\">Javascript function call with Thymeleaf</a> )</p>\n</li>\n<li><p>Lastly, if you ould like to load the full content depending on the current URL, I think you're taking the problem on the wrong end. Every page should include the header/menu/footer (by referencing them as insert), and use th:href to load content depending on the url (see <a href=\"https://stackoverflow.com/questions/33753975/thymeleaf-using-path-variables-to-thhref\">Thymeleaf using path variables to th:href</a>)</p>\n</li>\n</ul>\n"}],"owner":{"account_id":24273531,"reputation":481,"user_id":18221164,"display_name":"RCB"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":540,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649668306,"creation_date":1649412903,"question_id":71795281,"body_markdown":"I have a navbar with a list. One of the elements in the list is a dropdown, which consists of one entry. On click of this entry, I would like to see a fragment of another html page in the project.\r\n\r\nI have a navbar html file: \r\n```\r\n&lt;div th:fragment=&quot;navbar&quot;&gt;\r\n\t\t&lt;nav class=&quot;navbar navbar-expand-lg navbar-dark bg-primary&quot;&gt;\r\n\t\t\t&lt;button class=&quot;navbar-toggler&quot; type=&quot;button&quot; data-toggle=&quot;collapse&quot;\r\n\t\t\t\tdata-target=&quot;#navbarTogglerDemo03&quot;\r\n\t\t\t\taria-controls=&quot;navbarTogglerDemo03&quot; aria-expanded=&quot;false&quot;\r\n\t\t\t\taria-label=&quot;Toggle navigation&quot;&gt;\r\n\t\t\t\t&lt;span class=&quot;navbar-toggler-icon&quot;&gt;&lt;/span&gt;\r\n\t\t\t&lt;/button&gt;\r\n\t\t\t&lt;div class=&quot;collapse navbar-collapse&quot;&gt;\r\n \t\t\t\t&lt;ul class=&quot;navbar-nav mr-auto mt-2 mt-lg-0&quot;&gt; \r\n\t\t\t\t\t&lt;li class=&quot;nav-item dropdown&quot;&gt;\r\n\t\t\t\t\t\t&lt;a\r\n\t\t\t\t\t\t\tclass=&quot;nav-link dropdown-toggle&quot; href=&quot;#&quot;\r\n\t\t\t\t\t\t\tid=&quot;navbarDropdownMenuLink&quot;\r\n\t\t\t\t\t\t\trole=&quot;button&quot;\r\n\t\t\t\t\t\t\tdata-bs-toggle=&quot;dropdown&quot;&gt;\r\n\t\t\t\t\t\t\tProjects \r\n\t\t\t\t\t\t &lt;/a&gt;\r\n\t\t\t\t\t\t&lt;ul class=&quot;dropdown-menu&quot; aria-labelledby=&quot;navbarDropdownMenuLink&quot;&gt;\r\n\t\t\t\t\t\t\t&lt;li&gt;&lt;a class=&quot;dropdown-item&quot; \r\n\t\t\t\t\t\t\t\thref=&quot;projects/sample.html#content&quot;&gt; ProjectList&lt;/a&gt; &lt;!--error--&gt;\r\n                          &lt;/li&gt;\r\n\t\t\t\t\t\t&lt;/ul&gt;\r\n\t\t\t\t&lt;/ul&gt;\r\n\t\t\t&lt;/div&gt;\r\n\r\n\t\t&lt;/nav&gt;\r\n\t&lt;/div&gt;\r\n```\r\nAnd the project structure:\r\n I have a folder named  *projects* inside src/main/resources, and within the *projects* folder, I have an html file *sample.html* and it has a fragment *content*\r\n\r\n```\r\n&lt;div th:fragment=&quot;content&quot;&gt;\r\n\t\t\r\n&lt;/div&gt;\r\n```\r\n\r\n---- UPDATE---\r\n\r\nadding an image: \r\n[![Image][1]][1]\r\n\r\nSo currently, I want a fragment to be shown only when I click on the element in the dropdown &quot;ProjectList&quot;. So I am thinking the link should happen in the href tag?\r\nBut not able to understand how.\r\nany guidance here would be helpful\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/q0izy.png","title":"Attaching a specific fragment to a springboot thymeleaf project","body":"<p>I have a navbar with a list. One of the elements in the list is a dropdown, which consists of one entry. On click of this entry, I would like to see a fragment of another html page in the project.</p>\n<p>I have a navbar html file:</p>\n<pre><code>&lt;div th:fragment=&quot;navbar&quot;&gt;\n        &lt;nav class=&quot;navbar navbar-expand-lg navbar-dark bg-primary&quot;&gt;\n            &lt;button class=&quot;navbar-toggler&quot; type=&quot;button&quot; data-toggle=&quot;collapse&quot;\n                data-target=&quot;#navbarTogglerDemo03&quot;\n                aria-controls=&quot;navbarTogglerDemo03&quot; aria-expanded=&quot;false&quot;\n                aria-label=&quot;Toggle navigation&quot;&gt;\n                &lt;span class=&quot;navbar-toggler-icon&quot;&gt;&lt;/span&gt;\n            &lt;/button&gt;\n            &lt;div class=&quot;collapse navbar-collapse&quot;&gt;\n                &lt;ul class=&quot;navbar-nav mr-auto mt-2 mt-lg-0&quot;&gt; \n                    &lt;li class=&quot;nav-item dropdown&quot;&gt;\n                        &lt;a\n                            class=&quot;nav-link dropdown-toggle&quot; href=&quot;#&quot;\n                            id=&quot;navbarDropdownMenuLink&quot;\n                            role=&quot;button&quot;\n                            data-bs-toggle=&quot;dropdown&quot;&gt;\n                            Projects \n                         &lt;/a&gt;\n                        &lt;ul class=&quot;dropdown-menu&quot; aria-labelledby=&quot;navbarDropdownMenuLink&quot;&gt;\n                            &lt;li&gt;&lt;a class=&quot;dropdown-item&quot; \n                                href=&quot;projects/sample.html#content&quot;&gt; ProjectList&lt;/a&gt; &lt;!--error--&gt;\n                          &lt;/li&gt;\n                        &lt;/ul&gt;\n                &lt;/ul&gt;\n            &lt;/div&gt;\n\n        &lt;/nav&gt;\n    &lt;/div&gt;\n</code></pre>\n<p>And the project structure:\nI have a folder named  <em>projects</em> inside src/main/resources, and within the <em>projects</em> folder, I have an html file <em>sample.html</em> and it has a fragment <em>content</em></p>\n<pre><code>&lt;div th:fragment=&quot;content&quot;&gt;\n        \n&lt;/div&gt;\n</code></pre>\n<p>---- UPDATE---</p>\n<p>adding an image:\n<a href=\"https://i.stack.imgur.com/q0izy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/q0izy.png\" alt=\"Image\" /></a></p>\n<p>So currently, I want a fragment to be shown only when I click on the element in the dropdown &quot;ProjectList&quot;. So I am thinking the link should happen in the href tag?\nBut not able to understand how.\nany guidance here would be helpful</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":85850,"reputation":8741,"user_id":239101,"accept_rate":57,"display_name":"David Soroko"},"score":1,"creation_date":1604680564,"post_id":64718371,"comment_id":114429945,"body_markdown":"Please paste the actual error.","body":"Please paste the actual error."},{"owner":{"account_id":3649667,"reputation":1341,"user_id":3042145,"accept_rate":75,"display_name":"kism3t"},"score":0,"creation_date":1604680643,"post_id":64718371,"comment_id":114429981,"body_markdown":"Furthermore give the calling method and content of matrix","body":"Furthermore give the calling method and content of matrix"},{"owner":{"account_id":17102395,"reputation":435,"user_id":12375196,"display_name":"Spyromancer"},"score":0,"creation_date":1604680751,"post_id":64718371,"comment_id":114430041,"body_markdown":"@David Soroko Variable &#39;count&#39; is assigned but never accessed","body":"@David Soroko Variable &#39;count&#39; is assigned but never accessed"},{"owner":{"account_id":85850,"reputation":8741,"user_id":239101,"accept_rate":57,"display_name":"David Soroko"},"score":0,"creation_date":1604680777,"post_id":64718371,"comment_id":114430052,"body_markdown":"is that a compiler error or an IDE warning?","body":"is that a compiler error or an IDE warning?"},{"owner":{"account_id":17102395,"reputation":435,"user_id":12375196,"display_name":"Spyromancer"},"score":0,"creation_date":1604680828,"post_id":64718371,"comment_id":114430084,"body_markdown":"@David Soroko yes, IDE warning","body":"@David Soroko yes, IDE warning"},{"owner":{"account_id":198018,"reputation":8276,"user_id":442451,"accept_rate":100,"display_name":"GriffeyDog"},"score":0,"creation_date":1604680851,"post_id":64718371,"comment_id":114430097,"body_markdown":"You never _use (read from)_ the variable `count`, you just assign to it.","body":"You never <i>use (read from)</i> the variable <code>count</code>, you just assign to it."},{"owner":{"account_id":17102395,"reputation":435,"user_id":12375196,"display_name":"Spyromancer"},"score":0,"creation_date":1604680908,"post_id":64718371,"comment_id":114430127,"body_markdown":"@David Soroko IDE warning","body":"@David Soroko IDE warning"},{"owner":{"account_id":85850,"reputation":8741,"user_id":239101,"accept_rate":57,"display_name":"David Soroko"},"score":0,"creation_date":1604680917,"post_id":64718371,"comment_id":114430131,"body_markdown":"Then I think you have your answer in other comments.","body":"Then I think you have your answer in other comments."},{"owner":{"account_id":17102395,"reputation":435,"user_id":12375196,"display_name":"Spyromancer"},"score":0,"creation_date":1604681013,"post_id":64718371,"comment_id":114430167,"body_markdown":"@David Soroko I figured out, I&#39;m new to java and come from c so I thought there was an error I was not aware of, thanks anyway","body":"@David Soroko I figured out, I&#39;m new to java and come from c so I thought there was an error I was not aware of, thanks anyway"},{"owner":{"account_id":85850,"reputation":8741,"user_id":239101,"accept_rate":57,"display_name":"David Soroko"},"score":0,"creation_date":1604681036,"post_id":64718371,"comment_id":114430173,"body_markdown":"NP and good luck with Java!","body":"NP and good luck with Java!"}],"answers":[{"tags":[],"owner":{"account_id":17102395,"reputation":435,"user_id":12375196,"display_name":"Spyromancer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1649667867,"creation_date":1649667867,"answer_id":71825194,"question_id":64718371,"body_markdown":"Like GriffeyDog wrote: You never use (read from) the variable count, you just assign to it. That was the problem.","title":"Variable is assigned but never accessed","body":"<p>Like GriffeyDog wrote: You never use (read from) the variable count, you just assign to it. That was the problem.</p>\n"}],"owner":{"account_id":17102395,"reputation":435,"user_id":12375196,"display_name":"Spyromancer"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":920,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":71825194,"answer_count":1,"score":-1,"last_activity_date":1649667867,"creation_date":1604680427,"question_id":64718371,"body_markdown":"I&#39;m new to Java and trying to do a simple count operation in a for loop:\r\n ```\r\npublic boolean play(Matrix matrix){\r\n        int dimension = matrix.getDimension();\r\n        int count=0;\r\n        for(int x=0;x&lt;dimension;x++){\r\n            for(int y=0;y&lt;dimension;y++){\r\n                count++;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n ```\r\nThe error I get is related to count and is as in the title: Variable is assigned but never accessed.\r\nThe variable count should have been initialized outside the for loop and then accessed inside the for loop, I don&#39;t understand where the problem is located.","title":"Variable is assigned but never accessed","body":"<p>I'm new to Java and trying to do a simple count operation in a for loop:</p>\n<pre><code>public boolean play(Matrix matrix){\n       int dimension = matrix.getDimension();\n       int count=0;\n       for(int x=0;x&lt;dimension;x++){\n           for(int y=0;y&lt;dimension;y++){\n               count++;\n           }\n       }\n       return true;\n   }\n</code></pre>\n<p>The error I get is related to count and is as in the title: Variable is assigned but never accessed.\nThe variable count should have been initialized outside the for loop and then accessed inside the for loop, I don't understand where the problem is located.</p>\n"},{"tags":["java","android","sockets","tcp","tcpclient"],"comments":[{"owner":{"account_id":5959776,"reputation":2659,"user_id":4685284,"accept_rate":83,"display_name":"Shahbaz Hashmi"},"score":0,"creation_date":1493145358,"post_id":43618222,"comment_id":74285749,"body_markdown":"Cant share that doc. Just wanna know how to send these params","body":"Cant share that doc. Just wanna know how to send these params"},{"owner":{"account_id":1288816,"reputation":4033,"user_id":1241334,"accept_rate":100,"display_name":"Jonny Henly"},"score":1,"creation_date":1493146157,"post_id":43618222,"comment_id":74286245,"body_markdown":"Since you&#39;re dealing with sending bytes you&#39;ll (probably) want to use a `DataInputStream` and a `DataOutputStream`. I&#39;d use one byte array of length `7` to store `Header Start` through `Payload Length`. Then another byte array, with max length `(2^15)`, to store the `Payload Data` and `CRC`. I&#39;d then concatenate both arrays into a byte array of size `7 + (2^15)` and write that array using `DataOutputStream#write(byte[] array, int offset, int length)`, where `offset` would be `0` and `length` would be `7 + (2^15)`. This however is a very low level approach.","body":"Since you&#39;re dealing with sending bytes you&#39;ll (probably) want to use a <code>DataInputStream</code> and a <code>DataOutputStream</code>. I&#39;d use one byte array of length <code>7</code> to store <code>Header Start</code> through <code>Payload Length</code>. Then another byte array, with max length <code>(2^15)</code>, to store the <code>Payload Data</code> and <code>CRC</code>. I&#39;d then concatenate both arrays into a byte array of size <code>7 + (2^15)</code> and write that array using <code>DataOutputStream#write(byte[] array, int offset, int length)</code>, where <code>offset</code> would be <code>0</code> and <code>length</code> would be <code>7 + (2^15)</code>. This however is a very low level approach."},{"owner":{"account_id":5959776,"reputation":2659,"user_id":4685284,"accept_rate":83,"display_name":"Shahbaz Hashmi"},"score":0,"creation_date":1493146453,"post_id":43618222,"comment_id":74286416,"body_markdown":"Can you please post an answer with some codes. And what about payload data. What would be its structure","body":"Can you please post an answer with some codes. And what about payload data. What would be its structure"},{"owner":{"account_id":1288816,"reputation":4033,"user_id":1241334,"accept_rate":100,"display_name":"Jonny Henly"},"score":1,"creation_date":1493146832,"post_id":43618222,"comment_id":74286653,"body_markdown":"I would but I&#39;m late for work. Thank you for editing your question, I changed my downvote for your question to an upvote due to your edit and because I&#39;m interested in seeing some answers to this question. I&#39;ll check later after work and see if any answers have been posted, if not I&#39;ll try and formulate one.","body":"I would but I&#39;m late for work. Thank you for editing your question, I changed my downvote for your question to an upvote due to your edit and because I&#39;m interested in seeing some answers to this question. I&#39;ll check later after work and see if any answers have been posted, if not I&#39;ll try and formulate one."},{"owner":{"account_id":5959776,"reputation":2659,"user_id":4685284,"accept_rate":83,"display_name":"Shahbaz Hashmi"},"score":0,"creation_date":1493147182,"post_id":43618222,"comment_id":74286860,"body_markdown":"Thanks Jonny. Pls post your answer later whenever u free. I will also try.","body":"Thanks Jonny. Pls post your answer later whenever u free. I will also try."},{"owner":{"account_id":5959776,"reputation":2659,"user_id":4685284,"accept_rate":83,"display_name":"Shahbaz Hashmi"},"score":0,"creation_date":1493720143,"post_id":43618222,"comment_id":74513443,"body_markdown":"Hi Jonny. I have updated my question. How can I create packet. Please help.","body":"Hi Jonny. I have updated my question. How can I create packet. Please help."},{"owner":{"account_id":1288816,"reputation":4033,"user_id":1241334,"accept_rate":100,"display_name":"Jonny Henly"},"score":0,"creation_date":1493747768,"post_id":43618222,"comment_id":74531435,"body_markdown":"Thank you for adding the packet structure. That will make answering this question much easier. I&#39;m sorry it&#39;s taken me so long to write an answer, work has taken up most of my time lately but I am writing up an answer and will post it soon.","body":"Thank you for adding the packet structure. That will make answering this question much easier. I&#39;m sorry it&#39;s taken me so long to write an answer, work has taken up most of my time lately but I am writing up an answer and will post it soon."},{"owner":{"account_id":1288816,"reputation":4033,"user_id":1241334,"accept_rate":100,"display_name":"Jonny Henly"},"score":0,"creation_date":1493748881,"post_id":43618222,"comment_id":74532044,"body_markdown":"In addition to what you have already posted could you also include both the request payload structure (description) and the response payload structure (description) or an example of each?","body":"In addition to what you have already posted could you also include both the request payload structure (description) and the response payload structure (description) or an example of each?"},{"owner":{"account_id":5959776,"reputation":2659,"user_id":4685284,"accept_rate":83,"display_name":"Shahbaz Hashmi"},"score":0,"creation_date":1493752767,"post_id":43618222,"comment_id":74534203,"body_markdown":"I have only these information. :(","body":"I have only these information. :("},{"owner":{"account_id":5959776,"reputation":2659,"user_id":4685284,"accept_rate":83,"display_name":"Shahbaz Hashmi"},"score":0,"creation_date":1494007206,"post_id":43618222,"comment_id":74661622,"body_markdown":"Hi Jonny. Waiting for the answer.","body":"Hi Jonny. Waiting for the answer."}],"answers":[{"tags":[],"owner":{"account_id":5959776,"reputation":2659,"user_id":4685284,"accept_rate":83,"display_name":"Shahbaz Hashmi"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1496313418,"creation_date":1496313088,"answer_id":44305146,"question_id":43618222,"body_markdown":"The main mistake was that I was not thinking much about size of primitive data types.\r\n\r\n\r\n**byte =\t1 byte**\r\n\t\r\n**short =\t2 bytes**\r\n\t\r\n**int = 4 bytes**\r\n\t\r\n**long = 8 bytes**\r\n\r\n**float = 4 bytes**\r\n\t \r\n**double = 8 bytes**\r\n\t\r\n**char = 2 byte**\t\r\n\r\nAfter referencing the size of primitive datatypes I realised we should track the size and index of packet because we are dealing with byte array. \r\n\r\n\r\nTcpPacket.java\r\n\r\n    public class TcpPacket {\r\n\r\n    private static int header_start =  0x55AA;\r\n\r\n    private static int protocol_version = 1;\r\n\r\n    private PacketUtils packetUtils = new PacketUtils();\r\n\r\n\r\n\r\n\r\n\r\n\r\n     public byte[] getHandshakePacket()\r\n     {\r\n        int request_id = 1;\r\n\r\n        byte[] header_data = packetUtils.ItoBA2(header_start);\r\n        byte[] payload_data = packetUtils.ItoBA4(packetUtils.getDateTime());\r\n        byte[] payload_length = packetUtils.ItoBA2(4);\r\n\r\n\r\n        byte[] a_data = new byte[]{header_data[0], header_data[1], (byte) protocol_version, packetUtils.getDSN(), (byte) request_id, payload_length[0], payload_length[1],\r\n                payload_data[0], payload_data[1], payload_data[2], payload_data[3]};\r\n\r\n        byte[] b_data = new byte[]{ packetUtils.getCRC(a_data)};\r\n\r\n        byte[] packet_data = packetUtils.concatBytes(a_data,b_data);\r\n\r\n\r\n        return packet_data;\r\n     }\r\n\r\n    }\r\n\r\n\r\n\r\nPacketUtils.java\r\n\r\n    public class PacketUtils {\r\n\r\n\r\n\r\n    public byte[] ItoBA4(int value) {\t\t// integer to bytes function (return byte array of 4 bytes)\r\n        return new byte[] {\r\n                (byte)(value &gt;&gt;&gt; 24),\r\n                (byte)(value &gt;&gt;&gt; 16),\r\n                (byte)(value &gt;&gt;&gt; 8),\r\n                (byte)value};\r\n    }\r\n\r\n\r\n    public byte[] ItoBA2(int value) {\t// integer to bytes function (return byte array of 2 bytes)\r\n        return new byte[] {\r\n                (byte)(value &gt;&gt;&gt; 8),\r\n                (byte)value};\r\n    }\r\n\r\n\r\n    public byte getDSN()\t// return one byte random number\r\n    {\r\n        char[] chars = &quot;1234567890&quot;.toCharArray();\r\n        StringBuilder sb = new StringBuilder();\r\n        Random random = new Random();\r\n        for (int i = 0; i &lt; 1; i++) {\r\n            char c = chars[random.nextInt(chars.length)];\r\n            sb.append(c);\r\n        }\r\n        byte output = Byte.valueOf(sb.toString());\r\n        return output;\r\n    }\r\n\r\n\r\n\r\n    public byte getCRC(byte[] packet)\t//  required CRC function (return byte)\r\n    {\r\n        try\r\n        {\r\n            if (packet == null)\r\n            {\r\n                //Logger.Error(&quot;empty packet received&quot;);\r\n                return (byte)0;\r\n            }\r\n\r\n            byte XORCheckSum = 0;\r\n            byte zeroCount = 0;\r\n            byte FFCount = 0;\r\n\r\n            for (int i = 0; i &lt; packet.length; i++)\r\n            {\r\n                XORCheckSum ^= packet[i];\r\n                if (packet[i] == (byte) 0)\r\n                {\r\n                    zeroCount++;\r\n                    continue;\r\n                }\r\n                if (packet[i] == (byte)255)\r\n                {\r\n                    FFCount++;\r\n                    continue;\r\n                }\r\n            }\r\n\r\n            XORCheckSum ^= zeroCount;\r\n            XORCheckSum ^= FFCount;\r\n            return XORCheckSum;\r\n        }\r\n        catch (Exception ex)\r\n        {\r\n            //Logger.Error(ex);\r\n            return (byte)0;\r\n        }\r\n    }\r\n\r\n\r\n\r\n    byte[] concatBytes(byte[]...arrays)\t\t//  concatenate byte arrays\r\n    {\r\n        // Determine the length of the result array\r\n        int totalLength = 0;\r\n        for (int i = 0; i &lt; arrays.length; i++)\r\n        {\r\n            totalLength += arrays[i].length;\r\n        }\r\n\r\n        // create the result array\r\n        byte[] result = new byte[totalLength];\r\n\r\n        // copy the source arrays into the result array\r\n        int currentIndex = 0;\r\n        for (int i = 0; i &lt; arrays.length; i++)\r\n        {\r\n            System.arraycopy(arrays[i], 0, result, currentIndex, arrays[i].length);\r\n            currentIndex += arrays[i].length;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public int getDateTime()\r\n    {\r\n        int dateInSec = (int) (System.currentTimeMillis() / 1000);\r\n        return dateInSec;\r\n\r\n    }\r\n\r\n\r\n\r\n    }\r\n\r\n","title":"How to send packet using binary communication protocol on tcp port","body":"<p>The main mistake was that I was not thinking much about size of primitive data types.</p>\n\n<p><strong>byte =    1 byte</strong></p>\n\n<p><strong>short =   2 bytes</strong></p>\n\n<p><strong>int = 4 bytes</strong></p>\n\n<p><strong>long = 8 bytes</strong></p>\n\n<p><strong>float = 4 bytes</strong></p>\n\n<p><strong>double = 8 bytes</strong></p>\n\n<p><strong>char = 2 byte</strong>   </p>\n\n<p>After referencing the size of primitive datatypes I realised we should track the size and index of packet because we are dealing with byte array. </p>\n\n<p>TcpPacket.java</p>\n\n<pre><code>public class TcpPacket {\n\nprivate static int header_start =  0x55AA;\n\nprivate static int protocol_version = 1;\n\nprivate PacketUtils packetUtils = new PacketUtils();\n\n\n\n\n\n\n public byte[] getHandshakePacket()\n {\n    int request_id = 1;\n\n    byte[] header_data = packetUtils.ItoBA2(header_start);\n    byte[] payload_data = packetUtils.ItoBA4(packetUtils.getDateTime());\n    byte[] payload_length = packetUtils.ItoBA2(4);\n\n\n    byte[] a_data = new byte[]{header_data[0], header_data[1], (byte) protocol_version, packetUtils.getDSN(), (byte) request_id, payload_length[0], payload_length[1],\n            payload_data[0], payload_data[1], payload_data[2], payload_data[3]};\n\n    byte[] b_data = new byte[]{ packetUtils.getCRC(a_data)};\n\n    byte[] packet_data = packetUtils.concatBytes(a_data,b_data);\n\n\n    return packet_data;\n }\n\n}\n</code></pre>\n\n<p>PacketUtils.java</p>\n\n<pre><code>public class PacketUtils {\n\n\n\npublic byte[] ItoBA4(int value) {       // integer to bytes function (return byte array of 4 bytes)\n    return new byte[] {\n            (byte)(value &gt;&gt;&gt; 24),\n            (byte)(value &gt;&gt;&gt; 16),\n            (byte)(value &gt;&gt;&gt; 8),\n            (byte)value};\n}\n\n\npublic byte[] ItoBA2(int value) {   // integer to bytes function (return byte array of 2 bytes)\n    return new byte[] {\n            (byte)(value &gt;&gt;&gt; 8),\n            (byte)value};\n}\n\n\npublic byte getDSN()    // return one byte random number\n{\n    char[] chars = \"1234567890\".toCharArray();\n    StringBuilder sb = new StringBuilder();\n    Random random = new Random();\n    for (int i = 0; i &lt; 1; i++) {\n        char c = chars[random.nextInt(chars.length)];\n        sb.append(c);\n    }\n    byte output = Byte.valueOf(sb.toString());\n    return output;\n}\n\n\n\npublic byte getCRC(byte[] packet)   //  required CRC function (return byte)\n{\n    try\n    {\n        if (packet == null)\n        {\n            //Logger.Error(\"empty packet received\");\n            return (byte)0;\n        }\n\n        byte XORCheckSum = 0;\n        byte zeroCount = 0;\n        byte FFCount = 0;\n\n        for (int i = 0; i &lt; packet.length; i++)\n        {\n            XORCheckSum ^= packet[i];\n            if (packet[i] == (byte) 0)\n            {\n                zeroCount++;\n                continue;\n            }\n            if (packet[i] == (byte)255)\n            {\n                FFCount++;\n                continue;\n            }\n        }\n\n        XORCheckSum ^= zeroCount;\n        XORCheckSum ^= FFCount;\n        return XORCheckSum;\n    }\n    catch (Exception ex)\n    {\n        //Logger.Error(ex);\n        return (byte)0;\n    }\n}\n\n\n\nbyte[] concatBytes(byte[]...arrays)     //  concatenate byte arrays\n{\n    // Determine the length of the result array\n    int totalLength = 0;\n    for (int i = 0; i &lt; arrays.length; i++)\n    {\n        totalLength += arrays[i].length;\n    }\n\n    // create the result array\n    byte[] result = new byte[totalLength];\n\n    // copy the source arrays into the result array\n    int currentIndex = 0;\n    for (int i = 0; i &lt; arrays.length; i++)\n    {\n        System.arraycopy(arrays[i], 0, result, currentIndex, arrays[i].length);\n        currentIndex += arrays[i].length;\n    }\n\n    return result;\n}\n\npublic int getDateTime()\n{\n    int dateInSec = (int) (System.currentTimeMillis() / 1000);\n    return dateInSec;\n\n}\n\n\n\n}\n</code></pre>\n"}],"owner":{"account_id":5959776,"reputation":2659,"user_id":4685284,"accept_rate":83,"display_name":"Shahbaz Hashmi"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4685,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"accepted_answer_id":44305146,"answer_count":1,"score":4,"last_activity_date":1649667799,"creation_date":1493144475,"question_id":43618222,"body_markdown":"I am working on a device which would work to measure some readings through sensors. Device is operated by an Android app. I have to take readings from TCP layer. This is the code to send data on TCP\r\n\r\n**TcpClient.java**\r\n\r\n    import android.util.Log;\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.BufferedWriter;\r\n    import java.io.InputStreamReader;\r\n    import java.io.OutputStreamWriter;\r\n    import java.io.PrintWriter;\r\n    import java.net.InetAddress;\r\n    import java.net.Socket;\r\n\r\n    /**\r\n    * Created by shahbaz on 25/4/17.\r\n    */\r\n\r\n     public class TcpClient {\r\n\r\n     public static final String SERVER_IP = &quot;192.168.1.76&quot;; //server IP address\r\n     public static final int SERVER_PORT = 1800;\r\n     // message to send to the server\r\n     private String mServerMessage;\r\n     // sends message received notifications\r\n     private OnMessageReceived mMessageListener = null;\r\n     // while this is true, the server will continue running\r\n     private boolean mRun = false;\r\n     // used to send messages\r\n     private PrintWriter mBufferOut;\r\n     // used to read messages from the server\r\n     private BufferedReader mBufferIn;\r\n\r\n     /**\r\n      * Constructor of the class. OnMessagedReceived listens for the messages received from server\r\n      */\r\n     public TcpClient(OnMessageReceived listener) {\r\n        mMessageListener = listener;\r\n     }\r\n\r\n    /**\r\n     * Sends the message entered by client to the server\r\n     *\r\n     * @param message text entered by client\r\n     */\r\n    public void sendMessage(String message) {\r\n        if (mBufferOut != null &amp;&amp; !mBufferOut.checkError()) {\r\n            mBufferOut.println(message);\r\n            mBufferOut.flush();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Close the connection and release the members\r\n     */\r\n    public void stopClient() {\r\n\r\n        mRun = false;\r\n\r\n        if (mBufferOut != null) {\r\n            mBufferOut.flush();\r\n            mBufferOut.close();\r\n        }\r\n\r\n        mMessageListener = null;\r\n        mBufferIn = null;\r\n        mBufferOut = null;\r\n        mServerMessage = null;\r\n    }\r\n\r\n    public void run() {\r\n\r\n        mRun = true;\r\n\r\n        try {\r\n            //here you must put your computer&#39;s IP address.\r\n            InetAddress serverAddr = InetAddress.getByName(SERVER_IP);\r\n\r\n            Log.e(&quot;TCP Client&quot;, &quot;C: Connecting...&quot;);\r\n\r\n            //create a socket to make the connection with the server\r\n            Socket socket = new Socket(serverAddr, SERVER_PORT);\r\n\r\n            try {\r\n\r\n                //sends the message to the server\r\n                mBufferOut = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())), true);\r\n\r\n                //receives the message which the server sends back\r\n                mBufferIn = new BufferedReader(new InputStreamReader(socket.getInputStream()));\r\n\r\n\r\n                //in this while the client listens for the messages sent by the server\r\n                while (mRun) {\r\n\r\n                    mServerMessage = mBufferIn.readLine();\r\n\r\n                    if (mServerMessage != null &amp;&amp; mMessageListener != null) {\r\n                        //call the method messageReceived from MyActivity class\r\n                        mMessageListener.messageReceived(mServerMessage);\r\n                    }\r\n\r\n                }\r\n\r\n                Log.e(&quot;RESPONSE FROM SERVER&quot;, &quot;S: Received Message: &#39;&quot; + mServerMessage + &quot;&#39;&quot;);\r\n\r\n            } catch (Exception e) {\r\n\r\n                Log.e(&quot;TCP&quot;, &quot;S: Error&quot;, e);\r\n\r\n            } finally {\r\n                //the socket must be closed. It is not possible to reconnect to this socket\r\n                // after it is closed, which means a new socket instance has to be created.\r\n                socket.close();\r\n            }\r\n\r\n        } catch (Exception e) {\r\n\r\n            Log.e(&quot;TCP&quot;, &quot;C: Error&quot;, e);\r\n\r\n        }\r\n\r\n    }\r\n\r\n       //Declare the interface. The method messageReceived(String message) will must be implemented in the MyActivity\r\n       //class at on asynckTask doInBackground\r\n       public interface OnMessageReceived {\r\n        public void messageReceived(String message);\r\n    }\r\n\r\n }\r\n\r\n\r\n[![packet format][1]][1]**Packet Structure**\r\n\r\n\r\nPacket format contains,\r\nWhile communicating with the device on TCP, boundaries between packets are not identified, in this case if the packets are out of sequence or if any of the packets is missed one can identify a new packet using ‚Äòheader start‚Äô.\r\nSo, first 2 bytes in the packet represent the start of the packet.\r\n\r\nHeader start: Two-byte field that indicates the start of every packet. 0x55AA is a 2 bytes number used as header start. \r\n\r\nProtocol version: One-byte field to specify the version of the protocol in use. Version specified in the payload will decide the payload structure. At any given moment a device will support single protocol version. Present protocol version is ‚Äò1‚Äô. \r\n\r\nDSN: Sequence number is 1-byte field which will identify the packet uniquely. Requester of the packet will have to fill this field in request payload; responder has to fill the same unique identifier in the response payload.\r\n\r\nRequest Id: One-byte field specifies the command id. The parsing of the payload will be done on the basis of the command id. In case of request payload this field will be non zero and in case of response it will be zero.\r\n\r\nPayload length: Two-byte field specifies the length of the payload in bytes. It specifies the number of bytes followed payload length field. In the payload length, header length and CRC is not included. Currently, Max payload length supported by gateway device is 512 (bytes).\r\nCRC: 1 byte field which will be calculated by XORing all the bytes and add the XOR count of 0.\r\n\r\n\r\nAnd it is working. But according to docs I have to send packet using binary communication protocol. Including **header start**, **payload data**, etc. How can I send these params in packet structure? How can I create packet?\r\n\r\nAny help is appreciated.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/m8xsr.jpg","title":"How to send packet using binary communication protocol on tcp port","body":"<p>I am working on a device which would work to measure some readings through sensors. Device is operated by an Android app. I have to take readings from TCP layer. This is the code to send data on TCP</p>\n\n<p><strong>TcpClient.java</strong></p>\n\n<pre><code>import android.util.Log;\n\nimport java.io.BufferedReader;\nimport java.io.BufferedWriter;\nimport java.io.InputStreamReader;\nimport java.io.OutputStreamWriter;\nimport java.io.PrintWriter;\nimport java.net.InetAddress;\nimport java.net.Socket;\n\n/**\n* Created by shahbaz on 25/4/17.\n*/\n\n public class TcpClient {\n\n public static final String SERVER_IP = \"192.168.1.76\"; //server IP address\n public static final int SERVER_PORT = 1800;\n // message to send to the server\n private String mServerMessage;\n // sends message received notifications\n private OnMessageReceived mMessageListener = null;\n // while this is true, the server will continue running\n private boolean mRun = false;\n // used to send messages\n private PrintWriter mBufferOut;\n // used to read messages from the server\n private BufferedReader mBufferIn;\n\n /**\n  * Constructor of the class. OnMessagedReceived listens for the messages received from server\n  */\n public TcpClient(OnMessageReceived listener) {\n    mMessageListener = listener;\n }\n\n/**\n * Sends the message entered by client to the server\n *\n * @param message text entered by client\n */\npublic void sendMessage(String message) {\n    if (mBufferOut != null &amp;&amp; !mBufferOut.checkError()) {\n        mBufferOut.println(message);\n        mBufferOut.flush();\n    }\n}\n\n/**\n * Close the connection and release the members\n */\npublic void stopClient() {\n\n    mRun = false;\n\n    if (mBufferOut != null) {\n        mBufferOut.flush();\n        mBufferOut.close();\n    }\n\n    mMessageListener = null;\n    mBufferIn = null;\n    mBufferOut = null;\n    mServerMessage = null;\n}\n\npublic void run() {\n\n    mRun = true;\n\n    try {\n        //here you must put your computer's IP address.\n        InetAddress serverAddr = InetAddress.getByName(SERVER_IP);\n\n        Log.e(\"TCP Client\", \"C: Connecting...\");\n\n        //create a socket to make the connection with the server\n        Socket socket = new Socket(serverAddr, SERVER_PORT);\n\n        try {\n\n            //sends the message to the server\n            mBufferOut = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())), true);\n\n            //receives the message which the server sends back\n            mBufferIn = new BufferedReader(new InputStreamReader(socket.getInputStream()));\n\n\n            //in this while the client listens for the messages sent by the server\n            while (mRun) {\n\n                mServerMessage = mBufferIn.readLine();\n\n                if (mServerMessage != null &amp;&amp; mMessageListener != null) {\n                    //call the method messageReceived from MyActivity class\n                    mMessageListener.messageReceived(mServerMessage);\n                }\n\n            }\n\n            Log.e(\"RESPONSE FROM SERVER\", \"S: Received Message: '\" + mServerMessage + \"'\");\n\n        } catch (Exception e) {\n\n            Log.e(\"TCP\", \"S: Error\", e);\n\n        } finally {\n            //the socket must be closed. It is not possible to reconnect to this socket\n            // after it is closed, which means a new socket instance has to be created.\n            socket.close();\n        }\n\n    } catch (Exception e) {\n\n        Log.e(\"TCP\", \"C: Error\", e);\n\n    }\n\n}\n\n   //Declare the interface. The method messageReceived(String message) will must be implemented in the MyActivity\n   //class at on asynckTask doInBackground\n   public interface OnMessageReceived {\n    public void messageReceived(String message);\n}\n</code></pre>\n\n<p>}</p>\n\n<p><a href=\"https://i.stack.imgur.com/m8xsr.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/m8xsr.jpg\" alt=\"packet format\"></a><strong>Packet Structure</strong></p>\n\n<p>Packet format contains,\nWhile communicating with the device on TCP, boundaries between packets are not identified, in this case if the packets are out of sequence or if any of the packets is missed one can identify a new packet using ‚Äòheader start‚Äô.\nSo, first 2 bytes in the packet represent the start of the packet.</p>\n\n<p>Header start: Two-byte field that indicates the start of every packet. 0x55AA is a 2 bytes number used as header start. </p>\n\n<p>Protocol version: One-byte field to specify the version of the protocol in use. Version specified in the payload will decide the payload structure. At any given moment a device will support single protocol version. Present protocol version is ‚Äò1‚Äô. </p>\n\n<p>DSN: Sequence number is 1-byte field which will identify the packet uniquely. Requester of the packet will have to fill this field in request payload; responder has to fill the same unique identifier in the response payload.</p>\n\n<p>Request Id: One-byte field specifies the command id. The parsing of the payload will be done on the basis of the command id. In case of request payload this field will be non zero and in case of response it will be zero.</p>\n\n<p>Payload length: Two-byte field specifies the length of the payload in bytes. It specifies the number of bytes followed payload length field. In the payload length, header length and CRC is not included. Currently, Max payload length supported by gateway device is 512 (bytes).\nCRC: 1 byte field which will be calculated by XORing all the bytes and add the XOR count of 0.</p>\n\n<p>And it is working. But according to docs I have to send packet using binary communication protocol. Including <strong>header start</strong>, <strong>payload data</strong>, etc. How can I send these params in packet structure? How can I create packet?</p>\n\n<p>Any help is appreciated.</p>\n"},{"tags":["java","json","rest","curl","post"],"answers":[{"tags":[],"owner":{"account_id":10278040,"reputation":2869,"user_id":7584240,"accept_rate":17,"display_name":"BATMAN_2008"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649667690,"creation_date":1649667690,"answer_id":71825161,"question_id":71825129,"body_markdown":"I was able to find the fix. Posting here so it can be useful to someone in the future:\r\n\r\nThe following is working for me:\r\n```\r\ncurl -X POST &#39;http://localhost:9001/api/generate?pretty=true&#39; -H &#39;Content-Type: application/json&#39; -d &#39;{\r\n    &quot;name&quot;:&quot;Batman&quot;,\r\n    &quot;age&quot;:28\r\n}&#39;\r\n```\r\n\r\nIf you observe I added `?pretty=true` to my URL","title":"How to pass multiple parameters to CURL command when one parameter of JSON type and other is of String type?","body":"<p>I was able to find the fix. Posting here so it can be useful to someone in the future:</p>\n<p>The following is working for me:</p>\n<pre><code>curl -X POST 'http://localhost:9001/api/generate?pretty=true' -H 'Content-Type: application/json' -d '{\n    &quot;name&quot;:&quot;Batman&quot;,\n    &quot;age&quot;:28\n}'\n</code></pre>\n<p>If you observe I added <code>?pretty=true</code> to my URL</p>\n"}],"owner":{"account_id":10278040,"reputation":2869,"user_id":7584240,"accept_rate":17,"display_name":"BATMAN_2008"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1024,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649667690,"creation_date":1649667533,"question_id":71825129,"body_markdown":"I have a JAVA service that accepts JSON input as the first parameter and an optional Boolean pretty printer as the second parameter. If I pass only my mandatory JSON parameter then everything works fine and I am able to get the required out but I am not understanding how to pass my second optional parameter to it.\r\n\r\nFollowing is my Java Service:\r\n```\r\n@Path(&quot;/generate&quot;)\r\n@POST\r\n@Consumes(MediaType.APPLICATION_JSON)\r\n@Produces(MediaType.APPLICATION_JSON)\r\npublic Multi&lt;String&gt; generate(final Map&lt;String, Object&gt; input, @Parameter(description = &quot;Use pretty print for output&quot;, example = &quot;?pretty, ?pretty=true, ?pretty=false&quot;, schema = @Schema(description = &quot;empty defaults to true&quot;,enumeration = {&quot;true&quot;, &quot;false&quot;})) @QueryParam(&quot;pretty&quot;) final String pretty) throws Exception {\r\n\r\n}\r\n```\r\n\r\n\r\nFollowing is the Curl command without the 2nd parameter:\r\n```\r\ncurl -X POST &#39;http://localhost:9001/api/generate&#39; -H &#39;Content-Type: application/json&#39; -d &#39;{\r\n    &quot;name&quot;:&quot;Batman&quot;,\r\n    &quot;age&quot;:28\r\n}&#39;\r\n```\r\n\r\n\r\nI tried to pass the 2nd String parameter something like this:\r\n```\r\ncurl -X POST &#39;http://localhost:9001/api/generate&#39; -H &#39;Content-Type: application/json&#39; -d &#39;{\r\n    &quot;name&quot;:&quot;Batman&quot;,\r\n    &quot;age&quot;:28\r\n},true&#39;\r\n```\r\n\r\nBut it&#39;s not working at all. Can someone please let me know what am I doing wrong and how can I fix the issue?","title":"How to pass multiple parameters to CURL command when one parameter of JSON type and other is of String type?","body":"<p>I have a JAVA service that accepts JSON input as the first parameter and an optional Boolean pretty printer as the second parameter. If I pass only my mandatory JSON parameter then everything works fine and I am able to get the required out but I am not understanding how to pass my second optional parameter to it.</p>\n<p>Following is my Java Service:</p>\n<pre><code>@Path(&quot;/generate&quot;)\n@POST\n@Consumes(MediaType.APPLICATION_JSON)\n@Produces(MediaType.APPLICATION_JSON)\npublic Multi&lt;String&gt; generate(final Map&lt;String, Object&gt; input, @Parameter(description = &quot;Use pretty print for output&quot;, example = &quot;?pretty, ?pretty=true, ?pretty=false&quot;, schema = @Schema(description = &quot;empty defaults to true&quot;,enumeration = {&quot;true&quot;, &quot;false&quot;})) @QueryParam(&quot;pretty&quot;) final String pretty) throws Exception {\n\n}\n</code></pre>\n<p>Following is the Curl command without the 2nd parameter:</p>\n<pre><code>curl -X POST 'http://localhost:9001/api/generate' -H 'Content-Type: application/json' -d '{\n    &quot;name&quot;:&quot;Batman&quot;,\n    &quot;age&quot;:28\n}'\n</code></pre>\n<p>I tried to pass the 2nd String parameter something like this:</p>\n<pre><code>curl -X POST 'http://localhost:9001/api/generate' -H 'Content-Type: application/json' -d '{\n    &quot;name&quot;:&quot;Batman&quot;,\n    &quot;age&quot;:28\n},true'\n</code></pre>\n<p>But it's not working at all. Can someone please let me know what am I doing wrong and how can I fix the issue?</p>\n"},{"tags":["java","css","javafx","openjfx","openjdk-11"],"answers":[{"tags":[],"owner":{"account_id":4910667,"reputation":44671,"user_id":3956070,"display_name":"Jos&#233; Pereda"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1571069739,"creation_date":1571069739,"answer_id":58380530,"question_id":58378287,"body_markdown":"While there is a `jpackage` [tool](http://jdk.java.net/jpackage/) that is possibly being added to Java 14, I&#39;m not aware that it is going to use `Css2Bin`.\r\n\r\nIn OpenJFX (11+), `Css2Bin` is still a tool used internally to convert the Modena CSS files into BSS. You can find it [here](https://github.com/openjdk/jfx/blob/master/modules/javafx.graphics/src/main/java/com/sun/javafx/css/parser/Css2Bin.java).\r\n\r\nIf you search the uses of this tool within OpenJFX, you will [find it](https://github.com/openjdk/jfx/blob/f595cc19dd6f1b22ea48ee6d0e99c7bd03e245e1/build.gradle#L2526) in the `build.gradle` file that is used to build JavaFX itself.\r\n\r\nI&#39;ll paste the task, as it is relevant to see what it does:\r\n\r\n```\r\ndef modulePath = &quot;${project.sourceSets.main.java.outputDir}&quot;\r\n    modulePath += File.pathSeparator + &quot;${rootProject.projectDir}/modules/javafx.graphics/build/classes/java/main&quot;\r\n    modulePath += File.pathSeparator + &quot;${rootProject.projectDir}/modules/javafx.base/build/classes/java/main&quot;\r\n    processResources {\r\n      doLast {\r\n        def cssFiles = fileTree(dir: &quot;$moduleDir/com/sun/javafx/scene/control/skin&quot;)\r\n        cssFiles.include &quot;**/*.css&quot;\r\n        cssFiles.each { css -&gt;\r\n            logger.info(&quot;converting CSS to BSS ${css}&quot;);\r\n\r\n            javaexec {\r\n                executable = JAVA\r\n                workingDir = project.projectDir\r\n                jvmArgs += patchModuleArgs\r\n                jvmArgs += &quot;--module-path=$modulePath&quot;\r\n                jvmArgs += &quot;--add-modules=javafx.graphics&quot;\r\n                main = &quot;com.sun.javafx.css.parser.Css2Bin&quot;\r\n                args css\r\n            }\r\n        }\r\n      }\r\n    }\r\n```\r\n\r\nAs you can notice, basically a `java` command is called, with the JavaFX jars in the module path, to run the `Css2Bin::main` public method, which is just part of the `javafx.graphics` included module.\r\n\r\nSo nothing prevents you from doing exactly the same in your build process.\r\n\r\nAssuming you are using Gradle, you can add a task that is executed before the `jar` task, something like this:\r\n\r\n```\r\ndef java_home = hasProperty(&#39;org.gradle.java.home&#39;) ? \r\n      getProperty(&#39;org.gradle.java.home&#39;) : System.getenv(&#39;JAVA_HOME&#39;)\r\n\r\ntask css {\r\n    if (java_home == null) {\r\n        throw new RuntimeException(&quot;java_home is not defined.&quot;)\r\n    }\r\n    def cssFiles = fileTree(dir: &quot;$project.rootDir/src/main/resources/&quot;)\r\n    cssFiles.include &quot;**/*.css&quot;\r\n    cssFiles.each { css -&gt;\r\n        logger.info(&quot;converting CSS to BSS ${css}&quot;)\r\n        doLast {\r\n            exec {\r\n                commandLine &quot;${java_home}/bin/java&quot;,\r\n                        &quot;--module-path&quot;, sourceSets.main.runtimeClasspath.asPath,\r\n                        &quot;--add-modules&quot;, &quot;javafx.graphics&quot;,\r\n                        &quot;com.sun.javafx.css.parser.Css2Bin&quot;, css\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nSimply run:\r\n\r\n    ./gradlew css\r\n\r\nand it will convert all the css files in your resources to bss. Then you will probably need to filter out the css ones when doing the jar.\r\n\r\nSame task can be run in a similar way from Maven or command line, of course.","title":"OpenJFX 11 - javafxpackager Binary CSS","body":"<p>While there is a <code>jpackage</code> <a href=\"http://jdk.java.net/jpackage/\" rel=\"nofollow noreferrer\">tool</a> that is possibly being added to Java 14, I'm not aware that it is going to use <code>Css2Bin</code>.</p>\n\n<p>In OpenJFX (11+), <code>Css2Bin</code> is still a tool used internally to convert the Modena CSS files into BSS. You can find it <a href=\"https://github.com/openjdk/jfx/blob/master/modules/javafx.graphics/src/main/java/com/sun/javafx/css/parser/Css2Bin.java\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>If you search the uses of this tool within OpenJFX, you will <a href=\"https://github.com/openjdk/jfx/blob/f595cc19dd6f1b22ea48ee6d0e99c7bd03e245e1/build.gradle#L2526\" rel=\"nofollow noreferrer\">find it</a> in the <code>build.gradle</code> file that is used to build JavaFX itself.</p>\n\n<p>I'll paste the task, as it is relevant to see what it does:</p>\n\n<pre><code>def modulePath = \"${project.sourceSets.main.java.outputDir}\"\n    modulePath += File.pathSeparator + \"${rootProject.projectDir}/modules/javafx.graphics/build/classes/java/main\"\n    modulePath += File.pathSeparator + \"${rootProject.projectDir}/modules/javafx.base/build/classes/java/main\"\n    processResources {\n      doLast {\n        def cssFiles = fileTree(dir: \"$moduleDir/com/sun/javafx/scene/control/skin\")\n        cssFiles.include \"**/*.css\"\n        cssFiles.each { css -&gt;\n            logger.info(\"converting CSS to BSS ${css}\");\n\n            javaexec {\n                executable = JAVA\n                workingDir = project.projectDir\n                jvmArgs += patchModuleArgs\n                jvmArgs += \"--module-path=$modulePath\"\n                jvmArgs += \"--add-modules=javafx.graphics\"\n                main = \"com.sun.javafx.css.parser.Css2Bin\"\n                args css\n            }\n        }\n      }\n    }\n</code></pre>\n\n<p>As you can notice, basically a <code>java</code> command is called, with the JavaFX jars in the module path, to run the <code>Css2Bin::main</code> public method, which is just part of the <code>javafx.graphics</code> included module.</p>\n\n<p>So nothing prevents you from doing exactly the same in your build process.</p>\n\n<p>Assuming you are using Gradle, you can add a task that is executed before the <code>jar</code> task, something like this:</p>\n\n<pre><code>def java_home = hasProperty('org.gradle.java.home') ? \n      getProperty('org.gradle.java.home') : System.getenv('JAVA_HOME')\n\ntask css {\n    if (java_home == null) {\n        throw new RuntimeException(\"java_home is not defined.\")\n    }\n    def cssFiles = fileTree(dir: \"$project.rootDir/src/main/resources/\")\n    cssFiles.include \"**/*.css\"\n    cssFiles.each { css -&gt;\n        logger.info(\"converting CSS to BSS ${css}\")\n        doLast {\n            exec {\n                commandLine \"${java_home}/bin/java\",\n                        \"--module-path\", sourceSets.main.runtimeClasspath.asPath,\n                        \"--add-modules\", \"javafx.graphics\",\n                        \"com.sun.javafx.css.parser.Css2Bin\", css\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Simply run:</p>\n\n<pre><code>./gradlew css\n</code></pre>\n\n<p>and it will convert all the css files in your resources to bss. Then you will probably need to filter out the css ones when doing the jar.</p>\n\n<p>Same task can be run in a similar way from Maven or command line, of course.</p>\n"},{"tags":[],"owner":{"account_id":4992892,"reputation":4470,"user_id":4014509,"accept_rate":77,"display_name":"Sebastian S"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649667409,"creation_date":1649667409,"answer_id":71825103,"question_id":58378287,"body_markdown":"Just for the sake of completeness, here is what Jos&#233; meant with\r\n\r\n&gt; Same task can be run in a similar way from Maven [...]\r\n\r\n```xml\r\n&lt;plugin&gt;\r\n\t&lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t&lt;executions&gt;\r\n\t\t&lt;execution&gt;\r\n\t\t\t&lt;id&gt;css2bss&lt;/id&gt;\r\n\t\t\t&lt;phase&gt;generate-resources&lt;/phase&gt;\r\n\t\t\t&lt;goals&gt;\r\n\t\t\t\t&lt;goal&gt;java&lt;/goal&gt;\r\n\t\t\t&lt;/goals&gt;\r\n\t\t\t&lt;configuration&gt;\r\n\t\t\t\t&lt;mainClass&gt;com.sun.javafx.css.parser.Css2Bin&lt;/mainClass&gt;\r\n\t\t\t\t&lt;arguments&gt;\r\n\t\t\t\t\t&lt;arg&gt;${project.basedir}/src/main/resources/my-theme.css&lt;/arg&gt;\r\n\t\t\t\t&lt;/arguments&gt;\r\n\t\t\t&lt;/configuration&gt;\r\n\t\t&lt;/execution&gt;\r\n\t&lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nAssuming that `javafx.graphics` is in your reactor&#39;s dependencies already.","title":"OpenJFX 11 - javafxpackager Binary CSS","body":"<p>Just for the sake of completeness, here is what Jos√© meant with</p>\n<blockquote>\n<p>Same task can be run in a similar way from Maven [...]</p>\n</blockquote>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n    &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.0.0&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;css2bss&lt;/id&gt;\n            &lt;phase&gt;generate-resources&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;java&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;mainClass&gt;com.sun.javafx.css.parser.Css2Bin&lt;/mainClass&gt;\n                &lt;arguments&gt;\n                    &lt;arg&gt;${project.basedir}/src/main/resources/my-theme.css&lt;/arg&gt;\n                &lt;/arguments&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>Assuming that <code>javafx.graphics</code> is in your reactor's dependencies already.</p>\n"}],"owner":{"account_id":4711119,"reputation":1624,"user_id":3811599,"accept_rate":75,"display_name":"Marcel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":549,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":58380530,"answer_count":2,"score":1,"last_activity_date":1649667409,"creation_date":1571061157,"question_id":58378287,"body_markdown":"It seems like the JavaFXpackager isn&#39;t available in the openjdk/openjfx 11.\r\n\r\nI want to create the binary CSS (BSS) using it.  \r\nhttps://docs.oracle.com/javase/8/docs/technotes/tools/unix/javafxpackager.html   \r\nwith the `-createbss` it was possible in the past.\r\n\r\nIn the OpenJFX mailing list, they posted something about `Filling the Packager gap`.  \r\nhttps://mail.openjdk.java.net/pipermail/openjfx-dev/2018-September/022500.html  \r\n\r\nBut this new tool cant create Binary CSS.\r\n\r\nMy question is:\r\nIs there still a way to generate the binary css using OpenJFX 11 or is the whole thing not supported anymore? \r\n\r\n\r\n\r\n","title":"OpenJFX 11 - javafxpackager Binary CSS","body":"<p>It seems like the JavaFXpackager isn't available in the openjdk/openjfx 11.</p>\n\n<p>I want to create the binary CSS (BSS) using it.<br>\n<a href=\"https://docs.oracle.com/javase/8/docs/technotes/tools/unix/javafxpackager.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/technotes/tools/unix/javafxpackager.html</a><br>\nwith the <code>-createbss</code> it was possible in the past.</p>\n\n<p>In the OpenJFX mailing list, they posted something about <code>Filling the Packager gap</code>.<br>\n<a href=\"https://mail.openjdk.java.net/pipermail/openjfx-dev/2018-September/022500.html\" rel=\"nofollow noreferrer\">https://mail.openjdk.java.net/pipermail/openjfx-dev/2018-September/022500.html</a>  </p>\n\n<p>But this new tool cant create Binary CSS.</p>\n\n<p>My question is:\nIs there still a way to generate the binary css using OpenJFX 11 or is the whole thing not supported anymore? </p>\n"},{"tags":["java","java.util.scanner"],"comments":[{"owner":{"account_id":3229314,"reputation":515,"user_id":2724934,"accept_rate":75,"display_name":"Milaci"},"score":0,"creation_date":1395070856,"post_id":22458575,"comment_id":34159576,"body_markdown":"This may help you [Using scanner.nextLine()][1]: http://stackoverflow.com/questions/5032356/using-scanner-nextline","body":"This may help you [Using scanner.nextLine()][1]: <a href=\"http://stackoverflow.com/questions/5032356/using-scanner-nextline\" title=\"using scanner nextline\">stackoverflow.com/questions/5032356/using-scanner-nextline</a>"}],"answers":[{"tags":[],"owner":{"account_id":3377640,"reputation":1844,"user_id":2835475,"display_name":"RKC"},"down_vote_count":0,"up_vote_count":58,"is_accepted":false,"score":58,"last_activity_date":1507341497,"creation_date":1395070628,"answer_id":22458651,"question_id":22458575,"body_markdown":"`next()` can read the input only till the space. It can&#39;t read two words separated by a space. Also, `next()` places the cursor in the same line after reading the input.\r\n\r\n`nextLine()` reads input including space between the words (that is, it reads till the end of line `\\n`). Once the input is read, `nextLine()` positions the cursor in the next line.\r\n\r\nFor reading the entire line you can use `nextLine()`.","title":"What&#39;s the difference between next() and nextLine() methods from Scanner class?","body":"<p><code>next()</code> can read the input only till the space. It can't read two words separated by a space. Also, <code>next()</code> places the cursor in the same line after reading the input.</p>\n\n<p><code>nextLine()</code> reads input including space between the words (that is, it reads till the end of line <code>\\n</code>). Once the input is read, <code>nextLine()</code> positions the cursor in the next line.</p>\n\n<p>For reading the entire line you can use <code>nextLine()</code>.</p>\n"},{"tags":[],"owner":{"account_id":1668782,"reputation":744,"user_id":1535658,"accept_rate":57,"display_name":"onesixtyfourth"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1395070669,"creation_date":1395070669,"answer_id":22458664,"question_id":22458575,"body_markdown":"From [javadocs][1]\r\n\r\nnext() Returns the next token if it matches the pattern constructed from the specified string.\r\nnextLine() Advances this scanner past the current line and returns the input that was skipped.\r\n\r\nWhich one you choose depends which suits your needs best. If it were me reading a whole file I would go for nextLine until I had all the file.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html","title":"What&#39;s the difference between next() and nextLine() methods from Scanner class?","body":"<p>From <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html\" rel=\"nofollow\">javadocs</a></p>\n\n<p>next() Returns the next token if it matches the pattern constructed from the specified string.\nnextLine() Advances this scanner past the current line and returns the input that was skipped.</p>\n\n<p>Which one you choose depends which suits your needs best. If it were me reading a whole file I would go for nextLine until I had all the file.</p>\n"},{"tags":[],"owner":{"account_id":4185737,"reputation":19,"user_id":3429541,"display_name":"Foobar"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1395070845,"creation_date":1395070845,"answer_id":22458730,"question_id":22458575,"body_markdown":"From the documentation for [Scanner][1]:\r\n\r\n&gt; A Scanner breaks its input into tokens using a delimiter pattern, **which by default matches whitespace.**\r\n\r\nFrom the documentation for [next()][2]:\r\n\r\n&gt; A complete token is preceded and followed by input that matches the delimiter pattern.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#next%28%29","title":"What&#39;s the difference between next() and nextLine() methods from Scanner class?","body":"<p>From the documentation for <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html\" rel=\"nofollow\">Scanner</a>:</p>\n\n<blockquote>\n  <p>A Scanner breaks its input into tokens using a delimiter pattern, <strong>which by default matches whitespace.</strong></p>\n</blockquote>\n\n<p>From the documentation for <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#next%28%29\" rel=\"nofollow\">next()</a>:</p>\n\n<blockquote>\n  <p>A complete token is preceded and followed by input that matches the delimiter pattern.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":3816309,"reputation":9934,"user_id":3165602,"accept_rate":62,"display_name":"Oleg Sklyar"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1507315237,"creation_date":1395070897,"answer_id":22458750,"question_id":22458575,"body_markdown":" From JavaDoc: \r\n \r\n&gt;  - A `Scanner` breaks its input into tokens using a delimiter pattern, which by default matches whitespace.\r\n&gt;  - `next()`: Finds and returns the next complete token from this scanner.\r\n&gt;  - `nextLine()`: Advances this scanner past the current line and returns the input that was skipped.\r\n\r\nSo in case of `&quot;small example&lt;eol&gt;text&quot;` `next()` should return &quot;small&quot; and `nextLine()` should return &quot;small example&quot;","title":"What&#39;s the difference between next() and nextLine() methods from Scanner class?","body":"<p>From JavaDoc: </p>\n\n<blockquote>\n  <ul>\n  <li>A <code>Scanner</code> breaks its input into tokens using a delimiter pattern, which by default matches whitespace.</li>\n  <li><code>next()</code>: Finds and returns the next complete token from this scanner.</li>\n  <li><code>nextLine()</code>: Advances this scanner past the current line and returns the input that was skipped.</li>\n  </ul>\n</blockquote>\n\n<p>So in case of <code>\"small example&lt;eol&gt;text\"</code> <code>next()</code> should return \"small\" and <code>nextLine()</code> should return \"small example\"</p>\n"},{"tags":[],"owner":{"account_id":1056601,"reputation":2369,"user_id":1059157,"display_name":"Tristan"},"down_vote_count":0,"up_vote_count":97,"is_accepted":true,"score":97,"last_activity_date":1571645216,"creation_date":1395070938,"answer_id":22458766,"question_id":22458575,"body_markdown":"I always prefer to read input using `nextLine()` and then parse the string.\r\n\r\nUsing `next()` will only return what comes before the delimiter (defaults to whitespace). `nextLine()` automatically moves the scanner down after returning the current line.\r\n\r\nA useful tool for parsing data from `nextLine()` would be `str.split(&quot;\\\\s+&quot;)`.\r\n\r\n    String data = scanner.nextLine();\r\n    String[] pieces = data.split(&quot;\\\\s+&quot;);\r\n    // Parse the pieces\r\n\r\nFor more information regarding the Scanner class or String class refer to the following links.\r\n\r\nScanner: http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html\r\n\r\nString: http://docs.oracle.com/javase/7/docs/api/java/lang/String.html","title":"What&#39;s the difference between next() and nextLine() methods from Scanner class?","body":"<p>I always prefer to read input using <code>nextLine()</code> and then parse the string.</p>\n\n<p>Using <code>next()</code> will only return what comes before the delimiter (defaults to whitespace). <code>nextLine()</code> automatically moves the scanner down after returning the current line.</p>\n\n<p>A useful tool for parsing data from <code>nextLine()</code> would be <code>str.split(\"\\\\s+\")</code>.</p>\n\n<pre><code>String data = scanner.nextLine();\nString[] pieces = data.split(\"\\\\s+\");\n// Parse the pieces\n</code></pre>\n\n<p>For more information regarding the Scanner class or String class refer to the following links.</p>\n\n<p>Scanner: <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html\" rel=\"noreferrer\">http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html</a></p>\n\n<p>String: <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html\" rel=\"noreferrer\">http://docs.oracle.com/javase/7/docs/api/java/lang/String.html</a></p>\n"},{"tags":[],"owner":{"account_id":2540468,"reputation":443,"user_id":2206374,"accept_rate":20,"display_name":"Musaddique"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1428488813,"creation_date":1428388601,"answer_id":29485294,"question_id":22458575,"body_markdown":"next() and nextLine() methods are associated with Scanner and is used for getting String inputs. Their differences are...\r\n\r\nnext() can read the input only till the space. It can&#39;t read two words separated by space. Also, next() places the cursor in the same line after reading the input.\r\n\r\nnextLine() reads input including space between the words (that is, it reads till the end of line \\n). Once the input is read, nextLine() positions the cursor in the next line.\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class temp\r\n    {\r\n        public static void main(String arg[])\r\n        {\r\n            Scanner sc=new Scanner(System.in);\r\n            System.out.println(&quot;enter string for c&quot;);\r\n            String c=sc.next();\r\n            System.out.println(&quot;c is &quot;+c);\r\n            System.out.println(&quot;enter string for d&quot;);\r\n            String d=sc.next();\r\n            System.out.println(&quot;d is &quot;+d);\r\n        }\r\n    }\r\nOutput:\r\n\r\nenter string for c\r\nabc def           \r\nc is abc\r\n\r\nenter string for d\r\n\r\nd is  def\r\n\r\nIf you use nextLine() instead of next() then \r\n\r\nOutput:\r\n \r\nenter string for c\r\n\r\nABC DEF           \r\nc is ABC DEF      \r\nenter string for d\r\n\r\nGHI               \r\nd is GHI\r\n       \r\n","title":"What&#39;s the difference between next() and nextLine() methods from Scanner class?","body":"<p>next() and nextLine() methods are associated with Scanner and is used for getting String inputs. Their differences are...</p>\n\n<p>next() can read the input only till the space. It can't read two words separated by space. Also, next() places the cursor in the same line after reading the input.</p>\n\n<p>nextLine() reads input including space between the words (that is, it reads till the end of line \\n). Once the input is read, nextLine() positions the cursor in the next line.</p>\n\n<pre><code>import java.util.Scanner;\n\npublic class temp\n{\n    public static void main(String arg[])\n    {\n        Scanner sc=new Scanner(System.in);\n        System.out.println(\"enter string for c\");\n        String c=sc.next();\n        System.out.println(\"c is \"+c);\n        System.out.println(\"enter string for d\");\n        String d=sc.next();\n        System.out.println(\"d is \"+d);\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<p>enter string for c\nabc def<br>\nc is abc</p>\n\n<p>enter string for d</p>\n\n<p>d is  def</p>\n\n<p>If you use nextLine() instead of next() then </p>\n\n<p>Output:</p>\n\n<p>enter string for c</p>\n\n<p>ABC DEF<br>\nc is ABC DEF<br>\nenter string for d</p>\n\n<p>GHI<br>\nd is GHI</p>\n"},{"tags":[],"owner":{"account_id":3985733,"reputation":1506,"user_id":3286353,"accept_rate":67,"display_name":"murali kurapati"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1543434939,"creation_date":1429246066,"answer_id":29690553,"question_id":22458575,"body_markdown":"What I have noticed apart from  next() scans only upto space where as nextLine() scans the entire line is that **next waits till it gets a complete token** where as **nextLine() does not wait for complete token, when ever &#39;\\n&#39; is obtained(i.e when you press enter key) the scanner cursor moves to the next line and returns the previous line skipped.** It does not check for the whether you have given complete input or not, even it will take an empty string where as next() does not take empty string\r\n\r\n    public class ScannerTest {\r\n\r\n        public static void main(String[] args) {\r\n            \r\n            Scanner sc = new Scanner(System.in);\r\n            int cases = sc.nextInt();\r\n            String []str = new String[cases];\r\n            for(int i=0;i&lt;cases;i++){\r\n                str[i]=sc.next();\r\n            }\r\n         }\r\n    \r\n    }\r\n \r\nTry this program by changing the next() and nextLine() in for loop, go on pressing &#39;\\n&#39; that is enter key without any input, you can find that using **nextLine() method it terminates** after pressing given number of cases where as **next() doesnot terminate** untill you provide and input to it for the given number of cases.","title":"What&#39;s the difference between next() and nextLine() methods from Scanner class?","body":"<p>What I have noticed apart from  next() scans only upto space where as nextLine() scans the entire line is that <strong>next waits till it gets a complete token</strong> where as <strong>nextLine() does not wait for complete token, when ever '\\n' is obtained(i.e when you press enter key) the scanner cursor moves to the next line and returns the previous line skipped.</strong> It does not check for the whether you have given complete input or not, even it will take an empty string where as next() does not take empty string</p>\n\n<pre><code>public class ScannerTest {\n\n    public static void main(String[] args) {\n\n        Scanner sc = new Scanner(System.in);\n        int cases = sc.nextInt();\n        String []str = new String[cases];\n        for(int i=0;i&lt;cases;i++){\n            str[i]=sc.next();\n        }\n     }\n\n}\n</code></pre>\n\n<p>Try this program by changing the next() and nextLine() in for loop, go on pressing '\\n' that is enter key without any input, you can find that using <strong>nextLine() method it terminates</strong> after pressing given number of cases where as <strong>next() doesnot terminate</strong> untill you provide and input to it for the given number of cases.</p>\n"},{"tags":[],"owner":{"account_id":6974756,"reputation":131,"user_id":5349868,"display_name":"himani1349"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1486536781,"creation_date":1443138028,"answer_id":32772627,"question_id":22458575,"body_markdown":"In short: if you are inputting a string array of length t, then Scanner#nextLine() expects t lines, each entry in the string array is differentiated from the other by enter key.And Scanner#next() will keep taking inputs till you press enter but stores string(word) inside the array, which is separated by whitespace.\r\n\r\nLets have a look at following snippet of code \r\n\r\n        Scanner in = new Scanner(System.in);\r\n        int t = in.nextInt();\r\n        String[] s = new String[t];\r\n\r\n        for (int i = 0; i &lt; t; i++) {\r\n            s[i] = in.next();\r\n        }\r\nwhen I run above snippet of code in my IDE (lets say for string length 2),it does not matter whether I enter my string as\r\n\r\nInput as :- abcd abcd  or\r\n\r\nInput as :- \r\n\r\nabcd\r\n\r\nabcd \r\n\r\nOutput will be like\r\nabcd\r\n\r\nabcd\r\n\r\nBut if in same code we replace next() method by nextLine()\r\n \r\n        Scanner in = new Scanner(System.in);\r\n        int t = in.nextInt();\r\n        String[] s = new String[t];\r\n\r\n        for (int i = 0; i &lt; t; i++) {\r\n            s[i] = in.nextLine();\r\n        }\r\n\r\nThen if you enter input on prompt as -\r\nabcd abcd \r\n\r\nOutput is :-\r\n\r\nabcd abcd\r\n\r\nand if you enter the input on prompt as \r\nabcd (and if you press enter to enter next abcd in another line, the input prompt will just exit and you will get the output)\r\n\r\nOutput is:-\r\n\r\nabcd \r\n  \r\n","title":"What&#39;s the difference between next() and nextLine() methods from Scanner class?","body":"<p>In short: if you are inputting a string array of length t, then Scanner#nextLine() expects t lines, each entry in the string array is differentiated from the other by enter key.And Scanner#next() will keep taking inputs till you press enter but stores string(word) inside the array, which is separated by whitespace.</p>\n\n<p>Lets have a look at following snippet of code </p>\n\n<pre><code>    Scanner in = new Scanner(System.in);\n    int t = in.nextInt();\n    String[] s = new String[t];\n\n    for (int i = 0; i &lt; t; i++) {\n        s[i] = in.next();\n    }\n</code></pre>\n\n<p>when I run above snippet of code in my IDE (lets say for string length 2),it does not matter whether I enter my string as</p>\n\n<p>Input as :- abcd abcd  or</p>\n\n<p>Input as :- </p>\n\n<p>abcd</p>\n\n<p>abcd </p>\n\n<p>Output will be like\nabcd</p>\n\n<p>abcd</p>\n\n<p>But if in same code we replace next() method by nextLine()</p>\n\n<pre><code>    Scanner in = new Scanner(System.in);\n    int t = in.nextInt();\n    String[] s = new String[t];\n\n    for (int i = 0; i &lt; t; i++) {\n        s[i] = in.nextLine();\n    }\n</code></pre>\n\n<p>Then if you enter input on prompt as -\nabcd abcd </p>\n\n<p>Output is :-</p>\n\n<p>abcd abcd</p>\n\n<p>and if you enter the input on prompt as \nabcd (and if you press enter to enter next abcd in another line, the input prompt will just exit and you will get the output)</p>\n\n<p>Output is:-</p>\n\n<p>abcd </p>\n"},{"tags":[],"owner":{"account_id":7030957,"reputation":31,"user_id":5386682,"display_name":"annoo9605"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1451529114,"creation_date":1451529114,"answer_id":34540226,"question_id":22458575,"body_markdown":"* Just for another example of Scanner.next() and nextLine() is that  like below :\r\n nextLine() does not let user type while next() makes Scanner wait and read the input.\r\n    \r\n         Scanner sc = new Scanner(System.in);\r\n\r\n         do {\r\n\t\t\tSystem.out.println(&quot;The values on dice are :&quot;);\r\n\t\t\tfor(int i = 0; i &lt; n; i++) {\r\n\t\t\t\tSystem.out.println(ran.nextInt(6) + 1);\r\n\t\t\t}\r\n\t\t\tSystem.out.println(&quot;Continue : yes or no&quot;);\r\n\t\t } while(sc.next().equals(&quot;yes&quot;));\r\n        // while(sc.nextLine().equals(&quot;yes&quot;));\r\n\r\n","title":"What&#39;s the difference between next() and nextLine() methods from Scanner class?","body":"<ul>\n<li><p>Just for another example of Scanner.next() and nextLine() is that  like below :\nnextLine() does not let user type while next() makes Scanner wait and read the input.</p>\n\n<pre><code> Scanner sc = new Scanner(System.in);\n\n do {\n    System.out.println(\"The values on dice are :\");\n    for(int i = 0; i &lt; n; i++) {\n        System.out.println(ran.nextInt(6) + 1);\n    }\n    System.out.println(\"Continue : yes or no\");\n } while(sc.next().equals(\"yes\"));\n// while(sc.nextLine().equals(\"yes\"));\n</code></pre></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":10252486,"reputation":199,"user_id":7566266,"display_name":"Z. Zhang"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1591414107,"creation_date":1487129538,"answer_id":42240214,"question_id":22458575,"body_markdown":"The key point is to find where the method will stop and where the cursor will be after calling the methods.\r\n\r\nAll methods will read information which does not include whitespace between the cursor position and the next default delimiters(whitespace, tab, \\n--created by pressing Enter). The cursor stops before the delimiters except for `nextLine()`, which reads information (including whitespace created by delimiters) between the cursor position and \\n, and the cursor stops behind \\n.\r\n\r\n---\r\n\r\nFor example, consider the following illustration:\r\n\r\n    |23_24_25_26_27\\n\r\n\r\n`|` -&gt; the current cursor position\r\n\r\n`_` -&gt; whitespace\r\n\r\n**stream** -&gt; Bold (the information got by the calling method)\r\n\r\nSee what happens when you call these methods:\r\n\r\n    nextInt()    \r\n\r\nread **23**|_24_25_26_27\\n\r\n\r\n    nextDouble()\r\n\r\nread 23_**24**|_25_26_27\\n\r\n\r\n    next()\r\n\r\nread 23_24_**25**|_26_27\\n\r\n\r\n    nextLine()\r\n\r\nread 23_24_25**_26_27**\\n|\r\n\r\n---\r\n\r\nAfter this, the method should be called depending on your requirement.  ","title":"What&#39;s the difference between next() and nextLine() methods from Scanner class?","body":"<p>The key point is to find where the method will stop and where the cursor will be after calling the methods.</p>\n\n<p>All methods will read information which does not include whitespace between the cursor position and the next default delimiters(whitespace, tab, \\n--created by pressing Enter). The cursor stops before the delimiters except for <code>nextLine()</code>, which reads information (including whitespace created by delimiters) between the cursor position and \\n, and the cursor stops behind \\n.</p>\n\n<hr>\n\n<p>For example, consider the following illustration:</p>\n\n<pre><code>|23_24_25_26_27\\n\n</code></pre>\n\n<p><code>|</code> -> the current cursor position</p>\n\n<p><code>_</code> -> whitespace</p>\n\n<p><strong>stream</strong> -> Bold (the information got by the calling method)</p>\n\n<p>See what happens when you call these methods:</p>\n\n<pre><code>nextInt()    \n</code></pre>\n\n<p>read <strong>23</strong>|_24_25_26_27\\n</p>\n\n<pre><code>nextDouble()\n</code></pre>\n\n<p>read 23_<strong>24</strong>|_25_26_27\\n</p>\n\n<pre><code>next()\n</code></pre>\n\n<p>read 23_24_<strong>25</strong>|_26_27\\n</p>\n\n<pre><code>nextLine()\n</code></pre>\n\n<p>read 23_24_25<strong>_26_27</strong>\\n|</p>\n\n<hr>\n\n<p>After this, the method should be called depending on your requirement.  </p>\n"},{"tags":[],"owner":{"account_id":13309042,"reputation":1,"user_id":9607943,"display_name":"Negash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1523028608,"creation_date":1523028608,"answer_id":49696259,"question_id":22458575,"body_markdown":"**A scanner** breaks its input into tokens using a delimiter pattern, which is by default known the **Whitespaces**.\r\n\r\n**Next()** uses to read a single word and when it gets a white space,it stops reading and the cursor back to its original position.\r\n**NextLine()** while this one reads a whole word even when it meets a whitespace.the cursor stops when it finished reading and cursor backs to the end of the line.\r\nso u don&#39;t need to use a *delimeter* when you want to read a full word as a sentence.you just need to use NextLine().  \r\n\r\n     public static void main(String[] args) {\r\n                // TODO code application logic here\r\n               String str;\r\n                Scanner input = new Scanner( System.in );\r\n                str=input.nextLine();\r\n                System.out.println(str);\r\n           }","title":"What&#39;s the difference between next() and nextLine() methods from Scanner class?","body":"<p><strong>A scanner</strong> breaks its input into tokens using a delimiter pattern, which is by default known the <strong>Whitespaces</strong>.</p>\n\n<p><strong>Next()</strong> uses to read a single word and when it gets a white space,it stops reading and the cursor back to its original position.\n<strong>NextLine()</strong> while this one reads a whole word even when it meets a whitespace.the cursor stops when it finished reading and cursor backs to the end of the line.\nso u don't need to use a <em>delimeter</em> when you want to read a full word as a sentence.you just need to use NextLine().  </p>\n\n<pre><code> public static void main(String[] args) {\n            // TODO code application logic here\n           String str;\n            Scanner input = new Scanner( System.in );\n            str=input.nextLine();\n            System.out.println(str);\n       }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13309042,"reputation":1,"user_id":9607943,"display_name":"Negash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1523037807,"creation_date":1523029319,"answer_id":49696463,"question_id":22458575,"body_markdown":"I also got a problem concerning a delimiter.\r\nthe question was all about inputs of\r\n\r\n 1. enter your name.\r\n 2. enter your age.\r\n 3. enter your email.\r\n 4. enter your address.\r\n\r\n**The problem**\r\n\r\n1. I finished successfully with name, age, and email.\r\n2. When I came up with the address of two words having a **whitespace** (Harnet street) I just got the first one &quot;harnet&quot;.\r\n\r\n**The solution**\r\n\r\nI used the delimiter for my scanner and went out successful.\r\n\r\n**Example** \r\n\r\n     public static void main (String args[]){\r\n         //Initialize the Scanner this way so that it delimits input using a new line character.\r\n        Scanner s = new Scanner(System.in).useDelimiter(&quot;\\n&quot;);\r\n        System.out.println(&quot;Enter Your Name: &quot;);\r\n        String name = s.next();\r\n        System.out.println(&quot;Enter Your Age: &quot;);\r\n        int age = s.nextInt();\r\n        System.out.println(&quot;Enter Your E-mail: &quot;);\r\n        String email = s.next();\r\n        System.out.println(&quot;Enter Your Address: &quot;);\r\n        String address = s.next();\r\n        \r\n        System.out.println(&quot;Name: &quot;+name);\r\n        System.out.println(&quot;Age: &quot;+age);\r\n        System.out.println(&quot;E-mail: &quot;+email);\r\n        System.out.println(&quot;Address: &quot;+address);\r\n    }\r\n\r\n","title":"What&#39;s the difference between next() and nextLine() methods from Scanner class?","body":"<p>I also got a problem concerning a delimiter.\nthe question was all about inputs of</p>\n\n<ol>\n<li>enter your name.</li>\n<li>enter your age.</li>\n<li>enter your email.</li>\n<li>enter your address.</li>\n</ol>\n\n<p><strong>The problem</strong></p>\n\n<ol>\n<li>I finished successfully with name, age, and email.</li>\n<li>When I came up with the address of two words having a <strong>whitespace</strong> (Harnet street) I just got the first one \"harnet\".</li>\n</ol>\n\n<p><strong>The solution</strong></p>\n\n<p>I used the delimiter for my scanner and went out successful.</p>\n\n<p><strong>Example</strong> </p>\n\n<pre><code> public static void main (String args[]){\n     //Initialize the Scanner this way so that it delimits input using a new line character.\n    Scanner s = new Scanner(System.in).useDelimiter(\"\\n\");\n    System.out.println(\"Enter Your Name: \");\n    String name = s.next();\n    System.out.println(\"Enter Your Age: \");\n    int age = s.nextInt();\n    System.out.println(\"Enter Your E-mail: \");\n    String email = s.next();\n    System.out.println(\"Enter Your Address: \");\n    String address = s.next();\n\n    System.out.println(\"Name: \"+name);\n    System.out.println(\"Age: \"+age);\n    System.out.println(\"E-mail: \"+email);\n    System.out.println(\"Address: \"+address);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15203786,"reputation":1,"user_id":10970924,"display_name":"Simple Coder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1564898928,"creation_date":1564898928,"answer_id":57344240,"question_id":22458575,"body_markdown":"The basic difference is next() is used for gettting the input till the delimiter is encountered(By default it is whitespace,but you can also change it) and return the token which you have entered.The cursor then remains on the Same line.Whereas in nextLine() it scans the input till we hit enter button and return the whole thing and places the cursor in the next line.\r\n   **\r\n\r\n            Scanner sc=new Scanner(System.in);\r\n    \t\tString s[]=new String[2];\r\n    \t\tfor(int i=0;i&lt;2;i++){\r\n    \t\t    s[i]=sc.next();\r\n    \t\t}\r\n    \t\tfor(int j=0;j&lt;2;j++)\r\n    \t\t{\r\n    \t\t    System.out.println(&quot;The string at position &quot;+j+ &quot; is &quot;+s[j]);\r\n    \t\t}\r\n\r\n**\r\n\r\nTry running this code by giving Input as &quot;Hello World&quot;.The scanner reads the input till &#39;o&#39; and then a delimiter occurs.so s[0] will be &quot;Hello&quot; and cursor will be pointing to the next position after delimiter(that is &#39;W&#39; in our case),and when s[1] is read it scans the &quot;World&quot; and return it to s[1] as the next complete token(by definition of Scanner).If we use nextLine() instead,it will read the &quot;Hello World&quot; fully and also more till we hit the enter button and store it in s[0].\r\nWe may give another string also by using nextLine(). I recommend you to try using this example and more and ask for any clarification. \r\n\r\n","title":"What&#39;s the difference between next() and nextLine() methods from Scanner class?","body":"<p>The basic difference is next() is used for gettting the input till the delimiter is encountered(By default it is whitespace,but you can also change it) and return the token which you have entered.The cursor then remains on the Same line.Whereas in nextLine() it scans the input till we hit enter button and return the whole thing and places the cursor in the next line.\n   **</p>\n\n<pre><code>        Scanner sc=new Scanner(System.in);\n        String s[]=new String[2];\n        for(int i=0;i&lt;2;i++){\n            s[i]=sc.next();\n        }\n        for(int j=0;j&lt;2;j++)\n        {\n            System.out.println(\"The string at position \"+j+ \" is \"+s[j]);\n        }\n</code></pre>\n\n<p>**</p>\n\n<p>Try running this code by giving Input as \"Hello World\".The scanner reads the input till 'o' and then a delimiter occurs.so s[0] will be \"Hello\" and cursor will be pointing to the next position after delimiter(that is 'W' in our case),and when s[1] is read it scans the \"World\" and return it to s[1] as the next complete token(by definition of Scanner).If we use nextLine() instead,it will read the \"Hello World\" fully and also more till we hit the enter button and store it in s[0].\nWe may give another string also by using nextLine(). I recommend you to try using this example and more and ask for any clarification. </p>\n"},{"tags":[],"owner":{"account_id":16921011,"reputation":2463,"user_id":12237837,"display_name":"Aditya Rewari"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1583659360,"creation_date":1583659360,"answer_id":60586070,"question_id":22458575,"body_markdown":"Both functions are used to move to the next Scanner token.\r\n\r\nThe difference lies in how the scanner token is generated\r\n\r\n&gt; next() generates scanner tokens using delimiter as **White Space**\r\n&gt; \r\n&gt; nextLine() generates scanner tokens using delimiter as **&#39;\\n&#39;** (i.e Enter\r\n&gt; key presses)","title":"What&#39;s the difference between next() and nextLine() methods from Scanner class?","body":"<p>Both functions are used to move to the next Scanner token.</p>\n\n<p>The difference lies in how the scanner token is generated</p>\n\n<blockquote>\n  <p>next() generates scanner tokens using delimiter as <strong>White Space</strong></p>\n  \n  <p>nextLine() generates scanner tokens using delimiter as <strong>'\\n'</strong> (i.e Enter\n  key presses)</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":11099552,"reputation":1649,"user_id":8148637,"display_name":"KnockingHeads"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1621861105,"creation_date":1621861105,"answer_id":67672466,"question_id":22458575,"body_markdown":"The difference can be very clear with the code below and its output.\r\n\r\n```\r\n    public static void main(String[] args) {\r\n        List&lt;String&gt; arrayList = new ArrayList&lt;&gt;();\r\n        List&lt;String&gt; arrayList2 = new ArrayList&lt;&gt;();\r\n        Scanner input = new Scanner(System.in);\r\n\r\n        String product = input.next();\r\n\r\n        while(!product.equalsIgnoreCase(&quot;q&quot;)) {\r\n            arrayList.add(product);\r\n            product = input.next();\r\n        }\r\n\r\n        System.out.println(&quot;You wrote the following products \\n&quot;);\r\n        for (String naam : arrayList) {\r\n            System.out.println(naam);\r\n        }\r\n\r\n        product = input.nextLine();\r\n        System.out.println(&quot;Enter a product&quot;);\r\n        while (!product.equalsIgnoreCase(&quot;q&quot;)) {\r\n            arrayList2.add(product);\r\n            System.out.println(&quot;Enter a product&quot;);\r\n            product = input.nextLine();\r\n        }\r\n\r\n        System.out.println();\r\n        System.out.println();\r\n        System.out.println();\r\n        System.out.println();\r\n\r\n        System.out.println(&quot;You wrote the following products \\n&quot;);\r\n        for (String naam : arrayList2) {\r\n            System.out.println(naam);\r\n        }\r\n    }\r\n```\r\n\r\n**Output:**\r\n\r\n```\r\nEnter a product\r\naaa aaa\r\nEnter a product\r\nEnter a product\r\nbb\r\nEnter a product\r\nccc cccc ccccc\r\nEnter a product\r\nEnter a product\r\nEnter a product\r\nq\r\nYou wrote the following products \r\n\r\naaa\r\naaa\r\nbb\r\nccc\r\ncccc\r\nccccc\r\nEnter a product\r\nEnter a product\r\naaaa aaaa aaaa\r\nEnter a product\r\nbb\r\nEnter a product\r\nq\r\n\r\n\r\n\r\n\r\nYou wrote the following products \r\n\r\n\r\naaaa aaaa aaaa\r\nbb\r\n````\r\n\r\nQuite clear that the default delimiter space is adding the products separated by space to the list when next is used, so each time space separated strings are entered on a line, they are different strings.\r\nWith nextLine, space has no significance and the whole line is one string.","title":"What&#39;s the difference between next() and nextLine() methods from Scanner class?","body":"<p>The difference can be very clear with the code below and its output.</p>\n<pre><code>    public static void main(String[] args) {\n        List&lt;String&gt; arrayList = new ArrayList&lt;&gt;();\n        List&lt;String&gt; arrayList2 = new ArrayList&lt;&gt;();\n        Scanner input = new Scanner(System.in);\n\n        String product = input.next();\n\n        while(!product.equalsIgnoreCase(&quot;q&quot;)) {\n            arrayList.add(product);\n            product = input.next();\n        }\n\n        System.out.println(&quot;You wrote the following products \\n&quot;);\n        for (String naam : arrayList) {\n            System.out.println(naam);\n        }\n\n        product = input.nextLine();\n        System.out.println(&quot;Enter a product&quot;);\n        while (!product.equalsIgnoreCase(&quot;q&quot;)) {\n            arrayList2.add(product);\n            System.out.println(&quot;Enter a product&quot;);\n            product = input.nextLine();\n        }\n\n        System.out.println();\n        System.out.println();\n        System.out.println();\n        System.out.println();\n\n        System.out.println(&quot;You wrote the following products \\n&quot;);\n        for (String naam : arrayList2) {\n            System.out.println(naam);\n        }\n    }\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>Enter a product\naaa aaa\nEnter a product\nEnter a product\nbb\nEnter a product\nccc cccc ccccc\nEnter a product\nEnter a product\nEnter a product\nq\nYou wrote the following products \n\naaa\naaa\nbb\nccc\ncccc\nccccc\nEnter a product\nEnter a product\naaaa aaaa aaaa\nEnter a product\nbb\nEnter a product\nq\n\n\n\n\nYou wrote the following products \n\n\naaaa aaaa aaaa\nbb\n</code></pre>\n<p>Quite clear that the default delimiter space is adding the products separated by space to the list when next is used, so each time space separated strings are entered on a line, they are different strings.\nWith nextLine, space has no significance and the whole line is one string.</p>\n"}],"owner":{"account_id":4064974,"reputation":1350,"user_id":3375314,"accept_rate":92,"display_name":"AnnieOK"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":339219,"favorite_count":0,"down_vote_count":3,"up_vote_count":108,"accepted_answer_id":22458766,"answer_count":15,"score":105,"last_activity_date":1649667254,"creation_date":1395070455,"question_id":22458575,"body_markdown":"What is the main difference between `next()` and `nextLine()`?  \r\nMy main goal is to read the all text using a `Scanner` which may be &quot;connected&quot; **to any source** (file for example).\r\n\r\nWhich one should I choose and why?","title":"What&#39;s the difference between next() and nextLine() methods from Scanner class?","body":"<p>What is the main difference between <code>next()</code> and <code>nextLine()</code>?<br>\nMy main goal is to read the all text using a <code>Scanner</code> which may be \"connected\" <strong>to any source</strong> (file for example).</p>\n\n<p>Which one should I choose and why?</p>\n"},{"tags":["java","selenium","dependency-injection","testng","cucumber-jvm"],"comments":[{"owner":{"account_id":11380920,"reputation":8254,"user_id":8343843,"display_name":"Alexey R."},"score":0,"creation_date":1649664590,"post_id":71816500,"comment_id":126924208,"body_markdown":"This looks more like an issue with incompatibility of library versions that Selenium uses and that are actually loaded.  Not issue of Guice. Can you show your `pom.xml`?","body":"This looks more like an issue with incompatibility of library versions that Selenium uses and that are actually loaded.  Not issue of Guice. Can you show your <code>pom.xml</code>?"},{"owner":{"account_id":24890332,"reputation":23,"user_id":18762396,"display_name":"Dmitriy"},"score":0,"creation_date":1649665816,"post_id":71816500,"comment_id":126924645,"body_markdown":"Added pom.xml to a post","body":"Added pom.xml to a post"}],"answers":[{"tags":[],"owner":{"account_id":11380920,"reputation":8254,"user_id":8343843,"display_name":"Alexey R."},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649667220,"creation_date":1649667220,"answer_id":71825060,"question_id":71816500,"body_markdown":"If you run `mvn dependency:tree -Dverbose` in your project root you will be able to analyze the dependency hierarchy of your project.\r\n\r\nPackage `com.google.common.collect.ImmutableMap` is distributed within `guava` library. The dependency analysis shows that Selenium uses version `31.1` while Guice uses version `30.1`.\r\n\r\nGuava that is under Guice is closer to the tree root so that it is taken by Maven considering that the closer lib to the root the more priority it has in case of conflicts.\r\n\r\nThere are three solutions:\r\n\r\n1. Decrease version of Selenium to the one using lower version of Guava (ideally 30.1 but the major version match is also acceptable) \r\n2. Increase version of Guice to the one using higher version of Guava (ideally 31.1 but the major version match is also acceptable)\r\n3. Specify the guava dependency implicitly. Put 31.1 version dependency to your `pom.xml`. It will have the absolute priority over others. And hope it is backward compatible with 30.1 so that Guice logic will not be affected.","title":"Initialise WebDriver as dependency injection in Cucumber-JVM before test","body":"<p>If you run <code>mvn dependency:tree -Dverbose</code> in your project root you will be able to analyze the dependency hierarchy of your project.</p>\n<p>Package <code>com.google.common.collect.ImmutableMap</code> is distributed within <code>guava</code> library. The dependency analysis shows that Selenium uses version <code>31.1</code> while Guice uses version <code>30.1</code>.</p>\n<p>Guava that is under Guice is closer to the tree root so that it is taken by Maven considering that the closer lib to the root the more priority it has in case of conflicts.</p>\n<p>There are three solutions:</p>\n<ol>\n<li>Decrease version of Selenium to the one using lower version of Guava (ideally 30.1 but the major version match is also acceptable)</li>\n<li>Increase version of Guice to the one using higher version of Guava (ideally 31.1 but the major version match is also acceptable)</li>\n<li>Specify the guava dependency implicitly. Put 31.1 version dependency to your <code>pom.xml</code>. It will have the absolute priority over others. And hope it is backward compatible with 30.1 so that Guice logic will not be affected.</li>\n</ol>\n"}],"owner":{"account_id":24890332,"reputation":23,"user_id":18762396,"display_name":"Dmitriy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":653,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71825060,"answer_count":1,"score":0,"last_activity_date":1649667220,"creation_date":1649592917,"question_id":71816500,"body_markdown":"I am new to Cucumber-JVM and previously I used to create a BaseTest class, initialise WebDriver there in some @BeforeMethod and then extend all other Test Classes from BaseTest class, so WebDriver initialisation is managed a single time in the code base and WebDriver initialisation happens before each test as it should be. With Cucumber-JVM, I understand that idea is to initialise WebDriver in some class, mark this class with @ScenarioScoped annotation and then use instance of this class in StepDefinitions with @Inject annotation ‚Äî so I can access created WebDriver. I tried different options for it, but was not successful. I followed steps in these guides, but each time I get similar errors:\r\nhttp://www.thinkcode.se/blog/2017/08/16/sharing-state-between-steps-in-cucumberjvm-using-guice\r\nhttps://codoid.com/automation-testing/an-all-inclusive-guide-to-achieve-cucumber-dependency-injection-using-guice/\r\n\r\nI attach my files with current state below and hope that someone can direct me to a right way how I can do it.\r\n\r\n\r\n```java\r\n[ERROR] Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 1.813 s &lt;&lt;&lt; FAILURE! - in TestSuite\r\n[ERROR] wiki.runners.MainPageRunnerTest.runScenario[&quot;Open main page from home page in English locale&quot;, &quot;Optional[Open main page]&quot;](1)  Time elapsed: 0.643 s  &lt;&lt;&lt; FAILURE!\r\ncom.google.inject.ProvisionException: \r\nUnable to provision, see the following errors:\r\n\r\n1) [Guice/ErrorInjectingConstructor]: NoSuchMethodError: &#39;ImmutableMap ImmutableMap.of(Object, Object, Object, Object, Object, Object, Object, Object, Object, Object, Object, Object)&#39;\r\n  at wiki.World.&lt;init&gt;(World.java:10)\r\n  at wiki.World.class(World.java:10)\r\n  at OpenMainPageDefinitions.world(OpenMainPageDefinitions.java:15)\r\n      \\_ for field world\r\n  while locating OpenMainPageDefinitions\r\n\r\nLearn more:\r\n  https://github.com/google/guice/wiki/ERROR_INJECTING_CONSTRUCTOR\r\n\r\n1 error\r\n\r\n======================\r\nFull classname legend:\r\n======================\r\nImmutableMap:            &quot;com.google.common.collect.ImmutableMap&quot;\r\nOpenMainPageDefinitions: &quot;wiki.definitions.OpenMainPageDefinitions&quot;\r\n========================\r\nEnd of classname legend:\r\n========================\r\n\r\n        at com.google.inject.internal.InternalProvisionException.toProvisionException(InternalProvisionException.java:251)\r\n        at com.google.inject.internal.InjectorImpl$1.get(InjectorImpl.java:1104)\r\n        at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:1139)\r\n        at io.cucumber.guice.GuiceFactory.getInstance(GuiceFactory.java:83)\r\n        at io.cucumber.java.AbstractGlueDefinition.invokeMethod(AbstractGlueDefinition.java:47)\r\n        at io.cucumber.java.JavaStepDefinition.execute(JavaStepDefinition.java:29)\r\n        at io.cucumber.core.runner.CoreStepDefinition.execute(CoreStepDefinition.java:66)\r\n        at io.cucumber.core.runner.PickleStepDefinitionMatch.runStep(PickleStepDefinitionMatch.java:63)\r\n        at io.cucumber.core.runner.ExecutionMode$1.execute(ExecutionMode.java:10)\r\n        at io.cucumber.core.runner.TestStep.executeStep(TestStep.java:86)\r\n        at io.cucumber.core.runner.TestStep.run(TestStep.java:57)\r\n        at io.cucumber.core.runner.PickleStepTestStep.run(PickleStepTestStep.java:51)\r\n        at io.cucumber.core.runner.TestCase.run(TestCase.java:95)\r\n        at io.cucumber.core.runner.Runner.runPickle(Runner.java:75)\r\n        at io.cucumber.testng.TestNGCucumberRunner.lambda$runScenario$1(TestNGCucumberRunner.java:132)\r\n        at io.cucumber.core.runtime.CucumberExecutionContext.lambda$runTestCase$3(CucumberExecutionContext.java:151)\r\n        at io.cucumber.core.runtime.RethrowingThrowableCollector.executeAndThrow(RethrowingThrowableCollector.java:23)\r\n        at io.cucumber.core.runtime.CucumberExecutionContext.runTestCase(CucumberExecutionContext.java:151)\r\n        at io.cucumber.testng.TestNGCucumberRunner.runScenario(TestNGCucumberRunner.java:129)\r\n        at io.cucumber.testng.AbstractTestNGCucumberTests.runScenario(AbstractTestNGCucumberTests.java:35)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n        at org.testng.internal.invokers.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:135)\r\n        at org.testng.internal.invokers.TestInvoker.invokeMethod(TestInvoker.java:673)\r\n        at org.testng.internal.invokers.TestInvoker.invokeTestMethod(TestInvoker.java:220)\r\n        at org.testng.internal.invokers.MethodRunner.runInSequence(MethodRunner.java:50)\r\n        at org.testng.internal.invokers.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:945)\r\n        at org.testng.internal.invokers.TestInvoker.invokeTestMethods(TestInvoker.java:193)\r\n        at org.testng.internal.invokers.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)\r\n        at org.testng.internal.invokers.TestMethodWorker.run(TestMethodWorker.java:128)\r\n        at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n        at org.testng.TestRunner.privateRun(TestRunner.java:808)\r\n        at org.testng.TestRunner.run(TestRunner.java:603)\r\n        at org.testng.SuiteRunner.runTest(SuiteRunner.java:429)\r\n        at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:423)\r\n        at org.testng.SuiteRunner.privateRun(SuiteRunner.java:383)\r\n        at org.testng.SuiteRunner.run(SuiteRunner.java:326)\r\n        at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)\r\n        at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:95)\r\n        at org.testng.TestNG.runSuitesSequentially(TestNG.java:1249)\r\n        at org.testng.TestNG.runSuitesLocally(TestNG.java:1169)\r\n        at org.testng.TestNG.runSuites(TestNG.java:1092)\r\n        at org.testng.TestNG.run(TestNG.java:1060)\r\n        at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:324)\r\n        at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:74)\r\n        at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:123)\r\n        at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:456)\r\n        at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:169)\r\n        at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:595)\r\n        at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:581)\r\nCaused by: java.lang.NoSuchMethodError: &#39;com.google.common.collect.ImmutableMap com.google.common.collect.ImmutableMap.of(java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object)&#39;\r\n        at org.openqa.selenium.chrome.AddHasCasting.getAdditionalCommands(AddHasCasting.java:38)\r\n        at org.openqa.selenium.chrome.ChromeDriver$ChromeDriverCommandExecutor.getExtraCommands(ChromeDriver.java:123)\r\n        at org.openqa.selenium.chrome.ChromeDriver$ChromeDriverCommandExecutor.&lt;init&gt;(ChromeDriver.java:118)\r\n        at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:106)\r\n        at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:93)\r\n        at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:82)\r\n        at wiki.WebDriverManager.&lt;init&gt;(WebDriverManager.java:16)\r\n        at wiki.World.&lt;init&gt;(World.java:11)\r\n        at wiki.World$$FastClassByGuice$$11467.GUICE$TRAMPOLINE(&lt;generated&gt;)\r\n        at wiki.World$$FastClassByGuice$$11467.apply(&lt;generated&gt;)\r\n        at com.google.inject.internal.DefaultConstructionProxyFactory$FastClassProxy.newInstance(DefaultConstructionProxyFactory.java:82)\r\n        at com.google.inject.internal.ConstructorInjector.provision(ConstructorInjector.java:114)\r\n        at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:91)\r\n        at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:300)\r\n        at com.google.inject.internal.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:40)\r\n        at io.cucumber.guice.SequentialScenarioScope.lambda$scope$0(SequentialScenarioScope.java:40)\r\n        at com.google.inject.internal.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:45)\r\n        at com.google.inject.internal.SingleFieldInjector.inject(SingleFieldInjector.java:50)\r\n        at com.google.inject.internal.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:146)\r\n        at com.google.inject.internal.ConstructorInjector.provision(ConstructorInjector.java:124)\r\n        at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:91)\r\n        at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:300)\r\n        at com.google.inject.internal.InjectorImpl$1.get(InjectorImpl.java:1101)\r\n        ... 50 more\r\n\r\n[INFO] \r\n[INFO] Results:\r\n[INFO] \r\n[ERROR] Failures: \r\n[ERROR]   MainPageRunnerTest&gt;AbstractTestNGCucumberTests.runScenario:35 &#187; Provision Unable to provision, see the following errors:\r\n\r\n1) [Guice/ErrorInjectingConstructor]: NoSuchMethodError: &#39;ImmutableMap ImmutableMap.of(Object, Object, Object, Object, Object, Object, Object, Object, Object, Object, Object, Object)&#39;\r\n  at wiki.World.&lt;init&gt;(World.java:10)\r\n  at wiki.World.class(World.java:10)\r\n  at OpenMainPageDefinitions.world(OpenMainPageDefinitions.java:15)\r\n      \\_ for field world\r\n  while locating OpenMainPageDefinitions\r\n\r\nLearn more:\r\n  https://github.com/google/guice/wiki/ERROR_INJECTING_CONSTRUCTOR\r\n\r\n1 error\r\n\r\n======================\r\nFull classname legend:\r\n======================\r\nImmutableMap:            &quot;com.google.common.collect.ImmutableMap&quot;\r\nOpenMainPageDefinitions: &quot;wiki.definitions.OpenMainPageDefinitions&quot;\r\n========================\r\nEnd of classname legend:\r\n========================\r\n\r\n[INFO] \r\n[ERROR] Tests run: 1, Failures: 1, Errors: 0, Skipped: 0\r\n```\r\n\r\n\r\nOpenMainPageDefinitions.java:\r\n```java\r\npackage wiki.definitions;\r\n\r\nimport com.google.inject.Inject;\r\nimport io.cucumber.java.en.Given;\r\nimport io.cucumber.java.en.Then;\r\nimport io.cucumber.java.en.When;\r\nimport wiki.World;\r\nimport wiki.pages.EnMainPage;\r\nimport wiki.pages.HomePage;\r\n\r\npublic class OpenMainPageDefinitions {\r\n\r\n    @Inject World world;\r\n    public HomePage homePage;\r\n    public EnMainPage enMainPage;\r\n\r\n    @Given(&quot;Home page is opened&quot;)\r\n    public void homePageIsOpened() {\r\n        homePage = new HomePage(world.manager.get());\r\n        homePage.open().assertCentralFeaturedLogoIsDisplayed();\r\n    }\r\n\r\n    @When(&quot;User clicks on Main Page Link&quot;)\r\n    public void userClicksOnMainPageLink() {\r\n        homePage.clickEnMainPageLink();\r\n        enMainPage = new EnMainPage(world.manager.get());\r\n    }\r\n\r\n    @Then(&quot;Welcome block is displayed&quot;)\r\n    public void welcomeBlockIsDisplayed() {\r\n        enMainPage.assertWelcomeBlockIsDisplayed();\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nWorld.java\r\n```java\r\npackage wiki;\r\n\r\nimport io.cucumber.guice.ScenarioScoped;\r\n\r\n@ScenarioScoped\r\npublic class World {\r\n\r\n    public WebDriverManager manager;\r\n\r\n    public World() {\r\n        manager = new WebDriverManager();\r\n    }\r\n\r\n}\r\n```\r\n\r\nWebDriverManager.java\r\n```java\r\npackage wiki;\r\n\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.chrome.ChromeDriver;\r\nimport org.openqa.selenium.chrome.ChromeOptions;\r\n\r\npublic class WebDriverManager {\r\n\r\n    public String env;\r\n    public ChromeOptions options;\r\n    public WebDriver driver;\r\n\r\n    public WebDriverManager() {\r\n        env = getEnv();\r\n        options = getChromeOptions();\r\n        driver = new ChromeDriver(options);\r\n    }\r\n\r\n    public ChromeOptions getChromeOptions() {\r\n        if(env.equals(&quot;CIRCLE_CI&quot;)) {\r\n            return new ChromeOptions()\r\n                    .addArguments(&quot;--disable-dev-shm-usage&quot;)\r\n                    .addArguments(&quot;--headless&quot;)\r\n                    .addArguments(&quot;--no-sandbox&quot;);\r\n        }\r\n        return new ChromeOptions();\r\n    }\r\n\r\n    public String getEnv() {\r\n        String env = System.getenv(&quot;WIKI_ENV&quot;);\r\n        return env == null ? &quot;LOCAL&quot; : env;\r\n    }\r\n\r\n    public WebDriver get() {\r\n        return driver;\r\n    }\r\n\r\n}\r\n```\r\n\r\npom.xml\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;cucumber-selenium-tests&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n        &lt;maven-surefire-plugin.version&gt;3.0.0-M6&lt;/maven-surefire-plugin.version&gt;\r\n        &lt;maven-compiler-plugin.version&gt;3.10.1&lt;/maven-compiler-plugin.version&gt;\r\n        &lt;testng.version&gt;7.5&lt;/testng.version&gt;\r\n        &lt;selenium-java.version&gt;4.1.3&lt;/selenium-java.version&gt;\r\n        &lt;cucumber.version&gt;7.2.3&lt;/cucumber.version&gt;\r\n        &lt;google-inject.version&gt;5.1.0&lt;/google-inject.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;${maven-compiler-plugin.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.testng&lt;/groupId&gt;\r\n            &lt;artifactId&gt;testng&lt;/artifactId&gt;\r\n            &lt;version&gt;${testng.version}&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.testng&lt;/groupId&gt;\r\n            &lt;artifactId&gt;testng&lt;/artifactId&gt;\r\n            &lt;version&gt;${testng.version}&lt;/version&gt;\r\n            &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n            &lt;version&gt;${selenium-java.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n            &lt;artifactId&gt;cucumber-testng&lt;/artifactId&gt;\r\n            &lt;version&gt;${cucumber.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n            &lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\r\n            &lt;version&gt;${cucumber.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n            &lt;artifactId&gt;cucumber-guice&lt;/artifactId&gt;\r\n            &lt;version&gt;${cucumber.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.inject&lt;/groupId&gt;\r\n            &lt;artifactId&gt;guice&lt;/artifactId&gt;\r\n            &lt;version&gt;${google-inject.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;${maven-surefire-plugin.version}&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;systemPropertyVariables&gt;\r\n                        &lt;webdriver.chrome.driver&gt;/tmp/chromedriver/chromedriver&lt;/webdriver.chrome.driver&gt;\r\n                    &lt;/systemPropertyVariables&gt;\r\n                    &lt;suiteXmlFiles&gt;\r\n                        &lt;suiteXmlFile&gt;testng.xml&lt;/suiteXmlFile&gt;\r\n                    &lt;/suiteXmlFiles&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```","title":"Initialise WebDriver as dependency injection in Cucumber-JVM before test","body":"<p>I am new to Cucumber-JVM and previously I used to create a BaseTest class, initialise WebDriver there in some @BeforeMethod and then extend all other Test Classes from BaseTest class, so WebDriver initialisation is managed a single time in the code base and WebDriver initialisation happens before each test as it should be. With Cucumber-JVM, I understand that idea is to initialise WebDriver in some class, mark this class with @ScenarioScoped annotation and then use instance of this class in StepDefinitions with @Inject annotation ‚Äî so I can access created WebDriver. I tried different options for it, but was not successful. I followed steps in these guides, but each time I get similar errors:\n<a href=\"http://www.thinkcode.se/blog/2017/08/16/sharing-state-between-steps-in-cucumberjvm-using-guice\" rel=\"nofollow noreferrer\">http://www.thinkcode.se/blog/2017/08/16/sharing-state-between-steps-in-cucumberjvm-using-guice</a>\n<a href=\"https://codoid.com/automation-testing/an-all-inclusive-guide-to-achieve-cucumber-dependency-injection-using-guice/\" rel=\"nofollow noreferrer\">https://codoid.com/automation-testing/an-all-inclusive-guide-to-achieve-cucumber-dependency-injection-using-guice/</a></p>\n<p>I attach my files with current state below and hope that someone can direct me to a right way how I can do it.</p>\n<pre class=\"lang-java prettyprint-override\"><code>[ERROR] Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 1.813 s &lt;&lt;&lt; FAILURE! - in TestSuite\n[ERROR] wiki.runners.MainPageRunnerTest.runScenario[&quot;Open main page from home page in English locale&quot;, &quot;Optional[Open main page]&quot;](1)  Time elapsed: 0.643 s  &lt;&lt;&lt; FAILURE!\ncom.google.inject.ProvisionException: \nUnable to provision, see the following errors:\n\n1) [Guice/ErrorInjectingConstructor]: NoSuchMethodError: 'ImmutableMap ImmutableMap.of(Object, Object, Object, Object, Object, Object, Object, Object, Object, Object, Object, Object)'\n  at wiki.World.&lt;init&gt;(World.java:10)\n  at wiki.World.class(World.java:10)\n  at OpenMainPageDefinitions.world(OpenMainPageDefinitions.java:15)\n      \\_ for field world\n  while locating OpenMainPageDefinitions\n\nLearn more:\n  https://github.com/google/guice/wiki/ERROR_INJECTING_CONSTRUCTOR\n\n1 error\n\n======================\nFull classname legend:\n======================\nImmutableMap:            &quot;com.google.common.collect.ImmutableMap&quot;\nOpenMainPageDefinitions: &quot;wiki.definitions.OpenMainPageDefinitions&quot;\n========================\nEnd of classname legend:\n========================\n\n        at com.google.inject.internal.InternalProvisionException.toProvisionException(InternalProvisionException.java:251)\n        at com.google.inject.internal.InjectorImpl$1.get(InjectorImpl.java:1104)\n        at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:1139)\n        at io.cucumber.guice.GuiceFactory.getInstance(GuiceFactory.java:83)\n        at io.cucumber.java.AbstractGlueDefinition.invokeMethod(AbstractGlueDefinition.java:47)\n        at io.cucumber.java.JavaStepDefinition.execute(JavaStepDefinition.java:29)\n        at io.cucumber.core.runner.CoreStepDefinition.execute(CoreStepDefinition.java:66)\n        at io.cucumber.core.runner.PickleStepDefinitionMatch.runStep(PickleStepDefinitionMatch.java:63)\n        at io.cucumber.core.runner.ExecutionMode$1.execute(ExecutionMode.java:10)\n        at io.cucumber.core.runner.TestStep.executeStep(TestStep.java:86)\n        at io.cucumber.core.runner.TestStep.run(TestStep.java:57)\n        at io.cucumber.core.runner.PickleStepTestStep.run(PickleStepTestStep.java:51)\n        at io.cucumber.core.runner.TestCase.run(TestCase.java:95)\n        at io.cucumber.core.runner.Runner.runPickle(Runner.java:75)\n        at io.cucumber.testng.TestNGCucumberRunner.lambda$runScenario$1(TestNGCucumberRunner.java:132)\n        at io.cucumber.core.runtime.CucumberExecutionContext.lambda$runTestCase$3(CucumberExecutionContext.java:151)\n        at io.cucumber.core.runtime.RethrowingThrowableCollector.executeAndThrow(RethrowingThrowableCollector.java:23)\n        at io.cucumber.core.runtime.CucumberExecutionContext.runTestCase(CucumberExecutionContext.java:151)\n        at io.cucumber.testng.TestNGCucumberRunner.runScenario(TestNGCucumberRunner.java:129)\n        at io.cucumber.testng.AbstractTestNGCucumberTests.runScenario(AbstractTestNGCucumberTests.java:35)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n        at org.testng.internal.invokers.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:135)\n        at org.testng.internal.invokers.TestInvoker.invokeMethod(TestInvoker.java:673)\n        at org.testng.internal.invokers.TestInvoker.invokeTestMethod(TestInvoker.java:220)\n        at org.testng.internal.invokers.MethodRunner.runInSequence(MethodRunner.java:50)\n        at org.testng.internal.invokers.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:945)\n        at org.testng.internal.invokers.TestInvoker.invokeTestMethods(TestInvoker.java:193)\n        at org.testng.internal.invokers.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)\n        at org.testng.internal.invokers.TestMethodWorker.run(TestMethodWorker.java:128)\n        at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n        at org.testng.TestRunner.privateRun(TestRunner.java:808)\n        at org.testng.TestRunner.run(TestRunner.java:603)\n        at org.testng.SuiteRunner.runTest(SuiteRunner.java:429)\n        at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:423)\n        at org.testng.SuiteRunner.privateRun(SuiteRunner.java:383)\n        at org.testng.SuiteRunner.run(SuiteRunner.java:326)\n        at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)\n        at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:95)\n        at org.testng.TestNG.runSuitesSequentially(TestNG.java:1249)\n        at org.testng.TestNG.runSuitesLocally(TestNG.java:1169)\n        at org.testng.TestNG.runSuites(TestNG.java:1092)\n        at org.testng.TestNG.run(TestNG.java:1060)\n        at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:324)\n        at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:74)\n        at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:123)\n        at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:456)\n        at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:169)\n        at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:595)\n        at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:581)\nCaused by: java.lang.NoSuchMethodError: 'com.google.common.collect.ImmutableMap com.google.common.collect.ImmutableMap.of(java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object)'\n        at org.openqa.selenium.chrome.AddHasCasting.getAdditionalCommands(AddHasCasting.java:38)\n        at org.openqa.selenium.chrome.ChromeDriver$ChromeDriverCommandExecutor.getExtraCommands(ChromeDriver.java:123)\n        at org.openqa.selenium.chrome.ChromeDriver$ChromeDriverCommandExecutor.&lt;init&gt;(ChromeDriver.java:118)\n        at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:106)\n        at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:93)\n        at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:82)\n        at wiki.WebDriverManager.&lt;init&gt;(WebDriverManager.java:16)\n        at wiki.World.&lt;init&gt;(World.java:11)\n        at wiki.World$$FastClassByGuice$$11467.GUICE$TRAMPOLINE(&lt;generated&gt;)\n        at wiki.World$$FastClassByGuice$$11467.apply(&lt;generated&gt;)\n        at com.google.inject.internal.DefaultConstructionProxyFactory$FastClassProxy.newInstance(DefaultConstructionProxyFactory.java:82)\n        at com.google.inject.internal.ConstructorInjector.provision(ConstructorInjector.java:114)\n        at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:91)\n        at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:300)\n        at com.google.inject.internal.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:40)\n        at io.cucumber.guice.SequentialScenarioScope.lambda$scope$0(SequentialScenarioScope.java:40)\n        at com.google.inject.internal.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:45)\n        at com.google.inject.internal.SingleFieldInjector.inject(SingleFieldInjector.java:50)\n        at com.google.inject.internal.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:146)\n        at com.google.inject.internal.ConstructorInjector.provision(ConstructorInjector.java:124)\n        at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:91)\n        at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:300)\n        at com.google.inject.internal.InjectorImpl$1.get(InjectorImpl.java:1101)\n        ... 50 more\n\n[INFO] \n[INFO] Results:\n[INFO] \n[ERROR] Failures: \n[ERROR]   MainPageRunnerTest&gt;AbstractTestNGCucumberTests.runScenario:35 ¬ª Provision Unable to provision, see the following errors:\n\n1) [Guice/ErrorInjectingConstructor]: NoSuchMethodError: 'ImmutableMap ImmutableMap.of(Object, Object, Object, Object, Object, Object, Object, Object, Object, Object, Object, Object)'\n  at wiki.World.&lt;init&gt;(World.java:10)\n  at wiki.World.class(World.java:10)\n  at OpenMainPageDefinitions.world(OpenMainPageDefinitions.java:15)\n      \\_ for field world\n  while locating OpenMainPageDefinitions\n\nLearn more:\n  https://github.com/google/guice/wiki/ERROR_INJECTING_CONSTRUCTOR\n\n1 error\n\n======================\nFull classname legend:\n======================\nImmutableMap:            &quot;com.google.common.collect.ImmutableMap&quot;\nOpenMainPageDefinitions: &quot;wiki.definitions.OpenMainPageDefinitions&quot;\n========================\nEnd of classname legend:\n========================\n\n[INFO] \n[ERROR] Tests run: 1, Failures: 1, Errors: 0, Skipped: 0\n</code></pre>\n<p>OpenMainPageDefinitions.java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package wiki.definitions;\n\nimport com.google.inject.Inject;\nimport io.cucumber.java.en.Given;\nimport io.cucumber.java.en.Then;\nimport io.cucumber.java.en.When;\nimport wiki.World;\nimport wiki.pages.EnMainPage;\nimport wiki.pages.HomePage;\n\npublic class OpenMainPageDefinitions {\n\n    @Inject World world;\n    public HomePage homePage;\n    public EnMainPage enMainPage;\n\n    @Given(&quot;Home page is opened&quot;)\n    public void homePageIsOpened() {\n        homePage = new HomePage(world.manager.get());\n        homePage.open().assertCentralFeaturedLogoIsDisplayed();\n    }\n\n    @When(&quot;User clicks on Main Page Link&quot;)\n    public void userClicksOnMainPageLink() {\n        homePage.clickEnMainPageLink();\n        enMainPage = new EnMainPage(world.manager.get());\n    }\n\n    @Then(&quot;Welcome block is displayed&quot;)\n    public void welcomeBlockIsDisplayed() {\n        enMainPage.assertWelcomeBlockIsDisplayed();\n    }\n\n}\n\n</code></pre>\n<p>World.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>package wiki;\n\nimport io.cucumber.guice.ScenarioScoped;\n\n@ScenarioScoped\npublic class World {\n\n    public WebDriverManager manager;\n\n    public World() {\n        manager = new WebDriverManager();\n    }\n\n}\n</code></pre>\n<p>WebDriverManager.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>package wiki;\n\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.chrome.ChromeOptions;\n\npublic class WebDriverManager {\n\n    public String env;\n    public ChromeOptions options;\n    public WebDriver driver;\n\n    public WebDriverManager() {\n        env = getEnv();\n        options = getChromeOptions();\n        driver = new ChromeDriver(options);\n    }\n\n    public ChromeOptions getChromeOptions() {\n        if(env.equals(&quot;CIRCLE_CI&quot;)) {\n            return new ChromeOptions()\n                    .addArguments(&quot;--disable-dev-shm-usage&quot;)\n                    .addArguments(&quot;--headless&quot;)\n                    .addArguments(&quot;--no-sandbox&quot;);\n        }\n        return new ChromeOptions();\n    }\n\n    public String getEnv() {\n        String env = System.getenv(&quot;WIKI_ENV&quot;);\n        return env == null ? &quot;LOCAL&quot; : env;\n    }\n\n    public WebDriver get() {\n        return driver;\n    }\n\n}\n</code></pre>\n<p>pom.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\n    &lt;artifactId&gt;cucumber-selenium-tests&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n        &lt;maven-surefire-plugin.version&gt;3.0.0-M6&lt;/maven-surefire-plugin.version&gt;\n        &lt;maven-compiler-plugin.version&gt;3.10.1&lt;/maven-compiler-plugin.version&gt;\n        &lt;testng.version&gt;7.5&lt;/testng.version&gt;\n        &lt;selenium-java.version&gt;4.1.3&lt;/selenium-java.version&gt;\n        &lt;cucumber.version&gt;7.2.3&lt;/cucumber.version&gt;\n        &lt;google-inject.version&gt;5.1.0&lt;/google-inject.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;${maven-compiler-plugin.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.testng&lt;/groupId&gt;\n            &lt;artifactId&gt;testng&lt;/artifactId&gt;\n            &lt;version&gt;${testng.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.testng&lt;/groupId&gt;\n            &lt;artifactId&gt;testng&lt;/artifactId&gt;\n            &lt;version&gt;${testng.version}&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n            &lt;version&gt;${selenium-java.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n            &lt;artifactId&gt;cucumber-testng&lt;/artifactId&gt;\n            &lt;version&gt;${cucumber.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n            &lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\n            &lt;version&gt;${cucumber.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n            &lt;artifactId&gt;cucumber-guice&lt;/artifactId&gt;\n            &lt;version&gt;${cucumber.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.inject&lt;/groupId&gt;\n            &lt;artifactId&gt;guice&lt;/artifactId&gt;\n            &lt;version&gt;${google-inject.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${maven-surefire-plugin.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;systemPropertyVariables&gt;\n                        &lt;webdriver.chrome.driver&gt;/tmp/chromedriver/chromedriver&lt;/webdriver.chrome.driver&gt;\n                    &lt;/systemPropertyVariables&gt;\n                    &lt;suiteXmlFiles&gt;\n                        &lt;suiteXmlFile&gt;testng.xml&lt;/suiteXmlFile&gt;\n                    &lt;/suiteXmlFiles&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","spring-boot","application.properties"],"answers":[{"tags":[],"owner":{"account_id":1908489,"reputation":9264,"user_id":1722882,"accept_rate":100,"display_name":"Plog"},"down_vote_count":0,"up_vote_count":31,"is_accepted":true,"score":31,"last_activity_date":1504512893,"creation_date":1504512584,"answer_id":46032810,"question_id":46032748,"body_markdown":"You can&#39;t use @Value on static variables. You&#39;ll have to either mark it as non static or have a look here at a way to inject values into static variables:\r\n\r\nhttps://www.mkyong.com/spring/spring-inject-a-value-into-static-variables/\r\n\r\nEDIT: Just in case the link breaks in the future. You can do this by making a non static setter for your static variable:\r\n\r\n    @Component\r\n    public class MyComponent {\r\n    \r\n        private static String directory;\r\n    \r\n        @Value(&quot;${filesystem.directory}&quot;)\r\n        public void setDirectory(String value) {\r\n            this.directory = value;\r\n        }\r\n    }\r\n\r\nThe class needs to be a Spring bean though or else it won&#39;t be instantiated and the setter will be not be accessible by Spring.\r\n\r\n","title":"Spring Boot: @Value returns always null","body":"<p>You can't use @Value on static variables. You'll have to either mark it as non static or have a look here at a way to inject values into static variables:</p>\n\n<p><a href=\"https://www.mkyong.com/spring/spring-inject-a-value-into-static-variables/\" rel=\"noreferrer\">https://www.mkyong.com/spring/spring-inject-a-value-into-static-variables/</a></p>\n\n<p>EDIT: Just in case the link breaks in the future. You can do this by making a non static setter for your static variable:</p>\n\n<pre><code>@Component\npublic class MyComponent {\n\n    private static String directory;\n\n    @Value(\"${filesystem.directory}\")\n    public void setDirectory(String value) {\n        this.directory = value;\n    }\n}\n</code></pre>\n\n<p>The class needs to be a Spring bean though or else it won't be instantiated and the setter will be not be accessible by Spring.</p>\n"},{"tags":[],"owner":{"account_id":3505857,"reputation":5593,"user_id":2931410,"accept_rate":33,"display_name":"Karthik R"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1504513491,"creation_date":1504513491,"answer_id":46033027,"question_id":46032748,"body_markdown":"Few things for you to cross check apart from @Plog&#39;s answer.\r\n\r\n`static` variables can&#39;t be injected with value. Check @Plog&#39;s answer.\r\n\r\n - Make sure the class is annotated with `@Component` or `@Service`\r\n - The component scan should scan the enclosing package for registering the beans. Check your XML if xml enabled configuration.\r\n - Check if the property file&#39;s path is correct or in classpath.\r\n\r\n","title":"Spring Boot: @Value returns always null","body":"<p>Few things for you to cross check apart from @Plog's answer.</p>\n\n<p><code>static</code> variables can't be injected with value. Check @Plog's answer.</p>\n\n<ul>\n<li>Make sure the class is annotated with <code>@Component</code> or <code>@Service</code></li>\n<li>The component scan should scan the enclosing package for registering the beans. Check your XML if xml enabled configuration.</li>\n<li>Check if the property file's path is correct or in classpath.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2833714,"reputation":1932,"user_id":2434726,"accept_rate":80,"display_name":"scottysseus"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1544548540,"creation_date":1544548540,"answer_id":53729162,"question_id":46032748,"body_markdown":"The other answers are probably correct for the OP.\r\n\r\nHowever, I ran into the same symptoms (`@Value`-annotated fields being `null`) but with a different underlying issue:\r\n\r\n`import com.google.api.client.util.Value;`\r\n\r\nEnsure that you are importing the correct `@Value` annotation class! Especially with the convenience of IDEs nowadays, this is a VERY easy mistake to make (I am using IntelliJ, and if you auto-import too quickly without reading WHAT you are auto-importing, you might waste a few hours like I did).\r\n\r\nOf course, the correct class to import is:\r\n\r\n`import org.springframework.beans.factory.annotation.Value;`","title":"Spring Boot: @Value returns always null","body":"<p>The other answers are probably correct for the OP.</p>\n\n<p>However, I ran into the same symptoms (<code>@Value</code>-annotated fields being <code>null</code>) but with a different underlying issue:</p>\n\n<p><code>import com.google.api.client.util.Value;</code></p>\n\n<p>Ensure that you are importing the correct <code>@Value</code> annotation class! Especially with the convenience of IDEs nowadays, this is a VERY easy mistake to make (I am using IntelliJ, and if you auto-import too quickly without reading WHAT you are auto-importing, you might waste a few hours like I did).</p>\n\n<p>Of course, the correct class to import is:</p>\n\n<p><code>import org.springframework.beans.factory.annotation.Value;</code></p>\n"},{"tags":[],"owner":{"account_id":11706487,"reputation":69,"user_id":10576746,"display_name":"Vitalii Shramko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1588882823,"creation_date":1588882823,"answer_id":61667024,"question_id":46032748,"body_markdown":"Spring uses dependency injection to populate the specific value when it finds the @Value annotation. However, instead of handing the value to the instance variable, it&#39;s handed to the implicit setter instead. This setter then handles the population of our NAME_STATIC value.\r\n\r\n        @RestController \r\n    //or if you want to declare some specific use of the properties file then use\r\n    //@Configuration\r\n    //@PropertySource({&quot;classpath:application-${youeEnvironment}.properties&quot;})\r\n    public class PropertyController {\r\n     \r\n        @Value(&quot;${name}&quot;)//not necessary\r\n        private String name;//not necessary\r\n     \r\n        private static String NAME_STATIC;\r\n     \r\n        @Value(&quot;${name}&quot;)\r\n        public void setNameStatic(String name){\r\n            PropertyController.NAME_STATIC = name;\r\n        }\r\n    }","title":"Spring Boot: @Value returns always null","body":"<p>Spring uses dependency injection to populate the specific value when it finds the @Value annotation. However, instead of handing the value to the instance variable, it's handed to the implicit setter instead. This setter then handles the population of our NAME_STATIC value.</p>\n\n<pre><code>    @RestController \n//or if you want to declare some specific use of the properties file then use\n//@Configuration\n//@PropertySource({\"classpath:application-${youeEnvironment}.properties\"})\npublic class PropertyController {\n\n    @Value(\"${name}\")//not necessary\n    private String name;//not necessary\n\n    private static String NAME_STATIC;\n\n    @Value(\"${name}\")\n    public void setNameStatic(String name){\n        PropertyController.NAME_STATIC = name;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7377225,"reputation":1389,"user_id":5615357,"accept_rate":58,"display_name":"Philippe Simo"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1591875764,"creation_date":1591875764,"answer_id":62323587,"question_id":46032748,"body_markdown":"For the ones still facing the issue after all the preceding suggestions, make sure you are not accessing that variable before the bean has been constructed.\r\n\r\nThat is:\r\n\r\nInstead of doing this:\r\n\r\n````\r\n@Component\r\npublic MyBean {\r\n   @Value(&quot;${properties.my-var}&quot;)\r\n   private String myVar;\r\n\r\n   private String anotherVar = foo(myVar); // &lt;-- myVar here is still null!!!\r\n}\r\n````\r\n\r\ndo this:\r\n\r\n````\r\n@Component\r\npublic MyBean {\r\n   @Value(&quot;${properties.my-var}&quot;)\r\n   private String myVar;\r\n\r\n   private String anotherVar;\r\n   \r\n   @PostConstruct  \r\n   public void postConstruct(){\r\n\r\n      anotherVar = foo(myVar); // &lt;-- using myVar after the bean construction\r\n   }\r\n}\r\n````\r\nHope this will help someone avoid wasting hours.","title":"Spring Boot: @Value returns always null","body":"<p>For the ones still facing the issue after all the preceding suggestions, make sure you are not accessing that variable before the bean has been constructed.</p>\n\n<p>That is:</p>\n\n<p>Instead of doing this:</p>\n\n<pre><code>@Component\npublic MyBean {\n   @Value(\"${properties.my-var}\")\n   private String myVar;\n\n   private String anotherVar = foo(myVar); // &lt;-- myVar here is still null!!!\n}\n</code></pre>\n\n<p>do this:</p>\n\n<pre><code>@Component\npublic MyBean {\n   @Value(\"${properties.my-var}\")\n   private String myVar;\n\n   private String anotherVar;\n\n   @PostConstruct  \n   public void postConstruct(){\n\n      anotherVar = foo(myVar); // &lt;-- using myVar after the bean construction\n   }\n}\n</code></pre>\n\n<p>Hope this will help someone avoid wasting hours.</p>\n"},{"tags":[],"owner":{"account_id":16159923,"reputation":5,"user_id":11666304,"display_name":"Aditya Patil"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1623936148,"creation_date":1623936148,"answer_id":68020271,"question_id":46032748,"body_markdown":"You can make use of **this.** reference to assess the value of (private String myVar)\r\n\r\n    this.myVar","title":"Spring Boot: @Value returns always null","body":"<p>You can make use of <strong>this.</strong> reference to assess the value of (private String myVar)</p>\n<pre><code>this.myVar\n</code></pre>\n"}],"owner":{"account_id":3655755,"reputation":237,"user_id":8003890,"accept_rate":75,"display_name":"Jonathan Williams"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40905,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":46032810,"answer_count":6,"score":19,"last_activity_date":1649667204,"creation_date":1504512329,"question_id":46032748,"body_markdown":"I would like to use a value from `application.properties` file in order to pass it in the method in another class. The problem is that the value returns always `NULL`. What could be the problem? Thanks in advance.\r\n\r\n**`application.properties`**\r\n\r\n    filesystem.directory=temp\r\n\r\n**`FileSystem.java`**\r\n\r\n    @Value(&quot;${filesystem.directory}&quot;)\r\n    private static String directory;","title":"Spring Boot: @Value returns always null","body":"<p>I would like to use a value from <code>application.properties</code> file in order to pass it in the method in another class. The problem is that the value returns always <code>NULL</code>. What could be the problem? Thanks in advance.</p>\n\n<p><strong><code>application.properties</code></strong></p>\n\n<pre><code>filesystem.directory=temp\n</code></pre>\n\n<p><strong><code>FileSystem.java</code></strong></p>\n\n<pre><code>@Value(\"${filesystem.directory}\")\nprivate static String directory;\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8552,"page":1440,"page_size":100}
