{"items":[{"tags":["java","encryption","ant","public-key-encryption"],"answers":[{"tags":[],"owner":{"account_id":113304,"reputation":312940,"user_id":298479,"accept_rate":87,"display_name":"ThiefMaster"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1314264208,"creation_date":1314264208,"answer_id":7187938,"question_id":7187883,"body_markdown":"No. Since your program needs to be able to run the code it would be pointless anyway.\r\n\r\nYou can obfuscate your code though so decompiling the .class files results in less readable code (meaningless variable/class names etc).","title":"How to encrypt a .jar file","body":"<p>No. Since your program needs to be able to run the code it would be pointless anyway.</p>\n\n<p>You can obfuscate your code though so decompiling the .class files results in less readable code (meaningless variable/class names etc).</p>\n"},{"tags":[],"owner":{"account_id":220789,"reputation":114430,"user_id":478399,"accept_rate":83,"display_name":"AlexR"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1314264307,"creation_date":1314264307,"answer_id":7187959,"question_id":7187883,"body_markdown":"As far as I know this is not supported by standard JVM. But you can do the following. Separate your application into 2 parts. First will not be encrypted. It will be a simple loader that will instantiate the rest using custom class loader. This class loader will get Classes as arrays of bytes, decrypt and load them. ","title":"How to encrypt a .jar file","body":"<p>As far as I know this is not supported by standard JVM. But you can do the following. Separate your application into 2 parts. First will not be encrypted. It will be a simple loader that will instantiate the rest using custom class loader. This class loader will get Classes as arrays of bytes, decrypt and load them. </p>\n"},{"tags":[],"owner":{"account_id":234634,"reputation":11522,"user_id":500916,"accept_rate":57,"display_name":"Simone Gianni"},"down_vote_count":0,"up_vote_count":17,"is_accepted":true,"score":17,"last_activity_date":1314279148,"creation_date":1314264319,"answer_id":7187961,"question_id":7187883,"body_markdown":"Even if you encrypt the jar file, it must be decrypted before the JVM is able to run it, so you&#39;ll need another jar file containing classes that decrypt and loads in the JVM.\r\n\r\nSince this second jar file cannot be itself encrypted, a malicious user wanting to see you class files, can simply look at classes in this second jar file, and then decrypt your super-secret jar file and have access to it.\r\n\r\nMaybe you can increase security of your code using an obfuscator, but it will eventually protect (make it harder but not impossible) your class files from decompilation, not from being used.\r\n\r\nIf obfuscation is not enough, you could consider compiling your jar file to a DLL for windows or a SO for unix/linux, that will make it much harder to decompile, but it&#39;s not always possible to do that correctly and it&#39;s generally a PITA. GCJ is able to do this somehow, and there are other commercial products that will actually compile .class/.jar directly to machine code.\r\n\r\nHowever please consider that it does not matter how much security you put in it, since the client computer MUST be able to execute it, it must be able to read it, so no matter what your code will be exposed, you can only make it harder.\r\n\r\nIf you really have an algorithm so secret you don&#39;t want to disclose no matter what, consider converting it to a web service, hosting it on your server, so that you don&#39;t have to send the actual code to the client machines and can also better prevent unauthorized copies of your application by checking access to that vital part of it.","title":"How to encrypt a .jar file","body":"<p>Even if you encrypt the jar file, it must be decrypted before the JVM is able to run it, so you'll need another jar file containing classes that decrypt and loads in the JVM.</p>\n\n<p>Since this second jar file cannot be itself encrypted, a malicious user wanting to see you class files, can simply look at classes in this second jar file, and then decrypt your super-secret jar file and have access to it.</p>\n\n<p>Maybe you can increase security of your code using an obfuscator, but it will eventually protect (make it harder but not impossible) your class files from decompilation, not from being used.</p>\n\n<p>If obfuscation is not enough, you could consider compiling your jar file to a DLL for windows or a SO for unix/linux, that will make it much harder to decompile, but it's not always possible to do that correctly and it's generally a PITA. GCJ is able to do this somehow, and there are other commercial products that will actually compile .class/.jar directly to machine code.</p>\n\n<p>However please consider that it does not matter how much security you put in it, since the client computer MUST be able to execute it, it must be able to read it, so no matter what your code will be exposed, you can only make it harder.</p>\n\n<p>If you really have an algorithm so secret you don't want to disclose no matter what, consider converting it to a web service, hosting it on your server, so that you don't have to send the actual code to the client machines and can also better prevent unauthorized copies of your application by checking access to that vital part of it.</p>\n"},{"tags":[],"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1314264383,"creation_date":1314264383,"answer_id":7187974,"question_id":7187883,"body_markdown":"if you don&#39;t want to provide an access to the class files inside the jar, why should you supply your jar with the application?\r\nIt feels like your question is kind of wrong conceptually...\r\n\r\nIf you need some custom way of loading the classes, consider to use custom classloader.\r\n","title":"How to encrypt a .jar file","body":"<p>if you don't want to provide an access to the class files inside the jar, why should you supply your jar with the application?\nIt feels like your question is kind of wrong conceptually...</p>\n\n<p>If you need some custom way of loading the classes, consider to use custom classloader.</p>\n"},{"tags":[],"owner":{"account_id":405356,"reputation":31601,"user_id":774183,"accept_rate":78,"display_name":"carlspring"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1314264587,"creation_date":1314264587,"answer_id":7188028,"question_id":7187883,"body_markdown":"I assume you are aware of the fact that any skilled java coder can reverse-engineer the Java tool you use (or write) and still decode the app&#39;s jars? Also writing custom classloaders which read your &quot;encrypted&quot; code can be decompiled and a tool could be written to bypass it.\r\n\r\nEven with obfuscation and bytecode modification and custom classloaders, java is hackable/decompileable and the source can almost always be brought to a somewhat readable state.\r\n","title":"How to encrypt a .jar file","body":"<p>I assume you are aware of the fact that any skilled java coder can reverse-engineer the Java tool you use (or write) and still decode the app's jars? Also writing custom classloaders which read your \"encrypted\" code can be decompiled and a tool could be written to bypass it.</p>\n\n<p>Even with obfuscation and bytecode modification and custom classloaders, java is hackable/decompileable and the source can almost always be brought to a somewhat readable state.</p>\n"},{"tags":[],"owner":{"account_id":2146,"reputation":51871,"user_id":2959,"accept_rate":67,"display_name":"Steve McLeod"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1314265553,"creation_date":1314265553,"answer_id":7188227,"question_id":7187883,"body_markdown":"You want to obfuscate, not encrypt, the jar file.\r\n\r\nA popular choice for doing this in Java is [ProGuard][1].\r\n\r\n\r\n  [1]: http://proguard.sourceforge.net/","title":"How to encrypt a .jar file","body":"<p>You want to obfuscate, not encrypt, the jar file.</p>\n\n<p>A popular choice for doing this in Java is <a href=\"http://proguard.sourceforge.net/\" rel=\"nofollow\">ProGuard</a>.</p>\n"},{"tags":[],"owner":{"account_id":2481149,"reputation":2573,"user_id":2160595,"display_name":"Tobias Lins"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1363088387,"creation_date":1363086727,"answer_id":15359602,"question_id":7187883,"body_markdown":"i prefer [jCrypt][1]!\r\nIt is a simple tool where you can crypt the classes(and ressources)\r\n\r\n\r\n  [1]: http://redpois0n.com/download.php?proj=jcrypt","title":"How to encrypt a .jar file","body":"<p>i prefer <a href=\"http://redpois0n.com/download.php?proj=jcrypt\" rel=\"nofollow\">jCrypt</a>!\nIt is a simple tool where you can crypt the classes(and ressources)</p>\n"},{"tags":[],"owner":{"account_id":4207930,"reputation":1,"user_id":3446398,"display_name":"Rohith"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1395404902,"creation_date":1395404902,"answer_id":22558794,"question_id":7187883,"body_markdown":"if you are packaging in jar -&gt; just rename it to jarname.ABCD or any misleading extension or even take off the extension, and accordingly specify the jar name in your application.","title":"How to encrypt a .jar file","body":"<p>if you are packaging in jar -> just rename it to jarname.ABCD or any misleading extension or even take off the extension, and accordingly specify the jar name in your application.</p>\n"},{"tags":[],"owner":{"account_id":29054121,"reputation":1,"user_id":22256234,"display_name":"clark wang"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1689838765,"creation_date":1689838765,"answer_id":76727652,"question_id":7187883,"body_markdown":"You can try https://bce.gopiqiu.com/\r\nHere is description: BCE is a java jar/war/class encrypt tools,it can leave your code avoid decompile; support format:jar,springbootjar,war; support spring and tomcat classfile scan before classes are loaded; support embedded jar encryption and prevent any program dump decrypted class.","title":"How to encrypt a .jar file","body":"<p>You can try <a href=\"https://bce.gopiqiu.com/\" rel=\"nofollow noreferrer\">https://bce.gopiqiu.com/</a>\nHere is description: BCE is a java jar/war/class encrypt tools,it can leave your code avoid decompile; support format:jar,springbootjar,war; support spring and tomcat classfile scan before classes are loaded; support embedded jar encryption and prevent any program dump decrypted class.</p>\n"}],"owner":{"account_id":461144,"reputation":1546,"user_id":862666,"accept_rate":67,"display_name":"S Gaber"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23627,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":7187961,"answer_count":9,"score":5,"last_activity_date":1689838765,"creation_date":1314263951,"question_id":7187883,"body_markdown":"I&#39;m working in a project where we need to encrypt the .jar file so no one can access to the .class files which inside the jar file.... is there any java coding which can help me to encrypt the .jar file ?","title":"How to encrypt a .jar file","body":"<p>I'm working in a project where we need to encrypt the .jar file so no one can access to the .class files which inside the jar file.... is there any java coding which can help me to encrypt the .jar file ?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1689836101,"post_id":76727355,"comment_id":135270220,"body_markdown":"So your date is actually inside a string, right?","body":"So your date is actually inside a string, right?"},{"owner":{"account_id":28433832,"reputation":27,"user_id":21754177,"display_name":"Hasan Ozan"},"score":0,"creation_date":1689836335,"post_id":76727355,"comment_id":135270282,"body_markdown":"Yes,  inside a string.","body":"Yes,  inside a string."},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1689836479,"post_id":76727355,"comment_id":135270308,"body_markdown":"Neither `java.sql.Timestamp` nor `java.util.Date` have the concept of a *format*. Formatting is a separate concern. BTW: You really shouldn&#39;t use these old data types. You should be using the modern `java.time` classes like `LocalDateTime` and `LocalDate`. You&#39;d format them with `DateTimeFormatter`. If you insist on using these old classes, you can format them with `SimpleDateFormat`.","body":"Neither <code>java.sql.Timestamp</code> nor <code>java.util.Date</code> have the concept of a <i>format</i>. Formatting is a separate concern. BTW: You really shouldn&#39;t use these old data types. You should be using the modern <code>java.time</code> classes like <code>LocalDateTime</code> and <code>LocalDate</code>. You&#39;d format them with <code>DateTimeFormatter</code>. If you insist on using these old classes, you can format them with <code>SimpleDateFormat</code>."},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1689836589,"post_id":76727355,"comment_id":135270331,"body_markdown":"BTW: Given you mention &quot;smalldatetime&quot;, I assume the original value came from a database. If so, why do you have it as a string? The JDBC API has methods to get those values either as a `java.sql.Timestamp` or `java.time.LocalDateTime` directly.","body":"BTW: Given you mention &quot;smalldatetime&quot;, I assume the original value came from a database. If so, why do you have it as a string? The JDBC API has methods to get those values either as a <code>java.sql.Timestamp</code> or <code>java.time.LocalDateTime</code> directly."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1690524553,"post_id":76727355,"comment_id":135368558,"body_markdown":"`smalldatetime` is not a data type in standard SQL, nor is it a type defined by JDBC. Explain *exacty* what you mean by `smalldatetime`.","body":"<code>smalldatetime</code> is not a data type in standard SQL, nor is it a type defined by JDBC. Explain <i>exacty</i> what you mean by <code>smalldatetime</code>."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1690524601,"post_id":76727355,"comment_id":135368564,"body_markdown":"FYI… You are using terrible date-time classes that were years ago supplanted by the modern *java.time* classes defined in JSR 310.","body":"FYI… You are using terrible date-time classes that were years ago supplanted by the modern <i>java.time</i> classes defined in JSR 310."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1690524665,"post_id":76727355,"comment_id":135368575,"body_markdown":"You cannot determine a timestamp from only a date and a time-of-day. You also need a time zone or offset-from-UTC to get a point on the timeline.","body":"You cannot determine a timestamp from only a date and a time-of-day. You also need a time zone or offset-from-UTC to get a point on the timeline."}],"answers":[{"tags":[],"owner":{"account_id":24792239,"reputation":413,"user_id":18675173,"display_name":"lant"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689837841,"creation_date":1689836741,"answer_id":76727427,"question_id":76727355,"body_markdown":"Two common methods, Recommend the second one \r\n \r\n    String sqlSmallDateTimeString = &quot;2017-10-12 00:00:00&quot;;\r\n    Timestamp sqlSmallDateTimeValue = Timestamp.valueOf(sqlSmallDateTimeString);\r\n    Date dateValue = new Date(sqlSmallDateTimeValue.getTime());\r\n    SimpleDateFormat sdf = new SimpleDateFormat(&quot;dd.MM.yyyy&quot;);\r\n    String format = sdf.format(dateValue);\r\n    System.out.println(format); // 12.10.2017\r\n\r\nsecond method:\r\n\r\n    \r\n    String sqlSmallDateTimeString= &quot;2017-10-12 00:00:00&quot;;\r\n    String inputDateFormat = &quot;yyyy-MM-dd HH:mm:ss&quot;;\r\n     // Parse the input date string to LocalDateTime\r\n     LocalDateTime dateTime = LocalDateTime.parse(inputDateStr, DateTimeFormatter.ofPattern(inputDateFormat));\r\n     String desiredDateFormat = &quot;dd.MM.yyyy&quot;; // Customize this format as per your needs\r\n     //Format the date using DateTimeFormatter\r\n     String formattedDate = dateTime.format(DateTimeFormatter.ofPattern(desiredDateFormat));\r\n    System.out.println(&quot;Formatted date: &quot; + formattedDate);\r\n\r\nBy the way, the lowercase &#39;mm&#39; represents minutes. Meanwhile, the uppercase &quot;MM&quot; represents the month. \r\n\r\n","title":"java convert smalldatetime to date","body":"<p>Two common methods, Recommend the second one</p>\n<pre><code>String sqlSmallDateTimeString = &quot;2017-10-12 00:00:00&quot;;\nTimestamp sqlSmallDateTimeValue = Timestamp.valueOf(sqlSmallDateTimeString);\nDate dateValue = new Date(sqlSmallDateTimeValue.getTime());\nSimpleDateFormat sdf = new SimpleDateFormat(&quot;dd.MM.yyyy&quot;);\nString format = sdf.format(dateValue);\nSystem.out.println(format); // 12.10.2017\n</code></pre>\n<p>second method:</p>\n<pre><code>String sqlSmallDateTimeString= &quot;2017-10-12 00:00:00&quot;;\nString inputDateFormat = &quot;yyyy-MM-dd HH:mm:ss&quot;;\n // Parse the input date string to LocalDateTime\n LocalDateTime dateTime = LocalDateTime.parse(inputDateStr, DateTimeFormatter.ofPattern(inputDateFormat));\n String desiredDateFormat = &quot;dd.MM.yyyy&quot;; // Customize this format as per your needs\n //Format the date using DateTimeFormatter\n String formattedDate = dateTime.format(DateTimeFormatter.ofPattern(desiredDateFormat));\nSystem.out.println(&quot;Formatted date: &quot; + formattedDate);\n</code></pre>\n<p>By the way, the lowercase 'mm' represents minutes. Meanwhile, the uppercase &quot;MM&quot; represents the month.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1689838545,"creation_date":1689838545,"answer_id":76727624,"question_id":76727355,"body_markdown":"If you are not augmenting the value, just parse the text.\r\n\r\n```java\r\nString string = &quot;2017-10-12 00:00:00&quot;;\r\nstring = string.substring(0, string.indexOf(&#39; &#39;));\r\nString[] strings = string.split(&quot;-&quot;);\r\nstring = &quot;%s.%s.%s&quot;.formatted(strings[1], strings[2], strings[0]);\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n10.12.2017\r\n```","title":"java convert smalldatetime to date","body":"<p>If you are not augmenting the value, just parse the text.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String string = &quot;2017-10-12 00:00:00&quot;;\nstring = string.substring(0, string.indexOf(' '));\nString[] strings = string.split(&quot;-&quot;);\nstring = &quot;%s.%s.%s&quot;.formatted(strings[1], strings[2], strings[0]);\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>10.12.2017\n</code></pre>\n"}],"owner":{"account_id":28433832,"reputation":27,"user_id":21754177,"display_name":"Hasan Ozan"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"answer_count":2,"score":-4,"last_activity_date":1689838545,"creation_date":1689836004,"question_id":76727355,"body_markdown":"I&#39;m pulling data with smalldatetime data type from sql, how can I show it in the java section in date (`dd.mm.yyyy`) format\r\n\r\nMy code ;\r\n\r\n```\r\nfor (int i = 0; i &lt; liste.size(); i++) {\r\n    if (liste.get(i).DURUM) {\r\n        String sqlSmallDateTimeString = &quot;2017-10-12 00:00:00&quot;;\r\n        liste.get(i).BASTARIH = sqlSmallDateTimeString;\r\n\r\n        Timestamp sqlSmallDateTimeValue = Timestamp.valueOf(sqlSmallDateTimeString);\r\n\r\n        Date dateValue = new Date(sqlSmallDateTimeValue.getTime());\r\n\r\n    }\r\n}\r\n```","title":"java convert smalldatetime to date","body":"<p>I'm pulling data with smalldatetime data type from sql, how can I show it in the java section in date (<code>dd.mm.yyyy</code>) format</p>\n<p>My code ;</p>\n<pre><code>for (int i = 0; i &lt; liste.size(); i++) {\n    if (liste.get(i).DURUM) {\n        String sqlSmallDateTimeString = &quot;2017-10-12 00:00:00&quot;;\n        liste.get(i).BASTARIH = sqlSmallDateTimeString;\n\n        Timestamp sqlSmallDateTimeValue = Timestamp.valueOf(sqlSmallDateTimeString);\n\n        Date dateValue = new Date(sqlSmallDateTimeValue.getTime());\n\n    }\n}\n</code></pre>\n"},{"tags":["java","talend"],"answers":[{"tags":[],"owner":{"account_id":20060396,"reputation":377,"user_id":14707253,"display_name":"Emile Dadou"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689781880,"creation_date":1689781880,"answer_id":76723119,"question_id":76722613,"body_markdown":"So first there is an issue with the tJavaRow output, you linked the tFileInputDelimited and the tJavaRow with an if link it wont work\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nSo to do what I think you want to do is change the if to a main output to a tFlowToIterate component (https://help.talend.com/r/fr-FR/7.3/orchestration/tflowtoiterate) and then link the tFileInputDelimited with a iterate flow like this : \r\n\r\n[![enter image description here][2]][2]\r\n\r\nyou store in the tFlowToIterate the path and name of the file you want to read \r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\nAnd then use this var in the tFileInput like this  : \r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/eYjMW.png\r\n  [2]: https://i.stack.imgur.com/9fdto.png\r\n  [3]: https://i.stack.imgur.com/xqLB9.png\r\n  [4]: https://i.stack.imgur.com/xv2uj.png","title":"How to process files only for a day before using Talend?","body":"<p>So first there is an issue with the tJavaRow output, you linked the tFileInputDelimited and the tJavaRow with an if link it wont work</p>\n<p><a href=\"https://i.stack.imgur.com/eYjMW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eYjMW.png\" alt=\"enter image description here\" /></a></p>\n<p>So to do what I think you want to do is change the if to a main output to a tFlowToIterate component (<a href=\"https://help.talend.com/r/fr-FR/7.3/orchestration/tflowtoiterate\" rel=\"nofollow noreferrer\">https://help.talend.com/r/fr-FR/7.3/orchestration/tflowtoiterate</a>) and then link the tFileInputDelimited with a iterate flow like this :</p>\n<p><a href=\"https://i.stack.imgur.com/9fdto.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9fdto.png\" alt=\"enter image description here\" /></a></p>\n<p>you store in the tFlowToIterate the path and name of the file you want to read</p>\n<p><a href=\"https://i.stack.imgur.com/xqLB9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xqLB9.png\" alt=\"enter image description here\" /></a></p>\n<p>And then use this var in the tFileInput like this  :</p>\n<p><a href=\"https://i.stack.imgur.com/xv2uj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xv2uj.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":29050096,"reputation":5,"user_id":22253117,"display_name":"Ha Anh Nguyen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76723119,"answer_count":1,"score":0,"last_activity_date":1689838387,"creation_date":1689778363,"question_id":76722613,"body_markdown":"I have used tFileList in Talend to get files from a VM remote, which will be generated each day. I want to pick files only for the past hour and do the required processing.\r\nI have referred to this question in StackOverflow like below :\r\nhttps://stackoverflow.com/questions/45550213/how-to-process-files-only-for-the-past-hour-using-talend\r\nI am stuck at step of writing code in tJavaRow. The error is : \r\n**# &quot;output_row cannot be resolved to a variable&quot;**\r\n Here is my job : .\r\n\r\n[![enter image description here][1]][1]\r\n\r\nHere is my code in tJavaRow_1 :\r\n\r\n```\r\n((String)globalMap.get(&quot;tFileList_5_CURRENT_FILEPATH&quot;)) = input_row\r\n\r\nDate lastModifiedDate = TalendDate.parseDate(&quot;EEE MMM dd HH:mm:ss zzz yyyy&quot;, input_row.mtime_string);\r\n\r\nDate current_date = TalendDate.getCurrentDate();\r\n\r\n\r\nif(TalendDate.diffDate(current_date, lastModifiedDate,&quot;dd&quot;) &lt;= 1) {\r\n\r\noutput_row.abs_path = input_row.abs_path;\r\n}\r\n\r\n```\r\nCould you help me to resolve this error?\r\n\r\n\r\nI have tried some solutions but it didn&#39;t work. Like changing output_row to tJavaRow_1 or Output because I see this schema of tJavaRow_1 .\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CeYs8.png\r\n  [2]: https://i.stack.imgur.com/7cUDb.png","title":"How to process files only for a day before using Talend?","body":"<p>I have used tFileList in Talend to get files from a VM remote, which will be generated each day. I want to pick files only for the past hour and do the required processing.\nI have referred to this question in StackOverflow like below :\n<a href=\"https://stackoverflow.com/questions/45550213/how-to-process-files-only-for-the-past-hour-using-talend\">How to process files only for the past hour using Talend?</a>\nI am stuck at step of writing code in tJavaRow. The error is :\n<strong># &quot;output_row cannot be resolved to a variable&quot;</strong>\nHere is my job : .</p>\n<p><a href=\"https://i.stack.imgur.com/CeYs8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CeYs8.png\" alt=\"enter image description here\" /></a></p>\n<p>Here is my code in tJavaRow_1 :</p>\n<pre><code>((String)globalMap.get(&quot;tFileList_5_CURRENT_FILEPATH&quot;)) = input_row\n\nDate lastModifiedDate = TalendDate.parseDate(&quot;EEE MMM dd HH:mm:ss zzz yyyy&quot;, input_row.mtime_string);\n\nDate current_date = TalendDate.getCurrentDate();\n\n\nif(TalendDate.diffDate(current_date, lastModifiedDate,&quot;dd&quot;) &lt;= 1) {\n\noutput_row.abs_path = input_row.abs_path;\n}\n\n</code></pre>\n<p>Could you help me to resolve this error?</p>\n<p>I have tried some solutions but it didn't work. Like changing output_row to tJavaRow_1 or Output because I see this schema of tJavaRow_1 .</p>\n<p><a href=\"https://i.stack.imgur.com/7cUDb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7cUDb.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","inheritance","attributes","final"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1689834046,"post_id":76727139,"comment_id":135269854,"body_markdown":"why do you hide the variables of your super class in your subclass?","body":"why do you hide the variables of your super class in your subclass?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1689834918,"post_id":76727139,"comment_id":135269990,"body_markdown":"Put a breakpoint in `printValues` and run under the debugger. Have a look at the stack when you hit the breakpoint. When do you expect instance variables of `Sub` to be initialised?","body":"Put a breakpoint in <code>printValues</code> and run under the debugger. Have a look at the stack when you hit the breakpoint. When do you expect instance variables of <code>Sub</code> to be initialised?"},{"owner":{"account_id":27247785,"reputation":11,"user_id":20772775,"display_name":"KDPK Kasthurisinghe"},"score":0,"creation_date":1689835084,"post_id":76727139,"comment_id":135270025,"body_markdown":"recently i am studying the OOP in java. in inheritance , the sub class hiding the Attributes of the super class (as i know). but i wanted to know that what if we initialized the same attribute with same properties in the sub class. but i have got 0 for the attributes a and b i have already initialized in the super class and the subclass. i just wanted to know that why i have got  zero for both a and b.","body":"recently i am studying the OOP in java. in inheritance , the sub class hiding the Attributes of the super class (as i know). but i wanted to know that what if we initialized the same attribute with same properties in the sub class. but i have got 0 for the attributes a and b i have already initialized in the super class and the subclass. i just wanted to know that why i have got  zero for both a and b."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1689841665,"post_id":76727139,"comment_id":135271348,"body_markdown":"@KDPKKasthurisinghe the print method is called before your sub class is done instantiating, since it&#39;s called from the super constructor","body":"@KDPKKasthurisinghe the print method is called before your sub class is done instantiating, since it&#39;s called from the super constructor"}],"answers":[{"tags":[],"owner":{"account_id":11180480,"reputation":7021,"user_id":8207228,"display_name":"Ralf Kleberhoff"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689838211,"creation_date":1689838211,"answer_id":76727593,"question_id":76727139,"body_markdown":"The problem is that you are already printing the values before your object has been completely constructed (as pointed out in a comment from @tgdavies). When single-stepping through your program (your IDE can do that), you&#39;ll see that the `printValues()` is done before the `Sub` class has a chance to initialize its fields.\r\n\r\nAs a rule of thumb, avoid &quot;doing&quot; anything inside a constructor. Especially, in a constructor don&#39;t call a method that can be overridden by some subclass, as this method will see a partially-empty instance.\r\n\r\nRemove the `printValues();` call from the `Super()` constructor and place it into your `main()` method like\r\n\r\n    public static void main(String args[]) {\r\n        Sub sub = new Sub();\r\n        sub.printValues();\r\n    }\r\n\r\nThen, you&#39;ll see the fully-initialized state of your instance.\r\n\r\nBy the way, for educational purposes it&#39;s good to sometimes break the best-practices rules (having fields with the same name in superclass and subclass), just to see how much confusion arises from that. The learning effect should be not to do that in production code.\r\n\r\nAnd by the way, you should delete the superfluous `+` at the beginning of `+a + &quot; &quot; + b + &quot; &quot; + c + &quot; &quot; + d + &quot; &quot; + e`.","title":"i have defined initialized several attributes in sub class also(with same name and same datatype), but result was 0 for some of attributes","body":"<p>The problem is that you are already printing the values before your object has been completely constructed (as pointed out in a comment from @tgdavies). When single-stepping through your program (your IDE can do that), you'll see that the <code>printValues()</code> is done before the <code>Sub</code> class has a chance to initialize its fields.</p>\n<p>As a rule of thumb, avoid &quot;doing&quot; anything inside a constructor. Especially, in a constructor don't call a method that can be overridden by some subclass, as this method will see a partially-empty instance.</p>\n<p>Remove the <code>printValues();</code> call from the <code>Super()</code> constructor and place it into your <code>main()</code> method like</p>\n<pre><code>public static void main(String args[]) {\n    Sub sub = new Sub();\n    sub.printValues();\n}\n</code></pre>\n<p>Then, you'll see the fully-initialized state of your instance.</p>\n<p>By the way, for educational purposes it's good to sometimes break the best-practices rules (having fields with the same name in superclass and subclass), just to see how much confusion arises from that. The learning effect should be not to do that in production code.</p>\n<p>And by the way, you should delete the superfluous <code>+</code> at the beginning of <code>+a + &quot; &quot; + b + &quot; &quot; + c + &quot; &quot; + d + &quot; &quot; + e</code>.</p>\n"}],"owner":{"account_id":27247785,"reputation":11,"user_id":20772775,"display_name":"KDPK Kasthurisinghe"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1689838211,"creation_date":1689833743,"question_id":76727139,"body_markdown":"the following code i have inherited subclass from super class and i have initialized same attribute with same types and access modifiers in the sub class also. but the output shows 0 for i already initialized values attributes. i want to know the exact reason for that.\r\n```\r\nclass Super {\r\n    int a = 10;\r\n    private int b = 30;\r\n    final int c = 30;\r\n    static int d = 40;\r\n    final static int e = 50;\r\n\r\n    void printValues() {\r\n        System.out.print(&quot;Super : &quot;);\r\n        System.out.println(+a + &quot; &quot; + b + &quot; &quot; + c + &quot; &quot; + d + &quot; &quot; + e);\r\n    }\r\n\r\n    Super() {\r\n        printValues();\r\n    }\r\n}\r\n\r\nclass Sub extends Super {\r\n    int a = 100;\r\n    private int b = 300;\r\n    final int c = 300;\r\n    static int d = 400;\r\n    final static int e = 500;\r\n\r\n    void printValues() {\r\n        System.out.print(&quot;Sub : &quot;);\r\n        System.out.println(+a + &quot; &quot; + b + &quot; &quot; + c + &quot; &quot; + d + &quot; &quot; + e);\r\n    }\r\n}\r\n\r\nclass TwentyFIve {\r\n    public static void main(String args[]) {\r\n        new Sub();\r\n    }\r\n}\r\n```\r\n\r\n\r\ni expected the result for the above code as follows; \r\nSub : 100 300 300 400 500\r\nbut i got the output as follows;\r\nSub : 0 0 300 400 500","title":"i have defined initialized several attributes in sub class also(with same name and same datatype), but result was 0 for some of attributes","body":"<p>the following code i have inherited subclass from super class and i have initialized same attribute with same types and access modifiers in the sub class also. but the output shows 0 for i already initialized values attributes. i want to know the exact reason for that.</p>\n<pre><code>class Super {\n    int a = 10;\n    private int b = 30;\n    final int c = 30;\n    static int d = 40;\n    final static int e = 50;\n\n    void printValues() {\n        System.out.print(&quot;Super : &quot;);\n        System.out.println(+a + &quot; &quot; + b + &quot; &quot; + c + &quot; &quot; + d + &quot; &quot; + e);\n    }\n\n    Super() {\n        printValues();\n    }\n}\n\nclass Sub extends Super {\n    int a = 100;\n    private int b = 300;\n    final int c = 300;\n    static int d = 400;\n    final static int e = 500;\n\n    void printValues() {\n        System.out.print(&quot;Sub : &quot;);\n        System.out.println(+a + &quot; &quot; + b + &quot; &quot; + c + &quot; &quot; + d + &quot; &quot; + e);\n    }\n}\n\nclass TwentyFIve {\n    public static void main(String args[]) {\n        new Sub();\n    }\n}\n</code></pre>\n<p>i expected the result for the above code as follows;\nSub : 100 300 300 400 500\nbut i got the output as follows;\nSub : 0 0 300 400 500</p>\n"},{"tags":["java","maven","jdbc","cnosdb"],"answers":[{"tags":[],"owner":{"account_id":2241006,"reputation":183,"user_id":1975267,"display_name":"KingQQ"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689837211,"creation_date":1689837211,"answer_id":76727486,"question_id":76727160,"body_markdown":"the class generation step should be implemented in the maven compile stage, please check the maven logs and see if there has compile messages.","title":"When I use mvn to build cnosdb flight sql jadc access, there is always no class file generated","body":"<p>the class generation step should be implemented in the maven compile stage, please check the maven logs and see if there has compile messages.</p>\n"}],"owner":{"account_id":19518277,"reputation":143,"user_id":14280692,"display_name":"Baker X"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689837211,"creation_date":1689833954,"question_id":76727160,"body_markdown":"When I use mvn to build cnosdb flight sql jadc access, there is always no class file generated.what the promblem?\r\n\r\nAt first, I exec as follow:\r\n\r\n```\r\nmvn package\r\n```\r\n\r\nand then\r\n\r\n```\r\njava -cp ./target/jdbc-1.0-SNAPSHOT.jar com/cnosdb/Main\r\n```\r\n\r\n```\r\njava.lang.ClassNotFoundException: com.cnosdb.Main\r\n```\r\n\r\nfinnally, I&#39;m check the mune,there is no class.\r\n\r\n```\r\n$ tree ./\r\n./\r\n├── pom.xml\r\n├── src\r\n│&#160;&#160; └── java\r\n│&#160;&#160;     └── com\r\n│&#160;&#160;         └── cnosdb\r\n│&#160;&#160;             └── Main.java\r\n└── target\r\n    ├── jdbc-1.0-SNAPSHOT.jar\r\n    └── maven-archiver\r\n        └── pom.properties\r\n```","title":"When I use mvn to build cnosdb flight sql jadc access, there is always no class file generated","body":"<p>When I use mvn to build cnosdb flight sql jadc access, there is always no class file generated.what the promblem?</p>\n<p>At first, I exec as follow:</p>\n<pre><code>mvn package\n</code></pre>\n<p>and then</p>\n<pre><code>java -cp ./target/jdbc-1.0-SNAPSHOT.jar com/cnosdb/Main\n</code></pre>\n<pre><code>java.lang.ClassNotFoundException: com.cnosdb.Main\n</code></pre>\n<p>finnally, I'm check the mune,there is no class.</p>\n<pre><code>$ tree ./\n./\n├── pom.xml\n├── src\n│   └── java\n│       └── com\n│           └── cnosdb\n│               └── Main.java\n└── target\n    ├── jdbc-1.0-SNAPSHOT.jar\n    └── maven-archiver\n        └── pom.properties\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":7622639,"reputation":336,"user_id":5780236,"display_name":"Ahmad Reza Enshaee"},"score":0,"creation_date":1689780873,"post_id":76722484,"comment_id":135262864,"body_markdown":"When you say &quot;to MainActivity2, as it won&#39;t work at all&quot;, what do you mean precisely by won&#39;t work? Does it throw an exception? If so, please mention it and attach the exception log as well.","body":"When you say &quot;to MainActivity2, as it won&#39;t work at all&quot;, what do you mean precisely by won&#39;t work? Does it throw an exception? If so, please mention it and attach the exception log as well."}],"owner":{"account_id":29003332,"reputation":13,"user_id":22216464,"display_name":"CheeChunWaiGabriel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689836203,"creation_date":1689777444,"question_id":76722484,"body_markdown":"So I was trying to build an android app that is meant to save, retrieve and edit songs.\r\n\r\nIt consists of:\r\n\r\nThe song class:\r\n\r\n```\r\npackage com.myapplicationdev.android.songdbmanager;\r\n\r\nimport androidx.annotation.NonNull;\r\n\r\npublic class song {\r\n    private int id;\r\n    private String title;\r\n    private String singers;\r\n    private int year;\r\n    private int stars;\r\n\r\n\r\n    public void setSingers(String singers) {\r\n        this.singers = singers;\r\n    }\r\n\r\n    public void setStars(int stars) {\r\n        this.stars = stars;\r\n    }\r\n\r\n    public void setTitle(String title) {\r\n        this.title = title;\r\n    }\r\n\r\n    public void setYear(int year) {\r\n        this.year = year;\r\n    }\r\n\r\n    public song (\r\n                 String title,\r\n                 String singers,\r\n                 int year,\r\n                 int stars\r\n    ){\r\n        this.title=title;\r\n        this.singers=singers;\r\n        this.year=year;\r\n        this.stars=stars;\r\n    }\r\n    public song (\r\n            int id,\r\n            String title,\r\n            String singers,\r\n            int year,\r\n            int stars\r\n    ){\r\n        this.id=id;\r\n        this.title=title;\r\n        this.singers=singers;\r\n        this.year=year;\r\n        this.stars=stars;\r\n    }\r\n    public String getTitle() {\r\n        return title;\r\n    }\r\n    public int getId(){\r\n        return id;\r\n    }\r\n\r\n    public int getYear() {\r\n        return year;\r\n    }\r\n\r\n    public int getStars() {\r\n        return stars;\r\n    }\r\n\r\n    public String getSingers() {\r\n        return singers;\r\n    }\r\n\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public String toString() {\r\n        return\r\n                &quot;title=&#39;&quot; + title + &#39;\\&#39;&#39; +\r\n                &quot;, singers=&#39;&quot; + singers + &#39;\\&#39;&#39; +\r\n                &quot;, year=&quot; + year +\r\n                &quot;, stars=&quot; + stars\r\n               ;\r\n    }\r\n}\r\n```\r\n\r\nactivity_main.xml:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:orientation=&quot;vertical&quot;\r\n    tools:context=&quot;.MainActivity&quot;&gt;\r\n    &lt;TextView\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;@string/Input1&quot; /&gt;\r\n    &lt;EditText\r\n        android:id=&quot;@+id/insertTitle&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;@string/InputPrompt1&quot; /&gt;\r\n    &lt;TextView\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;@string/Input2&quot; /&gt;\r\n    &lt;EditText\r\n        android:id=&quot;@+id/insertSingers&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;@string/InputPrompt2&quot; /&gt;\r\n    &lt;TextView\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;@string/Input3&quot; /&gt;\r\n    &lt;EditText\r\n        android:id=&quot;@+id/insertYear&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;50dp&quot;\r\n        android:text=&quot;@string/InputPrompt3&quot;/&gt;\r\n    &lt;TextView\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;@string/Input4&quot; /&gt;\r\n    &lt;RadioGroup\r\n        android:id=&quot;@+id/radio_group&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;50dp&quot;\r\n        android:orientation=&quot;horizontal&quot;&gt;\r\n\r\n        &lt;RadioButton\r\n            android:id=&quot;@+id/radio_1&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;@string/Input4.1&quot; /&gt;\r\n\r\n        &lt;RadioButton\r\n            android:id=&quot;@+id/radio_2&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;@string/Input4.2&quot; /&gt;\r\n\r\n        &lt;RadioButton\r\n            android:id=&quot;@+id/radio_3&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;@string/Input4.3&quot; /&gt;\r\n\r\n        &lt;RadioButton\r\n            android:id=&quot;@+id/radio_4&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;@string/Input4.4&quot; /&gt;\r\n\r\n        &lt;RadioButton\r\n            android:id=&quot;@+id/radio_5&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;@string/Input4.5&quot; /&gt;\r\n\r\n    &lt;/RadioGroup&gt;\r\n    &lt;LinearLayout\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:orientation=&quot;horizontal&quot;&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/btnInsert&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;@string/FinalButton&quot; /&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/btnGetTasks&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;@string/ViewListings&quot; /&gt;\r\n\r\n    &lt;/LinearLayout&gt;\r\n\r\n\r\n\r\n&lt;/LinearLayout&gt;\r\n```\r\n\r\nMainActivity.java:\r\n\r\n```\r\npackage com.myapplicationdev.android.songdbmanager;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ListView;\r\nimport android.widget.RadioButton;\r\nimport android.widget.RadioGroup;\r\nimport android.widget.TextView;\r\nimport android.widget.ToggleButton;\r\n\r\nimport java.util.ArrayList;\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    Button btnInsert, btnGetSongs;\r\n    TextView tvResults;\r\n\r\n    EditText YearInput;\r\n    EditText SongInput;\r\n    EditText SingerInput;\r\n    RadioGroup RadioGroupRating;\r\n\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        btnInsert = findViewById(R.id.btnInsert);\r\n        btnGetSongs = findViewById(R.id.btnGetTasks);\r\n        //List View-&gt;\r\n        YearInput=findViewById(R.id.insertYear);\r\n        SongInput=findViewById(R.id.insertTitle);\r\n        SingerInput=findViewById(R.id.insertSingers);\r\n        RadioGroupRating=findViewById(R.id.radio_group);\r\n\r\n\r\n        btnInsert.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                DBHelper db = new DBHelper(MainActivity.this);\r\n                String title=SongInput.getText().toString();\r\n                String singers=SingerInput.getText().toString();\r\n                int year=Integer.parseInt(YearInput.getText().toString());\r\n\r\n                int selectedRatingId=RadioGroupRating.getCheckedRadioButtonId();\r\n                RadioButton selectedRatingButton=findViewById(selectedRatingId);\r\n                int rating=Integer.parseInt(selectedRatingButton.getText().toString());\r\n                db.insertSong(title,singers,year,rating);\r\n\r\n                SongInput.setText(&quot;&quot;);\r\n                SingerInput.setText(&quot;&quot;);\r\n                YearInput.setText(&quot;&quot;);\r\n                RadioGroupRating.clearCheck();\r\n            }\r\n        });\r\n\r\n        btnGetSongs.setOnClickListener(new View.OnClickListener(){\r\n            @Override\r\n            public void onClick(View v) {\r\n                // Create the DBHelper object, passing in the\r\n                // activity&#39;s Context\r\n\r\n                // Insert a task\r\n                Intent intent = new Intent(MainActivity.this, EditActivity.class);\r\n                //Label the actual editactivity EditActivity2\r\n                startActivity(intent);\r\n\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n\r\n}\r\n```\r\n\r\nDBHelper:\r\n\r\n```\r\npackage com.myapplicationdev.android.songdbmanager;\r\n\r\nimport android.content.ContentValues;\r\nimport android.content.Context;\r\nimport android.database.Cursor;\r\nimport android.database.sqlite.SQLiteDatabase;\r\nimport android.database.sqlite.SQLiteOpenHelper;\r\nimport android.util.Log;\r\n\r\nimport androidx.annotation.Nullable;\r\n\r\nimport java.util.ArrayList;\r\n\r\n\r\npublic class DBHelper extends SQLiteOpenHelper {    // Start version with 1\r\n    // increment by 1 whenever db schema changes.\r\n    private static final int DATABASE_VER = 1;\r\n    private static final String TABLE_SONG = &quot;song&quot;;\r\n    private static final String COLUMN_ID = &quot;id&quot;;\r\n    private static final String COLUMN_TITLE = &quot;title&quot;;\r\n    private static final String COLUMN_SINGERS = &quot;singers&quot;;\r\n    private static final String COLUMN_YEAR=&quot;year&quot;;\r\n    private static final String COLUMN_STARS=&quot;stars&quot;;\r\n    // Filename of the database\r\n    private static final String DATABASE_NAME = &quot;songs.db&quot;;\r\n\r\n    public DBHelper(@Nullable Context context) {\r\n        super(context, DATABASE_NAME, null, DATABASE_VER);\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(SQLiteDatabase db) {\r\n        String dropTableSql = &quot;DROP TABLE IF EXISTS &quot; + TABLE_SONG;\r\n        db.execSQL(dropTableSql);\r\n        String createTableSql = &quot;CREATE TABLE &quot; + TABLE_SONG +  &quot;(&quot;\r\n                + COLUMN_ID + &quot; INTEGER PRIMARY KEY AUTOINCREMENT,&quot;\r\n                + COLUMN_TITLE + &quot; TEXT,&quot;\r\n                + COLUMN_SINGERS+ &quot; TEXT ,&quot;\r\n                + COLUMN_YEAR + &quot; INTEGER ,&quot;\r\n                + COLUMN_STARS+ &quot; INTEGER )&quot;;\r\n        db.execSQL(createTableSql);\r\n        Log.i(&quot;info&quot; ,&quot;created tables&quot;);\r\n\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\r\n        // Drop older table if existed\r\n        db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_SONG);\r\n        // Create table(s) again\r\n        onCreate(db);\r\n\r\n\r\n    }\r\n    public void insertSong(String title, String singers, int year, int stars){\r\n\r\n        // Get an instance of the database for writing\r\n        SQLiteDatabase db = this.getWritableDatabase();\r\n        // We use ContentValues object to store the values for\r\n        //  the db operation\r\n        ContentValues values = new ContentValues();\r\n        // Store the column name as key and the description as value\r\n        values.put(COLUMN_TITLE, title);\r\n        values.put(COLUMN_SINGERS, singers);\r\n        values.put(COLUMN_YEAR, year);\r\n        values.put(COLUMN_STARS, stars);\r\n\r\n        // Store the column name as key and the date as value\r\n\r\n        // Insert the row into the TABLE_TASK\r\n       db.insert(TABLE_SONG, null, values);\r\n        // Close the database connection\r\n        db.close();\r\n    }\r\n    public ArrayList&lt;song&gt; getAllSongs() {\r\n        ArrayList&lt;song&gt; songlist = new ArrayList&lt;&gt;();\r\n\r\n        SQLiteDatabase db = this.getReadableDatabase();\r\n\r\n        String[] columns= {COLUMN_ID, COLUMN_TITLE, COLUMN_SINGERS,COLUMN_YEAR,COLUMN_STARS};\r\n\r\n        Cursor cursor = db.query(TABLE_SONG, columns, null, null,\r\n                null, null, null, null);\r\n\r\n        if (cursor.moveToFirst()) {\r\n            do {\r\n                int id = cursor.getInt(0);\r\n                String title=cursor.getString(1);\r\n                String singers = cursor.getString(2);\r\n                int year=cursor.getInt(3);\r\n                int stars=cursor.getInt(4);\r\n                song Song = new song(id,title,singers,year,stars);\r\n                songlist.add(Song);\r\n            } while (cursor.moveToNext());\r\n        }\r\n        cursor.close();\r\n        db.close();\r\n        return songlist;\r\n    }\r\n    public ArrayList&lt;song&gt; getBestSongs() {\r\n        ArrayList&lt;song&gt; bestsonglist = new ArrayList&lt;&gt;();\r\n\r\n        SQLiteDatabase db = this.getReadableDatabase();\r\n\r\n        String[] columns= {COLUMN_ID, COLUMN_TITLE, COLUMN_SINGERS,COLUMN_YEAR,COLUMN_STARS};\r\n        String condition = COLUMN_STARS + &quot;= ?&quot;;\r\n        String[] args = {&quot;5&quot;};\r\n        Cursor cursor = db.query(TABLE_SONG, columns, condition, args,\r\n                null, null, null, null);\r\n\r\n        if (cursor.moveToFirst()) {\r\n            do {\r\n                int id = cursor.getInt(0);\r\n                String title=cursor.getString(1);\r\n                String singers = cursor.getString(2);\r\n                int year=cursor.getInt(3);\r\n                int stars=cursor.getInt(4);\r\n                song Song = new song(id,title,singers,year,stars);\r\n                bestsonglist.add(Song);\r\n            } while (cursor.moveToNext());\r\n        }\r\n        cursor.close();\r\n        db.close();\r\n        return bestsonglist;\r\n    }\r\n    public int updateSong(song Song) {\r\n        SQLiteDatabase db = this.getWritableDatabase();\r\n        ContentValues values = new ContentValues();\r\n        values.put(COLUMN_TITLE, Song.getTitle());\r\n        values.put(COLUMN_SINGERS, Song.getSingers());\r\n        values.put(COLUMN_YEAR, Song.getYear());\r\n        values.put(COLUMN_STARS, Song.getStars());\r\n        String whereClause = COLUMN_ID + &quot;=?&quot;;\r\n        String[] whereArgs = {String.valueOf(Song.getId())};\r\n        int result=db.update(TABLE_SONG, values, whereClause, whereArgs);\r\n\r\n        if (result &lt; 1) {\r\n            Log.d(&quot;DBHelper&quot;, &quot;Update failed&quot;);\r\n\r\n            db.close();\r\n            return result;\r\n        }\r\n\r\n\r\n        return result;\r\n    }\r\n    public void deleteSong(int songId) {\r\n        SQLiteDatabase db = this.getWritableDatabase();\r\n        String whereClause = COLUMN_ID + &quot;=?&quot;;\r\n        String[] whereArgs = {String.valueOf(songId)};\r\n       db.delete(TABLE_SONG, whereClause, whereArgs);\r\n       db.close();\r\n    }}\r\n```\r\n\r\nactivity_edit.xml:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:orientation=&quot;vertical&quot;\r\n    tools:context=&quot;.MainActivity&quot;&gt;\r\n    &lt;TextView\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;@string/Input1&quot; /&gt;\r\n    &lt;EditText\r\n        android:id=&quot;@+id/insertTitle&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;@string/InputPrompt1&quot; /&gt;\r\n    &lt;TextView\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;@string/Input2&quot; /&gt;\r\n    &lt;EditText\r\n        android:id=&quot;@+id/insertSingers&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;@string/InputPrompt2&quot; /&gt;\r\n    &lt;TextView\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;@string/Input3&quot; /&gt;\r\n    &lt;EditText\r\n        android:id=&quot;@+id/insertYear&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;50dp&quot;\r\n        android:text=&quot;@string/InputPrompt3&quot;/&gt;\r\n    &lt;TextView\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;@string/Input4&quot; /&gt;\r\n    &lt;RadioGroup\r\n        android:id=&quot;@+id/radio_group&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;50dp&quot;\r\n        android:orientation=&quot;horizontal&quot;&gt;\r\n\r\n        &lt;RadioButton\r\n            android:id=&quot;@+id/radio_1&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;@string/Input4.1&quot; /&gt;\r\n\r\n        &lt;RadioButton\r\n            android:id=&quot;@+id/radio_2&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;@string/Input4.2&quot; /&gt;\r\n\r\n        &lt;RadioButton\r\n            android:id=&quot;@+id/radio_3&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;@string/Input4.3&quot; /&gt;\r\n\r\n        &lt;RadioButton\r\n            android:id=&quot;@+id/radio_4&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;@string/Input4.4&quot; /&gt;\r\n\r\n        &lt;RadioButton\r\n            android:id=&quot;@+id/radio_5&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;@string/Input4.5&quot; /&gt;\r\n\r\n    &lt;/RadioGroup&gt;\r\n    &lt;LinearLayout\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:orientation=&quot;horizontal&quot;&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/btnInsert&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;@string/FinalButton&quot; /&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/btnGetTasks&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;@string/ViewListings&quot; /&gt;\r\n\r\n    &lt;/LinearLayout&gt;\r\n\r\n\r\n\r\n&lt;/LinearLayout&gt;\r\n```\r\n\r\nEditActivity.java:\r\n\r\n```\r\npackage com.myapplicationdev.android.songdbmanager;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.os.Parcelable;\r\nimport android.view.View;\r\nimport android.widget.AdapterView;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.ListView;\r\n\r\nimport java.util.ArrayList;\r\n\r\npublic class EditActivity extends AppCompatActivity {\r\n    ListView lv;\r\n    ArrayList&lt;song&gt; songsList;\r\n    ArrayAdapter&lt;song&gt; adapter;\r\n    Button fivestarsongs;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_edit);\r\n\r\n        lv= findViewById(R.id.list_view);\r\n        fivestarsongs=findViewById(R.id.btnShow5starsongs);\r\n        DBHelper db = new DBHelper(EditActivity.this);\r\n\r\n        ArrayList&lt;song&gt; songs = db.getAllSongs();\r\n\r\n        ArrayAdapter&lt;song&gt; adapter = new ArrayAdapter&lt;&gt;(this, android.R.layout.simple_list_item_1, songs);\r\n        lv.setAdapter(adapter);\r\n        fivestarsongs.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                ArrayList&lt;song&gt; BestSongs = db.getBestSongs();\r\n                adapter.clear();\r\n                adapter.addAll(BestSongs);\r\n                adapter.notifyDataSetChanged();\r\n            }\r\n        });\r\n        lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(AdapterView&lt;?&gt; parent, View view, int\r\n                    position, long id) {\r\n                song ClickedSong = songs.get(position);\r\n                Intent i = new Intent(EditActivity.this,\r\n                        MainActivity2.class);\r\n                i.putExtra(&quot;song&quot;, (CharSequence) ClickedSong);\r\n                startActivity(i);\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n```\r\n\r\nactivity_main2.xml:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:orientation=&quot;vertical&quot;\r\n    tools:context=&quot;.MainActivity2&quot;&gt;\r\n    &lt;TextView\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;@string/Input1&quot; /&gt;\r\n    &lt;EditText\r\n        android:id=&quot;@+id/insertTitle&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;@string/InputPrompt1&quot; /&gt;\r\n    &lt;TextView\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;@string/Input2&quot; /&gt;\r\n    &lt;EditText\r\n        android:id=&quot;@+id/insertSingers&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;@string/InputPrompt2&quot; /&gt;\r\n    &lt;TextView\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;@string/Input3&quot; /&gt;\r\n    &lt;EditText\r\n        android:id=&quot;@+id/insertYear&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;50dp&quot;\r\n        android:text=&quot;@string/InputPrompt3&quot;/&gt;\r\n    &lt;TextView\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;@string/Input4&quot; /&gt;\r\n    &lt;RadioGroup\r\n        android:id=&quot;@+id/radio_group&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;50dp&quot;\r\n        android:orientation=&quot;horizontal&quot;&gt;\r\n\r\n        &lt;RadioButton\r\n            android:id=&quot;@+id/radio_1&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;@string/Input4.1&quot; /&gt;\r\n\r\n        &lt;RadioButton\r\n            android:id=&quot;@+id/radio_2&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;@string/Input4.2&quot; /&gt;\r\n\r\n        &lt;RadioButton\r\n            android:id=&quot;@+id/radio_3&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;@string/Input4.3&quot; /&gt;\r\n\r\n        &lt;RadioButton\r\n            android:id=&quot;@+id/radio_4&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;@string/Input4.4&quot; /&gt;\r\n\r\n        &lt;RadioButton\r\n            android:id=&quot;@+id/radio_5&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;@string/Input4.5&quot; /&gt;\r\n\r\n    &lt;/RadioGroup&gt;\r\n    &lt;LinearLayout\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:orientation=&quot;horizontal&quot;&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/btnupdate&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;@string/UpdateButton&quot; /&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/btndelete&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;@string/DeletButton&quot; /&gt;\r\n\r\n    &lt;/LinearLayout&gt;\r\n    &lt;Button\r\n        android:id=&quot;@+id/btnCancel&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;@string/CancelButton&quot; /&gt;\r\n\r\n\r\n\r\n\r\n&lt;/LinearLayout&gt;\r\n```\r\n\r\nMainActivity2.java:\r\n\r\n```\r\npackage com.myapplicationdev.android.songdbmanager;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.RadioButton;\r\nimport android.widget.RadioGroup;\r\nimport android.widget.Toast;\r\n\r\npublic class MainActivity2 extends AppCompatActivity {\r\n\r\n    Button btnUpdate,btnCancel,btnDelete;\r\n    EditText YearInput;\r\n    EditText SongInput;\r\n    EditText SingerInput;\r\n    RadioGroup RadioGroupRating;\r\n\r\n    song selectedSong;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main2);\r\n        DBHelper db = new DBHelper(MainActivity2.this);\r\n        Intent intent = getIntent();\r\n        song clickedSong = intent.getParcelableExtra(&quot;song&quot;);\r\n        btnUpdate=findViewById(R.id.btnupdate);\r\n        btnCancel=findViewById(R.id.btnCancel);\r\n        btnDelete=findViewById(R.id.btndelete);\r\n        YearInput=findViewById(R.id.insertYear);\r\n        SongInput=findViewById(R.id.insertTitle);\r\n        SingerInput=findViewById(R.id.insertSingers);\r\n\r\n        RadioGroupRating=findViewById(R.id.radio_group);\r\n\r\n        selectedSong = clickedSong;\r\n        YearInput.setText(clickedSong.getYear());\r\n        SongInput.setText(clickedSong.getTitle());\r\n        SingerInput.setText(clickedSong.getSingers());\r\n        setStarsSelection(selectedSong.getStars());\r\n\r\n\r\n        btnUpdate.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                selectedSong.setTitle(SongInput.getText().toString());\r\n                selectedSong.setSingers(SingerInput.getText().toString());\r\n                selectedSong.setYear(Integer.parseInt(YearInput.getText().toString()));\r\n                selectedSong.setStars(getSelectedStars());\r\n                db.updateSong(selectedSong);\r\n                db.close();\r\n                finish();\r\n            }\r\n        });\r\n        btnDelete.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                db.deleteSong(selectedSong.getId());\r\n                db.close();\r\n                finish();\r\n            }\r\n        });\r\n\r\n\r\n}\r\n\r\n    private int getSelectedStars() {\r\n        int selectedId = RadioGroupRating.getCheckedRadioButtonId();\r\n        RadioButton rbSelected = findViewById(selectedId);\r\n        return Integer.parseInt(rbSelected.getText().toString());\r\n    }\r\n    private void setStarsSelection(int stars) {\r\n        int radioButtonId = 0;\r\n        switch (stars) {\r\n            case 1:\r\n                radioButtonId = R.id.radio_1;\r\n                break;\r\n            case 2:\r\n                radioButtonId = R.id.radio_2;\r\n                break;\r\n            case 3:\r\n                radioButtonId = R.id.radio_3;\r\n                break;\r\n            case 4:\r\n                radioButtonId = R.id.radio_4;\r\n                break;\r\n            case 5:\r\n                radioButtonId = R.id.radio_5;\r\n                break;\r\n        }\r\n        RadioGroupRating.check(radioButtonId);\r\n    }\r\n\r\n\r\n    }\r\n```\r\n\r\nThe issue is when I&#39;m attempting to send a song object at the end of EditActivity(which displays the list) to MainActivity2, as it won&#39;t work at all.\r\n\r\nI tried having Song be converted to other forms, but it ended up causing MainActivity2 to not show up at all before finish() sends me back to MainActivity, instead of fixing it.\r\n\r\n(If there are any other errors pls let me know too).","title":"Can&#39;t transfer Song object","body":"<p>So I was trying to build an android app that is meant to save, retrieve and edit songs.</p>\n<p>It consists of:</p>\n<p>The song class:</p>\n<pre><code>package com.myapplicationdev.android.songdbmanager;\n\nimport androidx.annotation.NonNull;\n\npublic class song {\n    private int id;\n    private String title;\n    private String singers;\n    private int year;\n    private int stars;\n\n\n    public void setSingers(String singers) {\n        this.singers = singers;\n    }\n\n    public void setStars(int stars) {\n        this.stars = stars;\n    }\n\n    public void setTitle(String title) {\n        this.title = title;\n    }\n\n    public void setYear(int year) {\n        this.year = year;\n    }\n\n    public song (\n                 String title,\n                 String singers,\n                 int year,\n                 int stars\n    ){\n        this.title=title;\n        this.singers=singers;\n        this.year=year;\n        this.stars=stars;\n    }\n    public song (\n            int id,\n            String title,\n            String singers,\n            int year,\n            int stars\n    ){\n        this.id=id;\n        this.title=title;\n        this.singers=singers;\n        this.year=year;\n        this.stars=stars;\n    }\n    public String getTitle() {\n        return title;\n    }\n    public int getId(){\n        return id;\n    }\n\n    public int getYear() {\n        return year;\n    }\n\n    public int getStars() {\n        return stars;\n    }\n\n    public String getSingers() {\n        return singers;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    @NonNull\n    @Override\n    public String toString() {\n        return\n                &quot;title='&quot; + title + '\\'' +\n                &quot;, singers='&quot; + singers + '\\'' +\n                &quot;, year=&quot; + year +\n                &quot;, stars=&quot; + stars\n               ;\n    }\n}\n</code></pre>\n<p>activity_main.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:orientation=&quot;vertical&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n    &lt;TextView\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;@string/Input1&quot; /&gt;\n    &lt;EditText\n        android:id=&quot;@+id/insertTitle&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;@string/InputPrompt1&quot; /&gt;\n    &lt;TextView\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;@string/Input2&quot; /&gt;\n    &lt;EditText\n        android:id=&quot;@+id/insertSingers&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;@string/InputPrompt2&quot; /&gt;\n    &lt;TextView\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;@string/Input3&quot; /&gt;\n    &lt;EditText\n        android:id=&quot;@+id/insertYear&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;50dp&quot;\n        android:text=&quot;@string/InputPrompt3&quot;/&gt;\n    &lt;TextView\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;@string/Input4&quot; /&gt;\n    &lt;RadioGroup\n        android:id=&quot;@+id/radio_group&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;50dp&quot;\n        android:orientation=&quot;horizontal&quot;&gt;\n\n        &lt;RadioButton\n            android:id=&quot;@+id/radio_1&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;@string/Input4.1&quot; /&gt;\n\n        &lt;RadioButton\n            android:id=&quot;@+id/radio_2&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;@string/Input4.2&quot; /&gt;\n\n        &lt;RadioButton\n            android:id=&quot;@+id/radio_3&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;@string/Input4.3&quot; /&gt;\n\n        &lt;RadioButton\n            android:id=&quot;@+id/radio_4&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;@string/Input4.4&quot; /&gt;\n\n        &lt;RadioButton\n            android:id=&quot;@+id/radio_5&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;@string/Input4.5&quot; /&gt;\n\n    &lt;/RadioGroup&gt;\n    &lt;LinearLayout\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:orientation=&quot;horizontal&quot;&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/btnInsert&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;@string/FinalButton&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/btnGetTasks&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;@string/ViewListings&quot; /&gt;\n\n    &lt;/LinearLayout&gt;\n\n\n\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>MainActivity.java:</p>\n<pre><code>package com.myapplicationdev.android.songdbmanager;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.View;\nimport android.widget.ArrayAdapter;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.ListView;\nimport android.widget.RadioButton;\nimport android.widget.RadioGroup;\nimport android.widget.TextView;\nimport android.widget.ToggleButton;\n\nimport java.util.ArrayList;\npublic class MainActivity extends AppCompatActivity {\n\n    Button btnInsert, btnGetSongs;\n    TextView tvResults;\n\n    EditText YearInput;\n    EditText SongInput;\n    EditText SingerInput;\n    RadioGroup RadioGroupRating;\n\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        btnInsert = findViewById(R.id.btnInsert);\n        btnGetSongs = findViewById(R.id.btnGetTasks);\n        //List View-&gt;\n        YearInput=findViewById(R.id.insertYear);\n        SongInput=findViewById(R.id.insertTitle);\n        SingerInput=findViewById(R.id.insertSingers);\n        RadioGroupRating=findViewById(R.id.radio_group);\n\n\n        btnInsert.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                DBHelper db = new DBHelper(MainActivity.this);\n                String title=SongInput.getText().toString();\n                String singers=SingerInput.getText().toString();\n                int year=Integer.parseInt(YearInput.getText().toString());\n\n                int selectedRatingId=RadioGroupRating.getCheckedRadioButtonId();\n                RadioButton selectedRatingButton=findViewById(selectedRatingId);\n                int rating=Integer.parseInt(selectedRatingButton.getText().toString());\n                db.insertSong(title,singers,year,rating);\n\n                SongInput.setText(&quot;&quot;);\n                SingerInput.setText(&quot;&quot;);\n                YearInput.setText(&quot;&quot;);\n                RadioGroupRating.clearCheck();\n            }\n        });\n\n        btnGetSongs.setOnClickListener(new View.OnClickListener(){\n            @Override\n            public void onClick(View v) {\n                // Create the DBHelper object, passing in the\n                // activity's Context\n\n                // Insert a task\n                Intent intent = new Intent(MainActivity.this, EditActivity.class);\n                //Label the actual editactivity EditActivity2\n                startActivity(intent);\n\n\n            }\n        });\n    }\n\n\n\n}\n</code></pre>\n<p>DBHelper:</p>\n<pre><code>package com.myapplicationdev.android.songdbmanager;\n\nimport android.content.ContentValues;\nimport android.content.Context;\nimport android.database.Cursor;\nimport android.database.sqlite.SQLiteDatabase;\nimport android.database.sqlite.SQLiteOpenHelper;\nimport android.util.Log;\n\nimport androidx.annotation.Nullable;\n\nimport java.util.ArrayList;\n\n\npublic class DBHelper extends SQLiteOpenHelper {    // Start version with 1\n    // increment by 1 whenever db schema changes.\n    private static final int DATABASE_VER = 1;\n    private static final String TABLE_SONG = &quot;song&quot;;\n    private static final String COLUMN_ID = &quot;id&quot;;\n    private static final String COLUMN_TITLE = &quot;title&quot;;\n    private static final String COLUMN_SINGERS = &quot;singers&quot;;\n    private static final String COLUMN_YEAR=&quot;year&quot;;\n    private static final String COLUMN_STARS=&quot;stars&quot;;\n    // Filename of the database\n    private static final String DATABASE_NAME = &quot;songs.db&quot;;\n\n    public DBHelper(@Nullable Context context) {\n        super(context, DATABASE_NAME, null, DATABASE_VER);\n    }\n\n    @Override\n    public void onCreate(SQLiteDatabase db) {\n        String dropTableSql = &quot;DROP TABLE IF EXISTS &quot; + TABLE_SONG;\n        db.execSQL(dropTableSql);\n        String createTableSql = &quot;CREATE TABLE &quot; + TABLE_SONG +  &quot;(&quot;\n                + COLUMN_ID + &quot; INTEGER PRIMARY KEY AUTOINCREMENT,&quot;\n                + COLUMN_TITLE + &quot; TEXT,&quot;\n                + COLUMN_SINGERS+ &quot; TEXT ,&quot;\n                + COLUMN_YEAR + &quot; INTEGER ,&quot;\n                + COLUMN_STARS+ &quot; INTEGER )&quot;;\n        db.execSQL(createTableSql);\n        Log.i(&quot;info&quot; ,&quot;created tables&quot;);\n\n\n    }\n\n    @Override\n    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\n        // Drop older table if existed\n        db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_SONG);\n        // Create table(s) again\n        onCreate(db);\n\n\n    }\n    public void insertSong(String title, String singers, int year, int stars){\n\n        // Get an instance of the database for writing\n        SQLiteDatabase db = this.getWritableDatabase();\n        // We use ContentValues object to store the values for\n        //  the db operation\n        ContentValues values = new ContentValues();\n        // Store the column name as key and the description as value\n        values.put(COLUMN_TITLE, title);\n        values.put(COLUMN_SINGERS, singers);\n        values.put(COLUMN_YEAR, year);\n        values.put(COLUMN_STARS, stars);\n\n        // Store the column name as key and the date as value\n\n        // Insert the row into the TABLE_TASK\n       db.insert(TABLE_SONG, null, values);\n        // Close the database connection\n        db.close();\n    }\n    public ArrayList&lt;song&gt; getAllSongs() {\n        ArrayList&lt;song&gt; songlist = new ArrayList&lt;&gt;();\n\n        SQLiteDatabase db = this.getReadableDatabase();\n\n        String[] columns= {COLUMN_ID, COLUMN_TITLE, COLUMN_SINGERS,COLUMN_YEAR,COLUMN_STARS};\n\n        Cursor cursor = db.query(TABLE_SONG, columns, null, null,\n                null, null, null, null);\n\n        if (cursor.moveToFirst()) {\n            do {\n                int id = cursor.getInt(0);\n                String title=cursor.getString(1);\n                String singers = cursor.getString(2);\n                int year=cursor.getInt(3);\n                int stars=cursor.getInt(4);\n                song Song = new song(id,title,singers,year,stars);\n                songlist.add(Song);\n            } while (cursor.moveToNext());\n        }\n        cursor.close();\n        db.close();\n        return songlist;\n    }\n    public ArrayList&lt;song&gt; getBestSongs() {\n        ArrayList&lt;song&gt; bestsonglist = new ArrayList&lt;&gt;();\n\n        SQLiteDatabase db = this.getReadableDatabase();\n\n        String[] columns= {COLUMN_ID, COLUMN_TITLE, COLUMN_SINGERS,COLUMN_YEAR,COLUMN_STARS};\n        String condition = COLUMN_STARS + &quot;= ?&quot;;\n        String[] args = {&quot;5&quot;};\n        Cursor cursor = db.query(TABLE_SONG, columns, condition, args,\n                null, null, null, null);\n\n        if (cursor.moveToFirst()) {\n            do {\n                int id = cursor.getInt(0);\n                String title=cursor.getString(1);\n                String singers = cursor.getString(2);\n                int year=cursor.getInt(3);\n                int stars=cursor.getInt(4);\n                song Song = new song(id,title,singers,year,stars);\n                bestsonglist.add(Song);\n            } while (cursor.moveToNext());\n        }\n        cursor.close();\n        db.close();\n        return bestsonglist;\n    }\n    public int updateSong(song Song) {\n        SQLiteDatabase db = this.getWritableDatabase();\n        ContentValues values = new ContentValues();\n        values.put(COLUMN_TITLE, Song.getTitle());\n        values.put(COLUMN_SINGERS, Song.getSingers());\n        values.put(COLUMN_YEAR, Song.getYear());\n        values.put(COLUMN_STARS, Song.getStars());\n        String whereClause = COLUMN_ID + &quot;=?&quot;;\n        String[] whereArgs = {String.valueOf(Song.getId())};\n        int result=db.update(TABLE_SONG, values, whereClause, whereArgs);\n\n        if (result &lt; 1) {\n            Log.d(&quot;DBHelper&quot;, &quot;Update failed&quot;);\n\n            db.close();\n            return result;\n        }\n\n\n        return result;\n    }\n    public void deleteSong(int songId) {\n        SQLiteDatabase db = this.getWritableDatabase();\n        String whereClause = COLUMN_ID + &quot;=?&quot;;\n        String[] whereArgs = {String.valueOf(songId)};\n       db.delete(TABLE_SONG, whereClause, whereArgs);\n       db.close();\n    }}\n</code></pre>\n<p>activity_edit.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:orientation=&quot;vertical&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n    &lt;TextView\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;@string/Input1&quot; /&gt;\n    &lt;EditText\n        android:id=&quot;@+id/insertTitle&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;@string/InputPrompt1&quot; /&gt;\n    &lt;TextView\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;@string/Input2&quot; /&gt;\n    &lt;EditText\n        android:id=&quot;@+id/insertSingers&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;@string/InputPrompt2&quot; /&gt;\n    &lt;TextView\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;@string/Input3&quot; /&gt;\n    &lt;EditText\n        android:id=&quot;@+id/insertYear&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;50dp&quot;\n        android:text=&quot;@string/InputPrompt3&quot;/&gt;\n    &lt;TextView\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;@string/Input4&quot; /&gt;\n    &lt;RadioGroup\n        android:id=&quot;@+id/radio_group&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;50dp&quot;\n        android:orientation=&quot;horizontal&quot;&gt;\n\n        &lt;RadioButton\n            android:id=&quot;@+id/radio_1&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;@string/Input4.1&quot; /&gt;\n\n        &lt;RadioButton\n            android:id=&quot;@+id/radio_2&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;@string/Input4.2&quot; /&gt;\n\n        &lt;RadioButton\n            android:id=&quot;@+id/radio_3&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;@string/Input4.3&quot; /&gt;\n\n        &lt;RadioButton\n            android:id=&quot;@+id/radio_4&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;@string/Input4.4&quot; /&gt;\n\n        &lt;RadioButton\n            android:id=&quot;@+id/radio_5&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;@string/Input4.5&quot; /&gt;\n\n    &lt;/RadioGroup&gt;\n    &lt;LinearLayout\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:orientation=&quot;horizontal&quot;&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/btnInsert&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;@string/FinalButton&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/btnGetTasks&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;@string/ViewListings&quot; /&gt;\n\n    &lt;/LinearLayout&gt;\n\n\n\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>EditActivity.java:</p>\n<pre><code>package com.myapplicationdev.android.songdbmanager;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.os.Parcelable;\nimport android.view.View;\nimport android.widget.AdapterView;\nimport android.widget.ArrayAdapter;\nimport android.widget.Button;\nimport android.widget.ListView;\n\nimport java.util.ArrayList;\n\npublic class EditActivity extends AppCompatActivity {\n    ListView lv;\n    ArrayList&lt;song&gt; songsList;\n    ArrayAdapter&lt;song&gt; adapter;\n    Button fivestarsongs;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_edit);\n\n        lv= findViewById(R.id.list_view);\n        fivestarsongs=findViewById(R.id.btnShow5starsongs);\n        DBHelper db = new DBHelper(EditActivity.this);\n\n        ArrayList&lt;song&gt; songs = db.getAllSongs();\n\n        ArrayAdapter&lt;song&gt; adapter = new ArrayAdapter&lt;&gt;(this, android.R.layout.simple_list_item_1, songs);\n        lv.setAdapter(adapter);\n        fivestarsongs.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                ArrayList&lt;song&gt; BestSongs = db.getBestSongs();\n                adapter.clear();\n                adapter.addAll(BestSongs);\n                adapter.notifyDataSetChanged();\n            }\n        });\n        lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {\n            @Override\n            public void onItemClick(AdapterView&lt;?&gt; parent, View view, int\n                    position, long id) {\n                song ClickedSong = songs.get(position);\n                Intent i = new Intent(EditActivity.this,\n                        MainActivity2.class);\n                i.putExtra(&quot;song&quot;, (CharSequence) ClickedSong);\n                startActivity(i);\n            }\n        });\n    }\n\n}\n</code></pre>\n<p>activity_main2.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:orientation=&quot;vertical&quot;\n    tools:context=&quot;.MainActivity2&quot;&gt;\n    &lt;TextView\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;@string/Input1&quot; /&gt;\n    &lt;EditText\n        android:id=&quot;@+id/insertTitle&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;@string/InputPrompt1&quot; /&gt;\n    &lt;TextView\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;@string/Input2&quot; /&gt;\n    &lt;EditText\n        android:id=&quot;@+id/insertSingers&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;@string/InputPrompt2&quot; /&gt;\n    &lt;TextView\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;@string/Input3&quot; /&gt;\n    &lt;EditText\n        android:id=&quot;@+id/insertYear&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;50dp&quot;\n        android:text=&quot;@string/InputPrompt3&quot;/&gt;\n    &lt;TextView\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;@string/Input4&quot; /&gt;\n    &lt;RadioGroup\n        android:id=&quot;@+id/radio_group&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;50dp&quot;\n        android:orientation=&quot;horizontal&quot;&gt;\n\n        &lt;RadioButton\n            android:id=&quot;@+id/radio_1&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;@string/Input4.1&quot; /&gt;\n\n        &lt;RadioButton\n            android:id=&quot;@+id/radio_2&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;@string/Input4.2&quot; /&gt;\n\n        &lt;RadioButton\n            android:id=&quot;@+id/radio_3&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;@string/Input4.3&quot; /&gt;\n\n        &lt;RadioButton\n            android:id=&quot;@+id/radio_4&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;@string/Input4.4&quot; /&gt;\n\n        &lt;RadioButton\n            android:id=&quot;@+id/radio_5&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;@string/Input4.5&quot; /&gt;\n\n    &lt;/RadioGroup&gt;\n    &lt;LinearLayout\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:orientation=&quot;horizontal&quot;&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/btnupdate&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;@string/UpdateButton&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/btndelete&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;@string/DeletButton&quot; /&gt;\n\n    &lt;/LinearLayout&gt;\n    &lt;Button\n        android:id=&quot;@+id/btnCancel&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;@string/CancelButton&quot; /&gt;\n\n\n\n\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>MainActivity2.java:</p>\n<pre><code>package com.myapplicationdev.android.songdbmanager;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.RadioButton;\nimport android.widget.RadioGroup;\nimport android.widget.Toast;\n\npublic class MainActivity2 extends AppCompatActivity {\n\n    Button btnUpdate,btnCancel,btnDelete;\n    EditText YearInput;\n    EditText SongInput;\n    EditText SingerInput;\n    RadioGroup RadioGroupRating;\n\n    song selectedSong;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main2);\n        DBHelper db = new DBHelper(MainActivity2.this);\n        Intent intent = getIntent();\n        song clickedSong = intent.getParcelableExtra(&quot;song&quot;);\n        btnUpdate=findViewById(R.id.btnupdate);\n        btnCancel=findViewById(R.id.btnCancel);\n        btnDelete=findViewById(R.id.btndelete);\n        YearInput=findViewById(R.id.insertYear);\n        SongInput=findViewById(R.id.insertTitle);\n        SingerInput=findViewById(R.id.insertSingers);\n\n        RadioGroupRating=findViewById(R.id.radio_group);\n\n        selectedSong = clickedSong;\n        YearInput.setText(clickedSong.getYear());\n        SongInput.setText(clickedSong.getTitle());\n        SingerInput.setText(clickedSong.getSingers());\n        setStarsSelection(selectedSong.getStars());\n\n\n        btnUpdate.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                selectedSong.setTitle(SongInput.getText().toString());\n                selectedSong.setSingers(SingerInput.getText().toString());\n                selectedSong.setYear(Integer.parseInt(YearInput.getText().toString()));\n                selectedSong.setStars(getSelectedStars());\n                db.updateSong(selectedSong);\n                db.close();\n                finish();\n            }\n        });\n        btnDelete.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                db.deleteSong(selectedSong.getId());\n                db.close();\n                finish();\n            }\n        });\n\n\n}\n\n    private int getSelectedStars() {\n        int selectedId = RadioGroupRating.getCheckedRadioButtonId();\n        RadioButton rbSelected = findViewById(selectedId);\n        return Integer.parseInt(rbSelected.getText().toString());\n    }\n    private void setStarsSelection(int stars) {\n        int radioButtonId = 0;\n        switch (stars) {\n            case 1:\n                radioButtonId = R.id.radio_1;\n                break;\n            case 2:\n                radioButtonId = R.id.radio_2;\n                break;\n            case 3:\n                radioButtonId = R.id.radio_3;\n                break;\n            case 4:\n                radioButtonId = R.id.radio_4;\n                break;\n            case 5:\n                radioButtonId = R.id.radio_5;\n                break;\n        }\n        RadioGroupRating.check(radioButtonId);\n    }\n\n\n    }\n</code></pre>\n<p>The issue is when I'm attempting to send a song object at the end of EditActivity(which displays the list) to MainActivity2, as it won't work at all.</p>\n<p>I tried having Song be converted to other forms, but it ended up causing MainActivity2 to not show up at all before finish() sends me back to MainActivity, instead of fixing it.</p>\n<p>(If there are any other errors pls let me know too).</p>\n"},{"tags":["java","mongodb","spring-boot","wildfly","spring-data-mongodb"],"answers":[{"tags":[],"owner":{"account_id":1513074,"reputation":1124,"user_id":1414712,"display_name":"Haseeb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689836161,"creation_date":1689836161,"answer_id":76727368,"question_id":76702612,"body_markdown":"After few days of head scratching, it was identified MongoClient class was being loaded by multiple ClassLoaders as I added dependency in application pom.xml and on wildfly same mongo java driver jars were placed on server module as well. \r\n\r\nfixed this with following changes in pom.xml:\r\n\r\n    &lt;plugin&gt;\r\n       &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n          &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n          &lt;configuration&gt;\r\n             &lt;archive&gt;\r\n                &lt;manifestEntries&gt;\r\n                   &lt;Dependencies&gt;org.mongodb&lt;/Dependencies&gt;\r\n                &lt;/manifestEntries&gt;\r\n             &lt;/archive&gt;\r\n         &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\n","title":"Connecting to Mongodb in Spring boot with Wildfly 21 JNDI object-factory","body":"<p>After few days of head scratching, it was identified MongoClient class was being loaded by multiple ClassLoaders as I added dependency in application pom.xml and on wildfly same mongo java driver jars were placed on server module as well.</p>\n<p>fixed this with following changes in pom.xml:</p>\n<pre><code>&lt;plugin&gt;\n   &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n      &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n      &lt;configuration&gt;\n         &lt;archive&gt;\n            &lt;manifestEntries&gt;\n               &lt;Dependencies&gt;org.mongodb&lt;/Dependencies&gt;\n            &lt;/manifestEntries&gt;\n         &lt;/archive&gt;\n     &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":1513074,"reputation":1124,"user_id":1414712,"display_name":"Haseeb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689836161,"creation_date":1689581802,"question_id":76702612,"body_markdown":"I&#39;m trying to connect to mongodb using wildfly jndi in springboot war application and it is throwing following casting exception: \r\n\r\n    org.springframework.beans.factory.BeanNotOfRequiredTypeException: Bean named &#39;java:global/MyMongoClient&#39; is expected to be of type &#39;com.mongodb.client.MongoClient&#39; but was actually of type &#39;com.mongodb.client.internal.MongoClientImpl&#39;\r\n\r\nWildfly 21 Standalone.xml object-factory:\r\n\r\n     &lt;subsystem xmlns=&quot;urn:jboss:domain:naming:2.0&quot;&gt;\r\n            &lt;bindings&gt;\r\n                &lt;object-factory name=&quot;java:global/MyMongoClient&quot; module=&quot;org.mongodb&quot; class=&quot;com.mongodb.client.MongoClientFactory&quot;&gt;\r\n                    &lt;environment&gt;\r\n                        &lt;property name=&quot;connectionString&quot; value=&quot;mongodb://localhost:27017&quot;/&gt;\r\n                    &lt;/environment&gt;\r\n                &lt;/object-factory&gt;\r\n            &lt;/bindings&gt;\r\n            &lt;remote-naming/&gt;\r\n        &lt;/subsystem&gt;\r\n\r\nWildfly 21 mongodb module configurations:\r\n\r\n    &lt;module xmlns=&quot;urn:jboss:module:1.3&quot; name=&quot;org.mongodb&quot;&gt;  \r\n\t   &lt;resources&gt;  \r\n\t\t\t&lt;resource-root path=&quot;mongodb-driver-sync-4.6.1.jar&quot;/&gt;\r\n\t\t\t&lt;resource-root path=&quot;mongodb-driver-core-4.6.1.jar&quot;/&gt;\t\t   \r\n\t\t\t&lt;resource-root path=&quot;bson-4.6.1.jar&quot;/&gt;\t\t   \r\n\t   &lt;/resources&gt;  \r\n\t   &lt;dependencies&gt;  \r\n\t       &lt;module name=&quot;javax.api&quot;/&gt;  \r\n\t       &lt;module name=&quot;javax.transaction.api&quot;/&gt;  \r\n\t       &lt;module name=&quot;javax.servlet.api&quot; optional=&quot;true&quot;/&gt;  \r\n\t   &lt;/dependencies&gt;  \r\n&lt;/module&gt; \r\n\r\nJava code to look up jndi:\r\n\r\n    @Resource(lookup = &quot;java:global/MyMongoClient&quot;)\r\n\tprivate MongoClient mongoClient;\r\n\r\nnot even working with context lookup:\r\n\r\n    Context ctx = new InitialContext();\r\n\tmongoClient = (MongoClient) ctx.lookup(&quot;java:global/MyMongoClient&quot;);\r\n\r\nI even then try to use direct implemented class rather than interface:\r\n\r\n    @Resource(lookup = &quot;java:global/MyMongoClient&quot;)\r\n\tprivate MongoClientImpl mongoClient;\r\n\r\nStill same error:\r\n\r\n    org.springframework.beans.factory.BeanNotOfRequiredTypeException: Bean named &#39;java:global/MyMongoClient&#39; is expected to be of type &#39;com.mongodb.client.internal.MongoClientImpl&#39; but was actually of type &#39;com.mongodb.client.internal.MongoClientImpl&#39;\r\n\r\n\r\nI&#39;m using Spring boot 2.7.13, Java 11, Wildfly 21, mongo-driver 4.6.1, spring-data-mongodb 3.4.13 and mongodb 3.2 \r\n\r\nNeed you guys perspective what I&#39;m missing.","title":"Connecting to Mongodb in Spring boot with Wildfly 21 JNDI object-factory","body":"<p>I'm trying to connect to mongodb using wildfly jndi in springboot war application and it is throwing following casting exception:</p>\n<pre><code>org.springframework.beans.factory.BeanNotOfRequiredTypeException: Bean named 'java:global/MyMongoClient' is expected to be of type 'com.mongodb.client.MongoClient' but was actually of type 'com.mongodb.client.internal.MongoClientImpl'\n</code></pre>\n<p>Wildfly 21 Standalone.xml object-factory:</p>\n<pre><code> &lt;subsystem xmlns=&quot;urn:jboss:domain:naming:2.0&quot;&gt;\n        &lt;bindings&gt;\n            &lt;object-factory name=&quot;java:global/MyMongoClient&quot; module=&quot;org.mongodb&quot; class=&quot;com.mongodb.client.MongoClientFactory&quot;&gt;\n                &lt;environment&gt;\n                    &lt;property name=&quot;connectionString&quot; value=&quot;mongodb://localhost:27017&quot;/&gt;\n                &lt;/environment&gt;\n            &lt;/object-factory&gt;\n        &lt;/bindings&gt;\n        &lt;remote-naming/&gt;\n    &lt;/subsystem&gt;\n</code></pre>\n<p>Wildfly 21 mongodb module configurations:</p>\n<pre><code>&lt;module xmlns=&quot;urn:jboss:module:1.3&quot; name=&quot;org.mongodb&quot;&gt;  \n   &lt;resources&gt;  \n        &lt;resource-root path=&quot;mongodb-driver-sync-4.6.1.jar&quot;/&gt;\n        &lt;resource-root path=&quot;mongodb-driver-core-4.6.1.jar&quot;/&gt;          \n        &lt;resource-root path=&quot;bson-4.6.1.jar&quot;/&gt;         \n   &lt;/resources&gt;  \n   &lt;dependencies&gt;  \n       &lt;module name=&quot;javax.api&quot;/&gt;  \n       &lt;module name=&quot;javax.transaction.api&quot;/&gt;  \n       &lt;module name=&quot;javax.servlet.api&quot; optional=&quot;true&quot;/&gt;  \n   &lt;/dependencies&gt;  \n</code></pre>\n \n<p>Java code to look up jndi:</p>\n<pre><code>@Resource(lookup = &quot;java:global/MyMongoClient&quot;)\nprivate MongoClient mongoClient;\n</code></pre>\n<p>not even working with context lookup:</p>\n<pre><code>Context ctx = new InitialContext();\nmongoClient = (MongoClient) ctx.lookup(&quot;java:global/MyMongoClient&quot;);\n</code></pre>\n<p>I even then try to use direct implemented class rather than interface:</p>\n<pre><code>@Resource(lookup = &quot;java:global/MyMongoClient&quot;)\nprivate MongoClientImpl mongoClient;\n</code></pre>\n<p>Still same error:</p>\n<pre><code>org.springframework.beans.factory.BeanNotOfRequiredTypeException: Bean named 'java:global/MyMongoClient' is expected to be of type 'com.mongodb.client.internal.MongoClientImpl' but was actually of type 'com.mongodb.client.internal.MongoClientImpl'\n</code></pre>\n<p>I'm using Spring boot 2.7.13, Java 11, Wildfly 21, mongo-driver 4.6.1, spring-data-mongodb 3.4.13 and mongodb 3.2</p>\n<p>Need you guys perspective what I'm missing.</p>\n"},{"tags":["java","junit","mockito"],"comments":[{"owner":{"account_id":1713236,"reputation":22836,"user_id":1570854,"accept_rate":71,"display_name":"Lesiak"},"score":2,"creation_date":1689886495,"post_id":76727342,"comment_id":135280814,"body_markdown":"I always advise not to use mocks when testing JPA queries. JPA is a complex API, when testing with mocks you only prove that you called some methods on it - you dont check if you picked the right sequence of methods to get your result. You will be much better off if you test against a db (ideally, same db engine you use on prod - either embedded or dockerized)","body":"I always advise not to use mocks when testing JPA queries. JPA is a complex API, when testing with mocks you only prove that you called some methods on it - you dont check if you picked the right sequence of methods to get your result. You will be much better off if you test against a db (ideally, same db engine you use on prod - either embedded or dockerized)"}],"owner":{"account_id":16466407,"reputation":584,"user_id":11896414,"display_name":"once"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689835896,"creation_date":1689835896,"question_id":76727342,"body_markdown":"I&#39;m trying to write a unit test for a method inside a dao object in which it is using an `EntityManager` to get a `CriteriaBuilder` and then use it to `createQuery`, how to do a mocking of the `CriteriaBuilder` so that it could go on to create the query?\r\n\r\n    @Component\r\n    public class MyDao {\r\n    \r\n     @PersistenceContext\r\n     EntityManager entityManager;\r\n    \r\n     public List&lt;MyEntity&gt; mySearch(Integer offset, Integer Limit) {\r\n       CriteriaBuilder builder = entityManager.getCriteriaBuilder();\r\n       CriteriaQuery&lt;MyEntity&gt; query = builder.createQuery(MyEntity.class);\r\n       //rest of implementation\r\n       \r\n       return this.entityManager.createQuery(query).setFirstResult(offset).getResultList():\r\n    }\r\n\r\n\r\n    @RunWith(MockitoJUnitRunner.class)\r\n    public class TestDao {\r\n    \r\n     @InjectMocks\r\n     private MyDao myDao;\r\n    \r\n     @Mock\r\n     private EntityManager entityManager;\r\n    \r\n     @Test\r\n     public void testSearch() {\r\n       //how to mock entityManager.getCriteriaBuilder() that the created builder\r\n       //could be used to createQuery \r\n       List&lt;MyEntity&gt; result = myDao.search(0, 10);\r\n     } \r\n    }","title":"JUnit test related to criteriaBuilder","body":"<p>I'm trying to write a unit test for a method inside a dao object in which it is using an <code>EntityManager</code> to get a <code>CriteriaBuilder</code> and then use it to <code>createQuery</code>, how to do a mocking of the <code>CriteriaBuilder</code> so that it could go on to create the query?</p>\n<pre><code>@Component\npublic class MyDao {\n\n @PersistenceContext\n EntityManager entityManager;\n\n public List&lt;MyEntity&gt; mySearch(Integer offset, Integer Limit) {\n   CriteriaBuilder builder = entityManager.getCriteriaBuilder();\n   CriteriaQuery&lt;MyEntity&gt; query = builder.createQuery(MyEntity.class);\n   //rest of implementation\n   \n   return this.entityManager.createQuery(query).setFirstResult(offset).getResultList():\n}\n\n\n@RunWith(MockitoJUnitRunner.class)\npublic class TestDao {\n\n @InjectMocks\n private MyDao myDao;\n\n @Mock\n private EntityManager entityManager;\n\n @Test\n public void testSearch() {\n   //how to mock entityManager.getCriteriaBuilder() that the created builder\n   //could be used to createQuery \n   List&lt;MyEntity&gt; result = myDao.search(0, 10);\n } \n}\n</code></pre>\n"},{"tags":["java","ldap"],"answers":[{"tags":[],"owner":{"account_id":31959,"reputation":10608,"user_id":88122,"accept_rate":0,"display_name":"jwilleke"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1497521719,"creation_date":1495700849,"answer_id":44175826,"question_id":44158134,"body_markdown":"Assuming the schema has been modified for the &quot;single custom attribute&quot;.\r\n(you do not cover that in the question), you probably need to create the user then add the custom attribute value AFTER the Add operation. ","title":"Java LDAP user creation with custom attribute","body":"<p>Assuming the schema has been modified for the \"single custom attribute\".\n(you do not cover that in the question), you probably need to create the user then add the custom attribute value AFTER the Add operation. </p>\n"},{"tags":[],"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1495701950,"creation_date":1495701950,"answer_id":44176154,"question_id":44158134,"body_markdown":"Unless you have modified the schema for one of those `objectClass`-es, you need to add the `extensibleObject` object class to use custom attributes.","title":"Java LDAP user creation with custom attribute","body":"<p>Unless you have modified the schema for one of those <code>objectClass</code>-es, you need to add the <code>extensibleObject</code> object class to use custom attributes.</p>\n"},{"tags":[],"owner":{"account_id":14107217,"reputation":11,"user_id":10190959,"display_name":"Bilcan Costinel-Bogdan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689835542,"creation_date":1689835542,"answer_id":76727308,"question_id":44158134,"body_markdown":"Have you tried defining your custom attribute the same way like all the others above ?\r\n\r\n    Attribute loginId= new BasicAttribute(&quot;loginId&quot;, &quot;aaa&quot;);\r\n    ---\r\n    container.put(loginId);\r\n\r\n","title":"Java LDAP user creation with custom attribute","body":"<p>Have you tried defining your custom attribute the same way like all the others above ?</p>\n<pre><code>Attribute loginId= new BasicAttribute(&quot;loginId&quot;, &quot;aaa&quot;);\n---\ncontainer.put(loginId);\n</code></pre>\n"}],"owner":{"account_id":1244859,"reputation":1348,"user_id":1206536,"accept_rate":63,"display_name":"Alpay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1273,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1689835542,"creation_date":1495627998,"question_id":44158134,"body_markdown":"I am trying to create an LDAP user with a single custom attribute, but I am getting a \r\n\r\n    javax.naming.directory.SchemaViolationException: [LDAP: error code 65 - 0000207D: UpdErr: DSID-0315166D, problem 6002 (OBJ_CLASS_VIOLATION), data -2131045114\r\n\r\nWhen I remove the `userId` custom attribute from the code, it runs perfectly and so that i can create the user, but this custom attribute is used by a third party app and I should create it with this attribute for sure.\r\n\r\nCan you give me any idea about what is going on with this attribute? What can be the problem? Thanks\r\n\r\nHere is the code that i am getting the error:\r\n\r\n    Attributes container = new BasicAttributes();\r\n    \r\n    \t\tAttribute objClasses = new BasicAttribute(&quot;objectClass&quot;);\r\n    \t\tobjClasses.add(&quot;top&quot;);\r\n    \t\tobjClasses.add(&quot;person&quot;);\r\n    \t\tobjClasses.add(&quot;organizationalPerson&quot;);\r\n    \t\tobjClasses.add(&quot;user&quot;);\r\n    \r\n    \t\tthis.cnValue = new StringBuffer(firstName).append(&quot; &quot;).append(lastName).toString();\r\n    \t\tAttribute cn = new BasicAttribute(&quot;cn&quot;, cnValue);\r\n    \t\tAttribute sAMAccountName = new BasicAttribute(&quot;sAMAccountName&quot;, userName);\r\n    \t\tAttribute principalName = new BasicAttribute(&quot;userPrincipalName&quot;, userName + &quot;@&quot; + DOMAIN_NAME);\r\n    \t\tAttribute givenName = new BasicAttribute(&quot;givenName&quot;, firstName);\r\n    \t\tAttribute sn = new BasicAttribute(&quot;sn&quot;, lastName);\r\n    \t\tAttribute uid = new BasicAttribute(&quot;uid&quot;, userName);\r\n    \t\tAttribute sshPublicKey = new BasicAttribute(&quot;sshPublicKey&quot;, &quot;AAAAAAAAAAAAAAAAAAAAAAAA&quot;);\r\n\r\n    \t\tAttribute userPassword = new BasicAttribute(&quot;userpassword&quot;, password);\r\n    \r\n    \t\tcontainer.put(objClasses);\r\n    \t\tcontainer.put(sAMAccountName);\r\n    \t\tcontainer.put(principalName);\r\n    \t\tcontainer.put(cn);\r\n    \t\tcontainer.put(sn);\r\n    \t\tcontainer.put(givenName);\r\n    \t\tcontainer.put(uid);\r\n    \t\tcontainer.put(userPassword);\r\n    \t\tcontainer.put(sshPublicKey);\r\n    \r\n    \t\tcontainer.put(&quot;loginId&quot;, &quot;aaa&quot;); //When I remove this, user can be created successfully\r\n    \t\t\t\r\n    \t\tthis.context.createSubcontext(getUserDN(cnValue, organisationUnit), container);","title":"Java LDAP user creation with custom attribute","body":"<p>I am trying to create an LDAP user with a single custom attribute, but I am getting a </p>\n\n<pre><code>javax.naming.directory.SchemaViolationException: [LDAP: error code 65 - 0000207D: UpdErr: DSID-0315166D, problem 6002 (OBJ_CLASS_VIOLATION), data -2131045114\n</code></pre>\n\n<p>When I remove the <code>userId</code> custom attribute from the code, it runs perfectly and so that i can create the user, but this custom attribute is used by a third party app and I should create it with this attribute for sure.</p>\n\n<p>Can you give me any idea about what is going on with this attribute? What can be the problem? Thanks</p>\n\n<p>Here is the code that i am getting the error:</p>\n\n<pre><code>Attributes container = new BasicAttributes();\n\n        Attribute objClasses = new BasicAttribute(\"objectClass\");\n        objClasses.add(\"top\");\n        objClasses.add(\"person\");\n        objClasses.add(\"organizationalPerson\");\n        objClasses.add(\"user\");\n\n        this.cnValue = new StringBuffer(firstName).append(\" \").append(lastName).toString();\n        Attribute cn = new BasicAttribute(\"cn\", cnValue);\n        Attribute sAMAccountName = new BasicAttribute(\"sAMAccountName\", userName);\n        Attribute principalName = new BasicAttribute(\"userPrincipalName\", userName + \"@\" + DOMAIN_NAME);\n        Attribute givenName = new BasicAttribute(\"givenName\", firstName);\n        Attribute sn = new BasicAttribute(\"sn\", lastName);\n        Attribute uid = new BasicAttribute(\"uid\", userName);\n        Attribute sshPublicKey = new BasicAttribute(\"sshPublicKey\", \"AAAAAAAAAAAAAAAAAAAAAAAA\");\n\n        Attribute userPassword = new BasicAttribute(\"userpassword\", password);\n\n        container.put(objClasses);\n        container.put(sAMAccountName);\n        container.put(principalName);\n        container.put(cn);\n        container.put(sn);\n        container.put(givenName);\n        container.put(uid);\n        container.put(userPassword);\n        container.put(sshPublicKey);\n\n        container.put(\"loginId\", \"aaa\"); //When I remove this, user can be created successfully\n\n        this.context.createSubcontext(getUserDN(cnValue, organisationUnit), container);\n</code></pre>\n"},{"tags":["java","spring","spring-data-jpa","jpql"],"comments":[{"owner":{"account_id":261278,"reputation":2329,"user_id":545353,"display_name":"Pavel Molchanov"},"score":1,"creation_date":1529081201,"post_id":50879431,"comment_id":88761542,"body_markdown":"List&lt;LoginProjection&gt; findAllProjectedBy();","body":"List&lt;LoginProjection&gt; findAllProjectedBy();"},{"owner":{"account_id":261278,"reputation":2329,"user_id":545353,"display_name":"Pavel Molchanov"},"score":0,"creation_date":1529081685,"post_id":50879431,"comment_id":88761772,"body_markdown":"You may need to annotate projection interface with the @Projection annotation: @Projection(name = &quot;name&quot; , types = Login.class)","body":"You may need to annotate projection interface with the @Projection annotation: @Projection(name = &quot;name&quot; , types = Login.class)"}],"answers":[{"tags":[],"owner":{"account_id":261278,"reputation":2329,"user_id":545353,"display_name":"Pavel Molchanov"},"down_vote_count":0,"up_vote_count":60,"is_accepted":true,"score":60,"last_activity_date":1591820592,"creation_date":1529085958,"answer_id":50880684,"question_id":50879431,"body_markdown":"And add a method to the repository:\r\n\r\n\r\n    List&lt;LoginProjection&gt; findAllProjectedBy();\r\n\r\nThe method name can be simplified to `findBy()` to match the documentation example at https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#projections\r\n\r\n","title":"Spring JPA Projection findAll","body":"<p>And add a method to the repository:</p>\n\n<pre><code>List&lt;LoginProjection&gt; findAllProjectedBy();\n</code></pre>\n\n<p>The method name can be simplified to <code>findBy()</code> to match the documentation example at <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#projections\" rel=\"noreferrer\">https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#projections</a></p>\n"},{"tags":[],"owner":{"account_id":98194,"reputation":4266,"user_id":265954,"display_name":"t0r0X"},"down_vote_count":1,"up_vote_count":20,"is_accepted":false,"score":19,"last_activity_date":1561456662,"creation_date":1561456662,"answer_id":56751379,"question_id":50879431,"body_markdown":"I assume you&#39;re not using [Spring Data REST][1], so `@Projection` won&#39;t help here. @pavel-molchanov showed one form of expressing the projection, another form is:\r\n\r\n    List&lt;LoginProjection&gt; findBy();\r\n\r\nIf you have more than one projection, you can avoid creating a method in the repository for each projection by using [dynamic projections][2] like e.g. this:\r\n\r\n    &lt;T&gt; List&lt;T&gt; findBy(Class&lt;T&gt; projection);\r\n    \r\n    // usage e.g.\r\n    ... = findBy(LoginProjection.class);\r\n    ... = findBy(UserSummaryProjection.class);\r\n\r\n\r\n  [1]: https://spring.io/projects/spring-data-rest#overview\r\n  [2]: https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#projection.dynamic","title":"Spring JPA Projection findAll","body":"<p>I assume you're not using <a href=\"https://spring.io/projects/spring-data-rest#overview\" rel=\"noreferrer\">Spring Data REST</a>, so <code>@Projection</code> won't help here. @pavel-molchanov showed one form of expressing the projection, another form is:</p>\n\n<pre><code>List&lt;LoginProjection&gt; findBy();\n</code></pre>\n\n<p>If you have more than one projection, you can avoid creating a method in the repository for each projection by using <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#projection.dynamic\" rel=\"noreferrer\">dynamic projections</a> like e.g. this:</p>\n\n<pre><code>&lt;T&gt; List&lt;T&gt; findBy(Class&lt;T&gt; projection);\n\n// usage e.g.\n... = findBy(LoginProjection.class);\n... = findBy(UserSummaryProjection.class);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4370300,"reputation":1338,"user_id":3564882,"accept_rate":77,"display_name":"Gavi"},"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1637073012,"creation_date":1637073012,"answer_id":69990987,"question_id":50879431,"body_markdown":"if you want to be more flexible you can add to the repository this method\r\n\r\n    &lt;T&gt; List&lt;T&gt; findBy(Class&lt;T&gt; projection);\r\n\r\nand then you can call it with the following\r\n\r\n    List&lt;LoginProjection&gt; rows = loginRepository.findBy(LoginProjection.class);\r\n\r\nThe advantage of this approach is that you can use all the projections you want using the same query","title":"Spring JPA Projection findAll","body":"<p>if you want to be more flexible you can add to the repository this method</p>\n<pre><code>&lt;T&gt; List&lt;T&gt; findBy(Class&lt;T&gt; projection);\n</code></pre>\n<p>and then you can call it with the following</p>\n<pre><code>List&lt;LoginProjection&gt; rows = loginRepository.findBy(LoginProjection.class);\n</code></pre>\n<p>The advantage of this approach is that you can use all the projections you want using the same query</p>\n"}],"owner":{"account_id":4360936,"reputation":653,"user_id":3558040,"display_name":"xkothe"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20088,"favorite_count":0,"down_vote_count":0,"up_vote_count":30,"accepted_answer_id":50880684,"answer_count":3,"score":30,"last_activity_date":1689835271,"creation_date":1529079632,"question_id":50879431,"body_markdown":"Is it possible to use &quot;findAll&quot; for a JPARepository returning a Collection/List of Projections?\r\nExample:\r\n\r\n\t@Entity\r\n\tpublic class Login {\r\n\t\t@Id\r\n\t\t@GeneratedValue(strategy = GenerationType.AUTO, generator = &quot;native&quot;)\r\n\t\t@GenericGenerator(name = &quot;native&quot;, strategy = &quot;native&quot;)\r\n\t\tprivate Integer id;\r\n\r\n\t\tprivate String name;\r\n\r\n        private String pass;\r\n\r\n        (...)\r\n\t\r\n   }\r\n\r\n    public interface LoginProjection {\r\n        public String getName();\r\n    }\r\n\r\n    @Repository\r\n    public interface LoginRepository extends JpaRepository&lt;Login, Long&gt; {\r\n\t    Login findByName(String name);\r\n\r\n\t    @Query(value = &quot;SELECT name FROM login&quot;, nativeQuery = true)\r\n\t    List&lt;LoginProjection&gt; findAllLoginProjection();\r\n    }\r\n\r\n\r\nUsing @Query it works! But it is not possible to use \r\n\r\n     List&lt;LoginProjection&gt; findAll();\r\n\r\nBecause LoginProjection does not extends T (Login).\r\n\r\nI was thinking if it is possible to give an &quot;alias&quot; for findAll like findAllXYZ that does the same thing as findAll.\r\nUsing filters it works too, but I do not want to use them:\r\n\r\n     List&lt;LoginProjection&gt; findAllByName(String name);\r\n\r\nMy main goal would be something like this:\r\n\r\n    @Repository\r\n    public interface LoginRepository extends JpaRepository&lt;Login, Long&gt; {\r\n\t    Login findByName(String name);\r\n\r\n\t    List&lt;Login&gt; findAll();\r\n\r\n\t    List&lt;LoginProjection&gt; findAllLoginProjection();\r\n    }\r\n\r\nWhich is pretty easy and with &quot;zero @Query&quot;","title":"Spring JPA Projection findAll","body":"<p>Is it possible to use &quot;findAll&quot; for a JPARepository returning a Collection/List of Projections?\nExample:</p>\n<pre><code>@Entity\npublic class Login {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO, generator = &quot;native&quot;)\n    @GenericGenerator(name = &quot;native&quot;, strategy = &quot;native&quot;)\n    private Integer id;\n\n    private String name;\n\n    private String pass;\n\n    (...)\n</code></pre>\n<p>}</p>\n<pre><code>public interface LoginProjection {\n    public String getName();\n}\n\n@Repository\npublic interface LoginRepository extends JpaRepository&lt;Login, Long&gt; {\n    Login findByName(String name);\n\n    @Query(value = &quot;SELECT name FROM login&quot;, nativeQuery = true)\n    List&lt;LoginProjection&gt; findAllLoginProjection();\n}\n</code></pre>\n<p>Using @Query it works! But it is not possible to use</p>\n<pre><code> List&lt;LoginProjection&gt; findAll();\n</code></pre>\n<p>Because LoginProjection does not extends T (Login).</p>\n<p>I was thinking if it is possible to give an &quot;alias&quot; for findAll like findAllXYZ that does the same thing as findAll.\nUsing filters it works too, but I do not want to use them:</p>\n<pre><code> List&lt;LoginProjection&gt; findAllByName(String name);\n</code></pre>\n<p>My main goal would be something like this:</p>\n<pre><code>@Repository\npublic interface LoginRepository extends JpaRepository&lt;Login, Long&gt; {\n    Login findByName(String name);\n\n    List&lt;Login&gt; findAll();\n\n    List&lt;LoginProjection&gt; findAllLoginProjection();\n}\n</code></pre>\n<p>Which is pretty easy and with &quot;zero @Query&quot;</p>\n"},{"tags":["java","optaplanner","timefold"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689687585,"post_id":76713061,"comment_id":135246783,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":216698,"reputation":26495,"user_id":472109,"accept_rate":85,"display_name":"Geoffrey De Smet"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689769712,"creation_date":1689769712,"answer_id":76721290,"question_id":76713061,"body_markdown":"The examples&#39;s old vehicle-routing implementation use measureless numbers for service duration and travel time. Not durations/time. That&#39;s messy in the real world.\r\n\r\nThe new [vehicle-routing-time-windows quickstart][1] in Timefold (fork of OptaPlanner, also open source) uses ISO formatted times and durations. Travel time is calculated by haversine. It has curl instructions to get a sample JSON file (look for the Guide link in the top).\r\n\r\n\r\n  [1]: https://github.com/TimefoldAI/timefold-quickstarts/tree/stable/use-cases/vehicle-routing-time-windows","title":"which time format is used in optaplanner for the vehicle routing problem time windowed with JSON file","body":"<p>The examples's old vehicle-routing implementation use measureless numbers for service duration and travel time. Not durations/time. That's messy in the real world.</p>\n<p>The new <a href=\"https://github.com/TimefoldAI/timefold-quickstarts/tree/stable/use-cases/vehicle-routing-time-windows\" rel=\"nofollow noreferrer\">vehicle-routing-time-windows quickstart</a> in Timefold (fork of OptaPlanner, also open source) uses ISO formatted times and durations. Travel time is calculated by haversine. It has curl instructions to get a sample JSON file (look for the Guide link in the top).</p>\n"}],"owner":{"account_id":29041753,"reputation":5,"user_id":22246475,"display_name":"Manal Awada"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76721290,"answer_count":1,"score":0,"last_activity_date":1689835010,"creation_date":1689685282,"question_id":76713061,"body_markdown":"I use JSON file exists in example in optaplanner for the vehicle routing problem time windowed, but I have a problem with time window format. What is the best format recognized by this file? \r\nthank you. \r\n\r\nI tried hours format, the window time is well represented on the graph, but the solution is not optimal, then I tried minutes and seconds format, the time windows is not represented on the graph.","title":"which time format is used in optaplanner for the vehicle routing problem time windowed with JSON file","body":"<p>I use JSON file exists in example in optaplanner for the vehicle routing problem time windowed, but I have a problem with time window format. What is the best format recognized by this file?\nthank you.</p>\n<p>I tried hours format, the window time is well represented on the graph, but the solution is not optimal, then I tried minutes and seconds format, the time windows is not represented on the graph.</p>\n"},{"tags":["java","mysql","jdbc","nullpointerexception"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":2,"creation_date":1689830263,"post_id":76726821,"comment_id":135269388,"body_markdown":"`PreparedStatement statement = null;` - yes it is.","body":"<code>PreparedStatement statement = null;</code> - yes it is."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":3,"creation_date":1689830563,"post_id":76726821,"comment_id":135269425,"body_markdown":"You don’t want connection and statement to be instance variables, but rather local variables. It’s not safe to share them between threads.","body":"You don’t want connection and statement to be instance variables, but rather local variables. It’s not safe to share them between threads."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1689833303,"post_id":76726821,"comment_id":135269742,"body_markdown":"You really should consult the JDBC tutorial by Oracle, and the example JDBC code shown in the many existing Answers on this site.","body":"You really should consult the JDBC tutorial by Oracle, and the example JDBC code shown in the many existing Answers on this site."}],"answers":[{"tags":[],"owner":{"account_id":2908204,"reputation":1283,"user_id":2493020,"accept_rate":67,"display_name":"Abdul Mohsin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689830576,"creation_date":1689830576,"answer_id":76726881,"question_id":76726821,"body_markdown":"You need to create the Statement object before setting any paraameter on that,  please uncomment the line\r\n\r\n    //statement = connection.prepareStatement(&quot;Your SQL Query here&quot;);\r\n\r\nonly after this you can use\r\n\r\n    statement.setString","title":"I am getting null pointer exception in servlet prepared statement","body":"<p>You need to create the Statement object before setting any paraameter on that,  please uncomment the line</p>\n<pre><code>//statement = connection.prepareStatement(&quot;Your SQL Query here&quot;);\n</code></pre>\n<p>only after this you can use</p>\n<pre><code>statement.setString\n</code></pre>\n"}],"owner":{"account_id":27027144,"reputation":11,"user_id":20584211,"display_name":"Divyesh Kuchhadia"},"comment_count":3,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":122,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"closed_date":1689833185,"answer_count":1,"score":-2,"last_activity_date":1689834893,"creation_date":1689829696,"question_id":76726821,"body_markdown":"java.lang.NullPointerException: Cannot invoke &quot;java.sql.PreparedStatement.setString(int, String)&quot; because &quot;this.statement&quot; is null\r\n\r\nRegistartion.java\r\n```\r\npackage in.adit.controller;\r\n\r\nimport java.io.IOException;\r\nimport java.io.PrintWriter;\r\nimport java.sql.Connection;\r\nimport java.sql.DriverManager;\r\nimport java.sql.PreparedStatement;\r\nimport java.sql.SQLException;\r\n\r\nimport javax.servlet.ServletException;\r\nimport javax.servlet.annotation.WebServlet;\r\nimport javax.servlet.http.HttpServlet;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\n\r\n@WebServlet(&quot;/Registration&quot;)\r\npublic class Registration extends HttpServlet {\r\n\tprivate static final long serialVersionUID = 1L;\r\n\r\n\tprivate static final String URL = &quot;jdbc:mysql://localhost:3306/user&quot;;\r\n\tprivate static final String USERNAME = &quot;root&quot;;\r\n\tprivate static final String PASSWORD = &quot;&quot;;\r\n\r\n\tConnection connection = null;\r\n\tPreparedStatement statement = null;\r\n\r\n\tpublic Registration() {\r\n\t\tsuper();\r\n\t\ttry {\r\n\t\t\tClass.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\r\n\t\t\tconnection = DriverManager.getConnection(URL, USERNAME, PASSWORD);\r\n\t\t\tSystem.out.println(&quot;Connect established succesfully&quot;);\r\n\t\t} catch (SQLException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t} catch (ClassNotFoundException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\n\tprotected void service(HttpServletRequest request, HttpServletResponse response)\r\n\t\t\tthrows ServletException, IOException {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tString un = request.getParameter(&quot;username&quot;);\r\n\t\tString pass = request.getParameter(&quot;password&quot;);\r\n\t\tString firstName = request.getParameter(&quot;password&quot;);\r\n\t\tString lastName = request.getParameter(&quot;password&quot;);\r\n\t\tString email = request.getParameter(&quot;password&quot;);\r\n\t\tString m = request.getParameter(&quot;mobile&quot;);\r\n\t\tSystem.out.println(m);\r\n\t\tLong mobile = Long.parseLong(m);\r\n\r\n\t\tresponse.setContentType(&quot;text/html&quot;);\r\n\t\tPrintWriter out = response.getWriter();\t\t\r\n\t\ttry {\r\n\t\t\tString query2 = &quot;INSERT INTO login_tbl VALUES (?,?)&quot;;\r\n\t\t\t//statement = connection.prepareStatement(query2);\r\n\t\t\tstatement.setString(1,un);\r\n\t\t\tstatement.setString(2,pass);\r\n\t\t\tstatement.execute(query2);\r\n\t\t\tSystem.out.println(&quot;Query 2 Executed...&quot;);\r\n\t\t\t\r\n\t\t\tString query = &quot;INSERT INTO user_info_tbl VALUES (?,?,?,?,?)&quot;;\r\n\t\t\t//statement = connection.prepareStatement(query);\r\n\t\t\tstatement.setString(1, un);\r\n\t\t\tstatement.setString(2, firstName);\r\n\t\t\tstatement.setString(3, lastName);\r\n\t\t\tstatement.setString(4, email);\r\n\t\t\tstatement.setLong(5, mobile);\r\n\t\t\tstatement.execute(query);\r\n\t\t\tSystem.out.println(&quot;Query 1 Executed...&quot;);\r\n\t\t\t\r\n\t\t\tresponse.sendRedirect(&quot;login.jsp&quot;);\r\n\t\t} catch (SQLException e) {\r\n\t\t\tout.println(e);\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n```\r\n\r\n\r\n```\r\nSigup.html\r\n\r\n&lt;%@include file=&quot;components/header.jsp&quot; %&gt;\r\n&lt;%@include file=&quot;components/navbar.jsp&quot; %&gt;\r\n&lt;div class=&quot;row&quot;&gt;\r\n\t&lt;div class=&quot;col-md-4&quot;&gt;&lt;/div&gt;\r\n\t&lt;div class=&quot;col-md-4&quot;&gt;\r\n\t\t&lt;div class=&quot;card&quot;&gt;\r\n\t\t\t&lt;div class=&quot;card-header bg-danger&quot;&gt;Create Account&lt;/div&gt;\r\n\t\t\t&lt;div class=&quot;card-body&quot;&gt;\r\n\r\n\t\t\t\t&lt;form action=&quot;Registration&quot; method=&quot;get&quot;&gt;\r\n\t\t\t\t&lt;table class=&quot;table table-borderless&quot;&gt;\r\n\t\t\t\t\t&lt;tr&gt;\r\n\t\t\t\t\t\t&lt;td&gt;&lt;input type=&quot;text&quot; class=&quot;form-control&quot; name=&quot;username&quot;\r\n\t\t\t\t\t\t\tplaceholder=&quot;Enter Username&quot; /&gt;&lt;/td&gt;\r\n\t\t\t\t\t&lt;/tr&gt;\r\n\t\t\t\t\t&lt;tr&gt;\r\n\t\t\t\t\t\t&lt;td&gt;&lt;input type=&quot;password&quot; class=&quot;form-control&quot;\r\n\t\t\t\t\t\t\tname=&quot;password&quot; placeholder=&quot;Enter Password&quot; /&gt;&lt;/td&gt;\r\n\t\t\t\t\t&lt;/tr&gt;\r\n\t\t\t\t\t&lt;tr&gt;\r\n\t\t\t\t\t\t&lt;td&gt;&lt;input type=&quot;text&quot; class=&quot;form-control&quot; name=&quot;firstname&quot;\r\n\t\t\t\t\t\t\tplaceholder=&quot;Enter Firstname&quot; /&gt;&lt;/td&gt;\r\n\t\t\t\t\t&lt;/tr&gt;\r\n\t\t\t\t\t&lt;tr&gt;\r\n\t\t\t\t\t\t&lt;td&gt;&lt;input type=&quot;text&quot; class=&quot;form-control&quot; name=&quot;lastname&quot;\r\n\t\t\t\t\t\t\tplaceholder=&quot;Enter Lastname&quot; /&gt;&lt;/td&gt;\r\n\t\t\t\t\t&lt;/tr&gt;\r\n\t\t\t\t\t&lt;tr&gt;\r\n\t\t\t\t\t\t&lt;td&gt;&lt;input type=&quot;email&quot; class=&quot;form-control&quot; name=&quot;email&quot;\r\n\t\t\t\t\t\t\tplaceholder=&quot;Enter Email&quot; /&gt;&lt;/td&gt;\r\n\t\t\t\t\t&lt;/tr&gt;\r\n\t\t\t\t\t&lt;tr&gt;\r\n\t\t\t\t\t\t&lt;td&gt;&lt;input type=&quot;tel&quot; class=&quot;form-control&quot; name=&quot;mobile&quot;\r\n\t\t\t\t\t\t\tplaceholder=&quot;Mobile Number 10 digit&quot; pattern=&quot;[0-9]{10}&quot; /&gt;&lt;/td&gt;\r\n\t\t\t\t\t&lt;/tr&gt;\r\n\t\t\t\t\t&lt;tr&gt;\r\n\t\t\t\t\t\t&lt;td&gt;&lt;input type=&quot;submit&quot; class=&quot;btn btn-danger&quot;\r\n\t\t\t\t\t\t\tvalue=&quot;Create Account&quot; /&gt;&lt;/td&gt;\r\n\t\t\t\t\t&lt;/tr&gt;\r\n\t\t\t\t&lt;/table&gt;\r\n\t\t\t\t&lt;/form&gt;\r\n\t\t\t&lt;/div&gt;\r\n\t\t&lt;/div&gt;\r\n\t&lt;/div&gt;\r\n\t&lt;div class=&quot;col-md-4&quot;&gt;&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;%@include file=&quot;components/footer.jsp&quot; %&gt;0\r\n```\r\n\r\n\r\n\r\nI tried query directly putting in mySql db in xamp here are my code it worked so query is correct and get method in jsp showing all parameter passing in url\r\n\r\n\r\n","title":"I am getting null pointer exception in servlet prepared statement","body":"<p>java.lang.NullPointerException: Cannot invoke &quot;java.sql.PreparedStatement.setString(int, String)&quot; because &quot;this.statement&quot; is null</p>\n<p>Registartion.java</p>\n<pre><code>package in.adit.controller;\n\nimport java.io.IOException;\nimport java.io.PrintWriter;\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.PreparedStatement;\nimport java.sql.SQLException;\n\nimport javax.servlet.ServletException;\nimport javax.servlet.annotation.WebServlet;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\n@WebServlet(&quot;/Registration&quot;)\npublic class Registration extends HttpServlet {\n    private static final long serialVersionUID = 1L;\n\n    private static final String URL = &quot;jdbc:mysql://localhost:3306/user&quot;;\n    private static final String USERNAME = &quot;root&quot;;\n    private static final String PASSWORD = &quot;&quot;;\n\n    Connection connection = null;\n    PreparedStatement statement = null;\n\n    public Registration() {\n        super();\n        try {\n            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\n            connection = DriverManager.getConnection(URL, USERNAME, PASSWORD);\n            System.out.println(&quot;Connect established succesfully&quot;);\n        } catch (SQLException e) {\n            e.printStackTrace();\n        } catch (ClassNotFoundException e) {\n            e.printStackTrace();\n        }\n    }\n\n    protected void service(HttpServletRequest request, HttpServletResponse response)\n            throws ServletException, IOException {\n        // TODO Auto-generated method stub\n        String un = request.getParameter(&quot;username&quot;);\n        String pass = request.getParameter(&quot;password&quot;);\n        String firstName = request.getParameter(&quot;password&quot;);\n        String lastName = request.getParameter(&quot;password&quot;);\n        String email = request.getParameter(&quot;password&quot;);\n        String m = request.getParameter(&quot;mobile&quot;);\n        System.out.println(m);\n        Long mobile = Long.parseLong(m);\n\n        response.setContentType(&quot;text/html&quot;);\n        PrintWriter out = response.getWriter();     \n        try {\n            String query2 = &quot;INSERT INTO login_tbl VALUES (?,?)&quot;;\n            //statement = connection.prepareStatement(query2);\n            statement.setString(1,un);\n            statement.setString(2,pass);\n            statement.execute(query2);\n            System.out.println(&quot;Query 2 Executed...&quot;);\n            \n            String query = &quot;INSERT INTO user_info_tbl VALUES (?,?,?,?,?)&quot;;\n            //statement = connection.prepareStatement(query);\n            statement.setString(1, un);\n            statement.setString(2, firstName);\n            statement.setString(3, lastName);\n            statement.setString(4, email);\n            statement.setLong(5, mobile);\n            statement.execute(query);\n            System.out.println(&quot;Query 1 Executed...&quot;);\n            \n            response.sendRedirect(&quot;login.jsp&quot;);\n        } catch (SQLException e) {\n            out.println(e);\n            e.printStackTrace();\n        }\n\n    }\n\n}\n\n</code></pre>\n<pre><code>Sigup.html\n\n&lt;%@include file=&quot;components/header.jsp&quot; %&gt;\n&lt;%@include file=&quot;components/navbar.jsp&quot; %&gt;\n&lt;div class=&quot;row&quot;&gt;\n    &lt;div class=&quot;col-md-4&quot;&gt;&lt;/div&gt;\n    &lt;div class=&quot;col-md-4&quot;&gt;\n        &lt;div class=&quot;card&quot;&gt;\n            &lt;div class=&quot;card-header bg-danger&quot;&gt;Create Account&lt;/div&gt;\n            &lt;div class=&quot;card-body&quot;&gt;\n\n                &lt;form action=&quot;Registration&quot; method=&quot;get&quot;&gt;\n                &lt;table class=&quot;table table-borderless&quot;&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;&lt;input type=&quot;text&quot; class=&quot;form-control&quot; name=&quot;username&quot;\n                            placeholder=&quot;Enter Username&quot; /&gt;&lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;&lt;input type=&quot;password&quot; class=&quot;form-control&quot;\n                            name=&quot;password&quot; placeholder=&quot;Enter Password&quot; /&gt;&lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;&lt;input type=&quot;text&quot; class=&quot;form-control&quot; name=&quot;firstname&quot;\n                            placeholder=&quot;Enter Firstname&quot; /&gt;&lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;&lt;input type=&quot;text&quot; class=&quot;form-control&quot; name=&quot;lastname&quot;\n                            placeholder=&quot;Enter Lastname&quot; /&gt;&lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;&lt;input type=&quot;email&quot; class=&quot;form-control&quot; name=&quot;email&quot;\n                            placeholder=&quot;Enter Email&quot; /&gt;&lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;&lt;input type=&quot;tel&quot; class=&quot;form-control&quot; name=&quot;mobile&quot;\n                            placeholder=&quot;Mobile Number 10 digit&quot; pattern=&quot;[0-9]{10}&quot; /&gt;&lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;&lt;input type=&quot;submit&quot; class=&quot;btn btn-danger&quot;\n                            value=&quot;Create Account&quot; /&gt;&lt;/td&gt;\n                    &lt;/tr&gt;\n                &lt;/table&gt;\n                &lt;/form&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=&quot;col-md-4&quot;&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;%@include file=&quot;components/footer.jsp&quot; %&gt;0\n</code></pre>\n<p>I tried query directly putting in mySql db in xamp here are my code it worked so query is correct and get method in jsp showing all parameter passing in url</p>\n"},{"tags":["java","android","drawable","draw","shapes"],"answers":[{"tags":[],"owner":{"account_id":1413289,"reputation":4397,"user_id":1339473,"accept_rate":35,"display_name":"QuokMoon"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1396856407,"creation_date":1396856407,"answer_id":22906299,"question_id":22905838,"body_markdown":"&gt; Use this one code\r\n\r\n        class MyView extends View {\r\n                  Paint paint1 = new Paint();\r\n        \t\tPaint paint2 = new Paint();\r\n        \t\tPaint paint3 = new Paint();\r\n        \t\tPaint paint4 = new Paint();\r\n        \t\tPaint paint5 = new Paint();\r\n        \t\tfinal RectF rect = new RectF();\r\n                 int mRadius = 130;\r\n    \t@Override\r\n    \t\tprotected void onDraw(Canvas canvas) {\r\n    \t\t\tsuper.onDraw(canvas);\r\n        \t\t\t// Example values\r\n        \t\t\trect.set(getWidth() / 2 - mRadius, getHeight() / 2 - mRadius,\r\n        \t\t\t\t\tgetWidth() / 2 + mRadius, getHeight() / 2 + mRadius);\r\n        \t\t\tpaint1.setColor(Color.RED);\r\n        \t\t\tpaint1.setStrokeWidth(16);\r\n        \t\t\tpaint1.setAntiAlias(true);\r\n        \t\t\tpaint1.setStrokeCap(Paint.Cap.BUTT);\r\n        \t\t\tpaint1.setStyle(Paint.Style.STROKE);\r\n        \t\t\tpaint2.setColor(Color.RED);\r\n        \t\t\tpaint2.setStrokeWidth(mRadius / 2);\r\n        \t\t\tpaint2.setAntiAlias(true);\r\n        \t\t\tpaint2.setStrokeCap(Paint.Cap.BUTT);\r\n        \t\t\tpaint2.setStyle(Paint.Style.STROKE);\r\n        \t\t\tpaint3.setColor(Color.RED);\r\n        \t\t\tpaint3.setStrokeWidth(16);\r\n        \t\t\tpaint3.setAntiAlias(true);\r\n        \t\t\tpaint3.setStrokeCap(Paint.Cap.BUTT);\r\n        \t\t\tpaint3.setStyle(Paint.Style.STROKE);\r\n        \t\t\tcanvas.drawArc(rect, 0, 3600, false, paint1);\r\n        \r\n        \t\t\tcanvas.drawLine(getWidth() / 2, getHeight() / 2, getWidth() / 2\r\n        \t\t\t\t\t- mRadius, getHeight() / 2 - mRadius, paint3);\r\n        \r\n        \t\t\tcanvas.drawLine(getWidth() / 2, getHeight() / 2, getWidth() / 2\r\n        \t\t\t\t\t+ mRadius, getHeight() / 2 - mRadius, paint3);\r\n        \r\n        \t\t\tcanvas.drawLine(getWidth() / 2, getHeight() / 2, getWidth() / 2\r\n        \t\t\t\t\t- mRadius, getHeight() / 2 + mRadius, paint3);\r\n        \r\n        \t\t\tcanvas.drawLine(getWidth() / 2, getHeight() / 2, getWidth() / 2\r\n        \t\t\t\t\t+ mRadius , getHeight() / 2 + mRadius , paint3);\r\n      }\r\n    }\r\n\r\n![Screenshot][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/Hz9f5.png","title":"How to create a custom shape in android: Cross Over A Circle","body":"<blockquote>\n  <p>Use this one code</p>\n</blockquote>\n\n<pre><code>    class MyView extends View {\n              Paint paint1 = new Paint();\n            Paint paint2 = new Paint();\n            Paint paint3 = new Paint();\n            Paint paint4 = new Paint();\n            Paint paint5 = new Paint();\n            final RectF rect = new RectF();\n             int mRadius = 130;\n    @Override\n        protected void onDraw(Canvas canvas) {\n            super.onDraw(canvas);\n                // Example values\n                rect.set(getWidth() / 2 - mRadius, getHeight() / 2 - mRadius,\n                        getWidth() / 2 + mRadius, getHeight() / 2 + mRadius);\n                paint1.setColor(Color.RED);\n                paint1.setStrokeWidth(16);\n                paint1.setAntiAlias(true);\n                paint1.setStrokeCap(Paint.Cap.BUTT);\n                paint1.setStyle(Paint.Style.STROKE);\n                paint2.setColor(Color.RED);\n                paint2.setStrokeWidth(mRadius / 2);\n                paint2.setAntiAlias(true);\n                paint2.setStrokeCap(Paint.Cap.BUTT);\n                paint2.setStyle(Paint.Style.STROKE);\n                paint3.setColor(Color.RED);\n                paint3.setStrokeWidth(16);\n                paint3.setAntiAlias(true);\n                paint3.setStrokeCap(Paint.Cap.BUTT);\n                paint3.setStyle(Paint.Style.STROKE);\n                canvas.drawArc(rect, 0, 3600, false, paint1);\n\n                canvas.drawLine(getWidth() / 2, getHeight() / 2, getWidth() / 2\n                        - mRadius, getHeight() / 2 - mRadius, paint3);\n\n                canvas.drawLine(getWidth() / 2, getHeight() / 2, getWidth() / 2\n                        + mRadius, getHeight() / 2 - mRadius, paint3);\n\n                canvas.drawLine(getWidth() / 2, getHeight() / 2, getWidth() / 2\n                        - mRadius, getHeight() / 2 + mRadius, paint3);\n\n                canvas.drawLine(getWidth() / 2, getHeight() / 2, getWidth() / 2\n                        + mRadius , getHeight() / 2 + mRadius , paint3);\n  }\n}\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/Hz9f5.png\" alt=\"Screenshot\"></p>\n"},{"tags":[],"owner":{"account_id":183228,"reputation":424,"user_id":2447726,"display_name":"Guy West"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689834745,"creation_date":1689834745,"answer_id":76727240,"question_id":22905838,"body_markdown":"Here is another version in **Kotlin**:\r\n\r\n## X inside a circle ##\r\n[![enter image description here][1]][1]\r\n\r\n        paint.color = Color.WHITE\r\n        canvas.drawOval(\r\n            0F,\r\n            0F,\r\n            24F,\r\n            24F,\r\n            paint,\r\n        )\r\n        paint.color = Color.BLACK\r\n        paint.strokeWidth = 7F\r\n        canvas.drawLine(\r\n            8F,\r\n            8F,\r\n            16F,\r\n            16F,\r\n            paint,\r\n        )\r\n        canvas.drawLine(\r\n            16F,\r\n            8F,\r\n            8F,\r\n            16F,\r\n            paint,\r\n        ) \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Q1K9b.png","title":"How to create a custom shape in android: Cross Over A Circle","body":"<p>Here is another version in <strong>Kotlin</strong>:</p>\n<h2>X inside a circle</h2>\n<p><a href=\"https://i.stack.imgur.com/Q1K9b.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Q1K9b.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>    paint.color = Color.WHITE\n    canvas.drawOval(\n        0F,\n        0F,\n        24F,\n        24F,\n        paint,\n    )\n    paint.color = Color.BLACK\n    paint.strokeWidth = 7F\n    canvas.drawLine(\n        8F,\n        8F,\n        16F,\n        16F,\n        paint,\n    )\n    canvas.drawLine(\n        16F,\n        8F,\n        8F,\n        16F,\n        paint,\n    ) \n</code></pre>\n"}],"owner":{"account_id":382468,"reputation":1846,"user_id":737704,"accept_rate":12,"display_name":"Suresh Sharma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1486,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1689834745,"creation_date":1396855017,"question_id":22905838,"body_markdown":"I want to draw a Circle and cross over this by using Shape drawable in android just like ![image][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/FQz1k.jpg\r\n\r\nif anybody have idea how can it be achieved. Please help. I am not able to create Cross inside  Circle.","title":"How to create a custom shape in android: Cross Over A Circle","body":"<p>I want to draw a Circle and cross over this by using Shape drawable in android just like <img src=\"https://i.stack.imgur.com/FQz1k.jpg\" alt=\"image\"></p>\n\n<p>if anybody have idea how can it be achieved. Please help. I am not able to create Cross inside  Circle.</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1689833798,"post_id":76726360,"comment_id":135269821,"body_markdown":"In modern Java, fonts are *not* necessarily bundled with the implementation of Java. Fonts are provided by the host OS.  See [the documentation](https://docs.oracle.com/en/java/javase/20/intl/supported-fonts.html). Some vendors may choose to bundle fonts with their implementation of Java,  but such bundles are not required.","body":"In modern Java, fonts are <i>not</i> necessarily bundled with the implementation of Java. Fonts are provided by the host OS.  See <a href=\"https://docs.oracle.com/en/java/javase/20/intl/supported-fonts.html\" rel=\"nofollow noreferrer\">the documentation</a>. Some vendors may choose to bundle fonts with their implementation of Java,  but such bundles are not required."}],"answers":[{"tags":[],"owner":{"account_id":28984901,"reputation":12,"user_id":22201909,"display_name":"Bich Anh Dao"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1689821854,"creation_date":1689821854,"answer_id":76726402,"question_id":76726360,"body_markdown":"Consider double checking your JDK settings and system environment. This error is related to your system or JDK. And another problem here if you are using Linux or Unix operating system, this error is very common.","title":"How to install JRE fonts for java.lang.Error: Probable fatal error:No fonts found","body":"<p>Consider double checking your JDK settings and system environment. This error is related to your system or JDK. And another problem here if you are using Linux or Unix operating system, this error is very common.</p>\n"}],"owner":{"account_id":26887468,"reputation":3,"user_id":20466794,"display_name":"ZZZ"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":166,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689834657,"creation_date":1689821098,"question_id":76726360,"body_markdown":"What should I do to install the fonts in JRE in spring?\r\n\r\n```none\r\n2023-07-19 14:32:09,621 ERROR [org.springframework.boot.web.servlet.support.ErrorPageFilter] (default task-3) Forwarding to error page from request [/simpleCaptchaImg] due to exception [Probable fatal error: No physical fonts found.]: java.lang.Error: Probable fatal error: No physical fonts found.\r\n\tat java.desktop/sun.font.SunFontManager.lambda$getDefaultPhysicalFont$0(Unknown Source)\r\n\tat java.base/java.util.Optional.orElseThrow(Unknown Source)\r\n\tat java.desktop/sun.font.SunFontManager.getDefaultPhysicalFont(Unknown Source)\r\n\tat java.desktop/sun.font.CompositeFont.doDeferredInitialisation(Unknown Source)\r\n\tat java.desktop/sun.font.CompositeFont.getSlotFont(Unknown Source)\r\n\tat java.desktop/sun.font.CompositeGlyphMapper.initMapper(Unknown Source)\r\n\tat java.desktop/sun.font.CompositeGlyphMapper.&lt;init&gt;(Unknown Source)\r\n\tat java.desktop/sun.font.CompositeFont.getMapper(Unknown Source)\r\n\tat java.desktop/sun.font.StandardGlyphVector.init(Unknown Source)\r\n\tat java.desktop/sun.font.StandardGlyphVector.&lt;init&gt;(Unknown Source)\r\n\tat java.desktop/java.awt.Font.createGlyphVector(Unknown Source)\r\n```","title":"How to install JRE fonts for java.lang.Error: Probable fatal error:No fonts found","body":"<p>What should I do to install the fonts in JRE in spring?</p>\n<pre class=\"lang-none prettyprint-override\"><code>2023-07-19 14:32:09,621 ERROR [org.springframework.boot.web.servlet.support.ErrorPageFilter] (default task-3) Forwarding to error page from request [/simpleCaptchaImg] due to exception [Probable fatal error: No physical fonts found.]: java.lang.Error: Probable fatal error: No physical fonts found.\n    at java.desktop/sun.font.SunFontManager.lambda$getDefaultPhysicalFont$0(Unknown Source)\n    at java.base/java.util.Optional.orElseThrow(Unknown Source)\n    at java.desktop/sun.font.SunFontManager.getDefaultPhysicalFont(Unknown Source)\n    at java.desktop/sun.font.CompositeFont.doDeferredInitialisation(Unknown Source)\n    at java.desktop/sun.font.CompositeFont.getSlotFont(Unknown Source)\n    at java.desktop/sun.font.CompositeGlyphMapper.initMapper(Unknown Source)\n    at java.desktop/sun.font.CompositeGlyphMapper.&lt;init&gt;(Unknown Source)\n    at java.desktop/sun.font.CompositeFont.getMapper(Unknown Source)\n    at java.desktop/sun.font.StandardGlyphVector.init(Unknown Source)\n    at java.desktop/sun.font.StandardGlyphVector.&lt;init&gt;(Unknown Source)\n    at java.desktop/java.awt.Font.createGlyphVector(Unknown Source)\n</code></pre>\n"},{"tags":["java","maven","tomcat"],"comments":[{"owner":{"account_id":5030450,"reputation":8573,"user_id":4040817,"accept_rate":75,"display_name":"Little Santi"},"score":0,"creation_date":1689587280,"post_id":76511682,"comment_id":135229378,"body_markdown":"Please post all the dependencies of your pom (I mean: If your code references the `Tomcat` class, then there is at least the `tomcat-catalina` dependency).","body":"Please post all the dependencies of your pom (I mean: If your code references the <code>Tomcat</code> class, then there is at least the <code>tomcat-catalina</code> dependency)."},{"owner":{"account_id":2449170,"reputation":1315,"user_id":2135838,"display_name":"Sascha"},"score":0,"creation_date":1689606379,"post_id":76511682,"comment_id":135233705,"body_markdown":"Check the dependencies with [`maven dependency:tree`](https://maven.apache.org/plugins/maven-dependency-plugin/tree-mojo.html) which dependency introduces the other version.","body":"Check the dependencies with <a href=\"https://maven.apache.org/plugins/maven-dependency-plugin/tree-mojo.html\" rel=\"nofollow noreferrer\"><code>maven dependency:tree</code></a> which dependency introduces the other version."},{"owner":{"account_id":63162,"reputation":102381,"user_id":187141,"accept_rate":82,"display_name":"yegor256"},"score":0,"creation_date":1689608448,"post_id":76511682,"comment_id":135234163,"body_markdown":"@Sascha I did, and I didn&#39;t find the version I see in the logs","body":"@Sascha I did, and I didn&#39;t find the version I see in the logs"},{"owner":{"account_id":2449170,"reputation":1315,"user_id":2135838,"display_name":"Sascha"},"score":0,"creation_date":1689667343,"post_id":76511682,"comment_id":135242273,"body_markdown":"Without your pom we can&#39;t really help. You have to tell us at least, what tomcat dependency you use.","body":"Without your pom we can&#39;t really help. You have to tell us at least, what tomcat dependency you use."},{"owner":{"account_id":2391718,"reputation":1031,"user_id":2091442,"accept_rate":100,"display_name":"vinod_vh"},"score":0,"creation_date":1689741756,"post_id":76511682,"comment_id":135254537,"body_markdown":"@yegor256 Have you added this jar manually? Otherwise when you build using ```mvn clean install```, It will automatically download all dependent jars.","body":"@yegor256 Have you added this jar manually? Otherwise when you build using <code>mvn clean install</code>, It will automatically download all dependent jars."}],"answers":[{"tags":[],"owner":{"account_id":19092422,"reputation":51311,"user_id":13942448,"display_name":"jccampanero"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1689634018,"creation_date":1689634018,"answer_id":76708527,"question_id":76511682,"body_markdown":"Tomcat is looking for `com/sun/xml/bind/jaxb-core/2.3.0/jaxb-api.jar` because `jaxb-api.jar` is referenced in the `Class-Path` manifest attribute in `jaxb-core` `2.3.0`:\r\n\r\n[![jaxb-core 2.3.0 MANIFEST.MF][1]][1]\r\n\r\nSorry, I am unable to tell you the reason why jaxb-core 2.3.0 is requested in first place: perhaps it is related to any Tomcat dependency. Please, consider review [this related SO question](https://stackoverflow.com/questions/73364640/why-is-tomcat-looking-for-jaxb-jars-in-the-wrong-places), I think it may be of help.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QsIcR.png","title":"Why embedded Tomcat is trying to load com/sun/xml/bind/jaxb-core/2.3.0/jaxb-api.jar?","body":"<p>Tomcat is looking for <code>com/sun/xml/bind/jaxb-core/2.3.0/jaxb-api.jar</code> because <code>jaxb-api.jar</code> is referenced in the <code>Class-Path</code> manifest attribute in <code>jaxb-core</code> <code>2.3.0</code>:</p>\n<p><a href=\"https://i.stack.imgur.com/QsIcR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QsIcR.png\" alt=\"jaxb-core 2.3.0 MANIFEST.MF\" /></a></p>\n<p>Sorry, I am unable to tell you the reason why jaxb-core 2.3.0 is requested in first place: perhaps it is related to any Tomcat dependency. Please, consider review <a href=\"https://stackoverflow.com/questions/73364640/why-is-tomcat-looking-for-jaxb-jars-in-the-wrong-places\">this related SO question</a>, I think it may be of help.</p>\n"},{"tags":[],"owner":{"account_id":28989235,"reputation":5,"user_id":22205400,"display_name":"Duck"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1689834498,"creation_date":1689834498,"answer_id":76727218,"question_id":76511682,"body_markdown":"Try to update libraries and clen &amp; build","title":"Why embedded Tomcat is trying to load com/sun/xml/bind/jaxb-core/2.3.0/jaxb-api.jar?","body":"<p>Try to update libraries and clen &amp; build</p>\n"}],"owner":{"account_id":63162,"reputation":102381,"user_id":187141,"accept_rate":82,"display_name":"yegor256"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76708527,"answer_count":2,"score":2,"last_activity_date":1689834498,"creation_date":1687239808,"question_id":76511682,"body_markdown":"I&#39;m trying to start an embedded Tomcat 9.0.8:\r\n\r\n```\r\nTomcat tomcat = new Tomcat();\r\ntomcat.setPort(8080);\r\ntomcat.addWebapp(&quot;&quot;, &quot;/tmp/my-webapp&quot;);\r\ntomcat.start();\r\ntomcat.getServer().await();\r\n```\r\n\r\nI&#39;m getting:\r\n\r\n```\r\n[INFO] main co.stateful.Launch: Loading webapp from /tmp/my-webapp...\r\n[INFO] main org.apache.catalina.core.StandardService: Starting service [Tomcat]\r\n[INFO] main org.apache.catalina.core.StandardEngine: Starting Servlet Engine: Apache Tomcat/9.0.8\r\n[INFO] main org.apache.catalina.startup.ContextConfig: No global web.xml found\r\n[WARN] main org.apache.tomcat.util.scan.StandardJarScanner: Failed to scan [file:/Users/yb/.m2/repository/com/sun/xml/bind/jaxb-core/2.3.0/jaxb-api.jar] from classloader hierarchy\r\njava.io.IOException: java.lang.reflect.InvocationTargetException\r\n\tat org.apache.tomcat.util.compat.Jre9Compat.jarFileNewInstance(Jre9Compat.java:212)\r\n\tat org.apache.tomcat.util.scan.JarFileUrlJar.&lt;init&gt;(JarFileUrlJar.java:65)\r\n\tat org.apache.tomcat.util.scan.JarFactory.newInstance(JarFactory.java:49)\r\n\tat org.apache.tomcat.util.scan.StandardJarScanner.process(StandardJarScanner.java:374)\r\n\tat org.apache.tomcat.util.scan.StandardJarScanner.processURLs(StandardJarScanner.java:309)\r\n\tat org.apache.tomcat.util.scan.StandardJarScanner.doScanClassPath(StandardJarScanner.java:278)\r\n\tat org.apache.tomcat.util.scan.StandardJarScanner.scan(StandardJarScanner.java:229)\r\n\tat org.apache.catalina.startup.ContextConfig.processJarsForWebFragments(ContextConfig.java:1927)\r\n\tat org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1119)\r\n\tat org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:765)\r\n\tat org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:299)\r\n\tat org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\r\n\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4989)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1427)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1417)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)\r\n\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n\tat java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:943)\r\n\tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:839)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1427)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1417)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)\r\n\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n\tat java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:943)\r\n\tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:258)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:422)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:770)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.startup.Tomcat.start(Tomcat.java:371)\r\nCaused by: java.lang.reflect.InvocationTargetException\r\n\tat java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:79)\r\n\tat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)\r\n\tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:484)\r\n\tat org.apache.tomcat.util.compat.Jre9Compat.jarFileNewInstance(Jre9Compat.java:209)\r\n\t... 104 more\r\nCaused by: java.nio.file.NoSuchFileException: /Users/yb/.m2/repository/com/sun/xml/bind/jaxb-core/2.3.0/jaxb-api.jar\r\n\tat java.base/sun.nio.fs.UnixException.translateToIOException(UnixException.java:92)\r\n\tat java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:106)\r\n\tat java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:111)\r\n\tat java.base/sun.nio.fs.UnixFileAttributeViews$Basic.readAttributes(UnixFileAttributeViews.java:55)\r\n\tat java.base/sun.nio.fs.UnixFileSystemProvider.readAttributes(UnixFileSystemProvider.java:171)\r\n\tat java.base/java.nio.file.Files.readAttributes(Files.java:1848)\r\n\tat java.base/java.util.zip.ZipFile$Source.get(ZipFile.java:1285)\r\n\tat java.base/java.util.zip.ZipFile$CleanableResource.&lt;init&gt;(ZipFile.java:716)\r\n\tat java.base/java.util.zip.ZipFile.&lt;init&gt;(ZipFile.java:243)\r\n\tat java.base/java.util.zip.ZipFile.&lt;init&gt;(ZipFile.java:172)\r\n\tat java.base/java.util.jar.JarFile.&lt;init&gt;(JarFile.java:340)\r\n\tat java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:67)\r\n\t... 107 more\r\n```\r\n\r\nThe dependencies in my `pom.xml` are the following:\r\n\r\n```\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n      &lt;version&gt;2.2.11&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;\r\n      &lt;version&gt;2.2.11&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\r\n      &lt;version&gt;2.2.11&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n```\r\n\r\nI&#39;m curious, why it is looking for `com/sun/xml/bind/jaxb-core/2.3.0/jaxb-api.jar`, while the name is definitely against Maven conventions. It should be `com/sun/xml/bind/jaxb-core/2.3.0/jaxb-core.jar`, but not `jaxb-api`. Moreover, my version is `2.2.11`, while it is looking for `2.3.0`. Anyway, how can I fix?","title":"Why embedded Tomcat is trying to load com/sun/xml/bind/jaxb-core/2.3.0/jaxb-api.jar?","body":"<p>I'm trying to start an embedded Tomcat 9.0.8:</p>\n<pre><code>Tomcat tomcat = new Tomcat();\ntomcat.setPort(8080);\ntomcat.addWebapp(&quot;&quot;, &quot;/tmp/my-webapp&quot;);\ntomcat.start();\ntomcat.getServer().await();\n</code></pre>\n<p>I'm getting:</p>\n<pre><code>[INFO] main co.stateful.Launch: Loading webapp from /tmp/my-webapp...\n[INFO] main org.apache.catalina.core.StandardService: Starting service [Tomcat]\n[INFO] main org.apache.catalina.core.StandardEngine: Starting Servlet Engine: Apache Tomcat/9.0.8\n[INFO] main org.apache.catalina.startup.ContextConfig: No global web.xml found\n[WARN] main org.apache.tomcat.util.scan.StandardJarScanner: Failed to scan [file:/Users/yb/.m2/repository/com/sun/xml/bind/jaxb-core/2.3.0/jaxb-api.jar] from classloader hierarchy\njava.io.IOException: java.lang.reflect.InvocationTargetException\n    at org.apache.tomcat.util.compat.Jre9Compat.jarFileNewInstance(Jre9Compat.java:212)\n    at org.apache.tomcat.util.scan.JarFileUrlJar.&lt;init&gt;(JarFileUrlJar.java:65)\n    at org.apache.tomcat.util.scan.JarFactory.newInstance(JarFactory.java:49)\n    at org.apache.tomcat.util.scan.StandardJarScanner.process(StandardJarScanner.java:374)\n    at org.apache.tomcat.util.scan.StandardJarScanner.processURLs(StandardJarScanner.java:309)\n    at org.apache.tomcat.util.scan.StandardJarScanner.doScanClassPath(StandardJarScanner.java:278)\n    at org.apache.tomcat.util.scan.StandardJarScanner.scan(StandardJarScanner.java:229)\n    at org.apache.catalina.startup.ContextConfig.processJarsForWebFragments(ContextConfig.java:1927)\n    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1119)\n    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:765)\n    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:299)\n    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4989)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1427)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1417)\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n    at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:943)\n    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:839)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1427)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1417)\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n    at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:943)\n    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:258)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:422)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:770)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.startup.Tomcat.start(Tomcat.java:371)\nCaused by: java.lang.reflect.InvocationTargetException\n    at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:79)\n    at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:484)\n    at org.apache.tomcat.util.compat.Jre9Compat.jarFileNewInstance(Jre9Compat.java:209)\n    ... 104 more\nCaused by: java.nio.file.NoSuchFileException: /Users/yb/.m2/repository/com/sun/xml/bind/jaxb-core/2.3.0/jaxb-api.jar\n    at java.base/sun.nio.fs.UnixException.translateToIOException(UnixException.java:92)\n    at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:106)\n    at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:111)\n    at java.base/sun.nio.fs.UnixFileAttributeViews$Basic.readAttributes(UnixFileAttributeViews.java:55)\n    at java.base/sun.nio.fs.UnixFileSystemProvider.readAttributes(UnixFileSystemProvider.java:171)\n    at java.base/java.nio.file.Files.readAttributes(Files.java:1848)\n    at java.base/java.util.zip.ZipFile$Source.get(ZipFile.java:1285)\n    at java.base/java.util.zip.ZipFile$CleanableResource.&lt;init&gt;(ZipFile.java:716)\n    at java.base/java.util.zip.ZipFile.&lt;init&gt;(ZipFile.java:243)\n    at java.base/java.util.zip.ZipFile.&lt;init&gt;(ZipFile.java:172)\n    at java.base/java.util.jar.JarFile.&lt;init&gt;(JarFile.java:340)\n    at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:67)\n    ... 107 more\n</code></pre>\n<p>The dependencies in my <code>pom.xml</code> are the following:</p>\n<pre><code>    &lt;dependency&gt;\n      &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n      &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n      &lt;version&gt;2.2.11&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n      &lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;\n      &lt;version&gt;2.2.11&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n      &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\n      &lt;version&gt;2.2.11&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>I'm curious, why it is looking for <code>com/sun/xml/bind/jaxb-core/2.3.0/jaxb-api.jar</code>, while the name is definitely against Maven conventions. It should be <code>com/sun/xml/bind/jaxb-core/2.3.0/jaxb-core.jar</code>, but not <code>jaxb-api</code>. Moreover, my version is <code>2.2.11</code>, while it is looking for <code>2.3.0</code>. Anyway, how can I fix?</p>\n"},{"tags":["java","spring","spring-mvc","spring-aop"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1689836006,"post_id":76726624,"comment_id":135270202,"body_markdown":"Don&#39;t use AOP for this, instead use a servlet filter to wrap all the requests instead of this. There might be more things in the call stack that wrap your request (things like Spring Security for instance) so you would have to check if the request is a wrapper and keep unwrapping it to check if yours is in there. If you really want to use AOP for this (which I strongly recommend against) instead of calling `proceed()` you need to call `proceed(args)` to pass along the newly changed arguments, else it will continue with the original ones.","body":"Don&#39;t use AOP for this, instead use a servlet filter to wrap all the requests instead of this. There might be more things in the call stack that wrap your request (things like Spring Security for instance) so you would have to check if the request is a wrapper and keep unwrapping it to check if yours is in there. If you really want to use AOP for this (which I strongly recommend against) instead of calling <code>proceed()</code> you need to call <code>proceed(args)</code> to pass along the newly changed arguments, else it will continue with the original ones."}],"answers":[{"tags":[],"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689834426,"creation_date":1689828296,"answer_id":76726732,"question_id":76726624,"body_markdown":"I am afraid fiddling with request headers&#39; modification is not that easy. I am also afraid that aspect is not a way to go.\r\n\r\nHere is a minimal and reproducible sample for Spring Boot 2 to achieve what you want by setting a named `attribute` to the request in a custom interceptor that is captured in a method of the `@RestController`.\r\n\r\n**Interceptor**\r\n\r\n```java\r\n@Component\r\npublic class CustomInterceptor implements HandlerInterceptor {\r\n\r\n\t@Override\r\n\tpublic boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) {\r\n\t\trequest.setAttribute(&quot;fooAttribute&quot;, &quot;fooValue&quot;);\r\n\t\treturn true;\r\n\t}\r\n}\r\n```\r\n\r\n**Configuration**\r\n```java\r\n@Configuration\r\npublic class WebMvcConfiguration implements WebMvcConfigurer {\r\n\r\n\t@Autowired\r\n\tprivate CustomInterceptor customInterceptor;\r\n\r\n\t@Override\r\n\tpublic void addInterceptors(InterceptorRegistry registry) {\r\n\t\t\tregistry.addInterceptor(customInterceptor);\r\n\t}\r\n}\r\n```\r\n\r\n**Controller**\r\n\r\nI let the attribute be returned in the body. \r\n```java\r\n@GetMapping(&quot;hello&quot;)\r\npublic ResponseEntity&lt;String&gt; hello(@RequestAttribute String fooAttribute) {\r\n\treturn ResponseEntity.ok(fooAttribute);\r\n}\r\n```\r\n\r\n______\r\n\r\nTest it out:\r\n```shell\r\ncurl http://localhost:8080/hello\r\n```\r\n&gt; ```\r\n&gt; fooValue\r\n&gt; ```\r\n","title":"How to add my custom header to a HttpServletRequest with aspect?","body":"<p>I am afraid fiddling with request headers' modification is not that easy. I am also afraid that aspect is not a way to go.</p>\n<p>Here is a minimal and reproducible sample for Spring Boot 2 to achieve what you want by setting a named <code>attribute</code> to the request in a custom interceptor that is captured in a method of the <code>@RestController</code>.</p>\n<p><strong>Interceptor</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class CustomInterceptor implements HandlerInterceptor {\n\n    @Override\n    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) {\n        request.setAttribute(&quot;fooAttribute&quot;, &quot;fooValue&quot;);\n        return true;\n    }\n}\n</code></pre>\n<p><strong>Configuration</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class WebMvcConfiguration implements WebMvcConfigurer {\n\n    @Autowired\n    private CustomInterceptor customInterceptor;\n\n    @Override\n    public void addInterceptors(InterceptorRegistry registry) {\n            registry.addInterceptor(customInterceptor);\n    }\n}\n</code></pre>\n<p><strong>Controller</strong></p>\n<p>I let the attribute be returned in the body.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(&quot;hello&quot;)\npublic ResponseEntity&lt;String&gt; hello(@RequestAttribute String fooAttribute) {\n    return ResponseEntity.ok(fooAttribute);\n}\n</code></pre>\n<hr />\n<p>Test it out:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>curl http://localhost:8080/hello\n</code></pre>\n<blockquote>\n<pre><code>fooValue\n</code></pre>\n</blockquote>\n"}],"owner":{"account_id":28174375,"reputation":13,"user_id":21532369,"display_name":"patrickstar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":219,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76726732,"answer_count":1,"score":1,"last_activity_date":1689834426,"creation_date":1689826279,"question_id":76726624,"body_markdown":"I tried to create an aspect to override the \r\n`HttpServletRequest`\r\nparameter before the controller handler method actually gets executed. But it turns out the `HttpServletRequest` is always a `RequestFacade` instance even though I replace it with a Custom `HttpServletRequestWrapper` in my aspect method.\r\n\r\nHere is the code:\r\n\r\n\r\n```\r\n// the annotation:\r\n\r\n@Target({ElementType.METHOD})\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Documented\r\npublic @interface MyAnnotation {\r\n}\r\n\r\n// the aspect:\r\n@Component\r\n@Aspect\r\n@Slf4j\r\npublic class MyAspect {\r\n    @Pointcut(&quot;@annotation(com.example.springtest.annotation.MyAnnotation)&quot;)\r\n    public void pointcut() {\r\n    }\r\n\r\n    @Around(&quot;pointcut()&quot;)\r\n    public Object setHeader(ProceedingJoinPoint pjp) throws Throwable {\r\n        var args = pjp.getArgs();\r\n        var signature = (MethodSignature) pjp.getSignature();\r\n        var method = signature.getMethod();\r\n        var annotations = method.getDeclaredAnnotations();\r\n        var need = Arrays.stream(annotations).anyMatch(a -&gt; a.annotationType().equals(MyAnnotation.class));\r\n        if (!need) {\r\n            return pjp.proceed();\r\n        }\r\n\r\n        for (var i = 0; i &lt; args.length; i++) {\r\n            var arg = args[i];\r\n            if (arg instanceof HttpServletRequest request) {\r\n                args[i] = new HttpServletRequestWrapper(request) {\r\n                    @Override\r\n                    public String getHeader(String name) {\r\n                        if (name.equalsIgnoreCase(&quot;my-header&quot;)) {\r\n                            return &quot;my-header&quot;;\r\n                        } else {\r\n                            return super.getHeader(name);\r\n                        }\r\n                    }\r\n                };\r\n            }\r\n        }\r\n        return pjp.proceed();\r\n    }\r\n\r\n}\r\n\r\n// the bootstrap class:\r\n@Configurable\r\n@EnableAspectJAutoProxy\r\n@SpringBootApplication\r\npublic class SpringtestApplication {\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(SpringtestApplication.class, args);\r\n    }\r\n\r\n}\r\n\r\n// and the controller\r\n@RestController\r\npublic class TestController {\r\n\r\n    private static final Logger log = LoggerFactory.getLogger(TestController.class);\r\n\r\n    @MyAnnotation\r\n    @GetMapping(&quot;/get-my-header&quot;)\r\n    public String getMyHeader(HttpServletRequest request) {\r\n        if (Objects.requireNonNull(request) instanceof HttpServletRequestWrapper) {\r\n            log.info(&quot;is wrapper&quot;);\r\n        } else {\r\n            log.info(&quot;request:{}&quot;, request.getClass());\r\n        }\r\n        return request.getHeader(&quot;my-header&quot;);\r\n    }\r\n}\r\n```\r\n\r\nSo what happend there? Is there any other proxy class instance change my `HttpServletRequest` parameter after I replaced it?\r\n\r\n\r\nthe logs show that the request parameter in both the aspect and the controller is a `RequestFacade` instance. \r\n\r\nI also tried to create a service method and directly send my custom `HttpServletRequestWrapper` instance to it. This time the parameter is not changed.","title":"How to add my custom header to a HttpServletRequest with aspect?","body":"<p>I tried to create an aspect to override the\n<code>HttpServletRequest</code>\nparameter before the controller handler method actually gets executed. But it turns out the <code>HttpServletRequest</code> is always a <code>RequestFacade</code> instance even though I replace it with a Custom <code>HttpServletRequestWrapper</code> in my aspect method.</p>\n<p>Here is the code:</p>\n<pre><code>// the annotation:\n\n@Target({ElementType.METHOD})\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\npublic @interface MyAnnotation {\n}\n\n// the aspect:\n@Component\n@Aspect\n@Slf4j\npublic class MyAspect {\n    @Pointcut(&quot;@annotation(com.example.springtest.annotation.MyAnnotation)&quot;)\n    public void pointcut() {\n    }\n\n    @Around(&quot;pointcut()&quot;)\n    public Object setHeader(ProceedingJoinPoint pjp) throws Throwable {\n        var args = pjp.getArgs();\n        var signature = (MethodSignature) pjp.getSignature();\n        var method = signature.getMethod();\n        var annotations = method.getDeclaredAnnotations();\n        var need = Arrays.stream(annotations).anyMatch(a -&gt; a.annotationType().equals(MyAnnotation.class));\n        if (!need) {\n            return pjp.proceed();\n        }\n\n        for (var i = 0; i &lt; args.length; i++) {\n            var arg = args[i];\n            if (arg instanceof HttpServletRequest request) {\n                args[i] = new HttpServletRequestWrapper(request) {\n                    @Override\n                    public String getHeader(String name) {\n                        if (name.equalsIgnoreCase(&quot;my-header&quot;)) {\n                            return &quot;my-header&quot;;\n                        } else {\n                            return super.getHeader(name);\n                        }\n                    }\n                };\n            }\n        }\n        return pjp.proceed();\n    }\n\n}\n\n// the bootstrap class:\n@Configurable\n@EnableAspectJAutoProxy\n@SpringBootApplication\npublic class SpringtestApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(SpringtestApplication.class, args);\n    }\n\n}\n\n// and the controller\n@RestController\npublic class TestController {\n\n    private static final Logger log = LoggerFactory.getLogger(TestController.class);\n\n    @MyAnnotation\n    @GetMapping(&quot;/get-my-header&quot;)\n    public String getMyHeader(HttpServletRequest request) {\n        if (Objects.requireNonNull(request) instanceof HttpServletRequestWrapper) {\n            log.info(&quot;is wrapper&quot;);\n        } else {\n            log.info(&quot;request:{}&quot;, request.getClass());\n        }\n        return request.getHeader(&quot;my-header&quot;);\n    }\n}\n</code></pre>\n<p>So what happend there? Is there any other proxy class instance change my <code>HttpServletRequest</code> parameter after I replaced it?</p>\n<p>the logs show that the request parameter in both the aspect and the controller is a <code>RequestFacade</code> instance.</p>\n<p>I also tried to create a service method and directly send my custom <code>HttpServletRequestWrapper</code> instance to it. This time the parameter is not changed.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1689773188,"post_id":76721301,"comment_id":135260773,"body_markdown":"Why do you think that _expectedReference == current.reference always false_?","body":"Why do you think that <i>expectedReference == current.reference always false</i>?"},{"owner":{"account_id":15165703,"reputation":1,"user_id":10943261,"display_name":"Jun Qiu"},"score":0,"creation_date":1689818428,"post_id":76721301,"comment_id":135268436,"body_markdown":"there is some problem with my explanation，as in my example above，Counter  initialValue &gt;= 128 or  initialValue  type is Sting","body":"there is some problem with my explanation，as in my example above，Counter  initialValue &gt;= 128 or  initialValue  type is Sting"},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1689833727,"post_id":76721301,"comment_id":135269802,"body_markdown":"Ah, know I see your problem. If posted an answer with the solution to your problem.","body":"Ah, know I see your problem. If posted an answer with the solution to your problem."}],"answers":[{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689834382,"creation_date":1689833695,"answer_id":76727134,"question_id":76721301,"body_markdown":"The problem is that your `Counter` class does automatic unboxing of the stored value. You need to declare it as:\r\n\r\n    class Counter {\r\n        private final AtomicStampedReference&lt;Integer&gt; value;\r\n    \r\n        public Counter(int initialValue) {\r\n            value = new AtomicStampedReference&lt;&gt;(initialValue, 1000);\r\n        }\r\n    \r\n        public int getValue() {\r\n            return value.getReference();\r\n        }\r\n    \r\n        public int increment() {\r\n            int[] stampHolder = new int[1];\r\n            Integer current;\r\n            int next;\r\n            do {\r\n                current = value.get(stampHolder);\r\n                next = current + 1;\r\n            } while (!value.compareAndSet(current, next, stampHolder[0], stampHolder[0] + 1));\r\n    \r\n            return next;\r\n        }\r\n    }\r\n\r\nWhen declaring `Integer current` in the `increment()` method the `current` variable can hold a reference to the `Integer` object stored in the `AtomicStampedReference&lt;Integer&gt;` and therefore the `expectedReference == current.reference` condition can be true.\r\n\r\n---\r\nAs you have noticed, with\r\n\r\n            int[] stampHolder = new int[1];\r\n            int current;\r\n            int next;\r\n            do {\r\n                current = value.get(stampHolder);\r\n                next = current + 1;\r\n            } while (!value.compareAndSet(current, next, stampHolder[0], stampHolder[0] + 1));\r\n\r\nthe line `current = value.get(stampHolder);` will unbox the `Integer` value in the `AtomicStampedReference&lt;&gt;` and for int values &gt;= 128 the boxing of `current` in the call `value.compareAndSet(current, next, stampHolder[0], stampHolder[0] + 1))` will create a new `Integer`.\r\n\r\nHowever, with\r\n\r\n            int[] stampHolder = new int[1];\r\n            Integer current;\r\n            int next;\r\n            do {\r\n                current = value.get(stampHolder);\r\n                next = current + 1;\r\n            } while (!value.compareAndSet(current, next, stampHolder[0], stampHolder[0] + 1));\r\n\r\nthe line `current = value.get(stampHolder)` will just read the reference to the `Integer` value stored in the `AtomicStampedReference&lt;&gt;` and `value.compareAndSet(current, next, stampHolder[0], stampHolder[0] + 1))` will pass **that same** reference as first argument in the call and therefore the condition `expectedReference == current.reference` is true (assuming that no other thread changed the value)","title":"some qestions with AtomicStampedReference","body":"<p>The problem is that your <code>Counter</code> class does automatic unboxing of the stored value. You need to declare it as:</p>\n<pre><code>class Counter {\n    private final AtomicStampedReference&lt;Integer&gt; value;\n\n    public Counter(int initialValue) {\n        value = new AtomicStampedReference&lt;&gt;(initialValue, 1000);\n    }\n\n    public int getValue() {\n        return value.getReference();\n    }\n\n    public int increment() {\n        int[] stampHolder = new int[1];\n        Integer current;\n        int next;\n        do {\n            current = value.get(stampHolder);\n            next = current + 1;\n        } while (!value.compareAndSet(current, next, stampHolder[0], stampHolder[0] + 1));\n\n        return next;\n    }\n}\n</code></pre>\n<p>When declaring <code>Integer current</code> in the <code>increment()</code> method the <code>current</code> variable can hold a reference to the <code>Integer</code> object stored in the <code>AtomicStampedReference&lt;Integer&gt;</code> and therefore the <code>expectedReference == current.reference</code> condition can be true.</p>\n<hr />\n<p>As you have noticed, with</p>\n<pre><code>        int[] stampHolder = new int[1];\n        int current;\n        int next;\n        do {\n            current = value.get(stampHolder);\n            next = current + 1;\n        } while (!value.compareAndSet(current, next, stampHolder[0], stampHolder[0] + 1));\n</code></pre>\n<p>the line <code>current = value.get(stampHolder);</code> will unbox the <code>Integer</code> value in the <code>AtomicStampedReference&lt;&gt;</code> and for int values &gt;= 128 the boxing of <code>current</code> in the call <code>value.compareAndSet(current, next, stampHolder[0], stampHolder[0] + 1))</code> will create a new <code>Integer</code>.</p>\n<p>However, with</p>\n<pre><code>        int[] stampHolder = new int[1];\n        Integer current;\n        int next;\n        do {\n            current = value.get(stampHolder);\n            next = current + 1;\n        } while (!value.compareAndSet(current, next, stampHolder[0], stampHolder[0] + 1));\n</code></pre>\n<p>the line <code>current = value.get(stampHolder)</code> will just read the reference to the <code>Integer</code> value stored in the <code>AtomicStampedReference&lt;&gt;</code> and <code>value.compareAndSet(current, next, stampHolder[0], stampHolder[0] + 1))</code> will pass <strong>that same</strong> reference as first argument in the call and therefore the condition <code>expectedReference == current.reference</code> is true (assuming that no other thread changed the value)</p>\n"}],"owner":{"account_id":15165703,"reputation":1,"user_id":10943261,"display_name":"Jun Qiu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689834382,"creation_date":1689769776,"question_id":76721301,"body_markdown":"there is a exampe:\r\n\r\nI want use AtomicStampedReference, but there are some questions I don&#39;t understand about compareAndSet() method\r\n\r\n```\r\n    public boolean compareAndSet(V   expectedReference,\r\n                                 V   newReference,\r\n                                 int expectedStamp,\r\n                                 int newStamp) {\r\n        Pair&lt;V&gt; current = pair;\r\n        return\r\n            expectedReference == current.reference &amp;&amp;\r\n            expectedStamp == current.stamp &amp;&amp;\r\n            ((newReference == current.reference &amp;&amp;\r\n              newStamp == current.stamp) ||\r\n             casPair(current, Pair.of(newReference, newStamp)));\r\n    }\r\n```\r\nexpectedReference == current.reference always false，Because it compares references。\r\n**so why AtomicStampedReference can fix ABA problem？** thanks\r\n\r\n```\r\nclass Counter {\r\n    private final AtomicStampedReference&lt;Integer&gt; value;\r\n\r\n    public Counter(int initialValue) {\r\n        value = new AtomicStampedReference&lt;&gt;(initialValue, 1000);\r\n    }\r\n\r\n    public int getValue() {\r\n        return value.getReference();\r\n    }\r\n\r\n    public int increment() {\r\n        int[] stampHolder = new int[1];\r\n        int current;\r\n        int next;\r\n        do {\r\n            current = value.get(stampHolder);\r\n            next = current + 1;\r\n        } while (!value.compareAndSet(current, next, stampHolder[0], stampHolder[0] + 1));\r\n\r\n        return next;\r\n    }\r\n}\r\n```\r\n","title":"some qestions with AtomicStampedReference","body":"<p>there is a exampe:</p>\n<p>I want use AtomicStampedReference, but there are some questions I don't understand about compareAndSet() method</p>\n<pre><code>    public boolean compareAndSet(V   expectedReference,\n                                 V   newReference,\n                                 int expectedStamp,\n                                 int newStamp) {\n        Pair&lt;V&gt; current = pair;\n        return\n            expectedReference == current.reference &amp;&amp;\n            expectedStamp == current.stamp &amp;&amp;\n            ((newReference == current.reference &amp;&amp;\n              newStamp == current.stamp) ||\n             casPair(current, Pair.of(newReference, newStamp)));\n    }\n</code></pre>\n<p>expectedReference == current.reference always false，Because it compares references。\n<strong>so why AtomicStampedReference can fix ABA problem？</strong> thanks</p>\n<pre><code>class Counter {\n    private final AtomicStampedReference&lt;Integer&gt; value;\n\n    public Counter(int initialValue) {\n        value = new AtomicStampedReference&lt;&gt;(initialValue, 1000);\n    }\n\n    public int getValue() {\n        return value.getReference();\n    }\n\n    public int increment() {\n        int[] stampHolder = new int[1];\n        int current;\n        int next;\n        do {\n            current = value.get(stampHolder);\n            next = current + 1;\n        } while (!value.compareAndSet(current, next, stampHolder[0], stampHolder[0] + 1));\n\n        return next;\n    }\n}\n</code></pre>\n"},{"tags":["java","guava"],"comments":[{"owner":{"account_id":383107,"reputation":50638,"user_id":738746,"accept_rate":97,"display_name":"Bhesh Gurung"},"score":1,"creation_date":1344540600,"post_id":11890585,"comment_id":15824621,"body_markdown":"Are you always going to add just 1 element? Because if you add more then it will have commas and spaces. e.g. `[Hello, World]`. What are you actually trying to achieve?","body":"Are you always going to add just 1 element? Because if you add more then it will have commas and spaces. e.g. <code>[Hello, World]</code>. What are you actually trying to achieve?"},{"owner":{"account_id":1015001,"reputation":7764,"user_id":1026764,"accept_rate":72,"display_name":"noMAD"},"score":0,"creation_date":1344540770,"post_id":11890585,"comment_id":15824696,"body_markdown":"@BheshGurung: Well, I can take care of the commas, but the brackets are my concern.","body":"@BheshGurung: Well, I can take care of the commas, but the brackets are my concern."},{"owner":{"account_id":383107,"reputation":50638,"user_id":738746,"accept_rate":97,"display_name":"Bhesh Gurung"},"score":0,"creation_date":1344540904,"post_id":11890585,"comment_id":15824748,"body_markdown":"Thre `replace(oldChar, newChar)` might be useful - http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace(char, char)","body":"Thre <code>replace(oldChar, newChar)</code> might be useful - <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace(char\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/6/docs/api/java/lang/&hellip;</a>, char)"},{"owner":{"account_id":1015001,"reputation":7764,"user_id":1026764,"accept_rate":72,"display_name":"noMAD"},"score":0,"creation_date":1344540938,"post_id":11890585,"comment_id":15824759,"body_markdown":"@veer: What you said will give me true for `&quot;OOOOO&quot;` too.","body":"@veer: What you said will give me true for <code>&quot;OOOOO&quot;</code> too."},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":3,"creation_date":1344541179,"post_id":11890585,"comment_id":15824852,"body_markdown":"What are you trying to achieve? Because I think you are going the wrong way.","body":"What are you trying to achieve? Because I think you are going the wrong way."},{"owner":{"account_id":290123,"reputation":29330,"user_id":591495,"display_name":"obataku"},"score":0,"creation_date":1344541192,"post_id":11890585,"comment_id":15824855,"body_markdown":"@noMAD what do you mean? It checks to see if the entire map size is solely due to `&quot;Hello&quot;` and is non-empty, which implies `map.keys().toString()` equals `&quot;[Hello]&quot;`.","body":"@noMAD what do you mean? It checks to see if the entire map size is solely due to <code>&quot;Hello&quot;</code> and is non-empty, which implies <code>map.keys().toString()</code> equals <code>&quot;[Hello]&quot;</code>."},{"owner":{"account_id":1015001,"reputation":7764,"user_id":1026764,"accept_rate":72,"display_name":"noMAD"},"score":0,"creation_date":1344541378,"post_id":11890585,"comment_id":15824917,"body_markdown":"@MarkRotteveel: My basic goal was to compare the objects in the map to other objects and see if they are the same. I just gave an example above. Am writing a test case where I want to `assertEquals(map.keys(),MyObject)`","body":"@MarkRotteveel: My basic goal was to compare the objects in the map to other objects and see if they are the same. I just gave an example above. Am writing a test case where I want to <code>assertEquals(map.keys(),MyObject)</code>"},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1344541466,"post_id":11890585,"comment_id":15824960,"body_markdown":"Please realise that keys() returns a Set, if you want to check equality, then MyObject needs to be a Set as well containing the key or keys.","body":"Please realise that keys() returns a Set, if you want to check equality, then MyObject needs to be a Set as well containing the key or keys."},{"owner":{"account_id":290123,"reputation":29330,"user_id":591495,"display_name":"obataku"},"score":1,"creation_date":1344541552,"post_id":11890585,"comment_id":15825000,"body_markdown":"@MarkRotteveel actually `keys` returns a `Multiset`, which specifies that [`equals` will only be true when compared to other `Multiset`s with the same frequency per element](http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Multiset.html#equals(java.lang.Object)).","body":"@MarkRotteveel actually <code>keys</code> returns a <code>Multiset</code>, which specifies that <a href=\"http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Multiset.html#equals(java.lang.Object)\" rel=\"nofollow noreferrer\"><code>equals</code> will only be true when compared to other <code>Multiset</code>s with the same frequency per element</a>."},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1344541617,"post_id":11890585,"comment_id":15825028,"body_markdown":"@veer You are right, I was thinking of keySet() from a normal Map.","body":"@veer You are right, I was thinking of keySet() from a normal Map."}],"answers":[{"tags":[],"owner":{"account_id":557295,"reputation":1929,"user_id":919674,"display_name":"Sign"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1344541437,"creation_date":1344541104,"answer_id":11890727,"question_id":11890585,"body_markdown":"You could replace the brackets in the string, or you could iterate through the key set and print each component individually. \r\n\r\n     ImmutableMultiset&lt;Something&gt; keys = map.keys();\r\n     for(Something key : keys){\r\n        System.out.print(key);\r\n     }\r\n\r\n\r\n\r\nFor your conditionals you would want \r\n\r\n    if(map.keys().contains(&quot;Hello&quot;))","title":"Is it possible to remove square brackets from ImmutableMultimap.keys()","body":"<p>You could replace the brackets in the string, or you could iterate through the key set and print each component individually. </p>\n\n<pre><code> ImmutableMultiset&lt;Something&gt; keys = map.keys();\n for(Something key : keys){\n    System.out.print(key);\n }\n</code></pre>\n\n<p>For your conditionals you would want </p>\n\n<pre><code>if(map.keys().contains(\"Hello\"))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1587167,"reputation":2135,"user_id":1471231,"accept_rate":80,"display_name":"olagjo"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1344541508,"creation_date":1344541508,"answer_id":11890830,"question_id":11890585,"body_markdown":"    map.keys().toString().replaceAll(&quot;[\\\\[\\\\],]&quot;,&quot;&quot;)\r\n\r\nreturns the string, all square brackets and commas removed","title":"Is it possible to remove square brackets from ImmutableMultimap.keys()","body":"<pre><code>map.keys().toString().replaceAll(\"[\\\\[\\\\],]\",\"\")\n</code></pre>\n\n<p>returns the string, all square brackets and commas removed</p>\n"},{"tags":[],"owner":{"account_id":283609,"reputation":45044,"user_id":581205,"accept_rate":72,"display_name":"maaartinus"},"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1344541516,"creation_date":1344541516,"answer_id":11890831,"question_id":11890585,"body_markdown":"You should never ever use `toString()` for anything serious! This method is meant for people inspecting what&#39;s going on (e.g. in debugger) and for nothing else.\r\n\r\nMoreover, there are no brackets there in. `map.keys()` is a collection and it&#39;s `toString()` method works like it should for collections. You&#39;d better replace your test by testing `map.keys.size() == 1` and then checking the only element.\r\n","title":"Is it possible to remove square brackets from ImmutableMultimap.keys()","body":"<p>You should never ever use <code>toString()</code> for anything serious! This method is meant for people inspecting what's going on (e.g. in debugger) and for nothing else.</p>\n\n<p>Moreover, there are no brackets there in. <code>map.keys()</code> is a collection and it's <code>toString()</code> method works like it should for collections. You'd better replace your test by testing <code>map.keys.size() == 1</code> and then checking the only element.</p>\n"},{"tags":[],"owner":{"account_id":116301,"reputation":2832,"user_id":305009,"display_name":"Sean Parsons"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1344551317,"creation_date":1344551317,"answer_id":11892912,"question_id":11890585,"body_markdown":"If you&#39;re checking for equality like in a test you should really be doing this instead:\r\n\r\n    System.out.println(ImmutableMultiSet.of(&quot;Hello&quot;).equals(map.keys()))\r\n\r\nSince ImmutableMultiSet has a correct implementation of .equals, that should deal with all the possible cases there besides map being null.\r\n\r\n----------\r\n\r\nIf you want a String containing all the elements in it then use Joiner instead:\r\n\r\n    System.out.println(Joiner.on(&quot;,&quot;).join(map.keys()))\r\n\r\nThere&#39;s a lot more options on Joiner for the various ways it can format the collection.","title":"Is it possible to remove square brackets from ImmutableMultimap.keys()","body":"<p>If you're checking for equality like in a test you should really be doing this instead:</p>\n\n<pre><code>System.out.println(ImmutableMultiSet.of(\"Hello\").equals(map.keys()))\n</code></pre>\n\n<p>Since ImmutableMultiSet has a correct implementation of .equals, that should deal with all the possible cases there besides map being null.</p>\n\n<hr>\n\n<p>If you want a String containing all the elements in it then use Joiner instead:</p>\n\n<pre><code>System.out.println(Joiner.on(\",\").join(map.keys()))\n</code></pre>\n\n<p>There's a lot more options on Joiner for the various ways it can format the collection.</p>\n"},{"tags":[],"owner":{"account_id":16508504,"reputation":19,"user_id":11927931,"display_name":"Buford T Justice"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658161874,"creation_date":1658161874,"answer_id":73025662,"question_id":11890585,"body_markdown":"This is the answer if you only want the first element\r\n\r\nmap.keys()[0]","title":"Is it possible to remove square brackets from ImmutableMultimap.keys()","body":"<p>This is the answer if you only want the first element</p>\n<p>map.keys()[0]</p>\n"},{"tags":[],"owner":{"account_id":3004010,"reputation":514,"user_id":2548883,"accept_rate":65,"display_name":"asela daskon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689834235,"creation_date":1689832758,"answer_id":76727052,"question_id":11890585,"body_markdown":"I know this question was asked a very long time ago but someone would help with this answer. So try this out !\r\n\r\n    map.keys(item =&gt; item)[0]","title":"Is it possible to remove square brackets from ImmutableMultimap.keys()","body":"<p>I know this question was asked a very long time ago but someone would help with this answer. So try this out !</p>\n<pre><code>map.keys(item =&gt; item)[0]\n</code></pre>\n"}],"owner":{"account_id":1015001,"reputation":7764,"user_id":1026764,"accept_rate":72,"display_name":"noMAD"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8202,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":11890831,"answer_count":6,"score":1,"last_activity_date":1689834235,"creation_date":1344540454,"question_id":11890585,"body_markdown":"While performing the following:\r\n\r\n    ImmutableMultimap&lt;Something, Something&gt; map;\r\n    //Say I insert &quot;Hello&quot;, &quot;5&quot; to the map\r\n    System.out.println(map.keys().toString());\r\nThis prints `[Hello]` So when I do\r\n\r\n    if(map.keys().toString().equals(&quot;Hello&quot;))\r\n\r\nit always fails. I don&#39;t want to do\r\n\r\n    if(map.keys().toString.equals(&quot;[Hello]&quot;)\r\nIs there a way to display the result without the square brackets? \r\n\r\n","title":"Is it possible to remove square brackets from ImmutableMultimap.keys()","body":"<p>While performing the following:</p>\n\n<pre><code>ImmutableMultimap&lt;Something, Something&gt; map;\n//Say I insert \"Hello\", \"5\" to the map\nSystem.out.println(map.keys().toString());\n</code></pre>\n\n<p>This prints <code>[Hello]</code> So when I do</p>\n\n<pre><code>if(map.keys().toString().equals(\"Hello\"))\n</code></pre>\n\n<p>it always fails. I don't want to do</p>\n\n<pre><code>if(map.keys().toString.equals(\"[Hello]\")\n</code></pre>\n\n<p>Is there a way to display the result without the square brackets? </p>\n"},{"tags":["java","apache-poi"],"comments":[{"owner":{"account_id":7253257,"reputation":3765,"user_id":5532778,"accept_rate":81,"display_name":"PKey"},"score":1,"creation_date":1689834987,"post_id":76727165,"comment_id":135270005,"body_markdown":"I don&#39;t think so. Take a look here: https://coderanch.com/t/630220/java/read-page-DOC-file","body":"I don&#39;t think so. Take a look here: <a href=\"https://coderanch.com/t/630220/java/read-page-DOC-file\" rel=\"nofollow noreferrer\">coderanch.com/t/630220/java/read-page-DOC-file</a>"},{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":1,"creation_date":1689842329,"post_id":76727165,"comment_id":135271490,"body_markdown":"Use Word to turn it into a PDF, then read that? Word documents don&#39;t store page information...","body":"Use Word to turn it into a PDF, then read that? Word documents don&#39;t store page information..."}],"owner":{"account_id":28967622,"reputation":5,"user_id":22188644,"display_name":"Code Trickle"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689834004,"creation_date":1689834004,"question_id":76727165,"body_markdown":"Is it possible to read a word document in apache poi using pagination? For eg: Can i read first 3 pages of a 5 page document and extract contents from the first 3 pages.","title":"Reading a word doc in apache poi based on pages","body":"<p>Is it possible to read a word document in apache poi using pagination? For eg: Can i read first 3 pages of a 5 page document and extract contents from the first 3 pages.</p>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":11393428,"reputation":115,"user_id":8352632,"display_name":"karan"},"score":0,"creation_date":1689183454,"post_id":76668921,"comment_id":135178726,"body_markdown":"some issue im facing","body":"some issue im facing"}],"answers":[{"tags":[],"owner":{"account_id":29054340,"reputation":1,"user_id":22256424,"display_name":"Giovanni Stoto"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689833622,"creation_date":1689833622,"answer_id":76727125,"question_id":76668921,"body_markdown":"I am not a developer but found this thread while searching Google for a similar problem I am having as user. It seems that as of versione v108 of Google Phone app (regardless of the device: I have tested on Xiaomi and Pixel) a bug must have been introduced for SIM selection in case of DUAl SIM and &quot;Ask First&quot; is set in the options. But as a user this happens only if I use Google Assistant to place a call saying &quot;Het Google call xyz&quot;, if instad I use dialer or contact app, all works fine. I have this issue also if I search for a business activity on Google and I click on the dialer icon. reverting back to v107 solves the problem.","title":"Getting call SIM options disabled in ACTION_CALL","body":"<p>I am not a developer but found this thread while searching Google for a similar problem I am having as user. It seems that as of versione v108 of Google Phone app (regardless of the device: I have tested on Xiaomi and Pixel) a bug must have been introduced for SIM selection in case of DUAl SIM and &quot;Ask First&quot; is set in the options. But as a user this happens only if I use Google Assistant to place a call saying &quot;Het Google call xyz&quot;, if instad I use dialer or contact app, all works fine. I have this issue also if I search for a business activity on Google and I click on the dialer icon. reverting back to v107 solves the problem.</p>\n"}],"owner":{"account_id":1931992,"reputation":4921,"user_id":1741203,"accept_rate":57,"display_name":"Rajeev Kumar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":180,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1689833622,"creation_date":1689153096,"question_id":76668921,"body_markdown":"I have been using ACTION_CALL in my app to direct call a number without opening dialpad with Phone Permission. \r\n\r\nIt working fine in general but in some devices with dual SIM and call settings set for Always Ask causing issue.\r\n\r\nIn some device when we open ACTION_CALL intent,it opens the dialog for user to choose which SIM to be use for call. In some cases, both this options are disabled as shown in image. We are using following code \r\n\r\n        private void openCallIntent(String number, boolean needCountryCode) {\r\n        try {\r\n            Intent callIntent = new Intent(Intent.ACTION_CALL);\r\n            if(needCountryCode) {\r\n                callIntent.setData(Uri.parse(&quot;tel:&quot; + &quot;+&quot; + number));\r\n            }else{\r\n                callIntent.setData(Uri.parse(&quot;tel:&quot; + number));\r\n            }\r\n            startActivity(callIntent);\r\n        } catch (ActivityNotFoundException activityException) {\r\n            //Log.e(&quot;Calling a Phone Number&quot;, &quot;Call failed&quot;, activityException);\r\n        }\r\n    }\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LELDe.png","title":"Getting call SIM options disabled in ACTION_CALL","body":"<p>I have been using ACTION_CALL in my app to direct call a number without opening dialpad with Phone Permission.</p>\n<p>It working fine in general but in some devices with dual SIM and call settings set for Always Ask causing issue.</p>\n<p>In some device when we open ACTION_CALL intent,it opens the dialog for user to choose which SIM to be use for call. In some cases, both this options are disabled as shown in image. We are using following code</p>\n<pre><code>    private void openCallIntent(String number, boolean needCountryCode) {\n    try {\n        Intent callIntent = new Intent(Intent.ACTION_CALL);\n        if(needCountryCode) {\n            callIntent.setData(Uri.parse(&quot;tel:&quot; + &quot;+&quot; + number));\n        }else{\n            callIntent.setData(Uri.parse(&quot;tel:&quot; + number));\n        }\n        startActivity(callIntent);\n    } catch (ActivityNotFoundException activityException) {\n        //Log.e(&quot;Calling a Phone Number&quot;, &quot;Call failed&quot;, activityException);\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/LELDe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LELDe.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","android","class","jar"],"comments":[{"owner":{"account_id":2464285,"reputation":1,"user_id":2147737,"display_name":"oldcwj"},"score":0,"creation_date":1689820772,"post_id":76726296,"comment_id":135268633,"body_markdown":"I found an app on Google Play called &quot;Java Runtime Environment&quot; that can run .class files and .jar files.","body":"I found an app on Google Play called &quot;Java Runtime Environment&quot; that can run .class files and .jar files."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1689824585,"post_id":76726296,"comment_id":135268914,"body_markdown":"This will explain all the tools normally used (usually one uses an IDE - Integrated Development Environment): https://developer.android.com/build/building-cmdline","body":"This will explain all the tools normally used (usually one uses an IDE - Integrated Development Environment): <a href=\"https://developer.android.com/build/building-cmdline\" rel=\"nofollow noreferrer\">developer.android.com/build/building-cmdline</a>"}],"answers":[{"tags":[],"owner":{"account_id":21700457,"reputation":11,"user_id":16013706,"display_name":"Randika Geekiyanage"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689833404,"creation_date":1689833404,"answer_id":76727110,"question_id":76726296,"body_markdown":"First you have to convert .class file to .dex format as android uses a different byte code format.\r\nYou can find more about it [here.][1]\r\n\r\nI assume you already have an android project created.\r\nYou can then include the .dex file in your project.\r\nFinally, you can load and execute the file as you need.\r\n\r\nIn case you need similar approach for loading .dex files you can find that [here.][2]\r\n\r\nFollowing is an example code which might help you to figure it out.\r\n\r\n    import dalvik.system.DexClassLoader;\r\n\r\n    public class DynamicClassRunner {\r\n      \r\n      public static void runDexFile() {\r\n            try {\r\n                // Get the path to the .dex file (place it in the &quot;assets&quot; folder)\r\n                String dexPath = context.getFilesDir().getAbsolutePath() + &quot;/myjavafile.dex&quot;;\r\n                \r\n            // Get the application&#39;s class loader\r\n            ClassLoader parentClassLoader = context.getClassLoader();\r\n\r\n            // Create a new DexClassLoader to load the .dex file\r\n            DexClassLoader dexClassLoader = new DexClassLoader(dexPath, null, null, parentClassLoader);\r\n\r\n            // Replace &quot;com.example.MyJavaClass&quot; with the actual class name you want to run\r\n            Class&lt;?&gt; myClass = dexClassLoader.loadClass(&quot;com.example.MyJavaClass&quot;);\r\n            \r\n            // Create an instance of the class (assuming it has a parameterless constructor)\r\n            Object instance = myClass.newInstance();\r\n            \r\n            // If the class has a method to execute, you can call it like this:\r\n            // myClass.getMethod(&quot;methodName&quot;).invoke(instance);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n  [1]: https://www.javatpoint.com/dalvik-virtual-machine\r\n  [2]: https://stackoverflow.com/questions/75717441/how-to-load-a-dex-file-using-dex-dexclassloader","title":"How can I run a Java .class file or .jar file on an Android phone?","body":"<p>First you have to convert .class file to .dex format as android uses a different byte code format.\nYou can find more about it <a href=\"https://www.javatpoint.com/dalvik-virtual-machine\" rel=\"nofollow noreferrer\">here.</a></p>\n<p>I assume you already have an android project created.\nYou can then include the .dex file in your project.\nFinally, you can load and execute the file as you need.</p>\n<p>In case you need similar approach for loading .dex files you can find that <a href=\"https://stackoverflow.com/questions/75717441/how-to-load-a-dex-file-using-dex-dexclassloader\">here.</a></p>\n<p>Following is an example code which might help you to figure it out.</p>\n<pre><code>import dalvik.system.DexClassLoader;\n\npublic class DynamicClassRunner {\n  \n  public static void runDexFile() {\n        try {\n            // Get the path to the .dex file (place it in the &quot;assets&quot; folder)\n            String dexPath = context.getFilesDir().getAbsolutePath() + &quot;/myjavafile.dex&quot;;\n            \n        // Get the application's class loader\n        ClassLoader parentClassLoader = context.getClassLoader();\n\n        // Create a new DexClassLoader to load the .dex file\n        DexClassLoader dexClassLoader = new DexClassLoader(dexPath, null, null, parentClassLoader);\n\n        // Replace &quot;com.example.MyJavaClass&quot; with the actual class name you want to run\n        Class&lt;?&gt; myClass = dexClassLoader.loadClass(&quot;com.example.MyJavaClass&quot;);\n        \n        // Create an instance of the class (assuming it has a parameterless constructor)\n        Object instance = myClass.newInstance();\n        \n        // If the class has a method to execute, you can call it like this:\n        // myClass.getMethod(&quot;methodName&quot;).invoke(instance);\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":2464285,"reputation":1,"user_id":2147737,"display_name":"oldcwj"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":207,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689833404,"creation_date":1689819993,"question_id":76726296,"body_markdown":"How can I run a Java .class file or .jar file on my Android phone?\r\n\r\nI am currently learning Java programming using the Java SE standard. I have generated .class files using javac and created a .jar file using the &quot;java -jar&quot; command. Now, I want to run these .class or .jar files on my Android phone. Is there an app that can conveniently run .class files or execute .jar files on Android, so that I can see the results on my phone?","title":"How can I run a Java .class file or .jar file on an Android phone?","body":"<p>How can I run a Java .class file or .jar file on my Android phone?</p>\n<p>I am currently learning Java programming using the Java SE standard. I have generated .class files using javac and created a .jar file using the &quot;java -jar&quot; command. Now, I want to run these .class or .jar files on my Android phone. Is there an app that can conveniently run .class files or execute .jar files on Android, so that I can see the results on my phone?</p>\n"},{"tags":["java","kotlin","gradle"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1689786969,"post_id":76723633,"comment_id":135264226,"body_markdown":"`dependsOn(&quot;:projectA:test&quot;)` should work (don&#39;t know if it matters, but I would put it _outside_ the `useJUnitPlatform()` closure; also, note the `:` at the start of the path).","body":"<code>dependsOn(&quot;:projectA:test&quot;)</code> should work (don&#39;t know if it matters, but I would put it <i>outside</i> the <code>useJUnitPlatform()</code> closure; also, note the <code>:</code> at the start of the path)."},{"owner":{"account_id":13527984,"reputation":53,"user_id":9759267,"display_name":"Vlad"},"score":0,"creation_date":1689833409,"post_id":76723633,"comment_id":135269760,"body_markdown":"@Slaw sorry, I copied the task definition wrong. The task definition is like you told me and it still doesn&#39;t work. I edited the post to fix it, thanks for pointing out!","body":"@Slaw sorry, I copied the task definition wrong. The task definition is like you told me and it still doesn&#39;t work. I edited the post to fix it, thanks for pointing out!"},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1689891325,"post_id":76723633,"comment_id":135281423,"body_markdown":"Ah, I think I see the problem. Based on your description, should you not be depending on the `test` task of **projectB**? i.e., `dependsOn(&quot;:projectB:test&quot;)`.","body":"Ah, I think I see the problem. Based on your description, should you not be depending on the <code>test</code> task of <b>projectB</b>? i.e., <code>dependsOn(&quot;:projectB:test&quot;)</code>."}],"owner":{"account_id":13527984,"reputation":53,"user_id":9759267,"display_name":"Vlad"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689833324,"creation_date":1689785918,"question_id":76723633,"body_markdown":"I have two gradle projects in the same directory: \r\n\r\n    -root: \r\n    --projectA:\r\n    ---build.gradle \r\n    --projectB:\r\n    ---build.gradle \r\n    --build.gradle\r\n\r\nProjectA uses projectB as an implementation dependency.\r\nHow can I execute the test task of project B when project A test phase executes?\r\n\r\nI&#39;ve tried the code below but doesn&#39;t seem to work, my build files are in Kotlin DSL.\r\n\r\nprojectA build.gradle.kts:\r\n\r\n    tasks.test {\r\n       ...\r\n       useJUnitPlatform() {\r\n         excludeTags(&quot;excluded&quot;)\r\n       }\r\n       failFast = true\r\n         \r\n       dependsOn(&quot;:projectA:test&quot;)\r\n       }\r\n    }\r\n\r\nPurpose: unit tests of dependency should also execute when unit tests of root project executes","title":"Gradle run test task of dependency","body":"<p>I have two gradle projects in the same directory:</p>\n<pre><code>-root: \n--projectA:\n---build.gradle \n--projectB:\n---build.gradle \n--build.gradle\n</code></pre>\n<p>ProjectA uses projectB as an implementation dependency.\nHow can I execute the test task of project B when project A test phase executes?</p>\n<p>I've tried the code below but doesn't seem to work, my build files are in Kotlin DSL.</p>\n<p>projectA build.gradle.kts:</p>\n<pre><code>tasks.test {\n   ...\n   useJUnitPlatform() {\n     excludeTags(&quot;excluded&quot;)\n   }\n   failFast = true\n     \n   dependsOn(&quot;:projectA:test&quot;)\n   }\n}\n</code></pre>\n<p>Purpose: unit tests of dependency should also execute when unit tests of root project executes</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":1,"creation_date":1689789638,"post_id":76723997,"comment_id":135264732,"body_markdown":"Probably because varargs are treated like arrays by the VM. Maybe there is some sort of type erasure happening. This may help: [Method Overloading and Ambiguity in Varargs in Java (GeeksforGeeks)](https://www.geeksforgeeks.org/method-overloading-ambiguity-varargs-java/) and this question: [Ambiguous varargs methods](https://stackoverflow.com/questions/27874380/ambiguous-varargs-methods). There are a ton of Google results for &quot;varargs ambiguous java&quot;.","body":"Probably because varargs are treated like arrays by the VM. Maybe there is some sort of type erasure happening. This may help: <a href=\"https://www.geeksforgeeks.org/method-overloading-ambiguity-varargs-java/\" rel=\"nofollow noreferrer\">Method Overloading and Ambiguity in Varargs in Java (GeeksforGeeks)</a> and this question: <a href=\"https://stackoverflow.com/questions/27874380/ambiguous-varargs-methods\">Ambiguous varargs methods</a>. There are a ton of Google results for &quot;varargs ambiguous java&quot;."}],"answers":[{"tags":[],"owner":{"account_id":28879862,"reputation":39,"user_id":22119553,"display_name":"jackeylove271"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689833240,"creation_date":1689789541,"answer_id":76724063,"question_id":76723997,"body_markdown":"In the first case, there is no error because the parameter types of these two methods are different, and there is no overloading ambiguity. The compiler can unambiguously determine which method to call based on the type of argument passed during the invocation. \r\n\r\nWhat about the 2nd and 3rd tests, here everything is much more interesting. Varargs automatically wrap primitive data types into their corresponding wrapper classes if the method takes the varargs that correspond to primitive types. (`byte...` =&gt; `Byte...` when calling a method). \r\n\r\nIn the 2nd case, if you call `doCalc(12, 1)` for example, `12` and `1` are treated as `int` literal, but it can be automatically transfered into a `long` (int -&gt; long). So the method `doCalc(long... a)` has an advantage because it can directly accept an argument of type `long` (cannot convert from `int` to `byte` for `int -&gt; byte -&gt; Byte`, but can from `int` to `long`), which is a primitive `long`. \r\n\r\nI got the next output here: `byte 2...`\r\n\r\nBut you can call the method as follows: \r\n```\r\nbyte b = 1; \r\ndoCalc(b, b);\r\n```\r\nIn this case, there will be a compile-time error, because it can convert `byte -&gt; int -&gt; long` and also it can convert `byte -&gt; Byte` as well.\r\n\r\nAlso, you can experiment with the methods like that:\r\n```\r\nstatic void doCalc(Long... a) {\r\n    System.out.print(&quot;byte 2...&quot;);\r\n}\r\n```\r\nHere even if you call `doCalc(1, 1)`, there will be an compile-time error, because it can&#39;t wrap `int` into `Long`. \r\n\r\nWhat about 3rd case, you have two non-generic methods (`Byte...` vs `Byte...`). In order for one of the methods to be chosen, one of them has to be more specific than the other. In your case, each method only has one parameter, and for one of them to be more specific than the other, the type of that one parameter must be a subtype of the other method&#39;s parameter.\r\n\r\nSince `byte` is not a subtype of `Byte` there is no most specific method and the compiler throws a compile-time error.\r\n\r\nCheck this out. JLS 15.12.2.5 Choosing the Most Specific Method: https://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.12.2.5\r\n\r\nAlso, check these answers: \r\n1) https://stackoverflow.com/questions/30130720/method-overload-ambiguity-with-java-8-ternary-conditional-and-unboxed-primitives/30137369#30137369\r\n2) https://stackoverflow.com/questions/23020493/why-is-this-method-overloading-ambiguous","title":"ambiguous issue in method overloading","body":"<p>In the first case, there is no error because the parameter types of these two methods are different, and there is no overloading ambiguity. The compiler can unambiguously determine which method to call based on the type of argument passed during the invocation.</p>\n<p>What about the 2nd and 3rd tests, here everything is much more interesting. Varargs automatically wrap primitive data types into their corresponding wrapper classes if the method takes the varargs that correspond to primitive types. (<code>byte...</code> =&gt; <code>Byte...</code> when calling a method).</p>\n<p>In the 2nd case, if you call <code>doCalc(12, 1)</code> for example, <code>12</code> and <code>1</code> are treated as <code>int</code> literal, but it can be automatically transfered into a <code>long</code> (int -&gt; long). So the method <code>doCalc(long... a)</code> has an advantage because it can directly accept an argument of type <code>long</code> (cannot convert from <code>int</code> to <code>byte</code> for <code>int -&gt; byte -&gt; Byte</code>, but can from <code>int</code> to <code>long</code>), which is a primitive <code>long</code>.</p>\n<p>I got the next output here: <code>byte 2...</code></p>\n<p>But you can call the method as follows:</p>\n<pre><code>byte b = 1; \ndoCalc(b, b);\n</code></pre>\n<p>In this case, there will be a compile-time error, because it can convert <code>byte -&gt; int -&gt; long</code> and also it can convert <code>byte -&gt; Byte</code> as well.</p>\n<p>Also, you can experiment with the methods like that:</p>\n<pre><code>static void doCalc(Long... a) {\n    System.out.print(&quot;byte 2...&quot;);\n}\n</code></pre>\n<p>Here even if you call <code>doCalc(1, 1)</code>, there will be an compile-time error, because it can't wrap <code>int</code> into <code>Long</code>.</p>\n<p>What about 3rd case, you have two non-generic methods (<code>Byte...</code> vs <code>Byte...</code>). In order for one of the methods to be chosen, one of them has to be more specific than the other. In your case, each method only has one parameter, and for one of them to be more specific than the other, the type of that one parameter must be a subtype of the other method's parameter.</p>\n<p>Since <code>byte</code> is not a subtype of <code>Byte</code> there is no most specific method and the compiler throws a compile-time error.</p>\n<p>Check this out. JLS 15.12.2.5 Choosing the Most Specific Method: <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.12.2.5\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.12.2.5</a></p>\n<p>Also, check these answers:</p>\n<ol>\n<li><a href=\"https://stackoverflow.com/questions/30130720/method-overload-ambiguity-with-java-8-ternary-conditional-and-unboxed-primitives/30137369#30137369\">Method overload ambiguity with Java 8 ternary conditional and unboxed primitives</a></li>\n<li><a href=\"https://stackoverflow.com/questions/23020493/why-is-this-method-overloading-ambiguous\">Why is this method overloading ambiguous?</a></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689795567,"creation_date":1689795567,"answer_id":76724706,"question_id":76723997,"body_markdown":"In my test, this code:\r\n\r\n    static void doCalc(Byte... a) {\r\n        System.out.print(&quot;byte 1...&quot;);\r\n    }\r\n    static void doCalc(long... a) {\r\n        System.out.print(&quot;byte 2...&quot;);\r\n    }\r\n\r\n    public static void main (String[] args) {\r\n        byte b = 5;\r\n        doCalc(b, b);\r\n    }\r\n\r\nproduces compilation error:\r\n\r\n&gt; error: reference to doCalc is ambiguous\r\n&gt;         doCalc(b, b);\r\n&gt;         ^   both method doCalc(Byte...) in Main and method doCalc(long...) in Main match\r\n\r\nso, compiler is unable to decide which is better to call. \r\n\r\nMy understanding is that compiler sees a variable arity methods in both cases (third phase is aplied), but neither is more specific - the compiler cannot decide between autoboxing to Byte or widening to long. The Byte class is not a subtype of long, and long is not a subtype of Byte.\r\n\r\nSimilar reasoning applies to third example, the only difference is that there is no widening. But compiler still sees both methods as equally specific, and cant decide which one to call.\r\n\r\nReferences:\r\nhttps://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.12.2\r\nhttps://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.12.2.5","title":"ambiguous issue in method overloading","body":"<p>In my test, this code:</p>\n<pre><code>static void doCalc(Byte... a) {\n    System.out.print(&quot;byte 1...&quot;);\n}\nstatic void doCalc(long... a) {\n    System.out.print(&quot;byte 2...&quot;);\n}\n\npublic static void main (String[] args) {\n    byte b = 5;\n    doCalc(b, b);\n}\n</code></pre>\n<p>produces compilation error:</p>\n<blockquote>\n<p>error: reference to doCalc is ambiguous\ndoCalc(b, b);\n^   both method doCalc(Byte...) in Main and method doCalc(long...) in Main match</p>\n</blockquote>\n<p>so, compiler is unable to decide which is better to call.</p>\n<p>My understanding is that compiler sees a variable arity methods in both cases (third phase is aplied), but neither is more specific - the compiler cannot decide between autoboxing to Byte or widening to long. The Byte class is not a subtype of long, and long is not a subtype of Byte.</p>\n<p>Similar reasoning applies to third example, the only difference is that there is no widening. But compiler still sees both methods as equally specific, and cant decide which one to call.</p>\n<p>References:\n<a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.12.2\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.12.2</a>\n<a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.12.2.5\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.12.2.5</a></p>\n"}],"owner":{"account_id":24662336,"reputation":504,"user_id":18558424,"display_name":"Abe"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":149,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1689833240,"creation_date":1689789009,"question_id":76723997,"body_markdown":"Can someone help explain why test 2 &amp; test 3 have issue?\r\n\r\n    public static void main (String[] args) {\r\n        byte b = 5;\r\n        doCalc(b, b);\r\n    }\r\n\r\nTest 1: These two methods have no ambiguous issue.\r\n\r\n    static void doCalc(byte a, byte b) {\r\n        System.out.print(&quot;byte, byte&quot;);\r\n    }\r\n    static void doCalc(Byte s1, Byte s2) {\r\n        System.out.print(&quot;Byte, Byte&quot;);\r\n    }\r\n\r\nTest 2: These two methods has no Compile-time ambiguous, but it has run-time ambiguous.\r\n\r\n    static void doCalc(Byte... a) {\r\n        System.out.print(&quot;byte 1...&quot;);\r\n    }\r\n    static void doCalc(long... a) {\r\n        System.out.print(&quot;byte 2...&quot;);\r\n    }\r\n\r\nTest 3: These two methods has Compile-time ambiguous.\r\n\r\n    static void doCalc(Byte... a) {\r\n        System.out.print(&quot;byte 1...&quot;);\r\n    }\r\n    static void doCalc(byte... a) {\r\n        System.out.print(&quot;byte 2...&quot;);\r\n    }","title":"ambiguous issue in method overloading","body":"<p>Can someone help explain why test 2 &amp; test 3 have issue?</p>\n<pre><code>public static void main (String[] args) {\n    byte b = 5;\n    doCalc(b, b);\n}\n</code></pre>\n<p>Test 1: These two methods have no ambiguous issue.</p>\n<pre><code>static void doCalc(byte a, byte b) {\n    System.out.print(&quot;byte, byte&quot;);\n}\nstatic void doCalc(Byte s1, Byte s2) {\n    System.out.print(&quot;Byte, Byte&quot;);\n}\n</code></pre>\n<p>Test 2: These two methods has no Compile-time ambiguous, but it has run-time ambiguous.</p>\n<pre><code>static void doCalc(Byte... a) {\n    System.out.print(&quot;byte 1...&quot;);\n}\nstatic void doCalc(long... a) {\n    System.out.print(&quot;byte 2...&quot;);\n}\n</code></pre>\n<p>Test 3: These two methods has Compile-time ambiguous.</p>\n<pre><code>static void doCalc(Byte... a) {\n    System.out.print(&quot;byte 1...&quot;);\n}\nstatic void doCalc(byte... a) {\n    System.out.print(&quot;byte 2...&quot;);\n}\n</code></pre>\n"},{"tags":["java","rest","automated-tests","rest-assured"],"comments":[{"owner":{"account_id":10263942,"reputation":5676,"user_id":7574461,"display_name":"lucas-nguyen-17"},"score":1,"creation_date":1689830260,"post_id":76726677,"comment_id":135269385,"body_markdown":"Just create new RequestSpecification object for each request. similar issue https://stackoverflow.com/a/69569031/7574461","body":"Just create new RequestSpecification object for each request. similar issue <a href=\"https://stackoverflow.com/a/69569031/7574461\">stackoverflow.com/a/69569031/7574461</a>"}],"owner":{"account_id":26637484,"reputation":1,"user_id":20253685,"display_name":"Ravi Ranjan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":190,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689832790,"creation_date":1689827342,"question_id":76726677,"body_markdown":"**When I&#39;m passing the headers in the first API call, the same header is getting passed again in the second API call.\r\nI want to remove all the headers which I passed in the first API call because I don&#39;t need those headers in the second API call.**\r\n\r\n```\r\npackage org.Selenium.testing;\r\n\r\nimport static io.restassured.RestAssured.given;\r\n\r\nimport org.testng.Assert;\r\nimport org.testng.annotations.Test;\r\n\r\nimport io.restassured.RestAssured;\r\nimport io.restassured.response.Response;\r\nimport io.restassured.specification.RequestSpecification;\r\n\r\npublic class REst {\r\n\r\nRequestSpecification requestSpec = RestAssured.given();\t\r\n\tprivate String client_id = &quot;id&quot;;\r\n\tprivate String client_secret = &quot;secret&quot;;\r\n\tprivate String grant_type = &quot;password&quot;;\r\n\tprivate String Username = &quot;a.com&quot;;\r\n\tprivate String password = &quot;b&quot;;\r\n\tprivate String scope = &quot;x&quot;;\r\n\t\r\n\t@Test\r\n\tpublic void token()\r\n\t{\r\n\trequestSpec.baseUri(&quot;URL1&quot;);\r\n\r\n\trequestSpec.contentType(&quot;multipart/form-data&quot;)\r\n\t.multiPart(&quot;client_id&quot;, client_id)\r\n\t.multiPart(&quot;client_secret&quot;, client_secret)\r\n\t.multiPart(&quot;grant_type&quot;, grant_type)\r\n\t.multiPart(&quot;Username&quot;, Username)\r\n\t.multiPart(&quot;password&quot;, password)\r\n\t.multiPart(&quot;scope&quot;, scope);\r\n\t\r\n\tResponse response = requestSpec.get();\r\n\t\t\r\n\tAssert.assertTrue(response.statusCode()==200);\r\n\tresponse.prettyPrint();\r\n\tString token = &quot;Bearer &quot;+response.path(&quot;access_token&quot;);\r\n\t\r\n\tSystem.out.println(&quot;------------------- 1st  TC is working---------------------&quot;);\r\n\t\r\n\trequestSpec.baseUri(&quot;URL2&quot;);\r\n\trequestSpec.headers(&quot;Authorization&quot;,token);\r\n\tResponse res = requestSpec.get();\r\n\t\r\n\tAssert.assertTrue(res.statusCode()==200);\r\n\tres.prettyPrint();\r\n\t\r\n\tSystem.out.println(&quot;------------------- 2nd  TC is working---------------------&quot;);\r\n\t\r\n\t}\r\n```\r\n\r\n\r\n**When I&#39;m passing the headers in the first API call, the same header is getting passed again in the second API call.\r\nI want to remove all the headers which I passed in the first API call because I don&#39;t need those headers in the second API call.**\r\n\r\nThe second API call requires no headers and in the authorization I&#39;m passing jwt token which I got after the first API call, but it keeps passing the first API headers in the second API call.","title":"How to remove the headers from the previous API GET request and hit the new GET method with the same RequestSpecification","body":"<p><strong>When I'm passing the headers in the first API call, the same header is getting passed again in the second API call.\nI want to remove all the headers which I passed in the first API call because I don't need those headers in the second API call.</strong></p>\n<pre><code>package org.Selenium.testing;\n\nimport static io.restassured.RestAssured.given;\n\nimport org.testng.Assert;\nimport org.testng.annotations.Test;\n\nimport io.restassured.RestAssured;\nimport io.restassured.response.Response;\nimport io.restassured.specification.RequestSpecification;\n\npublic class REst {\n\nRequestSpecification requestSpec = RestAssured.given(); \n    private String client_id = &quot;id&quot;;\n    private String client_secret = &quot;secret&quot;;\n    private String grant_type = &quot;password&quot;;\n    private String Username = &quot;a.com&quot;;\n    private String password = &quot;b&quot;;\n    private String scope = &quot;x&quot;;\n    \n    @Test\n    public void token()\n    {\n    requestSpec.baseUri(&quot;URL1&quot;);\n\n    requestSpec.contentType(&quot;multipart/form-data&quot;)\n    .multiPart(&quot;client_id&quot;, client_id)\n    .multiPart(&quot;client_secret&quot;, client_secret)\n    .multiPart(&quot;grant_type&quot;, grant_type)\n    .multiPart(&quot;Username&quot;, Username)\n    .multiPart(&quot;password&quot;, password)\n    .multiPart(&quot;scope&quot;, scope);\n    \n    Response response = requestSpec.get();\n        \n    Assert.assertTrue(response.statusCode()==200);\n    response.prettyPrint();\n    String token = &quot;Bearer &quot;+response.path(&quot;access_token&quot;);\n    \n    System.out.println(&quot;------------------- 1st  TC is working---------------------&quot;);\n    \n    requestSpec.baseUri(&quot;URL2&quot;);\n    requestSpec.headers(&quot;Authorization&quot;,token);\n    Response res = requestSpec.get();\n    \n    Assert.assertTrue(res.statusCode()==200);\n    res.prettyPrint();\n    \n    System.out.println(&quot;------------------- 2nd  TC is working---------------------&quot;);\n    \n    }\n</code></pre>\n<p><strong>When I'm passing the headers in the first API call, the same header is getting passed again in the second API call.\nI want to remove all the headers which I passed in the first API call because I don't need those headers in the second API call.</strong></p>\n<p>The second API call requires no headers and in the authorization I'm passing jwt token which I got after the first API call, but it keeps passing the first API headers in the second API call.</p>\n"},{"tags":["java","junit5","google-workflows"],"comments":[{"owner":{"account_id":14847021,"reputation":301,"user_id":10722088,"display_name":"Simone Lungarella"},"score":1,"creation_date":1689832820,"post_id":76726966,"comment_id":135269686,"body_markdown":"I suggest you add the code of what you are trying to do, in that way, we can have a starting point and a clear idea of what you want to reach.","body":"I suggest you add the code of what you are trying to do, in that way, we can have a starting point and a clear idea of what you want to reach."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689856677,"post_id":76726966,"comment_id":135274457,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":29054045,"reputation":1,"user_id":22256169,"display_name":"Anikaith Kapoor"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689832431,"creation_date":1689831704,"question_id":76726966,"body_markdown":"I have a post API endpoint where I post certain data into the workflow. I am unable to mock certain static methods using Mockito and jnuit5. I am using methods including `ExecutionName.of()`, `executionClient.getExecution()` and `getExecutionRequest()`. Fresher in a company, any suggestions on how to do it.\r\n\r\nI have tried stub injection but wasn&#39;t able to get any results out of it.","title":"Unit testing for post API for a Google workflows endpoint","body":"<p>I have a post API endpoint where I post certain data into the workflow. I am unable to mock certain static methods using Mockito and jnuit5. I am using methods including <code>ExecutionName.of()</code>, <code>executionClient.getExecution()</code> and <code>getExecutionRequest()</code>. Fresher in a company, any suggestions on how to do it.</p>\n<p>I have tried stub injection but wasn't able to get any results out of it.</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1689833752,"post_id":76726852,"comment_id":135269811,"body_markdown":"have you checked the documentation for that class? It&#39;s quite likely to be mentioned there","body":"have you checked the documentation for that class? It&#39;s quite likely to be mentioned there"},{"owner":{"account_id":23743483,"reputation":21,"user_id":17761248,"display_name":"Akshay Sarambale"},"score":0,"creation_date":1689916437,"post_id":76726852,"comment_id":135283486,"body_markdown":"Yes but couldn&#39;t find any - https://docs.spring.io/spring-security/reference/6.1-SNAPSHOT/migration/index.html Please share the link if I&#39;m checking wrong one.","body":"Yes but couldn&#39;t find any - <a href=\"https://docs.spring.io/spring-security/reference/6.1-SNAPSHOT/migration/index.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/reference/6.1-SNAPSHOT/migrat&zwnj;&#8203;ion/&hellip;</a> Please share the link if I&#39;m checking wrong one."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1690179934,"post_id":76726852,"comment_id":135311696,"body_markdown":"why are you looking at the documentation of 6.1-SNAPSHOT, to answer a question about 3.1.1?","body":"why are you looking at the documentation of 6.1-SNAPSHOT, to answer a question about 3.1.1?"}],"owner":{"account_id":23743483,"reputation":21,"user_id":17761248,"display_name":"Akshay Sarambale"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689831585,"creation_date":1689830074,"question_id":76726852,"body_markdown":"Due to upgradation of SpringBoot v2.7.3 to v3.1.1, facing deprecation issue of AuthenticationProperties class. \r\n\r\nImport code line:\r\n\r\nimport com.westernacher.xna.template.boot.AuthenticationProperties;\r\n\r\nWhat is the replacement for AuthenticationProperties?","title":"&#39;com.westernacher.xna.template.boot.AuthenticationProperties&#39; is deprecated and marked for removal","body":"<p>Due to upgradation of SpringBoot v2.7.3 to v3.1.1, facing deprecation issue of AuthenticationProperties class.</p>\n<p>Import code line:</p>\n<p>import com.westernacher.xna.template.boot.AuthenticationProperties;</p>\n<p>What is the replacement for AuthenticationProperties?</p>\n"},{"tags":["java","security","encryption"],"comments":[{"owner":{"account_id":10987,"reputation":50685,"user_id":21005,"accept_rate":78,"display_name":"Mnementh"},"score":1,"creation_date":1248446367,"post_id":1175008,"comment_id":998866,"body_markdown":"Why do you want to do this? If someone is interested in your code, he will be able to reconstruct it anyways, as long as he access to the binary (in this case a war). In Java that is especially simple, but it is also possible for C. Interested in your code may be only developers, with little effort they gain the knowledge needed for this. So the extra-effort to obfuscate your code may fend only very few hackers off. I can&#39;t see the benefit.","body":"Why do you want to do this? If someone is interested in your code, he will be able to reconstruct it anyways, as long as he access to the binary (in this case a war). In Java that is especially simple, but it is also possible for C. Interested in your code may be only developers, with little effort they gain the knowledge needed for this. So the extra-effort to obfuscate your code may fend only very few hackers off. I can&#39;t see the benefit."},{"owner":{"account_id":15307,"reputation":17620,"user_id":32174,"accept_rate":71,"display_name":"Julien Chastang"},"score":0,"creation_date":1248457633,"post_id":1175008,"comment_id":1000095,"body_markdown":"+1 for @Mnementh&#39;s comments. What is the objective here? You are deploying your war in a web application container (e.g. Tomcat), sever-side. Web clients will not have access to it.","body":"+1 for @Mnementh&#39;s comments. What is the objective here? You are deploying your war in a web application container (e.g. Tomcat), sever-side. Web clients will not have access to it."},{"owner":{"display_name":"Walter White"},"score":0,"creation_date":1248527979,"post_id":1175008,"comment_id":1003390,"body_markdown":"I&#39;m not worried about people viewing the site in firefox or whatever, but other people on the system or if developing a website for a client and using their servers, I may or may not want them to easily have access to the source code.","body":"I&#39;m not worried about people viewing the site in firefox or whatever, but other people on the system or if developing a website for a client and using their servers, I may or may not want them to easily have access to the source code."},{"owner":{"display_name":"Walter White"},"score":0,"creation_date":1248528318,"post_id":1175008,"comment_id":1003399,"body_markdown":"I suppose the best solution would be to just go with private hosting then.","body":"I suppose the best solution would be to just go with private hosting then."},{"owner":{"account_id":6099840,"reputation":823,"user_id":4759226,"accept_rate":79,"display_name":"Erick"},"score":0,"creation_date":1460341891,"post_id":1175008,"comment_id":60680128,"body_markdown":"@WalterWhite Walter, I am trying to figure out the same thing (how to avoid client to see the source code). Were you able to come up with a nice solution other than private hosting?","body":"@WalterWhite Walter, I am trying to figure out the same thing (how to avoid client to see the source code). Were you able to come up with a nice solution other than private hosting?"}],"answers":[{"tags":[],"owner":{"account_id":13044,"reputation":10485,"user_id":25991,"accept_rate":83,"display_name":"Everett Toews"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1248391616,"creation_date":1248391616,"answer_id":1175045,"question_id":1175008,"body_markdown":"[Zelix KlassMaster][1] can be run from Ant.  Looks like it handles [WARs][2] too.\r\n\r\nCouldn&#39;t tell you about the deployment of the WAR but any obfuscator that causes an archive not to work after it&#39;s been obfuscated isn&#39;t worth much.\r\n\r\n\r\n  [1]: http://www.zelix.com/klassmaster/features.html\r\n  [2]: http://www.zelix.com/klassmaster/docs/openStatement.html","title":"Encrypting War files","body":"<p><a href=\"http://www.zelix.com/klassmaster/features.html\" rel=\"nofollow noreferrer\">Zelix KlassMaster</a> can be run from Ant.  Looks like it handles <a href=\"http://www.zelix.com/klassmaster/docs/openStatement.html\" rel=\"nofollow noreferrer\">WARs</a> too.</p>\n\n<p>Couldn't tell you about the deployment of the WAR but any obfuscator that causes an archive not to work after it's been obfuscated isn't worth much.</p>\n"},{"tags":[],"owner":{"account_id":3017,"reputation":6344,"user_id":4273,"display_name":"Joe Kuemerle"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1248394716,"creation_date":1248394716,"answer_id":1175199,"question_id":1175008,"body_markdown":"[DashO][1] from PreEmptive Solutions will also obfuscate WAR files.\r\n\r\n\r\n  [1]: http://www.preemptive.com/dasho-for-java.html","title":"Encrypting War files","body":"<p><a href=\"http://www.preemptive.com/dasho-for-java.html\" rel=\"nofollow noreferrer\">DashO</a> from PreEmptive Solutions will also obfuscate WAR files.</p>\n"},{"tags":[],"owner":{"account_id":40747,"reputation":16788,"user_id":118133,"accept_rate":86,"display_name":"Nate"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1248445753,"creation_date":1248445753,"answer_id":1178074,"question_id":1175008,"body_markdown":"[Cracking Java byte-code encryption - Why Java obfuscation schemes based on byte-code encryption won&#39;t work][1] - Article from JavaWorld.\r\n\r\nIf your code is important enough to go to all this trouble it probably makes sense to host it on a private server... :\\\r\n\r\n\r\n  [1]: http://www.javaworld.com/javaworld/javaqa/2003-05/01-qa-0509-jcrypt.html","title":"Encrypting War files","body":"<p><a href=\"http://www.javaworld.com/javaworld/javaqa/2003-05/01-qa-0509-jcrypt.html\" rel=\"nofollow noreferrer\">Cracking Java byte-code encryption - Why Java obfuscation schemes based on byte-code encryption won't work</a> - Article from JavaWorld.</p>\n\n<p>If your code is important enough to go to all this trouble it probably makes sense to host it on a private server... :\\</p>\n"},{"tags":[],"owner":{"account_id":1219644,"reputation":446,"user_id":1186539,"accept_rate":50,"display_name":"Bekhbayar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1328233756,"creation_date":1328233756,"answer_id":9122700,"question_id":1175008,"body_markdown":"i have same problem here. \r\nI tried it with Yguard 2.4, Proguard 4.7, Zelix 5.4.6, Allatori 4.0 , JavaGuard 1.0, Sandmark 3.40. All of those are not giving me glance that my obfuscated web application would not run. They can obfuscate bytecodes even they can obfuscate my application. That is all.\r\n\r\np.s : The application server(server container tomcat, apache, glassfish, weblogic , websphere etc) can&#39;t hide our code from hackers. in my experience all of them has temp folder which contains currently using items. In this folder we can see the code.\r\n\r\nFinally i would say if we use Java then we make opensource. :P ","title":"Encrypting War files","body":"<p>i have same problem here. \nI tried it with Yguard 2.4, Proguard 4.7, Zelix 5.4.6, Allatori 4.0 , JavaGuard 1.0, Sandmark 3.40. All of those are not giving me glance that my obfuscated web application would not run. They can obfuscate bytecodes even they can obfuscate my application. That is all.</p>\n\n<p>p.s : The application server(server container tomcat, apache, glassfish, weblogic , websphere etc) can't hide our code from hackers. in my experience all of them has temp folder which contains currently using items. In this folder we can see the code.</p>\n\n<p>Finally i would say if we use Java then we make opensource. :P </p>\n"},{"tags":[],"owner":{"account_id":3142696,"reputation":253,"user_id":2657847,"accept_rate":75,"display_name":"NicholasKarl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1386603653,"creation_date":1386603653,"answer_id":20474554,"question_id":1175008,"body_markdown":"I had a solution to this problem. It goes like this:\r\n\r\nEncrypt a war file. Like ZIP it and encrypt it, so it cannot be read without the password.\r\n\r\nSet up a system, or only give the password to a hosting service. Once you and a client\r\nhave worked out your terms, you give the password to the hosting service. They decrypt the\r\nwar file and install it. They client only sees the website/api. The client never has \r\naccess to your jar files.\r\n\r\nAny comments?","title":"Encrypting War files","body":"<p>I had a solution to this problem. It goes like this:</p>\n\n<p>Encrypt a war file. Like ZIP it and encrypt it, so it cannot be read without the password.</p>\n\n<p>Set up a system, or only give the password to a hosting service. Once you and a client\nhave worked out your terms, you give the password to the hosting service. They decrypt the\nwar file and install it. They client only sees the website/api. The client never has \naccess to your jar files.</p>\n\n<p>Any comments?</p>\n"}],"owner":{"display_name":"Walter White"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8526,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":1178074,"answer_count":5,"score":9,"last_activity_date":1689831231,"creation_date":1248390894,"question_id":1175008,"body_markdown":"I would like to encrypt or obfuscate my WAR file so that reverse engineering will take a little more effort.  Is there such a tool or maven plugin that will encrypt a WAR file and its contents?\r\n\r\nAlso, once the WAR is encrypted, how will the Web Application be deployed at that point?  If the web server explodes the WAR, can each jar and resource still be encrypted, how will the startup behavior be modified to decrypt the nested jars and resources?\r\n\r\n\r\nThanks,\r\nWalter","title":"Encrypting War files","body":"<p>I would like to encrypt or obfuscate my WAR file so that reverse engineering will take a little more effort.  Is there such a tool or maven plugin that will encrypt a WAR file and its contents?</p>\n\n<p>Also, once the WAR is encrypted, how will the Web Application be deployed at that point?  If the web server explodes the WAR, can each jar and resource still be encrypted, how will the startup behavior be modified to decrypt the nested jars and resources?</p>\n\n<p>Thanks,\nWalter</p>\n"},{"tags":["java","spring-boot","mybatis"],"comments":[{"owner":{"account_id":551394,"reputation":8315,"user_id":916225,"accept_rate":69,"display_name":"seenukarthi"},"score":2,"creation_date":1689819066,"post_id":76726233,"comment_id":135268488,"body_markdown":"[Please do not upload images of code/data/errors.](//meta.stackoverflow.com/q/285551) Instead, [edit] your question to include the code as properly formatted text.","body":"<a href=\"//meta.stackoverflow.com/q/285551\">Please do not upload images of code/data/errors.</a> Instead, <a href=\"https://stackoverflow.com/posts/76726233/edit\">edit</a> your question to include the code as properly formatted text."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689856118,"post_id":76726233,"comment_id":135274319,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":28577951,"reputation":1,"user_id":21879303,"display_name":"Hang Mao"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689829655,"creation_date":1689818915,"question_id":76726233,"body_markdown":"I configured multiple data sources and started running normally. After two hours of not operating the database, I performed an insert operation and encountered a &#39;Could not create connection to database server&#39; Attempted reconnect 3 times Giving up\r\n\r\n\r\n\r\nI hope he can successfully execute the insert after 8 hours of inactivity","title":"Could not create connection to database server&#39; Attempted reconnect 3 times Giving up","body":"<p>I configured multiple data sources and started running normally. After two hours of not operating the database, I performed an insert operation and encountered a 'Could not create connection to database server' Attempted reconnect 3 times Giving up</p>\n<p>I hope he can successfully execute the insert after 8 hours of inactivity</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":63571,"reputation":14881,"user_id":188107,"accept_rate":63,"display_name":"musiKk"},"score":0,"creation_date":1288885383,"post_id":4098205,"comment_id":4410248,"body_markdown":"This is more of a workaround: You can drag methods, fields and types in the outline view to change their order as long as that list is not sorted.","body":"This is more of a workaround: You can drag methods, fields and types in the outline view to change their order as long as that list is not sorted."}],"answers":[{"tags":[],"owner":{"account_id":185736,"reputation":1494,"user_id":422651,"accept_rate":75,"display_name":"Bivas"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1288887330,"creation_date":1288887330,"answer_id":4098740,"question_id":4098205,"body_markdown":"Window-&gt;preferences-&gt;Java-&gt;Appearance-&gt;Members Sort","title":"Is there an Eclipse shortcut to sort members by modifier?","body":"<p>Window->preferences->Java->Appearance->Members Sort</p>\n"},{"tags":[],"owner":{"account_id":5345191,"reputation":1314,"user_id":4260932,"accept_rate":8,"display_name":"Xar-e-ahmer Khan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1432119997,"creation_date":1432119997,"answer_id":30347871,"question_id":4098205,"body_markdown":"`(Alt-Shift-S),` Sort Members.  A pop Up opens and you can select whatever you want.\r\n\r\nI have no reputation that&#39;s why I answered","title":"Is there an Eclipse shortcut to sort members by modifier?","body":"<p><code>(Alt-Shift-S),</code> Sort Members.  A pop Up opens and you can select whatever you want.</p>\n\n<p>I have no reputation that's why I answered</p>\n"},{"tags":[],"owner":{"account_id":29041707,"reputation":1,"user_id":22246434,"display_name":"Ajay"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1689829269,"creation_date":1689684055,"answer_id":76712883,"question_id":4098205,"body_markdown":"```java\r\npublic static void main(String []args) {\r\n    int arr [] = {50,10,20,30,40,1,5,3,4,2};\r\n    Arrays.sort(arr);\r\n    System.out.println(Arrays.toString(arr));\r\n}\r\n```\r\n","title":"Is there an Eclipse shortcut to sort members by modifier?","body":"<pre class=\"lang-java prettyprint-override\"><code>public static void main(String []args) {\n    int arr [] = {50,10,20,30,40,1,5,3,4,2};\n    Arrays.sort(arr);\n    System.out.println(Arrays.toString(arr));\n}\n</code></pre>\n"}],"owner":{"account_id":112221,"reputation":24579,"user_id":296108,"accept_rate":92,"display_name":"Chris Knight"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4270,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":4098740,"answer_count":3,"score":5,"last_activity_date":1689829269,"creation_date":1288884110,"question_id":4098205,"body_markdown":"I&#39;m looking for a shortcut, preference or plugin in Eclipse which will sort Java members by visibility modifier.  Specifically, I&#39;m looking for the class to be sorted like this:\r\n\r\n    public someClass {\r\n       //public variables go first followed by \r\n       //protected and default variables and lastly\r\n       //private variables\r\n\r\n       //public methods above\r\n       //proteted and default methods with\r\n       //private methods at the bottom\r\n    }\r\n\r\nI&#39;m not fussed about alphabetically, only the visibility modifier.","title":"Is there an Eclipse shortcut to sort members by modifier?","body":"<p>I'm looking for a shortcut, preference or plugin in Eclipse which will sort Java members by visibility modifier.  Specifically, I'm looking for the class to be sorted like this:</p>\n\n<pre><code>public someClass {\n   //public variables go first followed by \n   //protected and default variables and lastly\n   //private variables\n\n   //public methods above\n   //proteted and default methods with\n   //private methods at the bottom\n}\n</code></pre>\n\n<p>I'm not fussed about alphabetically, only the visibility modifier.</p>\n"},{"tags":["java","getter","setter"],"comments":[{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1689830943,"post_id":76726789,"comment_id":135269464,"body_markdown":"It&#39;s just a recommendation, similar to camel-case.  I think it originates from _C++_.","body":"It&#39;s just a recommendation, similar to camel-case.  I think it originates from <i>C++</i>."}],"owner":{"account_id":3366819,"reputation":2646,"user_id":2827181,"display_name":"Marc Le Bihan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1689831148,"answer_count":0,"score":0,"last_activity_date":1689829207,"creation_date":1689829207,"question_id":76726789,"body_markdown":"Up until today, I created my objects with getters/setters of the form:\r\n\r\n```java\r\nprivate String mode;\r\npublic String getMode() { return this.mode; }\r\npublic void setMode(String mode) { this.mode = mode; }\r\n```\r\n\r\nBut sometimes, API introduced another names for getters/setters:\r\n\r\n```java\r\nprivate String mode;\r\npublic String mode() { return this.mode; }\r\npublic void mode(String mode) { this.mode = mode; }\r\n```\r\n\r\nEspecially, since _Java 17_, a `Record` shows its members with getters not having a `get` prefix.\r\n\r\nDoes the removal of `get`/`set` prefixes to the getters/setters respond to a special need?  \r\n\r\nDo conception rules exists to choose one form in preference to the other?\r\n","title":"String getMode() and setMode(String mode), or String mode() and mode(String mode)? Is the way of naming getters/setters changing, and when?","body":"<p>Up until today, I created my objects with getters/setters of the form:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private String mode;\npublic String getMode() { return this.mode; }\npublic void setMode(String mode) { this.mode = mode; }\n</code></pre>\n<p>But sometimes, API introduced another names for getters/setters:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private String mode;\npublic String mode() { return this.mode; }\npublic void mode(String mode) { this.mode = mode; }\n</code></pre>\n<p>Especially, since <em>Java 17</em>, a <code>Record</code> shows its members with getters not having a <code>get</code> prefix.</p>\n<p>Does the removal of <code>get</code>/<code>set</code> prefixes to the getters/setters respond to a special need?</p>\n<p>Do conception rules exists to choose one form in preference to the other?</p>\n"},{"tags":["java","json","jackson","unirest-java"],"comments":[{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":1,"creation_date":1689615335,"post_id":76706796,"comment_id":135235615,"body_markdown":"Have you tried [`convertValue`](https://stackoverflow.com/questions/25024999/convert-jsonnode-into-object) instead?","body":"Have you tried <a href=\"https://stackoverflow.com/questions/25024999/convert-jsonnode-into-object\"><code>convertValue</code></a> instead?"},{"owner":{"account_id":5619788,"reputation":4111,"user_id":4450024,"accept_rate":99,"display_name":"Nu&#241;ito Calzada"},"score":0,"creation_date":1689616663,"post_id":76706796,"comment_id":135235836,"body_markdown":"No serializer found for class java.io.ByteArrayInputStream and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS)","body":"No serializer found for class java.io.ByteArrayInputStream and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS)"},{"owner":{"account_id":4809624,"reputation":3467,"user_id":3883475,"accept_rate":85,"display_name":"Ironluca"},"score":1,"creation_date":1689796083,"post_id":76706796,"comment_id":135265980,"body_markdown":"I assume you are using Jackson ObjectMapper. I think you are confusing between Jackson JsonNode and com.mashape.unirest.http.JsonNode. Object mapper requires TreeNode, Jackson JsonNode implements TreeNode, com.mashape.unirest.http.JsonNode doesn&#39;t. Try converting the com.mashape.unirest.http.JsonNode to a Json string and then use ObjectMapper.readValue(string,class). Give it a shot.","body":"I assume you are using Jackson ObjectMapper. I think you are confusing between Jackson JsonNode and com.mashape.unirest.http.JsonNode. Object mapper requires TreeNode, Jackson JsonNode implements TreeNode, com.mashape.unirest.http.JsonNode doesn&#39;t. Try converting the com.mashape.unirest.http.JsonNode to a Json string and then use ObjectMapper.readValue(string,class). Give it a shot."}],"answers":[{"tags":[],"owner":{"account_id":4243,"reputation":1301824,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689828151,"creation_date":1689828151,"answer_id":76726722,"question_id":76706796,"body_markdown":"Considering [`ObjectMapper#treeToValue()`](https://github.com/FasterXML/jackson-databind/blob/5e94cb1b29a5948737d86f5fe7eaeda318b74910/src/main/java/com/fasterxml/jackson/databind/ObjectMapper.java#L3390-L3408) does exist, check your import at the begginning of your file:\r\n\r\n``` java\r\nimport com.fasterxml.jackson.databind.JsonNode;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\n```\r\n\r\nIf you do not see those imports, that could explain the error message.\r\n\r\nMake sure that the [Jackson libraries](https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core) are properly added to your project&#39;s classpath. You can add the following dependencies in your Maven&#39;s pom.xml:\r\n\r\n``` xml\r\n&lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n        &lt;version&gt;2.12.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.mashape.unirest&lt;/groupId&gt;\r\n        &lt;artifactId&gt;unirest-java&lt;/artifactId&gt;\r\n        &lt;version&gt;1.4.9&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n```\r\n\r\n\r\n----\r\n\r\n&gt; If I try using `convertValue` instead, I get:\r\n&gt;\r\n&gt; ```\r\n&gt; No serializer found for class java.io.ByteArrayInputStream and no properties discovered to create BeanSerializer (to avoid exception, &gt; disable SerializationFeature.FAIL_ON_EMPTY_BEANS)\r\n&gt; ```\r\n\r\nSo you are trying to serialize a `ByteArrayInputStream` object, which Jackson does not know how to serialize by default.\r\n\r\n`HttpResponse.getBody()` might *not* be returning a JsonNode type: instead, it could be returning an InputStream which needs to be manually converted to JsonNode before you can utilize Jackson&#39;s conversion feature.\r\n\r\nFor instance:\r\n\r\n``` java\r\nHttpResponse&lt;InputStream&gt; response = Unirest.post(&quot;https://json.islandia.com/v1/martorell&quot;)\r\n                .basicAuth(&quot;624823&quot;, &quot;8f1addd21a09d6b95eaefa8d60p4c05&quot;)\r\n                .field(&quot;day&quot;, &quot;28&quot;)\r\n                .asObject(InputStream.class);\r\n\r\nObjectMapper mapper = new ObjectMapper();\r\nJsonNode jsonNode = mapper.readTree(response.getBody());\r\nRoot newJsonNode = mapper.treeToValue(jsonNode, Root.class);\r\n```\r\n\r\nHere, the body of the HTTP response, which is an InputStream, is first converted to a JsonNode object using ObjectMapper.`readTree()`. *Then*, the JsonNode is converted to a Root object using `ObjectMapper.treeToValue()`. The Root class should be a POJO that matches the structure of the JSON you are working with. If it does not, you might run into more errors.\r\n\r\n","title":"Convert JsonNode into Java POJO","body":"<p>Considering <a href=\"https://github.com/FasterXML/jackson-databind/blob/5e94cb1b29a5948737d86f5fe7eaeda318b74910/src/main/java/com/fasterxml/jackson/databind/ObjectMapper.java#L3390-L3408\" rel=\"nofollow noreferrer\"><code>ObjectMapper#treeToValue()</code></a> does exist, check your import at the begginning of your file:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.fasterxml.jackson.databind.JsonNode;\nimport com.fasterxml.jackson.databind.ObjectMapper;\n</code></pre>\n<p>If you do not see those imports, that could explain the error message.</p>\n<p>Make sure that the <a href=\"https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core\" rel=\"nofollow noreferrer\">Jackson libraries</a> are properly added to your project's classpath. You can add the following dependencies in your Maven's pom.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n        &lt;version&gt;2.12.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.mashape.unirest&lt;/groupId&gt;\n        &lt;artifactId&gt;unirest-java&lt;/artifactId&gt;\n        &lt;version&gt;1.4.9&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<hr />\n<blockquote>\n<p>If I try using <code>convertValue</code> instead, I get:</p>\n<pre><code>No serializer found for class java.io.ByteArrayInputStream and no properties discovered to create BeanSerializer (to avoid exception, &gt; disable SerializationFeature.FAIL_ON_EMPTY_BEANS)\n</code></pre>\n</blockquote>\n<p>So you are trying to serialize a <code>ByteArrayInputStream</code> object, which Jackson does not know how to serialize by default.</p>\n<p><code>HttpResponse.getBody()</code> might <em>not</em> be returning a JsonNode type: instead, it could be returning an InputStream which needs to be manually converted to JsonNode before you can utilize Jackson's conversion feature.</p>\n<p>For instance:</p>\n<pre class=\"lang-java prettyprint-override\"><code>HttpResponse&lt;InputStream&gt; response = Unirest.post(&quot;https://json.islandia.com/v1/martorell&quot;)\n                .basicAuth(&quot;624823&quot;, &quot;8f1addd21a09d6b95eaefa8d60p4c05&quot;)\n                .field(&quot;day&quot;, &quot;28&quot;)\n                .asObject(InputStream.class);\n\nObjectMapper mapper = new ObjectMapper();\nJsonNode jsonNode = mapper.readTree(response.getBody());\nRoot newJsonNode = mapper.treeToValue(jsonNode, Root.class);\n</code></pre>\n<p>Here, the body of the HTTP response, which is an InputStream, is first converted to a JsonNode object using ObjectMapper.<code>readTree()</code>. <em>Then</em>, the JsonNode is converted to a Root object using <code>ObjectMapper.treeToValue()</code>. The Root class should be a POJO that matches the structure of the JSON you are working with. If it does not, you might run into more errors.</p>\n"}],"owner":{"account_id":5619788,"reputation":4111,"user_id":4450024,"accept_rate":99,"display_name":"Nu&#241;ito Calzada"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":190,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76726722,"answer_count":1,"score":1,"last_activity_date":1689828151,"creation_date":1689614698,"question_id":76706796,"body_markdown":"I have this piece of code:\r\n\r\n     HttpResponse&lt;JsonNode&gt; response = Unirest.post(&quot;https://json.islandia.com/v1/martorell&quot;)\r\n                    .basicAuth(&quot;624823&quot;, &quot;8f1addd21a09d6b95eaefa8d60p4c05&quot;)\r\n                    .field(&quot;day&quot;, &quot;28&quot;)\r\n                    .asJson();\r\n    \r\n            Root newJsonNode = new ObjectMapper().treeToValue(response.getBody(), Root.class);\r\n\r\n\r\nbut I have this error: `Cannot resolve method &#39;treeToValue(JsonNode, Class&lt;Root&gt;)&#39;`","title":"Convert JsonNode into Java POJO","body":"<p>I have this piece of code:</p>\n<pre><code> HttpResponse&lt;JsonNode&gt; response = Unirest.post(&quot;https://json.islandia.com/v1/martorell&quot;)\n                .basicAuth(&quot;624823&quot;, &quot;8f1addd21a09d6b95eaefa8d60p4c05&quot;)\n                .field(&quot;day&quot;, &quot;28&quot;)\n                .asJson();\n\n        Root newJsonNode = new ObjectMapper().treeToValue(response.getBody(), Root.class);\n</code></pre>\n<p>but I have this error: <code>Cannot resolve method 'treeToValue(JsonNode, Class&lt;Root&gt;)'</code></p>\n"},{"tags":["java","android","slf4j"],"owner":{"account_id":16877632,"reputation":2683,"user_id":12204620,"display_name":"Bitwise DEVS"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689827429,"creation_date":1689827429,"question_id":76726683,"body_markdown":"One of our dependency is a java library that uses SLF4J as logger, we need and we use this library in one of our Android project but it seems SLF4J logger is not working by default in the platform. We didn&#39;t add any logger dependency as Android seems to have it by default when we tried to import it, so far this is the log warning that we are getting.\r\n\r\n    Failed to load class org.slf4j.impl.StaticLoggerBinder\r\n\r\nThe log also provides a [link][1] suggesting a way to fix it but we can&#39;t fully understand it. Is there a way to make it work with the Android platform? The logs coming from the library is very important for us to investigate one of our issues we are facing in the project.\r\n\r\n\r\nSample code:\r\n\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n\r\n\r\n    private static final Logger log = LoggerFactory.getLogger(SOME_UTIL.class);\r\n    \r\n    // some function\r\n    log.info(&quot;Start dump data&quot;);\r\n    log.debug(&quot;Parsing config from classpath file {}&quot;, path);\r\n\r\n\r\n  [1]: https://www.slf4j.org/codes.html#StaticLoggerBinder","title":"Failed to load class org.slf4j.impl.StaticLoggerBinder in Android","body":"<p>One of our dependency is a java library that uses SLF4J as logger, we need and we use this library in one of our Android project but it seems SLF4J logger is not working by default in the platform. We didn't add any logger dependency as Android seems to have it by default when we tried to import it, so far this is the log warning that we are getting.</p>\n<pre><code>Failed to load class org.slf4j.impl.StaticLoggerBinder\n</code></pre>\n<p>The log also provides a <a href=\"https://www.slf4j.org/codes.html#StaticLoggerBinder\" rel=\"nofollow noreferrer\">link</a> suggesting a way to fix it but we can't fully understand it. Is there a way to make it work with the Android platform? The logs coming from the library is very important for us to investigate one of our issues we are facing in the project.</p>\n<p>Sample code:</p>\n<pre><code>import org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\n\nprivate static final Logger log = LoggerFactory.getLogger(SOME_UTIL.class);\n\n// some function\nlog.info(&quot;Start dump data&quot;);\nlog.debug(&quot;Parsing config from classpath file {}&quot;, path);\n</code></pre>\n"},{"tags":["javascript","java","selenium-webdriver","selenium-chromedriver"],"comments":[{"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1688323972,"post_id":76600342,"comment_id":135055716,"body_markdown":"Is the URL public, so we can access?","body":"Is the URL public, so we can access?"},{"owner":{"account_id":5787262,"reputation":687,"user_id":4566024,"accept_rate":0,"display_name":"Balaji Singh .Y"},"score":0,"creation_date":1688366154,"post_id":76600342,"comment_id":135059251,"body_markdown":"No. sorry this is internal site hence can`t be shared.","body":"No. sorry this is internal site hence can`t be shared."}],"answers":[{"tags":[],"owner":{"account_id":937336,"reputation":54163,"user_id":966023,"accept_rate":65,"display_name":"pguardiario"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688604479,"creation_date":1688604479,"answer_id":76624854,"question_id":76600342,"body_markdown":"The site must have done something to the top-level JSON object.\r\nFor example if a script on that page does this in global scope:\r\n\r\n    JSON = &quot;{}&quot;\r\n\r\nThen JSON.stringify will be undefined. Apparently Selenium is counting on it for passing things back and forth to Python\r\n","title":"WebDriver throws Exception: TypeError: JSON.stringify is not a function","body":"<p>The site must have done something to the top-level JSON object.\nFor example if a script on that page does this in global scope:</p>\n<pre><code>JSON = &quot;{}&quot;\n</code></pre>\n<p>Then JSON.stringify will be undefined. Apparently Selenium is counting on it for passing things back and forth to Python</p>\n"},{"tags":[],"owner":{"account_id":5787262,"reputation":687,"user_id":4566024,"accept_rate":0,"display_name":"Balaji Singh .Y"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689824680,"creation_date":1689824377,"answer_id":76726528,"question_id":76600342,"body_markdown":"This is the issue with latest chrome browser. \r\n\r\nAfter few analysis just found three ways of doing things\r\n\r\n1) By using older chrome versions\r\n   Step1: Uninstall Chrome\r\n Step2: Delete Chrome Data from below path\r\n        %LOCALAPPDATA%\\Google\\Chrome\\User Data\r\n Step3: Download Older Chrome version via FileHippo,Chromium Cypress, SlimJet. etc\r\n\r\n      \r\n[![Steps to install older chrome browser versions][1]][1]\r\n\r\n\r\n  Now you run your scripts with chromium browser it will work as expected.\r\n\r\n\r\n2) Case 2: Using  javascript file \r\n Basically you should do is run a snippet of JS code to define the JSON.stringify method before you perform any find element or send key action, for my solution is using (JavascriptExecutor)webdrive.execute() to do this, the JS code you need just like following, also you can find this in JSON-js/json2.js\r\n\r\n\r\n\r\nsave this javascript file and execute it using javascriptexecutor \r\n\r\nJavascriptExecutor obj = (JavascriptExecutor) driver;\r\n\r\nobj.executeScript(&quot;json2.js&quot;, args);\r\n\r\n3) Using Firefox  browser i was able to run my automation scripts smoothly  using below code which use to wait and then perform actions and it worked fine for me.\r\n\r\nnew WebDriverWait(driver, 20).until(driver -&gt; ((JavascriptExecutor) driver).executeScript(&quot;return document.readyState&quot;).equals(&quot;complete&quot;));\r\n\r\n\r\nThe problem was with chrome browser latest version i hope it would be fixed in coming versions.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bgXVg.png","title":"WebDriver throws Exception: TypeError: JSON.stringify is not a function","body":"<p>This is the issue with latest chrome browser.</p>\n<p>After few analysis just found three ways of doing things</p>\n<ol>\n<li>By using older chrome versions\nStep1: Uninstall Chrome\nStep2: Delete Chrome Data from below path\n%LOCALAPPDATA%\\Google\\Chrome\\User Data\nStep3: Download Older Chrome version via FileHippo,Chromium Cypress, SlimJet. etc</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/bgXVg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bgXVg.png\" alt=\"Steps to install older chrome browser versions\" /></a></p>\n<p>Now you run your scripts with chromium browser it will work as expected.</p>\n<ol start=\"2\">\n<li>Case 2: Using  javascript file\nBasically you should do is run a snippet of JS code to define the JSON.stringify method before you perform any find element or send key action, for my solution is using (JavascriptExecutor)webdrive.execute() to do this, the JS code you need just like following, also you can find this in JSON-js/json2.js</li>\n</ol>\n<p>save this javascript file and execute it using javascriptexecutor</p>\n<p>JavascriptExecutor obj = (JavascriptExecutor) driver;</p>\n<p>obj.executeScript(&quot;json2.js&quot;, args);</p>\n<ol start=\"3\">\n<li>Using Firefox  browser i was able to run my automation scripts smoothly  using below code which use to wait and then perform actions and it worked fine for me.</li>\n</ol>\n<p>new WebDriverWait(driver, 20).until(driver -&gt; ((JavascriptExecutor) driver).executeScript(&quot;return document.readyState&quot;).equals(&quot;complete&quot;));</p>\n<p>The problem was with chrome browser latest version i hope it would be fixed in coming versions.</p>\n"}],"owner":{"account_id":5787262,"reputation":687,"user_id":4566024,"accept_rate":0,"display_name":"Balaji Singh .Y"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":222,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76726528,"answer_count":2,"score":0,"last_activity_date":1689824680,"creation_date":1688323692,"question_id":76600342,"body_markdown":"I am working on selenium automation using java.  Selenium version used : 4.10.0\r\n\r\nThough I see two tabs ( 1. parent tab main page and 2. is the child tab) but when I switch to child through below code I don`t see any kind of exception thrown. But when I perform any operations like click on any button in  child window it throws an exception &quot;TypeError: JSON.stringify is not a function&quot;.\r\n\r\nBelow is the code snippet.\r\n==========================\r\n//Loop through until we find a new window handle\r\n\t\r\n\r\n    \tfor (String windowHandle : driver.getWindowHandles()) {\r\n\t\t\t\r\n\t\t    if(!originalWindow.contentEquals(windowHandle)) {\r\n\t\t    \tSystem.out.println(&quot;Child win : &quot;+windowHandle);\r\n\t\t        driver.switchTo().window(windowHandle);\r\n\t\t        break;\r\n\t\t    }\r\n\t\t}\r\ndriver.findElement(By.name(&quot;aspnetForm&quot;)).click();\r\n\r\nCan somebody please advise me here why i should be getting this error &quot;Exception in thread &quot;main&quot; org.openqa.selenium.WebDriverException: unknown error: Runtime.callFunctionOn threw exception: TypeError: JSON.stringify is not a function&quot;\r\n\r\nConsloe log below :\r\n====================\r\n\r\nChild win : DEFC56C2E255CB00E7CF1C779B81E7EE\r\nException in thread &quot;main&quot; org.openqa.selenium.WebDriverException: unknown error: Runtime.callFunctionOn threw exception: TypeError: JSON.stringify is not a function\r\n    at buildError (&lt;anonymous&gt;:323:18)\r\n  (Session info: chrome=114.0.5735.199)\r\nBuild info: version: &#39;4.10.0&#39;, revision: &#39;c14d967899&#39;\r\nSystem info: os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;11.0.18&#39;\r\nDriver info: org.openqa.selenium.chrome.ChromeDriver\r\nCommand: [748156ce82a3898c61c8bc461a5ecbbb, findElement {using=name, value=aspnetForm}]\r\nCapabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 114.0.5735.199, chrome: {chromedriverVersion: 114.0.5735.90 (386bc09e8f4f..., userDataDir: C:\\Users\\baluz\\AppData\\Loca...}, goog:chromeOptions: {debuggerAddress: localhost:58574}, networkConnectionEnabled: false, pageLoadStrategy: normal, platformName: windows, proxy: Proxy(), se:cdp: ws://localhost:58574/devtoo..., se:cdpVersion: 114.0.5735.199, setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, webauthn:extension:minPinLength: true, webauthn:extension:prf: true, webauthn:virtualAuthenticators: true}\r\nSession ID: 748156ce82a3898c61c8bc461a5ecbbb\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)\r\n\tat org.openqa.selenium.remote.codec.w3c.W3CHttpResponseCodec.createException(W3CHttpResponseCodec.java:199)\r\n\tat org.openqa.selenium.remote.codec.w3c.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:132)\r\n\tat org.openqa.selenium.remote.codec.w3c.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:51)\r\n\tat org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:191)\r\n\tat org.openqa.selenium.remote.service.DriverCommandExecutor.invokeExecute(DriverCommandExecutor.java:196)\r\n\tat org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:171)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:531)\r\n\tat org.openqa.selenium.remote.ElementLocation$ElementFinder$2.findElement(ElementLocation.java:165)\r\n\tat org.openqa.selenium.remote.ElementLocation.findElement(ElementLocation.java:66)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:350)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:344)\r\n\tat com.basePage.EX3.main(EX3.java:91)\r\n","title":"WebDriver throws Exception: TypeError: JSON.stringify is not a function","body":"<p>I am working on selenium automation using java.  Selenium version used : 4.10.0</p>\n<p>Though I see two tabs ( 1. parent tab main page and 2. is the child tab) but when I switch to child through below code I don`t see any kind of exception thrown. But when I perform any operations like click on any button in  child window it throws an exception &quot;TypeError: JSON.stringify is not a function&quot;.</p>\n<h1>Below is the code snippet.</h1>\n<p>//Loop through until we find a new window handle</p>\n<pre><code>    for (String windowHandle : driver.getWindowHandles()) {\n        \n        if(!originalWindow.contentEquals(windowHandle)) {\n            System.out.println(&quot;Child win : &quot;+windowHandle);\n            driver.switchTo().window(windowHandle);\n            break;\n        }\n    }\n</code></pre>\n<p>driver.findElement(By.name(&quot;aspnetForm&quot;)).click();</p>\n<p>Can somebody please advise me here why i should be getting this error &quot;Exception in thread &quot;main&quot; org.openqa.selenium.WebDriverException: unknown error: Runtime.callFunctionOn threw exception: TypeError: JSON.stringify is not a function&quot;</p>\n<h1>Consloe log below :</h1>\n<p>Child win : DEFC56C2E255CB00E7CF1C779B81E7EE\nException in thread &quot;main&quot; org.openqa.selenium.WebDriverException: unknown error: Runtime.callFunctionOn threw exception: TypeError: JSON.stringify is not a function\nat buildError (:323:18)\n(Session info: chrome=114.0.5735.199)\nBuild info: version: '4.10.0', revision: 'c14d967899'\nSystem info: os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '11.0.18'\nDriver info: org.openqa.selenium.chrome.ChromeDriver\nCommand: [748156ce82a3898c61c8bc461a5ecbbb, findElement {using=name, value=aspnetForm}]\nCapabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 114.0.5735.199, chrome: {chromedriverVersion: 114.0.5735.90 (386bc09e8f4f..., userDataDir: C:\\Users\\baluz\\AppData\\Loca...}, goog:chromeOptions: {debuggerAddress: localhost:58574}, networkConnectionEnabled: false, pageLoadStrategy: normal, platformName: windows, proxy: Proxy(), se:cdp: ws://localhost:58574/devtoo..., se:cdpVersion: 114.0.5735.199, setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, webauthn:extension:minPinLength: true, webauthn:extension:prf: true, webauthn:virtualAuthenticators: true}\nSession ID: 748156ce82a3898c61c8bc461a5ecbbb\nat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\nat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\nat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\nat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)\nat org.openqa.selenium.remote.codec.w3c.W3CHttpResponseCodec.createException(W3CHttpResponseCodec.java:199)\nat org.openqa.selenium.remote.codec.w3c.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:132)\nat org.openqa.selenium.remote.codec.w3c.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:51)\nat org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:191)\nat org.openqa.selenium.remote.service.DriverCommandExecutor.invokeExecute(DriverCommandExecutor.java:196)\nat org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:171)\nat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:531)\nat org.openqa.selenium.remote.ElementLocation$ElementFinder$2.findElement(ElementLocation.java:165)\nat org.openqa.selenium.remote.ElementLocation.findElement(ElementLocation.java:66)\nat org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:350)\nat org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:344)\nat com.basePage.EX3.main(EX3.java:91)</p>\n"},{"tags":["java","spring-boot","websocket","stomp","sockjs"],"answers":[{"tags":[],"owner":{"account_id":469790,"reputation":1689,"user_id":876595,"display_name":"chehsunliu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689823520,"creation_date":1689823520,"answer_id":76726488,"question_id":76715329,"body_markdown":"Your client connects to the port `8080`, but the allowed origin is set to `5501`. They should be the same in this case.","title":"How to fix CORS error when connecting WebSocket via STOMP in Spring Boot?","body":"<p>Your client connects to the port <code>8080</code>, but the allowed origin is set to <code>5501</code>. They should be the same in this case.</p>\n"}],"owner":{"account_id":24406148,"reputation":1,"user_id":18334307,"display_name":"hieunguyennvvt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":181,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689823520,"creation_date":1689701745,"question_id":76715329,"body_markdown":"I am building a chat application using Spring Boot and JavaScript, but I am getting an error:\r\n```\r\nAccess to XMLHttpRequest at &#39;http://localhost:8080/ws/chat/info?t=1689700945725&#39; ↗ from origin &#39;http://localhost:5501&#39; has been blocked by CORS policy: No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource.\r\n```\r\n\r\nHere is my code...\r\n\r\nSecurityConfig:\r\n```java\r\n@Bean\r\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n    http\r\n            .csrf(AbstractHttpConfigurer::disable)\r\n            .cors(AbstractHttpConfigurer::disable)\r\n            .authorizeHttpRequests(authorize -&gt; authorize\r\n                    .requestMatchers(&quot;/user/**&quot;).permitAll()\r\n                    .anyRequest().authenticated()\r\n            )\r\n            .authenticationProvider(authenticationProvider)\r\n            .addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class);\r\n    return http.build();\r\n}\r\n```\r\nStompConfig:\r\n```java\r\n@Override\r\npublic void registerStompEndpoints(StompEndpointRegistry registry) {\r\n    registry.addEndpoint(&quot;/ws/chat&quot;).setAllowedOrigins(&quot;http://localhost:5501&quot;).withSockJS();\r\n}\r\n\r\n@Override\r\npublic void configureMessageBroker(MessageBrokerRegistry registry) {\r\n    registry.setApplicationDestinationPrefixes(&quot;/app&quot;);\r\n    registry.enableSimpleBroker(&quot;/topic&quot;);\r\n}\r\n```\r\nand client:\r\n```js\r\nvar socket = new SockJS(&#39;http://localhost:8080/ws/chat&#39;, null, {\r\n    headers: {\r\n        Authorization: &#39;Bearer &#39; + jwt\r\n    }\r\n});\r\nstompClient = Stomp.over(socket);\r\nstompClient.connect({}, onConnected, onError);\r\n```\r\n\r\nI tried using `setAllowedOriginPatterns(&quot;http://localhost:5501&quot;)`, but it didn&#39;t work.","title":"How to fix CORS error when connecting WebSocket via STOMP in Spring Boot?","body":"<p>I am building a chat application using Spring Boot and JavaScript, but I am getting an error:</p>\n<pre><code>Access to XMLHttpRequest at 'http://localhost:8080/ws/chat/info?t=1689700945725' ↗ from origin 'http://localhost:5501' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource.\n</code></pre>\n<p>Here is my code...</p>\n<p>SecurityConfig:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n    http\n            .csrf(AbstractHttpConfigurer::disable)\n            .cors(AbstractHttpConfigurer::disable)\n            .authorizeHttpRequests(authorize -&gt; authorize\n                    .requestMatchers(&quot;/user/**&quot;).permitAll()\n                    .anyRequest().authenticated()\n            )\n            .authenticationProvider(authenticationProvider)\n            .addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class);\n    return http.build();\n}\n</code></pre>\n<p>StompConfig:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic void registerStompEndpoints(StompEndpointRegistry registry) {\n    registry.addEndpoint(&quot;/ws/chat&quot;).setAllowedOrigins(&quot;http://localhost:5501&quot;).withSockJS();\n}\n\n@Override\npublic void configureMessageBroker(MessageBrokerRegistry registry) {\n    registry.setApplicationDestinationPrefixes(&quot;/app&quot;);\n    registry.enableSimpleBroker(&quot;/topic&quot;);\n}\n</code></pre>\n<p>and client:</p>\n<pre class=\"lang-js prettyprint-override\"><code>var socket = new SockJS('http://localhost:8080/ws/chat', null, {\n    headers: {\n        Authorization: 'Bearer ' + jwt\n    }\n});\nstompClient = Stomp.over(socket);\nstompClient.connect({}, onConnected, onError);\n</code></pre>\n<p>I tried using <code>setAllowedOriginPatterns(&quot;http://localhost:5501&quot;)</code>, but it didn't work.</p>\n"},{"tags":["java","nfc"],"comments":[{"owner":{"account_id":2755641,"reputation":8688,"user_id":2373819,"display_name":"Andrew"},"score":0,"creation_date":1689843387,"post_id":76726486,"comment_id":135271713,"body_markdown":"What have you put in your Manifest xml? Though note just adding the right Intent items to your manifest is not a good way to detect NFC tags when your App is already running, you should use a fore ground method like `enableReaderMode` for that.","body":"What have you put in your Manifest xml? Though note just adding the right Intent items to your manifest is not a good way to detect NFC tags when your App is already running, you should use a fore ground method like <code>enableReaderMode</code> for that."},{"owner":{"account_id":27568466,"reputation":11,"user_id":21040137,"display_name":"Liem"},"score":0,"creation_date":1689858187,"post_id":76726486,"comment_id":135274800,"body_markdown":"I put this &lt;action android:name=&quot;android.nfc.action.NDEF_DISCOVERED&quot;/&gt; in my manifest. So I have to use foreground instead of using intent filter right? Cause i want to detect NFC tags from within the app","body":"I put this &lt;action android:name=&quot;android.nfc.action.NDEF_DISCOVERED&quot;/&gt; in my manifest. So I have to use foreground instead of using intent filter right? Cause i want to detect NFC tags from within the app"},{"owner":{"account_id":27568466,"reputation":11,"user_id":21040137,"display_name":"Liem"},"score":0,"creation_date":1689862030,"post_id":76726486,"comment_id":135275771,"body_markdown":"It&#39;s solved. Thanks, i followed your instructions to use `enabledReaderMode`. But how to get rid of pop up &quot;Choose an action&quot; after switching activity?","body":"It&#39;s solved. Thanks, i followed your instructions to use <code>enabledReaderMode</code>. But how to get rid of pop up &quot;Choose an action&quot; after switching activity?"},{"owner":{"account_id":2755641,"reputation":8688,"user_id":2373819,"display_name":"Andrew"},"score":0,"creation_date":1689870831,"post_id":76726486,"comment_id":135277971,"body_markdown":"I find it best user experience to use `enableReaderMode` in all activities, for any Activity that does not use NFC have any empty `onTagDiscovered`","body":"I find it best user experience to use <code>enableReaderMode</code> in all activities, for any Activity that does not use NFC have any empty <code>onTagDiscovered</code>"}],"owner":{"account_id":27568466,"reputation":11,"user_id":21040137,"display_name":"Liem"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689823479,"creation_date":1689823479,"question_id":76726486,"body_markdown":"I created an activity which will detect nfc tags. When an nfc tag with the appropriate id is detected it will switch activities. But right now my activity is not responding to anything.\r\n\r\nhere is the code i wrote\r\n\r\n\r\n```\r\n@Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_scan);\r\n\r\n   handleNfcIntent(getIntent());\r\n   }\r\n\r\nprivate void handleNfcIntent(Intent intent) {\r\n        String action = intent.getAction();\r\n        if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(action)) {\r\n            Tag tag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);\r\n            if (tag != null) {\r\n                String nfcTagId = byteArrayToHexString(tag.getId());\r\n\r\n                TextView tagIdTextView = findViewById(R.id.tagid);\r\n                tagIdTextView.setText(&quot;Tag ID: &quot; + nfcTagId);\r\n\r\n                if (nfcTagId.equals(&quot;53:44:77:A1:00:00:01&quot;)) {\r\n                    Intent targetIntent = new Intent(this, MenuActivity.class);\r\n                    startActivity(targetIntent);\r\n                }\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\n\r\nDid i miss something?","title":"Why my activity not change when NFC Tag Discovered?","body":"<p>I created an activity which will detect nfc tags. When an nfc tag with the appropriate id is detected it will switch activities. But right now my activity is not responding to anything.</p>\n<p>here is the code i wrote</p>\n<pre><code>@Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_scan);\n\n   handleNfcIntent(getIntent());\n   }\n\nprivate void handleNfcIntent(Intent intent) {\n        String action = intent.getAction();\n        if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(action)) {\n            Tag tag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);\n            if (tag != null) {\n                String nfcTagId = byteArrayToHexString(tag.getId());\n\n                TextView tagIdTextView = findViewById(R.id.tagid);\n                tagIdTextView.setText(&quot;Tag ID: &quot; + nfcTagId);\n\n                if (nfcTagId.equals(&quot;53:44:77:A1:00:00:01&quot;)) {\n                    Intent targetIntent = new Intent(this, MenuActivity.class);\n                    startActivity(targetIntent);\n                }\n            }\n        }\n    }\n</code></pre>\n<p>Did i miss something?</p>\n"},{"tags":["java","spring-boot","apache-kafka","keytab"],"comments":[{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1689601453,"post_id":76702174,"comment_id":135232522,"body_markdown":"The log message is clearly telling you that **it DID find the file** but it doesn&#39;t like the key _in_ the file. Specifically it found type 23=RC4-HMAC which is generally considered weak, and deprecated by IANA. Since you didn&#39;t configure permitted_enctypes it uses a default which excludes RC4 unless &#39;allow_weak_crypto&#39; is set and I&#39;m not clear where _that_ defaults; it may well be system dependent. The best solution is to get a key for a modern/strong algorithm (AES) but of course that depends on the KDC you are using.","body":"The log message is clearly telling you that <b>it DID find the file</b> but it doesn&#39;t like the key <i>in</i> the file. Specifically it found type 23=RC4-HMAC which is generally considered weak, and deprecated by IANA. Since you didn&#39;t configure permitted_enctypes it uses a default which excludes RC4 unless &#39;allow_weak_crypto&#39; is set and I&#39;m not clear where <i>that</i> defaults; it may well be system dependent. The best solution is to get a key for a modern/strong algorithm (AES) but of course that depends on the KDC you are using."},{"owner":{"account_id":29031759,"reputation":1,"user_id":22238479,"display_name":"iamnewbbb"},"score":0,"creation_date":1689672298,"post_id":76702174,"comment_id":135243423,"body_markdown":"@dave_thompson_085 Thanks for your reply and suggest mr.Dave. I will discuss with the team about the key file and will update you again.","body":"@dave_thompson_085 Thanks for your reply and suggest mr.Dave. I will discuss with the team about the key file and will update you again."},{"owner":{"account_id":29031759,"reputation":1,"user_id":22238479,"display_name":"iamnewbbb"},"score":0,"creation_date":1689749964,"post_id":76702174,"comment_id":135255560,"body_markdown":"@dave_thompson_085 The keytab encryption type is ArcFour with HMAC/md5 so it&#39;s a weak encryp type right?. I&#39;ve tried adding &#39;allow_weak_crypto&#39; to krb5.conf and it works! I can connect to the cluster. However, I don&#39;t really know  about&#39;allow_weak_crypto&#39; much. are there any weakness or impacts to my cluster?","body":"@dave_thompson_085 The keytab encryption type is ArcFour with HMAC/md5 so it&#39;s a weak encryp type right?. I&#39;ve tried adding &#39;allow_weak_crypto&#39; to krb5.conf and it works! I can connect to the cluster. However, I don&#39;t really know  about&#39;allow_weak_crypto&#39; much. are there any weakness or impacts to my cluster?"},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1689881350,"post_id":76702174,"comment_id":135279988,"body_markdown":"ArcFour is just an alternate name for RC4; see wikipedia. The applicable weaknesses of the RC4-HMAC enctype in Kerberos, which are due to the key hash as well as the encryption itself, are detailed in [the deprecating RFC 8429](https://www.rfc-editor.org/rfc/rfc8429.html#section-5). What risks these cause in your environment could vary; to answer that you need a security expert familiar with your environment, such as your company&#39;s data/IT security officer.","body":"ArcFour is just an alternate name for RC4; see wikipedia. The applicable weaknesses of the RC4-HMAC enctype in Kerberos, which are due to the key hash as well as the encryption itself, are detailed in <a href=\"https://www.rfc-editor.org/rfc/rfc8429.html#section-5\" rel=\"nofollow noreferrer\">the deprecating RFC 8429</a>. What risks these cause in your environment could vary; to answer that you need a security expert familiar with your environment, such as your company&#39;s data/IT security officer."}],"answers":[{"tags":[],"owner":{"account_id":29031759,"reputation":1,"user_id":22238479,"display_name":"iamnewbbb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689823361,"creation_date":1689823361,"answer_id":76726481,"question_id":76702174,"body_markdown":"In my case, the issue is about Java version. My keytab encryption type is ArcFour with HMAC/md5 and Java 18 that I used for my app is not allow to read This keytab file. I&#39;ve tried downgrading to Java 11 and connecting Kafka an it works fine without any additional values.\r\n\r\nSo the solution (in case of using Java version 18 and keytab encryption type is weak type) is to set additional value in krb5.conf &quot;allow_weak_crypto = true&quot;. By the way, it also depends on the keytab encryption type, if the algorithm is modern or strong I don&#39;t think it is a problem.","title":"How to fix &quot;Key for the principal &lt;principal user&gt; not available in &lt;keytab file&gt;&quot; in Java 18 Spring Boot","body":"<p>In my case, the issue is about Java version. My keytab encryption type is ArcFour with HMAC/md5 and Java 18 that I used for my app is not allow to read This keytab file. I've tried downgrading to Java 11 and connecting Kafka an it works fine without any additional values.</p>\n<p>So the solution (in case of using Java version 18 and keytab encryption type is weak type) is to set additional value in krb5.conf &quot;allow_weak_crypto = true&quot;. By the way, it also depends on the keytab encryption type, if the algorithm is modern or strong I don't think it is a problem.</p>\n"}],"owner":{"account_id":29031759,"reputation":1,"user_id":22238479,"display_name":"iamnewbbb"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":671,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76726481,"answer_count":1,"score":0,"last_activity_date":1689823361,"creation_date":1689577795,"question_id":76702174,"body_markdown":"I am trying to connect to Kafka using keytab file to login but found this following exceptions and authentication failed;\r\n\r\n&gt; Found unsupported keytype (23) for AAA@EXAMPLE.TH \r\n&gt;\r\n&gt; 2023-07-17 09:56:54 Key for the principal AAA@EXAMPLE.TH not available in /etc/example.keytab \r\n&gt;\r\n&gt; 2023-07-17 09:56:54 \\[Krb5LoginModule\\] authentication failed \r\n&gt;\r\n&gt; 2023-07-17 09:56:54 Unable to obtain password from user \r\n\r\nI double-checked the jaas file that I put the right path for keytab file but it seemed not find the keytab file in that specified path. \r\n\r\nHere&#39;s the values in my jaas file;\r\n\r\n```\r\nKafkaClient { \r\n        com.sun.security.auth.module.Krb5LoginModule required \r\n        useKeyTab=true\r\n        storeKey=true\r\n        debug=true\r\n        isInitiator=true\r\n        doNotPrompt=true\r\n\r\n        keyTab=&quot;/etc/example.keytab&quot;\r\n        principal=&quot;AAA@EXAMPLE.TH&quot;;\r\n};\r\n```\r\n\r\nAnd krb5.conf values;\r\n\r\n```\r\n# includedir /etc/krb5.conf.d/\r\n\r\n[logging]\r\n    default = FILE:/var/log/krb5libs.log \r\n    kdc = FILE:/var/log/krb5kdc.log\r\n    admin_server = FILE:/var/log/kadmind.log\r\n[libdefaults]\r\n    default_realm = EXAMPLE.TH\r\n    kdc_timesync = 1\r\n    ticket_lifetime = 7d\r\n    #renew_lifetime = 15d\r\n[realms]\r\n    EXAMPLE.TH = {\r\n        admin_server = example.th\r\n        kdc = example.th\r\n        default_domain = EXAMPLE.TH\r\n    }\r\n```\r\n\r\nIn addition, this is my application.properties file \r\n\r\n```\r\n## kafka security\r\nspring.kafka.properties.security.protocol=SASL_SSL\r\nspring.kafka.properties.sasl.mechanism=GSSAPI\r\nspring.kafka.properties.sasl.kerberos.service.name=bigfoot\r\nspring.kafka.properties.ssl.truststore.location=./keyuat/godzilla.client.truststore.jks\r\nspring.kafka.properties.ssl.truststore.password=godzilla007\r\n\r\n## kafka consumer\r\nspring.kafka.consumer.bootstrap-servers=godzilla01:9092,godzilla02:9092,godzilla03:9092\r\nspring.kafka.consumer.group-id=godzilla_lookup\r\nspring.kafka.consumer.enable-auto-commit=false\r\nspring.kafka.consumer.auto-offset-reset=latest\r\nspring.kafka.topic.name=prod-godz\r\n```\r\n\r\nCould anyone help me fixing this exception? I am very new to Kafka and just started working as Java Developer about 10 months. So any comments or suggestions are welcome and appreciated. And I can provide more info if needed.\r\n\r\nThanks in advance!","title":"How to fix &quot;Key for the principal &lt;principal user&gt; not available in &lt;keytab file&gt;&quot; in Java 18 Spring Boot","body":"<p>I am trying to connect to Kafka using keytab file to login but found this following exceptions and authentication failed;</p>\n<blockquote>\n<p>Found unsupported keytype (23) for AAA@EXAMPLE.TH</p>\n<p>2023-07-17 09:56:54 Key for the principal AAA@EXAMPLE.TH not available in /etc/example.keytab</p>\n<p>2023-07-17 09:56:54 [Krb5LoginModule] authentication failed</p>\n<p>2023-07-17 09:56:54 Unable to obtain password from user</p>\n</blockquote>\n<p>I double-checked the jaas file that I put the right path for keytab file but it seemed not find the keytab file in that specified path.</p>\n<p>Here's the values in my jaas file;</p>\n<pre><code>KafkaClient { \n        com.sun.security.auth.module.Krb5LoginModule required \n        useKeyTab=true\n        storeKey=true\n        debug=true\n        isInitiator=true\n        doNotPrompt=true\n\n        keyTab=&quot;/etc/example.keytab&quot;\n        principal=&quot;AAA@EXAMPLE.TH&quot;;\n};\n</code></pre>\n<p>And krb5.conf values;</p>\n<pre><code># includedir /etc/krb5.conf.d/\n\n[logging]\n    default = FILE:/var/log/krb5libs.log \n    kdc = FILE:/var/log/krb5kdc.log\n    admin_server = FILE:/var/log/kadmind.log\n[libdefaults]\n    default_realm = EXAMPLE.TH\n    kdc_timesync = 1\n    ticket_lifetime = 7d\n    #renew_lifetime = 15d\n[realms]\n    EXAMPLE.TH = {\n        admin_server = example.th\n        kdc = example.th\n        default_domain = EXAMPLE.TH\n    }\n</code></pre>\n<p>In addition, this is my application.properties file</p>\n<pre><code>## kafka security\nspring.kafka.properties.security.protocol=SASL_SSL\nspring.kafka.properties.sasl.mechanism=GSSAPI\nspring.kafka.properties.sasl.kerberos.service.name=bigfoot\nspring.kafka.properties.ssl.truststore.location=./keyuat/godzilla.client.truststore.jks\nspring.kafka.properties.ssl.truststore.password=godzilla007\n\n## kafka consumer\nspring.kafka.consumer.bootstrap-servers=godzilla01:9092,godzilla02:9092,godzilla03:9092\nspring.kafka.consumer.group-id=godzilla_lookup\nspring.kafka.consumer.enable-auto-commit=false\nspring.kafka.consumer.auto-offset-reset=latest\nspring.kafka.topic.name=prod-godz\n</code></pre>\n<p>Could anyone help me fixing this exception? I am very new to Kafka and just started working as Java Developer about 10 months. So any comments or suggestions are welcome and appreciated. And I can provide more info if needed.</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","logging","log4j2","thread-local"],"comments":[{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1689759484,"post_id":76703539,"comment_id":135257531,"body_markdown":"On Tomcat the [`Constants.ENABLE_THREADLOCALS`](https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/util/Constants.html#ENABLE_THREADLOCALS) kill switch is disabled. Can you explain how you use `ReusableMessageFactory` in your code? By the properties of `ThreadLocal`, there is only one entry per thread. Do you use thousands of threads or virtual threads?","body":"On Tomcat the <a href=\"https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/util/Constants.html#ENABLE_THREADLOCALS\" rel=\"nofollow noreferrer\"><code>Constants.ENABLE_THREADLOCALS</code></a> kill switch is disabled. Can you explain how you use <code>ReusableMessageFactory</code> in your code? By the properties of <code>ThreadLocal</code>, there is only one entry per thread. Do you use thousands of threads or virtual threads?"},{"owner":{"account_id":4104040,"reputation":180,"user_id":3568853,"display_name":"chengzi"},"score":0,"creation_date":1689820892,"post_id":76703539,"comment_id":135268644,"body_markdown":"@PiotrP.Karwasz  tks.  I find we did indeed misuse the `ReusableMessageFactory` .  I will provide a detailed description of how we misused it in my answer.","body":"@PiotrP.Karwasz  tks.  I find we did indeed misuse the <code>ReusableMessageFactory</code> .  I will provide a detailed description of how we misused it in my answer."}],"answers":[{"tags":[],"owner":{"account_id":4104040,"reputation":180,"user_id":3568853,"display_name":"chengzi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689822639,"creation_date":1689822639,"answer_id":76726448,"question_id":76703539,"body_markdown":"After read log4j code,  We did indeed misuse the `ReusableMessageFactory`, our code :\r\n\r\n```java\r\n@AllArgsConstructor\r\npublic class MyLogger {\r\n\r\n    private static final MessageFactory2 MESSAGE_FACTORY = new ReusableMessageFactory();\r\n    private Logger logger;\r\n\r\n    public static MyLogger getLogger(String name) {\r\n        return new MyLogger(org.slf4j.LoggerFactory.getLogger(name));\r\n    }\r\n\r\n    public void info(String title, String format, Map&lt;String, String&gt; attrs, Object... arguments) {\r\n        String str = MESSAGE_FACTORY.newMessage(format, arguments).getFormattedMessage();\r\n        // append title, tags or trace tags...\r\n        String message = appendTitleTag(str);\r\n        logger.debug(message);\r\n    }\r\n    .....\r\n}\r\n```\r\n\r\n`ReusableMessageFactory.newMessage()` then need call `ReusableMessageFactory.release()` to set `reserved` to false after log, bus we did not call.\r\n\r\nThat&#39;s why wo have so many threadLocals. \r\n\r\nOther:\r\n1. `ReusableParameterizedMessage.buffer` remove static modifier, [commit link](https://github.com/apache/logging-log4j2/commit/ae87a679f4a04a2b1f3458fe62e469ae806a7eb9)","title":"log4j2 ReusableMessageFactory.getParameterized() create too many threadLocal, 125MB","body":"<p>After read log4j code,  We did indeed misuse the <code>ReusableMessageFactory</code>, our code :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@AllArgsConstructor\npublic class MyLogger {\n\n    private static final MessageFactory2 MESSAGE_FACTORY = new ReusableMessageFactory();\n    private Logger logger;\n\n    public static MyLogger getLogger(String name) {\n        return new MyLogger(org.slf4j.LoggerFactory.getLogger(name));\n    }\n\n    public void info(String title, String format, Map&lt;String, String&gt; attrs, Object... arguments) {\n        String str = MESSAGE_FACTORY.newMessage(format, arguments).getFormattedMessage();\n        // append title, tags or trace tags...\n        String message = appendTitleTag(str);\n        logger.debug(message);\n    }\n    .....\n}\n</code></pre>\n<p><code>ReusableMessageFactory.newMessage()</code> then need call <code>ReusableMessageFactory.release()</code> to set <code>reserved</code> to false after log, bus we did not call.</p>\n<p>That's why wo have so many threadLocals.</p>\n<p>Other:</p>\n<ol>\n<li><code>ReusableParameterizedMessage.buffer</code> remove static modifier, <a href=\"https://github.com/apache/logging-log4j2/commit/ae87a679f4a04a2b1f3458fe62e469ae806a7eb9\" rel=\"nofollow noreferrer\">commit link</a></li>\n</ol>\n"}],"owner":{"account_id":4104040,"reputation":180,"user_id":3568853,"display_name":"chengzi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689822639,"creation_date":1689589520,"question_id":76703539,"body_markdown":"In my project, using `ReusableMessageFactory` create log message, which call\r\n\r\n```java\r\nprivate static ThreadLocal&lt;ReusableParameterizedMessage&gt; threadLocalParameterized = new ThreadLocal&lt;&gt;();\r\nprivate static ReusableParameterizedMessage getParameterized() {\r\n    ReusableParameterizedMessage result = threadLocalParameterized.get();\r\n    if (result == null) {\r\n        result = new ReusableParameterizedMessage();\r\n        threadLocalParameterized.set(result);\r\n    }\r\n    return result.reserved ? new ReusableParameterizedMessage().reserve() : result.reserve();\r\n}\r\n\r\npublic static void release(final Message message) { // LOG4J2-1583\r\n    if (message instanceof Clearable) {\r\n        ((Clearable) message).clear();\r\n    }\r\n}\r\n```\r\n\r\nIn the last line, `result.reserved ? new ReusableParameterizedMessage().reserve() : result.reserve();`, create too many `ReusableParameterizedMessage` which then create threadLocal and not call `threadLocal.remove()`, too may threadLocal exist.\r\n\r\nIn my memory dump,  one tomcat thread have 155857 threadLocal entry where almost created by `ReusableParameterizedMessage.buffer`, occupy `125MB`.\r\n\r\nTwo many threadLocal lead to frequently threadLoalMap hash conflict, `ThreadLocalMap.getEntryAfterMiss()` consuming excessive CPU time. \r\n\r\nUsually `logger.info()` will call `ReusableMessageFactory.release()` set `reserved` to false,  why create so many `ReusableParameterizedMessage` and `buffer`.\r\n\r\nBelow is Eclipse Memory Analyzer  screen.\r\n\r\n[![very much threadLocal occupy large memory](https://i.stack.imgur.com/N9gHL.jpg)](https://i.stack.imgur.com/N9gHL.jpg)\r\n\r\nIs this normal? if not, how fix this?","title":"log4j2 ReusableMessageFactory.getParameterized() create too many threadLocal, 125MB","body":"<p>In my project, using <code>ReusableMessageFactory</code> create log message, which call</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static ThreadLocal&lt;ReusableParameterizedMessage&gt; threadLocalParameterized = new ThreadLocal&lt;&gt;();\nprivate static ReusableParameterizedMessage getParameterized() {\n    ReusableParameterizedMessage result = threadLocalParameterized.get();\n    if (result == null) {\n        result = new ReusableParameterizedMessage();\n        threadLocalParameterized.set(result);\n    }\n    return result.reserved ? new ReusableParameterizedMessage().reserve() : result.reserve();\n}\n\npublic static void release(final Message message) { // LOG4J2-1583\n    if (message instanceof Clearable) {\n        ((Clearable) message).clear();\n    }\n}\n</code></pre>\n<p>In the last line, <code>result.reserved ? new ReusableParameterizedMessage().reserve() : result.reserve();</code>, create too many <code>ReusableParameterizedMessage</code> which then create threadLocal and not call <code>threadLocal.remove()</code>, too may threadLocal exist.</p>\n<p>In my memory dump,  one tomcat thread have 155857 threadLocal entry where almost created by <code>ReusableParameterizedMessage.buffer</code>, occupy <code>125MB</code>.</p>\n<p>Two many threadLocal lead to frequently threadLoalMap hash conflict, <code>ThreadLocalMap.getEntryAfterMiss()</code> consuming excessive CPU time.</p>\n<p>Usually <code>logger.info()</code> will call <code>ReusableMessageFactory.release()</code> set <code>reserved</code> to false,  why create so many <code>ReusableParameterizedMessage</code> and <code>buffer</code>.</p>\n<p>Below is Eclipse Memory Analyzer  screen.</p>\n<p><a href=\"https://i.stack.imgur.com/N9gHL.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/N9gHL.jpg\" alt=\"very much threadLocal occupy large memory\" /></a></p>\n<p>Is this normal? if not, how fix this?</p>\n"},{"tags":["java","spring-boot","alfresco"],"answers":[{"tags":[],"owner":{"account_id":3037790,"reputation":466,"user_id":2575459,"display_name":"fateme maddahi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1689822407,"creation_date":1689822407,"answer_id":76726427,"question_id":76721840,"body_markdown":"Alfresco provides several ways to transform documents and files into different formats. Here are two approaches you can use to call the transformer of Alfresco (all in one) with Java Spring Boot:\r\n\r\n1. Calling the Alfresco REST API: Alfresco provides a REST API that allows you to perform a wide range of operations, including transforming documents and files. To transform a document using the Alfresco REST API, you can send a POST request to the `/api/-default-/public/alfresco/versions/1/transformations` endpoint and include the document to be transformed in the request body. The response will include the transformed document in the requested format.\r\n\r\nHere&#39;s some sample code that demonstrates how to use the Alfresco REST API to transform a document:\r\n\r\n```java\r\nRestTemplate restTemplate = new RestTemplate();\r\nHttpHeaders headers = new HttpHeaders();\r\nheaders.setContentType(MediaType.MULTIPART_FORM_DATA);\r\n\r\n// Load the document to be transformed into a byte array\r\nFile file = new File(&quot;path/to/document.pdf&quot;);\r\nbyte[] documentBytes = FileUtils.readFileToByteArray(file);\r\n\r\n// Construct the request body\r\nMultiValueMap&lt;String, Object&gt; body = new LinkedMultiValueMap&lt;&gt;();\r\nbody.add(&quot;filedata&quot;, new ByteArrayResource(documentBytes));\r\nbody.add(&quot;sourceMimetype&quot;, &quot;application/pdf&quot;);\r\nbody.add(&quot;targetMimetype&quot;, &quot;application/vnd.openxmlformats-officedocument.wordprocessingml.document&quot;);\r\n\r\n// Send the POST request to the Alfresco REST API\r\nHttpEntity&lt;MultiValueMap&lt;String, Object&gt;&gt; requestEntity = new HttpEntity&lt;&gt;(body, headers);\r\nResponseEntity&lt;byte[]&gt; responseEntity = restTemplate.postForEntity(\r\n    &quot;http://localhost:8080/alfresco/api/-default-/public/alfresco/versions/1/transformations&quot;,\r\n    requestEntity,\r\n    byte[].class\r\n);\r\n\r\n// Save the transformed document to a file\r\nbyte[] transformedBytes = responseEntity.getBody();\r\nFile transformedFile = new File(&quot;path/to/transformed.docx&quot;);\r\nFileUtils.writeByteArrayToFile(transformedFile, transformedBytes);\r\n```\r\n\r\n2. Using the Alfresco Java API: Alfresco also provides a Java API that allows you to perform a wide range of operations, including transforming documents and files. To transform a document using the Alfresco Java API, you can use the `ContentService` and `TransformerService` classes to retrieve the content of the document and transform it into the desired format.\r\n\r\nHere&#39;s some sample code that demonstrates how to use the Alfresco Java API to transform a document:\r\n\r\n```java\r\nAuthenticationUtils.setFullyAuthenticatedUser(&quot;admin&quot;, &quot;admin&quot;);\r\n\r\n// Get a reference to the Alfresco ContentService\r\nContentService contentService = serviceRegistry.getContentService();\r\n\r\n// Get a reference to the Alfresco TransformerService\r\nTransformerService transformerService = serviceRegistry.getTransformerService();\r\n\r\n// Load the document to be transformed into a ContentData object\r\nNodeRef nodeRef = new NodeRef(&quot;workspace://SpacesStore/01234567-89ab-cdef-0123-456789abcdef&quot;);\r\nContentData contentData = contentService.getReader(nodeRef, ContentModel.PROP_CONTENT).getContentData();\r\n\r\n// Transform the document into the desired format\r\nContentReader contentReader = contentService.getReader(nodeRef, ContentModel.PROP_CONTENT);\r\nContentWriter contentWriter = contentService.getWriter(nodeRef, ContentModel.PROP_CONTENT, true);\r\nContentTransformer transformer = transformerService.getTransformer(contentReader.getMimetype(), &quot;application/vnd.openxmlformats-officedocument.wordprocessingml.document&quot;);\r\ntransformer.transform(contentReader, contentWriter);\r\n\r\n// Save the transformed document to a file\r\nbyte[] transformedBytes = contentData.getContent();\r\nFile transformedFile = new File(&quot;path/to/transformed.docx&quot;);\r\nFileUtils.writeByteArrayToFile(transformedFile, transformedBytes);\r\n```\r\n\r\nOverall, these approaches allow you to call the transformer of Alfresco (all in one) with Java Spring Boot by using either the Alfresco REST API or the Alfresco Java API. By using one or more of these approaches, you can transform documents and files into different formats to meet your specific needs.","title":"call transformer of alfresco (all in one) with java spring boot ( call api or direct using package methods)","body":"<p>Alfresco provides several ways to transform documents and files into different formats. Here are two approaches you can use to call the transformer of Alfresco (all in one) with Java Spring Boot:</p>\n<ol>\n<li>Calling the Alfresco REST API: Alfresco provides a REST API that allows you to perform a wide range of operations, including transforming documents and files. To transform a document using the Alfresco REST API, you can send a POST request to the <code>/api/-default-/public/alfresco/versions/1/transformations</code> endpoint and include the document to be transformed in the request body. The response will include the transformed document in the requested format.</li>\n</ol>\n<p>Here's some sample code that demonstrates how to use the Alfresco REST API to transform a document:</p>\n<pre class=\"lang-java prettyprint-override\"><code>RestTemplate restTemplate = new RestTemplate();\nHttpHeaders headers = new HttpHeaders();\nheaders.setContentType(MediaType.MULTIPART_FORM_DATA);\n\n// Load the document to be transformed into a byte array\nFile file = new File(&quot;path/to/document.pdf&quot;);\nbyte[] documentBytes = FileUtils.readFileToByteArray(file);\n\n// Construct the request body\nMultiValueMap&lt;String, Object&gt; body = new LinkedMultiValueMap&lt;&gt;();\nbody.add(&quot;filedata&quot;, new ByteArrayResource(documentBytes));\nbody.add(&quot;sourceMimetype&quot;, &quot;application/pdf&quot;);\nbody.add(&quot;targetMimetype&quot;, &quot;application/vnd.openxmlformats-officedocument.wordprocessingml.document&quot;);\n\n// Send the POST request to the Alfresco REST API\nHttpEntity&lt;MultiValueMap&lt;String, Object&gt;&gt; requestEntity = new HttpEntity&lt;&gt;(body, headers);\nResponseEntity&lt;byte[]&gt; responseEntity = restTemplate.postForEntity(\n    &quot;http://localhost:8080/alfresco/api/-default-/public/alfresco/versions/1/transformations&quot;,\n    requestEntity,\n    byte[].class\n);\n\n// Save the transformed document to a file\nbyte[] transformedBytes = responseEntity.getBody();\nFile transformedFile = new File(&quot;path/to/transformed.docx&quot;);\nFileUtils.writeByteArrayToFile(transformedFile, transformedBytes);\n</code></pre>\n<ol start=\"2\">\n<li>Using the Alfresco Java API: Alfresco also provides a Java API that allows you to perform a wide range of operations, including transforming documents and files. To transform a document using the Alfresco Java API, you can use the <code>ContentService</code> and <code>TransformerService</code> classes to retrieve the content of the document and transform it into the desired format.</li>\n</ol>\n<p>Here's some sample code that demonstrates how to use the Alfresco Java API to transform a document:</p>\n<pre class=\"lang-java prettyprint-override\"><code>AuthenticationUtils.setFullyAuthenticatedUser(&quot;admin&quot;, &quot;admin&quot;);\n\n// Get a reference to the Alfresco ContentService\nContentService contentService = serviceRegistry.getContentService();\n\n// Get a reference to the Alfresco TransformerService\nTransformerService transformerService = serviceRegistry.getTransformerService();\n\n// Load the document to be transformed into a ContentData object\nNodeRef nodeRef = new NodeRef(&quot;workspace://SpacesStore/01234567-89ab-cdef-0123-456789abcdef&quot;);\nContentData contentData = contentService.getReader(nodeRef, ContentModel.PROP_CONTENT).getContentData();\n\n// Transform the document into the desired format\nContentReader contentReader = contentService.getReader(nodeRef, ContentModel.PROP_CONTENT);\nContentWriter contentWriter = contentService.getWriter(nodeRef, ContentModel.PROP_CONTENT, true);\nContentTransformer transformer = transformerService.getTransformer(contentReader.getMimetype(), &quot;application/vnd.openxmlformats-officedocument.wordprocessingml.document&quot;);\ntransformer.transform(contentReader, contentWriter);\n\n// Save the transformed document to a file\nbyte[] transformedBytes = contentData.getContent();\nFile transformedFile = new File(&quot;path/to/transformed.docx&quot;);\nFileUtils.writeByteArrayToFile(transformedFile, transformedBytes);\n</code></pre>\n<p>Overall, these approaches allow you to call the transformer of Alfresco (all in one) with Java Spring Boot by using either the Alfresco REST API or the Alfresco Java API. By using one or more of these approaches, you can transform documents and files into different formats to meet your specific needs.</p>\n"}],"owner":{"account_id":117925,"reputation":4564,"user_id":308578,"accept_rate":88,"display_name":"saber tabatabaee yazdi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":160,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76726427,"answer_count":1,"score":1,"last_activity_date":1689822407,"creation_date":1689773222,"question_id":76721840,"body_markdown":"I want to resize images for generating thumbnails \r\n\r\nI have a spring boot application and use this docker yaml block in my docker compose file:\r\n\r\n\r\n\r\n\r\n    transform-core-aio:\r\n      image: alfresco/alfresco-transform-core-aio\r\n      environment:\r\n        JAVA_OPTS: &quot; -XX:MinRAMPercentage=50 -XX:MaxRAMPercentage=80&quot;\r\n      ports:\r\n        - &quot;8088:8090&quot;\r\n\r\nI can see this test page \r\n\r\n[![enter image description here][1]][1]\r\n\r\nand I can convert images via this test page and convert them to another format\r\n\r\nbut i want to do this action via code.\r\n\r\nhow can I use this docker to call the alfresco API .\r\n\r\n        &lt;!-- https://mvnrepository.com/artifact/org.alfresco/alfresco-transform-core --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.alfresco&lt;/groupId&gt;\r\n            &lt;artifactId&gt;alfresco-transform-core&lt;/artifactId&gt;\r\n            &lt;version&gt;2.3.0&lt;/version&gt;\r\n            &lt;type&gt;pom&lt;/type&gt;\r\n        &lt;/dependency&gt;\r\n\r\ni try to use this but i cant.\r\n\r\nis there any block of code that help me to use this docker file?\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ucrAd.png","title":"call transformer of alfresco (all in one) with java spring boot ( call api or direct using package methods)","body":"<p>I want to resize images for generating thumbnails</p>\n<p>I have a spring boot application and use this docker yaml block in my docker compose file:</p>\n<pre><code>transform-core-aio:\n  image: alfresco/alfresco-transform-core-aio\n  environment:\n    JAVA_OPTS: &quot; -XX:MinRAMPercentage=50 -XX:MaxRAMPercentage=80&quot;\n  ports:\n    - &quot;8088:8090&quot;\n</code></pre>\n<p>I can see this test page</p>\n<p><a href=\"https://i.stack.imgur.com/ucrAd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ucrAd.png\" alt=\"enter image description here\" /></a></p>\n<p>and I can convert images via this test page and convert them to another format</p>\n<p>but i want to do this action via code.</p>\n<p>how can I use this docker to call the alfresco API .</p>\n<pre><code>    &lt;!-- https://mvnrepository.com/artifact/org.alfresco/alfresco-transform-core --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.alfresco&lt;/groupId&gt;\n        &lt;artifactId&gt;alfresco-transform-core&lt;/artifactId&gt;\n        &lt;version&gt;2.3.0&lt;/version&gt;\n        &lt;type&gt;pom&lt;/type&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>i try to use this but i cant.</p>\n<p>is there any block of code that help me to use this docker file?</p>\n"},{"tags":["java","kotlin","netty"],"owner":{"account_id":20297592,"reputation":735,"user_id":14887783,"display_name":"SageJustus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689821117,"creation_date":1689645062,"question_id":76709067,"body_markdown":"I have two routing addresses, and I want to handle these two routings separately, but I haven&#39;t found an entry point.\r\n\r\nFor example, there are two routing paths:\r\n```\r\nws://192.168.101.7:8088/article/upload\r\nws://192.168.101.7:8088/user/upload\r\n```\r\nserver code:\r\n```kotlin\r\ntry {\r\n    val serverBootstrap = ServerBootstrap()\r\n    serverBootstrap.group(bossGroup, workerGroup)\r\n        .channel(NioServerSocketChannel::class.java)\r\n        .childHandler(articleUploadHandler)\r\n        .childHandler(hotHubUploadChannelHandler)\r\n    val channel = serverBootstrap.bind(8088).sync().channel()\r\n    println(&quot;websocket服务已启动&quot;)\r\n    channel.closeFuture().sync()\r\n}finally {\r\n    bossGroup.shutdownGracefully()\r\n    workerGroup.shutdownGracefully()\r\n}\r\n```\r\nChildHandler\r\n```kotlin\r\nclass ArticleUploadChannelHandler : ChannelInitializer&lt;Channel&gt;() {\r\n\r\n    override fun initChannel(ch: Channel?) {\r\n        ch!!.pipeline().addLast(\r\n            HttpServerCodec(),\r\n            HttpObjectAggregator(65536),\r\n            WebSocketServerProtocolHandler(&quot;/article/upload&quot;),\r\n            MessageHandler(articleItemService),\r\n        )\r\n    }\r\n}\r\n```\r\nBased on my guesses, I tried two options:\r\n1. Add two `childHandler`, but the test failed, only one `childHandler` works.\r\n2. Let `MessageHandler` or `initChannel` get the routing path, but I don&#39;t know how.\r\n\r\nHow should it be solved?","title":"How to use websocket in Netty to make corresponding processing according to the routing address?","body":"<p>I have two routing addresses, and I want to handle these two routings separately, but I haven't found an entry point.</p>\n<p>For example, there are two routing paths:</p>\n<pre><code>ws://192.168.101.7:8088/article/upload\nws://192.168.101.7:8088/user/upload\n</code></pre>\n<p>server code:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>try {\n    val serverBootstrap = ServerBootstrap()\n    serverBootstrap.group(bossGroup, workerGroup)\n        .channel(NioServerSocketChannel::class.java)\n        .childHandler(articleUploadHandler)\n        .childHandler(hotHubUploadChannelHandler)\n    val channel = serverBootstrap.bind(8088).sync().channel()\n    println(&quot;websocket服务已启动&quot;)\n    channel.closeFuture().sync()\n}finally {\n    bossGroup.shutdownGracefully()\n    workerGroup.shutdownGracefully()\n}\n</code></pre>\n<p>ChildHandler</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class ArticleUploadChannelHandler : ChannelInitializer&lt;Channel&gt;() {\n\n    override fun initChannel(ch: Channel?) {\n        ch!!.pipeline().addLast(\n            HttpServerCodec(),\n            HttpObjectAggregator(65536),\n            WebSocketServerProtocolHandler(&quot;/article/upload&quot;),\n            MessageHandler(articleItemService),\n        )\n    }\n}\n</code></pre>\n<p>Based on my guesses, I tried two options:</p>\n<ol>\n<li>Add two <code>childHandler</code>, but the test failed, only one <code>childHandler</code> works.</li>\n<li>Let <code>MessageHandler</code> or <code>initChannel</code> get the routing path, but I don't know how.</li>\n</ol>\n<p>How should it be solved?</p>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":22376,"reputation":33015,"user_id":55094,"accept_rate":85,"display_name":"Elazar Leibovich"},"score":11,"creation_date":1312546302,"post_id":115692,"comment_id":8293062,"body_markdown":"It&#39;s worth mentioning that with JPA you can have type safe queries, by adding the type to the createQuery.","body":"It&#39;s worth mentioning that with JPA you can have type safe queries, by adding the type to the createQuery."},{"owner":{"account_id":418472,"reputation":827,"user_id":795051,"accept_rate":83,"display_name":"Dominik"},"score":7,"creation_date":1360147675,"post_id":115692,"comment_id":20603139,"body_markdown":"A little late but `sess.createQuery(&quot;from Cat cat&quot;, Cat.class);` as Elazar mentioned.","body":"A little late but <code>sess.createQuery(&quot;from Cat cat&quot;, Cat.class);</code> as Elazar mentioned."}],"answers":[{"tags":[],"owner":{"account_id":9002,"reputation":1333,"user_id":16448,"display_name":"tyshock"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1222099062,"creation_date":1222099062,"answer_id":115714,"question_id":115692,"body_markdown":"In our code we annotate the calling methods with:\r\n\r\n@SuppressWarnings(&quot;unchecked&quot;)\r\n\r\nI know it seems like a hack, but a co-developer checked recently and found that was all we could do.","title":"How to avoid type safety warnings with Hibernate HQL results?","body":"<p>In our code we annotate the calling methods with:</p>\n\n<p>@SuppressWarnings(\"unchecked\")</p>\n\n<p>I know it seems like a hack, but a co-developer checked recently and found that was all we could do.</p>\n"},{"tags":[],"owner":{"account_id":2241,"reputation":44197,"user_id":3093,"accept_rate":83,"display_name":"Dave L."},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1222099130,"creation_date":1222099130,"answer_id":115719,"question_id":115692,"body_markdown":"No, but you can isolate it into specific query methods and suppress the warnings with a `@SuppressWarnings(&quot;unchecked&quot;)` annotation.","title":"How to avoid type safety warnings with Hibernate HQL results?","body":"<p>No, but you can isolate it into specific query methods and suppress the warnings with a <code>@SuppressWarnings(\"unchecked\")</code> annotation.</p>\n"},{"tags":[],"owner":{"account_id":4019,"reputation":3366,"user_id":5917,"accept_rate":92,"display_name":"Joe Dean"},"down_vote_count":9,"up_vote_count":3,"is_accepted":false,"score":-6,"last_activity_date":1222101244,"creation_date":1222101244,"answer_id":115952,"question_id":115692,"body_markdown":"If you don&#39;t want to use @SuppressWarnings(&quot;unchecked&quot;) you can do the following.\r\n\r\n       Query q = sess.createQuery(&quot;from Cat cat&quot;);\r\n       List&lt;?&gt; results =(List&lt;?&gt;) q.list();\r\n       List&lt;Cat&gt; cats = new ArrayList&lt;Cat&gt;();\r\n       for(Object result:results) {\r\n           Cat cat = (Cat) result;\r\n           cats.add(cat);\r\n        }\r\n\r\nFYI - I created a util method that does this for me so it doesn&#39;t litter my code and I don&#39;t have to use @SupressWarning. ","title":"How to avoid type safety warnings with Hibernate HQL results?","body":"<p>If you don't want to use @SuppressWarnings(\"unchecked\") you can do the following.</p>\n\n<pre><code>   Query q = sess.createQuery(\"from Cat cat\");\n   List&lt;?&gt; results =(List&lt;?&gt;) q.list();\n   List&lt;Cat&gt; cats = new ArrayList&lt;Cat&gt;();\n   for(Object result:results) {\n       Cat cat = (Cat) result;\n       cats.add(cat);\n    }\n</code></pre>\n\n<p>FYI - I created a util method that does this for me so it doesn't litter my code and I don't have to use @SupressWarning. </p>\n"},{"tags":[],"owner":{"account_id":10005,"reputation":19934,"user_id":18722,"accept_rate":94,"display_name":"cretzel"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1222102518,"creation_date":1222102518,"answer_id":116071,"question_id":115692,"body_markdown":"We use `@SuppressWarnings(&quot;unchecked&quot;)` as well, but we most often try to use it only on the declaration of the variable, not on the method as a whole:\r\n\r\n    public List&lt;Cat&gt; findAll() {\r\n        Query q = sess.createQuery(&quot;from Cat cat&quot;);\r\n        @SuppressWarnings(&quot;unchecked&quot;)\r\n        List&lt;Cat&gt; cats = q.list();\r\n        return cats;\r\n    }\r\n\r\n","title":"How to avoid type safety warnings with Hibernate HQL results?","body":"<p>We use <code>@SuppressWarnings(\"unchecked\")</code> as well, but we most often try to use it only on the declaration of the variable, not on the method as a whole:</p>\n\n<pre><code>public List&lt;Cat&gt; findAll() {\n    Query q = sess.createQuery(\"from Cat cat\");\n    @SuppressWarnings(\"unchecked\")\n    List&lt;Cat&gt; cats = q.list();\n    return cats;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8696,"reputation":6189,"user_id":15790,"display_name":"Matt Quail"},"down_vote_count":6,"up_vote_count":107,"is_accepted":true,"score":101,"last_activity_date":1540590192,"creation_date":1222141091,"answer_id":118976,"question_id":115692,"body_markdown":"Using `@SuppressWarnings` everywhere, as suggested, is a good way to do it, though it does involve a bit of finger typing each time you call `q.list()`.\r\n\r\nThere are two other techniques I&#39;d suggest:\r\n\r\n**Write a cast-helper**\r\n\r\nSimply refactor all your `@SuppressWarnings` into one place:\r\n\r\n    List&lt;Cat&gt; cats = MyHibernateUtils.listAndCast(q);\r\n\r\n    ...\r\n\r\n    public static &lt;T&gt; List&lt;T&gt; listAndCast(Query q) {\r\n        @SuppressWarnings(&quot;unchecked&quot;)\r\n        List list = q.list();\r\n        return list;\r\n    }\r\n\r\n**Prevent Eclipse from generating warnings for unavoidable problems**  \r\n\r\nIn Eclipse, go to Window&gt;Preferences&gt;Java&gt;Compiler&gt;Errors/Warnings and under Generic type, select the checkbox \r\n`Ignore unavoidable generic type problems due to raw APIs`\r\n\r\nThis will turn off unnecessary warnings for similar problems like the one described above which are unavoidable.\r\n\r\nSome comments:\r\n\r\n* I chose to pass in the `Query` instead of the result of `q.list()` because that way this &quot;cheating&quot; method can only be used to cheat with Hibernate, and not for cheating any `List` in general.\r\n* You could add similar methods for `.iterate()` etc.\r\n","title":"How to avoid type safety warnings with Hibernate HQL results?","body":"<p>Using <code>@SuppressWarnings</code> everywhere, as suggested, is a good way to do it, though it does involve a bit of finger typing each time you call <code>q.list()</code>.</p>\n\n<p>There are two other techniques I'd suggest:</p>\n\n<p><strong>Write a cast-helper</strong></p>\n\n<p>Simply refactor all your <code>@SuppressWarnings</code> into one place:</p>\n\n<pre><code>List&lt;Cat&gt; cats = MyHibernateUtils.listAndCast(q);\n\n...\n\npublic static &lt;T&gt; List&lt;T&gt; listAndCast(Query q) {\n    @SuppressWarnings(\"unchecked\")\n    List list = q.list();\n    return list;\n}\n</code></pre>\n\n<p><strong>Prevent Eclipse from generating warnings for unavoidable problems</strong>  </p>\n\n<p>In Eclipse, go to Window>Preferences>Java>Compiler>Errors/Warnings and under Generic type, select the checkbox \n<code>Ignore unavoidable generic type problems due to raw APIs</code></p>\n\n<p>This will turn off unnecessary warnings for similar problems like the one described above which are unavoidable.</p>\n\n<p>Some comments:</p>\n\n<ul>\n<li>I chose to pass in the <code>Query</code> instead of the result of <code>q.list()</code> because that way this \"cheating\" method can only be used to cheat with Hibernate, and not for cheating any <code>List</code> in general.</li>\n<li>You could add similar methods for <code>.iterate()</code> etc.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":10628,"reputation":5791,"user_id":20161,"accept_rate":50,"display_name":"Pat"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1234490882,"creation_date":1234490882,"answer_id":544475,"question_id":115692,"body_markdown":"We had same problem. But it wasn&#39;t a big deal for us because we had to solve other more major issues with Hibernate Query and Session.\r\n\r\nSpecifically:\r\n\r\n 1. control when a transaction could be committed. (we wanted to count how many times a tx was &quot;started&quot; and only commit when the tx was &quot;ended&quot; the same number of times it was started. Useful for code that doesn&#39;t know if it needs to start a transaction. Now any code that needs a tx just &quot;starts&quot; one and ends it when done.)\r\n 2. Performance metrics gathering.\r\n 3. Delaying starting the transaction until it is known that something will actually be done.\r\n 4. More gentle behavior for query.uniqueResult()\r\n\r\nSo for us, we have:\r\n\r\n 1. Create an interface (AmplafiQuery) that extends Query\r\n 2. Create a class (AmplafiQueryImpl) that extends AmplafiQuery and wraps a org.hibernate.Query\r\n 3. Create a Txmanager that returns a Tx.\r\n 4. Tx has the various createQuery methods and returns AmplafiQueryImpl\r\n\r\nAnd lastly,\r\n\r\nAmplafiQuery has a &quot;asList()&quot; that is a generic enabled version of Query.list()\r\nAmplafiQuery has a &quot;unique()&quot; that is a generic enabled version of Query.uniqueResult() ( and just logs an issue rather than throwing an exception) \r\n\r\nThis is a lot of work for just avoiding @SuppressWarnings. However, like I said (and listed) there are lots of other better! reasons to do the wrapping work.\r\n","title":"How to avoid type safety warnings with Hibernate HQL results?","body":"<p>We had same problem. But it wasn't a big deal for us because we had to solve other more major issues with Hibernate Query and Session.</p>\n\n<p>Specifically:</p>\n\n<ol>\n<li>control when a transaction could be committed. (we wanted to count how many times a tx was \"started\" and only commit when the tx was \"ended\" the same number of times it was started. Useful for code that doesn't know if it needs to start a transaction. Now any code that needs a tx just \"starts\" one and ends it when done.)</li>\n<li>Performance metrics gathering.</li>\n<li>Delaying starting the transaction until it is known that something will actually be done.</li>\n<li>More gentle behavior for query.uniqueResult()</li>\n</ol>\n\n<p>So for us, we have:</p>\n\n<ol>\n<li>Create an interface (AmplafiQuery) that extends Query</li>\n<li>Create a class (AmplafiQueryImpl) that extends AmplafiQuery and wraps a org.hibernate.Query</li>\n<li>Create a Txmanager that returns a Tx.</li>\n<li>Tx has the various createQuery methods and returns AmplafiQueryImpl</li>\n</ol>\n\n<p>And lastly,</p>\n\n<p>AmplafiQuery has a \"asList()\" that is a generic enabled version of Query.list()\nAmplafiQuery has a \"unique()\" that is a generic enabled version of Query.uniqueResult() ( and just logs an issue rather than throwing an exception) </p>\n\n<p>This is a lot of work for just avoiding @SuppressWarnings. However, like I said (and listed) there are lots of other better! reasons to do the wrapping work.</p>\n"},{"tags":[],"owner":{"account_id":24765,"reputation":3353,"user_id":63189,"display_name":"paulmurray"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1689819881,"creation_date":1234493737,"answer_id":544561,"question_id":115692,"body_markdown":"It&#39;s not an oversight or a mistake. The warning reflects a real underlying problem - there is no way that the java compiler can really be sure that the hibernate class is going to do its job properly and that the list it returns will only contain Cats. Any of the suggestions here is fine.","title":"How to avoid type safety warnings with Hibernate HQL results?","body":"<p>It's not an oversight or a mistake. The warning reflects a real underlying problem - there is no way that the java compiler can really be sure that the hibernate class is going to do its job properly and that the list it returns will only contain Cats. Any of the suggestions here is fine.</p>\n"},{"tags":[],"owner":{"account_id":1188208,"reputation":428,"user_id":1161713,"display_name":"Tony Shih"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1333324595,"creation_date":1333320809,"answer_id":9969062,"question_id":115692,"body_markdown":"I know this is older but 2 points to note as of today in Matt Quails Answer.\r\n\r\nPoint 1\r\n=======\r\nThis \r\n\r\n    List&lt;Cat&gt; cats = Collections.checkedList(Cat.class, q.list());\r\n\r\nShould be this\r\n\r\n    List&lt;Cat&gt; cats = Collections.checkedList(q.list(), Cat.class);\r\n\r\nPoint 2\r\n=======\r\nFrom this\r\n\r\n    List list = q.list();\r\n\r\nto this \r\n\r\n    List&lt;T&gt; list = q.list();\r\n\r\nwould reduce other warnings obviously in original reply tag markers were stripped by the browser.\r\n\r\n\r\n\r\n \r\n ","title":"How to avoid type safety warnings with Hibernate HQL results?","body":"<p>I know this is older but 2 points to note as of today in Matt Quails Answer.</p>\n\n<h1>Point 1</h1>\n\n<p>This </p>\n\n<pre><code>List&lt;Cat&gt; cats = Collections.checkedList(Cat.class, q.list());\n</code></pre>\n\n<p>Should be this</p>\n\n<pre><code>List&lt;Cat&gt; cats = Collections.checkedList(q.list(), Cat.class);\n</code></pre>\n\n<h1>Point 2</h1>\n\n<p>From this</p>\n\n<pre><code>List list = q.list();\n</code></pre>\n\n<p>to this </p>\n\n<pre><code>List&lt;T&gt; list = q.list();\n</code></pre>\n\n<p>would reduce other warnings obviously in original reply tag markers were stripped by the browser.</p>\n"},{"tags":[],"owner":{"account_id":123192,"reputation":13668,"user_id":317522,"accept_rate":11,"display_name":"Paulo Merson"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1354729604,"creation_date":1354729604,"answer_id":13729284,"question_id":115692,"body_markdown":"Apparently, the Query.list() method in the Hibernate API is not type safe &quot;by design&quot;, and there are [no plans to change it][1]. \r\n\r\nI believe the simplest solution to avoid compiler warnings is indeed to add @SuppressWarnings(&quot;unchecked&quot;). This [annotation can be placed][2] at the method level or, if inside a method, right before a variable declaration.  \r\n\r\nIn case you have a method that encapsulates Query.list() and returns List (or Collection), you also get a warning. But this one is suppressed using @SuppressWarnings(&quot;rawtypes&quot;). \r\n\r\nThe listAndCast(Query) method proposed by Matt Quail is less flexible than Query.list(). \r\nWhile I can do:\r\n\r\n    Query q = sess.createQuery(&quot;from Cat cat&quot;);\r\n    ArrayList cats = q.list();\r\n\r\nIf I try the code below:\r\n\r\n    Query q = sess.createQuery(&quot;from Cat cat&quot;);\r\n    ArrayList&lt;Cat&gt; cats = MyHibernateUtils.listAndCast(q);\r\n\r\nI&#39;ll get a compile error: *Type mismatch: cannot convert from List&lt;Object&gt; to ArrayList&lt;Cat&gt;*\r\n\r\n\r\n  [1]: https://forum.hibernate.org/viewtopic.php?f=9&amp;t=948703&amp;view=next\r\n  [2]: https://stackoverflow.com/questions/7387749/add-suppresswarningsunchecked-in-generics-to-single-line-generates-eclipse","title":"How to avoid type safety warnings with Hibernate HQL results?","body":"<p>Apparently, the Query.list() method in the Hibernate API is not type safe \"by design\", and there are <a href=\"https://forum.hibernate.org/viewtopic.php?f=9&amp;t=948703&amp;view=next\" rel=\"nofollow noreferrer\">no plans to change it</a>. </p>\n\n<p>I believe the simplest solution to avoid compiler warnings is indeed to add @SuppressWarnings(\"unchecked\"). This <a href=\"https://stackoverflow.com/questions/7387749/add-suppresswarningsunchecked-in-generics-to-single-line-generates-eclipse\">annotation can be placed</a> at the method level or, if inside a method, right before a variable declaration.  </p>\n\n<p>In case you have a method that encapsulates Query.list() and returns List (or Collection), you also get a warning. But this one is suppressed using @SuppressWarnings(\"rawtypes\"). </p>\n\n<p>The listAndCast(Query) method proposed by Matt Quail is less flexible than Query.list(). \nWhile I can do:</p>\n\n<pre><code>Query q = sess.createQuery(\"from Cat cat\");\nArrayList cats = q.list();\n</code></pre>\n\n<p>If I try the code below:</p>\n\n<pre><code>Query q = sess.createQuery(\"from Cat cat\");\nArrayList&lt;Cat&gt; cats = MyHibernateUtils.listAndCast(q);\n</code></pre>\n\n<p>I'll get a compile error: <em>Type mismatch: cannot convert from List to ArrayList</em></p>\n"},{"tags":[],"owner":{"account_id":4753310,"reputation":1,"user_id":3842765,"display_name":"Brian Ngure"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1405461185,"creation_date":1405461185,"answer_id":24768836,"question_id":115692,"body_markdown":"Try this:\r\n\r\n    \r\n    Query q = sess.createQuery(&quot;from Cat cat&quot;);\r\n    List&lt;?&gt; results = q.list();\r\n    for (Object obj : results) {\r\n        Cat cat = (Cat) obj;\r\n    }\r\n    ","title":"How to avoid type safety warnings with Hibernate HQL results?","body":"<p>Try this:</p>\n\n<pre><code>Query q = sess.createQuery(\"from Cat cat\");\nList&lt;?&gt; results = q.list();\nfor (Object obj : results) {\n    Cat cat = (Cat) obj;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3606650,"reputation":2353,"user_id":3008684,"accept_rate":73,"display_name":"antonpp"},"down_vote_count":1,"up_vote_count":47,"is_accepted":false,"score":46,"last_activity_date":1431721440,"creation_date":1431721440,"answer_id":30268139,"question_id":115692,"body_markdown":"It is been a long time since the question was asked but I hope my answer might be helpful to someone like me.\r\n\r\nIf you take a look at javax.persistence [api docs](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#createQuery(java.lang.String,%20java.lang.Class)), you will see that some new methods have been added there since `Java Persistence 2.0`. One of them is `createQuery(String, Class&lt;T&gt;)` which returns `TypedQuery&lt;T&gt;`. You can use `TypedQuery` just as you did it with `Query` with that small difference that all operations are type safe now.\r\n\r\nSo, just change your code to smth like this:\r\n\r\n    Query q = sess.createQuery(&quot;from Cat cat&quot;, Cat.class);\r\n    List&lt;Cat&gt; cats = q.list();\r\n\r\nAnd you are all set.","title":"How to avoid type safety warnings with Hibernate HQL results?","body":"<p>It is been a long time since the question was asked but I hope my answer might be helpful to someone like me.</p>\n\n<p>If you take a look at javax.persistence <a href=\"http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#createQuery(java.lang.String,%20java.lang.Class)\">api docs</a>, you will see that some new methods have been added there since <code>Java Persistence 2.0</code>. One of them is <code>createQuery(String, Class&lt;T&gt;)</code> which returns <code>TypedQuery&lt;T&gt;</code>. You can use <code>TypedQuery</code> just as you did it with <code>Query</code> with that small difference that all operations are type safe now.</p>\n\n<p>So, just change your code to smth like this:</p>\n\n<pre><code>Query q = sess.createQuery(\"from Cat cat\", Cat.class);\nList&lt;Cat&gt; cats = q.list();\n</code></pre>\n\n<p>And you are all set.</p>\n"},{"tags":[],"owner":{"account_id":1010242,"reputation":529,"user_id":1022974,"accept_rate":75,"display_name":"xjodoin"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1447268040,"creation_date":1447268040,"answer_id":33657790,"question_id":115692,"body_markdown":"A good solution to avoid type safety warnings with hibernate query is to use a tool like [TorpedoQuery][1] to help you to build type safe hql.\r\n\r\n    Cat cat = from(Cat.class);\r\n    org.torpedoquery.jpa.Query&lt;Entity&gt; select = select(cat);\r\n    List&lt;Cat&gt; cats = select.list(entityManager);\r\n\r\n\r\n  [1]: http://torpedoquery.org","title":"How to avoid type safety warnings with Hibernate HQL results?","body":"<p>A good solution to avoid type safety warnings with hibernate query is to use a tool like <a href=\"http://torpedoquery.org\" rel=\"nofollow\">TorpedoQuery</a> to help you to build type safe hql.</p>\n\n<pre><code>Cat cat = from(Cat.class);\norg.torpedoquery.jpa.Query&lt;Entity&gt; select = select(cat);\nList&lt;Cat&gt; cats = select.list(entityManager);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1180968,"reputation":237,"user_id":1155906,"display_name":"shivam oberoi"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1459859296,"creation_date":1459854134,"answer_id":36424573,"question_id":115692,"body_markdown":"Try to use `TypedQuery` instead of `Query`.\r\nFor example instead of this:-\r\n\r\n    Query q = sess.createQuery(&quot;from Cat cat&quot;, Cat.class);\r\n    List&lt;Cat&gt; cats = q.list();\r\n\r\nUse this:-\r\n\r\n    TypedQuery&lt;Cat&gt; q1 = sess.createQuery(&quot;from Cat cat&quot;, Cat.class);\r\n    List&lt;Cat&gt; cats = q1.list();","title":"How to avoid type safety warnings with Hibernate HQL results?","body":"<p>Try to use <code>TypedQuery</code> instead of <code>Query</code>.\nFor example instead of this:-</p>\n\n<pre><code>Query q = sess.createQuery(\"from Cat cat\", Cat.class);\nList&lt;Cat&gt; cats = q.list();\n</code></pre>\n\n<p>Use this:-</p>\n\n<pre><code>TypedQuery&lt;Cat&gt; q1 = sess.createQuery(\"from Cat cat\", Cat.class);\nList&lt;Cat&gt; cats = q1.list();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1282139,"reputation":2420,"user_id":1236018,"accept_rate":84,"display_name":"David DeMar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1523113887,"creation_date":1518242011,"answer_id":48717730,"question_id":115692,"body_markdown":"Newer versions of Hibernate now support a type safe `Query&lt;T&gt;` object so you no longer have to use `@SuppressWarnings` or implement some hack to make the compiler warnings go away. In the [Session API][1], `Session.createQuery` will now return a type safe `Query&lt;T&gt;` object. You can use it this way:\r\n\r\n    Query&lt;Cat&gt; query = session.createQuery(&quot;FROM Cat&quot;, Cat.class);\r\n    List&lt;Cat&gt; cats = query.list();\r\n\r\nYou can also use it when the query result won&#39;t return a Cat:\r\n\r\n    public Integer count() {\r\n        Query&lt;Integer&gt; query = sessionFactory.getCurrentSession().createQuery(&quot;SELECT COUNT(id) FROM Cat&quot;, Integer.class);\r\n        return query.getSingleResult();\r\n    }\r\n\r\nOr when doing a partial select:\r\n\r\n    public List&lt;Object[]&gt; String getName() {\r\n        Query&lt;Object[]&gt; query = sessionFactory.getCurrentSession().createQuery(&quot;SELECT id, name FROM Cat&quot;, Object[].class);\r\n        return query.list();\r\n    }\r\n\r\n\r\n  [1]: https://docs.jboss.org/hibernate/orm/5.2/javadocs/org/hibernate/Session.html#createQuery-java.lang.String-java.lang.Class-","title":"How to avoid type safety warnings with Hibernate HQL results?","body":"<p>Newer versions of Hibernate now support a type safe <code>Query&lt;T&gt;</code> object so you no longer have to use <code>@SuppressWarnings</code> or implement some hack to make the compiler warnings go away. In the <a href=\"https://docs.jboss.org/hibernate/orm/5.2/javadocs/org/hibernate/Session.html#createQuery-java.lang.String-java.lang.Class-\" rel=\"nofollow noreferrer\">Session API</a>, <code>Session.createQuery</code> will now return a type safe <code>Query&lt;T&gt;</code> object. You can use it this way:</p>\n\n<pre><code>Query&lt;Cat&gt; query = session.createQuery(\"FROM Cat\", Cat.class);\nList&lt;Cat&gt; cats = query.list();\n</code></pre>\n\n<p>You can also use it when the query result won't return a Cat:</p>\n\n<pre><code>public Integer count() {\n    Query&lt;Integer&gt; query = sessionFactory.getCurrentSession().createQuery(\"SELECT COUNT(id) FROM Cat\", Integer.class);\n    return query.getSingleResult();\n}\n</code></pre>\n\n<p>Or when doing a partial select:</p>\n\n<pre><code>public List&lt;Object[]&gt; String getName() {\n    Query&lt;Object[]&gt; query = sessionFactory.getCurrentSession().createQuery(\"SELECT id, name FROM Cat\", Object[].class);\n    return query.list();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4770958,"reputation":380,"user_id":3855723,"display_name":"Rakesh Singh Balhara"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1542614819,"creation_date":1537162027,"answer_id":52361208,"question_id":115692,"body_markdown":"    TypedQuery&lt;EntityName&gt; createQuery = entityManager.createQuery(&quot;from EntityName&quot;, EntityName.class);\r\n    List&lt;EntityName&gt; resultList = createQuery.getResultList();\r\n\r\n","title":"How to avoid type safety warnings with Hibernate HQL results?","body":"<pre><code>TypedQuery&lt;EntityName&gt; createQuery = entityManager.createQuery(\"from EntityName\", EntityName.class);\nList&lt;EntityName&gt; resultList = createQuery.getResultList();\n</code></pre>\n"}],"owner":{"account_id":10611,"reputation":110107,"user_id":20128,"accept_rate":73,"display_name":"serg"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74207,"favorite_count":0,"down_vote_count":0,"up_vote_count":110,"accepted_answer_id":118976,"answer_count":15,"score":110,"last_activity_date":1689819881,"creation_date":1222098807,"question_id":115692,"body_markdown":"For example I have such query:\r\n\r\n    Query q = sess.createQuery(&quot;from Cat cat&quot;);\r\n    List cats = q.list();\r\n\r\nIf I try to make something like this it shows the following warning \r\n\r\n    Type safety: The expression of type List needs unchecked conversion to conform to List&lt;Cat&gt;\r\n\r\n\r\n    List&lt;Cat&gt; cats = q.list();\r\n\r\nIs there a way to avoid it?","title":"How to avoid type safety warnings with Hibernate HQL results?","body":"<p>For example I have such query:</p>\n\n<pre><code>Query q = sess.createQuery(\"from Cat cat\");\nList cats = q.list();\n</code></pre>\n\n<p>If I try to make something like this it shows the following warning </p>\n\n<pre><code>Type safety: The expression of type List needs unchecked conversion to conform to List&lt;Cat&gt;\n\n\nList&lt;Cat&gt; cats = q.list();\n</code></pre>\n\n<p>Is there a way to avoid it?</p>\n"},{"tags":["java","android","jar"],"answers":[{"tags":[],"owner":{"account_id":1662076,"reputation":586,"user_id":1530164,"display_name":"Florian Minges"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1350341591,"creation_date":1350341591,"answer_id":12905129,"question_id":12905012,"body_markdown":"Android uses the Dalvik VM, whereas you need the Java VM to run a jar-file. So no, you can&#39;t run a jar-file on android.","title":"Running an executable jar in android","body":"<p>Android uses the Dalvik VM, whereas you need the Java VM to run a jar-file. So no, you can't run a jar-file on android.</p>\n"},{"tags":[],"owner":{"account_id":162988,"reputation":5607,"user_id":384831,"display_name":"mportuesisf"},"down_vote_count":3,"up_vote_count":9,"is_accepted":true,"score":6,"last_activity_date":1523802987,"creation_date":1350341603,"answer_id":12905132,"question_id":12905012,"body_markdown":"You can install an app built as an APK through adb:\r\n\r\n    adb install my_apk_file.apk\r\n\r\nAnd once inside an adb shell, you can launch an APK application using the `am` command.  See https://stackoverflow.com/questions/4567904/how-to-start-an-application-using-android-adb-tools\r\n\r\nBut I don&#39;t think there&#39;s a way to directly run a jar file the way you can do so on a desktop operating system, because Android doesn&#39;t use the standard Java VM.\r\n\r\nI think you would need to embed your .jar file inside a minimal Android application that invokes the jar and prints results to stdout.  Then you would build that APK and install/run it as I described above.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/4567904/how-to-start-an-application-using-android-adb-tools","title":"Running an executable jar in android","body":"<p>You can install an app built as an APK through adb:</p>\n\n<pre><code>adb install my_apk_file.apk\n</code></pre>\n\n<p>And once inside an adb shell, you can launch an APK application using the <code>am</code> command.  See <a href=\"https://stackoverflow.com/questions/4567904/how-to-start-an-application-using-android-adb-tools\">How to start an application using android ADB tools?</a></p>\n\n<p>But I don't think there's a way to directly run a jar file the way you can do so on a desktop operating system, because Android doesn't use the standard Java VM.</p>\n\n<p>I think you would need to embed your .jar file inside a minimal Android application that invokes the jar and prints results to stdout.  Then you would build that APK and install/run it as I described above.</p>\n"},{"tags":[],"owner":{"account_id":1091078,"reputation":3872,"user_id":1085703,"accept_rate":48,"display_name":"dendini"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1369729100,"creation_date":1369729100,"answer_id":16787145,"question_id":12905012,"body_markdown":"The only problem with running a jar inside Android is the JVM which under Android is a Dalvik VM which cannot run JSE compiled java programs.\r\n\r\nYou can however use JBed which runs a whole JSE JVM under Android: [http://jbed.en.malavida.com/android/][1]\r\n\r\n\r\n  [1]: http://jbed.en.malavida.com/android/","title":"Running an executable jar in android","body":"<p>The only problem with running a jar inside Android is the JVM which under Android is a Dalvik VM which cannot run JSE compiled java programs.</p>\n\n<p>You can however use JBed which runs a whole JSE JVM under Android: <a href=\"http://jbed.en.malavida.com/android/\" rel=\"nofollow\">http://jbed.en.malavida.com/android/</a></p>\n"},{"tags":[],"owner":{"account_id":9020055,"reputation":311,"user_id":6721443,"display_name":"Alexander Hartmann"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1554158061,"creation_date":1554158061,"answer_id":55464507,"question_id":12905012,"body_markdown":"&gt; is it possible to run an executable jar file (command line based) in\r\n&gt; android?\r\n\r\npossible, check &quot;adb shell input&quot; shellscript -&gt; &quot;exec app_process&quot;\r\n\r\n    shell@flo:/ $ ls -l /system/bin/input                                          \r\n    -rwxr-xr-x root     shell         203 2015-11-10 01:44 input\r\n\r\nhttps://android.googlesource.com/platform/frameworks/base/+/oreo-release/cmds/input/input\r\n\r\n    # Script to start &quot;input&quot; on the device, which has a very rudimentary\r\n    # shell.\r\n    #\r\n    base=/system\r\n    export CLASSPATH=$base/framework/input.jar\r\n    exec app_process $base/bin com.android.commands.input.Input &quot;$@&quot;","title":"Running an executable jar in android","body":"<blockquote>\n  <p>is it possible to run an executable jar file (command line based) in\n  android?</p>\n</blockquote>\n\n<p>possible, check \"adb shell input\" shellscript -> \"exec app_process\"</p>\n\n<pre><code>shell@flo:/ $ ls -l /system/bin/input                                          \n-rwxr-xr-x root     shell         203 2015-11-10 01:44 input\n</code></pre>\n\n<p><a href=\"https://android.googlesource.com/platform/frameworks/base/+/oreo-release/cmds/input/input\" rel=\"noreferrer\">https://android.googlesource.com/platform/frameworks/base/+/oreo-release/cmds/input/input</a></p>\n\n<pre><code># Script to start \"input\" on the device, which has a very rudimentary\n# shell.\n#\nbase=/system\nexport CLASSPATH=$base/framework/input.jar\nexec app_process $base/bin com.android.commands.input.Input \"$@\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14296159,"reputation":389,"user_id":10326781,"display_name":"Saptarshi das"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1606742635,"creation_date":1606716158,"answer_id":65068782,"question_id":12905012,"body_markdown":"You cannot directly run `jar files` in android as android runs on `Dalvik Virtual Machine`, whereas to run jar files you will need `Java Runtime Environment` which has `Java Virtual Machine`.\r\n\r\n**Note: You will need root access and a file manager with root access:**\r\n&lt;br&gt;\r\nBut you can run it, for that you have to install an application `Jbed.apk` and copy `lib` `jbed.so` to your `system\\lib` folder. Then you can run jar/jad files from the application on your android device.\r\n\r\nHere&#39;s the link to jbed: [http://jbed.en.malavida.com/android/][1]\r\n\r\n*Read the full post here on XDA Developers:*\r\n[XDA Developers, Run jar/jad on Android][2]\r\n\r\n\r\nThere are few posts which claims that there are ways to convert jar to apk, I haven&#39;t tried it myself:\r\n[jar to apk][3]\r\nIf it doesn&#39;t works you may need to use an emulator:\r\n\r\n\r\n  [1]: http://jbed.en.malavida.com/android/\r\n  [2]: https://forum.xda-developers.com/showthread.php?t=2325619\r\n  [3]: http://www.netmite.com/android/srv/1.7/getapk.php","title":"Running an executable jar in android","body":"<p>You cannot directly run <code>jar files</code> in android as android runs on <code>Dalvik Virtual Machine</code>, whereas to run jar files you will need <code>Java Runtime Environment</code> which has <code>Java Virtual Machine</code>.</p>\n<p><strong>Note: You will need root access and a file manager with root access:</strong>\n<br>\nBut you can run it, for that you have to install an application <code>Jbed.apk</code> and copy <code>lib</code> <code>jbed.so</code> to your <code>system\\lib</code> folder. Then you can run jar/jad files from the application on your android device.</p>\n<p>Here's the link to jbed: <a href=\"http://jbed.en.malavida.com/android/\" rel=\"nofollow noreferrer\">http://jbed.en.malavida.com/android/</a></p>\n<p><em>Read the full post here on XDA Developers:</em>\n<a href=\"https://forum.xda-developers.com/showthread.php?t=2325619\" rel=\"nofollow noreferrer\">XDA Developers, Run jar/jad on Android</a></p>\n<p>There are few posts which claims that there are ways to convert jar to apk, I haven't tried it myself:\n<a href=\"http://www.netmite.com/android/srv/1.7/getapk.php\" rel=\"nofollow noreferrer\">jar to apk</a>\nIf it doesn't works you may need to use an emulator:</p>\n"},{"tags":[],"owner":{"account_id":27707135,"reputation":19,"user_id":21150530,"display_name":"ABC ABC"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688478551,"creation_date":1688478551,"answer_id":76613319,"question_id":12905012,"body_markdown":"use termux. it is a free android app, which emulate an linux terminal so u can install java there like in linux\r\n\r\n``\r\napt install java\r\n``\r\n\r\nhttps://termux.dev/en/","title":"Running an executable jar in android","body":"<p>use termux. it is a free android app, which emulate an linux terminal so u can install java there like in linux</p>\n<p><code>apt install java</code></p>\n<p><a href=\"https://termux.dev/en/\" rel=\"nofollow noreferrer\">https://termux.dev/en/</a></p>\n"},{"tags":[],"owner":{"account_id":2464285,"reputation":1,"user_id":2147737,"display_name":"oldcwj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689818885,"creation_date":1689818885,"answer_id":76726231,"question_id":12905012,"body_markdown":"you can install the app which called java runtime, you can search it on the googleplay","title":"Running an executable jar in android","body":"<p>you can install the app which called java runtime, you can search it on the googleplay</p>\n"}],"owner":{"account_id":1191863,"reputation":4884,"user_id":1164435,"accept_rate":64,"display_name":"P basak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82928,"favorite_count":0,"down_vote_count":2,"up_vote_count":18,"accepted_answer_id":12905132,"answer_count":7,"score":16,"last_activity_date":1689818885,"creation_date":1350340710,"question_id":12905012,"body_markdown":"is it possible to run an executable jar file (command line based) in android?\r\none of my friend told me that it is possible to run executables written in C. Is it possible for java too? I will run the tool through adb shell.","title":"Running an executable jar in android","body":"<p>is it possible to run an executable jar file (command line based) in android?\none of my friend told me that it is possible to run executables written in C. Is it possible for java too? I will run the tool through adb shell.</p>\n"},{"tags":["java","lambda"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1689800432,"post_id":76725139,"comment_id":135266682,"body_markdown":"Your first interface is akin to a `Function&lt;T&gt;` that permits `throws Exception`. Your first usage is more akin to a `Supplier&lt;T&gt;`, whereas the second seems to be a simple `Runnable` if you omit `return null;` (both with the addendum of supporting `throws Exception`). Overall, I would make new functional interfaces of those (almost 1:1, with `throws Exception` added in). Bonus points for more narrow exception handling, e.g. `SQLFunction&lt;T&gt; { public T accept(T input) throws SQLException; }`.","body":"Your first interface is akin to a <code>Function&lt;T&gt;</code> that permits <code>throws Exception</code>. Your first usage is more akin to a <code>Supplier&lt;T&gt;</code>, whereas the second seems to be a simple <code>Runnable</code> if you omit <code>return null;</code> (both with the addendum of supporting <code>throws Exception</code>). Overall, I would make new functional interfaces of those (almost 1:1, with <code>throws Exception</code> added in). Bonus points for more narrow exception handling, e.g. <code>SQLFunction&lt;T&gt; { public T accept(T input) throws SQLException; }</code>."},{"owner":{"account_id":6209363,"reputation":496,"user_id":9655696,"display_name":"Al Ro"},"score":0,"creation_date":1689810452,"post_id":76725139,"comment_id":135267810,"body_markdown":"@Rogue any chance you could provide an example of the &quot; simple Runnable&quot; you suggest? I tried messing around with return types and returns and could never get a signature that matched the 2nd example; the error message never changed.  As for the exception handling, I&#39;m trying to keep the example bare bones/generic.","body":"@Rogue any chance you could provide an example of the &quot; simple Runnable&quot; you suggest? I tried messing around with return types and returns and could never get a signature that matched the 2nd example; the error message never changed.  As for the exception handling, I&#39;m trying to keep the example bare bones/generic."},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1689862681,"post_id":76725139,"comment_id":135275945,"body_markdown":"A `Runnable` in lambda form is `() -&gt; { ... };` (no return value), from its original method of `void run();`. So in keeping our &quot;narrow&quot; example for an interface we can create, an `SQLRunnable` would have a functional interface signature of `void run() throws SQLException;`. The method signature of the functional interface you expect, and the lambdas you can assign are 1:1 equivalent. Think of a lambda like a shorthand for the method in the functional interface, which you could implement as an anonymous subclass anyhow (`myMethod(new Runnable() { void run() { ... } });`)","body":"A <code>Runnable</code> in lambda form is <code>() -&gt; { ... };</code> (no return value), from its original method of <code>void run();</code>. So in keeping our &quot;narrow&quot; example for an interface we can create, an <code>SQLRunnable</code> would have a functional interface signature of <code>void run() throws SQLException;</code>. The method signature of the functional interface you expect, and the lambdas you can assign are 1:1 equivalent. Think of a lambda like a shorthand for the method in the functional interface, which you could implement as an anonymous subclass anyhow (<code>myMethod(new Runnable() { void run() { ... } });</code>)"}],"answers":[{"tags":[],"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689818176,"creation_date":1689818176,"answer_id":76726196,"question_id":76725139,"body_markdown":"First of all, there is already `Callable` interface in java which covers non-void case:\r\n\r\n    @FunctionalInterface\r\n    public interface Callable&lt;V&gt; {\r\n        V call() throws Exception;\r\n    }\r\n\r\nYou can define your own, that&#39;s also OK.\r\nIn order to cover 2nd case you have to declare a separate void interface anyway:\r\n\r\n    @FunctionalInterface\r\n    interface VoidCallable {\r\n        void call() throws Exception;\r\n    }\r\n\r\nThen the easiest way is to define separate `e` functions\r\n\r\n        public static void e(VoidCallable voidCallable) {\r\n            e(() -&gt; {\r\n                voidCallable.call();\r\n                return null;\r\n            });\r\n        }\r\n\r\n        public static &lt;T&gt; T e(Callable&lt;T&gt; runtime) {\r\n            try {\r\n                return runtime.call();\r\n            } catch (Exception exception) {\r\n                AlanActivity.me.get().ToastE(exception);\r\n                throw new RuntimeException(exception);\r\n            }\r\n        }\r\n\r\nInstead of first one you can write an analog of `e`: \r\n\r\n    public static void e(VoidCallable runtime) {\r\n        try {\r\n            runtime.call();\r\n        } catch (Exception exception) {\r\n            AlanActivity.me.get().ToastE(exception);\r\n            throw new RuntimeException(exception);\r\n        }\r\n    }\r\n\r\n","title":"Java lambda error: inference variable T#1 has incompatible bounds. lower bounds: Object. lower bounds: void","body":"<p>First of all, there is already <code>Callable</code> interface in java which covers non-void case:</p>\n<pre><code>@FunctionalInterface\npublic interface Callable&lt;V&gt; {\n    V call() throws Exception;\n}\n</code></pre>\n<p>You can define your own, that's also OK.\nIn order to cover 2nd case you have to declare a separate void interface anyway:</p>\n<pre><code>@FunctionalInterface\ninterface VoidCallable {\n    void call() throws Exception;\n}\n</code></pre>\n<p>Then the easiest way is to define separate <code>e</code> functions</p>\n<pre><code>    public static void e(VoidCallable voidCallable) {\n        e(() -&gt; {\n            voidCallable.call();\n            return null;\n        });\n    }\n\n    public static &lt;T&gt; T e(Callable&lt;T&gt; runtime) {\n        try {\n            return runtime.call();\n        } catch (Exception exception) {\n            AlanActivity.me.get().ToastE(exception);\n            throw new RuntimeException(exception);\n        }\n    }\n</code></pre>\n<p>Instead of first one you can write an analog of <code>e</code>:</p>\n<pre><code>public static void e(VoidCallable runtime) {\n    try {\n        runtime.call();\n    } catch (Exception exception) {\n        AlanActivity.me.get().ToastE(exception);\n        throw new RuntimeException(exception);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":6209363,"reputation":496,"user_id":9655696,"display_name":"Al Ro"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76726196,"answer_count":1,"score":0,"last_activity_date":1689818176,"creation_date":1689800101,"question_id":76725139,"body_markdown":"I&#39;m getting this incomprehensible error when I try to use a lambda statement that doesn&#39;t return anything (the same code works when the code has a return value).\r\n\r\n    error: method e in interface mkRunTime&lt;T#2&gt; cannot be applied to given types;\r\n    \t\tmkRunTime.e(() -&gt; p.store(new FileWriter(fname), &quot;Bookmarks&quot;) );\r\n    \t\t         ^\r\n      required: mkRunTime&lt;T#1&gt;\r\n      found: ()-&gt;p.stor[...]e2)&quot;)\r\n      reason: inference variable T#1 has incompatible bounds\r\n        lower bounds: Object\r\n        lower bounds: void\r\n      where T#1,T#2 are type-variables:\r\n        T#1 extends Object declared in method &lt;T#1&gt;e(mkRunTime&lt;T#1&gt;)\r\n        T#2 extends Object declared in interface mkRunTime\r\n\r\nHere&#39;s mkRunTime&#39;s definition:\r\n\r\n    @FunctionalInterface\r\n    public interface mkRunTime&lt;T&gt; {\r\n      T execute() throws Exception;\r\n    \r\n      public static &lt;T&gt; T e(mkRunTime&lt;T&gt; runtime) {\r\n        try {\r\n          runtime.execute(); return null;\r\n        } catch (Exception exception) {\r\n          AlanActivity.me.get().ToastE(exception);\r\n          throw new RuntimeException(exception);\r\n        }\r\n      }\r\n    \r\n    }\r\n\r\np.store(...) has a void return type. An example where there&#39;s no error:\r\n\r\n    stream = mkRunTime.e(() -&gt; new FileInputStream(filename));\r\n\r\nit&#39;s clearly related to the lack of return: if I use a code block with a null return the code works:\r\n\r\n    mkRunTime.e(() -&gt; {p.store(new FileWriter(fname), &quot;Bookmarks); return null; });\r\n\r\nIs there a way to make a single interface that handles both cases? if not, what interface definition do I need to handle a void return type?\r\n","title":"Java lambda error: inference variable T#1 has incompatible bounds. lower bounds: Object. lower bounds: void","body":"<p>I'm getting this incomprehensible error when I try to use a lambda statement that doesn't return anything (the same code works when the code has a return value).</p>\n<pre><code>error: method e in interface mkRunTime&lt;T#2&gt; cannot be applied to given types;\n        mkRunTime.e(() -&gt; p.store(new FileWriter(fname), &quot;Bookmarks&quot;) );\n                 ^\n  required: mkRunTime&lt;T#1&gt;\n  found: ()-&gt;p.stor[...]e2)&quot;)\n  reason: inference variable T#1 has incompatible bounds\n    lower bounds: Object\n    lower bounds: void\n  where T#1,T#2 are type-variables:\n    T#1 extends Object declared in method &lt;T#1&gt;e(mkRunTime&lt;T#1&gt;)\n    T#2 extends Object declared in interface mkRunTime\n</code></pre>\n<p>Here's mkRunTime's definition:</p>\n<pre><code>@FunctionalInterface\npublic interface mkRunTime&lt;T&gt; {\n  T execute() throws Exception;\n\n  public static &lt;T&gt; T e(mkRunTime&lt;T&gt; runtime) {\n    try {\n      runtime.execute(); return null;\n    } catch (Exception exception) {\n      AlanActivity.me.get().ToastE(exception);\n      throw new RuntimeException(exception);\n    }\n  }\n\n}\n</code></pre>\n<p>p.store(...) has a void return type. An example where there's no error:</p>\n<pre><code>stream = mkRunTime.e(() -&gt; new FileInputStream(filename));\n</code></pre>\n<p>it's clearly related to the lack of return: if I use a code block with a null return the code works:</p>\n<pre><code>mkRunTime.e(() -&gt; {p.store(new FileWriter(fname), &quot;Bookmarks); return null; });\n</code></pre>\n<p>Is there a way to make a single interface that handles both cases? if not, what interface definition do I need to handle a void return type?</p>\n"},{"tags":["java","snmp","snmp4j"],"answers":[{"tags":[],"owner":{"account_id":29053111,"reputation":1,"user_id":22255446,"display_name":"li.py"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689817383,"creation_date":1689817383,"answer_id":76726168,"question_id":64152178,"body_markdown":"        TransportMapping&lt;UdpAddress&gt; transport = new DefaultUdpTransportMapping();\r\n        Snmp snmp = new Snmp(transport);\r\n        USM usm = new USM(SecurityProtocols.getInstance(), new OctetString(MPv3.createLocalEngineID()), 0);\r\n        SecurityModels.getInstance().addSecurityModel(usm);\r\n        // add user to the USM\r\n        snmp.getUSM().addUser(new OctetString(userName), new UsmUser(new OctetString(userName), authProtocol,\r\n                new OctetString(authPassphrase), privProtocol, new OctetString(privPassphrase)));\r\n\r\nthese codes should be modified:\r\n\r\n    TransportMapping&lt;UdpAddress&gt; transport = new DefaultUdpTransportMapping();\r\n    Snmp snmp = new Snmp(new MessageDispatcherImpl(), transport);\r\n    SecurityProtocols.getInstance().addDefaultProtocols();\r\n    USM usm = new USM(SecurityProtocols.getInstance(), new \r\n    OctetString(MPv3.createLocalEngineID()), 0);\r\n    SecurityModels.getInstance().addSecurityModel(usm);\r\n    usm.addUser(new OctetString(userName), new UsmUser(new OctetString(userName),authProtocol,new OctetString(authPassphrase), privProtocol,new OctetString(privPassphrase)));\r\n    MPv3 mPv3 = new MPv3(usm);\r\n    snmp.getMessageDispatcher().addMessageProcessingModel(mPv3);","title":"Regarding snmp v3 request in multithreaded environment via snmp4j java library","body":"<pre><code>    TransportMapping&lt;UdpAddress&gt; transport = new DefaultUdpTransportMapping();\n    Snmp snmp = new Snmp(transport);\n    USM usm = new USM(SecurityProtocols.getInstance(), new OctetString(MPv3.createLocalEngineID()), 0);\n    SecurityModels.getInstance().addSecurityModel(usm);\n    // add user to the USM\n    snmp.getUSM().addUser(new OctetString(userName), new UsmUser(new OctetString(userName), authProtocol,\n            new OctetString(authPassphrase), privProtocol, new OctetString(privPassphrase)));\n</code></pre>\n<p>these codes should be modified:</p>\n<pre><code>TransportMapping&lt;UdpAddress&gt; transport = new DefaultUdpTransportMapping();\nSnmp snmp = new Snmp(new MessageDispatcherImpl(), transport);\nSecurityProtocols.getInstance().addDefaultProtocols();\nUSM usm = new USM(SecurityProtocols.getInstance(), new \nOctetString(MPv3.createLocalEngineID()), 0);\nSecurityModels.getInstance().addSecurityModel(usm);\nusm.addUser(new OctetString(userName), new UsmUser(new OctetString(userName),authProtocol,new OctetString(authPassphrase), privProtocol,new OctetString(privPassphrase)));\nMPv3 mPv3 = new MPv3(usm);\nsnmp.getMessageDispatcher().addMessageProcessingModel(mPv3);\n</code></pre>\n"}],"owner":{"account_id":1503113,"reputation":578,"user_id":1407114,"accept_rate":96,"display_name":"ashishgupta_mca"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":356,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689817383,"creation_date":1601543063,"question_id":64152178,"body_markdown":"I am sending an SNMP v3 request via snmp4j java library to the first snmpv3 server and it works fine. Sending SNMP v3 requests via the snmp4j library to the second snmpv3 server also works fine. However, if I am sending to both servers from two different threads in the same program as below, one of them gives a null response\r\nas below:-\r\n\r\n203&gt; responsePDU == null :\r\n&gt; Error     : null\r\n&gt; Address     : null\r\n&gt; Source      : com.x.x.x.SnmpV2@755ca288). \r\n\r\nMy bet is that somehow below two lines might creating a mess since SecurityModels is a Singleton class.\r\n\r\n\tUSM usm = new USM(SecurityProtocols.getInstance(), new OctetString(MPv3.createLocalEngineID()), 0);\r\n\t\tSecurityModels.getInstance().addSecurityModel(usm);\r\n\r\nBelow is the code:-\r\n\r\nAny experience with the snmp4j with v3 in a multithreaded environment...\r\n\r\n    import org.snmp4j.PDU;\r\n    import org.snmp4j.ScopedPDU;\r\n    import org.snmp4j.Snmp;\r\n    import org.snmp4j.TransportMapping;\r\n    import org.snmp4j.UserTarget;\r\n    import org.snmp4j.event.ResponseEvent;\r\n    import org.snmp4j.mp.MPv3;\r\n    import org.snmp4j.mp.SnmpConstants;\r\n    import org.snmp4j.security.AuthSHA;\r\n    import org.snmp4j.security.PrivAES128;\r\n    import org.snmp4j.security.SecurityLevel;\r\n    import org.snmp4j.security.SecurityModels;\r\n    import org.snmp4j.security.SecurityProtocols;\r\n    import org.snmp4j.security.USM;\r\n    import org.snmp4j.security.UsmUser;\r\n    import org.snmp4j.smi.GenericAddress;\r\n    import org.snmp4j.smi.OID;\r\n    import org.snmp4j.smi.OctetString;\r\n    import org.snmp4j.smi.UdpAddress;\r\n    import org.snmp4j.smi.VariableBinding;\r\n    import org.snmp4j.transport.DefaultUdpTransportMapping;\r\n    \r\n    public class MultiThreadedSnmpV3Request {\r\n    \tpublic static void main(String[] args) throws Exception {\r\n    \t\tMultiThreadedSnmpV3Request requests = new MultiThreadedSnmpV3Request();\r\n    \t\tnew Thread(() -&gt; {\r\n    \t\t\ttry {\r\n    \t\t\t\trequests.firstServerRequest();\r\n    \t\t\t} catch (Exception e) {\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t}\r\n    \t\t}).start();\r\n    \r\n    \t\tnew Thread(() -&gt; {\r\n    \t\t\ttry {\r\n    \t\t\t\trequests.secondServerRequest();\r\n    \t\t\t} catch (Exception e) {\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t}\r\n    \t\t}).start();\r\n    \t}\r\n    \r\n    \tprivate void firstServerRequest() throws Exception {\r\n    \t\tString targetAddress = &quot;udp:10.99.220.203/161&quot;;\r\n    \t\tString userName = &quot;xxxx&quot;;\r\n    \t\tOID authProtocol = AuthSHA.ID;\r\n    \t\tString authPassphrase = &quot;f8T7wWXeJ6brNeNF&quot;;\r\n    \t\tOID privProtocol = PrivAES128.ID; // PrivAES256.ID;\r\n    \t\tString privPassphrase = &quot;KpbnkSJrP5Kgbhqb&quot;;\r\n    \r\n    \t\t// build a PDU with all the OIDs\r\n    \t\tUserTarget target = new UserTarget();\r\n    \t\ttarget.setTimeout(5000);\r\n    \t\ttarget.setVersion(SnmpConstants.version3);\r\n    \t\ttarget.setAddress(GenericAddress.parse(targetAddress));\r\n    \t\ttarget.setSecurityLevel(SecurityLevel.AUTH_PRIV);\r\n    \t\ttarget.setSecurityName(new OctetString(userName));\r\n    \r\n    \t\tTransportMapping&lt;UdpAddress&gt; transport = new DefaultUdpTransportMapping();\r\n    \t\tSnmpV2 snmp = new SnmpV2(transport);\r\n    \t\tUSM usm = new USM(SecurityProtocols.getInstance(), new OctetString(MPv3.createLocalEngineID()), 0);\r\n    \t\tSecurityModels.getInstance().addSecurityModel(usm);\r\n    \t\t// add user to the USM\r\n    \t\tsnmp.getUSM().addUser(new OctetString(userName), new UsmUser(new OctetString(userName), authProtocol,\r\n    \t\t\t\tnew OctetString(authPassphrase), privProtocol, new OctetString(privPassphrase)));\r\n    \r\n    \t\ttransport.listen();\r\n    \t\tScopedPDU requestPDU = new ScopedPDU();\r\n    \t\trequestPDU.add(new VariableBinding(new OID(&quot;1.3.6.1.4.1.2021.2.1.2.1&quot;)));\r\n    \t\trequestPDU.setType(PDU.GET);\r\n    \r\n    \t\tfor (int i = 0; i &lt; 20; i++) {\r\n    \t\t\tThread.sleep(3000);\r\n    \t\t\tResponseEvent re = snmp.send(requestPDU, target);\r\n    \t\t\tPDU responsePDU = re.getResponse();\r\n    \t\t\tif (responsePDU == null) {\r\n    \t\t\t\tSystem.out.println(&quot;1st Server &gt; responsePDU == null :&quot;);\r\n    \t\t\t\tSystem.out.println(&quot;&gt; Error     : &quot; + re.getError());\r\n    \t\t\t\tSystem.out.println(&quot;&gt; Address     : &quot; + re.getPeerAddress());\r\n    \t\t\t\tSystem.out.println(&quot;&gt; Source      : &quot; + re.getSource());\r\n    \t\t\t\tSystem.out.println(&quot;&gt; User object : &quot; + re.getUserObject());\r\n    \t\t\t} else if (responsePDU.getVariableBindings() != null) {\r\n    \t\t\t\tfor (VariableBinding vb : responsePDU.getVariableBindings()) {\r\n    \t\t\t\t\tSystem.out.println(&quot;1st Server &gt;&gt; &quot; + vb.getOid() + &quot; --&gt; &quot; + vb.getVariable());\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tprivate void secondServerRequest() throws Exception {\r\n    \t\tString targetAddress = &quot;udp:10.99.220.204/161&quot;;\r\n    \t\tString userName = &quot;xxxx&quot;;\r\n    \t\tOID authProtocol = AuthSHA.ID;\r\n    \t\tString authPassphrase = &quot;f8T7wWXeJ6brNeNF&quot;;\r\n    \t\tOID privProtocol = PrivAES128.ID; // PrivAES256.ID;\r\n    \t\tString privPassphrase = &quot;KpbnkSJrP5Kgbhqb&quot;;\r\n    \r\n    \t\tUserTarget target = new UserTarget();\r\n    \t\ttarget.setTimeout(5000);\r\n    \t\ttarget.setVersion(SnmpConstants.version3);\r\n    \t\ttarget.setAddress(GenericAddress.parse(targetAddress));\r\n    \t\ttarget.setSecurityLevel(SecurityLevel.AUTH_PRIV);\r\n    \t\ttarget.setSecurityName(new OctetString(userName));\r\n    \r\n    \t\tTransportMapping&lt;UdpAddress&gt; transport = new DefaultUdpTransportMapping();\r\n    \t\tSnmp snmp = new Snmp(transport);\r\n    \t\tUSM usm = new USM(SecurityProtocols.getInstance(), new OctetString(MPv3.createLocalEngineID()), 0);\r\n    \t\tSecurityModels.getInstance().addSecurityModel(usm);\r\n    \t\t// add user to the USM\r\n    \t\tsnmp.getUSM().addUser(new OctetString(userName), new UsmUser(new OctetString(userName), authProtocol,\r\n    \t\t\t\tnew OctetString(authPassphrase), privProtocol, new OctetString(privPassphrase)));\r\n    \r\n    \t\ttransport.listen();\r\n    \r\n    \t\tScopedPDU requestPDU = new ScopedPDU();\r\n    \t\trequestPDU.add(new VariableBinding(new OID(&quot;1.3.6.1.4.1.2021.2.1.2.1&quot;)));\r\n    \t\trequestPDU.setType(PDU.GET);\r\n    \t\tfor (int i = 0; i &lt; 20; i++) {\r\n    \t\t\tThread.sleep(3000);\r\n    \t\t\tResponseEvent re = snmp.send(requestPDU, target);\r\n    \t\t\tPDU responsePDU = re.getResponse();\r\n    \t\t\tif (responsePDU == null) {\r\n    \t\t\t\tSystem.out.println(&quot;2nd Server&gt; responsePDU == null :&quot;);\r\n    \t\t\t\tSystem.out.println(&quot;&gt; Error     : &quot; + re.getError());\r\n    \t\t\t\tSystem.out.println(&quot;&gt; Address     : &quot; + re.getPeerAddress());\r\n    \t\t\t\tSystem.out.println(&quot;&gt; Source      : &quot; + re.getSource());\r\n    \t\t\t\tSystem.out.println(&quot;&gt; User object : &quot; + re.getUserObject());\r\n    \t\t\t} else if (responsePDU.getVariableBindings() != null) {\r\n    \t\t\t\tfor (VariableBinding vb : responsePDU.getVariableBindings()) {\r\n    \t\t\t\t\tSystem.out.println(&quot;2nd Server &gt;&gt; &quot; + vb.getOid() + &quot; --&gt; &quot; + vb.getVariable());\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t}\r\n    }\r\n\r\n","title":"Regarding snmp v3 request in multithreaded environment via snmp4j java library","body":"<p>I am sending an SNMP v3 request via snmp4j java library to the first snmpv3 server and it works fine. Sending SNMP v3 requests via the snmp4j library to the second snmpv3 server also works fine. However, if I am sending to both servers from two different threads in the same program as below, one of them gives a null response\nas below:-</p>\n<p>203&gt; responsePDU == null :</p>\n<blockquote>\n<p>Error     : null\nAddress     : null\nSource      : com.x.x.x.SnmpV2@755ca288).</p>\n</blockquote>\n<p>My bet is that somehow below two lines might creating a mess since SecurityModels is a Singleton class.</p>\n<pre><code>USM usm = new USM(SecurityProtocols.getInstance(), new OctetString(MPv3.createLocalEngineID()), 0);\n    SecurityModels.getInstance().addSecurityModel(usm);\n</code></pre>\n<p>Below is the code:-</p>\n<p>Any experience with the snmp4j with v3 in a multithreaded environment...</p>\n<pre><code>import org.snmp4j.PDU;\nimport org.snmp4j.ScopedPDU;\nimport org.snmp4j.Snmp;\nimport org.snmp4j.TransportMapping;\nimport org.snmp4j.UserTarget;\nimport org.snmp4j.event.ResponseEvent;\nimport org.snmp4j.mp.MPv3;\nimport org.snmp4j.mp.SnmpConstants;\nimport org.snmp4j.security.AuthSHA;\nimport org.snmp4j.security.PrivAES128;\nimport org.snmp4j.security.SecurityLevel;\nimport org.snmp4j.security.SecurityModels;\nimport org.snmp4j.security.SecurityProtocols;\nimport org.snmp4j.security.USM;\nimport org.snmp4j.security.UsmUser;\nimport org.snmp4j.smi.GenericAddress;\nimport org.snmp4j.smi.OID;\nimport org.snmp4j.smi.OctetString;\nimport org.snmp4j.smi.UdpAddress;\nimport org.snmp4j.smi.VariableBinding;\nimport org.snmp4j.transport.DefaultUdpTransportMapping;\n\npublic class MultiThreadedSnmpV3Request {\n    public static void main(String[] args) throws Exception {\n        MultiThreadedSnmpV3Request requests = new MultiThreadedSnmpV3Request();\n        new Thread(() -&gt; {\n            try {\n                requests.firstServerRequest();\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n        }).start();\n\n        new Thread(() -&gt; {\n            try {\n                requests.secondServerRequest();\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n        }).start();\n    }\n\n    private void firstServerRequest() throws Exception {\n        String targetAddress = &quot;udp:10.99.220.203/161&quot;;\n        String userName = &quot;xxxx&quot;;\n        OID authProtocol = AuthSHA.ID;\n        String authPassphrase = &quot;f8T7wWXeJ6brNeNF&quot;;\n        OID privProtocol = PrivAES128.ID; // PrivAES256.ID;\n        String privPassphrase = &quot;KpbnkSJrP5Kgbhqb&quot;;\n\n        // build a PDU with all the OIDs\n        UserTarget target = new UserTarget();\n        target.setTimeout(5000);\n        target.setVersion(SnmpConstants.version3);\n        target.setAddress(GenericAddress.parse(targetAddress));\n        target.setSecurityLevel(SecurityLevel.AUTH_PRIV);\n        target.setSecurityName(new OctetString(userName));\n\n        TransportMapping&lt;UdpAddress&gt; transport = new DefaultUdpTransportMapping();\n        SnmpV2 snmp = new SnmpV2(transport);\n        USM usm = new USM(SecurityProtocols.getInstance(), new OctetString(MPv3.createLocalEngineID()), 0);\n        SecurityModels.getInstance().addSecurityModel(usm);\n        // add user to the USM\n        snmp.getUSM().addUser(new OctetString(userName), new UsmUser(new OctetString(userName), authProtocol,\n                new OctetString(authPassphrase), privProtocol, new OctetString(privPassphrase)));\n\n        transport.listen();\n        ScopedPDU requestPDU = new ScopedPDU();\n        requestPDU.add(new VariableBinding(new OID(&quot;1.3.6.1.4.1.2021.2.1.2.1&quot;)));\n        requestPDU.setType(PDU.GET);\n\n        for (int i = 0; i &lt; 20; i++) {\n            Thread.sleep(3000);\n            ResponseEvent re = snmp.send(requestPDU, target);\n            PDU responsePDU = re.getResponse();\n            if (responsePDU == null) {\n                System.out.println(&quot;1st Server &gt; responsePDU == null :&quot;);\n                System.out.println(&quot;&gt; Error     : &quot; + re.getError());\n                System.out.println(&quot;&gt; Address     : &quot; + re.getPeerAddress());\n                System.out.println(&quot;&gt; Source      : &quot; + re.getSource());\n                System.out.println(&quot;&gt; User object : &quot; + re.getUserObject());\n            } else if (responsePDU.getVariableBindings() != null) {\n                for (VariableBinding vb : responsePDU.getVariableBindings()) {\n                    System.out.println(&quot;1st Server &gt;&gt; &quot; + vb.getOid() + &quot; --&gt; &quot; + vb.getVariable());\n                }\n            }\n        }\n    }\n\n    private void secondServerRequest() throws Exception {\n        String targetAddress = &quot;udp:10.99.220.204/161&quot;;\n        String userName = &quot;xxxx&quot;;\n        OID authProtocol = AuthSHA.ID;\n        String authPassphrase = &quot;f8T7wWXeJ6brNeNF&quot;;\n        OID privProtocol = PrivAES128.ID; // PrivAES256.ID;\n        String privPassphrase = &quot;KpbnkSJrP5Kgbhqb&quot;;\n\n        UserTarget target = new UserTarget();\n        target.setTimeout(5000);\n        target.setVersion(SnmpConstants.version3);\n        target.setAddress(GenericAddress.parse(targetAddress));\n        target.setSecurityLevel(SecurityLevel.AUTH_PRIV);\n        target.setSecurityName(new OctetString(userName));\n\n        TransportMapping&lt;UdpAddress&gt; transport = new DefaultUdpTransportMapping();\n        Snmp snmp = new Snmp(transport);\n        USM usm = new USM(SecurityProtocols.getInstance(), new OctetString(MPv3.createLocalEngineID()), 0);\n        SecurityModels.getInstance().addSecurityModel(usm);\n        // add user to the USM\n        snmp.getUSM().addUser(new OctetString(userName), new UsmUser(new OctetString(userName), authProtocol,\n                new OctetString(authPassphrase), privProtocol, new OctetString(privPassphrase)));\n\n        transport.listen();\n\n        ScopedPDU requestPDU = new ScopedPDU();\n        requestPDU.add(new VariableBinding(new OID(&quot;1.3.6.1.4.1.2021.2.1.2.1&quot;)));\n        requestPDU.setType(PDU.GET);\n        for (int i = 0; i &lt; 20; i++) {\n            Thread.sleep(3000);\n            ResponseEvent re = snmp.send(requestPDU, target);\n            PDU responsePDU = re.getResponse();\n            if (responsePDU == null) {\n                System.out.println(&quot;2nd Server&gt; responsePDU == null :&quot;);\n                System.out.println(&quot;&gt; Error     : &quot; + re.getError());\n                System.out.println(&quot;&gt; Address     : &quot; + re.getPeerAddress());\n                System.out.println(&quot;&gt; Source      : &quot; + re.getSource());\n                System.out.println(&quot;&gt; User object : &quot; + re.getUserObject());\n            } else if (responsePDU.getVariableBindings() != null) {\n                for (VariableBinding vb : responsePDU.getVariableBindings()) {\n                    System.out.println(&quot;2nd Server &gt;&gt; &quot; + vb.getOid() + &quot; --&gt; &quot; + vb.getVariable());\n                }\n            }\n        }\n\n    }\n}\n</code></pre>\n"},{"tags":["java","android","google-maps","google-maps-api-3"],"answers":[{"tags":[],"owner":{"account_id":24508188,"reputation":1915,"user_id":18422887,"display_name":"Yrll"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689816290,"creation_date":1689816290,"answer_id":76726113,"question_id":76695673,"body_markdown":"No plans of adding `Fuel Prices` data in Places API at the moment\r\n-------------------\r\n\r\nFirst of all, Google Maps (App) and Google Maps (API) are different platforms, so we should set our expectation that they have different features and functionalities.\r\n\r\nNow with regards to adding **Fuel Prices** data in **Places API**, there was a **Feature Request** filed 3 years ago (July, 2020) in relation to this and you can see it here in this link: \r\n\r\nhttps://issuetracker.google.com/issues/162155201\r\n\r\nPlease note that the Issue Tracker entry above is the authoritative source for public information regarding the aforementioned issue, and all publicly-relevant updates is posted there.\r\n\r\nWith that said, it looks like Google has no plans at the moment in adding this feature to the Places API, since they marked it as ***Won&#39;t Fix (Infeasible)*** and said this:\r\n\r\n&gt; We have reviewed your request and we don&#39;t have plans to implement\r\n&gt; this feature for Places API at the moment. Please do note that Places\r\n&gt; API aims to provide common details for the different supported\r\n&gt; `place_types` and not specific to `gas_stations` only.\r\n\r\nIf you are  still interested with this feature, you can just upvote the Feature Request in the link I provided and comment there your use case to help with reconsideration.\r\n\r\nI hope this information helped!","title":"Fetching fuel price from google map","body":"<h2>No plans of adding <code>Fuel Prices</code> data in Places API at the moment</h2>\n<p>First of all, Google Maps (App) and Google Maps (API) are different platforms, so we should set our expectation that they have different features and functionalities.</p>\n<p>Now with regards to adding <strong>Fuel Prices</strong> data in <strong>Places API</strong>, there was a <strong>Feature Request</strong> filed 3 years ago (July, 2020) in relation to this and you can see it here in this link:</p>\n<p><a href=\"https://issuetracker.google.com/issues/162155201\" rel=\"nofollow noreferrer\">https://issuetracker.google.com/issues/162155201</a></p>\n<p>Please note that the Issue Tracker entry above is the authoritative source for public information regarding the aforementioned issue, and all publicly-relevant updates is posted there.</p>\n<p>With that said, it looks like Google has no plans at the moment in adding this feature to the Places API, since they marked it as <em><strong>Won't Fix (Infeasible)</strong></em> and said this:</p>\n<blockquote>\n<p>We have reviewed your request and we don't have plans to implement\nthis feature for Places API at the moment. Please do note that Places\nAPI aims to provide common details for the different supported\n<code>place_types</code> and not specific to <code>gas_stations</code> only.</p>\n</blockquote>\n<p>If you are  still interested with this feature, you can just upvote the Feature Request in the link I provided and comment there your use case to help with reconsideration.</p>\n<p>I hope this information helped!</p>\n"}],"owner":{"account_id":1713048,"reputation":1374,"user_id":1570688,"accept_rate":86,"display_name":"bluelurker"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":129,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":76726113,"answer_count":1,"score":-1,"last_activity_date":1689816290,"creation_date":1689452982,"question_id":76695673,"body_markdown":"I am trying to retrieve fuel prices from all nearby stations. I am using `PlacesApi`. While it retrieves all the station information like location, address, ratings, etc it doesn&#39;t return the fuel price info. After a bit of searching I found that map api doesn&#39;t return fuel api. Is there any work around to get this info? \r\n\r\nThis is what I have implemented so far.\r\n\r\n    List&lt;PlaceDetails&gt; list = new ArrayList&lt;&gt;();\r\n    \r\n    GeocodingResult[] geocodingResults = new GeocodingResult[0];\r\n    try {\r\n        geocodingResults = GeocodingApi.geocode(context,&quot;Dallas&quot;).await();\r\n        if (geocodingResults.length &gt; 0) {\r\n            LatLng location = geocodingResults[0].geometry.location;\r\n    \r\n            // Perform the Places API request to get the gas stations in Dallas\r\n            PlacesSearchResponse searchResponse = PlacesApi.nearbySearchQuery(context, location)\r\n                    .radius(20000) // Specify the search radius in meters (adjust as needed)\r\n                    .type(PlaceType.GAS_STATION) // Search for gas stations\r\n                    .await();\r\n    \r\n    \r\n            // Iterate through the results and print the gas station names\r\n            for (PlacesSearchResult result : searchResponse.results) {\r\n                PlaceDetails placeDetails = PlacesApi.placeDetails(context, result.placeId).awaitIgnoreError();\r\n                list.add(placeDetails);\r\n                System.out.println(result.name);\r\n            }\r\n        } else {\r\n            System.out.println(&quot;Unable to geocode Dallas.&quot;);\r\n        }\r\n    \r\n    } catch (Exception e) {\r\n        throw new RuntimeException(e);\r\n    }\r\n\r\nThe `placeDetails` obj contains all the info except fuel info.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vANBQ.png","title":"Fetching fuel price from google map","body":"<p>I am trying to retrieve fuel prices from all nearby stations. I am using <code>PlacesApi</code>. While it retrieves all the station information like location, address, ratings, etc it doesn't return the fuel price info. After a bit of searching I found that map api doesn't return fuel api. Is there any work around to get this info?</p>\n<p>This is what I have implemented so far.</p>\n<pre><code>List&lt;PlaceDetails&gt; list = new ArrayList&lt;&gt;();\n\nGeocodingResult[] geocodingResults = new GeocodingResult[0];\ntry {\n    geocodingResults = GeocodingApi.geocode(context,&quot;Dallas&quot;).await();\n    if (geocodingResults.length &gt; 0) {\n        LatLng location = geocodingResults[0].geometry.location;\n\n        // Perform the Places API request to get the gas stations in Dallas\n        PlacesSearchResponse searchResponse = PlacesApi.nearbySearchQuery(context, location)\n                .radius(20000) // Specify the search radius in meters (adjust as needed)\n                .type(PlaceType.GAS_STATION) // Search for gas stations\n                .await();\n\n\n        // Iterate through the results and print the gas station names\n        for (PlacesSearchResult result : searchResponse.results) {\n            PlaceDetails placeDetails = PlacesApi.placeDetails(context, result.placeId).awaitIgnoreError();\n            list.add(placeDetails);\n            System.out.println(result.name);\n        }\n    } else {\n        System.out.println(&quot;Unable to geocode Dallas.&quot;);\n    }\n\n} catch (Exception e) {\n    throw new RuntimeException(e);\n}\n</code></pre>\n<p>The <code>placeDetails</code> obj contains all the info except fuel info.</p>\n<p><a href=\"https://i.stack.imgur.com/vANBQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vANBQ.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","string","arraylist","stream","char"],"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":1,"creation_date":1687342541,"post_id":76522155,"comment_id":134922400,"body_markdown":"You don&#39;t need the list with all words for that. You have the drawn word in a variable - `randomWords `, just use indexOf on it.","body":"You don&#39;t need the list with all words for that. You have the drawn word in a variable - <code>randomWords </code>, just use indexOf on it."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1687342567,"post_id":76522155,"comment_id":134922409,"body_markdown":"Streams are not really what you&#39;re looking for as you want indexes, and streams are not really good at those. Scan the &#39;answer&#39; against the user&#39;s choice and add to a `List` the indices where the player was correct. You can then reveal the correct letter at those indices","body":"Streams are not really what you&#39;re looking for as you want indexes, and streams are not really good at those. Scan the &#39;answer&#39; against the user&#39;s choice and add to a <code>List</code> the indices where the player was correct. You can then reveal the correct letter at those indices"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1687399377,"post_id":76522155,"comment_id":134932519,"body_markdown":"It seems correct, so far.  Now check _randomWords_ against _pChoice_.  Start with the _contains_ method, and if _true_, traverse each letter to find the indices.","body":"It seems correct, so far.  Now check <i>randomWords</i> against <i>pChoice</i>.  Start with the <i>contains</i> method, and if <i>true</i>, traverse each letter to find the indices."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1687419935,"post_id":76522155,"comment_id":134934932,"body_markdown":"That would then be a *double* iteration potentially. Only *one* needed","body":"That would then be a <i>double</i> iteration potentially. Only <i>one</i> needed"},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1687566978,"post_id":76522155,"comment_id":134959813,"body_markdown":"Possibly of interest: [A brief hangman implementation](https://stackoverflow.com/a/22269413/256196)","body":"Possibly of interest: <a href=\"https://stackoverflow.com/a/22269413/256196\">A brief hangman implementation</a>"}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687565514,"creation_date":1687563937,"answer_id":76544007,"question_id":76522155,"body_markdown":"&gt; _&quot;... Do I need to use a stream for this? ...&quot;_\r\n\r\nNo, you can use the either the _[String#contains](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#contains(java.lang.CharSequence))_, or _[String#indexOf](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#indexOf(int))_, method, to determine if a _String_ contains a specific character.\r\n\r\n```java\r\nboolean found = randomWords.contains(choice);\r\n```\r\n\r\n```java\r\nboolean found = randomWords.indexOf(choice) != -1;\r\n```\r\n\r\nAlso, for this game, you&#39;re going to want to determine all of the indices for a specific letter.\r\n\r\n```java\r\nList&lt;Integer&gt; indices = new ArrayList&lt;&gt;();\r\nint index = 0;\r\nchar selectedChar = choice.charAt(0);\r\nfor (char character : randomWords.toCharArray()) {\r\n    if (character == selectedChar) indices.add(index);\r\n    index++;\r\n}\r\n```\r\n\r\nSo, if your word is _&quot;Java&quot;_, and _choice_ is _&quot;a&quot;_, the _indices_ list will contain, _1_ and _3_.\r\n\r\n&gt; _&quot;... I&#39;ve never used a stream, but this may be the time. ...&quot;_\r\n\r\nYeah, that is a great approach&amp;mdash;there is no better way to learn it, than to simply apply it.\r\n\r\nIf you&#39;re unfamiliar with the topic, there is a great book by O&#39;Reilly Media, which covers the topic in total.  \r\n_[O&#39;Reilly Media &amp;ndash; Java 8 Lambdas](https://www.oreilly.com/library/view/java-8-lambdas/9781449370831/)_.\r\n\r\nThere is most likely more than one way to construct this stream.\r\n\r\nI&#39;m using the _[String#chars](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#chars())_ method to return an _[IntStream](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/IntStream.html)_ object.  \r\nFrom there, I&#39;m utilizing the _[IntStream#anyMatch](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/IntStream.html#anyMatch(java.util.function.IntPredicate))_ method, with a boolean predicate, to evaluate the character.\r\n\r\n```java\r\nchar selectedChar = choice.charAt(0);\r\nboolean found\r\n    = randomWords.chars()\r\n                 .anyMatch(character -&gt; character == selectedChar);\r\n```\r\n\r\nUsing a stream to map the indices is a bit trickier, I had to look it up.  \r\n_[StackOverflow &amp;ndash; Java 8/9: Can a character in a String be mapped to its indices (using streams)?](https://stackoverflow.com/a/48592303/17758716)_.\r\n\r\nThe starting point is a range of _Integer_ values, from _0_ to the length of _String_.  \r\nFrom there, they stream the range, and only add a character when it matches.\r\n\r\nHere&#39;s an implementation.  \r\nIt utilizes the _[range](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/IntStream.html#range(int,int))_, _[filter](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/IntStream.html#filter(java.util.function.IntPredicate))_, and _[boxed](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/IntStream.html#boxed())_ methods, of the _IntStream_ class, and additionally the _[Stream#toList](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/Stream.html#toList())_ method.\r\n\r\n```java\r\nchar selectedChar = choice.charAt(0);\r\nList&lt;Integer&gt; indices\r\n    = IntStream.range(0, randomWords.length())\r\n               .filter(value -&gt; randomWords.charAt(value) == selectedChar)\r\n               .boxed()\r\n               .toList();\r\n```","title":"How check if char appears in string in ArrayList?","body":"<blockquote>\n<p><em>&quot;... Do I need to use a stream for this? ...&quot;</em></p>\n</blockquote>\n<p>No, you can use the either the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#contains(java.lang.CharSequence)\" rel=\"nofollow noreferrer\">String#contains</a></em>, or <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#indexOf(int)\" rel=\"nofollow noreferrer\">String#indexOf</a></em>, method, to determine if a <em>String</em> contains a specific character.</p>\n<pre class=\"lang-java prettyprint-override\"><code>boolean found = randomWords.contains(choice);\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>boolean found = randomWords.indexOf(choice) != -1;\n</code></pre>\n<p>Also, for this game, you're going to want to determine all of the indices for a specific letter.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Integer&gt; indices = new ArrayList&lt;&gt;();\nint index = 0;\nchar selectedChar = choice.charAt(0);\nfor (char character : randomWords.toCharArray()) {\n    if (character == selectedChar) indices.add(index);\n    index++;\n}\n</code></pre>\n<p>So, if your word is <em>&quot;Java&quot;</em>, and <em>choice</em> is <em>&quot;a&quot;</em>, the <em>indices</em> list will contain, <em>1</em> and <em>3</em>.</p>\n<blockquote>\n<p><em>&quot;... I've never used a stream, but this may be the time. ...&quot;</em></p>\n</blockquote>\n<p>Yeah, that is a great approach—there is no better way to learn it, than to simply apply it.</p>\n<p>If you're unfamiliar with the topic, there is a great book by O'Reilly Media, which covers the topic in total.<br />\n<em><a href=\"https://www.oreilly.com/library/view/java-8-lambdas/9781449370831/\" rel=\"nofollow noreferrer\">O'Reilly Media – Java 8 Lambdas</a></em>.</p>\n<p>There is most likely more than one way to construct this stream.</p>\n<p>I'm using the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#chars()\" rel=\"nofollow noreferrer\">String#chars</a></em> method to return an <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/IntStream.html\" rel=\"nofollow noreferrer\">IntStream</a></em> object.<br />\nFrom there, I'm utilizing the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/IntStream.html#anyMatch(java.util.function.IntPredicate)\" rel=\"nofollow noreferrer\">IntStream#anyMatch</a></em> method, with a boolean predicate, to evaluate the character.</p>\n<pre class=\"lang-java prettyprint-override\"><code>char selectedChar = choice.charAt(0);\nboolean found\n    = randomWords.chars()\n                 .anyMatch(character -&gt; character == selectedChar);\n</code></pre>\n<p>Using a stream to map the indices is a bit trickier, I had to look it up.<br />\n<em><a href=\"https://stackoverflow.com/a/48592303/17758716\">StackOverflow – Java 8/9: Can a character in a String be mapped to its indices (using streams)?</a></em>.</p>\n<p>The starting point is a range of <em>Integer</em> values, from <em>0</em> to the length of <em>String</em>.<br />\nFrom there, they stream the range, and only add a character when it matches.</p>\n<p>Here's an implementation.<br />\nIt utilizes the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/IntStream.html#range(int,int)\" rel=\"nofollow noreferrer\">range</a></em>, <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/IntStream.html#filter(java.util.function.IntPredicate)\" rel=\"nofollow noreferrer\">filter</a></em>, and <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/IntStream.html#boxed()\" rel=\"nofollow noreferrer\">boxed</a></em> methods, of the <em>IntStream</em> class, and additionally the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/Stream.html#toList()\" rel=\"nofollow noreferrer\">Stream#toList</a></em> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>char selectedChar = choice.charAt(0);\nList&lt;Integer&gt; indices\n    = IntStream.range(0, randomWords.length())\n               .filter(value -&gt; randomWords.charAt(value) == selectedChar)\n               .boxed()\n               .toList();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29052842,"reputation":1,"user_id":22255240,"display_name":"vembz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689815718,"creation_date":1689815703,"answer_id":76726093,"question_id":76522155,"body_markdown":"    void createCipher() {\r\n    randomWords.chars()\r\n            .mapToObj(c -&gt; (char) c)\r\n            .forEach(letter -&gt; {\r\n                if (player.selectedLetter.contains(String.valueOf(letter))) {\r\n                    System.out.print(letter);\r\n                } else {\r\n                    System.out.print(&quot;_&quot;);\r\n                }\r\n            });}","title":"How check if char appears in string in ArrayList?","body":"<pre><code>void createCipher() {\nrandomWords.chars()\n        .mapToObj(c -&gt; (char) c)\n        .forEach(letter -&gt; {\n            if (player.selectedLetter.contains(String.valueOf(letter))) {\n                System.out.print(letter);\n            } else {\n                System.out.print(&quot;_&quot;);\n            }\n        });}\n</code></pre>\n"}],"owner":{"account_id":28864899,"reputation":1,"user_id":22107881,"display_name":"Habe44"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689815718,"creation_date":1687342228,"question_id":76522155,"body_markdown":"I am writing a game of Hangman and I need a method that will check if the letter typed by the player occurs in the word that the computer drew from the ArrayList. Do I need to use a stream for this? I&#39;ve never used a stream, but this may be the time. For better understanding, I throw in my code. Objects and strings are in Polish. Method I would like to put in the createCipher class\r\n\r\n```\r\nimport java.util.ArrayList;\r\nimport java.util.Random;\r\nimport java.util.Scanner;\r\n\r\npublic class Hangman {\r\n    static ArrayList&lt;String&gt; words = new ArrayList&lt;&gt;();\r\n\r\n    public static void main(String[] args) {\r\n        PrepareGame pomocnik = new PrepareGame();\r\n        PrepareGame.playerChoice pomocnik2 = new PrepareGame.playerChoice();\r\n        words.add(&quot;Puszka&quot;);\r\n        words.add(&quot;Kot&quot;);\r\n        words.add(&quot;Pies&quot;);\r\n\r\n        pomocnik.drawWord();\r\n        pomocnik.countLetters();\r\n        pomocnik.createCipher();\r\n        pomocnik2.choose();\r\n    }\r\n}\r\n\r\nclass PrepareGame {\r\n    playerChoice player = new playerChoice();\r\n    String randomWords;\r\n\r\n    void drawWord() {\r\n        Random r = new Random();\r\n        int randomitem = r.nextInt(Hangman.words.size());\r\n        String randomW = Hangman.words.get(randomitem);\r\n        randomWords = randomW;\r\n        System.out.println(randomW);\r\n    }\r\n\r\n    void countLetters() {\r\n        int len = randomWords.length();\r\n        System.out.println(len);\r\n    }\r\n\r\n    void createCipher() {\r\n            for (int cypher = 0; cypher &lt; randomWords.length(); cypher++) {\r\n                System.out.print(&quot;_&quot;);\r\n            }\r\n    }\r\n\r\n    static class playerChoice {\r\n        ArrayList&lt;String&gt; selectedLetter = new ArrayList&lt;&gt;();\r\n        String choice;\r\n        Scanner scan = new Scanner(System.in);\r\n\r\n        void choose() {\r\n            System.out.println(&quot; &quot;);\r\n            System.out.println(&quot;wpisz litere: &quot;);\r\n            String pChoice = scan.nextLine();\r\n            choice = pChoice;\r\n            selectedLetter.add(choice);\r\n            System.out.println(&quot;Wybrana litera: &quot; + choice);\r\n\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nI tried with indexOf() and contains() but not worked. Maybe I&#39;m using it wrong.","title":"How check if char appears in string in ArrayList?","body":"<p>I am writing a game of Hangman and I need a method that will check if the letter typed by the player occurs in the word that the computer drew from the ArrayList. Do I need to use a stream for this? I've never used a stream, but this may be the time. For better understanding, I throw in my code. Objects and strings are in Polish. Method I would like to put in the createCipher class</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.Random;\nimport java.util.Scanner;\n\npublic class Hangman {\n    static ArrayList&lt;String&gt; words = new ArrayList&lt;&gt;();\n\n    public static void main(String[] args) {\n        PrepareGame pomocnik = new PrepareGame();\n        PrepareGame.playerChoice pomocnik2 = new PrepareGame.playerChoice();\n        words.add(&quot;Puszka&quot;);\n        words.add(&quot;Kot&quot;);\n        words.add(&quot;Pies&quot;);\n\n        pomocnik.drawWord();\n        pomocnik.countLetters();\n        pomocnik.createCipher();\n        pomocnik2.choose();\n    }\n}\n\nclass PrepareGame {\n    playerChoice player = new playerChoice();\n    String randomWords;\n\n    void drawWord() {\n        Random r = new Random();\n        int randomitem = r.nextInt(Hangman.words.size());\n        String randomW = Hangman.words.get(randomitem);\n        randomWords = randomW;\n        System.out.println(randomW);\n    }\n\n    void countLetters() {\n        int len = randomWords.length();\n        System.out.println(len);\n    }\n\n    void createCipher() {\n            for (int cypher = 0; cypher &lt; randomWords.length(); cypher++) {\n                System.out.print(&quot;_&quot;);\n            }\n    }\n\n    static class playerChoice {\n        ArrayList&lt;String&gt; selectedLetter = new ArrayList&lt;&gt;();\n        String choice;\n        Scanner scan = new Scanner(System.in);\n\n        void choose() {\n            System.out.println(&quot; &quot;);\n            System.out.println(&quot;wpisz litere: &quot;);\n            String pChoice = scan.nextLine();\n            choice = pChoice;\n            selectedLetter.add(choice);\n            System.out.println(&quot;Wybrana litera: &quot; + choice);\n\n        }\n    }\n}\n\n</code></pre>\n<p>I tried with indexOf() and contains() but not worked. Maybe I'm using it wrong.</p>\n"},{"tags":["java","eclipse","spotless"],"comments":[{"owner":{"account_id":1358031,"reputation":1289,"user_id":1296019,"accept_rate":87,"display_name":"cocorossello"},"score":0,"creation_date":1676626918,"post_id":66640397,"comment_id":133179298,"body_markdown":"Did you ever find out?","body":"Did you ever find out?"}],"answers":[{"tags":[],"owner":{"account_id":14446626,"reputation":2578,"user_id":10435528,"display_name":"devatherock"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689815145,"creation_date":1689815145,"answer_id":76726060,"question_id":66640397,"body_markdown":"I used similar spotless eclipse formatter settings and still ran into the same issue with the formatter joining wrapped API documentation lines into a single long line. What I ended up doing was enabling [toggle comments](https://github.com/diffplug/spotless/tree/main/plugin-gradle#spotlessoff-and-spotlesson) and putting them around the lines I didn&#39;t want joined. Wrapped lines that are surrounded by the toggle comments remain wrapped. Sample below:\r\n\r\n```\r\n    // spotless:off\r\n    @Operation(summary = &quot;getImagePullCount&quot;,\r\n               description = &quot;Generates the docker pulls badge&quot;,\r\n               responses = @ApiResponse(description = &quot;An XML representing the SVG docker pulls badge&quot;,\r\n                                        content = @Content(mediaType = CONTENT_TYPE_BADGE,\r\n                                        schema = @Schema(implementation = String.class))))\r\n    public String getImagePullCount(@Parameter(in = ParameterIn.QUERY,\r\n                                               description = ApiSpecConstants.API_DESC_PARAM_PACKAGE,\r\n                                               example = ApiSpecConstants.EXAMPLE_PARAM_PACKAGE)\r\n                                    @QueryValue(&quot;package&quot;) String packageName,\r\n                                    @Parameter(in = ParameterIn.QUERY,\r\n                                               description = ApiSpecConstants.API_DESC_PARAM_LABEL)\r\n                                    @QueryValue(value = &quot;label&quot;, defaultValue = &quot;docker pulls&quot;) String badgeLabel) {\r\n    // spotless:on\r\n```\r\n","title":"How to prevent Spotless/Eclipse from joining lines?","body":"<p>I used similar spotless eclipse formatter settings and still ran into the same issue with the formatter joining wrapped API documentation lines into a single long line. What I ended up doing was enabling <a href=\"https://github.com/diffplug/spotless/tree/main/plugin-gradle#spotlessoff-and-spotlesson\" rel=\"nofollow noreferrer\">toggle comments</a> and putting them around the lines I didn't want joined. Wrapped lines that are surrounded by the toggle comments remain wrapped. Sample below:</p>\n<pre><code>    // spotless:off\n    @Operation(summary = &quot;getImagePullCount&quot;,\n               description = &quot;Generates the docker pulls badge&quot;,\n               responses = @ApiResponse(description = &quot;An XML representing the SVG docker pulls badge&quot;,\n                                        content = @Content(mediaType = CONTENT_TYPE_BADGE,\n                                        schema = @Schema(implementation = String.class))))\n    public String getImagePullCount(@Parameter(in = ParameterIn.QUERY,\n                                               description = ApiSpecConstants.API_DESC_PARAM_PACKAGE,\n                                               example = ApiSpecConstants.EXAMPLE_PARAM_PACKAGE)\n                                    @QueryValue(&quot;package&quot;) String packageName,\n                                    @Parameter(in = ParameterIn.QUERY,\n                                               description = ApiSpecConstants.API_DESC_PARAM_LABEL)\n                                    @QueryValue(value = &quot;label&quot;, defaultValue = &quot;docker pulls&quot;) String badgeLabel) {\n    // spotless:on\n</code></pre>\n"}],"owner":{"account_id":237529,"reputation":18988,"user_id":2621917,"accept_rate":80,"display_name":"Michael Piefel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":714,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":1,"score":7,"last_activity_date":1689815145,"creation_date":1615820253,"question_id":66640397,"body_markdown":"I have a project that uses [Spotless with the Eclipse formatter](https://github.com/diffplug/spotless/tree/master/plugin-gradle#eclipse-jdt) to check and format the source code.\r\n\r\nNow _one_ problem is that the formatter creates some absurdly long lines such as the following:\r\n\r\n```\r\n    @ApiModelProperty(value = &quot;This is a placeholder text but the real text is just as long as this.&quot;, required = true, example = &quot;811769e0-69f8-11e6-91aa-02000ab20f88&quot;)\r\n```\r\n\r\nThat’s 170 characters, and I got eye-strain and SonarQube complaining. When I break the line, Spotless/Eclipse insist on joining the lines together. The configuration file has lines such as:\r\n\r\n```xml\r\n&lt;setting id=&quot;org.eclipse.jdt.core.formatter.join_wrapped_lines&quot; value=&quot;false&quot;/&gt;\r\n&lt;setting id=&quot;org.eclipse.jdt.core.formatter.lineSplit&quot; value=&quot;150&quot;/&gt;\r\n```\r\n\r\nThe file is picked up fine, but the formatter still joins these wrapped lines and would never split them. There seems to be a related ancient (and closed) [issue 338916](https://bugs.eclipse.org/bugs/show_bug.cgi?id=338916) in the Eclipse bug tracker. This is probably not a Spotless configuration issue, since it delegates everything to the Ecplipse plugin. Which magic configuration key will persuate the Eclipse formatter to behave as advertised?","title":"How to prevent Spotless/Eclipse from joining lines?","body":"<p>I have a project that uses <a href=\"https://github.com/diffplug/spotless/tree/master/plugin-gradle#eclipse-jdt\" rel=\"noreferrer\">Spotless with the Eclipse formatter</a> to check and format the source code.</p>\n<p>Now <em>one</em> problem is that the formatter creates some absurdly long lines such as the following:</p>\n<pre><code>    @ApiModelProperty(value = &quot;This is a placeholder text but the real text is just as long as this.&quot;, required = true, example = &quot;811769e0-69f8-11e6-91aa-02000ab20f88&quot;)\n</code></pre>\n<p>That’s 170 characters, and I got eye-strain and SonarQube complaining. When I break the line, Spotless/Eclipse insist on joining the lines together. The configuration file has lines such as:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;setting id=&quot;org.eclipse.jdt.core.formatter.join_wrapped_lines&quot; value=&quot;false&quot;/&gt;\n&lt;setting id=&quot;org.eclipse.jdt.core.formatter.lineSplit&quot; value=&quot;150&quot;/&gt;\n</code></pre>\n<p>The file is picked up fine, but the formatter still joins these wrapped lines and would never split them. There seems to be a related ancient (and closed) <a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=338916\" rel=\"noreferrer\">issue 338916</a> in the Eclipse bug tracker. This is probably not a Spotless configuration issue, since it delegates everything to the Ecplipse plugin. Which magic configuration key will persuate the Eclipse formatter to behave as advertised?</p>\n"},{"tags":["java","redis","reactive","spring-data-redis"],"answers":[{"tags":[],"owner":{"account_id":28759342,"reputation":11,"user_id":22025617,"display_name":"migueljacuinde"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689814588,"creation_date":1689814588,"answer_id":76726036,"question_id":76711636,"body_markdown":"You can actually manually configure redis by creating a redis properties class with the @Configuration annotation above the class. You can then set a variable of type Integer for the timeout (whether it be in ms, s, or even minutes). After that class is created, in your application properties, you can set this timeout variable to any number you wish so that redis does not timeout.","title":"Is there a way to handle redis timeouts and not to fail the API if redis is unavailable","body":"<p>You can actually manually configure redis by creating a redis properties class with the @Configuration annotation above the class. You can then set a variable of type Integer for the timeout (whether it be in ms, s, or even minutes). After that class is created, in your application properties, you can set this timeout variable to any number you wish so that redis does not timeout.</p>\n"}],"owner":{"account_id":26400754,"reputation":35,"user_id":20051262,"display_name":"developer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689814588,"creation_date":1689674612,"question_id":76711636,"body_markdown":"For my API , I am using redis cache , sometimes while calling redis we get exceptions like timeout because of which the API fails even though the data is present in redis and in database. \r\nIs there any way that if redis fails then my API does not stop working and we get the response.","title":"Is there a way to handle redis timeouts and not to fail the API if redis is unavailable","body":"<p>For my API , I am using redis cache , sometimes while calling redis we get exceptions like timeout because of which the API fails even though the data is present in redis and in database.\nIs there any way that if redis fails then my API does not stop working and we get the response.</p>\n"},{"tags":["java","websocket"],"comments":[{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":1,"creation_date":1689815003,"post_id":76725977,"comment_id":135268149,"body_markdown":"Does this answer your question? [javax.websocket client simple example](https://stackoverflow.com/questions/26452903/javax-websocket-client-simple-example)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/26452903/javax-websocket-client-simple-example\">javax.websocket client simple example</a>"}],"owner":{"account_id":14127335,"reputation":13,"user_id":10206187,"display_name":"Daniel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689813608,"creation_date":1689813242,"question_id":76725977,"body_markdown":"I am trying to come up with a solution that requires subscribing to websocket in a 3rd party server.\r\n\r\nThe thing is I need to listen to this in the server-side, not on client side. So somehow I need to keep this connection alive in my server (java) and listen to the websocket messages, which would then trigger something else.\r\n\r\n\r\n\r\nI am a bit lost on how to achieve that and best patterns as apparently this is not really common.\r\n\r\nDo you have suggestions on how should this be done?","title":"Can I have a websocket connection client in a server? i.e a server subscribing to another server sending events","body":"<p>I am trying to come up with a solution that requires subscribing to websocket in a 3rd party server.</p>\n<p>The thing is I need to listen to this in the server-side, not on client side. So somehow I need to keep this connection alive in my server (java) and listen to the websocket messages, which would then trigger something else.</p>\n<p>I am a bit lost on how to achieve that and best patterns as apparently this is not really common.</p>\n<p>Do you have suggestions on how should this be done?</p>\n"},{"tags":["java","file","zip","passwords"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":2,"creation_date":1689772050,"post_id":76721613,"comment_id":135260450,"body_markdown":"You could [list](https://github.com/srikanth-lingala/zip4j#list-all-files-in-a-zip) the files instead of extracting anything.","body":"You could <a href=\"https://github.com/srikanth-lingala/zip4j#list-all-files-in-a-zip\" rel=\"nofollow noreferrer\">list</a> the files instead of extracting anything."},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1689783190,"post_id":76721613,"comment_id":135263421,"body_markdown":"Are you sure that things don&#39;t fail as soon as you attempt to extract the large file? I tried a test and it appears that as soon as you try to extract something with a bad password, you get an exception. The size of the file did not come into account.","body":"Are you sure that things don&#39;t fail as soon as you attempt to extract the large file? I tried a test and it appears that as soon as you try to extract something with a bad password, you get an exception. The size of the file did not come into account."},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":1,"creation_date":1689783325,"post_id":76721613,"comment_id":135263446,"body_markdown":"I am not sure why you need a new library to delete files. Does `Files.delete` and `Files.deleteIfExists` not work?","body":"I am not sure why you need a new library to delete files. Does <code>Files.delete</code> and <code>Files.deleteIfExists</code> not work?"},{"owner":{"account_id":9941649,"reputation":171,"user_id":7358048,"display_name":"Michal Rama"},"score":0,"creation_date":1689791243,"post_id":76721613,"comment_id":135265036,"body_markdown":"@SedJ601 Because I don&#39;t want to delete the file, but the entire newly created folder, which apparently java can&#39;t do.","body":"@SedJ601 Because I don&#39;t want to delete the file, but the entire newly created folder, which apparently java can&#39;t do."},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":1,"creation_date":1689792291,"post_id":76721613,"comment_id":135265245,"body_markdown":"What error are you getting when you attempt to delete the folder?","body":"What error are you getting when you attempt to delete the folder?"},{"owner":{"account_id":9941649,"reputation":171,"user_id":7358048,"display_name":"Michal Rama"},"score":0,"creation_date":1689798923,"post_id":76721613,"comment_id":135266466,"body_markdown":"@FedericoklezCulloca Thank you, you are right. I can also get a list of files from the passworded archive, including their size. I just need to simplify the selection of the smallest file, please (I updated the code)","body":"@FedericoklezCulloca Thank you, you are right. I can also get a list of files from the passworded archive, including their size. I just need to simplify the selection of the smallest file, please (I updated the code)"},{"owner":{"account_id":9941649,"reputation":171,"user_id":7358048,"display_name":"Michal Rama"},"score":0,"creation_date":1689799580,"post_id":76721613,"comment_id":135266546,"body_markdown":"@SedJ601 I don&#39;t know how big the file would cause the error (400MB wasn&#39;t a problem). And the correctness of the password is in the try catch. But as I said, the code already selects the smallest file, I just need to simplify it. P.S. As for the deletion, I need to delete the whole folder, which java supposedly can&#39;t do as stated [here](https://stackoverflow.com/questions/20281835/how-to-delete-a-folder-with-files-using-java/20281958#20281958), so I&#39;m using an external library.","body":"@SedJ601 I don&#39;t know how big the file would cause the error (400MB wasn&#39;t a problem). And the correctness of the password is in the try catch. But as I said, the code already selects the smallest file, I just need to simplify it. P.S. As for the deletion, I need to delete the whole folder, which java supposedly can&#39;t do as stated <a href=\"https://stackoverflow.com/questions/20281835/how-to-delete-a-folder-with-files-using-java/20281958#20281958\">here</a>, so I&#39;m using an external library."},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":1,"creation_date":1689801010,"post_id":76721613,"comment_id":135266795,"body_markdown":"The link you posted list many ways to delete all the files in a folder plus the folder. There is no need for a library. The library most likely uses one of these ways. `Files.walk(pathToBeDeleted)\n    .sorted(Comparator.reverseOrder())\n    .map(Path::toFile)\n    .forEach(File::delete);`.","body":"The link you posted list many ways to delete all the files in a folder plus the folder. There is no need for a library. The library most likely uses one of these ways. <code>Files.walk(pathToBeDeleted)     .sorted(Comparator.reverseOrder())     .map(Path::toFile)     .forEach(File::delete);</code>."},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1689801404,"post_id":76721613,"comment_id":135266865,"body_markdown":"Given how good Apache&#39;s `FileUtils` appear to be, I would say keep using it.","body":"Given how good Apache&#39;s <code>FileUtils</code> appear to be, I would say keep using it."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1689812505,"post_id":76721613,"comment_id":135267949,"body_markdown":"Another optimization you might want to use is [`Files.createTempDirectory`](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/Files.html#createTempDirectory(java.nio.file.Path,java.lang.String,java.nio.file.attribute.FileAttribute...)) to create your temporary directory, rather than hardcoding `C:/tmp_directory`, which is not a portable solution.  Also I removed the JavaFX tag as the question isn&#39;t JavaFX related.","body":"Another optimization you might want to use is <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/Files.html#createTempDirectory(java.nio.file.Path,java.lang.String,java.nio.file.attribute.FileAttribute...)\" rel=\"nofollow noreferrer\"><code>Files.createTempDirectory</code></a> to create your temporary directory, rather than hardcoding <code>C:&#47;tmp_directory</code>, which is not a portable solution.  Also I removed the JavaFX tag as the question isn&#39;t JavaFX related."}],"owner":{"account_id":9941649,"reputation":171,"user_id":7358048,"display_name":"Michal Rama"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689812734,"creation_date":1689771831,"question_id":76721613,"body_markdown":"I created a simple code (and a test zip file with the password **cat_666**) to check if the entered password is correct (using [zip4j](https://github.com/srikanth-lingala/zip4j) library)\r\n\r\n```\r\nvar filechooser = new FileChooser();\r\nfilechooser.getExtensionFilters().add(new FileChooser.ExtensionFilter(&quot;zipfile&quot;, &quot;*.zip&quot;));\r\nvar archive = filechooser.showOpenDialog(null);\r\ntry {\r\n    if (new ZipFile(archive).isEncrypted()) {\r\n        System.out.println(correctPassword(archive, &quot;cat.666&quot;));\r\n        System.out.println(correctPassword(archive, &quot;cat_666&quot;));\r\n    } else {\r\n        System.out.println(&quot;Without password&quot;);\r\n    }\r\n} catch (ZipException ex) {\r\n}\r\n\r\npublic static String correctPassword(File archive, String password) {\r\n    try {\r\n        var fileHeaders = new ZipFile(archive).getFileHeaders();\r\n        var smallest_size = fileHeaders.stream().map(f -&gt; f.getComssedSize()).min(Long::compare).get();\r\n        var smallest_file = fileHeaders.stream().filter(f -&gt; f.getCompressedSize() == smallest_size).findFirst().get();\r\n        new ZipFile(archive, password.toCharArray()).extractFile(smallest_file, &quot;/tmp_directory&quot;);\r\n        FileUtils.deleteDirectory(new File(&quot;C:/tmp_directory&quot;));\r\n    } catch (ZipException ex) {\r\n        return password + &quot; is not correct&quot;;\r\n    } catch (IOException ex) {\r\n        System.out.println(&quot;bad path&quot;);\r\n    }\r\n    return password + &quot; is correct&quot;;\r\n}\r\n```\r\n\r\nAlthough it works, there are three drawbacks.\r\n\r\n1. I call the method only when the file is encrypted. However, this validation alone requires a try catch, so it is there twice in the result.\r\n\r\n2. Password verification is probably not possible without extraction. Fortunately, it is possible to extract even one file and the size can be found even without a password, so I can extract the smallest file. However, its selection is unnecessarily complicated.\r\n \r\n3. By extracting the file, I want to delete it afterwards, for which it has to add another [Commons-io](https://commons.apache.org/proper/commons-io/) library there.\r\n\r\nCan it be simplified please?\r\n\r\nThank you\r\n\r\n**UPDATE:**\r\n\r\nI managed to partially solve the second problem to extract the smallest file to find the password. However, the code is unnecessarily complex.\r\n\r\nSince extracting at least one file is obviously necessary, it&#39;s not worth solving the third problem (library size is negligible)\r\n\r\nAnd the first problem is probably only an aesthetic detail, which I would ignore.","title":"An easy way to verify password correctness?","body":"<p>I created a simple code (and a test zip file with the password <strong>cat_666</strong>) to check if the entered password is correct (using <a href=\"https://github.com/srikanth-lingala/zip4j\" rel=\"nofollow noreferrer\">zip4j</a> library)</p>\n<pre><code>var filechooser = new FileChooser();\nfilechooser.getExtensionFilters().add(new FileChooser.ExtensionFilter(&quot;zipfile&quot;, &quot;*.zip&quot;));\nvar archive = filechooser.showOpenDialog(null);\ntry {\n    if (new ZipFile(archive).isEncrypted()) {\n        System.out.println(correctPassword(archive, &quot;cat.666&quot;));\n        System.out.println(correctPassword(archive, &quot;cat_666&quot;));\n    } else {\n        System.out.println(&quot;Without password&quot;);\n    }\n} catch (ZipException ex) {\n}\n\npublic static String correctPassword(File archive, String password) {\n    try {\n        var fileHeaders = new ZipFile(archive).getFileHeaders();\n        var smallest_size = fileHeaders.stream().map(f -&gt; f.getComssedSize()).min(Long::compare).get();\n        var smallest_file = fileHeaders.stream().filter(f -&gt; f.getCompressedSize() == smallest_size).findFirst().get();\n        new ZipFile(archive, password.toCharArray()).extractFile(smallest_file, &quot;/tmp_directory&quot;);\n        FileUtils.deleteDirectory(new File(&quot;C:/tmp_directory&quot;));\n    } catch (ZipException ex) {\n        return password + &quot; is not correct&quot;;\n    } catch (IOException ex) {\n        System.out.println(&quot;bad path&quot;);\n    }\n    return password + &quot; is correct&quot;;\n}\n</code></pre>\n<p>Although it works, there are three drawbacks.</p>\n<ol>\n<li><p>I call the method only when the file is encrypted. However, this validation alone requires a try catch, so it is there twice in the result.</p>\n</li>\n<li><p>Password verification is probably not possible without extraction. Fortunately, it is possible to extract even one file and the size can be found even without a password, so I can extract the smallest file. However, its selection is unnecessarily complicated.</p>\n</li>\n<li><p>By extracting the file, I want to delete it afterwards, for which it has to add another <a href=\"https://commons.apache.org/proper/commons-io/\" rel=\"nofollow noreferrer\">Commons-io</a> library there.</p>\n</li>\n</ol>\n<p>Can it be simplified please?</p>\n<p>Thank you</p>\n<p><strong>UPDATE:</strong></p>\n<p>I managed to partially solve the second problem to extract the smallest file to find the password. However, the code is unnecessarily complex.</p>\n<p>Since extracting at least one file is obviously necessary, it's not worth solving the third problem (library size is negligible)</p>\n<p>And the first problem is probably only an aesthetic detail, which I would ignore.</p>\n"},{"tags":["java","stream"],"answers":[{"tags":[],"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689063817,"creation_date":1689057575,"answer_id":76659267,"question_id":76659206,"body_markdown":"It seems, you just need to SORT the pair.  The pairs are duplicated just because of the reverse order of the numbers in the pair.\r\n\r\n```\r\n\t\tList&lt;Integer&gt; listOfNumbers = Arrays.asList(15, 12, 4, 16, 9, 8, 24, 0);\r\n\t\tSet&lt;String&gt; sumPair = listOfNumbers.stream()\r\n\t\t\t\t.flatMap(i -&gt; listOfNumbers.stream()\r\n\t\t\t\t\t\t.filter(p -&gt; (i + p) == 16 &amp;&amp; listOfNumbers.indexOf(p) != listOfNumbers.indexOf(i))\r\n\t\t\t\t\t\t.map(p -&gt; i &lt; p ? (p + &quot; &quot; + i) : (i + &quot; &quot; + p)))\r\n\t\t\t\t.collect(Collectors.toSet());\r\n\t\tfor (String pair : sumPair) {\r\n\t\t\tSystem.out.println(pair);\r\n\t\t}\r\n```\r\n\r\nOutput:\r\n```\r\n12 4\r\n16 0\r\n```\r\n\r\nAlso, I simplified to use the stream of strings instead of Integer array.\r\nBut you can tweak it as you like.\r\n\r\nThe main problem was &quot;12 4&quot; and &quot;4 12&quot; - the pair of same numbers but in reverse order will be different values for Set, and will get added twice.\r\n\r\nUpdate... \r\nOne more thing that can be done is using Stream.distinct, instead of using a Set.\r\n\r\n```\r\nList&lt;Integer&gt; listOfNumbers = Arrays.asList(15, 12, 4, 16, 9, 8, 24, 0, 12);\r\nlistOfNumbers.stream()\r\n\t\t.flatMap(i -&gt; listOfNumbers.stream().filter(j -&gt; (i + j) == 16 &amp;&amp; i &lt; j).map(k -&gt; i + &quot; &quot; + k))\r\n\t\t.distinct().forEach(System.out::println);\r\n```\r\nThis gives the same output\r\n```\r\n12 4\r\n16 0\r\n```","title":"Find which number in a list sum up to a certain number Using Java 8 Stream API","body":"<p>It seems, you just need to SORT the pair.  The pairs are duplicated just because of the reverse order of the numbers in the pair.</p>\n<pre><code>        List&lt;Integer&gt; listOfNumbers = Arrays.asList(15, 12, 4, 16, 9, 8, 24, 0);\n        Set&lt;String&gt; sumPair = listOfNumbers.stream()\n                .flatMap(i -&gt; listOfNumbers.stream()\n                        .filter(p -&gt; (i + p) == 16 &amp;&amp; listOfNumbers.indexOf(p) != listOfNumbers.indexOf(i))\n                        .map(p -&gt; i &lt; p ? (p + &quot; &quot; + i) : (i + &quot; &quot; + p)))\n                .collect(Collectors.toSet());\n        for (String pair : sumPair) {\n            System.out.println(pair);\n        }\n</code></pre>\n<p>Output:</p>\n<pre><code>12 4\n16 0\n</code></pre>\n<p>Also, I simplified to use the stream of strings instead of Integer array.\nBut you can tweak it as you like.</p>\n<p>The main problem was &quot;12 4&quot; and &quot;4 12&quot; - the pair of same numbers but in reverse order will be different values for Set, and will get added twice.</p>\n<p>Update...\nOne more thing that can be done is using Stream.distinct, instead of using a Set.</p>\n<pre><code>List&lt;Integer&gt; listOfNumbers = Arrays.asList(15, 12, 4, 16, 9, 8, 24, 0, 12);\nlistOfNumbers.stream()\n        .flatMap(i -&gt; listOfNumbers.stream().filter(j -&gt; (i + j) == 16 &amp;&amp; i &lt; j).map(k -&gt; i + &quot; &quot; + k))\n        .distinct().forEach(System.out::println);\n</code></pre>\n<p>This gives the same output</p>\n<pre><code>12 4\n16 0\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1674431,"reputation":7823,"user_id":1540264,"display_name":"Grisha Weintraub"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689063921,"creation_date":1689060037,"answer_id":76659520,"question_id":76659206,"body_markdown":"        static void printPairs(List&lt;Integer&gt; list, int sum){\r\n            list\r\n                .stream()\r\n                .flatMap(i -&gt; list.stream().filter(j -&gt; i + j == sum &amp;&amp; i &lt; j))\r\n                .map(k -&gt; k + &quot;, &quot; + (sum-k))\r\n                .distinct()\r\n                .forEach(System.out::println);\r\n        }","title":"Find which number in a list sum up to a certain number Using Java 8 Stream API","body":"<pre><code>    static void printPairs(List&lt;Integer&gt; list, int sum){\n        list\n            .stream()\n            .flatMap(i -&gt; list.stream().filter(j -&gt; i + j == sum &amp;&amp; i &lt; j))\n            .map(k -&gt; k + &quot;, &quot; + (sum-k))\n            .distinct()\n            .forEach(System.out::println);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689089515,"creation_date":1689069288,"answer_id":76660740,"question_id":76659206,"body_markdown":"You can take advantage of the fact that 2 sets are considered equal, if they contain the same element, regardless of the order. From the [docs][1]:\r\n\r\n&gt; Returns true if the specified object is also a set, the two sets have the same size, and every member of the specified set is contained in this set (or equivalently, every member of this set is contained in the specified set).\r\n\r\nCollect to a `Set&lt;Set&lt;Integer&gt;&gt;`\r\n```\r\nList&lt;Integer&gt; listOfNumbers = Arrays.asList(15, 12, 4, 16, 9, 8, 24, 0);\r\nSet&lt;Set&lt;Integer&gt;&gt; sumPair = listOfNumbers.stream()\r\n        .flatMap(i -&gt; listOfNumbers.stream()\r\n                .filter(p -&gt; (i + p) == 16 &amp;&amp; listOfNumbers.indexOf(p) != listOfNumbers.indexOf(i))\r\n                .map(p -&gt; new HashSet&lt;&gt;(Arrays.asList(p, i))))\r\n        .collect(Collectors.toSet());\r\nfor (Set&lt;Integer&gt; integers : sumPair) {\r\n  for (Integer val : integers) {\r\n    System.out.print(val + &quot; &quot;);\r\n  }\r\n  System.out.println();\r\n}\r\n```\r\nNote that `HashSet` is unordered, so you may need to sort, if it matters.\r\n\r\nPersonally i would do it with a custom class, though. Let&#39;s say `Pair`:\r\n```\r\npublic class Pair {\r\n\r\n  private final int a;\r\n  private final int b;\r\n\r\n  public Pair(int a, int b) {\r\n    this.a = a;\r\n    this.b = b;\r\n  }\r\n\r\n  @Override\r\n  public int hashCode() {\r\n    return Integer.hashCode(this.a + this.b);\r\n  }\r\n\r\n  @Override\r\n  public boolean equals(Object obj) {\r\n    if (this == obj) {\r\n      return true;\r\n    }\r\n    if (!(obj instanceof Pair pair)) {\r\n      return false;\r\n    }\r\n    return (this.a == pair.a &amp;&amp; this.b == pair.b) || (this.a == pair.b &amp;&amp; this.b == pair.a);\r\n  }\r\n\r\n  @Override\r\n  public String toString() {\r\n    return this.a + &quot; &quot; + this.b;\r\n  }\r\n}\r\n```\r\nThen finding and collecting the pairs would be like this:\r\n```\r\nList&lt;Integer&gt; listOfNumbers = Arrays.asList(15, 12, 4, 16, 9, 8, 24, 0);\r\nSet&lt;Pair&gt; sumPair = listOfNumbers.stream()\r\n        .flatMap(i -&gt; listOfNumbers.stream()\r\n                .filter(p -&gt; (i + p) == 16 &amp;&amp; listOfNumbers.indexOf(p) != listOfNumbers.indexOf(i))\r\n                .map(p -&gt; new Pair(i, p)))\r\n        .collect(Collectors.toSet());\r\nfor (Pair pair : sumPair) {\r\n  System.out.println(pair);\r\n}\r\n```\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Set.html#equals-java.lang.Object-","title":"Find which number in a list sum up to a certain number Using Java 8 Stream API","body":"<p>You can take advantage of the fact that 2 sets are considered equal, if they contain the same element, regardless of the order. From the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Set.html#equals-java.lang.Object-\" rel=\"nofollow noreferrer\">docs</a>:</p>\n<blockquote>\n<p>Returns true if the specified object is also a set, the two sets have the same size, and every member of the specified set is contained in this set (or equivalently, every member of this set is contained in the specified set).</p>\n</blockquote>\n<p>Collect to a <code>Set&lt;Set&lt;Integer&gt;&gt;</code></p>\n<pre><code>List&lt;Integer&gt; listOfNumbers = Arrays.asList(15, 12, 4, 16, 9, 8, 24, 0);\nSet&lt;Set&lt;Integer&gt;&gt; sumPair = listOfNumbers.stream()\n        .flatMap(i -&gt; listOfNumbers.stream()\n                .filter(p -&gt; (i + p) == 16 &amp;&amp; listOfNumbers.indexOf(p) != listOfNumbers.indexOf(i))\n                .map(p -&gt; new HashSet&lt;&gt;(Arrays.asList(p, i))))\n        .collect(Collectors.toSet());\nfor (Set&lt;Integer&gt; integers : sumPair) {\n  for (Integer val : integers) {\n    System.out.print(val + &quot; &quot;);\n  }\n  System.out.println();\n}\n</code></pre>\n<p>Note that <code>HashSet</code> is unordered, so you may need to sort, if it matters.</p>\n<p>Personally i would do it with a custom class, though. Let's say <code>Pair</code>:</p>\n<pre><code>public class Pair {\n\n  private final int a;\n  private final int b;\n\n  public Pair(int a, int b) {\n    this.a = a;\n    this.b = b;\n  }\n\n  @Override\n  public int hashCode() {\n    return Integer.hashCode(this.a + this.b);\n  }\n\n  @Override\n  public boolean equals(Object obj) {\n    if (this == obj) {\n      return true;\n    }\n    if (!(obj instanceof Pair pair)) {\n      return false;\n    }\n    return (this.a == pair.a &amp;&amp; this.b == pair.b) || (this.a == pair.b &amp;&amp; this.b == pair.a);\n  }\n\n  @Override\n  public String toString() {\n    return this.a + &quot; &quot; + this.b;\n  }\n}\n</code></pre>\n<p>Then finding and collecting the pairs would be like this:</p>\n<pre><code>List&lt;Integer&gt; listOfNumbers = Arrays.asList(15, 12, 4, 16, 9, 8, 24, 0);\nSet&lt;Pair&gt; sumPair = listOfNumbers.stream()\n        .flatMap(i -&gt; listOfNumbers.stream()\n                .filter(p -&gt; (i + p) == 16 &amp;&amp; listOfNumbers.indexOf(p) != listOfNumbers.indexOf(i))\n                .map(p -&gt; new Pair(i, p)))\n        .collect(Collectors.toSet());\nfor (Pair pair : sumPair) {\n  System.out.println(pair);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29052842,"reputation":1,"user_id":22255240,"display_name":"vembz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689812484,"creation_date":1689812484,"answer_id":76725939,"question_id":76659206,"body_markdown":"Your current logic to find pairs whose sum equals a given number is functional, but it has some inefficiencies and redundant pairs in the output. To improve the logic, you can avoid redundant pairs and improve the performance. Here&#39;s an optimized version:\r\n\r\n\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            List&lt;Integer&gt; listOfNumbers = Arrays.asList(new Integer[]{15, 12, 4, 16, 9, 8, 24, 0});\r\n            int targetSum = 16;\r\n    \r\n            Set&lt;Integer[]&gt; sumPair = findPairsWithSum(listOfNumbers, targetSum);\r\n            for (Integer[] integers : sumPair) {\r\n                for (Integer val : integers) {\r\n                    System.out.print(val + &quot; &quot;);\r\n                }\r\n                System.out.println(&quot;&quot;);\r\n            }\r\n        }\r\n    \r\n        public static Set&lt;Integer[]&gt; findPairsWithSum(List&lt;Integer&gt; list, int targetSum) {\r\n            Set&lt;Integer&gt; seen = new HashSet&lt;&gt;();\r\n            Set&lt;Integer[]&gt; sumPair = new HashSet&lt;&gt;();\r\n    \r\n            for (Integer num : list) {\r\n                int complement = targetSum - num;\r\n                if (seen.contains(complement)) {\r\n                    Integer[] pair = {num, complement};\r\n                    Arrays.sort(pair);\r\n                    sumPair.add(pair);\r\n                }\r\n                seen.add(num);\r\n            }\r\n            return sumPair;\r\n        }\r\n    }\r\n\r\nIn this version, we use a HashSet called seen to store the elements of the list that we have encountered so far. As we iterate through the list, we check if the complement (the difference between the targetSum and the current number) is present in the seen set. If it is, we have found a pair that adds up to the targetSum, and we add the pair to the sumPair set. Sorting the pair before adding it ensures that we don&#39;t have duplicates like (4, 12) and (12, 4).\r\n\r\nThis solution reduces the complexity and avoids redundant pairs in the output.","title":"Find which number in a list sum up to a certain number Using Java 8 Stream API","body":"<p>Your current logic to find pairs whose sum equals a given number is functional, but it has some inefficiencies and redundant pairs in the output. To improve the logic, you can avoid redundant pairs and improve the performance. Here's an optimized version:</p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        List&lt;Integer&gt; listOfNumbers = Arrays.asList(new Integer[]{15, 12, 4, 16, 9, 8, 24, 0});\n        int targetSum = 16;\n\n        Set&lt;Integer[]&gt; sumPair = findPairsWithSum(listOfNumbers, targetSum);\n        for (Integer[] integers : sumPair) {\n            for (Integer val : integers) {\n                System.out.print(val + &quot; &quot;);\n            }\n            System.out.println(&quot;&quot;);\n        }\n    }\n\n    public static Set&lt;Integer[]&gt; findPairsWithSum(List&lt;Integer&gt; list, int targetSum) {\n        Set&lt;Integer&gt; seen = new HashSet&lt;&gt;();\n        Set&lt;Integer[]&gt; sumPair = new HashSet&lt;&gt;();\n\n        for (Integer num : list) {\n            int complement = targetSum - num;\n            if (seen.contains(complement)) {\n                Integer[] pair = {num, complement};\n                Arrays.sort(pair);\n                sumPair.add(pair);\n            }\n            seen.add(num);\n        }\n        return sumPair;\n    }\n}\n</code></pre>\n<p>In this version, we use a HashSet called seen to store the elements of the list that we have encountered so far. As we iterate through the list, we check if the complement (the difference between the targetSum and the current number) is present in the seen set. If it is, we have found a pair that adds up to the targetSum, and we add the pair to the sumPair set. Sorting the pair before adding it ensures that we don't have duplicates like (4, 12) and (12, 4).</p>\n<p>This solution reduces the complexity and avoids redundant pairs in the output.</p>\n"}],"owner":{"account_id":12991947,"reputation":11,"user_id":9390888,"display_name":"ranjan kumar singh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":179,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1689812484,"creation_date":1689056826,"question_id":76659206,"body_markdown":"I have tried to find the sum of pair which is equals to given number using java 8. how can we improve the logic?\r\n\r\n    List&lt;Integer&gt; listOfNumbers = Arrays.asList(new Integer []{15, 12, 4, 16, 9, 8, 24, 0});\r\n    \r\n    \tSet&lt;Integer[]&gt; sumPair = listOfNumbers.stream()\r\n    \t\t\t.flatMap(i -&gt; listOfNumbers.stream()\r\n    \t\t\t\t\t.filter(p -&gt; (i + p) == 16 &amp;&amp; listOfNumbers.indexOf(p) != listOfNumbers.indexOf(i))\r\n    \t\t\t\t\t.map(p -&gt; new Integer[] { i, p }))\r\n    \t\t\t.collect(Collectors.toSet());\r\n    \tfor (Integer[] integers : sumPair) {\r\n    \t\tfor (Integer val : integers) {\r\n    \t\t\tSystem.out.print(val + &quot; &quot;);\r\n    \t\t}\r\n    \t\t   System.out.println(&quot;&quot;);\r\n    \t}\r\n\r\nExpected output:\r\n\r\n    16 0 \r\n    12 4 \r\n\r\nOutput I am getting:\r\n\r\n    16 0 \r\n    4 12 \r\n    0 16 \r\n    12 4  \r\n","title":"Find which number in a list sum up to a certain number Using Java 8 Stream API","body":"<p>I have tried to find the sum of pair which is equals to given number using java 8. how can we improve the logic?</p>\n<pre><code>List&lt;Integer&gt; listOfNumbers = Arrays.asList(new Integer []{15, 12, 4, 16, 9, 8, 24, 0});\n\n    Set&lt;Integer[]&gt; sumPair = listOfNumbers.stream()\n            .flatMap(i -&gt; listOfNumbers.stream()\n                    .filter(p -&gt; (i + p) == 16 &amp;&amp; listOfNumbers.indexOf(p) != listOfNumbers.indexOf(i))\n                    .map(p -&gt; new Integer[] { i, p }))\n            .collect(Collectors.toSet());\n    for (Integer[] integers : sumPair) {\n        for (Integer val : integers) {\n            System.out.print(val + &quot; &quot;);\n        }\n           System.out.println(&quot;&quot;);\n    }\n</code></pre>\n<p>Expected output:</p>\n<pre><code>16 0 \n12 4 \n</code></pre>\n<p>Output I am getting:</p>\n<pre><code>16 0 \n4 12 \n0 16 \n12 4  \n</code></pre>\n"},{"tags":["java","gradle","gradle-plugin","checkstyle"],"owner":{"account_id":4095273,"reputation":1557,"user_id":3362244,"accept_rate":60,"display_name":"teuber789"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689811891,"creation_date":1689811891,"question_id":76725922,"body_markdown":"I&#39;ve got a small gradle project which has two small Java applications as subprojects. I&#39;m trying to enforce the checkstyle plugin on all subprojects, so I&#39;ve created a small precompiled plugin for verification and then applied it to the subprojects. I took all of this from [the checkstyle example from the gradle documentation](https://docs.gradle.org/current/userguide/custom_plugins.html#sec:precompiled_plugins) and [the checkstyle plugin documentation](https://docs.gradle.org/current/userguide/checkstyle_plugin.html#sec:checkstyle_project_layout).\r\n\r\n**Project structure**:\r\n\r\n    project\r\n      buildSrc\r\n        build.gradle\r\n        src/\r\n          main/\r\n            groovy/\r\n              com.company.verify.gradle\r\n      config/\r\n        checkstyle/\r\n          checkstyle.xml\r\n          suppressions.xml\r\n      sub1/\r\n        build.gradle\r\n        settings.gradle\r\n      sub2/\r\n        build.gradle\r\n        settings.gradle\r\n      build.gradle  (root)\r\n      settings.gradle  (root)\r\n\r\n**Root settings.gradle**\r\n\r\n    rootProject.name = &#39;my-app&#39;\r\n    include (&quot;sub1&quot;, &quot;sub2&quot;)\r\n\r\n\r\n**buildSrc/build.gradle**\r\n\r\n    plugins {\r\n        id &#39;groovy-gradle-plugin&#39;\r\n    }\r\n\r\n**buildSrc/src/main/groovy/com.company.verify.gradle**\r\n\r\n    plugins {\r\n        id &#39;checkstyle&#39;\r\n    }\r\n    \r\n    checkstyle {\r\n        toolVersion = &quot;10.3.3&quot;\r\n        ignoreFailures = false\r\n        maxWarnings = 0\r\n    }\r\n\r\n**sub1/build.gradle**\r\n\r\n    plugins {\r\n      id &#39;com.company.verify&#39;\r\n    }\r\n    \r\n    // Subproject 1 has some generated code we don&#39;t want checked\r\n    checkstyle {\r\n        checkstyleMain.excludes = [&quot;**/generated/**&quot;]\r\n    }\r\n\r\nHowever, when I run `./gradlew clean checkstyleMain --stack`, it&#39;s obvious that the `toolVersion: 10.3.3` directive isn&#39;t being applied:\r\n\r\n    Execution failed for task &#39;:sub1:checkstyleMain&#39;.\r\n      &gt; A failure occurred while executing org.gradle.api.plugins.quality.internal.CheckstyleAction\r\n        &gt; Unable to create Root Module: config {/path/to/project/config/checkstyle/checkstyle.xml}, classpath {null}.\r\n    Caused by: org.xml.sax.SAXParseException; systemId: file:/path/to/project/config/checkstyle/checkstyle.xml; lineNumber: 22; columnNumber: 4; The markup in the document following the root element must be well-formed.\r\n\r\nThis is happening because the `toolVersion: 10.3.3` in `com.company.verify.gradle` isn&#39;t being applied to the subproject, and so checkstyle is using a different toolVersion which expects checkstyle.xml to be formatted differently. However, when I remove the precompiled plugin and apply the checkstyle plugin and configuration options directly to `sub1`, `./gradlew checkstyleMain` passes without any problems.\r\n\r\nCan anyone tell me what&#39;s going on here? Why aren&#39;t configurations from checkstyle being passed from the precompiled plugin to the subprojects applying it? If I can&#39;t figure this out, I will be forced to duplicate all of my checkstyle configurations in every subproject, and I really don&#39;t want to do that.","title":"gradle checkstyle configuration isn&#39;t being applied via precompiled plugin","body":"<p>I've got a small gradle project which has two small Java applications as subprojects. I'm trying to enforce the checkstyle plugin on all subprojects, so I've created a small precompiled plugin for verification and then applied it to the subprojects. I took all of this from <a href=\"https://docs.gradle.org/current/userguide/custom_plugins.html#sec:precompiled_plugins\" rel=\"nofollow noreferrer\">the checkstyle example from the gradle documentation</a> and <a href=\"https://docs.gradle.org/current/userguide/checkstyle_plugin.html#sec:checkstyle_project_layout\" rel=\"nofollow noreferrer\">the checkstyle plugin documentation</a>.</p>\n<p><strong>Project structure</strong>:</p>\n<pre><code>project\n  buildSrc\n    build.gradle\n    src/\n      main/\n        groovy/\n          com.company.verify.gradle\n  config/\n    checkstyle/\n      checkstyle.xml\n      suppressions.xml\n  sub1/\n    build.gradle\n    settings.gradle\n  sub2/\n    build.gradle\n    settings.gradle\n  build.gradle  (root)\n  settings.gradle  (root)\n</code></pre>\n<p><strong>Root settings.gradle</strong></p>\n<pre><code>rootProject.name = 'my-app'\ninclude (&quot;sub1&quot;, &quot;sub2&quot;)\n</code></pre>\n<p><strong>buildSrc/build.gradle</strong></p>\n<pre><code>plugins {\n    id 'groovy-gradle-plugin'\n}\n</code></pre>\n<p><strong>buildSrc/src/main/groovy/com.company.verify.gradle</strong></p>\n<pre><code>plugins {\n    id 'checkstyle'\n}\n\ncheckstyle {\n    toolVersion = &quot;10.3.3&quot;\n    ignoreFailures = false\n    maxWarnings = 0\n}\n</code></pre>\n<p><strong>sub1/build.gradle</strong></p>\n<pre><code>plugins {\n  id 'com.company.verify'\n}\n\n// Subproject 1 has some generated code we don't want checked\ncheckstyle {\n    checkstyleMain.excludes = [&quot;**/generated/**&quot;]\n}\n</code></pre>\n<p>However, when I run <code>./gradlew clean checkstyleMain --stack</code>, it's obvious that the <code>toolVersion: 10.3.3</code> directive isn't being applied:</p>\n<pre><code>Execution failed for task ':sub1:checkstyleMain'.\n  &gt; A failure occurred while executing org.gradle.api.plugins.quality.internal.CheckstyleAction\n    &gt; Unable to create Root Module: config {/path/to/project/config/checkstyle/checkstyle.xml}, classpath {null}.\nCaused by: org.xml.sax.SAXParseException; systemId: file:/path/to/project/config/checkstyle/checkstyle.xml; lineNumber: 22; columnNumber: 4; The markup in the document following the root element must be well-formed.\n</code></pre>\n<p>This is happening because the <code>toolVersion: 10.3.3</code> in <code>com.company.verify.gradle</code> isn't being applied to the subproject, and so checkstyle is using a different toolVersion which expects checkstyle.xml to be formatted differently. However, when I remove the precompiled plugin and apply the checkstyle plugin and configuration options directly to <code>sub1</code>, <code>./gradlew checkstyleMain</code> passes without any problems.</p>\n<p>Can anyone tell me what's going on here? Why aren't configurations from checkstyle being passed from the precompiled plugin to the subprojects applying it? If I can't figure this out, I will be forced to duplicate all of my checkstyle configurations in every subproject, and I really don't want to do that.</p>\n"},{"tags":["java","spring","spring-security"],"comments":[{"owner":{"account_id":1637644,"reputation":5167,"user_id":1510701,"accept_rate":60,"display_name":"We are Borg"},"score":0,"creation_date":1438346678,"post_id":31746466,"comment_id":51426481,"body_markdown":"Can you please put some stacktrace? Thanks.","body":"Can you please put some stacktrace? Thanks."},{"owner":{"account_id":256707,"reputation":8005,"user_id":537623,"accept_rate":81,"display_name":"kgautron"},"score":0,"creation_date":1438346797,"post_id":31746466,"comment_id":51426551,"body_markdown":"There is no exception thrown","body":"There is no exception thrown"},{"owner":{"account_id":1637644,"reputation":5167,"user_id":1510701,"accept_rate":60,"display_name":"We are Borg"},"score":0,"creation_date":1438346846,"post_id":31746466,"comment_id":51426587,"body_markdown":"please enable debug logging for org.springframework.security. Then when you get the 403, copy the last 10-20 lines in the debug log from your IDE console.","body":"please enable debug logging for org.springframework.security. Then when you get the 403, copy the last 10-20 lines in the debug log from your IDE console."},{"owner":{"account_id":256707,"reputation":8005,"user_id":537623,"accept_rate":81,"display_name":"kgautron"},"score":0,"creation_date":1438347362,"post_id":31746466,"comment_id":51426926,"body_markdown":"Ok thanks, just added it to the question.","body":"Ok thanks, just added it to the question."},{"owner":{"account_id":1637644,"reputation":5167,"user_id":1510701,"accept_rate":60,"display_name":"We are Borg"},"score":0,"creation_date":1438347554,"post_id":31746466,"comment_id":51427073,"body_markdown":"As the log says, you are not logged in. Your configuration seems wrong. I have not that much idea about Java based configurations as I am using XML based. You can check out some examples. Secondly, instead of adding authority as &#39;myAuthority&#39;, please add something relevant like ROLE_USER.","body":"As the log says, you are not logged in. Your configuration seems wrong. I have not that much idea about Java based configurations as I am using XML based. You can check out some examples. Secondly, instead of adding authority as &#39;myAuthority&#39;, please add something relevant like ROLE_USER."},{"owner":{"account_id":1464652,"reputation":12323,"user_id":1377895,"accept_rate":100,"display_name":"Roman Vottner"},"score":3,"creation_date":1438347658,"post_id":31746466,"comment_id":51427156,"body_markdown":"You&#39;ve declared a custom filter, but you have not added it to your config `http.addFilter(new TokenFilter())`. Also check out [`addFilterBefore(...)`](http://docs.spring.io/autorepo/docs/spring-security/4.0.1.RELEASE/apidocs/org/springframework/security/config/annotation/web/HttpSecurityBuilder.html#addFilterBefore%28javax.servlet.Filter,%20java.lang.Class%29) or [`addFilterAfter(...)`](http://docs.spring.io/autorepo/docs/spring-security/4.0.1.RELEASE/apidocs/org/springframework/security/config/annotation/web/HttpSecurityBuilder.html#addFilterAfter%28javax.servlet.Filter,%20java.lang.Class%29)","body":"You&#39;ve declared a custom filter, but you have not added it to your config <code>http.addFilter(new TokenFilter())</code>. Also check out <a href=\"http://docs.spring.io/autorepo/docs/spring-security/4.0.1.RELEASE/apidocs/org/springframework/security/config/annotation/web/HttpSecurityBuilder.html#addFilterBefore%28javax.servlet.Filter,%20java.lang.Class%29\" rel=\"nofollow noreferrer\"><code>addFilterBefore(...)</code></a> or <a href=\"http://docs.spring.io/autorepo/docs/spring-security/4.0.1.RELEASE/apidocs/org/springframework/security/config/annotation/web/HttpSecurityBuilder.html#addFilterAfter%28javax.servlet.Filter,%20java.lang.Class%29\" rel=\"nofollow noreferrer\"><code>addFilterAfter(...)</code></a>"},{"owner":{"account_id":256707,"reputation":8005,"user_id":537623,"accept_rate":81,"display_name":"kgautron"},"score":1,"creation_date":1438349446,"post_id":31746466,"comment_id":51428368,"body_markdown":"Thanks Roman Vottner it worked! But before doing that it was already declared as a @component and effectively executed. Did it not work because of filter order? Or does &#39;http.addFilter&#39; do something special more that just registering the filter?","body":"Thanks Roman Vottner it worked! But before doing that it was already declared as a @component and effectively executed. Did it not work because of filter order? Or does &#39;http.addFilter&#39; do something special more that just registering the filter?"},{"owner":{"account_id":1464652,"reputation":12323,"user_id":1377895,"accept_rate":100,"display_name":"Roman Vottner"},"score":2,"creation_date":1438349985,"post_id":31746466,"comment_id":51428748,"body_markdown":"I&#39;m not aware of that filters are auto-discoverable at all. Pre Java-based web-configuration you needed to declare filters in XML via `&lt;filter&gt;&lt;filter-name&gt;customFilter&lt;/filter-name&gt;&lt;filter-class&gt;com.yourcompany.CustomFilter&lt;/filter-class&gt;&lt;/filter&gt;` also","body":"I&#39;m not aware of that filters are auto-discoverable at all. Pre Java-based web-configuration you needed to declare filters in XML via <code>&lt;filter&gt;&lt;filter-name&gt;customFilter&lt;&#47;filter-name&gt;&lt;filter-class&zwnj;&#8203;&gt;com.yourcompany.Cus&zwnj;&#8203;tomFilter&lt;&#47;filter-cl&zwnj;&#8203;ass&gt;&lt;&#47;filter&gt;</code> also"}],"answers":[{"tags":[],"owner":{"account_id":1570741,"reputation":711,"user_id":1458482,"accept_rate":100,"display_name":"Zerkz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1438346712,"creation_date":1438346712,"answer_id":31746545,"question_id":31746466,"body_markdown":"Getting a 403 instead of a 401 usually means that you were logged in but you are not permitted (via authority) to see a resource.\r\n\r\nDebug and confirm that the user you are logging in has that authority (I know your code sets it, but maybe you are setting something else wrong).","title":"Spring security always returns HTTP 403","body":"<p>Getting a 403 instead of a 401 usually means that you were logged in but you are not permitted (via authority) to see a resource.</p>\n\n<p>Debug and confirm that the user you are logging in has that authority (I know your code sets it, but maybe you are setting something else wrong).</p>\n"},{"tags":[],"owner":{"account_id":4667968,"reputation":321,"user_id":3780562,"display_name":"Link"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1438348975,"creation_date":1438348975,"answer_id":31747267,"question_id":31746466,"body_markdown":"The only (obvious) thing that might result to 403 is the users role is not set to `ROLE_myAuthority`.","title":"Spring security always returns HTTP 403","body":"<p>The only (obvious) thing that might result to 403 is the users role is not set to <code>ROLE_myAuthority</code>.</p>\n"},{"tags":[],"owner":{"account_id":4354076,"reputation":1270,"user_id":3553318,"accept_rate":14,"display_name":"doannx"},"down_vote_count":0,"up_vote_count":81,"is_accepted":false,"score":81,"last_activity_date":1687442188,"creation_date":1469842005,"answer_id":38669526,"question_id":31746466,"body_markdown":"I have the same issue to you, every request is blocked by 403 error, except the [/] request. After a lot of time in crazy, I found the root cause, that is the [csrf].  \r\nThen my security config is like as following:  \r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.authorizeRequests()\r\n          .antMatchers(&quot;/delete/**&quot;).authenticated()\r\n          .and()\r\n          .httpBasic().and()\r\n          .csrf().disable();\r\n    }\r\nThis configuration says that: only [delete/**] should be authorized.  \r\nAnd I mark the [delete] action as following:  \r\n\r\n    @PreAuthorize(&quot;hasRole(&#39;ROLE_ADMIN&#39;)&quot;)\r\n    void delete(String id);\r\nHope to help someone.","title":"Spring security always returns HTTP 403","body":"<p>I have the same issue to you, every request is blocked by 403 error, except the [/] request. After a lot of time in crazy, I found the root cause, that is the [csrf].<br />\nThen my security config is like as following:</p>\n<pre><code>@Override\nprotected void configure(HttpSecurity http) throws Exception {\n    http.authorizeRequests()\n      .antMatchers(&quot;/delete/**&quot;).authenticated()\n      .and()\n      .httpBasic().and()\n      .csrf().disable();\n}\n</code></pre>\n<p>This configuration says that: only [delete/**] should be authorized.<br />\nAnd I mark the [delete] action as following:</p>\n<pre><code>@PreAuthorize(&quot;hasRole('ROLE_ADMIN')&quot;)\nvoid delete(String id);\n</code></pre>\n<p>Hope to help someone.</p>\n"},{"tags":[],"owner":{"account_id":1639431,"reputation":5035,"user_id":1512175,"accept_rate":57,"display_name":"Ithar"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1482253912,"creation_date":1482252786,"answer_id":41247428,"question_id":31746466,"body_markdown":"As others have said 403 means that user is logged in but doesn&#39;t have the right permission to view the resource; I would check the following: \r\n\r\n1. Your control has the correct role permission\r\n `@Secured( {&quot;ROLE_myAuthority&quot;} )` \r\n2. You had actually granted the correct permission `new SimpleGrantedAuthority(&quot;ROLE_myAuthority&quot;);` \r\n3. Actual granted authority from the UsernamePasswordAuthenticationToken object\r\n4. Filter is been injected correctly\r\n        \r\n\r\n        Authentication auth = new UsernamePasswordAuthenticationToken(username, authentication.getCredentials(), authorities);  \r\n        Collection&lt;? extends GrantedAuthority&gt; auths = auth.getAuthorities();`\r\n        \r\n        Iterator authsIterator = auths.iterator();\r\n        \r\n        while (authsIterator.hasNext()) {\r\n             SimpleGrantedAuthority sga =  (SimpleGrantedAuthority) authsIterator.next();\r\n                sga.getAuthority();\r\n            // ... \r\n        }\r\n\r\n","title":"Spring security always returns HTTP 403","body":"<p>As others have said 403 means that user is logged in but doesn't have the right permission to view the resource; I would check the following: </p>\n\n<ol>\n<li>Your control has the correct role permission\n<code>@Secured( {\"ROLE_myAuthority\"} )</code> </li>\n<li>You had actually granted the correct permission <code>new SimpleGrantedAuthority(\"ROLE_myAuthority\");</code> </li>\n<li>Actual granted authority from the UsernamePasswordAuthenticationToken object</li>\n<li><p>Filter is been injected correctly</p>\n\n<pre><code>Authentication auth = new UsernamePasswordAuthenticationToken(username, authentication.getCredentials(), authorities);  \nCollection&lt;? extends GrantedAuthority&gt; auths = auth.getAuthorities();`\n\nIterator authsIterator = auths.iterator();\n\nwhile (authsIterator.hasNext()) {\n     SimpleGrantedAuthority sga =  (SimpleGrantedAuthority) authsIterator.next();\n        sga.getAuthority();\n    // ... \n}\n</code></pre></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":11914172,"reputation":19,"user_id":8718512,"display_name":"Beary"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1534744045,"creation_date":1533626299,"answer_id":51720998,"question_id":31746466,"body_markdown":"`UsernamePasswordAuthenticationToken` extends `AbstractAuthenticationToken`, `AbstractAuthenticationToken` implements `Authentication`.\r\n\r\n[Spring security call `Authentication&#39;s` method `isAuthenticated()` to check whether it should be pass][1].\r\n\r\nSo you should call `setAuthenticated` of `UsernamePasswordAuthenticationToken` instance and set the argument `true`.\r\n\r\nLike this:\r\n\r\n    public class TokenFilter implements Filter {\r\n        @Override\r\n        public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {\r\n            GrantedAuthority authority = new SimpleGrantedAuthority(&quot;myAuthority&quot;);\r\n            UsernamePasswordAuthenticationToken auth = new UsernamePasswordAuthenticationToken(user, token, Arrays.asList(authority));\r\n\r\n            auth.setAuthenticated(true);\r\n\r\n            SecurityContextHolder.getContext().setAuthentication(auth);\r\n      }\r\n    }\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/core/Authentication.html#isAuthenticated--","title":"Spring security always returns HTTP 403","body":"<p><code>UsernamePasswordAuthenticationToken</code> extends <code>AbstractAuthenticationToken</code>, <code>AbstractAuthenticationToken</code> implements <code>Authentication</code>.</p>\n\n<p><a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/core/Authentication.html#isAuthenticated--\" rel=\"nofollow noreferrer\">Spring security call <code>Authentication's</code> method <code>isAuthenticated()</code> to check whether it should be pass</a>.</p>\n\n<p>So you should call <code>setAuthenticated</code> of <code>UsernamePasswordAuthenticationToken</code> instance and set the argument <code>true</code>.</p>\n\n<p>Like this:</p>\n\n<pre><code>public class TokenFilter implements Filter {\n    @Override\n    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {\n        GrantedAuthority authority = new SimpleGrantedAuthority(\"myAuthority\");\n        UsernamePasswordAuthenticationToken auth = new UsernamePasswordAuthenticationToken(user, token, Arrays.asList(authority));\n\n        auth.setAuthenticated(true);\n\n        SecurityContextHolder.getContext().setAuthentication(auth);\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3150389,"reputation":1486,"user_id":2663959,"display_name":"Robin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1559637289,"creation_date":1559637289,"answer_id":56440205,"question_id":31746466,"body_markdown":"Pretty old question but just in case someone stumble upon this post, an application had the same problem and it turns out to be an issue with `@ControllerAdvice`.\r\n\r\nBasically, the setup was like this:\r\n\r\n~~~java\r\n@ControllerAdvice\r\nclass MainController {\r\n~~~\r\n\r\n~~~java\r\n@PreAuthorize(&quot;...&quot;)\r\nclass AdminController extends MainController {\r\n~~~\r\n\r\nAnd for a strange reason, any controller extending from `MainController` would trigger the `@PreAuthorize` of the `AdminController` class even though there were no relationships between this controller and the latter.\r\n\r\nIn my case, it was an easy fix as removing the `@ControllerAdvice` was enough but if you need `@ControllerAdvice`, you might move the annotation to a class that is never used as a superclass.","title":"Spring security always returns HTTP 403","body":"<p>Pretty old question but just in case someone stumble upon this post, an application had the same problem and it turns out to be an issue with <code>@ControllerAdvice</code>.</p>\n\n<p>Basically, the setup was like this:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@ControllerAdvice\nclass MainController {\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>@PreAuthorize(\"...\")\nclass AdminController extends MainController {\n</code></pre>\n\n<p>And for a strange reason, any controller extending from <code>MainController</code> would trigger the <code>@PreAuthorize</code> of the <code>AdminController</code> class even though there were no relationships between this controller and the latter.</p>\n\n<p>In my case, it was an easy fix as removing the <code>@ControllerAdvice</code> was enough but if you need <code>@ControllerAdvice</code>, you might move the annotation to a class that is never used as a superclass.</p>\n"},{"tags":[],"owner":{"account_id":12405531,"reputation":321,"user_id":9040672,"display_name":"Rayen Rejeb"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1601781840,"creation_date":1601781522,"answer_id":64190857,"question_id":31746466,"body_markdown":"I know that this is a very old question but I just had the same error and I didn&#39;t find any solution on the internet.   \r\nIt is correct that **403** means that the user is **authenticated** but **not authorized** to get a resource. This is related to the claims part in your JWT.   \r\nYour JWT builder needs to set proper **claims** for the user :\r\n\r\n```\r\nList&lt;GrantedAuthority&gt; grantedAuthorities = AuthorityUtils\r\n\t\t\t\t.commaSeparatedStringToAuthorityList(&quot;ROLE_USER&quot;);\r\n\r\nJwts.builder()//\r\n\t\t\t\t.setIssuer(...)//\r\n\t\t\t\t.setSubject(...)//\r\n\t\t\t\t.setAudience(...)\r\n\r\n                // This is the part that you missed\r\n\r\n\t\t\t\t.claim(&quot;authorities&quot;,\r\n\t\t\t\t\t\tgrantedAuthorities.stream()\r\n\t\t\t\t\t\t.map(GrantedAuthority::getAuthority)\r\n\t\t\t\t\t\t.collect(Collectors.toList()))\r\n\r\n                // Ends here\r\n\r\n\t\t\t\t.setIssuedAt(date)//\r\n\t\t\t\t.setExpiration(new Date(date.getTime() + jwtExpirationMs))\r\n\t\t\t\t.signWith(SignatureAlgorithm.HS512, signingKey)//\r\n\t\t\t\t.compact();\r\n```\r\n   \r\nMy WebSecurity configuration : \r\n\r\n```\r\npublic class WebSecurity extends WebSecurityConfigurerAdapter {\r\n\r\n...\r\n\r\n@Override\r\n\tprotected void configure(HttpSecurity http) throws Exception {\r\n\r\n\t\thttp.cors().and().csrf().disable()//\r\n\t\t\t\t.authorizeRequests()//\r\n\t\t\t\t.antMatchers(...).permitAll()//\r\n\t\t\t\t.anyRequest().authenticated()\r\n                .and()\r\n                .sessionManagement()//\r\n\t\t\t\t.sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n\t\thttp.addFilterAfter(authenticationJwtTokenFilter(), BasicAuthenticationFilter.class);\r\n\t}\r\n```","title":"Spring security always returns HTTP 403","body":"<p>I know that this is a very old question but I just had the same error and I didn't find any solution on the internet.<br />\nIt is correct that <strong>403</strong> means that the user is <strong>authenticated</strong> but <strong>not authorized</strong> to get a resource. This is related to the claims part in your JWT.<br />\nYour JWT builder needs to set proper <strong>claims</strong> for the user :</p>\n<pre><code>List&lt;GrantedAuthority&gt; grantedAuthorities = AuthorityUtils\n                .commaSeparatedStringToAuthorityList(&quot;ROLE_USER&quot;);\n\nJwts.builder()//\n                .setIssuer(...)//\n                .setSubject(...)//\n                .setAudience(...)\n\n                // This is the part that you missed\n\n                .claim(&quot;authorities&quot;,\n                        grantedAuthorities.stream()\n                        .map(GrantedAuthority::getAuthority)\n                        .collect(Collectors.toList()))\n\n                // Ends here\n\n                .setIssuedAt(date)//\n                .setExpiration(new Date(date.getTime() + jwtExpirationMs))\n                .signWith(SignatureAlgorithm.HS512, signingKey)//\n                .compact();\n</code></pre>\n<p>My WebSecurity configuration :</p>\n<pre><code>public class WebSecurity extends WebSecurityConfigurerAdapter {\n\n...\n\n@Override\n    protected void configure(HttpSecurity http) throws Exception {\n\n        http.cors().and().csrf().disable()//\n                .authorizeRequests()//\n                .antMatchers(...).permitAll()//\n                .anyRequest().authenticated()\n                .and()\n                .sessionManagement()//\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n        http.addFilterAfter(authenticationJwtTokenFilter(), BasicAuthenticationFilter.class);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9500256,"reputation":983,"user_id":7061661,"display_name":"P&#233;ter Veres"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1675632748,"creation_date":1675632748,"answer_id":75355669,"question_id":31746466,"body_markdown":"Confusingly Spring Security also returns 403 instead of 404 for all undefined endpoints if any restricting auth rule is set in the `SecurityFilterChain`.\r\n\r\nSo if you mistype a test url or (like me) forget to scan the the base package of the controller, this might set you on a wild-goose chase.\r\n\r\neg. this correctly returns `404` if I call an undefined endpoint:\r\n```java\r\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n    http.authorizeHttpRequests()\r\n        .anyRequest().permitAll();\r\n    return http.build();\r\n}\r\n```\r\n\r\nWhile this returns `403` for the same call:\r\n```java\r\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n    http.authorizeHttpRequests()\r\n        .requestMatchers(GET, &quot;/health/**&quot;).permitAll();\r\n    return http.build();\r\n}\r\n```","title":"Spring security always returns HTTP 403","body":"<p>Confusingly Spring Security also returns 403 instead of 404 for all undefined endpoints if any restricting auth rule is set in the <code>SecurityFilterChain</code>.</p>\n<p>So if you mistype a test url or (like me) forget to scan the the base package of the controller, this might set you on a wild-goose chase.</p>\n<p>eg. this correctly returns <code>404</code> if I call an undefined endpoint:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n    http.authorizeHttpRequests()\n        .anyRequest().permitAll();\n    return http.build();\n}\n</code></pre>\n<p>While this returns <code>403</code> for the same call:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n    http.authorizeHttpRequests()\n        .requestMatchers(GET, &quot;/health/**&quot;).permitAll();\n    return http.build();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11624210,"reputation":731,"user_id":8514493,"display_name":"E.Big"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675813407,"creation_date":1675813407,"answer_id":75380102,"question_id":31746466,"body_markdown":"IDK is it meet topic question or not, but I didn&#39;t find any similar subject so I&#39;ll leave it here. \r\n\r\nI have pretty same situation: fully custom filter based on headers token authorization and always receiving 403 \r\n\r\nThat&#39;s what worked for me:\r\n\r\n```\r\nhttp.csrf().disable()\r\n                .formLogin().disable()\r\n                .httpBasic().disable()\r\n                .logout().disable()\r\n                .anonymous().disable()\r\n                .sessionManagement()\r\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\r\n\r\n                .addFilterBefore(XAuthTokenFilter, BasicAuthenticationFilter::class.java)\r\n``` \r\n\r\nAlso a good idea to use in your application config:\r\n\r\n```\r\nlogging:\r\n  level:\r\n    org.springframework.security: TRACE\r\n```\r\n\r\nto see what&#39;s going on inside filter chain.\r\n\r\nHope it will save somebody&#39;s time","title":"Spring security always returns HTTP 403","body":"<p>IDK is it meet topic question or not, but I didn't find any similar subject so I'll leave it here.</p>\n<p>I have pretty same situation: fully custom filter based on headers token authorization and always receiving 403</p>\n<p>That's what worked for me:</p>\n<pre><code>http.csrf().disable()\n                .formLogin().disable()\n                .httpBasic().disable()\n                .logout().disable()\n                .anonymous().disable()\n                .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\n\n                .addFilterBefore(XAuthTokenFilter, BasicAuthenticationFilter::class.java)\n</code></pre>\n<p>Also a good idea to use in your application config:</p>\n<pre><code>logging:\n  level:\n    org.springframework.security: TRACE\n</code></pre>\n<p>to see what's going on inside filter chain.</p>\n<p>Hope it will save somebody's time</p>\n"},{"tags":[],"owner":{"account_id":2488321,"reputation":1753,"user_id":2166335,"display_name":"Melvin Sy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676389363,"creation_date":1676389363,"answer_id":75450140,"question_id":31746466,"body_markdown":"You might have a similar problem that I had by having the `server.servlet.context-path` configured in your `application.yml`\r\n\r\nIn my case, the `server.servlet.context-path` is configured to be `/api` and I expose the following endpoints below like so:\r\n\r\n    .requestMatchers(&quot;/api/health&quot;, &quot;/api/ping&quot;).permitAll()\r\n\r\nHowever, this won&#39;t work as spring security doesn&#39;t put the `context-path` into consideration so you have to omit that when specifying the endpoints.\r\n\r\n    .requestMatchers(&quot;/health&quot;, &quot;/ping&quot;).permitAll()","title":"Spring security always returns HTTP 403","body":"<p>You might have a similar problem that I had by having the <code>server.servlet.context-path</code> configured in your <code>application.yml</code></p>\n<p>In my case, the <code>server.servlet.context-path</code> is configured to be <code>/api</code> and I expose the following endpoints below like so:</p>\n<pre><code>.requestMatchers(&quot;/api/health&quot;, &quot;/api/ping&quot;).permitAll()\n</code></pre>\n<p>However, this won't work as spring security doesn't put the <code>context-path</code> into consideration so you have to omit that when specifying the endpoints.</p>\n<pre><code>.requestMatchers(&quot;/health&quot;, &quot;/ping&quot;).permitAll()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19593557,"reputation":9,"user_id":14340074,"display_name":"Shubham Jain"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1689810955,"creation_date":1689810955,"answer_id":76725872,"question_id":31746466,"body_markdown":"Add &quot;/styles/*&quot; for CSS files\r\n\r\nhttp.authorizeHttpRequests(requests-&gt;requests                          .requestMatchers(&quot;/login&quot;,&quot;/register&quot;,&quot;/styles/*&quot;).permitAll().anyRequest().authenticated()","title":"Spring security always returns HTTP 403","body":"<p>Add &quot;/styles/*&quot; for CSS files</p>\n<p>http.authorizeHttpRequests(requests-&gt;requests                          .requestMatchers(&quot;/login&quot;,&quot;/register&quot;,&quot;/styles/*&quot;).permitAll().anyRequest().authenticated()</p>\n"}],"owner":{"account_id":256707,"reputation":8005,"user_id":537623,"accept_rate":81,"display_name":"kgautron"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108493,"favorite_count":0,"down_vote_count":0,"up_vote_count":42,"answer_count":11,"score":42,"last_activity_date":1689810955,"creation_date":1438346452,"question_id":31746466,"body_markdown":"I have configured a custom `Filter` that grants a spring authority for every URL other than `/login` :\r\n\r\n    public class TokenFilter implements Filter {\r\n         @Override\r\n         public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {\r\n              GrantedAuthority authority = new SimpleGrantedAuthority(&quot;myAuthority&quot;);\r\n              UsernamePasswordAuthenticationToken auth = new UsernamePasswordAuthenticationToken(user, token, Arrays.asList(authority));\r\n              SecurityContextHolder.getContext().setAuthentication(auth);\r\n          }\r\n    }\r\n\r\nand a spring configuration that protects all requests (but /`login`) with that authority :\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfiguration extends WebSecurityConfigurerAdapter {\r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            http\r\n                    .csrf().disable()\r\n                    .authorizeRequests()\r\n                    .antMatchers(&quot;/login&quot;).permitAll()\r\n                    .anyRequest().hasAuthority(&quot;myAuthority&quot;);\r\n        }\r\n    \r\n    }\r\n\r\nBut every request except `/login` gets a HTTP `403` Forbidden.\r\n\r\nI have debugged and made sure the code from the filter is really triggered.\r\n\r\nWhat could be the problem?\r\n\r\n\r\nEDIT - when putting spring security logs in debug I get the following stack trace :\r\n\r\n    2015-07-31 14:52:42 [http-nio-8002-exec-2] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Access is denied (user is anonymous); redirecting to authentication entry point\r\n    org.springframework.security.access.AccessDeniedException: Acc&#232;s refus&#233;\r\n    \tat org.springframework.security.access.vote.AffirmativeBased.decide(AffirmativeBased.java:83) ~[spring-security-core-3.2.4.RELEASE.jar:3.2.4.RELEASE]\r\n    \tat org.springframework.security.access.intercept.AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:206) ~[spring-security-core-3.2.4.RELEASE.jar:3.2.4.RELEASE]\r\n    \tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115) ~[spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\r\n    \tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84) ~[spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\r\n    \tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113) ~[spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\r\n    \tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\r\n    \tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\r\n    \tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:154) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\r\n    \tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\r\n    \tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\r\n    \tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:57) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.0.6.RELEASE.jar:4.0.6.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\r\n    \tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\r\n    \tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:50) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.0.6.RELEASE.jar:4.0.6.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241) [tomcat-embed-core-7.0.54.jar:7.0.54]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208) [tomcat-embed-core-7.0.54.jar:7.0.54]\r\n    \tat com.kgwebapps.tonpronostic.security.TokenFilter.doFilter(TokenFilter.java:55) [classes/:na]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241) [tomcat-embed-core-7.0.54.jar:7.0.54]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208) [tomcat-embed-core-7.0.54.jar:7.0.54]\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220) [tomcat-embed-core-7.0.54.jar:7.0.54]\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122) [tomcat-embed-core-7.0.54.jar:7.0.54]\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:501) [tomcat-embed-core-7.0.54.jar:7.0.54]\r\n    \tat org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:683) [tomcat-embed-core-7.0.54.jar:7.0.54]\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171) [tomcat-embed-core-7.0.54.jar:7.0.54]\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [tomcat-embed-core-7.0.54.jar:7.0.54]\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116) [tomcat-embed-core-7.0.54.jar:7.0.54]\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408) [tomcat-embed-core-7.0.54.jar:7.0.54]\r\n    \tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1040) [tomcat-embed-core-7.0.54.jar:7.0.54]\r\n    \tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:607) [tomcat-embed-core-7.0.54.jar:7.0.54]\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1720) [tomcat-embed-core-7.0.54.jar:7.0.54]\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1679) [tomcat-embed-core-7.0.54.jar:7.0.54]\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_40]\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_40]\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-7.0.54.jar:7.0.54]\r\n    \tat java.lang.Thread.run(Thread.java:745) [na:1.8.0_40]\r\n\r\n\r\n\r\n","title":"Spring security always returns HTTP 403","body":"<p>I have configured a custom <code>Filter</code> that grants a spring authority for every URL other than <code>/login</code> :</p>\n\n<pre><code>public class TokenFilter implements Filter {\n     @Override\n     public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {\n          GrantedAuthority authority = new SimpleGrantedAuthority(\"myAuthority\");\n          UsernamePasswordAuthenticationToken auth = new UsernamePasswordAuthenticationToken(user, token, Arrays.asList(authority));\n          SecurityContextHolder.getContext().setAuthentication(auth);\n      }\n}\n</code></pre>\n\n<p>and a spring configuration that protects all requests (but /<code>login</code>) with that authority :</p>\n\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfiguration extends WebSecurityConfigurerAdapter {\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n                .csrf().disable()\n                .authorizeRequests()\n                .antMatchers(\"/login\").permitAll()\n                .anyRequest().hasAuthority(\"myAuthority\");\n    }\n\n}\n</code></pre>\n\n<p>But every request except <code>/login</code> gets a HTTP <code>403</code> Forbidden.</p>\n\n<p>I have debugged and made sure the code from the filter is really triggered.</p>\n\n<p>What could be the problem?</p>\n\n<p>EDIT - when putting spring security logs in debug I get the following stack trace :</p>\n\n<pre><code>2015-07-31 14:52:42 [http-nio-8002-exec-2] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Access is denied (user is anonymous); redirecting to authentication entry point\norg.springframework.security.access.AccessDeniedException: Accès refusé\n    at org.springframework.security.access.vote.AffirmativeBased.decide(AffirmativeBased.java:83) ~[spring-security-core-3.2.4.RELEASE.jar:3.2.4.RELEASE]\n    at org.springframework.security.access.intercept.AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:206) ~[spring-security-core-3.2.4.RELEASE.jar:3.2.4.RELEASE]\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115) ~[spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84) ~[spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113) ~[spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:154) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:57) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.0.6.RELEASE.jar:4.0.6.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:50) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.0.6.RELEASE.jar:4.0.6.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160) [spring-security-web-3.2.4.RELEASE.jar:3.2.4.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241) [tomcat-embed-core-7.0.54.jar:7.0.54]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208) [tomcat-embed-core-7.0.54.jar:7.0.54]\n    at com.kgwebapps.tonpronostic.security.TokenFilter.doFilter(TokenFilter.java:55) [classes/:na]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241) [tomcat-embed-core-7.0.54.jar:7.0.54]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208) [tomcat-embed-core-7.0.54.jar:7.0.54]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220) [tomcat-embed-core-7.0.54.jar:7.0.54]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122) [tomcat-embed-core-7.0.54.jar:7.0.54]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:501) [tomcat-embed-core-7.0.54.jar:7.0.54]\n    at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:683) [tomcat-embed-core-7.0.54.jar:7.0.54]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171) [tomcat-embed-core-7.0.54.jar:7.0.54]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [tomcat-embed-core-7.0.54.jar:7.0.54]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116) [tomcat-embed-core-7.0.54.jar:7.0.54]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408) [tomcat-embed-core-7.0.54.jar:7.0.54]\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1040) [tomcat-embed-core-7.0.54.jar:7.0.54]\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:607) [tomcat-embed-core-7.0.54.jar:7.0.54]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1720) [tomcat-embed-core-7.0.54.jar:7.0.54]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1679) [tomcat-embed-core-7.0.54.jar:7.0.54]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_40]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_40]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-7.0.54.jar:7.0.54]\n    at java.lang.Thread.run(Thread.java:745) [na:1.8.0_40]\n</code></pre>\n"},{"tags":["java","hibernate","hibernate-criteria"],"owner":{"account_id":7983782,"reputation":44,"user_id":6024066,"display_name":"spaghett1c0de"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689810863,"creation_date":1689810863,"question_id":76725865,"body_markdown":"I&#39;m having a hard time implementing Hibernate 6&#39;s new set-aggregate function **`listagg()`** and I couldn&#39;t find any resource online with a clear example. Here&#39;s the documentation:\r\n\r\n`JpaExpression&lt;String&gt; listagg​(JpaOrder order, JpaPredicate filter, JpaWindow window, jakarta.persistence.criteria.Expression&lt;String&gt; argument, jakarta.persistence.criteria.Expression&lt;String&gt; separator)`\r\n\r\nParameters:\r\n\r\norder - order by clause used in within group\r\n\r\nfilter - optional filter clause\r\n\r\nwindow - optional window over which to apply the function\r\n\r\nargument - values to join\r\n\r\nseparator - the separator used to join the values\r\n\r\nReturns: ordered set-aggregate expression\r\n\r\nAny help is appreciated :)","title":"How to Implement Hibernate 6 Set-Aggregate Function listagg() in Criteria API","body":"<p>I'm having a hard time implementing Hibernate 6's new set-aggregate function <strong><code>listagg()</code></strong> and I couldn't find any resource online with a clear example. Here's the documentation:</p>\n<p><code>JpaExpression&lt;String&gt; listagg​(JpaOrder order, JpaPredicate filter, JpaWindow window, jakarta.persistence.criteria.Expression&lt;String&gt; argument, jakarta.persistence.criteria.Expression&lt;String&gt; separator)</code></p>\n<p>Parameters:</p>\n<p>order - order by clause used in within group</p>\n<p>filter - optional filter clause</p>\n<p>window - optional window over which to apply the function</p>\n<p>argument - values to join</p>\n<p>separator - the separator used to join the values</p>\n<p>Returns: ordered set-aggregate expression</p>\n<p>Any help is appreciated :)</p>\n"},{"tags":["java","kotlin","auth0","ktor","kotest"],"comments":[{"owner":{"account_id":19118793,"reputation":5178,"user_id":13963150,"display_name":"Aleksei Tirman"},"score":0,"creation_date":1689836220,"post_id":76725671,"comment_id":135270255,"body_markdown":"Basically, you need to mock only the JwkProvider. Here (https://github.com/ktorio/ktor-samples/blob/main/jwt-auth-tests/src/test/kotlin/io/ktor/samples/jwtauth/ApplicationTest.kt) you can find an example of the test.","body":"Basically, you need to mock only the JwkProvider. Here (<a href=\"https://github.com/ktorio/ktor-samples/blob/main/jwt-auth-tests/src/test/kotlin/io/ktor/samples/jwtauth/ApplicationTest.kt\" rel=\"nofollow noreferrer\">github.com/ktorio/ktor-samples/blob/main/jwt-auth-tests/src&zwnj;&#8203;/&hellip;</a>) you can find an example of the test."}],"owner":{"account_id":5800648,"reputation":1387,"user_id":4574914,"accept_rate":56,"display_name":"joeyk16"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":156,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689809914,"creation_date":1689807185,"question_id":76725671,"body_markdown":"Authentication with Auth0 is working on development but my tests are all failing with a 401 now. I have tried to mock it but get the provided error below. I feel like this is a very common problem that any tested API application would have to overcome so thought I would reach out to any Kotlin or Java devs that might know a way to solve this:\r\n\r\nFor example, this spec should pass, its Kotest with Mockk:\r\n\r\n```\r\nit(&quot;returns an empty list&quot;) {\r\n    withService() {\r\n        val response = client.get(&quot;/v1/users&quot;) {\r\n            headers.append(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n            headers.append(&quot;Authorization&quot;, &quot;Bearer ${token}&quot;)\r\n        }\r\n\r\n        response.status shouldBe HttpStatusCode.OK\r\n        response.bodyAsText().shouldBe(&quot;&quot;&quot;{&quot;data&quot;:[]}&quot;&quot;&quot;)\r\n    }\r\n}\r\n```\r\n\r\nHere is an example of Route setup:\r\n\r\n\r\n```\r\nfun Application.configureRouting() {\r\n    install(Authentication) {\r\n        jwt(&quot;auth0&quot;) {\r\n            verifier(JwtValidator.jwkProvider, System.getProperty(&quot;AUTH_0_DOMAIN&quot;))\r\n            validate { credential -&gt; JwtValidator.validateCreds(credential) }\r\n        }\r\n    }\r\n\r\n    routing {\r\n        route(&quot;/v1&quot;) {\r\n            userRouting()\r\n        }\r\n    }\r\n}\r\n\r\nfun Route.userRouting() {\r\n    authenticate(&quot;auth0&quot;) {\r\n        route(&quot;/users&quot;) {\r\n            get {\r\n                val users = transaction { User.all().map { it.to_json() } }\r\n                call.respond(mapOf(&quot;data&quot; to users))\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI have tried to mock it but it&#39;s turned into mock city.\r\n\r\n```\r\n            it(&quot;returns an empty list&quot;) {\r\n                setTestEnvVariables()\r\n\r\n                val jwkProvider = mockk&lt;JwkProvider&gt;()\r\n                val jwk = mockk&lt;Jwk&gt;()\r\n                val publicKey: RSAPublicKey = generateTestKeyPair().public as RSAPublicKey\r\n\r\n                // Create a non-relaxed mock for the JWTVerifier\r\n                val verifier = mockk&lt;JWTVerifier&gt;()\r\n\r\n                val decodedJwt = mockk&lt;DecodedJWT&gt;()\r\n\r\n                mockkObject(JwtValidator) // Mock the JwtValidator object\r\n\r\n                // Mock the behavior of JwtValidator.jwkProvider\r\n                every { JwtValidator.jwkProvider } returns jwkProvider\r\n\r\n                // Mock the behavior of JwtValidator.validateCreds\r\n                every { JwtValidator.validateCreds(any()) } returns JWTPrincipal(mockk())\r\n\r\n                // Mock the behavior of JwkProvider.get\r\n                every { jwkProvider.get(any()) } returns jwk\r\n\r\n                // Mock the behavior of Jwk.getAlgorithm\r\n                every { jwk.getAlgorithm() } returns &quot;RS256&quot;\r\n\r\n                // Mock the behavior of Jwk.getPublicKey\r\n                every { jwk.publicKey } returns publicKey\r\n\r\n                // Return the mocked DecodedJWT on successful verification\r\n                every { verifier.verify(authorizationToken) } returns decodedJwt\r\n\r\n                withService() {\r\n                    val response = client.get(&quot;/v1/users&quot;) {\r\n                        headers.append(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n                        headers.append(&quot;Authorization&quot;, &quot;Bearer ${token}&quot;)\r\n                    }\r\n\r\n                    response.status shouldBe HttpStatusCode.OK\r\n                    response.bodyAsText().shouldBe(&quot;&quot;&quot;{&quot;data&quot;:[]}&quot;&quot;&quot;)\r\n                }\r\n            }\r\n```\r\nHere is the error it gets with a mocked test\r\n```\r\n2023-07-20 08:47:17.407 [DefaultDispatcher-worker-1] TRACE io.ktor.auth.jwt - Token verification failed\r\ncom.auth0.jwt.exceptions.SignatureVerificationException: The Token&#39;s Signature resulted invalid when verified using the Algorithm: SHA256withRSA\r\n  at com.auth0.jwt.algorithms.RSAAlgorithm.verify(RSAAlgorithm.java:51)\r\n  at com.auth0.jwt.JWTVerifier.verify(JWTVerifier.java:463)\r\n  at com.auth0.jwt.JWTVerifier.verify(JWTVerifier.java:445)\r\n2023-07-20 08:47:17.408 [DefaultDispatcher-worker-1] TRACE io.ktor.se\r\n```","title":"How to test an Auth0 JWT authenticated API endpoint in Kotlin Ktor","body":"<p>Authentication with Auth0 is working on development but my tests are all failing with a 401 now. I have tried to mock it but get the provided error below. I feel like this is a very common problem that any tested API application would have to overcome so thought I would reach out to any Kotlin or Java devs that might know a way to solve this:</p>\n<p>For example, this spec should pass, its Kotest with Mockk:</p>\n<pre><code>it(&quot;returns an empty list&quot;) {\n    withService() {\n        val response = client.get(&quot;/v1/users&quot;) {\n            headers.append(&quot;Content-Type&quot;, &quot;application/json&quot;)\n            headers.append(&quot;Authorization&quot;, &quot;Bearer ${token}&quot;)\n        }\n\n        response.status shouldBe HttpStatusCode.OK\n        response.bodyAsText().shouldBe(&quot;&quot;&quot;{&quot;data&quot;:[]}&quot;&quot;&quot;)\n    }\n}\n</code></pre>\n<p>Here is an example of Route setup:</p>\n<pre><code>fun Application.configureRouting() {\n    install(Authentication) {\n        jwt(&quot;auth0&quot;) {\n            verifier(JwtValidator.jwkProvider, System.getProperty(&quot;AUTH_0_DOMAIN&quot;))\n            validate { credential -&gt; JwtValidator.validateCreds(credential) }\n        }\n    }\n\n    routing {\n        route(&quot;/v1&quot;) {\n            userRouting()\n        }\n    }\n}\n\nfun Route.userRouting() {\n    authenticate(&quot;auth0&quot;) {\n        route(&quot;/users&quot;) {\n            get {\n                val users = transaction { User.all().map { it.to_json() } }\n                call.respond(mapOf(&quot;data&quot; to users))\n            }\n        }\n    }\n}\n</code></pre>\n<p>I have tried to mock it but it's turned into mock city.</p>\n<pre><code>            it(&quot;returns an empty list&quot;) {\n                setTestEnvVariables()\n\n                val jwkProvider = mockk&lt;JwkProvider&gt;()\n                val jwk = mockk&lt;Jwk&gt;()\n                val publicKey: RSAPublicKey = generateTestKeyPair().public as RSAPublicKey\n\n                // Create a non-relaxed mock for the JWTVerifier\n                val verifier = mockk&lt;JWTVerifier&gt;()\n\n                val decodedJwt = mockk&lt;DecodedJWT&gt;()\n\n                mockkObject(JwtValidator) // Mock the JwtValidator object\n\n                // Mock the behavior of JwtValidator.jwkProvider\n                every { JwtValidator.jwkProvider } returns jwkProvider\n\n                // Mock the behavior of JwtValidator.validateCreds\n                every { JwtValidator.validateCreds(any()) } returns JWTPrincipal(mockk())\n\n                // Mock the behavior of JwkProvider.get\n                every { jwkProvider.get(any()) } returns jwk\n\n                // Mock the behavior of Jwk.getAlgorithm\n                every { jwk.getAlgorithm() } returns &quot;RS256&quot;\n\n                // Mock the behavior of Jwk.getPublicKey\n                every { jwk.publicKey } returns publicKey\n\n                // Return the mocked DecodedJWT on successful verification\n                every { verifier.verify(authorizationToken) } returns decodedJwt\n\n                withService() {\n                    val response = client.get(&quot;/v1/users&quot;) {\n                        headers.append(&quot;Content-Type&quot;, &quot;application/json&quot;)\n                        headers.append(&quot;Authorization&quot;, &quot;Bearer ${token}&quot;)\n                    }\n\n                    response.status shouldBe HttpStatusCode.OK\n                    response.bodyAsText().shouldBe(&quot;&quot;&quot;{&quot;data&quot;:[]}&quot;&quot;&quot;)\n                }\n            }\n</code></pre>\n<p>Here is the error it gets with a mocked test</p>\n<pre><code>2023-07-20 08:47:17.407 [DefaultDispatcher-worker-1] TRACE io.ktor.auth.jwt - Token verification failed\ncom.auth0.jwt.exceptions.SignatureVerificationException: The Token's Signature resulted invalid when verified using the Algorithm: SHA256withRSA\n  at com.auth0.jwt.algorithms.RSAAlgorithm.verify(RSAAlgorithm.java:51)\n  at com.auth0.jwt.JWTVerifier.verify(JWTVerifier.java:463)\n  at com.auth0.jwt.JWTVerifier.verify(JWTVerifier.java:445)\n2023-07-20 08:47:17.408 [DefaultDispatcher-worker-1] TRACE io.ktor.se\n</code></pre>\n"},{"tags":["java","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1285757936,"creation_date":1285757936,"answer_id":3820935,"question_id":3820897,"body_markdown":"I guess you can use [`@CollectionOfElements`][1] (for hibernate/jpa 1) / [`@ElementCollection`][2] (jpa 2) to map a collection of &quot;entity properties&quot; to a `List` in `entity`.\r\n\r\nYou can create the `EntityProperty` type and annotate it with `@Embeddable`\r\n\r\n  [1]: http://docs.jboss.org/hibernate/core/3.5/api/org/hibernate/annotations/CollectionOfElements.html\r\n  [2]: http://download.oracle.com/javaee/6/api/javax/persistence/ElementCollection.html","title":"JPA entity without id","body":"<p>I guess you can use <a href=\"http://docs.jboss.org/hibernate/core/3.5/api/org/hibernate/annotations/CollectionOfElements.html\" rel=\"nofollow\"><code>@CollectionOfElements</code></a> (for hibernate/jpa 1) / <a href=\"http://download.oracle.com/javaee/6/api/javax/persistence/ElementCollection.html\" rel=\"nofollow\"><code>@ElementCollection</code></a> (jpa 2) to map a collection of \"entity properties\" to a <code>List</code> in <code>entity</code>.</p>\n\n<p>You can create the <code>EntityProperty</code> type and annotate it with <code>@Embeddable</code></p>\n"},{"tags":[],"owner":{"account_id":198697,"reputation":18245,"user_id":443515,"accept_rate":56,"display_name":"Qwerky"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1285757959,"creation_date":1285757959,"answer_id":3820938,"question_id":3820897,"body_markdown":"If there is a one to one mapping between entity and entity_property you can use entity_id as the identifier.","title":"JPA entity without id","body":"<p>If there is a one to one mapping between entity and entity_property you can use entity_id as the identifier.</p>\n"},{"tags":[],"owner":{"account_id":36208,"reputation":240316,"user_id":103154,"display_name":"axtavt"},"down_vote_count":1,"up_vote_count":67,"is_accepted":true,"score":66,"last_activity_date":1513869600,"creation_date":1285758232,"answer_id":3820974,"question_id":3820897,"body_markdown":"I guess your `entity_property` has a composite key `(entity_id, name)` where `entity_id` is a foreign key to `entity`. If so, you can map it as follows:\r\n\r\n    @Embeddable\r\n    public class EntityPropertyPK {\r\n        @Column(name = &quot;name&quot;)\r\n        private String name;\r\n    \r\n        @ManyToOne\r\n        @JoinColumn(name = &quot;entity_id&quot;)\r\n        private Entity entity;\r\n    \r\n        ...\r\n    }\r\n    \r\n    @Entity \r\n    @Table(name=&quot;entity_property&quot;) \r\n    public class EntityProperty { \r\n        @EmbeddedId\r\n        private EntityPropertyPK id;\r\n    \r\n        @Column(name = &quot;value&quot;)\r\n        private String value; \r\n    \r\n        ...\r\n    }","title":"JPA entity without id","body":"<p>I guess your <code>entity_property</code> has a composite key <code>(entity_id, name)</code> where <code>entity_id</code> is a foreign key to <code>entity</code>. If so, you can map it as follows:</p>\n\n<pre><code>@Embeddable\npublic class EntityPropertyPK {\n    @Column(name = \"name\")\n    private String name;\n\n    @ManyToOne\n    @JoinColumn(name = \"entity_id\")\n    private Entity entity;\n\n    ...\n}\n\n@Entity \n@Table(name=\"entity_property\") \npublic class EntityProperty { \n    @EmbeddedId\n    private EntityPropertyPK id;\n\n    @Column(name = \"value\")\n    private String value; \n\n    ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26957,"reputation":564361,"user_id":70604,"display_name":"Pascal Thivent"},"down_vote_count":0,"up_vote_count":45,"is_accepted":false,"score":45,"last_activity_date":1285776989,"creation_date":1285776989,"answer_id":3823596,"question_id":3820897,"body_markdown":"&gt; I know that JPA entities must have primary key but I can&#39;t change database structure due to reasons beyond my control.\r\n\r\nMore precisely, a JPA entity must have some `Id` defined. But a JPA `Id` does not necessarily have to be mapped on the table primary key (and JPA can somehow deal with a table without a primary key or unique constraint). \r\n\r\n&gt; Is it possible to create JPA (Hibernate) entities that will be work with database structure like this? \r\n\r\nIf you have a column or a set of columns in the table that makes a unique value, you can use this unique set of columns as your `Id` in JPA. \r\n\r\nIf your table has no unique columns at all, you can use all of the columns as the `Id`.\r\n\r\nAnd if your table has some id but your entity doesn&#39;t, make it an `Embeddable`. ","title":"JPA entity without id","body":"<blockquote>\n  <p>I know that JPA entities must have primary key but I can't change database structure due to reasons beyond my control.</p>\n</blockquote>\n\n<p>More precisely, a JPA entity must have some <code>Id</code> defined. But a JPA <code>Id</code> does not necessarily have to be mapped on the table primary key (and JPA can somehow deal with a table without a primary key or unique constraint). </p>\n\n<blockquote>\n  <p>Is it possible to create JPA (Hibernate) entities that will be work with database structure like this? </p>\n</blockquote>\n\n<p>If you have a column or a set of columns in the table that makes a unique value, you can use this unique set of columns as your <code>Id</code> in JPA. </p>\n\n<p>If your table has no unique columns at all, you can use all of the columns as the <code>Id</code>.</p>\n\n<p>And if your table has some id but your entity doesn't, make it an <code>Embeddable</code>. </p>\n"},{"tags":[],"owner":{"account_id":99858,"reputation":903,"user_id":269514,"display_name":"Gilberto"},"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1664151606,"creation_date":1310145947,"answer_id":6628098,"question_id":3820897,"body_markdown":"See the *Java Persistence* book: [Identity and Sequencing][1]\r\n\r\nThe relevant part for your question is the [No Primary Key section][2]:\r\n\r\n&gt; Sometimes your object or table has no primary key.  The best solution\r\n&gt; in this case is normally to add a generated id to the object and\r\n&gt; table.  If you do not have this option, sometimes there is a column or\r\n&gt; set of columns in the table that make up a unique value.  You can use\r\n&gt; this unique set of columns as your id in JPA.  The JPA &lt;code&gt;Id&lt;/code&gt;\r\n&gt; does not always have to match the database table primary key\r\n&gt; constraint, nor is a primary key or a unique constraint required.\r\n&gt; \r\n&gt; If your table truly has no unique columns, then use all of the columns\r\n&gt; as the id.  Typically when this occurs the data is read-only, so even\r\n&gt; if the table allows duplicate rows with the same values, the objects\r\n&gt; will be the same anyway, so it does not matter that JPA thinks they\r\n&gt; are the same object.  The issue with allowing updates and deletes is\r\n&gt; that there is no way to uniquely identify the object&#39;s row, so all of\r\n&gt; the matching rows will be updated or deleted.\r\n&gt; \r\n&gt; If your object does not have an id, but its table does, this is fine.\r\n&gt; Make the object an &lt;code&gt;Embeddable&lt;/code&gt; object, embeddable objects\r\n&gt; do not have ids.  You will need a &lt;code&gt;Entity&lt;/code&gt; that contains\r\n&gt; this &lt;code&gt;Embeddable&lt;/code&gt; to persist and query it.\r\n\r\n  [1]: http://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing\r\n  [2]: https://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#No_Primary_Key\r\n","title":"JPA entity without id","body":"<p>See the <em>Java Persistence</em> book: <a href=\"http://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing\" rel=\"nofollow noreferrer\">Identity and Sequencing</a></p>\n<p>The relevant part for your question is the <a href=\"https://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#No_Primary_Key\" rel=\"nofollow noreferrer\">No Primary Key section</a>:</p>\n<blockquote>\n<p>Sometimes your object or table has no primary key.  The best solution\nin this case is normally to add a generated id to the object and\ntable.  If you do not have this option, sometimes there is a column or\nset of columns in the table that make up a unique value.  You can use\nthis unique set of columns as your id in JPA.  The JPA <code>Id</code>\ndoes not always have to match the database table primary key\nconstraint, nor is a primary key or a unique constraint required.</p>\n<p>If your table truly has no unique columns, then use all of the columns\nas the id.  Typically when this occurs the data is read-only, so even\nif the table allows duplicate rows with the same values, the objects\nwill be the same anyway, so it does not matter that JPA thinks they\nare the same object.  The issue with allowing updates and deletes is\nthat there is no way to uniquely identify the object's row, so all of\nthe matching rows will be updated or deleted.</p>\n<p>If your object does not have an id, but its table does, this is fine.\nMake the object an <code>Embeddable</code> object, embeddable objects\ndo not have ids.  You will need a <code>Entity</code> that contains\nthis <code>Embeddable</code> to persist and query it.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":3523152,"reputation":124,"user_id":2944942,"display_name":"CelzioBR"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689808818,"creation_date":1689808818,"answer_id":76725757,"question_id":3820897,"body_markdown":"I do this.\r\n\r\n\r\nClass Main\r\n\r\n    @Entity\r\n    @Table(name = &quot;DOOR_HGF&quot;)\r\n    public class DOORSHGF implements Serializable {\r\n\r\n\t@OneToMany(mappedBy = &quot;hgfs&quot;, fetch = FetchType.LAZY)\r\n\tprivate List&lt;HGF&gt; hgfs= new ArrayList&lt;&gt;();\r\n\r\n    private String Room;\r\n    \r\n    //Rest Class\r\n\r\n    }\r\n\r\n\r\nChild Class\r\n\r\n    @Entity\r\n    @Table(name=&quot;HGF&quot;)\r\n    Class HGF implements serializable {\r\n\r\n    @Id\r\n    @Column(name=&quot;ROWID&quot;)\r\n    private String id;\r\n\r\n    private String name;\r\n\r\n    @ManyToOne\r\n\t@JoinColumn(name=&quot;ID_HGF_NK&quot;)\r\n\tprivate DOORSHGF hgfs;\r\n\r\n    //Rest Class\r\n\r\n    }","title":"JPA entity without id","body":"<p>I do this.</p>\n<p>Class Main</p>\n<pre><code>@Entity\n@Table(name = &quot;DOOR_HGF&quot;)\npublic class DOORSHGF implements Serializable {\n\n@OneToMany(mappedBy = &quot;hgfs&quot;, fetch = FetchType.LAZY)\nprivate List&lt;HGF&gt; hgfs= new ArrayList&lt;&gt;();\n\nprivate String Room;\n\n//Rest Class\n\n}\n</code></pre>\n<p>Child Class</p>\n<pre><code>@Entity\n@Table(name=&quot;HGF&quot;)\nClass HGF implements serializable {\n\n@Id\n@Column(name=&quot;ROWID&quot;)\nprivate String id;\n\nprivate String name;\n\n@ManyToOne\n@JoinColumn(name=&quot;ID_HGF_NK&quot;)\nprivate DOORSHGF hgfs;\n\n//Rest Class\n\n}\n</code></pre>\n"}],"owner":{"account_id":196153,"reputation":4695,"user_id":439450,"accept_rate":79,"display_name":"Michael"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":253390,"favorite_count":0,"down_vote_count":0,"up_vote_count":88,"accepted_answer_id":3820974,"answer_count":6,"score":88,"last_activity_date":1689808818,"creation_date":1285757616,"question_id":3820897,"body_markdown":"I have a database with the following structure:\r\n\r\n    CREATE TABLE entity (\r\n        id SERIAL,\r\n        name VARCHAR(255),\r\n        PRIMARY KEY (id)\r\n    );\r\n    \r\n    CREATE TABLE entity_property (\r\n        entity_id SERIAL,\r\n        name VARCHAR(255),\r\n        value TEXT\r\n    );\r\n\r\nWhen I try to create an EntityProperty class\r\n\r\n    @Entity\r\n    @Table(name=&quot;entity_property&quot;)\r\n    public class EntityProperty {\r\n    \r\n        private String name;\r\n        private String value;\r\n    \r\n        @Column(name=&quot;name&quot;)\r\n        public String getName() {\r\n            return name;\r\n        }\r\n        public void setName(String name) {\r\n            this.name = name;\r\n        }\r\n    \r\n        @Column(name=&quot;value&quot;, nullable=true, length=255)\r\n        public String getValue() {\r\n            return value;\r\n        }\r\n        public void setValue(String value) {\r\n            this.value = value;\r\n        }\r\n    }\r\n\r\nI get the following exception:\r\n\r\n    org.hibernate.AnnotationException: No identifier specified for entity: package.EntityProperty\r\n\r\nI know that JPA entities must have a primary key but I can&#39;t change the database schema due to reasons that are beyond my control. Is it possible to create JPA (Hibernate) entities that will work with database schema like this? \r\n\r\n","title":"JPA entity without id","body":"<p>I have a database with the following structure:</p>\n\n<pre><code>CREATE TABLE entity (\n    id SERIAL,\n    name VARCHAR(255),\n    PRIMARY KEY (id)\n);\n\nCREATE TABLE entity_property (\n    entity_id SERIAL,\n    name VARCHAR(255),\n    value TEXT\n);\n</code></pre>\n\n<p>When I try to create an EntityProperty class</p>\n\n<pre><code>@Entity\n@Table(name=\"entity_property\")\npublic class EntityProperty {\n\n    private String name;\n    private String value;\n\n    @Column(name=\"name\")\n    public String getName() {\n        return name;\n    }\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    @Column(name=\"value\", nullable=true, length=255)\n    public String getValue() {\n        return value;\n    }\n    public void setValue(String value) {\n        this.value = value;\n    }\n}\n</code></pre>\n\n<p>I get the following exception:</p>\n\n<pre><code>org.hibernate.AnnotationException: No identifier specified for entity: package.EntityProperty\n</code></pre>\n\n<p>I know that JPA entities must have a primary key but I can't change the database schema due to reasons that are beyond my control. Is it possible to create JPA (Hibernate) entities that will work with database schema like this? </p>\n"},{"tags":["java","jdbc"],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1689808390,"creation_date":1689808390,"answer_id":76725735,"question_id":76725630,"body_markdown":"JDBC doesn&#39;t support any of this. It is a _very_ low level API that _can_ be used as a direct API (as in, an API used by folks writing apps that interact with DBs), but you really shouldn&#39;t. It&#39;s best seen as a meta-API: An API used by folks writing __database APIs__ - you write a layer &#39;in between&#39;.\r\n\r\nPart of the problem is that JDBC must cater to three things which combine to make things rather annoying:\r\n\r\n* It&#39;s incredibly old API. Not by itself a problem, but it can&#39;t change with the times; not with new ideas about how APIs should be designed, and not with new ideas about how DBs are supposed to work internally.\r\n* It has to expose as much as it can: Whilst JDBC forces SQL and synchronized access, it doesn&#39;t want to force anything else. So if a DB has some exotic feature, JDBC has to make it available to you. If there is some way to interact with the DB that is slightly faster, it has to expose that.\r\n* It has to, of course, cater to every database.\r\n\r\nThere are lots of obvious faults in the API design as a consequence. For example, `.setDate` is __broken__ - the vast majority of databases do things correctly and consider `DATETIME` or `DATE` columns to require storing year+month+day (+hour+minute+second for datetimes), and __not__ anything millisecond-since-epoch based; that last one goes completely wrong if the underlying timezone definitions change, which change. All the time (hi, dutchies! Did you know all birthdates prior to 1945 that you store through any process that converts through millis-since-epoch have shifted the birthdate down by a day silently if you upgrade to newer releases of java17 or later if using the `Europe/Amsterdam` timezone? OpenJDK messed up and misunderstood a change to the tzdata definitions! Those DBs that properly store year+month+day are not affected).\r\n\r\n`java.sql.Date` extends `java.util.Date`, and that is a lying liar of a name, because that represents an instant, as per epoch, and absolutely does not store dates in any way. Hence, JDBC&#39;s `.getDate` and `.setDate` methods are bad.\r\n\r\nThe correct way to set dates is `.setObject(pos, someLocalDateInstance)` and `.getObject(someColIdxOrName, LocalDate.class)` which is very unwieldy, but nevertheless, the only correct way to do it (or `ZonedDateTime` if you are storing a `TIMESTAMP WITH TIMEZONE` style value insteaD).\r\n\r\nThat&#39;s one of about a 100 examples of why JDBC is thoroughly unsuitable.\r\n\r\nSo, write a library that wraps around it, and add your codecs _there_, if you really want to. Or simply allow any instance whose class implements `DbCodec` or whatnot, which can translate it to a type that JDBC inherently understands (all the primitives, string, LocalDate, ZonedDateTime, and a few others).\r\n\r\nOr, don&#39;t do that, and use one that was already written. There&#39;s [JOOQ](https://jooq.org) as well as [JDBI](https://jdbi.org).\r\n\r\nIf &#39;write an intermediate layer&#39; is too much work and &#39;use these fantastic libraries that do all that for you&#39; isn&#39;t acceptable, we dive down to a much, much simpler answer: _What you want is not possible, and you will have to get rid of all these type-safe wrappers_.\r\n","title":"JDBC does not recognize custom type-safe wrapper for fields","body":"<p>JDBC doesn't support any of this. It is a <em>very</em> low level API that <em>can</em> be used as a direct API (as in, an API used by folks writing apps that interact with DBs), but you really shouldn't. It's best seen as a meta-API: An API used by folks writing <strong>database APIs</strong> - you write a layer 'in between'.</p>\n<p>Part of the problem is that JDBC must cater to three things which combine to make things rather annoying:</p>\n<ul>\n<li>It's incredibly old API. Not by itself a problem, but it can't change with the times; not with new ideas about how APIs should be designed, and not with new ideas about how DBs are supposed to work internally.</li>\n<li>It has to expose as much as it can: Whilst JDBC forces SQL and synchronized access, it doesn't want to force anything else. So if a DB has some exotic feature, JDBC has to make it available to you. If there is some way to interact with the DB that is slightly faster, it has to expose that.</li>\n<li>It has to, of course, cater to every database.</li>\n</ul>\n<p>There are lots of obvious faults in the API design as a consequence. For example, <code>.setDate</code> is <strong>broken</strong> - the vast majority of databases do things correctly and consider <code>DATETIME</code> or <code>DATE</code> columns to require storing year+month+day (+hour+minute+second for datetimes), and <strong>not</strong> anything millisecond-since-epoch based; that last one goes completely wrong if the underlying timezone definitions change, which change. All the time (hi, dutchies! Did you know all birthdates prior to 1945 that you store through any process that converts through millis-since-epoch have shifted the birthdate down by a day silently if you upgrade to newer releases of java17 or later if using the <code>Europe/Amsterdam</code> timezone? OpenJDK messed up and misunderstood a change to the tzdata definitions! Those DBs that properly store year+month+day are not affected).</p>\n<p><code>java.sql.Date</code> extends <code>java.util.Date</code>, and that is a lying liar of a name, because that represents an instant, as per epoch, and absolutely does not store dates in any way. Hence, JDBC's <code>.getDate</code> and <code>.setDate</code> methods are bad.</p>\n<p>The correct way to set dates is <code>.setObject(pos, someLocalDateInstance)</code> and <code>.getObject(someColIdxOrName, LocalDate.class)</code> which is very unwieldy, but nevertheless, the only correct way to do it (or <code>ZonedDateTime</code> if you are storing a <code>TIMESTAMP WITH TIMEZONE</code> style value insteaD).</p>\n<p>That's one of about a 100 examples of why JDBC is thoroughly unsuitable.</p>\n<p>So, write a library that wraps around it, and add your codecs <em>there</em>, if you really want to. Or simply allow any instance whose class implements <code>DbCodec</code> or whatnot, which can translate it to a type that JDBC inherently understands (all the primitives, string, LocalDate, ZonedDateTime, and a few others).</p>\n<p>Or, don't do that, and use one that was already written. There's <a href=\"https://jooq.org\" rel=\"nofollow noreferrer\">JOOQ</a> as well as <a href=\"https://jdbi.org\" rel=\"nofollow noreferrer\">JDBI</a>.</p>\n<p>If 'write an intermediate layer' is too much work and 'use these fantastic libraries that do all that for you' isn't acceptable, we dive down to a much, much simpler answer: <em>What you want is not possible, and you will have to get rid of all these type-safe wrappers</em>.</p>\n"}],"owner":{"account_id":105578,"reputation":4431,"user_id":281657,"accept_rate":93,"display_name":"Malcolm Crum"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76725735,"answer_count":1,"score":1,"last_activity_date":1689808390,"creation_date":1689806496,"question_id":76725630,"body_markdown":"I am trying to implement a wrapper class for my ID fields from my database to improve typesafety - something like this: http://principles-wiki.net/patterns:type-safe_wrapper\r\n\r\nI&#39;ve run into problems when using these as parameters to preparedstatements. I&#39;m using ActiveJDBC but I think the problem lies at a lower level, with JDBC.\r\n\r\nFor example, the following (artificial) line produces an exception:\r\n```\r\nModelDelegate.count(PSetAnswer::class.java, &quot;psetproblemid in (?)&quot;, new PSetProblemId(333661));\r\n```\r\n\r\n```\r\norg.javalite.activejdbc.DBException: java.sql.SQLException: Type com.ktbyte.dto.id.PSetProblemId not supported type, query: SELECT COUNT(*) FROM psetanswers WHERE psetproblemid in (?), params: 333661\r\n\tat [...]\r\nCaused by: java.sql.SQLException: Type com.ktbyte.dto.id.PSetProblemId not supported type\r\n\tat [...]\r\n```\r\n\r\nMy ID classes look like this:\r\n```java\r\npublic class PSetProblemId extends Id.IntId {\r\n    public PSetProblemId(Integer value) {\r\n        super(value);\r\n    }\r\n}\r\n\r\nabstract public class Id&lt;T&gt; {\r\n    public final T value;\r\n\r\n    public Id(T value) {\r\n        this.value = requireNonNull(value);\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return value.toString();\r\n    }\r\n\r\n    [...]\r\n\r\n    public static abstract class IntId extends Id&lt;Integer&gt; {\r\n        public IntId(Integer value) {\r\n            super(value);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAs far as I can tell digging through stacktraces, our JDBC driver (MariaDB) has a `Configuration` which includes an array of `Codecs` that describe how to convert a Java class to a particular type:\r\n\r\n```java\r\n// deep in org.mariadb.jdbc.BasePreparedStatement\r\nfor (Codec&lt;?&gt; codec : con.getContext().getConf().codecs()) {\r\n  if (codec.canEncode(x)) {\r\n    Parameter p = new Parameter(codec, x, scaleOrLength);\r\n    parameters.set(parameterIndex - 1, p);\r\n    return;\r\n  }\r\n}\r\n\r\nthrow new SQLException(String.format(&quot;Type %s not supported type&quot;, x.getClass().getName()));\r\n```\r\n\r\nI think what I need is to add a Codec that describes how to convert an IntId sub-class to an integer to my JDBC configuration. If so, how do I do that? Or is there another way to solve this?\r\n\r\nedit: Just tried making `Id` `implements RowId`, but this didn&#39;t help. Same error.","title":"JDBC does not recognize custom type-safe wrapper for fields","body":"<p>I am trying to implement a wrapper class for my ID fields from my database to improve typesafety - something like this: <a href=\"http://principles-wiki.net/patterns:type-safe_wrapper\" rel=\"nofollow noreferrer\">http://principles-wiki.net/patterns:type-safe_wrapper</a></p>\n<p>I've run into problems when using these as parameters to preparedstatements. I'm using ActiveJDBC but I think the problem lies at a lower level, with JDBC.</p>\n<p>For example, the following (artificial) line produces an exception:</p>\n<pre><code>ModelDelegate.count(PSetAnswer::class.java, &quot;psetproblemid in (?)&quot;, new PSetProblemId(333661));\n</code></pre>\n<pre><code>org.javalite.activejdbc.DBException: java.sql.SQLException: Type com.ktbyte.dto.id.PSetProblemId not supported type, query: SELECT COUNT(*) FROM psetanswers WHERE psetproblemid in (?), params: 333661\n    at [...]\nCaused by: java.sql.SQLException: Type com.ktbyte.dto.id.PSetProblemId not supported type\n    at [...]\n</code></pre>\n<p>My ID classes look like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class PSetProblemId extends Id.IntId {\n    public PSetProblemId(Integer value) {\n        super(value);\n    }\n}\n\nabstract public class Id&lt;T&gt; {\n    public final T value;\n\n    public Id(T value) {\n        this.value = requireNonNull(value);\n    }\n\n    @Override\n    public String toString() {\n        return value.toString();\n    }\n\n    [...]\n\n    public static abstract class IntId extends Id&lt;Integer&gt; {\n        public IntId(Integer value) {\n            super(value);\n        }\n    }\n}\n</code></pre>\n<p>As far as I can tell digging through stacktraces, our JDBC driver (MariaDB) has a <code>Configuration</code> which includes an array of <code>Codecs</code> that describe how to convert a Java class to a particular type:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// deep in org.mariadb.jdbc.BasePreparedStatement\nfor (Codec&lt;?&gt; codec : con.getContext().getConf().codecs()) {\n  if (codec.canEncode(x)) {\n    Parameter p = new Parameter(codec, x, scaleOrLength);\n    parameters.set(parameterIndex - 1, p);\n    return;\n  }\n}\n\nthrow new SQLException(String.format(&quot;Type %s not supported type&quot;, x.getClass().getName()));\n</code></pre>\n<p>I think what I need is to add a Codec that describes how to convert an IntId sub-class to an integer to my JDBC configuration. If so, how do I do that? Or is there another way to solve this?</p>\n<p>edit: Just tried making <code>Id</code> <code>implements RowId</code>, but this didn't help. Same error.</p>\n"},{"tags":["java","opencv","build.gradle","javacv"],"comments":[{"owner":{"account_id":248409,"reputation":4974,"user_id":523744,"display_name":"Samuel Audet"},"score":0,"creation_date":1689894513,"post_id":76725716,"comment_id":135281694,"body_markdown":"You should be able to use their dependencies without adding anything of your own. What happens if you try to do that? I think `exclude group: &#39;org.bytedeco&#39;, module: &#39;opencv-platform&#39;` should work.","body":"You should be able to use their dependencies without adding anything of your own. What happens if you try to do that? I think <code>exclude group: &#39;org.bytedeco&#39;, module: &#39;opencv-platform&#39;</code> should work."}],"owner":{"account_id":29052629,"reputation":1,"user_id":22255088,"display_name":"Samson Kempiak"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689807993,"creation_date":1689807993,"question_id":76725716,"body_markdown":"I am trying to add javacv to my build.gradle however it already has opencv imbedded in the sdk(this is for a robitics competition). \r\n\r\n&gt; Duplicate class org.opencv.android.BaseLoaderCallback found in modules jetified-opencv-4.7.0-1.5.9 (org.bytedeco:opencv:4.7.0-1.5.9) and jetified-opencv-repackaged-bundled-dylibs-4.7.0-A-runtime (org.openftc:opencv-repackaged-bundled-dylibs:4.7.0-A)\r\n\r\nNote: i tried looking at other questions but couldn&#39;t find an answer to this. If there is a post I apologize I missed it.\r\n\r\n\r\n```\r\nHere is the gradle script:\r\nimplementation(group: &#39;org.bytedeco&#39;, name: &#39;javacv-platform&#39;, version: &#39;1.5.9&#39;) {\r\nexclude group: &#39;org.opencv&#39;, module: &#39;android&#39;\r\n}\r\n```\r\n\r\n\r\nI cannot show that of the opencv implementation as I couldn&#39;t access that file. Is there a way to exclude it properly? Here is an example of the error:\r\n\r\nThank you!\r\n\r\nHere is the entire log:\r\nhttps://pastebin.com/KAddmZnX","title":"android gradle file having duplicate classes","body":"<p>I am trying to add javacv to my build.gradle however it already has opencv imbedded in the sdk(this is for a robitics competition).</p>\n<blockquote>\n<p>Duplicate class org.opencv.android.BaseLoaderCallback found in modules jetified-opencv-4.7.0-1.5.9 (org.bytedeco:opencv:4.7.0-1.5.9) and jetified-opencv-repackaged-bundled-dylibs-4.7.0-A-runtime (org.openftc:opencv-repackaged-bundled-dylibs:4.7.0-A)</p>\n</blockquote>\n<p>Note: i tried looking at other questions but couldn't find an answer to this. If there is a post I apologize I missed it.</p>\n<pre><code>Here is the gradle script:\nimplementation(group: 'org.bytedeco', name: 'javacv-platform', version: '1.5.9') {\nexclude group: 'org.opencv', module: 'android'\n}\n</code></pre>\n<p>I cannot show that of the opencv implementation as I couldn't access that file. Is there a way to exclude it properly? Here is an example of the error:</p>\n<p>Thank you!</p>\n<p>Here is the entire log:\n<a href=\"https://pastebin.com/KAddmZnX\" rel=\"nofollow noreferrer\">https://pastebin.com/KAddmZnX</a></p>\n"},{"tags":["java","mysql","spring","hibernate","jpa"],"comments":[{"owner":{"account_id":7080712,"reputation":1947,"user_id":5419228,"display_name":"shankarsh15"},"score":0,"creation_date":1463999251,"post_id":37388271,"comment_id":62286559,"body_markdown":"can you share entire stack(error) trace.","body":"can you share entire stack(error) trace."},{"owner":{"account_id":1584205,"reputation":9787,"user_id":1468919,"accept_rate":90,"display_name":"Jaiwo99"},"score":0,"creation_date":1463999818,"post_id":37388271,"comment_id":62286919,"body_markdown":"check your config, this could the reason `System.getProperty(&quot;root&quot;)`..","body":"check your config, this could the reason <code>System.getProperty(&quot;root&quot;)</code>.."}],"answers":[{"tags":[],"owner":{"account_id":7080712,"reputation":1947,"user_id":5419228,"display_name":"shankarsh15"},"down_vote_count":0,"up_vote_count":22,"is_accepted":true,"score":22,"last_activity_date":1518086142,"creation_date":1463999932,"answer_id":37388786,"question_id":37388271,"body_markdown":"**The issue is that you are not able to get a connection to MYSQL database and hence it is throwing an error saying that cannot build a session factory.**\r\n\r\nPlease see the error below:\r\n\r\n     Caused by: java.sql.SQLException: Access denied for user &#39;&#39;@&#39;localhost&#39; (using password: NO) \r\nwhich points to `username` not getting `populated`.\r\n\r\n**Please recheck system properties** \r\n\r\n    dataSource.setUsername(System.getProperty(&quot;root&quot;));\r\n\r\nsome packages seems to be missing as well pointing to a dependency issue:\r\n\r\n    package org.gjt.mm.mysql does not exist\r\n\r\nPlease run a `mvn dependency:tree` command to check for dependencies","title":"JPA Hibernate Persistence exception [PersistenceUnit: default] Unable to build Hibernate SessionFactory","body":"<p><strong>The issue is that you are not able to get a connection to MYSQL database and hence it is throwing an error saying that cannot build a session factory.</strong></p>\n\n<p>Please see the error below:</p>\n\n<pre><code> Caused by: java.sql.SQLException: Access denied for user ''@'localhost' (using password: NO) \n</code></pre>\n\n<p>which points to <code>username</code> not getting <code>populated</code>.</p>\n\n<p><strong>Please recheck system properties</strong> </p>\n\n<pre><code>dataSource.setUsername(System.getProperty(\"root\"));\n</code></pre>\n\n<p>some packages seems to be missing as well pointing to a dependency issue:</p>\n\n<pre><code>package org.gjt.mm.mysql does not exist\n</code></pre>\n\n<p>Please run a <code>mvn dependency:tree</code> command to check for dependencies</p>\n"},{"tags":[],"owner":{"account_id":4009553,"reputation":564,"user_id":3303365,"display_name":"Md. Maidul Islam"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1512361546,"creation_date":1512361546,"answer_id":47626489,"question_id":37388271,"body_markdown":"I found some issue about that kind of error \r\n\r\n 1. Database username or password not match in the mysql or other other database. Please set application.properties like this\r\n\r\n&lt;pre&gt; &lt;code&gt; \r\n\r\n    # ===============================\r\n    # = DATA SOURCE\r\n    # ===============================\r\n    \r\n    # Set here configurations for the database connection\r\n    \r\n    # Connection url for the database please let me know &quot;mondolmislam@gmail.com&quot;\r\n    spring.datasource.url = jdbc:mysql://localhost:3306/bookstoreapiabc\r\n    \r\n    # Username and secret\r\n    spring.datasource.username = root\r\n    spring.datasource.password =\r\n    \r\n    # Keep the connection alive if idle for a long time (needed in production)\r\n    spring.datasource.testWhileIdle = true\r\n    spring.datasource.validationQuery = SELECT 1\r\n    \r\n    # ===============================\r\n    # = JPA / HIBERNATE\r\n    # ===============================\r\n    \r\n    # Use spring.jpa.properties.* for Hibernate native properties (the prefix is\r\n    # stripped before adding them to the entity manager).\r\n    \r\n    # Show or not log for each sql query\r\n    spring.jpa.show-sql = true\r\n    \r\n    # Hibernate ddl auto (create, create-drop, update): with &quot;update&quot; the database\r\n    # schema will be automatically updated accordingly to java entities found in\r\n    # the project\r\n    spring.jpa.hibernate.ddl-auto = update\r\n    \r\n    # Allows Hibernate to generate SQL optimized for a particular DBMS\r\n    spring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL5Dialect\r\n\r\nIssue no 2.\r\n\r\nYour local server has two database server and those database server conflict. this conflict like this **mysql server &amp; xampp or lampp or wamp** server. Please one of the database like **mysql server** because **xampp or lampp server** automatically install **mysql server** on this machine\r\n\r\n\r\n","title":"JPA Hibernate Persistence exception [PersistenceUnit: default] Unable to build Hibernate SessionFactory","body":"<p>I found some issue about that kind of error </p>\n\n<ol>\n<li>Database username or password not match in the mysql or other other database. Please set application.properties like this</li>\n</ol>\n\n<p><pre> <code> </p>\n\n# ===============================\n# = DATA SOURCE\n# ===============================\n\n# Set here configurations for the database connection\n\n# Connection url for the database please let me know \"mondolmislam@gmail.com\"\nspring.datasource.url = jdbc:mysql://localhost:3306/bookstoreapiabc\n\n# Username and secret\nspring.datasource.username = root\nspring.datasource.password =\n\n# Keep the connection alive if idle for a long time (needed in production)\nspring.datasource.testWhileIdle = true\nspring.datasource.validationQuery = SELECT 1\n\n# ===============================\n# = JPA / HIBERNATE\n# ===============================\n\n# Use spring.jpa.properties.* for Hibernate native properties (the prefix is\n# stripped before adding them to the entity manager).\n\n# Show or not log for each sql query\nspring.jpa.show-sql = true\n\n# Hibernate ddl auto (create, create-drop, update): with \"update\" the database\n# schema will be automatically updated accordingly to java entities found in\n# the project\nspring.jpa.hibernate.ddl-auto = update\n\n# Allows Hibernate to generate SQL optimized for a particular DBMS\nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL5Dialect\n</code></pre>\n\n<p>Issue no 2.</p>\n\n<p>Your local server has two database server and those database server conflict. this conflict like this <strong>mysql server &amp; xampp or lampp or wamp</strong> server. Please one of the database like <strong>mysql server</strong> because <strong>xampp or lampp server</strong> automatically install <strong>mysql server</strong> on this machine</p>\n"},{"tags":[],"owner":{"account_id":14293268,"reputation":105,"user_id":10324643,"display_name":"Himanshu Shukla"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1536651395,"creation_date":1536644362,"answer_id":52269309,"question_id":37388271,"body_markdown":"I was getting this error even when all the relevant dependencies were in place because I hadn&#39;t created the schema in MySQL. \r\n\r\nI thought it would be created automatically but it wasn&#39;t. Although the table itself will be created, you have to create the schema.","title":"JPA Hibernate Persistence exception [PersistenceUnit: default] Unable to build Hibernate SessionFactory","body":"<p>I was getting this error even when all the relevant dependencies were in place because I hadn't created the schema in MySQL. </p>\n\n<p>I thought it would be created automatically but it wasn't. Although the table itself will be created, you have to create the schema.</p>\n"},{"tags":[],"owner":{"account_id":14972066,"reputation":95,"user_id":10808616,"display_name":"madil26"},"down_vote_count":3,"up_vote_count":2,"is_accepted":false,"score":-1,"last_activity_date":1564792993,"creation_date":1564792993,"answer_id":57334720,"question_id":37388271,"body_markdown":"I had a semicolon at the end, and gave me this error.","title":"JPA Hibernate Persistence exception [PersistenceUnit: default] Unable to build Hibernate SessionFactory","body":"<p>I had a semicolon at the end, and gave me this error.</p>\n"},{"tags":[],"owner":{"account_id":16449882,"reputation":319,"user_id":11883568,"display_name":"user11883568"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1614688776,"creation_date":1614688776,"answer_id":66439567,"question_id":37388271,"body_markdown":"Got this error due to a mistake in a named query.","title":"JPA Hibernate Persistence exception [PersistenceUnit: default] Unable to build Hibernate SessionFactory","body":"<p>Got this error due to a mistake in a named query.</p>\n"},{"tags":[],"owner":{"account_id":12204971,"reputation":1227,"user_id":8908318,"accept_rate":100,"display_name":"monamona"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689807443,"creation_date":1689807443,"answer_id":76725688,"question_id":37388271,"body_markdown":"This error occured to me when I tried to connect to a MariaDB database when I had \r\n\r\n```\r\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\n```\r\n\r\nspecified in my application.properties. I did not set it to any other value and thus a bad driver was used. I removed the explicit driver description from my application.properties and let spring figure out on its own which driver to use. This resolved the issue for me.","title":"JPA Hibernate Persistence exception [PersistenceUnit: default] Unable to build Hibernate SessionFactory","body":"<p>This error occured to me when I tried to connect to a MariaDB database when I had</p>\n<pre><code>spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\n</code></pre>\n<p>specified in my application.properties. I did not set it to any other value and thus a bad driver was used. I removed the explicit driver description from my application.properties and let spring figure out on its own which driver to use. This resolved the issue for me.</p>\n"}],"owner":{"account_id":7241348,"reputation":456,"user_id":5524834,"accept_rate":62,"display_name":"Joe Blow"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":190732,"favorite_count":0,"down_vote_count":1,"up_vote_count":33,"accepted_answer_id":37388786,"answer_count":6,"score":32,"last_activity_date":1689807443,"creation_date":1463998444,"question_id":37388271,"body_markdown":"I&#39;ve been trying to sort out a connection to my DB with JPA Hibernate and mysql, but for some reason, no matter what i try, when launching the tomcat server i get the same exception:\r\n\r\n\r\n     org.springframework.beans.factory.BeanCreationException: Error creating     bean with name &#39;localContainerEntityManagerFactoryBean&#39; defined in class path resource [core/JPAConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]: Factory method &#39;localContainerEntityManagerFactoryBean&#39; threw exception; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory\r\n\r\nThis is my JPA config class:\r\n\r\n    @Configuration\r\n    @EnableJpaRepositories(&quot;core.repository&quot;)\r\n    @EnableTransactionManagement\r\n    @EnableCaching\r\n    public class JPAConfig {\r\n\r\n    @Value(&quot;${db.jdbcURL}&quot;)\r\n    private String jdbcURL;\r\n\r\n    @Value(&quot;${db.user}&quot;)\r\n    private String user;\r\n\r\n    @Value(&quot;${db.password}&quot;)\r\n    private String password;\r\n\r\n    @Value(&quot;${db.generateDDL}&quot;)\r\n    private Boolean generateDDL;\r\n\r\n    @SuppressWarnings(&quot;Duplicates&quot;)\r\n    @Bean\r\n    public DataSource dataSource() {\r\n        BasicDataSource dataSource = new BasicDataSource();\r\n        dataSource.setDriverClassName(Driver.class.getName());\r\n        dataSource.setUrl(&quot;jdbc:mysql://localhost:3306/movierentaldb&quot;);\r\n        dataSource.setUsername(System.getProperty(&quot;root&quot;));\r\n        dataSource.setPassword(System.getProperty(&quot;mdie1767&quot;));\r\n        dataSource.setInitialSize(2);\r\n        dataSource.setMaxActive(5);\r\n        return dataSource;\r\n    }\r\n\r\n    @Bean\r\n    public LocalContainerEntityManagerFactoryBean localContainerEntityManagerFactoryBean(){\r\n        HibernateJpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter();\r\n        vendorAdapter.setDatabase(Database.MYSQL);\r\n        vendorAdapter.setGenerateDdl(generateDDL);\r\n        vendorAdapter.setShowSql(true);\r\n\r\n        LocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();\r\n\r\n        factory.setJpaVendorAdapter(vendorAdapter);\r\n\r\n        factory.setPackagesToScan(&quot;core.model&quot;);\r\n\r\n        factory.setDataSource(dataSource());\r\n\r\n        factory.afterPropertiesSet();\r\n        return factory;\r\n    }\r\n\r\n    @Bean\r\n    public EntityManagerFactory entityManagerFactory(){\r\n        return localContainerEntityManagerFactoryBean().getObject();\r\n    }\r\n\r\n\r\n\r\n    @Bean\r\n    public EntityManager entityManager(){\r\n        return entityManagerFactory().createEntityManager();\r\n    }\r\n\r\n    @Bean\r\n    PlatformTransactionManager transactionManager(){\r\n        JpaTransactionManager manager = new JpaTransactionManager();\r\n        manager.setEntityManagerFactory(entityManagerFactory());\r\n        return manager;\r\n    }\r\n\r\n    @Bean\r\n    public HibernateExceptionTranslator hibernateExceptionTranslator(){\r\n        return  new HibernateExceptionTranslator();\r\n    }\r\n\r\n    @Bean\r\n    public CacheManager cacheManager(){\r\n        GuavaCacheManager guavaCacheManager = new GuavaCacheManager();\r\n        guavaCacheManager.setCacheBuilder(CacheBuilder.newBuilder().expireAfterAccess(2, TimeUnit.HOURS));\r\n        return guavaCacheManager;\r\n    }\r\n}\r\n\r\nAt this point i can&#39;t think of anything else to try..any help is much obliged\r\n\r\nEdit: This is the entire stacktrace\r\n\r\n    23-May-2016 13:05:10.267 INFO [RMI TCP Connection(3)-127.0.0.1] org.apache.catalina.core.ApplicationContext.log No Spring WebApplicationInitializer types detected on classpath\r\n    23-May-2016 13:05:10.444 INFO [RMI TCP Connection(3)-127.0.0.1] org.apache.catalina.core.ApplicationContext.log Initializing Spring root WebApplicationContext\r\n    23-May-2016 13:05:15.333 SEVERE [RMI TCP Connection(3)-127.0.0.1] org.apache.catalina.core.StandardContext.listenerStart Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener\r\n     org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;localContainerEntityManagerFactoryBean&#39; defined in class path resource [core/JPAConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]: Factory method &#39;localContainerEntityManagerFactoryBean&#39; threw exception; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:599)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1123)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1018)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:510)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:482)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1054)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:829)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:538)\r\n    \tat org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:444)\r\n    \tat org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:326)\r\n    \tat org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:107)\r\n    \tat org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4732)\r\n    \tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5194)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:152)\r\n    \tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\r\n    \tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:702)\r\n    \tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:734)\r\n    \tat org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1702)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:483)\r\n    \tat org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:300)\r\n    \tat com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)\r\n    \tat com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)\r\n    \tat org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:482)\r\n    \tat org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:431)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:483)\r\n    \tat org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:300)\r\n    \tat com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)\r\n    \tat com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)\r\n    \tat javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1466)\r\n    \tat javax.management.remote.rmi.RMIConnectionImpl.access$300(RMIConnectionImpl.java:76)\r\n    \tat javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1307)\r\n    \tat javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1399)\r\n    \tat javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:828)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:483)\r\n    \tat sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:323)\r\n    \tat sun.rmi.transport.Transport$1.run(Transport.java:200)\r\n    \tat sun.rmi.transport.Transport$1.run(Transport.java:197)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat sun.rmi.transport.Transport.serviceCall(Transport.java:196)\r\n    \tat sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:568)\r\n    \tat sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:826)\r\n    \tat sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$240(TCPTransport.java:683)\r\n    \tat sun.rmi.transport.tcp.TCPTransport$ConnectionHandler$$Lambda$1/108265094.run(Unknown Source)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:682)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n    \tat java.lang.Thread.run(Thread.java:745)\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]: Factory method &#39;localContainerEntityManagerFactoryBean&#39; threw exception; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:189)\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:588)\r\n    \t... 60 more\r\n    Caused by: javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory\r\n    \tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.persistenceException(EntityManagerFactoryBuilderImpl.java:954)\r\n    \tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:884)\r\n    \tat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:60)\r\n    \tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:343)\r\n    \tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:319)\r\n    \tat core.JPAConfig.localContainerEntityManagerFactoryBean(JPAConfig.java:94)\r\n    \tat core.JPAConfig$$EnhancerBySpringCGLIB$$c2bcf261.CGLIB$localContainerEntityManagerFactoryBean$1(&lt;generated&gt;)\r\n    \tat core.JPAConfig$$EnhancerBySpringCGLIB$$c2bcf261$$FastClassBySpringCGLIB$$901863a2.invoke(&lt;generated&gt;)\r\n    \tat org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228)\r\n    \tat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:355)\r\n    \tat core.JPAConfig$$EnhancerBySpringCGLIB$$c2bcf261.localContainerEntityManagerFactoryBean(&lt;generated&gt;)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:483)\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:162)\r\n    \t... 61 more\r\n    Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Unable to obtain JDBC Connection\r\n    \tat org.hibernate.tool.schema.internal.exec.AbstractJdbcConnectionContextImpl.getConnection(AbstractJdbcConnectionContextImpl.java:46)\r\n    \tat org.hibernate.tool.schema.internal.exec.ImprovedExtractionContextImpl.getJdbcConnection(ImprovedExtractionContextImpl.java:59)\r\n    \tat org.hibernate.tool.schema.internal.exec.ImprovedExtractionContextImpl.getJdbcDatabaseMetaData(ImprovedExtractionContextImpl.java:66)\r\n    \tat org.hibernate.tool.schema.extract.internal.InformationExtractorJdbcDatabaseMetaDataImpl.getTable(InformationExtractorJdbcDatabaseMetaDataImpl.java:271)\r\n    \tat org.hibernate.tool.schema.internal.exec.ImprovedDatabaseInformationImpl.getTableInformation(ImprovedDatabaseInformationImpl.java:109)\r\n    \tat org.hibernate.tool.schema.internal.SchemaMigratorImpl.performMigration(SchemaMigratorImpl.java:252)\r\n    \tat org.hibernate.tool.schema.internal.SchemaMigratorImpl.doMigration(SchemaMigratorImpl.java:137)\r\n    \tat org.hibernate.tool.schema.internal.SchemaMigratorImpl.doMigration(SchemaMigratorImpl.java:110)\r\n    \tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:176)\r\n    \tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:64)\r\n    \tat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:458)\r\n    \tat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:465)\r\n    \tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:881)\r\n    \t... 75 more\r\n    Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Access denied for user &#39;&#39;@&#39;localhost&#39; (using password: NO))\r\n    \tat org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549)\r\n    \tat org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388)\r\n    \tat org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)\r\n    \tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:180)\r\n    \tat org.hibernate.tool.schema.internal.exec.AbstractJdbcConnectionContextImpl.getConnection(AbstractJdbcConnectionContextImpl.java:43)\r\n    \t... 87 more\r\n    Caused by: java.sql.SQLException: Access denied for user &#39;&#39;@&#39;localhost&#39; (using password: NO)\r\n    \tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:695)\r\n    \tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:663)\r\n    \tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:653)\r\n    \tat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:108)\r\n    \tat com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:1683)\r\n    \tat com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:656)\r\n    \tat com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:349)\r\n    \tat com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:221)\r\n    \tat org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38)\r\n    \tat org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582)\r\n    \tat org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556)\r\n    \tat org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545)\r\n    \t... 92 more\r\n    \r\n    23-May-2016 13:05:15.379 INFO [RMI TCP Connection(3)-127.0.0.1] org.apache.catalina.core.ApplicationContext.log Closing Spring root WebApplicationContext\r\n    Error:(7, 24) java: package org.gjt.mm.mysql does not exist","title":"JPA Hibernate Persistence exception [PersistenceUnit: default] Unable to build Hibernate SessionFactory","body":"<p>I've been trying to sort out a connection to my DB with JPA Hibernate and mysql, but for some reason, no matter what i try, when launching the tomcat server i get the same exception:</p>\n\n<pre><code> org.springframework.beans.factory.BeanCreationException: Error creating     bean with name 'localContainerEntityManagerFactoryBean' defined in class path resource [core/JPAConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]: Factory method 'localContainerEntityManagerFactoryBean' threw exception; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory\n</code></pre>\n\n<p>This is my JPA config class:</p>\n\n<pre><code>@Configuration\n@EnableJpaRepositories(\"core.repository\")\n@EnableTransactionManagement\n@EnableCaching\npublic class JPAConfig {\n\n@Value(\"${db.jdbcURL}\")\nprivate String jdbcURL;\n\n@Value(\"${db.user}\")\nprivate String user;\n\n@Value(\"${db.password}\")\nprivate String password;\n\n@Value(\"${db.generateDDL}\")\nprivate Boolean generateDDL;\n\n@SuppressWarnings(\"Duplicates\")\n@Bean\npublic DataSource dataSource() {\n    BasicDataSource dataSource = new BasicDataSource();\n    dataSource.setDriverClassName(Driver.class.getName());\n    dataSource.setUrl(\"jdbc:mysql://localhost:3306/movierentaldb\");\n    dataSource.setUsername(System.getProperty(\"root\"));\n    dataSource.setPassword(System.getProperty(\"mdie1767\"));\n    dataSource.setInitialSize(2);\n    dataSource.setMaxActive(5);\n    return dataSource;\n}\n\n@Bean\npublic LocalContainerEntityManagerFactoryBean localContainerEntityManagerFactoryBean(){\n    HibernateJpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter();\n    vendorAdapter.setDatabase(Database.MYSQL);\n    vendorAdapter.setGenerateDdl(generateDDL);\n    vendorAdapter.setShowSql(true);\n\n    LocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();\n\n    factory.setJpaVendorAdapter(vendorAdapter);\n\n    factory.setPackagesToScan(\"core.model\");\n\n    factory.setDataSource(dataSource());\n\n    factory.afterPropertiesSet();\n    return factory;\n}\n\n@Bean\npublic EntityManagerFactory entityManagerFactory(){\n    return localContainerEntityManagerFactoryBean().getObject();\n}\n\n\n\n@Bean\npublic EntityManager entityManager(){\n    return entityManagerFactory().createEntityManager();\n}\n\n@Bean\nPlatformTransactionManager transactionManager(){\n    JpaTransactionManager manager = new JpaTransactionManager();\n    manager.setEntityManagerFactory(entityManagerFactory());\n    return manager;\n}\n\n@Bean\npublic HibernateExceptionTranslator hibernateExceptionTranslator(){\n    return  new HibernateExceptionTranslator();\n}\n\n@Bean\npublic CacheManager cacheManager(){\n    GuavaCacheManager guavaCacheManager = new GuavaCacheManager();\n    guavaCacheManager.setCacheBuilder(CacheBuilder.newBuilder().expireAfterAccess(2, TimeUnit.HOURS));\n    return guavaCacheManager;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>At this point i can't think of anything else to try..any help is much obliged</p>\n\n<p>Edit: This is the entire stacktrace</p>\n\n<pre><code>23-May-2016 13:05:10.267 INFO [RMI TCP Connection(3)-127.0.0.1] org.apache.catalina.core.ApplicationContext.log No Spring WebApplicationInitializer types detected on classpath\n23-May-2016 13:05:10.444 INFO [RMI TCP Connection(3)-127.0.0.1] org.apache.catalina.core.ApplicationContext.log Initializing Spring root WebApplicationContext\n23-May-2016 13:05:15.333 SEVERE [RMI TCP Connection(3)-127.0.0.1] org.apache.catalina.core.StandardContext.listenerStart Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener\n org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'localContainerEntityManagerFactoryBean' defined in class path resource [core/JPAConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]: Factory method 'localContainerEntityManagerFactoryBean' threw exception; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:599)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1123)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1018)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:510)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:482)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1054)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:829)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:538)\n    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:444)\n    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:326)\n    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:107)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4732)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5194)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:152)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:702)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:734)\n    at org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1702)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:300)\n    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)\n    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)\n    at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:482)\n    at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:431)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:300)\n    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)\n    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)\n    at javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1466)\n    at javax.management.remote.rmi.RMIConnectionImpl.access$300(RMIConnectionImpl.java:76)\n    at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1307)\n    at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1399)\n    at javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:828)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:323)\n    at sun.rmi.transport.Transport$1.run(Transport.java:200)\n    at sun.rmi.transport.Transport$1.run(Transport.java:197)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at sun.rmi.transport.Transport.serviceCall(Transport.java:196)\n    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:568)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:826)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$240(TCPTransport.java:683)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler$$Lambda$1/108265094.run(Unknown Source)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:682)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]: Factory method 'localContainerEntityManagerFactoryBean' threw exception; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:189)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:588)\n    ... 60 more\nCaused by: javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.persistenceException(EntityManagerFactoryBuilderImpl.java:954)\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:884)\n    at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:60)\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:343)\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:319)\n    at core.JPAConfig.localContainerEntityManagerFactoryBean(JPAConfig.java:94)\n    at core.JPAConfig$$EnhancerBySpringCGLIB$$c2bcf261.CGLIB$localContainerEntityManagerFactoryBean$1(&lt;generated&gt;)\n    at core.JPAConfig$$EnhancerBySpringCGLIB$$c2bcf261$$FastClassBySpringCGLIB$$901863a2.invoke(&lt;generated&gt;)\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228)\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:355)\n    at core.JPAConfig$$EnhancerBySpringCGLIB$$c2bcf261.localContainerEntityManagerFactoryBean(&lt;generated&gt;)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:162)\n    ... 61 more\nCaused by: org.hibernate.tool.schema.spi.SchemaManagementException: Unable to obtain JDBC Connection\n    at org.hibernate.tool.schema.internal.exec.AbstractJdbcConnectionContextImpl.getConnection(AbstractJdbcConnectionContextImpl.java:46)\n    at org.hibernate.tool.schema.internal.exec.ImprovedExtractionContextImpl.getJdbcConnection(ImprovedExtractionContextImpl.java:59)\n    at org.hibernate.tool.schema.internal.exec.ImprovedExtractionContextImpl.getJdbcDatabaseMetaData(ImprovedExtractionContextImpl.java:66)\n    at org.hibernate.tool.schema.extract.internal.InformationExtractorJdbcDatabaseMetaDataImpl.getTable(InformationExtractorJdbcDatabaseMetaDataImpl.java:271)\n    at org.hibernate.tool.schema.internal.exec.ImprovedDatabaseInformationImpl.getTableInformation(ImprovedDatabaseInformationImpl.java:109)\n    at org.hibernate.tool.schema.internal.SchemaMigratorImpl.performMigration(SchemaMigratorImpl.java:252)\n    at org.hibernate.tool.schema.internal.SchemaMigratorImpl.doMigration(SchemaMigratorImpl.java:137)\n    at org.hibernate.tool.schema.internal.SchemaMigratorImpl.doMigration(SchemaMigratorImpl.java:110)\n    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:176)\n    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:64)\n    at org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:458)\n    at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:465)\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:881)\n    ... 75 more\nCaused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Access denied for user ''@'localhost' (using password: NO))\n    at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549)\n    at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388)\n    at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)\n    at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:180)\n    at org.hibernate.tool.schema.internal.exec.AbstractJdbcConnectionContextImpl.getConnection(AbstractJdbcConnectionContextImpl.java:43)\n    ... 87 more\nCaused by: java.sql.SQLException: Access denied for user ''@'localhost' (using password: NO)\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:695)\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:663)\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:653)\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:108)\n    at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:1683)\n    at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:656)\n    at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:349)\n    at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:221)\n    at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38)\n    at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582)\n    at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556)\n    at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545)\n    ... 92 more\n\n23-May-2016 13:05:15.379 INFO [RMI TCP Connection(3)-127.0.0.1] org.apache.catalina.core.ApplicationContext.log Closing Spring root WebApplicationContext\nError:(7, 24) java: package org.gjt.mm.mysql does not exist\n</code></pre>\n"},{"tags":["java","android","android-alertdialog"],"comments":[{"owner":{"account_id":444416,"reputation":15934,"user_id":836214,"accept_rate":86,"display_name":"Krease"},"score":0,"creation_date":1460735970,"post_id":36651655,"comment_id":60896787,"body_markdown":"`return m_text`? You&#39;re assigning the value in the OK handler... Does that not work?","body":"<code>return m_text</code>? You&#39;re assigning the value in the OK handler... Does that not work?"},{"owner":{"account_id":6757170,"reputation":943,"user_id":5205132,"accept_rate":72,"display_name":"OmerN"},"score":0,"creation_date":1460736261,"post_id":36651655,"comment_id":60896956,"body_markdown":"I want the function to return m_text","body":"I want the function to return m_text"},{"owner":{"account_id":444416,"reputation":15934,"user_id":836214,"accept_rate":86,"display_name":"Krease"},"score":0,"creation_date":1460736555,"post_id":36651655,"comment_id":60897141,"body_markdown":"Ah, `builder.show` is not a blocking function. You&#39;ll either need to block your method until the value is ready or use a callback mechanism.","body":"Ah, <code>builder.show</code> is not a blocking function. You&#39;ll either need to block your method until the value is ready or use a callback mechanism."},{"owner":{"account_id":5353527,"reputation":9286,"user_id":4266957,"accept_rate":38,"display_name":"Ricardo"},"score":0,"creation_date":1460736597,"post_id":36651655,"comment_id":60897178,"body_markdown":"If the String m_text is defined globally why do you need it to return? Once the method is through and the user enters ok the value will be stored. just make it type void","body":"If the String m_text is defined globally why do you need it to return? Once the method is through and the user enters ok the value will be stored. just make it type void"},{"owner":{"account_id":945318,"reputation":8080,"user_id":972671,"accept_rate":46,"display_name":"Kingfisher Phuoc"},"score":0,"creation_date":1460771052,"post_id":36651655,"comment_id":60911281,"body_markdown":"No, you can not. If you do that, it will block your UI thread. you should try to make it asynchronous (as using listener, callback...).","body":"No, you can not. If you do that, it will block your UI thread. you should try to make it asynchronous (as using listener, callback...)."}],"answers":[{"tags":[],"owner":{"account_id":7862108,"reputation":323,"user_id":6204582,"display_name":"Daniel Griffin"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1460735859,"creation_date":1460735859,"answer_id":36651793,"question_id":36651655,"body_markdown":"Create another method in the same class that accepts a string value, then call that function providing the value of `input.getText().toString()` from your `setPositiveButton` onclick event","title":"Returning A Value From AlertDialog","body":"<p>Create another method in the same class that accepts a string value, then call that function providing the value of <code>input.getText().toString()</code> from your <code>setPositiveButton</code> onclick event</p>\n"},{"tags":[],"owner":{"account_id":7502852,"reputation":668,"user_id":5700519,"display_name":"Expired Data"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1460735955,"creation_date":1460735955,"answer_id":36651825,"question_id":36651655,"body_markdown":"This looks to me like you have stored the value of the inputted text in the m_Text field. You can either just return that field or have a variable within the function in which you store the value to be returned. \r\n\r\nWhere you have: \r\n\r\n    //Return string \r\n\r\nsimply replacing with:\r\n\r\n    return m_Text; \r\n\r\nshould do the job. ","title":"Returning A Value From AlertDialog","body":"<p>This looks to me like you have stored the value of the inputted text in the m_Text field. You can either just return that field or have a variable within the function in which you store the value to be returned. </p>\n\n<p>Where you have: </p>\n\n<pre><code>//Return string \n</code></pre>\n\n<p>simply replacing with:</p>\n\n<pre><code>return m_Text; \n</code></pre>\n\n<p>should do the job. </p>\n"},{"tags":[],"owner":{"account_id":4286100,"reputation":4815,"user_id":3503855,"accept_rate":100,"display_name":"Anis LOUNIS aka AnixPasBesoin"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1689806612,"creation_date":1460737383,"answer_id":36652295,"question_id":36651655,"body_markdown":"The call `builder.show()` which opens your `AlertDialog` is not a blocking call. In other words, the subsequent instructions will be executed without waiting for the `AlertDialog` to finish (return). You should interact with it by using some *callback*. For instance, your `OnClickListeners` are an implementation of such a pattern.\r\n\r\n## A simple callback pattern\r\n\r\nOne clean way to achieve what you want is to create a *Functional Interface* which is an interface having only one method. You would use it for handling your callbacks.\r\n\r\n# Example\r\n\r\n    interface OnOK{\r\n        void onTextEntered(String text);\r\n    }\r\n\r\nAnd then you would alter your method to be like:\r\n\r\n    private void openDialog(String title, final OnOK onOK) {\r\n        AlertDialog.Builder builder = new AlertDialog.Builder(view.getContext());\r\n        builder.setTitle(title);\r\n\r\n        final EditText input = new EditText(view.getContext());\r\n        input.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_VARIATION_NORMAL);\r\n        builder.setView(input);\r\n\r\n        builder.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\r\n           @Override\r\n           public void onClick(DialogInterface dialog, int which) {\r\n              //Oi, look at this line!\r\n              onOK.onTextEntered(input.getText().toString());\r\n           }\r\n        });\r\n\r\n        builder.show();\r\n    } \r\n\r\nYou can use it like this:\r\n\r\n    openDialog(&quot;Title&quot;, new OnOK() {\r\n       @Override\r\n       onTextEntered(String text) {\r\n          Log.i(&quot;LOG&quot;, text);\r\n       } \r\n    });","title":"Returning A Value From AlertDialog","body":"<p>The call <code>builder.show()</code> which opens your <code>AlertDialog</code> is not a blocking call. In other words, the subsequent instructions will be executed without waiting for the <code>AlertDialog</code> to finish (return). You should interact with it by using some <em>callback</em>. For instance, your <code>OnClickListeners</code> are an implementation of such a pattern.</p>\n<h2>A simple callback pattern</h2>\n<p>One clean way to achieve what you want is to create a <em>Functional Interface</em> which is an interface having only one method. You would use it for handling your callbacks.</p>\n<h1>Example</h1>\n<pre><code>interface OnOK{\n    void onTextEntered(String text);\n}\n</code></pre>\n<p>And then you would alter your method to be like:</p>\n<pre><code>private void openDialog(String title, final OnOK onOK) {\n    AlertDialog.Builder builder = new AlertDialog.Builder(view.getContext());\n    builder.setTitle(title);\n\n    final EditText input = new EditText(view.getContext());\n    input.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_VARIATION_NORMAL);\n    builder.setView(input);\n\n    builder.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\n       @Override\n       public void onClick(DialogInterface dialog, int which) {\n          //Oi, look at this line!\n          onOK.onTextEntered(input.getText().toString());\n       }\n    });\n\n    builder.show();\n} \n</code></pre>\n<p>You can use it like this:</p>\n<pre><code>openDialog(&quot;Title&quot;, new OnOK() {\n   @Override\n   onTextEntered(String text) {\n      Log.i(&quot;LOG&quot;, text);\n   } \n});\n</code></pre>\n"}],"owner":{"account_id":6757170,"reputation":943,"user_id":5205132,"accept_rate":72,"display_name":"OmerN"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4395,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":36652295,"answer_count":3,"score":6,"last_activity_date":1689806612,"creation_date":1460735510,"question_id":36651655,"body_markdown":"I want to build a function that creates an AlertDialog and returns the string that the user entered, this the function I have for creating the dialog, how do I return the value?\r\n\r\n    String m_Text = &quot;&quot;;\r\n    private String openDialog(String title) {\r\n        AlertDialog.Builder builder = new AlertDialog.Builder(view.getContext());\r\n        builder.setTitle(title);\r\n\r\n        final EditText input = new EditText(view.getContext());\r\n        input.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_VARIATION_NORMAL);\r\n        builder.setView(input);\r\n\r\n        builder.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n                m_Text = input.getText().toString();\r\n            }\r\n        });\r\n        builder.setNegativeButton(&quot;Cancel&quot;, new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n                dialog.cancel();\r\n            }\r\n        });\r\n\r\n        builder.show();\r\n\r\n    // return string\r\n    } \r\n","title":"Returning A Value From AlertDialog","body":"<p>I want to build a function that creates an AlertDialog and returns the string that the user entered, this the function I have for creating the dialog, how do I return the value?</p>\n\n<pre><code>String m_Text = \"\";\nprivate String openDialog(String title) {\n    AlertDialog.Builder builder = new AlertDialog.Builder(view.getContext());\n    builder.setTitle(title);\n\n    final EditText input = new EditText(view.getContext());\n    input.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_VARIATION_NORMAL);\n    builder.setView(input);\n\n    builder.setPositiveButton(\"OK\", new DialogInterface.OnClickListener() {\n        @Override\n        public void onClick(DialogInterface dialog, int which) {\n            m_Text = input.getText().toString();\n        }\n    });\n    builder.setNegativeButton(\"Cancel\", new DialogInterface.OnClickListener() {\n        @Override\n        public void onClick(DialogInterface dialog, int which) {\n            dialog.cancel();\n        }\n    });\n\n    builder.show();\n\n// return string\n} \n</code></pre>\n"},{"tags":["java","annotations","bean-validation"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1689820081,"post_id":76725618,"comment_id":135268581,"body_markdown":"Seems to make sense to me. The `@MyString` annotation has its own size constraints, separate from the `@Size` annotation (even if it&#39;s implemented by meta-annotating it with `@Size`), and the `@MyString` constraints are being checked first. That&#39;s how I interpret the behavior, at least. But why are you adding that other `@Size` annotation? Shouldn&#39;t you just do `@MyString(min = 1, max = 3)`?","body":"Seems to make sense to me. The <code>@MyString</code> annotation has its own size constraints, separate from the <code>@Size</code> annotation (even if it&#39;s implemented by meta-annotating it with <code>@Size</code>), and the <code>@MyString</code> constraints are being checked first. That&#39;s how I interpret the behavior, at least. But why are you adding that other <code>@Size</code> annotation? Shouldn&#39;t you just do <code>@MyString(min = 1, max = 3)</code>?"}],"owner":{"account_id":292835,"reputation":6407,"user_id":595833,"accept_rate":94,"display_name":"bobbyrne01"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689806280,"creation_date":1689806280,"question_id":76725618,"body_markdown":"I have the following Java annotation:\r\n\r\n```java\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Target({ElementType.FIELD, ElementType.ANNOTATION_TYPE})\r\n@Size\r\n@Constraint(validatedBy = {})\r\npublic @interface MyString {\r\n\r\n    @OverridesAttribute(constraint = Size.class, name = &quot;min&quot;)\r\n    int min() default 4;\r\n\r\n    @OverridesAttribute(constraint = Size.class, name = &quot;max&quot;)\r\n    int max() default Integer.MAX_VALUE;\r\n\r\n    Class&lt;?&gt;[] groups() default {};\r\n\r\n    Class&lt;? extends Payload&gt;[] payload() default {};\r\n\r\n    String message() default &quot;{org.example.annotation.mystring}&quot;;\r\n}\r\n```\r\n\r\nWhich is applied to a field in a POJO:\r\n\r\n```java\r\nimport jakarta.validation.constraints.Size;\r\nimport org.example.annotation.MyString;\r\n\r\npublic class PersonMyString {\r\n\r\n    @MyString\r\n    public String firstName;\r\n}\r\n```\r\n\r\nAnd the `PersonMyString` class is initialised and tested using:\r\n\r\n```java\r\n@Test\r\npublic void printViolatedConstraints() {\r\n    PersonCitadelString person = new PersonCitadelString();\r\n    person.firstName = &quot;bob&quot;;\r\n\r\n    Validator validator =\r\n            Validation.byDefaultProvider()\r\n                    .configure()\r\n                    .messageInterpolator(new ParameterMessageInterpolator())\r\n                    .buildValidatorFactory()\r\n                    .getValidator();\r\n\r\n    Set&lt;ConstraintViolation&lt;PersonCitadelString&gt;&gt; violations = validator.validate(person);\r\n\r\n    System.err.println(&quot;--&quot;);\r\n    for (ConstraintViolation&lt;PersonCitadelString&gt; violation : violations) {\r\n        System.err.println(violation.getPropertyPath() + &quot;: &quot; + violation.getMessage());\r\n    }\r\n}\r\n```\r\n\r\nA violation message is printed:\r\n\r\n```\r\nfirstName: size must be between 4 and 2147483647\r\n```\r\n\r\nWhy is it that when I update my POJO to be:\r\n\r\n```java\r\nimport jakarta.validation.constraints.Size;\r\nimport org.example.annotation.MyString;\r\n\r\npublic class PersonMyString {\r\n\r\n    @MyString\r\n    @Size(min = 1, max = 3) // &lt;-- New line\r\n    public String firstName;\r\n}\r\n```\r\n\r\nThe additional line is ignored and I end up with the same violation printed:\r\n\r\n```\r\nfirstName: size must be between 4 and 2147483647\r\n```\r\n\r\nDoes the `@Size(min = 1, max = 3)` not override what is set on nested annotations?","title":"Why does specifying @Size(min = 1, max = 3) directly on field not override any @Size constraints declared by other annotations on that field?","body":"<p>I have the following Java annotation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Retention(RetentionPolicy.RUNTIME)\n@Target({ElementType.FIELD, ElementType.ANNOTATION_TYPE})\n@Size\n@Constraint(validatedBy = {})\npublic @interface MyString {\n\n    @OverridesAttribute(constraint = Size.class, name = &quot;min&quot;)\n    int min() default 4;\n\n    @OverridesAttribute(constraint = Size.class, name = &quot;max&quot;)\n    int max() default Integer.MAX_VALUE;\n\n    Class&lt;?&gt;[] groups() default {};\n\n    Class&lt;? extends Payload&gt;[] payload() default {};\n\n    String message() default &quot;{org.example.annotation.mystring}&quot;;\n}\n</code></pre>\n<p>Which is applied to a field in a POJO:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import jakarta.validation.constraints.Size;\nimport org.example.annotation.MyString;\n\npublic class PersonMyString {\n\n    @MyString\n    public String firstName;\n}\n</code></pre>\n<p>And the <code>PersonMyString</code> class is initialised and tested using:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\npublic void printViolatedConstraints() {\n    PersonCitadelString person = new PersonCitadelString();\n    person.firstName = &quot;bob&quot;;\n\n    Validator validator =\n            Validation.byDefaultProvider()\n                    .configure()\n                    .messageInterpolator(new ParameterMessageInterpolator())\n                    .buildValidatorFactory()\n                    .getValidator();\n\n    Set&lt;ConstraintViolation&lt;PersonCitadelString&gt;&gt; violations = validator.validate(person);\n\n    System.err.println(&quot;--&quot;);\n    for (ConstraintViolation&lt;PersonCitadelString&gt; violation : violations) {\n        System.err.println(violation.getPropertyPath() + &quot;: &quot; + violation.getMessage());\n    }\n}\n</code></pre>\n<p>A violation message is printed:</p>\n<pre><code>firstName: size must be between 4 and 2147483647\n</code></pre>\n<p>Why is it that when I update my POJO to be:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import jakarta.validation.constraints.Size;\nimport org.example.annotation.MyString;\n\npublic class PersonMyString {\n\n    @MyString\n    @Size(min = 1, max = 3) // &lt;-- New line\n    public String firstName;\n}\n</code></pre>\n<p>The additional line is ignored and I end up with the same violation printed:</p>\n<pre><code>firstName: size must be between 4 and 2147483647\n</code></pre>\n<p>Does the <code>@Size(min = 1, max = 3)</code> not override what is set on nested annotations?</p>\n"},{"tags":["java","spring-boot","opencsv"],"comments":[{"owner":{"account_id":149142,"reputation":1772,"user_id":361414,"display_name":"Milanka"},"score":0,"creation_date":1684917844,"post_id":76142662,"comment_id":134586118,"body_markdown":"What version of Spring Boot are you using? If newer than 2.7.6, does downgrading help? Might be a bug in embedded Tomcat, which was updated in Spring Boot 2.7.7: https://github.com/spring-projects/spring-boot/releases/tag/v2.7.7","body":"What version of Spring Boot are you using? If newer than 2.7.6, does downgrading help? Might be a bug in embedded Tomcat, which was updated in Spring Boot 2.7.7: <a href=\"https://github.com/spring-projects/spring-boot/releases/tag/v2.7.7\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/releases/tag/v2.7.7</a>"}],"answers":[{"tags":[],"owner":{"account_id":4019724,"reputation":171,"user_id":3310526,"display_name":"CodeYourBrain"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1686135245,"creation_date":1686135245,"answer_id":76422550,"question_id":76142662,"body_markdown":"Use try with resource, it should fix your issue. \r\n\r\nI encountered similar issue today and using try with resource fixed the issue!\r\n\r\nFor your piece of code, it will look like -  \r\n\r\n&gt; try (Reader reader = new InputStreamReader(file.getInputStream())) {\r\n&gt; ... }\r\n\r\n\r\nHope this helps.","title":"CSV uploading as Multipart file throws &quot;Failed to perform cleanup of multipart items error in Spring API","body":"<p>Use try with resource, it should fix your issue.</p>\n<p>I encountered similar issue today and using try with resource fixed the issue!</p>\n<p>For your piece of code, it will look like -</p>\n<blockquote>\n<p>try (Reader reader = new InputStreamReader(file.getInputStream())) {\n... }</p>\n</blockquote>\n<p>Hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":17787865,"reputation":29,"user_id":12917561,"display_name":"Akshay bhavsar"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1689086406,"creation_date":1689086406,"answer_id":76663134,"question_id":76142662,"body_markdown":"use try and catch block for reference check following code\r\n @PostMapping(&quot;/post/image/upload/{postId}&quot;)\r\n    public ResponseEntity&lt;PostDto&gt; uploadPostImage(@RequestParam(&quot;image&quot;) MultipartFile image,\r\n            @PathVariable Integer postId) {\r\n        \r\n       PostDto postDto=null;\r\n        try {\r\n             postDto= this.postService.getPostById(postId);\r\n           String  fileName= this.fileService.uploadImage(path, image);\r\n             postDto.setImageName(fileName);\r\n            \r\n           \r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n          \r\n        }\r\n       \r\n        PostDto updatedPost= this.postService.updatePost(postDto, postId);\r\n      return new ResponseEntity&lt;PostDto&gt;(updatedPost, HttpStatus.OK);\r\n       \r\n    }\r\nhowever error in terminal is visible but image is uploaded in db \r\n.\r\n.\r\n.\r\n.\r\n.\r\n.\r\nCaused by: java.io.IOException: Cannot delete C:\\Users\\Apunich Bhagwan Hai\\AppData\\Local\\Temp\\tomcat.8080.18372763972742625326\\work\\Tomcat\\localhost\\ROOT\\upload_2b881de4_e289_4604_bc97_7063aadae178_00000009.tmp\r\n        ... 14 common frames omitted","title":"CSV uploading as Multipart file throws &quot;Failed to perform cleanup of multipart items error in Spring API","body":"<p>use try and catch block for reference check following code\n@PostMapping(&quot;/post/image/upload/{postId}&quot;)\npublic ResponseEntity uploadPostImage(@RequestParam(&quot;image&quot;) MultipartFile image,\n@PathVariable Integer postId) {</p>\n<pre><code>   PostDto postDto=null;\n    try {\n         postDto= this.postService.getPostById(postId);\n       String  fileName= this.fileService.uploadImage(path, image);\n         postDto.setImageName(fileName);\n        \n       \n    } catch (Exception e) {\n        e.printStackTrace();\n      \n    }\n   \n    PostDto updatedPost= this.postService.updatePost(postDto, postId);\n  return new ResponseEntity&lt;PostDto&gt;(updatedPost, HttpStatus.OK);\n   \n}\n</code></pre>\n<p>however error in terminal is visible but image is uploaded in db\n.\n.\n.\n.\n.\n.\nCaused by: java.io.IOException: Cannot delete C:\\Users\\Apunich Bhagwan Hai\\AppData\\Local\\Temp\\tomcat.8080.18372763972742625326\\work\\Tomcat\\localhost\\ROOT\\upload_2b881de4_e289_4604_bc97_7063aadae178_00000009.tmp\n... 14 common frames omitted</p>\n"},{"tags":[],"owner":{"account_id":29052583,"reputation":1,"user_id":22255055,"display_name":"Buezman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689806130,"creation_date":1689806130,"answer_id":76725603,"question_id":76142662,"body_markdown":"Convert multipart to File first.\r\n\r\n    private File convertMultipartToFile(MultipartFile imageFile) throws IOException {\r\n        String file = imageFile.getOriginalFilename();\r\n        log.info(&quot;File name ==&gt; {}&quot;, file);\r\n        assert file != null;\r\n        File convertFile = new File(file);\r\n        FileOutputStream fileOutputStream = new FileOutputStream(convertFile);\r\n        fileOutputStream.write(imageFile.getBytes());\r\n        fileOutputStream.close();\r\n        return convertFile;\r\n    }\r\n\r\nthen call the `convertFile.delete()` method after your upload.","title":"CSV uploading as Multipart file throws &quot;Failed to perform cleanup of multipart items error in Spring API","body":"<p>Convert multipart to File first.</p>\n<pre><code>private File convertMultipartToFile(MultipartFile imageFile) throws IOException {\n    String file = imageFile.getOriginalFilename();\n    log.info(&quot;File name ==&gt; {}&quot;, file);\n    assert file != null;\n    File convertFile = new File(file);\n    FileOutputStream fileOutputStream = new FileOutputStream(convertFile);\n    fileOutputStream.write(imageFile.getBytes());\n    fileOutputStream.close();\n    return convertFile;\n}\n</code></pre>\n<p>then call the <code>convertFile.delete()</code> method after your upload.</p>\n"}],"owner":{"account_id":11609571,"reputation":37,"user_id":8504176,"display_name":"Nayan J"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2444,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76422550,"answer_count":3,"score":1,"last_activity_date":1689806130,"creation_date":1682876376,"question_id":76142662,"body_markdown":"I am trying to upload a CSV file to do some operation. I am using OpenCSV 5.7.1 version to handle CSV file.\r\nAs of now, I was just simply exploring the functionalities, i.e one API to upload file and then reading the file if it is able to fetch the data or not.\r\n\r\nController Class:\r\n```java\r\n@PostMapping(value = &quot;/upload&quot;)\r\npublic ResponseEntity&lt;MyAppResponse&gt; processCsvUpload(@RequestParam(&quot;file&quot;) MultipartFile file, @RequestParam(&quot;request&quot;) String uploadRequest) {\r\n  //call service method\r\n}\r\n```\r\n\r\nService Class:\r\n```java\r\n        Reader reader = null;\r\n\t\ttry {\r\n\t\t\treader = new InputStreamReader(file.getInputStream());\r\n\t\t} catch (IOException e) {\r\n\t\t\tlogger.error(&quot;&quot;);\r\n\t\t\te.printStackTrace();\r\n\t\t\tthrow new MvAppException();\r\n\t\t}\r\n\t\tCSVReader csvReader = new CSVReaderBuilder(reader).withSkipLines(1).build();\r\n\t\ttry {\r\n\t\t\tList&lt;String[]&gt; rows = csvReader.readAll();\r\n\t\t\tfor (String[] arr : rows) {\r\n\t\t\t\tfor (String temp : arr)\r\n\t\t\t\t\tSystem.out.print(temp + &quot;, &quot;);\r\n\t\t\t\tSystem.out.println(&quot;&quot;);\r\n\t\t\t}\r\n\t\t} catch (IOException | CsvException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t\tthrow new MvAppException();\r\n\t\t}\r\n```\r\n\r\nHowever after sending response, it is posting these logs:\r\n\r\n```java\r\n2023-04-30 22:55:34.019  WARN 20072 --- [nio-8080-exec-2] s.w.m.s.StandardServletMultipartResolver : Failed to perform cleanup of multipart items\r\n\r\njava.io.UncheckedIOException: Cannot delete C:\\Users\\Nayan-J\\AppData\\Local\\Temp\\tomcat.8080.193216173997807150\\work\\Tomcat\\localhost\\ROOT\\upload_2c1409b9_6b24_4c83_99e0_32248a854b2c_00000017.tmp\r\n\tat org.apache.tomcat.util.http.fileupload.disk.DiskFileItem.delete(DiskFileItem.java:431) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.ApplicationPart.delete(ApplicationPart.java:54) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.springframework.web.multipart.support.StandardServletMultipartResolver.cleanupMultipart(StandardServletMultipartResolver.java:134) ~[spring-web-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.servlet.DispatcherServlet.cleanupMultipart(DispatcherServlet.java:1250) [spring-webmvc-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1107) [spring-webmvc-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:964) [spring-webmvc-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) [spring-webmvc-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) [spring-webmvc-5.3.25.jar:5.3.25]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:696) [tomcat-embed-core-9.0.71.jar:4.0.FR]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) [spring-webmvc-5.3.25.jar:5.3.25]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:779) [tomcat-embed-core-9.0.71.jar:4.0.FR]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) [tomcat-embed-websocket-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.25.jar:5.3.25]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat com.nayanj.mamavidyalaya.fitlerninterceptors.RequestLoggerInterceptor.doFilterInternal(RequestLoggerInterceptor.java:58) [classes/:na]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.25.jar:5.3.25]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat com.nayanj.mamavidyalaya.fitlerninterceptors.SecurityFilter.doFilterInternal(SecurityFilter.java:75) [classes/:na]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.25.jar:5.3.25]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.25.jar:5.3.25]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.25.jar:5.3.25]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.25.jar:5.3.25]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186) [spring-security-web-5.7.7.jar:5.7.7]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) [spring-web-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) [spring-web-5.3.25.jar:5.3.25]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) [spring-web-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.25.jar:5.3.25]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) [spring-web-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.25.jar:5.3.25]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) [spring-web-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.25.jar:5.3.25]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:891) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1784) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat java.lang.Thread.run(Thread.java:748) [na:1.8.0_221]\r\nCaused by: java.io.IOException: Cannot delete C:\\Users\\Nayan-J\\AppData\\Local\\Temp\\tomcat.8080.193216173997807150\\work\\Tomcat\\localhost\\ROOT\\upload_2c1409b9_6b24_4c83_99e0_32248a854b2c_00000017.tmp\r\n\t... 91 common frames omitted\r\n```\r\n\r\nThere is no good resource I could find to resolve this issue. To add, I am using embedded tomcat as application server. Please help.","title":"CSV uploading as Multipart file throws &quot;Failed to perform cleanup of multipart items error in Spring API","body":"<p>I am trying to upload a CSV file to do some operation. I am using OpenCSV 5.7.1 version to handle CSV file.\nAs of now, I was just simply exploring the functionalities, i.e one API to upload file and then reading the file if it is able to fetch the data or not.</p>\n<p>Controller Class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PostMapping(value = &quot;/upload&quot;)\npublic ResponseEntity&lt;MyAppResponse&gt; processCsvUpload(@RequestParam(&quot;file&quot;) MultipartFile file, @RequestParam(&quot;request&quot;) String uploadRequest) {\n  //call service method\n}\n</code></pre>\n<p>Service Class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        Reader reader = null;\n        try {\n            reader = new InputStreamReader(file.getInputStream());\n        } catch (IOException e) {\n            logger.error(&quot;&quot;);\n            e.printStackTrace();\n            throw new MvAppException();\n        }\n        CSVReader csvReader = new CSVReaderBuilder(reader).withSkipLines(1).build();\n        try {\n            List&lt;String[]&gt; rows = csvReader.readAll();\n            for (String[] arr : rows) {\n                for (String temp : arr)\n                    System.out.print(temp + &quot;, &quot;);\n                System.out.println(&quot;&quot;);\n            }\n        } catch (IOException | CsvException e) {\n            e.printStackTrace();\n            throw new MvAppException();\n        }\n</code></pre>\n<p>However after sending response, it is posting these logs:</p>\n<pre class=\"lang-java prettyprint-override\"><code>2023-04-30 22:55:34.019  WARN 20072 --- [nio-8080-exec-2] s.w.m.s.StandardServletMultipartResolver : Failed to perform cleanup of multipart items\n\njava.io.UncheckedIOException: Cannot delete C:\\Users\\Nayan-J\\AppData\\Local\\Temp\\tomcat.8080.193216173997807150\\work\\Tomcat\\localhost\\ROOT\\upload_2c1409b9_6b24_4c83_99e0_32248a854b2c_00000017.tmp\n    at org.apache.tomcat.util.http.fileupload.disk.DiskFileItem.delete(DiskFileItem.java:431) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.ApplicationPart.delete(ApplicationPart.java:54) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.springframework.web.multipart.support.StandardServletMultipartResolver.cleanupMultipart(StandardServletMultipartResolver.java:134) ~[spring-web-5.3.25.jar:5.3.25]\n    at org.springframework.web.servlet.DispatcherServlet.cleanupMultipart(DispatcherServlet.java:1250) [spring-webmvc-5.3.25.jar:5.3.25]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1107) [spring-webmvc-5.3.25.jar:5.3.25]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:964) [spring-webmvc-5.3.25.jar:5.3.25]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) [spring-webmvc-5.3.25.jar:5.3.25]\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) [spring-webmvc-5.3.25.jar:5.3.25]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:696) [tomcat-embed-core-9.0.71.jar:4.0.FR]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) [spring-webmvc-5.3.25.jar:5.3.25]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:779) [tomcat-embed-core-9.0.71.jar:4.0.FR]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) [tomcat-embed-websocket-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.25.jar:5.3.25]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at com.nayanj.mamavidyalaya.fitlerninterceptors.RequestLoggerInterceptor.doFilterInternal(RequestLoggerInterceptor.java:58) [classes/:na]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.25.jar:5.3.25]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\n    at com.nayanj.mamavidyalaya.fitlerninterceptors.SecurityFilter.doFilterInternal(SecurityFilter.java:75) [classes/:na]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.25.jar:5.3.25]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.25.jar:5.3.25]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.25.jar:5.3.25]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.25.jar:5.3.25]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186) [spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) [spring-web-5.3.25.jar:5.3.25]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) [spring-web-5.3.25.jar:5.3.25]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) [spring-web-5.3.25.jar:5.3.25]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.25.jar:5.3.25]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) [spring-web-5.3.25.jar:5.3.25]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.25.jar:5.3.25]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) [spring-web-5.3.25.jar:5.3.25]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.25.jar:5.3.25]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:891) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1784) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at java.lang.Thread.run(Thread.java:748) [na:1.8.0_221]\nCaused by: java.io.IOException: Cannot delete C:\\Users\\Nayan-J\\AppData\\Local\\Temp\\tomcat.8080.193216173997807150\\work\\Tomcat\\localhost\\ROOT\\upload_2c1409b9_6b24_4c83_99e0_32248a854b2c_00000017.tmp\n    ... 91 common frames omitted\n</code></pre>\n<p>There is no good resource I could find to resolve this issue. To add, I am using embedded tomcat as application server. Please help.</p>\n"},{"tags":["java","clojure","data-oriented-design","java-sealed-type","clojure-protocol"],"answers":[{"tags":[],"owner":{"account_id":13964622,"reputation":49,"user_id":10084790,"display_name":"Shmuel Greenberger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689805307,"creation_date":1689805307,"answer_id":76725536,"question_id":76140822,"body_markdown":"After a little research, it seems that this is exactly what protocols are *NOT* all about. Protocols are there to solve the expression problem, and therefore are supposed to be totally unlimited.\r\n\r\nHowever, Clojure is TC, so it is possible with a map and a private protocol to define a set of functions that produce records and types that utilize the protocol and only the set of types provided.\r\n\r\nIf code is reqired for clarification, request in a comment or feel free to write your own implementation.\r\n\r\nConclusion: sealing protocols as is done in Java, opposes the design intent and is not done. Yet it is perfectly possible to lexically scope a protocol and expose a set of types or records that implement the protocol.","title":"Sealed Clojure protocols","body":"<p>After a little research, it seems that this is exactly what protocols are <em>NOT</em> all about. Protocols are there to solve the expression problem, and therefore are supposed to be totally unlimited.</p>\n<p>However, Clojure is TC, so it is possible with a map and a private protocol to define a set of functions that produce records and types that utilize the protocol and only the set of types provided.</p>\n<p>If code is reqired for clarification, request in a comment or feel free to write your own implementation.</p>\n<p>Conclusion: sealing protocols as is done in Java, opposes the design intent and is not done. Yet it is perfectly possible to lexically scope a protocol and expose a set of types or records that implement the protocol.</p>\n"}],"owner":{"account_id":13964622,"reputation":49,"user_id":10084790,"display_name":"Shmuel Greenberger"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76725536,"answer_count":1,"score":0,"last_activity_date":1689805307,"creation_date":1682851508,"question_id":76140822,"body_markdown":"I&#39;d like to know if Clojure utilizes the sealed interface/ implementing record pattern in Java, and if so how to define it.\r\n\r\nI was thinking along the lines of something like:\r\n\r\n```clojure\r\n(defprotocol \r\n        ;; protocol definition here \r\n        :allows\r\n        ;; vector of allowed types) \r\n```\r\nThen the REPL should warn you that certain types must be defined.\r\n\r\nThe java way of doing it would be to define an interface that allows only certain classes, and that way the compiler forces those classes to implement the interface and flatly disallows any other class to implement the interface.\r\n\r\nI&#39;d think that this is probably something that is much more plausible in a static language, whereas in a dynamic language this can cause interesting complications.\r\n\r\n**EDIT**\r\n\r\nIt would be clearer seen in the context of https://www.infoq.com/articles/data-oriented-programming-java/ to understand what I&#39;m looking for. \r\n\r\nBasically I think my question could be better phrased as: &quot;How to do controlled ad-hoc polymorphism in Clojure&quot;, in the sense of controlled meaning only specific types may extend the protocol. This would then potentially carry the advantages indicated in the link.\r\n\r\nYet still it may be that this is a fundamental difference between dynamic and static programming.\r\nSo please take the time to confirm or correct my presumptions, and forgive me if I&#39;m asking an irrelevant question.","title":"Sealed Clojure protocols","body":"<p>I'd like to know if Clojure utilizes the sealed interface/ implementing record pattern in Java, and if so how to define it.</p>\n<p>I was thinking along the lines of something like:</p>\n<pre class=\"lang-clj prettyprint-override\"><code>(defprotocol \n        ;; protocol definition here \n        :allows\n        ;; vector of allowed types) \n</code></pre>\n<p>Then the REPL should warn you that certain types must be defined.</p>\n<p>The java way of doing it would be to define an interface that allows only certain classes, and that way the compiler forces those classes to implement the interface and flatly disallows any other class to implement the interface.</p>\n<p>I'd think that this is probably something that is much more plausible in a static language, whereas in a dynamic language this can cause interesting complications.</p>\n<p><strong>EDIT</strong></p>\n<p>It would be clearer seen in the context of <a href=\"https://www.infoq.com/articles/data-oriented-programming-java/\" rel=\"nofollow noreferrer\">https://www.infoq.com/articles/data-oriented-programming-java/</a> to understand what I'm looking for.</p>\n<p>Basically I think my question could be better phrased as: &quot;How to do controlled ad-hoc polymorphism in Clojure&quot;, in the sense of controlled meaning only specific types may extend the protocol. This would then potentially carry the advantages indicated in the link.</p>\n<p>Yet still it may be that this is a fundamental difference between dynamic and static programming.\nSo please take the time to confirm or correct my presumptions, and forgive me if I'm asking an irrelevant question.</p>\n"},{"tags":["java","apache-kafka","spring-kafka"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689804623,"creation_date":1689804623,"answer_id":76725499,"question_id":76719210,"body_markdown":"&gt; Did I do the right?\r\n\r\nYou&#39;re needlessly duplicating information in the topic, but sure. You can check with `kafka-console-consumer --partition` CLI, for example.\r\n\r\n&gt; receive the same message in the consumers without specifying the partition number\r\n\r\nYou cannot. For instance, if you set unique groupId, then you would get events from all partitions. Or, if you remove `parititonOffsets` and use parameter of `Message` or `ConsumerRecord` rather than String, then you still need to manually filter on `message.partition() == X`","title":"Send message to kafka to multiple partitions and listening multiple same consumer","body":"<blockquote>\n<p>Did I do the right?</p>\n</blockquote>\n<p>You're needlessly duplicating information in the topic, but sure. You can check with <code>kafka-console-consumer --partition</code> CLI, for example.</p>\n<blockquote>\n<p>receive the same message in the consumers without specifying the partition number</p>\n</blockquote>\n<p>You cannot. For instance, if you set unique groupId, then you would get events from all partitions. Or, if you remove <code>parititonOffsets</code> and use parameter of <code>Message</code> or <code>ConsumerRecord</code> rather than String, then you still need to manually filter on <code>message.partition() == X</code></p>\n"}],"owner":{"account_id":3958446,"reputation":13,"user_id":3266217,"display_name":"stim644"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":161,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689804742,"creation_date":1689754361,"question_id":76719210,"body_markdown":"I want to understand how to write from a producer to multiple partitions? Did I do the right? Is maybe have easy decision?\r\nI have 2 partiotions in my topic.\r\nAnd i want read same message type equals consumers\r\n\r\nHow can I receive the same message in the consumers without specifying the partition number in the producer and the consumer?\r\n\r\nThanks.\r\nProducer\r\n\r\n    @Service\r\n    public class Producer {\r\n       private static final Logger LOG = LoggerFactory.getLogger(Producer.class);\r\n\r\n       @Autowired\r\n       private KafkaTemplate&lt;String, String&gt; kafkaTemplate;\r\n\r\n       @Value(&quot;${app.topic.foo}&quot;)\r\n       private String topic;\r\n\r\n       public void send(String message){\r\n          LOG.info(&quot;sending message=&#39;{}&#39; to topic=&#39;{}&#39;&quot;, message, topic);\r\n          kafkaTemplate.send(topic,0, &quot;1&quot;,  message);\r\n          kafkaTemplate.send(topic, 1, &quot;1&quot;, message);\r\n       }\r\n    }\r\n\r\nConsumer 1\r\n\r\n    @Service\r\n    public class Consumer {\r\n\r\n      private static final Logger LOG = LoggerFactory.getLogger(Consumer.class);\r\n\r\n      @KafkaListener(\r\n              groupId = &quot;reflectoring-group-3&quot;,\r\n              topicPartitions = @TopicPartition(\r\n                      topic = &quot;${app.topic.foo}&quot;,\r\n                      partitionOffsets = { @PartitionOffset(\r\n                              partition = &quot;0&quot;,\r\n                              initialOffset = &quot;0&quot;) }))\r\n      void commonListenerForMultipleTopics(String message) {\r\n          LOG.info(&quot;MultipleTopicListener - {}&quot;, message);\r\n      }\r\n    }\r\n\r\nConsumer 2\r\n\r\n    @Service\r\n    public class Consumer2 {\r\n      private static final Logger LOG = LoggerFactory.getLogger(Consumer2.class);\r\n    \r\n      @KafkaListener(\r\n              groupId = &quot;reflectoring-group-3&quot;,\r\n              topicPartitions = @TopicPartition(\r\n                      topic = &quot;${app.topic.foo}&quot;,\r\n                      partitionOffsets = { @PartitionOffset(\r\n                              partition = &quot;1&quot;,\r\n                              initialOffset = &quot;0&quot;) }))\r\n      void commonListenerForMultipleTopics(String message) {\r\n          LOG.info(&quot;MultipleTopicListener - {}&quot;, message);\r\n      }\r\n    }","title":"Send message to kafka to multiple partitions and listening multiple same consumer","body":"<p>I want to understand how to write from a producer to multiple partitions? Did I do the right? Is maybe have easy decision?\nI have 2 partiotions in my topic.\nAnd i want read same message type equals consumers</p>\n<p>How can I receive the same message in the consumers without specifying the partition number in the producer and the consumer?</p>\n<p>Thanks.\nProducer</p>\n<pre><code>@Service\npublic class Producer {\n   private static final Logger LOG = LoggerFactory.getLogger(Producer.class);\n\n   @Autowired\n   private KafkaTemplate&lt;String, String&gt; kafkaTemplate;\n\n   @Value(&quot;${app.topic.foo}&quot;)\n   private String topic;\n\n   public void send(String message){\n      LOG.info(&quot;sending message='{}' to topic='{}'&quot;, message, topic);\n      kafkaTemplate.send(topic,0, &quot;1&quot;,  message);\n      kafkaTemplate.send(topic, 1, &quot;1&quot;, message);\n   }\n}\n</code></pre>\n<p>Consumer 1</p>\n<pre><code>@Service\npublic class Consumer {\n\n  private static final Logger LOG = LoggerFactory.getLogger(Consumer.class);\n\n  @KafkaListener(\n          groupId = &quot;reflectoring-group-3&quot;,\n          topicPartitions = @TopicPartition(\n                  topic = &quot;${app.topic.foo}&quot;,\n                  partitionOffsets = { @PartitionOffset(\n                          partition = &quot;0&quot;,\n                          initialOffset = &quot;0&quot;) }))\n  void commonListenerForMultipleTopics(String message) {\n      LOG.info(&quot;MultipleTopicListener - {}&quot;, message);\n  }\n}\n</code></pre>\n<p>Consumer 2</p>\n<pre><code>@Service\npublic class Consumer2 {\n  private static final Logger LOG = LoggerFactory.getLogger(Consumer2.class);\n\n  @KafkaListener(\n          groupId = &quot;reflectoring-group-3&quot;,\n          topicPartitions = @TopicPartition(\n                  topic = &quot;${app.topic.foo}&quot;,\n                  partitionOffsets = { @PartitionOffset(\n                          partition = &quot;1&quot;,\n                          initialOffset = &quot;0&quot;) }))\n  void commonListenerForMultipleTopics(String message) {\n      LOG.info(&quot;MultipleTopicListener - {}&quot;, message);\n  }\n}\n</code></pre>\n"},{"tags":["java","linux","javafx"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":2,"creation_date":1689802935,"post_id":76725342,"comment_id":135267055,"body_markdown":"See also [_Getting Started with JavaFX_](https://openjfx.io/openjfx-docs/) in the [tag:javafx] tag [info](https://stackoverflow.com/tags/javafx/info).","body":"See also <a href=\"https://openjfx.io/openjfx-docs/\" rel=\"nofollow noreferrer\"><i>Getting Started with JavaFX</i></a> in the <a href=\"https://stackoverflow.com/questions/tagged/javafx\">javafx</a> tag <a href=\"https://stackoverflow.com/tags/javafx/info\">info</a>."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1689804248,"post_id":76725342,"comment_id":135267218,"body_markdown":"In my experience, that error means the native code of JavaFX is either missing or is for a different platform/architecture.","body":"In my experience, that error means the native code of JavaFX is either missing or is for a different platform/architecture."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1689807376,"post_id":76725342,"comment_id":135267553,"body_markdown":"Various [fixes and debugging techniques for this error on Linux](https://stackoverflow.com/questions/21185156/javafx-on-linux-is-showing-a-graphics-device-initialization-failed-for-es2-s).  Ignore answers that reference JavaFX versions &lt; 11, as earlier versions functioned differently.  Following the official documentation linked by trashgod is probably your best bet.","body":"Various <a href=\"https://stackoverflow.com/questions/21185156/javafx-on-linux-is-showing-a-graphics-device-initialization-failed-for-es2-s\">fixes and debugging techniques for this error on Linux</a>.  Ignore answers that reference JavaFX versions &lt; 11, as earlier versions functioned differently.  Following the official documentation linked by trashgod is probably your best bet."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689808755,"post_id":76725342,"comment_id":135267680,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":29052343,"reputation":1,"user_id":22254870,"display_name":"edman"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":135,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689804068,"creation_date":1689802670,"question_id":76725342,"body_markdown":"I want to create a JavaFX project in Eclipse, but when I try to run `Main.java` there is an error that I could not fix, also the class `module-info.java` or rather the code in it is underlined in red. \r\n\r\nError:\r\n\r\n```none\r\nGraphics Device initialization failed for :  es2, sw\r\nError initializing QuantumRenderer: no suitable pipeline found\r\njava.lang.RuntimeException: java.lang.RuntimeException: Error initializing QuantumRenderer: no suitable pipeline found\r\n\tat javafx.graphics/com.sun.javafx.tk.quantum.QuantumRenderer.getInstance(QuantumRenderer.java:283)\r\n\tat javafx.graphics/com.sun.javafx.tk.quantum.QuantumToolkit.init(QuantumToolkit.java:254)\r\n\tat javafx.graphics/com.sun.javafx.tk.Toolkit.getToolkit(Toolkit.java:266)\r\n\tat javafx.graphics/com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:291)\r\n\tat javafx.graphics/com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:163)\r\n\tat javafx.graphics/com.sun.javafx.application.LauncherImpl.startToolkit(LauncherImpl.java:659)\r\n\tat javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:410)\r\n\tat javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:364)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:1082)\r\nCaused by: java.lang.RuntimeException: Error initializing QuantumRenderer: no suitable pipeline found\r\n\tat javafx.graphics/com.sun.javafx.tk.quantum.QuantumRenderer$PipelineRunnable.init(QuantumRenderer.java:95)\r\n\tat javafx.graphics/com.sun.javafx.tk.quantum.QuantumRenderer$PipelineRunnable.run(QuantumRenderer.java:125)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\nException in thread &quot;main&quot; java.lang.reflect.InvocationTargetException\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:1082)\r\nCaused by: java.lang.RuntimeException: No toolkit found\r\n\tat javafx.graphics/com.sun.javafx.tk.Toolkit.getToolkit(Toolkit.java:278)\r\n\tat javafx.graphics/com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:291)\r\n\tat javafx.graphics/com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:163)\r\n\tat javafx.graphics/com.sun.javafx.application.LauncherImpl.startToolkit(LauncherImpl.java:659)\r\n\tat javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:410)\r\n\tat javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:364)\r\n\t... 5 more\r\n```\r\n\r\nI reinstalled Java and JavaFX, added necessary libraries to the project, installed GTK 3 and 2 but still can&#39;t understand what&#39;s wrong.","title":"Graphics Device initialization failed for : es2, sw, JavaFX","body":"<p>I want to create a JavaFX project in Eclipse, but when I try to run <code>Main.java</code> there is an error that I could not fix, also the class <code>module-info.java</code> or rather the code in it is underlined in red.</p>\n<p>Error:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Graphics Device initialization failed for :  es2, sw\nError initializing QuantumRenderer: no suitable pipeline found\njava.lang.RuntimeException: java.lang.RuntimeException: Error initializing QuantumRenderer: no suitable pipeline found\n    at javafx.graphics/com.sun.javafx.tk.quantum.QuantumRenderer.getInstance(QuantumRenderer.java:283)\n    at javafx.graphics/com.sun.javafx.tk.quantum.QuantumToolkit.init(QuantumToolkit.java:254)\n    at javafx.graphics/com.sun.javafx.tk.Toolkit.getToolkit(Toolkit.java:266)\n    at javafx.graphics/com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:291)\n    at javafx.graphics/com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:163)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.startToolkit(LauncherImpl.java:659)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:410)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:364)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:1082)\nCaused by: java.lang.RuntimeException: Error initializing QuantumRenderer: no suitable pipeline found\n    at javafx.graphics/com.sun.javafx.tk.quantum.QuantumRenderer$PipelineRunnable.init(QuantumRenderer.java:95)\n    at javafx.graphics/com.sun.javafx.tk.quantum.QuantumRenderer$PipelineRunnable.run(QuantumRenderer.java:125)\n    at java.base/java.lang.Thread.run(Thread.java:833)\nException in thread &quot;main&quot; java.lang.reflect.InvocationTargetException\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:1082)\nCaused by: java.lang.RuntimeException: No toolkit found\n    at javafx.graphics/com.sun.javafx.tk.Toolkit.getToolkit(Toolkit.java:278)\n    at javafx.graphics/com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:291)\n    at javafx.graphics/com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:163)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.startToolkit(LauncherImpl.java:659)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:410)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:364)\n    ... 5 more\n</code></pre>\n<p>I reinstalled Java and JavaFX, added necessary libraries to the project, installed GTK 3 and 2 but still can't understand what's wrong.</p>\n"},{"tags":["java","junit","mockito"],"answers":[{"tags":[],"owner":{"account_id":1010971,"reputation":11524,"user_id":1023553,"accept_rate":59,"display_name":"NoDataFound"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689803681,"creation_date":1689803681,"answer_id":76725433,"question_id":76725396,"body_markdown":"Why not use what the API offer:\r\n\r\n    CompletableFuture&lt;Object&gt; failed = new CompletableFuture&lt;&gt;();\r\n    failed.completeExceptionally(new SomeException());\r\n\r\nFrom the [documentation][1]:\r\n\r\n&gt; If not already completed, causes invocations of get() and related methods to throw the given exception.\r\n\r\nHowever, `get()` will raise `ExecutionException` and the cause should be `SomeException`, which means your `getStatus` code is not valid:\r\n\r\n    try {\r\n      return futureA.get();\r\n    } catch (ExecutionException e) {\r\n      // handle cause, eg: if (e.getCause() instanceof SomeException) ...\r\n    }\r\n    try {\r\n      return futureB.get();\r\n    } catch (ExecutionException e) {\r\n      // handle cause, eg: if (e.getCause() instanceof SomeException) ...\r\n    }\r\n    return null; // or whatever default value/exception\r\n\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html#completeExceptionally-java.lang.Throwable-\r\n","title":"How to mock CompletableFuture.get() to throw an exception","body":"<p>Why not use what the API offer:</p>\n<pre><code>CompletableFuture&lt;Object&gt; failed = new CompletableFuture&lt;&gt;();\nfailed.completeExceptionally(new SomeException());\n</code></pre>\n<p>From the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html#completeExceptionally-java.lang.Throwable-\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n<blockquote>\n<p>If not already completed, causes invocations of get() and related methods to throw the given exception.</p>\n</blockquote>\n<p>However, <code>get()</code> will raise <code>ExecutionException</code> and the cause should be <code>SomeException</code>, which means your <code>getStatus</code> code is not valid:</p>\n<pre><code>try {\n  return futureA.get();\n} catch (ExecutionException e) {\n  // handle cause, eg: if (e.getCause() instanceof SomeException) ...\n}\ntry {\n  return futureB.get();\n} catch (ExecutionException e) {\n  // handle cause, eg: if (e.getCause() instanceof SomeException) ...\n}\nreturn null; // or whatever default value/exception\n</code></pre>\n"}],"owner":{"account_id":25299544,"reputation":11,"user_id":19124021,"display_name":"unknown"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689803681,"creation_date":1689803198,"question_id":76725396,"body_markdown":"i have code as below\r\n\r\n    public Object getStatus(CompletableFuture&lt;Object&gt; futureA, CompletableFuture&lt;Object&gt; futureB) {\r\n    CompletableFuture.allOf(futureA, futureB).join();\r\n    try {\r\n    if(futureA.get()!=null) return futureA.get();\r\n    } catch(SomeException e) {\r\n    //log\r\n    }\r\n    try {\r\n    if(futureB.get()!=null) return futureB.get();\r\n    } catch(SomeException e) {\r\n    //log\r\n    }\r\n    }\r\n\r\ni have my test as below\r\n\r\n    @Test\r\n    public void testException() {\r\n    CompletableFuture&lt;Object&gt; futureA = new CompletableFuture&lt;&gt;();\r\n    CompletableFuture&lt;Object&gt; futureB = CompletableFuture.completedFuture(null);\r\n    CompletableFuture&lt;Object&gt; spy = Mockito.spy(futureA);\r\n    when(spy.get()).thenThrow(new SomeException());\r\n    service.getStatus(futureA, futureB);\r\n    }\r\n\r\ntrying to cover the catch block, but this is not working, it is waiting for futureA to complete. how do i test the catch block?","title":"How to mock CompletableFuture.get() to throw an exception","body":"<p>i have code as below</p>\n<pre><code>public Object getStatus(CompletableFuture&lt;Object&gt; futureA, CompletableFuture&lt;Object&gt; futureB) {\nCompletableFuture.allOf(futureA, futureB).join();\ntry {\nif(futureA.get()!=null) return futureA.get();\n} catch(SomeException e) {\n//log\n}\ntry {\nif(futureB.get()!=null) return futureB.get();\n} catch(SomeException e) {\n//log\n}\n}\n</code></pre>\n<p>i have my test as below</p>\n<pre><code>@Test\npublic void testException() {\nCompletableFuture&lt;Object&gt; futureA = new CompletableFuture&lt;&gt;();\nCompletableFuture&lt;Object&gt; futureB = CompletableFuture.completedFuture(null);\nCompletableFuture&lt;Object&gt; spy = Mockito.spy(futureA);\nwhen(spy.get()).thenThrow(new SomeException());\nservice.getStatus(futureA, futureB);\n}\n</code></pre>\n<p>trying to cover the catch block, but this is not working, it is waiting for futureA to complete. how do i test the catch block?</p>\n"},{"tags":["java","spring-boot","kubernetes","apache-kafka","event-handling"],"comments":[{"owner":{"account_id":8465462,"reputation":7040,"user_id":6349751,"accept_rate":90,"display_name":"AymDev"},"score":0,"creation_date":1689774736,"post_id":76721973,"comment_id":135261219,"body_markdown":"I have little knowledge on those topics but maybe something like the 1st solution (consumer group with a random name) using Kubernetes [PreStop hook](https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/) to delete the consumer group. Looks like consumer groups [can be automatically deleted](https://docs.confluent.io/kafka/operations-tools/manage-consumer-groups.html#view-consumer-group-info) but I don&#39;t really know how it works.","body":"I have little knowledge on those topics but maybe something like the 1st solution (consumer group with a random name) using Kubernetes <a href=\"https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/\" rel=\"nofollow noreferrer\">PreStop hook</a> to delete the consumer group. Looks like consumer groups <a href=\"https://docs.confluent.io/kafka/operations-tools/manage-consumer-groups.html#view-consumer-group-info\" rel=\"nofollow noreferrer\">can be automatically deleted</a> but I don&#39;t really know how it works."},{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":0,"creation_date":1689774813,"post_id":76721973,"comment_id":135261247,"body_markdown":"Is there an available hook when when a pod is created/killed?  If yes, on creation, programmatically add a new topic subscription and start listening on that subscription.  And on kill, programmatically delete the subscription.","body":"Is there an available hook when when a pod is created/killed?  If yes, on creation, programmatically add a new topic subscription and start listening on that subscription.  And on kill, programmatically delete the subscription."}],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689803483,"creation_date":1689803483,"answer_id":76725416,"question_id":76721973,"body_markdown":"&gt; the consumer group remains for ever\r\n\r\nIf you don&#39;t commit the offsets, then no group is created. \r\n\r\n&gt; constantly increasing lag\r\n\r\nThis is only an issue if you use `auto.offset.reset=earliest`. \r\n\r\n&gt; All the events from one particular topic must be consumed by each running instance of the microservice\r\n\r\nYou can use `consumer.assign()` with the list of TopicPartition, which you can query with `AdminClient`, or hard-code. \r\n\r\nOtherwise, you need to use a random group per pod since any static value will cause idle consumers when there are more pods than partitions. \r\n\r\nAlso, you are not required to use Kafka `__consumer_offsets` topic at  all. You can manually commit offset values in an external store, and use `assign` and `seek` functions. When you use an external store, then you can have better guarantees of exactly-once processing since you can additionally mark any offset as &quot;processed==true&quot;, and seek to the min(processed == false) offset before each seek. ","title":"Make all Kubernetes pods listen to the same Kafka topic","body":"<blockquote>\n<p>the consumer group remains for ever</p>\n</blockquote>\n<p>If you don't commit the offsets, then no group is created.</p>\n<blockquote>\n<p>constantly increasing lag</p>\n</blockquote>\n<p>This is only an issue if you use <code>auto.offset.reset=earliest</code>.</p>\n<blockquote>\n<p>All the events from one particular topic must be consumed by each running instance of the microservice</p>\n</blockquote>\n<p>You can use <code>consumer.assign()</code> with the list of TopicPartition, which you can query with <code>AdminClient</code>, or hard-code.</p>\n<p>Otherwise, you need to use a random group per pod since any static value will cause idle consumers when there are more pods than partitions.</p>\n<p>Also, you are not required to use Kafka <code>__consumer_offsets</code> topic at  all. You can manually commit offset values in an external store, and use <code>assign</code> and <code>seek</code> functions. When you use an external store, then you can have better guarantees of exactly-once processing since you can additionally mark any offset as &quot;processed==true&quot;, and seek to the min(processed == false) offset before each seek.</p>\n"}],"owner":{"account_id":3446101,"reputation":11345,"user_id":2886891,"accept_rate":75,"display_name":"Honza Zidek"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":720,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1689803483,"creation_date":1689774164,"question_id":76721973,"body_markdown":"### Situation\r\n- We have multiple Kubernetes pods of each deployment (= microservice)\r\n- Our application is massively Kafka-based\r\n- Normally each microservice consumes each Kafka topic in a single consumer group, which is good as we need that each Kafka events is consumed exactly once\r\n- Kubernetes launches and stops pods whenever it&#39;s needed\r\n\r\n### Problem\r\n- We have one topic, which must be consumed by all the running instances (pods) of a single microservice (to reset some internal status)\r\n\r\n## What we considered and why it doesn&#39;t work\r\n- Consume from the topic always in a new consumer group with a random name:&lt;br&gt;\r\nNO, because as soon as a pod is killed, the consumer group remains for ever, with the constantly increasing lag. The number of detached consumer group without a listener grows over time.\r\n- https://stackoverflow.com/q/69717216/2886891:&lt;br&gt;\r\nNO, because we use ReplicaSet and not StatefulSet\r\n\r\n## Requirements (summary)\r\n- All the events from one particular topic must be consumed by each running instance of the microservice, i.e. by each pod of one particular deployment.\r\n- Kubernetes uses ReplicaSet, the names of the pods have random a string appended.\r\n- No zombie consumer groups are allowed.\r\n\r\n## Question\r\n- How to solve it, either in Kafka or in Kubernetes or anywhere outside or around or in the middle of it?\r\n","title":"Make all Kubernetes pods listen to the same Kafka topic","body":"<h3>Situation</h3>\n<ul>\n<li>We have multiple Kubernetes pods of each deployment (= microservice)</li>\n<li>Our application is massively Kafka-based</li>\n<li>Normally each microservice consumes each Kafka topic in a single consumer group, which is good as we need that each Kafka events is consumed exactly once</li>\n<li>Kubernetes launches and stops pods whenever it's needed</li>\n</ul>\n<h3>Problem</h3>\n<ul>\n<li>We have one topic, which must be consumed by all the running instances (pods) of a single microservice (to reset some internal status)</li>\n</ul>\n<h2>What we considered and why it doesn't work</h2>\n<ul>\n<li>Consume from the topic always in a new consumer group with a random name:<br>\nNO, because as soon as a pod is killed, the consumer group remains for ever, with the constantly increasing lag. The number of detached consumer group without a listener grows over time.</li>\n<li><a href=\"https://stackoverflow.com/q/69717216/2886891\">Assigning a unique number in env inside each pod in a kubernetes cluster</a>:<br>\nNO, because we use ReplicaSet and not StatefulSet</li>\n</ul>\n<h2>Requirements (summary)</h2>\n<ul>\n<li>All the events from one particular topic must be consumed by each running instance of the microservice, i.e. by each pod of one particular deployment.</li>\n<li>Kubernetes uses ReplicaSet, the names of the pods have random a string appended.</li>\n<li>No zombie consumer groups are allowed.</li>\n</ul>\n<h2>Question</h2>\n<ul>\n<li>How to solve it, either in Kafka or in Kubernetes or anywhere outside or around or in the middle of it?</li>\n</ul>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":1,"creation_date":1468874047,"post_id":38445488,"comment_id":64296363,"body_markdown":"Why is student even generic? What do the generics allow you to do?","body":"Why is student even generic? What do the generics allow you to do?"},{"owner":{"account_id":8843862,"reputation":91,"user_id":6605380,"accept_rate":0,"display_name":"dan"},"score":0,"creation_date":1468874149,"post_id":38445488,"comment_id":64296408,"body_markdown":"the class student is generic beacause it aloows to add the student id as integer or string as the user request.","body":"the class student is generic beacause it aloows to add the student id as integer or string as the user request."},{"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"score":0,"creation_date":1468874245,"post_id":38445488,"comment_id":64296448,"body_markdown":"In that case, a much simpler solution would be to save it as a string, but have a ```getAsInt``` method that parses the id. (But you&#39;re probably doing this to learn so...)","body":"In that case, a much simpler solution would be to save it as a string, but have a <code>getAsInt</code> method that parses the id. (But you&#39;re probably doing this to learn so...)"},{"owner":{"account_id":8843862,"reputation":91,"user_id":6605380,"accept_rate":0,"display_name":"dan"},"score":0,"creation_date":1468874353,"post_id":38445488,"comment_id":64296503,"body_markdown":"i cant use a generic array wich include both??there isnt such thing in generic?","body":"i cant use a generic array wich include both??there isnt such thing in generic?"},{"owner":{"account_id":4120452,"reputation":105,"user_id":3380971,"display_name":"olexity"},"score":0,"creation_date":1468874382,"post_id":38445488,"comment_id":64296518,"body_markdown":"Okay, so this is terrible by design, if you must make his ID to just be String... you can convert any integer to string, but it looks like in your case only integer is good.... there is such things as just having Student with 2 different constructors, but it is really not necessary in this case","body":"Okay, so this is terrible by design, if you must make his ID to just be String... you can convert any integer to string, but it looks like in your case only integer is good.... there is such things as just having Student with 2 different constructors, but it is really not necessary in this case"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":3,"creation_date":1468874421,"post_id":38445488,"comment_id":64296538,"body_markdown":"Generics and arrays are much harder to make work together than just sticking with generics: `List&lt;Student&lt;T&gt;&gt; list = new ArrayList&lt;&gt;();`.","body":"Generics and arrays are much harder to make work together than just sticking with generics: <code>List&lt;Student&lt;T&gt;&gt; list = new ArrayList&lt;&gt;();</code>."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":1,"creation_date":1468874544,"post_id":38445488,"comment_id":64296609,"body_markdown":"And if you can choose whether the ID is an `Integer` or a `String` in this method, the array elements would have to be of type `Student&lt;?&gt;`, since they could be either type. The type variable is already &quot;set&quot; by the time you choose the kind of ID.","body":"And if you can choose whether the ID is an <code>Integer</code> or a <code>String</code> in this method, the array elements would have to be of type <code>Student&lt;?&gt;</code>, since they could be either type. The type variable is already &quot;set&quot; by the time you choose the kind of ID."},{"owner":{"account_id":1527222,"reputation":2599,"user_id":1425331,"accept_rate":83,"display_name":"Jimmy"},"score":0,"creation_date":1468874821,"post_id":38445488,"comment_id":64296760,"body_markdown":"I could not understand exact question of yours .Arrays need information of its content type during runtime, unlike Collection classes. So generics can be used in list, which will eventually lost during run time ( type erasure) . So unlike list, you can not have that type of information in array. Also look at invariant vs covariant  for additional details","body":"I could not understand exact question of yours .Arrays need information of its content type during runtime, unlike Collection classes. So generics can be used in list, which will eventually lost during run time ( type erasure) . So unlike list, you can not have that type of information in array. Also look at invariant vs covariant  for additional details"},{"owner":{"account_id":31622,"reputation":120341,"user_id":86989,"display_name":"newacct"},"score":0,"creation_date":1468962462,"post_id":38445488,"comment_id":64341142,"body_markdown":"There is no point for `main` to be generic when `T` is not used in the parameter or return types","body":"There is no point for <code>main</code> to be generic when <code>T</code> is not used in the parameter or return types"}],"answers":[{"tags":[],"owner":{"account_id":7831665,"reputation":2673,"user_id":5938725,"accept_rate":100,"display_name":"Sean Letendre"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1468878247,"creation_date":1468876377,"answer_id":38446075,"question_id":38445488,"body_markdown":"[According to Oracle](https://docs.oracle.com/javase/tutorial/java/generics/restrictions.html#createArrays), no you cannot have generics arrays.\r\n\r\nP.S.:  you forgot to initialize *s*, which I am assuming is a *java.util.Scanner*,\r\n\r\n      Scanner s = new Scanner(System.in);\r\n\r\nAlso don&#39;t do:\r\n          \r\n    System.out.println(&quot;please enter student name :&quot;);\r\n    s.nextLine();\r\n    name=s.nextLine()\r\n\r\nJust do:\r\n\r\n    System.out.println(&quot;please enter student name :&quot;);\r\n    name=s.nextLine()\r\n\r\nOtherwise *s.nextLine()* skips one line.","title":"arrays of generic class in JAVA","body":"<p><a href=\"https://docs.oracle.com/javase/tutorial/java/generics/restrictions.html#createArrays\" rel=\"nofollow\">According to Oracle</a>, no you cannot have generics arrays.</p>\n\n<p>P.S.:  you forgot to initialize <em>s</em>, which I am assuming is a <em>java.util.Scanner</em>,</p>\n\n<pre><code>  Scanner s = new Scanner(System.in);\n</code></pre>\n\n<p>Also don't do:</p>\n\n<pre><code>System.out.println(\"please enter student name :\");\ns.nextLine();\nname=s.nextLine()\n</code></pre>\n\n<p>Just do:</p>\n\n<pre><code>System.out.println(\"please enter student name :\");\nname=s.nextLine()\n</code></pre>\n\n<p>Otherwise <em>s.nextLine()</em> skips one line.</p>\n"},{"tags":[],"owner":{"account_id":29044429,"reputation":1,"user_id":22248594,"display_name":"Andy T"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689803315,"creation_date":1689803315,"answer_id":76725405,"question_id":38445488,"body_markdown":"I solved this problem by creating a class wrapper that was just a generic free extension of the generic version:\r\n```\r\n  private class Bag&lt;T&gt; { // My generic class here\r\n     // .. some implementation for Bag of T\r\n  }\r\n\r\n  public class IntegerBag extends Bag&lt;Integer&gt; { // Generic free!\r\n  }\r\n\r\n  public class UseArrayOfBagByCheating {\r\n     private IntegerBag[] = new IntegerBag[10];\r\n     // ... etc\r\n  }\r\n```","title":"arrays of generic class in JAVA","body":"<p>I solved this problem by creating a class wrapper that was just a generic free extension of the generic version:</p>\n<pre><code>  private class Bag&lt;T&gt; { // My generic class here\n     // .. some implementation for Bag of T\n  }\n\n  public class IntegerBag extends Bag&lt;Integer&gt; { // Generic free!\n  }\n\n  public class UseArrayOfBagByCheating {\n     private IntegerBag[] = new IntegerBag[10];\n     // ... etc\n  }\n</code></pre>\n"}],"owner":{"account_id":8843862,"reputation":91,"user_id":6605380,"accept_rate":0,"display_name":"dan"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1689803315,"creation_date":1468873751,"question_id":38445488,"body_markdown":"i am new with generics and i have a problem with creating an arrays of generic class.\r\n\r\nif i have one and i want to create in a seperate main at the same java project  generic array wich answer two diffrent types-string and integer.\r\n\r\ncan i put two difreent types the same array?\r\n\r\nand is it ok to call the main like this:\r\n\r\n    public static &lt;T&gt; void main(String[] args) {\r\n    \r\n        String name;\r\n        int grade;\r\n        int choice;\r\n        int count = 0;\r\n        String number;\r\n    \r\n        System.out.println(&quot;press 1 if you like to save id as integer ,or press 2 to for a string &quot;);\r\n        choice = s.nextInt();\r\n    \r\n        Student&lt;T&gt;[] array = new Student[NUM_OF_STUDENTS];\r\n    \r\n        if (choice == 1) {\r\n    \r\n            System.out.println(&quot;please enter student name :&quot;);\r\n            s.nextLine();\r\n            name = s.nextLine();\r\n    \r\n            while (!name.isEmpty() &amp;&amp; count != NUM_OF_STUDENTS) {\r\n                System.out.println(&quot;please enter student #&quot; + (count + 1) + &quot; grade :&quot;);\r\n                grade = s.nextInt();\r\n                array[count] = new Student(count + 1, name, grade);\r\n                count++;\r\n                ...\r\n\r\n\r\n....","title":"arrays of generic class in JAVA","body":"<p>i am new with generics and i have a problem with creating an arrays of generic class.</p>\n\n<p>if i have one and i want to create in a seperate main at the same java project  generic array wich answer two diffrent types-string and integer.</p>\n\n<p>can i put two difreent types the same array?</p>\n\n<p>and is it ok to call the main like this:</p>\n\n<pre><code>public static &lt;T&gt; void main(String[] args) {\n\n    String name;\n    int grade;\n    int choice;\n    int count = 0;\n    String number;\n\n    System.out.println(\"press 1 if you like to save id as integer ,or press 2 to for a string \");\n    choice = s.nextInt();\n\n    Student&lt;T&gt;[] array = new Student[NUM_OF_STUDENTS];\n\n    if (choice == 1) {\n\n        System.out.println(\"please enter student name :\");\n        s.nextLine();\n        name = s.nextLine();\n\n        while (!name.isEmpty() &amp;&amp; count != NUM_OF_STUDENTS) {\n            System.out.println(\"please enter student #\" + (count + 1) + \" grade :\");\n            grade = s.nextInt();\n            array[count] = new Student(count + 1, name, grade);\n            count++;\n            ...\n</code></pre>\n\n<p>....</p>\n"},{"tags":["java","gradle","quarkus"],"comments":[{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1689605673,"post_id":76704302,"comment_id":135233541,"body_markdown":"It&#39;s tough to tell as the Gradle output does not provide any useful information","body":"It&#39;s tough to tell as the Gradle output does not provide any useful information"},{"owner":{"account_id":5251042,"reputation":3,"user_id":4195286,"display_name":"Adrian Aulbach"},"score":0,"creation_date":1690300432,"post_id":76704302,"comment_id":135332766,"body_markdown":"Added the Stacktrace which points at io.quarkus.gradle.tasks.QuarkusGenerateCode.generateCode which indeed was changed for the latest versions, however I don&#39;t understand the change sufficiently to see how it could be related.\n\nAnyways: Upgrading to Quarkus 3.2.2 seems to resolve it for me","body":"Added the Stacktrace which points at io.quarkus.gradle.tasks.QuarkusGenerateCode.generateCode which indeed was changed for the latest versions, however I don&#39;t understand the change sufficiently to see how it could be related.  Anyways: Upgrading to Quarkus 3.2.2 seems to resolve it for me"}],"owner":{"account_id":5251042,"reputation":3,"user_id":4195286,"display_name":"Adrian Aulbach"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":180,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689803054,"creation_date":1689595722,"question_id":76704302,"body_markdown":"I&#39;m currently upgrading a Quarkus Project from 2.16 to 3.x (target is 3.2, but I also tried 3.0 to only apply the 3.0 [migration guide](https://github.com/quarkusio/quarkus/wiki/Migration-Guide-3.0), as well as 3.1 since I started before 3.2 was out)\r\n\r\nDuring the build one of the submodules fails with \r\n```\r\nError: Could not find or load main class Web\r\nCaused by: java.lang.ClassNotFoundException: Web\r\nCould not write standard input to Gradle Worker Daemon 4.\r\njava.io.IOException: The pipe is being closed\r\n        at java.base/java.io.FileOutputStream.writeBytes(Native Method)\r\n        at java.base/java.io.FileOutputStream.write(FileOutputStream.java:354)\r\n        at java.base/java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:81)\r\n        at java.base/java.io.BufferedOutputStream.flush(BufferedOutputStream.java:142)\r\n        at org.gradle.process.internal.streams.ExecOutputHandleRunner.forwardContent(ExecOutputHandleRunner.java:68)\r\n        at org.gradle.process.internal.streams.ExecOutputHandleRunner.run(ExecOutputHandleRunner.java:53)\r\n        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\r\n        at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:49)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n        at java.base/java.lang.Thread.run(Thread.java:829)\r\n\r\n&gt; Task :product-server-base:quarkusGenerateCode FAILED\r\nFinished at: 11:22:57.724 17.07.2023\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task &#39;:product-server-base:quarkusGenerateCode&#39;.\r\n&gt; There was a failure while executing work items\r\n   &gt; A failure occurred while executing io.quarkus.gradle.tasks.worker.CodeGenWorker\r\n      &gt; Failed to run Gradle Worker Daemon\r\n         &gt; Process &#39;Gradle Worker Daemon 4&#39; finished with non-zero exit value 1\r\n```\r\n\r\nWhat&#39;s worth to mention is that the main class isn&#39;t supposed to be `Web` as indicated by the error message but `ProductServerMain`, which is annotated with `@QuarkusMain`. Also this submodule isn&#39;t supposed to run on it&#39;s own but acts as a base that modules build on for different flavours.\r\n\r\n\r\nI found some people getting a similar error before, yet the solutions from there didn&#39;t help:\r\n1. [SO: A Gradle based sub-project throws `Could not find or load main class worker.org.gradle.process.internal.worker.GradleWorkerMain` during the build](https://stackoverflow.com/questions/66669349/a-gradle-based-sub-project-throws-could-not-find-or-load-main-class-worker-org)\r\nI stopped the daemons and deleted the .gradle folder as listed as solution there, the error remains the same\r\n1. [SO: Gradle - Could not find or load main class](https://stackoverflow.com/questions/24924932/gradle-could-not-find-or-load-main-class)\r\nI added the configuration to build.gradle pointing to `com.example.ProductServerMain`, although that wasn&#39;t needed before. The error remains (it still seems to look for `Web`)\r\n\r\nI might be missing some behaviour changes or changed defaults of the new Quarkus version, which I had with previous issues I was able to solve.\r\n\r\nEdit:\r\nAdditional output:\r\n`--stacktrace`\r\n```\r\n* Exception is:\r\norg.gradle.api.tasks.TaskExecutionException: Execution failed for task &#39;:security-suite-server-base:quarkusGenerateCode&#39;.\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.lambda$executeIfValid$1(ExecuteActionsTaskExecuter.java:142)\r\n        at org.gradle.internal.Try$Failure.ifSuccessfulOrElse(Try.java:282)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:140)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:128)\r\n        at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:77)\r\n        at org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)\r\n        at org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:51)\r\n        at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)\r\n        at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:57)\r\n        at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)\r\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)\r\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)\r\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\r\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:52)\r\n        at org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:69)\r\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:322)\r\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:309)\r\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:302)\r\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:288)\r\n        at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.execute(DefaultPlanExecutor.java:462)\r\n        at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.run(DefaultPlanExecutor.java:379)\r\n        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\r\n        at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:49)\r\nCaused by: org.gradle.workers.WorkerExecutionException: There was a failure while executing work items\r\n        at org.gradle.workers.internal.DefaultWorkerExecutor.workerExecutionException(DefaultWorkerExecutor.java:274)\r\n        at org.gradle.workers.internal.DefaultWorkerExecutor.await(DefaultWorkerExecutor.java:268)\r\n        at org.gradle.workers.internal.DefaultWorkerExecutor.access$100(DefaultWorkerExecutor.java:60)\r\n        at org.gradle.workers.internal.DefaultWorkerExecutor$DefaultWorkQueue.await(DefaultWorkerExecutor.java:373)\r\n        at io.quarkus.gradle.tasks.QuarkusGenerateCode.generateCode(QuarkusGenerateCode.java:109)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:125)\r\n        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.doExecute(StandardTaskAction.java:58)\r\n        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:51)\r\n        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:29)\r\n        at org.gradle.api.internal.tasks.execution.TaskExecution$3.run(TaskExecution.java:236)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:47)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:68)\r\n        at org.gradle.api.internal.tasks.execution.TaskExecution.executeAction(TaskExecution.java:221)\r\n        at org.gradle.api.internal.tasks.execution.TaskExecution.executeActions(TaskExecution.java:204)\r\n        at org.gradle.api.internal.tasks.execution.TaskExecution.executeWithPreviousOutputFiles(TaskExecution.java:187)\r\n        at org.gradle.api.internal.tasks.execution.TaskExecution.execute(TaskExecution.java:165)\r\n        at org.gradle.internal.execution.steps.ExecuteStep.executeInternal(ExecuteStep.java:89)\r\n        at org.gradle.internal.execution.steps.ExecuteStep.access$000(ExecuteStep.java:40)\r\n        at org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:53)\r\n        at org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:50)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\r\n        at org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:50)\r\n        at org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:40)\r\n        at org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:68)\r\n        at org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:38)\r\n        at org.gradle.internal.execution.steps.CancelExecutionStep.execute(CancelExecutionStep.java:41)\r\n        at org.gradle.internal.execution.steps.TimeoutStep.executeWithoutTimeout(TimeoutStep.java:74)\r\n        at org.gradle.internal.execution.steps.TimeoutStep.execute(TimeoutStep.java:55)\r\n        at org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:51)\r\n        at org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:29)\r\n        at org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.executeDelegateBroadcastingChanges(CaptureStateAfterExecutionStep.java:124)\r\n        at org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.execute(CaptureStateAfterExecutionStep.java:80)\r\n        at org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.execute(CaptureStateAfterExecutionStep.java:58)\r\n        at org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:48)\r\n        at org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:36)\r\n        at org.gradle.internal.execution.steps.BuildCacheStep.executeWithoutCache(BuildCacheStep.java:181)\r\n        at org.gradle.internal.execution.steps.BuildCacheStep.lambda$execute$1(BuildCacheStep.java:71)\r\n        at org.gradle.internal.Either$Right.fold(Either.java:175)\r\n        at org.gradle.internal.execution.caching.CachingState.fold(CachingState.java:59)\r\n        at org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:69)\r\n        at org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:47)\r\n        at org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:36)\r\n        at org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:25)\r\n        at org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:36)\r\n        at org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:22)\r\n        at org.gradle.internal.execution.steps.SkipUpToDateStep.executeBecause(SkipUpToDateStep.java:110)\r\n        at org.gradle.internal.execution.steps.SkipUpToDateStep.lambda$execute$2(SkipUpToDateStep.java:56)\r\n        at org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:56)\r\n        at org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:38)\r\n        at org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:73)\r\n        at org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:44)\r\n        at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:37)\r\n        at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:27)\r\n        at org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:89)\r\n        at org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:50)\r\n        at org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:102)\r\n        at org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:57)\r\n        at org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:76)\r\n        at org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:50)\r\n        at org.gradle.internal.execution.steps.SkipEmptyWorkStep.executeWithNoEmptySources(SkipEmptyWorkStep.java:254)\r\n        at org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:91)\r\n        at org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:56)\r\n        at org.gradle.internal.execution.steps.RemoveUntrackedExecutionStateStep.execute(RemoveUntrackedExecutionStateStep.java:32)\r\n        at org.gradle.internal.execution.steps.RemoveUntrackedExecutionStateStep.execute(RemoveUntrackedExecutionStateStep.java:21)\r\n        at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsStartedStep.execute(MarkSnapshottingInputsStartedStep.java:38)\r\n        at org.gradle.internal.execution.steps.LoadPreviousExecutionStateStep.execute(LoadPreviousExecutionStateStep.java:43)\r\n        at org.gradle.internal.execution.steps.LoadPreviousExecutionStateStep.execute(LoadPreviousExecutionStateStep.java:31)\r\n        at org.gradle.internal.execution.steps.AssignWorkspaceStep.lambda$execute$0(AssignWorkspaceStep.java:40)\r\n        at org.gradle.api.internal.tasks.execution.TaskExecution$4.withWorkspace(TaskExecution.java:281)\r\n        at org.gradle.internal.execution.steps.AssignWorkspaceStep.execute(AssignWorkspaceStep.java:40)\r\n        at org.gradle.internal.execution.steps.AssignWorkspaceStep.execute(AssignWorkspaceStep.java:30)\r\n        at org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:37)\r\n        at org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:27)\r\n        at org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:44)\r\n        at org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:33)\r\n        at org.gradle.internal.execution.impl.DefaultExecutionEngine$1.execute(DefaultExecutionEngine.java:76)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:139)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:128)\r\n        at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:77)\r\n        at org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)\r\n        at org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:51)\r\n        at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)\r\n        at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:57)\r\n        at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)\r\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)\r\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)\r\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\r\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:52)\r\n        at org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:69)\r\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:322)\r\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:309)\r\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:302)\r\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:288)\r\n        at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.execute(DefaultPlanExecutor.java:462)\r\n        at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.run(DefaultPlanExecutor.java:379)\r\n        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\r\n        at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:49)\r\nCaused by: org.gradle.workers.internal.DefaultWorkerExecutor$WorkExecutionException: A failure occurred while executing io.quarkus.gradle.tasks.worker.CodeGenWorker\r\n        at org.gradle.workers.internal.DefaultWorkerExecutor.lambda$submitWork$2(DefaultWorkerExecutor.java:214)\r\n        at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.runExecution(DefaultConditionalExecutionQueue.java:187)\r\n        at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.access$700(DefaultConditionalExecutionQueue.java:120)\r\n        at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner$1.run(DefaultConditionalExecutionQueue.java:162)\r\n        at org.gradle.internal.Factories$1.create(Factories.java:31)\r\n        at org.gradle.internal.work.DefaultWorkerLeaseService.withLocks(DefaultWorkerLeaseService.java:249)\r\n        at org.gradle.internal.work.DefaultWorkerLeaseService.runAsWorkerThread(DefaultWorkerLeaseService.java:109)\r\n        at org.gradle.internal.work.DefaultWorkerLeaseService.runAsWorkerThread(DefaultWorkerLeaseService.java:114)\r\n        at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.runBatch(DefaultConditionalExecutionQueue.java:157)\r\n        at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.run(DefaultConditionalExecutionQueue.java:126)\r\n        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\r\n        at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:49)\r\nCaused by: org.gradle.process.internal.worker.WorkerProcessException: Failed to run Gradle Worker Daemon\r\n        at org.gradle.process.internal.worker.WorkerProcessException.runFailed(WorkerProcessException.java:29)\r\n        at org.gradle.process.internal.worker.DefaultMultiRequestWorkerProcessBuilder$1.start(DefaultMultiRequestWorkerProcessBuilder.java:156)\r\n        at org.gradle.workers.internal.WorkerDaemonStarter.startDaemon(WorkerDaemonStarter.java:72)\r\n        at org.gradle.workers.internal.WorkerDaemonClientsManager.reserveNewClient(WorkerDaemonClientsManager.java:106)\r\n        at org.gradle.workers.internal.WorkerDaemonFactory$1.reserveClient(WorkerDaemonFactory.java:54)\r\n        at org.gradle.workers.internal.WorkerDaemonFactory$1.execute(WorkerDaemonFactory.java:42)\r\n        at org.gradle.workers.internal.DefaultWorkerExecutor.lambda$submitWork$2(DefaultWorkerExecutor.java:212)\r\n        ... 11 more\r\nCaused by: org.gradle.process.internal.ExecException: Process &#39;Gradle Worker Daemon 3&#39; finished with non-zero exit value 1\r\n        at org.gradle.process.internal.DefaultExecHandle$ExecResultImpl.assertNormalExitValue(DefaultExecHandle.java:415)\r\n        at org.gradle.process.internal.worker.DefaultWorkerProcess.onProcessStop(DefaultWorkerProcess.java:145)\r\n        at org.gradle.process.internal.worker.DefaultWorkerProcess.access$000(DefaultWorkerProcess.java:42)\r\n        at org.gradle.process.internal.worker.DefaultWorkerProcess$1.executionFinished(DefaultWorkerProcess.java:98)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\r\n        at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\r\n        at org.gradle.internal.event.AbstractBroadcastDispatch.dispatch(AbstractBroadcastDispatch.java:43)\r\n        at org.gradle.internal.event.BroadcastDispatch$SingletonDispatch.dispatch(BroadcastDispatch.java:245)\r\n        at org.gradle.internal.event.BroadcastDispatch$SingletonDispatch.dispatch(BroadcastDispatch.java:157)\r\n        at org.gradle.internal.event.ListenerBroadcast.dispatch(ListenerBroadcast.java:141)\r\n        at org.gradle.internal.event.ListenerBroadcast.dispatch(ListenerBroadcast.java:37)\r\n        at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\r\n        at com.sun.proxy.$Proxy89.executionFinished(Unknown Source)\r\n        at org.gradle.process.internal.DefaultExecHandle.setEndStateInfo(DefaultExecHandle.java:221)\r\n        at org.gradle.process.internal.DefaultExecHandle.finished(DefaultExecHandle.java:355)\r\n        at org.gradle.process.internal.ExecHandleRunner.completed(ExecHandleRunner.java:110)\r\n        at org.gradle.process.internal.ExecHandleRunner.run(ExecHandleRunner.java:84)\r\n        at org.gradle.internal.operations.CurrentBuildOperationPreservingRunnable.run(CurrentBuildOperationPreservingRunnable.java:38)\r\n        ... 2 more\r\n```","title":"Gradle build failure with &quot;Error: Could not find or load main class Web&quot; after Quarkus 3 upgrade","body":"<p>I'm currently upgrading a Quarkus Project from 2.16 to 3.x (target is 3.2, but I also tried 3.0 to only apply the 3.0 <a href=\"https://github.com/quarkusio/quarkus/wiki/Migration-Guide-3.0\" rel=\"nofollow noreferrer\">migration guide</a>, as well as 3.1 since I started before 3.2 was out)</p>\n<p>During the build one of the submodules fails with</p>\n<pre><code>Error: Could not find or load main class Web\nCaused by: java.lang.ClassNotFoundException: Web\nCould not write standard input to Gradle Worker Daemon 4.\njava.io.IOException: The pipe is being closed\n        at java.base/java.io.FileOutputStream.writeBytes(Native Method)\n        at java.base/java.io.FileOutputStream.write(FileOutputStream.java:354)\n        at java.base/java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:81)\n        at java.base/java.io.BufferedOutputStream.flush(BufferedOutputStream.java:142)\n        at org.gradle.process.internal.streams.ExecOutputHandleRunner.forwardContent(ExecOutputHandleRunner.java:68)\n        at org.gradle.process.internal.streams.ExecOutputHandleRunner.run(ExecOutputHandleRunner.java:53)\n        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\n        at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:49)\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n        at java.base/java.lang.Thread.run(Thread.java:829)\n\n&gt; Task :product-server-base:quarkusGenerateCode FAILED\nFinished at: 11:22:57.724 17.07.2023\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':product-server-base:quarkusGenerateCode'.\n&gt; There was a failure while executing work items\n   &gt; A failure occurred while executing io.quarkus.gradle.tasks.worker.CodeGenWorker\n      &gt; Failed to run Gradle Worker Daemon\n         &gt; Process 'Gradle Worker Daemon 4' finished with non-zero exit value 1\n</code></pre>\n<p>What's worth to mention is that the main class isn't supposed to be <code>Web</code> as indicated by the error message but <code>ProductServerMain</code>, which is annotated with <code>@QuarkusMain</code>. Also this submodule isn't supposed to run on it's own but acts as a base that modules build on for different flavours.</p>\n<p>I found some people getting a similar error before, yet the solutions from there didn't help:</p>\n<ol>\n<li><a href=\"https://stackoverflow.com/questions/66669349/a-gradle-based-sub-project-throws-could-not-find-or-load-main-class-worker-org\">SO: A Gradle based sub-project throws <code>Could not find or load main class worker.org.gradle.process.internal.worker.GradleWorkerMain</code> during the build</a>\nI stopped the daemons and deleted the .gradle folder as listed as solution there, the error remains the same</li>\n<li><a href=\"https://stackoverflow.com/questions/24924932/gradle-could-not-find-or-load-main-class\">SO: Gradle - Could not find or load main class</a>\nI added the configuration to build.gradle pointing to <code>com.example.ProductServerMain</code>, although that wasn't needed before. The error remains (it still seems to look for <code>Web</code>)</li>\n</ol>\n<p>I might be missing some behaviour changes or changed defaults of the new Quarkus version, which I had with previous issues I was able to solve.</p>\n<p>Edit:\nAdditional output:\n<code>--stacktrace</code></p>\n<pre><code>* Exception is:\norg.gradle.api.tasks.TaskExecutionException: Execution failed for task ':security-suite-server-base:quarkusGenerateCode'.\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.lambda$executeIfValid$1(ExecuteActionsTaskExecuter.java:142)\n        at org.gradle.internal.Try$Failure.ifSuccessfulOrElse(Try.java:282)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:140)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:128)\n        at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:77)\n        at org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)\n        at org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:51)\n        at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)\n        at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:57)\n        at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:52)\n        at org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:69)\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:322)\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:309)\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:302)\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:288)\n        at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.execute(DefaultPlanExecutor.java:462)\n        at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.run(DefaultPlanExecutor.java:379)\n        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\n        at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:49)\nCaused by: org.gradle.workers.WorkerExecutionException: There was a failure while executing work items\n        at org.gradle.workers.internal.DefaultWorkerExecutor.workerExecutionException(DefaultWorkerExecutor.java:274)\n        at org.gradle.workers.internal.DefaultWorkerExecutor.await(DefaultWorkerExecutor.java:268)\n        at org.gradle.workers.internal.DefaultWorkerExecutor.access$100(DefaultWorkerExecutor.java:60)\n        at org.gradle.workers.internal.DefaultWorkerExecutor$DefaultWorkQueue.await(DefaultWorkerExecutor.java:373)\n        at io.quarkus.gradle.tasks.QuarkusGenerateCode.generateCode(QuarkusGenerateCode.java:109)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:125)\n        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.doExecute(StandardTaskAction.java:58)\n        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:51)\n        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:29)\n        at org.gradle.api.internal.tasks.execution.TaskExecution$3.run(TaskExecution.java:236)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:47)\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:68)\n        at org.gradle.api.internal.tasks.execution.TaskExecution.executeAction(TaskExecution.java:221)\n        at org.gradle.api.internal.tasks.execution.TaskExecution.executeActions(TaskExecution.java:204)\n        at org.gradle.api.internal.tasks.execution.TaskExecution.executeWithPreviousOutputFiles(TaskExecution.java:187)\n        at org.gradle.api.internal.tasks.execution.TaskExecution.execute(TaskExecution.java:165)\n        at org.gradle.internal.execution.steps.ExecuteStep.executeInternal(ExecuteStep.java:89)\n        at org.gradle.internal.execution.steps.ExecuteStep.access$000(ExecuteStep.java:40)\n        at org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:53)\n        at org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:50)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\n        at org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:50)\n        at org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:40)\n        at org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:68)\n        at org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:38)\n        at org.gradle.internal.execution.steps.CancelExecutionStep.execute(CancelExecutionStep.java:41)\n        at org.gradle.internal.execution.steps.TimeoutStep.executeWithoutTimeout(TimeoutStep.java:74)\n        at org.gradle.internal.execution.steps.TimeoutStep.execute(TimeoutStep.java:55)\n        at org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:51)\n        at org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:29)\n        at org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.executeDelegateBroadcastingChanges(CaptureStateAfterExecutionStep.java:124)\n        at org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.execute(CaptureStateAfterExecutionStep.java:80)\n        at org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.execute(CaptureStateAfterExecutionStep.java:58)\n        at org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:48)\n        at org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:36)\n        at org.gradle.internal.execution.steps.BuildCacheStep.executeWithoutCache(BuildCacheStep.java:181)\n        at org.gradle.internal.execution.steps.BuildCacheStep.lambda$execute$1(BuildCacheStep.java:71)\n        at org.gradle.internal.Either$Right.fold(Either.java:175)\n        at org.gradle.internal.execution.caching.CachingState.fold(CachingState.java:59)\n        at org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:69)\n        at org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:47)\n        at org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:36)\n        at org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:25)\n        at org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:36)\n        at org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:22)\n        at org.gradle.internal.execution.steps.SkipUpToDateStep.executeBecause(SkipUpToDateStep.java:110)\n        at org.gradle.internal.execution.steps.SkipUpToDateStep.lambda$execute$2(SkipUpToDateStep.java:56)\n        at org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:56)\n        at org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:38)\n        at org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:73)\n        at org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:44)\n        at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:37)\n        at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:27)\n        at org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:89)\n        at org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:50)\n        at org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:102)\n        at org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:57)\n        at org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:76)\n        at org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:50)\n        at org.gradle.internal.execution.steps.SkipEmptyWorkStep.executeWithNoEmptySources(SkipEmptyWorkStep.java:254)\n        at org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:91)\n        at org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:56)\n        at org.gradle.internal.execution.steps.RemoveUntrackedExecutionStateStep.execute(RemoveUntrackedExecutionStateStep.java:32)\n        at org.gradle.internal.execution.steps.RemoveUntrackedExecutionStateStep.execute(RemoveUntrackedExecutionStateStep.java:21)\n        at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsStartedStep.execute(MarkSnapshottingInputsStartedStep.java:38)\n        at org.gradle.internal.execution.steps.LoadPreviousExecutionStateStep.execute(LoadPreviousExecutionStateStep.java:43)\n        at org.gradle.internal.execution.steps.LoadPreviousExecutionStateStep.execute(LoadPreviousExecutionStateStep.java:31)\n        at org.gradle.internal.execution.steps.AssignWorkspaceStep.lambda$execute$0(AssignWorkspaceStep.java:40)\n        at org.gradle.api.internal.tasks.execution.TaskExecution$4.withWorkspace(TaskExecution.java:281)\n        at org.gradle.internal.execution.steps.AssignWorkspaceStep.execute(AssignWorkspaceStep.java:40)\n        at org.gradle.internal.execution.steps.AssignWorkspaceStep.execute(AssignWorkspaceStep.java:30)\n        at org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:37)\n        at org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:27)\n        at org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:44)\n        at org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:33)\n        at org.gradle.internal.execution.impl.DefaultExecutionEngine$1.execute(DefaultExecutionEngine.java:76)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:139)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:128)\n        at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:77)\n        at org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)\n        at org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:51)\n        at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)\n        at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:57)\n        at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:52)\n        at org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:69)\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:322)\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:309)\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:302)\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:288)\n        at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.execute(DefaultPlanExecutor.java:462)\n        at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.run(DefaultPlanExecutor.java:379)\n        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\n        at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:49)\nCaused by: org.gradle.workers.internal.DefaultWorkerExecutor$WorkExecutionException: A failure occurred while executing io.quarkus.gradle.tasks.worker.CodeGenWorker\n        at org.gradle.workers.internal.DefaultWorkerExecutor.lambda$submitWork$2(DefaultWorkerExecutor.java:214)\n        at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.runExecution(DefaultConditionalExecutionQueue.java:187)\n        at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.access$700(DefaultConditionalExecutionQueue.java:120)\n        at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner$1.run(DefaultConditionalExecutionQueue.java:162)\n        at org.gradle.internal.Factories$1.create(Factories.java:31)\n        at org.gradle.internal.work.DefaultWorkerLeaseService.withLocks(DefaultWorkerLeaseService.java:249)\n        at org.gradle.internal.work.DefaultWorkerLeaseService.runAsWorkerThread(DefaultWorkerLeaseService.java:109)\n        at org.gradle.internal.work.DefaultWorkerLeaseService.runAsWorkerThread(DefaultWorkerLeaseService.java:114)\n        at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.runBatch(DefaultConditionalExecutionQueue.java:157)\n        at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.run(DefaultConditionalExecutionQueue.java:126)\n        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\n        at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:49)\nCaused by: org.gradle.process.internal.worker.WorkerProcessException: Failed to run Gradle Worker Daemon\n        at org.gradle.process.internal.worker.WorkerProcessException.runFailed(WorkerProcessException.java:29)\n        at org.gradle.process.internal.worker.DefaultMultiRequestWorkerProcessBuilder$1.start(DefaultMultiRequestWorkerProcessBuilder.java:156)\n        at org.gradle.workers.internal.WorkerDaemonStarter.startDaemon(WorkerDaemonStarter.java:72)\n        at org.gradle.workers.internal.WorkerDaemonClientsManager.reserveNewClient(WorkerDaemonClientsManager.java:106)\n        at org.gradle.workers.internal.WorkerDaemonFactory$1.reserveClient(WorkerDaemonFactory.java:54)\n        at org.gradle.workers.internal.WorkerDaemonFactory$1.execute(WorkerDaemonFactory.java:42)\n        at org.gradle.workers.internal.DefaultWorkerExecutor.lambda$submitWork$2(DefaultWorkerExecutor.java:212)\n        ... 11 more\nCaused by: org.gradle.process.internal.ExecException: Process 'Gradle Worker Daemon 3' finished with non-zero exit value 1\n        at org.gradle.process.internal.DefaultExecHandle$ExecResultImpl.assertNormalExitValue(DefaultExecHandle.java:415)\n        at org.gradle.process.internal.worker.DefaultWorkerProcess.onProcessStop(DefaultWorkerProcess.java:145)\n        at org.gradle.process.internal.worker.DefaultWorkerProcess.access$000(DefaultWorkerProcess.java:42)\n        at org.gradle.process.internal.worker.DefaultWorkerProcess$1.executionFinished(DefaultWorkerProcess.java:98)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\n        at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n        at org.gradle.internal.event.AbstractBroadcastDispatch.dispatch(AbstractBroadcastDispatch.java:43)\n        at org.gradle.internal.event.BroadcastDispatch$SingletonDispatch.dispatch(BroadcastDispatch.java:245)\n        at org.gradle.internal.event.BroadcastDispatch$SingletonDispatch.dispatch(BroadcastDispatch.java:157)\n        at org.gradle.internal.event.ListenerBroadcast.dispatch(ListenerBroadcast.java:141)\n        at org.gradle.internal.event.ListenerBroadcast.dispatch(ListenerBroadcast.java:37)\n        at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\n        at com.sun.proxy.$Proxy89.executionFinished(Unknown Source)\n        at org.gradle.process.internal.DefaultExecHandle.setEndStateInfo(DefaultExecHandle.java:221)\n        at org.gradle.process.internal.DefaultExecHandle.finished(DefaultExecHandle.java:355)\n        at org.gradle.process.internal.ExecHandleRunner.completed(ExecHandleRunner.java:110)\n        at org.gradle.process.internal.ExecHandleRunner.run(ExecHandleRunner.java:84)\n        at org.gradle.internal.operations.CurrentBuildOperationPreservingRunnable.run(CurrentBuildOperationPreservingRunnable.java:38)\n        ... 2 more\n</code></pre>\n"},{"tags":["java","multithreading","synchronized","monitor","illegalmonitorstateexcep"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1689796649,"post_id":76724780,"comment_id":135266099,"body_markdown":"`synchronized` goes with `Object#wait(...)`, `Object#notify()`, and `Object#notifyAll()`. Whereas `Lock` goes with `Condition`. The two systems aren&#39;t &quot;mixable&quot; (i.e., you can&#39;t do `synchronized (someJavaUtilLockObj)` and then expect `someConditionObj.await()` to work).","body":"<code>synchronized</code> goes with <code>Object#wait(...)</code>, <code>Object#notify()</code>, and <code>Object#notifyAll()</code>. Whereas <code>Lock</code> goes with <code>Condition</code>. The two systems aren&#39;t &quot;mixable&quot; (i.e., you can&#39;t do <code>synchronized (someJavaUtilLockObj)</code> and then expect <code>someConditionObj.await()</code> to work)."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1689796843,"post_id":76724780,"comment_id":135266130,"body_markdown":"You never should never use `synchronized` on a `Lock`.","body":"You never should never use <code>synchronized</code> on a <code>Lock</code>."},{"owner":{"account_id":9109172,"reputation":3,"user_id":6778531,"display_name":"gaurav"},"score":0,"creation_date":1689797448,"post_id":76724780,"comment_id":135266225,"body_markdown":"Understood, thanks!","body":"Understood, thanks!"},{"owner":{"account_id":20470,"reputation":21695,"user_id":48933,"accept_rate":90,"display_name":"Neil Coffey"},"score":0,"creation_date":1689801033,"post_id":76724780,"comment_id":135266801,"body_markdown":"Please clarify your example: it includes commented out synchronised statements on your explicit lock references, yet you say you replaced one with the other?","body":"Please clarify your example: it includes commented out synchronised statements on your explicit lock references, yet you say you replaced one with the other?"},{"owner":{"account_id":9109172,"reputation":3,"user_id":6778531,"display_name":"gaurav"},"score":0,"creation_date":1689802036,"post_id":76724780,"comment_id":135266955,"body_markdown":"I have added - and + signs in statements to make it diff like instead of commenting out the replaced code. Hope this clarifies the example.","body":"I have added - and + signs in statements to make it diff like instead of commenting out the replaced code. Hope this clarifies the example."}],"answers":[{"tags":[],"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689802648,"creation_date":1689802022,"answer_id":76725302,"question_id":76724780,"body_markdown":"# The Two Locking Mechanisms\r\n\r\nAs a general rule, if you&#39;re using `java.util.concurrent.locks`, then do not use `synchronized` in the same context. The same is true in reverse. The two are separate mechanisms and are not designed to interact with each other.\r\n\r\n## synchronized\r\n\r\nAll objects in Java have an implicit &quot;monitor&quot;. When you `synchronize` on an object, you acquire that monitor. While you hold the monitor, you can call the following methods on the corresponding object instance:\r\n\r\n* `Object#wait()`, `Object#wait(long)`, `Object#wait(long,int)`\r\n* `Object#notify()`\r\n* `Object#notifyAll()`\r\n\r\nTrying to call these methods on an object instance without holding that object&#39;s monitor will result in an `IllegalMonitorStateException` being thrown.\r\n\r\n## java.util.concurrent.locks\r\n\r\nUnlike `synchronized`, this API is not built into the language. It does not care or know about the implicit monitor. Instead, a `Lock` maintains its own state regarding which thread owns it, and which threads are waiting to acquire it. To acquire and release a `Lock`, you must go through the methods defined by the `Lock` interface; you cannot use `synchronized`.\r\n\r\nOne of the things the `java.util.concurrent.locks` API did was extract the concept of a &quot;condition&quot; out into its own object. This makes `Lock` a &quot;factory&quot; for `Condition` objects, and a `Condition` remains associated with its source `Lock`. Thus, a `Condition` knows whether a thread calling one of its methods owns the corresponding `Lock` or not. And similar to `Lock`, waiting and signaling must be done via the methods of `Condition`; you must not use the methods defined by the `Object` class.\r\n\r\nTrying to call methods on a `Condition` (or trying to unlock a `Lock`) without owning the `Lock` (via a call to e.g., `Lock#lock()`) will result in an `IllegalThreadStateException` being thrown.\r\n\r\nNote this API also provides `ReadWriteLock` and `StampedLock`, as well as the building blocks needed to write your own lock implementations.\r\n\r\n# Your Code\r\n\r\nYou essentially have the following:\r\n\r\n```java\r\nimport java.util.concurrent.locks.Condition;\r\nimport java.util.concurrent.locks.Lock;\r\nimport java.util.concurrent.locks.ReentrantLock;\r\n\r\npublic class Foo {\r\n\r\n    private final Lock lock = new ReentrantLock();\r\n    private final Condition condition = lock.newCondition();\r\n\r\n    public void bar() throws InterruptedException {\r\n        synchronized (lock) {\r\n            condition.await();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThis is mixing the two locking mechanisms together, which will not work properly. You `synchronized` on the `lock`, thus acquiring the object&#39;s implicit monitor. But then you call `await()` on the `Condition` object. You may own the _monitor_, but from the point-of-view of the `Lock` and `Condition`, you do not own the _lock_. Hence an `IllegalThreadStateException` being thrown.\r\n\r\nYou should use _either_ `synchronized` _or_ `java.util.concurrent.locks`. The following is two versions of a &quot;barrier&quot; that waits for a certain number of threads to be waiting before letting them all continue on. One version uses `synchronized`, the other version uses `java.util.concurrent.locks`.\r\n\r\n### `synchronized` version\r\n\r\n```java\r\npublic class SynchronizedBarrier implements Barrier {\r\n\r\n    private final Object lock = new Object();\r\n    private final int threshold;\r\n    private int count;\r\n\r\n    private boolean thresholdReached;\r\n\r\n    public SynchronizedBarrier(int threshold) {\r\n        if (threshold &lt;= 0) throw new IllegalArgumentException(&quot;threshold &lt;= 0&quot;);\r\n        this.threshold = threshold;\r\n    }\r\n\r\n    @Override\r\n    public void await() throws InterruptedException {\r\n        synchronized (lock) {\r\n            if (thresholdReached) throw new IllegalStateException(&quot;threshold already reached&quot;);\r\n\r\n            count++;\r\n            if (count == threshold) {\r\n                thresholdReached = true;\r\n                lock.notifyAll();\r\n            } else {\r\n                while (!thresholdReached) {\r\n                    try {\r\n                        lock.wait();\r\n                    } catch (InterruptedException ex) {\r\n                        count--;\r\n                        throw ex;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n### `java.util.concurrent.locks` version\r\n\r\n```java\r\nimport java.util.concurrent.locks.Condition;\r\nimport java.util.concurrent.locks.Lock;\r\nimport java.util.concurrent.locks.ReentrantLock;\r\n\r\npublic class LocksBarrier implements Barrier {\r\n\r\n    private final Lock lock = new ReentrantLock();\r\n    private final Condition isThresholdReached = lock.newCondition();\r\n    private final int threshold;\r\n    private int count;\r\n\r\n    private boolean thresholdReached;\r\n\r\n    public LocksBarrier(int threshold) {\r\n        if (threshold &lt;= 0) throw new IllegalArgumentException(&quot;threshold &lt;= 0&quot;);\r\n        this.threshold = threshold;\r\n    }\r\n\r\n    @Override\r\n    public void await() throws InterruptedException {\r\n        lock.lockInterruptibly();\r\n        try {\r\n            if (thresholdReached) throw new IllegalStateException(&quot;threshold already reached&quot;);\r\n\r\n            count++;\r\n            if (count == threshold) {\r\n                thresholdReached = true;\r\n                isThresholdReached.signalAll();\r\n            } else {\r\n                while (!thresholdReached) {\r\n                    try {\r\n                        isThresholdReached.await();\r\n                    } catch (InterruptedException ex) {\r\n                        count--;\r\n                        throw ex;\r\n                    }\r\n                }\r\n            }\r\n        } finally {\r\n            lock.unlock();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nBoth versions are single-use. If the threshold is reached, then no more threads can call `await()` without an exception being thrown. I also implemented it so that a waiting thread that&#39;s interrupted is subtracted from the number of waiting threads. That choice was arbitrary. You could leave `count` unmodified. Or maybe you could have all other non-interrupted threads throw a `BrokenBarrierException` (similar to how [`CyclicBarrier`][1] does it).\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/CyclicBarrier.html","title":"Locking with synchronized block vs Explicit Locking","body":"<h1>The Two Locking Mechanisms</h1>\n<p>As a general rule, if you're using <code>java.util.concurrent.locks</code>, then do not use <code>synchronized</code> in the same context. The same is true in reverse. The two are separate mechanisms and are not designed to interact with each other.</p>\n<h2>synchronized</h2>\n<p>All objects in Java have an implicit &quot;monitor&quot;. When you <code>synchronize</code> on an object, you acquire that monitor. While you hold the monitor, you can call the following methods on the corresponding object instance:</p>\n<ul>\n<li><code>Object#wait()</code>, <code>Object#wait(long)</code>, <code>Object#wait(long,int)</code></li>\n<li><code>Object#notify()</code></li>\n<li><code>Object#notifyAll()</code></li>\n</ul>\n<p>Trying to call these methods on an object instance without holding that object's monitor will result in an <code>IllegalMonitorStateException</code> being thrown.</p>\n<h2>java.util.concurrent.locks</h2>\n<p>Unlike <code>synchronized</code>, this API is not built into the language. It does not care or know about the implicit monitor. Instead, a <code>Lock</code> maintains its own state regarding which thread owns it, and which threads are waiting to acquire it. To acquire and release a <code>Lock</code>, you must go through the methods defined by the <code>Lock</code> interface; you cannot use <code>synchronized</code>.</p>\n<p>One of the things the <code>java.util.concurrent.locks</code> API did was extract the concept of a &quot;condition&quot; out into its own object. This makes <code>Lock</code> a &quot;factory&quot; for <code>Condition</code> objects, and a <code>Condition</code> remains associated with its source <code>Lock</code>. Thus, a <code>Condition</code> knows whether a thread calling one of its methods owns the corresponding <code>Lock</code> or not. And similar to <code>Lock</code>, waiting and signaling must be done via the methods of <code>Condition</code>; you must not use the methods defined by the <code>Object</code> class.</p>\n<p>Trying to call methods on a <code>Condition</code> (or trying to unlock a <code>Lock</code>) without owning the <code>Lock</code> (via a call to e.g., <code>Lock#lock()</code>) will result in an <code>IllegalThreadStateException</code> being thrown.</p>\n<p>Note this API also provides <code>ReadWriteLock</code> and <code>StampedLock</code>, as well as the building blocks needed to write your own lock implementations.</p>\n<h1>Your Code</h1>\n<p>You essentially have the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.concurrent.locks.Condition;\nimport java.util.concurrent.locks.Lock;\nimport java.util.concurrent.locks.ReentrantLock;\n\npublic class Foo {\n\n    private final Lock lock = new ReentrantLock();\n    private final Condition condition = lock.newCondition();\n\n    public void bar() throws InterruptedException {\n        synchronized (lock) {\n            condition.await();\n        }\n    }\n}\n</code></pre>\n<p>This is mixing the two locking mechanisms together, which will not work properly. You <code>synchronized</code> on the <code>lock</code>, thus acquiring the object's implicit monitor. But then you call <code>await()</code> on the <code>Condition</code> object. You may own the <em>monitor</em>, but from the point-of-view of the <code>Lock</code> and <code>Condition</code>, you do not own the <em>lock</em>. Hence an <code>IllegalThreadStateException</code> being thrown.</p>\n<p>You should use <em>either</em> <code>synchronized</code> <em>or</em> <code>java.util.concurrent.locks</code>. The following is two versions of a &quot;barrier&quot; that waits for a certain number of threads to be waiting before letting them all continue on. One version uses <code>synchronized</code>, the other version uses <code>java.util.concurrent.locks</code>.</p>\n<h3><code>synchronized</code> version</h3>\n<pre class=\"lang-java prettyprint-override\"><code>public class SynchronizedBarrier implements Barrier {\n\n    private final Object lock = new Object();\n    private final int threshold;\n    private int count;\n\n    private boolean thresholdReached;\n\n    public SynchronizedBarrier(int threshold) {\n        if (threshold &lt;= 0) throw new IllegalArgumentException(&quot;threshold &lt;= 0&quot;);\n        this.threshold = threshold;\n    }\n\n    @Override\n    public void await() throws InterruptedException {\n        synchronized (lock) {\n            if (thresholdReached) throw new IllegalStateException(&quot;threshold already reached&quot;);\n\n            count++;\n            if (count == threshold) {\n                thresholdReached = true;\n                lock.notifyAll();\n            } else {\n                while (!thresholdReached) {\n                    try {\n                        lock.wait();\n                    } catch (InterruptedException ex) {\n                        count--;\n                        throw ex;\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<h3><code>java.util.concurrent.locks</code> version</h3>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.concurrent.locks.Condition;\nimport java.util.concurrent.locks.Lock;\nimport java.util.concurrent.locks.ReentrantLock;\n\npublic class LocksBarrier implements Barrier {\n\n    private final Lock lock = new ReentrantLock();\n    private final Condition isThresholdReached = lock.newCondition();\n    private final int threshold;\n    private int count;\n\n    private boolean thresholdReached;\n\n    public LocksBarrier(int threshold) {\n        if (threshold &lt;= 0) throw new IllegalArgumentException(&quot;threshold &lt;= 0&quot;);\n        this.threshold = threshold;\n    }\n\n    @Override\n    public void await() throws InterruptedException {\n        lock.lockInterruptibly();\n        try {\n            if (thresholdReached) throw new IllegalStateException(&quot;threshold already reached&quot;);\n\n            count++;\n            if (count == threshold) {\n                thresholdReached = true;\n                isThresholdReached.signalAll();\n            } else {\n                while (!thresholdReached) {\n                    try {\n                        isThresholdReached.await();\n                    } catch (InterruptedException ex) {\n                        count--;\n                        throw ex;\n                    }\n                }\n            }\n        } finally {\n            lock.unlock();\n        }\n    }\n}\n</code></pre>\n<p>Both versions are single-use. If the threshold is reached, then no more threads can call <code>await()</code> without an exception being thrown. I also implemented it so that a waiting thread that's interrupted is subtracted from the number of waiting threads. That choice was arbitrary. You could leave <code>count</code> unmodified. Or maybe you could have all other non-interrupted threads throw a <code>BrokenBarrierException</code> (similar to how <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/CyclicBarrier.html\" rel=\"nofollow noreferrer\"><code>CyclicBarrier</code></a> does it).</p>\n"}],"owner":{"account_id":9109172,"reputation":3,"user_id":6778531,"display_name":"gaurav"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76725302,"answer_count":1,"score":0,"last_activity_date":1689802648,"creation_date":1689796418,"question_id":76724780,"body_markdown":"I implemented a barrier in java using `synchronized` block and got `IllegalMonitorStateException`. On replacing that `synchronized` block with explicit locking with `lock.lock()` and `lock.unlock()` in `await` method, the code works as expected.\r\n\r\nI could not figure out what exactly is happening different between the cases. Can someone help me with understanding this?\r\n\r\n```\r\npackage org.example;\r\n\r\nimport java.util.concurrent.locks.Condition;\r\nimport java.util.concurrent.locks.Lock;\r\nimport java.util.concurrent.locks.ReentrantLock;\r\n\r\npublic class Barrier {\r\n    private int count;\r\n    private int threshold;\r\n    private final Lock lock;\r\n    int toBeReleased;\r\n    Condition incrementCondition;\r\n    Condition releaseCondition;\r\n    public Barrier(int threshold) {\r\n        this.count = 0;\r\n        this.toBeReleased = 0;\r\n        this.threshold = threshold;\r\n        this.lock = new ReentrantLock();\r\n        this.incrementCondition = lock.newCondition();\r\n        this.releaseCondition = lock.newCondition();\r\n    }\r\n    public void await () throws InterruptedException {\r\n-        synchronized(lock) {\r\n+           lock.lock();\r\n            while (count == threshold) {\r\n                incrementCondition.await();\r\n            }\r\n            ++count;\r\n            if (count == threshold) {\r\n                toBeReleased = threshold;\r\n                releaseCondition.signalAll();\r\n            } else {\r\n                // Note the usage of await/signal and not wait/notify\r\n                releaseCondition.await();\r\n            }\r\n            toBeReleased--;\r\n            if (toBeReleased == 0) {\r\n                count = 0;\r\n                incrementCondition.signalAll();\r\n            }\r\n+           lock.unlock();\r\n-        }\r\n    }\r\n\r\n    public static void main(String[] args) throws InterruptedException {\r\n        final Barrier barrier = new Barrier(3);\r\n\r\n        Thread p1 = new Thread(new Runnable() {\r\n            public void run() {\r\n                try {\r\n                    System.out.println(&quot;Thread 1&quot;);\r\n                    barrier.await();\r\n                    System.out.println(&quot;Thread 1&quot;);\r\n                    barrier.await();\r\n                    System.out.println(&quot;Thread 1&quot;);\r\n                    barrier.await();\r\n                } catch (InterruptedException ignored) {}\r\n            }\r\n        });\r\n\r\n        Thread p2 = new Thread(new Runnable() {\r\n            public void run() {\r\n                try {\r\n                    Thread.sleep(500);\r\n                    System.out.println(&quot;Thread 2&quot;);\r\n                    barrier.await();\r\n                    Thread.sleep(500);\r\n                    System.out.println(&quot;Thread 2&quot;);\r\n                    barrier.await();\r\n                    Thread.sleep(500);\r\n                    System.out.println(&quot;Thread 2&quot;);\r\n                    barrier.await();\r\n                } catch (InterruptedException ignored) {}\r\n            }\r\n        });\r\n\r\n        Thread p3 = new Thread(new Runnable() {\r\n            public void run() {\r\n                try {\r\n                    Thread.sleep(1500);\r\n                    System.out.println(&quot;Thread 3&quot;);\r\n                    barrier.await();\r\n                    Thread.sleep(1500);\r\n                    System.out.println(&quot;Thread 3&quot;);\r\n                    barrier.await();\r\n                    Thread.sleep(1500);\r\n                    System.out.println(&quot;Thread 3&quot;);\r\n                    barrier.await();\r\n                } catch (InterruptedException ie) {}\r\n            }\r\n        });\r\n\r\n        p1.start();\r\n        p2.start();\r\n        p3.start();\r\n\r\n        p1.join();\r\n        p2.join();\r\n        p3.join();\r\n    }\r\n}\r\n```\r\n","title":"Locking with synchronized block vs Explicit Locking","body":"<p>I implemented a barrier in java using <code>synchronized</code> block and got <code>IllegalMonitorStateException</code>. On replacing that <code>synchronized</code> block with explicit locking with <code>lock.lock()</code> and <code>lock.unlock()</code> in <code>await</code> method, the code works as expected.</p>\n<p>I could not figure out what exactly is happening different between the cases. Can someone help me with understanding this?</p>\n<pre><code>package org.example;\n\nimport java.util.concurrent.locks.Condition;\nimport java.util.concurrent.locks.Lock;\nimport java.util.concurrent.locks.ReentrantLock;\n\npublic class Barrier {\n    private int count;\n    private int threshold;\n    private final Lock lock;\n    int toBeReleased;\n    Condition incrementCondition;\n    Condition releaseCondition;\n    public Barrier(int threshold) {\n        this.count = 0;\n        this.toBeReleased = 0;\n        this.threshold = threshold;\n        this.lock = new ReentrantLock();\n        this.incrementCondition = lock.newCondition();\n        this.releaseCondition = lock.newCondition();\n    }\n    public void await () throws InterruptedException {\n-        synchronized(lock) {\n+           lock.lock();\n            while (count == threshold) {\n                incrementCondition.await();\n            }\n            ++count;\n            if (count == threshold) {\n                toBeReleased = threshold;\n                releaseCondition.signalAll();\n            } else {\n                // Note the usage of await/signal and not wait/notify\n                releaseCondition.await();\n            }\n            toBeReleased--;\n            if (toBeReleased == 0) {\n                count = 0;\n                incrementCondition.signalAll();\n            }\n+           lock.unlock();\n-        }\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n        final Barrier barrier = new Barrier(3);\n\n        Thread p1 = new Thread(new Runnable() {\n            public void run() {\n                try {\n                    System.out.println(&quot;Thread 1&quot;);\n                    barrier.await();\n                    System.out.println(&quot;Thread 1&quot;);\n                    barrier.await();\n                    System.out.println(&quot;Thread 1&quot;);\n                    barrier.await();\n                } catch (InterruptedException ignored) {}\n            }\n        });\n\n        Thread p2 = new Thread(new Runnable() {\n            public void run() {\n                try {\n                    Thread.sleep(500);\n                    System.out.println(&quot;Thread 2&quot;);\n                    barrier.await();\n                    Thread.sleep(500);\n                    System.out.println(&quot;Thread 2&quot;);\n                    barrier.await();\n                    Thread.sleep(500);\n                    System.out.println(&quot;Thread 2&quot;);\n                    barrier.await();\n                } catch (InterruptedException ignored) {}\n            }\n        });\n\n        Thread p3 = new Thread(new Runnable() {\n            public void run() {\n                try {\n                    Thread.sleep(1500);\n                    System.out.println(&quot;Thread 3&quot;);\n                    barrier.await();\n                    Thread.sleep(1500);\n                    System.out.println(&quot;Thread 3&quot;);\n                    barrier.await();\n                    Thread.sleep(1500);\n                    System.out.println(&quot;Thread 3&quot;);\n                    barrier.await();\n                } catch (InterruptedException ie) {}\n            }\n        });\n\n        p1.start();\n        p2.start();\n        p3.start();\n\n        p1.join();\n        p2.join();\n        p3.join();\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-mvc","spring-security"],"comments":[{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1689840842,"post_id":76725307,"comment_id":135271165,"body_markdown":"using jwts as sessions is a security risk, thats why there is no implementation of it in spring security. Also several things are deprecated in this code. This entire implementation is bad practice. Please instead read and follow the spring security documentation on how to implement proper authentication, using either cookies or oauth2. Whatever blog post you have followed has clearly no idea how security works.","body":"using jwts as sessions is a security risk, thats why there is no implementation of it in spring security. Also several things are deprecated in this code. This entire implementation is bad practice. Please instead read and follow the spring security documentation on how to implement proper authentication, using either cookies or oauth2. Whatever blog post you have followed has clearly no idea how security works."},{"owner":{"account_id":25431205,"reputation":1,"user_id":19235571,"display_name":"deven parekh"},"score":0,"creation_date":1689867992,"post_id":76725307,"comment_id":135277383,"body_markdown":"@Toerktumlare thanks for letting me know. Ofcourse i am trying the spring security for the first time which is why i have hit the roadblock. Can you guide me in a proper direction to implement authorization and authentication in my application? Again, Thanks a lot for the help!","body":"@Toerktumlare thanks for letting me know. Ofcourse i am trying the spring security for the first time which is why i have hit the roadblock. Can you guide me in a proper direction to implement authorization and authentication in my application? Again, Thanks a lot for the help!"},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1689887237,"post_id":76725307,"comment_id":135280912,"body_markdown":"Stack overflow is a Q&amp;A site, if you are a beginner i suggest you start out with the officiell documentation. We cant teach you spring security basics, thats what the docs are for. You have to do the work, if you have questions about the docs that is not clear feel free to ask here on SO","body":"Stack overflow is a Q&amp;A site, if you are a beginner i suggest you start out with the officiell documentation. We cant teach you spring security basics, thats what the docs are for. You have to do the work, if you have questions about the docs that is not clear feel free to ask here on SO"}],"owner":{"account_id":25431205,"reputation":1,"user_id":19235571,"display_name":"deven parekh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":164,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689802128,"creation_date":1689802128,"question_id":76725307,"body_markdown":"the token seems to be generating fine as i check it with jwt.io and it seems good to go. But when i try to access any endpoint after authorization, it says 403 forbidden in postman and when i check the console, it says malformed token exception. I tried everything but it doesn&#39;t seem to go away. I want to do a role based authorization so i try to add the Role tag in claims to retrieve from the token and authorize. but it is not working.\r\n\r\nAny help is greatly appreciated. Below is the codebase for the reference.\r\n[![console output.\r\n```\r\npackage com.employeedirectory.Employee.Service;\r\n\r\nimport com.employeedirectory.UserDetails.UserDetailsEntity.UserInfo;\r\nimport com.employeedirectory.UserDetails.UserDetailsRepository.UserInfoRepository;\r\nimport com.employeedirectory.UserDetails.UserDetailsService.UserInfoUserDetails;\r\nimport io.jsonwebtoken.*;\r\nimport io.jsonwebtoken.impl.TextCodec;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.security.core.GrantedAuthority;\r\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.stereotype.Component;\r\nimport java.util.*;\r\nimport java.util.function.Function;\r\n\r\n@Component\r\npublic class JwtService {\r\n    private String secret;\r\n    private int jwtExpirationInMs;\r\n\r\n    @Autowired\r\n    UserInfoRepository userInfoRepository;\r\n\r\n    @Value(&quot;${jwt.secret}&quot;)\r\n    public void setSecret(String secret){\r\n        this.secret = secret;\r\n    }\r\n\r\n    @Value(&quot;${jwt.jwtExpirationInMs}&quot;)\r\n    public void setJwtExpirationInMs(int jwtExpirationInMs){\r\n        this.jwtExpirationInMs=jwtExpirationInMs;\r\n    }\r\n\r\n    public String extractUsername(String token) {\r\n        return extractClaim(token, Claims::getSubject);\r\n    }\r\n\r\n    public Date extractExpiration(String token) {\r\n        return extractClaim(token, Claims::getExpiration);\r\n    }\r\n\r\n    public &lt;T&gt; T extractClaim(String token, Function&lt;Claims, T&gt; claimsResolver) {\r\n        final Claims claims = extractAllClaims(token);\r\n        return claimsResolver.apply(claims);\r\n    }\r\n\r\n    private Claims extractAllClaims(String token) {\r\n        return Jwts.parser()\r\n                .setSigningKey(secret)\r\n                .parseClaimsJws(token)\r\n                .getBody();\r\n    }\r\n\r\n    private Boolean isTokenExpired(String token) {\r\n        return extractExpiration(token).before(new Date());\r\n    }\r\n\r\n    public Boolean validateToken(String token, UserDetails userDetails) {\r\n            final String username = extractUsername(token);\r\n            return (username.equals(userDetails.getUsername()) &amp;&amp; !isTokenExpired(token));\r\n    }\r\n\r\n\r\n    public String generateToken(UserDetails userDetails) {\r\n\r\n        Optional&lt;UserInfo&gt; userInfo = userInfoRepository.findByName(userDetails.getUsername());\r\n        String userEmail = userInfo.get().getEmail();\r\n        Map&lt;String,Object&gt; claims=new HashMap&lt;&gt;();\r\n        Collection&lt;? extends GrantedAuthority&gt; roles = userDetails.getAuthorities();\r\n            claims.put(&quot;Email&quot;,userEmail);\r\n            if (roles.contains(new SimpleGrantedAuthority(&quot;ADMIN&quot;)) || roles.contains(new SimpleGrantedAuthority(&quot;admin&quot;))){\r\n                claims.put(&quot;Role&quot;,&quot;ADMIN&quot;);\r\n            }\r\n            if (roles.contains(new SimpleGrantedAuthority(&quot;USER&quot;)) || roles.contains(new SimpleGrantedAuthority(&quot;user&quot;))){\r\n                claims.put(&quot;Role&quot;,&quot;USER&quot;);\r\n            }\r\n        return createToken(claims,userDetails.getUsername());\r\n    }\r\n\r\n    private String createToken(Map&lt;String, Object&gt; claims, String userName){\r\n        return Jwts.builder()\r\n                    .setClaims(claims)\r\n                    .setSubject(userName)\r\n                    .setIssuedAt(new Date(System.currentTimeMillis()))\r\n                    .setExpiration(new Date(System.currentTimeMillis()+jwtExpirationInMs))\r\n                    .signWith(SignatureAlgorithm.HS256, TextCodec.BASE64.decode(secret)).compact();\r\n    }\r\n}\r\n```\r\n](https://i.stack.imgur.com/uqucJ.png)](https://i.stack.imgur.com/uqucJ.png)\r\n\r\n\r\n```\r\npackage com.employeedirectory.Employee.Filter;\r\n\r\nimport com.employeedirectory.Employee.Service.JwtService;\r\nimport com.employeedirectory.UserDetails.UserDetailsService.UserInfoUserDetailsService;\r\nimport javax.servlet.FilterChain;\r\nimport javax.servlet.ServletException;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\n\r\nimport io.jsonwebtoken.Claims;\r\nimport io.jsonwebtoken.Jwts;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\r\nimport org.springframework.security.core.context.SecurityContextHolder;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.security.web.authentication.WebAuthenticationDetailsSource;\r\nimport org.springframework.stereotype.Component;\r\nimport org.springframework.web.filter.OncePerRequestFilter;\r\nimport java.io.IOException;\r\n\r\n@Component\r\npublic class JwtAuthFilter extends OncePerRequestFilter {\r\n\r\n    private String secret;\r\n\r\n    @Value(&quot;${jwt.secret}&quot;)\r\n    public void setSecret(String secret){\r\n        this.secret = secret;\r\n    }\r\n\r\n    @Autowired\r\n    private JwtService jwtService;\r\n\r\n    @Autowired\r\n    private UserInfoUserDetailsService userDetailsService;\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\r\n        String authHeader = request.getHeader(&quot;Authorization&quot;);\r\n        String token = null;\r\n        String username = null;\r\n        String role = null;\r\n\r\n        if (authHeader != null &amp;&amp; authHeader.startsWith(&quot;Bearer &quot;)) {\r\n            System.out.println(&quot;Inside doFilterInternal method.&quot;);\r\n            token = authHeader.substring(7);\r\n            username = jwtService.extractUsername(token);\r\n            Claims claims = Jwts.parser().setSigningKey(secret).parseClaimsJws(token).getBody();\r\n            role = claims.get(&quot;Role&quot;).toString();\r\n        }\r\n\r\n        if (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\r\n            UserDetails userDetails = this.userDetailsService.loadUserByUsername(username);\r\n            if (jwtService.validateToken(token, userDetails)) {\r\n                UsernamePasswordAuthenticationToken authToken = new UsernamePasswordAuthenticationToken(userDetails, null, userDetails.getAuthorities());\r\n                authToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n                SecurityContextHolder.getContext().setAuthentication(authToken);\r\n            }\r\n            request.setAttribute(&quot;Role&quot;,role);\r\n        }\r\n        filterChain.doFilter(request, response);\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n```\r\npackage com.employeedirectory.Employee.Config;\r\n\r\nimport com.employeedirectory.Employee.Filter.JwtAuthFilter;\r\nimport com.employeedirectory.UserDetails.UserDetailsService.UserInfoUserDetailsService;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.authentication.AuthenticationManager;\r\nimport org.springframework.security.authentication.AuthenticationProvider;\r\nimport org.springframework.security.authentication.dao.DaoAuthenticationProvider;\r\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\nimport org.springframework.security.config.http.SessionCreationPolicy;\r\nimport org.springframework.security.core.userdetails.UserDetailsService;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\r\n\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    @Autowired\r\n    private UserInfoUserDetailsService userInfoUserDetailsService;\r\n\r\n    @Autowired\r\n    JwtAuthFilter jwtAuthFilter;\r\n\r\n    @Bean\r\n    public UserDetailsService userDetailsService(){\r\n        return new UserInfoUserDetailsService();\r\n    }\r\n\r\n    @Override\r\n    public void configure(HttpSecurity http) throws Exception {\r\n//        http.csrf().disable()\r\n//                .authorizeRequests().antMatchers(&quot;/&quot;,&quot;/newUser&quot;,&quot;/authenticate&quot;).permitAll()\r\n//                .and()\r\n//                .authorizeRequests()\r\n//                .antMatchers(&quot;/api/v1/**&quot;).hasAnyAuthority(&quot;ADMIN&quot;,&quot;admin&quot;,&quot;USER&quot;,&quot;user&quot;).anyRequest().authenticated().\r\n//                and().sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and().addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class);\r\n\r\n        http.csrf().disable().sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n        http.authorizeRequests()\r\n                .antMatchers(&quot;/&quot;,&quot;/authenticate&quot;,&quot;/newUser&quot;).permitAll()\r\n                .and()\r\n                .authorizeRequests()\r\n                .antMatchers(&quot;api/v1/**&quot;).access(&quot;hasAnyRole(&#39;ADMIN&#39;,&#39;USER&#39;)&quot;)\r\n                .antMatchers(&quot;api/v2/**&quot;).access(&quot;hasRole(&#39;ADMIN&#39;)&quot;)\r\n                .anyRequest().authenticated();\r\n        http.addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class);\r\n    }\r\n\r\n    @Override\r\n    public void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n        auth.authenticationProvider(authenticationProvider());\r\n    }\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder(){\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n\r\n    @Bean\r\n    public AuthenticationProvider authenticationProvider(){\r\n        DaoAuthenticationProvider authenticationProvider = new DaoAuthenticationProvider();\r\n        authenticationProvider.setUserDetailsService(userDetailsService());\r\n        authenticationProvider.setPasswordEncoder(passwordEncoder());\r\n        return authenticationProvider;\r\n    }\r\n\r\n    @Bean\r\n    @Override\r\n    public AuthenticationManager authenticationManagerBean() throws Exception {\r\n        return super.authenticationManagerBean();\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n```\r\npackage com.employeedirectory.UserDetails.UserDetailsService;\r\n\r\nimport com.employeedirectory.UserDetails.UserDetailsEntity.UserInfo;\r\nimport com.employeedirectory.UserDetails.UserDetailsRepository.UserInfoRepository;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.security.core.userdetails.UserDetailsService;\r\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\r\nimport org.springframework.stereotype.Component;\r\nimport java.util.Optional;\r\n\r\n@Component\r\npublic class UserInfoUserDetailsService implements UserDetailsService {\r\n    @Autowired\r\n    UserInfoRepository repository;\r\n    @Override\r\n    public UserDetails loadUserByUsername(String userName) throws UsernameNotFoundException {\r\n        Optional&lt;UserInfo&gt; userInfo = repository.findByName(userName);\r\n        return userInfo.map(UserInfoUserDetails::new)\r\n                .orElseThrow(()-&gt; new UsernameNotFoundException(&quot;user not found &quot; + userName));\r\n    }\r\n}\r\n\r\n\r\n```\r\n\r\n\r\nTried making all kinds of changes to the filter. Did Decoding and Encoding too. I dont want to go with @PreAuthorize annotation for roles as it wont be feasible for too many apis. ","title":"com.fasterxml.jackson.core.JsonParseException: Illegal character (CTRL-CHAR, code 5): only regular white space (\\r, \\n, \\t) is allowed between tokens","body":"<p>the token seems to be generating fine as i check it with jwt.io and it seems good to go. But when i try to access any endpoint after authorization, it says 403 forbidden in postman and when i check the console, it says malformed token exception. I tried everything but it doesn't seem to go away. I want to do a role based authorization so i try to add the Role tag in claims to retrieve from the token and authorize. but it is not working.</p>\n<p>Any help is greatly appreciated. Below is the codebase for the reference.\n[![console output.</p>\n<pre><code>package com.employeedirectory.Employee.Service;\n\nimport com.employeedirectory.UserDetails.UserDetailsEntity.UserInfo;\nimport com.employeedirectory.UserDetails.UserDetailsRepository.UserInfoRepository;\nimport com.employeedirectory.UserDetails.UserDetailsService.UserInfoUserDetails;\nimport io.jsonwebtoken.*;\nimport io.jsonwebtoken.impl.TextCodec;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.stereotype.Component;\nimport java.util.*;\nimport java.util.function.Function;\n\n@Component\npublic class JwtService {\n    private String secret;\n    private int jwtExpirationInMs;\n\n    @Autowired\n    UserInfoRepository userInfoRepository;\n\n    @Value(&quot;${jwt.secret}&quot;)\n    public void setSecret(String secret){\n        this.secret = secret;\n    }\n\n    @Value(&quot;${jwt.jwtExpirationInMs}&quot;)\n    public void setJwtExpirationInMs(int jwtExpirationInMs){\n        this.jwtExpirationInMs=jwtExpirationInMs;\n    }\n\n    public String extractUsername(String token) {\n        return extractClaim(token, Claims::getSubject);\n    }\n\n    public Date extractExpiration(String token) {\n        return extractClaim(token, Claims::getExpiration);\n    }\n\n    public &lt;T&gt; T extractClaim(String token, Function&lt;Claims, T&gt; claimsResolver) {\n        final Claims claims = extractAllClaims(token);\n        return claimsResolver.apply(claims);\n    }\n\n    private Claims extractAllClaims(String token) {\n        return Jwts.parser()\n                .setSigningKey(secret)\n                .parseClaimsJws(token)\n                .getBody();\n    }\n\n    private Boolean isTokenExpired(String token) {\n        return extractExpiration(token).before(new Date());\n    }\n\n    public Boolean validateToken(String token, UserDetails userDetails) {\n            final String username = extractUsername(token);\n            return (username.equals(userDetails.getUsername()) &amp;&amp; !isTokenExpired(token));\n    }\n\n\n    public String generateToken(UserDetails userDetails) {\n\n        Optional&lt;UserInfo&gt; userInfo = userInfoRepository.findByName(userDetails.getUsername());\n        String userEmail = userInfo.get().getEmail();\n        Map&lt;String,Object&gt; claims=new HashMap&lt;&gt;();\n        Collection&lt;? extends GrantedAuthority&gt; roles = userDetails.getAuthorities();\n            claims.put(&quot;Email&quot;,userEmail);\n            if (roles.contains(new SimpleGrantedAuthority(&quot;ADMIN&quot;)) || roles.contains(new SimpleGrantedAuthority(&quot;admin&quot;))){\n                claims.put(&quot;Role&quot;,&quot;ADMIN&quot;);\n            }\n            if (roles.contains(new SimpleGrantedAuthority(&quot;USER&quot;)) || roles.contains(new SimpleGrantedAuthority(&quot;user&quot;))){\n                claims.put(&quot;Role&quot;,&quot;USER&quot;);\n            }\n        return createToken(claims,userDetails.getUsername());\n    }\n\n    private String createToken(Map&lt;String, Object&gt; claims, String userName){\n        return Jwts.builder()\n                    .setClaims(claims)\n                    .setSubject(userName)\n                    .setIssuedAt(new Date(System.currentTimeMillis()))\n                    .setExpiration(new Date(System.currentTimeMillis()+jwtExpirationInMs))\n                    .signWith(SignatureAlgorithm.HS256, TextCodec.BASE64.decode(secret)).compact();\n    }\n}\n</code></pre>\n<p>](<a href=\"https://i.stack.imgur.com/uqucJ.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/uqucJ.png</a>)](<a href=\"https://i.stack.imgur.com/uqucJ.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/uqucJ.png</a>)</p>\n<pre><code>package com.employeedirectory.Employee.Filter;\n\nimport com.employeedirectory.Employee.Service.JwtService;\nimport com.employeedirectory.UserDetails.UserDetailsService.UserInfoUserDetailsService;\nimport javax.servlet.FilterChain;\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\nimport io.jsonwebtoken.Claims;\nimport io.jsonwebtoken.Jwts;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.web.authentication.WebAuthenticationDetailsSource;\nimport org.springframework.stereotype.Component;\nimport org.springframework.web.filter.OncePerRequestFilter;\nimport java.io.IOException;\n\n@Component\npublic class JwtAuthFilter extends OncePerRequestFilter {\n\n    private String secret;\n\n    @Value(&quot;${jwt.secret}&quot;)\n    public void setSecret(String secret){\n        this.secret = secret;\n    }\n\n    @Autowired\n    private JwtService jwtService;\n\n    @Autowired\n    private UserInfoUserDetailsService userDetailsService;\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\n        String authHeader = request.getHeader(&quot;Authorization&quot;);\n        String token = null;\n        String username = null;\n        String role = null;\n\n        if (authHeader != null &amp;&amp; authHeader.startsWith(&quot;Bearer &quot;)) {\n            System.out.println(&quot;Inside doFilterInternal method.&quot;);\n            token = authHeader.substring(7);\n            username = jwtService.extractUsername(token);\n            Claims claims = Jwts.parser().setSigningKey(secret).parseClaimsJws(token).getBody();\n            role = claims.get(&quot;Role&quot;).toString();\n        }\n\n        if (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\n            UserDetails userDetails = this.userDetailsService.loadUserByUsername(username);\n            if (jwtService.validateToken(token, userDetails)) {\n                UsernamePasswordAuthenticationToken authToken = new UsernamePasswordAuthenticationToken(userDetails, null, userDetails.getAuthorities());\n                authToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n                SecurityContextHolder.getContext().setAuthentication(authToken);\n            }\n            request.setAttribute(&quot;Role&quot;,role);\n        }\n        filterChain.doFilter(request, response);\n    }\n}\n</code></pre>\n<pre><code>package com.employeedirectory.Employee.Config;\n\nimport com.employeedirectory.Employee.Filter.JwtAuthFilter;\nimport com.employeedirectory.UserDetails.UserDetailsService.UserInfoUserDetailsService;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.authentication.AuthenticationProvider;\nimport org.springframework.security.authentication.dao.DaoAuthenticationProvider;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\nimport org.springframework.security.config.http.SessionCreationPolicy;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\n\n@Configuration\n@EnableWebSecurity\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Autowired\n    private UserInfoUserDetailsService userInfoUserDetailsService;\n\n    @Autowired\n    JwtAuthFilter jwtAuthFilter;\n\n    @Bean\n    public UserDetailsService userDetailsService(){\n        return new UserInfoUserDetailsService();\n    }\n\n    @Override\n    public void configure(HttpSecurity http) throws Exception {\n//        http.csrf().disable()\n//                .authorizeRequests().antMatchers(&quot;/&quot;,&quot;/newUser&quot;,&quot;/authenticate&quot;).permitAll()\n//                .and()\n//                .authorizeRequests()\n//                .antMatchers(&quot;/api/v1/**&quot;).hasAnyAuthority(&quot;ADMIN&quot;,&quot;admin&quot;,&quot;USER&quot;,&quot;user&quot;).anyRequest().authenticated().\n//                and().sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and().addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class);\n\n        http.csrf().disable().sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n        http.authorizeRequests()\n                .antMatchers(&quot;/&quot;,&quot;/authenticate&quot;,&quot;/newUser&quot;).permitAll()\n                .and()\n                .authorizeRequests()\n                .antMatchers(&quot;api/v1/**&quot;).access(&quot;hasAnyRole('ADMIN','USER')&quot;)\n                .antMatchers(&quot;api/v2/**&quot;).access(&quot;hasRole('ADMIN')&quot;)\n                .anyRequest().authenticated();\n        http.addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class);\n    }\n\n    @Override\n    public void configure(AuthenticationManagerBuilder auth) throws Exception {\n        auth.authenticationProvider(authenticationProvider());\n    }\n    @Bean\n    public PasswordEncoder passwordEncoder(){\n        return new BCryptPasswordEncoder();\n    }\n\n    @Bean\n    public AuthenticationProvider authenticationProvider(){\n        DaoAuthenticationProvider authenticationProvider = new DaoAuthenticationProvider();\n        authenticationProvider.setUserDetailsService(userDetailsService());\n        authenticationProvider.setPasswordEncoder(passwordEncoder());\n        return authenticationProvider;\n    }\n\n    @Bean\n    @Override\n    public AuthenticationManager authenticationManagerBean() throws Exception {\n        return super.authenticationManagerBean();\n    }\n}\n\n</code></pre>\n<pre><code>package com.employeedirectory.UserDetails.UserDetailsService;\n\nimport com.employeedirectory.UserDetails.UserDetailsEntity.UserInfo;\nimport com.employeedirectory.UserDetails.UserDetailsRepository.UserInfoRepository;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\nimport org.springframework.stereotype.Component;\nimport java.util.Optional;\n\n@Component\npublic class UserInfoUserDetailsService implements UserDetailsService {\n    @Autowired\n    UserInfoRepository repository;\n    @Override\n    public UserDetails loadUserByUsername(String userName) throws UsernameNotFoundException {\n        Optional&lt;UserInfo&gt; userInfo = repository.findByName(userName);\n        return userInfo.map(UserInfoUserDetails::new)\n                .orElseThrow(()-&gt; new UsernameNotFoundException(&quot;user not found &quot; + userName));\n    }\n}\n\n\n</code></pre>\n<p>Tried making all kinds of changes to the filter. Did Decoding and Encoding too. I dont want to go with @PreAuthorize annotation for roles as it wont be feasible for too many apis.</p>\n"},{"tags":["java","selenium-webdriver","cucumber"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1689775256,"post_id":76722108,"comment_id":135261382,"body_markdown":"I am no expert in Cucumber, but shouldn&#39;t he class be annotated with `@CucumberContextConfiguration` and possibly configure the glue, where then the methods with `@Given(...)`, `@When(...)`, `@Then(...)` reside? See [this `github.com` repository](https://github.com/turing85/spring-file-upload/tree/main/src/test) for an example.","body":"I am no expert in Cucumber, but shouldn&#39;t he class be annotated with <code>@CucumberContextConfiguration</code> and possibly configure the glue, where then the methods with <code>@Given(...)</code>, <code>@When(...)</code>, <code>@Then(...)</code> reside? See <a href=\"https://github.com/turing85/spring-file-upload/tree/main/src/test\" rel=\"nofollow noreferrer\">this <code>github.com</code> repository</a> for an example."}],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689801966,"creation_date":1689801966,"answer_id":76725298,"question_id":76722108,"body_markdown":"In the feature file if the line is:\r\n\r\n\tGiven estoy dentro de SEITEM, voy a la secci&#243;n de generar cotizaciones\r\n\t\r\nshould always be implemented as:\r\n\r\n\t@Test\r\n\t@Given(&quot;estoy dentro de SEITEM, voy a la secci&#243;n de generar cotizaciones&quot;)\r\n\tpublic void estoy_dentro_de_seitem_voy_a_la_secci&#243;n_de_generar_cotizaciones() {\r\n\t    driver.navigate().to(&quot;http://seitem.loc/agregarCotizacion.php&quot;);\r\n            assertEquals(&quot;Cotizaciones&quot;, driver.getTitle());\r\n\t}","title":"You can implement this step using the snippet(s) below?","body":"<p>In the feature file if the line is:</p>\n<pre><code>Given estoy dentro de SEITEM, voy a la sección de generar cotizaciones\n</code></pre>\n<p>should always be implemented as:</p>\n<pre><code>@Test\n@Given(&quot;estoy dentro de SEITEM, voy a la sección de generar cotizaciones&quot;)\npublic void estoy_dentro_de_seitem_voy_a_la_sección_de_generar_cotizaciones() {\n    driver.navigate().to(&quot;http://seitem.loc/agregarCotizacion.php&quot;);\n        assertEquals(&quot;Cotizaciones&quot;, driver.getTitle());\n}\n</code></pre>\n"}],"owner":{"account_id":20232304,"reputation":1,"user_id":14838539,"display_name":"Juan Manuel Adarve Cifuentes"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1689801966,"creation_date":1689775027,"question_id":76722108,"body_markdown":"I have this feature file:\r\n\r\n```CUCUMBER\r\nFeature: Agregar Cotizacion\r\n  Scenario: Una vez dentro de SEITEM y pasar por el login, me dirijo a la secci&#243;n de generar cotizaciones\r\n    Given estoy dentro de SEITEM, voy a la secci&#243;n de generar cotizaciones\r\n```\r\n\r\nand the implementation file like this:\r\n\r\n\r\n```JAVA\r\npackage com.uva3;\r\n\r\npublic class CotizacionStepDefinitionsTest {\r\n    private WebDriver driver;\r\n\r\n    @Before\r\n    public void initialize() {\r\n        driver = new ChromeDriver();\r\n        driver.get(&quot;http://seitem.loc&quot;);\r\n        driver.findElement(By.id(&quot;login&quot;)).sendKeys(&quot;admin&quot;);\r\n        driver.findElement(By.id(&quot;password&quot;)).sendKeys(&quot;1&quot;);\r\n        driver.findElement(By.cssSelector(&quot;[value=&#39;Ingresar&#39;]&quot;)).click();\r\n    }\r\n\r\n    @Test\r\n    @Given(&quot;estoy dentro de SEITEM, voy a la secci&#243;n de generar cotizaciones&quot;)\r\n    public void irGenerarCotizacionTest() {\r\n        driver.navigate().to(&quot;http://seitem.loc/agregarCotizacion.php&quot;);\r\n        assertEquals(&quot;Cotizaciones&quot;, driver.getTitle());\r\n    }\r\n\r\n    @AfterEach\r\n    public void finalizarProceso() throws InterruptedException {\r\n        Thread.sleep(2000);\r\n        driver.quit();\r\n    }\r\n}\r\n```\r\n\r\nwhen it is running this happens:\r\n \r\n```\r\nStep undefined\r\nYou can implement this step using the snippet(s) below:\r\n\r\n@Given(&quot;estoy dentro de SEITEM, voy a la secci&#243;n de generar cotizaciones&quot;)\r\npublic void estoy_dentro_de_seitem_voy_a_la_secci&#243;n_de_generar_cotizaciones() {\r\n    // Write code here that turns the phrase above into concrete actions\r\n    throw new io.cucumber.java.PendingException();\r\n}\r\n\r\n\r\nUndefined scenarios:\r\nfile:///C:/Users/Juan%20Manuel%20Adarve%20C/IdeaProjects/standardTest/src/test/resources/cotizacion.feature:2 # Una vez dentro de SEITEM y pasar por el login, me dirijo a la secci&#243;n de generar cotizaciones\r\n\r\n1 Scenarios (1 undefined)\r\n1 Steps (1 undefined)\r\n0m8,606s\r\n```\r\n\r\nhow can i do that name of method not equals to **given** value?\r\n\r\n\r\n\r\nI try change the **glue** in @CucumberOptions, but continue problem","title":"You can implement this step using the snippet(s) below?","body":"<p>I have this feature file:</p>\n<pre><code>Feature: Agregar Cotizacion\n  Scenario: Una vez dentro de SEITEM y pasar por el login, me dirijo a la sección de generar cotizaciones\n    Given estoy dentro de SEITEM, voy a la sección de generar cotizaciones\n</code></pre>\n<p>and the implementation file like this:</p>\n<pre><code>package com.uva3;\n\npublic class CotizacionStepDefinitionsTest {\n    private WebDriver driver;\n\n    @Before\n    public void initialize() {\n        driver = new ChromeDriver();\n        driver.get(&quot;http://seitem.loc&quot;);\n        driver.findElement(By.id(&quot;login&quot;)).sendKeys(&quot;admin&quot;);\n        driver.findElement(By.id(&quot;password&quot;)).sendKeys(&quot;1&quot;);\n        driver.findElement(By.cssSelector(&quot;[value='Ingresar']&quot;)).click();\n    }\n\n    @Test\n    @Given(&quot;estoy dentro de SEITEM, voy a la sección de generar cotizaciones&quot;)\n    public void irGenerarCotizacionTest() {\n        driver.navigate().to(&quot;http://seitem.loc/agregarCotizacion.php&quot;);\n        assertEquals(&quot;Cotizaciones&quot;, driver.getTitle());\n    }\n\n    @AfterEach\n    public void finalizarProceso() throws InterruptedException {\n        Thread.sleep(2000);\n        driver.quit();\n    }\n}\n</code></pre>\n<p>when it is running this happens:</p>\n<pre><code>Step undefined\nYou can implement this step using the snippet(s) below:\n\n@Given(&quot;estoy dentro de SEITEM, voy a la sección de generar cotizaciones&quot;)\npublic void estoy_dentro_de_seitem_voy_a_la_sección_de_generar_cotizaciones() {\n    // Write code here that turns the phrase above into concrete actions\n    throw new io.cucumber.java.PendingException();\n}\n\n\nUndefined scenarios:\nfile:///C:/Users/Juan%20Manuel%20Adarve%20C/IdeaProjects/standardTest/src/test/resources/cotizacion.feature:2 # Una vez dentro de SEITEM y pasar por el login, me dirijo a la sección de generar cotizaciones\n\n1 Scenarios (1 undefined)\n1 Steps (1 undefined)\n0m8,606s\n</code></pre>\n<p>how can i do that name of method not equals to <strong>given</strong> value?</p>\n<p>I try change the <strong>glue</strong> in @CucumberOptions, but continue problem</p>\n"},{"tags":["java","recursion"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":2,"creation_date":1376680277,"post_id":18280442,"comment_id":26816161,"body_markdown":"You want to use recursion and you have a working solution that uses recursion? I don&#39;t see the problem.","body":"You want to use recursion and you have a working solution that uses recursion? I don&#39;t see the problem."},{"owner":{"account_id":2132213,"reputation":11287,"user_id":1892802,"accept_rate":100,"display_name":"ug_"},"score":0,"creation_date":1376680279,"post_id":18280442,"comment_id":26816162,"body_markdown":"Looks about as efficient and clean as a recursive program of that nature should be.","body":"Looks about as efficient and clean as a recursive program of that nature should be."},{"owner":{"account_id":2882201,"reputation":10752,"user_id":2472820,"accept_rate":86,"display_name":"Kon"},"score":2,"creation_date":1376680311,"post_id":18280442,"comment_id":26816181,"body_markdown":"Your method is fine, but another recursive way and the way I would think about it is, since your substrings are single-consecutive pieces of the main string, you&#39;re dealing with two integer variables: a starting position and an ending position. So you&#39;re essentially finding combinations thereof. For example, with the word &quot;Hello&quot; of length 5, you have a Starting/Ending positions of: 1/5, 2/5, 3/5, 4/5, 1/4, 2/4, 3/4, etc","body":"Your method is fine, but another recursive way and the way I would think about it is, since your substrings are single-consecutive pieces of the main string, you&#39;re dealing with two integer variables: a starting position and an ending position. So you&#39;re essentially finding combinations thereof. For example, with the word &quot;Hello&quot; of length 5, you have a Starting/Ending positions of: 1/5, 2/5, 3/5, 4/5, 1/4, 2/4, 3/4, etc"},{"owner":{"account_id":233335,"reputation":7836,"user_id":1267363,"accept_rate":85,"display_name":"davidjhp"},"score":0,"creation_date":1376680340,"post_id":18280442,"comment_id":26816199,"body_markdown":"@Kayaman, yes I have a working solution, just want to see if there is any better way of doing it, Im not a recursion expert.","body":"@Kayaman, yes I have a working solution, just want to see if there is any better way of doing it, Im not a recursion expert."},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1376680422,"post_id":18280442,"comment_id":26816233,"body_markdown":"The solution is fine once you realize that recursion is a quite bad fit for Java. This is just exercise, right? Gone are the days when recursion was taught in a language actually built for recursion: Scheme.","body":"The solution is fine once you realize that recursion is a quite bad fit for Java. This is just exercise, right? Gone are the days when recursion was taught in a language actually built for recursion: Scheme."},{"owner":{"account_id":233335,"reputation":7836,"user_id":1267363,"accept_rate":85,"display_name":"davidjhp"},"score":1,"creation_date":1376680578,"post_id":18280442,"comment_id":26816321,"body_markdown":"@Marko, yes I realize recursion is a bad fit for Java, just want to  practice recursion skills because of this http://www.joelonsoftware.com/articles/ThePerilsofJavaSchools.html","body":"@Marko, yes I realize recursion is a bad fit for Java, just want to  practice recursion skills because of this <a href=\"http://www.joelonsoftware.com/articles/ThePerilsofJavaSchools.html\" rel=\"nofollow noreferrer\">joelonsoftware.com/articles/ThePerilsofJavaSchools.html</a>"},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1376681127,"post_id":18280442,"comment_id":26816606,"body_markdown":"+1 Great article from a great writer! Yes, the Great Java Shift is what I had in mind when I wrote the above comment.","body":"+1 Great article from a great writer! Yes, the Great Java Shift is what I had in mind when I wrote the above comment."},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1376681219,"post_id":18280442,"comment_id":26816655,"body_markdown":"But let me give you a piece of advice: do yourself a favor and actually learn an FP language. My recommendation: Clojure. It&#39;s JVM-based, has great Java interop, and is a full-blown Scheme-like Lisp. In Clojure 90% of problems are solved using higher-order functions, they&#39;re as natural there as a `for` loop in Java.","body":"But let me give you a piece of advice: do yourself a favor and actually learn an FP language. My recommendation: Clojure. It&#39;s JVM-based, has great Java interop, and is a full-blown Scheme-like Lisp. In Clojure 90% of problems are solved using higher-order functions, they&#39;re as natural there as a <code>for</code> loop in Java."},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1376681385,"post_id":18280442,"comment_id":26816736,"body_markdown":"And if you want to learn recursion, the best resource is The Little Schemer.","body":"And if you want to learn recursion, the best resource is The Little Schemer."}],"answers":[{"tags":[],"owner":{"account_id":1144500,"reputation":37498,"user_id":1127571,"accept_rate":71,"display_name":"Honza Brabec"},"down_vote_count":2,"up_vote_count":17,"is_accepted":false,"score":15,"last_activity_date":1468608780,"creation_date":1376681576,"answer_id":18280806,"question_id":18280442,"body_markdown":"This problem has overlapping subproblems and because of that the top-down recursion as you do is not much effective. You are evaluating multiple substrings multiple times.\r\n\r\nActually it is horribly ineffective (I would guess O(2^n)). Just try to run it on a bit longer string.\r\n\r\n    generate(&quot;OverlappingSubproblems&quot;);\r\n\r\n\r\nIf you are interested in a better way of solving this you can try something like this:\r\n\r\n    public static void generate2(String word) {\r\n        for (int from = 0; from &lt; word.length(); from++) {\r\n            for (int to = from + 1; to &lt;= word.length(); to++) {\r\n                System.out.println(word.substring(from, to));\r\n            }\r\n        }\r\n    }\r\n\r\nIf you want to use recursion you can try to rewrite the for-loops with recursion as exercise ;)","title":"Java - using recursion to create all substrings from a string","body":"<p>This problem has overlapping subproblems and because of that the top-down recursion as you do is not much effective. You are evaluating multiple substrings multiple times.</p>\n\n<p>Actually it is horribly ineffective (I would guess O(2^n)). Just try to run it on a bit longer string.</p>\n\n<pre><code>generate(\"OverlappingSubproblems\");\n</code></pre>\n\n<p>If you are interested in a better way of solving this you can try something like this:</p>\n\n<pre><code>public static void generate2(String word) {\n    for (int from = 0; from &lt; word.length(); from++) {\n        for (int to = from + 1; to &lt;= word.length(); to++) {\n            System.out.println(word.substring(from, to));\n        }\n    }\n}\n</code></pre>\n\n<p>If you want to use recursion you can try to rewrite the for-loops with recursion as exercise ;)</p>\n"},{"tags":[],"owner":{"account_id":305991,"reputation":39137,"user_id":616460,"accept_rate":93,"display_name":"Jason C"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1376681961,"creation_date":1376681961,"answer_id":18280909,"question_id":18280442,"body_markdown":"There is a lot to be learned from Honza&#39;s answer.I suggest you try and rewrite that as a recursive algorithm.\r\n\r\nAs with any recursive approach, divide it into self-referencing subproblems: \r\n\r\n    1. substrings(X) = substrings_starting_at_first_character(X) + substrings(X minus first char).\r\n    2. substrings_starting_at_first_character(X) = X + substrings_starting_at_first_character(X minus last char).\r\n\r\nNext figure out your non-self-referencing base cases:\r\n\r\n    1. substrings(&quot;&quot;) = empty set.\r\n    2. substrings_starting_at_first_character(&quot;&quot;) = empty set.\r\n\r\nAnd go from there.","title":"Java - using recursion to create all substrings from a string","body":"<p>There is a lot to be learned from Honza's answer.I suggest you try and rewrite that as a recursive algorithm.</p>\n\n<p>As with any recursive approach, divide it into self-referencing subproblems: </p>\n\n<pre><code>1. substrings(X) = substrings_starting_at_first_character(X) + substrings(X minus first char).\n2. substrings_starting_at_first_character(X) = X + substrings_starting_at_first_character(X minus last char).\n</code></pre>\n\n<p>Next figure out your non-self-referencing base cases:</p>\n\n<pre><code>1. substrings(\"\") = empty set.\n2. substrings_starting_at_first_character(\"\") = empty set.\n</code></pre>\n\n<p>And go from there.</p>\n"},{"tags":[],"owner":{"account_id":233335,"reputation":7836,"user_id":1267363,"accept_rate":85,"display_name":"davidjhp"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1376714558,"creation_date":1376714558,"answer_id":18285195,"question_id":18280442,"body_markdown":"The following turned out to be the best solution:\r\n\r\n\r\n    public class recursive {\r\n    \r\n    \tstatic String in = &quot;1234&quot;;\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tsubstrings(0,1);\r\n    \t}\r\n    \r\n    \tstatic void substrings(int start, int end){\r\n    \t\tif(start == in.length() &amp;&amp; end == in.length()){\r\n    \t\t\treturn;\r\n    \t\t}else{\r\n    \t\t\tif(end == in.length()+1){\r\n    \t\t\t\tsubstrings(start+1,start+1);\r\n    \t\t\t}else{\r\n    \t\t\t\tSystem.out.println(in.substring(start, end));\r\n    \t\t\t\tsubstrings(start, end+1);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    }\r\n\r\n\r\nIt first checks the base case: if both start and end are equal to in.length(). \r\nBecause if they are, that means there are no more substrings to be found, and the program ends.\r\n\r\n\r\nLet&#39;s start with start=0 and end=1. They obviously don&#39;t equal in.length(), and end definitely doesn&#39;t equal in.length()+1.\r\nThus, substring(0,1) will be printed out, which is 1.\r\nThe next iteration of substrings will be substrings(0,2), and in.substring(0,2) will be printed, which is 12. This will continue until end == in.length()+1, which happens when the program finishes substrings(0,4) and tries to move on to substrings(0,5).\r\n5 == in.length()+1, so when that happens, the program will do substrings(start+1,start+1), which is substrings(1,1). The process will continue with substrings(1,2), and (1,3), until (1,5) when the program will run substrings(2,2).\r\n\r\n\r\nAll of this will continue until substrings(4,4), which, at that point, the program stops.\r\n\r\n\r\nThe result looks like this:\r\n\r\n\r\n1\r\n12\r\n123\r\n1234\r\n\r\n\r\n2\r\n23\r\n234\r\n\r\n\r\n3\r\n34\r\n\r\n\r\n4\r\n","title":"Java - using recursion to create all substrings from a string","body":"<p>The following turned out to be the best solution:</p>\n\n<pre><code>public class recursive {\n\n    static String in = \"1234\";\n\n    public static void main(String[] args) {\n        substrings(0,1);\n    }\n\n    static void substrings(int start, int end){\n        if(start == in.length() &amp;&amp; end == in.length()){\n            return;\n        }else{\n            if(end == in.length()+1){\n                substrings(start+1,start+1);\n            }else{\n                System.out.println(in.substring(start, end));\n                substrings(start, end+1);\n            }\n        }\n    }\n\n}\n</code></pre>\n\n<p>It first checks the base case: if both start and end are equal to in.length(). \nBecause if they are, that means there are no more substrings to be found, and the program ends.</p>\n\n<p>Let's start with start=0 and end=1. They obviously don't equal in.length(), and end definitely doesn't equal in.length()+1.\nThus, substring(0,1) will be printed out, which is 1.\nThe next iteration of substrings will be substrings(0,2), and in.substring(0,2) will be printed, which is 12. This will continue until end == in.length()+1, which happens when the program finishes substrings(0,4) and tries to move on to substrings(0,5).\n5 == in.length()+1, so when that happens, the program will do substrings(start+1,start+1), which is substrings(1,1). The process will continue with substrings(1,2), and (1,3), until (1,5) when the program will run substrings(2,2).</p>\n\n<p>All of this will continue until substrings(4,4), which, at that point, the program stops.</p>\n\n<p>The result looks like this:</p>\n\n<p>1\n12\n123\n1234</p>\n\n<p>2\n23\n234</p>\n\n<p>3\n34</p>\n\n<p>4</p>\n"},{"tags":[],"owner":{"account_id":1323534,"reputation":7793,"user_id":1268844,"accept_rate":100,"display_name":"Anshu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1411358739,"creation_date":1411358739,"answer_id":25966546,"question_id":18280442,"body_markdown":"Another clean approach - using both looping and recursion (and does not have overlapping problem)\r\n\r\n\tpublic static void printCombinations(String initial, String combined) {\r\n\t\tSystem.out.print(combined + &quot; &quot;);\r\n\t\tfor (int i = 0; i &lt; initial.length(); i++) {\r\n\t\t\tprintCombinations(initial.substring(i + 1),\r\n\t\t\t\t\tcombined + initial.charAt(i));\r\n\r\n\t\t}\r\n\t}\r\n    \r\n    \r\n    public static void main(String[] args) {\r\n    \t\tprintCombinations(&quot;12345&quot;, &quot;&quot;);\r\n    \t}\r\n\r\nAnd output is -  1 12 123 1234 12345 1235 124 1245 125 13 134 1345 135 14 145 15 2 23 234 2345 235 24 245 25 3 34 345 35 4 45 5 ","title":"Java - using recursion to create all substrings from a string","body":"<p>Another clean approach - using both looping and recursion (and does not have overlapping problem)</p>\n\n<pre><code>public static void printCombinations(String initial, String combined) {\n    System.out.print(combined + \" \");\n    for (int i = 0; i &lt; initial.length(); i++) {\n        printCombinations(initial.substring(i + 1),\n                combined + initial.charAt(i));\n\n    }\n}\n\n\npublic static void main(String[] args) {\n        printCombinations(\"12345\", \"\");\n    }\n</code></pre>\n\n<p>And output is -  1 12 123 1234 12345 1235 124 1245 125 13 134 1345 135 14 145 15 2 23 234 2345 235 24 245 25 3 34 345 35 4 45 5 </p>\n"},{"tags":[],"owner":{"account_id":12853858,"reputation":1,"user_id":9297817,"display_name":"SK1"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1517501089,"creation_date":1517501089,"answer_id":48566995,"question_id":18280442,"body_markdown":"     //substring all the words from a string\r\n      public class RecSubstring\r\n      {\r\n        static int c=0; \r\n        static void rec(String str)\r\n        {\r\n          if(str.equals(&quot;&quot;))\r\n            return;\r\n          else\r\n          {\r\n            c=str.indexOf(&#39; &#39;);  \r\n            System.out.println(str.substring(0,c));\r\n            rec(str.substring(c+1));\r\n         }\r\n       }\r\n  \r\n      public static void main(String args[])\r\n      {\r\n        String st=&quot;We are Happy&quot;+&quot; &quot; ;\r\n        rec(st);\r\n      }\r\n     }\r\n","title":"Java - using recursion to create all substrings from a string","body":"<pre><code> //substring all the words from a string\n  public class RecSubstring\n  {\n    static int c=0; \n    static void rec(String str)\n    {\n      if(str.equals(\"\"))\n        return;\n      else\n      {\n        c=str.indexOf(' ');  \n        System.out.println(str.substring(0,c));\n        rec(str.substring(c+1));\n     }\n   }\n\n  public static void main(String args[])\n  {\n    String st=\"We are Happy\"+\" \" ;\n    rec(st);\n  }\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5832053,"reputation":37,"user_id":4596220,"display_name":"am-sysout"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581866366,"creation_date":1581864954,"answer_id":60249757,"question_id":18280442,"body_markdown":"    public class SubsequencesOfStr {\r\n    \r\n     public static void main(String[] args) {\r\n    \r\n      String str = &quot;abcd&quot;;\r\n      System.out.println(&quot;0000----&quot; + str.length());\r\n      linearCombination(str);\r\n     }\r\n    \r\n     static void linearCombination(String str) {\r\n      for (int i = 0; i &lt; str.length(); i++) {\r\n       int endIndex = i + 1;\r\n       for (int j = 0; j &lt; str.length() - i; j++) {\r\n        System.out.println(str.substring(j, endIndex));\r\n        endIndex++;\r\n       }\r\n      }\r\n     }\r\n    }","title":"Java - using recursion to create all substrings from a string","body":"<pre><code>public class SubsequencesOfStr {\n\n public static void main(String[] args) {\n\n  String str = \"abcd\";\n  System.out.println(\"0000----\" + str.length());\n  linearCombination(str);\n }\n\n static void linearCombination(String str) {\n  for (int i = 0; i &lt; str.length(); i++) {\n   int endIndex = i + 1;\n   for (int j = 0; j &lt; str.length() - i; j++) {\n    System.out.println(str.substring(j, endIndex));\n    endIndex++;\n   }\n  }\n }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16556360,"reputation":1,"user_id":11963427,"display_name":"Himanshu Negi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1611125870,"creation_date":1611125870,"answer_id":65804492,"question_id":18280442,"body_markdown":"    void allsubstring(string s,int start,int end)\r\n    {\r\n\tif(start == s.size() &amp;&amp;  end == s.size()) {\r\n\t\treturn;\r\n\t}\r\n\telse {\r\n\t\tif(end == s.size()) {\r\n\t\t\tallsubstring(s,start+1,start+1);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tcout&lt;&lt;s.substr(start,end-start+1)&lt;&lt;endl;\r\n\t\t\tallsubstring(s,start,end+1);\r\n\t\t}\r\n\t}\r\n}","title":"Java - using recursion to create all substrings from a string","body":"<pre><code>void allsubstring(string s,int start,int end)\n{\nif(start == s.size() &amp;&amp;  end == s.size()) {\n    return;\n}\nelse {\n    if(end == s.size()) {\n        allsubstring(s,start+1,start+1);\n    }\n    else {\n        cout&lt;&lt;s.substr(start,end-start+1)&lt;&lt;endl;\n        allsubstring(s,start,end+1);\n    }\n}\n</code></pre>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":19374885,"reputation":1,"user_id":14167363,"display_name":"Dhananjay Kansara"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1612082092,"creation_date":1611996772,"answer_id":65966209,"question_id":18280442,"body_markdown":"another approach using Recursion\r\n\r\n    \t\r\n        \r\n    \tpublic static void main(String[] args) \r\n    \t{\r\n    \t\tsubStrings(&quot;ABCDE&quot;);\t\t\r\n    \t}\r\n    \t\r\n    \tstatic void subStrings(String str) \r\n    \t{\r\n     \t\tif(str.length()==0)\r\n     \t\t{\r\n     \t\t\treturn;\r\n     \t\t}\r\n     \t\tsubString(str);\r\n     \t\tsubStrings(str.substring(1,str.length()));\r\n     \t\t\r\n    \t}\r\n    \t\r\n    \tprivate static void subString(String str)\r\n    \t{\r\n    \t\tif(str.length()==1)\r\n    \t\t{\r\n    \t\t\tSystem.out.print(str+&quot; &quot;);\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \t\t\r\n    \t\tSystem.out.print(str+&quot; &quot;);\r\n    \t\tsubString(str.substring(0,str.length()-1));\r\n    \t\t\r\n    \t}\r\n     \r\n    \r\n\r\n","title":"Java - using recursion to create all substrings from a string","body":"<p>another approach using Recursion</p>\n<pre><code>    public static void main(String[] args) \n    {\n        subStrings(&quot;ABCDE&quot;);        \n    }\n    \n    static void subStrings(String str) \n    {\n        if(str.length()==0)\n        {\n            return;\n        }\n        subString(str);\n        subStrings(str.substring(1,str.length()));\n        \n    }\n    \n    private static void subString(String str)\n    {\n        if(str.length()==1)\n        {\n            System.out.print(str+&quot; &quot;);\n            return;\n        }\n        \n        System.out.print(str+&quot; &quot;);\n        subString(str.substring(0,str.length()-1));\n        \n    }\n \n</code></pre>\n"},{"tags":[],"owner":{"account_id":22039754,"reputation":1,"user_id":16305707,"display_name":"Sriram Krishnamurthy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1624654380,"creation_date":1624627914,"answer_id":68131839,"question_id":18280442,"body_markdown":"Here is my approach employing 2 recursive functions pss and pss1 to mimic the outer and inner for loops respectively of the standard O(n^2) solution. Only this time, recursively &#128077;.\r\n\r\noutput for abc : a,ab,abc,b,bc,c \r\n\r\n```\r\n// print substrings using recursion\r\n\r\nvoid pss1 ( string s , int i , string op)\r\n{\r\n    // pss1 prints all substrings from a given index\r\n if(i==s.length()-1)\r\n    {\r\n    \top+=s[i];\r\n    \tcout&lt;&lt;op&lt;&lt;endl;\r\n    \treturn;\r\n    }\r\n     op+=s[i];\r\n     cout&lt;&lt;op&lt;&lt;endl;\r\n     pss1(s,i+1,op);\r\n\r\n}\r\nvoid pss ( string s , int i , string op)\r\n{\r\n    // pss repeats the process of pss1 for all indices by reducing the string size by 1 each time from the front (i.e) abc becomes bc at the 2nd call of psss\r\n    if(s.length()==1)\r\n    {\r\n    \tcout&lt;&lt;s&lt;&lt;endl;\r\n    \treturn;\r\n    }\r\n    else\r\n    {\r\n    \t\tpss1(s,0,op);\r\n\r\n    \tstring S=s.substr(1);\r\n    \tpss(S,0,&quot;&quot;);\r\n\r\n    }\r\n    return ;\r\n}\r\n\r\n\r\nint main()\r\n{\r\n    string s;\r\n    cin&gt;&gt;s;\r\n    pss(s,0,&quot;&quot;);\r\n    return 0;\r\n}\r\n```","title":"Java - using recursion to create all substrings from a string","body":"<p>Here is my approach employing 2 recursive functions pss and pss1 to mimic the outer and inner for loops respectively of the standard O(n^2) solution. Only this time, recursively 👍.</p>\n<p>output for abc : a,ab,abc,b,bc,c</p>\n<pre><code>// print substrings using recursion\n\nvoid pss1 ( string s , int i , string op)\n{\n    // pss1 prints all substrings from a given index\n if(i==s.length()-1)\n    {\n        op+=s[i];\n        cout&lt;&lt;op&lt;&lt;endl;\n        return;\n    }\n     op+=s[i];\n     cout&lt;&lt;op&lt;&lt;endl;\n     pss1(s,i+1,op);\n\n}\nvoid pss ( string s , int i , string op)\n{\n    // pss repeats the process of pss1 for all indices by reducing the string size by 1 each time from the front (i.e) abc becomes bc at the 2nd call of psss\n    if(s.length()==1)\n    {\n        cout&lt;&lt;s&lt;&lt;endl;\n        return;\n    }\n    else\n    {\n            pss1(s,0,op);\n\n        string S=s.substr(1);\n        pss(S,0,&quot;&quot;);\n\n    }\n    return ;\n}\n\n\nint main()\n{\n    string s;\n    cin&gt;&gt;s;\n    pss(s,0,&quot;&quot;);\n    return 0;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22039754,"reputation":1,"user_id":16305707,"display_name":"Sriram Krishnamurthy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1624770113,"creation_date":1624770113,"answer_id":68148141,"question_id":18280442,"body_markdown":"Here is the working code using 1 recursive function only.\r\n\r\nAn implementation of @davidjhp&#39;s solution in c++\r\n\r\nAnalyze the Recursive stack Diagram in recursive problems to understand how the given problem is solved for smaller problems to yield the final solution.\r\n\r\n\r\n    // Print SubStrings using recursion \r\n    \r\n    void pss(string s, int start, int end)\r\n    {\r\n    \tif(start==s.length()-1)\r\n    \t{\r\n    \t\tcout&lt;&lt;s.substr(start)&lt;&lt;endl;\r\n    \t\treturn;\r\n    \t}\r\n    \tif(end==s.length()+1)\r\n    \t{\r\n    \t\tstart++;\r\n    \t\tend=start+1;\r\n    \t\tpss(s,start,end);\r\n    \t}\r\n    \telse if( start&lt;=s.length()&amp;&amp;end&lt;=s.length())\r\n    \t{\r\n    \t\tcout&lt;&lt;s.substr(start,end-start)&lt;&lt;endl;\r\n    \t\tpss(s,start,end+1);\r\n    \t}\r\n    }\r\n    \r\n    \r\n     int main()\r\n    {\r\n     string s;\r\n     cin&gt;&gt;s;\r\n     pss(s,0,1); \r\n     return 0;\r\n    }\r\n\r\n","title":"Java - using recursion to create all substrings from a string","body":"<p>Here is the working code using 1 recursive function only.</p>\n<p>An implementation of @davidjhp's solution in c++</p>\n<p>Analyze the Recursive stack Diagram in recursive problems to understand how the given problem is solved for smaller problems to yield the final solution.</p>\n<pre><code>// Print SubStrings using recursion \n\nvoid pss(string s, int start, int end)\n{\n    if(start==s.length()-1)\n    {\n        cout&lt;&lt;s.substr(start)&lt;&lt;endl;\n        return;\n    }\n    if(end==s.length()+1)\n    {\n        start++;\n        end=start+1;\n        pss(s,start,end);\n    }\n    else if( start&lt;=s.length()&amp;&amp;end&lt;=s.length())\n    {\n        cout&lt;&lt;s.substr(start,end-start)&lt;&lt;endl;\n        pss(s,start,end+1);\n    }\n}\n\n\n int main()\n{\n string s;\n cin&gt;&gt;s;\n pss(s,0,1); \n return 0;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10635195,"reputation":125,"user_id":7832116,"accept_rate":86,"display_name":"Aman Warudkar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687639350,"creation_date":1687639350,"answer_id":76547921,"question_id":18280442,"body_markdown":"    #include &lt;bits/stdc++.h&gt;\r\n    using namespace std;\r\n   \r\n    /*\r\n    In Subsequence: If we take an element then we can take another element after k skips. (where k&gt;=0)\r\n    In Substring: If we take an element then we can only take adjacent element after it. (i.e. no skips)\r\n    */\r\n\r\n    void substring(string &amp;s, string &amp;res, int prevIndex, int currIndex)\r\n    {\r\n      if(currIndex==s.size())\r\n      {\r\n        cout&lt;&lt;res&lt;&lt;endl;\r\n        return;\r\n      }\r\n      if(prevIndex==-1 || currIndex-prevIndex==1)\r\n      {\r\n        res+=s[currIndex];\r\n        substring(s,res,currIndex,currIndex+1);\r\n        res.pop_back();\r\n      }\r\n      substring(s,res,prevIndex,currIndex+1);\r\n    }\r\n    \r\n    int main()\r\n    {\r\n      string s=&quot;abcde&quot;, res;\r\n      substring(s,res,-1,0);\r\n    }","title":"Java - using recursion to create all substrings from a string","body":"<pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\n\n/*\nIn Subsequence: If we take an element then we can take another element after k skips. (where k&gt;=0)\nIn Substring: If we take an element then we can only take adjacent element after it. (i.e. no skips)\n*/\n\nvoid substring(string &amp;s, string &amp;res, int prevIndex, int currIndex)\n{\n  if(currIndex==s.size())\n  {\n    cout&lt;&lt;res&lt;&lt;endl;\n    return;\n  }\n  if(prevIndex==-1 || currIndex-prevIndex==1)\n  {\n    res+=s[currIndex];\n    substring(s,res,currIndex,currIndex+1);\n    res.pop_back();\n  }\n  substring(s,res,prevIndex,currIndex+1);\n}\n\nint main()\n{\n  string s=&quot;abcde&quot;, res;\n  substring(s,res,-1,0);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29029555,"reputation":1,"user_id":22236858,"display_name":"DarkLord"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689801616,"creation_date":1689534478,"answer_id":76699982,"question_id":18280442,"body_markdown":"My approach using recursion. It creates a sort of binary tree if you deeply understand how the code works:\r\n(Note: The value of String ans will be set to &quot;&quot;(null) in the main method)\r\n\r\n    static void subStr(String str, String ans)    // ans=&quot;&quot; (in main method)\r\n    {\r\n        if(str.length() == 0){\r\n            System.out.print(ans);\r\n        }\r\n\r\n        char ch = str.charAt(0);\r\n        String ros = str.substring(1);\r\n\r\n        subStr(ros, ans);\r\n        subStr(ros, ans+ch);\r\n    }","title":"Java - using recursion to create all substrings from a string","body":"<p>My approach using recursion. It creates a sort of binary tree if you deeply understand how the code works:\n(Note: The value of String ans will be set to &quot;&quot;(null) in the main method)</p>\n<pre><code>static void subStr(String str, String ans)    // ans=&quot;&quot; (in main method)\n{\n    if(str.length() == 0){\n        System.out.print(ans);\n    }\n\n    char ch = str.charAt(0);\n    String ros = str.substring(1);\n\n    subStr(ros, ans);\n    subStr(ros, ans+ch);\n}\n</code></pre>\n"}],"owner":{"account_id":233335,"reputation":7836,"user_id":1267363,"accept_rate":85,"display_name":"davidjhp"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34063,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":18285195,"answer_count":12,"score":6,"last_activity_date":1689801616,"creation_date":1376680084,"question_id":18280442,"body_markdown":"The following code in Java uses recursion to create all possible substrings from a string.\r\nI am wondering is there a better way of coding this?  I want to use recursion.\r\n\r\n\r\n    public class main {\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\tgenerate(&quot;hello&quot;);\r\n    \t}\r\n    \r\n    \tpublic static void generate(String word) {\r\n    \t    if (word.length() == 1) {\r\n    \t        System.out.println(word);\r\n    \t        return;\r\n    \t    }else{\r\n    \t    \tSystem.out.println(word);\r\n    \t        generate(word.substring(0, word.length()-1)); \r\n    \t        generate(word.substring(1, word.length())); \r\n    \t    }\r\n    \t    \r\n    \t}\r\n    \t\r\n    }\r\n\r\n\r\nFAQ\r\nQ - Why do I want to do this using recursion?\r\nA - Because the CEO of StackOverflow says recursion is important\r\nhttp://www.joelonsoftware.com/articles/ThePerilsofJavaSchools.html","title":"Java - using recursion to create all substrings from a string","body":"<p>The following code in Java uses recursion to create all possible substrings from a string.\nI am wondering is there a better way of coding this?  I want to use recursion.</p>\n\n<pre><code>public class main {\n\n    public static void main(String[] args) {\n        generate(\"hello\");\n    }\n\n    public static void generate(String word) {\n        if (word.length() == 1) {\n            System.out.println(word);\n            return;\n        }else{\n            System.out.println(word);\n            generate(word.substring(0, word.length()-1)); \n            generate(word.substring(1, word.length())); \n        }\n\n    }\n\n}\n</code></pre>\n\n<p>FAQ\nQ - Why do I want to do this using recursion?\nA - Because the CEO of StackOverflow says recursion is important\n<a href=\"http://www.joelonsoftware.com/articles/ThePerilsofJavaSchools.html\" rel=\"noreferrer\">http://www.joelonsoftware.com/articles/ThePerilsofJavaSchools.html</a></p>\n"},{"tags":["java","assertj"],"answers":[{"tags":[],"owner":{"account_id":1407336,"reputation":6523,"user_id":1348834,"display_name":"Joel Costigliola"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689800797,"creation_date":1689800797,"answer_id":76725206,"question_id":76721313,"body_markdown":"This possible with ordered collections (list or array) but with Sets it&#39;s more complicated, you can only say that an element is missing, that element has been compared with all the elements of the other so you cannot pinpoint a specific element from the other set.\r\n\r\nFeel free to raise an issue in assertj with a test case showing the actual error and then tell us which error you would have liked to see ","title":"AssertJ: Get the path of differences with usingRecursiveComparison()","body":"<p>This possible with ordered collections (list or array) but with Sets it's more complicated, you can only say that an element is missing, that element has been compared with all the elements of the other so you cannot pinpoint a specific element from the other set.</p>\n<p>Feel free to raise an issue in assertj with a test case showing the actual error and then tell us which error you would have liked to see</p>\n"}],"owner":{"account_id":26941596,"reputation":1,"user_id":20512322,"display_name":"Tomi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689800797,"creation_date":1689769848,"question_id":76721313,"body_markdown":"It is hard when using usingRecursiveComparison() in AssertJ for some objects tree to figure out where the difference is in case of comparison failure.\r\nWith simple objects relations AssertJ returns the path of the difference between objects.\r\nWhen using collections there are no details of the path where the difference is.\r\n\r\nUsing usingRecursiveComparison() in AssertJ with following structure:\r\n\r\n```\r\n@Test\r\n   public void test() {\r\n      final Level1 first = new Level1( new Level2( new Level3( &quot;first1&quot; ) ) );\r\n      final Level1 second = new Level1( new Level2( new Level3( &quot;second1&quot; ) ) );\r\n      assertThat( first ).usingRecursiveComparison().isEqualTo( second );\r\n   }\r\n\r\n   public record Level1(Level2 level2) {\r\n   }\r\n\r\n   public record Level2(Level3 level3) {\r\n   }\r\n\r\n   public record Level3(String text) {\r\n   }\r\n```\r\n\r\nrunning the test we get the message (which is fine): the error has the path to the difference.\r\n\r\n```\r\nfield/property &#39;level2.level3.text&#39; differ:\r\n- actual value  : &quot;first1&quot;\r\n- expected value: &quot;second1&quot;\r\n```\r\n\r\nChanging the structure to Sets:\r\n\r\n``` @Test\r\n   public void test() {\r\n      final Level1 first = new Level1( Set.of( new Level2( Set.of( new Level3( &quot;first1&quot; ), new Level3( &quot;first2&quot; ) ) ) ) );\r\n      final Level1 second = new Level1( Set.of( new Level2( Set.of( new Level3( &quot;second1&quot; ) ) ) ) );\r\n      assertThat( first ).usingRecursiveComparison().isEqualTo( second );\r\n   }\r\n\r\n   public record Level1(Set&lt;Level2&gt; level2) {\r\n   }\r\n\r\n   public record Level2(Set&lt;Level3&gt; level3) {\r\n   }\r\n\r\n   public record Level3(String text) {\r\n   }\r\n```\r\n\r\nrunning the test the message returned:\r\n\r\n```\r\nfield/property &#39;level2&#39; differ:\r\n- actual value  : [Level2[level3=[Level3[text=first1], Level3[text=first2]]]]\r\n- expected value: [Level2[level3=[Level3[text=second1]]]]\r\nThe following expected elements were not matched in the actual Set12:\r\n  [Level2[level3=[Level3[text=second1]]]]\r\n```\r\n\r\nDebugging AssertJ there are some ComparisonDifference objects which might be useful, but these get lost:\r\n\r\n```\r\nComparisonDifference [path=level2.level3, actual=[Level3[text=first1], Level3[text=first2]], expected=[Level3[text=second1]], template=%s differ:%n- actual value  : %s%n- expected value: %s%s,additionalInformation=actual and expected values are collections of different size, actual size=2 when expected size=1]\r\n```\r\n\r\nIs it possible to get more insights of the path where the difference actually is?","title":"AssertJ: Get the path of differences with usingRecursiveComparison()","body":"<p>It is hard when using usingRecursiveComparison() in AssertJ for some objects tree to figure out where the difference is in case of comparison failure.\nWith simple objects relations AssertJ returns the path of the difference between objects.\nWhen using collections there are no details of the path where the difference is.</p>\n<p>Using usingRecursiveComparison() in AssertJ with following structure:</p>\n<pre><code>@Test\n   public void test() {\n      final Level1 first = new Level1( new Level2( new Level3( &quot;first1&quot; ) ) );\n      final Level1 second = new Level1( new Level2( new Level3( &quot;second1&quot; ) ) );\n      assertThat( first ).usingRecursiveComparison().isEqualTo( second );\n   }\n\n   public record Level1(Level2 level2) {\n   }\n\n   public record Level2(Level3 level3) {\n   }\n\n   public record Level3(String text) {\n   }\n</code></pre>\n<p>running the test we get the message (which is fine): the error has the path to the difference.</p>\n<pre><code>field/property 'level2.level3.text' differ:\n- actual value  : &quot;first1&quot;\n- expected value: &quot;second1&quot;\n</code></pre>\n<p>Changing the structure to Sets:</p>\n<pre><code>   public void test() {\n      final Level1 first = new Level1( Set.of( new Level2( Set.of( new Level3( &quot;first1&quot; ), new Level3( &quot;first2&quot; ) ) ) ) );\n      final Level1 second = new Level1( Set.of( new Level2( Set.of( new Level3( &quot;second1&quot; ) ) ) ) );\n      assertThat( first ).usingRecursiveComparison().isEqualTo( second );\n   }\n\n   public record Level1(Set&lt;Level2&gt; level2) {\n   }\n\n   public record Level2(Set&lt;Level3&gt; level3) {\n   }\n\n   public record Level3(String text) {\n   }\n</code></pre>\n<p>running the test the message returned:</p>\n<pre><code>field/property 'level2' differ:\n- actual value  : [Level2[level3=[Level3[text=first1], Level3[text=first2]]]]\n- expected value: [Level2[level3=[Level3[text=second1]]]]\nThe following expected elements were not matched in the actual Set12:\n  [Level2[level3=[Level3[text=second1]]]]\n</code></pre>\n<p>Debugging AssertJ there are some ComparisonDifference objects which might be useful, but these get lost:</p>\n<pre><code>ComparisonDifference [path=level2.level3, actual=[Level3[text=first1], Level3[text=first2]], expected=[Level3[text=second1]], template=%s differ:%n- actual value  : %s%n- expected value: %s%s,additionalInformation=actual and expected values are collections of different size, actual size=2 when expected size=1]\n</code></pre>\n<p>Is it possible to get more insights of the path where the difference actually is?</p>\n"},{"tags":["java","unit-testing","singleton"],"comments":[{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":3,"creation_date":1322148201,"post_id":8256989,"comment_id":10164333,"body_markdown":"I use singletons which are accessed via interface and try to make them stateless as much as possible. This avoid much of the problem that singletons can have (but not using them in many cases they are often used ;)","body":"I use singletons which are accessed via interface and try to make them stateless as much as possible. This avoid much of the problem that singletons can have (but not using them in many cases they are often used ;)"}],"answers":[{"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1322137661,"creation_date":1322137661,"answer_id":8257043,"question_id":8256989,"body_markdown":"Mocks require interfaces, because what you&#39;re doing is replacing the real underlying behavior with an imposter that mimics what you need for the test.  Since the client only deals with an interface reference type, it doesn&#39;t need to know what the implementation is.\r\n\r\nYou can&#39;t mock a concrete class without an interface, because you can&#39;t replace the behavior without the test client knowing about it.  It&#39;s a completely new class in that case.\r\n\r\nIt&#39;s true for all classes, Singleton or not.\r\n","title":"Singleton and unit testing","body":"<p>Mocks require interfaces, because what you're doing is replacing the real underlying behavior with an imposter that mimics what you need for the test.  Since the client only deals with an interface reference type, it doesn't need to know what the implementation is.</p>\n\n<p>You can't mock a concrete class without an interface, because you can't replace the behavior without the test client knowing about it.  It's a completely new class in that case.</p>\n\n<p>It's true for all classes, Singleton or not.</p>\n"},{"tags":[],"owner":{"account_id":1039514,"reputation":1970,"user_id":1045902,"accept_rate":100,"display_name":"DPM"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1322137758,"creation_date":1322137758,"answer_id":8257065,"question_id":8256989,"body_markdown":"As far as I know, a class implementing a Singleton cannot be extended (superclass constructor is always called implicitly and the constructor in a Singleton is private). If you want to mock a class you have to extend the class. As you see in this case it wouldn&#39;t be possible.","title":"Singleton and unit testing","body":"<p>As far as I know, a class implementing a Singleton cannot be extended (superclass constructor is always called implicitly and the constructor in a Singleton is private). If you want to mock a class you have to extend the class. As you see in this case it wouldn't be possible.</p>\n"},{"tags":[],"owner":{"account_id":250937,"reputation":23604,"user_id":527968,"display_name":"Liviu T."},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1322138153,"creation_date":1322138153,"answer_id":8257167,"question_id":8256989,"body_markdown":"I think it actually depends on the implementation of the **singleton access pattern**.\r\n\r\nFor example \r\n\r\n    MySingleton.getInstance()\r\n\r\nMight be very dificult to test while\r\n\r\n    MySingletonFactory mySingletonFactory = ...\r\n    mySingletonFactory.getInstance() //this returns a MySingleton instance or even a subclass\r\n\r\nDoesn&#39;t provide any information about the fact that its using a singleton. So you can freely replace your factory.\r\n\r\n**NOTE**: a singleton is defined by being only one instance of that class in an application, however the way it&#39;s obtained or stored doesn&#39;t have to be through static means.","title":"Singleton and unit testing","body":"<p>I think it actually depends on the implementation of the <strong>singleton access pattern</strong>.</p>\n\n<p>For example </p>\n\n<pre><code>MySingleton.getInstance()\n</code></pre>\n\n<p>Might be very dificult to test while</p>\n\n<pre><code>MySingletonFactory mySingletonFactory = ...\nmySingletonFactory.getInstance() //this returns a MySingleton instance or even a subclass\n</code></pre>\n\n<p>Doesn't provide any information about the fact that its using a singleton. So you can freely replace your factory.</p>\n\n<p><strong>NOTE</strong>: a singleton is defined by being only one instance of that class in an application, however the way it's obtained or stored doesn't have to be through static means.</p>\n"},{"tags":[],"owner":{"account_id":15271,"reputation":63428,"user_id":32090,"accept_rate":91,"display_name":"Boris Pavlović"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1322138525,"creation_date":1322138525,"answer_id":8257255,"question_id":8256989,"body_markdown":"Singleton objects are created without any control from the outside. In one of the other chapters of the same book Bloch suggests using `enum`s as default Singleton implementation. Let&#39;s see an example\r\n\r\n    public enum Day {\r\n      MON(2), TUE(3), WED(4), THU(5), FRI(6), SAT(7), SUN(1);\r\n    \r\n      private final int index;\r\n    \r\n      private Day(int index) {\r\n    \r\n        this.index = index;\r\n      }\r\n    \r\n      public boolean isToday() {\r\n      \r\n        return index == new GregorianCalendar().get(Calendar.DAY_OF_WEEK);\r\n      }\r\n    }\r\n\r\nLet&#39;s say we have a code that should be executed only on weekends:\r\n\r\n    public void leisure() {\r\n    \r\n      if (Day.SAT.isToday() || Day.SUN.isToday()) {\r\n    \r\n        haveSomeFun();\r\n        return;\r\n      }\r\n    \r\n      doSomeWork();\r\n    }\r\n\r\nTesting leisure method is going to be pretty hard. Its execution is going to be dependent on the day when it is executed. If it executes on a weekday `doSomeWork()` will be invoked and on weekends `haveSomeFun()`.\r\n\r\nFor this case we would need to use some heavy tools like PowerMock to intercept the `GregorianCalendar` constructor, return a mock which will return an index corresponding to a weekday or weekend in two test cases testing both execution paths of the `leisure` method.","title":"Singleton and unit testing","body":"<p>Singleton objects are created without any control from the outside. In one of the other chapters of the same book Bloch suggests using <code>enum</code>s as default Singleton implementation. Let's see an example</p>\n\n<pre><code>public enum Day {\n  MON(2), TUE(3), WED(4), THU(5), FRI(6), SAT(7), SUN(1);\n\n  private final int index;\n\n  private Day(int index) {\n\n    this.index = index;\n  }\n\n  public boolean isToday() {\n\n    return index == new GregorianCalendar().get(Calendar.DAY_OF_WEEK);\n  }\n}\n</code></pre>\n\n<p>Let's say we have a code that should be executed only on weekends:</p>\n\n<pre><code>public void leisure() {\n\n  if (Day.SAT.isToday() || Day.SUN.isToday()) {\n\n    haveSomeFun();\n    return;\n  }\n\n  doSomeWork();\n}\n</code></pre>\n\n<p>Testing leisure method is going to be pretty hard. Its execution is going to be dependent on the day when it is executed. If it executes on a weekday <code>doSomeWork()</code> will be invoked and on weekends <code>haveSomeFun()</code>.</p>\n\n<p>For this case we would need to use some heavy tools like PowerMock to intercept the <code>GregorianCalendar</code> constructor, return a mock which will return an index corresponding to a weekday or weekend in two test cases testing both execution paths of the <code>leisure</code> method.</p>\n"},{"tags":[],"owner":{"account_id":297062,"reputation":7983,"user_id":602372,"accept_rate":91,"display_name":"Yam Marcovic"},"down_vote_count":2,"up_vote_count":8,"is_accepted":false,"score":6,"last_activity_date":1322167814,"creation_date":1322167814,"answer_id":8262351,"question_id":8256989,"body_markdown":"It&#39;s oh so simple.\r\n\r\nIn unit-testing, you want to *isolate* your SUT (the class you&#39;re testing).\r\nYou don&#39;t want to test a *bunch of classes*, because that would defeat the purpose of ***unit***-*testing*.\r\n\r\nBut not all classes do *everything* on their own, right? Most classes use *other classes* to do their work, and they kind of mediate between other classes, and add a bit of their own, to get the final result.\r\n\r\nThe point is - you don&#39;t care about how the classes your SUT depends on work. You care how your SUT *works with those classes*. That&#39;s why you **stub or mock** the classes your SUT needs. And you can use those mocks because you can pass them in as constructor parameters for your SUT.\r\n\r\nWith singletons - the bad thing is that the `getInstance()` method is globally accessible. That means that you usually call it from *within* a class, instead of *depending* on an interface you can later *mock*. That&#39;s why it&#39;s impossible to *replace* it when you want to test your SUT.\r\n\r\nThe solution is not to use the sneaky `public static MySingleton getInstance()` method, but to *depend* on an *interface* your class needs to work with. Do that, and you can pass in **test doubles** whenever you need to.","title":"Singleton and unit testing","body":"<p>It's oh so simple.</p>\n\n<p>In unit-testing, you want to <em>isolate</em> your SUT (the class you're testing).\nYou don't want to test a <em>bunch of classes</em>, because that would defeat the purpose of <strong><em>unit</em></strong>-<em>testing</em>.</p>\n\n<p>But not all classes do <em>everything</em> on their own, right? Most classes use <em>other classes</em> to do their work, and they kind of mediate between other classes, and add a bit of their own, to get the final result.</p>\n\n<p>The point is - you don't care about how the classes your SUT depends on work. You care how your SUT <em>works with those classes</em>. That's why you <strong>stub or mock</strong> the classes your SUT needs. And you can use those mocks because you can pass them in as constructor parameters for your SUT.</p>\n\n<p>With singletons - the bad thing is that the <code>getInstance()</code> method is globally accessible. That means that you usually call it from <em>within</em> a class, instead of <em>depending</em> on an interface you can later <em>mock</em>. That's why it's impossible to <em>replace</em> it when you want to test your SUT.</p>\n\n<p>The solution is not to use the sneaky <code>public static MySingleton getInstance()</code> method, but to <em>depend</em> on an <em>interface</em> your class needs to work with. Do that, and you can pass in <strong>test doubles</strong> whenever you need to.</p>\n"},{"tags":[],"owner":{"account_id":37575,"reputation":2652,"user_id":107444,"accept_rate":80,"display_name":"Rodney Gitzel"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1322180247,"creation_date":1322179010,"answer_id":8263599,"question_id":8256989,"body_markdown":"The problem isn&#39;t testing singletons themselves; the book is saying that if a class you are trying to test *depends on* a singleton, then you will likely have problems.   \r\n\r\nUnless, that is, you (1) make the singleton implement an interface, and (2) inject the singleton to your class using that interface.\r\n\r\nFor example, singletons are typically instantiated directly like this:\r\n\r\n    public class MyClass\r\n    {\r\n        private MySingleton __s = MySingleton.getInstance() ;\r\n\r\n        ...\r\n    }\r\n\r\n\r\n`MyClass` may now be very difficult to automatedly test.  For example, as @Boris Pavlović notes in his answer, if the singleton&#39;s behaviour is based on the system time, your tests are now also dependent on the system time, and you may not be able to test cases that, say, depend on the day of the week.\r\n\r\nHowever, if your singleton &quot;implements an interface that serves as its type&quot; then you can still use a singleton *implementation* of that interface, so long as you pass it in:\r\n\r\n    public class SomeSingleton\r\n        implements SomeInterface\r\n    {\r\n        ...\r\n    }\r\n    \r\n    public class MyClass\r\n    {\r\n        private SomeInterface __s ;\r\n\r\n        public MyClass( SomeInterface s )\r\n        {\r\n            __s = s ;\r\n        }\r\n        \r\n        ...\r\n    }\r\n\r\n    ...\r\n\r\n    MyClass m = new MyClass( SomeSingleton.getInstance() ) ;\r\n\r\n\r\n\r\nFrom the perspective of testing `MyClass` you now don&#39;t care if `SomeSingleton` is singleton or not:  you can also pass in any other implementation you want, including the singleton implementation, but most likely you&#39;ll use a mock of some sort which you control from your tests.\r\n\r\n\r\nBTW, this is NOT the way to do it:\r\n\r\n    public class MyClass\r\n    {\r\n        private SomeInterface __s = SomeSingleton.getInstance() ;\r\n\r\n        public MyClass()\r\n        {\r\n        }\r\n        \r\n        ...\r\n    }\r\n\r\n\r\nThat still works out the same at run-time, but for testing you are now again dependent on `SomeSingleton`.\r\n","title":"Singleton and unit testing","body":"<p>The problem isn't testing singletons themselves; the book is saying that if a class you are trying to test <em>depends on</em> a singleton, then you will likely have problems.   </p>\n\n<p>Unless, that is, you (1) make the singleton implement an interface, and (2) inject the singleton to your class using that interface.</p>\n\n<p>For example, singletons are typically instantiated directly like this:</p>\n\n<pre><code>public class MyClass\n{\n    private MySingleton __s = MySingleton.getInstance() ;\n\n    ...\n}\n</code></pre>\n\n<p><code>MyClass</code> may now be very difficult to automatedly test.  For example, as @Boris Pavlović notes in his answer, if the singleton's behaviour is based on the system time, your tests are now also dependent on the system time, and you may not be able to test cases that, say, depend on the day of the week.</p>\n\n<p>However, if your singleton \"implements an interface that serves as its type\" then you can still use a singleton <em>implementation</em> of that interface, so long as you pass it in:</p>\n\n<pre><code>public class SomeSingleton\n    implements SomeInterface\n{\n    ...\n}\n\npublic class MyClass\n{\n    private SomeInterface __s ;\n\n    public MyClass( SomeInterface s )\n    {\n        __s = s ;\n    }\n\n    ...\n}\n\n...\n\nMyClass m = new MyClass( SomeSingleton.getInstance() ) ;\n</code></pre>\n\n<p>From the perspective of testing <code>MyClass</code> you now don't care if <code>SomeSingleton</code> is singleton or not:  you can also pass in any other implementation you want, including the singleton implementation, but most likely you'll use a mock of some sort which you control from your tests.</p>\n\n<p>BTW, this is NOT the way to do it:</p>\n\n<pre><code>public class MyClass\n{\n    private SomeInterface __s = SomeSingleton.getInstance() ;\n\n    public MyClass()\n    {\n    }\n\n    ...\n}\n</code></pre>\n\n<p>That still works out the same at run-time, but for testing you are now again dependent on <code>SomeSingleton</code>.</p>\n"},{"tags":[],"owner":{"account_id":267053,"reputation":29694,"user_id":554988,"accept_rate":86,"display_name":"Garrett Hall"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1322182981,"creation_date":1322182981,"answer_id":8263919,"question_id":8256989,"body_markdown":"    it’s impossible to substitute a mock implementation for a singleton\r\n\r\nThis is not true.  You can subclass your singleton and setter inject a mock.  Alternatively, you can use [PowerMock][1] to mock static methods.  However the need to mock singletons can be symptomatic of poor design.\r\n\r\nThe real problem is Singletons when *abused* turn into **dependency magnets**.  Since they are accessible everywhere, it can *appear* more convenient to put the functions you need in them rather than delegating to an appropriate class, especially for programmers new to OOP.\r\n\r\nThe **testability problem** is now you have a bunch of Singletons that are accessed by your object under test.  Even though the object probably only uses a small fraction of methods in the Singletons, you still need to mock each Singleton and figure out which methods are depended on.  Singletons with a static state (Monostate pattern) are even worse because you can have to figure out which interactions between objects are affected by the Singleton&#39;s state.\r\n\r\nUsed carefully, Singletons and testability can occur together.  For instance, in absence of a DI framework, you can use Singletons as your Factories and ServiceLocators, which you can setter inject to create a fake service layer for your end-to-end tests.\r\n\r\n  [1]: http://code.google.com/p/powermock/","title":"Singleton and unit testing","body":"<pre><code>it’s impossible to substitute a mock implementation for a singleton\n</code></pre>\n\n<p>This is not true.  You can subclass your singleton and setter inject a mock.  Alternatively, you can use <a href=\"http://code.google.com/p/powermock/\" rel=\"nofollow\">PowerMock</a> to mock static methods.  However the need to mock singletons can be symptomatic of poor design.</p>\n\n<p>The real problem is Singletons when <em>abused</em> turn into <strong>dependency magnets</strong>.  Since they are accessible everywhere, it can <em>appear</em> more convenient to put the functions you need in them rather than delegating to an appropriate class, especially for programmers new to OOP.</p>\n\n<p>The <strong>testability problem</strong> is now you have a bunch of Singletons that are accessed by your object under test.  Even though the object probably only uses a small fraction of methods in the Singletons, you still need to mock each Singleton and figure out which methods are depended on.  Singletons with a static state (Monostate pattern) are even worse because you can have to figure out which interactions between objects are affected by the Singleton's state.</p>\n\n<p>Used carefully, Singletons and testability can occur together.  For instance, in absence of a DI framework, you can use Singletons as your Factories and ServiceLocators, which you can setter inject to create a fake service layer for your end-to-end tests.</p>\n"},{"tags":[],"owner":{"account_id":1275305,"reputation":621,"user_id":1230702,"display_name":"TedEd"},"down_vote_count":0,"up_vote_count":45,"is_accepted":false,"score":45,"last_activity_date":1683273837,"creation_date":1421683105,"answer_id":28028662,"question_id":8256989,"body_markdown":"You could use reflection to reset your singleton object to prevent tests from affecting each other.\r\n\r\n    @Before\r\n    public void resetSingleton() throws SecurityException, NoSuchFieldException, IllegalArgumentException, IllegalAccessException {\r\n       Field instance = MySingleton.class.getDeclaredField(&quot;instance&quot;);\r\n       instance.setAccessible(true);\r\n       instance.set(null, null);\r\n    }\r\n\r\nRef: [unit-testing-singletons][1]\r\n\r\n\r\n  [1]: http://blog.davidehringer.com/testing/test-driven-development/unit-testing-singletons/","title":"Singleton and unit testing","body":"<p>You could use reflection to reset your singleton object to prevent tests from affecting each other.</p>\n<pre><code>@Before\npublic void resetSingleton() throws SecurityException, NoSuchFieldException, IllegalArgumentException, IllegalAccessException {\n   Field instance = MySingleton.class.getDeclaredField(&quot;instance&quot;);\n   instance.setAccessible(true);\n   instance.set(null, null);\n}\n</code></pre>\n<p>Ref: <a href=\"http://blog.davidehringer.com/testing/test-driven-development/unit-testing-singletons/\" rel=\"nofollow noreferrer\">unit-testing-singletons</a></p>\n"},{"tags":[],"owner":{"account_id":1102537,"reputation":649,"user_id":1094623,"accept_rate":100,"display_name":"Tzafrir"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1523100980,"creation_date":1523100980,"answer_id":49706951,"question_id":8256989,"body_markdown":"The problem with singletons (and also with static methods) is that it makes it hard to replace the actual code with a mocked implementation.\r\n\r\nFor example consider the following code\r\n\r\n    public class TestMe() {\r\n      public String foo(String data) {\r\n        boolean isFeatureFlag = MySingletonConfig.getInstance().getFeatureFlag();\r\n        if (isFeatureFlag)\r\n          // do somethine with data\r\n        else\r\n          // do something else with the data\r\n         return result;\r\n      }\r\n    }\r\n\r\nIt is not easy to write a unit test for the foo method and verifying the correct behavior is performed.\r\nThis is because you can&#39;t easily change the return value of `getFeatureFlag`. \r\n\r\nThe same problem exists for static methods - it&#39;s not easy to replace the actual target class method with a mock behavior.\r\n\r\nSure, there are workarounds like [powermock][1], or dependency injection to the method, or reflection in tests.\r\nBut it is much better not to use singletons in the first place\r\n\r\n\r\n  [1]: https://github.com/powermock/powermock","title":"Singleton and unit testing","body":"<p>The problem with singletons (and also with static methods) is that it makes it hard to replace the actual code with a mocked implementation.</p>\n\n<p>For example consider the following code</p>\n\n<pre><code>public class TestMe() {\n  public String foo(String data) {\n    boolean isFeatureFlag = MySingletonConfig.getInstance().getFeatureFlag();\n    if (isFeatureFlag)\n      // do somethine with data\n    else\n      // do something else with the data\n     return result;\n  }\n}\n</code></pre>\n\n<p>It is not easy to write a unit test for the foo method and verifying the correct behavior is performed.\nThis is because you can't easily change the return value of <code>getFeatureFlag</code>. </p>\n\n<p>The same problem exists for static methods - it's not easy to replace the actual target class method with a mock behavior.</p>\n\n<p>Sure, there are workarounds like <a href=\"https://github.com/powermock/powermock\" rel=\"nofollow noreferrer\">powermock</a>, or dependency injection to the method, or reflection in tests.\nBut it is much better not to use singletons in the first place</p>\n"},{"tags":[],"owner":{"account_id":6499111,"reputation":906,"user_id":5030597,"display_name":"Kyrylo Semenko"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1525613485,"creation_date":1525613485,"answer_id":50200254,"question_id":8256989,"body_markdown":"It is possible, see [the example][1]\r\n\r\n    import static org.junit.Assert.assertEquals;\r\n    import static org.mockito.Mockito.atLeastOnce;\r\n    import static org.mockito.Mockito.mock;\r\n    import static org.mockito.Mockito.verify;\r\n    import static org.mockito.Mockito.when;\r\n\r\n    import java.lang.reflect.Field;\r\n\r\n    import org.junit.After;\r\n    import org.junit.Before;\r\n    import org.junit.Test;\r\n\r\n    public class DriverSnapshotHandlerTest {\r\n\r\n    private static final String MOCKED_URL = &quot;MockedURL&quot;;\r\n    private FormatterService formatter;\r\n    \r\n    @SuppressWarnings(&quot;javadoc&quot;)\r\n    @Before\r\n    public void setUp() {\r\n        formatter = mock(FormatterService.class);\r\n        setMock(formatter);\r\n        when(formatter.formatTachoIcon()).thenReturn(MOCKED_URL);\r\n    }\r\n    \r\n    /**\r\n     * Remove the mocked instance from the class. It is important, because other tests will be confused with the mocked instance.\r\n     * @throws Exception if the instance could not be accessible\r\n     */\r\n    @After\r\n    public void resetSingleton() throws Exception {\r\n       Field instance = FormatterService.class.getDeclaredField(&quot;instance&quot;);\r\n       instance.setAccessible(true);\r\n       instance.set(null, null);\r\n    }\r\n    \r\n    /**\r\n     * Set a mock to the {@link FormatterService} instance\r\n     * Throws {@link RuntimeException} in case if reflection failed, see a {@link Field#set(Object, Object)} method description.\r\n     * @param mock the mock to be inserted to a class\r\n     */\r\n    private void setMock(FormatterService mock) {\r\n        Field instance;\r\n        try {\r\n            instance = FormatterService.class.getDeclaredField(&quot;instance&quot;);\r\n            instance.setAccessible(true);\r\n            instance.set(instance, mock);\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Test method for {@link com.example.DriverSnapshotHandler#getImageURL()}.\r\n     */\r\n    @Test\r\n    public void testFormatterServiceIsCalled() {\r\n        DriverSnapshotHandler handler = new DriverSnapshotHandler();\r\n        String url = handler.getImageURL();\r\n\r\n        verify(formatter, atLeastOnce()).formatTachoIcon();\r\n        assertEquals(MOCKED_URL, url);\r\n    }\r\n    \r\n    }\r\n\r\n\r\n\r\n  [1]: https://github.com/KyryloSemenko/staticFieldMock/blob/master/src/test/java/com/example/DriverSnapshotHandlerTest.java","title":"Singleton and unit testing","body":"<p>It is possible, see <a href=\"https://github.com/KyryloSemenko/staticFieldMock/blob/master/src/test/java/com/example/DriverSnapshotHandlerTest.java\" rel=\"nofollow noreferrer\">the example</a></p>\n\n<pre><code>import static org.junit.Assert.assertEquals;\nimport static org.mockito.Mockito.atLeastOnce;\nimport static org.mockito.Mockito.mock;\nimport static org.mockito.Mockito.verify;\nimport static org.mockito.Mockito.when;\n\nimport java.lang.reflect.Field;\n\nimport org.junit.After;\nimport org.junit.Before;\nimport org.junit.Test;\n\npublic class DriverSnapshotHandlerTest {\n\nprivate static final String MOCKED_URL = \"MockedURL\";\nprivate FormatterService formatter;\n\n@SuppressWarnings(\"javadoc\")\n@Before\npublic void setUp() {\n    formatter = mock(FormatterService.class);\n    setMock(formatter);\n    when(formatter.formatTachoIcon()).thenReturn(MOCKED_URL);\n}\n\n/**\n * Remove the mocked instance from the class. It is important, because other tests will be confused with the mocked instance.\n * @throws Exception if the instance could not be accessible\n */\n@After\npublic void resetSingleton() throws Exception {\n   Field instance = FormatterService.class.getDeclaredField(\"instance\");\n   instance.setAccessible(true);\n   instance.set(null, null);\n}\n\n/**\n * Set a mock to the {@link FormatterService} instance\n * Throws {@link RuntimeException} in case if reflection failed, see a {@link Field#set(Object, Object)} method description.\n * @param mock the mock to be inserted to a class\n */\nprivate void setMock(FormatterService mock) {\n    Field instance;\n    try {\n        instance = FormatterService.class.getDeclaredField(\"instance\");\n        instance.setAccessible(true);\n        instance.set(instance, mock);\n    } catch (Exception e) {\n        throw new RuntimeException(e);\n    }\n}\n\n/**\n * Test method for {@link com.example.DriverSnapshotHandler#getImageURL()}.\n */\n@Test\npublic void testFormatterServiceIsCalled() {\n    DriverSnapshotHandler handler = new DriverSnapshotHandler();\n    String url = handler.getImageURL();\n\n    verify(formatter, atLeastOnce()).formatTachoIcon();\n    assertEquals(MOCKED_URL, url);\n}\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2032265,"reputation":2081,"user_id":1815612,"display_name":"Yao Li"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1568763047,"creation_date":1568763047,"answer_id":57983179,"question_id":8256989,"body_markdown":"Use PowerMock to mock Singleton class (SingletonClassHelper) instance and non-static method (nonStaticMethod) which is called in `task.execute()`.\r\n\r\n\r\n        import static org.mockito.Mockito.when;\r\n    \r\n        import org.junit.Before;\r\n        import org.junit.Test;\r\n        import org.junit.runner.RunWith;\r\n        import org.mockito.InjectMocks;\r\n        import org.mockito.Mock;\r\n        import org.mockito.Mockito;\r\n        import org.powermock.api.mockito.PowerMockito;\r\n        import org.powermock.core.classloader.annotations.PrepareForTest;\r\n        import org.powermock.modules.junit4.PowerMockRunner;\r\n    \r\n        @PrepareForTest({ SingletonClassHelper.class })\r\n        @RunWith(PowerMockRunner.class)\r\n        public class ClassToTest {\r\n        \t\r\n        \t@InjectMocks\r\n            Task task;\r\n        \t\r\n        \tprivate static final String TEST_PAYLOAD = &quot;data&quot;;\r\n        \tprivate SingletonClassHelper singletonClassHelper;\r\n        \t\r\n        \t\r\n        \t@Before\r\n        \tpublic void setUp() {\r\n        \t\tPowerMockito.mockStatic(SingletonClassHelper.class);\r\n        \t\tsingletonClassHelper = Mockito.mock(SingletonClassHelper.class);\r\n        \t\twhen(SingletonClassHelper.getInstance()).thenReturn(singletonClassHelper);\r\n        \t}\r\n        \r\n        \t@Test\r\n        \tpublic void test() {\r\n        \t\twhen(singletonClassHelper.nonStaticMethod(parameterA, parameterB, ...)).thenReturn(TEST_PAYLOAD);\r\n                task.execute();\r\n        \t}\r\n        }","title":"Singleton and unit testing","body":"<p>Use PowerMock to mock Singleton class (SingletonClassHelper) instance and non-static method (nonStaticMethod) which is called in <code>task.execute()</code>.</p>\n\n<pre><code>    import static org.mockito.Mockito.when;\n\n    import org.junit.Before;\n    import org.junit.Test;\n    import org.junit.runner.RunWith;\n    import org.mockito.InjectMocks;\n    import org.mockito.Mock;\n    import org.mockito.Mockito;\n    import org.powermock.api.mockito.PowerMockito;\n    import org.powermock.core.classloader.annotations.PrepareForTest;\n    import org.powermock.modules.junit4.PowerMockRunner;\n\n    @PrepareForTest({ SingletonClassHelper.class })\n    @RunWith(PowerMockRunner.class)\n    public class ClassToTest {\n\n        @InjectMocks\n        Task task;\n\n        private static final String TEST_PAYLOAD = \"data\";\n        private SingletonClassHelper singletonClassHelper;\n\n\n        @Before\n        public void setUp() {\n            PowerMockito.mockStatic(SingletonClassHelper.class);\n            singletonClassHelper = Mockito.mock(SingletonClassHelper.class);\n            when(SingletonClassHelper.getInstance()).thenReturn(singletonClassHelper);\n        }\n\n        @Test\n        public void test() {\n            when(singletonClassHelper.nonStaticMethod(parameterA, parameterB, ...)).thenReturn(TEST_PAYLOAD);\n            task.execute();\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1177422,"reputation":2169,"user_id":1153071,"accept_rate":77,"display_name":"Ned Twigg"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1578973755,"creation_date":1578973755,"answer_id":59727292,"question_id":8256989,"body_markdown":"[durian-globals](https://github.com/diffplug/durian-globals) does [lazy double-locked initialization](https://github.com/diffplug/durian-globals/blob/cbc836cbfcd844f79cefe82387f529ebcc3cee44/durian-globals/src/main/java/com/diffplug/common/globals/Globals.java#L34-L46) of singletons, but also has a simple test-only API which allows you to replace the implementation for unit testing.","title":"Singleton and unit testing","body":"<p><a href=\"https://github.com/diffplug/durian-globals\" rel=\"nofollow noreferrer\">durian-globals</a> does <a href=\"https://github.com/diffplug/durian-globals/blob/cbc836cbfcd844f79cefe82387f529ebcc3cee44/durian-globals/src/main/java/com/diffplug/common/globals/Globals.java#L34-L46\" rel=\"nofollow noreferrer\">lazy double-locked initialization</a> of singletons, but also has a simple test-only API which allows you to replace the implementation for unit testing.</p>\n"},{"tags":[],"owner":{"account_id":3477700,"reputation":42367,"user_id":2910520,"accept_rate":100,"display_name":"MatPag"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1628180555,"creation_date":1628175777,"answer_id":68669087,"question_id":8256989,"body_markdown":"Below there is the solution I had to adopt with some immutable Kotlin singleton to test them\r\n\r\nSuppose you have a singleton class like this:\r\n\r\n```kotlin\r\nclass MySingleton private constructor(\r\n  {your dependencies}\r\n) {\r\n  companion object {\r\n    @JvmStatic\r\n    private var INSTANCE: MySingleton? = null\r\n\r\n    @JvmStatic\r\n    fun getInstance(): MySingleton {\r\n      return INSTANCE ?: synchronized(this) {\r\n        INSTANCE ?: MySingleton(\r\n          {your dependencies}\r\n        ).also {\r\n          INSTANCE = it\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nYou can do this in your kotlin junit tests:\r\n\r\n```kotlin\r\n@After\r\nfun after() {\r\n  val instance = MySingleton.Companion::class.memberProperties.find {\r\n    it.name == &quot;INSTANCE&quot;\r\n  }\r\n  instance!!.isAccessible = true\r\n  instance.javaField!!.set(null, null)\r\n}\r\n```\r\nYou just need to add the `kotlin-reflect` artifact to your dependencies\r\n","title":"Singleton and unit testing","body":"<p>Below there is the solution I had to adopt with some immutable Kotlin singleton to test them</p>\n<p>Suppose you have a singleton class like this:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class MySingleton private constructor(\n  {your dependencies}\n) {\n  companion object {\n    @JvmStatic\n    private var INSTANCE: MySingleton? = null\n\n    @JvmStatic\n    fun getInstance(): MySingleton {\n      return INSTANCE ?: synchronized(this) {\n        INSTANCE ?: MySingleton(\n          {your dependencies}\n        ).also {\n          INSTANCE = it\n        }\n      }\n    }\n  }\n}\n</code></pre>\n<p>You can do this in your kotlin junit tests:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@After\nfun after() {\n  val instance = MySingleton.Companion::class.memberProperties.find {\n    it.name == &quot;INSTANCE&quot;\n  }\n  instance!!.isAccessible = true\n  instance.javaField!!.set(null, null)\n}\n</code></pre>\n<p>You just need to add the <code>kotlin-reflect</code> artifact to your dependencies</p>\n"},{"tags":[],"owner":{"account_id":5205027,"reputation":6298,"user_id":4163254,"accept_rate":86,"display_name":"avi.elkharrat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689800438,"creation_date":1689714326,"answer_id":76716554,"question_id":8256989,"body_markdown":"I do not believe there is a problem testing a class depending on a singleton.\r\n\r\nThe real problem is to instantiate a singleton (or any other class) within a class (typically in it&#39;s constructor) instead of injecting it.\r\n\r\nDependency injection allows you (among many other things) to mock whatever class, be it a singleton or else, and to inject the mock into it&#39;s client class. From there, class becomes testable.\r\n\r\nWhich makes it difficult to test the singleton __itself__! because it&#39;s components are, by construction, instantiated within the singleton and not injected in it.","title":"Singleton and unit testing","body":"<p>I do not believe there is a problem testing a class depending on a singleton.</p>\n<p>The real problem is to instantiate a singleton (or any other class) within a class (typically in it's constructor) instead of injecting it.</p>\n<p>Dependency injection allows you (among many other things) to mock whatever class, be it a singleton or else, and to inject the mock into it's client class. From there, class becomes testable.</p>\n<p>Which makes it difficult to test the singleton <strong>itself</strong>! because it's components are, by construction, instantiated within the singleton and not injected in it.</p>\n"}],"owner":{"account_id":462722,"reputation":6359,"user_id":865188,"accept_rate":44,"display_name":"user2434"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59329,"favorite_count":0,"down_vote_count":0,"up_vote_count":54,"answer_count":14,"score":54,"last_activity_date":1689800438,"creation_date":1322137433,"question_id":8256989,"body_markdown":"The Effective Java has the following statement on unit testing singletons\r\n\r\n&gt;Making a class a singleton can make it difficult to test its clients, as it’s impossible to substitute a mock implementation for a singleton unless it implements an interface that serves as its type.\r\n\r\nCan anyone explain the why this is so ?","title":"Singleton and unit testing","body":"<p>The Effective Java has the following statement on unit testing singletons</p>\n\n<blockquote>\n  <p>Making a class a singleton can make it difficult to test its clients, as it’s impossible to substitute a mock implementation for a singleton unless it implements an interface that serves as its type.</p>\n</blockquote>\n\n<p>Can anyone explain the why this is so ?</p>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":5715956,"reputation":2481,"user_id":4516144,"display_name":"Kane O&#39;Riley"},"score":1,"creation_date":1442133410,"post_id":32546671,"comment_id":52951887,"body_markdown":"I think what you want is `Resources.getIdentifier()`, but its unclear from your question","body":"I think what you want is <code>Resources.getIdentifier()</code>, but its unclear from your question"}],"answers":[{"tags":[],"owner":{"account_id":2294849,"reputation":331956,"user_id":2016562,"accept_rate":92,"display_name":"Gabriele Mariotti"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1442131467,"creation_date":1442131467,"answer_id":32547599,"question_id":32546671,"body_markdown":"What you are asking is completely wrong.\r\n\r\n`&quot;R.id.id&quot;` is a `String` that **can&#39;t be converted** in a int.\r\n\r\nIt will always throw a `NumberFormatException` .\r\n\r\nCheck the [javadoc][1]:\r\n\r\n&gt;Parses the string argument as a signed decimal integer. The characters in the string must all be decimal digits, except that the first character may be an ASCII minus sign &#39;-&#39; (&#39;\\u002D&#39;) to indicate a negative value or an ASCII plus sign &#39;+&#39; (&#39;\\u002B&#39;) to indicate a positive value. The resulting integer value is returned, exactly as if the argument and the radix 10 were given as arguments to the parseInt(java.lang.String, int) method.\r\n\r\nIf the resource used in your `strings.xml` with the same `id` is a integer, you have to use somenthing different:\r\n\r\n    &lt;resources&gt;\r\n        &lt;string name=&quot;mystring&quot;&gt;12&lt;/string&gt;\r\n    &lt;/resources&gt;\r\n\r\nUse this code to retrieve a string:\r\n\r\n    String string = getString(R.string.mystring);\r\n    \r\n    try{\r\n       int number = Integer.parseInt(string);\r\n    } catch (NumberFormatException nfe){\r\n      //.....\r\n    }\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt(java.lang.String)","title":"android studio how to convert string with id to int?","body":"<p>What you are asking is completely wrong.</p>\n\n<p><code>\"R.id.id\"</code> is a <code>String</code> that <strong>can't be converted</strong> in a int.</p>\n\n<p>It will always throw a <code>NumberFormatException</code> .</p>\n\n<p>Check the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt(java.lang.String)\" rel=\"nofollow\">javadoc</a>:</p>\n\n<blockquote>\n  <p>Parses the string argument as a signed decimal integer. The characters in the string must all be decimal digits, except that the first character may be an ASCII minus sign '-' ('\\u002D') to indicate a negative value or an ASCII plus sign '+' ('\\u002B') to indicate a positive value. The resulting integer value is returned, exactly as if the argument and the radix 10 were given as arguments to the parseInt(java.lang.String, int) method.</p>\n</blockquote>\n\n<p>If the resource used in your <code>strings.xml</code> with the same <code>id</code> is a integer, you have to use somenthing different:</p>\n\n<pre><code>&lt;resources&gt;\n    &lt;string name=\"mystring\"&gt;12&lt;/string&gt;\n&lt;/resources&gt;\n</code></pre>\n\n<p>Use this code to retrieve a string:</p>\n\n<pre><code>String string = getString(R.string.mystring);\n\ntry{\n   int number = Integer.parseInt(string);\n} catch (NumberFormatException nfe){\n  //.....\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6535921,"reputation":6578,"user_id":5055401,"accept_rate":75,"display_name":"Inzimam Tariq IT"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1442300324,"creation_date":1442300324,"answer_id":32579655,"question_id":32546671,"body_markdown":"`String` that consists of other than numeric values can not be converted to `int` or into any of the numeric data types. However if a string hold numeric value then you can convert it into `int` or other numeric data types. And the reason for it is every `programming language` has its `syntax` defined, if you want to assign value through character You can do as\r\n\r\n    int variableName = &#39;a&#39;;\r\n    or\r\n    int variableName = &#39;b&#39;;\r\netc. this is spacial numeric assigning in java `&#39;a&#39;` equals `97` &amp; `&#39;b&#39;` equals `98`.\r\n\r\nOr if a string hold numeric value you can convert it as\r\n\r\n    &lt;resources&gt;\r\n        &lt;string name=&quot;stringVal&quot;&gt;500&lt;/string&gt;\r\n    &lt;/resources&gt;\r\n\r\nget like this\r\n\r\n    String string = getString(R.string.stringVal);\r\n    \r\n    \r\n       int anyName= Integer.parseInt(string);\r\n   ","title":"android studio how to convert string with id to int?","body":"<p><code>String</code> that consists of other than numeric values can not be converted to <code>int</code> or into any of the numeric data types. However if a string hold numeric value then you can convert it into <code>int</code> or other numeric data types. And the reason for it is every <code>programming language</code> has its <code>syntax</code> defined, if you want to assign value through character You can do as</p>\n\n<pre><code>int variableName = 'a';\nor\nint variableName = 'b';\n</code></pre>\n\n<p>etc. this is spacial numeric assigning in java <code>'a'</code> equals <code>97</code> &amp; <code>'b'</code> equals <code>98</code>.</p>\n\n<p>Or if a string hold numeric value you can convert it as</p>\n\n<pre><code>&lt;resources&gt;\n    &lt;string name=\"stringVal\"&gt;500&lt;/string&gt;\n&lt;/resources&gt;\n</code></pre>\n\n<p>get like this</p>\n\n<pre><code>String string = getString(R.string.stringVal);\n\n\n   int anyName= Integer.parseInt(string);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3446000,"reputation":435,"user_id":2886813,"display_name":"Samwise Ganges"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689799956,"creation_date":1689799956,"answer_id":76725129,"question_id":32546671,"body_markdown":"I had the same thought and unfortunately there isn&#39;t really any way to do what you&#39;re asking (start with a string, and convert it to an integer ID that you can use with findViewById).\r\n\r\nAs others have mentioned, there is [Resources.getIdentifier()][1] but that doesn&#39;t take in a string as an argument. It doesn&#39;t take any arguments, it just spits out an integer that&#39;s not tied to anything else. You can of course store that integer in a variable but you won&#39;t know what it is ahead of time. You can also look into View Tags which let you add custom tags to views. \r\n\r\n  [1]: https://developer.android.com/reference/android/content/res/Resources#getIdentifier(java.lang.String,%20java.lang.String,%20java.lang.String)","title":"android studio how to convert string with id to int?","body":"<p>I had the same thought and unfortunately there isn't really any way to do what you're asking (start with a string, and convert it to an integer ID that you can use with findViewById).</p>\n<p>As others have mentioned, there is <a href=\"https://developer.android.com/reference/android/content/res/Resources#getIdentifier(java.lang.String,%20java.lang.String,%20java.lang.String)\" rel=\"nofollow noreferrer\">Resources.getIdentifier()</a> but that doesn't take in a string as an argument. It doesn't take any arguments, it just spits out an integer that's not tied to anything else. You can of course store that integer in a variable but you won't know what it is ahead of time. You can also look into View Tags which let you add custom tags to views.</p>\n"}],"owner":{"account_id":6938490,"reputation":53,"user_id":5325677,"display_name":"itay azaria"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2749,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":32547599,"answer_count":3,"score":2,"last_activity_date":1689799956,"creation_date":1442122533,"question_id":32546671,"body_markdown":"Is there any way to convert string with id (for example: `String id = &quot;R.id.id&quot;` ) to int?\r\n\r\nI have tried this:\r\n\r\n    String st = &quot;R.id.id&quot;;\r\n    int id = Integer.parseInt(st);\r\n\r\nBut it didn&#39;t work.\r\n\r\nThanks for help!","title":"android studio how to convert string with id to int?","body":"<p>Is there any way to convert string with id (for example: <code>String id = \"R.id.id\"</code> ) to int?</p>\n\n<p>I have tried this:</p>\n\n<pre><code>String st = \"R.id.id\";\nint id = Integer.parseInt(st);\n</code></pre>\n\n<p>But it didn't work.</p>\n\n<p>Thanks for help!</p>\n"},{"tags":["java","android","butterknife"],"comments":[{"owner":{"account_id":12721843,"reputation":16003,"user_id":9241978,"display_name":"Pawel"},"score":0,"creation_date":1689807112,"post_id":76725068,"comment_id":135267518,"body_markdown":"Butterknife is a deprecated library that has not received updates for years and now AGP 8 brings changes that literally break it. Recommended approach is to migrate to up to date solution aka jetpack ViewBinding.","body":"Butterknife is a deprecated library that has not received updates for years and now AGP 8 brings changes that literally break it. Recommended approach is to migrate to up to date solution aka jetpack ViewBinding."},{"owner":{"account_id":10272415,"reputation":21,"user_id":7580411,"display_name":"Boot Re"},"score":0,"creation_date":1690090654,"post_id":76725068,"comment_id":135302959,"body_markdown":"@Pawel Thank you i&#39;ll migrate to jetpack ViewBinding.","body":"@Pawel Thank you i&#39;ll migrate to jetpack ViewBinding."},{"owner":{"account_id":14943891,"reputation":1727,"user_id":10789722,"display_name":"MEGHA RAMOLIYA"},"score":0,"creation_date":1690867217,"post_id":76725068,"comment_id":135408977,"body_markdown":"@BootRe Really it works for me and thanks a lot for solution.","body":"@BootRe Really it works for me and thanks a lot for solution."}],"owner":{"account_id":10272415,"reputation":21,"user_id":7580411,"display_name":"Boot Re"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":276,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689799401,"creation_date":1689799401,"question_id":76725068,"body_markdown":"I update android studio.\r\nI ran the project as usual.\r\n\r\nIn my project I use butterknife library.\r\n\r\nWhen building the project, I got this error.\r\n\r\n```\r\nCause: superclass access check failed: class butterknife.compiler.ButterKnifeProcessor$RScanner (in unnamed module @0x46be592) cannot access class com.sun.tools.javac.tree.TreeScanner (in module jdk.compiler) because module jdk.compiler does not export com.sun.tools.javac.tree to unnamed module @0x46be592\r\n```\r\n\r\nAnd while I was looking for a solution,\r\nhttps://stackoverflow.com/questions/76216854/butterknife-issue-after-updating-to-latest-version-of-android-studio-with-lates\r\n\r\nfound the article,\r\n\r\nin the android section of the app-level build.gradle code\r\n\r\n```\r\nandroid\r\n    {\r\n     tasks.withType(JavaCompile).configureEach {\r\n     options.fork = true\r\n     options.forkOptions.jvmArgs += [\r\n     &#39;--add-opens=jdk.compiler/com.sun.tools.javac.tree=ALL-UNNAMED&#39;,\r\n     &#39;--add-opens=jdk.compiler/com.sun.tools.javac.code=ALL-UNNAMED&#39;,\r\n     &#39;--add-opens=jdk.compiler/com.sun.tools.javac.comp=ALL-UNNAMED&#39;,\r\n     &#39;--add-opens=jdk.compiler/com.sun.tools.javac.file=ALL-UNNAMED&#39;,\r\n     &#39;--add-opens=jdk.compiler/com.sun.tools.javac.main=ALL-UNNAMED&#39;,\r\n     &#39;--add-opens=jdk.compiler/com.sun.tools.javac.model=ALL-UNNAMED&#39;,\r\n     &#39;--add-opens=jdk.compiler/com.sun.tools.javac.parser=ALL-UNNAMED&#39;,\r\n     &#39;--add-opens=jdk.compiler/com.sun.tools.javac.processing=ALL-UNNAMED&#39;,\r\n     &#39;--add-opens=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED&#39;,\r\n     &#39;--add-opens=jdk.compiler/com.sun.tools.javac.jvm=ALL-UNNAMED&#39;,\r\n     ]\r\n      \r\n}\r\n```\r\n\r\nWhen I added the following, the project built normally like a lie.\r\n\r\nHowever, I understand that this approach is a kind of hacky approach.\r\n\r\nIs there a normal approach besides these approaches?\r\n\r\nthank you","title":"Butterknife issue that occurred when Android Studio was updated to the latest version and jdk was upgraded","body":"<p>I update android studio.\nI ran the project as usual.</p>\n<p>In my project I use butterknife library.</p>\n<p>When building the project, I got this error.</p>\n<pre><code>Cause: superclass access check failed: class butterknife.compiler.ButterKnifeProcessor$RScanner (in unnamed module @0x46be592) cannot access class com.sun.tools.javac.tree.TreeScanner (in module jdk.compiler) because module jdk.compiler does not export com.sun.tools.javac.tree to unnamed module @0x46be592\n</code></pre>\n<p>And while I was looking for a solution,\n<a href=\"https://stackoverflow.com/questions/76216854/butterknife-issue-after-updating-to-latest-version-of-android-studio-with-lates\">butterknife issue, after updating to latest version of android studio with latest gradle plugin</a></p>\n<p>found the article,</p>\n<p>in the android section of the app-level build.gradle code</p>\n<pre><code>android\n    {\n     tasks.withType(JavaCompile).configureEach {\n     options.fork = true\n     options.forkOptions.jvmArgs += [\n     '--add-opens=jdk.compiler/com.sun.tools.javac.tree=ALL-UNNAMED',\n     '--add-opens=jdk.compiler/com.sun.tools.javac.code=ALL-UNNAMED',\n     '--add-opens=jdk.compiler/com.sun.tools.javac.comp=ALL-UNNAMED',\n     '--add-opens=jdk.compiler/com.sun.tools.javac.file=ALL-UNNAMED',\n     '--add-opens=jdk.compiler/com.sun.tools.javac.main=ALL-UNNAMED',\n     '--add-opens=jdk.compiler/com.sun.tools.javac.model=ALL-UNNAMED',\n     '--add-opens=jdk.compiler/com.sun.tools.javac.parser=ALL-UNNAMED',\n     '--add-opens=jdk.compiler/com.sun.tools.javac.processing=ALL-UNNAMED',\n     '--add-opens=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED',\n     '--add-opens=jdk.compiler/com.sun.tools.javac.jvm=ALL-UNNAMED',\n     ]\n      \n}\n</code></pre>\n<p>When I added the following, the project built normally like a lie.</p>\n<p>However, I understand that this approach is a kind of hacky approach.</p>\n<p>Is there a normal approach besides these approaches?</p>\n<p>thank you</p>\n"},{"tags":["java","android","android-studio","pdfview","androidpdfviewer"],"owner":{"account_id":17550827,"reputation":1,"user_id":12731263,"display_name":"Mujtaba Ishaq Naqvi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689798792,"creation_date":1689798792,"question_id":76724994,"body_markdown":"I want to handle links in my pdf but .linkHandler method is not working and giving me errors that it should be renamed but according to library, I&#39;m using this correctly.\r\n\r\nHave a look at the code\r\n\r\n```\r\n   PDFView pdfView = findViewById(R.id.pdfView);\r\n        pdfView.fromAsset(&quot;YEK.pdf&quot;)\r\n                .defaultPage(0)\r\n                .enableSwipe(true)\r\n                .swipeHorizontal(false)\r\n                .enableDoubletap(true)\r\n                .onLoad(new OnLoadCompleteListener() {\r\n                    @Override\r\n                    public void loadComplete(int nbPages) {\r\n                        // PDF loaded successfully\r\n                    }\r\n                })\r\n                .load();\r\n\r\n        pdfView.fromAsset(&quot;YEK.pdf&quot;)\r\n                .defaultPage(0)\r\n                .enableSwipe(true)\r\n                .swipeHorizontal(false)\r\n                .enableDoubletap(true)\r\n                .onLoad(new OnLoadCompleteListener() {\r\n                    @Override\r\n                    public void loadComplete(int nbPages) {\r\n                        // PDF loaded successfully\r\n                    }\r\n                })\r\n                .onPageChange(new OnPageChangeListener() {\r\n                    @Override\r\n                    public void onPageChanged(int page, int pageCount) {\r\n                        // Page changed\r\n                    }\r\n                })\r\n                .onPageError(new OnPageErrorListener() {\r\n                    @Override\r\n                    public void onPageError(int page, Throwable t) {\r\n                        // Error occurred while loading page\r\n                    }\r\n                })\r\n                .onRender(new OnRenderListener() {\r\n                    @Override\r\n                    public void onInitiallyRendered(int nbPages) {\r\n\r\n                    }\r\n\r\n                    @Override\r\n                    public void onInitiallyRendered(int nbPages, float pageWidth, float pageHeight) {\r\n                        // PDF rendered successfully\r\n                        pdfView.enableAnnotationRendering(true);\r\n                        pdfView.linkHandler(new DefaultLinkHandler(pdfView));\r\n                    }\r\n                })\r\n                .load();\r\n\r\n\r\n\r\n    }\r\n}\r\n```\r\n\r\nI am using to write a pdfreader app. And the pdf which I&#39;m using in the app has embedded links. I want to handle that links but this is not working. Android studio is the IDE &#39;m using.\r\n\r\nHere is the implementation for the library in *build.gradle*\r\n\r\n`implementation &#39;com.github.barteksc:android-pdf-viewer:3.2.0-beta.1&#39;`","title":"I&#39;m facing a problem with using pdfviewer library to handle links in the PDF","body":"<p>I want to handle links in my pdf but .linkHandler method is not working and giving me errors that it should be renamed but according to library, I'm using this correctly.</p>\n<p>Have a look at the code</p>\n<pre><code>   PDFView pdfView = findViewById(R.id.pdfView);\n        pdfView.fromAsset(&quot;YEK.pdf&quot;)\n                .defaultPage(0)\n                .enableSwipe(true)\n                .swipeHorizontal(false)\n                .enableDoubletap(true)\n                .onLoad(new OnLoadCompleteListener() {\n                    @Override\n                    public void loadComplete(int nbPages) {\n                        // PDF loaded successfully\n                    }\n                })\n                .load();\n\n        pdfView.fromAsset(&quot;YEK.pdf&quot;)\n                .defaultPage(0)\n                .enableSwipe(true)\n                .swipeHorizontal(false)\n                .enableDoubletap(true)\n                .onLoad(new OnLoadCompleteListener() {\n                    @Override\n                    public void loadComplete(int nbPages) {\n                        // PDF loaded successfully\n                    }\n                })\n                .onPageChange(new OnPageChangeListener() {\n                    @Override\n                    public void onPageChanged(int page, int pageCount) {\n                        // Page changed\n                    }\n                })\n                .onPageError(new OnPageErrorListener() {\n                    @Override\n                    public void onPageError(int page, Throwable t) {\n                        // Error occurred while loading page\n                    }\n                })\n                .onRender(new OnRenderListener() {\n                    @Override\n                    public void onInitiallyRendered(int nbPages) {\n\n                    }\n\n                    @Override\n                    public void onInitiallyRendered(int nbPages, float pageWidth, float pageHeight) {\n                        // PDF rendered successfully\n                        pdfView.enableAnnotationRendering(true);\n                        pdfView.linkHandler(new DefaultLinkHandler(pdfView));\n                    }\n                })\n                .load();\n\n\n\n    }\n}\n</code></pre>\n<p>I am using to write a pdfreader app. And the pdf which I'm using in the app has embedded links. I want to handle that links but this is not working. Android studio is the IDE 'm using.</p>\n<p>Here is the implementation for the library in <em>build.gradle</em></p>\n<p><code>implementation 'com.github.barteksc:android-pdf-viewer:3.2.0-beta.1'</code></p>\n"},{"tags":["java","single-sign-on","saml-2.0","opensaml"],"answers":[{"tags":[],"owner":{"account_id":119270,"reputation":5485,"user_id":310852,"accept_rate":59,"display_name":"Stefan Rasmusson"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1689798408,"creation_date":1413886298,"answer_id":26484180,"question_id":26482902,"body_markdown":"The first thing you need to do is to read up on the SAML protocol. I have two blogs I can recommend.\r\n\r\n- [Intro to SAML][1] \r\n\r\n- [Intro to the Web Profile][2]\r\n\r\nNext you can choose to build the SAML integration in your app or you can use a third party application to do the integration. Typical third party applications are [Shibboleth][3] and [OpenAM][4].\r\n\r\nIf you decide to build it in to your application, you can for example use OpenSAML. OpenSAML is a library that helps to work with SAML messages. [I have several blogs on the subject][5] and [one book that is good to start with][6] \r\n\r\nAbout your questions. \r\n\r\n1. You don&#39;t need to send a request. The IDP can start the process without a request.\r\n2. Well you can create one just by editing the one that you found. You can also use OpenSAML to create the assertion\r\n3. You do not sign the response in your application, the IDP signs the response. The signature verification depends on the software. [Here is how you do it in OpenSAML][7] \r\n\r\n\r\n  [1]: https://blog.samlsecurity.com/2010/11/short-introduction-to-saml.html\r\n  [2]: https://blog.samlsecurity.com/2012/05/saml-web-profile.html\r\n  [3]: http://www.internet2.edu/products-services/trust-identity-middleware/shibboleth/\r\n  [4]: http://forgerock.com/products/open-identity-stack/openam/\r\n  [5]: https://blog.samlsecurity.com/categories/opensaml/\r\n  [6]: https://blog.samlsecurity.com/a-guide-to-opensamlv3.html\r\n  [7]: https://blog.samlsecurity.com/2012/11/verifying-signatures-with-opensaml.html","title":"Create SAML Assertion and Sign the response","body":"<p>The first thing you need to do is to read up on the SAML protocol. I have two blogs I can recommend.</p>\n<ul>\n<li><p><a href=\"https://blog.samlsecurity.com/2010/11/short-introduction-to-saml.html\" rel=\"nofollow noreferrer\">Intro to SAML</a></p>\n</li>\n<li><p><a href=\"https://blog.samlsecurity.com/2012/05/saml-web-profile.html\" rel=\"nofollow noreferrer\">Intro to the Web Profile</a></p>\n</li>\n</ul>\n<p>Next you can choose to build the SAML integration in your app or you can use a third party application to do the integration. Typical third party applications are <a href=\"http://www.internet2.edu/products-services/trust-identity-middleware/shibboleth/\" rel=\"nofollow noreferrer\">Shibboleth</a> and <a href=\"http://forgerock.com/products/open-identity-stack/openam/\" rel=\"nofollow noreferrer\">OpenAM</a>.</p>\n<p>If you decide to build it in to your application, you can for example use OpenSAML. OpenSAML is a library that helps to work with SAML messages. <a href=\"https://blog.samlsecurity.com/categories/opensaml/\" rel=\"nofollow noreferrer\">I have several blogs on the subject</a> and <a href=\"https://blog.samlsecurity.com/a-guide-to-opensamlv3.html\" rel=\"nofollow noreferrer\">one book that is good to start with</a></p>\n<p>About your questions.</p>\n<ol>\n<li>You don't need to send a request. The IDP can start the process without a request.</li>\n<li>Well you can create one just by editing the one that you found. You can also use OpenSAML to create the assertion</li>\n<li>You do not sign the response in your application, the IDP signs the response. The signature verification depends on the software. <a href=\"https://blog.samlsecurity.com/2012/11/verifying-signatures-with-opensaml.html\" rel=\"nofollow noreferrer\">Here is how you do it in OpenSAML</a></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":294592,"reputation":733,"user_id":598573,"accept_rate":40,"display_name":"shimon001"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1504269769,"creation_date":1504269769,"answer_id":46000524,"question_id":26482902,"body_markdown":"You can also use [Java Saml from Onelogin][1] to sign the response using their utility class (com.onelogin.saml2.util.Util): \r\n\r\n    // loads xml string into Document\r\n    Document document = Util.loadXML(saml);\r\n\r\n    // loads certificate and private key from string\r\n\tX509Certificate cert = Util.loadCert(pubKeyBytes);\r\n\tPrivateKey privateKey = Util.loadPrivateKey(privKeyBytes);\r\n\r\n    // signs the response\r\n\tString signedResponse = Util.addSign(document, privateKey, cert, null);\r\n\r\nYou can also use another `.addSign` method that takes `Node` as first parameter to sign the assertion of the SAML response.\r\n\r\nTheir Maven dependency is:\r\n\r\n    &lt;dependency&gt;\r\n\t\t&lt;groupId&gt;com.onelogin&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;java-saml&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.0.0&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n  [1]: https://github.com/onelogin/java-saml","title":"Create SAML Assertion and Sign the response","body":"<p>You can also use <a href=\"https://github.com/onelogin/java-saml\" rel=\"noreferrer\">Java Saml from Onelogin</a> to sign the response using their utility class (com.onelogin.saml2.util.Util): </p>\n\n<pre><code>// loads xml string into Document\nDocument document = Util.loadXML(saml);\n\n// loads certificate and private key from string\nX509Certificate cert = Util.loadCert(pubKeyBytes);\nPrivateKey privateKey = Util.loadPrivateKey(privKeyBytes);\n\n// signs the response\nString signedResponse = Util.addSign(document, privateKey, cert, null);\n</code></pre>\n\n<p>You can also use another <code>.addSign</code> method that takes <code>Node</code> as first parameter to sign the assertion of the SAML response.</p>\n\n<p>Their Maven dependency is:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.onelogin&lt;/groupId&gt;\n    &lt;artifactId&gt;java-saml&lt;/artifactId&gt;\n    &lt;version&gt;2.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"display_name":"user2094311"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36806,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":2,"score":7,"last_activity_date":1689798408,"creation_date":1413882461,"question_id":26482902,"body_markdown":"I have a Java web application. I want to implement SAML Single-Sign-On login for my application. I have got this [GitHub onelogin program][1] to send request and get response. But it was not working properly. I created one account there. But I don&#39;t have an enterprise account. When I run the application, it is going to [onelogin login][2] page. I tried to login, but it is not returning anyuthing in the response, showing I don&#39;t have permission. If I provide wrong credentials also, it is not giving any SAML response.\r\n\r\nSo I decided to create an assertion and sign it. \r\n\r\n1. Do I need to send a SAML request to any identity provider first?\r\n2. How to create a sample SAML assertion instead of going to IdP([Like this is fine?][3])\r\n3. Once I get the SAML response, how do I sign it in my application and proceed? \r\n\r\nThanks\r\n\r\n**UPDATE 1**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;samlp:Response xmlns:samlp=&quot;urn:oasis:names:tc:SAML:2.0:protocol&quot;\r\n      ID=&quot;123&quot; InResponseTo=&quot;abc&quot; IssueInstant=&quot;2014-11-21T17:13:42.872Z&quot; \r\n      Version=&quot;2.0&quot;&gt;\r\n        &lt;samlp:Status&gt;\r\n            &lt;samlp:StatusCode Value=&quot;urn:oasis:names:tc:SAML:2.0:status:Success&quot;/&gt;\r\n        &lt;/samlp:Status&gt;\r\n        &lt;saml:Assertion xmlns:saml=&quot;urn:oasis:names:tc:SAML:2.0:assertion&quot; Version=&quot;2.0&quot;&gt;\r\n            &lt;saml:Subject&gt;\r\n                &lt;saml:NameID Format=&quot;urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress&quot;&gt;\r\n                    user@example.com\r\n                &lt;/saml:NameID&gt;\r\n            &lt;/saml:Subject&gt;\r\n            &lt;saml:AuthnStatement AuthnInstant=&quot;2014-11-21T17:13:42.899Z&quot;&gt;\r\n                &lt;saml:AuthnContext&gt;\r\n                    &lt;saml:AuthnContextClassRef&gt;\r\n                        urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport\r\n                    &lt;/saml:AuthnContextClassRef&gt;\r\n                &lt;/saml:AuthnContext&gt;\r\n            &lt;/saml:AuthnStatement&gt;\r\n        &lt;/saml:Assertion&gt;\r\n    &lt;/samlp:Response&gt;\r\n\r\n  [1]: https://github.com/onelogin/java-saml\r\n  [2]: https://app.onelogin.com/login\r\n  [3]: https://stackoverflow.com/questions/384851/looking-for-feedback-on-a-first-saml-implementation","title":"Create SAML Assertion and Sign the response","body":"<p>I have a Java web application. I want to implement SAML Single-Sign-On login for my application. I have got this <a href=\"https://github.com/onelogin/java-saml\" rel=\"nofollow noreferrer\">GitHub onelogin program</a> to send request and get response. But it was not working properly. I created one account there. But I don't have an enterprise account. When I run the application, it is going to <a href=\"https://app.onelogin.com/login\" rel=\"nofollow noreferrer\">onelogin login</a> page. I tried to login, but it is not returning anyuthing in the response, showing I don't have permission. If I provide wrong credentials also, it is not giving any SAML response.</p>\n\n<p>So I decided to create an assertion and sign it. </p>\n\n<ol>\n<li>Do I need to send a SAML request to any identity provider first?</li>\n<li>How to create a sample SAML assertion instead of going to IdP(<a href=\"https://stackoverflow.com/questions/384851/looking-for-feedback-on-a-first-saml-implementation\">Like this is fine?</a>)</li>\n<li>Once I get the SAML response, how do I sign it in my application and proceed? </li>\n</ol>\n\n<p>Thanks</p>\n\n<p><strong>UPDATE 1</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;samlp:Response xmlns:samlp=\"urn:oasis:names:tc:SAML:2.0:protocol\"\n  ID=\"123\" InResponseTo=\"abc\" IssueInstant=\"2014-11-21T17:13:42.872Z\" \n  Version=\"2.0\"&gt;\n    &lt;samlp:Status&gt;\n        &lt;samlp:StatusCode Value=\"urn:oasis:names:tc:SAML:2.0:status:Success\"/&gt;\n    &lt;/samlp:Status&gt;\n    &lt;saml:Assertion xmlns:saml=\"urn:oasis:names:tc:SAML:2.0:assertion\" Version=\"2.0\"&gt;\n        &lt;saml:Subject&gt;\n            &lt;saml:NameID Format=\"urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress\"&gt;\n                user@example.com\n            &lt;/saml:NameID&gt;\n        &lt;/saml:Subject&gt;\n        &lt;saml:AuthnStatement AuthnInstant=\"2014-11-21T17:13:42.899Z\"&gt;\n            &lt;saml:AuthnContext&gt;\n                &lt;saml:AuthnContextClassRef&gt;\n                    urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport\n                &lt;/saml:AuthnContextClassRef&gt;\n            &lt;/saml:AuthnContext&gt;\n        &lt;/saml:AuthnStatement&gt;\n    &lt;/saml:Assertion&gt;\n&lt;/samlp:Response&gt;\n</code></pre>\n"},{"tags":["java","rest","https","multipartform-data","boomi"],"owner":{"account_id":21568257,"reputation":1,"user_id":15901534,"display_name":"İsmet Coşkun &#214;zkaran"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689798396,"creation_date":1689791247,"question_id":76724266,"body_markdown":"I am trying to post an employee data to a client API and my post request does not reach to related API and I get a response like below. And also I have tried to post my request via an integration platform called Dell Boomi. Also my request doesn&#39;t have an empty field and all fields related to method are filled with data. \r\n\r\n&gt; {&quot;type&quot;:&quot;https://tools.ietf.org/html/rfc7231#section-6.5.1&quot;,&quot;title&quot;:&quot;One or more validation errors occurred.&quot;,&quot;status&quot;:400,&quot;traceId&quot;:&quot;00-26ae8fec464638bc5764c2ad82af50b4-5cb4f78ff28030ac-00&quot;,&quot;errors&quot;:{&quot;&quot;:[&quot;Failed to read the request form. Unexpected end of Stream, the content may have already been read by another component. &quot;]}}\r\n\r\n```\r\nimport java.util.Properties;\r\nimport java.io.InputStream;\r\nimport com.boomi.execution.ExecutionUtil;\r\n\r\nimport java.io.BufferedReader;\r\nimport java.io.IOException;\r\nimport java.io.InputStreamReader;\r\nimport org.apache.http.client.ClientProtocolException;\r\nimport org.apache.http.client.HttpClient;\r\nimport org.apache.http.client.methods.HttpPost;\r\nimport org.apache.http.entity.ByteArrayEntity;\r\nimport org.apache.http.impl.client.HttpClientBuilder;\r\nimport org.apache.commons.net.util.Base64;\r\nimport org.apache.http.HttpEntity;\r\nimport org.apache.http.HttpResponse;\r\nimport org.apache.http.HttpHost;\r\nimport org.apache.http.ssl.SSLContextBuilder;\r\nimport org.apache.http.client.methods.HttpRequestBase;\r\nimport com.boomi.component.CertificateFactory as BoomiCertificateFactory;\r\nimport javax.net.ssl.SSLContext;\r\nimport com.boomi.execution.ExecutionManager;\r\nimport com.boomi.execution.ExecutionTask;\r\nimport org.apache.http.client.config.RequestConfig;\r\nimport org.apache.http.client.config.RequestConfig.Builder;\r\nimport java.io.ByteArrayOutputStream;\r\n\r\n\r\nExecutionTask task = ExecutionManager.current;\r\nSSLContext sslContextBoomi = BoomiCertificateFactory.getInstance(task.accountConfig).createSSLContext();\r\n\r\nString url =  ExecutionUtil.getDynamicProcessProperty(&quot;url&quot;);\r\n//String soapAction = ExecutionUtil.getDynamicProcessProperty(&quot;soapAction&quot;);\r\n//String userName =  ExecutionUtil.getDynamicProcessProperty(&quot;UserName&quot;);\r\n//String password =  ExecutionUtil.getDynamicProcessProperty(&quot;Password&quot;);\r\n//String token =  ExecutionUtil.getDynamicProcessProperty(&quot;token&quot;);\r\n\r\n//HttpHost proxy = new HttpHost(&quot;10.1.70.115&quot;, 8080, &quot;http&quot;);\r\n\r\n\r\nfor( int i = 0; i &lt; dataContext.getDataCount(); i++ ) {\r\n    InputStream is = dataContext.getStream(i);\r\n    Properties props = dataContext.getProperties(i);\r\n    logger = ExecutionUtil.getBaseLogger();\r\n    \r\n    ByteArrayOutputSt`your text`ream buffer = new ByteArrayOutputStream();\r\n    int nRead;\r\n    byte[] data = new byte[1024];\r\n    while ((nRead = is.read(data, 0, data.length)) != -1) {\r\n        buffer.write(data, 0, nRead);\r\n    }\t\t \r\n    buffer.flush();\r\n    byte[] byteArray = buffer.toByteArray();\r\n    \r\n    HttpPost httpPostRequest = new HttpPost(url);\r\n    HttpClient client = createHttpClient(httpPostRequest,sslContextBoomi);\r\n    \r\n   //if( !&quot;&quot;.equals(userName) &amp;&amp;  !&quot;&quot;.equals(password)) {\t\t\t\t\t\r\n\t//\tString userPassword = userName + &quot;:&quot; + password;\r\n\t//\tbyte[] encodeBase64 = Base64.encodeBase64(userPassword.getBytes(&quot;UTF-8&quot;));\r\n\t\t\r\n\t//\thttpPostRequest.addHeader(&quot;Authorization&quot;, &quot;Basic &quot;+ new String(encodeBase64));\r\n\t//}\r\n\t\r\n\t//sendRequest\r\n\tHttpEntity entity = new ByteArrayEntity(byteArray);\r\n\thttpPostRequest.setEntity(entity);\r\n\t\r\n\t//addHEader\r\n\t//httpPostRequest.addHeader(&quot;SOAPAction&quot;,soapAction);\r\n\t//httpPostRequest.addHeader(&quot;Content-Type&quot;,&quot;text/xml; charset=utf-8&quot;);\r\n    //httpPostRequest.addHeader(&quot;Authorization&quot;, token);\r\n    //httpPostRequest.addHeader(&quot;accept&quot;,&quot;text/plain&quot;)\r\n    httpPostRequest.addHeader(&quot;Authorization&quot;, ExecutionUtil.getDynamicProcessProperty(&quot;token&quot;));\r\n    httpPostRequest.addHeader(&quot;Content-Type&quot;,&quot;multipart/form-data;charset=utf-8; boundary=testboundary&quot;);\r\n    //httpPostRequest.addHeader(&quot;Content-Type&quot;,&quot;multipart/form-data&quot;);\r\n\t\r\n    HttpResponse response = client.execute(httpPostRequest);\t  \r\n    \r\n    int responseCode = response.getStatusLine().getStatusCode();\r\n    ExecutionUtil.setDynamicProcessProperty(&quot;HTTP_RES_CODE&quot;, responseCode.toString(), false);\r\n    \r\n    dataContext.storeStream(response.getEntity().getContent(), props);\r\n}\r\n\r\n\r\nprotected static HttpClient createHttpClient(HttpRequestBase httpRequest, SSLContext sslContextParam) {\r\n    HttpClient client = null;\r\n\tBuilder builder = RequestConfig.custom();\r\n\tHttpClientBuilder httpClientBuilder = HttpClientBuilder.create();\r\n\t\r\n\t//HttpHost proxy = new HttpHost(&quot;10.1.70.115&quot;, 8080, &quot;http&quot;);\r\n    //builder.setProxy(proxy);\r\n    \r\n   \r\n\tSSLContext sslContext = sslContextParam;\r\n\thttpClientBuilder.setSSLContext(sslContext);\r\n\t\r\n\tRequestConfig config = builder.build();\r\n    httpRequest.setConfig(config);\r\n\t\t\r\n    client = httpClientBuilder.build();\r\n    \r\n    return client;\r\n\r\n}\r\n\r\n```\r\nCould you please help me for options to solve this problem or anyone who had overcome this problem before could share ideas with me","title":"Getting an error message for HTTP post request for multiple-part-form data","body":"<p>I am trying to post an employee data to a client API and my post request does not reach to related API and I get a response like below. And also I have tried to post my request via an integration platform called Dell Boomi. Also my request doesn't have an empty field and all fields related to method are filled with data.</p>\n<blockquote>\n<p>{&quot;type&quot;:&quot;https://tools.ietf.org/html/rfc7231#section-6.5.1&quot;,&quot;title&quot;:&quot;One or more validation errors occurred.&quot;,&quot;status&quot;:400,&quot;traceId&quot;:&quot;00-26ae8fec464638bc5764c2ad82af50b4-5cb4f78ff28030ac-00&quot;,&quot;errors&quot;:{&quot;&quot;:[&quot;Failed to read the request form. Unexpected end of Stream, the content may have already been read by another component. &quot;]}}</p>\n</blockquote>\n<pre><code>import java.util.Properties;\nimport java.io.InputStream;\nimport com.boomi.execution.ExecutionUtil;\n\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport org.apache.http.client.ClientProtocolException;\nimport org.apache.http.client.HttpClient;\nimport org.apache.http.client.methods.HttpPost;\nimport org.apache.http.entity.ByteArrayEntity;\nimport org.apache.http.impl.client.HttpClientBuilder;\nimport org.apache.commons.net.util.Base64;\nimport org.apache.http.HttpEntity;\nimport org.apache.http.HttpResponse;\nimport org.apache.http.HttpHost;\nimport org.apache.http.ssl.SSLContextBuilder;\nimport org.apache.http.client.methods.HttpRequestBase;\nimport com.boomi.component.CertificateFactory as BoomiCertificateFactory;\nimport javax.net.ssl.SSLContext;\nimport com.boomi.execution.ExecutionManager;\nimport com.boomi.execution.ExecutionTask;\nimport org.apache.http.client.config.RequestConfig;\nimport org.apache.http.client.config.RequestConfig.Builder;\nimport java.io.ByteArrayOutputStream;\n\n\nExecutionTask task = ExecutionManager.current;\nSSLContext sslContextBoomi = BoomiCertificateFactory.getInstance(task.accountConfig).createSSLContext();\n\nString url =  ExecutionUtil.getDynamicProcessProperty(&quot;url&quot;);\n//String soapAction = ExecutionUtil.getDynamicProcessProperty(&quot;soapAction&quot;);\n//String userName =  ExecutionUtil.getDynamicProcessProperty(&quot;UserName&quot;);\n//String password =  ExecutionUtil.getDynamicProcessProperty(&quot;Password&quot;);\n//String token =  ExecutionUtil.getDynamicProcessProperty(&quot;token&quot;);\n\n//HttpHost proxy = new HttpHost(&quot;10.1.70.115&quot;, 8080, &quot;http&quot;);\n\n\nfor( int i = 0; i &lt; dataContext.getDataCount(); i++ ) {\n    InputStream is = dataContext.getStream(i);\n    Properties props = dataContext.getProperties(i);\n    logger = ExecutionUtil.getBaseLogger();\n    \n    ByteArrayOutputSt`your text`ream buffer = new ByteArrayOutputStream();\n    int nRead;\n    byte[] data = new byte[1024];\n    while ((nRead = is.read(data, 0, data.length)) != -1) {\n        buffer.write(data, 0, nRead);\n    }        \n    buffer.flush();\n    byte[] byteArray = buffer.toByteArray();\n    \n    HttpPost httpPostRequest = new HttpPost(url);\n    HttpClient client = createHttpClient(httpPostRequest,sslContextBoomi);\n    \n   //if( !&quot;&quot;.equals(userName) &amp;&amp;  !&quot;&quot;.equals(password)) {                   \n    //  String userPassword = userName + &quot;:&quot; + password;\n    //  byte[] encodeBase64 = Base64.encodeBase64(userPassword.getBytes(&quot;UTF-8&quot;));\n        \n    //  httpPostRequest.addHeader(&quot;Authorization&quot;, &quot;Basic &quot;+ new String(encodeBase64));\n    //}\n    \n    //sendRequest\n    HttpEntity entity = new ByteArrayEntity(byteArray);\n    httpPostRequest.setEntity(entity);\n    \n    //addHEader\n    //httpPostRequest.addHeader(&quot;SOAPAction&quot;,soapAction);\n    //httpPostRequest.addHeader(&quot;Content-Type&quot;,&quot;text/xml; charset=utf-8&quot;);\n    //httpPostRequest.addHeader(&quot;Authorization&quot;, token);\n    //httpPostRequest.addHeader(&quot;accept&quot;,&quot;text/plain&quot;)\n    httpPostRequest.addHeader(&quot;Authorization&quot;, ExecutionUtil.getDynamicProcessProperty(&quot;token&quot;));\n    httpPostRequest.addHeader(&quot;Content-Type&quot;,&quot;multipart/form-data;charset=utf-8; boundary=testboundary&quot;);\n    //httpPostRequest.addHeader(&quot;Content-Type&quot;,&quot;multipart/form-data&quot;);\n    \n    HttpResponse response = client.execute(httpPostRequest);      \n    \n    int responseCode = response.getStatusLine().getStatusCode();\n    ExecutionUtil.setDynamicProcessProperty(&quot;HTTP_RES_CODE&quot;, responseCode.toString(), false);\n    \n    dataContext.storeStream(response.getEntity().getContent(), props);\n}\n\n\nprotected static HttpClient createHttpClient(HttpRequestBase httpRequest, SSLContext sslContextParam) {\n    HttpClient client = null;\n    Builder builder = RequestConfig.custom();\n    HttpClientBuilder httpClientBuilder = HttpClientBuilder.create();\n    \n    //HttpHost proxy = new HttpHost(&quot;10.1.70.115&quot;, 8080, &quot;http&quot;);\n    //builder.setProxy(proxy);\n    \n   \n    SSLContext sslContext = sslContextParam;\n    httpClientBuilder.setSSLContext(sslContext);\n    \n    RequestConfig config = builder.build();\n    httpRequest.setConfig(config);\n        \n    client = httpClientBuilder.build();\n    \n    return client;\n\n}\n\n</code></pre>\n<p>Could you please help me for options to solve this problem or anyone who had overcome this problem before could share ideas with me</p>\n"},{"tags":["java","unit-testing","mocking","mockito"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1689812562,"post_id":76719405,"comment_id":135267956,"body_markdown":"So it does fail locally if you run `LogExceptionBySalesRefAspectTest` first?","body":"So it does fail locally if you run <code>LogExceptionBySalesRefAspectTest</code> first?"},{"owner":{"account_id":10642398,"reputation":6164,"user_id":7836976,"accept_rate":95,"display_name":"runnerpaul"},"score":0,"creation_date":1689838958,"post_id":76719405,"comment_id":135270832,"body_markdown":"Yes. Apologies. Should have been clear about that.","body":"Yes. Apologies. Should have been clear about that."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1689842332,"post_id":76719405,"comment_id":135271491,"body_markdown":"Run it under the debugger, put a breakpoint in `info` and see what the state of the appenders are.","body":"Run it under the debugger, put a breakpoint in <code>info</code> and see what the state of the appenders are."},{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1690315516,"post_id":76719405,"comment_id":135335729,"body_markdown":"You are changing the appenders and the log level in your other test (that runs first). Logger configuration is global and you need to restore it if you change it in a test","body":"You are changing the appenders and the log level in your other test (that runs first). Logger configuration is global and you need to restore it if you change it in a test"}],"owner":{"account_id":10642398,"reputation":6164,"user_id":7836976,"accept_rate":95,"display_name":"runnerpaul"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1689798236,"creation_date":1689755903,"question_id":76719405,"body_markdown":"I have this test class:\r\n\r\n```Java\r\n@RunWith(MockitoJUnitRunner.class)\r\npublic class MLoggerTest {\r\n\r\n  @Mock private Appender&lt;ILoggingEvent&gt; mockAppender;\r\n  @Captor private ArgumentCaptor&lt;LoggingEvent&gt; captorLoggingEvent;\r\n\r\n  @InjectMocks private MLogger mLogger;\r\n\r\n  private static final String TEST_MESSAGE = &quot;test message&quot;;\r\n\r\n  /** Initialisation */\r\n  @Before\r\n  public void setup() {\r\n    Logger root = (Logger) LoggerFactory.getLogger(Logger.ROOT_LOGGER_NAME);\r\n    root.setLevel(Level.DEBUG);\r\n    root.addAppender(mockAppender);\r\n  }\r\n\r\n  /** Cleanup after tests completed */\r\n  @After\r\n  public void teardown() {\r\n    Logger root = (Logger) LoggerFactory.getLogger(Logger.ROOT_LOGGER_NAME);\r\n    root.detachAppender(mockAppender);\r\n  }\r\n\r\n  @Test\r\n  public void info() {\r\n    mLogger.info(TEST_MESSAGE, null);\r\n    verify(mockAppender, times(1)).doAppend(captorLoggingEvent.capture());\r\n    final LoggingEvent event = captorLoggingEvent.getValue();\r\n    assertThat(&quot;Message not logged&quot;, event.getFormattedMessage(), containsString(TEST_MESSAGE));\r\n  }\r\n\r\n  @Test\r\n  public void error() {\r\n    mLogger.error(TEST_MESSAGE, null);\r\n    verify(mockAppender, times(1)).doAppend(captorLoggingEvent.capture());\r\n    final LoggingEvent event = captorLoggingEvent.getValue();\r\n    assertThat(&quot;Message not logged&quot;, event.getFormattedMessage(), containsString(TEST_MESSAGE));\r\n  }\r\n}\r\n```\r\n\r\nThis is the error I get:\r\n\r\n&gt;[ERROR] Failures:\r\n[ERROR]   MetricLoggerTest.info:52\r\nWanted but not invoked:\r\nmockAppender.doAppend(&lt;Capturing argument&gt;);\r\n-&gt; at my.app.logging.MLoggerTest.info(MLoggerTest.java:52)\r\nActually, there were zero interactions with this mock.\r\n\r\n`info()` passes on my local machine and in my dev environment but not in uat and `error()` passes in all environments even though it is pretty much the same test. I can&#39;t figure out why this would be. Can anyone help?\r\n\r\n**UPDATE**\r\nThis only happens when the below test class is executed first:\r\n\r\n```Java\r\n@RunWith(MockitoJUnitRunner.class)\r\npublic class LogExceptionBySalesRefAspectTest {\r\n\r\n  private static final String SALES_REF = &quot;ABC123-87&quot;;\r\n  private static final String EXCEPTION_MSG = &quot;Exception&quot;;\r\n  private static final String MESSAGE =\r\n      &quot;Exception&quot; + EXCEPTION_MSG + &quot;encountered for sales reference &quot; + SALES_REF;\r\n\r\n  private MyAppender myAppender;\r\n  private static final String LOGGER_NAME = &quot;my.app.logging&quot;;\r\n\r\n  @Before\r\n  public void setup() {\r\n    Logger logger = (Logger) LoggerFactory.getLogger(LOGGER_NAME);\r\n    myAppender = new MyAppender();\r\n    myAppender.setContext((LoggerContext) LoggerFactory.getILoggerFactory());\r\n    logger.setLevel(Level.ERROR);\r\n    logger.addAppender(myAppender);\r\n    myAppender.start();\r\n  }\r\n\r\n  @After\r\n  public void cleanUp() {\r\n    myAppender.reset();\r\n    myAppender.stop();\r\n  }\r\n\r\n  @Test\r\n  public void confirm_output_logged() {\r\n    LogExceptionBySalesRefAspect aspect = new LogExceptionBySalesRefAspect();\r\n    SalesRequest req = SalesRequest.builder().salesReference(QUOTE_REF).build();\r\n    JoinPoint jp = Mockito.mock(JoinPoint.class);\r\n    Mockito.when(jp.getArgs()).thenReturn(new Object[] {req});\r\n    aspect.logExceptionWithSalesIdentification(jp, new ServiceException(EXCEPTION_MSG));\r\n    assertThat(myAppender.countEventsForLogger(LOGGER_NAME)).isEqualTo(1);\r\n    assertThat(myAppender.contains(MESSAGE, Level.ERROR));\r\n  }\r\n\r\n  @Test\r\n  public void whenexception_on_postsales_call() {\r\n    LogExceptionBySalesRefAspect aspect = new LogExceptionBySalesRefAspect();\r\n    SalesRequest req = SalesRequest.builder().salesReference(QUOTE_REF).build();\r\n    JoinPoint jp = Mockito.mock(JoinPoint.class);\r\n    Mockito.when(jp.getArgs()).thenReturn(new Object[] {req});\r\n    aspect.handlePostSalesExceptionLogging(jp, new ServiceException(EXCEPTION_MSG));\r\n    assertThat(myAppender.countEventsForLogger(LOGGER_NAME)).isEqualTo(1);\r\n    assertThat(myAppender.contains(MESSAGE, Level.ERROR));\r\n  }\r\n}\r\n```","title":"Test passing in all environments except one","body":"<p>I have this test class:</p>\n<pre><code>@RunWith(MockitoJUnitRunner.class)\npublic class MLoggerTest {\n\n  @Mock private Appender&lt;ILoggingEvent&gt; mockAppender;\n  @Captor private ArgumentCaptor&lt;LoggingEvent&gt; captorLoggingEvent;\n\n  @InjectMocks private MLogger mLogger;\n\n  private static final String TEST_MESSAGE = &quot;test message&quot;;\n\n  /** Initialisation */\n  @Before\n  public void setup() {\n    Logger root = (Logger) LoggerFactory.getLogger(Logger.ROOT_LOGGER_NAME);\n    root.setLevel(Level.DEBUG);\n    root.addAppender(mockAppender);\n  }\n\n  /** Cleanup after tests completed */\n  @After\n  public void teardown() {\n    Logger root = (Logger) LoggerFactory.getLogger(Logger.ROOT_LOGGER_NAME);\n    root.detachAppender(mockAppender);\n  }\n\n  @Test\n  public void info() {\n    mLogger.info(TEST_MESSAGE, null);\n    verify(mockAppender, times(1)).doAppend(captorLoggingEvent.capture());\n    final LoggingEvent event = captorLoggingEvent.getValue();\n    assertThat(&quot;Message not logged&quot;, event.getFormattedMessage(), containsString(TEST_MESSAGE));\n  }\n\n  @Test\n  public void error() {\n    mLogger.error(TEST_MESSAGE, null);\n    verify(mockAppender, times(1)).doAppend(captorLoggingEvent.capture());\n    final LoggingEvent event = captorLoggingEvent.getValue();\n    assertThat(&quot;Message not logged&quot;, event.getFormattedMessage(), containsString(TEST_MESSAGE));\n  }\n}\n</code></pre>\n<p>This is the error I get:</p>\n<blockquote>\n<p>[ERROR] Failures:\n[ERROR]   MetricLoggerTest.info:52\nWanted but not invoked:\nmockAppender.doAppend();\n-&gt; at my.app.logging.MLoggerTest.info(MLoggerTest.java:52)\nActually, there were zero interactions with this mock.</p>\n</blockquote>\n<p><code>info()</code> passes on my local machine and in my dev environment but not in uat and <code>error()</code> passes in all environments even though it is pretty much the same test. I can't figure out why this would be. Can anyone help?</p>\n<p><strong>UPDATE</strong>\nThis only happens when the below test class is executed first:</p>\n<pre><code>@RunWith(MockitoJUnitRunner.class)\npublic class LogExceptionBySalesRefAspectTest {\n\n  private static final String SALES_REF = &quot;ABC123-87&quot;;\n  private static final String EXCEPTION_MSG = &quot;Exception&quot;;\n  private static final String MESSAGE =\n      &quot;Exception&quot; + EXCEPTION_MSG + &quot;encountered for sales reference &quot; + SALES_REF;\n\n  private MyAppender myAppender;\n  private static final String LOGGER_NAME = &quot;my.app.logging&quot;;\n\n  @Before\n  public void setup() {\n    Logger logger = (Logger) LoggerFactory.getLogger(LOGGER_NAME);\n    myAppender = new MyAppender();\n    myAppender.setContext((LoggerContext) LoggerFactory.getILoggerFactory());\n    logger.setLevel(Level.ERROR);\n    logger.addAppender(myAppender);\n    myAppender.start();\n  }\n\n  @After\n  public void cleanUp() {\n    myAppender.reset();\n    myAppender.stop();\n  }\n\n  @Test\n  public void confirm_output_logged() {\n    LogExceptionBySalesRefAspect aspect = new LogExceptionBySalesRefAspect();\n    SalesRequest req = SalesRequest.builder().salesReference(QUOTE_REF).build();\n    JoinPoint jp = Mockito.mock(JoinPoint.class);\n    Mockito.when(jp.getArgs()).thenReturn(new Object[] {req});\n    aspect.logExceptionWithSalesIdentification(jp, new ServiceException(EXCEPTION_MSG));\n    assertThat(myAppender.countEventsForLogger(LOGGER_NAME)).isEqualTo(1);\n    assertThat(myAppender.contains(MESSAGE, Level.ERROR));\n  }\n\n  @Test\n  public void whenexception_on_postsales_call() {\n    LogExceptionBySalesRefAspect aspect = new LogExceptionBySalesRefAspect();\n    SalesRequest req = SalesRequest.builder().salesReference(QUOTE_REF).build();\n    JoinPoint jp = Mockito.mock(JoinPoint.class);\n    Mockito.when(jp.getArgs()).thenReturn(new Object[] {req});\n    aspect.handlePostSalesExceptionLogging(jp, new ServiceException(EXCEPTION_MSG));\n    assertThat(myAppender.countEventsForLogger(LOGGER_NAME)).isEqualTo(1);\n    assertThat(myAppender.contains(MESSAGE, Level.ERROR));\n  }\n}\n</code></pre>\n"},{"tags":["java","jdbc","transactions","distributed-transactions"],"comments":[{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1681296561,"post_id":75994214,"comment_id":134032691,"body_markdown":"If you want correct transactional behaviour across multiple databases, you need to use a transaction manager and XA-aware datasources (and formally, databases which support real two-phase commits instead of just emulating it).","body":"If you want correct transactional behaviour across multiple databases, you need to use a transaction manager and XA-aware datasources (and formally, databases which support real two-phase commits instead of just emulating it)."},{"owner":{"account_id":17972905,"reputation":5290,"user_id":13061224,"display_name":"siggemannen"},"score":0,"creation_date":1688847174,"post_id":75994214,"comment_id":135129897,"body_markdown":"No, because conn2.rollbacl(); won&#39;t compile due to missing method","body":"No, because conn2.rollbacl(); won&#39;t compile due to missing method"},{"owner":{"account_id":17972905,"reputation":5290,"user_id":13061224,"display_name":"siggemannen"},"score":0,"creation_date":1688847364,"post_id":75994214,"comment_id":135129921,"body_markdown":"but also, no, because after you commit #1, you can&#39;t rollback it if #2 fails","body":"but also, no, because after you commit #1, you can&#39;t rollback it if #2 fails"},{"owner":{"account_id":17972905,"reputation":5290,"user_id":13061224,"display_name":"siggemannen"},"score":0,"creation_date":1688847463,"post_id":75994214,"comment_id":135129928,"body_markdown":"But on the third hand, if you&#39;re come as far as to commit, it shouldn&#39;t really fail. so in practice i think it likely to succeed","body":"But on the third hand, if you&#39;re come as far as to commit, it shouldn&#39;t really fail. so in practice i think it likely to succeed"}],"owner":{"account_id":362912,"reputation":3281,"user_id":706354,"accept_rate":67,"display_name":"MiamiBeach"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689797997,"creation_date":1681293984,"question_id":75994214,"body_markdown":"I want to make transactional update in two databases. Given I have following pseudocode:\r\n\r\n```java\r\ntry {\r\n    Connection conn1 = DriverManager.getConnection(&quot;jdbc:postgresql://HOST1&quot;, &quot;postgres1&quot;, &quot;password1&quot;)) \r\n    Connection conn2 = DriverManager.getConnection(&quot;jdbc:postgresql://HOST2&quot;, &quot;postgres2&quot;, &quot;password2&quot;)) \r\n    \r\n    conn1.setAutoCommit(false);\r\n    conn2.setAutoCommit(false);\r\n    // insert\r\n    // update \r\n    conn1.commit();\r\n    conn2.commit();\r\n} catch (Exception e) {\r\n    conn1.rollback();\r\n    conn2.rollback();\r\n}\r\n```\r\n\r\nWill it work as intended?\r\n\r\nIf NO - why?\r\n\r\nIf YES - does it mean we don&#39;t need complex distributed transactions manager (such as based on XA protocol) for such cases? \r\n\r\n**Here is my understanding**: the problem arises when conn1.commit() succeeds and conn2.commit() fails. If conn2.commit() method throws an Exception, we already have conn1 tx committed and conn1.rollback() will effectively do nothing, conn1 tx will stay there. We can mitigate this by adding code for reverting conn1 tx manually. In this case, apart from failure of that code - the modified approach should work. Apparently ACID guarantees are broken in this approach.\r\n\r\n","title":"Running two JDBC transactions for different databases - will it work?","body":"<p>I want to make transactional update in two databases. Given I have following pseudocode:</p>\n<pre class=\"lang-java prettyprint-override\"><code>try {\n    Connection conn1 = DriverManager.getConnection(&quot;jdbc:postgresql://HOST1&quot;, &quot;postgres1&quot;, &quot;password1&quot;)) \n    Connection conn2 = DriverManager.getConnection(&quot;jdbc:postgresql://HOST2&quot;, &quot;postgres2&quot;, &quot;password2&quot;)) \n    \n    conn1.setAutoCommit(false);\n    conn2.setAutoCommit(false);\n    // insert\n    // update \n    conn1.commit();\n    conn2.commit();\n} catch (Exception e) {\n    conn1.rollback();\n    conn2.rollback();\n}\n</code></pre>\n<p>Will it work as intended?</p>\n<p>If NO - why?</p>\n<p>If YES - does it mean we don't need complex distributed transactions manager (such as based on XA protocol) for such cases?</p>\n<p><strong>Here is my understanding</strong>: the problem arises when conn1.commit() succeeds and conn2.commit() fails. If conn2.commit() method throws an Exception, we already have conn1 tx committed and conn1.rollback() will effectively do nothing, conn1 tx will stay there. We can mitigate this by adding code for reverting conn1 tx manually. In this case, apart from failure of that code - the modified approach should work. Apparently ACID guarantees are broken in this approach.</p>\n"},{"tags":["java","jobs","ibm-midrange"],"answers":[{"tags":[],"owner":{"account_id":494473,"reputation":22029,"user_id":2933177,"accept_rate":50,"display_name":"Charles"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689364056,"creation_date":1689364056,"answer_id":76690744,"question_id":76689818,"body_markdown":"Read through the [Work Management][1] documentation.   \r\nIn particular the page about [Routing Entries][2] and a look at an existing subsystem..  \r\n`DSPSBSD QBATCH`\r\n\r\n&gt; The routing entry identifies the main storage subsystem pool to use,\r\n&gt; the controlling program to run (typically the system-supplied program\r\n&gt; QCMD), and additional run-time information (stored in the class\r\n&gt; object). Routing entries are stored in the subsystem description.\r\n\r\n&gt; Job run-time attributes are contained in the class object that is\r\n&gt; specified in the (CLS) parameter in the routing entry. If a job\r\n&gt; consists of multiple routing steps, the class used by each subsequent\r\n&gt; routing step is specified in the routing entry used to start the\r\n&gt; routing step.\r\n\r\n\r\n\r\n  [1]: https://www.ibm.com/docs/en/i/7.4?topic=management-work\r\n  [2]: https://www.ibm.com/docs/en/i/7.4?topic=description-routing-entries","title":"How to run a java program in a specific subsystem in AS400","body":"<p>Read through the <a href=\"https://www.ibm.com/docs/en/i/7.4?topic=management-work\" rel=\"nofollow noreferrer\">Work Management</a> documentation.<br />\nIn particular the page about <a href=\"https://www.ibm.com/docs/en/i/7.4?topic=description-routing-entries\" rel=\"nofollow noreferrer\">Routing Entries</a> and a look at an existing subsystem..<br />\n<code>DSPSBSD QBATCH</code></p>\n<blockquote>\n<p>The routing entry identifies the main storage subsystem pool to use,\nthe controlling program to run (typically the system-supplied program\nQCMD), and additional run-time information (stored in the class\nobject). Routing entries are stored in the subsystem description.</p>\n</blockquote>\n<blockquote>\n<p>Job run-time attributes are contained in the class object that is\nspecified in the (CLS) parameter in the routing entry. If a job\nconsists of multiple routing steps, the class used by each subsequent\nrouting step is specified in the routing entry used to start the\nrouting step.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2655673,"reputation":11140,"user_id":2296441,"accept_rate":86,"display_name":"jmarkmurphy"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1689797846,"creation_date":1689635048,"answer_id":76708585,"question_id":76689818,"body_markdown":"I see what you are talking about now. IBM i is quite flexible and user configurable, but with this flexibility comes additional complexity. You did not create all the objects you needed to create a subsystem. If you want a subsystem just to run Java jobs in batch, you need to do a little more work.\r\n\r\n- First you need a subsystem description: MYSBS (you have that)\r\n- Next you need a way to get jobs into the subsystem, that is a job queue: MYJOBQ (you have that)\r\n- Finally you need to give the subsystem a way to process the request messages coming from the job queue, this is a routing entry: (you don&#39;t have that) \r\n\r\nSo take a look at subsystem QSYS/QBATCH. (DSPSBSD)\r\n\r\n[![DSPSBSD Screen][1]][1]\r\n\r\nMenu options 1 and 2 were taken care of with the CRTSBSD command. 3, 4, and 5 are empty. 6 is taken care of with the ADDJOBQE command, 7 has some stuff in it, and 8 - 10 are also empty. \r\n\r\nThis is the minimum configuration to make a batch subsystem work. Without the routing entries, the subsystem monitor does not know what to do with the request messages on the job queue. Thus, nothing happens.\r\n\r\nIf you have a typical system, the routing entries in QBATCH are:\r\n\r\n[![QBATCH Routing Entries][2]][2]\r\n\r\nI&#39;m not sure what the first one does, but the second one runs S36 jobs, the third one runs S38 jobs, and the fourth one runs everything else (IBM i jobs). It&#39;s the compare data that selects which routing entry to use. If you prompt the SBMJOB command, then press F10 to see additional parameters, on the second page of the parameter list, you will see this:\r\n\r\n[![SBMJOB Additional Parameters][3]][3]\r\n\r\nThat routing data is compared to the compare value in the routing entries in order from top to bottom. The first match it gets is the routing entry the subsystem monitor chooses. In this case QCMDB does not match any of the compare data strings, so the last routing entry, the one with *ANY, will be selected. Notice that each routing entry points to a program and library. That is the program that the subsystem monitor calls to process the job queue entry.\r\n\r\nBest thing to do is duplicate those 4 routing entries, but not completely. If you look at the details, each routing entry points to a class named the same as the subsystem description. So the easiest thing to do is to duplicate class QSYS/QBATCH and name it MYSBS using the CRTCLS command. Then when you add the four routing entries just leave the default class *SBSD. \r\n\r\nBut, you can probably get away with just creating the last routing entry if you won&#39;t be executing S36, S38, or QIGC (whatever that is) jobs in this subsystem. The routing entries are added using ADDRTGE. Note, that if you do this, you won&#39;t be able to run S38 jobs in this subsystem, but S36EVOKE and QIGC jobs use the same command processer as IBM i, that is QSYS/QCMD, so they may still work properly.\r\n\r\nIn each case, routing entry or class, model your new ones after the ones in the QSYS/QBATCH subsystem, and always include the last catch all routing entry. Otherwise, the new subsystem won&#39;t do anything.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3IkBB.png\r\n  [2]: https://i.stack.imgur.com/HZnfH.png\r\n  [3]: https://i.stack.imgur.com/NHTHI.png","title":"How to run a java program in a specific subsystem in AS400","body":"<p>I see what you are talking about now. IBM i is quite flexible and user configurable, but with this flexibility comes additional complexity. You did not create all the objects you needed to create a subsystem. If you want a subsystem just to run Java jobs in batch, you need to do a little more work.</p>\n<ul>\n<li>First you need a subsystem description: MYSBS (you have that)</li>\n<li>Next you need a way to get jobs into the subsystem, that is a job queue: MYJOBQ (you have that)</li>\n<li>Finally you need to give the subsystem a way to process the request messages coming from the job queue, this is a routing entry: (you don't have that)</li>\n</ul>\n<p>So take a look at subsystem QSYS/QBATCH. (DSPSBSD)</p>\n<p><a href=\"https://i.stack.imgur.com/3IkBB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3IkBB.png\" alt=\"DSPSBSD Screen\" /></a></p>\n<p>Menu options 1 and 2 were taken care of with the CRTSBSD command. 3, 4, and 5 are empty. 6 is taken care of with the ADDJOBQE command, 7 has some stuff in it, and 8 - 10 are also empty.</p>\n<p>This is the minimum configuration to make a batch subsystem work. Without the routing entries, the subsystem monitor does not know what to do with the request messages on the job queue. Thus, nothing happens.</p>\n<p>If you have a typical system, the routing entries in QBATCH are:</p>\n<p><a href=\"https://i.stack.imgur.com/HZnfH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HZnfH.png\" alt=\"QBATCH Routing Entries\" /></a></p>\n<p>I'm not sure what the first one does, but the second one runs S36 jobs, the third one runs S38 jobs, and the fourth one runs everything else (IBM i jobs). It's the compare data that selects which routing entry to use. If you prompt the SBMJOB command, then press F10 to see additional parameters, on the second page of the parameter list, you will see this:</p>\n<p><a href=\"https://i.stack.imgur.com/NHTHI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NHTHI.png\" alt=\"SBMJOB Additional Parameters\" /></a></p>\n<p>That routing data is compared to the compare value in the routing entries in order from top to bottom. The first match it gets is the routing entry the subsystem monitor chooses. In this case QCMDB does not match any of the compare data strings, so the last routing entry, the one with *ANY, will be selected. Notice that each routing entry points to a program and library. That is the program that the subsystem monitor calls to process the job queue entry.</p>\n<p>Best thing to do is duplicate those 4 routing entries, but not completely. If you look at the details, each routing entry points to a class named the same as the subsystem description. So the easiest thing to do is to duplicate class QSYS/QBATCH and name it MYSBS using the CRTCLS command. Then when you add the four routing entries just leave the default class *SBSD.</p>\n<p>But, you can probably get away with just creating the last routing entry if you won't be executing S36, S38, or QIGC (whatever that is) jobs in this subsystem. The routing entries are added using ADDRTGE. Note, that if you do this, you won't be able to run S38 jobs in this subsystem, but S36EVOKE and QIGC jobs use the same command processer as IBM i, that is QSYS/QCMD, so they may still work properly.</p>\n<p>In each case, routing entry or class, model your new ones after the ones in the QSYS/QBATCH subsystem, and always include the last catch all routing entry. Otherwise, the new subsystem won't do anything.</p>\n"}],"owner":{"account_id":1736494,"reputation":549,"user_id":1588943,"accept_rate":77,"display_name":"Sfp"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":120,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76708585,"answer_count":2,"score":2,"last_activity_date":1689797846,"creation_date":1689354182,"question_id":76689818,"body_markdown":"How to do it? I saw this question: \r\nhttps://stackoverflow.com/questions/42530910/how-to-add-job-in-subsystem-in-as400 \r\nThe person who asked had this process:\r\n\r\n    Creating Subsystem (SBS):\r\n    \r\n    CRTSBSD SBSD(MYSBS) POOLS((2 *BASE)) MAXJOBS(2) TEXT(&#39;DEMO SBS&#39;)\r\n    Create JOBQ:\r\n    \r\n    CRTJOBQ JOBQ(MYJOBQ) TEXT(&#39;JOBQ&#39;)\r\n    Add JOBQ entry in subsystem\r\n    \r\n    ADDJOBQE SBSD(MYSBS) JOBQ(MYJOBQ) SEQNBR(1)\r\n    Submit PWI job in this JOBQ\r\n    \r\n    SBMJOB CMD(JAVA CLASS(&#39;myprogram.jar&#39;) PARM(true) OUTPUT(*NONE)) JOBQ(MYJOBQ) JOB(MYJOB)   \r\n    Start Subsystem\r\n    \r\n    STRSBS SBSD(MYSBS)\r\n\r\n\r\nAnd I tried something similar, but indeed, the job completes immidiately and you can&#39;t see java  running (because it does not), even if you have a java program with an infinite loop. The person who asked said &quot; had created class and added for this job and added routing entry. Problem Solved&quot; Can someone please explain how to do that? If it is possible,with some concepts related to understand why. I coulndt figure it out using the documentation. Thanks.","title":"How to run a java program in a specific subsystem in AS400","body":"<p>How to do it? I saw this question:\n<a href=\"https://stackoverflow.com/questions/42530910/how-to-add-job-in-subsystem-in-as400\">How to add job in Subsystem in as400</a>\nThe person who asked had this process:</p>\n<pre><code>Creating Subsystem (SBS):\n\nCRTSBSD SBSD(MYSBS) POOLS((2 *BASE)) MAXJOBS(2) TEXT('DEMO SBS')\nCreate JOBQ:\n\nCRTJOBQ JOBQ(MYJOBQ) TEXT('JOBQ')\nAdd JOBQ entry in subsystem\n\nADDJOBQE SBSD(MYSBS) JOBQ(MYJOBQ) SEQNBR(1)\nSubmit PWI job in this JOBQ\n\nSBMJOB CMD(JAVA CLASS('myprogram.jar') PARM(true) OUTPUT(*NONE)) JOBQ(MYJOBQ) JOB(MYJOB)   \nStart Subsystem\n\nSTRSBS SBSD(MYSBS)\n</code></pre>\n<p>And I tried something similar, but indeed, the job completes immidiately and you can't see java  running (because it does not), even if you have a java program with an infinite loop. The person who asked said &quot; had created class and added for this job and added routing entry. Problem Solved&quot; Can someone please explain how to do that? If it is possible,with some concepts related to understand why. I coulndt figure it out using the documentation. Thanks.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":536567,"reputation":7838,"user_id":905488,"display_name":"Mick Mnemonic"},"score":1,"creation_date":1435959560,"post_id":31214446,"comment_id":50430154,"body_markdown":"Related: [Why would one declare an immutable class final in Java?](http://stackoverflow.com/questions/12306651/why-would-one-declare-an-immutable-class-final-in-java).","body":"Related: <a href=\"http://stackoverflow.com/questions/12306651/why-would-one-declare-an-immutable-class-final-in-java\">Why would one declare an immutable class final in Java?</a>."},{"owner":{"account_id":1781636,"reputation":7670,"user_id":1624202,"accept_rate":61,"display_name":"Cruncher"},"score":0,"creation_date":1435959720,"post_id":31214446,"comment_id":50430198,"body_markdown":"Even an interface doesn&#39;t feel right to me. Because you could have a method that takes an &quot;Employee&quot; with the expectation that it&#39;s immutable. +1 I&#39;m interested too now","body":"Even an interface doesn&#39;t feel right to me. Because you could have a method that takes an &quot;Employee&quot; with the expectation that it&#39;s immutable. +1 I&#39;m interested too now"},{"owner":{"display_name":"user5078574"},"score":0,"creation_date":1435959781,"post_id":31214446,"comment_id":50430218,"body_markdown":"@Cruncher - I read that using an interface might be undesirable as well. So what would be ideal, just creating 3 final classes, with no subclassing whatsoever? If I don&#39;t say final, I would have to worry about  thread safety correct?","body":"@Cruncher - I read that using an interface might be undesirable as well. So what would be ideal, just creating 3 final classes, with no subclassing whatsoever? If I don&#39;t say final, I would have to worry about  thread safety correct?"},{"owner":{"account_id":1781636,"reputation":7670,"user_id":1624202,"accept_rate":61,"display_name":"Cruncher"},"score":0,"creation_date":1435959970,"post_id":31214446,"comment_id":50430261,"body_markdown":"It&#39;s not just thread safety. The method could save the input as a field for use in later calls, only to find out that it&#39;s been changed! I don&#39;t know what the best solution is either. But I&#39;m anxiously awaiting a good answer.","body":"It&#39;s not just thread safety. The method could save the input as a field for use in later calls, only to find out that it&#39;s been changed! I don&#39;t know what the best solution is either. But I&#39;m anxiously awaiting a good answer."},{"owner":{"display_name":"user5078574"},"score":0,"creation_date":1435960084,"post_id":31214446,"comment_id":50430282,"body_markdown":"@Cruncher - My guess would be to create the 3 classes, but as final, however, that may not be the best approach.","body":"@Cruncher - My guess would be to create the 3 classes, but as final, however, that may not be the best approach."},{"owner":{"account_id":1781636,"reputation":7670,"user_id":1624202,"accept_rate":61,"display_name":"Cruncher"},"score":0,"creation_date":1435960149,"post_id":31214446,"comment_id":50430299,"body_markdown":"Then you would have to overload all methods that can accept any employee... Seems like a poor solution to me. There has to be a better way","body":"Then you would have to overload all methods that can accept any employee... Seems like a poor solution to me. There has to be a better way"},{"owner":{"account_id":279365,"reputation":49126,"user_id":574479,"accept_rate":87,"display_name":"biziclop"},"score":2,"creation_date":1435960211,"post_id":31214446,"comment_id":50430314,"body_markdown":"There&#39;s nothing wrong with using an interface. Yes, the interface wouldn&#39;t guarantee that all the implementations will be immutable but you can guarantee that all the implementations you provide are. Other implementations are not your problem.","body":"There&#39;s nothing wrong with using an interface. Yes, the interface wouldn&#39;t guarantee that all the implementations will be immutable but you can guarantee that all the implementations you provide are. Other implementations are not your problem."},{"owner":{"account_id":45934,"reputation":203649,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1435960272,"post_id":31214446,"comment_id":50430326,"body_markdown":"If you create an interface or a non-final (abstract or not abstract) class, then there is no way to prevent anyone from ever implementing the interface or subclassing the class with a class that is mutable. The most you can do is document that people shouldn&#39;t create mutable implementations or subclasses.","body":"If you create an interface or a non-final (abstract or not abstract) class, then there is no way to prevent anyone from ever implementing the interface or subclassing the class with a class that is mutable. The most you can do is document that people shouldn&#39;t create mutable implementations or subclasses."},{"owner":{"account_id":1781636,"reputation":7670,"user_id":1624202,"accept_rate":61,"display_name":"Cruncher"},"score":0,"creation_date":1435960333,"post_id":31214446,"comment_id":50430343,"body_markdown":"@biziclop one of the selling points of object oriented programming, is the ability to &quot;bullet proof&quot; your code. That is, being able to provide some guarantee that you can be absolutely sure of. 5 years down the line he may create another employee implementation forgetting that it should be immutable","body":"@biziclop one of the selling points of object oriented programming, is the ability to &quot;bullet proof&quot; your code. That is, being able to provide some guarantee that you can be absolutely sure of. 5 years down the line he may create another employee implementation forgetting that it should be immutable"},{"owner":{"account_id":279365,"reputation":49126,"user_id":574479,"accept_rate":87,"display_name":"biziclop"},"score":0,"creation_date":1435960355,"post_id":31214446,"comment_id":50430350,"body_markdown":"@Jesper That is true. Just as `String` is just one implementation of `CharSequence`, there are others that are mutable.","body":"@Jesper That is true. Just as <code>String</code> is just one implementation of <code>CharSequence</code>, there are others that are mutable."},{"owner":{"account_id":279365,"reputation":49126,"user_id":574479,"accept_rate":87,"display_name":"biziclop"},"score":1,"creation_date":1435960419,"post_id":31214446,"comment_id":50430370,"body_markdown":"@Cruncher You can bullet-proof YOUR code. But you can&#39;t bullet-proof other code in advance. There&#39;s no way to force immutability on all implementors of an interface, neither is there a real need to do so.","body":"@Cruncher You can bullet-proof YOUR code. But you can&#39;t bullet-proof other code in advance. There&#39;s no way to force immutability on all implementors of an interface, neither is there a real need to do so."},{"owner":{"account_id":1781636,"reputation":7670,"user_id":1624202,"accept_rate":61,"display_name":"Cruncher"},"score":0,"creation_date":1435960496,"post_id":31214446,"comment_id":50430395,"body_markdown":"@biziclop that&#39;s not comparable at all. There&#39;s nothing about a CharSequence that says it should be immutable. He wants all employees in general to be immutable, edit: I would consider this a rather compelling case to want to do so","body":"@biziclop that&#39;s not comparable at all. There&#39;s nothing about a CharSequence that says it should be immutable. He wants all employees in general to be immutable, edit: I would consider this a rather compelling case to want to do so"},{"owner":{"account_id":279365,"reputation":49126,"user_id":574479,"accept_rate":87,"display_name":"biziclop"},"score":0,"creation_date":1435960558,"post_id":31214446,"comment_id":50430414,"body_markdown":"@Cruncher In that case, the answer is that it isn&#39;t possible in Java. Though I still fail to see a valid reason why anyone would want that.","body":"@Cruncher In that case, the answer is that it isn&#39;t possible in Java. Though I still fail to see a valid reason why anyone would want that."},{"owner":{"account_id":1781636,"reputation":7670,"user_id":1624202,"accept_rate":61,"display_name":"Cruncher"},"score":0,"creation_date":1435960723,"post_id":31214446,"comment_id":50430443,"body_markdown":"@biziclop &quot;Though I still fail to see a valid reason why anyone would want that&quot; How is, &quot;I want the argument passed to me guaranteed to be immutable&quot; not a valid reason? You can talk about documentation all you want, but it&#39;s never the same as a guarantee by the compiler. By this logic we don&#39;t need private fields either.","body":"@biziclop &quot;Though I still fail to see a valid reason why anyone would want that&quot; How is, &quot;I want the argument passed to me guaranteed to be immutable&quot; not a valid reason? You can talk about documentation all you want, but it&#39;s never the same as a guarantee by the compiler. By this logic we don&#39;t need private fields either."},{"owner":{"account_id":279365,"reputation":49126,"user_id":574479,"accept_rate":87,"display_name":"biziclop"},"score":0,"creation_date":1435960752,"post_id":31214446,"comment_id":50430453,"body_markdown":"@Cruncher To underline the impossibility of this requirement, consider how there&#39;s no automated way to tell whether a class itself is immutable in the first place. How could you enforce something on all implementations of an interface that the compiler can&#39;t even test in isolation on a single class?","body":"@Cruncher To underline the impossibility of this requirement, consider how there&#39;s no automated way to tell whether a class itself is immutable in the first place. How could you enforce something on all implementations of an interface that the compiler can&#39;t even test in isolation on a single class?"},{"owner":{"account_id":4092618,"reputation":5227,"user_id":3360241,"accept_rate":91,"display_name":"John"},"score":0,"creation_date":1435960845,"post_id":31214446,"comment_id":50430476,"body_markdown":"Oracle advices for achieving immutability: https://docs.oracle.com/javase/tutorial/essential/concurrency/imstrat.html  Note however, there is no real immutabaility in java. It is possible to expose hidden field or constructor with reflection. It is also possible to generate dynamic proxy of final class that you could extend.","body":"Oracle advices for achieving immutability: <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/imstrat.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/essential/concurrency/&hellip;</a>  Note however, there is no real immutabaility in java. It is possible to expose hidden field or constructor with reflection. It is also possible to generate dynamic proxy of final class that you could extend."},{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":3,"creation_date":1435960847,"post_id":31214446,"comment_id":50430477,"body_markdown":"Two questions that come to mind: (1) is it logical to make a class representing an Employee immutable? One would assume that the state of an employee would change during his/her employment. (2) why should Accountant/ITDepartment/QualityAssurance inherit from Employee rather than be an attribute (&quot;position&quot;) of it?","body":"Two questions that come to mind: (1) is it logical to make a class representing an Employee immutable? One would assume that the state of an employee would change during his/her employment. (2) why should Accountant/ITDepartment/QualityAssurance inherit from Employee rather than be an attribute (&quot;position&quot;) of it?"},{"owner":{"account_id":1781636,"reputation":7670,"user_id":1624202,"accept_rate":61,"display_name":"Cruncher"},"score":0,"creation_date":1435960963,"post_id":31214446,"comment_id":50430509,"body_markdown":"@biziclop for the record, I never said that interfaces should be able to enforce that its children be immutable. Just that I was looking for a good way to solve the problem as in the question. Surely such an interface would be the most obvious solution, but I never said that should be the answer. In fact, I said exactly in my first comment that an interface does not seem like the right solution.","body":"@biziclop for the record, I never said that interfaces should be able to enforce that its children be immutable. Just that I was looking for a good way to solve the problem as in the question. Surely such an interface would be the most obvious solution, but I never said that should be the answer. In fact, I said exactly in my first comment that an interface does not seem like the right solution."},{"owner":{"account_id":279365,"reputation":49126,"user_id":574479,"accept_rate":87,"display_name":"biziclop"},"score":0,"creation_date":1435961171,"post_id":31214446,"comment_id":50430567,"body_markdown":"@Cruncher Okay, let&#39;s put it this way: there is no way to enforce immutability of yet-to-be-written code. There are ways to encourage it, one of them being composition.","body":"@Cruncher Okay, let&#39;s put it this way: there is no way to enforce immutability of yet-to-be-written code. There are ways to encourage it, one of them being composition."},{"owner":{"display_name":"user5078574"},"score":0,"creation_date":1435961410,"post_id":31214446,"comment_id":50430613,"body_markdown":"@RealSkeptic - I agree that Employee would possibly be mutable, however, besides making methods protected/protected final, you have to worry about thread safety, how would you make a java class thread safe in this case? 2. You&#39;re correct it could be an attribute, however, I was doing some reading, and this question was bothering me, so I quickly thought of an example.","body":"@RealSkeptic - I agree that Employee would possibly be mutable, however, besides making methods protected/protected final, you have to worry about thread safety, how would you make a java class thread safe in this case? 2. You&#39;re correct it could be an attribute, however, I was doing some reading, and this question was bothering me, so I quickly thought of an example."},{"owner":{"display_name":"user5078574"},"score":0,"creation_date":1435962165,"post_id":31214446,"comment_id":50430760,"body_markdown":"@Cruncher -  Let me simplify my question, is it okay in some cases, for example this one, to create a class that is mutable? When I was reading, I seem to get the idea that creating mutable classes are a definite NO, but, in some cases, making a class that&#39;s mutable does make sense, correct?","body":"@Cruncher -  Let me simplify my question, is it okay in some cases, for example this one, to create a class that is mutable? When I was reading, I seem to get the idea that creating mutable classes are a definite NO, but, in some cases, making a class that&#39;s mutable does make sense, correct?"},{"owner":{"account_id":279365,"reputation":49126,"user_id":574479,"accept_rate":87,"display_name":"biziclop"},"score":0,"creation_date":1435962224,"post_id":31214446,"comment_id":50430772,"body_markdown":"@Nexusfactor It depends on so many things. Yes, in general you&#39;d want as many of your classes to be immutable as possible. You can for example create an `Employee` class that has a `Department` field, which is then implemented by `IT`, `QA`, `Accounts` and so on. You can now make your `Employee` class immutable on the condition that the `Department` implementations are immutable too. There&#39;s no way to tell they will be but if you design your classes right, you can minimise the risk.","body":"@Nexusfactor It depends on so many things. Yes, in general you&#39;d want as many of your classes to be immutable as possible. You can for example create an <code>Employee</code> class that has a <code>Department</code> field, which is then implemented by <code>IT</code>, <code>QA</code>, <code>Accounts</code> and so on. You can now make your <code>Employee</code> class immutable on the condition that the <code>Department</code> implementations are immutable too. There&#39;s no way to tell they will be but if you design your classes right, you can minimise the risk."},{"owner":{"display_name":"user5078574"},"score":0,"creation_date":1435962288,"post_id":31214446,"comment_id":50430793,"body_markdown":"@biziclop - Thanks for the reply, could you show me an example, how you would implement the above requirement in code? Just for my own understanding. You don&#39;t have to do all of them, Just Employee and QA","body":"@biziclop - Thanks for the reply, could you show me an example, how you would implement the above requirement in code? Just for my own understanding. You don&#39;t have to do all of them, Just Employee and QA"}],"answers":[{"tags":[],"owner":{"account_id":3186389,"reputation":2247,"user_id":2691904,"display_name":"hugh"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1435962826,"creation_date":1435962826,"answer_id":31214896,"question_id":31214446,"body_markdown":"It&#39;s worth thinking why immutability is desirable - usually it&#39;s because you have data which you need to assume is not going to change.\r\nOne approach to do this is to make a final Employee class with a non-final member containing the details specific to the subclasses:\r\n\r\n    public final class Employee {\r\n    \tprivate final long employeeId;\r\n    \tprivate final String firstName;\r\n    \tprivate final String lastName;\r\n    \tprivate final DepartmentalDetails details;\r\n    \t\r\n    \tpublic Employee(long employeeId, String firstName, String lastName,\r\n    \t\t\tDepartmentalDetails details) {\r\n    \t\tsuper();\r\n    \t\tthis.employeeId = employeeId;\r\n    \t\tthis.firstName = firstName;\r\n    \t\tthis.lastName = lastName;\r\n    \t\tthis.details = details;\r\n    \t}\r\n    }\r\n    \r\n    abstract class DepartmentalDetails {\r\n    }\r\n    \r\n    final class AccountantDetails extends DepartmentalDetails {\r\n    \t// Things specific to accountants\r\n    }\r\n    \r\n    final class ITDetails extends DepartmentalDetails{\r\n    \t// Things specific to IT\r\n    }\r\n    \r\n    final class QualityAssuranceDetails extends DepartmentalDetails{\r\n    \t// Things specific to QA\r\n    }\r\n\r\nThis isn&#39;t technically immutable (since an implementer could write a mutable implementation of DepartmentalDetails) but it *does* encapsulate the mutability, so it gives the same benefits while allowing some extensibility.\r\n(This is related to this is the concept of [composition vs inheritance][1], although I don&#39;t believe this pattern is how that is normally used.)\r\n\r\nOne other possibility I think is worth considering - you could make the three subclasses as you suggest, make them all final, and stick a big comment on the abstract class saying all implementations should be immutable.  It&#39;s not bulletproof, but on a small development project the complexity saving is likely to be worth the tiny risk.\r\n\r\n\r\n  [1]: http://javarevisited.blogspot.co.uk/2013/06/why-favor-composition-over-inheritance-java-oops-design.html","title":"Immutable Classes and Subclasses","body":"<p>It's worth thinking why immutability is desirable - usually it's because you have data which you need to assume is not going to change.\nOne approach to do this is to make a final Employee class with a non-final member containing the details specific to the subclasses:</p>\n\n<pre><code>public final class Employee {\n    private final long employeeId;\n    private final String firstName;\n    private final String lastName;\n    private final DepartmentalDetails details;\n\n    public Employee(long employeeId, String firstName, String lastName,\n            DepartmentalDetails details) {\n        super();\n        this.employeeId = employeeId;\n        this.firstName = firstName;\n        this.lastName = lastName;\n        this.details = details;\n    }\n}\n\nabstract class DepartmentalDetails {\n}\n\nfinal class AccountantDetails extends DepartmentalDetails {\n    // Things specific to accountants\n}\n\nfinal class ITDetails extends DepartmentalDetails{\n    // Things specific to IT\n}\n\nfinal class QualityAssuranceDetails extends DepartmentalDetails{\n    // Things specific to QA\n}\n</code></pre>\n\n<p>This isn't technically immutable (since an implementer could write a mutable implementation of DepartmentalDetails) but it <em>does</em> encapsulate the mutability, so it gives the same benefits while allowing some extensibility.\n(This is related to this is the concept of <a href=\"http://javarevisited.blogspot.co.uk/2013/06/why-favor-composition-over-inheritance-java-oops-design.html\" rel=\"nofollow\">composition vs inheritance</a>, although I don't believe this pattern is how that is normally used.)</p>\n\n<p>One other possibility I think is worth considering - you could make the three subclasses as you suggest, make them all final, and stick a big comment on the abstract class saying all implementations should be immutable.  It's not bulletproof, but on a small development project the complexity saving is likely to be worth the tiny risk.</p>\n"},{"tags":[],"owner":{"account_id":10730,"reputation":118663,"user_id":20394,"accept_rate":73,"display_name":"Mike Samuel"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1436020374,"creation_date":1435963892,"answer_id":31215021,"question_id":31214446,"body_markdown":"&gt; If you want to enforce immutability, you cannot have subclasses.\r\n\r\nThis is almost true, but not entirely.  To restate it:\r\n\r\n&gt; If you want to enforce immutability, you must ensure that all sub-classes are immutable.\r\n\r\nThe problem with allowing subclassing is that normally anyone who can author a class can subclass any public non-final class.\r\n\r\nBut all subclasses must invoke one of their super-class&#39;s constructors.  Package-private constructors can only be invoked by subclasses in the same package.\r\n\r\nIf you [seal packages](https://docs.oracle.com/javase/tutorial/deployment/jar/sealman.html) so that you control which classes are in your package, you can constrain subclassing.  First define a class you want to subclass:\r\n\r\n    public abstract class ImmutableBaseClass {\r\n      ImmutableBaseClass(...) {\r\n        ...\r\n      }\r\n    }\r\n\r\nSince all sub-classes have to have access to the super-constructor, you can ensure all the sub-classes in the package you define follow immutable discipline.\r\n\r\n    public final class ImmutableConcreteClass extends ImmutableBaseClass {\r\n      public ImmutableConcreteClass(...) {\r\n        super(...);\r\n      }\r\n    }\r\n\r\n-----\r\n\r\nTo apply this to your example,\r\n\r\n    public abstract class Employee {\r\n      private final Id id;\r\n      private final Name name;\r\n\r\n      // Package private constructor in sub-classable class.\r\n      Employee(Id id, Name name, ...) {\r\n        // Defensively copy as necessary.\r\n      }\r\n    }\r\n\r\n    public final class Accountant extends Employee {\r\n      // Public constructos allowed in final sub-classes.\r\n      public Accountant(Id id, Name name, ...) {\r\n        super(id, name, ...);  // Call to super works from same package.\r\n      }\r\n    }\r\n\r\n    public final class ITWorker extends Employee {\r\n      // Ditto.\r\n      public ITWorker(Id id, Name name, ...) {\r\n        super(id, name, ...);\r\n      }\r\n    }\r\n","title":"Immutable Classes and Subclasses","body":"<blockquote>\n  <p>If you want to enforce immutability, you cannot have subclasses.</p>\n</blockquote>\n\n<p>This is almost true, but not entirely.  To restate it:</p>\n\n<blockquote>\n  <p>If you want to enforce immutability, you must ensure that all sub-classes are immutable.</p>\n</blockquote>\n\n<p>The problem with allowing subclassing is that normally anyone who can author a class can subclass any public non-final class.</p>\n\n<p>But all subclasses must invoke one of their super-class's constructors.  Package-private constructors can only be invoked by subclasses in the same package.</p>\n\n<p>If you <a href=\"https://docs.oracle.com/javase/tutorial/deployment/jar/sealman.html\" rel=\"noreferrer\">seal packages</a> so that you control which classes are in your package, you can constrain subclassing.  First define a class you want to subclass:</p>\n\n<pre><code>public abstract class ImmutableBaseClass {\n  ImmutableBaseClass(...) {\n    ...\n  }\n}\n</code></pre>\n\n<p>Since all sub-classes have to have access to the super-constructor, you can ensure all the sub-classes in the package you define follow immutable discipline.</p>\n\n<pre><code>public final class ImmutableConcreteClass extends ImmutableBaseClass {\n  public ImmutableConcreteClass(...) {\n    super(...);\n  }\n}\n</code></pre>\n\n<hr>\n\n<p>To apply this to your example,</p>\n\n<pre><code>public abstract class Employee {\n  private final Id id;\n  private final Name name;\n\n  // Package private constructor in sub-classable class.\n  Employee(Id id, Name name, ...) {\n    // Defensively copy as necessary.\n  }\n}\n\npublic final class Accountant extends Employee {\n  // Public constructos allowed in final sub-classes.\n  public Accountant(Id id, Name name, ...) {\n    super(id, name, ...);  // Call to super works from same package.\n  }\n}\n\npublic final class ITWorker extends Employee {\n  // Ditto.\n  public ITWorker(Id id, Name name, ...) {\n    super(id, name, ...);\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2478127,"reputation":19514,"user_id":2158288,"display_name":"ZhongYu"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1435973484,"creation_date":1435971543,"answer_id":31215834,"question_id":31214446,"body_markdown":"`java.lang.String` is special, very special - it&#39;s a basic type used everywhere. In particular, java security framework heavily depends on Strings, therefore it is critical that everybody sees the same content of a String, i.e. a String must be immutable (even under unsafe publication!) (Unfortunately a lot of people blindly apply those strict requirements of String to their own classes, often unjustified) \r\n\r\nEven so, it&#39;s not really a big deal if String can be subclassed, as long as all methods in String are final, so that a subclass cannot mess with what a String is supposed to be like. If I&#39;m accepting a String, and you give me a subclass of String, I don&#39;t care what you do in the subclass; as long as the content and the behavior of the String superclass is not tempered with. \r\n\r\nOf course, being such a basic type, it&#39;s wise to mark `String` as final to avoid all confusions. \r\n\r\n----\r\n\r\nIn your use case, you can just have an abstract Employee, and make sure all subclasses are implemented as immutable. Any Employee object, at runtime, must belong to a concrete subclass, which is immutable.\r\n\r\nIf, you cannot control who subclasses Employee, and you suspect that they are either morons that don&#39;t know what they are doing, or villains that  intend to cause troubles, you can at least protect the part in Employee so that subclasses cannot mess it up. For example, the name of an Employee is immutable no matter what subclass does -\r\n\r\n    final String name;\r\n    \r\n    protected Employee(String name) { this.name = name; }\r\n\r\n    public final String getName(){ return name; }  // final method!\r\n\r\n\r\nHowever, such defensive design is often unjustified in most applications by most programmers.  We don&#39;t have to be so paranoid. 99% of coding are cooperative. No big deal if someone really need to override something, let them. 99% of us are not writing some core APIs like String or Collection. A lot of Bloch&#39;s advices, unfortunately, are based on that kind of use cases. The advices are not really helpful to most programmers, especially new ones, churning out in-house apps.","title":"Immutable Classes and Subclasses","body":"<p><code>java.lang.String</code> is special, very special - it's a basic type used everywhere. In particular, java security framework heavily depends on Strings, therefore it is critical that everybody sees the same content of a String, i.e. a String must be immutable (even under unsafe publication!) (Unfortunately a lot of people blindly apply those strict requirements of String to their own classes, often unjustified) </p>\n\n<p>Even so, it's not really a big deal if String can be subclassed, as long as all methods in String are final, so that a subclass cannot mess with what a String is supposed to be like. If I'm accepting a String, and you give me a subclass of String, I don't care what you do in the subclass; as long as the content and the behavior of the String superclass is not tempered with. </p>\n\n<p>Of course, being such a basic type, it's wise to mark <code>String</code> as final to avoid all confusions. </p>\n\n<hr>\n\n<p>In your use case, you can just have an abstract Employee, and make sure all subclasses are implemented as immutable. Any Employee object, at runtime, must belong to a concrete subclass, which is immutable.</p>\n\n<p>If, you cannot control who subclasses Employee, and you suspect that they are either morons that don't know what they are doing, or villains that  intend to cause troubles, you can at least protect the part in Employee so that subclasses cannot mess it up. For example, the name of an Employee is immutable no matter what subclass does -</p>\n\n<pre><code>final String name;\n\nprotected Employee(String name) { this.name = name; }\n\npublic final String getName(){ return name; }  // final method!\n</code></pre>\n\n<p>However, such defensive design is often unjustified in most applications by most programmers.  We don't have to be so paranoid. 99% of coding are cooperative. No big deal if someone really need to override something, let them. 99% of us are not writing some core APIs like String or Collection. A lot of Bloch's advices, unfortunately, are based on that kind of use cases. The advices are not really helpful to most programmers, especially new ones, churning out in-house apps.</p>\n"},{"tags":[],"owner":{"account_id":14860080,"reputation":934,"user_id":10731216,"display_name":"HereAndBeyond"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689797655,"creation_date":1689797655,"answer_id":76724889,"question_id":31214446,"body_markdown":"### Java 17 and &quot;Sealed Classes and Interfaces&quot; feature\r\n\r\nI think with Java 17 and &quot;Sealed Classes and Interfaces&quot; feature it became a bit more easier to follow immutability while using inheritance.\r\n\r\nNow we can just restrict classes which may extend the parent class to ones that we are trusted to. \r\n\r\nLet me show an example based on the suggested entities and the feature (pay attention on `MutabilityBreaker` which is not compiled due to the restriction of `Employee` class):\r\n```java\r\n/**\r\n * Class that we would like to be immutable.\r\n * Pay attention on &#39;permits&#39; section\r\n */\r\npublic sealed class Employee permits Accountant, ITWorker {\r\n\r\n    private final String id;\r\n\r\n    public Employee(String id) {\r\n        this.id = id;\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * Class that we would like to inherit\r\n * from {@link Employee} and not break immutability\r\n */\r\npublic final class Accountant extends Employee {\r\n\r\n    private final List&lt;String&gt; qualifications;\r\n\r\n    // I&#39;m very responsible. I don&#39;t want to break immutability, so I\r\n    // carefully handle input collection\r\n    public Accountant(String id, List&lt;String&gt; qualifications) {\r\n        super(id);\r\n        this.qualifications = List.copyOf(qualifications);\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * Another class that we would like to inherit\r\n * from {@link Employee} and not break immutability\r\n */\r\npublic final class ITWorker extends Employee {\r\n\r\n    private final List&lt;String&gt; skills;\r\n\r\n    // I&#39;m very responsible too, I don&#39;t want to break\r\n    // immutability too, so I carefully handle input collection too\r\n    public ITWorker(String id, List&lt;String&gt; skills) {\r\n        super(id);\r\n        this.skills = List.copyOf(skills);\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * Class that was written to break immutability\r\n * &lt;p&gt;\r\n * COMPILE ERROR: &#39;MutabilityBreaker&#39; is not allowed in the sealed hierarchy\r\n */\r\npublic class MutabilityBreaker extends Employee {\r\n\r\n    private final List&lt;String&gt; mutableCollection;\r\n\r\n    // I&#39;m not responsible, I don&#39;t want to follow immutability\r\n    public MutabilityBreaker(String id, List&lt;String&gt; mutableCollection) {\r\n        super(id);\r\n        this.mutableCollection = mutableCollection;\r\n    }\r\n\r\n}\r\n```","title":"Immutable Classes and Subclasses","body":"<h3>Java 17 and &quot;Sealed Classes and Interfaces&quot; feature</h3>\n<p>I think with Java 17 and &quot;Sealed Classes and Interfaces&quot; feature it became a bit more easier to follow immutability while using inheritance.</p>\n<p>Now we can just restrict classes which may extend the parent class to ones that we are trusted to.</p>\n<p>Let me show an example based on the suggested entities and the feature (pay attention on <code>MutabilityBreaker</code> which is not compiled due to the restriction of <code>Employee</code> class):</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Class that we would like to be immutable.\n * Pay attention on 'permits' section\n */\npublic sealed class Employee permits Accountant, ITWorker {\n\n    private final String id;\n\n    public Employee(String id) {\n        this.id = id;\n    }\n\n}\n\n/**\n * Class that we would like to inherit\n * from {@link Employee} and not break immutability\n */\npublic final class Accountant extends Employee {\n\n    private final List&lt;String&gt; qualifications;\n\n    // I'm very responsible. I don't want to break immutability, so I\n    // carefully handle input collection\n    public Accountant(String id, List&lt;String&gt; qualifications) {\n        super(id);\n        this.qualifications = List.copyOf(qualifications);\n    }\n\n}\n\n/**\n * Another class that we would like to inherit\n * from {@link Employee} and not break immutability\n */\npublic final class ITWorker extends Employee {\n\n    private final List&lt;String&gt; skills;\n\n    // I'm very responsible too, I don't want to break\n    // immutability too, so I carefully handle input collection too\n    public ITWorker(String id, List&lt;String&gt; skills) {\n        super(id);\n        this.skills = List.copyOf(skills);\n    }\n\n}\n\n/**\n * Class that was written to break immutability\n * &lt;p&gt;\n * COMPILE ERROR: 'MutabilityBreaker' is not allowed in the sealed hierarchy\n */\npublic class MutabilityBreaker extends Employee {\n\n    private final List&lt;String&gt; mutableCollection;\n\n    // I'm not responsible, I don't want to follow immutability\n    public MutabilityBreaker(String id, List&lt;String&gt; mutableCollection) {\n        super(id);\n        this.mutableCollection = mutableCollection;\n    }\n\n}\n</code></pre>\n"}],"owner":{"display_name":"user5078574"},"comment_count":23,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7832,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":31215021,"answer_count":4,"score":9,"last_activity_date":1689797655,"creation_date":1435959369,"question_id":31214446,"body_markdown":"I&#39;m trying to learn about mutable/immutable classes and I came across [this post][1]\r\n\r\nPart of the answer provided was: \r\n\r\n&gt; If you want to enforce immutability, you cannot have subclasses. See\r\n&gt; for example java.lang.String, which is a final class for this reason:\r\n&gt; To prevent people from subclassing String to make it mutable.\r\n\r\nAlright, I understand it, **but**, how would you handle this issue. Let&#39;s say you were given the task of creating 3 Employee classes, Accountant, ITDepartment, and QualityAssurance. Now, you could create an abstract class called Employee with common methods that would be shared by all (employee ID, name, salary etc..), however, your classes are no longer immutable.\r\n\r\nUsing Java, How then would you solve this problem ? Would you create the 3 classes, make them final, and don&#39;t implement an abstract method? (So, no subclassing whatsoever) or would you use an interface, and provide only the getters?  \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/11183187/overloading-a-method-in-an-immutable-class","title":"Immutable Classes and Subclasses","body":"<p>I'm trying to learn about mutable/immutable classes and I came across <a href=\"https://stackoverflow.com/questions/11183187/overloading-a-method-in-an-immutable-class\">this post</a></p>\n\n<p>Part of the answer provided was: </p>\n\n<blockquote>\n  <p>If you want to enforce immutability, you cannot have subclasses. See\n  for example java.lang.String, which is a final class for this reason:\n  To prevent people from subclassing String to make it mutable.</p>\n</blockquote>\n\n<p>Alright, I understand it, <strong>but</strong>, how would you handle this issue. Let's say you were given the task of creating 3 Employee classes, Accountant, ITDepartment, and QualityAssurance. Now, you could create an abstract class called Employee with common methods that would be shared by all (employee ID, name, salary etc..), however, your classes are no longer immutable.</p>\n\n<p>Using Java, How then would you solve this problem ? Would you create the 3 classes, make them final, and don't implement an abstract method? (So, no subclassing whatsoever) or would you use an interface, and provide only the getters?  </p>\n"},{"tags":["java","android","call","telecom-manager"],"owner":{"account_id":29050076,"reputation":1,"user_id":22253102,"display_name":"Nicol&#225;s Calder&#243;n Zamora"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689797360,"creation_date":1689779384,"question_id":76722752,"body_markdown":"I&#39;m doing an app to do Calls and check the call states in real time with the library Telecom Manager using the class Call to get this states, but I try with some methods and i don&#39;t get that\r\n\r\nI need a example code to use with my code","title":"how use Call class of Telecom Manager?","body":"<p>I'm doing an app to do Calls and check the call states in real time with the library Telecom Manager using the class Call to get this states, but I try with some methods and i don't get that</p>\n<p>I need a example code to use with my code</p>\n"},{"tags":["java","database","lib"],"owner":{"account_id":21915060,"reputation":1,"user_id":22254585,"display_name":"Its Domme"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689797202,"creation_date":1689797202,"question_id":76724856,"body_markdown":"I can&#39;t create a channel. I created a button for the message, I need it to create a channel when it is pressed, with access to it for the player who pressed the button, and for the moderators\r\n\r\n```\r\nGuild guild = event.getJDA().getGuildById(&quot;957265304180887642&quot;);\r\n            if (guild != null) {\r\n                Category category = guild.getCategoryById(&quot;1131306931991101522&quot;);\r\n                if (category != null) {\r\n                    guild.createTextChannel(&quot;Поддержка игрока &quot; + event.getUser().getName())\r\n                            .setParent(category)\r\n                            .addPermissionOverride(guild.getRoleById(&quot;957267206914330665&quot;), EnumSet.of(Permission.VIEW_CHANNEL), null)\r\n                            .addPermissionOverride(guild.getRoleById(&quot;957266939577765928&quot;), EnumSet.of(Permission.VIEW_CHANNEL), null)\r\n                            .addPermissionOverride(guild.getRoleById(&quot;957266149735792731&quot;), EnumSet.of(Permission.VIEW_CHANNEL), null)\r\n                            .addPermissionOverride(guild.getRoleById(&quot;957265799654043678&quot;), EnumSet.of(Permission.VIEW_CHANNEL), null)\r\n                            .addPermissionOverride(guild.getPublicRole(), null, EnumSet.of(Permission.VIEW_CHANNEL))\r\n                            .queue();\r\n                }\r\n            }\r\n```\r\n\r\n\r\nWhen you click on the button, it says &quot;interaction error&quot;. help me please","title":"Java, JDA. How create channel?","body":"<p>I can't create a channel. I created a button for the message, I need it to create a channel when it is pressed, with access to it for the player who pressed the button, and for the moderators</p>\n<pre><code>Guild guild = event.getJDA().getGuildById(&quot;957265304180887642&quot;);\n            if (guild != null) {\n                Category category = guild.getCategoryById(&quot;1131306931991101522&quot;);\n                if (category != null) {\n                    guild.createTextChannel(&quot;Поддержка игрока &quot; + event.getUser().getName())\n                            .setParent(category)\n                            .addPermissionOverride(guild.getRoleById(&quot;957267206914330665&quot;), EnumSet.of(Permission.VIEW_CHANNEL), null)\n                            .addPermissionOverride(guild.getRoleById(&quot;957266939577765928&quot;), EnumSet.of(Permission.VIEW_CHANNEL), null)\n                            .addPermissionOverride(guild.getRoleById(&quot;957266149735792731&quot;), EnumSet.of(Permission.VIEW_CHANNEL), null)\n                            .addPermissionOverride(guild.getRoleById(&quot;957265799654043678&quot;), EnumSet.of(Permission.VIEW_CHANNEL), null)\n                            .addPermissionOverride(guild.getPublicRole(), null, EnumSet.of(Permission.VIEW_CHANNEL))\n                            .queue();\n                }\n            }\n</code></pre>\n<p>When you click on the button, it says &quot;interaction error&quot;. help me please</p>\n"},{"tags":["java","spring-boot","data-structures","websocket"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1689797023,"post_id":76723225,"comment_id":135266163,"body_markdown":"how do you know which users you have to notify of changes in a certain topic they subscribed to?","body":"how do you know which users you have to notify of changes in a certain topic they subscribed to?"},{"owner":{"account_id":5278173,"reputation":51,"user_id":4214370,"display_name":"Allteran"},"score":0,"creation_date":1689846203,"post_id":76723225,"comment_id":135272269,"body_markdown":"The idea is to increment the counter after the user subscribed, so after that counter could be updated in real-time for everyone who logged in. It can be done by subscribing on another topic (i.e. &#39;/topic/memberCount&#39;) so every user that logged in can see that updates","body":"The idea is to increment the counter after the user subscribed, so after that counter could be updated in real-time for everyone who logged in. It can be done by subscribing on another topic (i.e. &#39;/topic/memberCount&#39;) so every user that logged in can see that updates"}],"owner":{"account_id":5278173,"reputation":51,"user_id":4214370,"display_name":"Allteran"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689796774,"creation_date":1689782634,"question_id":76723225,"body_markdown":"I&#39;m currently working on the backend of a chat application. Of course, messages in chat work with Websockets as well to implement real-time communication.\r\nNow I faced a problem: I need to indicate how many users joined the chat room. \r\nWhen user enters chat room - he subscribing to the certain topic and sends message to that topic:\r\n```\r\n@MessageMapping(&quot;/chat.join/{id}&quot;)\r\n    @SendTo(&quot;/topic/chat-channel/{id}&quot;)\r\n    public ChatMessage joinChannel(@DestinationVariable(&quot;id&quot;)String destId,\r\n                                   @Payload ChatMessage body,\r\n                                   SimpMessageHeaderAccessor headerAccessor) {\r\n        User user = (User) SecurityContextHolder.getContext().getAuthentication().getPrincipal();\r\n        ChatMessage modifiedMessage = chatService.joinChannel(body, user.getId(), destId);\r\n\r\n        //we put channelId and userId to sessionAttributes for manipulate with that using HandlerInterceptor\r\n        headerAccessor.getSessionAttributes().put(&quot;userId&quot;, modifiedMessage.getSender());\r\n        headerAccessor.getSessionAttributes().put(&quot;channelId&quot;, modifiedMessage.getReceiver());\r\n        return body;\r\n```\r\nNow every time when a user subscribes to a certain topic - I want to increment the counter which will display the number of chat room members. I decided to implement it with ```Cache```, but every guide that I&#39;ve found said: \r\n\r\n&gt; Caching should be used when data DON&#39;T HAVE TO CHANGES FREQUENTLY\r\n\r\nCan you please give me advice on which way to store members count should I use? Is it ok to write this value to the database (mongoDB)? Or better just implement some kind of ```Singletone```?\r\nThanks","title":"How to count subscribers of certain topic - Websocket, Spring boot","body":"<p>I'm currently working on the backend of a chat application. Of course, messages in chat work with Websockets as well to implement real-time communication.\nNow I faced a problem: I need to indicate how many users joined the chat room.\nWhen user enters chat room - he subscribing to the certain topic and sends message to that topic:</p>\n<pre><code>@MessageMapping(&quot;/chat.join/{id}&quot;)\n    @SendTo(&quot;/topic/chat-channel/{id}&quot;)\n    public ChatMessage joinChannel(@DestinationVariable(&quot;id&quot;)String destId,\n                                   @Payload ChatMessage body,\n                                   SimpMessageHeaderAccessor headerAccessor) {\n        User user = (User) SecurityContextHolder.getContext().getAuthentication().getPrincipal();\n        ChatMessage modifiedMessage = chatService.joinChannel(body, user.getId(), destId);\n\n        //we put channelId and userId to sessionAttributes for manipulate with that using HandlerInterceptor\n        headerAccessor.getSessionAttributes().put(&quot;userId&quot;, modifiedMessage.getSender());\n        headerAccessor.getSessionAttributes().put(&quot;channelId&quot;, modifiedMessage.getReceiver());\n        return body;\n</code></pre>\n<p>Now every time when a user subscribes to a certain topic - I want to increment the counter which will display the number of chat room members. I decided to implement it with <code>Cache</code>, but every guide that I've found said:</p>\n<blockquote>\n<p>Caching should be used when data DON'T HAVE TO CHANGES FREQUENTLY</p>\n</blockquote>\n<p>Can you please give me advice on which way to store members count should I use? Is it ok to write this value to the database (mongoDB)? Or better just implement some kind of <code>Singletone</code>?\nThanks</p>\n"},{"tags":["java","performance","hibernate","jpa","transactions"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":2,"creation_date":1689799487,"post_id":76724176,"comment_id":135266531,"body_markdown":"As mentioned in the very well written answer - it depends. Don&#39;t discount though that read queries can obtain and release connections to a read-pool for reuse, while transactional methods must hold that connection for the life of the method/transaction, preventing other threads from reusing that resource. Some read connections can be used under the covers concurrently as well, so you can use far fewer DB connections for reads outside of transactions than you can within them. There are many many resources and issues to consider when deciding what to do for performance","body":"As mentioned in the very well written answer - it depends. Don&#39;t discount though that read queries can obtain and release connections to a read-pool for reuse, while transactional methods must hold that connection for the life of the method/transaction, preventing other threads from reusing that resource. Some read connections can be used under the covers concurrently as well, so you can use far fewer DB connections for reads outside of transactions than you can within them. There are many many resources and issues to consider when deciding what to do for performance"},{"owner":{"account_id":4153318,"reputation":19445,"user_id":3405171,"display_name":"v.ladynev"},"score":0,"creation_date":1689811773,"post_id":76724176,"comment_id":135267891,"body_markdown":"@Chris It would be interesting to see your own answer. Is a read-pool related to the database or an application connection pool?","body":"@Chris It would be interesting to see your own answer. Is a read-pool related to the database or an application connection pool?"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1689815039,"post_id":76724176,"comment_id":135268152,"body_markdown":"This is hibernate specific/tagged, and I am not familiar enough with all the settings and configuration options that I could try to answer a complex question reasonably without risking steering people wrong. Performance tuning is an art and all I can do is scribble. I mentioned a separate read pool, as this is native EclipseLink separation ( https://eclipse.dev/eclipselink/documentation/2.7/concepts/data_access006.htm  ) where it was known far fewer connection were needed for exclusive read operations than are needed for writes because of transactions.","body":"This is hibernate specific/tagged, and I am not familiar enough with all the settings and configuration options that I could try to answer a complex question reasonably without risking steering people wrong. Performance tuning is an art and all I can do is scribble. I mentioned a separate read pool, as this is native EclipseLink separation ( <a href=\"https://eclipse.dev/eclipselink/documentation/2.7/concepts/data_access006.htm\" rel=\"nofollow noreferrer\">eclipse.dev/eclipselink/documentation/2.7/concepts/&hellip;</a>  ) where it was known far fewer connection were needed for exclusive read operations than are needed for writes because of transactions."},{"owner":{"account_id":1126061,"reputation":2343,"user_id":2123050,"accept_rate":73,"display_name":"FuryFart"},"score":0,"creation_date":1701863345,"post_id":76724176,"comment_id":136827049,"body_markdown":"The Transactional annotation will have no significant effect on performance. With Transactional you can ensure that your business functions leave behind consistent data. Either all data operations succeeded. Or non of them succeeded in case of error. (transaction rollback).","body":"The Transactional annotation will have no significant effect on performance. With Transactional you can ensure that your business functions leave behind consistent data. Either all data operations succeeded. Or non of them succeeded in case of error. (transaction rollback)."}],"owner":{"account_id":22923307,"reputation":51,"user_id":17058817,"display_name":"Kirill Zhurbin"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1689796573,"creation_date":1689790604,"question_id":76724176,"body_markdown":"I have a misunderstanding about using `@Transactional` annotation and its influence on performance.\r\n\r\nI have a method with several select queries for collecting data via JPA repository\r\n\r\n```\r\nvoid someMethod() {\r\n   repositoryOne.findSomething();\r\n   repositoryTwo.findSomething();\r\n   repositoryThree.findSomething();\r\n   ...\r\n}\r\n```\r\n\r\nI know if I put `@Transactional` annotation above a method then all queries will be executed in the single transaction and in the single session. \r\n\r\nSo, does it make sense to put `@Transactional` annotation above that method to better performance, because all queries will be executed in the single session and application will not spend time and resources on acquiring and release several connections to database?","title":"Many select queries in one session","body":"<p>I have a misunderstanding about using <code>@Transactional</code> annotation and its influence on performance.</p>\n<p>I have a method with several select queries for collecting data via JPA repository</p>\n<pre><code>void someMethod() {\n   repositoryOne.findSomething();\n   repositoryTwo.findSomething();\n   repositoryThree.findSomething();\n   ...\n}\n</code></pre>\n<p>I know if I put <code>@Transactional</code> annotation above a method then all queries will be executed in the single transaction and in the single session.</p>\n<p>So, does it make sense to put <code>@Transactional</code> annotation above that method to better performance, because all queries will be executed in the single session and application will not spend time and resources on acquiring and release several connections to database?</p>\n"},{"tags":["java","swing","netbeans"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1315008395,"post_id":7289219,"comment_id":8781086,"body_markdown":"Regress through `Team &gt; Local History` until the problem is apparent.","body":"Regress through <code>Team &gt; Local History</code> until the problem is apparent."}],"answers":[{"tags":[],"owner":{"account_id":954532,"reputation":91,"user_id":980075,"display_name":"reachSDK"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689795748,"creation_date":1318664961,"answer_id":7776520,"question_id":7289219,"body_markdown":"I too faced the same problem, and after some search in the web I found the solution for this problem. I don&#39;t have a deep understanding of why and how this problem occurs, but I can share with you the solution I found.\r\n\r\nWhen you get such an error message, go to the menu *View* &amp;rarr; *IDE* Log or you can open the log\r\nfrom `windows_user_Home\\\\.netbeans\\7.0\\var\\log`.\r\n\r\nIn that log, you have to locate the error message you got, for example,\r\n\r\n```lang-none\r\nINFO [org.netbeans.modules.form.BeanSupport]: Cannot create default instance of: test.Application1\r\njava.lang.NullPointerException\r\n    at test.Application1.initLabel(Application1.java:906)\r\n```\r\n\r\nSo the problem is in line 906 of your *.java* file. Open that file and comment those lines and then you will able to overcome the problem.\r\n\r\nYou can add the component to the Form or jInternalFrame or...\r\n\r\nAfter adding the component, you can again uncomment those lines. Just *Clean* and *Build* your project.\r\n\r\n","title":"&quot;Component cannot be instantiated&quot; in NetBeans 7.0.1","body":"<p>I too faced the same problem, and after some search in the web I found the solution for this problem. I don't have a deep understanding of why and how this problem occurs, but I can share with you the solution I found.</p>\n<p>When you get such an error message, go to the menu <em>View</em> → <em>IDE</em> Log or you can open the log\nfrom <code>windows_user_Home\\\\.netbeans\\7.0\\var\\log</code>.</p>\n<p>In that log, you have to locate the error message you got, for example,</p>\n<pre class=\"lang-none prettyprint-override\"><code>INFO [org.netbeans.modules.form.BeanSupport]: Cannot create default instance of: test.Application1\njava.lang.NullPointerException\n    at test.Application1.initLabel(Application1.java:906)\n</code></pre>\n<p>So the problem is in line 906 of your <em>.java</em> file. Open that file and comment those lines and then you will able to overcome the problem.</p>\n<p>You can add the component to the Form or jInternalFrame or...</p>\n<p>After adding the component, you can again uncomment those lines. Just <em>Clean</em> and <em>Build</em> your project.</p>\n"},{"tags":[],"owner":{"account_id":1964612,"reputation":31,"user_id":1765203,"display_name":"البراء أحمد"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1689796290,"creation_date":1350905067,"answer_id":13010438,"question_id":7289219,"body_markdown":"Thanks a lot for [that answer][1], but if you want to know the reason, here you are.\r\n\r\nTypically this appears on two positions:\r\n\r\n1. an overridden method on your component.\r\n2. a normal method on your component.\r\n\r\nFor example:\r\n\r\n    package UI.Components;\r\n\r\n    public class LabelComponent extends javax.swing.JLabel {\r\n\r\n        private javax.swing.JLabel label;\r\n\r\n        public TextFieldComponent() {\r\n            label = new javax.swing.JLabel(_label);\r\n            add(label);\r\n        }\r\n\r\n        @Override\r\n        public void setText(String text) {\r\n            label.setText(text);\r\n        }\r\n    }\r\n\r\nThe method `setText(String text)` is called say in the super class constructor, and then it is the overridden new method that would be called in the case of the (label) variable which is used on this method still not being initialized, so a `java.lang.NullPointerException` will be thrown.\r\n\r\nSolution:\r\n\r\n1) `try` ... `catch`:\r\n\r\n        @Override\r\n        public void setText(String text) {\r\n            try {\r\n                label.setText(text);\r\n            } catch (Exception e) {\r\n            }\r\n        }\r\n\r\n2) Check:\r\n\r\n    Use null initialization on declaration\r\n\r\n        private javax.swing.JLabel label = null;\r\n\r\n    Then check on the method\r\n\r\n        @Override\r\n        public void setText(String text) {\r\n            if(label != null)\r\n                label.setText(text);\r\n        }\r\n\r\n3) Use initialization on declaration:\r\n\r\n        private javax.swing.JLabel label = label = new javax.swing.JLabel();\r\n\r\n    and then use the setText method in your constructor\r\n\r\n        label.setText(_label);\r\n\r\nNote:\r\n\r\nIn the case of reason (2), a normal method on your component, it is the same as (1), but you may call the method before initializing the variable or assign null to the variable before calling the method and so on and it can be solved by the same ways.\r\n\r\n  [1]: https://stackoverflow.com/questions/7289219/component-cannot-be-instantiated-in-netbeans-7-0-1/7776520#7776520\r\n\r\n\r\n","title":"&quot;Component cannot be instantiated&quot; in NetBeans 7.0.1","body":"<p>Thanks a lot for <a href=\"https://stackoverflow.com/questions/7289219/component-cannot-be-instantiated-in-netbeans-7-0-1/7776520#7776520\">that answer</a>, but if you want to know the reason, here you are.</p>\n<p>Typically this appears on two positions:</p>\n<ol>\n<li>an overridden method on your component.</li>\n<li>a normal method on your component.</li>\n</ol>\n<p>For example:</p>\n<pre><code>package UI.Components;\n\npublic class LabelComponent extends javax.swing.JLabel {\n\n    private javax.swing.JLabel label;\n\n    public TextFieldComponent() {\n        label = new javax.swing.JLabel(_label);\n        add(label);\n    }\n\n    @Override\n    public void setText(String text) {\n        label.setText(text);\n    }\n}\n</code></pre>\n<p>The method <code>setText(String text)</code> is called say in the super class constructor, and then it is the overridden new method that would be called in the case of the (label) variable which is used on this method still not being initialized, so a <code>java.lang.NullPointerException</code> will be thrown.</p>\n<p>Solution:</p>\n<ol>\n<li><p><code>try</code> ... <code>catch</code>:</p>\n<pre><code> @Override\n public void setText(String text) {\n     try {\n         label.setText(text);\n     } catch (Exception e) {\n     }\n }\n</code></pre>\n</li>\n<li><p>Check:</p>\n<p>Use null initialization on declaration</p>\n<pre><code> private javax.swing.JLabel label = null;\n</code></pre>\n<p>Then check on the method</p>\n<pre><code> @Override\n public void setText(String text) {\n     if(label != null)\n         label.setText(text);\n }\n</code></pre>\n</li>\n<li><p>Use initialization on declaration:</p>\n<pre><code> private javax.swing.JLabel label = label = new javax.swing.JLabel();\n</code></pre>\n<p>and then use the setText method in your constructor</p>\n<pre><code> label.setText(_label);\n</code></pre>\n</li>\n</ol>\n<p>Note:</p>\n<p>In the case of reason (2), a normal method on your component, it is the same as (1), but you may call the method before initializing the variable or assign null to the variable before calling the method and so on and it can be solved by the same ways.</p>\n"},{"tags":[],"owner":{"account_id":3951444,"reputation":1,"user_id":3261644,"display_name":"b5cully"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689795648,"creation_date":1391298019,"answer_id":21505151,"question_id":7289219,"body_markdown":"I have encountered the similar problem, however in a different context.\r\n\r\nI have two separate projects, a [Swing][1] built user interface, and another one that poses as a class library.\r\n\r\nI added a class to the class library, headed over to the user interface, and implemented this newly added class from the library into the Swing interface project in the shape of an existing custom JFrame. So what happened to me now that the class loader of course could not find the class because the library project required compiling. The issue was fixed by compiling it.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Swing_%28Java%29\r\n\r\n\r\n\r\n","title":"&quot;Component cannot be instantiated&quot; in NetBeans 7.0.1","body":"<p>I have encountered the similar problem, however in a different context.</p>\n<p>I have two separate projects, a <a href=\"https://en.wikipedia.org/wiki/Swing_%28Java%29\" rel=\"nofollow noreferrer\">Swing</a> built user interface, and another one that poses as a class library.</p>\n<p>I added a class to the class library, headed over to the user interface, and implemented this newly added class from the library into the Swing interface project in the shape of an existing custom JFrame. So what happened to me now that the class loader of course could not find the class because the library project required compiling. The issue was fixed by compiling it.</p>\n"}],"owner":{"account_id":886735,"reputation":893,"user_id":926011,"accept_rate":39,"display_name":"averageman"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6455,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":3,"score":1,"last_activity_date":1689796290,"creation_date":1314997569,"question_id":7289219,"body_markdown":"I have been customizing JTextArea and JTable. I do so by adding a new Java class to my project and then declaring it extends the particular class I want (in my case, either JTextArea or JTable).\r\n\r\nI had been using it normally, adding these new classes to JDialogs and JInternalFrames without any problem. I do so by just dragging it to my JDialog or JInternalFrame...\r\n\r\nBut recently, for some reason, I started getting these error messages:\r\n\r\n&gt; Component cannot be instantiated. Please make sure it is a JavaBeans component.\r\n\r\nThe JInternalFrames that were accepting the old customized classes still accepts them. But if I try to add the new customized class, it gives me that error message and, afterwards, it starts showing the same message to the old customized classes too...\r\n\r\nSomething really weird is going on. I copied the same code of a (previously) customized class to a new class (changing the name of the class, of course). Then I try to add this to my JInternalFrame. It gives me the error message! If, before this, I try to add the same customized class (with the original name), it adds the class normally...\r\n\r\nThis is annoying. How can I solve?\r\n\r\n(I am using NetBeans 7.0.1)\r\n\r\n&lt;hr/&gt;\r\n\r\n&lt;sub&gt;It turned out to be a problem with an out-of-range array access... I am used to error messages about this kind of thing being automatic... Sorry, I just started programming in Java.&lt;/sub&gt;\r\n\r\n\r\n\r\n\r\n","title":"&quot;Component cannot be instantiated&quot; in NetBeans 7.0.1","body":"<p>I have been customizing JTextArea and JTable. I do so by adding a new Java class to my project and then declaring it extends the particular class I want (in my case, either JTextArea or JTable).</p>\n<p>I had been using it normally, adding these new classes to JDialogs and JInternalFrames without any problem. I do so by just dragging it to my JDialog or JInternalFrame...</p>\n<p>But recently, for some reason, I started getting these error messages:</p>\n<blockquote>\n<p>Component cannot be instantiated. Please make sure it is a JavaBeans component.</p>\n</blockquote>\n<p>The JInternalFrames that were accepting the old customized classes still accepts them. But if I try to add the new customized class, it gives me that error message and, afterwards, it starts showing the same message to the old customized classes too...</p>\n<p>Something really weird is going on. I copied the same code of a (previously) customized class to a new class (changing the name of the class, of course). Then I try to add this to my JInternalFrame. It gives me the error message! If, before this, I try to add the same customized class (with the original name), it adds the class normally...</p>\n<p>This is annoying. How can I solve?</p>\n<p>(I am using NetBeans 7.0.1)</p>\n<hr/>\n<p><sub>It turned out to be a problem with an out-of-range array access... I am used to error messages about this kind of thing being automatic... Sorry, I just started programming in Java.</sub></p>\n"},{"tags":["java","swing","javafx-2"],"answers":[{"tags":[],"owner":{"account_id":368268,"reputation":109587,"user_id":714968,"accept_rate":90,"display_name":"mKorbel"},"down_vote_count":2,"up_vote_count":11,"is_accepted":true,"score":9,"last_activity_date":1363096174,"creation_date":1363096174,"answer_id":15363040,"question_id":15362783,"body_markdown":"    Is JavaFX complete replacement of Swing?\r\n\r\nI think that not, \r\n\r\n- most of components are halfsized in compare with Swing (price for development ???),\r\n\r\n- implementations in JavaFX8 (accesible with Java8) has one important point Swing JComponents  could be accesible from JavaFX containers and JavaFX Components will be accesible in Swing JContainers (implemented in newer JavaFX2.2), \r\n\r\n- then JavaFX will be accesible for development of DeskTop applications\r\n\r\n- still question is if will be possible to add JavaFX TextArea together with Swing JTextArea in one JPanel or vice versa (Panel from xxx.scene.xxx)\r\n\r\n- more (the best infos, roadmap, development...) on [FX Experience][1] (notice occasionally is down :-)\r\n\r\n\r\n  [1]: http://fxexperience.com/","title":"Is JavaFX complete replacement of Swing?","body":"<pre><code>Is JavaFX complete replacement of Swing?\n</code></pre>\n\n<p>I think that not, </p>\n\n<ul>\n<li><p>most of components are halfsized in compare with Swing (price for development ???),</p></li>\n<li><p>implementations in JavaFX8 (accesible with Java8) has one important point Swing JComponents  could be accesible from JavaFX containers and JavaFX Components will be accesible in Swing JContainers (implemented in newer JavaFX2.2), </p></li>\n<li><p>then JavaFX will be accesible for development of DeskTop applications</p></li>\n<li><p>still question is if will be possible to add JavaFX TextArea together with Swing JTextArea in one JPanel or vice versa (Panel from xxx.scene.xxx)</p></li>\n<li><p>more (the best infos, roadmap, development...) on <a href=\"http://fxexperience.com/\" rel=\"noreferrer\">FX Experience</a> (notice occasionally is down :-)</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":329906,"reputation":12891,"user_id":653708,"accept_rate":90,"display_name":"8bitjunkie"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1677426130,"creation_date":1386765449,"answer_id":20519340,"question_id":15362783,"body_markdown":"Oracle&#39;s JavaFX FAQs states that JavaFX **is** a replacement for Swing:\r\n\r\n&gt;**Is JavaFX replacing Swing as the new client UI library for Java SE?**\r\n&gt;\r\n&gt; **Yes**. However, Swing will remain part of the Java SE specification for the foreseeable future, and therefore included in the JRE. While\r\n&gt; we recommend developers to leverage JavaFX APIs as much as possible\r\n&gt; when building new applications, it is possible to extend a Swing\r\n&gt; application with JavaFX, allowing for a smoother transition.\r\n&gt;\r\n&gt; *Source: Oracle JavaFX FAQs (http://www.oracle.com/technetwork/java/javafx/overview/faq-1446554.html#6) [last checked: Feb 2023]*\r\n\r\n \r\nHowever it is noteworthy that as of Java 11, JavaFX is no longer included in the JDK:\r\n\r\n&gt; JavaFX is no longer included in the JDK. It is now available as a\r\n&gt; separate download from openjfx.io\r\n&gt;\r\n&gt;*Source: Java 11 release notes(https://www.oracle.com/java/technologies/javase/11-relnote-issues.html)* [last checked: Feb 2023]\r\n\r\nIn contrast, in up to and including Java 19, Swing remains in the JDK, under `java.desktop`: https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/module-summary.html [last checked: Feb 2023]","title":"Is JavaFX complete replacement of Swing?","body":"<p>Oracle's JavaFX FAQs states that JavaFX <strong>is</strong> a replacement for Swing:</p>\n<blockquote>\n<p><strong>Is JavaFX replacing Swing as the new client UI library for Java SE?</strong></p>\n<p><strong>Yes</strong>. However, Swing will remain part of the Java SE specification for the foreseeable future, and therefore included in the JRE. While\nwe recommend developers to leverage JavaFX APIs as much as possible\nwhen building new applications, it is possible to extend a Swing\napplication with JavaFX, allowing for a smoother transition.</p>\n<p><em>Source: Oracle JavaFX FAQs (<a href=\"http://www.oracle.com/technetwork/java/javafx/overview/faq-1446554.html#6\" rel=\"nofollow noreferrer\">http://www.oracle.com/technetwork/java/javafx/overview/faq-1446554.html#6</a>) [last checked: Feb 2023]</em></p>\n</blockquote>\n<p>However it is noteworthy that as of Java 11, JavaFX is no longer included in the JDK:</p>\n<blockquote>\n<p>JavaFX is no longer included in the JDK. It is now available as a\nseparate download from openjfx.io</p>\n<p><em>Source: Java 11 release notes(<a href=\"https://www.oracle.com/java/technologies/javase/11-relnote-issues.html\" rel=\"nofollow noreferrer\">https://www.oracle.com/java/technologies/javase/11-relnote-issues.html</a>)</em> [last checked: Feb 2023]</p>\n</blockquote>\n<p>In contrast, in up to and including Java 19, Swing remains in the JDK, under <code>java.desktop</code>: <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/module-summary.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/module-summary.html</a> [last checked: Feb 2023]</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1689796246,"creation_date":1595132113,"answer_id":62976209,"question_id":15362783,"body_markdown":"# tl;dr\r\n\r\nYes, JavaFX is the official replacement for Swing. \r\n\r\n - Swing remains fully supported, but is in maintenance-mode. \r\n - JavaFX is under continual development, with releases every six months.\r\n\r\nJavaFX was successfully open-sourced as *OpenJFX*. Co-led by Gluon and Oracle. Multiple companies offer support. \r\n\r\nJavaFX is stable, and has been used successfully for many desktop apps. \r\n\r\n# Update as of 2020\r\n\r\n[JavaFX][1] technology has been going quite well in the ensuing years after this Question was originally posted. [Java][2] is regularly released on its 6-month train schedule, and JavaFX releases have arrived at the same pace. \r\n\r\nOracle Corp. has completed the process of making JavaFX [open-source][3], known as [*OpenJFX*][4]. The codebase is now housed as a [sub-project on the OpenJDK][5] project. Leadership has been assigned to the [Gluon][6] company, with [Oracle][7]’s continued support.\r\n\r\nThe popularity and community seem to be growing. The competitors have fallen away, such as [*Microsoft Silverlight*][8] and [*Adobe Flash*][9] both having died. \r\n\r\nOracle continues to support [Swing][10] as a required part of any [Java SE][11] implementation, but only in [maintenance-mode][12]. JavaFX, in contrast, is under constant active development.\r\n\r\nOracle sells support for JavaFX, as do other vendors such as Gluon and Azul Systems. \r\n\r\nSome vendors supplying Java implementations bundle the JavaFX/OpenJFX libraries with their JVMs. These include [Azul Systems][13] with their *ZuluFX* product, and [BellSoft][14] with their *LibericaFX* product.\r\n\r\nThough cutting-edge presently, there is work being done to build a native apps for iOS and other platforms using OpenJFX with [ahead-of-time compilation][15] using [GraalVM][16]. \r\n\r\nDelivering a JavaFX desktop app is often done by bundling a [JDK][17] inside. This produces a “double-clickable” app. Bundling a JDK is more easily done by modularizing your code with [JPMS](https://en.wikipedia.org/wiki/Java_Platform_Module_System). By leveraging JPMS, a developer can make use of the [*jlink*](https://openjdk.org/jeps/282) and [*jpackage*](https://openjdk.org/jeps/392) tooling.\r\n\r\nSee: \r\n\r\n - [Java Client Roadmap Update][18] by Oracle, 2020-05\r\n - [JavaFX FAQ][19] by Oracle\r\n - [OpenJFX][4]\r\n - [JavaFX][1] page on Wikipedia\r\n - OpenJDK [wiki page][20] for JavaFX \r\n\r\n\r\n----------\r\n[![enter image description here][21]][21]\r\n\r\n\r\n---------\r\n\r\n# *Vaadin*\r\n\r\nIf you were using Swing to build client-server apps, consider using the [*Vaadin Flow*][22] framework to build desktop-style apps delivered as a web app. \r\n\r\nYou write your app entirely in pure Java. At runtime the users’ state is maintained on the server in the [JVM][23] while the user-interface is remotely presented in a web browser using standard Web technologies through automatically generated HTML, CSS, and JavaScript. \r\n\r\n*Vaadin Flow* is open-source and free-of-cost. The Vaadin Ltd company sells training, support, and a few specialty add-ons. One such add-on is [*Swing Kit*][24] for gradually transitioning a Swing app to Vaadin Flow. \r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/JavaFX\r\n  [2]: https://en.wikipedia.org/wiki/Java_(software_platform)\r\n  [3]: https://en.wikipedia.org/wiki/Open_source\r\n  [4]: https://openjfx.io/\r\n  [5]: https://openjdk.java.net/projects/openjfx/\r\n  [6]: https://gluonhq.com/\r\n  [7]: https://en.wikipedia.org/wiki/Oracle_Corporation\r\n  [8]: https://en.wikipedia.org/wiki/Microsoft_Silverlight\r\n  [9]: https://en.wikipedia.org/wiki/Adobe_Flash\r\n  [10]: https://en.wikipedia.org/wiki/Swing_(Java)\r\n  [11]: https://en.wikipedia.org/wiki/Java_Platform%2C_Standard_Edition\r\n  [12]: https://en.wikipedia.org/wiki/Maintenance_mode\r\n  [13]: https://en.wikipedia.org/wiki/Azul_Systems\r\n  [14]: https://bell-sw.com/\r\n  [15]: https://en.wikipedia.org/wiki/Ahead-of-time_compilation\r\n  [16]: https://en.wikipedia.org/wiki/GraalVM\r\n  [17]: https://en.wikipedia.org/wiki/Java_Development_Kit\r\n  [18]: https://www.oracle.com/technetwork/java/javase/javaclientroadmapupdatev2020may-6548840.pdf\r\n  [19]: https://www.oracle.com/java/technologies/javafx/faq-javafx.html#6\r\n  [20]: https://wiki.openjdk.java.net/display/OpenJFX/Main\r\n  [21]: https://i.stack.imgur.com/iIxDY.png\r\n  [22]: https://en.wikipedia.org/wiki/Vaadin#Vaadin_Flow_(Java_API)\r\n  [23]: https://en.wikipedia.org/wiki/Java_virtual_machine\r\n  [24]: https://vaadin.com/docs/latest/tools/swing","title":"Is JavaFX complete replacement of Swing?","body":"<h1>tl;dr</h1>\n<p>Yes, JavaFX is the official replacement for Swing.</p>\n<ul>\n<li>Swing remains fully supported, but is in maintenance-mode.</li>\n<li>JavaFX is under continual development, with releases every six months.</li>\n</ul>\n<p>JavaFX was successfully open-sourced as <em>OpenJFX</em>. Co-led by Gluon and Oracle. Multiple companies offer support.</p>\n<p>JavaFX is stable, and has been used successfully for many desktop apps.</p>\n<h1>Update as of 2020</h1>\n<p><a href=\"https://en.wikipedia.org/wiki/JavaFX\" rel=\"nofollow noreferrer\">JavaFX</a> technology has been going quite well in the ensuing years after this Question was originally posted. <a href=\"https://en.wikipedia.org/wiki/Java_(software_platform)\" rel=\"nofollow noreferrer\">Java</a> is regularly released on its 6-month train schedule, and JavaFX releases have arrived at the same pace.</p>\n<p>Oracle Corp. has completed the process of making JavaFX <a href=\"https://en.wikipedia.org/wiki/Open_source\" rel=\"nofollow noreferrer\">open-source</a>, known as <a href=\"https://openjfx.io/\" rel=\"nofollow noreferrer\"><em>OpenJFX</em></a>. The codebase is now housed as a <a href=\"https://openjdk.java.net/projects/openjfx/\" rel=\"nofollow noreferrer\">sub-project on the OpenJDK</a> project. Leadership has been assigned to the <a href=\"https://gluonhq.com/\" rel=\"nofollow noreferrer\">Gluon</a> company, with <a href=\"https://en.wikipedia.org/wiki/Oracle_Corporation\" rel=\"nofollow noreferrer\">Oracle</a>’s continued support.</p>\n<p>The popularity and community seem to be growing. The competitors have fallen away, such as <a href=\"https://en.wikipedia.org/wiki/Microsoft_Silverlight\" rel=\"nofollow noreferrer\"><em>Microsoft Silverlight</em></a> and <a href=\"https://en.wikipedia.org/wiki/Adobe_Flash\" rel=\"nofollow noreferrer\"><em>Adobe Flash</em></a> both having died.</p>\n<p>Oracle continues to support <a href=\"https://en.wikipedia.org/wiki/Swing_(Java)\" rel=\"nofollow noreferrer\">Swing</a> as a required part of any <a href=\"https://en.wikipedia.org/wiki/Java_Platform%2C_Standard_Edition\" rel=\"nofollow noreferrer\">Java SE</a> implementation, but only in <a href=\"https://en.wikipedia.org/wiki/Maintenance_mode\" rel=\"nofollow noreferrer\">maintenance-mode</a>. JavaFX, in contrast, is under constant active development.</p>\n<p>Oracle sells support for JavaFX, as do other vendors such as Gluon and Azul Systems.</p>\n<p>Some vendors supplying Java implementations bundle the JavaFX/OpenJFX libraries with their JVMs. These include <a href=\"https://en.wikipedia.org/wiki/Azul_Systems\" rel=\"nofollow noreferrer\">Azul Systems</a> with their <em>ZuluFX</em> product, and <a href=\"https://bell-sw.com/\" rel=\"nofollow noreferrer\">BellSoft</a> with their <em>LibericaFX</em> product.</p>\n<p>Though cutting-edge presently, there is work being done to build a native apps for iOS and other platforms using OpenJFX with <a href=\"https://en.wikipedia.org/wiki/Ahead-of-time_compilation\" rel=\"nofollow noreferrer\">ahead-of-time compilation</a> using <a href=\"https://en.wikipedia.org/wiki/GraalVM\" rel=\"nofollow noreferrer\">GraalVM</a>.</p>\n<p>Delivering a JavaFX desktop app is often done by bundling a <a href=\"https://en.wikipedia.org/wiki/Java_Development_Kit\" rel=\"nofollow noreferrer\">JDK</a> inside. This produces a “double-clickable” app. Bundling a JDK is more easily done by modularizing your code with <a href=\"https://en.wikipedia.org/wiki/Java_Platform_Module_System\" rel=\"nofollow noreferrer\">JPMS</a>. By leveraging JPMS, a developer can make use of the <a href=\"https://openjdk.org/jeps/282\" rel=\"nofollow noreferrer\"><em>jlink</em></a> and <a href=\"https://openjdk.org/jeps/392\" rel=\"nofollow noreferrer\"><em>jpackage</em></a> tooling.</p>\n<p>See:</p>\n<ul>\n<li><a href=\"https://www.oracle.com/technetwork/java/javase/javaclientroadmapupdatev2020may-6548840.pdf\" rel=\"nofollow noreferrer\">Java Client Roadmap Update</a> by Oracle, 2020-05</li>\n<li><a href=\"https://www.oracle.com/java/technologies/javafx/faq-javafx.html#6\" rel=\"nofollow noreferrer\">JavaFX FAQ</a> by Oracle</li>\n<li><a href=\"https://openjfx.io/\" rel=\"nofollow noreferrer\">OpenJFX</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/JavaFX\" rel=\"nofollow noreferrer\">JavaFX</a> page on Wikipedia</li>\n<li>OpenJDK <a href=\"https://wiki.openjdk.java.net/display/OpenJFX/Main\" rel=\"nofollow noreferrer\">wiki page</a> for JavaFX</li>\n</ul>\n<hr />\n<p><a href=\"https://i.stack.imgur.com/iIxDY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iIxDY.png\" alt=\"enter image description here\" /></a></p>\n<hr />\n<h1><em>Vaadin</em></h1>\n<p>If you were using Swing to build client-server apps, consider using the <a href=\"https://en.wikipedia.org/wiki/Vaadin#Vaadin_Flow_(Java_API)\" rel=\"nofollow noreferrer\"><em>Vaadin Flow</em></a> framework to build desktop-style apps delivered as a web app.</p>\n<p>You write your app entirely in pure Java. At runtime the users’ state is maintained on the server in the <a href=\"https://en.wikipedia.org/wiki/Java_virtual_machine\" rel=\"nofollow noreferrer\">JVM</a> while the user-interface is remotely presented in a web browser using standard Web technologies through automatically generated HTML, CSS, and JavaScript.</p>\n<p><em>Vaadin Flow</em> is open-source and free-of-cost. The Vaadin Ltd company sells training, support, and a few specialty add-ons. One such add-on is <a href=\"https://vaadin.com/docs/latest/tools/swing\" rel=\"nofollow noreferrer\"><em>Swing Kit</em></a> for gradually transitioning a Swing app to Vaadin Flow.</p>\n"}],"owner":{"account_id":76906,"reputation":4579,"user_id":219865,"accept_rate":73,"display_name":"Ashish Pancholi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15893,"favorite_count":0,"down_vote_count":0,"up_vote_count":23,"accepted_answer_id":15363040,"answer_count":3,"score":23,"last_activity_date":1689796246,"creation_date":1363095451,"question_id":15362783,"body_markdown":"I had a Java Desktop Application in which graphical user interface had designed in swing. After we came to know that `JavaFX replacing Swing` We have replaced graphical user interface with JavaFX. \r\n\r\n&gt; &quot;6. Is JavaFX replacing Swing as the new client UI library for Java\r\n&gt; SE? Yes. However, Swing will remain part of the Java SE specification\r\n&gt; for the foreseeable future, and is included in the JRE. On one hand,\r\n&gt; Swing is widely used in existing Java desktop applications, but relies\r\n&gt; on an old architecture, which requires a certain level of expertise\r\n&gt; and specialization. On the other hand, JavaFX features a set of modern\r\n&gt; UI controls that can be skinned using standard CSS techniques. While\r\n&gt; we recommend developers to leverage JavaFX APIs as much as possible\r\n&gt; when building new applications, it is possible to use Swing and JavaFX\r\n&gt; within the same application, allowing developers to extend existing\r\n&gt; Swing applications.&quot;\r\n\r\nNow we heard that Oracle donate the JavaFX toolkit to the open source community and  OpenJDK Community had agreed to take it on.\r\n\r\n&gt; The JavaFX toolkit evolved from the F3 project at Sun. Initial\r\n&gt; releases were based around the JavaFX scripting language, however, in\r\n&gt; 2011 the toolkit was completely rewritten in Java and released by\r\n&gt; Oracle as JavaFX 2.0. In October 2011 Oracle announced that it would\r\n&gt; donate the JavaFX toolkit to the open source community and by November\r\n&gt; 2011 the OpenJDK Community had agreed to take it on.\r\n\r\nI do not think so JavaFX is stable. It has no quick support. Document are not enough explanatory. It does not release internal memory when stage is closed. My application is multithreaded application and most of time taken by my application in updating status of each individual thread. Self contained copy of JRE in native bundle does not reliable, we have to replaced it with JRE folder that resides into JDK. \r\n\r\nIt&#39;s really frustrating and I wonder, if JavaFX is fit to develop the Java Desktop application.  \r\n\r\n   ","title":"Is JavaFX complete replacement of Swing?","body":"<p>I had a Java Desktop Application in which graphical user interface had designed in swing. After we came to know that <code>JavaFX replacing Swing</code> We have replaced graphical user interface with JavaFX. </p>\n\n<blockquote>\n  <p>\"6. Is JavaFX replacing Swing as the new client UI library for Java\n  SE? Yes. However, Swing will remain part of the Java SE specification\n  for the foreseeable future, and is included in the JRE. On one hand,\n  Swing is widely used in existing Java desktop applications, but relies\n  on an old architecture, which requires a certain level of expertise\n  and specialization. On the other hand, JavaFX features a set of modern\n  UI controls that can be skinned using standard CSS techniques. While\n  we recommend developers to leverage JavaFX APIs as much as possible\n  when building new applications, it is possible to use Swing and JavaFX\n  within the same application, allowing developers to extend existing\n  Swing applications.\"</p>\n</blockquote>\n\n<p>Now we heard that Oracle donate the JavaFX toolkit to the open source community and  OpenJDK Community had agreed to take it on.</p>\n\n<blockquote>\n  <p>The JavaFX toolkit evolved from the F3 project at Sun. Initial\n  releases were based around the JavaFX scripting language, however, in\n  2011 the toolkit was completely rewritten in Java and released by\n  Oracle as JavaFX 2.0. In October 2011 Oracle announced that it would\n  donate the JavaFX toolkit to the open source community and by November\n  2011 the OpenJDK Community had agreed to take it on.</p>\n</blockquote>\n\n<p>I do not think so JavaFX is stable. It has no quick support. Document are not enough explanatory. It does not release internal memory when stage is closed. My application is multithreaded application and most of time taken by my application in updating status of each individual thread. Self contained copy of JRE in native bundle does not reliable, we have to replaced it with JRE folder that resides into JDK. </p>\n\n<p>It's really frustrating and I wonder, if JavaFX is fit to develop the Java Desktop application.  </p>\n"},{"tags":["java","arraylist","removeall"],"comments":[{"owner":{"account_id":15847779,"reputation":4627,"user_id":11434552,"display_name":"Nexevis"},"score":4,"creation_date":1570116837,"post_id":58222447,"comment_id":102820410,"body_markdown":"This is not a site for people to do your homework for you.  You have to attempt to write the code yourself first, and when you have issues with it you post your code (after you do research first) that is not working and we tell you what is wrong with it.","body":"This is not a site for people to do your homework for you.  You have to attempt to write the code yourself first, and when you have issues with it you post your code (after you do research first) that is not working and we tell you what is wrong with it."},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":2,"creation_date":1570119790,"post_id":58222447,"comment_id":102821827,"body_markdown":"`Arrays.stream(given_list).filter(i -&gt; i &lt;= 100).toArray()`","body":"<code>Arrays.stream(given_list).filter(i -&gt; i &lt;= 100).toArray()</code>"}],"answers":[{"tags":[],"owner":{"account_id":16158789,"reputation":21,"user_id":11665426,"display_name":"jay patel"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1570118959,"creation_date":1570118959,"answer_id":58223038,"question_id":58222447,"body_markdown":"```\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class DeleteFromList {\r\n\r\npublic static void main(String[] args) {\r\n   int[] given_list = {0,4,5,56,3, 2000,8,345, 453,}; \r\n   \r\n   //since there is no direct way to delete an element from the array we have to use something other than array, like a list.\r\n   List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();\r\n   \r\n   //this changes the whole array to list\r\n   for (int i : given_list){\r\n      list.add(i);\r\n   }\r\n   \r\n   //this iterates through the list and check each element if its greater then 100\r\n   for(int i=0;i&lt;list.size();i++){\r\n      if(list.get(i) &gt; 100){\r\n         list.remove(i);\r\n         i--;     // this is because everytime we delete an element, the next comes in place of it so we need to check new element.\r\n      }\r\n   }\r\n   \r\n   //print out the new list which has all the elements which are less than 100\r\n   System.out.println(list);\r\n\r\n   }\r\n}\r\n\r\n```\r\n&gt; Since there is no way to delete an element from an array, we have to change array to list and then operate on that list so we can delete elements as we want.","title":"remove all values greater than 100 from int array","body":"<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\npublic class DeleteFromList {\n\npublic static void main(String[] args) {\n   int[] given_list = {0,4,5,56,3, 2000,8,345, 453,}; \n\n   //since there is no direct way to delete an element from the array we have to use something other than array, like a list.\n   List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();\n\n   //this changes the whole array to list\n   for (int i : given_list){\n      list.add(i);\n   }\n\n   //this iterates through the list and check each element if its greater then 100\n   for(int i=0;i&lt;list.size();i++){\n      if(list.get(i) &gt; 100){\n         list.remove(i);\n         i--;     // this is because everytime we delete an element, the next comes in place of it so we need to check new element.\n      }\n   }\n\n   //print out the new list which has all the elements which are less than 100\n   System.out.println(list);\n\n   }\n}\n\n</code></pre>\n\n<blockquote>\n  <p>Since there is no way to delete an element from an array, we have to change array to list and then operate on that list so we can delete elements as we want.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":6798104,"reputation":66,"user_id":5232541,"display_name":"rupaj"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1570123878,"creation_date":1570123878,"answer_id":58224194,"question_id":58222447,"body_markdown":"Using Java 8 Stream API this can be achieved in a single line code:\r\n\r\nArrays.stream(given_list).filter(x -&gt; x&lt;100).toArray()\r\n\r\nAbove line of code creates a new array and does not modify the original array.","title":"remove all values greater than 100 from int array","body":"<p>Using Java 8 Stream API this can be achieved in a single line code:</p>\n\n<p>Arrays.stream(given_list).filter(x -> x&lt;100).toArray()</p>\n\n<p>Above line of code creates a new array and does not modify the original array.</p>\n"},{"tags":[],"owner":{"account_id":18493193,"reputation":11,"user_id":13479299,"display_name":"S&#225;ndor Rodr&#237;guez Prieto"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689796218,"creation_date":1689796218,"answer_id":76724767,"question_id":58222447,"body_markdown":"I show you the easiest way...\r\n\r\n    List&lt;Integer&gt; given_list  = new ArrayList&lt;&gt;(Arrays.asList(new Integer[] {0,4,5,56,3, 2000, 453}));\r\n    given_list.removeIf(element -&gt; element &gt; 100);\r\n    System.out.println(given_list);","title":"remove all values greater than 100 from int array","body":"<p>I show you the easiest way...</p>\n<pre><code>List&lt;Integer&gt; given_list  = new ArrayList&lt;&gt;(Arrays.asList(new Integer[] {0,4,5,56,3, 2000, 453}));\ngiven_list.removeIf(element -&gt; element &gt; 100);\nSystem.out.println(given_list);\n</code></pre>\n"}],"owner":{"account_id":16819210,"reputation":11,"user_id":12160128,"display_name":"Atif Mansor"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3163,"favorite_count":0,"down_vote_count":8,"up_vote_count":1,"answer_count":3,"score":-7,"last_activity_date":1689796218,"creation_date":1570116699,"question_id":58222447,"body_markdown":"Given a list of integers 1,2,3,etc. remove all values greater than 100? What will be the JAVA code for this?\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n\r\n    public class Main {\r\n\r\n    public static void main(String[] args) {\r\n        int[] given_list = {0,4,5,56,3, 2000, 453,};\r\n\r\n          \r\n        }\r\n    }","title":"remove all values greater than 100 from int array","body":"<p>Given a list of integers 1,2,3,etc. remove all values greater than 100? What will be the JAVA code for this?</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\npublic class Main {\n\npublic static void main(String[] args) {\n    int[] given_list = {0,4,5,56,3, 2000, 453,};\n\n\n    }\n}\n</code></pre>\n"},{"tags":["java","oracle","spring-boot","unit-testing","spring-data-jpa"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1689793374,"post_id":76724418,"comment_id":135265479,"body_markdown":"You could use an in-memory h2 database or a Oracle XE testcontainer.","body":"You could use an in-memory h2 database or a Oracle XE testcontainer."},{"owner":{"account_id":13039762,"reputation":294,"user_id":9423518,"display_name":"Black Bear"},"score":0,"creation_date":1689796683,"post_id":76724418,"comment_id":135266106,"body_markdown":"if the answer appears suitable, please mark it as an answer!","body":"if the answer appears suitable, please mark it as an answer!"}],"owner":{"account_id":16230122,"reputation":55,"user_id":11719149,"display_name":"Vinit Kumar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689796185,"creation_date":1689792671,"question_id":76724418,"body_markdown":"I am new to Spring Boot. I wrote a Spring Boot application and now I am trying to unit-test the repository classes. Currently, my application connects to an Oracle Database that has provided me with read operations only. I do not want to use the Oracle DB (Third party maintains the db and hence for even small permission, it takes a lot of time) as my test db either. Does Spring Boot provide any local Oracle db support for unit testing? \r\n\r\nNote:\r\nI thought of installing Oracle DB locally and connecting it to the Spring Boot application for unit testing. Unfortunately, the virtual box needed to install Oracle DB on Mac is not supported on my system. ","title":"Unit testing Spring Boot Repositories without test database","body":"<p>I am new to Spring Boot. I wrote a Spring Boot application and now I am trying to unit-test the repository classes. Currently, my application connects to an Oracle Database that has provided me with read operations only. I do not want to use the Oracle DB (Third party maintains the db and hence for even small permission, it takes a lot of time) as my test db either. Does Spring Boot provide any local Oracle db support for unit testing?</p>\n<p>Note:\nI thought of installing Oracle DB locally and connecting it to the Spring Boot application for unit testing. Unfortunately, the virtual box needed to install Oracle DB on Mac is not supported on my system.</p>\n"},{"tags":["java","assertion"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":2,"creation_date":1689794061,"post_id":76724540,"comment_id":135265611,"body_markdown":"Does `Contact` override methods `equals()` and `hashCode()`? If so: please [edit] the post and show the code. If not: override them accordingly.","body":"Does <code>Contact</code> override methods <code>equals()</code> and <code>hashCode()</code>? If so: please <a href=\"https://stackoverflow.com/posts/76724540/edit\">edit</a> the post and show the code. If not: override them accordingly."},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":2,"creation_date":1689794103,"post_id":76724540,"comment_id":135265620,"body_markdown":"Edit question to add definitions of `ContactManager` and `Contact`. If i had to make random guess, you did not override `hashCode()` and `equals()`.","body":"Edit question to add definitions of <code>ContactManager</code> and <code>Contact</code>. If i had to make random guess, you did not override <code>hashCode()</code> and <code>equals()</code>."}],"answers":[{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689796174,"creation_date":1689796174,"answer_id":76724763,"question_id":76724540,"body_markdown":"`contactManager.contains()` uses `equals()` to match the objects. You should define your custom `Contact.equals()` method to make this test pass.\r\n\r\nIn your current implementation the default `Object.equals()` is used. It match not the objects&#39; content, but objects&#39; references.","title":"How to fix this error? java.lang.AssertionError","body":"<p><code>contactManager.contains()</code> uses <code>equals()</code> to match the objects. You should define your custom <code>Contact.equals()</code> method to make this test pass.</p>\n<p>In your current implementation the default <code>Object.equals()</code> is used. It match not the objects' content, but objects' references.</p>\n"}],"owner":{"account_id":28673796,"reputation":5,"user_id":21956272,"display_name":"Margarita Kattsyna"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":437,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76724763,"answer_count":1,"score":0,"last_activity_date":1689796174,"creation_date":1689793910,"question_id":76724540,"body_markdown":"```\r\npackage test;\r\n\r\nimport models.ContactManager;\r\nimport models.Contact;\r\n\r\nimport static org.junit.Assert.*;\r\n\r\nimport java.text.ParseException;\r\n\r\nimport org.junit.Before;\r\nimport org.junit.Test;\r\n\r\npublic class ContactManagerTest {\r\n    ContactManager contactManager;\r\n\r\n    @Before\r\n    public void setup() throws ParseException {\r\n        contactManager = new ContactManager();\r\n        contactManager.addContact(new Contact(&quot;Rita&quot;, &quot;5556036071&quot;, &quot;6700 Lincoln Ave&quot;, &quot;Thumbtack&quot;, &quot;07/15/2023&quot; ));\r\n        contactManager.addContact(new Contact(&quot;Alex&quot;, &quot;3236063206&quot;, &quot;6700 Lincoln Ave&quot;, &quot;Thumbtack&quot;, &quot;09/15/2023&quot; ));\r\n    }\r\n    \r\n    @Test\r\n    public void contactAdded() throws ParseException {\r\n       assertTrue(contactManager.contains(new Contact(&quot;Rita&quot;, &quot;5556036071&quot;, &quot;6700 Lincoln Ave&quot;, &quot;Thumbtack&quot;, &quot;07/15/2023&quot;)));\r\n    }\r\n    \r\n}\r\n\r\n\r\n```\r\n\r\n\r\nTrying to do JUnit test and get the error:\r\njava.lang.AssertionError\r\nat test.ContactManagerTest.contactAdded(ContactManagerTest)\r\n\r\n\r\n\r\ntest contactAdded() ","title":"How to fix this error? java.lang.AssertionError","body":"<pre><code>package test;\n\nimport models.ContactManager;\nimport models.Contact;\n\nimport static org.junit.Assert.*;\n\nimport java.text.ParseException;\n\nimport org.junit.Before;\nimport org.junit.Test;\n\npublic class ContactManagerTest {\n    ContactManager contactManager;\n\n    @Before\n    public void setup() throws ParseException {\n        contactManager = new ContactManager();\n        contactManager.addContact(new Contact(&quot;Rita&quot;, &quot;5556036071&quot;, &quot;6700 Lincoln Ave&quot;, &quot;Thumbtack&quot;, &quot;07/15/2023&quot; ));\n        contactManager.addContact(new Contact(&quot;Alex&quot;, &quot;3236063206&quot;, &quot;6700 Lincoln Ave&quot;, &quot;Thumbtack&quot;, &quot;09/15/2023&quot; ));\n    }\n    \n    @Test\n    public void contactAdded() throws ParseException {\n       assertTrue(contactManager.contains(new Contact(&quot;Rita&quot;, &quot;5556036071&quot;, &quot;6700 Lincoln Ave&quot;, &quot;Thumbtack&quot;, &quot;07/15/2023&quot;)));\n    }\n    \n}\n\n\n</code></pre>\n<p>Trying to do JUnit test and get the error:\njava.lang.AssertionError\nat test.ContactManagerTest.contactAdded(ContactManagerTest)</p>\n<p>test contactAdded()</p>\n"},{"tags":["java","apache-camel"],"answers":[{"tags":[],"owner":{"account_id":176018,"reputation":56316,"user_id":406429,"display_name":"Claus Ibsen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689796025,"creation_date":1689796025,"answer_id":76724744,"question_id":76719318,"body_markdown":"You implement this interface in a class, and then depending on what runtime you use (spring boot, quarkus or something else) then that bean instance can either be auto created by those runtimes. And if not, you need to manually register the bean instance to Apache Camel.","title":"handle Apache camel&#39;s PredicateValidationException when using validate","body":"<p>You implement this interface in a class, and then depending on what runtime you use (spring boot, quarkus or something else) then that bean instance can either be auto created by those runtimes. And if not, you need to manually register the bean instance to Apache Camel.</p>\n"}],"owner":{"account_id":16291023,"reputation":79,"user_id":11764499,"display_name":"Eli m"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689796025,"creation_date":1689755302,"question_id":76719318,"body_markdown":"I&#39;m using springboot `camel-validator-starter` to validate the query param of the incoming request. The library is throwing `PredicateValidationException` with 500 as the status code. I want to handle this exception in such a way that it throws a proper custom exception. According to [camel validate document](https://camel.apache.org/components/3.20.x/eips/validate-eip.html) I can create a `PredicateExceptionFactory` bean to handle the exception. However, its unclear how create this bean and there is no example of that. would be highly appreciated if someone could help me with that.\r\n\r\nhere is the code:\r\n\r\n```\r\nrest(&quot;/&quot;).description(description)\r\n                .id(routeId)\r\n                .get(endpoint)\r\n                .produces(APPLICATION_JSON)\r\n                .consumes(APPLICATION_JSON)\r\n                .bindingMode(RestBindingMode.auto)\r\n                .type(responseClazz)\r\n                .enableCORS(true)\r\n                .route()\r\n                .onException(CustomValidationFailed.class)\r\n                .handled(true)\r\n                .setHeader(Exchange.HTTP_RESPONSE_CODE, constant(HttpStatus.SC_BAD_REQUEST))\r\n                .setBody(constant(&quot;offerId should be provided&quot;))\r\n                .end()\r\n                .validate(header(&quot;offerId&quot;).isNotNull())\r\n                .end()\r\n                .endRest()\r\n                .to(routeTechnicalId);\r\n```\r\n\r\nand here is the thrown exception:\r\n\r\n```\r\norg.apache.camel.support.processor.PredicateValidationException: Validation failed for Predicate[header(offerId) is not null]. Exchange[]\r\n\tat org.apache.camel.support.processor.PredicateValidatingProcessor.process(PredicateValidatingProcessor.java:70)\r\n\tat org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:66)\r\n\tat org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$RedeliveryTask.doRun(RedeliveryErrorHandler.java:812)\r\n\tat org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$RedeliveryTask.run(RedeliveryErrorHandler.java:720)\r\n\tat org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:187)\r\n\tat org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:64)\r\n\tat org.apache.camel.processor.Pipeline.process(Pipeline.java:184)\r\n\tat org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:399)\r\n\tat org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:83)\r\n\tat org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:41)\r\n\tat org.apache.camel.http.common.CamelServlet.doExecute(CamelServlet.java:319)\r\n\tat org.apache.camel.http.common.CamelServlet.doService(CamelServlet.java:214)\r\n\tat org.apache.camel.http.common.CamelServlet.service(CamelServlet.java:130)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)\r\n```","title":"handle Apache camel&#39;s PredicateValidationException when using validate","body":"<p>I'm using springboot <code>camel-validator-starter</code> to validate the query param of the incoming request. The library is throwing <code>PredicateValidationException</code> with 500 as the status code. I want to handle this exception in such a way that it throws a proper custom exception. According to <a href=\"https://camel.apache.org/components/3.20.x/eips/validate-eip.html\" rel=\"nofollow noreferrer\">camel validate document</a> I can create a <code>PredicateExceptionFactory</code> bean to handle the exception. However, its unclear how create this bean and there is no example of that. would be highly appreciated if someone could help me with that.</p>\n<p>here is the code:</p>\n<pre><code>rest(&quot;/&quot;).description(description)\n                .id(routeId)\n                .get(endpoint)\n                .produces(APPLICATION_JSON)\n                .consumes(APPLICATION_JSON)\n                .bindingMode(RestBindingMode.auto)\n                .type(responseClazz)\n                .enableCORS(true)\n                .route()\n                .onException(CustomValidationFailed.class)\n                .handled(true)\n                .setHeader(Exchange.HTTP_RESPONSE_CODE, constant(HttpStatus.SC_BAD_REQUEST))\n                .setBody(constant(&quot;offerId should be provided&quot;))\n                .end()\n                .validate(header(&quot;offerId&quot;).isNotNull())\n                .end()\n                .endRest()\n                .to(routeTechnicalId);\n</code></pre>\n<p>and here is the thrown exception:</p>\n<pre><code>org.apache.camel.support.processor.PredicateValidationException: Validation failed for Predicate[header(offerId) is not null]. Exchange[]\n    at org.apache.camel.support.processor.PredicateValidatingProcessor.process(PredicateValidatingProcessor.java:70)\n    at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:66)\n    at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$RedeliveryTask.doRun(RedeliveryErrorHandler.java:812)\n    at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$RedeliveryTask.run(RedeliveryErrorHandler.java:720)\n    at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:187)\n    at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:64)\n    at org.apache.camel.processor.Pipeline.process(Pipeline.java:184)\n    at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:399)\n    at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:83)\n    at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:41)\n    at org.apache.camel.http.common.CamelServlet.doExecute(CamelServlet.java:319)\n    at org.apache.camel.http.common.CamelServlet.doService(CamelServlet.java:214)\n    at org.apache.camel.http.common.CamelServlet.service(CamelServlet.java:130)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)\n</code></pre>\n"},{"tags":["java","eclipse","selenium-webdriver"],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689795995,"creation_date":1689795995,"answer_id":76724740,"question_id":76723830,"body_markdown":"This error message...\r\n\r\n\tStarting ChromeDriver 114.0.5735.90 (386bc09e8f4f2e025eddae123f36f6263096ae49-refs/branch-heads/5735@{#1052}) on port 23679\r\n\tOnly local connections are allowed.\r\n\tPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\r\n\t[1689787194.974][SEVERE]: listen() returned an error: An attempt was made to access a socket in a way forbidden by its access permissions. (0x271D)\r\n\t[1689787194.975][SEVERE]: bind() returned an error: An attempt was made to access a socket in a way forbidden by its access permissions. (0x271D)\r\n\tUnable to start server with either IPv4 or IPv6. Exiting...\r\n\tJul 19, 2023 10:50:14 PM org.openqa.selenium.os.OsProcess checkForError\r\n\tSEVERE: org.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)\r\n\tException in thread &quot;main&quot; org.openqa.selenium.WebDriverException: Timed out waiting for driver server to start.\r\n\tBuild info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:25:53&#39;\r\n\tSystem info: host: &#39;DESKTOP-6C9U84R&#39;, ip: &#39;192.168.174.1&#39;, os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;17.0.7&#39;\r\n\tDriver info: driver.version: ChromeDriver\r\n\r\n...implies that _WebDriverException_ was raised as the driver server process failed to start.\r\n\r\nThe most probhable reason is, [Selenium](https://stackoverflow.com/a/54482491/7429447) _**v3.141.59**_ is incompatible with recently released [ChromeDriver](https://stackoverflow.com/a/53744026/7429447) _**v114.0.5735.90**_\r\n\r\n\r\n----------\r\n\r\n\r\nSolution\r\n--------\r\nUpdate _Selenium_ version to recently released [_**Version 4.10.0**_](https://www.selenium.dev/downloads/) and execute your tests.","title":"Error while running a script with selenium in eclipse","body":"<p>This error message...</p>\n<pre><code>Starting ChromeDriver 114.0.5735.90 (386bc09e8f4f2e025eddae123f36f6263096ae49-refs/branch-heads/5735@{#1052}) on port 23679\nOnly local connections are allowed.\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\n[1689787194.974][SEVERE]: listen() returned an error: An attempt was made to access a socket in a way forbidden by its access permissions. (0x271D)\n[1689787194.975][SEVERE]: bind() returned an error: An attempt was made to access a socket in a way forbidden by its access permissions. (0x271D)\nUnable to start server with either IPv4 or IPv6. Exiting...\nJul 19, 2023 10:50:14 PM org.openqa.selenium.os.OsProcess checkForError\nSEVERE: org.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)\nException in thread &quot;main&quot; org.openqa.selenium.WebDriverException: Timed out waiting for driver server to start.\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:25:53'\nSystem info: host: 'DESKTOP-6C9U84R', ip: '192.168.174.1', os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '17.0.7'\nDriver info: driver.version: ChromeDriver\n</code></pre>\n<p>...implies that <em>WebDriverException</em> was raised as the driver server process failed to start.</p>\n<p>The most probhable reason is, <a href=\"https://stackoverflow.com/a/54482491/7429447\">Selenium</a> <em><strong>v3.141.59</strong></em> is incompatible with recently released <a href=\"https://stackoverflow.com/a/53744026/7429447\">ChromeDriver</a> <em><strong>v114.0.5735.90</strong></em></p>\n<hr />\n<h2>Solution</h2>\n<p>Update <em>Selenium</em> version to recently released <a href=\"https://www.selenium.dev/downloads/\" rel=\"nofollow noreferrer\"><em><strong>Version 4.10.0</strong></em></a> and execute your tests.</p>\n"}],"owner":{"account_id":29051193,"reputation":1,"user_id":22253986,"display_name":"Manasa Reddy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689795995,"creation_date":1689787527,"question_id":76723830,"body_markdown":"While running the script to open browsers facing error \r\n\r\nI tried all the possible ways, help me how to resolve this. Also help me in association selenium with eclipse\r\n```none\r\nStarting ChromeDriver 114.0.5735.90 (386bc09e8f4f2e025eddae123f36f6263096ae49-refs/branch-heads/5735@{#1052}) on port 23679\r\nOnly local connections are allowed.\r\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\r\n[1689787194.974][SEVERE]: listen() returned an error: An attempt was made to access a socket in a way forbidden by its access permissions. (0x271D)\r\n[1689787194.975][SEVERE]: bind() returned an error: An attempt was made to access a socket in a way forbidden by its access permissions. (0x271D)\r\nUnable to start server with either IPv4 or IPv6. Exiting...\r\nJul 19, 2023 10:50:14 PM org.openqa.selenium.os.OsProcess checkForError\r\nSEVERE: org.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)\r\nException in thread &quot;main&quot; org.openqa.selenium.WebDriverException: Timed out waiting for driver server to start.\r\nBuild info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:25:53&#39;\r\nSystem info: host: &#39;DESKTOP-6C9U84R&#39;, ip: &#39;192.168.174.1&#39;, os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;17.0.7&#39;\r\nDriver info: driver.version: ChromeDriver\r\n\tat org.openqa.selenium.remote.service.DriverService.waitUntilAvailable(DriverService.java:202)\r\n\tat org.openqa.selenium.remote.service.DriverService.start(DriverService.java:188)\r\n\tat org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:79)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:552)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:213)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:131)\r\n\tat org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:181)\r\n\tat org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:168)\r\n\tat org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:123)\r\n\tat as.Atleastnow.main(Atleastnow.java:10)\r\nCaused by: org.openqa.selenium.net.UrlChecker$TimeoutException: Timed out waiting for [http://localhost:23679/status] to be available after 20005 ms\r\n\tat org.openqa.selenium.net.UrlChecker.waitUntilAvailable(UrlChecker.java:100)\r\n\tat org.openqa.selenium.remote.service.DriverService.waitUntilAvailable(DriverService.java:197)\r\n\t... 9 more\r\nCaused by: java.util.concurrent.TimeoutException\r\n\tat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:204)\r\n\tat com.google.common.util.concurrent.SimpleTimeLimiter.callWithTimeout(SimpleTimeLimiter.java:156)\r\n\tat org.openqa.selenium.net.UrlChecker.waitUntilAvailable(UrlChecker.java:75)\r\n\t... 10 more\r\n```","title":"Error while running a script with selenium in eclipse","body":"<p>While running the script to open browsers facing error</p>\n<p>I tried all the possible ways, help me how to resolve this. Also help me in association selenium with eclipse</p>\n<pre class=\"lang-none prettyprint-override\"><code>Starting ChromeDriver 114.0.5735.90 (386bc09e8f4f2e025eddae123f36f6263096ae49-refs/branch-heads/5735@{#1052}) on port 23679\nOnly local connections are allowed.\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\n[1689787194.974][SEVERE]: listen() returned an error: An attempt was made to access a socket in a way forbidden by its access permissions. (0x271D)\n[1689787194.975][SEVERE]: bind() returned an error: An attempt was made to access a socket in a way forbidden by its access permissions. (0x271D)\nUnable to start server with either IPv4 or IPv6. Exiting...\nJul 19, 2023 10:50:14 PM org.openqa.selenium.os.OsProcess checkForError\nSEVERE: org.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)\nException in thread &quot;main&quot; org.openqa.selenium.WebDriverException: Timed out waiting for driver server to start.\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:25:53'\nSystem info: host: 'DESKTOP-6C9U84R', ip: '192.168.174.1', os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '17.0.7'\nDriver info: driver.version: ChromeDriver\n    at org.openqa.selenium.remote.service.DriverService.waitUntilAvailable(DriverService.java:202)\n    at org.openqa.selenium.remote.service.DriverService.start(DriverService.java:188)\n    at org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:79)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:552)\n    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:213)\n    at org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:131)\n    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:181)\n    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:168)\n    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:123)\n    at as.Atleastnow.main(Atleastnow.java:10)\nCaused by: org.openqa.selenium.net.UrlChecker$TimeoutException: Timed out waiting for [http://localhost:23679/status] to be available after 20005 ms\n    at org.openqa.selenium.net.UrlChecker.waitUntilAvailable(UrlChecker.java:100)\n    at org.openqa.selenium.remote.service.DriverService.waitUntilAvailable(DriverService.java:197)\n    ... 9 more\nCaused by: java.util.concurrent.TimeoutException\n    at java.base/java.util.concurrent.FutureTask.get(FutureTask.java:204)\n    at com.google.common.util.concurrent.SimpleTimeLimiter.callWithTimeout(SimpleTimeLimiter.java:156)\n    at org.openqa.selenium.net.UrlChecker.waitUntilAvailable(UrlChecker.java:75)\n    ... 10 more\n</code></pre>\n"},{"tags":["java","spring-boot","docker","spring-mvc","static"],"answers":[{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682680305,"creation_date":1682680305,"answer_id":76128994,"question_id":76127926,"body_markdown":"By default, Spring Boot only serves static content from inside the JAR file. From [Serve Static Resources with Spring][1]:\r\n\r\n&gt; By default, this handler serves static content from any of the\r\n&gt; /static, /public, /resources, and /META-INF/resources directories that\r\n&gt; are on the classpath.\r\n\r\nIn a Maven project, those directories (`static`, `public`, etc.) should be located in `src/main/resources`, e.g. `src/main/resources/static`.\r\n\r\nTo use an external folder, set the `spring.web.resources.static-locations` property as shown on the link I provided. In your case I think it would be `spring.web.resources.static-locations=classpath:/static,file:.`. That&#39;s very dangerous though, as it also makes your application itself downloadable. It&#39;s better to use a subdirectory for storing and retrieving files: `spring.web.resources.static-locations=classpath:/static,file:files/`.\r\n\r\n(Note that I also included `classpath:/static`. That&#39;s for serving any static content bundled into your application. You can omit or replace it as necessary.)\r\n\r\n----------\r\n\r\nHowever, the safest option is probably to add a separate endpoint for retrieving files. That gives you more control over what is and isn&#39;t downloadable.\r\n\r\n```\r\n    @GetMapping(&quot;{file}&quot;)\r\n    public ResponseEntity&lt;?&gt; downloadFile(@PathVariable(&quot;file&quot;) String fileName) throws IOException {\r\n        // Check that fileName does not contain any characters that allow escaping the directory\r\n        // Then, open the file and return its contents, content type, content length, etc.\r\n    }\r\n```\r\n\r\n  [1]: https://www.baeldung.com/spring-mvc-static-resources","title":"How to serve static files in Spring Boot after uploading with Docker?","body":"<p>By default, Spring Boot only serves static content from inside the JAR file. From <a href=\"https://www.baeldung.com/spring-mvc-static-resources\" rel=\"nofollow noreferrer\">Serve Static Resources with Spring</a>:</p>\n<blockquote>\n<p>By default, this handler serves static content from any of the\n/static, /public, /resources, and /META-INF/resources directories that\nare on the classpath.</p>\n</blockquote>\n<p>In a Maven project, those directories (<code>static</code>, <code>public</code>, etc.) should be located in <code>src/main/resources</code>, e.g. <code>src/main/resources/static</code>.</p>\n<p>To use an external folder, set the <code>spring.web.resources.static-locations</code> property as shown on the link I provided. In your case I think it would be <code>spring.web.resources.static-locations=classpath:/static,file:.</code>. That's very dangerous though, as it also makes your application itself downloadable. It's better to use a subdirectory for storing and retrieving files: <code>spring.web.resources.static-locations=classpath:/static,file:files/</code>.</p>\n<p>(Note that I also included <code>classpath:/static</code>. That's for serving any static content bundled into your application. You can omit or replace it as necessary.)</p>\n<hr />\n<p>However, the safest option is probably to add a separate endpoint for retrieving files. That gives you more control over what is and isn't downloadable.</p>\n<pre><code>    @GetMapping(&quot;{file}&quot;)\n    public ResponseEntity&lt;?&gt; downloadFile(@PathVariable(&quot;file&quot;) String fileName) throws IOException {\n        // Check that fileName does not contain any characters that allow escaping the directory\n        // Then, open the file and return its contents, content type, content length, etc.\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9308807,"reputation":194,"user_id":6911431,"display_name":"Fethullah Kaya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689795844,"creation_date":1689795844,"answer_id":76724732,"question_id":76127926,"body_markdown":"I had the same issue, and finally i solved it with just removing / form the folder name.\r\n&quot;file:/&quot;  it doesnt work.\r\nit should be like this &quot;file:&quot;\r\n\r\n    registry.addResourceHandler(pathPattern).addResourceLocations(&quot;file:&quot; + uploadPath + &quot;/&quot;); \r\n\r\n\r\n ","title":"How to serve static files in Spring Boot after uploading with Docker?","body":"<p>I had the same issue, and finally i solved it with just removing / form the folder name.\n&quot;file:/&quot;  it doesnt work.\nit should be like this &quot;file:&quot;</p>\n<pre><code>registry.addResourceHandler(pathPattern).addResourceLocations(&quot;file:&quot; + uploadPath + &quot;/&quot;); \n</code></pre>\n"}],"owner":{"account_id":24946865,"reputation":52,"user_id":18812096,"display_name":"Yuri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":605,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689795844,"creation_date":1682672351,"question_id":76127926,"body_markdown":"I dockerized my app and this controller perfectly saves my images locally on the disk.\r\n\r\nMy controller: Images save perfectly in **root directory**\r\n```java\r\n@Slf4j\r\n@RestController\r\n@RequestMapping(value = &quot;/api/v1/image&quot;)\r\npublic class ImageController {\r\n\r\n    @PostMapping\r\n    public ResponseEntity&lt;?&gt; uploadFile(@RequestParam(&quot;file&quot;) MultipartFile multipartFile) throws IOException {\r\n        File file = new File(UUID.randomUUID().toString() + &quot;.&quot; + multipartFile.getOriginalFilename());\r\n        // if file already exists will do nothing\r\n        file.createNewFile();\r\n        FileOutputStream fos = new FileOutputStream(file);\r\n        fos.write(multipartFile.getBytes());\r\n        fos.close();\r\n        return ResponseEntity.ok(file.toURI());\r\n    }\r\n}\r\n```\r\nInside my docker container:\r\n```\r\nroot@server:/APP/spring-app# docker exec -it 5e4 sh\r\n# ls\r\nc7fb1b0b-41f8-4265-a388-d0b5e09e563f.Снимок.JPG spring.jar\r\n# ^C\r\n#\r\n```\r\n[inside docker container][1]\r\n\r\n\r\n```\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;\r\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\r\n\r\n@Configuration\r\npublic class CustomWebMvcConfig implements WebMvcConfigurer {\r\n\r\n    @Override\r\n    public void addResourceHandlers(ResourceHandlerRegistry registry) {\r\n        registry.addResourceHandler(&quot;/img/**&quot;)\r\n                .addResourceLocations(&quot;file:/&quot;);\r\n    }\r\n}\r\n```\r\nBut when i try to get this image by link (https://api.*****.ru/img/c7fb1b0b-41f8...23432.JPG) i see this error:\r\n\r\n```\r\nWhitelabel Error Page\r\nThis application has no explicit mapping for /error, so you are seeing this as a fallback.\r\n\r\nFri Apr 28 09:07:15 UTC 2023\r\nThere was an unexpected error (type=Not Found, status=404).\r\n```\r\n\r\n[Error][2]\r\n\r\nMy Dockerfile: \r\n\r\n```\r\nFROM maven:3.6.0-jdk-13-alpine AS maven\r\n\r\nWORKDIR /app\r\nCOPY ./src ./src\r\nCOPY pom.xml .\r\n# Compile and package the application to an executable JAR\r\nRUN mvn package\r\n\r\n# For Java 11,\r\n#FROM adoptopenjdk/openjdk11\r\nFROM adoptopenjdk/openjdk11:x86_64-ubuntu-jre-11.0.18_10\r\n\r\nWORKDIR /opt/app\r\n\r\n# Copy the dining-room-spring.jar from the maven stage to the /opt/app directory of the current stage.\r\n# TODO How i can set name of the final .jar?\r\nCOPY --from=maven ./app/target/spring.jar .\r\nEXPOSE 8080\r\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;, &quot;spring.jar&quot;]\r\n```\r\n\r\nHow i can resolve my proble? I just want open this link (https://api.*****.ru/img/c7fb1b0b-41f8...23432.JPG) and see my image. thx for help!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zaban.png\r\n  [2]: https://i.stack.imgur.com/ujulz.png","title":"How to serve static files in Spring Boot after uploading with Docker?","body":"<p>I dockerized my app and this controller perfectly saves my images locally on the disk.</p>\n<p>My controller: Images save perfectly in <strong>root directory</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Slf4j\n@RestController\n@RequestMapping(value = &quot;/api/v1/image&quot;)\npublic class ImageController {\n\n    @PostMapping\n    public ResponseEntity&lt;?&gt; uploadFile(@RequestParam(&quot;file&quot;) MultipartFile multipartFile) throws IOException {\n        File file = new File(UUID.randomUUID().toString() + &quot;.&quot; + multipartFile.getOriginalFilename());\n        // if file already exists will do nothing\n        file.createNewFile();\n        FileOutputStream fos = new FileOutputStream(file);\n        fos.write(multipartFile.getBytes());\n        fos.close();\n        return ResponseEntity.ok(file.toURI());\n    }\n}\n</code></pre>\n<p>Inside my docker container:</p>\n<pre><code>root@server:/APP/spring-app# docker exec -it 5e4 sh\n# ls\nc7fb1b0b-41f8-4265-a388-d0b5e09e563f.Снимок.JPG spring.jar\n# ^C\n#\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/zaban.png\" rel=\"nofollow noreferrer\">inside docker container</a></p>\n<pre><code>import org.springframework.context.annotation.Configuration;\nimport org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\n\n@Configuration\npublic class CustomWebMvcConfig implements WebMvcConfigurer {\n\n    @Override\n    public void addResourceHandlers(ResourceHandlerRegistry registry) {\n        registry.addResourceHandler(&quot;/img/**&quot;)\n                .addResourceLocations(&quot;file:/&quot;);\n    }\n}\n</code></pre>\n<p>But when i try to get this image by link (https://api.*****.ru/img/c7fb1b0b-41f8...23432.JPG) i see this error:</p>\n<pre><code>Whitelabel Error Page\nThis application has no explicit mapping for /error, so you are seeing this as a fallback.\n\nFri Apr 28 09:07:15 UTC 2023\nThere was an unexpected error (type=Not Found, status=404).\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/ujulz.png\" rel=\"nofollow noreferrer\">Error</a></p>\n<p>My Dockerfile:</p>\n<pre><code>FROM maven:3.6.0-jdk-13-alpine AS maven\n\nWORKDIR /app\nCOPY ./src ./src\nCOPY pom.xml .\n# Compile and package the application to an executable JAR\nRUN mvn package\n\n# For Java 11,\n#FROM adoptopenjdk/openjdk11\nFROM adoptopenjdk/openjdk11:x86_64-ubuntu-jre-11.0.18_10\n\nWORKDIR /opt/app\n\n# Copy the dining-room-spring.jar from the maven stage to the /opt/app directory of the current stage.\n# TODO How i can set name of the final .jar?\nCOPY --from=maven ./app/target/spring.jar .\nEXPOSE 8080\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;, &quot;spring.jar&quot;]\n</code></pre>\n<p>How i can resolve my proble? I just want open this link (https://api.*****.ru/img/c7fb1b0b-41f8...23432.JPG) and see my image. thx for help!</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1689794367,"post_id":76724561,"comment_id":135265655,"body_markdown":"&quot;*Even more so, does it matter?*&quot; - Yes it does. We use injection to reduce friction. Ideally, we use injection at an SPI bondary: a module provides an SPI and uses some implementation of the SPI, so we should use interfaces in the classes of the module, so the module is not coupled to the SPI implementation module.","body":"&quot;<i>Even more so, does it matter?</i>&quot; - Yes it does. We use injection to reduce friction. Ideally, we use injection at an SPI bondary: a module provides an SPI and uses some implementation of the SPI, so we should use interfaces in the classes of the module, so the module is not coupled to the SPI implementation module."}],"answers":[{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689795767,"creation_date":1689795767,"answer_id":76724724,"question_id":76724561,"body_markdown":"I would suggest `5th` snippet. In this one you&#39;re free to use `RepositoryOne` or `RepositoryTow` or any other implementations that you probably create in the future.\r\n\r\n```java\r\npublic class SomeService&lt;T, K&gt; implements Repository&lt;T, K&gt; {\r\n\r\n    private final Repository&lt;T, K&gt; delegate;\r\n\r\n    public SomeService(Repository&lt;T, K&gt; delegate) {\r\n        this.delegate = delegate;\r\n    }\r\n\r\n    @Override\r\n    public T get(K id) {\r\n        return delegate.get(id);\r\n    }\r\n\r\n}\r\n```\r\n\r\nIn this case, client code will look like this:\r\n```java\r\nSomeService&lt;EntityOne, Long&gt; service1 = new SomeService&lt;&gt;(new RepositoryOne());\r\nSomeService&lt;EntityTwo, Long&gt; service2 = new SomeService&lt;&gt;(new RepositoryTwo());\r\n```","title":"Should construct parameters be abstract or concrete classes when injecting &lt;something&gt;","body":"<p>I would suggest <code>5th</code> snippet. In this one you're free to use <code>RepositoryOne</code> or <code>RepositoryTow</code> or any other implementations that you probably create in the future.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class SomeService&lt;T, K&gt; implements Repository&lt;T, K&gt; {\n\n    private final Repository&lt;T, K&gt; delegate;\n\n    public SomeService(Repository&lt;T, K&gt; delegate) {\n        this.delegate = delegate;\n    }\n\n    @Override\n    public T get(K id) {\n        return delegate.get(id);\n    }\n\n}\n</code></pre>\n<p>In this case, client code will look like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>SomeService&lt;EntityOne, Long&gt; service1 = new SomeService&lt;&gt;(new RepositoryOne());\nSomeService&lt;EntityTwo, Long&gt; service2 = new SomeService&lt;&gt;(new RepositoryTwo());\n</code></pre>\n"}],"owner":{"account_id":6022681,"reputation":3444,"user_id":4729332,"accept_rate":68,"display_name":"Andrei"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1689795767,"creation_date":1689794173,"question_id":76724561,"body_markdown":"You&#39;ll have to excuse my ignorance, I&#39;m very new to Java.\r\n\r\nLet&#39;s pretend I&#39;m trying to create a repository.  \r\nI have an interface such as this:\r\n\r\n    public interface Repository&lt;T, K&gt;{\r\n        T get(K id);\r\n        // some more methods\r\n    }\r\n\r\nAnd then a few concrete classes that implement this interface\r\n\r\n    public class RepositoryOne implements Repository&lt;EntityOne, Long&gt; {\r\n        // methods\r\n    }\r\n\r\n\r\n    public class RepositoryTwo implements Repository&lt;EntityTwo, Long&gt; {\r\n        // methods\r\n    }\r\n\r\nAnd then some service that uses one of the concrete repository interface implementations.\r\n\r\nMy question is: **what is the correct way to write this service?** Here are some examples, all valid from a syntax point of view.\r\n\r\n1st - concrete constructor parameter, concrete class member\r\n\r\n    public class SomeService{\r\n        private final RepositoryOne repositoryOne;\r\n    \r\n        public SomeService(RepositoryOne repositoryOne) {\r\n            this.repositoryOne = repositoryOne;\r\n        }\r\n    \r\n        // methods\r\n    }\r\n\r\n2nd - concrete constructor parameter, interface class member\r\n\r\n    public class SomeService{\r\n        private final Repository&lt;EntityOne, Long&gt; repositoryOne;\r\n    \r\n        public SomeService(RepositoryOne repositoryOne) {\r\n            this.repositoryOne = repositoryOne;\r\n        }\r\n    \r\n        // methods\r\n    }\r\n\r\n3rd - interface constructor parameter, interface class member\r\n\r\n    public class SomeService{\r\n        private final Repository&lt;EntityOne, Long&gt; repositoryOne;\r\n    \r\n        public SomeService(Repository&lt;EntityOne, Long&gt; repositoryOne) {\r\n            this.repositoryOne = repositoryOne;\r\n        }\r\n    \r\n        // methods\r\n    }\r\n\r\n\r\n\r\n4th - interface constructor parameter, concrete class member but cast the interface(this seems funky at best)\r\n\r\n    public class SomeService{\r\n        private final RepositoryOne repositoryOne;\r\n    \r\n        public SomeService(Repository&lt;EntityOne, Long&gt; repositoryOne) {\r\n            this.repositoryOne = (RepositoryOne) repositoryOne;\r\n        }\r\n    \r\n        // methods\r\n    }\r\n\r\n\r\nEven more so, does it matter?\r\n\r\nIf you could justify your answer with a &quot;why&quot; that would be awesome. I&#39;m trying to be better as a developer and understanding why is the first step.\r\n","title":"Should construct parameters be abstract or concrete classes when injecting &lt;something&gt;","body":"<p>You'll have to excuse my ignorance, I'm very new to Java.</p>\n<p>Let's pretend I'm trying to create a repository.<br />\nI have an interface such as this:</p>\n<pre><code>public interface Repository&lt;T, K&gt;{\n    T get(K id);\n    // some more methods\n}\n</code></pre>\n<p>And then a few concrete classes that implement this interface</p>\n<pre><code>public class RepositoryOne implements Repository&lt;EntityOne, Long&gt; {\n    // methods\n}\n\n\npublic class RepositoryTwo implements Repository&lt;EntityTwo, Long&gt; {\n    // methods\n}\n</code></pre>\n<p>And then some service that uses one of the concrete repository interface implementations.</p>\n<p>My question is: <strong>what is the correct way to write this service?</strong> Here are some examples, all valid from a syntax point of view.</p>\n<p>1st - concrete constructor parameter, concrete class member</p>\n<pre><code>public class SomeService{\n    private final RepositoryOne repositoryOne;\n\n    public SomeService(RepositoryOne repositoryOne) {\n        this.repositoryOne = repositoryOne;\n    }\n\n    // methods\n}\n</code></pre>\n<p>2nd - concrete constructor parameter, interface class member</p>\n<pre><code>public class SomeService{\n    private final Repository&lt;EntityOne, Long&gt; repositoryOne;\n\n    public SomeService(RepositoryOne repositoryOne) {\n        this.repositoryOne = repositoryOne;\n    }\n\n    // methods\n}\n</code></pre>\n<p>3rd - interface constructor parameter, interface class member</p>\n<pre><code>public class SomeService{\n    private final Repository&lt;EntityOne, Long&gt; repositoryOne;\n\n    public SomeService(Repository&lt;EntityOne, Long&gt; repositoryOne) {\n        this.repositoryOne = repositoryOne;\n    }\n\n    // methods\n}\n</code></pre>\n<p>4th - interface constructor parameter, concrete class member but cast the interface(this seems funky at best)</p>\n<pre><code>public class SomeService{\n    private final RepositoryOne repositoryOne;\n\n    public SomeService(Repository&lt;EntityOne, Long&gt; repositoryOne) {\n        this.repositoryOne = (RepositoryOne) repositoryOne;\n    }\n\n    // methods\n}\n</code></pre>\n<p>Even more so, does it matter?</p>\n<p>If you could justify your answer with a &quot;why&quot; that would be awesome. I'm trying to be better as a developer and understanding why is the first step.</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1689790380,"post_id":76724113,"comment_id":135264870,"body_markdown":"An int is 4 bytes. So create a byte array 4x the size of the list, then for each int, put the various bytes of the int (use bitshift operators).","body":"An int is 4 bytes. So create a byte array 4x the size of the list, then for each int, put the various bytes of the int (use bitshift operators)."}],"answers":[{"tags":[],"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689795751,"creation_date":1689791600,"answer_id":76724305,"question_id":76724113,"body_markdown":"You can make use of `ByteBuffer` to convert a collection of integers to a byte array.\r\n\r\n```java\r\nimport java.nio.ByteBuffer;\r\nimport java.util.Collection;\r\n\r\npublic class Foo {\r\n\r\n    public static byte[] toByteArray(Collection&lt;Integer&gt; ints) {\r\n        // an integer in Java is a 32-bit number (i.e., 4 bytes)\r\n        int capacity = Math.multiplyExact(ints.size(), 4);\r\n        ByteBuffer buffer = ByteBuffer.allocate(capacity);\r\n        ints.forEach(buffer::putInt);\r\n        return buffer.array();\r\n    }\r\n}\r\n```\r\n\r\n&lt;sup&gt;**Note:** The above `ByteBuffer` will be using the `BIG_ENDIAN` byte order. You can change that to `LITTLE_ENDIAN` if you need to.&lt;/sup&gt;\r\n\r\nThen, assuming you&#39;re using JDBC directly, you just need to make use of:\r\n\r\n* [`Connection#createBlob()`][1]\r\n* [`Blob#setBytes(long,byte[])`][2]\r\n* [`PreparedStatement#setBlob(int,Blob)`][3]\r\n\r\nNote there&#39;s also the [`PreparedStatement#setBlob(int,InputStream)`][4] method. Meaning you could create an `InputStream` that reads the bytes from your integers. This may have significant memory-use improvements depending on how large your integer collection is (and the JDBC driver implementation), as you don&#39;t have to allocate a byte buffer/array.\r\n\r\n```java\r\nimport java.io.InputStream;\r\nimport java.util.Iterator;\r\n\r\npublic class IntegerInputStream extends InputStream {\r\n\r\n    private final Iterator&lt;Integer&gt; ints;\r\n\r\n    private int currentInt;\r\n    private int byteIndex = -1;\r\n\r\n    public IntegerInputStream(Iterable&lt;Integer&gt; ints) {\r\n        this.ints = ints.iterator();\r\n    }\r\n\r\n    @Override\r\n    public int read() {\r\n        if (byteIndex == -1) {\r\n            if (ints.hasNext()) {\r\n                currentInt = ints.next();\r\n                byteIndex = 3;\r\n            } else {\r\n                return -1;\r\n            }\r\n        }\r\n        int next = (currentInt &gt;&gt; 8 * byteIndex) &amp; 0xFF;\r\n        byteIndex--;\r\n        return next;\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.sql/java/sql/Connection.html#createBlob()\r\n  [2]: https://docs.oracle.com/en/java/javase/20/docs/api/java.sql/java/sql/Blob.html#setBytes(long,byte%5B%5D)\r\n  [3]: https://docs.oracle.com/en/java/javase/20/docs/api/java.sql/java/sql/PreparedStatement.html#setBlob(int,java.sql.Blob)\r\n  [4]: https://docs.oracle.com/en/java/javase/20/docs/api/java.sql/java/sql/PreparedStatement.html#setBlob(int,java.io.InputStream)","title":"In Java - Convert ArrayList&lt;Integer&gt; to Byte Array then convert Byte Array to BLOB","body":"<p>You can make use of <code>ByteBuffer</code> to convert a collection of integers to a byte array.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.nio.ByteBuffer;\nimport java.util.Collection;\n\npublic class Foo {\n\n    public static byte[] toByteArray(Collection&lt;Integer&gt; ints) {\n        // an integer in Java is a 32-bit number (i.e., 4 bytes)\n        int capacity = Math.multiplyExact(ints.size(), 4);\n        ByteBuffer buffer = ByteBuffer.allocate(capacity);\n        ints.forEach(buffer::putInt);\n        return buffer.array();\n    }\n}\n</code></pre>\n<p><sup><strong>Note:</strong> The above <code>ByteBuffer</code> will be using the <code>BIG_ENDIAN</code> byte order. You can change that to <code>LITTLE_ENDIAN</code> if you need to.</sup></p>\n<p>Then, assuming you're using JDBC directly, you just need to make use of:</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.sql/java/sql/Connection.html#createBlob()\" rel=\"nofollow noreferrer\"><code>Connection#createBlob()</code></a></li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.sql/java/sql/Blob.html#setBytes(long,byte%5B%5D)\" rel=\"nofollow noreferrer\"><code>Blob#setBytes(long,byte[])</code></a></li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.sql/java/sql/PreparedStatement.html#setBlob(int,java.sql.Blob)\" rel=\"nofollow noreferrer\"><code>PreparedStatement#setBlob(int,Blob)</code></a></li>\n</ul>\n<p>Note there's also the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.sql/java/sql/PreparedStatement.html#setBlob(int,java.io.InputStream)\" rel=\"nofollow noreferrer\"><code>PreparedStatement#setBlob(int,InputStream)</code></a> method. Meaning you could create an <code>InputStream</code> that reads the bytes from your integers. This may have significant memory-use improvements depending on how large your integer collection is (and the JDBC driver implementation), as you don't have to allocate a byte buffer/array.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.InputStream;\nimport java.util.Iterator;\n\npublic class IntegerInputStream extends InputStream {\n\n    private final Iterator&lt;Integer&gt; ints;\n\n    private int currentInt;\n    private int byteIndex = -1;\n\n    public IntegerInputStream(Iterable&lt;Integer&gt; ints) {\n        this.ints = ints.iterator();\n    }\n\n    @Override\n    public int read() {\n        if (byteIndex == -1) {\n            if (ints.hasNext()) {\n                currentInt = ints.next();\n                byteIndex = 3;\n            } else {\n                return -1;\n            }\n        }\n        int next = (currentInt &gt;&gt; 8 * byteIndex) &amp; 0xFF;\n        byteIndex--;\n        return next;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689794034,"creation_date":1689794034,"answer_id":76724551,"question_id":76724113,"body_markdown":"Standard java serizlizations works fine in this case:\r\n```java\r\npublic static void main(String... args) throws IOException, ClassNotFoundException {\r\n    List&lt;Integer&gt; numbers = IntStream.range(0, 100).boxed().collect(Collectors.toList());\r\n    byte[] buf = serialize(numbers);\r\n    List&lt;Integer&gt; res = deserialize(buf);\r\n}\r\n\r\npublic static byte[] serialize(List&lt;Integer&gt; numbers) throws IOException {\r\n    try (ByteArrayOutputStream out = new ByteArrayOutputStream();\r\n         ObjectOutputStream oos = new ObjectOutputStream(out)) {\r\n        oos.writeObject(numbers);\r\n        return out.toByteArray();\r\n    }\r\n}\r\n\r\npublic static List&lt;Integer&gt; deserialize(byte[] buf) throws IOException, ClassNotFoundException {\r\n    try (ByteArrayInputStream bais = new ByteArrayInputStream(buf);\r\n         ObjectInputStream in = new ObjectInputStream(bais)) {\r\n        return (List&lt;Integer&gt;) in.readObject();\r\n    }\r\n}\r\n```","title":"In Java - Convert ArrayList&lt;Integer&gt; to Byte Array then convert Byte Array to BLOB","body":"<p>Standard java serizlizations works fine in this case:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String... args) throws IOException, ClassNotFoundException {\n    List&lt;Integer&gt; numbers = IntStream.range(0, 100).boxed().collect(Collectors.toList());\n    byte[] buf = serialize(numbers);\n    List&lt;Integer&gt; res = deserialize(buf);\n}\n\npublic static byte[] serialize(List&lt;Integer&gt; numbers) throws IOException {\n    try (ByteArrayOutputStream out = new ByteArrayOutputStream();\n         ObjectOutputStream oos = new ObjectOutputStream(out)) {\n        oos.writeObject(numbers);\n        return out.toByteArray();\n    }\n}\n\npublic static List&lt;Integer&gt; deserialize(byte[] buf) throws IOException, ClassNotFoundException {\n    try (ByteArrayInputStream bais = new ByteArrayInputStream(buf);\n         ObjectInputStream in = new ObjectInputStream(bais)) {\n        return (List&lt;Integer&gt;) in.readObject();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":353536,"reputation":678,"user_id":3923629,"accept_rate":75,"display_name":"Palu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689795751,"creation_date":1689790070,"question_id":76724113,"body_markdown":"I have climate data such as moisture, pressure, temp etc ... that are daily values, and need to do calculations over a month, and many different months.\r\nThis leads to data that is either DOUBLE or INTEGER data that are put into Arraylists.\r\n\r\nI want to be able to convert this ArrayList to a Byte Array, then compress this\r\nto a Binary BLOB, and store in a database in a BLOB field.\r\nI knew someone before that did this in python was able to convert Array to ByteArray and then \r\nput into database BLOB field.\r\n\r\nI have seen some links here, but it is not exactly the same.\r\nIt is really confusing the different ways to do this.\r\nFor example here from this link, they encode to base64.\r\nhttps://stackoverflow.com/questions/44059116/how-to-convert-int-array-to-base64-string-in-java\r\n\r\nHope someone can provide guidance into this area.\r\n\r\nP.","title":"In Java - Convert ArrayList&lt;Integer&gt; to Byte Array then convert Byte Array to BLOB","body":"<p>I have climate data such as moisture, pressure, temp etc ... that are daily values, and need to do calculations over a month, and many different months.\nThis leads to data that is either DOUBLE or INTEGER data that are put into Arraylists.</p>\n<p>I want to be able to convert this ArrayList to a Byte Array, then compress this\nto a Binary BLOB, and store in a database in a BLOB field.\nI knew someone before that did this in python was able to convert Array to ByteArray and then\nput into database BLOB field.</p>\n<p>I have seen some links here, but it is not exactly the same.\nIt is really confusing the different ways to do this.\nFor example here from this link, they encode to base64.\n<a href=\"https://stackoverflow.com/questions/44059116/how-to-convert-int-array-to-base64-string-in-java\">How to convert int array to base64 string in Java?</a></p>\n<p>Hope someone can provide guidance into this area.</p>\n<p>P.</p>\n"},{"tags":["java","jsoup"],"answers":[{"tags":[],"owner":{"account_id":4181404,"reputation":6036,"user_id":3426328,"accept_rate":83,"display_name":"TDG"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689779317,"creation_date":1689779317,"answer_id":76722741,"question_id":76721762,"body_markdown":"Probably all the special characters (@/+) causing parsing problem in your selctor.  \r\nIf you look at the desired text, it belongs to a div that starts with &quot;qa-story-body&quot;, so the first step will be to fetch this div simply by using `div.qa-story-body`, but this div also includes some redundent text which can be found in the `ul` at the bottom of it. Luckily, all the paragraphs that you want start with the `p` tag, so you can use the selector `div.qa-story-body &gt; p` to get only the text of the article.  \r\nFull code:  \r\n\r\n    String url = &quot;https://www.bbc.com/sport/football/66241967&quot;;\r\n\tDocument doc = Jsoup.connect(url).get();\r\n\tElements spans = doc.select(&quot;div.qa-story-body &gt; p&quot;);\r\n\tfor (Element sp : spans) {\r\n\t\tSystem.out.println(sp.text());\r\n\t}","title":"Java JSoup: Could not parse query ... unexpected token at /","body":"<p>Probably all the special characters (@/+) causing parsing problem in your selctor.<br />\nIf you look at the desired text, it belongs to a div that starts with &quot;qa-story-body&quot;, so the first step will be to fetch this div simply by using <code>div.qa-story-body</code>, but this div also includes some redundent text which can be found in the <code>ul</code> at the bottom of it. Luckily, all the paragraphs that you want start with the <code>p</code> tag, so you can use the selector <code>div.qa-story-body &gt; p</code> to get only the text of the article.<br />\nFull code:</p>\n<pre><code>String url = &quot;https://www.bbc.com/sport/football/66241967&quot;;\nDocument doc = Jsoup.connect(url).get();\nElements spans = doc.select(&quot;div.qa-story-body &gt; p&quot;);\nfor (Element sp : spans) {\n    System.out.println(sp.text());\n}\n</code></pre>\n"}],"owner":{"account_id":25506622,"reputation":45,"user_id":19298991,"display_name":"Robbie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1689795718,"creation_date":1689772801,"question_id":76721762,"body_markdown":"I&#39;m learning jsoup using a news article about football (https://www.bbc.com/sport/football/66241967).\r\n\r\nMy goal is to extract the text body of the news article.\r\n\r\nSince the text body of the article seems to sit within multiple spans of a div class called `qa-story-body story-body gel-pica gel-10/12@m gel-7/8@l gs-u-ml0@l gs-u-pb++`, I want to extract all spans within that div class. \r\n\r\n[![enter image description here][1]][1]\r\n\r\nThe problem is that instead of my expected output I get an error (see code below). \r\n\r\nWhy can&#39;t the query be parsed? \r\n \r\n\r\n    import java.io.IOException;\r\n    import org.jsoup.Jsoup;  \r\n    import org.jsoup.nodes.Document;  \r\n    import org.jsoup.nodes.Element;  \r\n    import org.jsoup.select.Elements;\r\n\r\n\r\n    public class Footballnews{\r\n\r\n\t    public static void main(String[] args) throws IOException {\r\n\t\t\r\n\t\t    Document document = Jsoup.connect(&quot;https://www.bbc.com/sport/football/66244696&quot;).get();\t\r\n\t\t    Elements spans = document.select(&quot;div.qa-story-body.story-body.gel-pica.gel-10/12@m.gel-7/8@l.gs-u-ml0@l.gs-u-pb++ span&quot;);\r\n\t\t    for (Element span: spans) {\r\n\t\t\t    System.out.println(span.text());\r\n\t\t    }  \r\n\t    }\r\n    }\r\n\r\nI get this:\r\n\r\n&gt; Exception in thread &quot;main&quot; org.jsoup.select.Selector$SelectorParseException: \r\n    Could not parse query &#39;div.qa-story-body.story-body.gel-pica.gel-10/12@m.gel-7/8@l.gs-u-ml0@l.gs-u-pb++ span&#39;: \r\n    unexpected token at &#39;/12@m.gel-7/8@l.gs-u-ml0@l.gs-u-pb++ span&#39;\r\n\r\n\r\nI expected the text:\r\n\r\n&gt; Brazilian civil servants can report to work up to four hours late - two hours after the end of matches - when the national side play in the 2023 Women&#39;s World Cup. The competition gets under way on Thursday in Australia and New Zealand. Brazil play their opening game on Monday against Panama in Adelaide.....\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/coCIL.jpg","title":"Java JSoup: Could not parse query ... unexpected token at /","body":"<p>I'm learning jsoup using a news article about football (<a href=\"https://www.bbc.com/sport/football/66241967\" rel=\"nofollow noreferrer\">https://www.bbc.com/sport/football/66241967</a>).</p>\n<p>My goal is to extract the text body of the news article.</p>\n<p>Since the text body of the article seems to sit within multiple spans of a div class called <code>qa-story-body story-body gel-pica gel-10/12@m gel-7/8@l gs-u-ml0@l gs-u-pb++</code>, I want to extract all spans within that div class.</p>\n<p><a href=\"https://i.stack.imgur.com/coCIL.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/coCIL.jpg\" alt=\"enter image description here\" /></a></p>\n<p>The problem is that instead of my expected output I get an error (see code below).</p>\n<p>Why can't the query be parsed?</p>\n<pre><code>import java.io.IOException;\nimport org.jsoup.Jsoup;  \nimport org.jsoup.nodes.Document;  \nimport org.jsoup.nodes.Element;  \nimport org.jsoup.select.Elements;\n\n\npublic class Footballnews{\n\n    public static void main(String[] args) throws IOException {\n    \n        Document document = Jsoup.connect(&quot;https://www.bbc.com/sport/football/66244696&quot;).get(); \n        Elements spans = document.select(&quot;div.qa-story-body.story-body.gel-pica.gel-10/12@m.gel-7/8@l.gs-u-ml0@l.gs-u-pb++ span&quot;);\n        for (Element span: spans) {\n            System.out.println(span.text());\n        }  \n    }\n}\n</code></pre>\n<p>I get this:</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; org.jsoup.select.Selector$SelectorParseException:\nCould not parse query 'div.qa-story-body.story-body.gel-pica.gel-10/12@m.gel-7/8@l.gs-u-ml0@l.gs-u-pb++ span':\nunexpected token at '/12@m.gel-7/8@l.gs-u-ml0@l.gs-u-pb++ span'</p>\n</blockquote>\n<p>I expected the text:</p>\n<blockquote>\n<p>Brazilian civil servants can report to work up to four hours late - two hours after the end of matches - when the national side play in the 2023 Women's World Cup. The competition gets under way on Thursday in Australia and New Zealand. Brazil play their opening game on Monday against Panama in Adelaide.....</p>\n</blockquote>\n"},{"tags":["java","matrix","linear-algebra"],"answers":[{"tags":[],"owner":{"account_id":470213,"reputation":9154,"user_id":877279,"accept_rate":41,"display_name":"Tyler Sebastian"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1389850815,"creation_date":1389850815,"answer_id":21154140,"question_id":21153823,"body_markdown":"Frankly, I&#39;m a bit of an idiot. \r\n\r\nThe matrix I&#39;m using for testing is `{{8, 3, 5}, {5, 6, 6}, {1, 7, 6}}` but the value I&#39;m checking on Wolfram is `{{8, 5, 1}, {3, 6, 7}, {5, 6, 6}}`...","title":"Determining Cofactor Matrix in Java","body":"<p>Frankly, I'm a bit of an idiot. </p>\n\n<p>The matrix I'm using for testing is <code>{{8, 3, 5}, {5, 6, 6}, {1, 7, 6}}</code> but the value I'm checking on Wolfram is <code>{{8, 5, 1}, {3, 6, 7}, {5, 6, 6}}</code>...</p>\n"},{"tags":[],"owner":{"account_id":20405827,"reputation":11,"user_id":14970410,"display_name":"Jacob Lee"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689795691,"creation_date":1689515491,"answer_id":76698604,"question_id":21153823,"body_markdown":"Your `cofactor()` function gives the adjoint value not cofactor. It&#39;s because in  \r\n```\r\nresult.matrix[j][i] = \r\n```\r\nyou swap the `j` and `i`.","title":"Determining Cofactor Matrix in Java","body":"<p>Your <code>cofactor()</code> function gives the adjoint value not cofactor. It's because in</p>\n<pre><code>result.matrix[j][i] = \n</code></pre>\n<p>you swap the <code>j</code> and <code>i</code>.</p>\n"}],"owner":{"account_id":470213,"reputation":9154,"user_id":877279,"accept_rate":41,"display_name":"Tyler Sebastian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5094,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1689795691,"creation_date":1389849160,"question_id":21153823,"body_markdown":"I&#39;m trying to determine a cofactor matrix. My code is correctly generating all the cofactors; however, in some cases, the resulting matrix is rotated by 90 degrees (well, the cols/rows are switched). \r\n\r\nFor example, the matrix: [{{8, 5, 1}, {3, 6, 7}, {5, 6, 6}}][1] produced the correct result.\r\n\r\noutput &gt;\r\n\r\n    a\r\n    8 3 5 \r\n    5 6 6 \r\n    1 7 6 \r\n    \r\n    a\r\n    -6 17 -12 \r\n    -24 43 -23 \r\n    29 -53 33 \r\n\r\nhowever, the matrix: [{{1, 0, 5}, {9, 3, 0}, {0, 9, 3}}][2] switches rows and columns. \r\n\r\noutput &gt; \r\n\r\n    b\r\n    1 0 5 \r\n    9 3 0 \r\n    0 9 3 \r\n    \r\n    b\r\n    9 45 -15 \r\n    -27 3 45 \r\n    81 -9 3 \r\n\r\nthe correct result is:\r\n\r\n    9 -27 81\r\n    45 3 -9\r\n    -15 45 3\r\n\r\nThe matrices are stored thusly: \r\n\r\n    Matrix:\r\n        int matrix[][]\r\n        int rows\r\n        int cols\r\n\r\nrows and cols are really necessary, but it&#39;s nicer than using matrix.length every time I&#39;m trying to determine how many values I&#39;m working with. \r\n\r\nhere is the code that generates these matrices: \r\n\r\n    public Matrix cofactor() {\r\n\t\tMatrix result = new Matrix(this.rows, this.cols);\r\n\t\tfor (int i = 0; i &lt; result.rows; i++) {\r\n\t\t\tfor (int j = 0; j &lt; result.cols; j++) {\r\n\t\t\t\tresult.matrix[j][i] = (int)(Math.pow(-1, i + j) * removeRowCol(i, j).determinant());\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tpublic Matrix removeRowCol(int row, int col) {\r\n\t\tMatrix result = new Matrix(this.rows - 1, this.cols - 1);\r\n\r\n\t\tint k = 0, l = 0;\r\n\t\tfor (int i = 0; i &lt; this.rows; i++) {\r\n\t\t\tif (i == row) continue;\r\n\t\t\tfor (int j = 0; j &lt; this.cols; j++) {\r\n\t\t\t\tif (j == col) continue;\r\n\t\t\t\tresult.matrix[l][k] = this.matrix[i][j];\r\n\r\n\t\t\t\tk = (k + 1) % (this.rows - 1);\r\n\t\t\t\tif (k == 0) l++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\nthe determinant part is a bit of a hack, now, but it works for 3x3 and 2x2 matrices. \r\n\r\n    public int determinant() {\r\n\t\tif (this.rows == 2) return this.matrix[0][0] * this.matrix[1][1] - this.matrix[0][1] * this.matrix[1][0];\r\n\r\n\t\tint determinant1 = 0, determinant2 = 0;\r\n\t\tfor (int i = 0; i &lt; this.rows; i++) {\r\n\t\t\tint temp = 1, temp2 = 1;\r\n\t\t\tfor (int j = 0; j &lt; this.cols; j++) {\r\n\t\t\t\ttemp *= this.matrix[(i + j) % this.cols][j];\r\n\t\t\t\ttemp2 *= this.matrix[(i + j) % this.cols][this.rows - 1 - j];\r\n\t\t\t}\r\n\t\t\r\n\t\t\tdeterminant1 += temp; \r\n\t\t\tdeterminant2 += temp2;\r\n\t\t}\r\n\r\n\t\treturn determinant1 - determinant2;\r\n\t}\r\n\r\nAnyways, I&#39;m stuck trying to figure out why only certain matrices are &quot;rotated.&quot;\r\n\r\n\r\n  [1]: http://www.wolframalpha.com/input/?i=cofactor%20%7B%7B8,%205,%201%7D,%20%7B3,%206,%207%7D,%20%7B5,%206,%206%7D%7D\r\n  [2]: http://www.wolframalpha.com/input/?i=%7B%7B1,%200,%205%7D,%20%7B9,%203,%200%7D,%20%7B0,%209,%203%7D%7D%20cofactor","title":"Determining Cofactor Matrix in Java","body":"<p>I'm trying to determine a cofactor matrix. My code is correctly generating all the cofactors; however, in some cases, the resulting matrix is rotated by 90 degrees (well, the cols/rows are switched). </p>\n\n<p>For example, the matrix: <a href=\"http://www.wolframalpha.com/input/?i=cofactor%20%7B%7B8,%205,%201%7D,%20%7B3,%206,%207%7D,%20%7B5,%206,%206%7D%7D\" rel=\"nofollow\">{{8, 5, 1}, {3, 6, 7}, {5, 6, 6}}</a> produced the correct result.</p>\n\n<p>output ></p>\n\n<pre><code>a\n8 3 5 \n5 6 6 \n1 7 6 \n\na\n-6 17 -12 \n-24 43 -23 \n29 -53 33 \n</code></pre>\n\n<p>however, the matrix: <a href=\"http://www.wolframalpha.com/input/?i=%7B%7B1,%200,%205%7D,%20%7B9,%203,%200%7D,%20%7B0,%209,%203%7D%7D%20cofactor\" rel=\"nofollow\">{{1, 0, 5}, {9, 3, 0}, {0, 9, 3}}</a> switches rows and columns. </p>\n\n<p>output > </p>\n\n<pre><code>b\n1 0 5 \n9 3 0 \n0 9 3 \n\nb\n9 45 -15 \n-27 3 45 \n81 -9 3 \n</code></pre>\n\n<p>the correct result is:</p>\n\n<pre><code>9 -27 81\n45 3 -9\n-15 45 3\n</code></pre>\n\n<p>The matrices are stored thusly: </p>\n\n<pre><code>Matrix:\n    int matrix[][]\n    int rows\n    int cols\n</code></pre>\n\n<p>rows and cols are really necessary, but it's nicer than using matrix.length every time I'm trying to determine how many values I'm working with. </p>\n\n<p>here is the code that generates these matrices: </p>\n\n<pre><code>public Matrix cofactor() {\n    Matrix result = new Matrix(this.rows, this.cols);\n    for (int i = 0; i &lt; result.rows; i++) {\n        for (int j = 0; j &lt; result.cols; j++) {\n            result.matrix[j][i] = (int)(Math.pow(-1, i + j) * removeRowCol(i, j).determinant());\n        }\n    }\n\n    return result;\n}\n\npublic Matrix removeRowCol(int row, int col) {\n    Matrix result = new Matrix(this.rows - 1, this.cols - 1);\n\n    int k = 0, l = 0;\n    for (int i = 0; i &lt; this.rows; i++) {\n        if (i == row) continue;\n        for (int j = 0; j &lt; this.cols; j++) {\n            if (j == col) continue;\n            result.matrix[l][k] = this.matrix[i][j];\n\n            k = (k + 1) % (this.rows - 1);\n            if (k == 0) l++;\n        }\n    }\n\n    return result;\n}\n</code></pre>\n\n<p>the determinant part is a bit of a hack, now, but it works for 3x3 and 2x2 matrices. </p>\n\n<pre><code>public int determinant() {\n    if (this.rows == 2) return this.matrix[0][0] * this.matrix[1][1] - this.matrix[0][1] * this.matrix[1][0];\n\n    int determinant1 = 0, determinant2 = 0;\n    for (int i = 0; i &lt; this.rows; i++) {\n        int temp = 1, temp2 = 1;\n        for (int j = 0; j &lt; this.cols; j++) {\n            temp *= this.matrix[(i + j) % this.cols][j];\n            temp2 *= this.matrix[(i + j) % this.cols][this.rows - 1 - j];\n        }\n\n        determinant1 += temp; \n        determinant2 += temp2;\n    }\n\n    return determinant1 - determinant2;\n}\n</code></pre>\n\n<p>Anyways, I'm stuck trying to figure out why only certain matrices are \"rotated.\"</p>\n"},{"tags":["java","sql","spring","spring-boot","repository"],"owner":{"account_id":26225274,"reputation":1,"user_id":19902050,"display_name":"Kesavan Balakrishnan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689795650,"creation_date":1689759474,"question_id":76719894,"body_markdown":"I was trying to query the table which returns an empty value in DB. And after I am setting it in List but while checking the list it was not empty. Why it was not empty or null? But DB returns empty only for the query.\r\n\r\nExample:\r\nList&lt;String&gt; keyLook = Repository.getTypeFromTable(key);\r\nRepository query is\r\n  @Query(value = &quot;SELECT TYPE FROM KEY_LOOK WHERE KEY IN (:KEY)&quot;, nativeQuery = true)\r\n\r\nWhile query in DB, returns as attached image. But while checking keyLook list it is not empty. Due to this, it is skipping null or empty check in Java, and the loop move inside implementations. what is the cause of this issue?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vUr3B.jpg","title":"Sql query returns empty value, but in list have some values in java","body":"<p>I was trying to query the table which returns an empty value in DB. And after I am setting it in List but while checking the list it was not empty. Why it was not empty or null? But DB returns empty only for the query.</p>\n<p>Example:\nList keyLook = Repository.getTypeFromTable(key);\nRepository query is\n@Query(value = &quot;SELECT TYPE FROM KEY_LOOK WHERE KEY IN (:KEY)&quot;, nativeQuery = true)</p>\n<p>While query in DB, returns as attached image. But while checking keyLook list it is not empty. Due to this, it is skipping null or empty check in Java, and the loop move inside implementations. what is the cause of this issue?</p>\n<p><a href=\"https://i.stack.imgur.com/vUr3B.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vUr3B.jpg\" alt=\"enter image description here\" /></a></p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9694,"page":298,"page_size":100}
