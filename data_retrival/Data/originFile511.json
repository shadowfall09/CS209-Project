{"items":[{"tags":["java","sql","spring","relationship","crud"],"owner":{"account_id":27784879,"reputation":389,"user_id":21212553,"display_name":"galalem"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681134414,"creation_date":1681134414,"question_id":75977680,"body_markdown":"Let&#39;s say I have an Entity `Post` which has Many `Tag`s. Users can do standard BREAD operations. (Browse, Read, Edit, Add, Delete). \r\n\r\nMy question is about the *Edit* part. when Creating (Adding) a post, the user adds some tags. The request looks like this\r\n```json\r\n{\r\n  &quot;title&quot;: &quot;Lorem ipsum&quot;,\r\n  &quot;Body&quot;: &quot;Lorem Ipsum foo bar todododo&quot;,\r\n  ...\r\n  &quot;tags&quot;: [\r\n    {\r\n      &quot;name&quot;: &quot;Tag 1&quot;,\r\n      &quot;category&quot;: 52\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;Tag 2&quot;,\r\n      &quot;category&quot;: 37\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;Tag 3&quot;,\r\n      &quot;category&quot;: 52\r\n    }\r\n  ]\r\n} \r\n```\r\n\r\nWhen Editing the post, the user can **delete** some tags, **edit** the tags, **add** new tags. So I&#39;m wondering how to deal with this when saving changes.\r\n\r\nI have 2 approaches in mind\r\n1. Delete all old tags, then save all new tags\r\n2. Keep track of tags IDs, update the old tags, create the new ones, delete the old tags that no longer exist after comparing old ids with new one.\r\n\r\nWhich one is the best practice?\r\n\r\n##### Note\r\nI&#39;m using Spring, so with JPARepositories `rep.save(entity)` works for both *create* &amp; *update*\r\n\r\n###### First Approach\r\n```java\r\ntagRepository.deleteByPostId(postId);\r\nfor(Tag tag: request.getTags()){\r\n  tag.setPostId(postId);\r\n  tagRepository.save(tag);\r\n}\r\n```\r\n\r\n###### SecondApproach\r\n```java\r\nList&lt;Tag&gt; tags = request.getTags();\r\n\r\nList&lt;Long&gt; keepIds = tags.stream().filter(tag.getId() != null).map(tag -&gt; tag.getId()).toList();\r\ntagRepository.deleteByPostIdWhereIdNotIn(postId, keepIds);\r\n\r\nfor(Tag tag: tags){\r\n  /* if tag is old tag id would be already set so entity will be updated \r\n   * else id would be null and new entity will be created */\r\n  tag.setPostId(postId);\r\n  tagRepository.save(tag);\r\n}\r\n```\r\nI&#39;m interested in the performace of each approach (if tags are few VS if tags are in hundreds). If there&#39;s a better method I&#39;m all ears.\r\n\r\nThanks :)","title":"Spring - Updating multiple relationships simultaneously best practice","body":"<p>Let's say I have an Entity <code>Post</code> which has Many <code>Tag</code>s. Users can do standard BREAD operations. (Browse, Read, Edit, Add, Delete).</p>\n<p>My question is about the <em>Edit</em> part. when Creating (Adding) a post, the user adds some tags. The request looks like this</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;title&quot;: &quot;Lorem ipsum&quot;,\n  &quot;Body&quot;: &quot;Lorem Ipsum foo bar todododo&quot;,\n  ...\n  &quot;tags&quot;: [\n    {\n      &quot;name&quot;: &quot;Tag 1&quot;,\n      &quot;category&quot;: 52\n    },\n    {\n      &quot;name&quot;: &quot;Tag 2&quot;,\n      &quot;category&quot;: 37\n    },\n    {\n      &quot;name&quot;: &quot;Tag 3&quot;,\n      &quot;category&quot;: 52\n    }\n  ]\n} \n</code></pre>\n<p>When Editing the post, the user can <strong>delete</strong> some tags, <strong>edit</strong> the tags, <strong>add</strong> new tags. So I'm wondering how to deal with this when saving changes.</p>\n<p>I have 2 approaches in mind</p>\n<ol>\n<li>Delete all old tags, then save all new tags</li>\n<li>Keep track of tags IDs, update the old tags, create the new ones, delete the old tags that no longer exist after comparing old ids with new one.</li>\n</ol>\n<p>Which one is the best practice?</p>\n<h5>Note</h5>\n<p>I'm using Spring, so with JPARepositories <code>rep.save(entity)</code> works for both <em>create</em> &amp; <em>update</em></p>\n<h6>First Approach</h6>\n<pre class=\"lang-java prettyprint-override\"><code>tagRepository.deleteByPostId(postId);\nfor(Tag tag: request.getTags()){\n  tag.setPostId(postId);\n  tagRepository.save(tag);\n}\n</code></pre>\n<h6>SecondApproach</h6>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Tag&gt; tags = request.getTags();\n\nList&lt;Long&gt; keepIds = tags.stream().filter(tag.getId() != null).map(tag -&gt; tag.getId()).toList();\ntagRepository.deleteByPostIdWhereIdNotIn(postId, keepIds);\n\nfor(Tag tag: tags){\n  /* if tag is old tag id would be already set so entity will be updated \n   * else id would be null and new entity will be created */\n  tag.setPostId(postId);\n  tagRepository.save(tag);\n}\n</code></pre>\n<p>I'm interested in the performace of each approach (if tags are few VS if tags are in hundreds). If there's a better method I'm all ears.</p>\n<p>Thanks :)</p>\n"},{"tags":["java","lambda","java-8","java-stream"],"comments":[{"owner":{"account_id":6243460,"reputation":97907,"user_id":4856258,"accept_rate":100,"display_name":"Tagir Valeev"},"score":2,"creation_date":1439434158,"post_id":27677256,"comment_id":51863208,"body_markdown":"possible duplicate of [Collect stream with grouping, counting and filtering operations](http://stackoverflow.com/questions/30515792/collect-stream-with-grouping-counting-and-filtering-operations)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/30515792/collect-stream-with-grouping-counting-and-filtering-operations\">Collect stream with grouping, counting and filtering operations</a>"},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1525338137,"post_id":27677256,"comment_id":87319676,"body_markdown":"If you don&#39;t want to collect the stream, this essentially boils down to &quot;how can I look at more than one item at once in a stream&quot;?","body":"If you don&#39;t want to collect the stream, this essentially boils down to &quot;how can I look at more than one item at once in a stream&quot;?"},{"owner":{"account_id":6145873,"reputation":83,"user_id":4791885,"display_name":"Saroj Kumar Sahoo"},"score":1,"creation_date":1599284801,"post_id":27677256,"comment_id":112733109,"body_markdown":"Set&lt;Integer&gt; items = new HashSet();                                                                                                           \n numbers.stream().filter(n -&gt; i!tems.add(n)).collect(Collectors.toSet());","body":"Set&lt;Integer&gt; items = new HashSet();                                                                                                             numbers.stream().filter(n -&gt; i!tems.add(n)).collect(Collectors.toSet());"}],"answers":[{"tags":[],"owner":{"account_id":908333,"reputation":1660,"user_id":942772,"accept_rate":80,"display_name":"Oussama Zoghlami"},"down_vote_count":7,"up_vote_count":16,"is_accepted":false,"score":9,"last_activity_date":1583321014,"creation_date":1419864901,"answer_id":27691091,"question_id":27677256,"body_markdown":"You can get the duplicated like this :\r\n\r\n    List&lt;Integer&gt; numbers = Arrays.asList(1, 2, 1, 3, 4, 4);\r\n    Set&lt;Integer&gt; duplicated = numbers\r\n      .stream()\r\n      .filter(n -&gt; numbers\r\n            .stream()\r\n            .filter(x -&gt; x == n)\r\n            .count() &gt; 1)\r\n       .collect(Collectors.toSet());","title":"Java 8, Streams to find the duplicate elements","body":"<p>You can get the duplicated like this :</p>\n\n<pre><code>List&lt;Integer&gt; numbers = Arrays.asList(1, 2, 1, 3, 4, 4);\nSet&lt;Integer&gt; duplicated = numbers\n  .stream()\n  .filter(n -&gt; numbers\n        .stream()\n        .filter(x -&gt; x == n)\n        .count() &gt; 1)\n   .collect(Collectors.toSet());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4599512,"reputation":967,"user_id":3730661,"display_name":"Dave"},"down_vote_count":5,"up_vote_count":72,"is_accepted":false,"score":67,"last_activity_date":1433880684,"creation_date":1433880684,"answer_id":30741906,"question_id":27677256,"body_markdown":"You need a set (`allItems` below) to hold the entire array contents, but this is O(n):\r\n\r\n\tInteger[] numbers = new Integer[] { 1, 2, 1, 3, 4, 4 };\r\n\tSet&lt;Integer&gt; allItems = new HashSet&lt;&gt;();\r\n\tSet&lt;Integer&gt; duplicates = Arrays.stream(numbers)\r\n\t\t\t.filter(n -&gt; !allItems.add(n)) //Set.add() returns false if the item was already in the set.\r\n\t\t\t.collect(Collectors.toSet());\r\n\tSystem.out.println(duplicates); // [1, 4]\r\n\r\n\r\n","title":"Java 8, Streams to find the duplicate elements","body":"<p>You need a set (<code>allItems</code> below) to hold the entire array contents, but this is O(n):</p>\n\n<pre><code>Integer[] numbers = new Integer[] { 1, 2, 1, 3, 4, 4 };\nSet&lt;Integer&gt; allItems = new HashSet&lt;&gt;();\nSet&lt;Integer&gt; duplicates = Arrays.stream(numbers)\n        .filter(n -&gt; !allItems.add(n)) //Set.add() returns false if the item was already in the set.\n        .collect(Collectors.toSet());\nSystem.out.println(duplicates); // [1, 4]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":210082,"reputation":19409,"user_id":461499,"accept_rate":73,"display_name":"Rob Audenaerde"},"down_vote_count":0,"up_vote_count":103,"is_accepted":false,"score":103,"last_activity_date":1610468147,"creation_date":1436534708,"answer_id":31341963,"question_id":27677256,"body_markdown":"Basic example. First-half builds the frequency-map, second-half reduces it to a filtered list. Probably not as efficient as Dave&#39;s answer, but more versatile (like if you want to detect exactly two etc.)\r\n\r\n    List&lt;Integer&gt; duplicates = IntStream.of( 1, 2, 3, 2, 1, 2, 3, 4, 2, 2, 2 )\r\n       .boxed()\r\n       .collect( Collectors.groupingBy( Function.identity(), Collectors.counting() ) )\r\n       .entrySet()\r\n       .stream()\r\n       .filter( p -&gt; p.getValue() &gt; 1 )\r\n       .map( Map.Entry::getKey )\r\n       .collect( Collectors.toList() );","title":"Java 8, Streams to find the duplicate elements","body":"<p>Basic example. First-half builds the frequency-map, second-half reduces it to a filtered list. Probably not as efficient as Dave's answer, but more versatile (like if you want to detect exactly two etc.)</p>\n<pre><code>List&lt;Integer&gt; duplicates = IntStream.of( 1, 2, 3, 2, 1, 2, 3, 4, 2, 2, 2 )\n   .boxed()\n   .collect( Collectors.groupingBy( Function.identity(), Collectors.counting() ) )\n   .entrySet()\n   .stream()\n   .filter( p -&gt; p.getValue() &gt; 1 )\n   .map( Map.Entry::getKey )\n   .collect( Collectors.toList() );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4822249,"reputation":389,"user_id":4598712,"display_name":"Thomas Mathew"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1439237281,"creation_date":1439236937,"answer_id":31928132,"question_id":27677256,"body_markdown":"An O(n) way would be as below:\r\n \r\n\r\n    List&lt;Integer&gt; numbers = Arrays.asList(1, 2, 1, 3, 4, 4);\r\n    Set&lt;Integer&gt; duplicatedNumbersRemovedSet = new HashSet&lt;&gt;();\r\n    Set&lt;Integer&gt; duplicatedNumbersSet = numbers.stream().filter(n -&gt; !duplicatedNumbersRemovedSet.add(n)).collect(Collectors.toSet());\r\n\r\nThe space complexity would go double in this approach, but that space is not a waste; in-fact, we now have the duplicated alone only as a Set as well as another Set with all the duplicates removed too.","title":"Java 8, Streams to find the duplicate elements","body":"<p>An O(n) way would be as below:</p>\n\n<pre><code>List&lt;Integer&gt; numbers = Arrays.asList(1, 2, 1, 3, 4, 4);\nSet&lt;Integer&gt; duplicatedNumbersRemovedSet = new HashSet&lt;&gt;();\nSet&lt;Integer&gt; duplicatedNumbersSet = numbers.stream().filter(n -&gt; !duplicatedNumbersRemovedSet.add(n)).collect(Collectors.toSet());\n</code></pre>\n\n<p>The space complexity would go double in this approach, but that space is not a waste; in-fact, we now have the duplicated alone only as a Set as well as another Set with all the duplicates removed too.</p>\n"},{"tags":[],"owner":{"account_id":6243460,"reputation":97907,"user_id":4856258,"accept_rate":100,"display_name":"Tagir Valeev"},"down_vote_count":1,"up_vote_count":18,"is_accepted":false,"score":17,"last_activity_date":1441954046,"creation_date":1439434428,"answer_id":31978745,"question_id":27677256,"body_markdown":"My [StreamEx](https://github.com/amaembo/streamex) library which enhances the Java 8 streams provides a special operation [`distinct(atLeast)`](http://amaembo.github.io/streamex/javadoc/javax/util/streamex/StreamEx.html#distinct-long-) which can retain only elements appearing at least the specified number of times. So your problem can be solved like this:\r\n\r\n    List&lt;Integer&gt; repeatingNumbers = StreamEx.of(numbers).distinct(2).toList();\r\n\r\nInternally it&#39;s similar to @Dave solution, it counts objects, to support other wanted quantities and it&#39;s parallel-friendly (it uses `ConcurrentHashMap` for parallelized stream, but `HashMap` for sequential). For big amounts of data you can get a speed-up using `.parallel().distinct(2)`.","title":"Java 8, Streams to find the duplicate elements","body":"<p>My <a href=\"https://github.com/amaembo/streamex\" rel=\"noreferrer\">StreamEx</a> library which enhances the Java 8 streams provides a special operation <a href=\"http://amaembo.github.io/streamex/javadoc/javax/util/streamex/StreamEx.html#distinct-long-\" rel=\"noreferrer\"><code>distinct(atLeast)</code></a> which can retain only elements appearing at least the specified number of times. So your problem can be solved like this:</p>\n\n<pre><code>List&lt;Integer&gt; repeatingNumbers = StreamEx.of(numbers).distinct(2).toList();\n</code></pre>\n\n<p>Internally it's similar to @Dave solution, it counts objects, to support other wanted quantities and it's parallel-friendly (it uses <code>ConcurrentHashMap</code> for parallelized stream, but <code>HashMap</code> for sequential). For big amounts of data you can get a speed-up using <code>.parallel().distinct(2)</code>.</p>\n"},{"tags":[],"owner":{"account_id":6936168,"reputation":1559,"user_id":5323996,"display_name":"Bao Dinh"},"down_vote_count":11,"up_vote_count":158,"is_accepted":false,"score":147,"last_activity_date":1441953632,"creation_date":1441952518,"answer_id":32516817,"question_id":27677256,"body_markdown":"You can use [`Collections.frequency`](https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#frequency-java.util.Collection-java.lang.Object-):\r\n\r\n    numbers.stream().filter(i -&gt; Collections.frequency(numbers, i) &gt;1)\r\n                    .collect(Collectors.toSet()).forEach(System.out::println);","title":"Java 8, Streams to find the duplicate elements","body":"<p>You can use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#frequency-java.util.Collection-java.lang.Object-\"><code>Collections.frequency</code></a>:</p>\n\n<pre><code>numbers.stream().filter(i -&gt; Collections.frequency(numbers, i) &gt;1)\n                .collect(Collectors.toSet()).forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8900304,"reputation":722,"user_id":6643968,"display_name":"Zhurov Konstantin"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1494484265,"creation_date":1488891901,"answer_id":42649106,"question_id":27677256,"body_markdown":"I think I have good solution how to fix problem like this - List&lt;Something&gt; =&gt; List&lt;Something&gt; with grouping by Something.a &amp; Something.b.\r\nThere is extended definition:\r\n\r\n    public class Test {\r\n\r\n        public static void test() {\r\n\r\n            class A {\r\n                private int a;\r\n                private int b;\r\n                private float c;\r\n                private float d;\r\n\r\n                public A(int a, int b, float c, float d) {\r\n                    this.a = a;\r\n                    this.b = b;\r\n                    this.c = c;\r\n                    this.d = d;\r\n                }\r\n            }\r\n\r\n\r\n            List&lt;A&gt; list1 = new ArrayList&lt;A&gt;();\r\n\r\n            list1.addAll(Arrays.asList(new A(1, 2, 3, 4),\r\n                    new A(2, 3, 4, 5),\r\n                    new A(1, 2, 3, 4),\r\n                    new A(2, 3, 4, 5),\r\n                    new A(1, 2, 3, 4)));\r\n\r\n            Map&lt;Integer, A&gt; map = list1.stream()\r\n                    .collect(HashMap::new, (m, v) -&gt; m.put(\r\n                            Objects.hash(v.a, v.b, v.c, v.d), v),\r\n                            HashMap::putAll);\r\n\r\n            list1.clear();\r\n            list1.addAll(map.values());\r\n\r\n            System.out.println(list1);\r\n        }\r\n\r\n    }\r\n\r\nclass A, list1 it&#39;s just incoming data - magic is in the Objects.hash(...) :)\r\n","title":"Java 8, Streams to find the duplicate elements","body":"<p>I think I have good solution how to fix problem like this - List => List with grouping by Something.a &amp; Something.b.\nThere is extended definition:</p>\n\n<pre><code>public class Test {\n\n    public static void test() {\n\n        class A {\n            private int a;\n            private int b;\n            private float c;\n            private float d;\n\n            public A(int a, int b, float c, float d) {\n                this.a = a;\n                this.b = b;\n                this.c = c;\n                this.d = d;\n            }\n        }\n\n\n        List&lt;A&gt; list1 = new ArrayList&lt;A&gt;();\n\n        list1.addAll(Arrays.asList(new A(1, 2, 3, 4),\n                new A(2, 3, 4, 5),\n                new A(1, 2, 3, 4),\n                new A(2, 3, 4, 5),\n                new A(1, 2, 3, 4)));\n\n        Map&lt;Integer, A&gt; map = list1.stream()\n                .collect(HashMap::new, (m, v) -&gt; m.put(\n                        Objects.hash(v.a, v.b, v.c, v.d), v),\n                        HashMap::putAll);\n\n        list1.clear();\n        list1.addAll(map.values());\n\n        System.out.println(list1);\n    }\n\n}\n</code></pre>\n\n<p>class A, list1 it's just incoming data - magic is in the Objects.hash(...) :)</p>\n"},{"tags":[],"owner":{"account_id":533594,"reputation":3851,"user_id":903998,"accept_rate":75,"display_name":"Victor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524161856,"creation_date":1524161856,"answer_id":49927670,"question_id":27677256,"body_markdown":"Do you have to use the java 8 idioms (steams)? Perphaps a simple solution would be to move the complexity to a map alike data structure that holds numbers as key (without repeating) and the times it ocurrs as a value. You could them iterate that map an only do something with those numbers that are ocurrs &gt; 1.\r\n\r\n    import java.lang.Math;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    import java.util.HashMap;\r\n    import java.util.Iterator;\r\n    \r\n    public class RemoveDuplicates\r\n    {\r\n      public static void main(String[] args)\r\n      {\r\n       List&lt;Integer&gt; numbers = Arrays.asList(new Integer[]{1,2,1,3,4,4});\r\n       Map&lt;Integer,Integer&gt; countByNumber = new HashMap&lt;Integer,Integer&gt;();\r\n       for(Integer n:numbers)\r\n       {\r\n         Integer count = countByNumber.get(n);\r\n         if (count != null) {\r\n           countByNumber.put(n,count + 1);\r\n         } else {\r\n           countByNumber.put(n,1);\r\n         }\r\n       }\r\n       System.out.println(countByNumber);\r\n       Iterator it = countByNumber.entrySet().iterator();\r\n        while (it.hasNext()) {\r\n            Map.Entry pair = (Map.Entry)it.next();\r\n            System.out.println(pair.getKey() + &quot; = &quot; + pair.getValue());\r\n        }\r\n      }\r\n    }","title":"Java 8, Streams to find the duplicate elements","body":"<p>Do you have to use the java 8 idioms (steams)? Perphaps a simple solution would be to move the complexity to a map alike data structure that holds numbers as key (without repeating) and the times it ocurrs as a value. You could them iterate that map an only do something with those numbers that are ocurrs > 1.</p>\n\n<pre><code>import java.lang.Math;\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.HashMap;\nimport java.util.Iterator;\n\npublic class RemoveDuplicates\n{\n  public static void main(String[] args)\n  {\n   List&lt;Integer&gt; numbers = Arrays.asList(new Integer[]{1,2,1,3,4,4});\n   Map&lt;Integer,Integer&gt; countByNumber = new HashMap&lt;Integer,Integer&gt;();\n   for(Integer n:numbers)\n   {\n     Integer count = countByNumber.get(n);\n     if (count != null) {\n       countByNumber.put(n,count + 1);\n     } else {\n       countByNumber.put(n,1);\n     }\n   }\n   System.out.println(countByNumber);\n   Iterator it = countByNumber.entrySet().iterator();\n    while (it.hasNext()) {\n        Map.Entry pair = (Map.Entry)it.next();\n        System.out.println(pair.getKey() + \" = \" + pair.getValue());\n    }\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10397170,"reputation":1,"user_id":7666613,"display_name":"Ilia Galperin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1526367916,"creation_date":1526364139,"answer_id":50343261,"question_id":27677256,"body_markdown":"Try this solution:\r\n\r\n    public class Anagramm {\r\n\r\n\tpublic static boolean isAnagramLetters(String word, String anagramm) {\r\n\t\tif (anagramm.isEmpty()) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\tMap&lt;Character, Integer&gt; mapExistString = CharCountMap(word);\r\n\t    Map&lt;Character, Integer&gt; mapCheckString = CharCountMap(anagramm);\r\n\t    return enoughLetters(mapExistString, mapCheckString);\r\n\t}\r\n\r\n\tprivate static Map&lt;Character, Integer&gt; CharCountMap(String chars) {\r\n\t    HashMap&lt;Character, Integer&gt; charCountMap = new HashMap&lt;Character, Integer&gt;();\r\n\t    for (char c : chars.toCharArray()) {\r\n\t        if (charCountMap.containsKey(c)) {\r\n\t            charCountMap.put(c, charCountMap.get(c) + 1);\r\n\t        } else {\r\n\t            charCountMap.put(c, 1);\r\n\t        }\r\n\t    }\r\n\t    return charCountMap;\r\n\t}\r\n\t\r\n\tstatic boolean enoughLetters(Map&lt;Character, Integer&gt; mapExistString, Map&lt;Character,Integer&gt; mapCheckString) {\r\n\t    for( Entry&lt;Character, Integer&gt; e : mapCheckString.entrySet() ) {\r\n\t        Character letter = e.getKey();\r\n\t        Integer available = mapExistString.get(letter);\r\n\t        if (available == null || e.getValue() &gt; available) return false;\r\n\t    }\r\n\t    return true;\r\n\t}\r\n\r\n    }","title":"Java 8, Streams to find the duplicate elements","body":"<p>Try this solution:</p>\n\n<pre><code>public class Anagramm {\n\npublic static boolean isAnagramLetters(String word, String anagramm) {\n    if (anagramm.isEmpty()) {\n        return false;\n    }\n\n    Map&lt;Character, Integer&gt; mapExistString = CharCountMap(word);\n    Map&lt;Character, Integer&gt; mapCheckString = CharCountMap(anagramm);\n    return enoughLetters(mapExistString, mapCheckString);\n}\n\nprivate static Map&lt;Character, Integer&gt; CharCountMap(String chars) {\n    HashMap&lt;Character, Integer&gt; charCountMap = new HashMap&lt;Character, Integer&gt;();\n    for (char c : chars.toCharArray()) {\n        if (charCountMap.containsKey(c)) {\n            charCountMap.put(c, charCountMap.get(c) + 1);\n        } else {\n            charCountMap.put(c, 1);\n        }\n    }\n    return charCountMap;\n}\n\nstatic boolean enoughLetters(Map&lt;Character, Integer&gt; mapExistString, Map&lt;Character,Integer&gt; mapCheckString) {\n    for( Entry&lt;Character, Integer&gt; e : mapCheckString.entrySet() ) {\n        Character letter = e.getKey();\n        Integer available = mapExistString.get(letter);\n        if (available == null || e.getValue() &gt; available) return false;\n    }\n    return true;\n}\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3127180,"reputation":419,"user_id":2645831,"accept_rate":54,"display_name":"Prashant"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1531143917,"creation_date":1531143917,"answer_id":51247097,"question_id":27677256,"body_markdown":"I think basic solutions to the question should be as below:\r\n\r\n    Supplier supplier=HashSet::new; \r\n    HashSet has=ls.stream().collect(Collectors.toCollection(supplier));\r\n\r\n    List lst = (List) ls.stream().filter(e-&gt;Collections.frequency(ls,e)&gt;1).distinct().collect(Collectors.toList());\r\n\r\nwell, it is not recommended to perform a filter operation, but for better understanding, i have used it, moreover, there should be some custom filtration in future versions.","title":"Java 8, Streams to find the duplicate elements","body":"<p>I think basic solutions to the question should be as below:</p>\n\n<pre><code>Supplier supplier=HashSet::new; \nHashSet has=ls.stream().collect(Collectors.toCollection(supplier));\n\nList lst = (List) ls.stream().filter(e-&gt;Collections.frequency(ls,e)&gt;1).distinct().collect(Collectors.toList());\n</code></pre>\n\n<p>well, it is not recommended to perform a filter operation, but for better understanding, i have used it, moreover, there should be some custom filtration in future versions.</p>\n"},{"tags":[],"owner":{"account_id":4243811,"reputation":4011,"user_id":3473046,"accept_rate":20,"display_name":"num&#233;ro6"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1531227557,"creation_date":1531227557,"answer_id":51265925,"question_id":27677256,"body_markdown":"A multiset is a structure maintaining the number of occurrences for each element. Using Guava implementation:\r\n\r\n    Set&lt;Integer&gt; duplicated =\r\n            ImmutableMultiset.copyOf(numbers).entrySet().stream()\r\n                    .filter(entry -&gt; entry.getCount() &gt; 1)\r\n                    .map(Multiset.Entry::getElement)\r\n                    .collect(Collectors.toSet());","title":"Java 8, Streams to find the duplicate elements","body":"<p>A multiset is a structure maintaining the number of occurrences for each element. Using Guava implementation:</p>\n\n<pre><code>Set&lt;Integer&gt; duplicated =\n        ImmutableMultiset.copyOf(numbers).entrySet().stream()\n                .filter(entry -&gt; entry.getCount() &gt; 1)\n                .map(Multiset.Entry::getElement)\n                .collect(Collectors.toSet());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14461654,"reputation":11,"user_id":10446324,"display_name":"bagom"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1538487888,"creation_date":1538487525,"answer_id":52609565,"question_id":27677256,"body_markdown":"What about checking of indexes?\r\n\r\n            numbers.stream()\r\n                .filter(integer -&gt; numbers.indexOf(integer) != numbers.lastIndexOf(integer))\r\n                .collect(Collectors.toSet())\r\n                .forEach(System.out::println);","title":"Java 8, Streams to find the duplicate elements","body":"<p>What about checking of indexes?</p>\n\n<pre><code>        numbers.stream()\n            .filter(integer -&gt; numbers.indexOf(integer) != numbers.lastIndexOf(integer))\n            .collect(Collectors.toSet())\n            .forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5223366,"reputation":1297,"user_id":4176104,"display_name":"Patrick"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1561396884,"creation_date":1561396884,"answer_id":56741276,"question_id":27677256,"body_markdown":"If you only need to detect the presence of duplicates (instead of listing them, which is what the OP wanted), just convert them into both a List and Set, then compare the sizes:\r\n```\r\n    List&lt;Integer&gt; list = ...;\r\n    Set&lt;Integer&gt; set = new HashSet&lt;&gt;(list);\r\n    if (list.size() != set.size()) {\r\n      // duplicates detected\r\n    }\r\n```\r\nI like this approach because it has less places for mistakes.","title":"Java 8, Streams to find the duplicate elements","body":"<p>If you only need to detect the presence of duplicates (instead of listing them, which is what the OP wanted), just convert them into both a List and Set, then compare the sizes:</p>\n\n<pre><code>    List&lt;Integer&gt; list = ...;\n    Set&lt;Integer&gt; set = new HashSet&lt;&gt;(list);\n    if (list.size() != set.size()) {\n      // duplicates detected\n    }\n</code></pre>\n\n<p>I like this approach because it has less places for mistakes.</p>\n"},{"tags":[],"owner":{"account_id":15524669,"reputation":2739,"user_id":11199879,"display_name":"Kaplan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1563722431,"creation_date":1563516922,"answer_id":57106549,"question_id":27677256,"body_markdown":"_the creating of an additional map or stream is time- and space-consuming…_\r\n\r\n    Set&lt;Integer&gt; duplicates = numbers.stream().collect( Collectors.collectingAndThen(\r\n      Collectors.groupingBy( Function.identity(), Collectors.counting() ),\r\n      map -&gt; {\r\n        map.values().removeIf( cnt -&gt; cnt &lt; 2 );\r\n        return( map.keySet() );\r\n      } ) );  // [1, 4]\r\n\r\n&lt;br /&gt;_…and for the question of which is claimed to be a_ [\\[duplicate\\]][1]\r\n\r\n    public static int[] getDuplicatesStreamsToArray( int[] input ) {\r\n      return( IntStream.of( input ).boxed().collect( Collectors.collectingAndThen(\r\n          Collectors.groupingBy( Function.identity(), Collectors.counting() ),\r\n          map -&gt; {\r\n            map.values().removeIf( cnt -&gt; cnt &lt; 2 );\r\n            return( map.keySet() );\r\n          } ) ).stream().mapToInt( i -&gt; i ).toArray() );\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/57083672/java-8-streams-how-to-avoid-filtering-with-map-or-set","title":"Java 8, Streams to find the duplicate elements","body":"<p><em>the creating of an additional map or stream is time- and space-consuming…</em></p>\n\n<pre><code>Set&lt;Integer&gt; duplicates = numbers.stream().collect( Collectors.collectingAndThen(\n  Collectors.groupingBy( Function.identity(), Collectors.counting() ),\n  map -&gt; {\n    map.values().removeIf( cnt -&gt; cnt &lt; 2 );\n    return( map.keySet() );\n  } ) );  // [1, 4]\n</code></pre>\n\n<p><br /><em>…and for the question of which is claimed to be a</em> <a href=\"https://stackoverflow.com/questions/57083672/java-8-streams-how-to-avoid-filtering-with-map-or-set\">[duplicate]</a></p>\n\n<pre><code>public static int[] getDuplicatesStreamsToArray( int[] input ) {\n  return( IntStream.of( input ).boxed().collect( Collectors.collectingAndThen(\n      Collectors.groupingBy( Function.identity(), Collectors.counting() ),\n      map -&gt; {\n        map.values().removeIf( cnt -&gt; cnt &lt; 2 );\n        return( map.keySet() );\n      } ) ).stream().mapToInt( i -&gt; i ).toArray() );\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1099760,"reputation":7046,"user_id":1092450,"accept_rate":74,"display_name":"itro"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1621318574,"creation_date":1621318574,"answer_id":67580858,"question_id":27677256,"body_markdown":"**Set.add()** is faster if you&#39;re looking for performance.\r\n\r\n    public class FindDuplicatedBySet {\r\n\r\n    public static void main(String[] args) {\r\n        List&lt;Integer&gt; list = Arrays.asList(5, 3, 4, 1, 3, 7, 2,3,1, 9, 9, 4,1);\r\n        Set&lt;Integer&gt; result = findDuplicatedBySetAdd(list);\r\n        result.forEach(System.out::println);\r\n      }\r\n\r\n    public static &lt;T&gt; Set&lt;T&gt; findDuplicatedBySetAdd(List&lt;T&gt; list) {\r\n        Set&lt;T&gt; items = new HashSet&lt;&gt;();\r\n        return list.stream()\r\n                .filter(n -&gt; !items.add(n))\r\n                .collect(Collectors.toSet());\r\n      }\r\n    }","title":"Java 8, Streams to find the duplicate elements","body":"<p><strong>Set.add()</strong> is faster if you're looking for performance.</p>\n<pre><code>public class FindDuplicatedBySet {\n\npublic static void main(String[] args) {\n    List&lt;Integer&gt; list = Arrays.asList(5, 3, 4, 1, 3, 7, 2,3,1, 9, 9, 4,1);\n    Set&lt;Integer&gt; result = findDuplicatedBySetAdd(list);\n    result.forEach(System.out::println);\n  }\n\npublic static &lt;T&gt; Set&lt;T&gt; findDuplicatedBySetAdd(List&lt;T&gt; list) {\n    Set&lt;T&gt; items = new HashSet&lt;&gt;();\n    return list.stream()\n            .filter(n -&gt; !items.add(n))\n            .collect(Collectors.toSet());\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12858978,"reputation":231,"user_id":9301392,"display_name":"AnushaSP07"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677066137,"creation_date":1664007486,"answer_id":73835726,"question_id":27677256,"body_markdown":"Using stream\r\n\r\n    Set&lt;Integer&gt; set = new HashSet&lt;&gt;();\r\n    list.stream()\r\n         .filter(data -&gt; !set.add(data))\r\n         .forEach(data -&gt; System.out.println(&quot;duplicates &quot;+data));\r\n","title":"Java 8, Streams to find the duplicate elements","body":"<p>Using stream</p>\n<pre><code>Set&lt;Integer&gt; set = new HashSet&lt;&gt;();\nlist.stream()\n     .filter(data -&gt; !set.add(data))\n     .forEach(data -&gt; System.out.println(&quot;duplicates &quot;+data));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21910001,"reputation":247,"user_id":16194563,"display_name":"Ramya Musunuru"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1666855813,"creation_date":1666855813,"answer_id":74218306,"question_id":27677256,"body_markdown":"   Using distinct on stream would filter duplicates, you can either collect as set or List.\r\n\r\n     numbers.stream().distinct().collect(Collectors.toSet())","title":"Java 8, Streams to find the duplicate elements","body":"<p>Using distinct on stream would filter duplicates, you can either collect as set or List.</p>\n<pre><code> numbers.stream().distinct().collect(Collectors.toSet())\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3289024,"reputation":49,"user_id":2767738,"display_name":"Amit Thakur"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1681133994,"creation_date":1681133994,"answer_id":75977624,"question_id":27677256,"body_markdown":"    **How to find Non-Repeated Numbers from the array using java8**\r\n    \r\n    Integer[] intArr = {1,1,3,2,2,5,4,4,7,6,6,9,8,8,10,13};\r\n    \r\n    Set&lt;Integer&gt; result = Arrays.asList(intArr).stream().\r\n    filter(x -&gt; Collections.frequency(Arrays.asList(intArr), x) == 1).\r\n    \t\tcollect(Collectors.toSet());\r\n    \r\n     System.out.println(result); //output : [3, 5, 7, 9, 10, 13] **Non-duplicate** values\r\n    \r\n    \r\n    **How to find repeated Numbers from array using java8**\r\n    \r\n    Set&lt;Integer&gt; set = new HashSet();\r\n    \r\n    Set&lt;Integer&gt; result = Arrays.asList(intArr).stream().filter(x -&gt; !set.add(x)).collect(Collectors.toSet());\r\n    \t\r\n    System.out.println(result); // output : [1, 2, 4, 6, 8]  it returns **Duplicates values.**","title":"Java 8, Streams to find the duplicate elements","body":"<pre><code>**How to find Non-Repeated Numbers from the array using java8**\n\nInteger[] intArr = {1,1,3,2,2,5,4,4,7,6,6,9,8,8,10,13};\n\nSet&lt;Integer&gt; result = Arrays.asList(intArr).stream().\nfilter(x -&gt; Collections.frequency(Arrays.asList(intArr), x) == 1).\n        collect(Collectors.toSet());\n\n System.out.println(result); //output : [3, 5, 7, 9, 10, 13] **Non-duplicate** values\n\n\n**How to find repeated Numbers from array using java8**\n\nSet&lt;Integer&gt; set = new HashSet();\n\nSet&lt;Integer&gt; result = Arrays.asList(intArr).stream().filter(x -&gt; !set.add(x)).collect(Collectors.toSet());\n    \nSystem.out.println(result); // output : [1, 2, 4, 6, 8]  it returns **Duplicates values.**\n</code></pre>\n"}],"owner":{"account_id":3753886,"reputation":1249,"user_id":3120743,"display_name":"Siva"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":241764,"favorite_count":0,"down_vote_count":1,"up_vote_count":119,"answer_count":18,"score":118,"last_activity_date":1681133994,"creation_date":1419776396,"question_id":27677256,"body_markdown":"I am trying to list out duplicate elements in the integer list say for eg,\r\n\r\n    List&lt;Integer&gt; numbers = Arrays.asList(new Integer[]{1,2,1,3,4,4});    \r\n\r\nusing Streams of jdk 8. Has anybody tried out. To remove the duplicates we can use the distinct() api. But what about finding the duplicated elements ? Anybody can help me out ?\r\n","title":"Java 8, Streams to find the duplicate elements","body":"<p>I am trying to list out duplicate elements in the integer list say for eg,</p>\n\n<pre><code>List&lt;Integer&gt; numbers = Arrays.asList(new Integer[]{1,2,1,3,4,4});    \n</code></pre>\n\n<p>using Streams of jdk 8. Has anybody tried out. To remove the duplicates we can use the distinct() api. But what about finding the duplicated elements ? Anybody can help me out ?</p>\n"},{"tags":["java","spring-boot","apache-kafka","spring-kafka"],"answers":[{"tags":[],"owner":{"account_id":7800091,"reputation":21,"user_id":5899859,"display_name":"Akash Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680419759,"creation_date":1680419759,"answer_id":75910614,"question_id":75910507,"body_markdown":"    import org.apache.kafka.clients.producer.ProducerRecord;\r\n    import org.apache.kafka.clients.producer.RecordMetadata;\r\n    import org.springframework.kafka.core.KafkaOperations;\r\n    import org.springframework.kafka.support.ProducerListener;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    @Component\r\n    public class CustomProducerListener&lt;K, V&gt; implements ProducerListener&lt;K, V&gt; {\r\n    \r\n        private final KafkaOperations&lt;K, V&gt; kafkaTemplate;\r\n    \r\n        public CustomProducerListener(KafkaOperations&lt;K, V&gt; kafkaTemplate) {\r\n            this.kafkaTemplate = kafkaTemplate;\r\n        }\r\n    \r\n        @Override\r\n        public void onSuccess(ProducerRecord&lt;K, V&gt; producerRecord, RecordMetadata recordMetadata) {\r\n            // Commit the record when it is successfully sent to Kafka\r\n            kafkaTemplate.sendOffsetsToTransaction(Collections.singletonMap(\r\n                new TopicPartition(producerRecord.topic(), producerRecord.partition()), \r\n                new OffsetAndMetadata(recordMetadata.offset() + 1)), \r\n                producerRecord.key());\r\n        }\r\n    \r\n        @Override\r\n        public void onError(ProducerRecord&lt;K, V&gt; producerRecord, RecordMetadata recordMetadata, Exception exception) {\r\n            // Rollback the transaction when an exception occurs\r\n            kafkaTemplate.rollbackTransaction();\r\n        }\r\n    }\r\n\r\n\r\nCustomProducerListener is a custom implementation of the ProducerListener interface, which has two methods: onSuccess and onError.\r\n\r\nIn the onSuccess method, we commit the Kafka producer record by calling sendOffsetsToTransaction method with the current record&#39;s topic, partition, and offset. This ensures that the record is persisted to the Kafka broker and won&#39;t be lost in case of a failure.\r\n\r\nIn the onError method, we rollback the transaction by calling rollbackTransaction method. This method will discard all the records that have been produced so far and reset the transaction state..\r\n\r\nTo use this custom ProducerListener, you can configure it in your Spring Boot Kafka configuration class as follows:\r\n\r\n    import org.apache.kafka.clients.producer.ProducerConfig;\r\n    import org.apache.kafka.common.serialization.StringSerializer;\r\n    import org.springframework.beans.factory.annotation.Value;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.kafka.annotation.EnableKafka;\r\n    import org.springframework.kafka.core.DefaultKafkaProducerFactory;\r\n    import org.springframework.kafka.core.KafkaTemplate;\r\n    import org.springframework.kafka.core.ProducerFactory;\r\n    import org.springframework.kafka.support.ProducerListener;\r\n    \r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    @Configuration\r\n    @EnableKafka\r\n    public class KafkaProducerConfig {\r\n    \r\n        @Value(&quot;${spring.kafka.bootstrap-servers}&quot;)\r\n        private String bootstrapServers;\r\n    \r\n        @Bean\r\n        public Map&lt;String, Object&gt; producerConfigs() {\r\n            Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\r\n            props.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);\r\n            props.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\r\n            props.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\r\n            props.put(ProducerConfig.TRANSACTIONAL_ID_CONFIG, &quot;my-transaction-id&quot;);\r\n    \r\n            return props;\r\n        }\r\n    \r\n        @Bean\r\n        public ProducerFactory&lt;String, String&gt; producerFactory() {\r\n            DefaultKafkaProducerFactory&lt;String, String&gt; producerFactory = new DefaultKafkaProducerFactory&lt;&gt;(producerConfigs());\r\n            producerFactory.setTransactionIdPrefix(&quot;my-transaction-prefix&quot;);\r\n    \r\n            return producerFactory;\r\n        }\r\n    \r\n        @Bean\r\n        public KafkaTemplate&lt;String, String&gt; kafkaTemplate() {\r\n            KafkaTemplate&lt;String, String&gt; kafkaTemplate = new KafkaTemplate&lt;&gt;(producerFactory());\r\n            kafkaTemplate.setProducerListener(producerListener());\r\n    \r\n            return kafkaTemplate;\r\n        }\r\n\r\n   \r\n\r\n\r\n\r\n\r\n","title":"How to implement Kafka Transactions with Transaction Manager in Spring for Apache Kafka","body":"<pre><code>import org.apache.kafka.clients.producer.ProducerRecord;\nimport org.apache.kafka.clients.producer.RecordMetadata;\nimport org.springframework.kafka.core.KafkaOperations;\nimport org.springframework.kafka.support.ProducerListener;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class CustomProducerListener&lt;K, V&gt; implements ProducerListener&lt;K, V&gt; {\n\n    private final KafkaOperations&lt;K, V&gt; kafkaTemplate;\n\n    public CustomProducerListener(KafkaOperations&lt;K, V&gt; kafkaTemplate) {\n        this.kafkaTemplate = kafkaTemplate;\n    }\n\n    @Override\n    public void onSuccess(ProducerRecord&lt;K, V&gt; producerRecord, RecordMetadata recordMetadata) {\n        // Commit the record when it is successfully sent to Kafka\n        kafkaTemplate.sendOffsetsToTransaction(Collections.singletonMap(\n            new TopicPartition(producerRecord.topic(), producerRecord.partition()), \n            new OffsetAndMetadata(recordMetadata.offset() + 1)), \n            producerRecord.key());\n    }\n\n    @Override\n    public void onError(ProducerRecord&lt;K, V&gt; producerRecord, RecordMetadata recordMetadata, Exception exception) {\n        // Rollback the transaction when an exception occurs\n        kafkaTemplate.rollbackTransaction();\n    }\n}\n</code></pre>\n<p>CustomProducerListener is a custom implementation of the ProducerListener interface, which has two methods: onSuccess and onError.</p>\n<p>In the onSuccess method, we commit the Kafka producer record by calling sendOffsetsToTransaction method with the current record's topic, partition, and offset. This ensures that the record is persisted to the Kafka broker and won't be lost in case of a failure.</p>\n<p>In the onError method, we rollback the transaction by calling rollbackTransaction method. This method will discard all the records that have been produced so far and reset the transaction state..</p>\n<p>To use this custom ProducerListener, you can configure it in your Spring Boot Kafka configuration class as follows:</p>\n<pre><code>import org.apache.kafka.clients.producer.ProducerConfig;\nimport org.apache.kafka.common.serialization.StringSerializer;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.kafka.annotation.EnableKafka;\nimport org.springframework.kafka.core.DefaultKafkaProducerFactory;\nimport org.springframework.kafka.core.KafkaTemplate;\nimport org.springframework.kafka.core.ProducerFactory;\nimport org.springframework.kafka.support.ProducerListener;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\n@Configuration\n@EnableKafka\npublic class KafkaProducerConfig {\n\n    @Value(&quot;${spring.kafka.bootstrap-servers}&quot;)\n    private String bootstrapServers;\n\n    @Bean\n    public Map&lt;String, Object&gt; producerConfigs() {\n        Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\n        props.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);\n        props.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\n        props.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\n        props.put(ProducerConfig.TRANSACTIONAL_ID_CONFIG, &quot;my-transaction-id&quot;);\n\n        return props;\n    }\n\n    @Bean\n    public ProducerFactory&lt;String, String&gt; producerFactory() {\n        DefaultKafkaProducerFactory&lt;String, String&gt; producerFactory = new DefaultKafkaProducerFactory&lt;&gt;(producerConfigs());\n        producerFactory.setTransactionIdPrefix(&quot;my-transaction-prefix&quot;);\n\n        return producerFactory;\n    }\n\n    @Bean\n    public KafkaTemplate&lt;String, String&gt; kafkaTemplate() {\n        KafkaTemplate&lt;String, String&gt; kafkaTemplate = new KafkaTemplate&lt;&gt;(producerFactory());\n        kafkaTemplate.setProducerListener(producerListener());\n\n        return kafkaTemplate;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681133584,"creation_date":1680530434,"answer_id":75920301,"question_id":75910507,"body_markdown":"You need to describe your scenario in more detail.\r\n\r\nFor producer-only transactions, just use the normal Spring `@Transactional` annotation on the method and all sends within the method will participate in the transaction.\r\n\r\nOr you can use `KafkaTemplate.executeInTransaction()`; see https://docs.spring.io/spring-kafka/reference/html/#kafkatemplate-local-transactions\r\n\r\nWhen the method exits, the transaction will be committed (or rolled back if an exception is thrown).\r\n\r\nFor `consume-&gt;process-&gt;produce` scenarios, the situation is similar but, instead of using `@Transactional` the listener container will start the transaction before calling the listener method.\r\n\r\n__EDIT__\r\n\r\nHere is an example of using local transactions; if the send, or getting the result of a future, throws an exception, the transaction will be rolled back; otherwise it will be committed.\r\n\r\n```java\r\n@Bean\r\nApplicationRunner runner(KafkaTemplate&lt;String, String&gt; template) {\r\n\tList&lt;String&gt; data = List.of(&quot;foo&quot;, &quot;bar&quot;);\r\n\treturn args -&gt; {\r\n\t\tboolean success = template.executeInTransaction(t -&gt; {\r\n\t\t\tList&lt;CompletableFuture&lt;SendResult&lt;String, String&gt;&gt;&gt; futures = new ArrayList&lt;&gt;();\r\n\t\t\tdata.forEach(item-&gt; {\r\n\t\t\t\tfutures.add(t.send(&quot;so75910507&quot;, item));\r\n\t\t\t});\r\n\t\t\tfutures.forEach(future -&gt; {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tfuture.get(10, TimeUnit.SECONDS);\r\n\t\t\t\t}\r\n\t\t\t\tcatch (InterruptedException e) {\r\n\t\t\t\t\tThread.currentThread().interrupt();\r\n\t\t\t\t\tthrow new IllegalStateException(e);\r\n\t\t\t\t}\r\n\t\t\t\tcatch (ExecutionException | TimeoutException e) {\r\n\t\t\t\t\tthrow new IllegalStateException(e);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t});\r\n\t};\r\n}\r\n```","title":"How to implement Kafka Transactions with Transaction Manager in Spring for Apache Kafka","body":"<p>You need to describe your scenario in more detail.</p>\n<p>For producer-only transactions, just use the normal Spring <code>@Transactional</code> annotation on the method and all sends within the method will participate in the transaction.</p>\n<p>Or you can use <code>KafkaTemplate.executeInTransaction()</code>; see <a href=\"https://docs.spring.io/spring-kafka/reference/html/#kafkatemplate-local-transactions\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-kafka/reference/html/#kafkatemplate-local-transactions</a></p>\n<p>When the method exits, the transaction will be committed (or rolled back if an exception is thrown).</p>\n<p>For <code>consume-&gt;process-&gt;produce</code> scenarios, the situation is similar but, instead of using <code>@Transactional</code> the listener container will start the transaction before calling the listener method.</p>\n<p><strong>EDIT</strong></p>\n<p>Here is an example of using local transactions; if the send, or getting the result of a future, throws an exception, the transaction will be rolled back; otherwise it will be committed.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\nApplicationRunner runner(KafkaTemplate&lt;String, String&gt; template) {\n    List&lt;String&gt; data = List.of(&quot;foo&quot;, &quot;bar&quot;);\n    return args -&gt; {\n        boolean success = template.executeInTransaction(t -&gt; {\n            List&lt;CompletableFuture&lt;SendResult&lt;String, String&gt;&gt;&gt; futures = new ArrayList&lt;&gt;();\n            data.forEach(item-&gt; {\n                futures.add(t.send(&quot;so75910507&quot;, item));\n            });\n            futures.forEach(future -&gt; {\n                try {\n                    future.get(10, TimeUnit.SECONDS);\n                }\n                catch (InterruptedException e) {\n                    Thread.currentThread().interrupt();\n                    throw new IllegalStateException(e);\n                }\n                catch (ExecutionException | TimeoutException e) {\n                    throw new IllegalStateException(e);\n                }\n            });\n            return true;\n        });\n    };\n}\n</code></pre>\n"}],"owner":{"account_id":27835226,"reputation":25,"user_id":21252826,"display_name":"Dave"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1859,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75920301,"answer_count":2,"score":0,"last_activity_date":1681133584,"creation_date":1680418041,"question_id":75910507,"body_markdown":"I have to write a method to commit/send all the Kafka producer records on success and rollback all the records on failures based on the Kafka related exception occurred using the latest version of Spring Boot (Preferred) or with Java configuration.\r\n\r\nAnd I am planning to follow the same approach in this [Spring Boot ref](https://docs.spring.io/spring-kafka/reference/html/#transactions), but not able to find out an example code.\r\n\r\n```\r\npublic interface ProducerListener&lt;K, V&gt; {\r\n\r\nvoid onSuccess(ProducerRecord&lt;K, V&gt; producerRecord, RecordMetadata recordMetadata);\r\n\r\nvoid onError(ProducerRecord&lt;K, V&gt; producerRecord, RecordMetadata recordMetadata,\r\n        Exception exception);\r\n\r\n}\r\n```\r\n\r\n\r\nThe NEW approach (Recently added)\r\n\r\n    public ProducerResult produceData(String topic, List&lt;Data&gt; data) {\r\n    \r\n        data.forEach(\r\n                d -&gt; {\r\n                    final ProducerRecord&lt;String, Data&gt; record = createRecord(topic, d);\r\n                    CompletableFuture&lt;SendResult&lt;Integer, Data&gt;&gt; future = template.send(record);\r\n    \r\n                    future.whenComplete((result, ex) -&gt; {\r\n                        if (ex != null) {\r\n                            //Need to roll back the transaction\r\n                            return new ProducerResult(false);\r\n                        }\r\n                    });\r\n                }\r\n        );\r\n        //Need to commit the transaction\r\n        return new ProducerResult(true);\r\n    }\r\n\r\nThe method `createRecord(topic, d)` returns `new ProducerRecord&lt;&gt;(topic, d)` And then how to proceed with template.executeInTransaction?","title":"How to implement Kafka Transactions with Transaction Manager in Spring for Apache Kafka","body":"<p>I have to write a method to commit/send all the Kafka producer records on success and rollback all the records on failures based on the Kafka related exception occurred using the latest version of Spring Boot (Preferred) or with Java configuration.</p>\n<p>And I am planning to follow the same approach in this <a href=\"https://docs.spring.io/spring-kafka/reference/html/#transactions\" rel=\"nofollow noreferrer\">Spring Boot ref</a>, but not able to find out an example code.</p>\n<pre><code>public interface ProducerListener&lt;K, V&gt; {\n\nvoid onSuccess(ProducerRecord&lt;K, V&gt; producerRecord, RecordMetadata recordMetadata);\n\nvoid onError(ProducerRecord&lt;K, V&gt; producerRecord, RecordMetadata recordMetadata,\n        Exception exception);\n\n}\n</code></pre>\n<p>The NEW approach (Recently added)</p>\n<pre><code>public ProducerResult produceData(String topic, List&lt;Data&gt; data) {\n\n    data.forEach(\n            d -&gt; {\n                final ProducerRecord&lt;String, Data&gt; record = createRecord(topic, d);\n                CompletableFuture&lt;SendResult&lt;Integer, Data&gt;&gt; future = template.send(record);\n\n                future.whenComplete((result, ex) -&gt; {\n                    if (ex != null) {\n                        //Need to roll back the transaction\n                        return new ProducerResult(false);\n                    }\n                });\n            }\n    );\n    //Need to commit the transaction\n    return new ProducerResult(true);\n}\n</code></pre>\n<p>The method <code>createRecord(topic, d)</code> returns <code>new ProducerRecord&lt;&gt;(topic, d)</code> And then how to proceed with template.executeInTransaction?</p>\n"},{"tags":["java","spring"],"answers":[{"tags":[],"owner":{"display_name":"user73774"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1244068108,"creation_date":1244068108,"answer_id":947595,"question_id":947586,"body_markdown":"How about checksumming the JAR file and comparing it to the spring.jar files in the distributions from SpringSource?  Might take an hour or so to do the downloads, but it should be definitive.","title":"Need Spring version# - only have spring.jar file","body":"<p>How about checksumming the JAR file and comparing it to the spring.jar files in the distributions from SpringSource?  Might take an hour or so to do the downloads, but it should be definitive.</p>\n"},{"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"down_vote_count":0,"up_vote_count":79,"is_accepted":true,"score":79,"last_activity_date":1417647700,"creation_date":1244069189,"answer_id":947679,"question_id":947586,"body_markdown":"This will do it:\r\n\r\n    import org.springframework.core.SpringVersion;\r\n\r\n    public class VersionChecker\r\n    {\r\n        public static void main(String [] args)\r\n        {\r\n            System.out.println(&quot;version: &quot; + SpringVersion.getVersion());\r\n        }\r\n    }\r\n\r\nCompile and run this with spring.jar in your CLASSPATH and it&#39;ll display the version for you.  See the [javadocs][1] as well.\r\n\r\n\r\n  [1]: http://static.springframework.org/spring/docs/2.0.x/api/org/springframework/core/SpringVersion.html","title":"Need Spring version# - only have spring.jar file","body":"<p>This will do it:</p>\n\n<pre><code>import org.springframework.core.SpringVersion;\n\npublic class VersionChecker\n{\n    public static void main(String [] args)\n    {\n        System.out.println(\"version: \" + SpringVersion.getVersion());\n    }\n}\n</code></pre>\n\n<p>Compile and run this with spring.jar in your CLASSPATH and it'll display the version for you.  See the <a href=\"http://static.springframework.org/spring/docs/2.0.x/api/org/springframework/core/SpringVersion.html\" rel=\"noreferrer\">javadocs</a> as well.</p>\n"},{"tags":[],"owner":{"account_id":26963,"reputation":35564,"user_id":70616,"accept_rate":74,"display_name":"victor hugo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1244069994,"creation_date":1244069994,"answer_id":947734,"question_id":947586,"body_markdown":"According to [mvnrepository.com][1] 1.2.9 weights 2.2MB and 1.2.1 weights 2.0MB, that page also has a link for downloading both. I think the weight difference is enough for comparing the files. If you can&#39;t see the difference just checksum. If you can&#39;t see a relation neither with 1.2.1 nor 1.2.9 you can use the page to download any other version quickly (I use it often)\r\n\r\nNOTE: If your JAR is below 2.0MB then I&#39;m afraid duffymo has reason and your JAR is 1.2\r\n\r\n\r\n  [1]: http://www.mvnrepository.com/artifact/org.springframework/spring","title":"Need Spring version# - only have spring.jar file","body":"<p>According to <a href=\"http://www.mvnrepository.com/artifact/org.springframework/spring\" rel=\"nofollow noreferrer\">mvnrepository.com</a> 1.2.9 weights 2.2MB and 1.2.1 weights 2.0MB, that page also has a link for downloading both. I think the weight difference is enough for comparing the files. If you can't see the difference just checksum. If you can't see a relation neither with 1.2.1 nor 1.2.9 you can use the page to download any other version quickly (I use it often)</p>\n\n<p>NOTE: If your JAR is below 2.0MB then I'm afraid duffymo has reason and your JAR is 1.2</p>\n"},{"tags":[],"owner":{"account_id":40662,"reputation":20954,"user_id":117839,"accept_rate":74,"display_name":"Michael Wiles"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1244189877,"creation_date":1244189877,"answer_id":954804,"question_id":947586,"body_markdown":"You can try looking inside the jar&#39;s MANIFEST.MF in the META-INF directory - it should indicate what version yo&#39;re working with.","title":"Need Spring version# - only have spring.jar file","body":"<p>You can try looking inside the jar's MANIFEST.MF in the META-INF directory - it should indicate what version yo're working with.</p>\n"},{"tags":[],"owner":{"account_id":140068,"reputation":666,"user_id":346099,"display_name":"vehnae"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1281536360,"creation_date":1281536360,"answer_id":3459278,"question_id":947586,"body_markdown":"The really easy way is to get the MD5 sum of the archive and google it. Many sites that store .jar archives also index the MD5 sums which Google then finds easily. This works really well for pretty much any Java components.\r\n\r\n    $ md5sum spring-2.5.5.jar\r\n    82a2134b227f717066da4f4b059925d3\r\n\r\n[http://www.google.com/search?q=82a2134b227f717066da4f4b059925d3][1]\r\n\r\n\r\n  [1]: http://www.google.com/search?q=82a2134b227f717066da4f4b059925d3\r\n","title":"Need Spring version# - only have spring.jar file","body":"<p>The really easy way is to get the MD5 sum of the archive and google it. Many sites that store .jar archives also index the MD5 sums which Google then finds easily. This works really well for pretty much any Java components.</p>\n\n<pre><code>$ md5sum spring-2.5.5.jar\n82a2134b227f717066da4f4b059925d3\n</code></pre>\n\n<p><a href=\"http://www.google.com/search?q=82a2134b227f717066da4f4b059925d3\" rel=\"noreferrer\">http://www.google.com/search?q=82a2134b227f717066da4f4b059925d3</a></p>\n"},{"tags":[],"owner":{"account_id":3107921,"reputation":294,"user_id":2630344,"display_name":"misterGrosar"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1466167730,"creation_date":1466167730,"answer_id":37881981,"question_id":947586,"body_markdown":"You cann check it in pom.xml file in `&lt;org.springframework-version&gt;` tag.","title":"Need Spring version# - only have spring.jar file","body":"<p>You cann check it in pom.xml file in <code>&lt;org.springframework-version&gt;</code> tag.</p>\n"},{"tags":[],"owner":{"account_id":8871542,"reputation":7,"user_id":6625123,"display_name":"shaik rizwan"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1469381619,"creation_date":1469381619,"answer_id":38554827,"question_id":947586,"body_markdown":"go to MATA-INF directory and open manifest file.It will be there what version you are using.","title":"Need Spring version# - only have spring.jar file","body":"<p>go to MATA-INF directory and open manifest file.It will be there what version you are using.</p>\n"},{"tags":[],"owner":{"account_id":13259,"reputation":67754,"user_id":26510,"accept_rate":99,"display_name":"Brad Parks"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1597158812,"creation_date":1597158812,"answer_id":63361168,"question_id":947586,"body_markdown":"If your project uses Maven, you can run the following at the command line to see it:\r\n\r\n    $ mvn dependency:tree | grep org.springframework | grep &#39;spring-core:jar&#39;\r\n\r\n","title":"Need Spring version# - only have spring.jar file","body":"<p>If your project uses Maven, you can run the following at the command line to see it:</p>\n<pre><code>$ mvn dependency:tree | grep org.springframework | grep 'spring-core:jar'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3201379,"reputation":1388,"user_id":2703365,"display_name":"JR Sahoo.&#39;JS&#39;"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1608040290,"creation_date":1608040290,"answer_id":65307257,"question_id":947586,"body_markdown":"open the jar &amp; check in spring.jar &gt; META-INF &gt; MANIFEST.MF\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wtiMd.png","title":"Need Spring version# - only have spring.jar file","body":"<p>open the jar &amp; check in spring.jar &gt; META-INF &gt; MANIFEST.MF</p>\n<p><a href=\"https://i.stack.imgur.com/wtiMd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wtiMd.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":9672,"reputation":4912,"user_id":17967,"accept_rate":66,"display_name":"Gary Kephart"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75367,"favorite_count":0,"down_vote_count":0,"up_vote_count":38,"accepted_answer_id":947679,"answer_count":9,"score":38,"last_activity_date":1681133341,"creation_date":1244067938,"question_id":947586,"body_markdown":"I&#39;ve inherited an app that uses Spring. The original developers are not available. The Spring jar file is just &quot;spring.jar&quot;, so there&#39;s no version# in the filename to help me. I&#39;d like to download the Spring source corresponding to the jar file. The MANIFEST.MF file has &quot;Spring-Version: 1.2&quot; however that&#39;s not precise enough. I&#39;ve looked at version 1.2.1 and 1.2.9 and it doesn&#39;t match up quite right. The key thing is that `org.springframework.web.servlet.view.AbstractCachingViewResolver` has a `prepareView` method which is called from `resolveViewName` and it does not seem to be in 1.2.1 or 1.2.9.\r\n\r\nIs there any easy way to track down the right version?\r\n","title":"Need Spring version# - only have spring.jar file","body":"<p>I've inherited an app that uses Spring. The original developers are not available. The Spring jar file is just \"spring.jar\", so there's no version# in the filename to help me. I'd like to download the Spring source corresponding to the jar file. The MANIFEST.MF file has \"Spring-Version: 1.2\" however that's not precise enough. I've looked at version 1.2.1 and 1.2.9 and it doesn't match up quite right. The key thing is that <code>org.springframework.web.servlet.view.AbstractCachingViewResolver</code> has a <code>prepareView</code> method which is called from <code>resolveViewName</code> and it does not seem to be in 1.2.1 or 1.2.9.</p>\n\n<p>Is there any easy way to track down the right version?</p>\n"},{"tags":["java","apache","maven","csv","format"],"answers":[{"tags":[],"owner":{"account_id":20375424,"reputation":517,"user_id":14946729,"display_name":"grigouille"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681133168,"creation_date":1681133168,"answer_id":75977536,"question_id":36560513,"body_markdown":"IgnoreSurroundingSpaces ignore spaces around the double quotes. It does not trim inside the double quotes.\r\nWhat you want is :\r\n\r\n    String test = CSVFormat.DEFAULT.builder().setTrim(true).setQuoteMode(QuoteMode.ALL).build()\r\n    .format(&quot;&quot;,&quot; &quot;,&quot; Test1&quot;,&quot;Test2&quot;,&quot;   Test3     &quot;);\r\n    System.out.println(test);\r\n\r\n","title":"Apache CSV not working properly when withIgnoreSurroundingSpaces is used","body":"<p>IgnoreSurroundingSpaces ignore spaces around the double quotes. It does not trim inside the double quotes.\nWhat you want is :</p>\n<pre><code>String test = CSVFormat.DEFAULT.builder().setTrim(true).setQuoteMode(QuoteMode.ALL).build()\n.format(&quot;&quot;,&quot; &quot;,&quot; Test1&quot;,&quot;Test2&quot;,&quot;   Test3     &quot;);\nSystem.out.println(test);\n</code></pre>\n"}],"owner":{"account_id":4982414,"reputation":1977,"user_id":4006969,"accept_rate":60,"display_name":"Pratiyush Kumar Singh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":201,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75977536,"answer_count":1,"score":2,"last_activity_date":1681133168,"creation_date":1460414190,"question_id":36560513,"body_markdown":"While using Apache CSV with below maven dependency. I am getting un expected results.\r\n\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n        &lt;artifactId&gt;commons-csv&lt;/artifactId&gt;\r\n        &lt;version&gt;1.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nand code\r\n\r\n    \tString test = CSVFormat.DEFAULT.withIgnoreSurroundingSpaces(true)\r\n                      .format(&quot;&quot;,&quot; &quot;,&quot; Test1&quot;,&quot;Test2&quot;,&quot;   Test3     &quot;);\r\n    \tSystem.out.println(test);\r\n\r\nActual Output \r\n\r\n    &quot;&quot;,&quot; &quot;,&quot; Test1&quot;,Test2,&quot;   Test3     &quot;\r\nExpected Output\r\n\r\n    &quot;&quot;,&quot;&quot;,&quot;Test1&quot;,&quot;Test2&quot;,&quot;Test3&quot;\r\n\r\nErrors in output:\r\n1. Extra space is not trimmed.\r\n2. Test2 is printed without quotes is it normal behavior.\r\n","title":"Apache CSV not working properly when withIgnoreSurroundingSpaces is used","body":"<p>While using Apache CSV with below maven dependency. I am getting un expected results.</p>\n\n<pre><code>  &lt;dependency&gt;\n    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-csv&lt;/artifactId&gt;\n    &lt;version&gt;1.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>and code</p>\n\n<pre><code>    String test = CSVFormat.DEFAULT.withIgnoreSurroundingSpaces(true)\n                  .format(\"\",\" \",\" Test1\",\"Test2\",\"   Test3     \");\n    System.out.println(test);\n</code></pre>\n\n<p>Actual Output </p>\n\n<pre><code>\"\",\" \",\" Test1\",Test2,\"   Test3     \"\n</code></pre>\n\n<p>Expected Output</p>\n\n<pre><code>\"\",\"\",\"Test1\",\"Test2\",\"Test3\"\n</code></pre>\n\n<p>Errors in output:\n1. Extra space is not trimmed.\n2. Test2 is printed without quotes is it normal behavior.</p>\n"},{"tags":["java","jakarta-ee","jersey"],"comments":[{"owner":{"account_id":1014158,"reputation":2646,"user_id":1026104,"display_name":"jan.supol"},"score":0,"creation_date":1682253252,"post_id":75977532,"comment_id":134182851,"body_markdown":"Can you refer to `Container in Jakarta specification`?","body":"Can you refer to <code>Container in Jakarta specification</code>?"}],"owner":{"account_id":7689435,"reputation":161,"user_id":6789749,"display_name":"Rohan Sharma"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681133122,"creation_date":1681133122,"question_id":75977532,"body_markdown":"I have been trying to implement a JAX-RS based jersey server. I came across an interface ‘Container’ which can be managed using ‘ApplicationHandler’ class. My question is if this interface is directly related to the general definition of Container in Jakarta specification? ","title":"Is Container interface defined in jersey-server library is a Jakarta EE Container?","body":"<p>I have been trying to implement a JAX-RS based jersey server. I came across an interface ‘Container’ which can be managed using ‘ApplicationHandler’ class. My question is if this interface is directly related to the general definition of Container in Jakarta specification?</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":3,"creation_date":1681133580,"post_id":75977452,"comment_id":134003479,"body_markdown":"The `root` is a `Node`, and has all the properties that other nodes have. The `Scene` is not a `Node`, presumably because it needs properties that nodes don&#39;t need (e.g. a `camera`) and doesn&#39;t need properties that `Node`s have (bounds, transforms, layout coordinates, etc.). But you&#39;re asking here for us to guess the minds of the designers of the API, which is going to make this question primarily opinion based.","body":"The <code>root</code> is a <code>Node</code>, and has all the properties that other nodes have. The <code>Scene</code> is not a <code>Node</code>, presumably because it needs properties that nodes don&#39;t need (e.g. a <code>camera</code>) and doesn&#39;t need properties that <code>Node</code>s have (bounds, transforms, layout coordinates, etc.). But you&#39;re asking here for us to guess the minds of the designers of the API, which is going to make this question primarily opinion based."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":3,"creation_date":1681134283,"post_id":75977452,"comment_id":134003623,"body_markdown":"And if you could place an arbitrary number of `Node`s directly in the scene, then `Scene` would need a layout mechanism. That would either require replicating code (because `Node` subclasses already have a layout mechanism) or factoring layout into classes separate from the scene graph hierarchy, which is simply not the design choice that was made. Swing/AWT uses that mechanism, and many of the JavaFX API designers worked extensively on Swing, so that choice was made with a considerable amount of experience.","body":"And if you could place an arbitrary number of <code>Node</code>s directly in the scene, then <code>Scene</code> would need a layout mechanism. That would either require replicating code (because <code>Node</code> subclasses already have a layout mechanism) or factoring layout into classes separate from the scene graph hierarchy, which is simply not the design choice that was made. Swing/AWT uses that mechanism, and many of the JavaFX API designers worked extensively on Swing, so that choice was made with a considerable amount of experience."}],"answers":[{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1681133016,"creation_date":1681133016,"answer_id":75977523,"question_id":75977452,"body_markdown":"From [Understanding the JavaFX Architecture][1]&lt;sup&gt;1&lt;/sup&gt;\r\n&gt; The JavaFX scene graph ... is a hierarchical tree of nodes that represents all of the visual elements of the application&#39;s user interface\r\n\r\nA tree of nodes must have a single, root node.  \r\nEach node must have a parent node &amp;ndash; except, of-course, for the root node.\r\n\r\n&lt;sup&gt;1&lt;/sup&gt; Part of Oracle&#39;s JavaFX tutorials.\r\n\r\n  [1]: https://docs.oracle.com/javase/8/javafx/get-started-tutorial/jfx-architecture.htm","title":"What is the &quot;point&quot; of root node in JavaFX?","body":"<p>From <a href=\"https://docs.oracle.com/javase/8/javafx/get-started-tutorial/jfx-architecture.htm\" rel=\"nofollow noreferrer\">Understanding the JavaFX Architecture</a><sup>1</sup></p>\n<blockquote>\n<p>The JavaFX scene graph ... is a hierarchical tree of nodes that represents all of the visual elements of the application's user interface</p>\n</blockquote>\n<p>A tree of nodes must have a single, root node.<br />\nEach node must have a parent node – except, of-course, for the root node.</p>\n<p><sup>1</sup> Part of Oracle's JavaFX tutorials.</p>\n"}],"owner":{"account_id":28220672,"reputation":13,"user_id":21571451,"display_name":"jachai.sotaro"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1681136362,"answer_count":1,"score":-2,"last_activity_date":1681133016,"creation_date":1681132379,"question_id":75977452,"body_markdown":"Why `Scene` object needs to have a **root node**? Why `Scene` object can&#39;t be just a placeholder for collection of nodes without them being nested under the root one?","title":"What is the &quot;point&quot; of root node in JavaFX?","body":"<p>Why <code>Scene</code> object needs to have a <strong>root node</strong>? Why <code>Scene</code> object can't be just a placeholder for collection of nodes without them being nested under the root one?</p>\n"},{"tags":["java","lambda"],"answers":[{"tags":[],"owner":{"account_id":6518557,"reputation":2810,"user_id":5043481,"display_name":"zforgo"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1681042391,"creation_date":1681042391,"answer_id":75970433,"question_id":75969919,"body_markdown":"All lambda function are immutable because they reference the passed parameter but do not modify the parameter&#39;s value to reach their result. However these expressions can use variables defined in an outer scope, local variables must be (effectively) final.\r\n\r\nLuckily you can declare (and modify) multiple variables in for loop.\r\n\r\n\r\n```java\r\n@Test \r\nvoid testApplyToAllString() { \r\n    StapelMitArray&lt;String&gt; Stapel = new StapelMitArray(5);\r\n    for (int i = 0; i &lt; a.length; i++) { \r\n        Stapel.insert(&quot;String&quot; + i);\r\n    }\r\n    \r\n    for (int i = 0, count = 1; i &lt; a.length; i++, count++) {\r\n        Stapel.applyToAll(wert -&gt; wert.substring(0,count)); \r\n    } \r\n    assertEquals(&quot;Strin&quot;, Stapel.remove());\r\n    assertEquals(&quot;Stri&quot;, Stapel.remove());\r\n    assertEquals(&quot;Str&quot;, Stapel.remove());\r\n    assertEquals(&quot;St&quot;, Stapel.remove());\r\n    assertEquals(&quot;S&quot;, Stapel.remove()); \r\n}\r\n```\r\nBecause the `count` is always `i+1` it can simplify\r\n\r\n```java\r\nfor (int i = 0; i &lt; a.length; i++) {\r\n    Stapel.applyToAll(wert -&gt; wert.substring(0, i+1)); \r\n} \r\n```","title":"Increase a value in lambda function","body":"<p>All lambda function are immutable because they reference the passed parameter but do not modify the parameter's value to reach their result. However these expressions can use variables defined in an outer scope, local variables must be (effectively) final.</p>\n<p>Luckily you can declare (and modify) multiple variables in for loop.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test \nvoid testApplyToAllString() { \n    StapelMitArray&lt;String&gt; Stapel = new StapelMitArray(5);\n    for (int i = 0; i &lt; a.length; i++) { \n        Stapel.insert(&quot;String&quot; + i);\n    }\n    \n    for (int i = 0, count = 1; i &lt; a.length; i++, count++) {\n        Stapel.applyToAll(wert -&gt; wert.substring(0,count)); \n    } \n    assertEquals(&quot;Strin&quot;, Stapel.remove());\n    assertEquals(&quot;Stri&quot;, Stapel.remove());\n    assertEquals(&quot;Str&quot;, Stapel.remove());\n    assertEquals(&quot;St&quot;, Stapel.remove());\n    assertEquals(&quot;S&quot;, Stapel.remove()); \n}\n</code></pre>\n<p>Because the <code>count</code> is always <code>i+1</code> it can simplify</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (int i = 0; i &lt; a.length; i++) {\n    Stapel.applyToAll(wert -&gt; wert.substring(0, i+1)); \n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681132138,"creation_date":1681132138,"answer_id":75977418,"question_id":75969919,"body_markdown":"Make [variable] `count` an array having one element.\r\n```java\r\nint[] count = new int[1]; // all array elements implicitly initialized to 0 (zero)\r\nfor (int i = 0; i &lt; a.length; i++) {\r\n    count[0]++; \r\n    Stapel.applyToAll(wert -&gt; wert.substring(0, count[0])); \r\n}\r\n```\r\nAlternatively, use a &quot;wrapper&quot;, for example [AtomicInteger][1].\r\n```java\r\nAtomicInteger count = new AtomicInteger();\r\nfor (int i = 0; i &lt; a.length; i++) {\r\n    Stapel.applyToAll(wert -&gt; wert.substring(0, count.incrementAndGet())); \r\n}\r\n```\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/atomic/AtomicInteger.html","title":"Increase a value in lambda function","body":"<p>Make [variable] <code>count</code> an array having one element.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int[] count = new int[1]; // all array elements implicitly initialized to 0 (zero)\nfor (int i = 0; i &lt; a.length; i++) {\n    count[0]++; \n    Stapel.applyToAll(wert -&gt; wert.substring(0, count[0])); \n}\n</code></pre>\n<p>Alternatively, use a &quot;wrapper&quot;, for example <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/atomic/AtomicInteger.html\" rel=\"nofollow noreferrer\">AtomicInteger</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>AtomicInteger count = new AtomicInteger();\nfor (int i = 0; i &lt; a.length; i++) {\n    Stapel.applyToAll(wert -&gt; wert.substring(0, count.incrementAndGet())); \n}\n</code></pre>\n"}],"owner":{"account_id":26345092,"reputation":11,"user_id":20003608,"display_name":"FunkyPhil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1681132577,"creation_date":1681035351,"question_id":75969919,"body_markdown":"How do I increase a value in the following lambda expression?\r\n```java\r\nvalue -&gt; value + (count++)\r\n```\r\nIt is not working because the variable (`count`) has to be final.  \r\nIs there a workaround?\r\n\r\nThe code is just a project/test for the university, so nothing special.  \r\nThe two java `for` loops are just for testing reasons.\r\n\r\nHere&#39;s the code:\r\n```java\r\n@Test \r\nvoid testApplyToAllString() { \r\n    StapelMitArray&lt;String&gt; Stapel = new StapelMitArray(5);\r\n    for (int i = 0; i &lt; a.length; i++) { \r\n        Stapel.insert(&quot;String&quot; + i);\r\n    }\r\n    int count = 1; \r\n    for (int i = 0; i &lt; a.length; i++) {\r\n        count ++; \r\n        Stapel.applyToAll(wert -&gt; wert.substring(0, count)); \r\n    }\r\n    assertEquals(&quot;Strin&quot;, Stapel.remove());\r\n    assertEquals(&quot;Stri&quot;, Stapel.remove());\r\n    assertEquals(&quot;Str&quot;, Stapel.remove());\r\n    assertEquals(&quot;St&quot;, Stapel.remove());\r\n    assertEquals(&quot;S&quot;, Stapel.remove()); \r\n}\r\n```\r\nI tried this as well:\r\n```java\r\nfor (int i = 0; i &lt; a.length; i++) {\r\n    final int count = a.length - i;\r\n    Stapel.applyToAll(wert -&gt; wert.substring(0, count));\r\n}\r\n```\r\n\r\nIt worked for the first of the following `assertEquals`:\r\n```java\r\nassertEquals(&quot;S&quot;, Stapel.remove());\r\nassertEquals(&quot;St&quot;, Stapel.remove());\r\nassertEquals(&quot;Str&quot;, Stapel.remove());\r\nassertEquals(&quot;Stri&quot;, Stapel.remove());\r\nassertEquals(&quot;Strin&quot;, Stapel.remove());\r\n```\r\n","title":"Increase a value in lambda function","body":"<p>How do I increase a value in the following lambda expression?</p>\n<pre class=\"lang-java prettyprint-override\"><code>value -&gt; value + (count++)\n</code></pre>\n<p>It is not working because the variable (<code>count</code>) has to be final.<br />\nIs there a workaround?</p>\n<p>The code is just a project/test for the university, so nothing special.<br />\nThe two java <code>for</code> loops are just for testing reasons.</p>\n<p>Here's the code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test \nvoid testApplyToAllString() { \n    StapelMitArray&lt;String&gt; Stapel = new StapelMitArray(5);\n    for (int i = 0; i &lt; a.length; i++) { \n        Stapel.insert(&quot;String&quot; + i);\n    }\n    int count = 1; \n    for (int i = 0; i &lt; a.length; i++) {\n        count ++; \n        Stapel.applyToAll(wert -&gt; wert.substring(0, count)); \n    }\n    assertEquals(&quot;Strin&quot;, Stapel.remove());\n    assertEquals(&quot;Stri&quot;, Stapel.remove());\n    assertEquals(&quot;Str&quot;, Stapel.remove());\n    assertEquals(&quot;St&quot;, Stapel.remove());\n    assertEquals(&quot;S&quot;, Stapel.remove()); \n}\n</code></pre>\n<p>I tried this as well:</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (int i = 0; i &lt; a.length; i++) {\n    final int count = a.length - i;\n    Stapel.applyToAll(wert -&gt; wert.substring(0, count));\n}\n</code></pre>\n<p>It worked for the first of the following <code>assertEquals</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>assertEquals(&quot;S&quot;, Stapel.remove());\nassertEquals(&quot;St&quot;, Stapel.remove());\nassertEquals(&quot;Str&quot;, Stapel.remove());\nassertEquals(&quot;Stri&quot;, Stapel.remove());\nassertEquals(&quot;Strin&quot;, Stapel.remove());\n</code></pre>\n"},{"tags":["java","spring","spring-mvc","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":1,"up_vote_count":17,"is_accepted":true,"score":16,"last_activity_date":1681132479,"creation_date":1412587814,"answer_id":26213414,"question_id":26213050,"body_markdown":"You just need to define `dispatcherServlet` `@Bean`:\r\n\r\n    @Bean\r\n    public ServletRegistrationBean&lt;DispatcherServlet&gt; dispatcherServlet() {\r\n        DispatcherServletRegistrationBean registration = new DispatcherServletRegistrationBean(\r\n                new DispatcherServlet(), &quot;/&quot;);\r\n        registration.setAsyncSupported(true);\r\n        return registration;\r\n    }\r\n\r\nIt overrides that default one from `DispatcherServletAutoConfiguration`.\r\n\r\n","title":"Spring Boot enable &lt;async-supported&gt; like in web.xml","body":"<p>You just need to define <code>dispatcherServlet</code> <code>@Bean</code>:</p>\n<pre><code>@Bean\npublic ServletRegistrationBean&lt;DispatcherServlet&gt; dispatcherServlet() {\n    DispatcherServletRegistrationBean registration = new DispatcherServletRegistrationBean(\n            new DispatcherServlet(), &quot;/&quot;);\n    registration.setAsyncSupported(true);\n    return registration;\n}\n</code></pre>\n<p>It overrides that default one from <code>DispatcherServletAutoConfiguration</code>.</p>\n"},{"tags":[],"owner":{"account_id":5002957,"reputation":118,"user_id":4021379,"display_name":"AlexK"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1510033725,"creation_date":1505355990,"answer_id":46209538,"question_id":26213050,"body_markdown":"Maybe it worth to mention that Spring Boot has async-support enabled by default for dispatcher servlet and all filters\r\n\r\nQuotation from [github][1]:\r\n\r\n&gt; We automatically set async-supported to true\r\n&gt; because the DispatcherServlet knows how to work with such requests and\r\n&gt; it&#39;s basically up to individual controller methods to return something\r\n&gt; like a DeferredResult. Furthermore, we also set async-supported for\r\n&gt; any filter (provided via getServletFilters) along with setting the\r\n&gt; DispatcherType for each filter to include ASYNC.\r\n\r\nAt least my practice supports this statement\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/issues/1665","title":"Spring Boot enable &lt;async-supported&gt; like in web.xml","body":"<p>Maybe it worth to mention that Spring Boot has async-support enabled by default for dispatcher servlet and all filters</p>\n\n<p>Quotation from <a href=\"https://github.com/spring-projects/spring-boot/issues/1665\" rel=\"nofollow noreferrer\">github</a>:</p>\n\n<blockquote>\n  <p>We automatically set async-supported to true\n  because the DispatcherServlet knows how to work with such requests and\n  it's basically up to individual controller methods to return something\n  like a DeferredResult. Furthermore, we also set async-supported for\n  any filter (provided via getServletFilters) along with setting the\n  DispatcherType for each filter to include ASYNC.</p>\n</blockquote>\n\n<p>At least my practice supports this statement</p>\n"},{"tags":[],"owner":{"account_id":4009180,"reputation":4758,"user_id":3303074,"display_name":"Prasanth Rajendran"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1589905391,"creation_date":1589905391,"answer_id":61895963,"question_id":26213050,"body_markdown":"Even though I am late to the party I am posting my working solution for posterity.\r\n\r\nI had faced the same issue and tried the solution suggested by @Artem Bilan. But after debugging the code, I came to know that the `servletRegistrationBean.isAsyncSupported()` is by default `true`.\r\n\r\n[![enter image description here][1]][1].\r\n\r\nThe actual error is being generated by the code block is from the method `org.springframework.web.context.request.async.StandardServletAsyncWebRequest.startAsync()`  and we are getting this error when `getRequest().isAsyncSupported()` is `false`. Despite the `ServletRegistrationBean#asyncSupported` value is `true`, `HttpServletRequest#isAsyncSupported()` method value is always set to `false` for all API requests.\r\n \r\nThe Exerpt of the code block [Code Reference][2]\r\n```\r\nAssert.state(getRequest().isAsyncSupported(),\r\n\t\t\t\t&quot;Async support must be enabled on a servlet and for all filters involved &quot; +\r\n\t\t\t\t&quot;in async request processing. This is done in Java code using the Servlet API &quot; +\r\n\t\t\t\t&quot;or by adding \\&quot;&lt;async-supported&gt;true&lt;/async-supported&gt;\\&quot; to servlet and &quot; +\r\n\t\t\t\t&quot;filter declarations in web.xml.&quot;);\r\n\r\n```\r\n\r\nWhen analyzing further, I came to know that requestAttributes -&gt; Globals.ASYNC_SUPPORTED_ATTR decides whether the request has to be processed in an Async way or not. \r\n\r\nDuring the normal scenario, the requests do not have `Globals.ASYNC_SUPPORTED_ATTR` requestAttribute, hence `request.asyncSupported` will be false, if we manually add that requestAttribute `ASYNC_SUPPORTED_ATTR` value as true for all the requests using something like filters then `request#asyncSupported` value will be set to `true` as per the below code block [Code Reference][3]\r\n\r\n```\r\nspecialAttributes.put(Globals.ASYNC_SUPPORTED_ATTR,\r\n                new SpecialAttributeAdapter() {\r\n                    @Override\r\n                    public Object get(Request request, String name) {\r\n                        return request.asyncSupported;\r\n                    }\r\n\r\n                    @Override\r\n                    public void set(Request request, String name, Object value) {\r\n                        Boolean oldValue = request.asyncSupported;\r\n                        request.asyncSupported = (Boolean)value;\r\n                        request.notifyAttributeAssigned(name, value, oldValue);\r\n                    }\r\n                });\r\n\r\n```\t\t\t\t\r\n\r\nThough there is no explicit answer, I have implemented a workaround for this issue. To Summarize all the required changes are listed below:\r\n\r\n 1. Add a filter to set the request attribute as `request.setAttribute(Globals.ASYNC_SUPPORTED_ATTR, true)` \r\n\r\n```\r\n\r\n@Component\r\npublic class AsyncSupportFilter extends OncePerRequestFilter {\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws IOException, ServletException {\r\n        request.setAttribute(Globals.ASYNC_SUPPORTED_ATTR, true);\r\n        chain.doFilter(request, response);\r\n    }\r\n}\r\n\r\n```\r\n\r\n 2. Add filter to into your filter chain, in my case I have registered my filter into the spring context as below.\r\n\r\n ```\r\n\r\n@Component\r\n@EnableWebSecurity\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n    @Autowired\r\n    private AsyncSupportFilter asyncSupportFilter = null;\r\n    @Override\r\n    public void configure(HttpSecurity httpSecurity) {\r\n\r\n        httpSecurity.addFilter(asyncSupportFilter);\r\n        // we can add the filter before any filter like as httpSecurity.addFilterBefore(asyncSupportFilter , BasicAuthenticationFilter.class);\r\n    }\r\n}\r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/I8soK.jpg\r\n  [2]: https://github.com/spring-projects/spring-framework/blob/da071c1fceb48ac32ebab105d04a204d1ac8642e/spring-web/src/main/java/org/springframework/web/context/request/async/StandardServletAsyncWebRequest.java#L112\r\n  [3]: https://github.com/apache/tomcat/blob/61b8b76571bc10a0fd7e8199122ae96154992fad/java/org/apache/catalina/connector/Request.java#L3435","title":"Spring Boot enable &lt;async-supported&gt; like in web.xml","body":"<p>Even though I am late to the party I am posting my working solution for posterity.</p>\n\n<p>I had faced the same issue and tried the solution suggested by @Artem Bilan. But after debugging the code, I came to know that the <code>servletRegistrationBean.isAsyncSupported()</code> is by default <code>true</code>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/I8soK.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/I8soK.jpg\" alt=\"enter image description here\"></a>.</p>\n\n<p>The actual error is being generated by the code block is from the method <code>org.springframework.web.context.request.async.StandardServletAsyncWebRequest.startAsync()</code>  and we are getting this error when <code>getRequest().isAsyncSupported()</code> is <code>false</code>. Despite the <code>ServletRegistrationBean#asyncSupported</code> value is <code>true</code>, <code>HttpServletRequest#isAsyncSupported()</code> method value is always set to <code>false</code> for all API requests.</p>\n\n<p>The Exerpt of the code block <a href=\"https://github.com/spring-projects/spring-framework/blob/da071c1fceb48ac32ebab105d04a204d1ac8642e/spring-web/src/main/java/org/springframework/web/context/request/async/StandardServletAsyncWebRequest.java#L112\" rel=\"nofollow noreferrer\">Code Reference</a></p>\n\n<pre><code>Assert.state(getRequest().isAsyncSupported(),\n                \"Async support must be enabled on a servlet and for all filters involved \" +\n                \"in async request processing. This is done in Java code using the Servlet API \" +\n                \"or by adding \\\"&lt;async-supported&gt;true&lt;/async-supported&gt;\\\" to servlet and \" +\n                \"filter declarations in web.xml.\");\n\n</code></pre>\n\n<p>When analyzing further, I came to know that requestAttributes -> Globals.ASYNC_SUPPORTED_ATTR decides whether the request has to be processed in an Async way or not. </p>\n\n<p>During the normal scenario, the requests do not have <code>Globals.ASYNC_SUPPORTED_ATTR</code> requestAttribute, hence <code>request.asyncSupported</code> will be false, if we manually add that requestAttribute <code>ASYNC_SUPPORTED_ATTR</code> value as true for all the requests using something like filters then <code>request#asyncSupported</code> value will be set to <code>true</code> as per the below code block <a href=\"https://github.com/apache/tomcat/blob/61b8b76571bc10a0fd7e8199122ae96154992fad/java/org/apache/catalina/connector/Request.java#L3435\" rel=\"nofollow noreferrer\">Code Reference</a></p>\n\n<pre><code>specialAttributes.put(Globals.ASYNC_SUPPORTED_ATTR,\n                new SpecialAttributeAdapter() {\n                    @Override\n                    public Object get(Request request, String name) {\n                        return request.asyncSupported;\n                    }\n\n                    @Override\n                    public void set(Request request, String name, Object value) {\n                        Boolean oldValue = request.asyncSupported;\n                        request.asyncSupported = (Boolean)value;\n                        request.notifyAttributeAssigned(name, value, oldValue);\n                    }\n                });\n\n</code></pre>\n\n<p>Though there is no explicit answer, I have implemented a workaround for this issue. To Summarize all the required changes are listed below:</p>\n\n<ol>\n<li>Add a filter to set the request attribute as <code>request.setAttribute(Globals.ASYNC_SUPPORTED_ATTR, true)</code> </li>\n</ol>\n\n<pre><code>\n@Component\npublic class AsyncSupportFilter extends OncePerRequestFilter {\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws IOException, ServletException {\n        request.setAttribute(Globals.ASYNC_SUPPORTED_ATTR, true);\n        chain.doFilter(request, response);\n    }\n}\n\n</code></pre>\n\n<ol start=\"2\">\n<li>Add filter to into your filter chain, in my case I have registered my filter into the spring context as below.</li>\n</ol>\n\n<pre><code>\n@Component\n@EnableWebSecurity\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n   @Autowired\n   private AsyncSupportFilter asyncSupportFilter = null;\n   @Override\n   public void configure(HttpSecurity httpSecurity) {\n\n       httpSecurity.addFilter(asyncSupportFilter);\n       // we can add the filter before any filter like as httpSecurity.addFilterBefore(asyncSupportFilter , BasicAuthenticationFilter.class);\n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21301968,"reputation":1,"user_id":15677652,"display_name":"jl ss"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631065920,"creation_date":1631065920,"answer_id":69096101,"question_id":26213050,"body_markdown":"mysolution:\r\n\r\n    @WebFilter(value = {&quot;/subscriberinfo/query/single/*&quot;})\r\n    public class ...Filter{\r\n    } \r\n\r\n\r\nTO\r\n\r\n    @WebFilter(value = {&quot;/subscriberinfo/query/single/*&quot;}, asyncSupported = true)\r\n    public class ...Filter{\r\n    } ","title":"Spring Boot enable &lt;async-supported&gt; like in web.xml","body":"<p>mysolution:</p>\n<pre><code>@WebFilter(value = {&quot;/subscriberinfo/query/single/*&quot;})\npublic class ...Filter{\n} \n</code></pre>\n<p>TO</p>\n<pre><code>@WebFilter(value = {&quot;/subscriberinfo/query/single/*&quot;}, asyncSupported = true)\npublic class ...Filter{\n} \n</code></pre>\n"}],"owner":{"account_id":3222130,"reputation":415,"user_id":2719317,"accept_rate":75,"display_name":"Arthur Gurov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14040,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":26213414,"answer_count":4,"score":6,"last_activity_date":1681132479,"creation_date":1412586580,"question_id":26213050,"body_markdown":"I have a problem with Spring Boot configuration. I got exception on some mobile devices which should use sockets:\r\n\r\n    java.lang.IllegalArgumentException: Async support must be enabled on a servlet and for all filters involved in async request processing. This is done in Java code using the Servlet API or by adding &quot;&lt;async-supported&gt;true&lt;/async-supported&gt;&quot; to servlet and filter declarations in web.xml. Also you must use a Servlet 3.0+ container\r\n\t    at org.springframework.util.Assert.isTrue(Assert.java:65)\r\n\t\tat org.springframework.http.server.ServletServerHttpAsyncRequestControl.&lt;init&gt;(ServletServerHttpAsyncRequestControl.java:59)\r\n\t\tat org.springframework.http.server.ServletServerHttpRequest.getAsyncRequestControl(ServletServerHttpRequest.java:202)\r\n\t\tat org.springframework.web.socket.sockjs.transport.session.AbstractHttpSockJsSession.handleInitialRequest(AbstractHttpSockJsSession.java:202)\r\n\t\tat org.springframework.web.socket.sockjs.transport.handler.AbstractHttpSendingTransportHandler.handleRequestInternal(AbstractHttpSendingTransportHandler.java:66)\r\n\t\tat org.springframework.web.socket.sockjs.transport.handler.AbstractHttpSendingTransportHandler.handleRequest(AbstractHttpSendingTransportHandler.java:58)\r\n\t\tat org.springframework.web.socket.sockjs.transport.TransportHandlingSockJsService.handleTransportRequest(TransportHandlingSockJsService.java:254)\r\n\t\tat org.springframework.web.socket.sockjs.support.AbstractSockJsService.handleRequest(AbstractSockJsService.java:322)\r\n\t\tat org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler.handleRequest(SockJsHttpRequestHandler.java:88)\r\n\t\tat org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:51)\r\n\t\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:938)\r\n\t\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:870)\r\n\t\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:961)\r\n\t\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:863)\r\n\t\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:646)\r\n\t\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:837)\r\n\t\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:727)\r\n        ...\r\n\r\nAs I see from the exception, I have to enable async processing by adding &lt;async-supported&gt;true&lt;/async-supported&gt; into the web.xml file. But this is the problem because I don&#39;t have it - our project uses Spring Boot. \r\n\r\nIs there any way to provide the same functionality in Spring Boot like &lt;async-supported&gt; does?","title":"Spring Boot enable &lt;async-supported&gt; like in web.xml","body":"<p>I have a problem with Spring Boot configuration. I got exception on some mobile devices which should use sockets:</p>\n\n<pre><code>java.lang.IllegalArgumentException: Async support must be enabled on a servlet and for all filters involved in async request processing. This is done in Java code using the Servlet API or by adding \"&lt;async-supported&gt;true&lt;/async-supported&gt;\" to servlet and filter declarations in web.xml. Also you must use a Servlet 3.0+ container\n    at org.springframework.util.Assert.isTrue(Assert.java:65)\n    at org.springframework.http.server.ServletServerHttpAsyncRequestControl.&lt;init&gt;(ServletServerHttpAsyncRequestControl.java:59)\n    at org.springframework.http.server.ServletServerHttpRequest.getAsyncRequestControl(ServletServerHttpRequest.java:202)\n    at org.springframework.web.socket.sockjs.transport.session.AbstractHttpSockJsSession.handleInitialRequest(AbstractHttpSockJsSession.java:202)\n    at org.springframework.web.socket.sockjs.transport.handler.AbstractHttpSendingTransportHandler.handleRequestInternal(AbstractHttpSendingTransportHandler.java:66)\n    at org.springframework.web.socket.sockjs.transport.handler.AbstractHttpSendingTransportHandler.handleRequest(AbstractHttpSendingTransportHandler.java:58)\n    at org.springframework.web.socket.sockjs.transport.TransportHandlingSockJsService.handleTransportRequest(TransportHandlingSockJsService.java:254)\n    at org.springframework.web.socket.sockjs.support.AbstractSockJsService.handleRequest(AbstractSockJsService.java:322)\n    at org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler.handleRequest(SockJsHttpRequestHandler.java:88)\n    at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:51)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:938)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:870)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:961)\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:863)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:646)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:837)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)\n    ...\n</code></pre>\n\n<p>As I see from the exception, I have to enable async processing by adding true into the web.xml file. But this is the problem because I don't have it - our project uses Spring Boot. </p>\n\n<p>Is there any way to provide the same functionality in Spring Boot like  does?</p>\n"},{"tags":["java","android","class","libgdx"],"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":1,"creation_date":1681131475,"post_id":75977321,"comment_id":134003057,"body_markdown":"If `theClass = Class.forName(className);` fails, variable `theClass` the class remains `null`. In this scenario you need better error handling than simply printing stacktrace.","body":"If <code>theClass = Class.forName(className);</code> fails, variable <code>theClass</code> the class remains <code>null</code>. In this scenario you need better error handling than simply printing stacktrace."},{"owner":{"account_id":24269076,"reputation":29,"user_id":18217490,"display_name":"HermannGo"},"score":0,"creation_date":1681132456,"post_id":75977321,"comment_id":134003260,"body_markdown":"how can I do that?","body":"how can I do that?"},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1681133726,"post_id":75977321,"comment_id":134003515,"body_markdown":"One way is to throw unchecked exception and handle it properly somewhere else (if the error is not recoverable, this one is not, most of the time). Or you can return an empty list. Depends on what you need to happen if exception occurs when instantiating `theClass`","body":"One way is to throw unchecked exception and handle it properly somewhere else (if the error is not recoverable, this one is not, most of the time). Or you can return an empty list. Depends on what you need to happen if exception occurs when instantiating <code>theClass</code>"}],"answers":[{"tags":[],"owner":{"account_id":60456,"reputation":55961,"user_id":1054558,"accept_rate":100,"display_name":"Aaron"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681131901,"creation_date":1681131901,"answer_id":75977386,"question_id":75977321,"body_markdown":"This is happening because the result of the `try`/`catch` could result in `theClass` still being null.  One way to handle this would be to include your list logic _inside_ of the `try`, like this:\r\n\r\n    try\r\n    {\r\n        theClass = Class.forName(className);\r\n\r\n        for (Actor a : stage.getActors())\r\n        {\r\n            if ( theClass.isInstance( a ) )\r\n                list.add( (BaseActor)a );\r\n        }\r\n    }\r\n    catch (Exception error)\r\n    {  error.printStackTrace();  }\r\n\r\n    return list;\r\n\r\nAnd Chaosfire is right; you may need to do more than just print the stack trace.","title":"Java Nullpointer Exception in ArrayList (Lib GDX)","body":"<p>This is happening because the result of the <code>try</code>/<code>catch</code> could result in <code>theClass</code> still being null.  One way to handle this would be to include your list logic <em>inside</em> of the <code>try</code>, like this:</p>\n<pre><code>try\n{\n    theClass = Class.forName(className);\n\n    for (Actor a : stage.getActors())\n    {\n        if ( theClass.isInstance( a ) )\n            list.add( (BaseActor)a );\n    }\n}\ncatch (Exception error)\n{  error.printStackTrace();  }\n\nreturn list;\n</code></pre>\n<p>And Chaosfire is right; you may need to do more than just print the stack trace.</p>\n"}],"owner":{"account_id":24269076,"reputation":29,"user_id":18217490,"display_name":"HermannGo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1681131901,"creation_date":1681131305,"question_id":75977321,"body_markdown":"I have a problem with a &quot;Nullpointer Exception&quot; in LIb GDX.\r\nWhen calling the method &quot; public static ArrayList&lt;BaseActor&gt; getList(Stage stage, String className)&quot;\r\nI get the Nullpointer Exception.\r\n\r\nWould be very grateful for help...\r\n\r\n\r\n[![`enter image description here`][1]][1]\r\n\r\n\r\nHere the function:\r\n\r\n     public  static ArrayList&lt;BaseActor&gt; getList(Stage stage, String className)\r\n    {\r\n        ArrayList&lt;BaseActor&gt; list = new ArrayList&lt;BaseActor&gt;();\r\n\r\n        Class theClass;\r\n        theClass=null;\r\n\r\n        try\r\n        {\r\n            theClass = Class.forName(className);  }\r\n        catch (Exception error)\r\n        {  error.printStackTrace();  }\r\n\r\n        for (Actor a : stage.getActors())\r\n        {\r\n            if ( theClass.isInstance( a ) )\r\n                list.add( (BaseActor)a );\r\n        }\r\n\r\n        return list;\r\n    }\r\n\r\nHere is the call to the function:\r\n\r\n     public void update(float dt)\r\n    {\r\n\r\n        try{\r\n            for (BaseActor rockActor : BaseActor.getList(mainStage, &quot;Rock&quot;))\r\n                turtle.preventOverlap(rockActor);\r\n        }\r\n        catch (Exception error)\r\n        {  error.printStackTrace();  } ......\r\n...\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/niwEy.png","title":"Java Nullpointer Exception in ArrayList (Lib GDX)","body":"<p>I have a problem with a &quot;Nullpointer Exception&quot; in LIb GDX.\nWhen calling the method &quot; public static ArrayList getList(Stage stage, String className)&quot;\nI get the Nullpointer Exception.</p>\n<p>Would be very grateful for help...</p>\n<p><a href=\"https://i.stack.imgur.com/niwEy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/niwEy.png\" alt=\"enter image description here\" /></a></p>\n<p>Here the function:</p>\n<pre><code> public  static ArrayList&lt;BaseActor&gt; getList(Stage stage, String className)\n{\n    ArrayList&lt;BaseActor&gt; list = new ArrayList&lt;BaseActor&gt;();\n\n    Class theClass;\n    theClass=null;\n\n    try\n    {\n        theClass = Class.forName(className);  }\n    catch (Exception error)\n    {  error.printStackTrace();  }\n\n    for (Actor a : stage.getActors())\n    {\n        if ( theClass.isInstance( a ) )\n            list.add( (BaseActor)a );\n    }\n\n    return list;\n}\n</code></pre>\n<p>Here is the call to the function:</p>\n<pre><code> public void update(float dt)\n{\n\n    try{\n        for (BaseActor rockActor : BaseActor.getList(mainStage, &quot;Rock&quot;))\n            turtle.preventOverlap(rockActor);\n    }\n    catch (Exception error)\n    {  error.printStackTrace();  } ......\n</code></pre>\n<p>...</p>\n"},{"tags":["java","list"],"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":2,"creation_date":1681117646,"post_id":75975696,"comment_id":134000740,"body_markdown":"Why do you use `List&lt;List&lt;String&gt;&gt;`? Judging from the names, your class `Mitarbeiter` represents the elements, and your list should be `List&lt;Mitarbeiter&gt;`.","body":"Why do you use <code>List&lt;List&lt;String&gt;&gt;</code>? Judging from the names, your class <code>Mitarbeiter</code> represents the elements, and your list should be <code>List&lt;Mitarbeiter&gt;</code>."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1681117741,"post_id":75975696,"comment_id":134000755,"body_markdown":"You have `MitarbeiterList`... Why not use it?","body":"You have <code>MitarbeiterList</code>... Why not use it?"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":2,"creation_date":1681118459,"post_id":75975696,"comment_id":134000874,"body_markdown":"Aside from your main question, the private fields like `private static String mitarbeitername` or `mitarbeiterguid` or `mitarbeiteralter` shouldn&#39;t be `static`. The `static` members belong to *class* NOT to *instance*, so those fields would hold only *last* value it was set to them.","body":"Aside from your main question, the private fields like <code>private static String mitarbeitername</code> or <code>mitarbeiterguid</code> or <code>mitarbeiteralter</code> shouldn&#39;t be <code>static</code>. The <code>static</code> members belong to <i>class</i> NOT to <i>instance</i>, so those fields would hold only <i>last</i> value it was set to them."}],"answers":[{"tags":[],"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681118983,"creation_date":1681118983,"answer_id":75975875,"question_id":75975696,"body_markdown":"You can define a comparator that looks for the double field in the inner list:\r\n\r\n    // TODO: add a better name here\r\n    Comparator&lt;List&lt;String&gt;&gt; compareByDoubleDescending = Comparator.&lt;List&lt;String&gt;&gt;comparingDouble(\r\n        innerList -&gt; Double.parseDouble(innerList.get(2))).reversed();\r\n\r\nThen you can use `stream().sorted(...).toList()` that will create a new, sorted list instead of altering the one you have:\r\n\r\n    List&lt;List&lt;String&gt;&gt; sorted = Mitarbeiterdb.stream()\r\n    \t\t.sorted(compareByDoubleDescending)\r\n    \t\t.toList();\r\n    \r\n    System.out.println(sorted);\r\n\r\nOr you can use `Collections.sort`, as you mention. This will modify the current collection:\r\n\r\n    Collections.sort(Mitarbeiterdb, compareByDoubleDescending);\r\n    System.out.println(Mitarbeiterdb);\r\n\r\nPS: I would also encourage you to use an object instead of the inner list. Instead of this:\r\n\r\n    Mitarbeiterdb.get(0).add( &quot;Fischer&quot;);\r\n    Mitarbeiterdb.get(0).add( &quot;0815&quot;);\r\n    Mitarbeiterdb.get(0).add( &quot;0.782311&quot;);\r\n\r\nit will be much safer and clean to use something like this:\r\n\r\n    Mitarbeiterdb.add(new Player(&quot;Fischer&quot;, &quot;0815&quot;, &quot;0.782311&quot;));\r\n    \r\n","title":"Sorting a List&lt;List&lt;String&gt;&gt;","body":"<p>You can define a comparator that looks for the double field in the inner list:</p>\n<pre><code>// TODO: add a better name here\nComparator&lt;List&lt;String&gt;&gt; compareByDoubleDescending = Comparator.&lt;List&lt;String&gt;&gt;comparingDouble(\n    innerList -&gt; Double.parseDouble(innerList.get(2))).reversed();\n</code></pre>\n<p>Then you can use <code>stream().sorted(...).toList()</code> that will create a new, sorted list instead of altering the one you have:</p>\n<pre><code>List&lt;List&lt;String&gt;&gt; sorted = Mitarbeiterdb.stream()\n        .sorted(compareByDoubleDescending)\n        .toList();\n\nSystem.out.println(sorted);\n</code></pre>\n<p>Or you can use <code>Collections.sort</code>, as you mention. This will modify the current collection:</p>\n<pre><code>Collections.sort(Mitarbeiterdb, compareByDoubleDescending);\nSystem.out.println(Mitarbeiterdb);\n</code></pre>\n<p>PS: I would also encourage you to use an object instead of the inner list. Instead of this:</p>\n<pre><code>Mitarbeiterdb.get(0).add( &quot;Fischer&quot;);\nMitarbeiterdb.get(0).add( &quot;0815&quot;);\nMitarbeiterdb.get(0).add( &quot;0.782311&quot;);\n</code></pre>\n<p>it will be much safer and clean to use something like this:</p>\n<pre><code>Mitarbeiterdb.add(new Player(&quot;Fischer&quot;, &quot;0815&quot;, &quot;0.782311&quot;));\n</code></pre>\n"}],"owner":{"account_id":27542271,"reputation":3,"user_id":21018815,"display_name":"DooPexXx"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75975875,"answer_count":1,"score":0,"last_activity_date":1681131819,"creation_date":1681117341,"question_id":75975696,"body_markdown":"I&#39;m trying to sort a List with Collection.sort.\r\n\r\nI&#39;m searching for an approach to sort the values&#160;\r\n&quot;0.782311&quot; , &quot;0.45614&quot;  descendant.  \r\n```\r\npackage example.jdbc.movies;\r\n\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n/**\r\n * This class is used get links from HTML using Jsoup.\r\n * @author w3spoint\r\n */\r\npublic class Mitarbeiter {\r\n\r\n    private static String mitarbeitername =&quot;&quot;;\r\n\r\n    private static String mitarbeiterguid = &quot;&quot;;\r\n\r\n    private static int mitarbeiteralter = 0;\r\n\r\n    static List&lt;Mitarbeiter&gt; MitarbeiterList = new ArrayList&lt;&gt;();\r\n\r\n    public Mitarbeiter(String Name,String GUID,int Alter)\r\n    {\r\n        this.mitarbeitername = Name;\r\n        this.mitarbeiterguid = GUID;\r\n        this.mitarbeiteralter =Alter;\r\n    }\r\n\r\n    public String getMitarbeitername()\r\n    {\r\n        return this.mitarbeitername;\r\n    }\r\n\r\n    public String getGUID()\r\n    {\r\n        return this.mitarbeiterguid;\r\n    }\r\n\r\n    public int getAlter()\r\n    {\r\n        return this.mitarbeiteralter;\r\n    }\r\n\r\n    public void setMitarbeitername(String Name)\r\n    {\r\n        this.mitarbeitername = Name;\r\n    }\r\n\r\n    public void setGUID(String guid)\r\n    {\r\n        this.mitarbeiterguid = guid;\r\n    }\r\n\r\n    public void setAlter(int Alter)\r\n    {\r\n        this.mitarbeiteralter = Alter;\r\n    }\r\n\r\n    public static void main(String args[]){\r\n\r\n        List&lt;List&lt;String&gt;&gt; Mitarbeiterdb = new ArrayList&lt;List&lt;String&gt;&gt;();\r\n\r\n        Mitarbeiterdb.add(new ArrayList&lt;String&gt;());\r\n        Mitarbeiterdb.get(0).add( &quot;Fischer&quot;);\r\n        Mitarbeiterdb.get(0).add( &quot;0815&quot;);\r\n        Mitarbeiterdb.get(0).add( &quot;0.782311&quot;);\r\n        Mitarbeiterdb.add(new ArrayList&lt;String&gt;());\r\n        Mitarbeiterdb.get(1).add( &quot;Schulze&quot;);\r\n        Mitarbeiterdb.get(1).add( &quot;0817&quot;);\r\n        Mitarbeiterdb.get(1).add( &quot;0.124665&quot;);\r\n        Mitarbeiterdb.add(new ArrayList&lt;String&gt;());\r\n        Mitarbeiterdb.get(2).add( &quot;Wagner&quot;);\r\n        Mitarbeiterdb.get(2).add( &quot;2133&quot;);\r\n        Mitarbeiterdb.get(2).add(&quot;0.45614&quot;);\r\n\r\n\r\n        System.out.println(Mitarbeiterdb.get(1).get(0));\r\n\r\n      //  Collections.sort(Mitarbeiterdb, Comparator.comparing(item-&gt;Mitarbeiterdb.indexOf(item)));\r\n\r\n        int cntMitDB = 0;\r\n        /*do {\r\n            Arrays.sort((Double)Mitarbeiterdb.get(cntMitDB));\r\n\r\n\r\n            cntMitDB = cntMitDB +1;\r\n        }while(cntMitDB &lt; Mitarbeiterdb.size());*/\r\n\r\n    }\r\n}\r\n```\r\nI tried to sort in a Loop. ","title":"Sorting a List&lt;List&lt;String&gt;&gt;","body":"<p>I'm trying to sort a List with Collection.sort.</p>\n<p>I'm searching for an approach to sort the values \n&quot;0.782311&quot; , &quot;0.45614&quot;  descendant.</p>\n<pre><code>package example.jdbc.movies;\n\n\nimport java.util.ArrayList;\nimport java.util.List;\n\n/**\n * This class is used get links from HTML using Jsoup.\n * @author w3spoint\n */\npublic class Mitarbeiter {\n\n    private static String mitarbeitername =&quot;&quot;;\n\n    private static String mitarbeiterguid = &quot;&quot;;\n\n    private static int mitarbeiteralter = 0;\n\n    static List&lt;Mitarbeiter&gt; MitarbeiterList = new ArrayList&lt;&gt;();\n\n    public Mitarbeiter(String Name,String GUID,int Alter)\n    {\n        this.mitarbeitername = Name;\n        this.mitarbeiterguid = GUID;\n        this.mitarbeiteralter =Alter;\n    }\n\n    public String getMitarbeitername()\n    {\n        return this.mitarbeitername;\n    }\n\n    public String getGUID()\n    {\n        return this.mitarbeiterguid;\n    }\n\n    public int getAlter()\n    {\n        return this.mitarbeiteralter;\n    }\n\n    public void setMitarbeitername(String Name)\n    {\n        this.mitarbeitername = Name;\n    }\n\n    public void setGUID(String guid)\n    {\n        this.mitarbeiterguid = guid;\n    }\n\n    public void setAlter(int Alter)\n    {\n        this.mitarbeiteralter = Alter;\n    }\n\n    public static void main(String args[]){\n\n        List&lt;List&lt;String&gt;&gt; Mitarbeiterdb = new ArrayList&lt;List&lt;String&gt;&gt;();\n\n        Mitarbeiterdb.add(new ArrayList&lt;String&gt;());\n        Mitarbeiterdb.get(0).add( &quot;Fischer&quot;);\n        Mitarbeiterdb.get(0).add( &quot;0815&quot;);\n        Mitarbeiterdb.get(0).add( &quot;0.782311&quot;);\n        Mitarbeiterdb.add(new ArrayList&lt;String&gt;());\n        Mitarbeiterdb.get(1).add( &quot;Schulze&quot;);\n        Mitarbeiterdb.get(1).add( &quot;0817&quot;);\n        Mitarbeiterdb.get(1).add( &quot;0.124665&quot;);\n        Mitarbeiterdb.add(new ArrayList&lt;String&gt;());\n        Mitarbeiterdb.get(2).add( &quot;Wagner&quot;);\n        Mitarbeiterdb.get(2).add( &quot;2133&quot;);\n        Mitarbeiterdb.get(2).add(&quot;0.45614&quot;);\n\n\n        System.out.println(Mitarbeiterdb.get(1).get(0));\n\n      //  Collections.sort(Mitarbeiterdb, Comparator.comparing(item-&gt;Mitarbeiterdb.indexOf(item)));\n\n        int cntMitDB = 0;\n        /*do {\n            Arrays.sort((Double)Mitarbeiterdb.get(cntMitDB));\n\n\n            cntMitDB = cntMitDB +1;\n        }while(cntMitDB &lt; Mitarbeiterdb.size());*/\n\n    }\n}\n</code></pre>\n<p>I tried to sort in a Loop.</p>\n"},{"tags":["java","api","rest","rest-assured"],"comments":[{"owner":{"account_id":24018413,"reputation":65,"user_id":18001059,"display_name":"Adil Raza"},"score":0,"creation_date":1681118977,"post_id":75975864,"comment_id":134000970,"body_markdown":"@https://stackoverflow.com/users/7574461/lucas-nguyen-17","body":"@<a href=\"https://stackoverflow.com/users/7574461/lucas-nguyen-17\">stackoverflow.com/users/7574461/lucas-nguyen-17</a>"},{"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"score":0,"creation_date":1681119371,"post_id":75975864,"comment_id":134001022,"body_markdown":"a simple solution will be to directly add the authorization header before calling .build() ```.addHeader(&quot;Authorization&quot;, &quot;bearer eyJhbGciOiJFZERTQSJ9&quot;).build()```. Other options would b to set your user and password pass them through this `AuthenticationScheme auth` parameter.","body":"a simple solution will be to directly add the authorization header before calling .build() <code>.addHeader(&quot;Authorization&quot;, &quot;bearer eyJhbGciOiJFZERTQSJ9&quot;).build()</code>. Other options would b to set your user and password pass them through this <code>AuthenticationScheme auth</code> parameter."}],"answers":[{"tags":[],"owner":{"account_id":14110680,"reputation":16,"user_id":10193619,"display_name":"Zulpikar Uygur"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681131780,"creation_date":1681131780,"answer_id":75977382,"question_id":75975864,"body_markdown":"You should put your token in header. \r\n\r\n`\r\nreq.header(&quot;Authorization&quot;, &quot;Bearer &lt;your_token_here&gt;&quot;);\r\n`","title":"How to set bearer token in RequestSpecification spec builder in restAssured java","body":"<p>You should put your token in header.</p>\n<p><code>req.header(&quot;Authorization&quot;, &quot;Bearer &lt;your_token_here&gt;&quot;);</code></p>\n"}],"owner":{"account_id":24018413,"reputation":65,"user_id":18001059,"display_name":"Adil Raza"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":254,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75977382,"answer_count":1,"score":0,"last_activity_date":1681131780,"creation_date":1681118930,"question_id":75975864,"body_markdown":"I am trying to add my bearer token in the RequestSpecBuilder where my specbuilder\r\nlooks like \r\n\r\n    public static RequestSpecification requestSpecBuilderWithAuthorization(String baseURL, AuthenticationScheme auth) {\r\n        RequestSpecification req = new RequestSpecBuilder().setBaseUri(baseURL)\r\n                .setContentType(ContentType.JSON).setAccept(&quot;*/*&quot;)\r\n                .setAuth(auth)\r\n                .build();\r\n        return req;\r\n    }\r\n\r\nAnd let say I have a bearer token as &quot;bearer eyJhbGciOiJFZERTQSJ9&quot; . So my main objective here is to pass bearer token in RequestSpecification.\r\n\r\nSo how can I pass this token as a AuthenticationScheme in setAuth() or is it even possible to parameterised a specBuilder where I can pass bearer token.","title":"How to set bearer token in RequestSpecification spec builder in restAssured java","body":"<p>I am trying to add my bearer token in the RequestSpecBuilder where my specbuilder\nlooks like</p>\n<pre><code>public static RequestSpecification requestSpecBuilderWithAuthorization(String baseURL, AuthenticationScheme auth) {\n    RequestSpecification req = new RequestSpecBuilder().setBaseUri(baseURL)\n            .setContentType(ContentType.JSON).setAccept(&quot;*/*&quot;)\n            .setAuth(auth)\n            .build();\n    return req;\n}\n</code></pre>\n<p>And let say I have a bearer token as &quot;bearer eyJhbGciOiJFZERTQSJ9&quot; . So my main objective here is to pass bearer token in RequestSpecification.</p>\n<p>So how can I pass this token as a AuthenticationScheme in setAuth() or is it even possible to parameterised a specBuilder where I can pass bearer token.</p>\n"},{"tags":["java","algorithm","parallel-processing","primes","sieve-of-eratosthenes"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1681131604,"post_id":75977334,"comment_id":134003093,"body_markdown":"Option 2 has another problem: you have to sieve the first sqrt(n) numbers before you find the primes in them.","body":"Option 2 has another problem: you have to sieve the first sqrt(n) numbers before you find the primes in them."},{"owner":{"account_id":25333394,"reputation":23,"user_id":20415613,"display_name":"feter"},"score":0,"creation_date":1681131824,"post_id":75977334,"comment_id":134003136,"body_markdown":"Will this take to long though? Since to grt the primes up to sqrt(n) i only sieve(sqrt(sqrt(n)))","body":"Will this take to long though? Since to grt the primes up to sqrt(n) i only sieve(sqrt(sqrt(n)))"},{"owner":{"account_id":85671,"reputation":40847,"user_id":238704,"display_name":"President James K. Polk"},"score":1,"creation_date":1681131860,"post_id":75977334,"comment_id":134003139,"body_markdown":"It&#39;s good that you are doing this kind of analysis, now you should actually implement both ideas and look at the results.","body":"It&#39;s good that you are doing this kind of analysis, now you should actually implement both ideas and look at the results."},{"owner":{"account_id":25333394,"reputation":23,"user_id":20415613,"display_name":"feter"},"score":0,"creation_date":1681132073,"post_id":75977334,"comment_id":134003187,"body_markdown":"I have implemented the second one, and will do the first. Just wondering if there is a clear way to see it","body":"I have implemented the second one, and will do the first. Just wondering if there is a clear way to see it"},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1681135538,"post_id":75977334,"comment_id":134003875,"body_markdown":"Neither of these is really adequate.  I recommend looking up &quot;parallel sieve of Eratosthenes,&quot; or looking at, for example, https://stackoverflow.com/q/9307180/869736.","body":"Neither of these is really adequate.  I recommend looking up &quot;parallel sieve of Eratosthenes,&quot; or looking at, for example, <a href=\"https://stackoverflow.com/q/9307180/869736\">stackoverflow.com/q/9307180/869736</a>."}],"owner":{"account_id":25333394,"reputation":23,"user_id":20415613,"display_name":"feter"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1681135194,"answer_count":0,"score":1,"last_activity_date":1681131409,"creation_date":1681131409,"question_id":75977334,"body_markdown":"I have two ideas on how to parallelize the sieve\r\n\r\n 1. n is the number we want to find the primes up to, so what I do is divide the n into segments, where I each thread will get a segment, the threads will now sieve through their segment and store their primes in their local list of primes. In the end when all primes are finnished we will merge the list of primes.\r\n\r\n 2. we start by sequentially finding the primes up to sqrt(n) we now have a list of all the primes needed to sieve the rest of the numbers. I will now divide evenly the primes found to all the thrrads. Each thread will now sieve from the primes they have to n, in the end all primes will be marked i we will collect them\r\n\r\n\r\n\r\nWhich one is the best way? Option 2 has a problem since sll the threads has access to the byte array making it slower when synchin while option 1 does have their own locsl one","title":"Which way is the best way to do sieve of eratosthenes in parallel?","body":"<p>I have two ideas on how to parallelize the sieve</p>\n<ol>\n<li><p>n is the number we want to find the primes up to, so what I do is divide the n into segments, where I each thread will get a segment, the threads will now sieve through their segment and store their primes in their local list of primes. In the end when all primes are finnished we will merge the list of primes.</p>\n</li>\n<li><p>we start by sequentially finding the primes up to sqrt(n) we now have a list of all the primes needed to sieve the rest of the numbers. I will now divide evenly the primes found to all the thrrads. Each thread will now sieve from the primes they have to n, in the end all primes will be marked i we will collect them</p>\n</li>\n</ol>\n<p>Which one is the best way? Option 2 has a problem since sll the threads has access to the byte array making it slower when synchin while option 1 does have their own locsl one</p>\n"},{"tags":["java","installation","netbeans","reset","windows-11"],"comments":[{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1681129429,"post_id":75976320,"comment_id":134002701,"body_markdown":"Not all versions of NetBeans work with all versions of Java - for example, see the [download notes](https://netbeans.apache.org/download/nb122/nb122.html) for NetBeans 12.2, where it states &quot;_Apache NetBeans 12.2 runs on JDK LTS releases 8 and 11, as well as on JDK 15, i.e., the current JDK release at the time of this NetBeans release._&quot;.","body":"Not all versions of NetBeans work with all versions of Java - for example, see the <a href=\"https://netbeans.apache.org/download/nb122/nb122.html\" rel=\"nofollow noreferrer\">download notes</a> for NetBeans 12.2, where it states &quot;<i>Apache NetBeans 12.2 runs on JDK LTS releases 8 and 11, as well as on JDK 15, i.e., the current JDK release at the time of this NetBeans release.</i>&quot;."},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1681129463,"post_id":75976320,"comment_id":134002706,"body_markdown":"Downgrade Java (or install an additional, compatible version) or upgrade NetBeans.","body":"Downgrade Java (or install an additional, compatible version) or upgrade NetBeans."},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1681132268,"post_id":75976320,"comment_id":134003228,"body_markdown":"Now is 2023, Apache NetBeans 17.","body":"Now is 2023, Apache NetBeans 17."},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1681137028,"post_id":75976320,"comment_id":134004191,"body_markdown":"Just to add: It is often helpful to see what the NetBeans log file contains, in these situations. See [this comment](https://stackoverflow.com/questions/73832367/apache-netbeans-12-6-not-opening-on-windows-10#comment130375101_73832367) for notes on where to find the log file.","body":"Just to add: It is often helpful to see what the NetBeans log file contains, in these situations. See <a href=\"https://stackoverflow.com/questions/73832367/apache-netbeans-12-6-not-opening-on-windows-10#comment130375101_73832367\">this comment</a> for notes on where to find the log file."}],"answers":[{"tags":[],"owner":{"account_id":28265446,"reputation":1,"user_id":21609474,"display_name":"Caleb Wacht"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681131400,"creation_date":1681131400,"answer_id":75977333,"question_id":75976320,"body_markdown":"I&#39;m using a Netbeans on version 12.5 and jdk on version 8 or 11 depending on my project, maybe you can try do a downgrade on your jdk for using on your netbeans. If this process don&#39;t work to you, must be necessary reinstall your netbeans and indicates the new jdk on this process, it goes without saying the version of jdk can be changing acording to the dependency of your project ;).","title":"Netbeans 12.2 does not open on my win 11. I have already installed jdk 19.0.2. Does anyone know what is wrong?","body":"<p>I'm using a Netbeans on version 12.5 and jdk on version 8 or 11 depending on my project, maybe you can try do a downgrade on your jdk for using on your netbeans. If this process don't work to you, must be necessary reinstall your netbeans and indicates the new jdk on this process, it goes without saying the version of jdk can be changing acording to the dependency of your project ;).</p>\n"}],"owner":{"account_id":26952340,"reputation":1,"user_id":20521345,"display_name":"Psamuel_jr"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":594,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681131400,"creation_date":1681122883,"question_id":75976320,"body_markdown":"I have already installed jdk 19.0.2. Then I installed netbeans 12.2 but it does not open after the installation. I reset my pc but it still does not work\r\n\r\nI installed java before netbeans but before that I have netbeans installed and I uninstalled it some time ago and now it does not open after reinstallation\r\n","title":"Netbeans 12.2 does not open on my win 11. I have already installed jdk 19.0.2. Does anyone know what is wrong?","body":"<p>I have already installed jdk 19.0.2. Then I installed netbeans 12.2 but it does not open after the installation. I reset my pc but it still does not work</p>\n<p>I installed java before netbeans but before that I have netbeans installed and I uninstalled it some time ago and now it does not open after reinstallation</p>\n"},{"tags":["java","itext","digital-signature","itext7"],"comments":[{"owner":{"account_id":2674923,"reputation":9479,"user_id":2311528,"accept_rate":59,"display_name":"Lonzak"},"score":0,"creation_date":1681230977,"post_id":75977309,"comment_id":134021801,"body_markdown":"Do you have an example document? (Append mode is active so should be ok)","body":"Do you have an example document? (Append mode is active so should be ok)"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1681288864,"post_id":75977309,"comment_id":134030884,"body_markdown":"Indeed, please share an example before and after your code runs.","body":"Indeed, please share an example before and after your code runs."},{"owner":{"account_id":19243260,"reputation":106,"user_id":14062833,"display_name":"siamak"},"score":0,"creation_date":1681319839,"post_id":75977309,"comment_id":134038663,"body_markdown":"this is a pdf without any signature :\nhttps://drive.google.com/file/d/1n61SomPOf7H9PmDhZwCt-TdwpUfEqU9K/view?usp=sharing\nthis is a pdf with first signature:\nhttps://drive.google.com/file/d/1mGHFhRbUDMhatea0nh7LNeHVaLKH-k9i/view?usp=share_link\nafter I sign this document for second time I got the error, this is the document after second signature:\nhttps://drive.google.com/file/d/1AN7--YfHItqTlqqe3SvoGrG4JdjCX82T/view?usp=share_link","body":"this is a pdf without any signature : <a href=\"https://drive.google.com/file/d/1n61SomPOf7H9PmDhZwCt-TdwpUfEqU9K/view?usp=sharing\" rel=\"nofollow noreferrer\">drive.google.com/file/d/1n61SomPOf7H9PmDhZwCt-TdwpUfEqU9K/&hellip;</a> this is a pdf with first signature: <a href=\"https://drive.google.com/file/d/1mGHFhRbUDMhatea0nh7LNeHVaLKH-k9i/view?usp=share_link\" rel=\"nofollow noreferrer\">drive.google.com/file/d/1mGHFhRbUDMhatea0nh7LNeHVaLKH-k9i/&hellip;</a> after I sign this document for second time I got the error, this is the document after second signature: <a href=\"https://drive.google.com/file/d/1AN7--YfHItqTlqqe3SvoGrG4JdjCX82T/view?usp=share_link\" rel=\"nofollow noreferrer\">drive.google.com/file/d/1AN7--YfHItqTlqqe3SvoGrG4JdjCX82T/&hellip;</a>"},{"owner":{"account_id":19243260,"reputation":106,"user_id":14062833,"display_name":"siamak"},"score":0,"creation_date":1681320739,"post_id":75977309,"comment_id":134038879,"body_markdown":"and this is the document after I run the above code on the document with one signature(the document with placeholder for the second signature ):\nhttps://drive.google.com/file/d/1AN7--YfHItqTlqqe3SvoGrG4JdjCX82T/view?usp=share_link","body":"and this is the document after I run the above code on the document with one signature(the document with placeholder for the second signature ): <a href=\"https://drive.google.com/file/d/1AN7--YfHItqTlqqe3SvoGrG4JdjCX82T/view?usp=share_link\" rel=\"nofollow noreferrer\">drive.google.com/file/d/1AN7--YfHItqTlqqe3SvoGrG4JdjCX82T/&hellip;</a>"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1681405094,"post_id":75977309,"comment_id":134054746,"body_markdown":"You shared the same link twice.","body":"You shared the same link twice."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":1,"creation_date":1681406968,"post_id":75977309,"comment_id":134055116,"body_markdown":"Comparing one_signature.pdf and two_signature.pdf one sees that after adding the first signature but before adding the second one the PDF is processed in non-append mode. This appears not to happen in the code you show.","body":"Comparing one_signature.pdf and two_signature.pdf one sees that after adding the first signature but before adding the second one the PDF is processed in non-append mode. This appears not to happen in the code you show."},{"owner":{"account_id":19243260,"reputation":106,"user_id":14062833,"display_name":"siamak"},"score":0,"creation_date":1681732719,"post_id":75977309,"comment_id":134099049,"body_markdown":"thanks @mkl . my understanding from your comment is that append mode is playing an important role in the process. I will check all my code for the possible non append mode.","body":"thanks @mkl . my understanding from your comment is that append mode is playing an important role in the process. I will check all my code for the possible non append mode."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1681734533,"post_id":75977309,"comment_id":134099542,"body_markdown":"@siamak *&quot;my understanding from your comment is that append mode is playing an important role in the process&quot;* - Indeed it does! Whenever you manipulate a PDF without using append mode, you garble all included digital signatures and time stamps.","body":"@siamak <i>&quot;my understanding from your comment is that append mode is playing an important role in the process&quot;</i> - Indeed it does! Whenever you manipulate a PDF without using append mode, you garble all included digital signatures and time stamps."}],"owner":{"account_id":19243260,"reputation":106,"user_id":14062833,"display_name":"siamak"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":126,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681131166,"creation_date":1681131166,"question_id":75977309,"body_markdown":"I have the code below that add a **placeholder** for signature and write pre-sign file and then get a hash from it. \r\n\r\n**extra explanation:** (and after that I sent the **hash** to the client(where the private key is) to sign the hash and finally after that i will add the signed hash to pdf.)\r\n**Problem:** when I try to sign a pdf without the digital signature on it , this approach work perfect but if I want to sign a pdf that already has been signed by other people it will break the first signature.\r\n\r\n```\r\n    public PadesDigestRes digest(PadesDigestReq req) throws Exception {\r\n        try {\r\n            // create result object\r\n            PadesDigestRes result = new PadesDigestRes();\r\n\r\n            // generate id for pdf document\r\n            String fileId = UUID.randomUUID().toString();\r\n\r\n            // read pdf from base64 document\r\n            com.itextpdf.text.pdf.PdfReader pdfReader = new com.itextpdf.text.pdf.PdfReader(new ByteArrayInputStream(Base64Utils.decodeFromString(req.getBase64Document())));\r\n\r\n            // create destination file output stream\r\n            File file = new File(TEMP_DIR + fileId + &quot;.pdf&quot;);\r\n\r\n            // create stamper to add properties to the pdf document\r\n            PdfStamper pdfStamper = PdfStamper.createSignature(pdfReader, null, &#39;\\0&#39;, file, true);\r\n\r\n            // read previous signatures from pdf document\r\n            ArrayList&lt;String&gt; signatureNames = pdfStamper.getAcroFields().getSignatureNames();\r\n\r\n            // check if there is no signature field on the pdf document\r\n            // then add new page at the end of the pdf document to add new signature field\r\n            if (signatureNames.size() == 0) {\r\n                com.itextpdf.text.pdf.PdfReader tempReader = pdfStamper.getReader();\r\n                int numberOfPages = tempReader.getNumberOfPages();\r\n                pdfStamper.insertPage(numberOfPages + 1, tempReader.getPageSize(1));\r\n            }\r\n\r\n            // get signature appearance &amp;&amp; set required properties\r\n            com.itextpdf.text.pdf.PdfSignatureAppearance signatureAppearance = pdfStamper.getSignatureAppearance();\r\n            //read the user certificate \r\n            X509Certificate certificate = PadesUtil.getX509CertificateFromBase64String(req.getBase64Certificate());\r\n            signatureAppearance.setCertificate(certificate);\r\n            signatureAppearance.setReason(&quot;test&quot;);\r\n            signatureAppearance.setLocation(&quot;Berlin&quot;);\r\n\r\n            //read user data from certificate\r\n            X500Name certificateName = PadesUtil.getX500NameByCertificate(certificate);\r\n            RDN nationalCode = PadesUtil.getRDN(certificateName);\r\n            String signDate = PadesUtil.generateSignDate();\r\n\r\n            String signatureInfo = PadesUtil.generateSignatureStringInfo(signatureNames.size(), certificate, nationalCode, signDate);\r\n            \r\n            signatureAppearance.setLayer2Text(signatureInfo);\r\n            signatureAppearance.setLayer4Text(signatureInfo);\r\n\r\n            //building ui for the signature\r\n            float width = pdfStamper.getReader().getPageSizeWithRotation(1).getWidth();\r\n            int whoMany = (int) Math.floor(width / (150 + 25));\r\n            int signatureIndex = signatureNames.size() + 1;\r\n            float lowerLeftX = (((signatureIndex % whoMany) - 1) * 150 + 25) * signatureIndex;\r\n            float lowerLeftY = (signatureIndex / whoMany) * 100 + 50;\r\n            Rectangle rectangle = new Rectangle(lowerLeftX, lowerLeftY, 150, 100);\r\n            \r\n            \r\n            String fieldName = PadesUtil.generateUserInfo(certificate);\r\n            signatureAppearance.setVisibleSignature(rectangle, pdfStamper.getReader().getNumberOfPages(), fieldName);\r\n            \r\n            // set both digital and image signature on render mode\r\n            signatureAppearance.setRenderingMode(PdfSignatureAppearance.RenderingMode.DESCRIPTION);\r\n\r\n            // create signature container\r\n            com.itextpdf.text.pdf.security.ExternalBlankSignatureContainer external = new com.itextpdf.text.pdf.security.ExternalBlankSignatureContainer(com.itextpdf.text.pdf.PdfName.ADOBE_PPKLITE, com.itextpdf.text.pdf.PdfName.ADBE_PKCS7_DETACHED);\r\n            MakeSignature.signExternalContainer(signatureAppearance, external, 10000);\r\n\r\n            // read generated document(pre-signed pdf with placeholder) from file and get hashable byte range\r\n            PdfReader pdfReaderForHash = new PdfReader(TEMP_DIR + fileId + &quot;.pdf&quot;);\r\n            PdfDocument pdfDocument = new PdfDocument(pdfReaderForHash);\r\n            SignatureUtil signatureUtil = new SignatureUtil(pdfDocument);\r\n            PdfSignature pdfSignature = signatureUtil.getSignature(fieldName);\r\n\r\n            if (pdfSignature == null) {\r\n                throw (new com.itextpdf.kernel.PdfException(&quot;There is no field in the document with such name: {0}.&quot;))\r\n                        .setMessageParams(new Object[]{fieldName});\r\n            } else if (!signatureUtil.signatureCoversWholeDocument(fieldName)) {\r\n                throw (new PdfException(&quot;Signature with name {0} is not the last. It doesn&#39;t cover the whole document.&quot;))\r\n                        .setMessageParams(new Object[]{fieldName});\r\n            } else {\r\n                PdfArray byteRange = pdfSignature.getByteRange();\r\n                long[] gaps = byteRange.toLongArray();\r\n                IRandomAccessSource readerSource = pdfDocument.getReader().getSafeFile().createSourceView();\r\n                InputStream data = new RASInputStream((new RandomAccessSourceFactory()).createRanged(readerSource, gaps));\r\n\r\n                byte[] bytes = Files.readAllBytes(Paths.get(&quot;./path/to/chain.p7b&quot;));\r\n                Certificate[] certificates = readCertificatesFromPKCS7(bytes);\r\n\r\n                // create hash from whole document\r\n                ExternalDigest digestBC = new com.itextpdf.text.pdf.security.BouncyCastleDigest();\r\n                String algorithm = DigestAlgorithms.SHA256;\r\n                com.itextpdf.text.pdf.security.PdfPKCS7 pkcs7 = new com.itextpdf.text.pdf.security.PdfPKCS7(null, certificates, algorithm, null, digestBC, false);\r\n                byte[] documentHash = DigestAlgorithms.digest(data, digestBC.getMessageDigest(algorithm));\r\n                byte[] authedAttrBytes = pkcs7.getAuthenticatedAttributeBytes(documentHash, null, null, MakeSignature.CryptoStandard.CMS);\r\n\r\n                // set response fields\r\n                result.setFileId(fileId);\r\n                result.setBase64Pkcs7(Base64Utils.encodeToString(authedAttrBytes));\r\n                result.setBase64DocumentDigest(Base64Utils.encodeToString(documentHash));\r\n\r\n                return result;\r\n            }\r\n        } catch (IOException e) {\r\n            log.warn(&quot;Could not read document with base64document value : &quot; + e);\r\n            throw new IOException(e.getMessage());\r\n        } catch (DocumentException e) {\r\n            log.warn(&quot;Could not create signature using pdfStamper : &quot; + e);\r\n            throw new DocumentException(e.getMessage());\r\n        } catch (PdfException e) {\r\n            log.warn(e.getMessage());\r\n            throw new PdfException(e.getMessage());\r\n        } catch (Exception e) {\r\n            log.warn(&quot;Internal error : &quot; + e);\r\n            throw new Exception(e.getMessage());\r\n        }\r\n    }\r\n```\r\n\r\n\r\n\r\nThis is a error that i get from the Adobe Acrobat Reader&quot;[![the second signature is ok but it broke the first valid signature](https://i.stack.imgur.com/UInwL.png)](https://i.stack.imgur.com/UInwL.png)\r\n","title":"signing a document with existing digital signature","body":"<p>I have the code below that add a <strong>placeholder</strong> for signature and write pre-sign file and then get a hash from it.</p>\n<p><strong>extra explanation:</strong> (and after that I sent the <strong>hash</strong> to the client(where the private key is) to sign the hash and finally after that i will add the signed hash to pdf.)\n<strong>Problem:</strong> when I try to sign a pdf without the digital signature on it , this approach work perfect but if I want to sign a pdf that already has been signed by other people it will break the first signature.</p>\n<pre><code>    public PadesDigestRes digest(PadesDigestReq req) throws Exception {\n        try {\n            // create result object\n            PadesDigestRes result = new PadesDigestRes();\n\n            // generate id for pdf document\n            String fileId = UUID.randomUUID().toString();\n\n            // read pdf from base64 document\n            com.itextpdf.text.pdf.PdfReader pdfReader = new com.itextpdf.text.pdf.PdfReader(new ByteArrayInputStream(Base64Utils.decodeFromString(req.getBase64Document())));\n\n            // create destination file output stream\n            File file = new File(TEMP_DIR + fileId + &quot;.pdf&quot;);\n\n            // create stamper to add properties to the pdf document\n            PdfStamper pdfStamper = PdfStamper.createSignature(pdfReader, null, '\\0', file, true);\n\n            // read previous signatures from pdf document\n            ArrayList&lt;String&gt; signatureNames = pdfStamper.getAcroFields().getSignatureNames();\n\n            // check if there is no signature field on the pdf document\n            // then add new page at the end of the pdf document to add new signature field\n            if (signatureNames.size() == 0) {\n                com.itextpdf.text.pdf.PdfReader tempReader = pdfStamper.getReader();\n                int numberOfPages = tempReader.getNumberOfPages();\n                pdfStamper.insertPage(numberOfPages + 1, tempReader.getPageSize(1));\n            }\n\n            // get signature appearance &amp;&amp; set required properties\n            com.itextpdf.text.pdf.PdfSignatureAppearance signatureAppearance = pdfStamper.getSignatureAppearance();\n            //read the user certificate \n            X509Certificate certificate = PadesUtil.getX509CertificateFromBase64String(req.getBase64Certificate());\n            signatureAppearance.setCertificate(certificate);\n            signatureAppearance.setReason(&quot;test&quot;);\n            signatureAppearance.setLocation(&quot;Berlin&quot;);\n\n            //read user data from certificate\n            X500Name certificateName = PadesUtil.getX500NameByCertificate(certificate);\n            RDN nationalCode = PadesUtil.getRDN(certificateName);\n            String signDate = PadesUtil.generateSignDate();\n\n            String signatureInfo = PadesUtil.generateSignatureStringInfo(signatureNames.size(), certificate, nationalCode, signDate);\n            \n            signatureAppearance.setLayer2Text(signatureInfo);\n            signatureAppearance.setLayer4Text(signatureInfo);\n\n            //building ui for the signature\n            float width = pdfStamper.getReader().getPageSizeWithRotation(1).getWidth();\n            int whoMany = (int) Math.floor(width / (150 + 25));\n            int signatureIndex = signatureNames.size() + 1;\n            float lowerLeftX = (((signatureIndex % whoMany) - 1) * 150 + 25) * signatureIndex;\n            float lowerLeftY = (signatureIndex / whoMany) * 100 + 50;\n            Rectangle rectangle = new Rectangle(lowerLeftX, lowerLeftY, 150, 100);\n            \n            \n            String fieldName = PadesUtil.generateUserInfo(certificate);\n            signatureAppearance.setVisibleSignature(rectangle, pdfStamper.getReader().getNumberOfPages(), fieldName);\n            \n            // set both digital and image signature on render mode\n            signatureAppearance.setRenderingMode(PdfSignatureAppearance.RenderingMode.DESCRIPTION);\n\n            // create signature container\n            com.itextpdf.text.pdf.security.ExternalBlankSignatureContainer external = new com.itextpdf.text.pdf.security.ExternalBlankSignatureContainer(com.itextpdf.text.pdf.PdfName.ADOBE_PPKLITE, com.itextpdf.text.pdf.PdfName.ADBE_PKCS7_DETACHED);\n            MakeSignature.signExternalContainer(signatureAppearance, external, 10000);\n\n            // read generated document(pre-signed pdf with placeholder) from file and get hashable byte range\n            PdfReader pdfReaderForHash = new PdfReader(TEMP_DIR + fileId + &quot;.pdf&quot;);\n            PdfDocument pdfDocument = new PdfDocument(pdfReaderForHash);\n            SignatureUtil signatureUtil = new SignatureUtil(pdfDocument);\n            PdfSignature pdfSignature = signatureUtil.getSignature(fieldName);\n\n            if (pdfSignature == null) {\n                throw (new com.itextpdf.kernel.PdfException(&quot;There is no field in the document with such name: {0}.&quot;))\n                        .setMessageParams(new Object[]{fieldName});\n            } else if (!signatureUtil.signatureCoversWholeDocument(fieldName)) {\n                throw (new PdfException(&quot;Signature with name {0} is not the last. It doesn't cover the whole document.&quot;))\n                        .setMessageParams(new Object[]{fieldName});\n            } else {\n                PdfArray byteRange = pdfSignature.getByteRange();\n                long[] gaps = byteRange.toLongArray();\n                IRandomAccessSource readerSource = pdfDocument.getReader().getSafeFile().createSourceView();\n                InputStream data = new RASInputStream((new RandomAccessSourceFactory()).createRanged(readerSource, gaps));\n\n                byte[] bytes = Files.readAllBytes(Paths.get(&quot;./path/to/chain.p7b&quot;));\n                Certificate[] certificates = readCertificatesFromPKCS7(bytes);\n\n                // create hash from whole document\n                ExternalDigest digestBC = new com.itextpdf.text.pdf.security.BouncyCastleDigest();\n                String algorithm = DigestAlgorithms.SHA256;\n                com.itextpdf.text.pdf.security.PdfPKCS7 pkcs7 = new com.itextpdf.text.pdf.security.PdfPKCS7(null, certificates, algorithm, null, digestBC, false);\n                byte[] documentHash = DigestAlgorithms.digest(data, digestBC.getMessageDigest(algorithm));\n                byte[] authedAttrBytes = pkcs7.getAuthenticatedAttributeBytes(documentHash, null, null, MakeSignature.CryptoStandard.CMS);\n\n                // set response fields\n                result.setFileId(fileId);\n                result.setBase64Pkcs7(Base64Utils.encodeToString(authedAttrBytes));\n                result.setBase64DocumentDigest(Base64Utils.encodeToString(documentHash));\n\n                return result;\n            }\n        } catch (IOException e) {\n            log.warn(&quot;Could not read document with base64document value : &quot; + e);\n            throw new IOException(e.getMessage());\n        } catch (DocumentException e) {\n            log.warn(&quot;Could not create signature using pdfStamper : &quot; + e);\n            throw new DocumentException(e.getMessage());\n        } catch (PdfException e) {\n            log.warn(e.getMessage());\n            throw new PdfException(e.getMessage());\n        } catch (Exception e) {\n            log.warn(&quot;Internal error : &quot; + e);\n            throw new Exception(e.getMessage());\n        }\n    }\n</code></pre>\n<p>This is a error that i get from the Adobe Acrobat Reader&quot;<a href=\"https://i.stack.imgur.com/UInwL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UInwL.png\" alt=\"the second signature is ok but it broke the first valid signature\" /></a></p>\n"},{"tags":["java","linked-list","reverse"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1681125811,"post_id":75976574,"comment_id":134002067,"body_markdown":"`reverseList` needs to create a new set of nodes.","body":"<code>reverseList</code> needs to create a new set of nodes."},{"owner":{"account_id":27107994,"reputation":3,"user_id":20653559,"display_name":"Anchal Shivank"},"score":0,"creation_date":1681128517,"post_id":75976574,"comment_id":134002543,"body_markdown":"@tgdavies Do I need to recreate the original list while reversing?","body":"@tgdavies Do I need to recreate the original list while reversing?"}],"answers":[{"tags":[],"owner":{"account_id":204659,"reputation":37539,"user_id":453005,"accept_rate":100,"display_name":"DwB"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681130572,"creation_date":1681130572,"answer_id":75977218,"question_id":75976574,"body_markdown":"This sounds like a class project.\r\n\r\nTry this:\r\n\r\n  1. Run the original list and store each value on a stack.\r\nWhen you finish the original list the stack (top down) will contain the values\r\nin reverse order.\r\n  1. pop the stack and add the values to a new list.","title":"How to reverse a linked list without affecting the original one?","body":"<p>This sounds like a class project.</p>\n<p>Try this:</p>\n<ol>\n<li>Run the original list and store each value on a stack.\nWhen you finish the original list the stack (top down) will contain the values\nin reverse order.</li>\n<li>pop the stack and add the values to a new list.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":9779820,"reputation":9709,"user_id":7248342,"display_name":"Thomas Fritsch"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681130958,"creation_date":1681130958,"answer_id":75977279,"question_id":75976574,"body_markdown":"As @tgdavies already commented, you need to build a new list from scratch.\r\nWalk through the original list from head to tail,\r\nand while walking build the reversed list from tail to head.\r\n\r\n    public ListNode reverseList(ListNode head) {\r\n\t   \tListNode reversed = null;\r\n    \tListNode curr = head;\r\n    \twhile (curr != null) {\r\n    \t\treversed = new ListNode(curr.val, reversed);\r\n    \t\tcurr = curr.next;\r\n    \t}\r\n    \treturn reversed;\r\n    }\r\n\r\n","title":"How to reverse a linked list without affecting the original one?","body":"<p>As @tgdavies already commented, you need to build a new list from scratch.\nWalk through the original list from head to tail,\nand while walking build the reversed list from tail to head.</p>\n<pre><code>public ListNode reverseList(ListNode head) {\n    ListNode reversed = null;\n    ListNode curr = head;\n    while (curr != null) {\n        reversed = new ListNode(curr.val, reversed);\n        curr = curr.next;\n    }\n    return reversed;\n}\n</code></pre>\n"}],"owner":{"account_id":27107994,"reputation":3,"user_id":20653559,"display_name":"Anchal Shivank"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75977279,"answer_count":2,"score":0,"last_activity_date":1681130958,"creation_date":1681125170,"question_id":75976574,"body_markdown":"I want to reverse a LinkedList, I wrote the basic program as follows: -\r\n\r\n```\r\npublic class ListNode{\r\n    int val;\r\n    ListNode next;\r\n    ListNode(){}\r\n    ListNode(int val){this.val = val;}\r\n    ListNode(int val, ListNode next){this.val = val; this.next = next;}\r\n}\r\n```\r\n\r\n```\r\n   public ListNode reverseList(ListNode head) {\r\n        ListNode prev = null;\r\n        ListNode curr = head;\r\n        while(curr!=null){\r\n            ListNode next = curr.next;\r\n            curr.next = prev;\r\n            prev = curr;\r\n            curr = next;  \r\n\r\n        }\r\n        return prev;\r\n    }\r\n```\r\n\r\nHere is the program to print the LinkedList\r\n\r\n```\r\n    public void print(ListNode curr){\r\n        while(curr!=null){\r\n            System.out.print(curr.val+&quot; &quot;);\r\n            curr = curr.next;\r\n        }\r\n        System.out.println();\r\n    }\r\n```\r\n\r\nNow my list is \\[1,2,21\\]\r\n\r\nwhen I print it output is as follows\r\n\r\n```\r\n1 2 3 1\r\n```\r\n\r\nwhen I reverse it and print head and reversed the output is as follows: -\r\n\r\n```\r\nListNode reversed = reverseList(head);\r\nprint(head);\r\nprint(reversed)\r\n```\r\n\r\n**Output**\r\n\r\n```\r\n1\r\n1 3 2 1\r\n```\r\n\r\nCan someone explain how to keep head unchanged?\r\n\r\nI tried to reverse the linked list. I was successful but after reversing the list , it altered my current list. I want to keep it unchanged.","title":"How to reverse a linked list without affecting the original one?","body":"<p>I want to reverse a LinkedList, I wrote the basic program as follows: -</p>\n<pre><code>public class ListNode{\n    int val;\n    ListNode next;\n    ListNode(){}\n    ListNode(int val){this.val = val;}\n    ListNode(int val, ListNode next){this.val = val; this.next = next;}\n}\n</code></pre>\n<pre><code>   public ListNode reverseList(ListNode head) {\n        ListNode prev = null;\n        ListNode curr = head;\n        while(curr!=null){\n            ListNode next = curr.next;\n            curr.next = prev;\n            prev = curr;\n            curr = next;  \n\n        }\n        return prev;\n    }\n</code></pre>\n<p>Here is the program to print the LinkedList</p>\n<pre><code>    public void print(ListNode curr){\n        while(curr!=null){\n            System.out.print(curr.val+&quot; &quot;);\n            curr = curr.next;\n        }\n        System.out.println();\n    }\n</code></pre>\n<p>Now my list is [1,2,21]</p>\n<p>when I print it output is as follows</p>\n<pre><code>1 2 3 1\n</code></pre>\n<p>when I reverse it and print head and reversed the output is as follows: -</p>\n<pre><code>ListNode reversed = reverseList(head);\nprint(head);\nprint(reversed)\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>1\n1 3 2 1\n</code></pre>\n<p>Can someone explain how to keep head unchanged?</p>\n<p>I tried to reverse the linked list. I was successful but after reversing the list , it altered my current list. I want to keep it unchanged.</p>\n"},{"tags":["java","spring","spring-boot","spring-validation"],"answers":[{"tags":[],"owner":{"account_id":6518557,"reputation":2810,"user_id":5043481,"display_name":"zforgo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681126307,"creation_date":1681126307,"answer_id":75976714,"question_id":75976477,"body_markdown":"Based on stacktrace bean validation didn&#39;t stopped working. It works, but all fields in dto are null.\r\n\r\nThat&#39;s because wrong annotation used on method parameters.\r\nUsing correct annotation will solve the problem\r\n\r\n```java\r\n// use this annotation to specify @RequestBody\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\n\r\nResponseEntity&lt;Object&gt; registerUser(\r\n        @RequestBody @Valid RegisterDto register,\r\n        HttpServletRequest request,\r\n        Locale locale);","title":"Spring Validation seemed to stop working (Logging that all fields are null)","body":"<p>Based on stacktrace bean validation didn't stopped working. It works, but all fields in dto are null.</p>\n<p>That's because wrong annotation used on method parameters.\nUsing correct annotation will solve the problem</p>\n<pre class=\"lang-java prettyprint-override\"><code>// use this annotation to specify @RequestBody\nimport org.springframework.web.bind.annotation.RequestBody;\n\nResponseEntity&lt;Object&gt; registerUser(\n        @RequestBody @Valid RegisterDto register,\n        HttpServletRequest request,\n        Locale locale);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16856617,"reputation":51,"user_id":12188392,"display_name":"Michael"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681130846,"creation_date":1681130846,"answer_id":75977265,"question_id":75976477,"body_markdown":"Okay so...\r\nI had to remove Lombok&#39;s `@Data` annotation and use only `@Getter` and `@Setter` annotations instead, and I also had to add Spring&#39;s `@RequestBody` in addition to Swagger&#39;s `@RequestBody`...\r\n\r\nSome articles said that the Data annotation also generates hashCode and toString methods, which might not work well with Jacksons Serialization","title":"Spring Validation seemed to stop working (Logging that all fields are null)","body":"<p>Okay so...\nI had to remove Lombok's <code>@Data</code> annotation and use only <code>@Getter</code> and <code>@Setter</code> annotations instead, and I also had to add Spring's <code>@RequestBody</code> in addition to Swagger's <code>@RequestBody</code>...</p>\n<p>Some articles said that the Data annotation also generates hashCode and toString methods, which might not work well with Jacksons Serialization</p>\n"}],"owner":{"account_id":16856617,"reputation":51,"user_id":12188392,"display_name":"Michael"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":566,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1681130846,"creation_date":1681124238,"question_id":75976477,"body_markdown":"So I have an endpoint to register a user, that takes a RegisterDto with validations as RequestBody. I sadly don&#39;t know since when the validation stopped working, but at the moment even with every field filled out it returns a bad request and logs the following:\r\n`2023-04-10T12:50:57.981+02:00  WARN 1836 --- [nio-8080-exec-2] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity&lt;java.lang.Object&gt; app.dcuobroker.backend.boundary.v1.api.auth.AuthApiImpl.registerUser(app.dcuobroker.backend.boundary.v1.dto.auth.RegisterDto,jakarta.servlet.http.HttpServletRequest,java.util.Locale) with 6 errors: [Field error in object &#39;registerDto&#39; on field &#39;username&#39;: rejected value [null]; codes [NotNull.registerDto.username,NotNull.username,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [registerDto.username,username]; arguments []; default message [username]]; default message [darf nicht null sein]] [Field error in object &#39;registerDto&#39; on field &#39;password&#39;: rejected value [null]; codes [NotBlank.registerDto.password,NotBlank.password,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [registerDto.password,password]; arguments []; default message [password]]; default message [darf nicht leer sein]] [Field error in object &#39;registerDto&#39; on field &#39;username&#39;: rejected value [null]; codes [NotBlank.registerDto.username,NotBlank.username,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [registerDto.username,username]; arguments []; default message [username]]; default message [darf nicht leer sein]] [Field error in object &#39;registerDto&#39; on field &#39;email&#39;: rejected value [null]; codes [NotNull.registerDto.email,NotNull.email,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [registerDto.email,email]; arguments []; default message [email]]; default message [darf nicht null sein]] [Field error in object &#39;registerDto&#39; on field &#39;password&#39;: rejected value [null]; codes [NotNull.registerDto.password,NotNull.password,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [registerDto.password,password]; arguments []; default message [password]]; default message [darf nicht null sein]] [Field error in object &#39;registerDto&#39; on field &#39;email&#39;: rejected value [null]; codes [NotBlank.registerDto.email,NotBlank.email,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [registerDto.email,email]; arguments []; default message [email]]; default message [darf nicht leer sein]] ]`\r\n\r\nThe RegisterDto:\r\n```java\r\n@Data\r\npublic class RegisterDto {\r\n    @NotNull\r\n    @NotBlank\r\n    @Size(min = 3, max = 20)\r\n    @Pattern(regexp = &quot;^(?=.{3,20}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?&lt;![_.])$&quot;)\r\n    private String username;\r\n\r\n    @NotNull\r\n    @NotBlank\r\n    @Email\r\n    @Size(max = 50)\r\n    private String email;\r\n\r\n    @NotNull\r\n    @NotBlank\r\n    @Size(min = 8, max = 50)\r\n    @Pattern(regexp = &quot;^(?=.*[a-z])(?=.*[A-Z])(?=.*\\\\d)[a-zA-Z\\\\d]{8,}$&quot;)\r\n    private String password;\r\n\r\n    @JsonProperty(&quot;first_name&quot;)\r\n    @Size(min = 1, max = 50)\r\n    @Pattern(regexp = &quot;/^[a-z ,.&#39;-]+$/i&quot;)\r\n    private String firstName;\r\n\r\n    @JsonProperty(&quot;last_name&quot;)\r\n    @Size(min = 1, max = 50)\r\n    @Pattern(regexp = &quot;/^[a-z ,.&#39;-]+$/i&quot;)\r\n    private String lastName;\r\n}\r\n```\r\n\r\nThis is the request body:\r\n```json\r\n{\r\n    &quot;email&quot;: &quot;test.user@example.com&quot;,\r\n    &quot;username&quot;: &quot;testuser&quot;,\r\n    &quot;password&quot;: &quot;TestPw1!&quot;,\r\n    &quot;first_name&quot;: &quot;Some&quot;,\r\n    &quot;last_name&quot;: &quot;Name&quot;\r\n}\r\n```\r\n\r\nAnd this is the endpoint:\r\n```java\r\n@Operation(summary = &quot;Register a user using the details of the provided dto&quot;)\r\n@ApiResponse(responseCode = &quot;200&quot;, description = &quot;User was registered successfully&quot;,\r\n        content = {@Content(mediaType = MediaType.APPLICATION_JSON_VALUE,\r\n                schema = @Schema(implementation = UserDto.class))})\r\n@ApiResponse(responseCode = &quot;400&quot;, description = &quot;Invalid request body&quot;,\r\n        content = {@Content(mediaType = MediaType.APPLICATION_JSON_VALUE,\r\n                schema = @Schema(implementation = ErrorDto.class))})\r\n@ApiResponse(responseCode = &quot;409&quot;, description = &quot;Username or email is already in use&quot;,\r\n        content = {@Content(mediaType = MediaType.APPLICATION_JSON_VALUE,\r\n                schema = @Schema(implementation = ErrorDto.class))})\r\n@PostMapping(value = &quot;/register&quot;, produces = MediaType.APPLICATION_JSON_VALUE, consumes = MediaType.APPLICATION_JSON_VALUE)\r\nResponseEntity&lt;Object&gt; registerUser(\r\n        @RequestBody(description = &quot;Dto used to register the user&quot;, required = true,\r\n                content = @Content(mediaType = MediaType.APPLICATION_JSON_VALUE,\r\n                        schema = @Schema(implementation = RegisterDto.class)))\r\n        @Valid RegisterDto register,\r\n        HttpServletRequest request,\r\n        Locale locale);\r\n```\r\n\r\nEDIT: Apparently the request body is not being set at all, since removing the @Valid annotation from it returns an internal server error on the http request, as all of the request body&#39;s fields are null. I&#39;ve tried using Spring&#39;s RequestBody annotation instead of Swagger&#39;s requestbody, doesn&#39;t work either.\r\n\r\nI also tried writing getters setters and NoArgs/AllArgs constructors myself instead of using Lombok but that doesn&#39;t fix the issue.","title":"Spring Validation seemed to stop working (Logging that all fields are null)","body":"<p>So I have an endpoint to register a user, that takes a RegisterDto with validations as RequestBody. I sadly don't know since when the validation stopped working, but at the moment even with every field filled out it returns a bad request and logs the following:\n<code>2023-04-10T12:50:57.981+02:00  WARN 1836 --- [nio-8080-exec-2] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity&lt;java.lang.Object&gt; app.dcuobroker.backend.boundary.v1.api.auth.AuthApiImpl.registerUser(app.dcuobroker.backend.boundary.v1.dto.auth.RegisterDto,jakarta.servlet.http.HttpServletRequest,java.util.Locale) with 6 errors: [Field error in object 'registerDto' on field 'username': rejected value [null]; codes [NotNull.registerDto.username,NotNull.username,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [registerDto.username,username]; arguments []; default message [username]]; default message [darf nicht null sein]] [Field error in object 'registerDto' on field 'password': rejected value [null]; codes [NotBlank.registerDto.password,NotBlank.password,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [registerDto.password,password]; arguments []; default message [password]]; default message [darf nicht leer sein]] [Field error in object 'registerDto' on field 'username': rejected value [null]; codes [NotBlank.registerDto.username,NotBlank.username,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [registerDto.username,username]; arguments []; default message [username]]; default message [darf nicht leer sein]] [Field error in object 'registerDto' on field 'email': rejected value [null]; codes [NotNull.registerDto.email,NotNull.email,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [registerDto.email,email]; arguments []; default message [email]]; default message [darf nicht null sein]] [Field error in object 'registerDto' on field 'password': rejected value [null]; codes [NotNull.registerDto.password,NotNull.password,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [registerDto.password,password]; arguments []; default message [password]]; default message [darf nicht null sein]] [Field error in object 'registerDto' on field 'email': rejected value [null]; codes [NotBlank.registerDto.email,NotBlank.email,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [registerDto.email,email]; arguments []; default message [email]]; default message [darf nicht leer sein]] ]</code></p>\n<p>The RegisterDto:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\npublic class RegisterDto {\n    @NotNull\n    @NotBlank\n    @Size(min = 3, max = 20)\n    @Pattern(regexp = &quot;^(?=.{3,20}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?&lt;![_.])$&quot;)\n    private String username;\n\n    @NotNull\n    @NotBlank\n    @Email\n    @Size(max = 50)\n    private String email;\n\n    @NotNull\n    @NotBlank\n    @Size(min = 8, max = 50)\n    @Pattern(regexp = &quot;^(?=.*[a-z])(?=.*[A-Z])(?=.*\\\\d)[a-zA-Z\\\\d]{8,}$&quot;)\n    private String password;\n\n    @JsonProperty(&quot;first_name&quot;)\n    @Size(min = 1, max = 50)\n    @Pattern(regexp = &quot;/^[a-z ,.'-]+$/i&quot;)\n    private String firstName;\n\n    @JsonProperty(&quot;last_name&quot;)\n    @Size(min = 1, max = 50)\n    @Pattern(regexp = &quot;/^[a-z ,.'-]+$/i&quot;)\n    private String lastName;\n}\n</code></pre>\n<p>This is the request body:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;email&quot;: &quot;test.user@example.com&quot;,\n    &quot;username&quot;: &quot;testuser&quot;,\n    &quot;password&quot;: &quot;TestPw1!&quot;,\n    &quot;first_name&quot;: &quot;Some&quot;,\n    &quot;last_name&quot;: &quot;Name&quot;\n}\n</code></pre>\n<p>And this is the endpoint:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Operation(summary = &quot;Register a user using the details of the provided dto&quot;)\n@ApiResponse(responseCode = &quot;200&quot;, description = &quot;User was registered successfully&quot;,\n        content = {@Content(mediaType = MediaType.APPLICATION_JSON_VALUE,\n                schema = @Schema(implementation = UserDto.class))})\n@ApiResponse(responseCode = &quot;400&quot;, description = &quot;Invalid request body&quot;,\n        content = {@Content(mediaType = MediaType.APPLICATION_JSON_VALUE,\n                schema = @Schema(implementation = ErrorDto.class))})\n@ApiResponse(responseCode = &quot;409&quot;, description = &quot;Username or email is already in use&quot;,\n        content = {@Content(mediaType = MediaType.APPLICATION_JSON_VALUE,\n                schema = @Schema(implementation = ErrorDto.class))})\n@PostMapping(value = &quot;/register&quot;, produces = MediaType.APPLICATION_JSON_VALUE, consumes = MediaType.APPLICATION_JSON_VALUE)\nResponseEntity&lt;Object&gt; registerUser(\n        @RequestBody(description = &quot;Dto used to register the user&quot;, required = true,\n                content = @Content(mediaType = MediaType.APPLICATION_JSON_VALUE,\n                        schema = @Schema(implementation = RegisterDto.class)))\n        @Valid RegisterDto register,\n        HttpServletRequest request,\n        Locale locale);\n</code></pre>\n<p>EDIT: Apparently the request body is not being set at all, since removing the @Valid annotation from it returns an internal server error on the http request, as all of the request body's fields are null. I've tried using Spring's RequestBody annotation instead of Swagger's requestbody, doesn't work either.</p>\n<p>I also tried writing getters setters and NoArgs/AllArgs constructors myself instead of using Lombok but that doesn't fix the issue.</p>\n"},{"tags":["java","spring-boot","spring-mvc","asynchronous","spring-annotations"],"answers":[{"tags":[],"owner":{"account_id":6812029,"reputation":635,"user_id":5383834,"accept_rate":88,"display_name":"Wit"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681130689,"creation_date":1681130689,"answer_id":75977238,"question_id":67742125,"body_markdown":"**Question 1** - @Async needs @EnableAsync but could be implicitly. Do you have a dependency to spring-boot-starter-actuator? According to [this answer](https://stackoverflow.com/questions/72299721/async-working-without-enableasync-in-springboot#comment127730637_72299721), it enables async and scheduling by default.\r\n\r\n**Question 2** - Adding @EnableAsync will effect all @Async. In fact, if you can prove that your existing application is already executing your @Async endpoint with a different thread, then all @Async are already working without adding @EnableAsync; as mentioned in Question 1.\r\n\r\n**Question 3** - Yes, you can use any of them or even create a new class if you think existing ones are irrelevant.","title":"Does @Async ever work without @EnableAsync","body":"<p><strong>Question 1</strong> - @Async needs @EnableAsync but could be implicitly. Do you have a dependency to spring-boot-starter-actuator? According to <a href=\"https://stackoverflow.com/questions/72299721/async-working-without-enableasync-in-springboot#comment127730637_72299721\">this answer</a>, it enables async and scheduling by default.</p>\n<p><strong>Question 2</strong> - Adding @EnableAsync will effect all @Async. In fact, if you can prove that your existing application is already executing your @Async endpoint with a different thread, then all @Async are already working without adding @EnableAsync; as mentioned in Question 1.</p>\n<p><strong>Question 3</strong> - Yes, you can use any of them or even create a new class if you think existing ones are irrelevant.</p>\n"}],"owner":{"account_id":21066112,"reputation":61,"user_id":15483345,"display_name":"kimimishra"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":589,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1681130689,"creation_date":1622217550,"question_id":67742125,"body_markdown":"I am new to Java and working on an existing Spring MVC application. The project has a controller where many endponts are decorated with @Async annotation. But nowhere in the project did I find @EnableAsync annotation.I know @EnableAsync should be placed in one of the @Configuration classes or @SpringBootApplication classes. So I am not sure how the @Async is working of these existing endpoints\r\n\r\n    @RequestMapping(method= RequestMethod.POST, values= /endpoint1, consumes=&quot;application/json&quot;\r\n    @Async\r\n    Public CompletableFuture&lt;String&gt; resultsForEndpoint1()\r\n    {\r\n    }\r\n\r\n**Question1**- Can someone please explain if @Async can work without @EnableAsync\r\n\r\n**Question2**- I need to implement a asynchronous method and perform a long running task on a separate thread and return response from an API without waiting for this long running task to complete. For this i will have to use @EnableAsync. Will Adding @EnableAsync to @SpringBootApplication affect other existing Apis which are decorated with @Async\r\n\r\n**Question3** - There are many classes decorated with @Configuration. Can I use any of these to decorate with @EnableAsync. Which one can I use since many classes have @Configuration","title":"Does @Async ever work without @EnableAsync","body":"<p>I am new to Java and working on an existing Spring MVC application. The project has a controller where many endponts are decorated with @Async annotation. But nowhere in the project did I find @EnableAsync annotation.I know @EnableAsync should be placed in one of the @Configuration classes or @SpringBootApplication classes. So I am not sure how the @Async is working of these existing endpoints</p>\n<pre><code>@RequestMapping(method= RequestMethod.POST, values= /endpoint1, consumes=&quot;application/json&quot;\n@Async\nPublic CompletableFuture&lt;String&gt; resultsForEndpoint1()\n{\n}\n</code></pre>\n<p><strong>Question1</strong>- Can someone please explain if @Async can work without @EnableAsync</p>\n<p><strong>Question2</strong>- I need to implement a asynchronous method and perform a long running task on a separate thread and return response from an API without waiting for this long running task to complete. For this i will have to use @EnableAsync. Will Adding @EnableAsync to @SpringBootApplication affect other existing Apis which are decorated with @Async</p>\n<p><strong>Question3</strong> - There are many classes decorated with @Configuration. Can I use any of these to decorate with @EnableAsync. Which one can I use since many classes have @Configuration</p>\n"},{"tags":["java","binary-tree","postorder"],"comments":[{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":0,"creation_date":1680983033,"post_id":75967194,"comment_id":133987199,"body_markdown":"while is testing `current != null` so that will continue to be true for the `if` as well and it will always go that way. You possibly should remove that bit from the `while` condition.","body":"while is testing <code>current != null</code> so that will continue to be true for the <code>if</code> as well and it will always go that way. You possibly should remove that bit from the <code>while</code> condition."}],"answers":[{"tags":[],"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681130631,"creation_date":1681130631,"answer_id":75977228,"question_id":75967194,"body_markdown":"You have dead code because the `while` loop condition ensures that when an iteration is made, `current` is not null.\r\n\r\nBy consequence, the `if (current != null)` block will be executed as long as the loop makes iterations, and never the `else` block.\r\n\r\nThe mistake is that the loop condition is a logical AND, while it should be a logical OR.\r\n\r\nSome other remarks/problems:\r\n\r\n* The spelling of `rigth` is wrong. Please change to `right` everywhere in your code\r\n\r\n* With `TreeNode temp = stack.pop().rigth;` you lose track of the node that you popped from the stack, and it will never be in the output.\r\n\r\n* The same loss happens with `temp == stack.pop().rigth`... You can solve these two problems by calling `.peek()` instead.\r\n\r\n* In the inner `while` loop you use the `&amp;` **bitwise** operator: it does not perform short circuit evaluation. That means that even when the left side operand is false (i.e. the stack is empty), the right side operand will be evaluated, leading to a stack-related exception. You should use the logical operator `&amp;&amp;`.\r\n\r\nIf you fix the above problems, the code will work:\r\n\r\n```\r\n    public void postOrder() {\r\n        TreeNode current = root;\r\n        Stack&lt;TreeNode&gt; stack = new Stack&lt;&gt;();\r\n        while (!stack.isEmpty() || current != null) { // Should be logical OR\r\n            if (current != null) {\r\n                stack.push(current);\r\n                current = current.left;\r\n            } else {\r\n                TreeNode temp = stack.peek().right; // peek() instead of pop()\r\n                if (temp == null) {\r\n                    temp = stack.pop();\r\n                    System.out.println(temp.data + &quot; &quot;);\r\n                    // Use logical &amp;&amp; operator, and use peek() instead of pop():\r\n                    while (!stack.isEmpty() &amp;&amp; temp == stack.peek().right) {\r\n                        temp = stack.pop();\r\n                        System.out.println(temp.data + &quot; &quot;);\r\n                    }\r\n                } else {\r\n                    current = temp;\r\n                }\r\n            }\r\n        }\r\n    }\r\n```\r\n","title":"Postorder Traverse in Binary Tree faced dead code","body":"<p>You have dead code because the <code>while</code> loop condition ensures that when an iteration is made, <code>current</code> is not null.</p>\n<p>By consequence, the <code>if (current != null)</code> block will be executed as long as the loop makes iterations, and never the <code>else</code> block.</p>\n<p>The mistake is that the loop condition is a logical AND, while it should be a logical OR.</p>\n<p>Some other remarks/problems:</p>\n<ul>\n<li><p>The spelling of <code>rigth</code> is wrong. Please change to <code>right</code> everywhere in your code</p>\n</li>\n<li><p>With <code>TreeNode temp = stack.pop().rigth;</code> you lose track of the node that you popped from the stack, and it will never be in the output.</p>\n</li>\n<li><p>The same loss happens with <code>temp == stack.pop().rigth</code>... You can solve these two problems by calling <code>.peek()</code> instead.</p>\n</li>\n<li><p>In the inner <code>while</code> loop you use the <code>&amp;</code> <strong>bitwise</strong> operator: it does not perform short circuit evaluation. That means that even when the left side operand is false (i.e. the stack is empty), the right side operand will be evaluated, leading to a stack-related exception. You should use the logical operator <code>&amp;&amp;</code>.</p>\n</li>\n</ul>\n<p>If you fix the above problems, the code will work:</p>\n<pre><code>    public void postOrder() {\n        TreeNode current = root;\n        Stack&lt;TreeNode&gt; stack = new Stack&lt;&gt;();\n        while (!stack.isEmpty() || current != null) { // Should be logical OR\n            if (current != null) {\n                stack.push(current);\n                current = current.left;\n            } else {\n                TreeNode temp = stack.peek().right; // peek() instead of pop()\n                if (temp == null) {\n                    temp = stack.pop();\n                    System.out.println(temp.data + &quot; &quot;);\n                    // Use logical &amp;&amp; operator, and use peek() instead of pop():\n                    while (!stack.isEmpty() &amp;&amp; temp == stack.peek().right) {\n                        temp = stack.pop();\n                        System.out.println(temp.data + &quot; &quot;);\n                    }\n                } else {\n                    current = temp;\n                }\n            }\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":28002067,"reputation":1,"user_id":21386103,"display_name":"user21386103"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681130631,"creation_date":1680980826,"question_id":75967194,"body_markdown":"Here I am trying to traverse my binary tree ( hard coded ) in post order. but after the first esle ( I have marked it by ***** is dead code. Would you please help? Here is my code.\r\n   `package BnaryTree;\r\n\r\n    import java.util.Stack;\r\n\r\n    public class PostOrder {\r\n\tprivate TreeNode root;\r\n\r\n\tprivate class TreeNode {\r\n\t\tprivate TreeNode left;\r\n\t\tprivate TreeNode rigth;\r\n\t\tprivate int data;\r\n\r\n\t\tpublic TreeNode(int data) {\r\n\t\t\tthis.data = data;\r\n\t\t}\r\n\r\n\t}\r\n\tpublic void createBinaryTree() {\r\n\t\tTreeNode first = new TreeNode(1);\r\n\t\tTreeNode second = new TreeNode(2);\r\n\t\tTreeNode three = new TreeNode(3);\r\n\t\tTreeNode four = new TreeNode(4);\r\n\t\tTreeNode five = new TreeNode(5);\r\n\r\n\r\n\t\troot = first;\r\n\t\tfirst.left = second;\r\n\t\tfirst.rigth= three;\r\n\t\tsecond.left=four; \r\n\t\tsecond.rigth= five;\r\n\t\t\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tPostOrder post= new PostOrder();\r\n\t\tpost.createBinaryTree();\r\n\t\tpost.postOrder();\r\n\t}\r\n\r\n\tpublic void postOrder() {\r\n\t\tTreeNode current = root;\r\n\t\tStack&lt;TreeNode&gt; stack = new Stack&lt;&gt;();\r\n\t\twhile (!stack.isEmpty() &amp;&amp; current != null) {\r\n\t\t\tif (current != null) {\r\n\t\t\t\tstack.push(current);\r\n\t\t\t\tcurrent = current.left;\r\n                        //*****\r\n\t\t\t} else {\r\n\t\t\t\tTreeNode temp = stack.pop().rigth;\r\n\t\t\t\tif (temp == null) {\r\n\t\t\t\t\ttemp = stack.pop();\r\n\t\t\t\t\tSystem.out.println(temp.data + &quot; &quot;);\r\n\t\t\t\t\twhile (!stack.isEmpty() &amp; temp == stack.pop().rigth) {\r\n\t\t\t\t\t\ttemp = stack.pop();\r\n\t\t\t\t\t\tSystem.out.println(temp.data + &quot; &quot;);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcurrent = temp;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n    }`\r\n\r\nEclipse is messaging (Dead code ) but i am not sure why .Thank you.","title":"Postorder Traverse in Binary Tree faced dead code","body":"<p>Here I am trying to traverse my binary tree ( hard coded ) in post order. but after the first esle ( I have marked it by ***** is dead code. Would you please help? Here is my code.\n`package BnaryTree;</p>\n<pre><code>import java.util.Stack;\n\npublic class PostOrder {\nprivate TreeNode root;\n\nprivate class TreeNode {\n    private TreeNode left;\n    private TreeNode rigth;\n    private int data;\n\n    public TreeNode(int data) {\n        this.data = data;\n    }\n\n}\npublic void createBinaryTree() {\n    TreeNode first = new TreeNode(1);\n    TreeNode second = new TreeNode(2);\n    TreeNode three = new TreeNode(3);\n    TreeNode four = new TreeNode(4);\n    TreeNode five = new TreeNode(5);\n\n\n    root = first;\n    first.left = second;\n    first.rigth= three;\n    second.left=four; \n    second.rigth= five;\n    \n    \n}\n\npublic static void main(String[] args) {\n    // TODO Auto-generated method stub\n    PostOrder post= new PostOrder();\n    post.createBinaryTree();\n    post.postOrder();\n}\n\npublic void postOrder() {\n    TreeNode current = root;\n    Stack&lt;TreeNode&gt; stack = new Stack&lt;&gt;();\n    while (!stack.isEmpty() &amp;&amp; current != null) {\n        if (current != null) {\n            stack.push(current);\n            current = current.left;\n                    //*****\n        } else {\n            TreeNode temp = stack.pop().rigth;\n            if (temp == null) {\n                temp = stack.pop();\n                System.out.println(temp.data + &quot; &quot;);\n                while (!stack.isEmpty() &amp; temp == stack.pop().rigth) {\n                    temp = stack.pop();\n                    System.out.println(temp.data + &quot; &quot;);\n                }\n            } else {\n                current = temp;\n            }\n        }\n    }\n}\n}`\n</code></pre>\n<p>Eclipse is messaging (Dead code ) but i am not sure why .Thank you.</p>\n"},{"tags":["java","openrewrite"],"comments":[{"owner":{"account_id":5441459,"reputation":127,"user_id":4329439,"display_name":"Timor"},"score":2,"creation_date":1674422786,"post_id":75204013,"comment_id":132706154,"body_markdown":"May a simple &quot;Replace in files&quot; or, more CLI-ish, a bunch of `sed` commands be suitable for the job?","body":"May a simple &quot;Replace in files&quot; or, more CLI-ish, a bunch of <code>sed</code> commands be suitable for the job?"},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1674429032,"post_id":75204013,"comment_id":132706969,"body_markdown":"I would do this using global text replacement in my IDE, but some command based on `find . | xargs sed -i` would work too","body":"I would do this using global text replacement in my IDE, but some command based on <code>find . | xargs sed -i</code> would work too"},{"owner":{"account_id":27194678,"reputation":53,"user_id":20727776,"display_name":"Vincent Botteman"},"score":1,"creation_date":1674729829,"post_id":75204013,"comment_id":132777847,"body_markdown":"@Bohemian Thanks for the suggestion, but I want to execute the replacement in an OpenRewrite recipe as it will be part of a larger migration recipe. Sorry for the misunderstanding, I have updated the ticket.","body":"@Bohemian Thanks for the suggestion, but I want to execute the replacement in an OpenRewrite recipe as it will be part of a larger migration recipe. Sorry for the misunderstanding, I have updated the ticket."},{"owner":{"account_id":21852,"reputation":19896,"user_id":53444,"accept_rate":70,"display_name":"Tim"},"score":0,"creation_date":1675336066,"post_id":75204013,"comment_id":132908710,"body_markdown":"Hi @VincentBotteman; sorry it took a while to spot your question; we&#39;re a little more active on [Slack](https://join.slack.com/t/rewriteoss/shared_invite/zt-nj42n3ea-b~62rIHzb3Vo0E1APKCXEA), but will be monitoring StackOverflow as well. I&#39;ve logged your question as [a feature request](https://github.com/openrewrite/rewrite/issues/2755), as it seems like a good (and even easy) addition. Hope that helps!","body":"Hi @VincentBotteman; sorry it took a while to spot your question; we&#39;re a little more active on <a href=\"https://join.slack.com/t/rewriteoss/shared_invite/zt-nj42n3ea-b~62rIHzb3Vo0E1APKCXEA\" rel=\"nofollow noreferrer\">Slack</a>, but will be monitoring StackOverflow as well. I&#39;ve logged your question as <a href=\"https://github.com/openrewrite/rewrite/issues/2755\" rel=\"nofollow noreferrer\">a feature request</a>, as it seems like a good (and even easy) addition. Hope that helps!"},{"owner":{"account_id":27194678,"reputation":53,"user_id":20727776,"display_name":"Vincent Botteman"},"score":1,"creation_date":1681119888,"post_id":75204013,"comment_id":134001096,"body_markdown":"@Tim The new recipe ReplaceConstantWithAnotherConstant solves my issue. Thanks.","body":"@Tim The new recipe ReplaceConstantWithAnotherConstant solves my issue. Thanks."}],"answers":[{"tags":[],"owner":{"account_id":21852,"reputation":19896,"user_id":53444,"accept_rate":70,"display_name":"Tim"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681130466,"creation_date":1681130466,"answer_id":75977205,"question_id":75204013,"body_markdown":"This has [since been implemented][1], and [documented here][2]. It can be used  with an example `rewrite.yml` file:\r\n\r\n```yaml\r\ntype: specs.openrewrite.org/v1beta/recipe\r\nname: com.yourorg.ReplaceConstantWithAnotherConstantExample\r\ndisplayName: Replace constant with another constant example\r\nrecipeList:\r\n  - org.openrewrite.java.ReplaceConstantWithAnotherConstant:\r\n      existingFullyQualifiedConstantName: javax.ws.rs.core.MediaType.APPLICATION_JSON\r\n      fullyQualifiedConstantName: org.springframework.http.MediaType.APPLICATION_JSON_VALUE\r\n```\r\n\r\nThanks for the suggestion!\r\n\r\n  [1]: https://github.com/openrewrite/rewrite/pull/3037\r\n  [2]: https://docs.openrewrite.org/reference/recipes/java/replaceconstantwithanotherconstant","title":"How to replace static imports of class constants in OpenRewrite?","body":"<p>This has <a href=\"https://github.com/openrewrite/rewrite/pull/3037\" rel=\"nofollow noreferrer\">since been implemented</a>, and <a href=\"https://docs.openrewrite.org/reference/recipes/java/replaceconstantwithanotherconstant\" rel=\"nofollow noreferrer\">documented here</a>. It can be used  with an example <code>rewrite.yml</code> file:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>type: specs.openrewrite.org/v1beta/recipe\nname: com.yourorg.ReplaceConstantWithAnotherConstantExample\ndisplayName: Replace constant with another constant example\nrecipeList:\n  - org.openrewrite.java.ReplaceConstantWithAnotherConstant:\n      existingFullyQualifiedConstantName: javax.ws.rs.core.MediaType.APPLICATION_JSON\n      fullyQualifiedConstantName: org.springframework.http.MediaType.APPLICATION_JSON_VALUE\n</code></pre>\n<p>Thanks for the suggestion!</p>\n"}],"owner":{"account_id":27194678,"reputation":53,"user_id":20727776,"display_name":"Vincent Botteman"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":216,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1681130466,"creation_date":1674422630,"question_id":75204013,"body_markdown":"I want to replace static imports of class constants with other class constants.\r\n\r\nExample:\r\n\r\nOriginal code\r\n\r\n```\r\nimport javax.ws.rs.*;\r\nimport static javax.ws.rs.core.MediaType.APPLICATION_JSON;\r\n\r\nclass ControllerClass {\r\n    @Produces(APPLICATION_JSON)\r\n    public String getHelloWorldJSON(String name) {\r\n        return &quot;{}&quot;;\r\n    }\r\n}\r\n```\r\n\r\nExpected code\r\n\r\n```\r\nimport javax.ws.rs.*;\r\nimport static org.springframework.http.MediaType.APPLICATION_JSON_VALUE;\r\n\r\nclass ControllerClass {\r\n    @Produces(APPLICATION_JSON_VALUE)\r\n    public String getHelloWorldJSON(String name) {\r\n        return &quot;{}&quot;;\r\n    }\r\n}\r\n```\r\n\r\nSo I don&#39;t want to only replace the class type (`javax.ws.rs.core.MediaType` -\\&gt; `org.springframework.http.MediaType` ) but also the name of the class constant (`APPLICATION_JSON` -\\&gt; `APPLICATION_JSON_VALUE`)\r\n\r\nI tried using the OpenRewrite `ChangeType` recipe but that only changed the class type, not the class constant.\r\nI want to execute this replacement in an OpenRewrite recipe as it will be part of a larger migration.","title":"How to replace static imports of class constants in OpenRewrite?","body":"<p>I want to replace static imports of class constants with other class constants.</p>\n<p>Example:</p>\n<p>Original code</p>\n<pre><code>import javax.ws.rs.*;\nimport static javax.ws.rs.core.MediaType.APPLICATION_JSON;\n\nclass ControllerClass {\n    @Produces(APPLICATION_JSON)\n    public String getHelloWorldJSON(String name) {\n        return &quot;{}&quot;;\n    }\n}\n</code></pre>\n<p>Expected code</p>\n<pre><code>import javax.ws.rs.*;\nimport static org.springframework.http.MediaType.APPLICATION_JSON_VALUE;\n\nclass ControllerClass {\n    @Produces(APPLICATION_JSON_VALUE)\n    public String getHelloWorldJSON(String name) {\n        return &quot;{}&quot;;\n    }\n}\n</code></pre>\n<p>So I don't want to only replace the class type (<code>javax.ws.rs.core.MediaType</code> -&gt; <code>org.springframework.http.MediaType</code> ) but also the name of the class constant (<code>APPLICATION_JSON</code> -&gt; <code>APPLICATION_JSON_VALUE</code>)</p>\n<p>I tried using the OpenRewrite <code>ChangeType</code> recipe but that only changed the class type, not the class constant.\nI want to execute this replacement in an OpenRewrite recipe as it will be part of a larger migration.</p>\n"},{"tags":["java","android","android-studio","google-vr-sdk"],"owner":{"account_id":28257273,"reputation":1,"user_id":21602548,"display_name":"pr1510"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681130421,"creation_date":1681047945,"question_id":75970895,"body_markdown":"I want to play audio from an external folder (music/data or any other) using the [GvrAudioEngine API](https://developers.google.com/vr/reference/android/com/google/vr/sdk/audio/GvrAudioEngine) by Google VR in an Android Studio App. However, I am unable to do so. The only thing that seems to work is an audio file placed in the Assets folder. However, that does not serve my problem.\r\n**Is there any workaround to solve the problem?**\r\n**Or is there any other Library/API I could use for spatial audio rendering?**\r\n\r\nCode is as follows:\r\n-\r\n\r\n```\r\nGvrAudioEngine gvrAudioEngine = new GvrAudioEngine(this, GvrAudioEngine.RenderingMode.BINAURAL_HIGH_QUALITY);\r\nString SOUND_FILE = &quot;cube_sound.wav&quot;  // Preload the sound file  \r\ngvrAudioEngine.preloadSoundFile(SOUND_FILE); // Create the &#39;sourceId&#39; sound object. // You can create multiple sound objects using the same sound file. \r\nint sourceId = gvrAudioEngine.createSoundObject(SOUND_FILE);\r\n```\r\n\r\nwhere cube_sound.wav is located in the Assets Folder (this works)\r\nHowever, if I replace the SOUND_FILE with an external storage path(/storage/emulated/0/cube_sound.wav), I get `sourceId` = -1 (Invalid). I have ensured that the audio file is located at this place.","title":"Is it possible to add/play audio from the external storage (/storage/emulated/0) in Android Studio using the GvrAudioEngine API?","body":"<p>I want to play audio from an external folder (music/data or any other) using the <a href=\"https://developers.google.com/vr/reference/android/com/google/vr/sdk/audio/GvrAudioEngine\" rel=\"nofollow noreferrer\">GvrAudioEngine API</a> by Google VR in an Android Studio App. However, I am unable to do so. The only thing that seems to work is an audio file placed in the Assets folder. However, that does not serve my problem.\n<strong>Is there any workaround to solve the problem?</strong>\n<strong>Or is there any other Library/API I could use for spatial audio rendering?</strong></p>\n<h2>Code is as follows:</h2>\n<pre><code>GvrAudioEngine gvrAudioEngine = new GvrAudioEngine(this, GvrAudioEngine.RenderingMode.BINAURAL_HIGH_QUALITY);\nString SOUND_FILE = &quot;cube_sound.wav&quot;  // Preload the sound file  \ngvrAudioEngine.preloadSoundFile(SOUND_FILE); // Create the 'sourceId' sound object. // You can create multiple sound objects using the same sound file. \nint sourceId = gvrAudioEngine.createSoundObject(SOUND_FILE);\n</code></pre>\n<p>where cube_sound.wav is located in the Assets Folder (this works)\nHowever, if I replace the SOUND_FILE with an external storage path(/storage/emulated/0/cube_sound.wav), I get <code>sourceId</code> = -1 (Invalid). I have ensured that the audio file is located at this place.</p>\n"},{"tags":["java","android","voice-recognition","voice-control"],"answers":[{"tags":[],"owner":{"account_id":17753197,"reputation":108,"user_id":12973648,"display_name":"VladDz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680810161,"creation_date":1680810161,"answer_id":75953218,"question_id":75952573,"body_markdown":"the first thing I would like to draw your attention to is the presence of permission in the manifest and requesting permission from the system, without this the microphone will not work.\r\nCheck if the following line of code is present in the manifest:\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.RECORD_AUDIO&quot; /&gt;\r\n\r\nAnd update the onCreate method like this:\r\n\r\n    \r\n    private static final int RECORD_AUDIO_REQUEST_CODE = 983;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n\r\n        ...\r\n\r\n        if (ContextCompat.checkSelfPermission(this, android.Manifest.permission.RECORD_AUDIO) != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(this, new String[]{android.Manifest.permission.RECORD_AUDIO}, RECORD_AUDIO_REQUEST_CODE);\r\n        } else {\r\n            initializeTextToSpeach();\r\n            initializeSpeechRecognizer();\r\n        }\r\n    }\r\nAnd check the result of the permission request:\r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n\r\n        if (requestCode == RECORD_AUDIO_REQUEST_CODE &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\r\n            initializeTextToSpeach();\r\n            initializeSpeechRecognizer();\r\n        }\r\n    }\r\n\r\n\r\nNext, it seems that after registering the listener, you missed a few instructions to start recognition, namely creating an intent. To do this, update your method &quot;initializeSpeechRecognizer&quot; at the end in a similar way:\r\n\r\n    private void initializeSpeechRecognizer() {\r\n    ...\r\n    Intent recognizerIntent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);\r\n            recognizerIntent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, RecognizerIntent.LANGUAGE_MODEL_WEB_SEARCH);\r\n            recognizerIntent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE, this.getPackageName());\r\n            recognizerIntent.putExtra(RecognizerIntent.EXTRA_MAX_RESULTS, 3);\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n                recognizerIntent.putExtra(RecognizerIntent.EXTRA_PREFER_OFFLINE, true);\r\n            }\r\n      mySpeechRecognizer.startListening(recognizerIntent);\r\n\r\n\r\nAnd the last thing I recommend is to display information about what error occurred in the onError(int i) method, so that in the future you can understand what could go wrong:\r\n\r\n    @Override\r\n    public void onError(int i) {\r\n        Log.e(&quot;SpeechRecognizer&quot;, &quot;onError, code=&quot; + i);\r\n    }\r\n\r\n\r\nI also want to share that once I was working on an application with a continuous-speech-recognition. Google&#39;s approach to voice recognition did not suit me due to the limitations of working from services. The vosk-api\r\nlibrary helped me here https://github.com/alphacep/vosk-api, which is an api for working with the kaldi voice recognition solution. The essence of this decision is that the application must contain an additional language model of about 50 megabytes in size, and this is only for one language. Of course, this is a big disadvantage of this approach, and the recognition accuracy is worse than that of Google&#39;s solution. But in my case it was enough.","title":"How to implement continuous voice recognition?","body":"<p>the first thing I would like to draw your attention to is the presence of permission in the manifest and requesting permission from the system, without this the microphone will not work.\nCheck if the following line of code is present in the manifest:</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.RECORD_AUDIO&quot; /&gt;\n</code></pre>\n<p>And update the onCreate method like this:</p>\n<pre><code>private static final int RECORD_AUDIO_REQUEST_CODE = 983;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n\n    ...\n\n    if (ContextCompat.checkSelfPermission(this, android.Manifest.permission.RECORD_AUDIO) != PackageManager.PERMISSION_GRANTED) {\n        ActivityCompat.requestPermissions(this, new String[]{android.Manifest.permission.RECORD_AUDIO}, RECORD_AUDIO_REQUEST_CODE);\n    } else {\n        initializeTextToSpeach();\n        initializeSpeechRecognizer();\n    }\n}\n</code></pre>\n<p>And check the result of the permission request:</p>\n<pre><code>@Override\npublic void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\n    super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n\n    if (requestCode == RECORD_AUDIO_REQUEST_CODE &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n        initializeTextToSpeach();\n        initializeSpeechRecognizer();\n    }\n}\n</code></pre>\n<p>Next, it seems that after registering the listener, you missed a few instructions to start recognition, namely creating an intent. To do this, update your method &quot;initializeSpeechRecognizer&quot; at the end in a similar way:</p>\n<pre><code>private void initializeSpeechRecognizer() {\n...\nIntent recognizerIntent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);\n        recognizerIntent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, RecognizerIntent.LANGUAGE_MODEL_WEB_SEARCH);\n        recognizerIntent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE, this.getPackageName());\n        recognizerIntent.putExtra(RecognizerIntent.EXTRA_MAX_RESULTS, 3);\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n            recognizerIntent.putExtra(RecognizerIntent.EXTRA_PREFER_OFFLINE, true);\n        }\n  mySpeechRecognizer.startListening(recognizerIntent);\n</code></pre>\n<p>And the last thing I recommend is to display information about what error occurred in the onError(int i) method, so that in the future you can understand what could go wrong:</p>\n<pre><code>@Override\npublic void onError(int i) {\n    Log.e(&quot;SpeechRecognizer&quot;, &quot;onError, code=&quot; + i);\n}\n</code></pre>\n<p>I also want to share that once I was working on an application with a continuous-speech-recognition. Google's approach to voice recognition did not suit me due to the limitations of working from services. The vosk-api\nlibrary helped me here <a href=\"https://github.com/alphacep/vosk-api\" rel=\"nofollow noreferrer\">https://github.com/alphacep/vosk-api</a>, which is an api for working with the kaldi voice recognition solution. The essence of this decision is that the application must contain an additional language model of about 50 megabytes in size, and this is only for one language. Of course, this is a big disadvantage of this approach, and the recognition accuracy is worse than that of Google's solution. But in my case it was enough.</p>\n"},{"tags":[],"owner":{"account_id":28252518,"reputation":1,"user_id":21598519,"display_name":"JISUS AECOM"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1680989274,"creation_date":1680989274,"answer_id":75967761,"question_id":75952573,"body_markdown":"just two days ago I started developing an application that does something very similar to yours. It&#39;s very difficult to find information on the internet about this, but I think you can use the tool that I used. Here&#39;s the link: https://picovoice.ai/. It&#39;s really easy to work with, it has default words for detection, and you can also create your own keyword. I also highly recommend this GitHub repository, which is part of the same tool, but remember that an example of code makes things infinitely easier. If you need more help, don&#39;t hesitate to let me know.","title":"How to implement continuous voice recognition?","body":"<p>just two days ago I started developing an application that does something very similar to yours. It's very difficult to find information on the internet about this, but I think you can use the tool that I used. Here's the link: <a href=\"https://picovoice.ai/\" rel=\"nofollow noreferrer\">https://picovoice.ai/</a>. It's really easy to work with, it has default words for detection, and you can also create your own keyword. I also highly recommend this GitHub repository, which is part of the same tool, but remember that an example of code makes things infinitely easier. If you need more help, don't hesitate to let me know.</p>\n"}],"owner":{"account_id":28234750,"reputation":11,"user_id":21583398,"display_name":"ihavenoideawhatimdoing"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":373,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1681130178,"creation_date":1680804947,"question_id":75952573,"body_markdown":"I&#39;m making an application that helps people by calling the police when they say &quot;Help&quot;. However, I&#39;m currently having a problem with the continuous voice recognition.\r\n\r\n\r\nI tried to use the voice recognizer in Android Studio but i don&#39;t know how to make it listen for the trigger word i.e.&quot;Help&quot; (here is a tutorial explaining exactly what I want but for some reason it doesn&#39;t work for me: https://betterprogramming.pub/implement-continuous-speech-recognition-on-android-1dd2f4b562fd)\r\nfor reference, here is my current code:\r\n\r\n```java\r\npublic class MainActivity extends AppCompatActivity {\r\n    private TextToSpeech myTTS;\r\n    private SpeechRecognizer mySpeechRecognizer;\r\n\r\n    private AppBarConfiguration appBarConfiguration;\r\n    private ActivityMainBinding binding;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        binding = ActivityMainBinding.inflate(getLayoutInflater());\r\n        setContentView(binding.getRoot());\r\n\r\n        setSupportActionBar(binding.toolbar);\r\n\r\n        NavController navController = Navigation.findNavController(this, R.id.nav_host_fragment_content_main);\r\n        appBarConfiguration = new AppBarConfiguration.Builder(navController.getGraph()).build();\r\n        NavigationUI.setupActionBarWithNavController(this, navController, appBarConfiguration);\r\n        initializeTextToSpeach();\r\n        initializeSpeechRecognizer();\r\n    }\r\n\r\n    private void initializeSpeechRecognizer() {\r\n        if(SpeechRecognizer.isRecognitionAvailable(this)) {\r\n            mySpeechRecognizer = SpeechRecognizer.createSpeechRecognizer(this);\r\n            mySpeechRecognizer.setRecognitionListener(new RecognitionListener() {\r\n                @Override\r\n                public void onReadyForSpeech(Bundle bundle) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onBeginningOfSpeech() {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onRmsChanged(float v) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onBufferReceived(byte[] bytes) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onEndOfSpeech() {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onError(int i) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onResults(Bundle bundle) {\r\n                    List&lt;String&gt; results = bundle.getStringArrayList(\r\n                            SpeechRecognizer.RESULTS_RECOGNITION\r\n                    );\r\n                    processResult(results.get(0));\r\n                }\r\n\r\n                @Override\r\n                public void onPartialResults(Bundle bundle) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onEvent(int i, Bundle bundle) {\r\n\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    private void processResult(String command) {\r\n        command = command.toLowerCase();\r\n        if(command.indexOf(&quot;help&quot;) !=-1) {\r\n            Uri number= Uri.parse(&quot;tel:123&quot;);\r\n            Intent intent= new Intent(Intent.ACTION_DIAL, number);\r\n        startActivity(intent);\r\n        }\r\n    }\r\n\r\n    private void initializeTextToSpeach() {\r\n        myTTS = new TextToSpeech(this, new TextToSpeech.OnInitListener() {\r\n            @Override\r\n            public void onInit(int i) {\r\n                if(myTTS.getEngines().size() ==0){\r\n                    Toast.makeText(MainActivity.this, &quot;There is no voice recognizing engine in your device&quot;, Toast.LENGTH_LONG).show();\r\n                finish();\r\n                } else {\r\n                    myTTS.setLanguage(Locale.US);\r\n                    speak(&quot;Hello, I&#39;m ready&quot;);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    private void speak(String message) {\r\n        if (Build.VERSION.SDK_INT &gt;= 21) {\r\n            myTTS.speak(message, TextToSpeech.QUEUE_FLUSH, null, null);\r\n        }\r\n        else {\r\n            myTTS.speak(message, TextToSpeech.QUEUE_FLUSH, null);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onPause() {\r\n        super.onPause();\r\n        myTTS.shutdown();\r\n    }\r\n\r\n}\r\n```","title":"How to implement continuous voice recognition?","body":"<p>I'm making an application that helps people by calling the police when they say &quot;Help&quot;. However, I'm currently having a problem with the continuous voice recognition.</p>\n<p>I tried to use the voice recognizer in Android Studio but i don't know how to make it listen for the trigger word i.e.&quot;Help&quot; (here is a tutorial explaining exactly what I want but for some reason it doesn't work for me: <a href=\"https://betterprogramming.pub/implement-continuous-speech-recognition-on-android-1dd2f4b562fd\" rel=\"nofollow noreferrer\">https://betterprogramming.pub/implement-continuous-speech-recognition-on-android-1dd2f4b562fd</a>)\nfor reference, here is my current code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MainActivity extends AppCompatActivity {\n    private TextToSpeech myTTS;\n    private SpeechRecognizer mySpeechRecognizer;\n\n    private AppBarConfiguration appBarConfiguration;\n    private ActivityMainBinding binding;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        binding = ActivityMainBinding.inflate(getLayoutInflater());\n        setContentView(binding.getRoot());\n\n        setSupportActionBar(binding.toolbar);\n\n        NavController navController = Navigation.findNavController(this, R.id.nav_host_fragment_content_main);\n        appBarConfiguration = new AppBarConfiguration.Builder(navController.getGraph()).build();\n        NavigationUI.setupActionBarWithNavController(this, navController, appBarConfiguration);\n        initializeTextToSpeach();\n        initializeSpeechRecognizer();\n    }\n\n    private void initializeSpeechRecognizer() {\n        if(SpeechRecognizer.isRecognitionAvailable(this)) {\n            mySpeechRecognizer = SpeechRecognizer.createSpeechRecognizer(this);\n            mySpeechRecognizer.setRecognitionListener(new RecognitionListener() {\n                @Override\n                public void onReadyForSpeech(Bundle bundle) {\n\n                }\n\n                @Override\n                public void onBeginningOfSpeech() {\n\n                }\n\n                @Override\n                public void onRmsChanged(float v) {\n\n                }\n\n                @Override\n                public void onBufferReceived(byte[] bytes) {\n\n                }\n\n                @Override\n                public void onEndOfSpeech() {\n\n                }\n\n                @Override\n                public void onError(int i) {\n\n                }\n\n                @Override\n                public void onResults(Bundle bundle) {\n                    List&lt;String&gt; results = bundle.getStringArrayList(\n                            SpeechRecognizer.RESULTS_RECOGNITION\n                    );\n                    processResult(results.get(0));\n                }\n\n                @Override\n                public void onPartialResults(Bundle bundle) {\n\n                }\n\n                @Override\n                public void onEvent(int i, Bundle bundle) {\n\n                }\n            });\n        }\n    }\n\n    private void processResult(String command) {\n        command = command.toLowerCase();\n        if(command.indexOf(&quot;help&quot;) !=-1) {\n            Uri number= Uri.parse(&quot;tel:123&quot;);\n            Intent intent= new Intent(Intent.ACTION_DIAL, number);\n        startActivity(intent);\n        }\n    }\n\n    private void initializeTextToSpeach() {\n        myTTS = new TextToSpeech(this, new TextToSpeech.OnInitListener() {\n            @Override\n            public void onInit(int i) {\n                if(myTTS.getEngines().size() ==0){\n                    Toast.makeText(MainActivity.this, &quot;There is no voice recognizing engine in your device&quot;, Toast.LENGTH_LONG).show();\n                finish();\n                } else {\n                    myTTS.setLanguage(Locale.US);\n                    speak(&quot;Hello, I'm ready&quot;);\n                }\n            }\n        });\n    }\n\n    private void speak(String message) {\n        if (Build.VERSION.SDK_INT &gt;= 21) {\n            myTTS.speak(message, TextToSpeech.QUEUE_FLUSH, null, null);\n        }\n        else {\n            myTTS.speak(message, TextToSpeech.QUEUE_FLUSH, null);\n        }\n    }\n\n    @Override\n    protected void onPause() {\n        super.onPause();\n        myTTS.shutdown();\n    }\n\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":10298861,"reputation":111,"user_id":7598149,"display_name":"kesaven"},"score":0,"creation_date":1681038951,"post_id":75970160,"comment_id":133992029,"body_markdown":"Too little information to help for this request","body":"Too little information to help for this request"},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1681039032,"post_id":75970160,"comment_id":133992037,"body_markdown":"Welcome to Stack Overflow.\nPlease take the [tour] to learn how Stack Overflow works and read [ask] on how to improve the quality of your question.\nIt is unclear what you are asking or what the problem is. The obvious answer would be an `if()` statement, but that is most likely not what you have in mind. Please [edit] your question to include a more detailed description of the problem you have.","body":"Welcome to Stack Overflow. Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> to learn how Stack Overflow works and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> on how to improve the quality of your question. It is unclear what you are asking or what the problem is. The obvious answer would be an <code>if()</code> statement, but that is most likely not what you have in mind. Please <a href=\"https://stackoverflow.com/posts/75970160/edit\">edit</a> your question to include a more detailed description of the problem you have."},{"owner":{"account_id":27534826,"reputation":29,"user_id":21012691,"display_name":"netcat_dd"},"score":0,"creation_date":1681039488,"post_id":75970160,"comment_id":133992082,"body_markdown":"@Progman I added the additional explanation of what i want to achieve at the end of the question. Will that do?","body":"@Progman I added the additional explanation of what i want to achieve at the end of the question. Will that do?"},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1681039844,"post_id":75970160,"comment_id":133992115,"body_markdown":"@netcat_dd No, it doesn&#39;t explain why you don&#39;t want to use `if()` or `switch()`. You can use &quot;reflection&quot; to find the correct method, but that is overkill for what you are trying to do. Please [edit] your question to explain why exactly `if()` or `switch()` is not a reliable solution/approach in your case. It is still not clear what the problem is.","body":"@netcat_dd No, it doesn&#39;t explain why you don&#39;t want to use <code>if()</code> or <code>switch()</code>. You can use &quot;reflection&quot; to find the correct method, but that is overkill for what you are trying to do. Please <a href=\"https://stackoverflow.com/posts/75970160/edit\">edit</a> your question to explain why exactly <code>if()</code> or <code>switch()</code> is not a reliable solution/approach in your case. It is still not clear what the problem is."},{"owner":{"account_id":27534826,"reputation":29,"user_id":21012691,"display_name":"netcat_dd"},"score":0,"creation_date":1681040276,"post_id":75970160,"comment_id":133992159,"body_markdown":"@Progman I already stated that i would like to minimize my code as much as possible. This is the reason, i do not have any additional reasons for my question. \nWhy do you think &quot;reflection&quot; would be overkill? Also, i would like to understand how to handle similar situations in future.","body":"@Progman I already stated that i would like to minimize my code as much as possible. This is the reason, i do not have any additional reasons for my question.  Why do you think &quot;reflection&quot; would be overkill? Also, i would like to understand how to handle similar situations in future."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1681046215,"post_id":75970160,"comment_id":133992845,"body_markdown":"The version with the minimum amount of code will use ifs and switches.","body":"The version with the minimum amount of code will use ifs and switches."},{"owner":{"account_id":27534826,"reputation":29,"user_id":21012691,"display_name":"netcat_dd"},"score":0,"creation_date":1681049495,"post_id":75970160,"comment_id":133993271,"body_markdown":"@LouisWasserman i doubt that. Please consider that HTTP has 8 + custom verbs.","body":"@LouisWasserman i doubt that. Please consider that HTTP has 8 + custom verbs."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1681129274,"post_id":75970160,"comment_id":134002667,"body_markdown":"You don’t need to execute different methods.  I assume you’re using Apache’s SimpleRequestBuilder, which has a [create(String)](https://hc.apache.org/httpcomponents-client-5.2.x/current/httpclient5/apidocs/org/apache/hc/client5/http/async/methods/SimpleRequestBuilder.html#create-java.lang.String-) method.  You can just write `SimpleRequestBuilder.create(someVariable).setURI(uri).setBody(requestBody)` etc.","body":"You don’t need to execute different methods.  I assume you’re using Apache’s SimpleRequestBuilder, which has a <a href=\"https://hc.apache.org/httpcomponents-client-5.2.x/current/httpclient5/apidocs/org/apache/hc/client5/http/async/methods/SimpleRequestBuilder.html#create-java.lang.String-\" rel=\"nofollow noreferrer\">create(String)</a> method.  You can just write <code>SimpleRequestBuilder.create(someVariable).setURI(uri).setBod&zwnj;&#8203;y(requestBody)</code> etc."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1681129900,"creation_date":1681041038,"answer_id":75970316,"question_id":75970160,"body_markdown":"You can avoid using `if` or `switch` statements but it won&#39;t &quot;minimize&quot; your code to any significant degree.\r\n\r\nFor example, the following approach makes use of function references:\r\n\r\n    Map&lt;String, Function&lt;URI, SimpleRequestBuilder&gt;&gt; method_mapping = \r\n    new HashMap&lt;&gt;() {{\r\n       put(&quot;get&quot;, SimpleRequestBuilder::get);\r\n       put(&quot;post&quot;, SimpleRequestBuilder::post);\r\n    }}\r\n\r\n    SimpleHttpRequest http_request = method_mapping.get(method)\r\n        .apply(uri)\r\n        .setBody(request_body)\r\n        .setHeaders(request_headers)\r\n        .build();\r\n\r\nBut this is more or less equivalent to a `switch` statement or a chain of `if` statements.  And ... more complicated, IMO.\r\n\r\n-----------------------\r\n\r\n&gt; The `SimpleRequestBuilder` call should change dynamically, no matter what value `some_variable` contains.\r\n\r\nWell to the extent that it is possible, the above `Map` approach does that.  But the problem is that if `method_mapping` doesn&#39;t have an entry for a specific method string, then **no scheme** will be able to handle this.\r\n\r\n(The code should really test that `method_mapping.get(method)` returns a non-null function reference before it tries to call it.)\r\n\r\n\r\n-----------------------\r\n\r\nAnd here&#39;s a version using a Java 12+ `switch` expression:\r\n\r\n    Function&lt;URI, SimpleRequestBuilder&gt; request_builder = \r\n    switch(method) {\r\n        case &quot;get&quot; -&gt; SimpleRequestBuilder::get;\r\n        case &quot;post&quot; -&gt; SimpleRequestBuilder::post;\r\n        default -&gt; DummyBuilder::error405;\r\n    }\r\n    request_builder\r\n        .apply(uri)\r\n        .setBody(request_body)\r\n        .setHeaders(request_headers)\r\n        .build();\r\n\r\nwhere `DummyBuilder::error405` handles the case of an unsupported method.\r\n    ","title":"Changing the method call dynamically, without using case statements","body":"<p>You can avoid using <code>if</code> or <code>switch</code> statements but it won't &quot;minimize&quot; your code to any significant degree.</p>\n<p>For example, the following approach makes use of function references:</p>\n<pre><code>Map&lt;String, Function&lt;URI, SimpleRequestBuilder&gt;&gt; method_mapping = \nnew HashMap&lt;&gt;() {{\n   put(&quot;get&quot;, SimpleRequestBuilder::get);\n   put(&quot;post&quot;, SimpleRequestBuilder::post);\n}}\n\nSimpleHttpRequest http_request = method_mapping.get(method)\n    .apply(uri)\n    .setBody(request_body)\n    .setHeaders(request_headers)\n    .build();\n</code></pre>\n<p>But this is more or less equivalent to a <code>switch</code> statement or a chain of <code>if</code> statements.  And ... more complicated, IMO.</p>\n<hr />\n<blockquote>\n<p>The <code>SimpleRequestBuilder</code> call should change dynamically, no matter what value <code>some_variable</code> contains.</p>\n</blockquote>\n<p>Well to the extent that it is possible, the above <code>Map</code> approach does that.  But the problem is that if <code>method_mapping</code> doesn't have an entry for a specific method string, then <strong>no scheme</strong> will be able to handle this.</p>\n<p>(The code should really test that <code>method_mapping.get(method)</code> returns a non-null function reference before it tries to call it.)</p>\n<hr />\n<p>And here's a version using a Java 12+ <code>switch</code> expression:</p>\n<pre><code>Function&lt;URI, SimpleRequestBuilder&gt; request_builder = \nswitch(method) {\n    case &quot;get&quot; -&gt; SimpleRequestBuilder::get;\n    case &quot;post&quot; -&gt; SimpleRequestBuilder::post;\n    default -&gt; DummyBuilder::error405;\n}\nrequest_builder\n    .apply(uri)\n    .setBody(request_body)\n    .setHeaders(request_headers)\n    .build();\n</code></pre>\n<p>where <code>DummyBuilder::error405</code> handles the case of an unsupported method.</p>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681043200,"creation_date":1681042236,"answer_id":75970416,"question_id":75970160,"body_markdown":"You can use reflection, but it won&#39;t be elegant.\r\n\r\nYou can minimise the code by first creating a request, then applying the common code:\r\n\r\n```\r\nSimpleHttpRequest http_request = (some_variable.equals(&quot;post&quot;) ? SimpleRequestBuilder.post(uri) : SimpleRequestBuilder.get(uri))\r\n  .setBody(request_body)\r\n  .setHeaders(request_headers)\r\n  .build();","title":"Changing the method call dynamically, without using case statements","body":"<p>You can use reflection, but it won't be elegant.</p>\n<p>You can minimise the code by first creating a request, then applying the common code:</p>\n<pre><code>SimpleHttpRequest http_request = (some_variable.equals(&quot;post&quot;) ? SimpleRequestBuilder.post(uri) : SimpleRequestBuilder.get(uri))\n  .setBody(request_body)\n  .setHeaders(request_headers)\n  .build();\n</code></pre>\n"}],"owner":{"account_id":27534826,"reputation":29,"user_id":21012691,"display_name":"netcat_dd"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75970316,"answer_count":2,"score":-1,"last_activity_date":1681129900,"creation_date":1681038767,"question_id":75970160,"body_markdown":"How can I modify the following code to make it execute method represented by &quot;some_variable&quot;, instead of just &quot;get(uri)&quot;, without using case statements?\r\n\r\n```java\r\nSimpleHttpRequest http_request = SimpleRequestBuilder.get(uri)\r\n    .setBody(request_body)\r\n    .setHeaders(request_headers)\r\n    .build();\r\n```\r\n\r\nFor example, assuming that `String some_variable = &quot;post&quot;;`, I would like my program to do the following:\r\n```java\r\nSimpleHttpRequest http_request = SimpleRequestBuilder.post(uri)\r\n    .setBody(request_body)\r\n    .setHeaders(request_headers)\r\n    .build()\r\n```\r\n\r\nBecause I&#39;d like to minimize my code as much as I can, I don&#39;t want to use &quot;if&quot; statements or &quot;case&quot; statements. The `SimpleRequestBuilder` call should change dynamically, no matter what value `some_variable` contains.","title":"Changing the method call dynamically, without using case statements","body":"<p>How can I modify the following code to make it execute method represented by &quot;some_variable&quot;, instead of just &quot;get(uri)&quot;, without using case statements?</p>\n<pre class=\"lang-java prettyprint-override\"><code>SimpleHttpRequest http_request = SimpleRequestBuilder.get(uri)\n    .setBody(request_body)\n    .setHeaders(request_headers)\n    .build();\n</code></pre>\n<p>For example, assuming that <code>String some_variable = &quot;post&quot;;</code>, I would like my program to do the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>SimpleHttpRequest http_request = SimpleRequestBuilder.post(uri)\n    .setBody(request_body)\n    .setHeaders(request_headers)\n    .build()\n</code></pre>\n<p>Because I'd like to minimize my code as much as I can, I don't want to use &quot;if&quot; statements or &quot;case&quot; statements. The <code>SimpleRequestBuilder</code> call should change dynamically, no matter what value <code>some_variable</code> contains.</p>\n"},{"tags":["java","android","json","string","gson"],"comments":[{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1680527189,"post_id":75919656,"comment_id":133908503,"body_markdown":"Based on question title you may be looking for [Gson: Directly convert String to JsonObject (no POJO)](https://stackoverflow.com/q/4110664). But based on `String json2 = gson2.toJson(obj);` I am not sure what you want to achieve...","body":"Based on question title you may be looking for <a href=\"https://stackoverflow.com/q/4110664\">Gson: Directly convert String to JsonObject (no POJO)</a>. But based on <code>String json2 = gson2.toJson(obj);</code> I am not sure what you want to achieve..."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1680530049,"post_id":75919656,"comment_id":133909352,"body_markdown":"So it looks like you want to create *single* JSON structure containing data from two JSON objects. In that case create `JsonObject` representing first JSON (here `String json`) and add to it new property representing *deviceId* : *67814f71b5bdb4d3* (like `jsonObject.addProperty(&quot;deviceId&quot;, &quot;67814f71b5bdb4d3&quot;)`). Then convert it back to String and publish that String.","body":"So it looks like you want to create <i>single</i> JSON structure containing data from two JSON objects. In that case create <code>JsonObject</code> representing first JSON (here <code>String json</code>) and add to it new property representing <i>deviceId</i> : <i>67814f71b5bdb4d3</i> (like <code>jsonObject.addProperty(&quot;deviceId&quot;, &quot;67814f71b5bdb4d3&quot;)</code>). Then convert it back to String and publish that String."}],"answers":[{"tags":[],"owner":{"account_id":7031093,"reputation":517,"user_id":8772085,"display_name":"Dreamer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680536558,"creation_date":1680531409,"answer_id":75920456,"question_id":75919656,"body_markdown":"Code is not clear for me but you can try something like this \r\n\r\n   \r\n\r\n        String json = gson.toJson(ibeacon);\r\n\r\n       JSONObject jsonObj = new JSONObject(json );\r\n\r\n        try {\r\n            jsonObj.put(&quot;deviceId&quot;, &quot;67814f71b5bdb4d3&quot;);\r\n        } catch (JSONException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n\r\n        String myJSON = JSON.stringify(jsonObj);","title":"how to convert the string to JSON?","body":"<p>Code is not clear for me but you can try something like this</p>\n<pre><code>    String json = gson.toJson(ibeacon);\n\n   JSONObject jsonObj = new JSONObject(json );\n\n    try {\n        jsonObj.put(&quot;deviceId&quot;, &quot;67814f71b5bdb4d3&quot;);\n    } catch (JSONException e) {\n        throw new RuntimeException(e);\n    }\n\n    String myJSON = JSON.stringify(jsonObj);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24049779,"reputation":43,"user_id":18028402,"display_name":"matchaLover"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681129696,"creation_date":1680594099,"answer_id":75926705,"question_id":75919656,"body_markdown":"I created a `Gateway` class object and used `gson` on it. The following code example worked for me:\r\n\r\n    public class Gateway {\r\n        private String deviceId;\r\n    \r\n        public Gateway(String deviceId) {\r\n            this.deviceId = deviceId;\r\n        }\r\n    \r\n        public String getDeviceId() { return deviceId; }\r\n    \r\n        public void setDeviceId(String deviceId) {\r\n            this.deviceId = deviceId;\r\n        }\r\n    }\r\n\r\n    Gateway gateway = new Gateway(&quot;67814f71b5bdb4d3&quot;);\r\n    Gson gson2 = new Gson();\r\n    String json2 = gson2.toJson(gateway);","title":"how to convert the string to JSON?","body":"<p>I created a <code>Gateway</code> class object and used <code>gson</code> on it. The following code example worked for me:</p>\n<pre><code>public class Gateway {\n    private String deviceId;\n\n    public Gateway(String deviceId) {\n        this.deviceId = deviceId;\n    }\n\n    public String getDeviceId() { return deviceId; }\n\n    public void setDeviceId(String deviceId) {\n        this.deviceId = deviceId;\n    }\n}\n\nGateway gateway = new Gateway(&quot;67814f71b5bdb4d3&quot;);\nGson gson2 = new Gson();\nString json2 = gson2.toJson(gateway);\n</code></pre>\n"}],"owner":{"account_id":24049779,"reputation":43,"user_id":18028402,"display_name":"matchaLover"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75926705,"answer_count":2,"score":1,"last_activity_date":1681129696,"creation_date":1680526064,"question_id":75919656,"body_markdown":"    private IBeaconListener createIBeaconListener() {\r\n            return new SimpleIBeaconListener() {\r\n                @Override\r\n                public void onIBeaconDiscovered(IBeaconDevice ibeacon, IBeaconRegion region) {\r\n                    Gson gson = new Gson();\r\n                    String json = gson.toJson(ibeacon);\r\n    \r\n                    Gson gson2 = new Gson();\r\n                    String deviceId = &quot;{deviceId : 67814f71b5bdb4d3}&quot;;\r\n                    String json2 = gson2.toJson(obj);\r\n    \r\n                    Log.i(&quot;Beacon&quot;, &quot;IBeacon discovered: &quot; + json);\r\n                    Log.i(&quot;Gateway&quot;, &quot;Gateway discovered: &quot; + json2);\r\n    \r\n                    new Handler().postDelayed(new Runnable(){\r\n                        @Override\r\n                        public void run() {\r\n                            publish(json + json2);\r\n                        }\r\n                    }, 5000);\r\n                }\r\n            };\r\n        }\r\n\r\nI want to convert *deviceId* to JSON Object so that I can publish it together with *json*. Does anyone know how to do it?\r\nThis is the result I got:\r\n\r\n    {&quot;address&quot;:&quot;05:B2:68:5B:BC:92&quot;,&quot;batteryPower&quot;:-1,&quot;distance&quot;:2.0765944282461007E9,&quot;firmwareVersion&quot;:&quot;-1&quot;,&quot;hashCodeBuilder&quot;:{&quot;iConstant&quot;:37,&quot;iTotal&quot;:17},&quot;major&quot;:1,&quot;minor&quot;:0,&quot;proximity&quot;:&quot;FAR&quot;,&quot;proximityUUID&quot;:&quot;2686f39c-bada-4658-854a-a62e7e5e8b8d&quot;,&quot;rssi&quot;:-94,&quot;shuffled&quot;:false,&quot;timestamp&quot;:1680527328760,&quot;txPower&quot;:11}&quot;{deviceId : 67814f71b5bdb4d3}&quot;\r\n\r\nHowever, I want the output to be like this:\r\n\r\n    {&quot;address&quot;:&quot;05:B2:68:5B:BC:92&quot;,&quot;batteryPower&quot;:-1,&quot;distance&quot;:2.0765944282461007E9,&quot;firmwareVersion&quot;:&quot;-1&quot;,&quot;hashCodeBuilder&quot;:{&quot;iConstant&quot;:37,&quot;iTotal&quot;:17},&quot;major&quot;:1,&quot;minor&quot;:0,&quot;proximity&quot;:&quot;FAR&quot;,&quot;proximityUUID&quot;:&quot;2686f39c-bada-4658-854a-a62e7e5e8b8d&quot;,&quot;rssi&quot;:-94,&quot;shuffled&quot;:false,&quot;timestamp&quot;:1680527328760,&quot;txPower&quot;:11,&quot;deviceId&quot;:&quot;67814f71b5bdb4d3&quot;}","title":"how to convert the string to JSON?","body":"<pre><code>private IBeaconListener createIBeaconListener() {\n        return new SimpleIBeaconListener() {\n            @Override\n            public void onIBeaconDiscovered(IBeaconDevice ibeacon, IBeaconRegion region) {\n                Gson gson = new Gson();\n                String json = gson.toJson(ibeacon);\n\n                Gson gson2 = new Gson();\n                String deviceId = &quot;{deviceId : 67814f71b5bdb4d3}&quot;;\n                String json2 = gson2.toJson(obj);\n\n                Log.i(&quot;Beacon&quot;, &quot;IBeacon discovered: &quot; + json);\n                Log.i(&quot;Gateway&quot;, &quot;Gateway discovered: &quot; + json2);\n\n                new Handler().postDelayed(new Runnable(){\n                    @Override\n                    public void run() {\n                        publish(json + json2);\n                    }\n                }, 5000);\n            }\n        };\n    }\n</code></pre>\n<p>I want to convert <em>deviceId</em> to JSON Object so that I can publish it together with <em>json</em>. Does anyone know how to do it?\nThis is the result I got:</p>\n<pre><code>{&quot;address&quot;:&quot;05:B2:68:5B:BC:92&quot;,&quot;batteryPower&quot;:-1,&quot;distance&quot;:2.0765944282461007E9,&quot;firmwareVersion&quot;:&quot;-1&quot;,&quot;hashCodeBuilder&quot;:{&quot;iConstant&quot;:37,&quot;iTotal&quot;:17},&quot;major&quot;:1,&quot;minor&quot;:0,&quot;proximity&quot;:&quot;FAR&quot;,&quot;proximityUUID&quot;:&quot;2686f39c-bada-4658-854a-a62e7e5e8b8d&quot;,&quot;rssi&quot;:-94,&quot;shuffled&quot;:false,&quot;timestamp&quot;:1680527328760,&quot;txPower&quot;:11}&quot;{deviceId : 67814f71b5bdb4d3}&quot;\n</code></pre>\n<p>However, I want the output to be like this:</p>\n<pre><code>{&quot;address&quot;:&quot;05:B2:68:5B:BC:92&quot;,&quot;batteryPower&quot;:-1,&quot;distance&quot;:2.0765944282461007E9,&quot;firmwareVersion&quot;:&quot;-1&quot;,&quot;hashCodeBuilder&quot;:{&quot;iConstant&quot;:37,&quot;iTotal&quot;:17},&quot;major&quot;:1,&quot;minor&quot;:0,&quot;proximity&quot;:&quot;FAR&quot;,&quot;proximityUUID&quot;:&quot;2686f39c-bada-4658-854a-a62e7e5e8b8d&quot;,&quot;rssi&quot;:-94,&quot;shuffled&quot;:false,&quot;timestamp&quot;:1680527328760,&quot;txPower&quot;:11,&quot;deviceId&quot;:&quot;67814f71b5bdb4d3&quot;}\n</code></pre>\n"},{"tags":["java","testing","configuration","evosuite"],"owner":{"account_id":21228225,"reputation":1,"user_id":15613483,"display_name":"Juvemanu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681129526,"creation_date":1681129526,"question_id":75977108,"body_markdown":"I&#39;m working with evosuite 1.0.6 to generate tests for my project, and each test class comes with a scaffolding file that contains a `setSystemProperties `method with machine-specific properties. This makes it difficult to run the tests on different machines without performing manual configurations on each one. I&#39;ve considered several options, such as removing the `setSystemProperties `method or the scaffolding class, but this could affect the functionality of the tests. I&#39;ve also thought about using environment variables, but this requires each user to correctly configure these variables on their machine.\r\n\r\nI&#39;ve tried several approaches, such as removing the `setSystemProperties `method and the scaffolding class, and using environment variables to configure the properties. However, these options either affect the functionality of the tests or require manual configurations on each machine. I was expecting to find a way to run the evosuite-generated tests on different machines without having to perform manual configurations on each one.\r\n\r\n\r\n I&#39;m looking for suggestions or solutions that could help me overcome this problem.","title":"How to run evosuite-generated tests if scaffolding file contains specific configurations for each machine?","body":"<p>I'm working with evosuite 1.0.6 to generate tests for my project, and each test class comes with a scaffolding file that contains a <code>setSystemProperties </code>method with machine-specific properties. This makes it difficult to run the tests on different machines without performing manual configurations on each one. I've considered several options, such as removing the <code>setSystemProperties </code>method or the scaffolding class, but this could affect the functionality of the tests. I've also thought about using environment variables, but this requires each user to correctly configure these variables on their machine.</p>\n<p>I've tried several approaches, such as removing the <code>setSystemProperties </code>method and the scaffolding class, and using environment variables to configure the properties. However, these options either affect the functionality of the tests or require manual configurations on each machine. I was expecting to find a way to run the evosuite-generated tests on different machines without having to perform manual configurations on each one.</p>\n<p>I'm looking for suggestions or solutions that could help me overcome this problem.</p>\n"},{"tags":["java","spring","elasticsearch"],"comments":[{"owner":{"account_id":24908380,"reputation":3091,"user_id":18778181,"display_name":"rabbitbr"},"score":0,"creation_date":1681129571,"post_id":75976970,"comment_id":134002731,"body_markdown":"The standard analyzer will remove the special characters, you need to search for the keyword type field or generate another analyzer to avoid removing the characters.","body":"The standard analyzer will remove the special characters, you need to search for the keyword type field or generate another analyzer to avoid removing the characters."}],"answers":[{"tags":[],"owner":{"account_id":14795454,"reputation":1996,"user_id":10685211,"display_name":"Musab Dogan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681129311,"creation_date":1681129311,"answer_id":75977085,"question_id":75976970,"body_markdown":"The [standard analyzer][1] uses, [standard tokenizer][2]. Standard tokenizer uses [Unicode Standard Annex #29][3] that tokenizes your &quot;text&quot; and removes `+` and `#` in your case.\r\n\r\nWhat you can do?\r\n----------------\r\n\r\n 1. You can use the `.keyword` field. It won&#39;t be analyzed by default.\r\n 2. You can create a new field with the [custom analyzer][4].\r\n    \r\nDetails:\r\n\r\n    GET _analyze\r\n    {\r\n      &quot;text&quot;: [&quot;test+test#test  ### +++&quot;]\r\n    }\r\n    {\r\n      &quot;tokens&quot;: [\r\n        {\r\n          &quot;token&quot;: &quot;test&quot;,\r\n          &quot;start_offset&quot;: 0,\r\n          &quot;end_offset&quot;: 4,\r\n          &quot;type&quot;: &quot;&lt;ALPHANUM&gt;&quot;,\r\n          &quot;position&quot;: 0\r\n        },\r\n        {\r\n          &quot;token&quot;: &quot;test&quot;,\r\n          &quot;start_offset&quot;: 5,\r\n          &quot;end_offset&quot;: 9,\r\n          &quot;type&quot;: &quot;&lt;ALPHANUM&gt;&quot;,\r\n          &quot;position&quot;: 1\r\n        },\r\n        {\r\n          &quot;token&quot;: &quot;test&quot;,\r\n          &quot;start_offset&quot;: 10,\r\n          &quot;end_offset&quot;: 14,\r\n          &quot;type&quot;: &quot;&lt;ALPHANUM&gt;&quot;,\r\n          &quot;position&quot;: 2\r\n        }\r\n      ]\r\n    }\r\n\r\n\r\n  [1]: https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-standard-analyzer.html\r\n  [2]: https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-standard-tokenizer.html\r\n  [3]: https://unicode.org/reports/tr29/\r\n  [4]: https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-custom-analyzer.html","title":"Searching for special character like # and + using Elastic Search","body":"<p>The <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-standard-analyzer.html\" rel=\"nofollow noreferrer\">standard analyzer</a> uses, <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-standard-tokenizer.html\" rel=\"nofollow noreferrer\">standard tokenizer</a>. Standard tokenizer uses <a href=\"https://unicode.org/reports/tr29/\" rel=\"nofollow noreferrer\">Unicode Standard Annex #29</a> that tokenizes your &quot;text&quot; and removes <code>+</code> and <code>#</code> in your case.</p>\n<h2>What you can do?</h2>\n<ol>\n<li>You can use the <code>.keyword</code> field. It won't be analyzed by default.</li>\n<li>You can create a new field with the <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-custom-analyzer.html\" rel=\"nofollow noreferrer\">custom analyzer</a>.</li>\n</ol>\n<p>Details:</p>\n<pre><code>GET _analyze\n{\n  &quot;text&quot;: [&quot;test+test#test  ### +++&quot;]\n}\n{\n  &quot;tokens&quot;: [\n    {\n      &quot;token&quot;: &quot;test&quot;,\n      &quot;start_offset&quot;: 0,\n      &quot;end_offset&quot;: 4,\n      &quot;type&quot;: &quot;&lt;ALPHANUM&gt;&quot;,\n      &quot;position&quot;: 0\n    },\n    {\n      &quot;token&quot;: &quot;test&quot;,\n      &quot;start_offset&quot;: 5,\n      &quot;end_offset&quot;: 9,\n      &quot;type&quot;: &quot;&lt;ALPHANUM&gt;&quot;,\n      &quot;position&quot;: 1\n    },\n    {\n      &quot;token&quot;: &quot;test&quot;,\n      &quot;start_offset&quot;: 10,\n      &quot;end_offset&quot;: 14,\n      &quot;type&quot;: &quot;&lt;ALPHANUM&gt;&quot;,\n      &quot;position&quot;: 2\n    }\n  ]\n}\n</code></pre>\n"}],"owner":{"account_id":7718592,"reputation":119,"user_id":5845487,"display_name":"Hassan Golshani"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681129311,"creation_date":1681128397,"question_id":75976970,"body_markdown":"I am using standard analyzer in my project but when i want to search jobs based on title with some special character like # or + it does not works and return items contains the requested text. \r\n\r\n\r\n\r\n```\r\n@Data\r\n@Document(indexName = &quot;jobs&quot;)\r\npublic final class Job {\r\n\r\n    @Id\r\n    private Long id;\r\n\r\n    @Field(type = FieldType.Long)\r\n    private Long userId;\r\n\r\n    @Field(type = FieldType.Text, analyzer = &quot;standard&quot;)\r\n    private String title;\r\n\r\n    @Field(type = FieldType.Text, analyzer = &quot;standard&quot;)\r\n    private String description;\r\n\r\n    @Field(type = FieldType.Keyword)\r\n    private JobStatus status;\r\n}\r\n```","title":"Searching for special character like # and + using Elastic Search","body":"<p>I am using standard analyzer in my project but when i want to search jobs based on title with some special character like # or + it does not works and return items contains the requested text.</p>\n<pre><code>@Data\n@Document(indexName = &quot;jobs&quot;)\npublic final class Job {\n\n    @Id\n    private Long id;\n\n    @Field(type = FieldType.Long)\n    private Long userId;\n\n    @Field(type = FieldType.Text, analyzer = &quot;standard&quot;)\n    private String title;\n\n    @Field(type = FieldType.Text, analyzer = &quot;standard&quot;)\n    private String description;\n\n    @Field(type = FieldType.Keyword)\n    private JobStatus status;\n}\n</code></pre>\n"},{"tags":["java","amazon-web-services","function","url","aws-lambda"],"answers":[{"tags":[],"owner":{"account_id":15910691,"reputation":1091,"user_id":11480721,"display_name":"Ausgefuchster"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681121700,"creation_date":1681121700,"answer_id":75976205,"question_id":75975933,"body_markdown":"Try using `Map&lt;String, Object&gt;` or create a custom pojo for the expected object.\r\n\r\nAWS also has example for this:\r\n\r\nhttps://github.com/awsdocs/aws-lambda-developer-guide/blob/main/sample-apps/java-basic/src/main/java/example/HandlerWeatherData.java","title":"AWS lambda function URLs with JSON input in Java giving JSON parse exception","body":"<p>Try using <code>Map&lt;String, Object&gt;</code> or create a custom pojo for the expected object.</p>\n<p>AWS also has example for this:</p>\n<p><a href=\"https://github.com/awsdocs/aws-lambda-developer-guide/blob/main/sample-apps/java-basic/src/main/java/example/HandlerWeatherData.java\" rel=\"nofollow noreferrer\">https://github.com/awsdocs/aws-lambda-developer-guide/blob/main/sample-apps/java-basic/src/main/java/example/HandlerWeatherData.java</a></p>\n"}],"owner":{"account_id":1570034,"reputation":25,"user_id":1457926,"display_name":"Santosh Keleti"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":359,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75976205,"answer_count":1,"score":0,"last_activity_date":1681129232,"creation_date":1681119499,"question_id":75975933,"body_markdown":"I have created a AWS Lambda function as follows,\r\n\r\n```java\r\npublic class PiiDecryptionLambda implements RequestHandler&lt;Map&lt;String, String&gt;, String&gt; {\r\n\r\n    public PiiDecryptionLambda() {\r\n    }\r\n\r\n    @Override\r\n    public String handleRequest(Map&lt;String, String&gt; requestData, Context context) {\r\n        LambdaLogger logger = context.getLogger();\r\n        logger.log(&quot;inside the lamda and the data is :&quot;+requestData);\r\n        return requestData.get(&quot;name&quot;);\r\n    }\r\n}\r\n```\r\n\r\nThen i have configured the Funtion URL for the lambda function. when try to access this from post using Function URLs given the AWS lambda, getting following error\r\n\r\n&gt; An error occurred during JSON parsing: java.lang.RuntimeException\r\n&gt; java.lang.RuntimeException: An error occurred during JSON parsing\r\n&gt; Caused by: java.io.UncheckedIOException:\r\n&gt; com.fasterxml.jackson.databind.JsonMappingException: Can not\r\n&gt; deserialize instance of java.lang.String out of START_OBJECT token  at\r\n&gt; [Source: lambdainternal.util.NativeMemoryAsInputStream@42e26948; line:\r\n&gt; 1, column: 1] Caused by:\r\n&gt; com.fasterxml.jackson.databind.JsonMappingException: Can not\r\n&gt; deserialize instance of java.lang.String out of START_OBJECT token  at\r\n&gt; [Source: lambdainternal.util.NativeMemoryAsInputStream@42e26948; line:\r\n&gt; 1, column: 1] \tat\r\n&gt; com.fasterxml.jackson.databind.JsonMappingException.from(JsonMappingException.java:148)\r\n&gt; \tat\r\n&gt; com.fasterxml.jackson.databind.DeserializationContext.mappingException(DeserializationContext.java:857)\r\n&gt; \tat\r\n&gt; com.fasterxml.jackson.databind.deser.std.StringDeserializer.deserialize(StringDeserializer.java:62)\r\n&gt; \tat\r\n&gt; com.fasterxml.jackson.databind.deser.std.StringDeserializer.deserialize(StringDeserializer.java:11)\r\n&gt; \tat\r\n&gt; com.fasterxml.jackson.databind.ObjectReader._bindAndClose(ObjectReader.java:1511)\r\n&gt; \tat\r\n&gt; com.fasterxml.jackson.databind.ObjectReader.readValue(ObjectReader.java:1102)\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n[![enter image description here](https://i.stack.imgur.com/v2XZk.png)](https://i.stack.imgur.com/v2XZk.png)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/qEnGg.png","title":"AWS lambda function URLs with JSON input in Java giving JSON parse exception","body":"<p>I have created a AWS Lambda function as follows,</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class PiiDecryptionLambda implements RequestHandler&lt;Map&lt;String, String&gt;, String&gt; {\n\n    public PiiDecryptionLambda() {\n    }\n\n    @Override\n    public String handleRequest(Map&lt;String, String&gt; requestData, Context context) {\n        LambdaLogger logger = context.getLogger();\n        logger.log(&quot;inside the lamda and the data is :&quot;+requestData);\n        return requestData.get(&quot;name&quot;);\n    }\n}\n</code></pre>\n<p>Then i have configured the Funtion URL for the lambda function. when try to access this from post using Function URLs given the AWS lambda, getting following error</p>\n<blockquote>\n<p>An error occurred during JSON parsing: java.lang.RuntimeException\njava.lang.RuntimeException: An error occurred during JSON parsing\nCaused by: java.io.UncheckedIOException:\ncom.fasterxml.jackson.databind.JsonMappingException: Can not\ndeserialize instance of java.lang.String out of START_OBJECT token  at\n[Source: lambdainternal.util.NativeMemoryAsInputStream@42e26948; line:\n1, column: 1] Caused by:\ncom.fasterxml.jackson.databind.JsonMappingException: Can not\ndeserialize instance of java.lang.String out of START_OBJECT token  at\n[Source: lambdainternal.util.NativeMemoryAsInputStream@42e26948; line:\n1, column: 1]     at\ncom.fasterxml.jackson.databind.JsonMappingException.from(JsonMappingException.java:148)\nat\ncom.fasterxml.jackson.databind.DeserializationContext.mappingException(DeserializationContext.java:857)\nat\ncom.fasterxml.jackson.databind.deser.std.StringDeserializer.deserialize(StringDeserializer.java:62)\nat\ncom.fasterxml.jackson.databind.deser.std.StringDeserializer.deserialize(StringDeserializer.java:11)\nat\ncom.fasterxml.jackson.databind.ObjectReader._bindAndClose(ObjectReader.java:1511)\nat\ncom.fasterxml.jackson.databind.ObjectReader.readValue(ObjectReader.java:1102)</p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/qEnGg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qEnGg.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/v2XZk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/v2XZk.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","xor-drawing"],"answers":[{"tags":[],"owner":{"account_id":22060406,"reputation":44,"user_id":16323206,"display_name":"jazznbass"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681128353,"creation_date":1681126646,"answer_id":75976752,"question_id":74151494,"body_markdown":"I have tried to export SVG files with Batik&#39;s SVGGenerator from Graphics2D objects with XOR composite but it seems that it is not supported (not using setXORMode that is also not supported). I have managed to add it as a filter in Batik source but the result is not the same as the original java object. It seems that if you use operators like XOR as a filter in SVG the outcome is very different to almost useless. The only correct Batik conversion is SRC_OVER, this one is being composed as direct alpha values not as a filter.\r\n\r\nIf someone could approximate XOR operator in direct alpha values that could be great but I am not sure **if this is possible**, considering the differences between XOR and SRC_OVER operators.\r\n\r\nAn other option could be this library, it seems to support composite but I do not know to what extent: https://github.com/jfree/jfreesvg","title":"XOR Mode is not supported by Graphics2D SVG Generator","body":"<p>I have tried to export SVG files with Batik's SVGGenerator from Graphics2D objects with XOR composite but it seems that it is not supported (not using setXORMode that is also not supported). I have managed to add it as a filter in Batik source but the result is not the same as the original java object. It seems that if you use operators like XOR as a filter in SVG the outcome is very different to almost useless. The only correct Batik conversion is SRC_OVER, this one is being composed as direct alpha values not as a filter.</p>\n<p>If someone could approximate XOR operator in direct alpha values that could be great but I am not sure <strong>if this is possible</strong>, considering the differences between XOR and SRC_OVER operators.</p>\n<p>An other option could be this library, it seems to support composite but I do not know to what extent: <a href=\"https://github.com/jfree/jfreesvg\" rel=\"nofollow noreferrer\">https://github.com/jfree/jfreesvg</a></p>\n"}],"owner":{"account_id":22607594,"reputation":13,"user_id":16788285,"display_name":"Manuel Kaufmann"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75976752,"answer_count":1,"score":0,"last_activity_date":1681128353,"creation_date":1666344061,"question_id":74151494,"body_markdown":"How to Perform XOR from Graphics2D in SVGGraphics2D\r\n\r\n```\r\nGraphics2D g2D = (Graphics2D) svgGraphics2D;\r\n\r\n// Using white as the XOR color.\r\ng2D.setXORMode(Color.white);\r\n\r\n// Draw two overlapping rectangles.\r\nRectangle2D r = new Rectangle2D.Double(50, 50, 150, 100);\r\ng2D.setPaint(Color.BLACK);\r\ng2D.fill(r);\r\ng2D.transform(AffineTransform.getTranslateInstance(25, 25));\r\ng2D.fill(r);\r\n```\r\nsout-&gt; XOR Mode is not supported by Graphics2D SVG Generator\r\n\r\n\r\nIs there a simple convert, or can I check while drawing a Pixel if its already Black. \r\nI Need to perform Black and White Overlapping for Fonts, BufferedImages, ... too. So I cant just .setPaint().","title":"XOR Mode is not supported by Graphics2D SVG Generator","body":"<p>How to Perform XOR from Graphics2D in SVGGraphics2D</p>\n<pre><code>Graphics2D g2D = (Graphics2D) svgGraphics2D;\n\n// Using white as the XOR color.\ng2D.setXORMode(Color.white);\n\n// Draw two overlapping rectangles.\nRectangle2D r = new Rectangle2D.Double(50, 50, 150, 100);\ng2D.setPaint(Color.BLACK);\ng2D.fill(r);\ng2D.transform(AffineTransform.getTranslateInstance(25, 25));\ng2D.fill(r);\n</code></pre>\n<p>sout-&gt; XOR Mode is not supported by Graphics2D SVG Generator</p>\n<p>Is there a simple convert, or can I check while drawing a Pixel if its already Black.\nI Need to perform Black and White Overlapping for Fonts, BufferedImages, ... too. So I cant just .setPaint().</p>\n"},{"tags":["java","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":1494497,"reputation":252,"user_id":1400778,"accept_rate":50,"display_name":"Naqi"},"score":0,"creation_date":1615180161,"post_id":66524227,"comment_id":117602076,"body_markdown":"can you share the code from which this exception is thrown?","body":"can you share the code from which this exception is thrown?"},{"owner":{"account_id":10336867,"reputation":31,"user_id":7624680,"display_name":"NubMaster"},"score":0,"creation_date":1615182709,"post_id":66524227,"comment_id":117602568,"body_markdown":"i was trying to save the entity using springJpa where customerid was null.","body":"i was trying to save the entity using springJpa where customerid was null."},{"owner":{"account_id":1494497,"reputation":252,"user_id":1400778,"accept_rate":50,"display_name":"Naqi"},"score":0,"creation_date":1615184140,"post_id":66524227,"comment_id":117602881,"body_markdown":"have you check the database table? Reconfirm that the column is nullable in database. Make sure to refresh any database client window you have already opened.","body":"have you check the database table? Reconfirm that the column is nullable in database. Make sure to refresh any database client window you have already opened."},{"owner":{"account_id":10336867,"reputation":31,"user_id":7624680,"display_name":"NubMaster"},"score":0,"creation_date":1615184710,"post_id":66524227,"comment_id":117602992,"body_markdown":"yes column in database table does not contain any constraints.","body":"yes column in database table does not contain any constraints."},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1615187790,"post_id":66524227,"comment_id":117603734,"body_markdown":"Strange. I always assumed this was how it was supposed to work: That the DB abstraction layer enforced it so you didn’t have to have a column constraint","body":"Strange. I always assumed this was how it was supposed to work: That the DB abstraction layer enforced it so you didn’t have to have a column constraint"},{"owner":{"account_id":1100252,"reputation":10087,"user_id":1092818,"display_name":"crizzis"},"score":0,"creation_date":1615201486,"post_id":66524227,"comment_id":117609103,"body_markdown":"If the property is supposed to accept `null`s and there&#39;s no DB constraint, why did you use `nullable = false` in the first place?","body":"If the property is supposed to accept <code>null</code>s and there&#39;s no DB constraint, why did you use <code>nullable = false</code> in the first place?"},{"owner":{"account_id":10336867,"reputation":31,"user_id":7624680,"display_name":"NubMaster"},"score":0,"creation_date":1615205151,"post_id":66524227,"comment_id":117610629,"body_markdown":"@crizzis this is an old project, there are lot of instances like this in the codebase, so i dont want to manually remove nullable=false from every place.","body":"@crizzis this is an old project, there are lot of instances like this in the codebase, so i dont want to manually remove nullable=false from every place."},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1615225486,"post_id":66524227,"comment_id":117620176,"body_markdown":"@NubMaster how hard can it be to globally replace `, nullable = false` with a blank using an editor?","body":"@NubMaster how hard can it be to globally replace <code>, nullable = false</code> with a blank using an editor?"}],"answers":[{"tags":[],"owner":{"account_id":5072322,"reputation":29,"user_id":4070768,"display_name":"PDiddly"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1615253172,"creation_date":1615253172,"answer_id":66539503,"question_id":66524227,"body_markdown":"I can&#39;t comment above (rep isn&#39;t high enough), and there&#39;s not enough to know that this will answer the question, but\r\nTake a look here: https://www.baeldung.com/hibernate-notnull-vs-nullable and https://docs.jboss.org/hibernate/orm/5.2/userguide/html_single/appendices/Configurations.html\r\nIf you have this set, Hibernate will check null before the DB.\r\n```\r\nspring.jpa.properties.hibernate.check_nullability\r\n```\r\n\r\nSo I&#39;m thinking you have that property set.\r\n","title":"@Column(nullable=false) validating the null check at application level","body":"<p>I can't comment above (rep isn't high enough), and there's not enough to know that this will answer the question, but\nTake a look here: <a href=\"https://www.baeldung.com/hibernate-notnull-vs-nullable\" rel=\"nofollow noreferrer\">https://www.baeldung.com/hibernate-notnull-vs-nullable</a> and <a href=\"https://docs.jboss.org/hibernate/orm/5.2/userguide/html_single/appendices/Configurations.html\" rel=\"nofollow noreferrer\">https://docs.jboss.org/hibernate/orm/5.2/userguide/html_single/appendices/Configurations.html</a>\nIf you have this set, Hibernate will check null before the DB.</p>\n<pre><code>spring.jpa.properties.hibernate.check_nullability\n</code></pre>\n<p>So I'm thinking you have that property set.</p>\n"},{"tags":[],"owner":{"account_id":2509854,"reputation":641,"user_id":2207837,"display_name":"Jaap"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1681127822,"creation_date":1664957351,"answer_id":73957513,"question_id":66524227,"body_markdown":"This is due to a change in Spring Boot 2.3.x:\r\n\r\nhttps://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.3-Release-Notes#validation-starter-no-longer-included-in-web-starters\r\n\r\n&gt; As of #19550, Web and WebFlux starters do not depend on the validation starter by default any more. If your application is using validation features, for example you find that `javax.validation.*` imports are not being resolved, you’ll need to add the starter yourself.\r\n\r\nAs of 2.3.0, the Validation starter is no longer included in the Web starters. That means that Bean Validation is no longer on the classpath, causing a change in Hibernate&#39;s behaviour. This is indicated in the Hibernate docs here:\r\n\r\nhttps://docs.jboss.org/hibernate/orm/current/userguide/html_single/Hibernate_User_Guide.html#_bean_validation_options\r\n\r\n&gt; hibernate.check_nullability (e.g. true or false)\r\n&gt; Enable nullability checking. Raises an exception if a property marked as not-null is null.\r\n\r\n&gt; Default to false if Bean Validation is present in the classpath and Hibernate Annotations is used, true otherwise.\r\n\r\nSo, the sudden validation taking place can be resolved in two ways:\r\n\r\n- By setting `spring.jpa.properties.hibernate.check_nullability` to `false` as indicated in PDiddly&#39;s answer\r\n- Or by adding the `spring-boot-starter-validation` dependency to your project:\r\n\r\n```\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n```\r\n\r\n(or the individual dependencies for bean validation if you prefer so)\r\n","title":"@Column(nullable=false) validating the null check at application level","body":"<p>This is due to a change in Spring Boot 2.3.x:</p>\n<p><a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.3-Release-Notes#validation-starter-no-longer-included-in-web-starters\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.3-Release-Notes#validation-starter-no-longer-included-in-web-starters</a></p>\n<blockquote>\n<p>As of #19550, Web and WebFlux starters do not depend on the validation starter by default any more. If your application is using validation features, for example you find that <code>javax.validation.*</code> imports are not being resolved, you’ll need to add the starter yourself.</p>\n</blockquote>\n<p>As of 2.3.0, the Validation starter is no longer included in the Web starters. That means that Bean Validation is no longer on the classpath, causing a change in Hibernate's behaviour. This is indicated in the Hibernate docs here:</p>\n<p><a href=\"https://docs.jboss.org/hibernate/orm/current/userguide/html_single/Hibernate_User_Guide.html#_bean_validation_options\" rel=\"nofollow noreferrer\">https://docs.jboss.org/hibernate/orm/current/userguide/html_single/Hibernate_User_Guide.html#_bean_validation_options</a></p>\n<blockquote>\n<p>hibernate.check_nullability (e.g. true or false)\nEnable nullability checking. Raises an exception if a property marked as not-null is null.</p>\n</blockquote>\n<blockquote>\n<p>Default to false if Bean Validation is present in the classpath and Hibernate Annotations is used, true otherwise.</p>\n</blockquote>\n<p>So, the sudden validation taking place can be resolved in two ways:</p>\n<ul>\n<li>By setting <code>spring.jpa.properties.hibernate.check_nullability</code> to <code>false</code> as indicated in PDiddly's answer</li>\n<li>Or by adding the <code>spring-boot-starter-validation</code> dependency to your project:</li>\n</ul>\n<pre><code>    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>(or the individual dependencies for bean validation if you prefer so)</p>\n"}],"owner":{"account_id":10336867,"reputation":31,"user_id":7624680,"display_name":"NubMaster"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1961,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1681127822,"creation_date":1615176958,"question_id":66524227,"body_markdown":"From my understanding nullable = false(let say for column customerid) is only useful for creating schemas using hibernate and it should not do any kind of validation before persisting. My database column has no such constraint(it can take null values), while persisting the entity with customerid null, getting this error\r\n\r\n    Caused by: org.hibernate.PropertyValueException: not-null property references a null or transient value :b\r\n    \tat org.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:111) ~[hibernate-core-5.4.27.Final.jar:5.4.27.Final]\r\n    \tat org.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:55) ~[hibernate-core-5.4.27.Final.jar:5.4.27.Final]\r\n    \tat \r\n\r\nThis error started keep coming after i update my spring boot version to 2.4.2\r\n\r\n\r\nEntity class\r\n\r\n    public class FaceIndexResponse extends AuditEntity {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Integer id;\r\n        @Column(name=&quot;customer_id&quot;,nullable = false)\r\n        private String customerId;\r\n        @Column(name=&quot;application_id&quot;)\r\n        private String appid;}\r\n\r\nService class where i was trying to save the above entity\r\n\r\n    public IndexFacesResult handle(FaceIndexModel model) throws IOException{\r\n        FaceIndexResponse response=new FaceIndexResponse();\r\n        response.setAppid(model.getApplicationId);\r\n        faceIndexResponseJpa.save(response);\r\n     }\r\n\r\n\r\n                                       Table &quot;public.face_index_response&quot;\r\n         Column     |            Type             | Collation | Nullable |             Default              \r\n    ----------------+-----------------------------+-----------+----------+----------------------------------\r\n     id             | integer                     |           | not null | generated by default as identity\r\n     customer_id    | character varying(64)       |           |          | \r\n     application_id | character varying(64)       |           |          | \r\n\r\n\r\n","title":"@Column(nullable=false) validating the null check at application level","body":"<p>From my understanding nullable = false(let say for column customerid) is only useful for creating schemas using hibernate and it should not do any kind of validation before persisting. My database column has no such constraint(it can take null values), while persisting the entity with customerid null, getting this error</p>\n<pre><code>Caused by: org.hibernate.PropertyValueException: not-null property references a null or transient value :b\n    at org.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:111) ~[hibernate-core-5.4.27.Final.jar:5.4.27.Final]\n    at org.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:55) ~[hibernate-core-5.4.27.Final.jar:5.4.27.Final]\n    at \n</code></pre>\n<p>This error started keep coming after i update my spring boot version to 2.4.2</p>\n<p>Entity class</p>\n<pre><code>public class FaceIndexResponse extends AuditEntity {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n    @Column(name=&quot;customer_id&quot;,nullable = false)\n    private String customerId;\n    @Column(name=&quot;application_id&quot;)\n    private String appid;}\n</code></pre>\n<p>Service class where i was trying to save the above entity</p>\n<pre><code>public IndexFacesResult handle(FaceIndexModel model) throws IOException{\n    FaceIndexResponse response=new FaceIndexResponse();\n    response.setAppid(model.getApplicationId);\n    faceIndexResponseJpa.save(response);\n }\n\n\n                                   Table &quot;public.face_index_response&quot;\n     Column     |            Type             | Collation | Nullable |             Default              \n----------------+-----------------------------+-----------+----------+----------------------------------\n id             | integer                     |           | not null | generated by default as identity\n customer_id    | character varying(64)       |           |          | \n application_id | character varying(64)       |           |          | \n</code></pre>\n"},{"tags":["java","git","jgit"],"comments":[{"owner":{"account_id":2837108,"reputation":27339,"user_id":2437508,"accept_rate":25,"display_name":"eftshift0"},"score":0,"creation_date":1623080174,"post_id":67874573,"comment_id":119970777,"body_markdown":"Would need to see more of the exception to see what thee real cause is.... however, 2 things come to mind easy: permissions of the user that is running the process _and_ that the process be actually standing on that repo directory as its PWD.","body":"Would need to see more of the exception to see what thee real cause is.... however, 2 things come to mind easy: permissions of the user that is running the process <i>and</i> that the process be actually standing on that repo directory as its PWD."},{"owner":{"account_id":6648529,"reputation":939,"user_id":5131614,"display_name":"arjunkhera"},"score":0,"creation_date":1623080652,"post_id":67874573,"comment_id":119971020,"body_markdown":"To do a quick test, I just wrote a simple java program with the just the deletion code, It worked fine. Looking at the error I can make out it has access issues for the particular mentioned git file. What I cannot figure out is why specifically it does not work for this. I will do some more check, maybe am missing something obvious","body":"To do a quick test, I just wrote a simple java program with the just the deletion code, It worked fine. Looking at the error I can make out it has access issues for the particular mentioned git file. What I cannot figure out is why specifically it does not work for this. I will do some more check, maybe am missing something obvious"},{"owner":{"account_id":2837108,"reputation":27339,"user_id":2437508,"accept_rate":25,"display_name":"eftshift0"},"score":0,"creation_date":1623080961,"post_id":67874573,"comment_id":119971202,"body_markdown":"Is it running on a windows box? If that&#39;s the case, _perhaps_ the file is open at the time (which is a **no-go** in windows, if the file is open).","body":"Is it running on a windows box? If that&#39;s the case, <i>perhaps</i> the file is open at the time (which is a <b>no-go</b> in windows, if the file is open)."},{"owner":{"account_id":549364,"reputation":20582,"user_id":2986905,"accept_rate":78,"display_name":"R&#252;diger Herrmann"},"score":0,"creation_date":1623108425,"post_id":67874573,"comment_id":119980196,"body_markdown":"What does `GitUtils.getRepositoryPath` do exactly? You certainly need to close the repo before deleting it, see also https://stackoverflow.com/questions/45266021/java-jgit-files-delete-fails-to-delete-a-file-but-file-delete-succeeds","body":"What does <code>GitUtils.getRepositoryPath</code> do exactly? You certainly need to close the repo before deleting it, see also <a href=\"https://stackoverflow.com/questions/45266021/java-jgit-files-delete-fails-to-delete-a-file-but-file-delete-succeeds\" title=\"java jgit files delete fails to delete a file but file delete succeeds\">stackoverflow.com/questions/45266021/&hellip;</a>"},{"owner":{"account_id":6648529,"reputation":939,"user_id":5131614,"display_name":"arjunkhera"},"score":0,"creation_date":1623164003,"post_id":67874573,"comment_id":119996652,"body_markdown":"I was using try with resource semantics as documented here https://github.com/centic9/jgit-cookbook/blob/master/src/main/java/org/dstadler/jgit/porcelain/CloneRemoteRepository.java#L46. The function you are asking is just a utility to obtain the path where I want to clone the repo.","body":"I was using try with resource semantics as documented here <a href=\"https://github.com/centic9/jgit-cookbook/blob/master/src/main/java/org/dstadler/jgit/porcelain/CloneRemoteRepository.java#L46\" rel=\"nofollow noreferrer\">github.com/centic9/jgit-cookbook/blob/master/src/main/java/o&zwnj;&#8203;rg/&hellip;</a>. The function you are asking is just a utility to obtain the path where I want to clone the repo."},{"owner":{"account_id":6648529,"reputation":939,"user_id":5131614,"display_name":"arjunkhera"},"score":0,"creation_date":1623164292,"post_id":67874573,"comment_id":119996849,"body_markdown":"@eftshift0 the files were not open. I have been bitten by that mistake before so am careful about this. And yes, for better or worse, I am working on windows :)","body":"@eftshift0 the files were not open. I have been bitten by that mistake before so am careful about this. And yes, for better or worse, I am working on windows :)"},{"owner":{"account_id":2837108,"reputation":27339,"user_id":2437508,"accept_rate":25,"display_name":"eftshift0"},"score":0,"creation_date":1623165050,"post_id":67874573,"comment_id":119997277,"body_markdown":"Just in case, I don&#39;t mean the project files but the _repo_ files. I am assuming that you are closing the repo before trying to delete it.","body":"Just in case, I don&#39;t mean the project files but the <i>repo</i> files. I am assuming that you are closing the repo before trying to delete it."},{"owner":{"account_id":6648529,"reputation":939,"user_id":5131614,"display_name":"arjunkhera"},"score":0,"creation_date":1623165342,"post_id":67874573,"comment_id":119997433,"body_markdown":"As of now, I have just started from clone, which as you can see from the code I attached, that I check no previous repo was present, on that path before cloning. But if there was, I need to delete it. Currently I am not working on the repo files anywhere else that would lead to locking of files by jgit.","body":"As of now, I have just started from clone, which as you can see from the code I attached, that I check no previous repo was present, on that path before cloning. But if there was, I need to delete it. Currently I am not working on the repo files anywhere else that would lead to locking of files by jgit."}],"answers":[{"tags":[],"owner":{"account_id":6648529,"reputation":939,"user_id":5131614,"display_name":"arjunkhera"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1623163911,"creation_date":1623163911,"answer_id":67889453,"question_id":67874573,"body_markdown":"Apparently the Apache Commons IO function was throwing the error. Recursively traversing all files and deleting them using the `java.io` delete command worked perfectly fine.\r\n\r\nHere is the code snippet used for reference,\r\n\r\n    public static boolean deleteDirectory(File file) {\r\n        File[] children = file.listFiles();\r\n        if (children != null) {\r\n            for (File child : children) {\r\n                deleteDirectory(child);\r\n            }\r\n        }\r\n        return file.delete();\r\n    }\r\n","title":"Cannot Delete Repository Folder created by JGIT","body":"<p>Apparently the Apache Commons IO function was throwing the error. Recursively traversing all files and deleting them using the <code>java.io</code> delete command worked perfectly fine.</p>\n<p>Here is the code snippet used for reference,</p>\n<pre><code>public static boolean deleteDirectory(File file) {\n    File[] children = file.listFiles();\n    if (children != null) {\n        for (File child : children) {\n            deleteDirectory(child);\n        }\n    }\n    return file.delete();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8474188,"reputation":26,"user_id":6355920,"display_name":"Karanshah81295"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681127819,"creation_date":1681127819,"answer_id":75976893,"question_id":67874573,"body_markdown":"Use .close() method post Git clone and this will solve your issue.\r\n```\r\ntry (Git git = Git.cloneRepository()\r\n        .setURI(repoUrl)\r\n        .setDirectory(file)\r\n        .setBranchesToClone(List.of(&quot;refs/heads/&quot; + branchToClone))\r\n        .setBranch(&quot;refs/heads/&quot; + branchToClone)\r\n        .setCredentialsProvider(new UsernamePasswordCredentialsProvider( &quot;token&quot;, this.credentials.getGitToken()))\r\n        .call()\r\n        .close();\r\n```","title":"Cannot Delete Repository Folder created by JGIT","body":"<p>Use .close() method post Git clone and this will solve your issue.</p>\n<pre><code>try (Git git = Git.cloneRepository()\n        .setURI(repoUrl)\n        .setDirectory(file)\n        .setBranchesToClone(List.of(&quot;refs/heads/&quot; + branchToClone))\n        .setBranch(&quot;refs/heads/&quot; + branchToClone)\n        .setCredentialsProvider(new UsernamePasswordCredentialsProvider( &quot;token&quot;, this.credentials.getGitToken()))\n        .call()\n        .close();\n</code></pre>\n"}],"owner":{"account_id":6648529,"reputation":939,"user_id":5131614,"display_name":"arjunkhera"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":964,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":67889453,"answer_count":2,"score":1,"last_activity_date":1681127819,"creation_date":1623080067,"question_id":67874573,"body_markdown":"I am unable to delete folder containing a cloned repository created using `jgit`. I have tried all kinds of utility delete methods but none works. The error thrown while using `FileUtils.deleteDirectory(file)` is as follows  \r\n\r\n`java.nio.file.AccessDeniedException: \\repositories\\Test\\Test\\.git\\objects\\pack\\pack-21cdd19e90e9e6bd2e8d295ea04201969594fe96.idx`\r\n\r\nTried the following,    \r\n1. I have seen a range of other answers, for example [1] and [2]. They are all concerned with cases wherein they created a repository with `jgit` first and then deleted it immediately after that. In my current scenario I want to check if a repository is already cloned at given path and delete if present. After doing this task, I want to clone a repository using `jgit` on the same path.\r\n2. I tried cases wherein I created the repository with `jgit`, shut down my server. Started it again and then simply called a function to delete the folder created earlier. This again failed with the same error.\r\n3. I also completely removed jgit from my initial code and from pom since it might be getting into loaded into classpath. I still get the same error when trying to delete. Tried again after restarting just to check, the issue still persists.\r\n4. However, when I run the same deletion code from another Java program, it succeeds.\r\n\r\n\r\n[1] https://stackoverflow.com/questions/65124176/how-to-remove-local-repository-by-java-code-that-was-cloned-by-jgit-java-library  \r\n[2] https://stackoverflow.com/questions/31764311/how-do-i-release-file-system-locks-after-cloning-repo-via-jgit  \r\n\r\nHere is the original code snippet for reference, \r\n\r\n        File file = null;\r\n        try {\r\n            file = new File(localRepositoryPath);\r\n\r\n            // Delete directory if already present\r\n            String localRepositoryParentPath = GitUtils.getRepositoryPath(projectName, null);\r\n            File parentDirectory = new File(localRepositoryParentPath);\r\n            FileUtils.deleteDirectory(parentDirectory);\r\n\r\n            // Create directory where repository will be cloned\r\n            if(!file.mkdirs()) {\r\n                throw new GitServiceException(\r\n                    GitUtils.getCloneFailureMessage(&quot;Unable to create directory&quot;,\r\n                        projectName,\r\n                        repoName));\r\n            }\r\n        } catch (NullPointerException | SecurityException | IOException e) {\r\n            logger.info(Arrays.toString(e.getStackTrace()));\r\n            logger.error(&quot;IO Error cloning repository {} and project {}. Stacktrace {} &quot;,\r\n                repoName,\r\n                projectName,\r\n                e.getStackTrace());\r\n            throw new GitServiceException(\r\n                GitUtils.getCloneFailureMessage(&quot;IO Error while cloning&quot;,\r\n                    projectName,\r\n                    repoName));\r\n        }\r\n\r\n        // Clone the git repository\r\n        try (Git git = Git.cloneRepository()\r\n                .setURI(repoUrl)\r\n                .setDirectory(file)\r\n                .setBranchesToClone(List.of(&quot;refs/heads/&quot; + branchToClone))\r\n                .setBranch(&quot;refs/heads/&quot; + branchToClone)\r\n                .setCredentialsProvider(new UsernamePasswordCredentialsProvider( &quot;token&quot;, this.credentials.getGitToken()))\r\n                .call();\r\n        ) {\r\n            logger.info(&quot;Successfully cloned branch {} on path {} for repository {} and project {}&quot;,\r\n                branchToClone,\r\n                localRepositoryPath,\r\n                repoName,\r\n                projectName);\r\n        } catch (Exception exception) {\r\n            logger.error(&quot;Error cloning repository {} and project {}. Stacktrace {} &quot;,\r\n                repoName,\r\n                projectName,\r\n                exception.getStackTrace());\r\n            throw new GitServiceException(\r\n                GitUtils.getCloneFailureMessage(&quot;Unable to clone repository locally&quot;,\r\n                    projectName,\r\n                    repoName));\r\n        }\r\n\r\n\r\n**Edit**\r\n\r\nAdding error stacktrace\r\n\r\n    org.apache.commons.io.IOExceptionList: 1 exceptions: [java.io.IOException: Unable to delete file: \\repositories\\Test\\Test\\.git]\r\n\tat org.apache.commons.io.FileUtils.cleanDirectory(FileUtils.java:345)\r\n\tat org.apache.commons.io.FileUtils.deleteDirectory(FileUtils.java:1206)\r\n\tat com.adobe.mdloc.controller.TestController.post(TestController.java:57)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1060)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:962)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:652)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:733)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat com.adobe.asr.filter.AsrRequestResponseFilter.doFilterInternal(AsrRequestResponseFilter.java:88)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat com.adobe.asr.logging.http.servlet.AsrLoggingFilter.doFilter(AsrLoggingFilter.java:71)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat com.adobe.asr.filter.AsrRequestIdFilter.doFilterInternal(AsrRequestIdFilter.java:99)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat com.adobe.asr.exception.AsrExceptionFilter.doFilterInternal(AsrExceptionFilter.java:82)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:888)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1597)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:834)\r\n\r\n    Caused by: java.io.IOException: Unable to delete file: \\repositories\\Test\\Test\\.git\r\n\tat org.apache.commons.io.FileUtils.forceDelete(FileUtils.java:1425)\r\n\tat org.apache.commons.io.FileUtils.cleanDirectory(FileUtils.java:338)\r\n\t... 71 more\r\n\r\n    Caused by: java.nio.file.AccessDeniedException: \\repositories\\Test\\Test\\.git\\objects\\pack\\pack-21cdd19e90e9e6bd2e8d295ea04201969594fe96.idx\r\n\tat java.base/sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:89)\r\n\tat java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:103)\r\n\tat java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:108)\r\n\tat java.base/sun.nio.fs.WindowsFileSystemProvider.implDelete(WindowsFileSystemProvider.java:274)\r\n\tat java.base/sun.nio.fs.AbstractFileSystemProvider.deleteIfExists(AbstractFileSystemProvider.java:110)\r\n\tat java.base/java.nio.file.Files.deleteIfExists(Files.java:1180)\r\n\tat org.apache.commons.io.file.DeletingPathVisitor.visitFile(DeletingPathVisitor.java:142)\r\n\tat org.apache.commons.io.file.DeletingPathVisitor.visitFile(DeletingPathVisitor.java:36)\r\n\tat java.base/java.nio.file.Files.walkFileTree(Files.java:2724)\r\n\tat java.base/java.nio.file.Files.walkFileTree(Files.java:2796)\r\n\tat org.apache.commons.io.file.PathUtils.visitFileTree(PathUtils.java:687)\r\n\tat org.apache.commons.io.file.PathUtils.deleteDirectory(PathUtils.java:328)\r\n\tat org.apache.commons.io.file.PathUtils.delete(PathUtils.java:303)\r\n\tat org.apache.commons.io.file.PathUtils.delete(PathUtils.java:280)\r\n\tat org.apache.commons.io.FileUtils.forceDelete(FileUtils.java:1423)\r\n\t... 72 more\r\n\r\n","title":"Cannot Delete Repository Folder created by JGIT","body":"<p>I am unable to delete folder containing a cloned repository created using <code>jgit</code>. I have tried all kinds of utility delete methods but none works. The error thrown while using <code>FileUtils.deleteDirectory(file)</code> is as follows</p>\n<p><code>java.nio.file.AccessDeniedException: \\repositories\\Test\\Test\\.git\\objects\\pack\\pack-21cdd19e90e9e6bd2e8d295ea04201969594fe96.idx</code></p>\n<p>Tried the following,</p>\n<ol>\n<li>I have seen a range of other answers, for example [1] and [2]. They are all concerned with cases wherein they created a repository with <code>jgit</code> first and then deleted it immediately after that. In my current scenario I want to check if a repository is already cloned at given path and delete if present. After doing this task, I want to clone a repository using <code>jgit</code> on the same path.</li>\n<li>I tried cases wherein I created the repository with <code>jgit</code>, shut down my server. Started it again and then simply called a function to delete the folder created earlier. This again failed with the same error.</li>\n<li>I also completely removed jgit from my initial code and from pom since it might be getting into loaded into classpath. I still get the same error when trying to delete. Tried again after restarting just to check, the issue still persists.</li>\n<li>However, when I run the same deletion code from another Java program, it succeeds.</li>\n</ol>\n<p>[1] <a href=\"https://stackoverflow.com/questions/65124176/how-to-remove-local-repository-by-java-code-that-was-cloned-by-jgit-java-library\">How to remove local repository by Java code that was cloned by JGit java library?</a><br />\n[2] <a href=\"https://stackoverflow.com/questions/31764311/how-do-i-release-file-system-locks-after-cloning-repo-via-jgit\">How do I release file system locks after cloning repo via JGit</a></p>\n<p>Here is the original code snippet for reference,</p>\n<pre><code>    File file = null;\n    try {\n        file = new File(localRepositoryPath);\n\n        // Delete directory if already present\n        String localRepositoryParentPath = GitUtils.getRepositoryPath(projectName, null);\n        File parentDirectory = new File(localRepositoryParentPath);\n        FileUtils.deleteDirectory(parentDirectory);\n\n        // Create directory where repository will be cloned\n        if(!file.mkdirs()) {\n            throw new GitServiceException(\n                GitUtils.getCloneFailureMessage(&quot;Unable to create directory&quot;,\n                    projectName,\n                    repoName));\n        }\n    } catch (NullPointerException | SecurityException | IOException e) {\n        logger.info(Arrays.toString(e.getStackTrace()));\n        logger.error(&quot;IO Error cloning repository {} and project {}. Stacktrace {} &quot;,\n            repoName,\n            projectName,\n            e.getStackTrace());\n        throw new GitServiceException(\n            GitUtils.getCloneFailureMessage(&quot;IO Error while cloning&quot;,\n                projectName,\n                repoName));\n    }\n\n    // Clone the git repository\n    try (Git git = Git.cloneRepository()\n            .setURI(repoUrl)\n            .setDirectory(file)\n            .setBranchesToClone(List.of(&quot;refs/heads/&quot; + branchToClone))\n            .setBranch(&quot;refs/heads/&quot; + branchToClone)\n            .setCredentialsProvider(new UsernamePasswordCredentialsProvider( &quot;token&quot;, this.credentials.getGitToken()))\n            .call();\n    ) {\n        logger.info(&quot;Successfully cloned branch {} on path {} for repository {} and project {}&quot;,\n            branchToClone,\n            localRepositoryPath,\n            repoName,\n            projectName);\n    } catch (Exception exception) {\n        logger.error(&quot;Error cloning repository {} and project {}. Stacktrace {} &quot;,\n            repoName,\n            projectName,\n            exception.getStackTrace());\n        throw new GitServiceException(\n            GitUtils.getCloneFailureMessage(&quot;Unable to clone repository locally&quot;,\n                projectName,\n                repoName));\n    }\n</code></pre>\n<p><strong>Edit</strong></p>\n<p>Adding error stacktrace</p>\n<pre><code>org.apache.commons.io.IOExceptionList: 1 exceptions: [java.io.IOException: Unable to delete file: \\repositories\\Test\\Test\\.git]\nat org.apache.commons.io.FileUtils.cleanDirectory(FileUtils.java:345)\nat org.apache.commons.io.FileUtils.deleteDirectory(FileUtils.java:1206)\nat com.adobe.mdloc.controller.TestController.post(TestController.java:57)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:566)\nat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)\nat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)\nat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\nat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\nat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1060)\nat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:962)\nat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\nat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:652)\nat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:733)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\nat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\nat com.adobe.asr.filter.AsrRequestResponseFilter.doFilterInternal(AsrRequestResponseFilter.java:88)\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\nat com.adobe.asr.logging.http.servlet.AsrLoggingFilter.doFilter(AsrLoggingFilter.java:71)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\nat com.adobe.asr.filter.AsrRequestIdFilter.doFilterInternal(AsrRequestIdFilter.java:99)\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\nat com.adobe.asr.exception.AsrExceptionFilter.doFilterInternal(AsrExceptionFilter.java:82)\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\nat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\nat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\nat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:93)\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\nat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\nat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\nat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)\nat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\nat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:888)\nat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1597)\nat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\nat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\nat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\nat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\nat java.base/java.lang.Thread.run(Thread.java:834)\n\nCaused by: java.io.IOException: Unable to delete file: \\repositories\\Test\\Test\\.git\nat org.apache.commons.io.FileUtils.forceDelete(FileUtils.java:1425)\nat org.apache.commons.io.FileUtils.cleanDirectory(FileUtils.java:338)\n... 71 more\n\nCaused by: java.nio.file.AccessDeniedException: \\repositories\\Test\\Test\\.git\\objects\\pack\\pack-21cdd19e90e9e6bd2e8d295ea04201969594fe96.idx\nat java.base/sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:89)\nat java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:103)\nat java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:108)\nat java.base/sun.nio.fs.WindowsFileSystemProvider.implDelete(WindowsFileSystemProvider.java:274)\nat java.base/sun.nio.fs.AbstractFileSystemProvider.deleteIfExists(AbstractFileSystemProvider.java:110)\nat java.base/java.nio.file.Files.deleteIfExists(Files.java:1180)\nat org.apache.commons.io.file.DeletingPathVisitor.visitFile(DeletingPathVisitor.java:142)\nat org.apache.commons.io.file.DeletingPathVisitor.visitFile(DeletingPathVisitor.java:36)\nat java.base/java.nio.file.Files.walkFileTree(Files.java:2724)\nat java.base/java.nio.file.Files.walkFileTree(Files.java:2796)\nat org.apache.commons.io.file.PathUtils.visitFileTree(PathUtils.java:687)\nat org.apache.commons.io.file.PathUtils.deleteDirectory(PathUtils.java:328)\nat org.apache.commons.io.file.PathUtils.delete(PathUtils.java:303)\nat org.apache.commons.io.file.PathUtils.delete(PathUtils.java:280)\nat org.apache.commons.io.FileUtils.forceDelete(FileUtils.java:1423)\n... 72 more\n</code></pre>\n"},{"tags":["java","stax"],"owner":{"account_id":6236150,"reputation":15,"user_id":4851394,"display_name":"OHA"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681127803,"creation_date":1681126112,"question_id":75976686,"body_markdown":"I&#39;d like to split a big XML file into many parts using StAX technology, based on a split-basis node.&lt;br/&gt;\r\nThe problem is when split-basis nodes are juxtaposed (no whitespace, no tab and no breakline between them). Those seems not be read by the parser while transform instruction. However when I put in comment transform instruction, those nodes are correctly read and outputted into the console.\r\n\r\nBellow XML sample. Split-basis is `AB` node.\r\n\r\n    &lt; ?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt; root&gt;\r\n    \t&lt; AB Id=&quot;1&quot;&gt;&lt; BC attB=&quot;valB1&quot;&gt;b1&lt; /BC&gt;&lt; CD attC=&quot;valC1&quot;&gt;&lt; EF attE=&quot;valD1&quot;&gt;c1&lt; /EF&gt;&lt; /CD&gt;&lt; /AB&gt;&lt; AB Id=&quot;2&quot;&gt;&lt; BC attB=&quot;valB2&quot;&gt;b2&lt; /BC&gt;&lt; CD attC=&quot;valC2&quot;&gt;&lt; EF attE=&quot;valD2&quot;&gt;c2&lt; /EF&gt;&lt; /CD&gt;&lt; /AB&gt;\r\n        &lt; AB Id=&quot;3&quot;&gt;\r\n            &lt; BC attB=&quot;valB3&quot;&gt;b3&lt; /BC&gt;\r\n            &lt; CD attC=&quot;valC3&quot;&gt;\r\n                &lt; EF attE=&quot;valD3&quot;&gt;c3&lt; /EF&gt;\r\n            &lt; /CD&gt;\r\n        &lt; /AB&gt;\r\n    &lt; /root&gt;\r\n\r\nThe expected output should be 3 files named `Part_1.xml`, `Part_2.xml` and `Part_3.xml`. Each file should respectively contain `&lt; AB Id=&quot;1&quot;&gt;` and its sub-tags, `&lt; AB Id=&quot;2&quot;&gt;` and its sub-tags and `&lt; AB Id=&quot;3&quot;&gt;` and its sub-tags. All of them should also have `&lt; root &gt;` node parent.\r\n\r\nUnfortunately, I only obtain `Part_1.xml` and `Part_2.xml` files. Inside `Part_1.xml` I get `&lt; AB id = &quot;1&quot;&gt;` and its sub-tags. But inside `Part_2.xml`, I get `&lt; AB id = &quot;3&quot;&gt;` and its sub-tags instead of `&lt; AB id = &quot;2&quot;&gt;` and its sub-tags. `&lt; AB id = &quot;2&quot;&gt;` and its sub-tags are not written.\r\n\r\nWhen I put in comment ```transformer.transform(staxs, staxr);``` line. StreamReader reads correclty `&lt; AB id = &quot;2&quot;&gt;`.\r\n\r\n&lt;b&gt;code&lt;/b&gt;:\r\n``` lang-java\r\nimport java.io.File;\r\nimport java.io.FileInputStream;\r\nimport java.io.FileNotFoundException;\r\nimport java.io.FileOutputStream;\r\nimport javax.xml.stream.XMLInputFactory;\r\nimport javax.xml.stream.XMLOutputFactory;\r\nimport javax.xml.stream.XMLStreamException;\r\nimport javax.xml.stream.XMLStreamReader;\r\nimport javax.xml.stream.XMLStreamWriter;\r\nimport javax.xml.stream.events.XMLEvent;\r\nimport javax.xml.transform.Transformer;\r\nimport javax.xml.transform.TransformerException;\r\nimport javax.xml.transform.TransformerFactory;\r\nimport javax.xml.transform.stax.StAXResult;\r\nimport javax.xml.transform.stax.StAXSource;\r\nimport org.apache.commons.lang3.StringUtils;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\nfinal class Split {\r\n    private static final Logger LOG = LoggerFactory.getLogger(Split.class);\r\n    private static final String inputXmlFile = &quot;Big xml file to split. Above a dummy sample&quot;;\r\n    private static final String pathToOutputFolder = System.getProperty(&quot;java.io.tmpdir&quot;);\r\n    private static final String[] parentTags = new String[] {&quot;&lt;root&gt;&quot;};\r\n    private static final String splitTag = &quot;&lt;AB&gt;&quot;;\r\n    private static final String chunkNumber = &quot;1&quot;;\r\n\tpublic void run() {\r\n\t\tfinal Transformer transformer;\r\n\t\tXMLStreamReader xsr = null;\r\n\t\tXMLStreamWriter xsw = null;\r\n\t\ttry {\r\n\t\t\ttransformer = TransformerFactory.newInstance().newTransformer();\r\n\t\t\tfinal XMLInputFactory xif = XMLInputFactory.newInstance();\r\n\t\t\txsr = xif.createXMLStreamReader(new FileInputStream(inputXmlFile));\r\n\t\t\tShort fileNumber = 0;\r\n\t\t\tShort dataRepetitions = 0;\r\n\t\t\txsw = write(pathToOutputFolder, ++fileNumber, parentTags);\r\n\t\t\tint tagCount = 0;\r\n\t\t\twhile (xsr.hasNext()) {\r\n\t\t\t\txsr.next();\r\n\t\t\t\tif (xsr.getEventType() == XMLEvent.START_ELEMENT) {\r\n\t\t\t\t\ttagCount++;\r\n\t\t\t\t\tSystem.out.println(&quot;Tag _&quot; + tagCount + &quot;: &quot; + xsr.getLocalName());\r\n\t\t\t\t\tif (xsr.getLocalName().equals(splitTag)) {\r\n\t\t\t\t\t\tSystem.out.println(xsr.getLocalName() + &quot;: [&quot; + xsr.getAttributeLocalName(0) + &quot;, &quot; + xsr.getAttributeValue(0) + &quot;]&quot;);\r\n\t\t\t\t\t\tif (dataRepetitions.equals(1)) {\r\n\t\t\t\t\t\t\txsw.flush();\r\n\t\t\t\t\t\t    xsw.writeEndDocument();\r\n\t\t\t\t\t\t\txsw.close();\r\n\t\t\t\t\t\t\txsw = write(pathToOutputFolder, ++fileNumber, parentTags);\r\n\t\t\t\t\t\t\tdataRepetitions = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfinal StAXSource staxs = new StAXSource(xsr);\r\n\t\t\t\t\t\tfinal StAXResult staxr = new StAXResult(xsw);\r\n\t\t\t\t\t\ttransformer.transform(staxs, staxr);\r\n\t\t\t\t\t\tdataRepetitions++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (final TransformerException | FileNotFoundException | XMLStreamException e) {\r\n\t\t\tthrow new SplitXmlRuntimeException(e.getMessage());\r\n\t\t} finally {\r\n\t\t\ttry {\r\n\t\t\t\txsr.close();\r\n\t\t\t\tif (xsw != null) {\r\n\t\t\t\t\txsw.flush();\r\n\t\t\t\t\txsw.writeEndDocument();\r\n\t\t\t\t\txsw.close();\r\n\t\t\t\t}\r\n\t\t\t} catch (final XMLStreamException e) {\r\n\t\t\t\tLOG.error(e.getMessage());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate XMLStreamWriter write(final String pathToOutputFolder, final Short fileNumber, final String[] rootTags) throws XMLStreamException, FileNotFoundException  {\r\n\t\tXMLOutputFactory xmlOutputFactory = XMLOutputFactory.newInstance();\r\n\t\tXMLStreamWriter writer = xmlOutputFactory.createXMLStreamWriter(new FileOutputStream(new File(pathToOutputFolder, &quot;Part_&quot; + fileNumber), true));\r\n\t\twriter.writeStartDocument();\r\n\t\tfor (final String s : rootTags) {\r\n\t\t\twriter.writeStartElement(s);\r\n\t\t}\r\n\t\treturn writer;\r\n\t}\r\n}\r\n```\r\n ","title":"Stax transform seems not working when nodes are juxtaposed","body":"<p>I'd like to split a big XML file into many parts using StAX technology, based on a split-basis node.<br/>\nThe problem is when split-basis nodes are juxtaposed (no whitespace, no tab and no breakline between them). Those seems not be read by the parser while transform instruction. However when I put in comment transform instruction, those nodes are correctly read and outputted into the console.</p>\n<p>Bellow XML sample. Split-basis is <code>AB</code> node.</p>\n<pre><code>&lt; ?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt; root&gt;\n    &lt; AB Id=&quot;1&quot;&gt;&lt; BC attB=&quot;valB1&quot;&gt;b1&lt; /BC&gt;&lt; CD attC=&quot;valC1&quot;&gt;&lt; EF attE=&quot;valD1&quot;&gt;c1&lt; /EF&gt;&lt; /CD&gt;&lt; /AB&gt;&lt; AB Id=&quot;2&quot;&gt;&lt; BC attB=&quot;valB2&quot;&gt;b2&lt; /BC&gt;&lt; CD attC=&quot;valC2&quot;&gt;&lt; EF attE=&quot;valD2&quot;&gt;c2&lt; /EF&gt;&lt; /CD&gt;&lt; /AB&gt;\n    &lt; AB Id=&quot;3&quot;&gt;\n        &lt; BC attB=&quot;valB3&quot;&gt;b3&lt; /BC&gt;\n        &lt; CD attC=&quot;valC3&quot;&gt;\n            &lt; EF attE=&quot;valD3&quot;&gt;c3&lt; /EF&gt;\n        &lt; /CD&gt;\n    &lt; /AB&gt;\n&lt; /root&gt;\n</code></pre>\n<p>The expected output should be 3 files named <code>Part_1.xml</code>, <code>Part_2.xml</code> and <code>Part_3.xml</code>. Each file should respectively contain <code>&lt; AB Id=&quot;1&quot;&gt;</code> and its sub-tags, <code>&lt; AB Id=&quot;2&quot;&gt;</code> and its sub-tags and <code>&lt; AB Id=&quot;3&quot;&gt;</code> and its sub-tags. All of them should also have <code>&lt; root &gt;</code> node parent.</p>\n<p>Unfortunately, I only obtain <code>Part_1.xml</code> and <code>Part_2.xml</code> files. Inside <code>Part_1.xml</code> I get <code>&lt; AB id = &quot;1&quot;&gt;</code> and its sub-tags. But inside <code>Part_2.xml</code>, I get <code>&lt; AB id = &quot;3&quot;&gt;</code> and its sub-tags instead of <code>&lt; AB id = &quot;2&quot;&gt;</code> and its sub-tags. <code>&lt; AB id = &quot;2&quot;&gt;</code> and its sub-tags are not written.</p>\n<p>When I put in comment <code>transformer.transform(staxs, staxr);</code> line. StreamReader reads correclty <code>&lt; AB id = &quot;2&quot;&gt;</code>.</p>\n<p><b>code</b>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.FileOutputStream;\nimport javax.xml.stream.XMLInputFactory;\nimport javax.xml.stream.XMLOutputFactory;\nimport javax.xml.stream.XMLStreamException;\nimport javax.xml.stream.XMLStreamReader;\nimport javax.xml.stream.XMLStreamWriter;\nimport javax.xml.stream.events.XMLEvent;\nimport javax.xml.transform.Transformer;\nimport javax.xml.transform.TransformerException;\nimport javax.xml.transform.TransformerFactory;\nimport javax.xml.transform.stax.StAXResult;\nimport javax.xml.transform.stax.StAXSource;\nimport org.apache.commons.lang3.StringUtils;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.stereotype.Component;\n\n@Component\nfinal class Split {\n    private static final Logger LOG = LoggerFactory.getLogger(Split.class);\n    private static final String inputXmlFile = &quot;Big xml file to split. Above a dummy sample&quot;;\n    private static final String pathToOutputFolder = System.getProperty(&quot;java.io.tmpdir&quot;);\n    private static final String[] parentTags = new String[] {&quot;&lt;root&gt;&quot;};\n    private static final String splitTag = &quot;&lt;AB&gt;&quot;;\n    private static final String chunkNumber = &quot;1&quot;;\n    public void run() {\n        final Transformer transformer;\n        XMLStreamReader xsr = null;\n        XMLStreamWriter xsw = null;\n        try {\n            transformer = TransformerFactory.newInstance().newTransformer();\n            final XMLInputFactory xif = XMLInputFactory.newInstance();\n            xsr = xif.createXMLStreamReader(new FileInputStream(inputXmlFile));\n            Short fileNumber = 0;\n            Short dataRepetitions = 0;\n            xsw = write(pathToOutputFolder, ++fileNumber, parentTags);\n            int tagCount = 0;\n            while (xsr.hasNext()) {\n                xsr.next();\n                if (xsr.getEventType() == XMLEvent.START_ELEMENT) {\n                    tagCount++;\n                    System.out.println(&quot;Tag _&quot; + tagCount + &quot;: &quot; + xsr.getLocalName());\n                    if (xsr.getLocalName().equals(splitTag)) {\n                        System.out.println(xsr.getLocalName() + &quot;: [&quot; + xsr.getAttributeLocalName(0) + &quot;, &quot; + xsr.getAttributeValue(0) + &quot;]&quot;);\n                        if (dataRepetitions.equals(1)) {\n                            xsw.flush();\n                            xsw.writeEndDocument();\n                            xsw.close();\n                            xsw = write(pathToOutputFolder, ++fileNumber, parentTags);\n                            dataRepetitions = 0;\n                        }\n                        final StAXSource staxs = new StAXSource(xsr);\n                        final StAXResult staxr = new StAXResult(xsw);\n                        transformer.transform(staxs, staxr);\n                        dataRepetitions++;\n                    }\n                }\n            }\n        } catch (final TransformerException | FileNotFoundException | XMLStreamException e) {\n            throw new SplitXmlRuntimeException(e.getMessage());\n        } finally {\n            try {\n                xsr.close();\n                if (xsw != null) {\n                    xsw.flush();\n                    xsw.writeEndDocument();\n                    xsw.close();\n                }\n            } catch (final XMLStreamException e) {\n                LOG.error(e.getMessage());\n            }\n        }\n    }\n    \n    private XMLStreamWriter write(final String pathToOutputFolder, final Short fileNumber, final String[] rootTags) throws XMLStreamException, FileNotFoundException  {\n        XMLOutputFactory xmlOutputFactory = XMLOutputFactory.newInstance();\n        XMLStreamWriter writer = xmlOutputFactory.createXMLStreamWriter(new FileOutputStream(new File(pathToOutputFolder, &quot;Part_&quot; + fileNumber), true));\n        writer.writeStartDocument();\n        for (final String s : rootTags) {\n            writer.writeStartElement(s);\n        }\n        return writer;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","maven","intellij-idea"],"comments":[{"owner":{"account_id":2375368,"reputation":4423,"user_id":2078908,"display_name":"ursa"},"score":0,"creation_date":1678706280,"post_id":75719050,"comment_id":133579362,"body_markdown":"your problem is likely unrelated to maven, but alive `Thread`s. make sure you have started non-daemon threads in your module, otherwise SpringBoot app dies immediately after the start.","body":"your problem is likely unrelated to maven, but alive <code>Thread</code>s. make sure you have started non-daemon threads in your module, otherwise SpringBoot app dies immediately after the start."}],"answers":[{"tags":[],"owner":{"account_id":7098633,"reputation":426,"user_id":5431153,"accept_rate":100,"display_name":"Mohammad Hossein Shojaeinia"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681127669,"creation_date":1681127669,"answer_id":75976869,"question_id":75719050,"body_markdown":"Finally I found the issue. The problem was because of an unused and extra dependency:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n        &lt;version&gt;2.7.8&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nafter removing this dependency, everything worked correctly. It seems this dependency, didn&#39;t let Tomcat to be launched after running with ```java -jar```.\r\n\r\nThanks","title":"multi-module maven spring boot application stops immediately after running","body":"<p>Finally I found the issue. The problem was because of an unused and extra dependency:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n    &lt;version&gt;2.7.8&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>after removing this dependency, everything worked correctly. It seems this dependency, didn't let Tomcat to be launched after running with <code>java -jar</code>.</p>\n<p>Thanks</p>\n"}],"owner":{"account_id":7098633,"reputation":426,"user_id":5431153,"accept_rate":100,"display_name":"Mohammad Hossein Shojaeinia"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":120,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75976869,"answer_count":1,"score":0,"last_activity_date":1681127669,"creation_date":1678692685,"question_id":75719050,"body_markdown":"I&#39;m creating a multi-module spring boot application using maven in IntelliJ. When I run it using IntelliJ, everything works fine. But when I use maven package (IntelliJ maven plugin), the pom file in root of project, does not work. But when I use jar file from ```gateway``` module, it has all the components. But two things:\r\n\r\n - It does not read my ```application.properties``` file\r\n - It starts the project and ```Started MyappGatewayApplication in 5.009 seconds (JVM running for 5.257)``` message appears, but immediately ```SpringApplicationShutdownHook``` triggers and stops the application.\r\n\r\nHere are my pom.xml files (parent, gateway, service and util modules) consecutively:\r\n\r\n//parent pom.xml\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n\t\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n\t&lt;groupId&gt;com.mysite&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;myapp&lt;/artifactId&gt;\r\n\t&lt;packaging&gt;pom&lt;/packaging&gt;\r\n\t&lt;version&gt;3.0.0-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;myapp&lt;/name&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.4.1&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;shade&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;transformers&gt;\r\n\t\t\t\t\t\t\t\t&lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ServicesResourceTransformer&quot;/&gt;\r\n\t\t\t\t\t\t\t\t&lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;mainClass&gt;com.mysite.gateway.MyappGatewayApplication&lt;/mainClass&gt;\r\n\t\t\t\t\t\t\t\t&lt;/transformer&gt;\r\n\t\t\t\t\t\t\t&lt;/transformers&gt;\r\n\t\t\t\t\t\t\t&lt;filters&gt;\r\n\t\t\t\t\t\t\t\t&lt;filter&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;artifact&gt;*:*&lt;/artifact&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t\t\t\t\t&lt;/filter&gt;\r\n\t\t\t\t\t\t\t&lt;/filters&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.3.0&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;archive&gt;\r\n\t\t\t\t\t\t&lt;manifest&gt;\r\n\t\t\t\t\t\t\t&lt;mainClass&gt;com.mysite.gateway.myappGatewayApplication&lt;/mainClass&gt;\r\n\t\t\t\t\t\t&lt;/manifest&gt;\r\n\t\t\t\t\t&lt;/archive&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;source&gt;17&lt;/source&gt;\r\n\t\t\t\t\t&lt;target&gt;17&lt;/target&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t\t&lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n\t\t&lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.7.8&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.7.8&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.7.8&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.7.8&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.7.7&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.7.8&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.7.8&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.18.24&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.8.2&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jjwt-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;0.11.5&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jjwt-impl&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;0.11.5&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jjwt-jackson&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;0.11.5&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.github.vladimir-bukhtoyarov&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;bucket4j-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;7.5.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.json&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;json&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;20220924&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.11.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;modules&gt;\r\n\t\t&lt;module&gt;myapp-gateway&lt;/module&gt;\r\n\t\t&lt;module&gt;myapp-service&lt;/module&gt;\r\n\t\t&lt;module&gt;myapp-util&lt;/module&gt;\r\n\t&lt;/modules&gt;\r\n\t&lt;/project&gt;\r\n\r\n\r\n//gateway module pom.xml\r\n\t&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\t&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\t\t\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;com.mysite&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;myapp&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.0-SNAPSHOT&lt;/version&gt;\r\n\t&lt;/parent&gt;\r\n\r\n\t&lt;groupId&gt;com.mysite&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;myapp-gateway&lt;/artifactId&gt;\r\n\t&lt;version&gt;3&lt;/version&gt;\r\n\t&lt;name&gt;myapp-gateway&lt;/name&gt;\r\n\t&lt;description&gt;myapp Gateway Module&lt;/description&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n\t\t&lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.mysite&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;myapp-service&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.mysite&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;myapp-util&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;compile&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\t&lt;/project&gt;\r\n\r\n\r\n//service module pom.xml\r\n\t&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\t&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\t\t\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;com.mysite&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;myapp&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.0-SNAPSHOT&lt;/version&gt;\r\n\t&lt;/parent&gt;\r\n\r\n\t&lt;groupId&gt;com.mysite&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;myapp-service&lt;/artifactId&gt;\r\n\t&lt;version&gt;3&lt;/version&gt;\r\n\t&lt;name&gt;myapp-service&lt;/name&gt;\r\n\t&lt;description&gt;myapp Service Module&lt;/description&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n\t\t&lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.mysite&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;myapp-util&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;compile&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\t&lt;/project&gt;\r\n\r\n\r\n//util module pom.xml\r\n\t&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\t&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\t\t\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\r\n\t\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n\t\t&lt;parent&gt;\r\n\t\t\t&lt;groupId&gt;com.mysite&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;myapp&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.0-SNAPSHOT&lt;/version&gt;\r\n\t\t&lt;/parent&gt;\r\n\r\n\t\t&lt;groupId&gt;com.mysite&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;myapp-util&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3&lt;/version&gt;\r\n\t\t&lt;name&gt;myapp-util&lt;/name&gt;\r\n\t\t&lt;description&gt;myapp Utility Module&lt;/description&gt;\r\n\r\n\t\t&lt;properties&gt;\r\n\t\t\t&lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n\t\t\t&lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n\t\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t&lt;/properties&gt;\r\n\t\t\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;com.rabbitmq&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;amqp-client&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;5.16.0&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;gson&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.10.1&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\t&lt;/project&gt;\r\n\r\n","title":"multi-module maven spring boot application stops immediately after running","body":"<p>I'm creating a multi-module spring boot application using maven in IntelliJ. When I run it using IntelliJ, everything works fine. But when I use maven package (IntelliJ maven plugin), the pom file in root of project, does not work. But when I use jar file from <code>gateway</code> module, it has all the components. But two things:</p>\n<ul>\n<li>It does not read my <code>application.properties</code> file</li>\n<li>It starts the project and <code>Started MyappGatewayApplication in 5.009 seconds (JVM running for 5.257)</code> message appears, but immediately <code>SpringApplicationShutdownHook</code> triggers and stops the application.</li>\n</ul>\n<p>Here are my pom.xml files (parent, gateway, service and util modules) consecutively:</p>\n<p>//parent pom.xml\n</p>\n<pre><code>&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n&lt;groupId&gt;com.mysite&lt;/groupId&gt;\n&lt;artifactId&gt;myapp&lt;/artifactId&gt;\n&lt;packaging&gt;pom&lt;/packaging&gt;\n&lt;version&gt;3.0.0-SNAPSHOT&lt;/version&gt;\n&lt;name&gt;myapp&lt;/name&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.4.1&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;shade&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;transformers&gt;\n                            &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ServicesResourceTransformer&quot;/&gt;\n                            &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\n                                &lt;mainClass&gt;com.mysite.gateway.MyappGatewayApplication&lt;/mainClass&gt;\n                            &lt;/transformer&gt;\n                        &lt;/transformers&gt;\n                        &lt;filters&gt;\n                            &lt;filter&gt;\n                                &lt;artifact&gt;*:*&lt;/artifact&gt;\n                                &lt;excludes&gt;\n                                    &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\n                                    &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\n                                    &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\n                                &lt;/excludes&gt;\n                            &lt;/filter&gt;\n                        &lt;/filters&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.3.0&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;archive&gt;\n                    &lt;manifest&gt;\n                        &lt;mainClass&gt;com.mysite.gateway.myappGatewayApplication&lt;/mainClass&gt;\n                    &lt;/manifest&gt;\n                &lt;/archive&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;17&lt;/source&gt;\n                &lt;target&gt;17&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n\n&lt;properties&gt;\n    &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;version&gt;2.7.8&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n        &lt;version&gt;2.7.8&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;version&gt;2.7.8&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;version&gt;2.7.8&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\n        &lt;version&gt;2.7.7&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;version&gt;2.7.8&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;version&gt;2.7.8&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;version&gt;1.18.24&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n        &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n        &lt;version&gt;5.8.2&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n        &lt;artifactId&gt;jjwt-api&lt;/artifactId&gt;\n        &lt;version&gt;0.11.5&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n        &lt;artifactId&gt;jjwt-impl&lt;/artifactId&gt;\n        &lt;version&gt;0.11.5&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n        &lt;artifactId&gt;jjwt-jackson&lt;/artifactId&gt;\n        &lt;version&gt;0.11.5&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.github.vladimir-bukhtoyarov&lt;/groupId&gt;\n        &lt;artifactId&gt;bucket4j-core&lt;/artifactId&gt;\n        &lt;version&gt;7.5.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.json&lt;/groupId&gt;\n        &lt;artifactId&gt;json&lt;/artifactId&gt;\n        &lt;version&gt;20220924&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-io&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n        &lt;version&gt;2.11.0&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;modules&gt;\n    &lt;module&gt;myapp-gateway&lt;/module&gt;\n    &lt;module&gt;myapp-service&lt;/module&gt;\n    &lt;module&gt;myapp-util&lt;/module&gt;\n&lt;/modules&gt;\n&lt;/project&gt;\n</code></pre>\n<p>//gateway module pom.xml\n\n</p>\n<pre><code>&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n&lt;parent&gt;\n    &lt;groupId&gt;com.mysite&lt;/groupId&gt;\n    &lt;artifactId&gt;myapp&lt;/artifactId&gt;\n    &lt;version&gt;3.0.0-SNAPSHOT&lt;/version&gt;\n&lt;/parent&gt;\n\n&lt;groupId&gt;com.mysite&lt;/groupId&gt;\n&lt;artifactId&gt;myapp-gateway&lt;/artifactId&gt;\n&lt;version&gt;3&lt;/version&gt;\n&lt;name&gt;myapp-gateway&lt;/name&gt;\n&lt;description&gt;myapp Gateway Module&lt;/description&gt;\n\n&lt;properties&gt;\n    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.mysite&lt;/groupId&gt;\n        &lt;artifactId&gt;myapp-service&lt;/artifactId&gt;\n        &lt;version&gt;3&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.mysite&lt;/groupId&gt;\n        &lt;artifactId&gt;myapp-util&lt;/artifactId&gt;\n        &lt;version&gt;3&lt;/version&gt;\n        &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>//service module pom.xml\n\n</p>\n<pre><code>&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n&lt;parent&gt;\n    &lt;groupId&gt;com.mysite&lt;/groupId&gt;\n    &lt;artifactId&gt;myapp&lt;/artifactId&gt;\n    &lt;version&gt;3.0.0-SNAPSHOT&lt;/version&gt;\n&lt;/parent&gt;\n\n&lt;groupId&gt;com.mysite&lt;/groupId&gt;\n&lt;artifactId&gt;myapp-service&lt;/artifactId&gt;\n&lt;version&gt;3&lt;/version&gt;\n&lt;name&gt;myapp-service&lt;/name&gt;\n&lt;description&gt;myapp Service Module&lt;/description&gt;\n\n&lt;properties&gt;\n    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.mysite&lt;/groupId&gt;\n        &lt;artifactId&gt;myapp-util&lt;/artifactId&gt;\n        &lt;version&gt;3&lt;/version&gt;\n        &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>//util module pom.xml\n\n</p>\n<pre><code>    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;com.mysite&lt;/groupId&gt;\n        &lt;artifactId&gt;myapp&lt;/artifactId&gt;\n        &lt;version&gt;3.0.0-SNAPSHOT&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;groupId&gt;com.mysite&lt;/groupId&gt;\n    &lt;artifactId&gt;myapp-util&lt;/artifactId&gt;\n    &lt;version&gt;3&lt;/version&gt;\n    &lt;name&gt;myapp-util&lt;/name&gt;\n    &lt;description&gt;myapp Utility Module&lt;/description&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n    \n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.rabbitmq&lt;/groupId&gt;\n            &lt;artifactId&gt;amqp-client&lt;/artifactId&gt;\n            &lt;version&gt;5.16.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n            &lt;artifactId&gt;gson&lt;/artifactId&gt;\n            &lt;version&gt;2.10.1&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","intellij-idea","spring-security","pom.xml"],"answers":[{"tags":[],"owner":{"account_id":12261394,"reputation":461,"user_id":8948995,"display_name":"Phong Bui"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681127520,"creation_date":1681127520,"answer_id":75976852,"question_id":75976656,"body_markdown":"If you can run `mvn package` in Terminal without any compilation errors then check your IntelliJ configuration.\r\n- Make sure you configured the right version of Java (17 is your case) [![Project Structure][1]][1]\r\n- Make sure you configured the right version of Maven (compare with `mvn --version` in Terminal where you built your project without any compilation errors) [![Maven config][2]][2]\r\n- Reimport your Maven project (right click on the root module)[![Reload Maven project][3]][3]\r\n- If 3 steps above are not helping, try Invalidate Caches and Restart [![Invalidate Caches and Restart][4]][4]\r\n\r\n\r\n\r\nIF YOU TRIED EVERYTHING AND THE ISSUE IS STILL NOT FIXED, RESTART YOUR COMPUTER!!!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/E9Lkr.png\r\n  [2]: https://i.stack.imgur.com/TANQs.png\r\n  [3]: https://i.stack.imgur.com/hTVeK.png\r\n  [4]: https://i.stack.imgur.com/dabUY.png","title":"&quot;java: cannot find symbol&quot; error in Spring Security","body":"<p>If you can run <code>mvn package</code> in Terminal without any compilation errors then check your IntelliJ configuration.</p>\n<ul>\n<li>Make sure you configured the right version of Java (17 is your case) <a href=\"https://i.stack.imgur.com/E9Lkr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/E9Lkr.png\" alt=\"Project Structure\" /></a></li>\n<li>Make sure you configured the right version of Maven (compare with <code>mvn --version</code> in Terminal where you built your project without any compilation errors) <a href=\"https://i.stack.imgur.com/TANQs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TANQs.png\" alt=\"Maven config\" /></a></li>\n<li>Reimport your Maven project (right click on the root module)<a href=\"https://i.stack.imgur.com/hTVeK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hTVeK.png\" alt=\"Reload Maven project\" /></a></li>\n<li>If 3 steps above are not helping, try Invalidate Caches and Restart <a href=\"https://i.stack.imgur.com/dabUY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dabUY.png\" alt=\"Invalidate Caches and Restart\" /></a></li>\n</ul>\n<p>IF YOU TRIED EVERYTHING AND THE ISSUE IS STILL NOT FIXED, RESTART YOUR COMPUTER!!!</p>\n"}],"owner":{"account_id":23077784,"reputation":1,"user_id":17190503,"display_name":"GreenEngineer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2089,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1681127520,"creation_date":1681125819,"question_id":75976656,"body_markdown":"I have been trying to run the application but it throws an error called like that\r\n\r\n    java: cannot find symbol\r\n      symbol:   class UserDetailsServiceImpl\r\n      location: package com.project.questapp.services\r\n\r\nI am taking 8 errors. 3 of them are these. I have checked the locations of the classes which causes error but I could not find any mistake. My pom.xml maybe incorrect, but I rerun it lonely, it run clearly. What is the reason behind the error? \r\n\r\n    package com.project.questapp.config;\r\n    \r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.http.HttpMethod;\r\n    import org.springframework.security.authentication.AuthenticationManager;\r\n    import org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration;\r\n    import org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\n    import org.springframework.security.config.http.SessionCreationPolicy;\r\n    import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\n    import org.springframework.security.crypto.password.PasswordEncoder;\r\n    import org.springframework.security.web.SecurityFilterChain;\r\n    import org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\r\n    import org.springframework.web.cors.CorsConfiguration;\r\n    import org.springframework.web.cors.UrlBasedCorsConfigurationSource;\r\n    import org.springframework.web.filter.CorsFilter;\r\n    \r\n    import com.project.questapp.security.JwtAuthenticationEntryPoint; // it causes to the error\r\n    import com.project.questapp.security.JwtAuthenticationFilter; // it causes to the error\r\n    import com.project.questapp.services.UserDetailsServiceImpl; // it causes to the error\r\n    \r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfig{\r\n        private UserDetailsServiceImpl userDetailsService;\r\n    \r\n        private JwtAuthenticationEntryPoint handler;\r\n    \r\n        public SecurityConfig(UserDetailsServiceImpl userDetailsService, JwtAuthenticationEntryPoint handler) {\r\n            this.userDetailsService = userDetailsService;\r\n            this.handler = handler;\r\n        }\r\n    \r\n        @Bean\r\n        public JwtAuthenticationFilter jwtAuthenticationFilter() {\r\n            return new JwtAuthenticationFilter();\r\n        }\r\n    \r\n        @Bean\r\n        public PasswordEncoder passwordEncoder() {\r\n            return new BCryptPasswordEncoder();\r\n        }\r\n    \r\n        @Bean\r\n        public AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration) throws Exception {\r\n            return authenticationConfiguration.getAuthenticationManager();\r\n        }\r\n    \r\n        @Bean\r\n        public CorsFilter corsFilter() {\r\n            UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n            CorsConfiguration config = new CorsConfiguration();\r\n            config.setAllowCredentials(true);\r\n            config.addAllowedOrigin(&quot;*&quot;);\r\n            config.addAllowedHeader(&quot;*&quot;);\r\n            config.addAllowedMethod(&quot;OPTIONS&quot;);\r\n            config.addAllowedMethod(&quot;HEAD&quot;);\r\n            config.addAllowedMethod(&quot;GET&quot;);\r\n            config.addAllowedMethod(&quot;PUT&quot;);\r\n            config.addAllowedMethod(&quot;POST&quot;);\r\n            config.addAllowedMethod(&quot;DELETE&quot;);\r\n            config.addAllowedMethod(&quot;PATCH&quot;);\r\n            source.registerCorsConfiguration(&quot;/**&quot;, config);\r\n            return new CorsFilter(source);\r\n        }\r\n    \r\n        @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {\r\n            httpSecurity\r\n                    .cors()\r\n                    .and()\r\n                    .csrf().disable()\r\n                    .exceptionHandling().authenticationEntryPoint(handler).and()\r\n                    .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\r\n                    .authorizeHttpRequests()\r\n                    .requestMatchers(HttpMethod.GET, &quot;/posts&quot;)\r\n                    .permitAll()\r\n                    .requestMatchers(HttpMethod.GET, &quot;/comments&quot;)\r\n                    .permitAll()\r\n                    .requestMatchers(&quot;/auth/**&quot;)\r\n                    .permitAll()\r\n                    .anyRequest().authenticated();\r\n    \r\n            httpSecurity.addFilterBefore(jwtAuthenticationFilter(), UsernamePasswordAuthenticationFilter.class);\r\n            return httpSecurity.build();\r\n        }\r\n    }\r\n    \r\n     \r\nmy pom.xml is this:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;3.0.4&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.project&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;questapp&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;name&gt;questapp&lt;/name&gt;\r\n    \t&lt;description&gt;QuestApp project for Spring Boot&lt;/description&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jjwt&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;0.9.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    \t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;excludes&gt;\r\n    \t\t\t\t\t\t&lt;exclude&gt;\r\n    \t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    \t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    \t\t\t\t\t\t&lt;/exclude&gt;\r\n    \t\t\t\t\t&lt;/excludes&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n\r\n\r\n","title":"&quot;java: cannot find symbol&quot; error in Spring Security","body":"<p>I have been trying to run the application but it throws an error called like that</p>\n<pre><code>java: cannot find symbol\n  symbol:   class UserDetailsServiceImpl\n  location: package com.project.questapp.services\n</code></pre>\n<p>I am taking 8 errors. 3 of them are these. I have checked the locations of the classes which causes error but I could not find any mistake. My pom.xml maybe incorrect, but I rerun it lonely, it run clearly. What is the reason behind the error?</p>\n<pre><code>package com.project.questapp.config;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.http.HttpMethod;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.http.SessionCreationPolicy;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.web.SecurityFilterChain;\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\nimport org.springframework.web.cors.CorsConfiguration;\nimport org.springframework.web.cors.UrlBasedCorsConfigurationSource;\nimport org.springframework.web.filter.CorsFilter;\n\nimport com.project.questapp.security.JwtAuthenticationEntryPoint; // it causes to the error\nimport com.project.questapp.security.JwtAuthenticationFilter; // it causes to the error\nimport com.project.questapp.services.UserDetailsServiceImpl; // it causes to the error\n\n@Configuration\n@EnableWebSecurity\npublic class SecurityConfig{\n    private UserDetailsServiceImpl userDetailsService;\n\n    private JwtAuthenticationEntryPoint handler;\n\n    public SecurityConfig(UserDetailsServiceImpl userDetailsService, JwtAuthenticationEntryPoint handler) {\n        this.userDetailsService = userDetailsService;\n        this.handler = handler;\n    }\n\n    @Bean\n    public JwtAuthenticationFilter jwtAuthenticationFilter() {\n        return new JwtAuthenticationFilter();\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    @Bean\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration) throws Exception {\n        return authenticationConfiguration.getAuthenticationManager();\n    }\n\n    @Bean\n    public CorsFilter corsFilter() {\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        CorsConfiguration config = new CorsConfiguration();\n        config.setAllowCredentials(true);\n        config.addAllowedOrigin(&quot;*&quot;);\n        config.addAllowedHeader(&quot;*&quot;);\n        config.addAllowedMethod(&quot;OPTIONS&quot;);\n        config.addAllowedMethod(&quot;HEAD&quot;);\n        config.addAllowedMethod(&quot;GET&quot;);\n        config.addAllowedMethod(&quot;PUT&quot;);\n        config.addAllowedMethod(&quot;POST&quot;);\n        config.addAllowedMethod(&quot;DELETE&quot;);\n        config.addAllowedMethod(&quot;PATCH&quot;);\n        source.registerCorsConfiguration(&quot;/**&quot;, config);\n        return new CorsFilter(source);\n    }\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {\n        httpSecurity\n                .cors()\n                .and()\n                .csrf().disable()\n                .exceptionHandling().authenticationEntryPoint(handler).and()\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\n                .authorizeHttpRequests()\n                .requestMatchers(HttpMethod.GET, &quot;/posts&quot;)\n                .permitAll()\n                .requestMatchers(HttpMethod.GET, &quot;/comments&quot;)\n                .permitAll()\n                .requestMatchers(&quot;/auth/**&quot;)\n                .permitAll()\n                .anyRequest().authenticated();\n\n        httpSecurity.addFilterBefore(jwtAuthenticationFilter(), UsernamePasswordAuthenticationFilter.class);\n        return httpSecurity.build();\n    }\n}\n\n \n</code></pre>\n<p>my pom.xml is this:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.4&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.project&lt;/groupId&gt;\n    &lt;artifactId&gt;questapp&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;questapp&lt;/name&gt;\n    &lt;description&gt;QuestApp project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n            &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\n            &lt;version&gt;0.9.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","json","spring","hibernate"],"comments":[{"owner":{"account_id":6104455,"reputation":4456,"user_id":4762502,"accept_rate":73,"display_name":"Gaurav Jeswani"},"score":0,"creation_date":1681102022,"post_id":75974280,"comment_id":133998835,"body_markdown":"Which attribute of ProductModel  you want o map with the group_id key? I don&#39;t see any variable to hold this info in your ProductModel  class.","body":"Which attribute of ProductModel  you want o map with the group_id key? I don&#39;t see any variable to hold this info in your ProductModel  class."},{"owner":{"account_id":23167954,"reputation":1,"user_id":17267600,"display_name":"Сэм Қыпшақ"},"score":0,"creation_date":1681127157,"post_id":75974280,"comment_id":134002312,"body_markdown":"I want to set group attibute with ProductModel value found by group_id","body":"I want to set group attibute with ProductModel value found by group_id"},{"owner":{"account_id":6104455,"reputation":4456,"user_id":4762502,"accept_rate":73,"display_name":"Gaurav Jeswani"},"score":0,"creation_date":1681131139,"post_id":75974280,"comment_id":134003000,"body_markdown":"So, in that case it can only populate group_id not complete object ProductModel. Is that what you are looking for?","body":"So, in that case it can only populate group_id not complete object ProductModel. Is that what you are looking for?"},{"owner":{"account_id":23167954,"reputation":1,"user_id":17267600,"display_name":"Сэм Қыпшақ"},"score":0,"creation_date":1681202495,"post_id":75974280,"comment_id":134014314,"body_markdown":"Gaurav Jeswani  I have to write code to find group_id. Is there another way just putting annotion on field and spring itself convert group id into ProductModel by uuid group id contains.\n var group_id=productModel.getGroup_id();\n         if(group_id!=null &amp;&amp; group_id.length()&gt;0){\n             var group=productRepo.findById(UUID.fromString(group_id)).get();\n             if(group!=null){\n                 productModel.setGroup(group);\n             }\n         }","body":"Gaurav Jeswani  I have to write code to find group_id. Is there another way just putting annotion on field and spring itself convert group id into ProductModel by uuid group id contains.  var group_id=productModel.getGroup_id();          if(group_id!=null &amp;&amp; group_id.length()&gt;0){              var group=productRepo.findById(UUID.fromString(group_id)).get();              if(group!=null){                  productModel.setGroup(group);              }          }"}],"answers":[{"tags":[],"owner":{"account_id":21465978,"reputation":36,"user_id":21570258,"display_name":"PraveenJubburu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681102138,"creation_date":1681102138,"answer_id":75974329,"question_id":75974280,"body_markdown":"With the help of group_id, you can fetch it from the database\r\n\r\nexample code :\r\n\r\n```\r\n@CrossOrigin\r\n@PostMapping(value = &quot;/product/save&quot;,produces = &quot;application/json&quot;, consumes=&quot;application/json&quot;)\r\nvoid saveProduct(@RequestBody ProductModel productModel){\r\n    var group_id = productModel.getGroup_id();\r\n    if(group_id != null &amp;&amp; !group_id.isEmpty()){\r\n        UUID groupId = UUID.fromString(group_id);\r\n        Optional&lt;ProductModel&gt; optionalGroup = productRepo.findById(groupId);\r\n        if(optionalGroup.isPresent()){\r\n            ProductModel group = optionalGroup.get();\r\n            productModel.setGroup(group);\r\n        } else {\r\n            // handle error - group not found\r\n        }\r\n    }\r\n    productRepo.save(productModel);\r\n}\r\n```","title":"How to set object field in better way in spring app?","body":"<p>With the help of group_id, you can fetch it from the database</p>\n<p>example code :</p>\n<pre><code>@CrossOrigin\n@PostMapping(value = &quot;/product/save&quot;,produces = &quot;application/json&quot;, consumes=&quot;application/json&quot;)\nvoid saveProduct(@RequestBody ProductModel productModel){\n    var group_id = productModel.getGroup_id();\n    if(group_id != null &amp;&amp; !group_id.isEmpty()){\n        UUID groupId = UUID.fromString(group_id);\n        Optional&lt;ProductModel&gt; optionalGroup = productRepo.findById(groupId);\n        if(optionalGroup.isPresent()){\n            ProductModel group = optionalGroup.get();\n            productModel.setGroup(group);\n        } else {\n            // handle error - group not found\n        }\n    }\n    productRepo.save(productModel);\n}\n</code></pre>\n"}],"owner":{"account_id":23167954,"reputation":1,"user_id":17267600,"display_name":"Сэм Қыпшақ"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681127515,"creation_date":1681101163,"question_id":75974280,"body_markdown":"I have entity in spring app below.\r\n\r\n\r\n```\r\n\r\n@Entity(name = &quot;products&quot;)\r\npublic class ProductModel {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private  UUID id;\r\n    private  String name;\r\n    private  String code;\r\n\r\n    private boolean is_group;\r\n\r\n    @ManyToOne\r\n    private ProductModel group;\r\n```\r\n\r\n\r\nand json from frontend app\r\n\r\n\r\n```\r\n{   &quot;id&quot;:&quot;50bfddf4-d5f8-11ed-afa1-0242ac120002&quot;,  \r\n    &quot;name&quot;:&quot;Phone&quot;,   \r\n    &quot;group_id&quot;:&quot;7bd886d0-d5f8-11ed-afa1-0242ac120002&quot;\r\n }\r\n```\r\n\r\n\r\nthis is my controller where I have to find by id productrepo\r\n\r\n```\r\n @CrossOrigin\r\n    @PostMapping(value = &quot;/product/save&quot;,produces = &quot;application/json&quot;, consumes=&quot;application/json&quot;)\r\n    void saveProduct(@RequestBody ProductModel productModel){\r\n         var group_id=productModel.getGroup_id();\r\n         if(group_id!=null &amp;&amp; group_id.length()&gt;0){\r\n             var group=productRepo.findById(UUID.fromString(group_id)).get();\r\n             if(group!=null){\r\n                 productModel.setGroup(group);\r\n             }\r\n         }\r\n         productRepo.save(productModel);\r\n    }\r\n```\r\n\r\n\r\nhow can I convert group_id from json to ProductModel by any annotation or another settings without using findById () method ?\r\n\r\nI expect example of code","title":"How to set object field in better way in spring app?","body":"<p>I have entity in spring app below.</p>\n<pre><code>\n@Entity(name = &quot;products&quot;)\npublic class ProductModel {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private  UUID id;\n    private  String name;\n    private  String code;\n\n    private boolean is_group;\n\n    @ManyToOne\n    private ProductModel group;\n</code></pre>\n<p>and json from frontend app</p>\n<pre><code>{   &quot;id&quot;:&quot;50bfddf4-d5f8-11ed-afa1-0242ac120002&quot;,  \n    &quot;name&quot;:&quot;Phone&quot;,   \n    &quot;group_id&quot;:&quot;7bd886d0-d5f8-11ed-afa1-0242ac120002&quot;\n }\n</code></pre>\n<p>this is my controller where I have to find by id productrepo</p>\n<pre><code> @CrossOrigin\n    @PostMapping(value = &quot;/product/save&quot;,produces = &quot;application/json&quot;, consumes=&quot;application/json&quot;)\n    void saveProduct(@RequestBody ProductModel productModel){\n         var group_id=productModel.getGroup_id();\n         if(group_id!=null &amp;&amp; group_id.length()&gt;0){\n             var group=productRepo.findById(UUID.fromString(group_id)).get();\n             if(group!=null){\n                 productModel.setGroup(group);\n             }\n         }\n         productRepo.save(productModel);\n    }\n</code></pre>\n<p>how can I convert group_id from json to ProductModel by any annotation or another settings without using findById () method ?</p>\n<p>I expect example of code</p>\n"},{"tags":["java","https","cxf"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1681140305,"post_id":75976832,"comment_id":134004838,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":28024604,"reputation":1,"user_id":21404845,"display_name":"谢佳豪"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681127386,"creation_date":1681127320,"question_id":75976832,"body_markdown":"The cxf client sends a request to the server through Https，\r\ncan i reuse the socket link？\r\n\r\nI already set the following parameters：\r\n\r\nhttp.maxConnections=200.\r\n\r\nhttp.keepalive=true.\r\n\r\nit doesn&#39;t work\r\nbecause this method parm var2 always different,var1 have same host and port .\r\nvar2 always be different SSLSocketFactory.\r\n\r\n**sun.net.www.http.KeepAliveCache#put(URL var1, Object var2, HttpClient var3)**\r\n\r\nhow can i make connection reuse ？\r\n\r\n\r\n","title":"cxf client Java HttpURLConnection and pooling","body":"<p>The cxf client sends a request to the server through Https，\ncan i reuse the socket link？</p>\n<p>I already set the following parameters：</p>\n<p>http.maxConnections=200.</p>\n<p>http.keepalive=true.</p>\n<p>it doesn't work\nbecause this method parm var2 always different,var1 have same host and port .\nvar2 always be different SSLSocketFactory.</p>\n<p><strong>sun.net.www.http.KeepAliveCache#put(URL var1, Object var2, HttpClient var3)</strong></p>\n<p>how can i make connection reuse ？</p>\n"},{"tags":["java","rest","ssl","jersey","grizzly"],"answers":[{"tags":[],"owner":{"account_id":1103579,"reputation":1959,"user_id":1095452,"display_name":"alexey"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1389645940,"creation_date":1389645173,"answer_id":21100804,"question_id":21098105,"body_markdown":"IMO you can use different Factory method to initialize secured Grizzly HttpServer:\r\n\r\n    HttpServer secure = GrizzlyServerFactory.createHttpServer(BASE_URI_SECURED,\r\n                            ContainerFactory.createContainer(HttpHandler.class, rc),\r\n                            true,\r\n                            new SSLEngineConfigurator(sslCon));\r\n\r\nIf you initialize the server like this, you don&#39;t need to stop and reconfigure it again.\r\n\r\nHope this will help.","title":"SSL with Grizzly and Jersey","body":"<p>IMO you can use different Factory method to initialize secured Grizzly HttpServer:</p>\n\n<pre><code>HttpServer secure = GrizzlyServerFactory.createHttpServer(BASE_URI_SECURED,\n                        ContainerFactory.createContainer(HttpHandler.class, rc),\n                        true,\n                        new SSLEngineConfigurator(sslCon));\n</code></pre>\n\n<p>If you initialize the server like this, you don't need to stop and reconfigure it again.</p>\n\n<p>Hope this will help.</p>\n"},{"tags":[],"owner":{"account_id":1362100,"reputation":635,"user_id":1299267,"display_name":"Daniel Nuriyev"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1394658242,"creation_date":1394658242,"answer_id":22363770,"question_id":21098105,"body_markdown":"I have a nice and tested example using Grizzly 2.3.3 in:\r\nhttps://github.com/danielnuriyev/scriptedstuff/tree/master/src/com/scriptedstuff/server","title":"SSL with Grizzly and Jersey","body":"<p>I have a nice and tested example using Grizzly 2.3.3 in:\n<a href=\"https://github.com/danielnuriyev/scriptedstuff/tree/master/src/com/scriptedstuff/server\" rel=\"nofollow\">https://github.com/danielnuriyev/scriptedstuff/tree/master/src/com/scriptedstuff/server</a></p>\n"},{"tags":[],"owner":{"account_id":1620438,"reputation":15219,"user_id":1497139,"accept_rate":68,"display_name":"Wolfgang Fahl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1399706647,"creation_date":1399706342,"answer_id":23578270,"question_id":21098105,"body_markdown":"The following code works with Grizzly 2.3.7 and I am using Jersey 1.18 - this includes code for SSL Client Authentication - if you don&#39;t have the keystores this feature will simply be ignored.\r\n\r\n\r\n    /**\r\n\t * create a Server based on an url and possibly a ResourceConfig\r\n\t * \r\n\t * @param url\r\n\t * @param rc\r\n\t * @param secure\r\n\t *          - true if SSL should be used\r\n\t * @param contextPath \r\n\t * @return\r\n\t * @throws Exception\r\n\t */\r\n\tpublic HttpServer createHttpServer(String url, ResourceConfig rc,\r\n\t\t\tboolean secure, String contextPath) throws Exception {\r\n\t\t// HttpServer result = GrizzlyServerFactory.createHttpServer(url, rc);\r\n\t\t// http://grepcode.com/file/repo1.maven.org/maven2/com.sun.jersey/jersey-grizzly2/1.6/com/sun/jersey/api/container/grizzly2/GrizzlyServerFactory.java#GrizzlyServerFactory.createHttpServer%28java.net.URI%2Ccom.sun.jersey.api.container.grizzly2.ResourceConfig%29\r\n\t\tHttpServer result = new HttpServer();\r\n\t\tfinal NetworkListener listener = new NetworkListener(&quot;grizzly&quot;,\r\n\t\t\t\tsettings.getHost(), settings.getPort());\r\n\t\tresult.addListener(listener);\r\n\t\t// do we need SSL?\r\n\t\tif (secure) {\r\n\t\t\tlistener.setSecure(secure);\r\n\t\t\tSSLEngineConfigurator sslEngineConfigurator = createSSLConfig(true);\r\n\t\t\tlistener.setSSLEngineConfig(sslEngineConfigurator);\r\n\t\t}\r\n\t\t// Map the path to the processor.\r\n\t\tfinal ServerConfiguration config = result.getServerConfiguration();\r\n\t\tfinal HttpHandler handler = ContainerFactory.createContainer(\r\n\t\t\t\tHttpHandler.class, rc);\r\n\t\tconfig.addHttpHandler(handler, contextPath);\r\n\t\treturn result;\r\n\t}\r\n\r\n      /**\r\n\t * create SSL Configuration\r\n\t * \r\n\t * @param isServer\r\n\t *          true if this is for the server\r\n\t * @return\r\n\t * @throws Exception\r\n\t */\r\n\tprivate SSLEngineConfigurator createSSLConfig(boolean isServer)\r\n\t\t\tthrows Exception {\r\n\t\tfinal SSLContextConfigurator sslContextConfigurator = new SSLContextConfigurator();\r\n\t\t// override system properties\r\n\t\tfinal File cacerts = getStoreFile(&quot;server truststore&quot;,\r\n\t\t\t\t&quot;truststore_server.jks&quot;);\r\n\t\tif (cacerts != null) {\r\n\t\t\tsslContextConfigurator.setTrustStoreFile(cacerts.getAbsolutePath());\r\n\t\t\tsslContextConfigurator.setTrustStorePass(TRUSTSTORE_PASSWORD);\r\n\t\t}\r\n\r\n\t\t// override system properties\r\n\t\tfinal File keystore = getStoreFile(&quot;server keystore&quot;, &quot;keystore_server.jks&quot;);\r\n\t\tif (keystore != null) {\r\n\t\t\tsslContextConfigurator.setKeyStoreFile(keystore.getAbsolutePath());\r\n\t\t\tsslContextConfigurator.setKeyStorePass(TRUSTSTORE_PASSWORD);\r\n\t\t}\r\n\r\n\t\t//\r\n\t\tboolean clientMode = false;\r\n\t\t// force client Authentication ...\r\n\t\tboolean needClientAuth = settings.isNeedClientAuth();\r\n\t\tboolean wantClientAuth = settings.isWantClientAuth();\r\n\t\tSSLEngineConfigurator result = new SSLEngineConfigurator(\r\n\t\t\t\tsslContextConfigurator.createSSLContext(), clientMode, needClientAuth,\r\n\t\t\t\twantClientAuth);\r\n\t\treturn result;\r\n\t}","title":"SSL with Grizzly and Jersey","body":"<p>The following code works with Grizzly 2.3.7 and I am using Jersey 1.18 - this includes code for SSL Client Authentication - if you don't have the keystores this feature will simply be ignored.</p>\n\n<pre><code>/**\n * create a Server based on an url and possibly a ResourceConfig\n * \n * @param url\n * @param rc\n * @param secure\n *          - true if SSL should be used\n * @param contextPath \n * @return\n * @throws Exception\n */\npublic HttpServer createHttpServer(String url, ResourceConfig rc,\n        boolean secure, String contextPath) throws Exception {\n    // HttpServer result = GrizzlyServerFactory.createHttpServer(url, rc);\n    // http://grepcode.com/file/repo1.maven.org/maven2/com.sun.jersey/jersey-grizzly2/1.6/com/sun/jersey/api/container/grizzly2/GrizzlyServerFactory.java#GrizzlyServerFactory.createHttpServer%28java.net.URI%2Ccom.sun.jersey.api.container.grizzly2.ResourceConfig%29\n    HttpServer result = new HttpServer();\n    final NetworkListener listener = new NetworkListener(\"grizzly\",\n            settings.getHost(), settings.getPort());\n    result.addListener(listener);\n    // do we need SSL?\n    if (secure) {\n        listener.setSecure(secure);\n        SSLEngineConfigurator sslEngineConfigurator = createSSLConfig(true);\n        listener.setSSLEngineConfig(sslEngineConfigurator);\n    }\n    // Map the path to the processor.\n    final ServerConfiguration config = result.getServerConfiguration();\n    final HttpHandler handler = ContainerFactory.createContainer(\n            HttpHandler.class, rc);\n    config.addHttpHandler(handler, contextPath);\n    return result;\n}\n\n  /**\n * create SSL Configuration\n * \n * @param isServer\n *          true if this is for the server\n * @return\n * @throws Exception\n */\nprivate SSLEngineConfigurator createSSLConfig(boolean isServer)\n        throws Exception {\n    final SSLContextConfigurator sslContextConfigurator = new SSLContextConfigurator();\n    // override system properties\n    final File cacerts = getStoreFile(\"server truststore\",\n            \"truststore_server.jks\");\n    if (cacerts != null) {\n        sslContextConfigurator.setTrustStoreFile(cacerts.getAbsolutePath());\n        sslContextConfigurator.setTrustStorePass(TRUSTSTORE_PASSWORD);\n    }\n\n    // override system properties\n    final File keystore = getStoreFile(\"server keystore\", \"keystore_server.jks\");\n    if (keystore != null) {\n        sslContextConfigurator.setKeyStoreFile(keystore.getAbsolutePath());\n        sslContextConfigurator.setKeyStorePass(TRUSTSTORE_PASSWORD);\n    }\n\n    //\n    boolean clientMode = false;\n    // force client Authentication ...\n    boolean needClientAuth = settings.isNeedClientAuth();\n    boolean wantClientAuth = settings.isWantClientAuth();\n    SSLEngineConfigurator result = new SSLEngineConfigurator(\n            sslContextConfigurator.createSSLContext(), clientMode, needClientAuth,\n            wantClientAuth);\n    return result;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1480362,"reputation":275,"user_id":1389906,"accept_rate":60,"display_name":"user1389906"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1411417525,"creation_date":1411417525,"answer_id":25982595,"question_id":21098105,"body_markdown":"Sorry to take so long to post this up here. Alexey&#39;s answer led me to the working solution, which is a lot like Wolfgang Fahl&#39;s code. Here&#39;s what I ended up with:\r\n\r\n\r\n    static HttpServer startSecureServer() throws IOException\r\n    {\r\n        System.out.println(&quot;Starting server on port &quot; + ConfigLoader.getHttpsServerPort());\r\n        ResourceConfig rc = new PackagesResourceConfig(&quot;com.kinpoint.server.grizzlyresources&quot;);\r\n\r\n        SSLContextConfigurator sslCon = new SSLContextConfigurator();\r\n\r\n        sslCon.setKeyStoreFile(ConfigLoader.getKeystoreLocation()); // contains server keypair\r\n        sslCon.setKeyStorePass(ConfigLoader.getKeystorePassword());\r\n\r\n        HttpHandler hand = ContainerFactory.createContainer(HttpHandler.class, rc);\r\n\r\n        HttpServer secure = GrizzlyServerFactory.createHttpServer(BASE_URI_SECURED, hand, true,\r\n                new SSLEngineConfigurator(sslCon, false, false, false));\r\n\r\n        return secure;\r\n    }\r\n\r\nThe second parameter in the SSLEngineConfigurator tells it not to use client mode. That was what was messing me up. Thanks for the help.","title":"SSL with Grizzly and Jersey","body":"<p>Sorry to take so long to post this up here. Alexey's answer led me to the working solution, which is a lot like Wolfgang Fahl's code. Here's what I ended up with:</p>\n\n<pre><code>static HttpServer startSecureServer() throws IOException\n{\n    System.out.println(\"Starting server on port \" + ConfigLoader.getHttpsServerPort());\n    ResourceConfig rc = new PackagesResourceConfig(\"com.kinpoint.server.grizzlyresources\");\n\n    SSLContextConfigurator sslCon = new SSLContextConfigurator();\n\n    sslCon.setKeyStoreFile(ConfigLoader.getKeystoreLocation()); // contains server keypair\n    sslCon.setKeyStorePass(ConfigLoader.getKeystorePassword());\n\n    HttpHandler hand = ContainerFactory.createContainer(HttpHandler.class, rc);\n\n    HttpServer secure = GrizzlyServerFactory.createHttpServer(BASE_URI_SECURED, hand, true,\n            new SSLEngineConfigurator(sslCon, false, false, false));\n\n    return secure;\n}\n</code></pre>\n\n<p>The second parameter in the SSLEngineConfigurator tells it not to use client mode. That was what was messing me up. Thanks for the help.</p>\n"},{"tags":[],"owner":{"account_id":467725,"reputation":19389,"user_id":873282,"accept_rate":55,"display_name":"koppor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681127222,"creation_date":1681122864,"answer_id":75976316,"question_id":21098105,"body_markdown":"With the new SeBootstrap functionality, you can start a server with\r\n\r\n```java\r\n    static void startServer(CountDownLatch latch) {\r\n        SSLContext sslContext = getSslContext();\r\n        SeBootstrap.Configuration configuration = SeBootstrap.Configuration\r\n                .builder()\r\n                .sslContext(sslContext)\r\n                .protocol(&quot;HTTPS&quot;)\r\n                .port(6051)\r\n                .build();\r\n        SeBootstrap.start(Application.class, configuration).thenAccept(instance -&gt; {\r\n            instance.stopOnShutdown(stopResult -&gt;\r\n                    System.out.printf(&quot;Stop result: %s [Native stop result: %s].%n&quot;, stopResult,\r\n                            stopResult.unwrap(Object.class)));\r\n            final URI uri = instance.configuration().baseUri();\r\n            System.out.printf(&quot;Instance %s running at %s [Native handle: %s].%n&quot;, instance, uri,\r\n                    instance.unwrap(Object.class));\r\n            System.out.println(&quot;Send SIGKILL to shutdown.&quot;);\r\n            serverInstance = instance;\r\n            latch.countDown();\r\n        });\r\n    }\r\n```\r\n\r\n(Based on https://github.com/jakartaee/rest/blob/master/examples/src/main/java/jaxrs/examples/bootstrap/BasicJavaSeBootstrapExample.java)\r\n\r\nThe important ingredient is in `getSslContext()`:\r\n\r\n```java\r\n    private static SSLContext getSslContext() {\r\n        SSLContextConfigurator sslContextConfig = new SSLContextConfigurator();\r\n        String keystorePath = Path.of(&quot;c:\\\\temp\\\\server.p12&quot;).toString();\r\n        sslContextConfig.setKeyStoreFile(keystorePath);\r\n        sslContextConfig.setKeyStorePass(&quot;changeit&quot;);\r\n        return sslContextConfig.createSSLContext();\r\n    }\r\n```\r\n\r\nThe last important ingredient is the SSL certificate. Use [mkcert](https://github.com/FiloSottile/mkcert#mkcert) to create one:\r\n\r\n1. As admin `choco install mkcert`\r\n2. As admin: `mkcert -install`\r\n3. `cd c:\\temp`\r\n4. `mkcert -pkcs12 myapp localhost 127.0.0.1 ::1`\r\n5. Rename the file to `server.p12`\r\n\r\n(Based on https://stackoverflow.com/a/57511038/873282)\r\n\r\nThe important thing is that `mkcert` automatically generates alternative names, which is required to have Google Chrome accepting an SSL certificate (especially for `localhost`). See &lt;https://stackoverflow.com/a/42917227/873282&gt; for details.\r\n\r\nThe official SSL minimal example is available at &lt;https://github.com/jakartaee/rest/blob/master/examples/src/main/java/jaxrs/examples/bootstrap/TlsJavaSeBootstrapExample.java&gt;.","title":"SSL with Grizzly and Jersey","body":"<p>With the new SeBootstrap functionality, you can start a server with</p>\n<pre class=\"lang-java prettyprint-override\"><code>    static void startServer(CountDownLatch latch) {\n        SSLContext sslContext = getSslContext();\n        SeBootstrap.Configuration configuration = SeBootstrap.Configuration\n                .builder()\n                .sslContext(sslContext)\n                .protocol(&quot;HTTPS&quot;)\n                .port(6051)\n                .build();\n        SeBootstrap.start(Application.class, configuration).thenAccept(instance -&gt; {\n            instance.stopOnShutdown(stopResult -&gt;\n                    System.out.printf(&quot;Stop result: %s [Native stop result: %s].%n&quot;, stopResult,\n                            stopResult.unwrap(Object.class)));\n            final URI uri = instance.configuration().baseUri();\n            System.out.printf(&quot;Instance %s running at %s [Native handle: %s].%n&quot;, instance, uri,\n                    instance.unwrap(Object.class));\n            System.out.println(&quot;Send SIGKILL to shutdown.&quot;);\n            serverInstance = instance;\n            latch.countDown();\n        });\n    }\n</code></pre>\n<p>(Based on <a href=\"https://github.com/jakartaee/rest/blob/master/examples/src/main/java/jaxrs/examples/bootstrap/BasicJavaSeBootstrapExample.java\" rel=\"nofollow noreferrer\">https://github.com/jakartaee/rest/blob/master/examples/src/main/java/jaxrs/examples/bootstrap/BasicJavaSeBootstrapExample.java</a>)</p>\n<p>The important ingredient is in <code>getSslContext()</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private static SSLContext getSslContext() {\n        SSLContextConfigurator sslContextConfig = new SSLContextConfigurator();\n        String keystorePath = Path.of(&quot;c:\\\\temp\\\\server.p12&quot;).toString();\n        sslContextConfig.setKeyStoreFile(keystorePath);\n        sslContextConfig.setKeyStorePass(&quot;changeit&quot;);\n        return sslContextConfig.createSSLContext();\n    }\n</code></pre>\n<p>The last important ingredient is the SSL certificate. Use <a href=\"https://github.com/FiloSottile/mkcert#mkcert\" rel=\"nofollow noreferrer\">mkcert</a> to create one:</p>\n<ol>\n<li>As admin <code>choco install mkcert</code></li>\n<li>As admin: <code>mkcert -install</code></li>\n<li><code>cd c:\\temp</code></li>\n<li><code>mkcert -pkcs12 myapp localhost 127.0.0.1 ::1</code></li>\n<li>Rename the file to <code>server.p12</code></li>\n</ol>\n<p>(Based on <a href=\"https://stackoverflow.com/a/57511038/873282\">https://stackoverflow.com/a/57511038/873282</a>)</p>\n<p>The important thing is that <code>mkcert</code> automatically generates alternative names, which is required to have Google Chrome accepting an SSL certificate (especially for <code>localhost</code>). See <a href=\"https://stackoverflow.com/a/42917227/873282\">https://stackoverflow.com/a/42917227/873282</a> for details.</p>\n<p>The official SSL minimal example is available at <a href=\"https://github.com/jakartaee/rest/blob/master/examples/src/main/java/jaxrs/examples/bootstrap/TlsJavaSeBootstrapExample.java\" rel=\"nofollow noreferrer\">https://github.com/jakartaee/rest/blob/master/examples/src/main/java/jaxrs/examples/bootstrap/TlsJavaSeBootstrapExample.java</a>.</p>\n"}],"owner":{"account_id":1480362,"reputation":275,"user_id":1389906,"accept_rate":60,"display_name":"user1389906"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12452,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":21100804,"answer_count":5,"score":11,"last_activity_date":1681127222,"creation_date":1389635770,"question_id":21098105,"body_markdown":"I&#39;m trying to get grizzly to use SSL encryption and still work fine with Jersey. I&#39;ve looked all over the Internet, and I find all kinds of different attempts at SSL with Grizzly and Jersey. Seems like there are different ways of doing it depending on which version you are using, and how you decided to implement it. I haven&#39;t been able to get any examples to work with my code yet.\r\n\r\nHere&#39;s how I start up my server:\r\n\r\n\r\n    static HttpServer startSecureServer() throws IOException{\r\n    \t\tResourceConfig rc=new PackagesResourceConfig(&quot;server.grizzlyresources&quot;);\r\n    \t\tSSLContextConfigurator sslCon=new SSLContextConfigurator();\r\n    \r\n    \t\tsslCon.setKeyStoreFile(ConfigLoader.getKeystoreLocation()); // contains server keypair\r\n    \t\tsslCon.setKeyStorePass(ConfigLoader.getKeystorePassword());\r\n\r\n    \t\tSystem.out.println(&quot;Starting server on port &quot;+ConfigLoader.getHttpsServerPort());\r\n    \t\tHttpServer secure=GrizzlyServerFactory.createHttpServer(BASE_URI_SECURED, rc);\r\n    \t\tsecure.stop();\r\n\r\n    \t\tHashSet&lt;NetworkListener&gt; lists=new HashSet&lt;NetworkListener&gt;(secure.getListeners());\r\n    \t\tfor (NetworkListener listener : lists){\r\n    \t\t\tlistener.setSecure(true);\r\n    \t\t\tSSLEngineConfigurator ssle=new SSLEngineConfigurator(sslCon);\r\n    \t\t\tlistener.setSSLEngineConfig(ssle);\r\n    \t\t\tsecure.addListener(listener);\r\n    \t\t\tSystem.out.println(listener);\r\n    \t\t}\r\n\r\n    \t\tsecure.start();\r\n    \t\treturn secure;\r\n    }\r\n\r\n\tprivate static URI getBaseURISecured(){\r\n\t\treturn UriBuilder.fromUri(&quot;https://0.0.0.0/&quot;).port(ConfigLoader.getHttpsServerPort()).build();\r\n\t}\r\n\t\r\n\tprivate static final URI BASE_URI_SECURED = getBaseURISecured();\r\n\r\n\r\nConfigLoader loads in information from a config file. When I run this code, it starts up the server, it finds the resources in the server.grizzlyresources package, and it works great! Except for one thing. The server isn&#39;t secured. I can telnet into it and send an HTTP request in plain text for one of my resources, and it will return it. So the code works for starting up the server, but the whole SSL part of it is just being bypassed. Any ideas how to fix this or why it might be doing this?\r\n\r\nHere&#39;s the output to the console when I run it:\r\n\r\n    Starting server on port 9999\r\n    Jan 13, 2014 9:51:08 AM com.sun.jersey.api.core.PackagesResourceConfig init\r\n    INFO: Scanning for root resource and provider classes in the packages:\r\n      server.grizzlyresources\r\n    Jan 13, 2014 9:51:08 AM com.sun.jersey.api.core.ScanningResourceConfig logClasses\r\n    INFO: Root resource classes found:\r\n      class server.grizzlyresources.SessionResource\r\n      class server.grizzlyresources.LoginResource\r\n    Jan 13, 2014 9:51:08 AM com.sun.jersey.api.core.ScanningResourceConfig init\r\n    INFO: No provider classes found.\r\n    Jan 13, 2014 9:51:08 AM com.sun.jersey.server.impl.application.WebApplicationImpl _initiate\r\n    INFO: Initiating Jersey application, version &#39;Jersey: 1.12 02/15/2012 04:51 PM&#39;\r\n    Jan 13, 2014 9:51:09 AM org.glassfish.grizzly.http.server.NetworkListener start\r\n    INFO: Started listener bound to [0.0.0.0:9999]\r\n    Jan 13, 2014 9:51:09 AM org.glassfish.grizzly.http.server.HttpServer start\r\n    INFO: [HttpServer] Started.\r\n    Jan 13, 2014 9:51:09 AM org.glassfish.grizzly.http.server.NetworkListener stop\r\n    INFO: Stopped listener bound to [0.0.0.0:9999]\r\n    NetworkListener{name=&#39;grizzly&#39;, host=&#39;0.0.0.0&#39;, port=9999, secure=true}\r\n    Jan 13, 2014 9:51:09 AM org.glassfish.grizzly.http.server.NetworkListener start\r\n    INFO: Started listener bound to [0.0.0.0:9999]\r\n    Jan 13, 2014 9:51:09 AM org.glassfish.grizzly.http.server.HttpServer start\r\n    INFO: [HttpServer] Started.\r\n\r\nI&#39;m using Grizzly 2.2.1, and Jersey 1.12.\r\n\r\nThanks a bunch!","title":"SSL with Grizzly and Jersey","body":"<p>I'm trying to get grizzly to use SSL encryption and still work fine with Jersey. I've looked all over the Internet, and I find all kinds of different attempts at SSL with Grizzly and Jersey. Seems like there are different ways of doing it depending on which version you are using, and how you decided to implement it. I haven't been able to get any examples to work with my code yet.</p>\n\n<p>Here's how I start up my server:</p>\n\n<pre><code>static HttpServer startSecureServer() throws IOException{\n        ResourceConfig rc=new PackagesResourceConfig(\"server.grizzlyresources\");\n        SSLContextConfigurator sslCon=new SSLContextConfigurator();\n\n        sslCon.setKeyStoreFile(ConfigLoader.getKeystoreLocation()); // contains server keypair\n        sslCon.setKeyStorePass(ConfigLoader.getKeystorePassword());\n\n        System.out.println(\"Starting server on port \"+ConfigLoader.getHttpsServerPort());\n        HttpServer secure=GrizzlyServerFactory.createHttpServer(BASE_URI_SECURED, rc);\n        secure.stop();\n\n        HashSet&lt;NetworkListener&gt; lists=new HashSet&lt;NetworkListener&gt;(secure.getListeners());\n        for (NetworkListener listener : lists){\n            listener.setSecure(true);\n            SSLEngineConfigurator ssle=new SSLEngineConfigurator(sslCon);\n            listener.setSSLEngineConfig(ssle);\n            secure.addListener(listener);\n            System.out.println(listener);\n        }\n\n        secure.start();\n        return secure;\n}\n\nprivate static URI getBaseURISecured(){\n    return UriBuilder.fromUri(\"https://0.0.0.0/\").port(ConfigLoader.getHttpsServerPort()).build();\n}\n\nprivate static final URI BASE_URI_SECURED = getBaseURISecured();\n</code></pre>\n\n<p>ConfigLoader loads in information from a config file. When I run this code, it starts up the server, it finds the resources in the server.grizzlyresources package, and it works great! Except for one thing. The server isn't secured. I can telnet into it and send an HTTP request in plain text for one of my resources, and it will return it. So the code works for starting up the server, but the whole SSL part of it is just being bypassed. Any ideas how to fix this or why it might be doing this?</p>\n\n<p>Here's the output to the console when I run it:</p>\n\n<pre><code>Starting server on port 9999\nJan 13, 2014 9:51:08 AM com.sun.jersey.api.core.PackagesResourceConfig init\nINFO: Scanning for root resource and provider classes in the packages:\n  server.grizzlyresources\nJan 13, 2014 9:51:08 AM com.sun.jersey.api.core.ScanningResourceConfig logClasses\nINFO: Root resource classes found:\n  class server.grizzlyresources.SessionResource\n  class server.grizzlyresources.LoginResource\nJan 13, 2014 9:51:08 AM com.sun.jersey.api.core.ScanningResourceConfig init\nINFO: No provider classes found.\nJan 13, 2014 9:51:08 AM com.sun.jersey.server.impl.application.WebApplicationImpl _initiate\nINFO: Initiating Jersey application, version 'Jersey: 1.12 02/15/2012 04:51 PM'\nJan 13, 2014 9:51:09 AM org.glassfish.grizzly.http.server.NetworkListener start\nINFO: Started listener bound to [0.0.0.0:9999]\nJan 13, 2014 9:51:09 AM org.glassfish.grizzly.http.server.HttpServer start\nINFO: [HttpServer] Started.\nJan 13, 2014 9:51:09 AM org.glassfish.grizzly.http.server.NetworkListener stop\nINFO: Stopped listener bound to [0.0.0.0:9999]\nNetworkListener{name='grizzly', host='0.0.0.0', port=9999, secure=true}\nJan 13, 2014 9:51:09 AM org.glassfish.grizzly.http.server.NetworkListener start\nINFO: Started listener bound to [0.0.0.0:9999]\nJan 13, 2014 9:51:09 AM org.glassfish.grizzly.http.server.HttpServer start\nINFO: [HttpServer] Started.\n</code></pre>\n\n<p>I'm using Grizzly 2.2.1, and Jersey 1.12.</p>\n\n<p>Thanks a bunch!</p>\n"},{"tags":["java","android","android-studio","delphi","r.java-file"],"answers":[{"tags":[],"owner":{"account_id":26318201,"reputation":5076,"user_id":19980636,"display_name":"Krokomot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681127212,"creation_date":1681070977,"answer_id":75972640,"question_id":73892624,"body_markdown":"You can (and should) use at least one of these:\r\n\r\n - The code shrinker [**r8**][1], which has been [introduced][2] to replace ProGuard (together with d8 which replaced dx). For a start take a look at the corresponding Android Dev Docs on how to [shrink, obfuscate, and optimize your app][3] and this [guide][4]. Especially the doc&#39;s section on [resource shrinking][5] may be of interest.\r\n\r\n - The code inspector [**lint**][6] will help you to find various problems with the code, inter alia unused resources which also unnecessarily bloat your `R.java` file.\r\n\r\n------------\r\n\r\nFor an elaboration on purpose and structure of resource IDs in `R.java` you might take a look at [this Stackoverflow thread][7].\r\n\r\nNote, that it&#39;s highly unrecommended to manipulate `R.java` manually. As it is written in *B.Burd &amp; J.P.Mueller, [Android Application Development All-in-One For Dummies][8], 3rd Ed., 2020, Wiley, pp.87* (a serious book, despite the name) in respect to `R.java` and Android Studio:\r\n\r\n&gt; Each Android project has an `R.java` file. Android Studio generates this file and protects it as if the file were made of gold. You, the developer, never create or modify the `R.java` file’s text.\r\n\r\nas well as\r\n\r\n&gt; Android’s documentation tells you to put `R.java` and its hex values out of your mind, and that’s probably good advice.\r\n\r\nand finally \r\n\r\n&gt; You cannot edit `R.java`. Long after the creation of a project, your IDE continues to monitor (and, if necessary, update) the contents of the `R.java` file. If you delete `R.java`, Android Studio recreates the file. If you edit `R.java`, Android Studio undoes your edit.\r\n\r\nThough I don&#39;t agree on such kind of paternalism, one really shouldn&#39;t manually edit `R.java` (even if one could when not using Android Studio, like in your case). As I&#39;ve put it once [somewhere][9]:\r\n\r\n&gt; Though human-readable, this file should never be edited manually as it is highly probable to crash the app because of erroneous references. There is no good reason imaginable why one should want to edit `R.java` anyway.\r\n\r\nThe last sentence would also be valid in your case.\r\n\r\n\r\n  [1]: https://r8.googlesource.com/r8\r\n  [2]: https://android-developers.googleblog.com/2018/11/r8-new-code-shrinker-from-google-is.html?m=1\r\n  [3]: https://developer.android.com/build/shrink-code\r\n  [4]: https://blog.logrocket.com/r8-code-shrinking-android-guide\r\n  [5]: https://developer.android.com/build/shrink-code#shrink-resources\r\n  [6]: https://developer.android.com/studio/write/lint\r\n  [7]: https://stackoverflow.com/questions/74382059/why-aapt2-does-not-generate-the-same-id-than-aapt-and-what-the-purpose-of-ids-l/75975892#75975892\r\n  [8]: https://www.oreilly.com/library/view/android-application-development/9781119660453/\r\n  [9]: https://timeout.userpage.fu-berlin.de/apkbuilder/#resources","title":"How to manually generate R.java","body":"<p>You can (and should) use at least one of these:</p>\n<ul>\n<li><p>The code shrinker <a href=\"https://r8.googlesource.com/r8\" rel=\"nofollow noreferrer\"><strong>r8</strong></a>, which has been <a href=\"https://android-developers.googleblog.com/2018/11/r8-new-code-shrinker-from-google-is.html?m=1\" rel=\"nofollow noreferrer\">introduced</a> to replace ProGuard (together with d8 which replaced dx). For a start take a look at the corresponding Android Dev Docs on how to <a href=\"https://developer.android.com/build/shrink-code\" rel=\"nofollow noreferrer\">shrink, obfuscate, and optimize your app</a> and this <a href=\"https://blog.logrocket.com/r8-code-shrinking-android-guide\" rel=\"nofollow noreferrer\">guide</a>. Especially the doc's section on <a href=\"https://developer.android.com/build/shrink-code#shrink-resources\" rel=\"nofollow noreferrer\">resource shrinking</a> may be of interest.</p>\n</li>\n<li><p>The code inspector <a href=\"https://developer.android.com/studio/write/lint\" rel=\"nofollow noreferrer\"><strong>lint</strong></a> will help you to find various problems with the code, inter alia unused resources which also unnecessarily bloat your <code>R.java</code> file.</p>\n</li>\n</ul>\n<hr />\n<p>For an elaboration on purpose and structure of resource IDs in <code>R.java</code> you might take a look at <a href=\"https://stackoverflow.com/questions/74382059/why-aapt2-does-not-generate-the-same-id-than-aapt-and-what-the-purpose-of-ids-l/75975892#75975892\">this Stackoverflow thread</a>.</p>\n<p>Note, that it's highly unrecommended to manipulate <code>R.java</code> manually. As it is written in <em>B.Burd &amp; J.P.Mueller, <a href=\"https://www.oreilly.com/library/view/android-application-development/9781119660453/\" rel=\"nofollow noreferrer\">Android Application Development All-in-One For Dummies</a>, 3rd Ed., 2020, Wiley, pp.87</em> (a serious book, despite the name) in respect to <code>R.java</code> and Android Studio:</p>\n<blockquote>\n<p>Each Android project has an <code>R.java</code> file. Android Studio generates this file and protects it as if the file were made of gold. You, the developer, never create or modify the <code>R.java</code> file’s text.</p>\n</blockquote>\n<p>as well as</p>\n<blockquote>\n<p>Android’s documentation tells you to put <code>R.java</code> and its hex values out of your mind, and that’s probably good advice.</p>\n</blockquote>\n<p>and finally</p>\n<blockquote>\n<p>You cannot edit <code>R.java</code>. Long after the creation of a project, your IDE continues to monitor (and, if necessary, update) the contents of the <code>R.java</code> file. If you delete <code>R.java</code>, Android Studio recreates the file. If you edit <code>R.java</code>, Android Studio undoes your edit.</p>\n</blockquote>\n<p>Though I don't agree on such kind of paternalism, one really shouldn't manually edit <code>R.java</code> (even if one could when not using Android Studio, like in your case). As I've put it once <a href=\"https://timeout.userpage.fu-berlin.de/apkbuilder/#resources\" rel=\"nofollow noreferrer\">somewhere</a>:</p>\n<blockquote>\n<p>Though human-readable, this file should never be edited manually as it is highly probable to crash the app because of erroneous references. There is no good reason imaginable why one should want to edit <code>R.java</code> anyway.</p>\n</blockquote>\n<p>The last sentence would also be valid in your case.</p>\n"}],"owner":{"account_id":1127005,"reputation":12365,"user_id":1114043,"accept_rate":51,"display_name":"zeus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":176,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75972640,"answer_count":1,"score":2,"last_activity_date":1681127212,"creation_date":1664440672,"question_id":73892624,"body_markdown":"My project (made in Delphi) need to manually generate for each package it&#39;s include the R.java file manually. Actually I put all resources of each library in a single .res directory and I run aapt.exe on this directory for each package like this for android.support.compat:\r\n\r\n\r\n    &quot;aapt.exe&quot; package -v -f -m \r\n      -M &quot;\\libraries\\android.support.compat\\AndroidManifest.xml&quot;\r\n      -I &quot;C:\\SDKs\\android\\platforms\\android-32\\android.jar&quot; \r\n      -S &quot;.\\res&quot;\r\n      -J &quot;.\\tmp\\src&quot; \r\n      --auto-add-overlay \r\n      --output-text-symbols .\\tmp\\\r\n\r\nand this for each package ex for android.support.coreui\r\n\r\n    &quot;aapt.exe&quot; package -v -f -m \r\n      -M &quot;\\libraries\\android.support.coreui\\AndroidManifest.xml&quot;\r\n      -I &quot;C:\\SDKs\\android\\platforms\\android-32\\android.jar&quot; \r\n      -S &quot;.\\res&quot;\r\n      -J &quot;.\\tmp\\src&quot; \r\n      --auto-add-overlay \r\n      --output-text-symbols .\\tmp\\\r\n\r\nThe problem is that at the end I have for each package **the same R.java that is quite big** because it&#39;s include all resources ids of the whole App. ex :\r\n\r\n    package androidx.core;\r\n    \r\n    public final class R {\r\n       public static final class styleable {\r\n          public static final int[] ActionBar = new int[]{2130771969, 2130771971, 2130771972, 2130771973, 2130771974, 2130771975, 2130771976, 2130771977, 2130771978, 2130771979, 2130771980, 2130771981, 2130771982, 2130771983, 2130771984, 2130771985, 2130771986, 2130771987, 2130771988, 2130771989, 2130771990, 2130771991, 2130771992, 2130771993, 2130771994, 2130771995, 2130771996, 2130771997, 2130772082};\r\n          public static final int ActionBar_background = 10;\r\n          public static final int ActionBar_backgroundSplit = 12;\r\n    ....\r\n\r\nand\r\n\r\n    package android.support.coreui;\r\n    \r\n    public final class R {\r\n       public static final class styleable {\r\n          public static final int[] ActionBar = new int[]{2130771969, 2130771971, 2130771972, 2130771973, 2130771974, 2130771975, 2130771976, 2130771977, 2130771978, 2130771979, 2130771980, 2130771981, 2130771982, 2130771983, 2130771984, 2130771985, 2130771986, 2130771987, 2130771988, 2130771989, 2130771990, 2130771991, 2130771992, 2130771993, 2130771994, 2130771995, 2130771996, 2130771997, 2130772082};\r\n          public static final int ActionBar_background = 10;\r\n          public static final int ActionBar_backgroundSplit = 12;\r\n    \r\nIs there a way to generate for each package a R.java with only the resource ids need by the package?","title":"How to manually generate R.java","body":"<p>My project (made in Delphi) need to manually generate for each package it's include the R.java file manually. Actually I put all resources of each library in a single .res directory and I run aapt.exe on this directory for each package like this for android.support.compat:</p>\n<pre><code>&quot;aapt.exe&quot; package -v -f -m \n  -M &quot;\\libraries\\android.support.compat\\AndroidManifest.xml&quot;\n  -I &quot;C:\\SDKs\\android\\platforms\\android-32\\android.jar&quot; \n  -S &quot;.\\res&quot;\n  -J &quot;.\\tmp\\src&quot; \n  --auto-add-overlay \n  --output-text-symbols .\\tmp\\\n</code></pre>\n<p>and this for each package ex for android.support.coreui</p>\n<pre><code>&quot;aapt.exe&quot; package -v -f -m \n  -M &quot;\\libraries\\android.support.coreui\\AndroidManifest.xml&quot;\n  -I &quot;C:\\SDKs\\android\\platforms\\android-32\\android.jar&quot; \n  -S &quot;.\\res&quot;\n  -J &quot;.\\tmp\\src&quot; \n  --auto-add-overlay \n  --output-text-symbols .\\tmp\\\n</code></pre>\n<p>The problem is that at the end I have for each package <strong>the same R.java that is quite big</strong> because it's include all resources ids of the whole App. ex :</p>\n<pre><code>package androidx.core;\n\npublic final class R {\n   public static final class styleable {\n      public static final int[] ActionBar = new int[]{2130771969, 2130771971, 2130771972, 2130771973, 2130771974, 2130771975, 2130771976, 2130771977, 2130771978, 2130771979, 2130771980, 2130771981, 2130771982, 2130771983, 2130771984, 2130771985, 2130771986, 2130771987, 2130771988, 2130771989, 2130771990, 2130771991, 2130771992, 2130771993, 2130771994, 2130771995, 2130771996, 2130771997, 2130772082};\n      public static final int ActionBar_background = 10;\n      public static final int ActionBar_backgroundSplit = 12;\n....\n</code></pre>\n<p>and</p>\n<pre><code>package android.support.coreui;\n\npublic final class R {\n   public static final class styleable {\n      public static final int[] ActionBar = new int[]{2130771969, 2130771971, 2130771972, 2130771973, 2130771974, 2130771975, 2130771976, 2130771977, 2130771978, 2130771979, 2130771980, 2130771981, 2130771982, 2130771983, 2130771984, 2130771985, 2130771986, 2130771987, 2130771988, 2130771989, 2130771990, 2130771991, 2130771992, 2130771993, 2130771994, 2130771995, 2130771996, 2130771997, 2130772082};\n      public static final int ActionBar_background = 10;\n      public static final int ActionBar_backgroundSplit = 12;\n</code></pre>\n<p>Is there a way to generate for each package a R.java with only the resource ids need by the package?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":3,"creation_date":1681127349,"post_id":75976785,"comment_id":134002342,"body_markdown":"Do not use static fields for your calculations, these are messing up your calculations, specially when you call `PressButton()` multiple times. Use return values and/or local variables instead.","body":"Do not use static fields for your calculations, these are messing up your calculations, specially when you call <code>PressButton()</code> multiple times. Use return values and/or local variables instead."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1681129649,"post_id":75976785,"comment_id":134002747,"body_markdown":"Basically, you want the number of [permutations](https://en.wikipedia.org/wiki/Permutation) of _n_ things. (In your question, each &quot;thing&quot; is a number.) For 3 things, the number of permutations is 6. Why do you say that it should be 7? And why is it 14 for 4 things?","body":"Basically, you want the number of <a href=\"https://en.wikipedia.org/wiki/Permutation\" rel=\"nofollow noreferrer\">permutations</a> of <i>n</i> things. (In your question, each &quot;thing&quot; is a number.) For 3 things, the number of permutations is 6. Why do you say that it should be 7? And why is it 14 for 4 things?"}],"owner":{"account_id":28264839,"reputation":1,"user_id":21608963,"display_name":"David"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1681129258,"answer_count":0,"score":0,"last_activity_date":1681126964,"creation_date":1681126964,"question_id":75976785,"body_markdown":"Task:\r\n\r\nA lock has n buttons in it, numbered from 1 to n. To open the lock, you have to press all buttons in some order, i.e. a key to the lock is a permutation of the first n integers. If you push the right button in the right order, it will be pressed into the lock. Otherwise all pressed buttons will pop out. When all buttons are pressed into the lock, it opens.\r\n\r\nYour task is to calculate the number of times you&#39;ve got to push buttons in order to open the lock in the worst-case scenario.\r\n\r\nMy decision:\r\n\r\n```\r\npublic class Main {\r\n    public static long pressCounter = 0;\r\n    public static long step = 2;\r\n\r\n    public static long PressButton(long n)\r\n    {\r\n        if (n == 0) return 0;\r\n        if (n == 1) return 1;\r\n        if (n == 2) return 2;\r\n\r\n        long temp = (n - step) * step + 1;\r\n        pressCounter += temp;\r\n        \r\n        if ((n - step) != 0) {\r\n            step++;\r\n            PressButton(n);\r\n        }\r\n        \r\n        long result = n + pressCounter;\r\n        return result;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        System.out.println(PressButton(3));\r\n        System.out.println(PressButton(4));\r\n    }\r\n}\r\n```\r\n\r\n\r\nTwo or more runs of this method give an unexpected solution. I think it&#39;s the pressCounter and step variables. How can I fix it?\r\n\r\n```\r\nSystem.out.println(PressButton(3)); \r\n```\r\nexpecting - 7  \r\n```\r\nSystem.out.println(PressButton(4)); \r\n```\r\nexpecting - 14","title":"Problem with initialization outside the method","body":"<p>Task:</p>\n<p>A lock has n buttons in it, numbered from 1 to n. To open the lock, you have to press all buttons in some order, i.e. a key to the lock is a permutation of the first n integers. If you push the right button in the right order, it will be pressed into the lock. Otherwise all pressed buttons will pop out. When all buttons are pressed into the lock, it opens.</p>\n<p>Your task is to calculate the number of times you've got to push buttons in order to open the lock in the worst-case scenario.</p>\n<p>My decision:</p>\n<pre><code>public class Main {\n    public static long pressCounter = 0;\n    public static long step = 2;\n\n    public static long PressButton(long n)\n    {\n        if (n == 0) return 0;\n        if (n == 1) return 1;\n        if (n == 2) return 2;\n\n        long temp = (n - step) * step + 1;\n        pressCounter += temp;\n        \n        if ((n - step) != 0) {\n            step++;\n            PressButton(n);\n        }\n        \n        long result = n + pressCounter;\n        return result;\n    }\n\n    public static void main(String[] args) {\n        System.out.println(PressButton(3));\n        System.out.println(PressButton(4));\n    }\n}\n</code></pre>\n<p>Two or more runs of this method give an unexpected solution. I think it's the pressCounter and step variables. How can I fix it?</p>\n<pre><code>System.out.println(PressButton(3)); \n</code></pre>\n<p>expecting - 7</p>\n<pre><code>System.out.println(PressButton(4)); \n</code></pre>\n<p>expecting - 14</p>\n"},{"tags":["java","android","frameworks","executorservice","android-lifecycle"],"answers":[{"tags":[],"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1563548775,"creation_date":1563548775,"answer_id":57115197,"question_id":57115092,"body_markdown":"If a thread is still running, it continues to run even after onDestroy is called.  A thread cannot safely be cancelled by outside the thread itself, so nothing in the system will try. (Why not-  because its possible this will cause deadlock.  The system doesn&#39;t know what conditions a thread may be waiting for or locks it may be holding, or resources it may have claimed that will block other threads).\r\n\r\nIf all threads are finished, then shutting down the executorservice will kill all the threads.\r\n\r\nAs an aside-  your comments in the first paragraph shows you may not fully be aware of all the ins and outs of various asynchronous technologies available.  The reason you&#39;d use thread pools and async tasks are very different, and a Service has nothing to do with threading on Android.","title":"Will a thread pool automatically be shut down when changing Activities (should it even be used)?","body":"<p>If a thread is still running, it continues to run even after onDestroy is called.  A thread cannot safely be cancelled by outside the thread itself, so nothing in the system will try. (Why not-  because its possible this will cause deadlock.  The system doesn't know what conditions a thread may be waiting for or locks it may be holding, or resources it may have claimed that will block other threads).</p>\n\n<p>If all threads are finished, then shutting down the executorservice will kill all the threads.</p>\n\n<p>As an aside-  your comments in the first paragraph shows you may not fully be aware of all the ins and outs of various asynchronous technologies available.  The reason you'd use thread pools and async tasks are very different, and a Service has nothing to do with threading on Android.</p>\n"},{"tags":[],"owner":{"account_id":3319559,"reputation":2575,"user_id":2791067,"display_name":"Roman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681126902,"creation_date":1563554392,"answer_id":57116542,"question_id":57115092,"body_markdown":"Thread pool is independent from activity, fragment lifecycle. So, yes it will run even after destroying activity.","title":"Will a thread pool automatically be shut down when changing Activities (should it even be used)?","body":"<p>Thread pool is independent from activity, fragment lifecycle. So, yes it will run even after destroying activity.</p>\n"}],"owner":{"account_id":7219356,"reputation":1156,"user_id":9057867,"accept_rate":75,"display_name":"Jo Momma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":374,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1681126902,"creation_date":1563548376,"question_id":57115092,"body_markdown":"I understand that it may not be the best option to use an `ExecuterService` (thread pools) in an `Android` application. I know how to use `AsyncTaskLoader` and `AsyncTask` as well as `services`. My question is more about better understanding the framework. \r\n\r\nIf I create a thread pool using the Executer framework in my Android application, and I don&#39;t declare the pool as static, will the threads still be available to the rest of the application when I leave the `Activity` it is created in? Will I have created &quot;zombie threads&quot; that aren&#39;t accessible but continue to use memory resources (memory leak). \r\n\r\nI know that you need to shut down the service and this can be done in `onDestroy()`. I&#39;m just curious if the pool is still reachable if it is created, not shutdown and also declared public. Thank you for you explanations in advance.","title":"Will a thread pool automatically be shut down when changing Activities (should it even be used)?","body":"<p>I understand that it may not be the best option to use an <code>ExecuterService</code> (thread pools) in an <code>Android</code> application. I know how to use <code>AsyncTaskLoader</code> and <code>AsyncTask</code> as well as <code>services</code>. My question is more about better understanding the framework. </p>\n\n<p>If I create a thread pool using the Executer framework in my Android application, and I don't declare the pool as static, will the threads still be available to the rest of the application when I leave the <code>Activity</code> it is created in? Will I have created \"zombie threads\" that aren't accessible but continue to use memory resources (memory leak). </p>\n\n<p>I know that you need to shut down the service and this can be done in <code>onDestroy()</code>. I'm just curious if the pool is still reachable if it is created, not shutdown and also declared public. Thank you for you explanations in advance.</p>\n"},{"tags":["java","android"],"owner":{"account_id":27553818,"reputation":150,"user_id":21028409,"display_name":"Khuong Viet Tai"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681126757,"creation_date":1681122972,"question_id":75976336,"body_markdown":"hi everyone i am looking to use SharePreference to save values of calculations. i want each time pressing &quot;=&quot; will save the value of the calculation in the form tvMath = tvResult which I don&#39;t know how to do now.\r\n\r\nAfter saving I want to show it on Another screen\r\n\r\nthis is my code\r\n\r\nMain Activity \r\n\r\n```\r\npackage com.khuongviettai.caculatorsharedpreferences;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.content.Intent;\r\nimport android.content.SharedPreferences;\r\nimport android.os.Bundle;\r\nimport android.os.Environment;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport org.mozilla.javascript.Context;\r\nimport org.mozilla.javascript.Scriptable;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.HashSet;\r\nimport java.util.Set;\r\n\r\n\r\npublic class MainActivity extends AppCompatActivity implements View.OnClickListener {\r\n\r\n    private TextView tvMath, tvResult;\r\n    private Button btnC, btnOpen, btnClose, btnDiv, btn7, btn8, btn9, btnMul, btn4, btn5, btn6, btnSub, btn1, btn2, btn3, btnPlus, btn0, btnDot, btnResult, btnBack;\r\n\r\n\r\n\r\n    private String currentMath = &quot;&quot;;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n\r\n        tvMath = findViewById(R.id.tvMath);\r\n        tvResult = findViewById(R.id.tvResult);\r\n        assignID(btnC, R.id.btnC);\r\n        assignID(btnOpen, R.id.btnOpen);\r\n        assignID(btnClose, R.id.btnClose);\r\n        assignID(btnDiv, R.id.btnDiv);\r\n        assignID(btn0, R.id.btn0);\r\n        assignID(btn1, R.id.btn1);\r\n        assignID(btn2, R.id.btn2);\r\n        assignID(btn3, R.id.btn3);\r\n        assignID(btn4, R.id.btn4);\r\n        assignID(btn5, R.id.btn5);\r\n        assignID(btn6, R.id.btn6);\r\n        assignID(btn7, R.id.btn7);\r\n        assignID(btn8, R.id.btn8);\r\n        assignID(btn9, R.id.btn9);\r\n        assignID(btnMul, R.id.btnMul);\r\n        assignID(btnSub, R.id.btnSub);\r\n        assignID(btnPlus, R.id.btnPlus);\r\n        assignID(btnDot, R.id.btnDot);\r\n        assignID(btnResult, R.id.btnResult);\r\n        assignID(btnBack, R.id.btnBack);\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n    void assignID(Button btn, int id) {\r\n        btn = findViewById(id);\r\n        btn.setOnClickListener(this);\r\n    }\r\n\r\n\r\n\r\n\r\n    @Override\r\n    public void onClick(View view) {\r\n        Button button = (Button) view;\r\n        String buttonText = button.getText().toString();\r\n        if (buttonText.equals(&quot;=&quot;)) {\r\n            if (currentMath.equals(&quot;&quot;)) {\r\n                tvResult.setText(&quot;0&quot;);\r\n                return;\r\n            }\r\n            String finalResult = getResult(currentMath);\r\n            if (!finalResult.equals(&quot;Err&quot;)) {\r\n\r\n\r\n                tvResult.setText(finalResult);\r\n                Toast.makeText(this, &quot;Saved&quot;, Toast.LENGTH_SHORT).show();\r\n            } else {\r\n                tvResult.setText(&quot;Err&quot;);\r\n            }\r\n            return;\r\n\r\n        } else if (buttonText.equals(&quot;C&quot;)) {\r\n            tvMath.setText(&quot;&quot;);\r\n            tvResult.setText(&quot;0&quot;);\r\n            currentMath = &quot;&quot;;\r\n            return;\r\n\r\n        } else if (buttonText.equals(&quot;BACK&quot;)) {\r\n            Intent intent = new Intent(MainActivity.this, HistoryActivity.class);\r\n\r\n            startActivity(intent);\r\n            return;\r\n\r\n        }\r\n\r\n        currentMath += buttonText;\r\n        tvMath.setText(currentMath);\r\n    }\r\n\r\n\r\n\r\n\r\n    String getResult(String data) {\r\n        try {\r\n            Context context = Context.enter();\r\n            context.setOptimizationLevel(-1);\r\n            Scriptable scriptable = context.initStandardObjects();\r\n            String finalResult = context.evaluateString(scriptable, data, &quot;Javascript&quot;, 1, null).toString();\r\n            if (finalResult.endsWith(&quot;.0&quot;)) {\r\n                finalResult = finalResult.replace(&quot;.0&quot;, &quot;&quot;);\r\n            }\r\n            if (data.equals(&quot;16052001&quot;)) {\r\n                finalResult = &quot;I love Tai&quot;;\r\n            }\r\n            return finalResult;\r\n        } catch (Exception e\r\n        ) {\r\n            return &quot;Err&quot;;\r\n        }\r\n    }\r\n\r\n\r\n```\r\n\r\nHistoryActivity\r\n\r\n```\r\npackage com.khuongviettai.caculatorsharedpreferences;\r\nimport android.content.SharedPreferences;\r\nimport android.os.Bundle;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.ListView;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.HashSet;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.Set;\r\n\r\npublic class HistoryActivity extends AppCompatActivity {\r\n    private ListView listView;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_history);\r\n\r\n        listView = findViewById(R.id.listView);\r\n\r\n    }\r\n}\r\n```\r\n\r\nthe above code when I press BACK will switch to HistoryActyvity\r\n\r\n[![image app][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jVsD6.png","title":"how can save value with SharePreference Android","body":"<p>hi everyone i am looking to use SharePreference to save values of calculations. i want each time pressing &quot;=&quot; will save the value of the calculation in the form tvMath = tvResult which I don't know how to do now.</p>\n<p>After saving I want to show it on Another screen</p>\n<p>this is my code</p>\n<p>Main Activity</p>\n<pre><code>package com.khuongviettai.caculatorsharedpreferences;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.content.Intent;\nimport android.content.SharedPreferences;\nimport android.os.Bundle;\nimport android.os.Environment;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport org.mozilla.javascript.Context;\nimport org.mozilla.javascript.Scriptable;\n\nimport java.util.ArrayList;\nimport java.util.HashSet;\nimport java.util.Set;\n\n\npublic class MainActivity extends AppCompatActivity implements View.OnClickListener {\n\n    private TextView tvMath, tvResult;\n    private Button btnC, btnOpen, btnClose, btnDiv, btn7, btn8, btn9, btnMul, btn4, btn5, btn6, btnSub, btn1, btn2, btn3, btnPlus, btn0, btnDot, btnResult, btnBack;\n\n\n\n    private String currentMath = &quot;&quot;;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n\n        tvMath = findViewById(R.id.tvMath);\n        tvResult = findViewById(R.id.tvResult);\n        assignID(btnC, R.id.btnC);\n        assignID(btnOpen, R.id.btnOpen);\n        assignID(btnClose, R.id.btnClose);\n        assignID(btnDiv, R.id.btnDiv);\n        assignID(btn0, R.id.btn0);\n        assignID(btn1, R.id.btn1);\n        assignID(btn2, R.id.btn2);\n        assignID(btn3, R.id.btn3);\n        assignID(btn4, R.id.btn4);\n        assignID(btn5, R.id.btn5);\n        assignID(btn6, R.id.btn6);\n        assignID(btn7, R.id.btn7);\n        assignID(btn8, R.id.btn8);\n        assignID(btn9, R.id.btn9);\n        assignID(btnMul, R.id.btnMul);\n        assignID(btnSub, R.id.btnSub);\n        assignID(btnPlus, R.id.btnPlus);\n        assignID(btnDot, R.id.btnDot);\n        assignID(btnResult, R.id.btnResult);\n        assignID(btnBack, R.id.btnBack);\n\n\n\n\n    }\n\n    void assignID(Button btn, int id) {\n        btn = findViewById(id);\n        btn.setOnClickListener(this);\n    }\n\n\n\n\n    @Override\n    public void onClick(View view) {\n        Button button = (Button) view;\n        String buttonText = button.getText().toString();\n        if (buttonText.equals(&quot;=&quot;)) {\n            if (currentMath.equals(&quot;&quot;)) {\n                tvResult.setText(&quot;0&quot;);\n                return;\n            }\n            String finalResult = getResult(currentMath);\n            if (!finalResult.equals(&quot;Err&quot;)) {\n\n\n                tvResult.setText(finalResult);\n                Toast.makeText(this, &quot;Saved&quot;, Toast.LENGTH_SHORT).show();\n            } else {\n                tvResult.setText(&quot;Err&quot;);\n            }\n            return;\n\n        } else if (buttonText.equals(&quot;C&quot;)) {\n            tvMath.setText(&quot;&quot;);\n            tvResult.setText(&quot;0&quot;);\n            currentMath = &quot;&quot;;\n            return;\n\n        } else if (buttonText.equals(&quot;BACK&quot;)) {\n            Intent intent = new Intent(MainActivity.this, HistoryActivity.class);\n\n            startActivity(intent);\n            return;\n\n        }\n\n        currentMath += buttonText;\n        tvMath.setText(currentMath);\n    }\n\n\n\n\n    String getResult(String data) {\n        try {\n            Context context = Context.enter();\n            context.setOptimizationLevel(-1);\n            Scriptable scriptable = context.initStandardObjects();\n            String finalResult = context.evaluateString(scriptable, data, &quot;Javascript&quot;, 1, null).toString();\n            if (finalResult.endsWith(&quot;.0&quot;)) {\n                finalResult = finalResult.replace(&quot;.0&quot;, &quot;&quot;);\n            }\n            if (data.equals(&quot;16052001&quot;)) {\n                finalResult = &quot;I love Tai&quot;;\n            }\n            return finalResult;\n        } catch (Exception e\n        ) {\n            return &quot;Err&quot;;\n        }\n    }\n\n\n</code></pre>\n<p>HistoryActivity</p>\n<pre><code>package com.khuongviettai.caculatorsharedpreferences;\nimport android.content.SharedPreferences;\nimport android.os.Bundle;\nimport android.widget.ArrayAdapter;\nimport android.widget.ListView;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport java.util.ArrayList;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\n\npublic class HistoryActivity extends AppCompatActivity {\n    private ListView listView;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_history);\n\n        listView = findViewById(R.id.listView);\n\n    }\n}\n</code></pre>\n<p>the above code when I press BACK will switch to HistoryActyvity</p>\n<p><a href=\"https://i.stack.imgur.com/jVsD6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jVsD6.png\" alt=\"image app\" /></a></p>\n"},{"tags":["java","swing","user-interface"],"comments":[{"owner":{"account_id":3836705,"reputation":179,"user_id":3180823,"accept_rate":67,"display_name":"Yousuf Soomro"},"score":0,"creation_date":1390752821,"post_id":21365570,"comment_id":32217546,"body_markdown":"I am creating an order form and I use panels to add details to that order,\nSomething like [this](http://www.mustbebuilt.co.uk/demo/jquery/adding-form-fields/adding-fields-example.php)\nI want to add remove function to that","body":"I am creating an order form and I use panels to add details to that order, Something like <a href=\"http://www.mustbebuilt.co.uk/demo/jquery/adding-form-fields/adding-fields-example.php\" rel=\"nofollow noreferrer\">this</a> I want to add remove function to that"}],"answers":[{"tags":[],"owner":{"account_id":997513,"reputation":12945,"user_id":3893496,"accept_rate":54,"display_name":"arcy"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1390754692,"creation_date":1390754692,"answer_id":21366261,"question_id":21365570,"body_markdown":"This is a classic case of looking in the wrong place for an answer; your question presupposes a way to do things, and you ask how to do that presupposed and erroneous operation, and confusion ensues.  It doesn&#39;t help that &quot;dispose&quot; is a term used for an operation you don&#39;t need at all, having to do with making memory available for reclaiming in an environment where programmers do these things.\r\n\r\nI *believe* what you want to do is remove the reference that the parent component has to the JPanel.  That would fit your desire that getComponents() in the parent panel not return the panel you are getting rid of. \r\n\r\nIn order for the panel that you are removing to do this, it needs a reference to the parent panel, and then you can remove it from the parent panel just like you&#39;ve removed components from the target panel.  In fact, if the parent panel is the only place that references the target, and the target&#39;s components are only referenced in the target, you don&#39;t have to remove the target components if you just remove the parent panel reference to the target.\r\n\r\nSo pass a reference to your parent panel to your target panel, and do a remove() of the target panel from the parent panel in place of your hypothesized dispose() call.\r\n\r\n","title":"How to Dispose a JPanel - jPanel1.dispose() Or equivalent","body":"<p>This is a classic case of looking in the wrong place for an answer; your question presupposes a way to do things, and you ask how to do that presupposed and erroneous operation, and confusion ensues.  It doesn't help that \"dispose\" is a term used for an operation you don't need at all, having to do with making memory available for reclaiming in an environment where programmers do these things.</p>\n\n<p>I <em>believe</em> what you want to do is remove the reference that the parent component has to the JPanel.  That would fit your desire that getComponents() in the parent panel not return the panel you are getting rid of. </p>\n\n<p>In order for the panel that you are removing to do this, it needs a reference to the parent panel, and then you can remove it from the parent panel just like you've removed components from the target panel.  In fact, if the parent panel is the only place that references the target, and the target's components are only referenced in the target, you don't have to remove the target components if you just remove the parent panel reference to the target.</p>\n\n<p>So pass a reference to your parent panel to your target panel, and do a remove() of the target panel from the parent panel in place of your hypothesized dispose() call.</p>\n"},{"tags":[],"owner":{"account_id":257449,"reputation":39,"user_id":2008850,"display_name":"Douglas Tybel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1432758462,"creation_date":1432758462,"answer_id":30492513,"question_id":21365570,"body_markdown":"Dispose em JPanel Netbeans java\r\n\r\n       Component comp = SwingUtilities.getRoot(this);\r\n       ((Window) comp).dispose();","title":"How to Dispose a JPanel - jPanel1.dispose() Or equivalent","body":"<p>Dispose em JPanel Netbeans java</p>\n\n<pre><code>   Component comp = SwingUtilities.getRoot(this);\n   ((Window) comp).dispose();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":400760,"reputation":16402,"user_id":766911,"accept_rate":73,"display_name":"gdbj"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1492539281,"creation_date":1492539281,"answer_id":43479434,"question_id":21365570,"body_markdown":"In my case, my one panel was on a JDialog, and the following can work:\r\n\r\n    public void dispose() {\r\n\t\tJFrame parent = (JFrame) this.getTopLevelAncestor();\r\n        parent.dispose();\r\n\t}\r\n\r\nHowever, I think explicitly keeping a reference to the parent in the panel might be a less error prone way, as described in another answer.","title":"How to Dispose a JPanel - jPanel1.dispose() Or equivalent","body":"<p>In my case, my one panel was on a JDialog, and the following can work:</p>\n\n<pre><code>public void dispose() {\n    JFrame parent = (JFrame) this.getTopLevelAncestor();\n    parent.dispose();\n}\n</code></pre>\n\n<p>However, I think explicitly keeping a reference to the parent in the panel might be a less error prone way, as described in another answer.</p>\n"},{"tags":[],"owner":{"account_id":26501835,"reputation":3,"user_id":20138656,"display_name":"rainbow"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681126749,"creation_date":1681126496,"answer_id":75976732,"question_id":21365570,"body_markdown":"I am having similar issues as I switch between panels and the next panel is created only based on a choice from the previous one, so I want to dispose as I return from the second panel to the first one until new selection is made on the first panel. \r\n\r\n```\r\nmypanel.removeAll();\r\n```\r\n\r\n\r\n fixed this issue","title":"How to Dispose a JPanel - jPanel1.dispose() Or equivalent","body":"<p>I am having similar issues as I switch between panels and the next panel is created only based on a choice from the previous one, so I want to dispose as I return from the second panel to the first one until new selection is made on the first panel.</p>\n<pre><code>mypanel.removeAll();\n</code></pre>\n<p>fixed this issue</p>\n"}],"owner":{"account_id":3836705,"reputation":179,"user_id":3180823,"accept_rate":67,"display_name":"Yousuf Soomro"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18535,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":21366261,"answer_count":4,"score":0,"last_activity_date":1681126749,"creation_date":1390751504,"question_id":21365570,"body_markdown":"How can we dispose() a JPanel?\r\n\r\nI&#39;ve done `jPanel1.removeAll()` and now I want JPanel to be disposed so that `jPanelParent.getComponents()` can&#39;t return it\r\n\r\n    Component[] components = this.jPanelParent.getComponents();  /// Returns 5 Components      \r\n    JPanel last = (JPanel)components[components.length];\r\n    last.removeAll();\r\n    //last.dispose()   NOT AVAILABLE\r\n\r\n\r\n&gt;Now after above code if I run .getComponents() I don&#39;t want to get &quot;last&quot; in above code","title":"How to Dispose a JPanel - jPanel1.dispose() Or equivalent","body":"<p>How can we dispose() a JPanel?</p>\n\n<p>I've done <code>jPanel1.removeAll()</code> and now I want JPanel to be disposed so that <code>jPanelParent.getComponents()</code> can't return it</p>\n\n<pre><code>Component[] components = this.jPanelParent.getComponents();  /// Returns 5 Components      \nJPanel last = (JPanel)components[components.length];\nlast.removeAll();\n//last.dispose()   NOT AVAILABLE\n</code></pre>\n\n<blockquote>\n  <p>Now after above code if I run .getComponents() I don't want to get \"last\" in above code</p>\n</blockquote>\n"},{"tags":["java","android","proguard","android-r8"],"answers":[{"tags":[],"owner":{"account_id":9135654,"reputation":81,"user_id":6795426,"display_name":" Godrick"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681125809,"creation_date":1681125809,"answer_id":75976654,"question_id":75976440,"body_markdown":"You didn&#39;t add any rule for proguard file equals that mix EVERYTHING when compile apks\r\n\r\nHere is a normally proguard file \r\n\r\n    -dontwarn com.android.**\r\n    -keep class * extends com.android.View {*;}\r\n    -keep public class * extends android.webkit.WebChromeClient\r\n    -keep class * implements java.io.Serializable {*;}\r\n    -dontwarn okhttp3.**\r\n    -dontwarn org.**\r\n\r\n    -keep public class * implements com.bumptech.glide.module.GlideModule\r\n    -keep public class * extends com.bumptech.glide.AppGlideModule\r\n\r\n    -keep class com.google.** {*;}\r\n    -keep class com.facebook.** {*;}\r\n    -keep class com.com.appsflyer.** {*;}\r\n\r\n\r\n    -optimizationpasses 5\r\n    -dontusemixedcaseclassnames\r\n    -verbose\r\n    -keepattributes Signature\r\n    -keepattributes SourceFile,LineNumberTable\r\n    -keepclasseswithmembernames class * {\r\n        native &lt;methods&gt;;\r\n     }\r\n    -adaptclassstrings\r\n    -keepattributes InnerClasses, EnclosingMethod, Signature, *Annotation*\r\n\r\n\r\n\r\n    -keep class androidx.**{*;}\r\n\r\n\r\nExcept those items, you still need add your json convert java bean or data class stuff(That&#39;s why your socket structure is broken), and some third party lib need to keep","title":"My project&#39;s structure is broken when using Proguard","body":"<p>You didn't add any rule for proguard file equals that mix EVERYTHING when compile apks</p>\n<p>Here is a normally proguard file</p>\n<pre><code>-dontwarn com.android.**\n-keep class * extends com.android.View {*;}\n-keep public class * extends android.webkit.WebChromeClient\n-keep class * implements java.io.Serializable {*;}\n-dontwarn okhttp3.**\n-dontwarn org.**\n\n-keep public class * implements com.bumptech.glide.module.GlideModule\n-keep public class * extends com.bumptech.glide.AppGlideModule\n\n-keep class com.google.** {*;}\n-keep class com.facebook.** {*;}\n-keep class com.com.appsflyer.** {*;}\n\n\n-optimizationpasses 5\n-dontusemixedcaseclassnames\n-verbose\n-keepattributes Signature\n-keepattributes SourceFile,LineNumberTable\n-keepclasseswithmembernames class * {\n    native &lt;methods&gt;;\n }\n-adaptclassstrings\n-keepattributes InnerClasses, EnclosingMethod, Signature, *Annotation*\n\n\n\n-keep class androidx.**{*;}\n</code></pre>\n<p>Except those items, you still need add your json convert java bean or data class stuff(That's why your socket structure is broken), and some third party lib need to keep</p>\n"}],"owner":{"account_id":26136616,"reputation":194,"user_id":19826534,"display_name":"Ozgur Baykal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681125809,"creation_date":1681123816,"question_id":75976440,"body_markdown":"I&#39;m trying to add proguard rules. Even if I don&#39;t add these rules, some things break in my project the moment I set minifyEnabled to true. For example, the socket structure is broken, while trying to communicate with another device over socket, it receives requests but cannot send a response. Another example is not printing some values while writing xml. All of this happens the moment I set minifyEnabled to true. The project is huge and I&#39;m not sure what caused it.\r\n\r\nCan you suggest an idea or alternative tool to find the source of the problem and solve it?\r\n\r\nAs I said, even if the rules file is empty, even if I just set the minifyEnabled value to true, these problems occur and I have no idea how to prevent these problems by adding them to the rules file.\r\n\r\n**build.gradle**\r\n```\r\n        release {\r\n            shrinkResources false\r\n            minifyEnabled true\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            buildConfigField(&quot;String&quot;, &#39;BUNDLE_DATE&#39;, &#39;&quot;17.06.2021 09:08&quot;&#39;)\r\n            buildConfigField(&quot;String&quot;, &#39;BUNDLE_ID&#39;, &#39;&quot;13&quot;&#39;)\r\n        }\r\n        debug {\r\n            minifyEnabled true\r\n            shrinkResources false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            ext.enableCrashlytics = false\r\n            ext.alwaysUpdateBuildId = false\r\n            aaptOptions {\r\n                cruncherEnabled false\r\n            }\r\n\r\n```\r\n\r\n**implementations**\r\n\r\n```\r\n    implementation &#39;org.bouncycastle:bcprov-jdk15to18:1.68&#39;\r\n    implementation &#39;org.owasp.encoder:encoder:1.2.3&#39;\r\n\r\n    compile fileTree(include: [&#39;*.jar&#39;], dir: &#39;libs&#39;)\r\n    compile project(&#39;:logfilemanager&#39;)\r\n    compile files(&#39;libs/ormlite-android-4.48.jar&#39;)\r\n    compile files(&#39;libs/ormlite-core-4.48.jar&#39;)\r\n    compile files(&#39;libs/zxing.jar&#39;)\r\n    compile files(&#39;libs/calimero-2.0.4.jar&#39;)\r\n    implementation &#39;com.android.volley:volley:1.2.1&#39;\r\n    implementation &#39;androidx.multidex:multidex:2.0.1&#39;\r\n    implementation &#39;androidx.appcompat:appcompat:1.5.1&#39;\r\n    implementation &#39;androidx.cardview:cardview:1.0.0&#39;\r\n    implementation &#39;cat.ereza:customactivityoncrash:2.4.0&#39;\r\n    compile group: &#39;cz.msebera.android&#39;, name: &#39;httpclient&#39;, version: &#39;4.5.8&#39;\r\n    implementation &#39;com.google.android.gms:play-services-location:20.0.0&#39;\r\n    implementation &#39;org.kie.modules:org-apache-commons-net:6.5.0.Final&#39;\r\n    implementation &#39;com.github.bumptech.glide:glide:4.13.2&#39;\r\n    implementation &#39;com.github.justzak:dilatingdotsprogressbar:1.0.1&#39;\r\n    implementation &#39;com.google.code.gson:gson:2.9.1&#39;\r\n    implementation &quot;androidx.recyclerview:recyclerview:1.2.1&quot;\r\n    implementation &#39;org.java-websocket:Java-WebSocket:1.5.3&#39;\r\n    implementation(&quot;com.squareup.okhttp3:okhttp:4.10.0&quot;)\r\n    implementation group: &#39;commons-fileupload&#39;, name: &#39;commons-fileupload&#39;, version: &#39;1.4&#39;\r\n    implementation &#39;javax.servlet:javax.servlet-api:4.0.1&#39;\r\n```","title":"My project&#39;s structure is broken when using Proguard","body":"<p>I'm trying to add proguard rules. Even if I don't add these rules, some things break in my project the moment I set minifyEnabled to true. For example, the socket structure is broken, while trying to communicate with another device over socket, it receives requests but cannot send a response. Another example is not printing some values while writing xml. All of this happens the moment I set minifyEnabled to true. The project is huge and I'm not sure what caused it.</p>\n<p>Can you suggest an idea or alternative tool to find the source of the problem and solve it?</p>\n<p>As I said, even if the rules file is empty, even if I just set the minifyEnabled value to true, these problems occur and I have no idea how to prevent these problems by adding them to the rules file.</p>\n<p><strong>build.gradle</strong></p>\n<pre><code>        release {\n            shrinkResources false\n            minifyEnabled true\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n            buildConfigField(&quot;String&quot;, 'BUNDLE_DATE', '&quot;17.06.2021 09:08&quot;')\n            buildConfigField(&quot;String&quot;, 'BUNDLE_ID', '&quot;13&quot;')\n        }\n        debug {\n            minifyEnabled true\n            shrinkResources false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n            ext.enableCrashlytics = false\n            ext.alwaysUpdateBuildId = false\n            aaptOptions {\n                cruncherEnabled false\n            }\n\n</code></pre>\n<p><strong>implementations</strong></p>\n<pre><code>    implementation 'org.bouncycastle:bcprov-jdk15to18:1.68'\n    implementation 'org.owasp.encoder:encoder:1.2.3'\n\n    compile fileTree(include: ['*.jar'], dir: 'libs')\n    compile project(':logfilemanager')\n    compile files('libs/ormlite-android-4.48.jar')\n    compile files('libs/ormlite-core-4.48.jar')\n    compile files('libs/zxing.jar')\n    compile files('libs/calimero-2.0.4.jar')\n    implementation 'com.android.volley:volley:1.2.1'\n    implementation 'androidx.multidex:multidex:2.0.1'\n    implementation 'androidx.appcompat:appcompat:1.5.1'\n    implementation 'androidx.cardview:cardview:1.0.0'\n    implementation 'cat.ereza:customactivityoncrash:2.4.0'\n    compile group: 'cz.msebera.android', name: 'httpclient', version: '4.5.8'\n    implementation 'com.google.android.gms:play-services-location:20.0.0'\n    implementation 'org.kie.modules:org-apache-commons-net:6.5.0.Final'\n    implementation 'com.github.bumptech.glide:glide:4.13.2'\n    implementation 'com.github.justzak:dilatingdotsprogressbar:1.0.1'\n    implementation 'com.google.code.gson:gson:2.9.1'\n    implementation &quot;androidx.recyclerview:recyclerview:1.2.1&quot;\n    implementation 'org.java-websocket:Java-WebSocket:1.5.3'\n    implementation(&quot;com.squareup.okhttp3:okhttp:4.10.0&quot;)\n    implementation group: 'commons-fileupload', name: 'commons-fileupload', version: '1.4'\n    implementation 'javax.servlet:javax.servlet-api:4.0.1'\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":6388117,"reputation":706,"user_id":4955304,"accept_rate":89,"display_name":"Adam Gerard"},"score":1,"creation_date":1494034912,"post_id":43815455,"comment_id":74670956,"body_markdown":"Does .antMatchers(&quot;/*.html&quot;).permitAll() work for you? I was under the impression that ** is for directories and * for characters: http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/AntPathMatcher.html","body":"Does .antMatchers(&quot;/*.html&quot;).permitAll() work for you? I was under the impression that ** is for directories and * for characters: <a href=\"http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/AntPathMatcher.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-framework/docs/current/javadoc-api/org&zwnj;&#8203;/&hellip;</a>"},{"owner":{"account_id":159676,"reputation":88183,"user_id":379235,"accept_rate":62,"display_name":"daydreamer"},"score":0,"creation_date":1494037034,"post_id":43815455,"comment_id":74671262,"body_markdown":"that does not work either","body":"that does not work either"},{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":0,"creation_date":1494063359,"post_id":43815455,"comment_id":74676318,"body_markdown":"Did you annotate your `WebSecurityConfig` class with `@Configuration`? And show your `LoginFilter` and `TokenFilter`.","body":"Did you annotate your <code>WebSecurityConfig</code> class with <code>@Configuration</code>? And show your <code>LoginFilter</code> and <code>TokenFilter</code>."},{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":0,"creation_date":1494063644,"post_id":43815455,"comment_id":74676401,"body_markdown":"And what response do you get? 401, 403 or ...","body":"And what response do you get? 401, 403 or ..."}],"answers":[{"tags":[],"owner":{"account_id":2067188,"reputation":2606,"user_id":1842482,"accept_rate":100,"display_name":"chaoluo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1494051879,"creation_date":1494043083,"answer_id":43816569,"question_id":43815455,"body_markdown":"try to change to `/**/index.html`. For Ant path matcher\r\n\r\n\r\n    ? matches one character\r\n    * matches zero or more characters\r\n    ** matches zero or more directories in a path\r\n    {spring:[a-z]+} matches the regexp [a-z]+ as a path variable named &quot;spring&quot;","title":"Spring Boot doesn&#39;t serve HTML after Spring Security is enabled","body":"<p>try to change to <code>/**/index.html</code>. For Ant path matcher</p>\n\n<pre><code>? matches one character\n* matches zero or more characters\n** matches zero or more directories in a path\n{spring:[a-z]+} matches the regexp [a-z]+ as a path variable named \"spring\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17558126,"reputation":53,"user_id":13350024,"display_name":"Abraham Zsombor Nagy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681125740,"creation_date":1681124443,"answer_id":75976504,"question_id":43815455,"body_markdown":"I came across the same issue. I followed [this](https://stackoverflow.com/questions/24661289/spring-boot-not-serving-static-content) to solve basic static content issue where adding a configuration class that extends WebMvcConfigurer solved that issue.\r\n\r\nBut it was just a `@Configuration` bean.\r\n\r\nWhen I changed it to `@EnableWebMvc` as mentioned [here](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/config/annotation/WebMvcConfigurer.html), static content loaded after enabling Spring Security.\r\n\r\nInterestingly when I had both annotation, it didn&#39;t work.","title":"Spring Boot doesn&#39;t serve HTML after Spring Security is enabled","body":"<p>I came across the same issue. I followed <a href=\"https://stackoverflow.com/questions/24661289/spring-boot-not-serving-static-content\">this</a> to solve basic static content issue where adding a configuration class that extends WebMvcConfigurer solved that issue.</p>\n<p>But it was just a <code>@Configuration</code> bean.</p>\n<p>When I changed it to <code>@EnableWebMvc</code> as mentioned <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/config/annotation/WebMvcConfigurer.html\" rel=\"nofollow noreferrer\">here</a>, static content loaded after enabling Spring Security.</p>\n<p>Interestingly when I had both annotation, it didn't work.</p>\n"}],"owner":{"account_id":159676,"reputation":88183,"user_id":379235,"accept_rate":62,"display_name":"daydreamer"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1033,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1681125740,"creation_date":1494030612,"question_id":43815455,"body_markdown":"In my Spring Boot application, I configure Spring Security as\r\n\r\n    @EnableWebSecurity\r\n    public class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n      @Override\r\n      public void configure(HttpSecurity http) throws Exception {\r\n        http.csrf().disable().authorizeRequests()\r\n            .antMatchers(&quot;/css/**&quot;, &quot;/js/**&quot;, &quot;/images/**&quot;, &quot;**/index.html&quot;).permitAll()\r\n            .antMatchers(&quot;/**.html&quot;).permitAll()\r\n            .antMatchers(HttpMethod.POST, &quot;/login&quot;).permitAll()\r\n            .anyRequest().authenticated()\r\n            .and()\r\n            .addFilterBefore(new LoginFilter(&quot;/login&quot;), BasicAuthenticationFilter.class)\r\n            .addFilterBefore(new TokenFilter(), BasicAuthenticationFilter.class);\r\n      }\r\n    }\r\n\r\nI have `index.html` under `resources/static/index.html`. This stopped serving after I enabled security. What am I missing?\r\n \r\nIf I go back when I do not have any security, I get my HTML rendered on server.","title":"Spring Boot doesn&#39;t serve HTML after Spring Security is enabled","body":"<p>In my Spring Boot application, I configure Spring Security as</p>\n\n<pre><code>@EnableWebSecurity\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n  @Override\n  public void configure(HttpSecurity http) throws Exception {\n    http.csrf().disable().authorizeRequests()\n        .antMatchers(\"/css/**\", \"/js/**\", \"/images/**\", \"**/index.html\").permitAll()\n        .antMatchers(\"/**.html\").permitAll()\n        .antMatchers(HttpMethod.POST, \"/login\").permitAll()\n        .anyRequest().authenticated()\n        .and()\n        .addFilterBefore(new LoginFilter(\"/login\"), BasicAuthenticationFilter.class)\n        .addFilterBefore(new TokenFilter(), BasicAuthenticationFilter.class);\n  }\n}\n</code></pre>\n\n<p>I have <code>index.html</code> under <code>resources/static/index.html</code>. This stopped serving after I enabled security. What am I missing?</p>\n\n<p>If I go back when I do not have any security, I get my HTML rendered on server.</p>\n"},{"tags":["java","drools","optaplanner","constraint-programming","optaweb-employee-rostering"],"owner":{"account_id":27452345,"reputation":3,"user_id":20944374,"display_name":"Ubaid Ghante"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681125366,"creation_date":1681125366,"question_id":75976595,"body_markdown":"I have this constraint\r\n```\r\nConstraint noOverlappingShifts(ConstraintFactory constraintFactory) {\r\n        return constraintFactory.forEachUniquePair(Shift.class,\r\n                equal(Shift::getEmployee),\r\n                overlapping(Shift::getStartDateTime, Shift::getEndDateTime),\r\n                equal(Shift::getstatus))\r\n                .penalizeConfigurableLong(CONSTRAINT_NO_OVERLAPPING_SHIFTS,\r\n                        (shift, otherShift) -&gt; otherShift.getLengthInMinutes());\r\n    }\r\n```\r\nNow i want to change the second equal to not equal but Joiner class in optaplanner does not contain this. There is a filtering method but not sure how to use it.I am using employee rostering pre complied optaplanner, if possible suggest code changes in the above code rather than core.\r\n\r\nAlso this is how the filtering method is defined\r\n```\r\npublic static &lt;A, B&gt; BiJoiner&lt;A, B&gt; filtering(BiPredicate&lt;A, B&gt; filter) {\r\n        return JoinerSupport.getJoinerService()\r\n                .newBiJoiner(filter);\r\n    }\r\n```\r\nThanks in advance.\r\nAlso can you let me know where can i ask optaplanner related queries.\r\n\r\nI tried filter like this\r\n```\r\nConstraint noOverlappingShifts(ConstraintFactory constraintFactory) {\r\n        return constraintFactory.forEachUniquePair(Shift.class,\r\n                equal(Shift::getEmployee),\r\n                overlapping(Shift::getStartDateTime, Shift::getEndDateTime),\r\n                filtering((shift, otherShift) -&gt; !Objects.equals(shift.getstatus(), \r\n                .penalizeConfigurableLong(CONSTRAINT_NO_OVERLAPPING_SHIFTS,\r\n                        (shift, otherShift) -&gt; otherShift.getLengthInMinutes());\r\n    } \r\n```\r\n\r\nInstead of using java can i directly use a drool file to write constraints. If so how do link it in my code.","title":"How to change constraints in optaplanner?","body":"<p>I have this constraint</p>\n<pre><code>Constraint noOverlappingShifts(ConstraintFactory constraintFactory) {\n        return constraintFactory.forEachUniquePair(Shift.class,\n                equal(Shift::getEmployee),\n                overlapping(Shift::getStartDateTime, Shift::getEndDateTime),\n                equal(Shift::getstatus))\n                .penalizeConfigurableLong(CONSTRAINT_NO_OVERLAPPING_SHIFTS,\n                        (shift, otherShift) -&gt; otherShift.getLengthInMinutes());\n    }\n</code></pre>\n<p>Now i want to change the second equal to not equal but Joiner class in optaplanner does not contain this. There is a filtering method but not sure how to use it.I am using employee rostering pre complied optaplanner, if possible suggest code changes in the above code rather than core.</p>\n<p>Also this is how the filtering method is defined</p>\n<pre><code>public static &lt;A, B&gt; BiJoiner&lt;A, B&gt; filtering(BiPredicate&lt;A, B&gt; filter) {\n        return JoinerSupport.getJoinerService()\n                .newBiJoiner(filter);\n    }\n</code></pre>\n<p>Thanks in advance.\nAlso can you let me know where can i ask optaplanner related queries.</p>\n<p>I tried filter like this</p>\n<pre><code>Constraint noOverlappingShifts(ConstraintFactory constraintFactory) {\n        return constraintFactory.forEachUniquePair(Shift.class,\n                equal(Shift::getEmployee),\n                overlapping(Shift::getStartDateTime, Shift::getEndDateTime),\n                filtering((shift, otherShift) -&gt; !Objects.equals(shift.getstatus(), \n                .penalizeConfigurableLong(CONSTRAINT_NO_OVERLAPPING_SHIFTS,\n                        (shift, otherShift) -&gt; otherShift.getLengthInMinutes());\n    } \n</code></pre>\n<p>Instead of using java can i directly use a drool file to write constraints. If so how do link it in my code.</p>\n"},{"tags":["java","spring","spring-boot","open-telemetry","spring-cloud-sleuth"],"owner":{"account_id":246941,"reputation":1572,"user_id":521347,"accept_rate":60,"display_name":"Sumit Desai"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":447,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681125150,"creation_date":1681124086,"question_id":75976465,"body_markdown":"I had created a Spring-boot micro-service using spring-cloud-sleuth for distributed-tracing. I had a otel-collector which was receiving logs and traces from the application and it was exporting it to Datadog. The flow was working properly.\r\n\r\nHowever, starting from Spring-boot 3.0.5, support of sleuth is removed and observability has been split into two parts some in Spring-boot itself and some part in micrometer. I upgraded my spring-boot version and made changes to export traces to otel-collector but I am not able to get it working. I enabled the Spring debug logs and I can see that the bean for [OpenTelemetryAutoConfiguration][1] is being created. Can someone help me understand if I am doing anything wrong? I am posting the debug logs related to class OpenTelemetryAutoConfiguration below. The messages indicate all the beans in this class are properly loaded. I am expecting an error saying unable to connect at some IP and port but getting nothing\r\n\r\n    OpenTelemetryAutoConfiguration matched:\r\n          - @ConditionalOnClass found required classes &#39;io.micrometer.tracing.otel.bridge.OtelTracer&#39;, &#39;io.opentelemetry.sdk.trace.SdkTracerProvider&#39;, &#39;io.opentelemetry.api.OpenTelemetry&#39; (OnClassCondition)\r\n          - @ConditionalOnProperty (management.tracing.enabled) matched (OnPropertyCondition)\r\n    \r\n       OpenTelemetryAutoConfiguration#micrometerOtelTracer matched:\r\n          - @ConditionalOnMissingBean (types: io.micrometer.tracing.Tracer; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n    \r\n       OpenTelemetryAutoConfiguration#openTelemetry matched:\r\n          - @ConditionalOnMissingBean (types: io.opentelemetry.api.OpenTelemetry; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n    \r\n       OpenTelemetryAutoConfiguration#otelContextPropagators matched:\r\n          - @ConditionalOnMissingBean (types: io.opentelemetry.context.propagation.ContextPropagators; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n    \r\n       OpenTelemetryAutoConfiguration#otelCurrentTraceContext matched:\r\n          - @ConditionalOnMissingBean (types: io.micrometer.tracing.otel.bridge.OtelCurrentTraceContext; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n    \r\n       OpenTelemetryAutoConfiguration#otelPropagator matched:\r\n          - @ConditionalOnMissingBean (types: io.micrometer.tracing.otel.bridge.OtelPropagator; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n    \r\n       OpenTelemetryAutoConfiguration#otelSampler matched:\r\n          - @ConditionalOnMissingBean (types: io.opentelemetry.sdk.trace.samplers.Sampler; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n    \r\n       OpenTelemetryAutoConfiguration#otelSdkTracerProvider matched:\r\n          - @ConditionalOnMissingBean (types: io.opentelemetry.sdk.trace.SdkTracerProvider; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n    \r\n       OpenTelemetryAutoConfiguration#otelSlf4JEventListener matched:\r\n          - @ConditionalOnMissingBean (types: io.micrometer.tracing.otel.bridge.Slf4JEventListener; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n    \r\n       OpenTelemetryAutoConfiguration#otelSpanCustomizer matched:\r\n          - @ConditionalOnMissingBean (types: io.micrometer.tracing.SpanCustomizer; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n    \r\n       OpenTelemetryAutoConfiguration#otelTracer matched:\r\n          - @ConditionalOnMissingBean (types: io.opentelemetry.api.trace.Tracer; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n    \r\n       OpenTelemetryAutoConfiguration#otelTracerEventPublisher matched:\r\n          - @ConditionalOnMissingBean (types: io.micrometer.tracing.otel.bridge.OtelTracer$EventPublisher; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n    \r\n       OpenTelemetryAutoConfiguration.BaggageConfiguration matched:\r\n          - @ConditionalOnProperty (management.tracing.baggage.enabled) matched (OnPropertyCondition)\r\n    \r\n       OpenTelemetryAutoConfiguration.BaggageConfiguration#otelSlf4JBaggageEventListener matched:\r\n          - @ConditionalOnProperty (management.tracing.baggage.correlation.enabled) matched (OnPropertyCondition)\r\n          - @ConditionalOnMissingBean (types: io.micrometer.tracing.otel.bridge.Slf4JBaggageEventListener; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n    \r\n       OpenTelemetryAutoConfiguration.BaggageConfiguration#w3cTextMapPropagatorWithBaggage matched:\r\n          - @ConditionalOnProperty (management.tracing.propagation.type=W3C) matched (OnPropertyCondition)\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/blob/main/spring-boot-project/spring-boot-actuator-autoconfigure/src/main/java/org/springframework/boot/actuate/autoconfigure/tracing/OpenTelemetryAutoConfiguration.java","title":"Unable to get automatic-instrumentation with Spring boot and otel-collector working","body":"<p>I had created a Spring-boot micro-service using spring-cloud-sleuth for distributed-tracing. I had a otel-collector which was receiving logs and traces from the application and it was exporting it to Datadog. The flow was working properly.</p>\n<p>However, starting from Spring-boot 3.0.5, support of sleuth is removed and observability has been split into two parts some in Spring-boot itself and some part in micrometer. I upgraded my spring-boot version and made changes to export traces to otel-collector but I am not able to get it working. I enabled the Spring debug logs and I can see that the bean for <a href=\"https://github.com/spring-projects/spring-boot/blob/main/spring-boot-project/spring-boot-actuator-autoconfigure/src/main/java/org/springframework/boot/actuate/autoconfigure/tracing/OpenTelemetryAutoConfiguration.java\" rel=\"nofollow noreferrer\">OpenTelemetryAutoConfiguration</a> is being created. Can someone help me understand if I am doing anything wrong? I am posting the debug logs related to class OpenTelemetryAutoConfiguration below. The messages indicate all the beans in this class are properly loaded. I am expecting an error saying unable to connect at some IP and port but getting nothing</p>\n<pre><code>OpenTelemetryAutoConfiguration matched:\n      - @ConditionalOnClass found required classes 'io.micrometer.tracing.otel.bridge.OtelTracer', 'io.opentelemetry.sdk.trace.SdkTracerProvider', 'io.opentelemetry.api.OpenTelemetry' (OnClassCondition)\n      - @ConditionalOnProperty (management.tracing.enabled) matched (OnPropertyCondition)\n\n   OpenTelemetryAutoConfiguration#micrometerOtelTracer matched:\n      - @ConditionalOnMissingBean (types: io.micrometer.tracing.Tracer; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   OpenTelemetryAutoConfiguration#openTelemetry matched:\n      - @ConditionalOnMissingBean (types: io.opentelemetry.api.OpenTelemetry; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   OpenTelemetryAutoConfiguration#otelContextPropagators matched:\n      - @ConditionalOnMissingBean (types: io.opentelemetry.context.propagation.ContextPropagators; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   OpenTelemetryAutoConfiguration#otelCurrentTraceContext matched:\n      - @ConditionalOnMissingBean (types: io.micrometer.tracing.otel.bridge.OtelCurrentTraceContext; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   OpenTelemetryAutoConfiguration#otelPropagator matched:\n      - @ConditionalOnMissingBean (types: io.micrometer.tracing.otel.bridge.OtelPropagator; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   OpenTelemetryAutoConfiguration#otelSampler matched:\n      - @ConditionalOnMissingBean (types: io.opentelemetry.sdk.trace.samplers.Sampler; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   OpenTelemetryAutoConfiguration#otelSdkTracerProvider matched:\n      - @ConditionalOnMissingBean (types: io.opentelemetry.sdk.trace.SdkTracerProvider; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   OpenTelemetryAutoConfiguration#otelSlf4JEventListener matched:\n      - @ConditionalOnMissingBean (types: io.micrometer.tracing.otel.bridge.Slf4JEventListener; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   OpenTelemetryAutoConfiguration#otelSpanCustomizer matched:\n      - @ConditionalOnMissingBean (types: io.micrometer.tracing.SpanCustomizer; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   OpenTelemetryAutoConfiguration#otelTracer matched:\n      - @ConditionalOnMissingBean (types: io.opentelemetry.api.trace.Tracer; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   OpenTelemetryAutoConfiguration#otelTracerEventPublisher matched:\n      - @ConditionalOnMissingBean (types: io.micrometer.tracing.otel.bridge.OtelTracer$EventPublisher; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   OpenTelemetryAutoConfiguration.BaggageConfiguration matched:\n      - @ConditionalOnProperty (management.tracing.baggage.enabled) matched (OnPropertyCondition)\n\n   OpenTelemetryAutoConfiguration.BaggageConfiguration#otelSlf4JBaggageEventListener matched:\n      - @ConditionalOnProperty (management.tracing.baggage.correlation.enabled) matched (OnPropertyCondition)\n      - @ConditionalOnMissingBean (types: io.micrometer.tracing.otel.bridge.Slf4JBaggageEventListener; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   OpenTelemetryAutoConfiguration.BaggageConfiguration#w3cTextMapPropagatorWithBaggage matched:\n      - @ConditionalOnProperty (management.tracing.propagation.type=W3C) matched (OnPropertyCondition)\n</code></pre>\n"},{"tags":["java","postgresql","jpa","spring-data-jpa","nativequery"],"comments":[{"owner":{"display_name":"user330315"},"score":0,"creation_date":1681124484,"post_id":75976346,"comment_id":134001854,"body_markdown":"`right` is a reserved keyword. So you need double quotes: `where &quot;right&quot; = ...`. If you are using a native query in JPQL, the `ARRAY[...]` syntax should work. Alternatively use a string constant for the array `where &quot;right&quot; = &#39;{1,2}&#39;`","body":"<code>right</code> is a reserved keyword. So you need double quotes: <code>where &quot;right&quot; = ...</code>. If you are using a native query in JPQL, the <code>ARRAY[...]</code> syntax should work. Alternatively use a string constant for the array <code>where &quot;right&quot; = &#39;{1,2}&#39;</code>"},{"owner":{"account_id":25192367,"reputation":55,"user_id":19032411,"display_name":"stakeika"},"score":0,"creation_date":1681125383,"post_id":75976346,"comment_id":134001989,"body_markdown":"@a_horse_with_no_name I&#39;m sorry for confusion, the field name is actually `authority_right`, I shortened it intentionally in the question. I&#39;ve tried your suggestion `where &quot;right&quot; = &#39;{1,2}&#39;`, unfortunately it produces another validation error `person is not mapped`","body":"@a_horse_with_no_name I&#39;m sorry for confusion, the field name is actually <code>authority_right</code>, I shortened it intentionally in the question. I&#39;ve tried your suggestion <code>where &quot;right&quot; = &#39;{1,2}&#39;</code>, unfortunately it produces another validation error <code>person is not mapped</code>"}],"owner":{"account_id":25192367,"reputation":55,"user_id":19032411,"display_name":"stakeika"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681125064,"creation_date":1681123067,"question_id":75976346,"body_markdown":"My query is:\r\n\r\n    SELECT id\r\n    FROM person\r\n    WHERE authority_right = ARRAY[1,2]\r\n\r\n`authority_right` is integer array. My goal is to find people who have \r\n`authority_right` exactly equal to [1,2], not [1] and not [2]. This query is executed successfully in console, but a validation error occurs when I launch my application with `@Query` using the exact same code.\r\nError occurs in this area: `ARRAY[1,2]`. \r\nMessage in logs:\r\n\r\n    expecting CLOSE_BRACKET, found &#39;,&#39;\r\n\r\nMessage in editor:\r\n\r\n    &lt;expression&gt;, &lt;operator&gt;, GROUP, HAVING or ORDER expected, got &#39;{&#39;\r\n\r\nI also tried using `INT{1, 2}` and some combinations of brackets, but I haven&#39;t succeed. How can I make it work?\r\n","title":"JPA Native Query doesn&#39;t seem to support PostgreSQL ARRAY function","body":"<p>My query is:</p>\n<pre><code>SELECT id\nFROM person\nWHERE authority_right = ARRAY[1,2]\n</code></pre>\n<p><code>authority_right</code> is integer array. My goal is to find people who have\n<code>authority_right</code> exactly equal to [1,2], not [1] and not [2]. This query is executed successfully in console, but a validation error occurs when I launch my application with <code>@Query</code> using the exact same code.\nError occurs in this area: <code>ARRAY[1,2]</code>.\nMessage in logs:</p>\n<pre><code>expecting CLOSE_BRACKET, found ','\n</code></pre>\n<p>Message in editor:</p>\n<pre><code>&lt;expression&gt;, &lt;operator&gt;, GROUP, HAVING or ORDER expected, got '{'\n</code></pre>\n<p>I also tried using <code>INT{1, 2}</code> and some combinations of brackets, but I haven't succeed. How can I make it work?</p>\n"},{"tags":["java","gradle","environment-variables","gradle-task","system-variable"],"comments":[{"owner":{"account_id":15994883,"reputation":3427,"user_id":11543023,"display_name":"djmonki"},"score":0,"creation_date":1680523291,"post_id":75900667,"comment_id":133907516,"body_markdown":"Assume this is to have the variable available during build/deploy time, but not during runtime?","body":"Assume this is to have the variable available during build/deploy time, but not during runtime?"},{"owner":{"account_id":5218565,"reputation":1034,"user_id":6540591,"display_name":"User51"},"score":0,"creation_date":1680616460,"post_id":75900667,"comment_id":133925862,"body_markdown":"It looks like you referenced this question, https://stackoverflow.com/questions/36322536/how-to-set-an-environment-variable-from-a-gradle-build .  The issue is scope for most of these...  You set an env var for a task, but then it disappears when the task completes.  For the `Exec` task, environment lasts for the task, same with most others.  In the same question, it suggested `run.doFirst { environment &#39;A&#39;, &#39;B&#39; }`.  I assume you tried that as well?  The `run` would apply the env value for a `run`, but it depends what your target task and type are.","body":"It looks like you referenced this question, <a href=\"https://stackoverflow.com/questions/36322536/how-to-set-an-environment-variable-from-a-gradle-build\" title=\"how to set an environment variable from a gradle build\">stackoverflow.com/questions/36322536/&hellip;</a> .  The issue is scope for most of these...  You set an env var for a task, but then it disappears when the task completes.  For the <code>Exec</code> task, environment lasts for the task, same with most others.  In the same question, it suggested <code>run.doFirst { environment &#39;A&#39;, &#39;B&#39; }</code>.  I assume you tried that as well?  The <code>run</code> would apply the env value for a <code>run</code>, but it depends what your target task and type are."},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":3,"creation_date":1680626470,"post_id":75900667,"comment_id":133928615,"body_markdown":"Stepping back a moment, what are you trying to achieve by setting this environment variable? The notions of scope are already addressed: your variable only lives as long as the thing that defined it (unix shells have `.bashrc`, programs on both OSes inherit env variables from their parent process). Ask yourself this as well: do you have any other storage medium that _would_ be persistent (e.g. a file in a common config dir)?","body":"Stepping back a moment, what are you trying to achieve by setting this environment variable? The notions of scope are already addressed: your variable only lives as long as the thing that defined it (unix shells have <code>.bashrc</code>, programs on both OSes inherit env variables from their parent process). Ask yourself this as well: do you have any other storage medium that <i>would</i> be persistent (e.g. a file in a common config dir)?"}],"answers":[{"tags":[],"owner":{"account_id":288740,"reputation":36420,"user_id":589329,"accept_rate":40,"display_name":"Vampire"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680736627,"creation_date":1680736627,"answer_id":75944663,"question_id":75900667,"body_markdown":"&gt; The problem I&#39;m facing is that if I specify it like this\r\n&gt; ```\r\n&gt; test {\r\n&gt;     environment &#39;PROJECT_DIR&#39;, &quot;${projectDir}&quot;\r\n&gt; }\r\n&gt; ```\r\n\r\nThis is exactly the right way to set an environment variable that is accessible while you are executing the `test` task.\r\n\r\n&gt; and access it like this from my java file\r\n&gt; ```\r\n&gt; String projectDir = System.getenv(&quot;PROJECT_DIR&quot;);\r\n&gt; ```\r\n&gt; projectDir is null because I assume it&#39;s not part of test files. \r\n\r\nIt does not matter whether it is a &quot;test file&quot; or a &quot;production file&quot;.\r\nAs you set the environment variable on the `test` task, it will be available and accessible during execution of the `test` task. So it can hardly be that it is `null` during the exeuction of the test task, except if you have a typo somewhere or missed to provide complete information.\r\n\r\n&gt; If I specify it like this\r\n&gt; ```\r\n&gt; task MyTask(type: Exec) {\r\n&gt;     environment &#39;PROJECT_DIR&#39;, &quot;${projectDir}&quot;\r\n&gt; }\r\n&gt; \r\n&gt; tasks.withType(JavaCompile) {\r\n&gt;     compileTask -&gt; compileTask.dependsOn MyTask\r\n&gt; }\r\n&gt; ```\r\n\r\nThis does not make any sense, really.\r\nYou define an `Exec` task, which is a task that executes some executable.\r\nDuring execution of that executable, the environment variable would be set.\r\nBut you do not configure which executable to execute, so what should happen?\r\n\r\nThen you make your Java compilation task depend on that `Exec` task which makes even less sense. Besides that any `dependsOn` is a code-smell (except if a lifecycle task is on the left-hand side) and should be avoided.\r\n\r\n&gt; and accessing the same way as before, it gives an error saying \r\n&gt; ```\r\n&gt; Execution failed for task &#39;&lt;project-name&gt;:MyTask&#39;.\r\n&gt; &gt; execCommand == null!\r\n&gt; ```\r\n\r\nYep, that is because you did not tell the `Exec` task which executable to execute as I just explained above.\r\n\r\n&gt; If I try to do something similar for system property like \r\n&gt; ```\r\n&gt; task setProp(type: Exec) {\r\n&gt;     systemProperty &#39;PROJECT_DIR&#39;, &quot;${projectDir}&quot;\r\n&gt; }\r\n&gt; tasks.withType(JavaCompile) {\r\n&gt;     compileTask -&gt; compileTask.dependsOn MyTask\r\n&gt; }\r\n&gt; ```\r\n&gt; and accessing it like\r\n&gt; ```\r\n&gt; String projectDir = System.getProperty(&quot;PROJECT_DIR&quot;);\r\n&gt; ```\r\n&gt; it ends up with this error\r\n&gt; ```\r\n&gt; Could not find method systemProperty() for arguments [PROJECT_DIR, &lt;path&gt;]\r\n&gt; ```\r\n\r\nSame comments as with the last example above.\r\nBut additionally, what should a system property be in the context of an `Exec` task that executes an arbitrary executable.\r\nSystem properties are a Java specific thing, so you cannot set a system property on a generic `Exec` task.\r\n\r\n&gt; At the end of the day, I could find nothing that works out. However, both `environment &#39;PROJECT_DIR&#39;, &quot;${projectDir}&quot;` and `systemProperty &#39;PROJECT_DIR&#39;, &quot;${projectDir}&quot;` work if I include them in an existing JavaExec task. The problem is that my file cannot be triggered by any kind of JavaExec tasks as it is part of a bigger deployed service, so setting it through build.gradle seems like my only resort. \r\n\r\nIf I got you right here, then this paragraph is the most important in your question.\r\nDo I get you right, that you want to set this property at build time using your build script, but then expect it to be available to your production code when running outside of Gradle in the &quot;bigger deployed service&quot;?\r\n\r\nThis cannot work, what you set in Gradle is only available during the execution of the task you are setting them on. They cannot be persisted automagically or something like that. That would also be completely against what they are for. They are there so that you can configure things at runtime, not at build time, so that for example a user of a program can configure certain things.\r\n\r\nIf you want to set the property at build time and then access it at runtime, you need to generate this value into a file. For this you can for example use a task of type `WriteProperties`, but be aware that you should properly configure it as task generating resources, by giving it to `sourceSets.main.resources.srcDir(...)` as argument, or maybe the easier way is to have a template file in your resources and then configure the `processResources` task to fill in the placeholders in the template for example using `expand`. Then at runtime you can read that properties file to get the value you need.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Cannot set environment variable or property in Gradle outside test","body":"<blockquote>\n<p>The problem I'm facing is that if I specify it like this</p>\n<pre><code>test {\n    environment 'PROJECT_DIR', &quot;${projectDir}&quot;\n}\n</code></pre>\n</blockquote>\n<p>This is exactly the right way to set an environment variable that is accessible while you are executing the <code>test</code> task.</p>\n<blockquote>\n<p>and access it like this from my java file</p>\n<pre><code>String projectDir = System.getenv(&quot;PROJECT_DIR&quot;);\n</code></pre>\n<p>projectDir is null because I assume it's not part of test files.</p>\n</blockquote>\n<p>It does not matter whether it is a &quot;test file&quot; or a &quot;production file&quot;.\nAs you set the environment variable on the <code>test</code> task, it will be available and accessible during execution of the <code>test</code> task. So it can hardly be that it is <code>null</code> during the exeuction of the test task, except if you have a typo somewhere or missed to provide complete information.</p>\n<blockquote>\n<p>If I specify it like this</p>\n<pre><code>task MyTask(type: Exec) {\n    environment 'PROJECT_DIR', &quot;${projectDir}&quot;\n}\n\ntasks.withType(JavaCompile) {\n    compileTask -&gt; compileTask.dependsOn MyTask\n}\n</code></pre>\n</blockquote>\n<p>This does not make any sense, really.\nYou define an <code>Exec</code> task, which is a task that executes some executable.\nDuring execution of that executable, the environment variable would be set.\nBut you do not configure which executable to execute, so what should happen?</p>\n<p>Then you make your Java compilation task depend on that <code>Exec</code> task which makes even less sense. Besides that any <code>dependsOn</code> is a code-smell (except if a lifecycle task is on the left-hand side) and should be avoided.</p>\n<blockquote>\n<p>and accessing the same way as before, it gives an error saying</p>\n<pre><code>Execution failed for task '&lt;project-name&gt;:MyTask'.\n&gt; execCommand == null!\n</code></pre>\n</blockquote>\n<p>Yep, that is because you did not tell the <code>Exec</code> task which executable to execute as I just explained above.</p>\n<blockquote>\n<p>If I try to do something similar for system property like</p>\n<pre><code>task setProp(type: Exec) {\n    systemProperty 'PROJECT_DIR', &quot;${projectDir}&quot;\n}\ntasks.withType(JavaCompile) {\n    compileTask -&gt; compileTask.dependsOn MyTask\n}\n</code></pre>\n<p>and accessing it like</p>\n<pre><code>String projectDir = System.getProperty(&quot;PROJECT_DIR&quot;);\n</code></pre>\n<p>it ends up with this error</p>\n<pre><code>Could not find method systemProperty() for arguments [PROJECT_DIR, &lt;path&gt;]\n</code></pre>\n</blockquote>\n<p>Same comments as with the last example above.\nBut additionally, what should a system property be in the context of an <code>Exec</code> task that executes an arbitrary executable.\nSystem properties are a Java specific thing, so you cannot set a system property on a generic <code>Exec</code> task.</p>\n<blockquote>\n<p>At the end of the day, I could find nothing that works out. However, both <code>environment 'PROJECT_DIR', &quot;${projectDir}&quot;</code> and <code>systemProperty 'PROJECT_DIR', &quot;${projectDir}&quot;</code> work if I include them in an existing JavaExec task. The problem is that my file cannot be triggered by any kind of JavaExec tasks as it is part of a bigger deployed service, so setting it through build.gradle seems like my only resort.</p>\n</blockquote>\n<p>If I got you right here, then this paragraph is the most important in your question.\nDo I get you right, that you want to set this property at build time using your build script, but then expect it to be available to your production code when running outside of Gradle in the &quot;bigger deployed service&quot;?</p>\n<p>This cannot work, what you set in Gradle is only available during the execution of the task you are setting them on. They cannot be persisted automagically or something like that. That would also be completely against what they are for. They are there so that you can configure things at runtime, not at build time, so that for example a user of a program can configure certain things.</p>\n<p>If you want to set the property at build time and then access it at runtime, you need to generate this value into a file. For this you can for example use a task of type <code>WriteProperties</code>, but be aware that you should properly configure it as task generating resources, by giving it to <code>sourceSets.main.resources.srcDir(...)</code> as argument, or maybe the easier way is to have a template file in your resources and then configure the <code>processResources</code> task to fill in the placeholders in the template for example using <code>expand</code>. Then at runtime you can read that properties file to get the value you need.</p>\n"},{"tags":[],"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681125031,"creation_date":1681080093,"answer_id":75973235,"question_id":75900667,"body_markdown":"If your goal is to ensure that a particular environment variable (or system property) is set when your program (that one you build with gradle …) starts, then you may want to have a look to [this answer][1].\r\n\r\nGradle generates a start script for each application, and that – as anything else, too – can be configured. The linked answer gives a starting point on how this can be achieved.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/51111231/1554195","title":"Cannot set environment variable or property in Gradle outside test","body":"<p>If your goal is to ensure that a particular environment variable (or system property) is set when your program (that one you build with gradle …) starts, then you may want to have a look to <a href=\"https://stackoverflow.com/a/51111231/1554195\">this answer</a>.</p>\n<p>Gradle generates a start script for each application, and that – as anything else, too – can be configured. The linked answer gives a starting point on how this can be achieved.</p>\n"}],"owner":{"account_id":8495965,"reputation":155,"user_id":6370552,"accept_rate":100,"display_name":"scottstots"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":894,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1681125031,"creation_date":1680279193,"question_id":75900667,"body_markdown":"I have been trying to set a simple environment variable (or system property, whatever works really) through build.gradle file to access it from a java method (which is not part of integration tests) but after exhausting almost every answer on this forum and elsewhere that I could find, I have still not been able to find a working solution. For reference I have to access it from a file in src/main folder.\r\n\r\nThe problem I&#39;m facing is that if I specify it like this\r\n```\r\ntest {\r\n    environment &#39;PROJECT_DIR&#39;, &quot;${projectDir}&quot;\r\n}\r\n```\r\nand access it like this from my java file\r\n```\r\nString projectDir = System.getenv(&quot;PROJECT_DIR&quot;);\r\n```\r\nprojectDir is null because I assume it&#39;s not part of test files. \r\n\r\nIf I specify it like this\r\n```\r\ntask MyTask(type: Exec) {\r\n    environment &#39;PROJECT_DIR&#39;, &quot;${projectDir}&quot;\r\n}\r\n\r\ntasks.withType(JavaCompile) {\r\n    compileTask -&gt; compileTask.dependsOn MyTask\r\n}\r\n```\r\nand accessing the same way as before, it gives an error saying \r\n```\r\nExecution failed for task &#39;&lt;project-name&gt;:MyTask&#39;.\r\n&gt; execCommand == null!\r\n```\r\nIf I try to do something similar for system property like \r\n```\r\ntask setProp(type: Exec) {\r\n    systemProperty &#39;PROJECT_DIR&#39;, &quot;${projectDir}&quot;\r\n}\r\ntasks.withType(JavaCompile) {\r\n    compileTask -&gt; compileTask.dependsOn MyTask\r\n}\r\n```\r\nand accessing it like\r\n```\r\nString projectDir = System.getProperty(&quot;PROJECT_DIR&quot;);\r\n```\r\nit ends up with this error\r\n```\r\nCould not find method systemProperty() for arguments [PROJECT_DIR, &lt;path&gt;]\r\n```\r\nAt the end of the day, I could find nothing that works out. However, both `environment &#39;PROJECT_DIR&#39;, &quot;${projectDir}&quot;` and `systemProperty &#39;PROJECT_DIR&#39;, &quot;${projectDir}&quot;` work if I include them in an existing JavaExec task. The problem is that my file cannot be triggered by any kind of JavaExec tasks as it is part of a bigger deployed service, so setting it through build.gradle seems like my only resort. \r\n\r\nI wanted to check if there is something I&#39;ve missed or some other way I could just make the project directory accessible to my java class. ","title":"Cannot set environment variable or property in Gradle outside test","body":"<p>I have been trying to set a simple environment variable (or system property, whatever works really) through build.gradle file to access it from a java method (which is not part of integration tests) but after exhausting almost every answer on this forum and elsewhere that I could find, I have still not been able to find a working solution. For reference I have to access it from a file in src/main folder.</p>\n<p>The problem I'm facing is that if I specify it like this</p>\n<pre><code>test {\n    environment 'PROJECT_DIR', &quot;${projectDir}&quot;\n}\n</code></pre>\n<p>and access it like this from my java file</p>\n<pre><code>String projectDir = System.getenv(&quot;PROJECT_DIR&quot;);\n</code></pre>\n<p>projectDir is null because I assume it's not part of test files.</p>\n<p>If I specify it like this</p>\n<pre><code>task MyTask(type: Exec) {\n    environment 'PROJECT_DIR', &quot;${projectDir}&quot;\n}\n\ntasks.withType(JavaCompile) {\n    compileTask -&gt; compileTask.dependsOn MyTask\n}\n</code></pre>\n<p>and accessing the same way as before, it gives an error saying</p>\n<pre><code>Execution failed for task '&lt;project-name&gt;:MyTask'.\n&gt; execCommand == null!\n</code></pre>\n<p>If I try to do something similar for system property like</p>\n<pre><code>task setProp(type: Exec) {\n    systemProperty 'PROJECT_DIR', &quot;${projectDir}&quot;\n}\ntasks.withType(JavaCompile) {\n    compileTask -&gt; compileTask.dependsOn MyTask\n}\n</code></pre>\n<p>and accessing it like</p>\n<pre><code>String projectDir = System.getProperty(&quot;PROJECT_DIR&quot;);\n</code></pre>\n<p>it ends up with this error</p>\n<pre><code>Could not find method systemProperty() for arguments [PROJECT_DIR, &lt;path&gt;]\n</code></pre>\n<p>At the end of the day, I could find nothing that works out. However, both <code>environment 'PROJECT_DIR', &quot;${projectDir}&quot;</code> and <code>systemProperty 'PROJECT_DIR', &quot;${projectDir}&quot;</code> work if I include them in an existing JavaExec task. The problem is that my file cannot be triggered by any kind of JavaExec tasks as it is part of a bigger deployed service, so setting it through build.gradle seems like my only resort.</p>\n<p>I wanted to check if there is something I've missed or some other way I could just make the project directory accessible to my java class.</p>\n"},{"tags":["java","apache-camel"],"answers":[{"tags":[],"owner":{"account_id":22100069,"reputation":21,"user_id":16356680,"display_name":"SomeDevDoingStuff"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681124798,"creation_date":1679675254,"answer_id":75836107,"question_id":69928785,"body_markdown":"In the end, we managed to implement a separate integration server that used the following class to send the test responses:\r\n\r\n    @Component\r\n    public class MllpRoute extends EndpointRouteBuilder {\r\n    \r\n        @Override\r\n        public void configure() {\r\n            onException(HL7Exception.class)\r\n                    .log(&quot;Handling Exception&quot;)\r\n                    .transform(ack(AcknowledgmentCode.AE,&quot;Error transforming the message&quot;,\r\n                            ErrorCode.UNSUPPORTED_MESSAGE_TYPE))\r\n                    .handled(true)\r\n                    .end();\r\n    \r\n            // Successful ack\r\n            from(&quot;mllp://4441&quot;)\r\n                    .log(&quot;Message Received...&quot;)\r\n                    .unmarshal().hl7()\r\n                    .log(&quot;Done unmarshalling...&quot;)\r\n                    .validate(messageConforms())\r\n                    .log(&quot;Done validation...&quot;)\r\n                    .setProperty(MLLP_ACKNOWLEDGEMENT_STRING, ack(AcknowledgmentCode.valueOf(&quot;AA&quot;)))\r\n                    .end();\r\n    \r\n            // Internal Error ack\r\n            from(&quot;mllp://4442&quot;)\r\n                    .log(&quot;Message Received...&quot;)\r\n                    .unmarshal().hl7()\r\n                    .log(&quot;Done unmarshalling...&quot;)\r\n                    .validate(messageConforms())\r\n                    .log(&quot;Done validation...&quot;)\r\n                    .setProperty(MLLP_ACKNOWLEDGEMENT_STRING, ack(AcknowledgmentCode.valueOf(&quot;AE&quot;)))\r\n                    .end();\r\n    \r\n            // Unknown ack\r\n            from(&quot;mllp:4443&quot;)\r\n                    .log(&quot;Message Received...&quot;)\r\n                    .unmarshal().hl7()\r\n                    .log(&quot;Done unmarshalling...&quot;)\r\n                    .validate(messageConforms())\r\n                    .log(&quot;Done validation...&quot;)\r\n                    .setProperty(MLLP_ACKNOWLEDGEMENT_STRING, () -&gt; &quot;UNKNOWN&quot;)\r\n                    .end();\r\n        }\r\n    }\r\n\r\nFor additional context around `messageConforms()` see page: \r\nhttps://camel.apache.org/components/3.20.x/languages/hl7terser-language.html","title":"How to handle [MLLP] acknowledgments using [apache-camel]","body":"<p>In the end, we managed to implement a separate integration server that used the following class to send the test responses:</p>\n<pre><code>@Component\npublic class MllpRoute extends EndpointRouteBuilder {\n\n    @Override\n    public void configure() {\n        onException(HL7Exception.class)\n                .log(&quot;Handling Exception&quot;)\n                .transform(ack(AcknowledgmentCode.AE,&quot;Error transforming the message&quot;,\n                        ErrorCode.UNSUPPORTED_MESSAGE_TYPE))\n                .handled(true)\n                .end();\n\n        // Successful ack\n        from(&quot;mllp://4441&quot;)\n                .log(&quot;Message Received...&quot;)\n                .unmarshal().hl7()\n                .log(&quot;Done unmarshalling...&quot;)\n                .validate(messageConforms())\n                .log(&quot;Done validation...&quot;)\n                .setProperty(MLLP_ACKNOWLEDGEMENT_STRING, ack(AcknowledgmentCode.valueOf(&quot;AA&quot;)))\n                .end();\n\n        // Internal Error ack\n        from(&quot;mllp://4442&quot;)\n                .log(&quot;Message Received...&quot;)\n                .unmarshal().hl7()\n                .log(&quot;Done unmarshalling...&quot;)\n                .validate(messageConforms())\n                .log(&quot;Done validation...&quot;)\n                .setProperty(MLLP_ACKNOWLEDGEMENT_STRING, ack(AcknowledgmentCode.valueOf(&quot;AE&quot;)))\n                .end();\n\n        // Unknown ack\n        from(&quot;mllp:4443&quot;)\n                .log(&quot;Message Received...&quot;)\n                .unmarshal().hl7()\n                .log(&quot;Done unmarshalling...&quot;)\n                .validate(messageConforms())\n                .log(&quot;Done validation...&quot;)\n                .setProperty(MLLP_ACKNOWLEDGEMENT_STRING, () -&gt; &quot;UNKNOWN&quot;)\n                .end();\n    }\n}\n</code></pre>\n<p>For additional context around <code>messageConforms()</code> see page:\n<a href=\"https://camel.apache.org/components/3.20.x/languages/hl7terser-language.html\" rel=\"nofollow noreferrer\">https://camel.apache.org/components/3.20.x/languages/hl7terser-language.html</a></p>\n"}],"owner":{"account_id":22100069,"reputation":21,"user_id":16356680,"display_name":"SomeDevDoingStuff"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":340,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75836107,"answer_count":1,"score":2,"last_activity_date":1681124798,"creation_date":1636635923,"question_id":69928785,"body_markdown":"I&#39;m attempting to send a HL7 message between two MLLP apache-camel components: \r\n\r\n```\r\n@Component\r\npublic class Producer extends RouteBuilder {\r\n\r\n    @Override\r\n    public void configure() {\r\n        from(&quot;direct:hl7-recipient&quot;)\r\n                .marshal(new HL7DataFormat())\r\n                .to(mllp(&quot;localhost:4444&quot;))\r\n                .end();\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n    \r\n```\r\n@Component\r\npublic class Consumer extends RouteBuilder {\r\n\r\n    @Override\r\n    public void configure() {\r\n        from(mllp(&quot;localhost:4444&quot;))\r\n                .log(&quot;received&quot;)\r\n                .unmarshal(new HL7DataFormat())\r\n                .log(&quot;unmarshalled&quot;)\r\n                .setProperty(MLLP_ACKNOWLEDGEMENT_TYPE, ack(AcknowledgmentCode.AA))\r\n                .log(&quot;responding&quot;)\r\n                .end();\r\n    }\r\n}\r\n\r\n```\r\n\r\nI can see the `received`, `unmarshalled` and `responding` log messages.  \r\n\r\nThe exception that is occurring:\r\n\r\n    java.net.SocketTimeoutException: Read timed out\r\n\r\nWith this extract from the stacktrace:\r\n\r\n    Failed delivery for (MessageId: 0D423F22CDC26D9-0000000000000000 on ExchangeId: 0D423F22CDC26D9-0000000000000000). Exhausted after delivery attempt: 1 caught: org.apache.camel.component.mllp.MllpAcknowledgementTimeoutException: process(0D423F22CDC26D9-0000000000000000) [Socket[addr=localhost/127.0.0.1,port=4444,localport=64357]] - timeout receiving MLLP Acknowledgment\r\n\r\n\r\nIt appears that the acknowledgment is not being returned. \r\n\r\n\r\nI have been following the apache-camel [official documentation][1] by setting the acknowledgment property on the exchange.\r\n\r\nThank you for any support.   \r\n\r\n\r\n  [1]: https://camel.apache.org/components/3.12.x/mllp-component.html#_exchange_properties","title":"How to handle [MLLP] acknowledgments using [apache-camel]","body":"<p>I'm attempting to send a HL7 message between two MLLP apache-camel components:</p>\n<pre><code>@Component\npublic class Producer extends RouteBuilder {\n\n    @Override\n    public void configure() {\n        from(&quot;direct:hl7-recipient&quot;)\n                .marshal(new HL7DataFormat())\n                .to(mllp(&quot;localhost:4444&quot;))\n                .end();\n    }\n}\n\n</code></pre>\n<pre><code>@Component\npublic class Consumer extends RouteBuilder {\n\n    @Override\n    public void configure() {\n        from(mllp(&quot;localhost:4444&quot;))\n                .log(&quot;received&quot;)\n                .unmarshal(new HL7DataFormat())\n                .log(&quot;unmarshalled&quot;)\n                .setProperty(MLLP_ACKNOWLEDGEMENT_TYPE, ack(AcknowledgmentCode.AA))\n                .log(&quot;responding&quot;)\n                .end();\n    }\n}\n\n</code></pre>\n<p>I can see the <code>received</code>, <code>unmarshalled</code> and <code>responding</code> log messages.</p>\n<p>The exception that is occurring:</p>\n<pre><code>java.net.SocketTimeoutException: Read timed out\n</code></pre>\n<p>With this extract from the stacktrace:</p>\n<pre><code>Failed delivery for (MessageId: 0D423F22CDC26D9-0000000000000000 on ExchangeId: 0D423F22CDC26D9-0000000000000000). Exhausted after delivery attempt: 1 caught: org.apache.camel.component.mllp.MllpAcknowledgementTimeoutException: process(0D423F22CDC26D9-0000000000000000) [Socket[addr=localhost/127.0.0.1,port=4444,localport=64357]] - timeout receiving MLLP Acknowledgment\n</code></pre>\n<p>It appears that the acknowledgment is not being returned.</p>\n<p>I have been following the apache-camel <a href=\"https://camel.apache.org/components/3.12.x/mllp-component.html#_exchange_properties\" rel=\"nofollow noreferrer\">official documentation</a> by setting the acknowledgment property on the exchange.</p>\n<p>Thank you for any support.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":379763,"reputation":29886,"user_id":733345,"display_name":"Joe"},"score":1,"creation_date":1598277434,"post_id":63562389,"comment_id":112398088,"body_markdown":"Related [How to open user system preferred editor for given file?](https://stackoverflow.com/questions/526037/how-to-open-user-system-preferred-editor-for-given-file), but without a documented way to determine what application was run.","body":"Related <a href=\"https://stackoverflow.com/questions/526037/how-to-open-user-system-preferred-editor-for-given-file\">How to open user system preferred editor for given file?</a>, but without a documented way to determine what application was run."},{"owner":{"account_id":5175641,"reputation":830,"user_id":4142878,"display_name":"Carlos Bazilio"},"score":0,"creation_date":1598277544,"post_id":63562389,"comment_id":112398151,"body_markdown":".example is a Java application? Is it a jar file?","body":".example is a Java application? Is it a jar file?"},{"owner":{"account_id":16478274,"reputation":393,"user_id":11905620,"display_name":"MaS"},"score":1,"creation_date":1598279097,"post_id":63562389,"comment_id":112398993,"body_markdown":"I don&#39;t think there is a general answer for every OS. But maybe the answer [here](https://stackoverflow.com/a/13576250/11905620) might help you for Windows.","body":"I don&#39;t think there is a general answer for every OS. But maybe the answer <a href=\"https://stackoverflow.com/a/13576250/11905620\">here</a> might help you for Windows."},{"owner":{"account_id":9929807,"reputation":562,"user_id":7350192,"accept_rate":100,"display_name":"KUSH42"},"score":0,"creation_date":1598279361,"post_id":63562389,"comment_id":112399126,"body_markdown":"@MaS does not work for Java 11/12","body":"@MaS does not work for Java 11/12"}],"answers":[{"tags":[],"owner":{"account_id":9929807,"reputation":562,"user_id":7350192,"accept_rate":100,"display_name":"KUSH42"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1598278310,"creation_date":1598278310,"answer_id":63562770,"question_id":63562389,"body_markdown":"I do not think that this is possible just using *pure* Java.\r\n\r\nThe only way that comes to my mind right now (using Java) is to use [JNA][1] to directly interface with the Win32-API (note that this is written in C and not Java). See [this answer][2] for how to achieve the Win32-API-part and [this link][3] for how to use JNA.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_Native_Access\r\n  [2]: https://stackoverflow.com/a/17773402/7350192\r\n  [3]: https://www.techbeamers.com/write-a-simple-jna-program-in-java/","title":"Get application associated with a file java","body":"<p>I do not think that this is possible just using <em>pure</em> Java.</p>\n<p>The only way that comes to my mind right now (using Java) is to use <a href=\"https://en.wikipedia.org/wiki/Java_Native_Access\" rel=\"nofollow noreferrer\">JNA</a> to directly interface with the Win32-API (note that this is written in C and not Java). See <a href=\"https://stackoverflow.com/a/17773402/7350192\">this answer</a> for how to achieve the Win32-API-part and <a href=\"https://www.techbeamers.com/write-a-simple-jna-program-in-java/\" rel=\"nofollow noreferrer\">this link</a> for how to use JNA.</p>\n"}],"owner":{"account_id":17322209,"reputation":54,"user_id":12547339,"display_name":"hms11"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":63562770,"answer_count":1,"score":-1,"last_activity_date":1681124751,"creation_date":1598276974,"question_id":63562389,"body_markdown":"I am trying to get the associated program of a file, for example\r\nif I have a file ```C:/foo/bar.example``` I want to get what program\r\nopens ```.example``` (Kind of like Notepad.exe opens .txt Files).\r\n\r\nI tried creating a process to open that file using ```runtime.exec(&quot;rundll32 url.dll,FileProtocolHandler C:/foo/bar.example&quot;)``` \r\nbut there is no way to get the associated application using [Process][1].\r\n\r\nThis example shows what I am trying to achieve in Windows, although I want something cross platform.\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/Process.html","title":"Get application associated with a file java","body":"<p>I am trying to get the associated program of a file, for example\nif I have a file <code>C:/foo/bar.example</code> I want to get what program\nopens <code>.example</code> (Kind of like Notepad.exe opens .txt Files).</p>\n<p>I tried creating a process to open that file using <code>runtime.exec(&quot;rundll32 url.dll,FileProtocolHandler C:/foo/bar.example&quot;)</code>\nbut there is no way to get the associated application using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Process.html\" rel=\"nofollow noreferrer\">Process</a>.</p>\n<p>This example shows what I am trying to achieve in Windows, although I want something cross platform.</p>\n"},{"tags":["java","linux","kotlin","raspberry-pi","raspberry-pi-os"],"owner":{"account_id":18596311,"reputation":1,"user_id":13552237,"display_name":"Govind yadav"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681124740,"creation_date":1681124259,"question_id":75976481,"body_markdown":"I have a Raspberry PI 4 with a dual display setup I wanted to show different operations on both displays depending on some logic.\r\n\r\nMy application is built with compose multiplatform I can make two screens by just following the code\r\n\r\n```\r\n\r\nfun main(args: Array&lt;String&gt;) = application {\r\n\r\n    Window(\r\n        onCloseRequest = app::onDestroy, title = &quot; WINDOW 1 &quot;, state = \r\n    rememberWindowState(\r\n            placement = WindowPlacement.Fullscreen\r\n        )\r\n    ) {\r\n        App(app)\r\n    }\r\n\r\n    Window(\r\n        onCloseRequest = app::onDestroy, title = &quot; WINDOW 2 &quot;, state = \r\n     rememberWindowState(\r\n            placement = WindowPlacement.Fullscreen\r\n        )\r\n    ) {\r\n        App(app)\r\n    }\r\n   \r\n}\r\n\r\n```\r\n\r\nBut I want to set WINDOW 1 to HDMI 1 and WINDOW 2 to HDMI 2 in full screen programmatically any idea how can I do that?\r\n\r\nCan anyone help me with it I tried using screen but no luck \r\n\r\n```\r\nsudo apt-get install screen \r\n```","title":"Changing HDMI diplay for specific scrrens programmatically (PI-4)","body":"<p>I have a Raspberry PI 4 with a dual display setup I wanted to show different operations on both displays depending on some logic.</p>\n<p>My application is built with compose multiplatform I can make two screens by just following the code</p>\n<pre><code>\nfun main(args: Array&lt;String&gt;) = application {\n\n    Window(\n        onCloseRequest = app::onDestroy, title = &quot; WINDOW 1 &quot;, state = \n    rememberWindowState(\n            placement = WindowPlacement.Fullscreen\n        )\n    ) {\n        App(app)\n    }\n\n    Window(\n        onCloseRequest = app::onDestroy, title = &quot; WINDOW 2 &quot;, state = \n     rememberWindowState(\n            placement = WindowPlacement.Fullscreen\n        )\n    ) {\n        App(app)\n    }\n   \n}\n\n</code></pre>\n<p>But I want to set WINDOW 1 to HDMI 1 and WINDOW 2 to HDMI 2 in full screen programmatically any idea how can I do that?</p>\n<p>Can anyone help me with it I tried using screen but no luck</p>\n<pre><code>sudo apt-get install screen \n</code></pre>\n"},{"tags":["java","android-softkeyboard","custom-keyboard","android-input-method"],"comments":[{"owner":{"account_id":1950118,"reputation":1353,"user_id":1754401,"display_name":"tagy22"},"score":0,"creation_date":1678965528,"post_id":55417232,"comment_id":133636838,"body_markdown":"I don&#39;t think `onCreateInputView` is being called. I tried setting the label in a function that I manually call and it works as expected.","body":"I don&#39;t think <code>onCreateInputView</code> is being called. I tried setting the label in a function that I manually call and it works as expected."}],"answers":[{"tags":[],"owner":{"display_name":"user9599745"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1559070759,"creation_date":1559055627,"answer_id":56345063,"question_id":55417232,"body_markdown":"List&lt;&gt;.get() returns the key with the particular index, not the key with the particular code. For example, List&lt;&gt;.get(0) returns the first key.","title":"How to change key label of the custom android keyboard in java","body":"<p>List&lt;>.get() returns the key with the particular index, not the key with the particular code. For example, List&lt;>.get(0) returns the first key.</p>\n"},{"tags":[],"owner":{"account_id":3188886,"reputation":189,"user_id":2693743,"accept_rate":60,"display_name":"flide"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681124422,"creation_date":1681124422,"answer_id":75976501,"question_id":55417232,"body_markdown":"I had a similar issue with my keyboard. I wanted to have a button showing currency symbol most relevant to the user based on the user&#39;s locale.\r\n\r\nSo, the first hurdle in changing the label for a button is to identify the button. I added a static label to the key using which I identify the key in the code.\r\n\r\n            &lt;Key\r\n                android:isRepeatable=&quot;true&quot;\r\n                android:keyLabel=&quot;@string/currencySymbol&quot;\r\n                android:keyWidth=&quot;25%p&quot;/&gt;\r\n\r\nNext item of business was to change the label to my desire. In the view class, during initialisation (Object construction), I setup the label.\r\n\r\n    public NumberKeypadView(Context context, AttributeSet attrs, int defStyleAttr) {\r\n        super(context, attrs, defStyleAttr);\r\n        initialize(context);\r\n    }\r\n\r\n    public void initialize(Context context) {\r\n        ...\r\n        setCurrencySymbolBasedOnLocale(keyboard);\r\n        ...\r\n    }\r\n\r\n    private void setCurrencySymbolBasedOnLocale(Keyboard keyboard) {\r\n        for (Keyboard.Key key: keyboard.getKeys()) {\r\n            if(key.label != null &amp;&amp; key.label.toString().equals(getResources().getString(R.string.currencySymbol))) {\r\n            Currency currency = Currency.getInstance(Locale.getDefault());\r\n            key.label = currency.getSymbol();\r\n            key.text = currency.getSymbol();\r\n            }\r\n        }\r\n    } \r\n\r\n\r\nAnd that is all.\r\n","title":"How to change key label of the custom android keyboard in java","body":"<p>I had a similar issue with my keyboard. I wanted to have a button showing currency symbol most relevant to the user based on the user's locale.</p>\n<p>So, the first hurdle in changing the label for a button is to identify the button. I added a static label to the key using which I identify the key in the code.</p>\n<pre><code>        &lt;Key\n            android:isRepeatable=&quot;true&quot;\n            android:keyLabel=&quot;@string/currencySymbol&quot;\n            android:keyWidth=&quot;25%p&quot;/&gt;\n</code></pre>\n<p>Next item of business was to change the label to my desire. In the view class, during initialisation (Object construction), I setup the label.</p>\n<pre><code>public NumberKeypadView(Context context, AttributeSet attrs, int defStyleAttr) {\n    super(context, attrs, defStyleAttr);\n    initialize(context);\n}\n\npublic void initialize(Context context) {\n    ...\n    setCurrencySymbolBasedOnLocale(keyboard);\n    ...\n}\n\nprivate void setCurrencySymbolBasedOnLocale(Keyboard keyboard) {\n    for (Keyboard.Key key: keyboard.getKeys()) {\n        if(key.label != null &amp;&amp; key.label.toString().equals(getResources().getString(R.string.currencySymbol))) {\n        Currency currency = Currency.getInstance(Locale.getDefault());\n        key.label = currency.getSymbol();\n        key.text = currency.getSymbol();\n        }\n    }\n} \n</code></pre>\n<p>And that is all.</p>\n"}],"owner":{"account_id":15630506,"reputation":1,"user_id":11276950,"display_name":"pete_yoe"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":834,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1681124422,"creation_date":1553861618,"question_id":55417232,"body_markdown":"I want to change the key label on my custom keyboard at run time, passing through java. I can&#39;t find any solution anywhere.\r\n\r\njava file\r\n```\r\n\r\npublic class MyKeyboardService extends InputMethodService implements KeyboardView.OnKeyboardActionListener {\r\n\r\n    public final static int keyToChange = 257;\r\n\r\n\r\n    KeyboardView kv;\r\n    Intent intent;\r\n\r\n    void updateInputView() {\r\n        if (kv == null)\r\n            return;\r\n        Keyboard currentKeyboard = kv.getKeyboard();\r\n        List&lt;Keyboard.Key&gt; keys = currentKeyboard.getKeys();\r\n        keys.get(keyToChange).label = &quot;Change Label&quot;;\r\n        kv.invalidateKey(keyToChange);\r\n    }\r\n\r\n    @Override\r\n    public View onCreateInputView() {\r\n\r\n        checkIfFirstRun();\r\n\r\n        KeyboardView kv = (KeyboardView) getLayoutInflater().inflate(R.layout.keyboard, null);\r\n        Keyboard keyboard = new Keyboard(this, R.xml.layout_keys);\r\n\r\n        kv.setKeyboard(keyboard);\r\n        kv.setPreviewEnabled(false);\r\n        kv.setOnKeyboardActionListener(this);\r\n        updateInputView();\r\n\r\n\r\n        return kv;\r\n```\r\n\r\nxml file\r\n```\r\n        &lt;Key\r\n            android:codes=&quot;257&quot;\r\n            android:keyWidth=&quot;60%p&quot;/&gt;\r\n```\r\n\r\nNow, I still get blank label on the key.\r\nI want it to display &quot;Change Label&quot;","title":"How to change key label of the custom android keyboard in java","body":"<p>I want to change the key label on my custom keyboard at run time, passing through java. I can't find any solution anywhere.</p>\n<p>java file</p>\n<pre><code>\npublic class MyKeyboardService extends InputMethodService implements KeyboardView.OnKeyboardActionListener {\n\n    public final static int keyToChange = 257;\n\n\n    KeyboardView kv;\n    Intent intent;\n\n    void updateInputView() {\n        if (kv == null)\n            return;\n        Keyboard currentKeyboard = kv.getKeyboard();\n        List&lt;Keyboard.Key&gt; keys = currentKeyboard.getKeys();\n        keys.get(keyToChange).label = &quot;Change Label&quot;;\n        kv.invalidateKey(keyToChange);\n    }\n\n    @Override\n    public View onCreateInputView() {\n\n        checkIfFirstRun();\n\n        KeyboardView kv = (KeyboardView) getLayoutInflater().inflate(R.layout.keyboard, null);\n        Keyboard keyboard = new Keyboard(this, R.xml.layout_keys);\n\n        kv.setKeyboard(keyboard);\n        kv.setPreviewEnabled(false);\n        kv.setOnKeyboardActionListener(this);\n        updateInputView();\n\n\n        return kv;\n</code></pre>\n<p>xml file</p>\n<pre><code>        &lt;Key\n            android:codes=&quot;257&quot;\n            android:keyWidth=&quot;60%p&quot;/&gt;\n</code></pre>\n<p>Now, I still get blank label on the key.\nI want it to display &quot;Change Label&quot;</p>\n"},{"tags":["java","android","image","bitmap","crop"],"answers":[{"tags":[],"owner":{"account_id":22264521,"reputation":329,"user_id":20837030,"display_name":"jcredking"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681124395,"creation_date":1681124395,"answer_id":75976497,"question_id":75970748,"body_markdown":"For Image crop, you can use the below dependency. It&#39;s very simple and easy to use more useful I personally use it \r\n\r\n\r\n        implementation &#39;com.isseiaoki:simplecropview:1.1.8&#39;\r\n\r\n \r\n\r\n - For How To Implement this visit this on [GitHub here][1] \r\n\r\n    \r\n\r\n\r\n  [1]: https://github.com/igreenwood/SimpleCropView","title":"Android java: Crop image function not working","body":"<p>For Image crop, you can use the below dependency. It's very simple and easy to use more useful I personally use it</p>\n<pre><code>    implementation 'com.isseiaoki:simplecropview:1.1.8'\n</code></pre>\n<ul>\n<li>For How To Implement this visit this on <a href=\"https://github.com/igreenwood/SimpleCropView\" rel=\"nofollow noreferrer\">GitHub here</a></li>\n</ul>\n"}],"owner":{"account_id":25518433,"reputation":1,"user_id":21601999,"display_name":"Dylan Reik Salas Deza"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":201,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681124395,"creation_date":1681046202,"question_id":75970748,"body_markdown":"The function calls the name of the image then where it is going to be put then from where to where it is going to be cropped and to where but it doesn&#39;t seem to work correctly it doesn&#39;t execute it\r\n\r\n```\r\npublic void _cropImage(final ImageView _img, final String _nameImg, final double _x, final double _y, final double _x1, final double _y1) {\r\n\t\t    // Get the resource ID of the drawable image specified\r\n\t\t    int resId = getResources().getIdentifier(_nameImg, &quot;drawable&quot;, getPackageName());\r\n\t\t\r\n\t\t    // Decode the image resource into a Bitmap object\r\n\t\t    Bitmap originalBitmap = BitmapFactory.decodeResource(getResources(), resId);\r\n\t\t\r\n\t\t    // Calculate the scale factor to convert pixels to image coordinates\r\n\t\t    float scaleFactor = (float) originalBitmap.getWidth() / (float) _img.getWidth();\r\n\t\t\r\n\t\t    // Convert the clip dimensions from pixels to image coordinates\r\n\t\t    int x_1 = (int) (_x * scaleFactor);\r\n\t\t    int y_1 = (int) (_y * scaleFactor);\r\n\t\t    int x_2 = (int) ((_x + _x1) * scaleFactor);\r\n\t\t    int y_2 = (int) ((_y + _y1) * scaleFactor);\r\n\t\t\r\n\t\t    // Ensure that the crop dimensions are within the bounds of the original bitmap\r\n\t\t    x_1 = Math.max(x_1, 0);\r\n\t\t    y_1 = Math.max(y_1, 0);\r\n\t\t    x_2 = Math.min(x_2, originalBitmap.getWidth());\r\n\t\t    y_2 = Math.min(y_2, originalBitmap.getHeight());\r\n\t\t\r\n\t\t    // Create a new bitmap to hold the clipped region\r\n\t\t    Bitmap croppedBitmap = Bitmap.createBitmap(originalBitmap, x_1, y_1, x_2 - x_1, y_2 - y_1);\r\n\t\t\r\n\t\t    // Display the cropped bitmap in the ImageView\r\n\t\t    _img.setImageBitmap(croppedBitmap);\r\n\t}\r\n```\r\n\r\n\r\nThe function doesn&#39;t crop the image from x,y at x,y","title":"Android java: Crop image function not working","body":"<p>The function calls the name of the image then where it is going to be put then from where to where it is going to be cropped and to where but it doesn't seem to work correctly it doesn't execute it</p>\n<pre><code>public void _cropImage(final ImageView _img, final String _nameImg, final double _x, final double _y, final double _x1, final double _y1) {\n            // Get the resource ID of the drawable image specified\n            int resId = getResources().getIdentifier(_nameImg, &quot;drawable&quot;, getPackageName());\n        \n            // Decode the image resource into a Bitmap object\n            Bitmap originalBitmap = BitmapFactory.decodeResource(getResources(), resId);\n        \n            // Calculate the scale factor to convert pixels to image coordinates\n            float scaleFactor = (float) originalBitmap.getWidth() / (float) _img.getWidth();\n        \n            // Convert the clip dimensions from pixels to image coordinates\n            int x_1 = (int) (_x * scaleFactor);\n            int y_1 = (int) (_y * scaleFactor);\n            int x_2 = (int) ((_x + _x1) * scaleFactor);\n            int y_2 = (int) ((_y + _y1) * scaleFactor);\n        \n            // Ensure that the crop dimensions are within the bounds of the original bitmap\n            x_1 = Math.max(x_1, 0);\n            y_1 = Math.max(y_1, 0);\n            x_2 = Math.min(x_2, originalBitmap.getWidth());\n            y_2 = Math.min(y_2, originalBitmap.getHeight());\n        \n            // Create a new bitmap to hold the clipped region\n            Bitmap croppedBitmap = Bitmap.createBitmap(originalBitmap, x_1, y_1, x_2 - x_1, y_2 - y_1);\n        \n            // Display the cropped bitmap in the ImageView\n            _img.setImageBitmap(croppedBitmap);\n    }\n</code></pre>\n<p>The function doesn't crop the image from x,y at x,y</p>\n"},{"tags":["java","testng"],"answers":[{"tags":[],"owner":{"account_id":1288640,"reputation":8167,"user_id":1241193,"display_name":"Bob Dalgleish"},"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1405451698,"creation_date":1405451698,"answer_id":24766349,"question_id":24766147,"body_markdown":"Use a factory to create a repository. The repository stores &quot;interesting test state&quot; properties.\r\n\r\n      TestRepository tr = TestRepositoryFactory.getInstance();\r\n      ...\r\n      tr.store(&quot;test13.PKID&quot;, pkid.toString());\r\n\r\nand then in your subsequent code, repeat the call to the factory and then get the value:\r\n\r\n      String spkid = tr.get(&quot;test13.PKID&quot;);\r\n\r\n","title":"TestNG - sharing state between test classes","body":"<p>Use a factory to create a repository. The repository stores \"interesting test state\" properties.</p>\n\n<pre><code>  TestRepository tr = TestRepositoryFactory.getInstance();\n  ...\n  tr.store(\"test13.PKID\", pkid.toString());\n</code></pre>\n\n<p>and then in your subsequent code, repeat the call to the factory and then get the value:</p>\n\n<pre><code>  String spkid = tr.get(\"test13.PKID\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3034445,"reputation":315,"user_id":2572861,"accept_rate":62,"display_name":"Dmitry Glushonkov"},"down_vote_count":2,"up_vote_count":6,"is_accepted":false,"score":4,"last_activity_date":1470408315,"creation_date":1470408315,"answer_id":38792029,"question_id":24766147,"body_markdown":"Really Testng-y way to do this is to set ITestContext attribute with desired value and then get it from other test class.\r\n\r\nSet value:\r\n\r\n    @Test\r\n    public void setvaluetest(ITestContext context) {\r\n            String customerId = &quot;GDFg34fDF&quot;;\r\n            context.setAttribute(&quot;customerId&quot;, customerId);\r\n    }\r\n\r\nGet value:\r\n\r\n    @Test\r\n    public void getvaluetest(ITestContext context) {\r\n            String id = context.getAttribute(&quot;customerId&quot;);\r\n    }","title":"TestNG - sharing state between test classes","body":"<p>Really Testng-y way to do this is to set ITestContext attribute with desired value and then get it from other test class.</p>\n\n<p>Set value:</p>\n\n<pre><code>@Test\npublic void setvaluetest(ITestContext context) {\n        String customerId = \"GDFg34fDF\";\n        context.setAttribute(\"customerId\", customerId);\n}\n</code></pre>\n\n<p>Get value:</p>\n\n<pre><code>@Test\npublic void getvaluetest(ITestContext context) {\n        String id = context.getAttribute(\"customerId\");\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3191086,"reputation":2391,"user_id":2695298,"accept_rate":79,"display_name":"Ivan Gerasimenko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1522759457,"creation_date":1521552956,"answer_id":49385709,"question_id":24766147,"body_markdown":"Another way is to use means of object oriented programming.\r\n\r\nCommon structure of tests for example:\r\n\r\n - `TestBase.java` (parent class for all other test classes, has methods like @BeforeTest, @AfterSuite, etc.)\r\n  - `RegistrationTests.java` (extends TestBase, )\r\n  - `ShoppingTests.java` (extends TestBase)\r\n  - and `WhateverElseTests.java` (extends TestBase)\r\n\r\nSo `TestBase` has all shared data as static fields e.g. `Customer` object:\r\n\r\n    public class TestBase {\r\n    \r\n        protected static final BrowserManager bw = new BrowserManager();\r\n        protected static Customer customer;\r\n    \r\n        @BeforeSuite\r\n        public void initBrowser() {\r\n            bw.init();\r\n        }\r\n    \r\n        @AfterSuite\r\n        public void terminateBrowser() {\r\n            bw.terminate();\r\n        }\r\n    \r\n    }\r\n\r\nAnd access to `customer` in tests, e.g. `ShoppingTests.java`:\r\n\r\n    public class ShoppingTests extends TestBase {\r\n\r\n        @Test\r\n        public void doSomethingTest() {\r\n            \r\n            bw.navigateTo().shoppingPage();\r\n\r\n            bw.shoppingPreparationHelper().checkDisplayedName(customer.name);\r\n            ...\r\n\r\n**N.B.:** tests that share objects should go in a strict sequence (first - test that init object, then - test that uses object&#39;s data), so use `@Test(dependsOnMethods = &quot;someMethodTest&quot;)`. Otherwise you are in risk of NullPointerException for `customer`.\r\n\r\n**P.S.:** Object-oriented way has great advantage over `ITestContext` because you can pass any object(s) from test to test (also between classes), not just string attribute.","title":"TestNG - sharing state between test classes","body":"<p>Another way is to use means of object oriented programming.</p>\n\n<p>Common structure of tests for example:</p>\n\n<ul>\n<li><code>TestBase.java</code> (parent class for all other test classes, has methods like @BeforeTest, @AfterSuite, etc.)\n\n<ul>\n<li><code>RegistrationTests.java</code> (extends TestBase, )</li>\n<li><code>ShoppingTests.java</code> (extends TestBase)</li>\n<li>and <code>WhateverElseTests.java</code> (extends TestBase)</li>\n</ul></li>\n</ul>\n\n<p>So <code>TestBase</code> has all shared data as static fields e.g. <code>Customer</code> object:</p>\n\n<pre><code>public class TestBase {\n\n    protected static final BrowserManager bw = new BrowserManager();\n    protected static Customer customer;\n\n    @BeforeSuite\n    public void initBrowser() {\n        bw.init();\n    }\n\n    @AfterSuite\n    public void terminateBrowser() {\n        bw.terminate();\n    }\n\n}\n</code></pre>\n\n<p>And access to <code>customer</code> in tests, e.g. <code>ShoppingTests.java</code>:</p>\n\n<pre><code>public class ShoppingTests extends TestBase {\n\n    @Test\n    public void doSomethingTest() {\n\n        bw.navigateTo().shoppingPage();\n\n        bw.shoppingPreparationHelper().checkDisplayedName(customer.name);\n        ...\n</code></pre>\n\n<p><strong>N.B.:</strong> tests that share objects should go in a strict sequence (first - test that init object, then - test that uses object's data), so use <code>@Test(dependsOnMethods = \"someMethodTest\")</code>. Otherwise you are in risk of NullPointerException for <code>customer</code>.</p>\n\n<p><strong>P.S.:</strong> Object-oriented way has great advantage over <code>ITestContext</code> because you can pass any object(s) from test to test (also between classes), not just string attribute.</p>\n"},{"tags":[],"owner":{"account_id":2729575,"reputation":536,"user_id":2353652,"display_name":"Sam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1550106926,"creation_date":1550106926,"answer_id":54681845,"question_id":24766147,"body_markdown":"\r\nAs we know from TestNG JavaDoc, ITestContext defines a test context which contains all the information for a given test run. An instance of this context is passed to the test listeners so they can query information about their environment.\r\nSo we can share generated data from one class in this test with another class in this test.\r\n\r\nProducer.java\r\n\r\n    public List&lt;String&gt; groupIds = ...;\r\n    @AfterClass(alwaysRun = true)\r\n    public void reserveGroupIds(ITestContext ctx) {\r\n        ctx.setAttribute(GROUPS_ATTR, groupIds);\r\n    }\r\n\r\nConsumer.java\r\n\r\n    public List&lt;String&gt; groupIds;\r\n    @BeforeClass(alwaysRun = true)\r\n    public void fetchGroupIds(ITestContext ctx) {\r\n        groupIds = (List&lt;String&gt;) ctx.getAttribute(Producer.GROUPS_ATTR);\r\n    }\r\n\r\nmySuite.xml\r\n\r\n    ...\r\n    &lt;test&gt;\r\n      &lt;classes&gt;\r\n        &lt;class name= &quot;Producer&quot;/&gt;\r\n        &lt;class name= &quot;Consumer&quot;/&gt;\r\n      &lt;/classes&gt;\r\n    &lt;/test&gt;\r\n    ...\r\n","title":"TestNG - sharing state between test classes","body":"<p>As we know from TestNG JavaDoc, ITestContext defines a test context which contains all the information for a given test run. An instance of this context is passed to the test listeners so they can query information about their environment.\nSo we can share generated data from one class in this test with another class in this test.</p>\n\n<p>Producer.java</p>\n\n<pre><code>public List&lt;String&gt; groupIds = ...;\n@AfterClass(alwaysRun = true)\npublic void reserveGroupIds(ITestContext ctx) {\n    ctx.setAttribute(GROUPS_ATTR, groupIds);\n}\n</code></pre>\n\n<p>Consumer.java</p>\n\n<pre><code>public List&lt;String&gt; groupIds;\n@BeforeClass(alwaysRun = true)\npublic void fetchGroupIds(ITestContext ctx) {\n    groupIds = (List&lt;String&gt;) ctx.getAttribute(Producer.GROUPS_ATTR);\n}\n</code></pre>\n\n<p>mySuite.xml</p>\n\n<pre><code>...\n&lt;test&gt;\n  &lt;classes&gt;\n    &lt;class name= \"Producer\"/&gt;\n    &lt;class name= \"Consumer\"/&gt;\n  &lt;/classes&gt;\n&lt;/test&gt;\n...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3106827,"reputation":762,"user_id":2629440,"display_name":"Vivek Goel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681124331,"creation_date":1681124331,"answer_id":75976490,"question_id":24766147,"body_markdown":"ITestContext will work fine if both the test cases are in same test scope. If we have to share data between tests in different test context but same suite then we have to set the data in suite context.\r\n\r\n    public class SharingDataSuiteLevelISuiteFirstTest {\r\n    \t\r\n    \t// Passing ITestContext as a parameter to @Test method to use it. \r\n    \t@Test\r\n    \tpublic void generateData(ITestContext context)\r\n    \t{\r\n    \t\tString firstName = &quot;Amod&quot;;\r\n    \t\t// Get the suite\r\n    \t\tISuite suite = context.getSuite();\r\n    \t\t// Setting an attribute with name and its value at suite level in stead of test level\r\n    \t\tsuite.setAttribute(&quot;FirstName&quot;, firstName);\r\n    \t}\r\n    }\r\n\r\n    public class SharingDataSuiteLevelISuiteSecondTest {\r\n    \t\r\n    \t// Passing ITestContext as a parameter to @Test method to use it. \r\n    \t@Test\r\n    \tpublic void useData(ITestContext context)\r\n    \t{\r\n    \t\tString lastName = &quot;Mahajan&quot;;\r\n    \t\t// Retrieving attribute value set in ITestContext\r\n    \t\tISuite suite = context.getSuite();\r\n    \t\tString FN = (String) suite.getAttribute(&quot;FirstName&quot;);\r\n    \t\tString fullName = FN +&quot; &quot;+lastName;\r\n    \t\tSystem.out.println(&quot;Full Name is : &quot;+fullName);\r\n    \t}\r\n    }\r\n\r\nMore explanation to the above problem can be found here: http://makeseleniumeasy.com/2020/01/06/testng-tutorials-68-sharing-data-between-tests-in-a-suite-using-isuite-itestcontext/\r\n\r\n","title":"TestNG - sharing state between test classes","body":"<p>ITestContext will work fine if both the test cases are in same test scope. If we have to share data between tests in different test context but same suite then we have to set the data in suite context.</p>\n<pre><code>public class SharingDataSuiteLevelISuiteFirstTest {\n    \n    // Passing ITestContext as a parameter to @Test method to use it. \n    @Test\n    public void generateData(ITestContext context)\n    {\n        String firstName = &quot;Amod&quot;;\n        // Get the suite\n        ISuite suite = context.getSuite();\n        // Setting an attribute with name and its value at suite level in stead of test level\n        suite.setAttribute(&quot;FirstName&quot;, firstName);\n    }\n}\n\npublic class SharingDataSuiteLevelISuiteSecondTest {\n    \n    // Passing ITestContext as a parameter to @Test method to use it. \n    @Test\n    public void useData(ITestContext context)\n    {\n        String lastName = &quot;Mahajan&quot;;\n        // Retrieving attribute value set in ITestContext\n        ISuite suite = context.getSuite();\n        String FN = (String) suite.getAttribute(&quot;FirstName&quot;);\n        String fullName = FN +&quot; &quot;+lastName;\n        System.out.println(&quot;Full Name is : &quot;+fullName);\n    }\n}\n</code></pre>\n<p>More explanation to the above problem can be found here: <a href=\"http://makeseleniumeasy.com/2020/01/06/testng-tutorials-68-sharing-data-between-tests-in-a-suite-using-isuite-itestcontext/\" rel=\"nofollow noreferrer\">http://makeseleniumeasy.com/2020/01/06/testng-tutorials-68-sharing-data-between-tests-in-a-suite-using-isuite-itestcontext/</a></p>\n"}],"owner":{"account_id":1005202,"reputation":1197,"user_id":1019159,"accept_rate":45,"display_name":"ricb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6097,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":24766349,"answer_count":5,"score":6,"last_activity_date":1681124331,"creation_date":1405451059,"question_id":24766147,"body_markdown":"I have a [tag:TestNG] suite of test classes that I am running via a testng.xml file. This works fine. All tests are run serially, so no parallel-execution hurdles.\r\n\r\nMy goal now is to take state that was generated by the test methods in one test class (e.g., a `customerId` primary key value generated by a database insert) and pass it along to another test class, so that the test methods in that second class can take further action based on that shared state (e.g., look up the just-inserted customer using the `customerId` value from the first class).\r\n\r\nIt&#39;s easy to share state between test methods in a single class, of course, via class member variables, but I don&#39;t see how to share it across test classes.","title":"TestNG - sharing state between test classes","body":"<p>I have a <a href=\"/questions/tagged/testng\" class=\"post-tag\" title=\"show questions tagged &#39;testng&#39;\" rel=\"tag\">testng</a> suite of test classes that I am running via a testng.xml file. This works fine. All tests are run serially, so no parallel-execution hurdles.</p>\n\n<p>My goal now is to take state that was generated by the test methods in one test class (e.g., a <code>customerId</code> primary key value generated by a database insert) and pass it along to another test class, so that the test methods in that second class can take further action based on that shared state (e.g., look up the just-inserted customer using the <code>customerId</code> value from the first class).</p>\n\n<p>It's easy to share state between test methods in a single class, of course, via class member variables, but I don't see how to share it across test classes.</p>\n"},{"tags":["java","jsoup","pretty-print"],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681123711,"creation_date":1576719270,"answer_id":59402227,"question_id":59367234,"body_markdown":"What I ended up doing, because I got no answer here so far and found no better solution either, is horrible, but it works:\r\n\r\n  1. **Parse** + clean document\r\n  2. Get (via `toString()`) + preserve pretty-printed HTML content\r\n  3. Deactivate pretty-printing, then get (via `toString()`) + **re-parse** content in original formatting into temporary document\r\n  4. **Re-parse** pretty-printed content from step 2 and assign to original document (overwriting it), then deactivate pretty-printing for the newly assigned document\r\n  5. Replace content for which pretty-printing would destroy formatting (e.g. elements with CSS `white-space: pre-wrap`) by preserved original from step 2 via iterating over both documents in parallel via something like\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    for (int i = 0; i &lt; elementsToBeFixed.size(); i++) \r\n      elementsToBeFixed.get(i).replaceWith(originalElements.get(i));\r\n\r\nConclusion: This is ugly because the same document which has already been parsed + cleaned up before needs to be re-parsed two more times, i.e. we have a total of 3 `Jsoup.parse(..)` calls. But - it works. `:-/`\r\n\r\nI am still waiting for a better answer here, though.","title":"Selectively deactivate pretty-print in jsoup for certain regions in a document","body":"<p>What I ended up doing, because I got no answer here so far and found no better solution either, is horrible, but it works:</p>\n<ol>\n<li><strong>Parse</strong> + clean document</li>\n<li>Get (via <code>toString()</code>) + preserve pretty-printed HTML content</li>\n<li>Deactivate pretty-printing, then get (via <code>toString()</code>) + <strong>re-parse</strong> content in original formatting into temporary document</li>\n<li><strong>Re-parse</strong> pretty-printed content from step 2 and assign to original document (overwriting it), then deactivate pretty-printing for the newly assigned document</li>\n<li>Replace content for which pretty-printing would destroy formatting (e.g. elements with CSS <code>white-space: pre-wrap</code>) by preserved original from step 2 via iterating over both documents in parallel via something like</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>for (int i = 0; i &lt; elementsToBeFixed.size(); i++) \n  elementsToBeFixed.get(i).replaceWith(originalElements.get(i));\n</code></pre>\n<p>Conclusion: This is ugly because the same document which has already been parsed + cleaned up before needs to be re-parsed two more times, i.e. we have a total of 3 <code>Jsoup.parse(..)</code> calls. But - it works. <code>:-/</code></p>\n<p>I am still waiting for a better answer here, though.</p>\n"}],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":480,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":59402227,"answer_count":1,"score":2,"last_activity_date":1681123711,"creation_date":1576553389,"question_id":59367234,"body_markdown":"When cleaning HTML documents with _**jsoup**_ I like the fact that it automatically applies pretty-printing. I know I can deactivate it on a per-document basis, but I like to apply it for most of the document with the exception of certain problematic regions in which jsoup does not do a good job.\r\n\r\nAn example would be `DIV` tags with [CSS specifying `white-space: pre-wrap;`](https://css-tricks.com/almanac/properties/w/whitespace/), i.e. semantically they behave like `PRE` tags, which means that the browser will be sensitive to line feeds and other whitespace (indentation). It gets worse if inside those regions there are more tags like `BR`, `SPAN` etc. because pretty-printing is applied and destroys the intended formatting of those regions.\r\n\r\nSo instead of deactivating pretty-printing completely for the whole HTML document, I like to selectively deactivate it whenever the parser meets something like `div.listing` (yes, I know the CSS class name of the problematic region) and retain the original HTML there. How would I go about implementing this?\r\n\r\n**Update:** I forgot to mention that I print the cleaned document using \r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    output.print(document);\r\n\r\nwhere `output` is a `PrintStream` and `document` is the jsoup `Document` instance. So if there is a better way to output the document, I am also open for suggestions.","title":"Selectively deactivate pretty-print in jsoup for certain regions in a document","body":"<p>When cleaning HTML documents with <em><strong>jsoup</strong></em> I like the fact that it automatically applies pretty-printing. I know I can deactivate it on a per-document basis, but I like to apply it for most of the document with the exception of certain problematic regions in which jsoup does not do a good job.</p>\n\n<p>An example would be <code>DIV</code> tags with <a href=\"https://css-tricks.com/almanac/properties/w/whitespace/\" rel=\"nofollow noreferrer\">CSS specifying <code>white-space: pre-wrap;</code></a>, i.e. semantically they behave like <code>PRE</code> tags, which means that the browser will be sensitive to line feeds and other whitespace (indentation). It gets worse if inside those regions there are more tags like <code>BR</code>, <code>SPAN</code> etc. because pretty-printing is applied and destroys the intended formatting of those regions.</p>\n\n<p>So instead of deactivating pretty-printing completely for the whole HTML document, I like to selectively deactivate it whenever the parser meets something like <code>div.listing</code> (yes, I know the CSS class name of the problematic region) and retain the original HTML there. How would I go about implementing this?</p>\n\n<p><strong>Update:</strong> I forgot to mention that I print the cleaned document using </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>output.print(document);\n</code></pre>\n\n<p>where <code>output</code> is a <code>PrintStream</code> and <code>document</code> is the jsoup <code>Document</code> instance. So if there is a better way to output the document, I am also open for suggestions.</p>\n"},{"tags":["java","rest","ssl","grizzly"],"comments":[{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1448038591,"post_id":33831480,"comment_id":55429233,"body_markdown":"You only need the client cert in the server trust store for mutual (two way) ssl. If the server cert is self signed, what you will need to do is add the server cert to the client trust store","body":"You only need the client cert in the server trust store for mutual (two way) ssl. If the server cert is self signed, what you will need to do is add the server cert to the client trust store"},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":1,"creation_date":1448039269,"post_id":33831480,"comment_id":55429647,"body_markdown":"Take a look at [this example](https://github.com/jersey/jersey/tree/master/examples/https-clientserver-grizzly)","body":"Take a look at <a href=\"https://github.com/jersey/jersey/tree/master/examples/https-clientserver-grizzly\" rel=\"nofollow noreferrer\">this example</a>"},{"owner":{"account_id":293805,"reputation":233,"user_id":3426462,"accept_rate":20,"display_name":"jmsimpson68"},"score":0,"creation_date":1448041526,"post_id":33831480,"comment_id":55430927,"body_markdown":"@peetskillet - that is the example I started with.  The only difference is that I&#39;m not using the jersey-container-grizzly2-servlet setup.  Just using the regular jersey-container-grizzly2-http version as a dependency.  I don&#39;t think that would make any difference.","body":"@peetskillet - that is the example I started with.  The only difference is that I&#39;m not using the jersey-container-grizzly2-servlet setup.  Just using the regular jersey-container-grizzly2-http version as a dependency.  I don&#39;t think that would make any difference."},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1448041869,"post_id":33831480,"comment_id":55431101,"body_markdown":"Are you using the Jersey client or a different client? Did you follow the instructions to create the stores and imports? The example as is works for me (also create new stores from the instructions). You can see the Jersey client set up in the test case. I don&#39;t think changing from the servlet to http config should make a different, though I didn&#39;t test","body":"Are you using the Jersey client or a different client? Did you follow the instructions to create the stores and imports? The example as is works for me (also create new stores from the instructions). You can see the Jersey client set up in the test case. I don&#39;t think changing from the servlet to http config should make a different, though I didn&#39;t test"},{"owner":{"account_id":293805,"reputation":233,"user_id":3426462,"accept_rate":20,"display_name":"jmsimpson68"},"score":0,"creation_date":1448042565,"post_id":33831480,"comment_id":55431482,"body_markdown":"Right now I&#39;m just using a web browser (Safari, Firefox, Chrome) to attempt to access the resource.  No luck with them.  It should be setup to allow simple 1-way SSL with a browser.  I&#39;m not using a special client.","body":"Right now I&#39;m just using a web browser (Safari, Firefox, Chrome) to attempt to access the resource.  No luck with them.  It should be setup to allow simple 1-way SSL with a browser.  I&#39;m not using a special client."},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1448042725,"post_id":33831480,"comment_id":55431572,"body_markdown":"Does it at least show you something asking if you want to trust the cert when testing in the browser?","body":"Does it at least show you something asking if you want to trust the cert when testing in the browser?"},{"owner":{"account_id":293805,"reputation":233,"user_id":3426462,"accept_rate":20,"display_name":"jmsimpson68"},"score":0,"creation_date":1448043407,"post_id":33831480,"comment_id":55431931,"body_markdown":"Unfortunately, no.  That was what I was expecting (the &quot;get me out of here&quot; dialog).  It just fails in the handshake before it gets there and the browser tell me that the connection was unsecure and interrupted.","body":"Unfortunately, no.  That was what I was expecting (the &quot;get me out of here&quot; dialog).  It just fails in the handshake before it gets there and the browser tell me that the connection was unsecure and interrupted."},{"owner":{"account_id":293805,"reputation":233,"user_id":3426462,"accept_rate":20,"display_name":"jmsimpson68"},"score":0,"creation_date":1448044621,"post_id":33831480,"comment_id":55432596,"body_markdown":"Let us [continue this discussion in chat](http://chat.stackoverflow.com/rooms/95735/discussion-between-jms-and-peeskillet).","body":"Let us <a href=\"http://chat.stackoverflow.com/rooms/95735/discussion-between-jms-and-peeskillet\">continue this discussion in chat</a>."},{"owner":{"account_id":9111310,"reputation":871,"user_id":6779950,"display_name":"Steve Owens"},"score":0,"creation_date":1520366975,"post_id":33831480,"comment_id":85283467,"body_markdown":"I sure would have loved to been in on that chat, I am having the same issue with my configuration.  Just hangs waiting for the certs.","body":"I sure would have loved to been in on that chat, I am having the same issue with my configuration.  Just hangs waiting for the certs."},{"owner":{"account_id":467725,"reputation":19389,"user_id":873282,"accept_rate":55,"display_name":"koppor"},"score":0,"creation_date":1681123047,"post_id":33831480,"comment_id":134001658,"body_markdown":"Similar question: https://stackoverflow.com/q/21098105/873282","body":"Similar question: <a href=\"https://stackoverflow.com/q/21098105/873282\">stackoverflow.com/q/21098105/873282</a>"}],"answers":[{"tags":[],"owner":{"account_id":293805,"reputation":233,"user_id":3426462,"accept_rate":20,"display_name":"jmsimpson68"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1448046706,"creation_date":1448046706,"answer_id":33834327,"question_id":33831480,"body_markdown":"I have seen this type of handshake issue come up in other posts while trying to run this issue to ground.  In all of these handshake posts, the server key algorithm was never discussed - I wish it had been.  It would have saved me a couple of hours.  The issue that caused the above errors stemmed from assuming that the keystores that were created as part of the Jersey sample project would work.  The server key was the problem.\r\n\r\nThe sample server certs are generated using the DSA algorithm.  Apparently this is an issue.\r\n\r\nI recreated the server keys using a RSA algorithm and 2048 bit strength.  I restarted the server and the everything started to work like one would expect.  \r\n\r\nThe error was that I assumed that the &quot;sample&quot; keys would work.  Oops.","title":"How to setup basic Jersey/Grizzly 2.21 SSL startup configuration","body":"<p>I have seen this type of handshake issue come up in other posts while trying to run this issue to ground.  In all of these handshake posts, the server key algorithm was never discussed - I wish it had been.  It would have saved me a couple of hours.  The issue that caused the above errors stemmed from assuming that the keystores that were created as part of the Jersey sample project would work.  The server key was the problem.</p>\n\n<p>The sample server certs are generated using the DSA algorithm.  Apparently this is an issue.</p>\n\n<p>I recreated the server keys using a RSA algorithm and 2048 bit strength.  I restarted the server and the everything started to work like one would expect.  </p>\n\n<p>The error was that I assumed that the \"sample\" keys would work.  Oops.</p>\n"},{"tags":[],"owner":{"account_id":5509958,"reputation":59,"user_id":4376572,"display_name":"Steve Low"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1463015828,"creation_date":1463015828,"answer_id":37175710,"question_id":33831480,"body_markdown":"To add on top of JMS comment, his answer solve my problem too .\r\nHere is the command i used to generate the RSA certificate .\r\n\r\n    keytool -genkey -keystore ./keystore_client -alias clientKey -keyalg RSA -keypass changeit -storepass changeit -dname &quot;CN=Client, OU=Jersey, O=changeit, L=KL, ST=SEL, C=MY&quot;\r\n    keytool -export -alias clientKey -storepass changeit -keystore ./keystore_client -file ./client.cert\r\n    keytool -import -alias clientCert -file ./client.cert -storepass changeit -keystore ./truststore_server\r\n    \r\n    \r\n    keytool -genkey -keystore ./keystore_server -alias serverKey -keyalg RSA -keyalg RSA -keypass changeit -storepass changeit -dname &quot;CN=changeit, OU=Jersey, O=changeit, L=KL, ST=SEL, C=MY&quot;\r\n    keytool -export -alias serverKey -storepass changeit -keystore ./keystore_server -file ./server.cert\r\n    keytool -import -alias serverCert -file ./server.cert -storepass changeit -keystore ./truststore_client","title":"How to setup basic Jersey/Grizzly 2.21 SSL startup configuration","body":"<p>To add on top of JMS comment, his answer solve my problem too .\nHere is the command i used to generate the RSA certificate .</p>\n\n<pre><code>keytool -genkey -keystore ./keystore_client -alias clientKey -keyalg RSA -keypass changeit -storepass changeit -dname \"CN=Client, OU=Jersey, O=changeit, L=KL, ST=SEL, C=MY\"\nkeytool -export -alias clientKey -storepass changeit -keystore ./keystore_client -file ./client.cert\nkeytool -import -alias clientCert -file ./client.cert -storepass changeit -keystore ./truststore_server\n\n\nkeytool -genkey -keystore ./keystore_server -alias serverKey -keyalg RSA -keyalg RSA -keypass changeit -storepass changeit -dname \"CN=changeit, OU=Jersey, O=changeit, L=KL, ST=SEL, C=MY\"\nkeytool -export -alias serverKey -storepass changeit -keystore ./keystore_server -file ./server.cert\nkeytool -import -alias serverCert -file ./server.cert -storepass changeit -keystore ./truststore_client\n</code></pre>\n"},{"tags":[],"owner":{"account_id":467725,"reputation":19389,"user_id":873282,"accept_rate":55,"display_name":"koppor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681123371,"creation_date":1681123371,"answer_id":75976392,"question_id":33831480,"body_markdown":"The SSL certificate needs an `AltName`. See &lt;https://stackoverflow.com/a/42917227/873282&gt; for details.\r\n\r\nUse [`mkcert`](https://github.com/FiloSottile/mkcert) to generate a valid SSL certificate (based on &lt;https://stackoverflow.com/a/57511038/873282&gt;)\r\n\r\n1. As admin `choco install mkcert`\r\n2. As admin: `mkcert -install`\r\n3. `cd \\temp`\r\n4. `mkcert -pkcs12 app localhost 127.0.0.1 ::1`\r\n5. Rename the file to `server.p12`\r\n\r\nIn Java, you can use that file as keystore:\r\n\r\n```java\r\n        SSLContextConfigurator sslContextConfig = new SSLContextConfigurator();\r\n        sslContextConfig.setKeyStoreFile(Path.of(&quot;c:\\\\temp\\\\server.p12&quot;).toString());\r\n        sslContextConfig.setKeyStorePass(&quot;changeit&quot;);\r\n        sslContextConfig.createSSLContext();\r\n```","title":"How to setup basic Jersey/Grizzly 2.21 SSL startup configuration","body":"<p>The SSL certificate needs an <code>AltName</code>. See <a href=\"https://stackoverflow.com/a/42917227/873282\">https://stackoverflow.com/a/42917227/873282</a> for details.</p>\n<p>Use <a href=\"https://github.com/FiloSottile/mkcert\" rel=\"nofollow noreferrer\"><code>mkcert</code></a> to generate a valid SSL certificate (based on <a href=\"https://stackoverflow.com/a/57511038/873282\">https://stackoverflow.com/a/57511038/873282</a>)</p>\n<ol>\n<li>As admin <code>choco install mkcert</code></li>\n<li>As admin: <code>mkcert -install</code></li>\n<li><code>cd \\temp</code></li>\n<li><code>mkcert -pkcs12 app localhost 127.0.0.1 ::1</code></li>\n<li>Rename the file to <code>server.p12</code></li>\n</ol>\n<p>In Java, you can use that file as keystore:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        SSLContextConfigurator sslContextConfig = new SSLContextConfigurator();\n        sslContextConfig.setKeyStoreFile(Path.of(&quot;c:\\\\temp\\\\server.p12&quot;).toString());\n        sslContextConfig.setKeyStorePass(&quot;changeit&quot;);\n        sslContextConfig.createSSLContext();\n</code></pre>\n"}],"owner":{"account_id":293805,"reputation":233,"user_id":3426462,"accept_rate":20,"display_name":"jmsimpson68"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1945,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1681123371,"creation_date":1448036805,"question_id":33831480,"body_markdown":"I&#39;m trying to get a very basic Grizzly server up and running to allow for one-way SSL (HTTPS) connections to access jax-rs REST services.  Eventually I want two-way SSL security.\r\n\r\nI&#39;ve gone through many of the examples and I just can&#39;t get anything to work.  I keep running into a SSL Handshake error.  Clearly I must be doing something stupid.  Any help is appreciated.\r\n\r\nHere is my code to start my embedded Grizzly server using the Jersey wrapper classes:\r\n\r\n\r\n\r\n    public static HttpServer startHttpsServer(URI listenerURI) throws IOException  {\r\n      ResourceConfig resourceConfig = new ResourceConfig().packages(&quot;ws.argo.experiment.ssl&quot;);\r\n    \r\n      // First I tried this configuration using the certs from the Jersey sample code\r\n      // Grizzly ssl configuration\r\n      SSLContextConfigurator sslContext = new SSLContextConfigurator();\r\n    \r\n      // set up security context\r\n      sslContext.setKeyStoreFile(&quot;./src/main/resources/keystore_server&quot;); // contains server keypair\r\n      sslContext.setKeyStorePass(&quot;asdfgh&quot;);\r\n      sslContext.setTrustStoreFile(&quot;./src/main/resources/truststore_server&quot;); // contains client certificate\r\n      sslContext.setTrustStorePass(&quot;asdfgh&quot;);\r\n       \r\n      // Then I tried just using a default config - didn&#39;t work either\r\n      //    sslContext = SSLContextConfigurator.DEFAULT_CONFIG;\r\n    \r\n    \r\n      if (!sslContext.validateConfiguration(true)) {\r\n        LOGGER.severe(&quot;Context is not valid&quot;);\r\n      \r\n      }\r\n    \r\n      LOGGER.finer(&quot;Starting Jersey-Grizzly2 JAX-RS secure server...&quot;);\r\n      HttpServer httpServer; //=   GrizzlyHttpServerFactory.createHttpServer(listenerURI, resourceConfig, false);\r\n    \r\n    \r\n      httpServer= GrizzlyHttpServerFactory.createHttpServer(\r\n          listenerURI,\r\n          resourceConfig,\r\n          true,\r\n          new   SSLEngineConfigurator(sslContext).setClientMode(false).setNeedClientAuth(false)\r\n          );\r\n    \r\n    \r\n    \r\n      httpServer.getServerConfiguration().setName(&quot;Test HTTPS Server&quot;);\r\n      httpServer.start();\r\n      LOGGER.info(&quot;Started Jersey-Grizzly2 JAX-RS secure server.&quot;);\r\n    \r\n      return httpServer;\r\n    }\r\n\r\nI also tried replaced SSLEngineConfigurator(sslContext).setClientMode(false).setNeedClientAuth(false)  with null to see if that would help.  Nope.\r\n\r\nI always get the following error:\r\n\r\n    grizzly-nio-kernel(3) SelectorRunner, fatal error: 40: no cipher suites in common\r\n    javax.net.ssl.SSLHandshakeException: no cipher suites in common\r\n    %% Invalidated:  [Session-2, SSL_NULL_WITH_NULL_NULL]\r\n    grizzly-nio-kernel(3) SelectorRunner, SEND TLSv1.2 ALERT:  fatal, description = handshake_failure\r\n    grizzly-nio-kernel(3) SelectorRunner, WRITE: TLSv1.2 Alert, length = 2\r\n    grizzly-nio-kernel(3) SelectorRunner, fatal: engine already closed.  Rethrowing javax.net.ssl.SSLHandshakeException: no cipher suites in common\r\n\r\n","title":"How to setup basic Jersey/Grizzly 2.21 SSL startup configuration","body":"<p>I'm trying to get a very basic Grizzly server up and running to allow for one-way SSL (HTTPS) connections to access jax-rs REST services.  Eventually I want two-way SSL security.</p>\n\n<p>I've gone through many of the examples and I just can't get anything to work.  I keep running into a SSL Handshake error.  Clearly I must be doing something stupid.  Any help is appreciated.</p>\n\n<p>Here is my code to start my embedded Grizzly server using the Jersey wrapper classes:</p>\n\n<pre><code>public static HttpServer startHttpsServer(URI listenerURI) throws IOException  {\n  ResourceConfig resourceConfig = new ResourceConfig().packages(\"ws.argo.experiment.ssl\");\n\n  // First I tried this configuration using the certs from the Jersey sample code\n  // Grizzly ssl configuration\n  SSLContextConfigurator sslContext = new SSLContextConfigurator();\n\n  // set up security context\n  sslContext.setKeyStoreFile(\"./src/main/resources/keystore_server\"); // contains server keypair\n  sslContext.setKeyStorePass(\"asdfgh\");\n  sslContext.setTrustStoreFile(\"./src/main/resources/truststore_server\"); // contains client certificate\n  sslContext.setTrustStorePass(\"asdfgh\");\n\n  // Then I tried just using a default config - didn't work either\n  //    sslContext = SSLContextConfigurator.DEFAULT_CONFIG;\n\n\n  if (!sslContext.validateConfiguration(true)) {\n    LOGGER.severe(\"Context is not valid\");\n\n  }\n\n  LOGGER.finer(\"Starting Jersey-Grizzly2 JAX-RS secure server...\");\n  HttpServer httpServer; //=   GrizzlyHttpServerFactory.createHttpServer(listenerURI, resourceConfig, false);\n\n\n  httpServer= GrizzlyHttpServerFactory.createHttpServer(\n      listenerURI,\n      resourceConfig,\n      true,\n      new   SSLEngineConfigurator(sslContext).setClientMode(false).setNeedClientAuth(false)\n      );\n\n\n\n  httpServer.getServerConfiguration().setName(\"Test HTTPS Server\");\n  httpServer.start();\n  LOGGER.info(\"Started Jersey-Grizzly2 JAX-RS secure server.\");\n\n  return httpServer;\n}\n</code></pre>\n\n<p>I also tried replaced SSLEngineConfigurator(sslContext).setClientMode(false).setNeedClientAuth(false)  with null to see if that would help.  Nope.</p>\n\n<p>I always get the following error:</p>\n\n<pre><code>grizzly-nio-kernel(3) SelectorRunner, fatal error: 40: no cipher suites in common\njavax.net.ssl.SSLHandshakeException: no cipher suites in common\n%% Invalidated:  [Session-2, SSL_NULL_WITH_NULL_NULL]\ngrizzly-nio-kernel(3) SelectorRunner, SEND TLSv1.2 ALERT:  fatal, description = handshake_failure\ngrizzly-nio-kernel(3) SelectorRunner, WRITE: TLSv1.2 Alert, length = 2\ngrizzly-nio-kernel(3) SelectorRunner, fatal: engine already closed.  Rethrowing javax.net.ssl.SSLHandshakeException: no cipher suites in common\n</code></pre>\n"},{"tags":["java","opencv","cmake"],"owner":{"account_id":17784177,"reputation":47,"user_id":12914645,"display_name":"Alyona"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1681123076,"creation_date":1680854205,"question_id":75956530,"body_markdown":"I develop an Android application that uses face recognition. But the standard library does not contain the org.opencv.face package. \r\n\r\nAs I found out, it needs to be generated from OpenCV Contrib using cmake. I used the following command to do this. \r\n\r\n```\r\ncmake -D CMAKE_BUILD_TYPE=Release -D OPENCV_EXTRA_MODULES_PATH=&lt;path to opencv_contrib&gt; &lt;opencv_source_directory&gt;\r\n```\r\n\r\nBut there is no Java code in the generated files. \r\n\r\nThe console displays the following output. \r\n\r\n```\r\n-- Java:\r\n-- ant:                         NO.\r\n-- JNI:                         C:/Program Files/Java/jdk-17/include C:/Program Files/Java/jdk-17/include/win32 C:/Program Files/Java/jdk-17/include\r\n-- Java wrappers:               NO\r\n-- Java tests:                  NO\r\n```\r\n\r\n\r\n\r\n\r\n\r\nI tried adding the following parameters to the command.\r\n\r\n```\r\n-D BUILD_opencv_java=ON\r\n-D WITH_JAVA=ON\r\n```\r\n\r\nBut nothing changes. ","title":"Generating additional OpenCV libraries for Java using cmake","body":"<p>I develop an Android application that uses face recognition. But the standard library does not contain the org.opencv.face package.</p>\n<p>As I found out, it needs to be generated from OpenCV Contrib using cmake. I used the following command to do this.</p>\n<pre><code>cmake -D CMAKE_BUILD_TYPE=Release -D OPENCV_EXTRA_MODULES_PATH=&lt;path to opencv_contrib&gt; &lt;opencv_source_directory&gt;\n</code></pre>\n<p>But there is no Java code in the generated files.</p>\n<p>The console displays the following output.</p>\n<pre><code>-- Java:\n-- ant:                         NO.\n-- JNI:                         C:/Program Files/Java/jdk-17/include C:/Program Files/Java/jdk-17/include/win32 C:/Program Files/Java/jdk-17/include\n-- Java wrappers:               NO\n-- Java tests:                  NO\n</code></pre>\n<p>I tried adding the following parameters to the command.</p>\n<pre><code>-D BUILD_opencv_java=ON\n-D WITH_JAVA=ON\n</code></pre>\n<p>But nothing changes.</p>\n"},{"tags":["java","java-11","lib",".so"],"comments":[{"owner":{"account_id":7258992,"reputation":2411,"user_id":5536516,"accept_rate":86,"display_name":"nyg"},"score":0,"creation_date":1691328451,"post_id":75976241,"comment_id":135473952,"body_markdown":"“_Based on java official documentation, Agent_OnAttach is present in libmanagement_agent.so._” Do you have a link? Looking at the [source code](https://github.com/openjdk/jdk/blob/jdk-11%2B28/src/jdk.management.agent/unix/native/libmanagement_agent/FileSystemImpl.c) `Agent_OnAttach` is not present.","body":"“<i>Based on java official documentation, Agent_OnAttach is present in libmanagement_agent.so.</i>” Do you have a link? Looking at the <a href=\"https://github.com/openjdk/jdk/blob/jdk-11%2B28/src/jdk.management.agent/unix/native/libmanagement_agent/FileSystemImpl.c\" rel=\"nofollow noreferrer\">source code</a> <code>Agent_OnAttach</code> is not present."}],"owner":{"account_id":28262251,"reputation":1,"user_id":21606747,"display_name":"user1234"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681122773,"creation_date":1681122043,"question_id":75976241,"body_markdown":"**QUESTION-1**\r\n\r\nI&#39;m trying to load the management_agent (libmanagement_agent.so library) into the jvm to set gc compilation vm argument on runtime.\r\nThis is my code snippet \r\n\r\n```\r\nlong pid = getProcessId();\r\nVirtualMachine vm = VirtualMachine.attach(Long.toString(pid));\r\nvm = VirtualMachine.attach(Long.toString(pid));\r\nProperties agentProperties = vm.getAgentProperties();\r\n\r\nString options = agentProperties.getProperty(&quot;sun.jvm.args&quot;);\t\t\t\t\r\nString connectorAddress = vm.getAgentProperties().getProperty(&quot;com.sun.management.jmxremote.localConnectorAddress&quot;);\r\noptions += &quot; -Xlog:gc*:file=gc.log&quot;;\r\nagentProperties.setProperty(&quot;sun.jvm.args&quot;, options);\r\n\t\t\t\r\nvm.loadAgentLibrary(&quot;management_agent&quot;,options);\r\nvm.detach();\r\n```\r\nI&#39;m trying to load the manage_agent library along with the updated set of vm arguments\r\n\r\nBut the agent is not loaded, I&#39;m getting the following error\r\n \r\n&gt; com.sun.tools.attach.AgentLoadException: Failed to load agent library: Agent_OnAttach is not available in management_agent\r\n\tat jdk.attach/sun.tools.attach.VirtualMachineImpl.execute(VirtualMachineImpl.java:220)\r\n\tat jdk.attach/sun.tools.attach.HotSpotVirtualMachine.loadAgentLibrary(HotSpotVirtualMachine.java:94)\r\n\tat jdk.attach/sun.tools.attach.HotSpotVirtualMachine.loadAgentLibrary(HotSpotVirtualMachine.java:119)\r\n\tat JdkLogs.main(gclogs.java:48)\r\n\r\nBased on java official documentation, Agent_OnAttach is present in libmanagement_agent.so. My java version is 11.\r\n\r\n\r\n**QUESTION-2**\r\n\r\nI can load the agent by uing local manage agent\r\n`vm.startLocalManagementAgent();`\r\n\r\nIs there any possibility to add the vm argument to the agent loaded by this way\r\n\r\n------------------\r\n\r\nAny help would be appreciated","title":"Failed to load agent library: Agent_OnAttach is not available in management_agent","body":"<p><strong>QUESTION-1</strong></p>\n<p>I'm trying to load the management_agent (libmanagement_agent.so library) into the jvm to set gc compilation vm argument on runtime.\nThis is my code snippet</p>\n<pre><code>long pid = getProcessId();\nVirtualMachine vm = VirtualMachine.attach(Long.toString(pid));\nvm = VirtualMachine.attach(Long.toString(pid));\nProperties agentProperties = vm.getAgentProperties();\n\nString options = agentProperties.getProperty(&quot;sun.jvm.args&quot;);               \nString connectorAddress = vm.getAgentProperties().getProperty(&quot;com.sun.management.jmxremote.localConnectorAddress&quot;);\noptions += &quot; -Xlog:gc*:file=gc.log&quot;;\nagentProperties.setProperty(&quot;sun.jvm.args&quot;, options);\n            \nvm.loadAgentLibrary(&quot;management_agent&quot;,options);\nvm.detach();\n</code></pre>\n<p>I'm trying to load the manage_agent library along with the updated set of vm arguments</p>\n<p>But the agent is not loaded, I'm getting the following error</p>\n<blockquote>\n<p>com.sun.tools.attach.AgentLoadException: Failed to load agent library: Agent_OnAttach is not available in management_agent\nat jdk.attach/sun.tools.attach.VirtualMachineImpl.execute(VirtualMachineImpl.java:220)\nat jdk.attach/sun.tools.attach.HotSpotVirtualMachine.loadAgentLibrary(HotSpotVirtualMachine.java:94)\nat jdk.attach/sun.tools.attach.HotSpotVirtualMachine.loadAgentLibrary(HotSpotVirtualMachine.java:119)\nat JdkLogs.main(gclogs.java:48)</p>\n</blockquote>\n<p>Based on java official documentation, Agent_OnAttach is present in libmanagement_agent.so. My java version is 11.</p>\n<p><strong>QUESTION-2</strong></p>\n<p>I can load the agent by uing local manage agent\n<code>vm.startLocalManagementAgent();</code></p>\n<p>Is there any possibility to add the vm argument to the agent loaded by this way</p>\n<hr />\n<p>Any help would be appreciated</p>\n"},{"tags":["java","loops","chess"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1681058717,"post_id":75971611,"comment_id":133994509,"body_markdown":"Please add some sourcecode of your existing routines, so we can see what it actually does - and not just what you described ;-) You could insert a comment at the position where you would like to test the possible blockings of a check.","body":"Please add some sourcecode of your existing routines, so we can see what it actually does - and not just what you described ;-) You could insert a comment at the position where you would like to test the possible blockings of a check."},{"owner":{"account_id":27424694,"reputation":7,"user_id":20922422,"display_name":"deprexit"},"score":0,"creation_date":1681059922,"post_id":75971611,"comment_id":133994683,"body_markdown":"@cyberbrain Sorry about that! I added the method I&#39;m trying to use, let me know if there&#39;s anything else you&#39;d like me to add :)","body":"@cyberbrain Sorry about that! I added the method I&#39;m trying to use, let me know if there&#39;s anything else you&#39;d like me to add :)"}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1681073159,"creation_date":1681073159,"answer_id":75972787,"question_id":75971611,"body_markdown":"You need to identify all fields that a figure can move to.\r\nIf one of the enemy figures can move to your king&#39;s field, a check is active (you have it with `seenSquares()`).\r\n\r\nNext understand which fields need to be blocked to prevent this. This list depends on the position and the type of the figure initiating the check. This includes the field of that figure (a horse will only have that field as a possibility to remove the check).\r\n\r\nNext check, which of your figures can access such a field. Of those evaluated moves pick the one most suitable.\r\nDo not forget to compare moving your king out of the check condition as well.\r\n\r\nBut all this is algorithm, not java related.","title":"How do I see if a chess piece can move to block a check?","body":"<p>You need to identify all fields that a figure can move to.\nIf one of the enemy figures can move to your king's field, a check is active (you have it with <code>seenSquares()</code>).</p>\n<p>Next understand which fields need to be blocked to prevent this. This list depends on the position and the type of the figure initiating the check. This includes the field of that figure (a horse will only have that field as a possibility to remove the check).</p>\n<p>Next check, which of your figures can access such a field. Of those evaluated moves pick the one most suitable.\nDo not forget to compare moving your king out of the check condition as well.</p>\n<p>But all this is algorithm, not java related.</p>\n"}],"owner":{"account_id":27424694,"reputation":7,"user_id":20922422,"display_name":"deprexit"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":128,"favorite_count":0,"down_vote_count":4,"up_vote_count":1,"answer_count":1,"score":-3,"last_activity_date":1681122035,"creation_date":1681057201,"question_id":75971611,"body_markdown":"I&#39;m working on a chess bot for a personal project (in Java) and for the life of me, I can&#39;t figure out how to see if a piece can block a check. Here is the setup:\r\n\r\nBoard: Holds a 2d array of Squares, all of the Squares on the Board, and all of the Pieces. All of these fields are static so I didn&#39;t have to make like 80 getters. Also holds these ArrayLists: white&#39;s legal moves, black&#39;s legal moves, all of white&#39;s moves, all of black&#39;s moves, all of white&#39;s pieces, and all of black&#39;s pieces.\r\n\r\nSquare: Holds Pieces.\r\n\r\nPiece (And its child classes): Has two ArrayLists: moveset (all of the squares it could move to on an empty board from its current position, this is how I&#39;m going to deal with pins) and seen squares (all of the squares it can move to without hitting a piece of its own color). King has a boolean inCheck field.\r\n\r\nMove: Takes a piece and a square, has a play() method that deals with the logic of actually moving a piece, setting the square&#39;s new piece, etc.\r\n\r\nLogic: The Board&#39;s vision() method gets called after every move.  This updates the moveset and seen squares for all of the pieces and sets the King&#39;s inCheck field. It then adds all possible moves to the all moves ArrayLists. And then it should add all of the legal moves (taking checks into account) to the legal moves ArrayLists. \r\n\r\nAccounting for checks is where I&#39;m having trouble. The first part of is easy: Loop through all of white&#39;s moves, and if the King is in check, the King can move, so add it to the legal list. All moves that block a check would also be added (unless that piece is pinned), and everything else would be illegal until the King gets out of check.\r\n\r\nBut how do I see if a piece can block a check? This is the last thing I have to do before I get to actually work on the bot logic which is the part I&#39;m really excited about.\r\n\r\nI&#39;ve tried:\r\n\r\n-Seeing if one of white&#39;s pieces sees the same square as a piece giving the check (I think this is the right approach, I just can&#39;t figure out how to do it).\r\n\r\n-I made a method that returns an ArrayList of pieces that are giving checks, but got nowhere with that too.\r\n\r\nThank you for reading this! I know this was a novel lol I just wanted to make sure I gave all of the relevant information.\r\n\r\nHere is the vision method and the get checking pieces method:\r\n\r\n    public static void vision() {\r\n\r\n\r\n         //updateBoardVision is an overridden method in all of the\r\n         //Piece subclasses. It reevaluates all theoretically possible moves \r\n         //from the current square and all the squares it can move to\r\n\r\n        for (Piece p : whitePieces) {\r\n            p.updateBoardVision();\r\n        }\r\n\r\n        for (Piece p : blackPieces) {\r\n            p.updateBoardVision();\r\n        }\r\n        \r\n         //if a white piece can see the square the black king is on,\r\n         //the black king is in check\r\n        for (Piece p : whitePieces) {\r\n            if (p.seenSquares.contains(Board.bK.square)) {\r\n                Board.bK.setInCheck(true);\r\n            }\r\n        }\r\n        \r\n        //and vice versa\r\n        for (Piece p : blackPieces) {\r\n            if (p.seenSquares.contains(Board.wK.square)) {\r\n                Board.wK.setInCheck(true);\r\n            }\r\n        }\r\n        \r\n       //all possible moves, discounting checks\r\n        for (Piece p : whitePieces) {\r\n            for (Square s : p.seenSquares) {\r\n                Move m = new Move(p, s);\r\n                allWhiteMoves.add(m);\r\n            }\r\n        }\r\n        \r\n        for (Piece p : blackPieces) {\r\n            for (Square s : p.seenSquares) {\r\n                Move m = new Move(p, s);\r\n                allBlackMoves.add(m);\r\n            }\r\n        }\r\n        \r\n        //set every move to invalid\r\n        for (Move wm : allWhiteMoves) {\r\n            wm.setValid(false);\r\n        }\r\n        \r\n        for (Move bm : allBlackMoves) {\r\n            bm.setValid(false);\r\n        }\r\n        \r\n\r\n        \r\n        for (Move aWhiteMove : allWhiteMoves) {\r\n            \r\n            //if the king is in check\r\n            if (wK.isInCheck()) {\r\n                \r\n                //then we can move it\r\n                if (aWhiteMove.getPiece().equals(wK)) {\r\n                    aWhiteMove.setValid(true);\r\n                }\r\n                \r\n                //if there is a white piece, in white moves, that\r\n                //sees the same square as a checking piece, it can\r\n                //block the check so it&#39;s valid,\r\n                //but I also need to account for double checks.\r\n                //and then i need to do the same for black\r\n                //this whole part is where I&#39;m confused \r\n            }\r\n        }\r\n        \r\n        //after that i&#39;ll add all of the legal moves\r\n        for (Move r : allWhiteMoves) {\r\n            if (r.isValid()) {\r\n                whiteLegalMoves.add(r);\r\n            }\r\n        }\r\n        \r\n        for (Move s : allBlackMoves) {\r\n            if (s.isValid()) {\r\n                blackLegalMoves.add(s);\r\n            }\r\n        }\r\n        \r\n\r\n    }\r\n    \r\n     //this is where i see what piece(s) is/are giving the check\r\n     //it&#39;s an arraylist not a piece to account for multiple\r\n     //pieces giving a check at the same time\r\n    public static ArrayList&lt;Piece&gt; findCheckPieceWhite() {\r\n        ArrayList&lt;Piece&gt; checkPieces = new ArrayList();\r\n        \r\n        for (Piece p : blackPieces) {\r\n            if (p.seenSquares.contains(wK.square)) {\r\n                checkPieces.add(p);\r\n            }\r\n        }\r\n        \r\n        return checkPieces;\r\n    }\r\n    \r\n    public static ArrayList&lt;Piece&gt; findCheckPieceBlack() {\r\n        ArrayList&lt;Piece&gt; checkPieces = new ArrayList();\r\n        \r\n        for (Piece p : whitePieces) {\r\n            if (p.seenSquares.contains(bK.square)) {\r\n                checkPieces.add(p);\r\n            }\r\n        }\r\n        \r\n        return checkPieces;\r\n    }","title":"How do I see if a chess piece can move to block a check?","body":"<p>I'm working on a chess bot for a personal project (in Java) and for the life of me, I can't figure out how to see if a piece can block a check. Here is the setup:</p>\n<p>Board: Holds a 2d array of Squares, all of the Squares on the Board, and all of the Pieces. All of these fields are static so I didn't have to make like 80 getters. Also holds these ArrayLists: white's legal moves, black's legal moves, all of white's moves, all of black's moves, all of white's pieces, and all of black's pieces.</p>\n<p>Square: Holds Pieces.</p>\n<p>Piece (And its child classes): Has two ArrayLists: moveset (all of the squares it could move to on an empty board from its current position, this is how I'm going to deal with pins) and seen squares (all of the squares it can move to without hitting a piece of its own color). King has a boolean inCheck field.</p>\n<p>Move: Takes a piece and a square, has a play() method that deals with the logic of actually moving a piece, setting the square's new piece, etc.</p>\n<p>Logic: The Board's vision() method gets called after every move.  This updates the moveset and seen squares for all of the pieces and sets the King's inCheck field. It then adds all possible moves to the all moves ArrayLists. And then it should add all of the legal moves (taking checks into account) to the legal moves ArrayLists.</p>\n<p>Accounting for checks is where I'm having trouble. The first part of is easy: Loop through all of white's moves, and if the King is in check, the King can move, so add it to the legal list. All moves that block a check would also be added (unless that piece is pinned), and everything else would be illegal until the King gets out of check.</p>\n<p>But how do I see if a piece can block a check? This is the last thing I have to do before I get to actually work on the bot logic which is the part I'm really excited about.</p>\n<p>I've tried:</p>\n<p>-Seeing if one of white's pieces sees the same square as a piece giving the check (I think this is the right approach, I just can't figure out how to do it).</p>\n<p>-I made a method that returns an ArrayList of pieces that are giving checks, but got nowhere with that too.</p>\n<p>Thank you for reading this! I know this was a novel lol I just wanted to make sure I gave all of the relevant information.</p>\n<p>Here is the vision method and the get checking pieces method:</p>\n<pre><code>public static void vision() {\n\n\n     //updateBoardVision is an overridden method in all of the\n     //Piece subclasses. It reevaluates all theoretically possible moves \n     //from the current square and all the squares it can move to\n\n    for (Piece p : whitePieces) {\n        p.updateBoardVision();\n    }\n\n    for (Piece p : blackPieces) {\n        p.updateBoardVision();\n    }\n    \n     //if a white piece can see the square the black king is on,\n     //the black king is in check\n    for (Piece p : whitePieces) {\n        if (p.seenSquares.contains(Board.bK.square)) {\n            Board.bK.setInCheck(true);\n        }\n    }\n    \n    //and vice versa\n    for (Piece p : blackPieces) {\n        if (p.seenSquares.contains(Board.wK.square)) {\n            Board.wK.setInCheck(true);\n        }\n    }\n    \n   //all possible moves, discounting checks\n    for (Piece p : whitePieces) {\n        for (Square s : p.seenSquares) {\n            Move m = new Move(p, s);\n            allWhiteMoves.add(m);\n        }\n    }\n    \n    for (Piece p : blackPieces) {\n        for (Square s : p.seenSquares) {\n            Move m = new Move(p, s);\n            allBlackMoves.add(m);\n        }\n    }\n    \n    //set every move to invalid\n    for (Move wm : allWhiteMoves) {\n        wm.setValid(false);\n    }\n    \n    for (Move bm : allBlackMoves) {\n        bm.setValid(false);\n    }\n    \n\n    \n    for (Move aWhiteMove : allWhiteMoves) {\n        \n        //if the king is in check\n        if (wK.isInCheck()) {\n            \n            //then we can move it\n            if (aWhiteMove.getPiece().equals(wK)) {\n                aWhiteMove.setValid(true);\n            }\n            \n            //if there is a white piece, in white moves, that\n            //sees the same square as a checking piece, it can\n            //block the check so it's valid,\n            //but I also need to account for double checks.\n            //and then i need to do the same for black\n            //this whole part is where I'm confused \n        }\n    }\n    \n    //after that i'll add all of the legal moves\n    for (Move r : allWhiteMoves) {\n        if (r.isValid()) {\n            whiteLegalMoves.add(r);\n        }\n    }\n    \n    for (Move s : allBlackMoves) {\n        if (s.isValid()) {\n            blackLegalMoves.add(s);\n        }\n    }\n    \n\n}\n\n //this is where i see what piece(s) is/are giving the check\n //it's an arraylist not a piece to account for multiple\n //pieces giving a check at the same time\npublic static ArrayList&lt;Piece&gt; findCheckPieceWhite() {\n    ArrayList&lt;Piece&gt; checkPieces = new ArrayList();\n    \n    for (Piece p : blackPieces) {\n        if (p.seenSquares.contains(wK.square)) {\n            checkPieces.add(p);\n        }\n    }\n    \n    return checkPieces;\n}\n\npublic static ArrayList&lt;Piece&gt; findCheckPieceBlack() {\n    ArrayList&lt;Piece&gt; checkPieces = new ArrayList();\n    \n    for (Piece p : whitePieces) {\n        if (p.seenSquares.contains(bK.square)) {\n            checkPieces.add(p);\n        }\n    }\n    \n    return checkPieces;\n}\n</code></pre>\n"},{"tags":["java","spring","spring-aop","spring-cloud-sleuth"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1681030354,"post_id":75649841,"comment_id":133991150,"body_markdown":"Welcome to SO. Please learn [how to ask a question on SO](https://stackoverflow.com/help/how-to-ask) and provide a [minimal, complete, and verifiable example](https://stackoverflow.com/help/mcve). Thank you. Your error message helps. I think I know what is happening. But in order to help you, I need to see your code. Only then, I can tell you how to fix it.","body":"Welcome to SO. Please learn <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask a question on SO</a> and provide a <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a>. Thank you. Your error message helps. I think I know what is happening. But in order to help you, I need to see your code. Only then, I can tell you how to fix it."}],"owner":{"account_id":1518554,"reputation":175,"user_id":1418931,"accept_rate":0,"display_name":"Shankar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681121875,"creation_date":1678099478,"question_id":75649841,"body_markdown":"I am trying to integrate Spring Sleuth with an existing Spring Boot application with below version. For some reason, during the start up, it;s failing to create bean with below error\r\n\r\nThe BatchEnrollment class as @EnableScheduling and @Scheduled methods\r\n\r\n```xml\r\n&lt;spring-cloud.version&gt;2021.0.3&lt;/spring-cloud.version&gt;\r\n&lt;spring-cloud-starter-sleuth.version&gt;3.1.3&lt;/spring-cloud-starter-sleuth.version&gt;\r\n\r\n  &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\r\n  &lt;version&gt;2.6.13&lt;/version&gt;\r\n  &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n  &lt;version&gt;2.6.13&lt;/version&gt;\r\n```\r\n\r\n&gt; org.springframework.aop.framework.AopConfigException: Could not\r\n&gt; generate CGLIB subclass of class com.scheduler.BatchEnrollment: Common\r\n&gt; causes of this problem include using a final class or a non-visible\r\n&gt; class; nested exception is java.lang.IllegalArgumentException: No\r\n&gt; visible constructors in class","title":"Spring Sleuth - AOP Bean Creation Exception","body":"<p>I am trying to integrate Spring Sleuth with an existing Spring Boot application with below version. For some reason, during the start up, it;s failing to create bean with below error</p>\n<p>The BatchEnrollment class as @EnableScheduling and @Scheduled methods</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;spring-cloud.version&gt;2021.0.3&lt;/spring-cloud.version&gt;\n&lt;spring-cloud-starter-sleuth.version&gt;3.1.3&lt;/spring-cloud-starter-sleuth.version&gt;\n\n  &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\n  &lt;version&gt;2.6.13&lt;/version&gt;\n  &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n  &lt;version&gt;2.6.13&lt;/version&gt;\n</code></pre>\n<blockquote>\n<p>org.springframework.aop.framework.AopConfigException: Could not\ngenerate CGLIB subclass of class com.scheduler.BatchEnrollment: Common\ncauses of this problem include using a final class or a non-visible\nclass; nested exception is java.lang.IllegalArgumentException: No\nvisible constructors in class</p>\n</blockquote>\n"},{"tags":["java","mongodb","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":25550460,"reputation":33,"user_id":20507625,"display_name":"Vaibhav Tamakuwala"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680369243,"creation_date":1680369243,"answer_id":75907726,"question_id":75825625,"body_markdown":"I have worked with MongoDB, not with springboot but as i understand you issue is you want to do sorting/filtering in aggregation with different fields. Right?\r\n\r\nFor sorting, you can use:\r\n\r\n```\r\ncollectionName.aggregate([\r\n  {\r\n    $match: {\r\n     //... use the filter from the req body, just make sure that which fields you are filtering are introduced/used in aggregation.\r\n    }\r\n  },\r\n  {\r\n    $sort :{\r\n     //... use the sorting option from the req body that will help you with custom fields, just make sure that which fields you are sorting are introduced/used before this portion of aggregation.\r\n    }\r\n  }\r\n])\r\n``` \r\nHere is the reference [link][1] for sorting.\r\n\r\n\r\n  [1]: https://www.mongodb.com/docs/manual/reference/operator/aggregation/sort/","title":"Aggerate distance in a query that sorts via distance between a logged in user and user lists using mongodb/java springboot","body":"<p>I have worked with MongoDB, not with springboot but as i understand you issue is you want to do sorting/filtering in aggregation with different fields. Right?</p>\n<p>For sorting, you can use:</p>\n<pre><code>collectionName.aggregate([\n  {\n    $match: {\n     //... use the filter from the req body, just make sure that which fields you are filtering are introduced/used in aggregation.\n    }\n  },\n  {\n    $sort :{\n     //... use the sorting option from the req body that will help you with custom fields, just make sure that which fields you are sorting are introduced/used before this portion of aggregation.\n    }\n  }\n])\n</code></pre>\n<p>Here is the reference <a href=\"https://www.mongodb.com/docs/manual/reference/operator/aggregation/sort/\" rel=\"nofollow noreferrer\">link</a> for sorting.</p>\n"}],"owner":{"account_id":3197891,"reputation":157,"user_id":2700673,"accept_rate":47,"display_name":"The Old County"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":249,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":1,"score":0,"last_activity_date":1681121381,"creation_date":1679588961,"question_id":75825625,"body_markdown":"\r\nI am working on a Java/Mongodb system - where each user has their own lat/lng coordinates\r\n\r\nI have made an api query to user collection -- and I want to start filtering/sorting through the users.\r\n\r\nI want to complete this sort process -- it works fine for options 2-5 -- but I need to work out how to create an aggregate I think in mongo (which I am new at).\r\n\r\na user record looks like this - where I have placed the coordinates in a locations object, the other filters are mostly in the root - like createdAt, lastLoginAt ...\r\n\r\n[![enter image description here][1]][1]\r\n\r\nHow do I start creating the required aggregate using the current code base -- so I can sort a user that is logged in -- get their coordinates - and sort against those with the viewed list.\r\n\r\nusing the springframework imports\r\n\r\n    import org.springframework.data.mongodb.core.query.Criteria;\r\n    import org.springframework.data.mongodb.core.query.Query;\r\n\r\n----------\r\n\r\n\r\n    @CrossOrigin\r\n    @GetMapping(&quot;/api/users&quot;)\r\n    @ResponseBody\r\n    public BasicDBObject listUsers (@RequestHeader(&quot;Authorization&quot;) String bearerToken, @RequestParam(&quot;sort_by&quot;) String sort_by, @RequestParam(defaultValue = &quot;0&quot;) int page,\r\n    @RequestParam(defaultValue = &quot;3&quot;) int size) {\r\n\r\n        String email = tokenHandler.getEmailFromBearerToken(bearerToken);\r\n\r\n        //get logged in user\r\n        Query q = new Query();\r\n        q.addCriteria(Criteria.where(&quot;email&quot;).is(email));\r\n        List&lt;Person&gt; lp = MongoApp.mongoOps().find(q, Person.class);\r\n        Person loggedInUser = null;\r\n        if (!lp.isEmpty()) {\r\n            for (Person person : lp) {\r\n                loggedInUser = person;\r\n            }\r\n        }\r\n\r\n\r\n        String field = &quot;&quot;;//createdAt\r\n        switch (sort_by) {\r\n            case &quot;1&quot;:\r\n                System.out.println(&quot;Distance&quot;);\r\n                break;\r\n            case &quot;2&quot;:\r\n                System.out.println(&quot;Last online&quot;);\r\n                field = &quot;lastLoginAt&quot;;\r\n                break;\r\n            case &quot;3&quot;:\r\n                System.out.println(&quot;Latest joined&quot;);\r\n                field = &quot;createdAt&quot;;\r\n                break;\r\n            case &quot;4&quot;:\r\n                System.out.println(&quot;Newest photo&quot;);\r\n                field = &quot;newestImageAt&quot;;\r\n                break;\r\n            case &quot;5&quot;:\r\n                System.out.println(&quot;Recently Updated&quot;);\r\n                field = &quot;updatedAt&quot;;\r\n                break;\r\n            default:\r\n                System.out.println(&quot;default&quot;);\r\n                field = &quot;createdAt&quot;;\r\n        }\r\n\r\n        Query query = new Query();\r\n\r\n        long totalUsercount = MongoApp.mongoOps().count(query, Person.class);\r\n\r\n        //only show isActive users\r\n        query.addCriteria(Criteria.where(&quot;isActive&quot;).is(true));\r\n\r\n        //dont show yourself - loggedin user excluded from list\r\n        query.addCriteria(Criteria.where(&quot;id&quot;).ne(loggedInUser.getId()));\r\n \r\n        query.with(Sort.by(Sort.Direction.DESC, field));\r\n\r\n        Pageable pageable = PageRequest.of(page, size);\r\n        List&lt;Person&gt; totalPeople = new ArrayList&lt;&gt;();\r\n        totalPeople = queryPeopleAddImages(totalPeople, query);\r\n        long totalCount = totalPeople.size();\r\n        query.with(pageable);\r\n\r\n        // List People\r\n        List&lt;Person&gt; people = new ArrayList&lt;&gt;();\r\n        people = queryPeopleAddImages(people, query);\r\n\r\n        BasicDBObject obj = userListResponse(loggedInUser, people, totalCount, totalUsercount);\r\n\r\n        return obj;\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n-----------\r\n\r\nI&#39;ve added some research links here - which I think is on track to complete this functionality\r\n\r\n\r\nResearch\r\n\r\nhttps://stackoverflow.com/questions/43137589/how-to-write-mongodb-aggregation-for-this-criteria-query\r\n\r\n    AggregationOperation match = Aggregation.match(Criteria.where(&quot;careGiverId&quot;).is(careTakerId).and(&quot;careType&quot;).is(careType));\r\n     AggregationOperation count = Aggregation.count().as(&quot;count&quot;);\r\n     Aggregation agg = Aggregation.newAggregation(match, count);\r\n     mongoOperations.aggregate(agg, CareLogBean.class);\r\n\r\nhttps://stackoverflow.com/questions/18521009/spring-mongodb-query-sorting\r\n\r\n\r\n    AggregationOperation match = Aggregation.match(matching criteria);\r\n    AggregationOperation group = Aggregation.group(&quot;fieldname&quot;);\r\n    AggregationOperation sort = Aggregation.sort(Sort.Direction.ASC, &quot;fieldname&quot;);\r\n    Aggregation aggregation = Aggregation.newAggregation(Aggregation.unwind(&quot;fieldname&quot;),match,group,sort);\r\n\r\n\r\n\r\nhttps://stackoverflow.com/questions/33864461/mongodb-print-distance-between-two-points\r\n\r\n     db.new_stores.aggregate([\r\n        { &quot;$geoNear&quot;: {\r\n            &quot;near&quot;: {\r\n                &quot;type&quot;: &quot;Point&quot;,\r\n                &quot;coordinates&quot;: [ -81.093699, 32.074673 ]\r\n            }, \r\n            &quot;maxDistance&quot;: 500 * 1609,\r\n            &quot;key&quot; : &quot;myLocation&quot;,\r\n            &quot;spherical&quot;: true,\r\n            &quot;distanceField&quot;: &quot;distance&quot;,\r\n            &quot;distanceMultiplier&quot;: 0.000621371\r\n        }}\r\n    ]).pretty()\r\n\r\n&gt; &quot;This allows you to specify &quot;distanceField&quot; which will produce another\r\n&gt; field in the output documents containing the distance from the queried\r\n&gt; point. You can also use &quot;distanceMultiplier&quot; to apply any conversion\r\n&gt; to the output distance as required ( i.e meters to miles, and noting\r\n&gt; that all GeoJSON distances are returned in meters )\r\n&gt; \r\n&gt; There is also the geoNear command with similar options, but it of\r\n&gt; course does not return a cursor as output.\r\n&gt; \r\n&gt; if you have more than one 2dsphere, you should specify a &quot;key&quot;.&quot;\r\n\r\n\r\n-----\r\n\r\nI have this working on the frontend to calculate distance in km\r\n\r\nhttps://stackoverflow.com/questions/27928/calculate-distance-between-two-latitude-longitude-points-haversine-formula/27943#27943\r\n\r\nusing the ‘Haversine’ formula\r\n\r\n\r\n    function getDistanceFromLatLonInKm(lat1,lon1,lat2,lon2) {\r\n      var R = 6371; // Radius of the earth in km\r\n      var dLat = deg2rad(lat2-lat1);  // deg2rad below\r\n      var dLon = deg2rad(lon2-lon1); \r\n      var a = \r\n        Math.sin(dLat/2) * Math.sin(dLat/2) +\r\n        Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * \r\n        Math.sin(dLon/2) * Math.sin(dLon/2)\r\n        ; \r\n      var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); \r\n      var d = R * c; // Distance in km\r\n      return d;\r\n    }\r\n    \r\n    function deg2rad(deg) {\r\n      return deg * (Math.PI/180)\r\n    }\r\n\r\n\r\n----------------------\r\n28th March 2023\r\ncurrent research\r\n\r\n\r\nI am working on a mongobdb application - using Java springboot.\r\n\r\nIts a user website -- where members will log in and be able to search/filter/sort for other members.\r\n\r\nI&#39;ve started building an api with basic queries --\r\n\r\nI need to complete part of the api to allow you to sort via distance. Each user has lat/lng details -- I believe its a case of building an aggregate query.\r\n\r\nhttps://stackoverflow.com/questions/75825625/aggerate-distance-in-a-query-that-sorts-via-distance-between-a-logged-in-user-an\r\n\r\n---\r\n\r\n* Handle the distance sorting -- aggregate query part.\r\n* I want to clean the codebase up - as there are separate apis made to do similar/same searches but for specific filters -- getUsers, getFavs, getBlocks, getViewedMe -\r\n* Also make pagination options optional -(or have a part of the code in its own function to isolate it with optional pagination handling - aka reduce repeated code effort)- so I could acquire ALL user data and not chunks of it for analysis - again similar searches/same but scalable - aka provide just 5 of the latest results, provide paginated data with or with sorting/filtering.\r\n* Be able to add multiple types of filters -- with AND and OR operations -- image only, blonde hair, blue eyes, ethnicities\r\n\r\n--- \r\n\r\n\r\n-- so you can see here -- that the other cases work - because they are actual fields --- lastLoginAt, createdAt ----- etc.. -- whereas distance is like a virtual field that needs to be made -- I think with the aggregate\r\n\r\n    String field = &quot;&quot;;//createdAt\r\n    switch (sort_by) {\r\n    case &quot;1&quot;:\r\n    System.out.println(&quot;Distance&quot;);\r\n    break;\r\n    case &quot;2&quot;:\r\n    System.out.println(&quot;Last online&quot;);\r\n    field = &quot;lastLoginAt&quot;;\r\n    break;\r\n    case &quot;3&quot;:\r\n    System.out.println(&quot;Latest joined&quot;);\r\n    field = &quot;createdAt&quot;;\r\n    break;\r\n    case &quot;4&quot;:\r\n    System.out.println(&quot;Newest photo&quot;);\r\n    field = &quot;newestImageAt&quot;;\r\n    break;\r\n    case &quot;5&quot;:\r\n    System.out.println(&quot;Recently Updated&quot;);\r\n    field = &quot;updatedAt&quot;;\r\n    break;\r\n    default:\r\n    System.out.println(&quot;default&quot;);\r\n    field = &quot;createdAt&quot;;\r\n    }\r\n    \r\n    Query query = new Query();\r\n    \r\n    long totalUsercount = MongoApp.mongoOps().count(query, Person.class);\r\n    System.out.println(&quot;totalUsercount &quot;+ totalUsercount);\r\n    \r\n    ///default filters (only active users, no admins, no self)\r\n    query = addDefaultFilters(query, loggedInUser);\r\n    ///default filters\r\n    \r\n    //country filter\r\n    //query.addCriteria(Criteria.where(&quot;country&quot;).is(&quot;AR&quot;));\r\n    \r\n    query.with(Sort.by(Sort.Direction.DESC, field));\r\n\r\n\r\n----------------\r\n\r\n&quot;MongoDB Compass terminal which is great to test out queries and aggregations&quot;\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nAdded here documentations for indexes in mongodb and the 2dsphere index type.\r\n\r\n\r\n2dshpere: https://www.mongodb.com/docs/manual/core/2dsphere/#:~:text=A%202dsphere%20index%20supports%20queries,geospatial%20queries%2C%20see%20Geospatial%20Queries.\r\nIndexes: https://www.mongodb.com/docs/manual/indexes/\r\n\r\n\r\nThe 2dsphere index is required for MongoDB&#39;s $geoNear aggregation stage to work correctly with geospatial data. This is because $geoNear uses the 2dsphere index to efficiently perform geospatial queries\r\n\r\n\r\nthere is already a default filter in place\r\n\r\n    public Query addDefaultFilters(Query query, Person loggedInUser) {\r\n    \r\n    ///default filters\r\n    //only show isActive users\r\n    query.addCriteria(Criteria.where(&quot;isActive&quot;).is(true));\r\n    \r\n    //dont show admins\r\n    query.addCriteria(Criteria.where(&quot;role&quot;).ne(&quot;ROLE_ADMIN&quot;));\r\n    \r\n    //dont show yourself - loggedin user excluded from list\r\n    query.addCriteria(Criteria.where(&quot;id&quot;).ne(loggedInUser.getId()));\r\n    ///default filters\r\n    \r\n    return query;\r\n    }\r\n\r\n--\r\n\r\n\r\n    Query query = new Query();\r\n    \r\n    long totalUsercount = MongoApp.mongoOps().count(query, Person.class);\r\n    System.out.println(&quot;totalUsercount &quot;+ totalUsercount);\r\n    \r\n    ///default filters (only active users, no admins, no self)\r\n    query = addDefaultFilters(query, loggedInUser);\r\n    ///default filters\r\n    \r\n    //country filter\r\n    //query.addCriteria(Criteria.where(&quot;country&quot;).is(&quot;AR&quot;));\r\n    \r\n    query.with(Sort.by(Sort.Direction.DESC, field));\r\n    \r\n    Pageable pageable = PageRequest.of(page, size);\r\n    List totalPeople = new ArrayList();\r\n    totalPeople = queryPeopleAddImages(totalPeople, query);\r\n    long totalCount = totalPeople.size();\r\n    System.out.println(&quot;xxxxxxxxxxxxxtotalCount &quot;+totalCount);\r\n    query.with(pageable);\r\n    \r\n    // List People\r\n    //List people = MongoApp.mongoOps().findAll(Person.class);\r\n    List people = new ArrayList();\r\n    people = queryPeopleAddImages(people, query);\r\n\r\n--------\r\n[![enter image description here][3]][3]\r\n\r\n-------\r\n[![enter image description here][4]][4]\r\n\r\n[![enter image description here][5]][5]\r\n[![enter image description here][6]][6]\r\n[![enter image description here][7]][7]\r\n[![enter image description here][8]][8]\r\n[![enter image description here][9]][9]\r\n[![enter image description here][10]][10]\r\n[![enter image description here][11]][11]\r\n\r\n-----\r\nanother java example\r\n[![enter image description here][12]][12]\r\n[![enter image description here][13]][13]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RL8yb.png\r\n  [2]: https://i.stack.imgur.com/ivmww.png\r\n  [3]: https://i.stack.imgur.com/VQdXg.png\r\n  [4]: https://i.stack.imgur.com/9cIzk.png\r\n  [5]: https://i.stack.imgur.com/HmGr4.png\r\n  [6]: https://i.stack.imgur.com/2zOsT.png\r\n  [7]: https://i.stack.imgur.com/3yZU9.png\r\n  [8]: https://i.stack.imgur.com/ZvjTm.png\r\n  [9]: https://i.stack.imgur.com/6yXcZ.png\r\n  [10]: https://i.stack.imgur.com/foOxF.png\r\n  [11]: https://i.stack.imgur.com/0p25x.png\r\n  [12]: https://i.stack.imgur.com/CDIbF.png\r\n  [13]: https://i.stack.imgur.com/OYPst.png\r\n\r\n\r\n-----------\r\n10th April 2023\r\n\r\nthere was another solution given to me that may solve these issues -please evaluate.\r\n\r\n----\r\n\r\nTo handle the distance sorting using MongoDB aggregation query, you can use the following steps:\r\n\r\nCreate a GeoJSON object for the user&#39;s location, using the coordinates stored in the user&#39;s document.\r\n\r\nUse the $geoNear stage in the aggregation pipeline to find other users who are within a certain radius of the user&#39;s location. You can specify the maximum distance and the field that contains the other users&#39; location information.\r\n\r\nUse the $sort stage to sort the results based on the distance from the user&#39;s location.\r\n\r\nHere&#39;s an example code snippet that demonstrates how you can implement this in Java using Spring Boot and the MongoDB Java driver:\r\n\r\n----------------------\r\n\r\n    import org.springframework.data.mongodb.core.geo.GeoJsonPoint;\r\n    import org.springframework.data.mongodb.core.query.Criteria;\r\n    import org.springframework.data.mongodb.core.query.Query;\r\n    import org.springframework.data.mongodb.core.aggregation.Aggregation;\r\n    import org.springframework.data.mongodb.core.aggregation.AggregationResults;\r\n    import org.springframework.data.mongodb.core.aggregation.GeoNearAggregation;\r\n    import org.springframework.data.mongodb.core.aggregation.SortOperation;\r\n    import org.springframework.data.mongodb.core.aggregation.TypedAggregation;\r\n    \r\n    import static org.springframework.data.mongodb.core.aggregation.Aggregation.*;\r\n    \r\n    GeoJsonPoint userLocation = new GeoJsonPoint(user.getLongitude(), user.getLatitude());\r\n    double maxDistance = 10000.0; // 10km\r\n    \r\n    GeoNearAggregation geoNearAggregation = new GeoNearAggregation(\r\n        near(userLocation).spherical(true).maxDistance(maxDistance),\r\n        &quot;distance&quot;\r\n    );\r\n    \r\n    SortOperation sortOperation = sort(Sort.by(&quot;distance&quot;));\r\n    \r\n    TypedAggregation[User] aggregation = newAggregation(User.class, geoNearAggregation, sortOperation);\r\n    AggregationResults[User] results = mongoTemplate.aggregate(aggregation, User.class);\r\n    List[User] nearbyUsers = results.getMappedResults();\r\n\r\n---------------------------------\r\n\r\n\r\nTo clean up the codebase and reduce repeated code effort, you can create a generic search function that takes in filter parameters and pagination options as parameters. You can use the Query class to build up the filter criteria and the PageRequest class to handle pagination.\r\n\r\nHere&#39;s an example code snippet that demonstrates how you can implement this:\r\n\r\n\r\n-----------------------------------\r\n\r\n\r\n    public Page[User] searchUsers(String keyword, List[Criteria] filters, Sort sort, int page, int size) {\r\n        Query query = new Query();\r\n    \r\n        // Add the keyword search criteria\r\n        if (keyword != null) {\r\n            Criteria keywordCriteria = new Criteria()\r\n                .orOperator(\r\n                    Criteria.where(&quot;firstName&quot;).regex(keyword, &quot;i&quot;),\r\n                    Criteria.where(&quot;lastName&quot;).regex(keyword, &quot;i&quot;)\r\n                );\r\n            query.addCriteria(keywordCriteria);\r\n        }\r\n    \r\n        // Add the filters\r\n        if (filters != null) {\r\n            Criteria filterCriteria = new Criteria().andOperator(filters.toArray(new Criteria[0]));\r\n            query.addCriteria(filterCriteria);\r\n        }\r\n    \r\n        // Add the pagination options\r\n        PageRequest pageRequest = PageRequest.of(page, size, sort);\r\n    \r\n        query.with(pageRequest);\r\n    \r\n        return mongoTemplate.find(query, User.class, &quot;users&quot;);\r\n    }\r\n\r\n","title":"Aggerate distance in a query that sorts via distance between a logged in user and user lists using mongodb/java springboot","body":"<p>I am working on a Java/Mongodb system - where each user has their own lat/lng coordinates</p>\n<p>I have made an api query to user collection -- and I want to start filtering/sorting through the users.</p>\n<p>I want to complete this sort process -- it works fine for options 2-5 -- but I need to work out how to create an aggregate I think in mongo (which I am new at).</p>\n<p>a user record looks like this - where I have placed the coordinates in a locations object, the other filters are mostly in the root - like createdAt, lastLoginAt ...</p>\n<p><a href=\"https://i.stack.imgur.com/RL8yb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RL8yb.png\" alt=\"enter image description here\" /></a></p>\n<p>How do I start creating the required aggregate using the current code base -- so I can sort a user that is logged in -- get their coordinates - and sort against those with the viewed list.</p>\n<p>using the springframework imports</p>\n<pre><code>import org.springframework.data.mongodb.core.query.Criteria;\nimport org.springframework.data.mongodb.core.query.Query;\n</code></pre>\n<hr />\n<pre><code>@CrossOrigin\n@GetMapping(&quot;/api/users&quot;)\n@ResponseBody\npublic BasicDBObject listUsers (@RequestHeader(&quot;Authorization&quot;) String bearerToken, @RequestParam(&quot;sort_by&quot;) String sort_by, @RequestParam(defaultValue = &quot;0&quot;) int page,\n@RequestParam(defaultValue = &quot;3&quot;) int size) {\n\n    String email = tokenHandler.getEmailFromBearerToken(bearerToken);\n\n    //get logged in user\n    Query q = new Query();\n    q.addCriteria(Criteria.where(&quot;email&quot;).is(email));\n    List&lt;Person&gt; lp = MongoApp.mongoOps().find(q, Person.class);\n    Person loggedInUser = null;\n    if (!lp.isEmpty()) {\n        for (Person person : lp) {\n            loggedInUser = person;\n        }\n    }\n\n\n    String field = &quot;&quot;;//createdAt\n    switch (sort_by) {\n        case &quot;1&quot;:\n            System.out.println(&quot;Distance&quot;);\n            break;\n        case &quot;2&quot;:\n            System.out.println(&quot;Last online&quot;);\n            field = &quot;lastLoginAt&quot;;\n            break;\n        case &quot;3&quot;:\n            System.out.println(&quot;Latest joined&quot;);\n            field = &quot;createdAt&quot;;\n            break;\n        case &quot;4&quot;:\n            System.out.println(&quot;Newest photo&quot;);\n            field = &quot;newestImageAt&quot;;\n            break;\n        case &quot;5&quot;:\n            System.out.println(&quot;Recently Updated&quot;);\n            field = &quot;updatedAt&quot;;\n            break;\n        default:\n            System.out.println(&quot;default&quot;);\n            field = &quot;createdAt&quot;;\n    }\n\n    Query query = new Query();\n\n    long totalUsercount = MongoApp.mongoOps().count(query, Person.class);\n\n    //only show isActive users\n    query.addCriteria(Criteria.where(&quot;isActive&quot;).is(true));\n\n    //dont show yourself - loggedin user excluded from list\n    query.addCriteria(Criteria.where(&quot;id&quot;).ne(loggedInUser.getId()));\n\n    query.with(Sort.by(Sort.Direction.DESC, field));\n\n    Pageable pageable = PageRequest.of(page, size);\n    List&lt;Person&gt; totalPeople = new ArrayList&lt;&gt;();\n    totalPeople = queryPeopleAddImages(totalPeople, query);\n    long totalCount = totalPeople.size();\n    query.with(pageable);\n\n    // List People\n    List&lt;Person&gt; people = new ArrayList&lt;&gt;();\n    people = queryPeopleAddImages(people, query);\n\n    BasicDBObject obj = userListResponse(loggedInUser, people, totalCount, totalUsercount);\n\n    return obj;\n}\n</code></pre>\n<hr />\n<p>I've added some research links here - which I think is on track to complete this functionality</p>\n<p>Research</p>\n<p><a href=\"https://stackoverflow.com/questions/43137589/how-to-write-mongodb-aggregation-for-this-criteria-query\">How to write MongoDb Aggregation for this Criteria query</a></p>\n<pre><code>AggregationOperation match = Aggregation.match(Criteria.where(&quot;careGiverId&quot;).is(careTakerId).and(&quot;careType&quot;).is(careType));\n AggregationOperation count = Aggregation.count().as(&quot;count&quot;);\n Aggregation agg = Aggregation.newAggregation(match, count);\n mongoOperations.aggregate(agg, CareLogBean.class);\n</code></pre>\n<p><a href=\"https://stackoverflow.com/questions/18521009/spring-mongodb-query-sorting\">Spring MongoDB query sorting</a></p>\n<pre><code>AggregationOperation match = Aggregation.match(matching criteria);\nAggregationOperation group = Aggregation.group(&quot;fieldname&quot;);\nAggregationOperation sort = Aggregation.sort(Sort.Direction.ASC, &quot;fieldname&quot;);\nAggregation aggregation = Aggregation.newAggregation(Aggregation.unwind(&quot;fieldname&quot;),match,group,sort);\n</code></pre>\n<p><a href=\"https://stackoverflow.com/questions/33864461/mongodb-print-distance-between-two-points\">MongoDB print distance between two points</a></p>\n<pre><code> db.new_stores.aggregate([\n    { &quot;$geoNear&quot;: {\n        &quot;near&quot;: {\n            &quot;type&quot;: &quot;Point&quot;,\n            &quot;coordinates&quot;: [ -81.093699, 32.074673 ]\n        }, \n        &quot;maxDistance&quot;: 500 * 1609,\n        &quot;key&quot; : &quot;myLocation&quot;,\n        &quot;spherical&quot;: true,\n        &quot;distanceField&quot;: &quot;distance&quot;,\n        &quot;distanceMultiplier&quot;: 0.000621371\n    }}\n]).pretty()\n</code></pre>\n<blockquote>\n<p>&quot;This allows you to specify &quot;distanceField&quot; which will produce another\nfield in the output documents containing the distance from the queried\npoint. You can also use &quot;distanceMultiplier&quot; to apply any conversion\nto the output distance as required ( i.e meters to miles, and noting\nthat all GeoJSON distances are returned in meters )</p>\n<p>There is also the geoNear command with similar options, but it of\ncourse does not return a cursor as output.</p>\n<p>if you have more than one 2dsphere, you should specify a &quot;key&quot;.&quot;</p>\n</blockquote>\n<hr />\n<p>I have this working on the frontend to calculate distance in km</p>\n<p><a href=\"https://stackoverflow.com/questions/27928/calculate-distance-between-two-latitude-longitude-points-haversine-formula/27943#27943\">Calculate distance between two latitude-longitude points? (Haversine formula)</a></p>\n<p>using the ‘Haversine’ formula</p>\n<pre><code>function getDistanceFromLatLonInKm(lat1,lon1,lat2,lon2) {\n  var R = 6371; // Radius of the earth in km\n  var dLat = deg2rad(lat2-lat1);  // deg2rad below\n  var dLon = deg2rad(lon2-lon1); \n  var a = \n    Math.sin(dLat/2) * Math.sin(dLat/2) +\n    Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * \n    Math.sin(dLon/2) * Math.sin(dLon/2)\n    ; \n  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); \n  var d = R * c; // Distance in km\n  return d;\n}\n\nfunction deg2rad(deg) {\n  return deg * (Math.PI/180)\n}\n</code></pre>\n<hr />\n<p>28th March 2023\ncurrent research</p>\n<p>I am working on a mongobdb application - using Java springboot.</p>\n<p>Its a user website -- where members will log in and be able to search/filter/sort for other members.</p>\n<p>I've started building an api with basic queries --</p>\n<p>I need to complete part of the api to allow you to sort via distance. Each user has lat/lng details -- I believe its a case of building an aggregate query.</p>\n<p><a href=\"https://stackoverflow.com/questions/75825625/aggerate-distance-in-a-query-that-sorts-via-distance-between-a-logged-in-user-an\">Aggerate distance in a query that sorts via distance between a logged in user and user lists using mongodb/java springboot</a></p>\n<hr />\n<ul>\n<li>Handle the distance sorting -- aggregate query part.</li>\n<li>I want to clean the codebase up - as there are separate apis made to do similar/same searches but for specific filters -- getUsers, getFavs, getBlocks, getViewedMe -</li>\n<li>Also make pagination options optional -(or have a part of the code in its own function to isolate it with optional pagination handling - aka reduce repeated code effort)- so I could acquire ALL user data and not chunks of it for analysis - again similar searches/same but scalable - aka provide just 5 of the latest results, provide paginated data with or with sorting/filtering.</li>\n<li>Be able to add multiple types of filters -- with AND and OR operations -- image only, blonde hair, blue eyes, ethnicities</li>\n</ul>\n<hr />\n<p>-- so you can see here -- that the other cases work - because they are actual fields --- lastLoginAt, createdAt ----- etc.. -- whereas distance is like a virtual field that needs to be made -- I think with the aggregate</p>\n<pre><code>String field = &quot;&quot;;//createdAt\nswitch (sort_by) {\ncase &quot;1&quot;:\nSystem.out.println(&quot;Distance&quot;);\nbreak;\ncase &quot;2&quot;:\nSystem.out.println(&quot;Last online&quot;);\nfield = &quot;lastLoginAt&quot;;\nbreak;\ncase &quot;3&quot;:\nSystem.out.println(&quot;Latest joined&quot;);\nfield = &quot;createdAt&quot;;\nbreak;\ncase &quot;4&quot;:\nSystem.out.println(&quot;Newest photo&quot;);\nfield = &quot;newestImageAt&quot;;\nbreak;\ncase &quot;5&quot;:\nSystem.out.println(&quot;Recently Updated&quot;);\nfield = &quot;updatedAt&quot;;\nbreak;\ndefault:\nSystem.out.println(&quot;default&quot;);\nfield = &quot;createdAt&quot;;\n}\n\nQuery query = new Query();\n\nlong totalUsercount = MongoApp.mongoOps().count(query, Person.class);\nSystem.out.println(&quot;totalUsercount &quot;+ totalUsercount);\n\n///default filters (only active users, no admins, no self)\nquery = addDefaultFilters(query, loggedInUser);\n///default filters\n\n//country filter\n//query.addCriteria(Criteria.where(&quot;country&quot;).is(&quot;AR&quot;));\n\nquery.with(Sort.by(Sort.Direction.DESC, field));\n</code></pre>\n<hr />\n<p>&quot;MongoDB Compass terminal which is great to test out queries and aggregations&quot;</p>\n<p><a href=\"https://i.stack.imgur.com/ivmww.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ivmww.png\" alt=\"enter image description here\" /></a></p>\n<p>Added here documentations for indexes in mongodb and the 2dsphere index type.</p>\n<p>2dshpere: <a href=\"https://www.mongodb.com/docs/manual/core/2dsphere/#:%7E:text=A%202dsphere%20index%20supports%20queries,geospatial%20queries%2C%20see%20Geospatial%20Queries\" rel=\"nofollow noreferrer\">https://www.mongodb.com/docs/manual/core/2dsphere/#:~:text=A%202dsphere%20index%20supports%20queries,geospatial%20queries%2C%20see%20Geospatial%20Queries</a>.\nIndexes: <a href=\"https://www.mongodb.com/docs/manual/indexes/\" rel=\"nofollow noreferrer\">https://www.mongodb.com/docs/manual/indexes/</a></p>\n<p>The 2dsphere index is required for MongoDB's $geoNear aggregation stage to work correctly with geospatial data. This is because $geoNear uses the 2dsphere index to efficiently perform geospatial queries</p>\n<p>there is already a default filter in place</p>\n<pre><code>public Query addDefaultFilters(Query query, Person loggedInUser) {\n\n///default filters\n//only show isActive users\nquery.addCriteria(Criteria.where(&quot;isActive&quot;).is(true));\n\n//dont show admins\nquery.addCriteria(Criteria.where(&quot;role&quot;).ne(&quot;ROLE_ADMIN&quot;));\n\n//dont show yourself - loggedin user excluded from list\nquery.addCriteria(Criteria.where(&quot;id&quot;).ne(loggedInUser.getId()));\n///default filters\n\nreturn query;\n}\n</code></pre>\n<p>--</p>\n<pre><code>Query query = new Query();\n\nlong totalUsercount = MongoApp.mongoOps().count(query, Person.class);\nSystem.out.println(&quot;totalUsercount &quot;+ totalUsercount);\n\n///default filters (only active users, no admins, no self)\nquery = addDefaultFilters(query, loggedInUser);\n///default filters\n\n//country filter\n//query.addCriteria(Criteria.where(&quot;country&quot;).is(&quot;AR&quot;));\n\nquery.with(Sort.by(Sort.Direction.DESC, field));\n\nPageable pageable = PageRequest.of(page, size);\nList totalPeople = new ArrayList();\ntotalPeople = queryPeopleAddImages(totalPeople, query);\nlong totalCount = totalPeople.size();\nSystem.out.println(&quot;xxxxxxxxxxxxxtotalCount &quot;+totalCount);\nquery.with(pageable);\n\n// List People\n//List people = MongoApp.mongoOps().findAll(Person.class);\nList people = new ArrayList();\npeople = queryPeopleAddImages(people, query);\n</code></pre>\n<hr />\n<p><a href=\"https://i.stack.imgur.com/VQdXg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VQdXg.png\" alt=\"enter image description here\" /></a></p>\n<hr />\n<p><a href=\"https://i.stack.imgur.com/9cIzk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9cIzk.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/HmGr4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HmGr4.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/2zOsT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2zOsT.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/3yZU9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3yZU9.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/ZvjTm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZvjTm.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/6yXcZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6yXcZ.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/foOxF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/foOxF.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/0p25x.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0p25x.png\" alt=\"enter image description here\" /></a></p>\n<hr />\n<p>another java example\n<a href=\"https://i.stack.imgur.com/CDIbF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CDIbF.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/OYPst.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OYPst.png\" alt=\"enter image description here\" /></a></p>\n<hr />\n<p>10th April 2023</p>\n<p>there was another solution given to me that may solve these issues -please evaluate.</p>\n<hr />\n<p>To handle the distance sorting using MongoDB aggregation query, you can use the following steps:</p>\n<p>Create a GeoJSON object for the user's location, using the coordinates stored in the user's document.</p>\n<p>Use the $geoNear stage in the aggregation pipeline to find other users who are within a certain radius of the user's location. You can specify the maximum distance and the field that contains the other users' location information.</p>\n<p>Use the $sort stage to sort the results based on the distance from the user's location.</p>\n<p>Here's an example code snippet that demonstrates how you can implement this in Java using Spring Boot and the MongoDB Java driver:</p>\n<hr />\n<pre><code>import org.springframework.data.mongodb.core.geo.GeoJsonPoint;\nimport org.springframework.data.mongodb.core.query.Criteria;\nimport org.springframework.data.mongodb.core.query.Query;\nimport org.springframework.data.mongodb.core.aggregation.Aggregation;\nimport org.springframework.data.mongodb.core.aggregation.AggregationResults;\nimport org.springframework.data.mongodb.core.aggregation.GeoNearAggregation;\nimport org.springframework.data.mongodb.core.aggregation.SortOperation;\nimport org.springframework.data.mongodb.core.aggregation.TypedAggregation;\n\nimport static org.springframework.data.mongodb.core.aggregation.Aggregation.*;\n\nGeoJsonPoint userLocation = new GeoJsonPoint(user.getLongitude(), user.getLatitude());\ndouble maxDistance = 10000.0; // 10km\n\nGeoNearAggregation geoNearAggregation = new GeoNearAggregation(\n    near(userLocation).spherical(true).maxDistance(maxDistance),\n    &quot;distance&quot;\n);\n\nSortOperation sortOperation = sort(Sort.by(&quot;distance&quot;));\n\nTypedAggregation[User] aggregation = newAggregation(User.class, geoNearAggregation, sortOperation);\nAggregationResults[User] results = mongoTemplate.aggregate(aggregation, User.class);\nList[User] nearbyUsers = results.getMappedResults();\n</code></pre>\n<hr />\n<p>To clean up the codebase and reduce repeated code effort, you can create a generic search function that takes in filter parameters and pagination options as parameters. You can use the Query class to build up the filter criteria and the PageRequest class to handle pagination.</p>\n<p>Here's an example code snippet that demonstrates how you can implement this:</p>\n<hr />\n<pre><code>public Page[User] searchUsers(String keyword, List[Criteria] filters, Sort sort, int page, int size) {\n    Query query = new Query();\n\n    // Add the keyword search criteria\n    if (keyword != null) {\n        Criteria keywordCriteria = new Criteria()\n            .orOperator(\n                Criteria.where(&quot;firstName&quot;).regex(keyword, &quot;i&quot;),\n                Criteria.where(&quot;lastName&quot;).regex(keyword, &quot;i&quot;)\n            );\n        query.addCriteria(keywordCriteria);\n    }\n\n    // Add the filters\n    if (filters != null) {\n        Criteria filterCriteria = new Criteria().andOperator(filters.toArray(new Criteria[0]));\n        query.addCriteria(filterCriteria);\n    }\n\n    // Add the pagination options\n    PageRequest pageRequest = PageRequest.of(page, size, sort);\n\n    query.with(pageRequest);\n\n    return mongoTemplate.find(query, User.class, &quot;users&quot;);\n}\n</code></pre>\n"},{"tags":["java","editorconfig"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1681161188,"post_id":75976157,"comment_id":134009135,"body_markdown":"I don&#39;t use IntelliJ, so no idea how to enforce the rules there. I&#39;d just have the linter run in a pre-commit hook. Check the pre-commit framework.","body":"I don&#39;t use IntelliJ, so no idea how to enforce the rules there. I&#39;d just have the linter run in a pre-commit hook. Check the pre-commit framework."}],"owner":{"account_id":16637097,"reputation":1,"user_id":12023509,"display_name":"mani shankar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":134,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681121361,"creation_date":1681121361,"question_id":75976157,"body_markdown":"I have configured editorconfig in intellij which is helping me in formatting the code as i require. Is there any way i can throw compile time errors when .editorconfig rules are not followed. \r\n\r\nI went through some existing plugins they are fine but wondering if there is any formal way or universally accpeted way. It would be helpful if anyone can point be in right way.\r\n\r\nFollowing plugin is close to my requirements.\r\n[editorconfig-maven-plugin](https://ec4j.github.io/editorconfig-maven-plugin/)","title":"how to enforce that a java/spring boot project is following .editorconfig rules","body":"<p>I have configured editorconfig in intellij which is helping me in formatting the code as i require. Is there any way i can throw compile time errors when .editorconfig rules are not followed.</p>\n<p>I went through some existing plugins they are fine but wondering if there is any formal way or universally accpeted way. It would be helpful if anyone can point be in right way.</p>\n<p>Following plugin is close to my requirements.\n<a href=\"https://ec4j.github.io/editorconfig-maven-plugin/\" rel=\"nofollow noreferrer\">editorconfig-maven-plugin</a></p>\n"},{"tags":["java","spring","design-patterns","service","dto"],"answers":[{"tags":[],"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681120889,"creation_date":1681120889,"answer_id":75976084,"question_id":75975645,"body_markdown":"It looks like you drew the boundaries between the services based on the data model rather than use cases. One option would be to change them and allow OperationService to save Posts (or even rename/ create a different service called CreateOperationSevice or CreateOperationUseCase for this purpose). If you find this approach interesting, take a look at this [video][1].\r\n\r\nOn the other hand, if you want to keep them decoupled like this, you can create a common facade that calls the 2 services in turn, inside the same transaction. something like this:\r\n\r\n    @Component\r\n    class OperationFacade {\r\n        final OperationService operationService;\r\n        final PostService postService;\r\n    \r\n        @Transactional\r\n        public void createOperation(CreateOperationDto dto) {\r\n            long operationId = operationService.save(dto.operation());\r\n            postService.saveAll(dto.posts(), operationId);\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://www.youtube.com/watch?v=YDNR_gfBk0Q","title":"Service pattern store one to one with Dtos","body":"<p>It looks like you drew the boundaries between the services based on the data model rather than use cases. One option would be to change them and allow OperationService to save Posts (or even rename/ create a different service called CreateOperationSevice or CreateOperationUseCase for this purpose). If you find this approach interesting, take a look at this <a href=\"https://www.youtube.com/watch?v=YDNR_gfBk0Q\" rel=\"nofollow noreferrer\">video</a>.</p>\n<p>On the other hand, if you want to keep them decoupled like this, you can create a common facade that calls the 2 services in turn, inside the same transaction. something like this:</p>\n<pre><code>@Component\nclass OperationFacade {\n    final OperationService operationService;\n    final PostService postService;\n\n    @Transactional\n    public void createOperation(CreateOperationDto dto) {\n        long operationId = operationService.save(dto.operation());\n        postService.saveAll(dto.posts(), operationId);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":9201088,"reputation":113,"user_id":6837992,"display_name":"Jan K&#252;ck"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75976084,"answer_count":1,"score":0,"last_activity_date":1681120889,"creation_date":1681116888,"question_id":75975645,"body_markdown":"I have a OperationService and a PostService, they handle some operations and business logic about operations and posts. On database level the operation has a one to one relationship to a post. What is the design approach to persists this? My services return only Dtos. And no concrete database entities. For example i persists a operation with a CreateOperationDto but in this there should only the id of the post. Than i have the postservice how return me a PostDto but i can not persists the PostDto directly. Hopefully can help someone.","title":"Service pattern store one to one with Dtos","body":"<p>I have a OperationService and a PostService, they handle some operations and business logic about operations and posts. On database level the operation has a one to one relationship to a post. What is the design approach to persists this? My services return only Dtos. And no concrete database entities. For example i persists a operation with a CreateOperationDto but in this there should only the id of the post. Than i have the postservice how return me a PostDto but i can not persists the PostDto directly. Hopefully can help someone.</p>\n"},{"tags":["java","spring","spring-boot","parameters"],"comments":[{"owner":{"account_id":23128,"reputation":13127,"user_id":57719,"display_name":"Chin Huang"},"score":2,"creation_date":1681118301,"post_id":75975664,"comment_id":134000853,"body_markdown":"Why invent a paging parameters DTO when Spring Boot auto-configures support for [Pageable as a controller method argument](https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#core.web.basic.paging-and-sorting)?","body":"Why invent a paging parameters DTO when Spring Boot auto-configures support for <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#core.web.basic.paging-and-sorting\" rel=\"nofollow noreferrer\">Pageable as a controller method argument</a>?"},{"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"score":0,"creation_date":1681119734,"post_id":75975664,"comment_id":134001072,"body_markdown":"the API should look the same. maybe they did the change for a different display in swagger-ui / openAPI?","body":"the API should look the same. maybe they did the change for a different display in swagger-ui / openAPI?"},{"owner":{"account_id":22506547,"reputation":965,"user_id":16702058,"display_name":"Hi computer"},"score":0,"creation_date":1681121910,"post_id":75975664,"comment_id":134001497,"body_markdown":"@ChinHuang Good to know, but I think even if I changed to Pageable, it is still considered as violating the rules","body":"@ChinHuang Good to know, but I think even if I changed to Pageable, it is still considered as violating the rules"},{"owner":{"account_id":22506547,"reputation":965,"user_id":16702058,"display_name":"Hi computer"},"score":0,"creation_date":1681122453,"post_id":75975664,"comment_id":134001574,"body_markdown":"@EmanuelTrandafir Yeah, probably. If you got a minute, could you like share some information on the difference it will make to swagger ui when provided with / without PageDTO?","body":"@EmanuelTrandafir Yeah, probably. If you got a minute, could you like share some information on the difference it will make to swagger ui when provided with / without PageDTO?"}],"owner":{"account_id":22506547,"reputation":965,"user_id":16702058,"display_name":"Hi computer"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":145,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681120769,"creation_date":1681117025,"question_id":75975664,"body_markdown":"I&#39;m working on a Spring project, and the class shown below is one that some GET requests use as &quot;paging parameters.&quot;\r\n\r\n```\r\n// PageDTO.java\r\npublic class PageDTO {\r\n    int size = 10;\r\n    int current = 0;\r\n}\r\n\r\n// RoomController.java - how I would use PageDTO\r\n@GetMapping(&quot;get/rooms&quot;)\r\npublic List&lt;Room&gt; getUserRooms(\r\n    PageDTO pageDTO, \r\n    @RequestParam(value = &quot;user_id&quot;, required = true) Integer userId\r\n) {\r\n    List&lt;Room&gt; rooms = roomMapper.getByUserId(userId, pageDTO.getCurrent(), pageDTO.getSize());\r\n    return rooms;\r\n}\r\n```\r\n\r\nProblem is: \r\n\r\nAccording to the regulations we use at work, PageDTO for GET requests is a bad design, but it did not explain why. The parameters should be changed to:\r\n\r\n```\r\nPageDTO pageDTO, \r\n@RequestParam(value = &quot;user_id&quot;, required = true) Integer userId\r\n\r\n// -&gt;\r\n\r\n@RequestParam(value = &quot;current&quot;, defaultValue = &quot;0&quot;, required = false) Integer current,\r\n@RequestParam(value = &quot;size&quot;, defaultValue = &quot;10&quot;, required = false) Integer size,\r\n@RequestParam(value = &quot;user_id&quot;, required = true) Integer userId\r\n```\r\n\r\nI see a lot of same code on Internet that use PageDTO or other similar classes. Can you clarify whether this design has any drawbacks? why it might be detrimental?","title":"Spring paging parameters put to one DTO","body":"<p>I'm working on a Spring project, and the class shown below is one that some GET requests use as &quot;paging parameters.&quot;</p>\n<pre><code>// PageDTO.java\npublic class PageDTO {\n    int size = 10;\n    int current = 0;\n}\n\n// RoomController.java - how I would use PageDTO\n@GetMapping(&quot;get/rooms&quot;)\npublic List&lt;Room&gt; getUserRooms(\n    PageDTO pageDTO, \n    @RequestParam(value = &quot;user_id&quot;, required = true) Integer userId\n) {\n    List&lt;Room&gt; rooms = roomMapper.getByUserId(userId, pageDTO.getCurrent(), pageDTO.getSize());\n    return rooms;\n}\n</code></pre>\n<p>Problem is:</p>\n<p>According to the regulations we use at work, PageDTO for GET requests is a bad design, but it did not explain why. The parameters should be changed to:</p>\n<pre><code>PageDTO pageDTO, \n@RequestParam(value = &quot;user_id&quot;, required = true) Integer userId\n\n// -&gt;\n\n@RequestParam(value = &quot;current&quot;, defaultValue = &quot;0&quot;, required = false) Integer current,\n@RequestParam(value = &quot;size&quot;, defaultValue = &quot;10&quot;, required = false) Integer size,\n@RequestParam(value = &quot;user_id&quot;, required = true) Integer userId\n</code></pre>\n<p>I see a lot of same code on Internet that use PageDTO or other similar classes. Can you clarify whether this design has any drawbacks? why it might be detrimental?</p>\n"},{"tags":["java","methods","java-8","java-stream","option-type"],"comments":[{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":2,"creation_date":1530010023,"post_id":51040929,"comment_id":89072997,"body_markdown":"what are you asking? this is really unclear, and did you read the docs and numerous other posts here about one and the other?","body":"what are you asking? this is really unclear, and did you read the docs and numerous other posts here about one and the other?"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":2,"creation_date":1530011528,"post_id":51040929,"comment_id":89073870,"body_markdown":"They perform very similar operations, hence the same name. The main difference is that one requires an `Optional` and a method that returns an `Optional` while the other requires a `Stream` and a method that returns a `Stream`.","body":"They perform very similar operations, hence the same name. The main difference is that one requires an <code>Optional</code> and a method that returns an <code>Optional</code> while the other requires a <code>Stream</code> and a method that returns a <code>Stream</code>."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1530011659,"post_id":51040929,"comment_id":89073964,"body_markdown":"Could you elaborate your examples into [MCVE](https://stackoverflow.com/help/mcve)? That would help.","body":"Could you elaborate your examples into <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>? That would help."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1530096974,"post_id":51040929,"comment_id":89111875,"body_markdown":"Also the stacktrace from the exception that you say that you get would be helpful.","body":"Also the stacktrace from the exception that you say that you get would be helpful."},{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":1,"creation_date":1530102409,"post_id":51040929,"comment_id":89115324,"body_markdown":"It would be good that you clarify your question to indicate exactly what you are trying to do, and give self-sufficient code snippets that show your problem ([mcve]). Even if you already got your answer, that will be helpful for future readers.","body":"It would be good that you clarify your question to indicate exactly what you are trying to do, and give self-sufficient code snippets that show your problem (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>). Even if you already got your answer, that will be helpful for future readers."}],"answers":[{"tags":[],"owner":{"account_id":393510,"reputation":3285,"user_id":755401,"accept_rate":82,"display_name":"arthur"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1681120498,"creation_date":1530012692,"answer_id":51041866,"question_id":51040929,"body_markdown":"`Optional` and `Stream` are two different beasts intended for separated purposes.\r\n\r\n[`Optional`][1] is a ***wrapper*** that holds a result that can be or not be &quot;present&quot; (`null`) and provided methods to deal which these two  conditions (present, or Not Present).\r\n\r\nThe `flatMap()` operation is an operation applied to the value held in your `Optional` wrapper. That operation must return an `Optional` as a result:\r\n\r\n    Optional&lt;String&gt; s = Optional.of(&quot;test input&quot;);\r\n    s.flatMap( input -&gt; Optional.of(input));\r\n\r\nStream&#39;s [`flatMap()`][2] helps you to get and process nested elements of list elements. \r\n\r\n---\r\n### Additional reading\r\n* [What is the difference between Optional.flatMap and Optional.map?][3]\r\n* [What&#39;s the difference between map() and flatMap() methods in Java 8?][4]\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#flatMap-java.util.function.Function-\r\n  [3]: https://stackoverflow.com/questions/30864583/java-8-difference-between-optional-flatmap-and-optional-map\r\n  [4]: https://stackoverflow.com/questions/26684562/whats-the-difference-between-map-and-flatmap-methods-in-java-8/49297863#49297863","title":"Whats the difference between Optional.flatMap() and Stream.flatMap()","body":"<p><code>Optional</code> and <code>Stream</code> are two different beasts intended for separated purposes.</p>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\" rel=\"nofollow noreferrer\"><code>Optional</code></a> is a <em><strong>wrapper</strong></em> that holds a result that can be or not be &quot;present&quot; (<code>null</code>) and provided methods to deal which these two  conditions (present, or Not Present).</p>\n<p>The <code>flatMap()</code> operation is an operation applied to the value held in your <code>Optional</code> wrapper. That operation must return an <code>Optional</code> as a result:</p>\n<pre><code>Optional&lt;String&gt; s = Optional.of(&quot;test input&quot;);\ns.flatMap( input -&gt; Optional.of(input));\n</code></pre>\n<p>Stream's <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#flatMap-java.util.function.Function-\" rel=\"nofollow noreferrer\"><code>flatMap()</code></a> helps you to get and process nested elements of list elements.</p>\n<hr />\n<h3>Additional reading</h3>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/30864583/java-8-difference-between-optional-flatmap-and-optional-map\">What is the difference between Optional.flatMap and Optional.map?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/26684562/whats-the-difference-between-map-and-flatmap-methods-in-java-8/49297863#49297863\">What's the difference between map() and flatMap() methods in Java 8?</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":25684,"reputation":3449,"user_id":66207,"accept_rate":100,"display_name":"keuleJ"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1530023421,"creation_date":1530023421,"answer_id":51045392,"question_id":51040929,"body_markdown":"From the javadoc: \r\nOptional.flatMap:\r\n\r\n    flatMap(Function&lt;? super T,Optional&lt;U&gt;&gt; mapper)\r\nIf a value is present, apply the provided Optional-bearing mapping function to it, return that result, otherwise return an empty Optional.\r\n\r\nStream.flatMap:\r\n\r\n    flatMap(Function&lt;? super T,? extends Stream&lt;? extends R&gt;&gt; mapper)\r\nReturns a stream consisting of the results of replacing each element of this stream with the contents of a mapped stream produced by applying the provided mapping function to each element.\r\n\r\nSo the main difference is, that one returns a Stream, the other an Optional","title":"Whats the difference between Optional.flatMap() and Stream.flatMap()","body":"<p>From the javadoc: \nOptional.flatMap:</p>\n\n<pre><code>flatMap(Function&lt;? super T,Optional&lt;U&gt;&gt; mapper)\n</code></pre>\n\n<p>If a value is present, apply the provided Optional-bearing mapping function to it, return that result, otherwise return an empty Optional.</p>\n\n<p>Stream.flatMap:</p>\n\n<pre><code>flatMap(Function&lt;? super T,? extends Stream&lt;? extends R&gt;&gt; mapper)\n</code></pre>\n\n<p>Returns a stream consisting of the results of replacing each element of this stream with the contents of a mapped stream produced by applying the provided mapping function to each element.</p>\n\n<p>So the main difference is, that one returns a Stream, the other an Optional</p>\n"},{"tags":[],"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1530107512,"creation_date":1530097756,"answer_id":51061263,"question_id":51040929,"body_markdown":"It’s hard to be sure from your code snippets where we don’t know the types of the variables you use nor the return types of the methods. But I *think* that the source of your error is that you are trying to pass a lambda that returns a `Stream` to `Optional.flatMap()`.\r\n\r\nLet’s look at `Stream` first. [`Stream.flatMap()`](https://docs.oracle.com/javase/9/docs/api/java/util/stream/Stream.html#flatMap-java.util.function.Function-) takes a function that returns a `Stream`. This seems to be exactly what you are giving it in your first code snippet.\r\n\r\n`Optional` on the other hand: [`Optional.flatMap()`](https://docs.oracle.com/javase/9/docs/api/java/util/Optional.html#flatMap-java.util.function.Function-) requires a function that returns an `Optional`. If `getBrowse()` returns an `Optional`, then what you pass to `Optional.flatMap` is `uri -&gt; physicalInventoryClient.getSublocationsByIds(uri).stream()`. This looks like your lambda returns a stream, not an `Optional`. When I try the same in my Eclipse, I get a compile error like the following:\r\n\r\n&gt; The method flatMap(Function&amp;lt;? super String,? extends Optional&amp;lt;?\r\n&gt; extends U&gt;&gt;) in the type Optional&amp;lt;String&gt; is not applicable for the\r\n&gt; arguments ((Object x) -&gt; {})\r\n\r\nThe solution? From Java 9 `Optional` has [a `stream` method](https://docs.oracle.com/javase/9/docs/api/java/util/Optional.html#stream--) that will probably let you achieve what you are trying. Again, without knowing your code it’s hard to suggest, but probably something like:\r\n\r\n        List&lt;SublocationBrowseDTO&gt; collect2 = physicalInventoryClient.getSublocationsByLocation(masterLocation.get(), null)\r\n                .getBrowse()\r\n                .stream()\r\n                .flatMap(uri -&gt; physicalInventoryClient.getSublocationsByIds(uri).stream())\r\n                .collect(Collectors.toList());\r\n\r\n**Edit:** Alternative without stream:\r\n\r\n        List&lt;SublocationBrowseDTO&gt; collect2 = physicalInventoryClient.getSublocationsByLocation(masterLocation.get(), null)\r\n                .getBrowse()\r\n                .map(uri -&gt; physicalInventoryClient.getSublocationsByIds(uri))\r\n                .orElse(Collections.emptyList());\r\n\r\nThe latter version requires that `getSublocationsById()` returns a list, but can probably be modified to work if the return type is something else. IMHO it’s a bit simpler.","title":"Whats the difference between Optional.flatMap() and Stream.flatMap()","body":"<p>It’s hard to be sure from your code snippets where we don’t know the types of the variables you use nor the return types of the methods. But I <em>think</em> that the source of your error is that you are trying to pass a lambda that returns a <code>Stream</code> to <code>Optional.flatMap()</code>.</p>\n\n<p>Let’s look at <code>Stream</code> first. <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/stream/Stream.html#flatMap-java.util.function.Function-\" rel=\"nofollow noreferrer\"><code>Stream.flatMap()</code></a> takes a function that returns a <code>Stream</code>. This seems to be exactly what you are giving it in your first code snippet.</p>\n\n<p><code>Optional</code> on the other hand: <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/Optional.html#flatMap-java.util.function.Function-\" rel=\"nofollow noreferrer\"><code>Optional.flatMap()</code></a> requires a function that returns an <code>Optional</code>. If <code>getBrowse()</code> returns an <code>Optional</code>, then what you pass to <code>Optional.flatMap</code> is <code>uri -&gt; physicalInventoryClient.getSublocationsByIds(uri).stream()</code>. This looks like your lambda returns a stream, not an <code>Optional</code>. When I try the same in my Eclipse, I get a compile error like the following:</p>\n\n<blockquote>\n  <p>The method flatMap(Function&lt;? super String,? extends Optional&lt;?\n  extends U>>) in the type Optional&lt;String> is not applicable for the\n  arguments ((Object x) -> {})</p>\n</blockquote>\n\n<p>The solution? From Java 9 <code>Optional</code> has <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/Optional.html#stream--\" rel=\"nofollow noreferrer\">a <code>stream</code> method</a> that will probably let you achieve what you are trying. Again, without knowing your code it’s hard to suggest, but probably something like:</p>\n\n<pre><code>    List&lt;SublocationBrowseDTO&gt; collect2 = physicalInventoryClient.getSublocationsByLocation(masterLocation.get(), null)\n            .getBrowse()\n            .stream()\n            .flatMap(uri -&gt; physicalInventoryClient.getSublocationsByIds(uri).stream())\n            .collect(Collectors.toList());\n</code></pre>\n\n<p><strong>Edit:</strong> Alternative without stream:</p>\n\n<pre><code>    List&lt;SublocationBrowseDTO&gt; collect2 = physicalInventoryClient.getSublocationsByLocation(masterLocation.get(), null)\n            .getBrowse()\n            .map(uri -&gt; physicalInventoryClient.getSublocationsByIds(uri))\n            .orElse(Collections.emptyList());\n</code></pre>\n\n<p>The latter version requires that <code>getSublocationsById()</code> returns a list, but can probably be modified to work if the return type is something else. IMHO it’s a bit simpler.</p>\n"}],"owner":{"account_id":10451564,"reputation":69,"user_id":7705012,"display_name":"Jakub"},"comment_count":5,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2060,"favorite_count":0,"down_vote_count":3,"up_vote_count":4,"closed_date":1530102245,"accepted_answer_id":51061263,"answer_count":3,"score":1,"last_activity_date":1681120498,"creation_date":1530009777,"question_id":51040929,"body_markdown":"What is the difference between Optional.flatMap() and Stream.flatMap().\r\n\r\nCorrect flatMap on Stream:\r\n\r\n        List&lt;ObjectDTO&gt; collect = types.stream()\r\n                .flatMap(a -&gt; client.getSthById(new URI(a)).stream())\r\n                .collect(Collectors.toList());\r\n\r\nException while using flatMap on Optional:\r\n\r\n            List&lt;ObjectDTO&gt; collect2 = client.getSthByObj(obje.get(), null).getBrowse()\r\n                    .flatMap(uri -&gt; client.getSthById(uri).stream())\r\n                    .collect(Collectors.toList());\r\n\r\nWhy can&#39;t I use it in the same way?","title":"Whats the difference between Optional.flatMap() and Stream.flatMap()","body":"<p>What is the difference between Optional.flatMap() and Stream.flatMap().</p>\n\n<p>Correct flatMap on Stream:</p>\n\n<pre><code>    List&lt;ObjectDTO&gt; collect = types.stream()\n            .flatMap(a -&gt; client.getSthById(new URI(a)).stream())\n            .collect(Collectors.toList());\n</code></pre>\n\n<p>Exception while using flatMap on Optional:</p>\n\n<pre><code>        List&lt;ObjectDTO&gt; collect2 = client.getSthByObj(obje.get(), null).getBrowse()\n                .flatMap(uri -&gt; client.getSthById(uri).stream())\n                .collect(Collectors.toList());\n</code></pre>\n\n<p>Why can't I use it in the same way?</p>\n"},{"tags":["java","android","view","onclicklistener","lottie"],"answers":[{"tags":[],"owner":{"account_id":6539531,"reputation":55,"user_id":5057663,"display_name":"naqi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681120368,"creation_date":1681120131,"answer_id":75976010,"question_id":69056856,"body_markdown":"    animationView.isClickable = true\r\n\r\nYou have to make it clickable so that no event can pass through the animation. ","title":"How to prevent click through on LottieAnimationView","body":"<pre><code>animationView.isClickable = true\n</code></pre>\n<p>You have to make it clickable so that no event can pass through the animation.</p>\n"}],"owner":{"account_id":14658045,"reputation":23,"user_id":11503443,"display_name":"Hoax"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":158,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1681120368,"creation_date":1630770983,"question_id":69056856,"body_markdown":"     public void  showProgress(LottieAnimationView lottieview) {\r\n        lottieview.setVisibility(LottieAnimationView.VISIBLE);\r\n        lottieview.bringToFront();\r\n        lottieview.setAnimation(R.raw.wesocialdot);\r\n        lottieview.setAlpha(0.85f);\r\n        lottieview.setRepeatMode(LottieDrawable.REVERSE);\r\n        lottieview.setRepeatCount(9999999);\r\n        lottieview.setEnabled(false);\r\n        lottieview.setClickable(false);\r\n        lottieview.playAnimation();\r\n\r\n    }\r\n\r\nI have a method for displaying my LottieView, but the issue i have now...Whenever i click on the LottieAnimationView when it is visible, the click passes onto the views below it.\r\n\r\nI have tried\r\n\r\n    lottieview.setEnabled(false);\r\n    lottieview.setClickable(false);\r\n\r\nIt is still not working...","title":"How to prevent click through on LottieAnimationView","body":"<pre><code> public void  showProgress(LottieAnimationView lottieview) {\n    lottieview.setVisibility(LottieAnimationView.VISIBLE);\n    lottieview.bringToFront();\n    lottieview.setAnimation(R.raw.wesocialdot);\n    lottieview.setAlpha(0.85f);\n    lottieview.setRepeatMode(LottieDrawable.REVERSE);\n    lottieview.setRepeatCount(9999999);\n    lottieview.setEnabled(false);\n    lottieview.setClickable(false);\n    lottieview.playAnimation();\n\n}\n</code></pre>\n<p>I have a method for displaying my LottieView, but the issue i have now...Whenever i click on the LottieAnimationView when it is visible, the click passes onto the views below it.</p>\n<p>I have tried</p>\n<pre><code>lottieview.setEnabled(false);\nlottieview.setClickable(false);\n</code></pre>\n<p>It is still not working...</p>\n"},{"tags":["java","spring","spring-boot","hibernate"],"answers":[{"tags":[],"owner":{"account_id":10491586,"reputation":179,"user_id":7864377,"display_name":"Dmitry Pukhov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637004932,"creation_date":1637004932,"answer_id":69979904,"question_id":69977910,"body_markdown":"Your application.yml contains logger configuration. It states that all classes in package org.hibernate.SQL will have log level *debug* unless the log level is not defined more specifically, i.e. configuring log level for org.hibernate.SQL.XXX will override log level inherited from org.hibernate.SQL.\r\n\r\nThere are multiple log levels: error, warn, info, debug, trace.\r\n- Message with level *error* has maximum importance so it will be printed always (unless you disable logging at all).\r\n- Message with level *info* will be printed if class log level is one of *info*, *debug*, *trace*.\r\n- Message with level *trace* has near to zero importance: it will be printed if and only if log level is set to *trace*.\r\n\r\nThe link you provided gives enough details to understand what will be logged. To check real logs you have to run your application and execute some SQL query using Hibernate.","title":"What means the logging.level.org.hibernate.type option in Spring boot","body":"<p>Your application.yml contains logger configuration. It states that all classes in package org.hibernate.SQL will have log level <em>debug</em> unless the log level is not defined more specifically, i.e. configuring log level for org.hibernate.SQL.XXX will override log level inherited from org.hibernate.SQL.</p>\n<p>There are multiple log levels: error, warn, info, debug, trace.</p>\n<ul>\n<li>Message with level <em>error</em> has maximum importance so it will be printed always (unless you disable logging at all).</li>\n<li>Message with level <em>info</em> will be printed if class log level is one of <em>info</em>, <em>debug</em>, <em>trace</em>.</li>\n<li>Message with level <em>trace</em> has near to zero importance: it will be printed if and only if log level is set to <em>trace</em>.</li>\n</ul>\n<p>The link you provided gives enough details to understand what will be logged. To check real logs you have to run your application and execute some SQL query using Hibernate.</p>\n"},{"tags":[],"owner":{"account_id":3098417,"reputation":1074,"user_id":2623162,"accept_rate":67,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1681119792,"creation_date":1681116976,"answer_id":75975656,"question_id":69977910,"body_markdown":"You can use\r\n\r\n    logging:\r\n      level:\r\n        org:\r\n          hibernate:\r\n            type: trace   #For prepared statements   \r\nin order to see the values of the data injected (the binding parameters) into the prepared statement.\r\n\r\nInstead of just seeing question marks (&#39;?&#39;):\r\n\r\n    Hibernate: \r\n    insert \r\n    into\r\n        persons\r\n        (age, name, id) \r\n    values\r\n        (?, ?, ?)\r\n\r\nyou can see the actual data injected in the binding parameters:\r\n\r\n    2022-12-07 09:30:41.889 TRACE 8004 [main] o.h.type.descriptor.sql.BasicBinder : binding parameter [1] as [INTEGER] - [10]\r\n    2022-12-07 09:30:41.890 TRACE 8004 [main] o.h.type.descriptor.sql.BasicBinder : binding parameter [2] as [VARCHAR] - [Tom]\r\n    2022-12-07 09:30:41.891 TRACE 8004 [main] o.h.type.descriptor.sql.BasicBinder : binding parameter [3] as [BIGINT] - [12]\r\nThis way you can see that:\r\n\r\n    the first  &quot;?&quot; will get the value of 10\r\n    the second &quot;?&quot; will get the value of &#39;Tom&#39;\r\n    the third  &quot;?&quot; will get the value of 12\r\nFrom https://stackoverflow.com/a/63167967/2623162 and https://howtodoinjava.com/spring-boot/spring-data-jpa-sql-logging/   \r\n\r\n**ANOTHER OPTION** \r\nfrom https://www.baeldung.com/hibernate-logging-levels is to have these in the logback.xml file (or log4j2 if you use log4j2):\r\n\r\n    &lt;logger name=&quot;org.springframework.data.repository.CrudRepository&quot; level=&quot;TRACE&quot;/&gt;\r\n    &lt;logger name=&quot;org.hibernate.type.descriptor.sql&quot; level=&quot;TRACE&quot; /&gt;","title":"What means the logging.level.org.hibernate.type option in Spring boot","body":"<p>You can use</p>\n<pre><code>logging:\n  level:\n    org:\n      hibernate:\n        type: trace   #For prepared statements   \n</code></pre>\n<p>in order to see the values of the data injected (the binding parameters) into the prepared statement.</p>\n<p>Instead of just seeing question marks ('?'):</p>\n<pre><code>Hibernate: \ninsert \ninto\n    persons\n    (age, name, id) \nvalues\n    (?, ?, ?)\n</code></pre>\n<p>you can see the actual data injected in the binding parameters:</p>\n<pre><code>2022-12-07 09:30:41.889 TRACE 8004 [main] o.h.type.descriptor.sql.BasicBinder : binding parameter [1] as [INTEGER] - [10]\n2022-12-07 09:30:41.890 TRACE 8004 [main] o.h.type.descriptor.sql.BasicBinder : binding parameter [2] as [VARCHAR] - [Tom]\n2022-12-07 09:30:41.891 TRACE 8004 [main] o.h.type.descriptor.sql.BasicBinder : binding parameter [3] as [BIGINT] - [12]\n</code></pre>\n<p>This way you can see that:</p>\n<pre><code>the first  &quot;?&quot; will get the value of 10\nthe second &quot;?&quot; will get the value of 'Tom'\nthe third  &quot;?&quot; will get the value of 12\n</code></pre>\n<p>From <a href=\"https://stackoverflow.com/a/63167967/2623162\">https://stackoverflow.com/a/63167967/2623162</a> and <a href=\"https://howtodoinjava.com/spring-boot/spring-data-jpa-sql-logging/\" rel=\"nofollow noreferrer\">https://howtodoinjava.com/spring-boot/spring-data-jpa-sql-logging/</a></p>\n<p><strong>ANOTHER OPTION</strong>\nfrom <a href=\"https://www.baeldung.com/hibernate-logging-levels\" rel=\"nofollow noreferrer\">https://www.baeldung.com/hibernate-logging-levels</a> is to have these in the logback.xml file (or log4j2 if you use log4j2):</p>\n<pre><code>&lt;logger name=&quot;org.springframework.data.repository.CrudRepository&quot; level=&quot;TRACE&quot;/&gt;\n&lt;logger name=&quot;org.hibernate.type.descriptor.sql&quot; level=&quot;TRACE&quot; /&gt;\n</code></pre>\n"}],"owner":{"account_id":20976511,"reputation":159,"user_id":15412354,"display_name":"JinYeong Kim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4138,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":75975656,"answer_count":2,"score":3,"last_activity_date":1681119792,"creation_date":1636994579,"question_id":69977910,"body_markdown":"```\r\nlogging:\r\n  level:\r\n    org.hibernate.SQL: debug\r\n    org.hibernate.type: trace\r\n```\r\nIt is part of my `application.yml` config.  \r\nAnd I was curios about `org.hibernate.type` option.  \r\nSo, I have found the information about this.  \r\nI could only find this link. [jboss doc](https://docs.jboss.org/hibernate/stable/core.old/reference/en/html/configuration-logging.html)  \r\n\r\nI found this option is for tracing binding parameters by programming myself.  \r\nHowever, I want doc or specific explanation.","title":"What means the logging.level.org.hibernate.type option in Spring boot","body":"<pre><code>logging:\n  level:\n    org.hibernate.SQL: debug\n    org.hibernate.type: trace\n</code></pre>\n<p>It is part of my <code>application.yml</code> config.<br />\nAnd I was curios about <code>org.hibernate.type</code> option.<br />\nSo, I have found the information about this.<br />\nI could only find this link. <a href=\"https://docs.jboss.org/hibernate/stable/core.old/reference/en/html/configuration-logging.html\" rel=\"nofollow noreferrer\">jboss doc</a></p>\n<p>I found this option is for tracing binding parameters by programming myself.<br />\nHowever, I want doc or specific explanation.</p>\n"},{"tags":["java","angular","spring-boot","server","tomcat9"],"comments":[{"owner":{"account_id":551394,"reputation":8315,"user_id":916225,"accept_rate":69,"display_name":"seenukarthi"},"score":1,"creation_date":1681101687,"post_id":75974268,"comment_id":133998804,"body_markdown":"You need to check the server log. 500 response means some thing gone wrong at the server side which can be any thing.","body":"You need to check the server log. 500 response means some thing gone wrong at the server side which can be any thing."},{"owner":{"account_id":22808924,"reputation":11,"user_id":16960582,"display_name":"Ashish Vyas"},"score":0,"creation_date":1681103388,"post_id":75974268,"comment_id":133998940,"body_markdown":"@seenukarthi error is not logged in the log of springboot","body":"@seenukarthi error is not logged in the log of springboot"}],"owner":{"account_id":22808924,"reputation":11,"user_id":16960582,"display_name":"Ashish Vyas"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1681119546,"creation_date":1681100972,"question_id":75974268,"body_markdown":"I have Angular and Spring Boot deployed on same tomcat server and when I hit a specific API, I get 500 response from server and when I again hit the same, it gets loaded. What maybe the possible error here?\r\n\r\nI have Angular and Spring Boot deployed on same tomcat server and when I hit a specific API, I get 500 response from server and when I again hit the same, it gets loaded. Expected output is the API must perform the same way first time as it is behaving the second time.","title":"Intermittent 500 Response from Server for API Call in Angular and Spring Boot Deployment on Tomcat&quot;","body":"<p>I have Angular and Spring Boot deployed on same tomcat server and when I hit a specific API, I get 500 response from server and when I again hit the same, it gets loaded. What maybe the possible error here?</p>\n<p>I have Angular and Spring Boot deployed on same tomcat server and when I hit a specific API, I get 500 response from server and when I again hit the same, it gets loaded. Expected output is the API must perform the same way first time as it is behaving the second time.</p>\n"},{"tags":["java","static"],"comments":[{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":3,"creation_date":1385218294,"post_id":20163665,"comment_id":30057022,"body_markdown":"Java is not a functional language. It is a OOP language, so I suggest you use object orientated programming or use a functional language.","body":"Java is not a functional language. It is a OOP language, so I suggest you use object orientated programming or use a functional language."},{"owner":{"account_id":2466460,"reputation":17100,"user_id":2149440,"accept_rate":82,"display_name":"Bart"},"score":0,"creation_date":1385218426,"post_id":20163665,"comment_id":30057058,"body_markdown":"Static methods should be stateless while instance methods are mostly used to alter the state of the instance.","body":"Static methods should be stateless while instance methods are mostly used to alter the state of the instance."},{"owner":{"account_id":373773,"reputation":5879,"user_id":723618,"accept_rate":54,"display_name":"ddoor"},"score":0,"creation_date":1385218721,"post_id":20163665,"comment_id":30057135,"body_markdown":"sometimes i throw useful logic functions into a util.java type class. However for array converters, I would have this as part of the instance, since any memory associated will get cleaned up when the instance is destroyed. It is safer to avoid static as soon as things get complicated or lots of memory moves around.","body":"sometimes i throw useful logic functions into a util.java type class. However for array converters, I would have this as part of the instance, since any memory associated will get cleaned up when the instance is destroyed. It is safer to avoid static as soon as things get complicated or lots of memory moves around."},{"owner":{"account_id":137777,"reputation":194868,"user_id":342235,"accept_rate":77,"display_name":"Freewind"},"score":0,"creation_date":1385219079,"post_id":20163665,"comment_id":30057212,"body_markdown":"@PeterLawrey, thank you for pointing this, I just found the word I want to use is &quot;stateless&quot;, which is better to express my idea","body":"@PeterLawrey, thank you for pointing this, I just found the word I want to use is &quot;stateless&quot;, which is better to express my idea"},{"owner":{"account_id":1957056,"reputation":1805,"user_id":1759834,"accept_rate":62,"display_name":"Michael D."},"score":0,"creation_date":1385219556,"post_id":20163665,"comment_id":30057348,"body_markdown":"I would think Iterator or Adapter would be the OOP answer?","body":"I would think Iterator or Adapter would be the OOP answer?"},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":1,"creation_date":1385220460,"post_id":20163665,"comment_id":30057642,"body_markdown":"@PeterLawrey As of Java 8 that characterisation of Java will not be as clear anymore.","body":"@PeterLawrey As of Java 8 that characterisation of Java will not be as clear anymore."},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1385229213,"post_id":20163665,"comment_id":30060582,"body_markdown":"@MarkoTopolnik Very true, IMHO it will be a while before it really makes sense to do functional programming in Java.  The syntax is still pretty clunky (the streams part, not the closures) and the execution much slower.","body":"@MarkoTopolnik Very true, IMHO it will be a while before it really makes sense to do functional programming in Java.  The syntax is still pretty clunky (the streams part, not the closures) and the execution much slower."},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1385229855,"post_id":20163665,"comment_id":30060790,"body_markdown":"@PeterLawrey I guess the only real use case is seamless parallelisation, which seems to be the primary motivator behind that API.","body":"@PeterLawrey I guess the only real use case is seamless parallelisation, which seems to be the primary motivator behind that API."},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1385230009,"post_id":20163665,"comment_id":30060850,"body_markdown":"@MarkoTopolnik IMHO Parallelism is over used by developer who don&#39;t understand that it can create more overhead than benefit.  Yes, all the CPU light up as busy, but the program is slower.  Now there is an easy way to make all the CPUs busy, not sure that is a good thing. ;)","body":"@MarkoTopolnik IMHO Parallelism is over used by developer who don&#39;t understand that it can create more overhead than benefit.  Yes, all the CPU light up as busy, but the program is slower.  Now there is an easy way to make all the CPUs busy, not sure that is a good thing. ;)"},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":1,"creation_date":1385230996,"post_id":20163665,"comment_id":30061186,"body_markdown":"@PeterLawrey But the only way to push performance today and in the future will be parallelisation; however it will take quite a while until everything is designed around that scheme, and until then there will be many lines of wishful thinking around.","body":"@PeterLawrey But the only way to push performance today and in the future will be parallelisation; however it will take quite a while until everything is designed around that scheme, and until then there will be many lines of wishful thinking around."}],"answers":[{"tags":[],"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1385221804,"creation_date":1385218001,"answer_id":20163728,"question_id":20163665,"body_markdown":"You&#39;ll probably never want to mock a method that converts an array to a list (or set), and this method doesn&#39;t need any state and doesn&#39;t depend on any environment, so a static method looks fine to me. \r\n\r\nJust like the standard `Arrays.asList()` (which you should probably use).\r\n\r\nOn the other hand, accessing an external URL is typically the sort of thing that you want to be able to mock easily, because not mocking it would\r\n\r\n - make the test an integration test\r\n - require to have this external URL up every time you run your tests, which you probably can&#39;t guarantee\r\n - require to have this external URL return exactly what you want it to return in your test (including errors if you want to test the event of an error).","title":"Shall we avoid writing static methods in our java code for better testability?","body":"<p>You'll probably never want to mock a method that converts an array to a list (or set), and this method doesn't need any state and doesn't depend on any environment, so a static method looks fine to me. </p>\n\n<p>Just like the standard <code>Arrays.asList()</code> (which you should probably use).</p>\n\n<p>On the other hand, accessing an external URL is typically the sort of thing that you want to be able to mock easily, because not mocking it would</p>\n\n<ul>\n<li>make the test an integration test</li>\n<li>require to have this external URL up every time you run your tests, which you probably can't guarantee</li>\n<li>require to have this external URL return exactly what you want it to return in your test (including errors if you want to test the event of an error).</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":373773,"reputation":5879,"user_id":723618,"accept_rate":54,"display_name":"ddoor"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1385218201,"creation_date":1385218201,"answer_id":20163767,"question_id":20163665,"body_markdown":"Static means you can call the method without instantiating the class. Its good if you want to package your code into a class and you have a function that just does some logic or something basic.\r\n\r\nJust don&#39;t use a static function to try and edit member variables in the class (obviously).\r\n\r\nPersonally I think its fine to use the static function, since it is stateless. \r\n","title":"Shall we avoid writing static methods in our java code for better testability?","body":"<p>Static means you can call the method without instantiating the class. Its good if you want to package your code into a class and you have a function that just does some logic or something basic.</p>\n\n<p>Just don't use a static function to try and edit member variables in the class (obviously).</p>\n\n<p>Personally I think its fine to use the static function, since it is stateless. </p>\n"},{"tags":[],"owner":{"account_id":41850,"reputation":132318,"user_id":121747,"accept_rate":89,"display_name":"Jack"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1385218375,"creation_date":1385218375,"answer_id":20163795,"question_id":20163665,"body_markdown":"Static methods should be used by answering the question _&quot;is this method a functionality of a specific instance?&quot;_.\r\n\r\nYou shouldn&#39;t decide about a `static` method according to tests, you should do it according to design. Your examples doesn&#39;t need an instance because it makes no sense. So `static` is the better choice. You can always wrap these methods inside specific tester classes to do your tests.\r\n\r\nThe only situation in which a self-contained functionality is not static is just when you want to provide multiple implementation, so that you are forced to avoid `static` because you need inheritance.","title":"Shall we avoid writing static methods in our java code for better testability?","body":"<p>Static methods should be used by answering the question <em>\"is this method a functionality of a specific instance?\"</em>.</p>\n\n<p>You shouldn't decide about a <code>static</code> method according to tests, you should do it according to design. Your examples doesn't need an instance because it makes no sense. So <code>static</code> is the better choice. You can always wrap these methods inside specific tester classes to do your tests.</p>\n\n<p>The only situation in which a self-contained functionality is not static is just when you want to provide multiple implementation, so that you are forced to avoid <code>static</code> because you need inheritance.</p>\n"},{"tags":[],"owner":{"account_id":1957056,"reputation":1805,"user_id":1759834,"accept_rate":62,"display_name":"Michael D."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1385218559,"creation_date":1385218559,"answer_id":20163825,"question_id":20163665,"body_markdown":"java.lang.Math is static which is a good example. I thought statics are not beeing garbage collected and should be avoided if possible.","title":"Shall we avoid writing static methods in our java code for better testability?","body":"<p>java.lang.Math is static which is a good example. I thought statics are not beeing garbage collected and should be avoided if possible.</p>\n"},{"tags":[],"owner":{"account_id":19115,"reputation":29081,"user_id":44523,"accept_rate":95,"display_name":"Esko"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1385218702,"creation_date":1385218702,"answer_id":20163841,"question_id":20163665,"body_markdown":"No.\r\n\r\nAs mentioned by Peter Lawrey in the comment for the question, Java is all about object oriented programming. While certain functional aspects are doable and being put into eg. Java 8, at its core Java is not functional. `static` breaks so much of the benefits of learning how to do modern Java - not to mention all kinds of not-fun-at-all scoping problems - that there&#39;s no purpose to use them ***unless*** you&#39;re some kind of a Java wizard who really knows what happens when you use that magical keyword.\r\n\r\nYou are not a wizard. Java is not functional. If you want to be a wizard, you can learn. If you want to program in functional fashion, look into hybrid languages such as Scala or Groovy or alternatively explore the fully functional world, eg. Clojure.","title":"Shall we avoid writing static methods in our java code for better testability?","body":"<p>No.</p>\n\n<p>As mentioned by Peter Lawrey in the comment for the question, Java is all about object oriented programming. While certain functional aspects are doable and being put into eg. Java 8, at its core Java is not functional. <code>static</code> breaks so much of the benefits of learning how to do modern Java - not to mention all kinds of not-fun-at-all scoping problems - that there's no purpose to use them <strong><em>unless</em></strong> you're some kind of a Java wizard who really knows what happens when you use that magical keyword.</p>\n\n<p>You are not a wizard. Java is not functional. If you want to be a wizard, you can learn. If you want to program in functional fashion, look into hybrid languages such as Scala or Groovy or alternatively explore the fully functional world, eg. Clojure.</p>\n"},{"tags":[],"owner":{"account_id":1397403,"reputation":12323,"user_id":1326913,"accept_rate":89,"display_name":"ᴇʟᴇvᴀтᴇ"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1385219649,"creation_date":1385219309,"answer_id":20163928,"question_id":20163665,"body_markdown":"I often use static methods:\r\n\r\n- for factory methods (explicitly named constructors)\r\n- to provide a functional layer above an object-oriented layer, to compose the objects\r\n- and sometimes for general-purpose functions (Apache Commons has many good examples of this)\r\n\r\nI never use &quot;singletons&quot; (static objects) and methods that *refer to* static objects because they are a complete headache to test and reuse. I also avoid hardcoding anything into a static method that could feasibly need to be changed. Sometimes I will provide multiple methods - one with all the dependencies as parameters and others, with fewer parameters, that call the more flexible method with some default (hardcoded) values.","title":"Shall we avoid writing static methods in our java code for better testability?","body":"<p>I often use static methods:</p>\n\n<ul>\n<li>for factory methods (explicitly named constructors)</li>\n<li>to provide a functional layer above an object-oriented layer, to compose the objects</li>\n<li>and sometimes for general-purpose functions (Apache Commons has many good examples of this)</li>\n</ul>\n\n<p>I never use \"singletons\" (static objects) and methods that <em>refer to</em> static objects because they are a complete headache to test and reuse. I also avoid hardcoding anything into a static method that could feasibly need to be changed. Sometimes I will provide multiple methods - one with all the dependencies as parameters and others, with fewer parameters, that call the more flexible method with some default (hardcoded) values.</p>\n"},{"tags":[],"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"down_vote_count":1,"up_vote_count":7,"is_accepted":true,"score":6,"last_activity_date":1681119270,"creation_date":1385219906,"answer_id":20164039,"question_id":20163665,"body_markdown":"Beware of overengineering.\r\n\r\nIn your specific example, you either *do* or *don&#39;t* have a mockability issue. Since you are asking this in general, I&#39;ll assume you don&#39;t have a specific issue at the moment.\r\n\r\nThe general argument is that `static` methods are simpler and therefore the preferred choice, whenever there is a choice. A would-be instance method must first prove itself of needing to be an instance method.\r\n\r\nIf this was my project, I would defer any makeovers into instance methods until such a moment where the need for that became clear and present.","title":"Shall we avoid writing static methods in our java code for better testability?","body":"<p>Beware of overengineering.</p>\n<p>In your specific example, you either <em>do</em> or <em>don't</em> have a mockability issue. Since you are asking this in general, I'll assume you don't have a specific issue at the moment.</p>\n<p>The general argument is that <code>static</code> methods are simpler and therefore the preferred choice, whenever there is a choice. A would-be instance method must first prove itself of needing to be an instance method.</p>\n<p>If this was my project, I would defer any makeovers into instance methods until such a moment where the need for that became clear and present.</p>\n"}],"owner":{"account_id":137777,"reputation":194868,"user_id":342235,"accept_rate":77,"display_name":"Freewind"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6842,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":20164039,"answer_count":7,"score":14,"last_activity_date":1681119270,"creation_date":1385217659,"question_id":20163665,"body_markdown":"I was prefer using static methods in my java code, since I think they are &lt;s&gt;&quot;functional&quot;&lt;/s&gt;&quot;stateless&quot; and has less side-effect. So there may be some helper classes and methods like this:\r\n\r\n    public class MyHelper {\r\n        public static Set&lt;String&gt; array2set(String[] items) { ... }\r\n        public static List&lt;String&gt; array2list(String[] items) { ...}\r\n        public static String getContentOfUrl(String url) {\r\n            // visit the url, and return the content of response\r\n        }\r\n    }\r\n\r\n    public class MyApp {\r\n        public void doSomething() {\r\n            String[] myarray = new String[]{ &quot;aa&quot;,&quot;bb&quot;};\r\n            Set&lt;String&gt; set = MyHelper.array2set(myarray);\r\n            String content = MyHelper.getContentOfUrl(&quot;http://google.com&quot;);\r\n        }\r\n    }\r\n\r\nBut my friend says we should avoid defining such static utility methods, since we call them directly in our code, it will be hard to mock them or test them if they have external dependencies. He thinks the code should be:\r\n\r\n    public class ArrayHelper {\r\n        public Set&lt;String&gt; array2set(String[] items) { ... }\r\n        public List&lt;String&gt; array2list(String[] items) { ...}\r\n    }\r\n    public class UrlHelper {\r\n        public String getContentOfUrl(String url) {\r\n            // visit the url, and return the content of response\r\n        }\r\n    }\r\n\r\n    public class MyApp {\r\n        private final ArrayHelper arrayHelper;\r\n        private final UrlHelper urlHelper;\r\n        public MyApp(ArrayHelper arrayHelper, UrlHelper urlHelper) {\r\n            this.arrayHelper = arrayHelper;\r\n            this.urlHelper = urlHelper;\r\n        }\r\n        public void doSomething() {\r\n            String[] myarray = new String[]{ &quot;aa&quot;,&quot;bb&quot;};\r\n            Set&lt;String&gt; set = arrayHelper.array2set(myarray);\r\n            String content = urlHelper.getContentOfUrl(&quot;http://google.com&quot;);\r\n        }\r\n    }\r\n\r\nIn this way, if we want to write unit tests for `MyApp`, we can just mock the `ArrayHelper` and `UrlHelper` and pass them to the constructor of `MyApp`.\r\n\r\nI agree totally about the `UrlHelper` part of his opinion, since the origin static code make `MyApp` untestable. \r\n\r\nBut I have a little confused about the `ArrayHelper` part, since it doesn&#39;t depend on any external resources and the logic will be very simple. Shall we avoid using static methods at this case too?\r\n\r\nAnd when to use static methods? Or just avoid using it as much as possible?\r\n\r\n----\r\n\r\nupdate:\r\n\r\nWe are using &quot;TDD&quot; in our development, so the testability of a class often is the most important concern for us.\r\n\r\nAnd I just replace the word &quot;functional&quot; with &quot;stateless&quot; in the first sentence since the that&#39;s real what I meant.","title":"Shall we avoid writing static methods in our java code for better testability?","body":"<p>I was prefer using static methods in my java code, since I think they are <s>\"functional\"</s>\"stateless\" and has less side-effect. So there may be some helper classes and methods like this:</p>\n\n<pre><code>public class MyHelper {\n    public static Set&lt;String&gt; array2set(String[] items) { ... }\n    public static List&lt;String&gt; array2list(String[] items) { ...}\n    public static String getContentOfUrl(String url) {\n        // visit the url, and return the content of response\n    }\n}\n\npublic class MyApp {\n    public void doSomething() {\n        String[] myarray = new String[]{ \"aa\",\"bb\"};\n        Set&lt;String&gt; set = MyHelper.array2set(myarray);\n        String content = MyHelper.getContentOfUrl(\"http://google.com\");\n    }\n}\n</code></pre>\n\n<p>But my friend says we should avoid defining such static utility methods, since we call them directly in our code, it will be hard to mock them or test them if they have external dependencies. He thinks the code should be:</p>\n\n<pre><code>public class ArrayHelper {\n    public Set&lt;String&gt; array2set(String[] items) { ... }\n    public List&lt;String&gt; array2list(String[] items) { ...}\n}\npublic class UrlHelper {\n    public String getContentOfUrl(String url) {\n        // visit the url, and return the content of response\n    }\n}\n\npublic class MyApp {\n    private final ArrayHelper arrayHelper;\n    private final UrlHelper urlHelper;\n    public MyApp(ArrayHelper arrayHelper, UrlHelper urlHelper) {\n        this.arrayHelper = arrayHelper;\n        this.urlHelper = urlHelper;\n    }\n    public void doSomething() {\n        String[] myarray = new String[]{ \"aa\",\"bb\"};\n        Set&lt;String&gt; set = arrayHelper.array2set(myarray);\n        String content = urlHelper.getContentOfUrl(\"http://google.com\");\n    }\n}\n</code></pre>\n\n<p>In this way, if we want to write unit tests for <code>MyApp</code>, we can just mock the <code>ArrayHelper</code> and <code>UrlHelper</code> and pass them to the constructor of <code>MyApp</code>.</p>\n\n<p>I agree totally about the <code>UrlHelper</code> part of his opinion, since the origin static code make <code>MyApp</code> untestable. </p>\n\n<p>But I have a little confused about the <code>ArrayHelper</code> part, since it doesn't depend on any external resources and the logic will be very simple. Shall we avoid using static methods at this case too?</p>\n\n<p>And when to use static methods? Or just avoid using it as much as possible?</p>\n\n<hr>\n\n<p>update:</p>\n\n<p>We are using \"TDD\" in our development, so the testability of a class often is the most important concern for us.</p>\n\n<p>And I just replace the word \"functional\" with \"stateless\" in the first sentence since the that's real what I meant.</p>\n"},{"tags":["java","udp","nio"],"comments":[{"owner":{"account_id":27925481,"reputation":175,"user_id":21324690,"display_name":"chunkynuggy"},"score":2,"creation_date":1681129061,"post_id":75964509,"comment_id":134002635,"body_markdown":"I found the answer by chance here at this [link](https://www.oreilly.com/library/view/java-nio/0596002882/ch04.html). There is also a provided sample code in the link. _&quot;A better approach is to use one selector for all selectable channels and delegate the servicing of ready channels to other threads. You have a single point to monitor channel readiness and a decoupled pool of worker threads to handle the incoming data. The thread pool size can be tuned (or tune itself, dynamically) according to deployment conditions. Management of selectable channels remains simple, and simple is good.&quot;_","body":"I found the answer by chance here at this <a href=\"https://www.oreilly.com/library/view/java-nio/0596002882/ch04.html\" rel=\"nofollow noreferrer\">link</a>. There is also a provided sample code in the link. <i>&quot;A better approach is to use one selector for all selectable channels and delegate the servicing of ready channels to other threads. You have a single point to monitor channel readiness and a decoupled pool of worker threads to handle the incoming data. The thread pool size can be tuned (or tune itself, dynamically) according to deployment conditions. Management of selectable channels remains simple, and simple is good.&quot;</i>"},{"owner":{"account_id":27925481,"reputation":175,"user_id":21324690,"display_name":"chunkynuggy"},"score":0,"creation_date":1681365043,"post_id":75964509,"comment_id":134045060,"body_markdown":"I did as the link stated, and removed the READ from the key&#39;s interestOps before passing it to a separate thread. I think this is not the case for DatagramChannel compared to a socketChannel, because it is causing some errors where it eventually stops running entirely and blocks","body":"I did as the link stated, and removed the READ from the key&#39;s interestOps before passing it to a separate thread. I think this is not the case for DatagramChannel compared to a socketChannel, because it is causing some errors where it eventually stops running entirely and blocks"}],"owner":{"account_id":27925481,"reputation":175,"user_id":21324690,"display_name":"chunkynuggy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1681119251,"creation_date":1680947434,"question_id":75964509,"body_markdown":"I m reading how Selector can multiplex multiple channels and do I/O operations whenever the channels are ready to be processed. Many online tutorials/resources uses something similar where they sequentially read each key, then process it.\r\n\r\n                Set&lt;SelectionKey&gt; selectedKeys = selector.selectedKeys();\r\n                Iterator&lt;SelectionKey&gt; iter = selectedKeys.iterator();\r\n                while (iter.hasNext()) {\r\n                    SelectionKey key = iter.next();\r\n                    if (key.isReadable()) {\r\n                        //processKey(key);\r\n                    }\r\n                    iter.remove();\r\n                }\r\n\r\nI m thinking that while Key 1 is being processed, all the keys (the sockets it represents) will still receive more incoming packets\r\n\r\n    Key 1 : [packet] [packet] [packet] [packet]\r\n    .\r\n    .\r\n    .\r\n    Key N : [packet] [packet] [packet] [packet]\r\n\r\nSo, if all channels receive 1 packets while key 1 has just processed 1 packets in the same time, wouldnt some channels have lost packets?\r\n\r\n    Key 1 :  [packet] [packet] [packet] [newPacket] \r\n    .\r\n    .\r\n    .\r\n    Key N : [packet] [packet] [packet] [packet] [newPacket] \r\n\r\nprocessing key 2\r\n\r\n    Key 1 : [packet] [packet] [packet] [newPacket] [newPacket] \r\n    .\r\n    .\r\n    .\r\n    Key N : [packet] [packet] [packet] [packet] [newPacket] [newPacket] \r\n\r\nprocessing key 3\r\n\r\n    Key 1 : [packet] [packet] [packet] [newPacket] [newPacket] {packet lost socket receive buffer full}\r\n    .\r\n    .\r\n    .\r\n    Key N : [packet] [packet] [packet] [packet] [newPacket] [newPacket] {packet lost socket receive buffer full}\r\n\r\nShould each key be passed to a queue (then some other thread can poll for it) so that all keys can be processed in a multithreaded manner? What is an &quot;optimal&quot; number of channels I can register to a selector?\r\n","title":"NIO SelectionKey processing should it be single or multi threaded?","body":"<p>I m reading how Selector can multiplex multiple channels and do I/O operations whenever the channels are ready to be processed. Many online tutorials/resources uses something similar where they sequentially read each key, then process it.</p>\n<pre><code>            Set&lt;SelectionKey&gt; selectedKeys = selector.selectedKeys();\n            Iterator&lt;SelectionKey&gt; iter = selectedKeys.iterator();\n            while (iter.hasNext()) {\n                SelectionKey key = iter.next();\n                if (key.isReadable()) {\n                    //processKey(key);\n                }\n                iter.remove();\n            }\n</code></pre>\n<p>I m thinking that while Key 1 is being processed, all the keys (the sockets it represents) will still receive more incoming packets</p>\n<pre><code>Key 1 : [packet] [packet] [packet] [packet]\n.\n.\n.\nKey N : [packet] [packet] [packet] [packet]\n</code></pre>\n<p>So, if all channels receive 1 packets while key 1 has just processed 1 packets in the same time, wouldnt some channels have lost packets?</p>\n<pre><code>Key 1 :  [packet] [packet] [packet] [newPacket] \n.\n.\n.\nKey N : [packet] [packet] [packet] [packet] [newPacket] \n</code></pre>\n<p>processing key 2</p>\n<pre><code>Key 1 : [packet] [packet] [packet] [newPacket] [newPacket] \n.\n.\n.\nKey N : [packet] [packet] [packet] [packet] [newPacket] [newPacket] \n</code></pre>\n<p>processing key 3</p>\n<pre><code>Key 1 : [packet] [packet] [packet] [newPacket] [newPacket] {packet lost socket receive buffer full}\n.\n.\n.\nKey N : [packet] [packet] [packet] [packet] [newPacket] [newPacket] {packet lost socket receive buffer full}\n</code></pre>\n<p>Should each key be passed to a queue (then some other thread can poll for it) so that all keys can be processed in a multithreaded manner? What is an &quot;optimal&quot; number of channels I can register to a selector?</p>\n"},{"tags":["java","terminal","azul-zulu"],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1660333923,"creation_date":1633796638,"answer_id":69508614,"question_id":69508381,"body_markdown":"# APT is for Linux\r\n\r\n[*APT*](https://en.wikipedia.org/wiki/APT_(software)) is for [Linux][1], not [macOS][2]. Similarly, [BSD][3] has their own tools in [*Packages and Ports*][4]. \r\n\r\n# *Homebrew*\r\n\r\nYou can add a similar package-management tool to macOS developed by a third party: [*Homebrew*](https://en.wikipedia.org/wiki/Homebrew_(package_manager)). \r\n\r\nI have not used Homebrew myself, but some folks are big fans. \r\n\r\nFor only installing JDKs, I would consider this tool to be overkill, and would recommend  SDKMAN or manual installers as discussed further down. But if you might want to install other kinds of software besides just JDKs in this manner, then consider Homebrew.\r\n\r\nHere is a question that gives instructions for how to install Java from Homebrew on macOS: https://stackoverflow.com/questions/65601196/how-to-brew-install-java/70786302#70786302 \r\n\r\n# SDKMAN \r\n\r\n[SDKMAN][5] is a tool rapidly growing in popularity. As a collection of shell scripts, SDKMAN works across any Unix-oriented host OSes including macOS, BSD, Linux, and more. \r\n\r\nSDKMAN works to manage the downloading, installing, and setting as default any of the many JDK offerings from a variety of vendors. This command-line tool has a simple well-defined API. \r\n\r\nI only recently decided to avail myself of this tool. I expect this to be my new preferred way to manage my JDKs on my Macs and BSD servers. \r\n\r\n# IDEs\r\n\r\nSome [IDE][6]s such as [*IntelliJ*][7] have a feature for downloading and installing a [JDK][8]. This is for the convenience of the Java programmer. \r\n\r\n# Manual installers\r\n\r\nTo install Java, I use an installer app for macOS from [Adoptium][9] or [Azul Systems][10], or from any of the several other vendors providing distributions of Java such as BellSoft, Amazon, Microsoft, Oracle, SAP, Red Hat/IBM, Pivotal, etc. \r\n\r\nTo update I simply:\r\n\r\n - Delete the existing [JDK][8] found in `/Library/Java/JavaVirtualMachines`. \r\n - Run a freshly-downloaded installer.\r\n\r\nThis approach is a manual operation. And this requires the Mac’s admin password. \r\n\r\nSo for mass updates across many computers I can imagine that shell-scripting with SDKMAN would be a better solution. Also, some JDK vendors are releasing installers that can be controlled by a shell script. \r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Linux\r\n  [2]: https://en.wikipedia.org/wiki/MacOS\r\n  [3]: https://en.wikipedia.org/wiki/Berkeley_Software_Distribution\r\n  [4]: https://docs.freebsd.org/en/books/handbook/ports/\r\n  [5]: https://sdkman.io/\r\n  [6]: https://en.wikipedia.org/wiki/Integrated_development_environment\r\n  [7]: https://en.wikipedia.org/wiki/IntelliJ_IDEA\r\n  [8]: https://en.wikipedia.org/wiki/Java_Development_Kit\r\n  [9]: https://adoptium.net/\r\n  [10]: https://en.wikipedia.org/wiki/Azul_Systems","title":"The operation couldn’t be completed. Unable to locate a Java Runtime that supports apt","body":"<h1>APT is for Linux</h1>\n<p><a href=\"https://en.wikipedia.org/wiki/APT_(software)\" rel=\"nofollow noreferrer\"><em>APT</em></a> is for <a href=\"https://en.wikipedia.org/wiki/Linux\" rel=\"nofollow noreferrer\">Linux</a>, not <a href=\"https://en.wikipedia.org/wiki/MacOS\" rel=\"nofollow noreferrer\">macOS</a>. Similarly, <a href=\"https://en.wikipedia.org/wiki/Berkeley_Software_Distribution\" rel=\"nofollow noreferrer\">BSD</a> has their own tools in <a href=\"https://docs.freebsd.org/en/books/handbook/ports/\" rel=\"nofollow noreferrer\"><em>Packages and Ports</em></a>.</p>\n<h1><em>Homebrew</em></h1>\n<p>You can add a similar package-management tool to macOS developed by a third party: <a href=\"https://en.wikipedia.org/wiki/Homebrew_(package_manager)\" rel=\"nofollow noreferrer\"><em>Homebrew</em></a>.</p>\n<p>I have not used Homebrew myself, but some folks are big fans.</p>\n<p>For only installing JDKs, I would consider this tool to be overkill, and would recommend  SDKMAN or manual installers as discussed further down. But if you might want to install other kinds of software besides just JDKs in this manner, then consider Homebrew.</p>\n<p>Here is a question that gives instructions for how to install Java from Homebrew on macOS: <a href=\"https://stackoverflow.com/questions/65601196/how-to-brew-install-java/70786302#70786302\">How to brew install java?</a></p>\n<h1>SDKMAN</h1>\n<p><a href=\"https://sdkman.io/\" rel=\"nofollow noreferrer\">SDKMAN</a> is a tool rapidly growing in popularity. As a collection of shell scripts, SDKMAN works across any Unix-oriented host OSes including macOS, BSD, Linux, and more.</p>\n<p>SDKMAN works to manage the downloading, installing, and setting as default any of the many JDK offerings from a variety of vendors. This command-line tool has a simple well-defined API.</p>\n<p>I only recently decided to avail myself of this tool. I expect this to be my new preferred way to manage my JDKs on my Macs and BSD servers.</p>\n<h1>IDEs</h1>\n<p>Some <a href=\"https://en.wikipedia.org/wiki/Integrated_development_environment\" rel=\"nofollow noreferrer\">IDE</a>s such as <a href=\"https://en.wikipedia.org/wiki/IntelliJ_IDEA\" rel=\"nofollow noreferrer\"><em>IntelliJ</em></a> have a feature for downloading and installing a <a href=\"https://en.wikipedia.org/wiki/Java_Development_Kit\" rel=\"nofollow noreferrer\">JDK</a>. This is for the convenience of the Java programmer.</p>\n<h1>Manual installers</h1>\n<p>To install Java, I use an installer app for macOS from <a href=\"https://adoptium.net/\" rel=\"nofollow noreferrer\">Adoptium</a> or <a href=\"https://en.wikipedia.org/wiki/Azul_Systems\" rel=\"nofollow noreferrer\">Azul Systems</a>, or from any of the several other vendors providing distributions of Java such as BellSoft, Amazon, Microsoft, Oracle, SAP, Red Hat/IBM, Pivotal, etc.</p>\n<p>To update I simply:</p>\n<ul>\n<li>Delete the existing <a href=\"https://en.wikipedia.org/wiki/Java_Development_Kit\" rel=\"nofollow noreferrer\">JDK</a> found in <code>/Library/Java/JavaVirtualMachines</code>.</li>\n<li>Run a freshly-downloaded installer.</li>\n</ul>\n<p>This approach is a manual operation. And this requires the Mac’s admin password.</p>\n<p>So for mass updates across many computers I can imagine that shell-scripting with SDKMAN would be a better solution. Also, some JDK vendors are releasing installers that can be controlled by a shell script.</p>\n"}],"owner":{"account_id":22672248,"reputation":289,"user_id":16843823,"display_name":"ktakehi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32456,"favorite_count":0,"down_vote_count":1,"up_vote_count":13,"accepted_answer_id":69508614,"answer_count":1,"score":12,"last_activity_date":1681119021,"creation_date":1633794957,"question_id":69508381,"body_markdown":"I am using M1 Mac OS11.5.2.  \r\nI&#39;ve already downloaded zulu.jdk and zulu.jre, in &quot;/Library/Java/JavaVirtualMachines&quot;.  \r\nI also exported the PATH.\r\n```\r\necho export &quot;JAVA_HOME=\\$(/usr/libexec/java_home)&quot; &gt;&gt; ~/.bash_profile\r\n```\r\nWhen I type\r\n```\r\nsudo apt update\r\n```\r\nI get this:\r\n\r\n&gt; The operation couldn’t be completed. Unable to locate a Java Runtime that supports apt.  \r\n&gt; Please visit http://www.java.com for information on installing Java.\r\n\r\nI hope some kind person could tell me the solution.","title":"The operation couldn’t be completed. Unable to locate a Java Runtime that supports apt","body":"<p>I am using M1 Mac OS11.5.2.<br />\nI've already downloaded zulu.jdk and zulu.jre, in &quot;/Library/Java/JavaVirtualMachines&quot;.<br />\nI also exported the PATH.</p>\n<pre><code>echo export &quot;JAVA_HOME=\\$(/usr/libexec/java_home)&quot; &gt;&gt; ~/.bash_profile\n</code></pre>\n<p>When I type</p>\n<pre><code>sudo apt update\n</code></pre>\n<p>I get this:</p>\n<blockquote>\n<p>The operation couldn’t be completed. Unable to locate a Java Runtime that supports apt.<br />\nPlease visit <a href=\"http://www.java.com\" rel=\"noreferrer\">http://www.java.com</a> for information on installing Java.</p>\n</blockquote>\n<p>I hope some kind person could tell me the solution.</p>\n"},{"tags":["java","multithreading","wait"],"answers":[{"tags":[],"owner":{"account_id":1296974,"reputation":28447,"user_id":1247781,"accept_rate":100,"display_name":"FThompson"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1430110407,"creation_date":1430110407,"answer_id":29887452,"question_id":29887395,"body_markdown":"From [the Javadocs][1]:\r\n\r\n&gt;  If `timeout` is zero, however, then real time is not taken into consideration and the thread simply waits until notified.\r\n\r\nIf your goal is to avoid waiting when your `wait` value is zero, you can add a condition:\r\n\r\n    if (wait &gt; 0) {\r\n        synchronized (monitor) {\r\n            try {\r\n                monitor.wait(wait);\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-","title":"Object.wait(0) waits forever","body":"<p>From <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-\" rel=\"noreferrer\">the Javadocs</a>:</p>\n\n<blockquote>\n  <p>If <code>timeout</code> is zero, however, then real time is not taken into consideration and the thread simply waits until notified.</p>\n</blockquote>\n\n<p>If your goal is to avoid waiting when your <code>wait</code> value is zero, you can add a condition:</p>\n\n<pre><code>if (wait &gt; 0) {\n    synchronized (monitor) {\n        try {\n            monitor.wait(wait);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8326,"reputation":258545,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"down_vote_count":0,"up_vote_count":17,"is_accepted":true,"score":17,"last_activity_date":1430110415,"creation_date":1430110415,"answer_id":29887453,"question_id":29887395,"body_markdown":"The [Javadocs say][1]:\r\n\r\n&gt;  If timeout is zero, however, then real time is not taken into consideration and the thread simply waits until notified. \r\n\r\nSo specifying `wait(0)` means wait indefinitely.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-","title":"Object.wait(0) waits forever","body":"<p>The <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-\">Javadocs say</a>:</p>\n\n<blockquote>\n  <p>If timeout is zero, however, then real time is not taken into consideration and the thread simply waits until notified. </p>\n</blockquote>\n\n<p>So specifying <code>wait(0)</code> means wait indefinitely.</p>\n"},{"tags":[],"owner":{"account_id":4303549,"reputation":79,"user_id":3516616,"display_name":"Janitha"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1430116113,"creation_date":1430116113,"answer_id":29888658,"question_id":29887395,"body_markdown":"    Object.wait(0);\r\n\r\nwill simply make it wait forever. So you can embed your code inside an `if` condition,\r\n\r\n    if(wait&gt;0)\r\n    {\r\n    //your code\r\n    }","title":"Object.wait(0) waits forever","body":"<pre><code>Object.wait(0);\n</code></pre>\n\n<p>will simply make it wait forever. So you can embed your code inside an <code>if</code> condition,</p>\n\n<pre><code>if(wait&gt;0)\n{\n//your code\n}\n</code></pre>\n"}],"owner":{"account_id":82956,"reputation":3291,"user_id":232899,"accept_rate":75,"display_name":"Ravisha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5097,"favorite_count":0,"down_vote_count":4,"up_vote_count":5,"accepted_answer_id":29887453,"answer_count":3,"score":1,"last_activity_date":1681119013,"creation_date":1430110056,"question_id":29887395,"body_markdown":"I have below piece of code, where the wait time is calculated elsewhere.  \r\nIn some of the situations the wait time value is 0. What I notice is that when the wait time is zero the thread seem to wait forever. I could not find anything specific to this case in the Javadoc. I could just add a check for this, but I just need to understand why this is happening and is it allowed to pass 0 wait time \r\n\r\n    synchronized (monitor) {\r\n    \ttry {\r\n    \t\tmonitor.wait(wait); // &lt;-- sometime 0\r\n    \t} catch (InterruptedException e) {\r\n    \t\te.printStackTrace();\r\n    \t}\r\n    }","title":"Object.wait(0) waits forever","body":"<p>I have below piece of code, where the wait time is calculated elsewhere.<br />\nIn some of the situations the wait time value is 0. What I notice is that when the wait time is zero the thread seem to wait forever. I could not find anything specific to this case in the Javadoc. I could just add a check for this, but I just need to understand why this is happening and is it allowed to pass 0 wait time</p>\n<pre><code>synchronized (monitor) {\n    try {\n        monitor.wait(wait); // &lt;-- sometime 0\n    } catch (InterruptedException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n"},{"tags":["java","arrays","xml","jackson"],"answers":[{"tags":[],"owner":{"account_id":16211352,"reputation":4324,"user_id":11713777,"display_name":"dariosicily"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681118890,"creation_date":1680951897,"answer_id":75964847,"question_id":75964207,"body_markdown":"For lists there is the specific [`JacksonXmlElementWrapper`](http://fasterxml.github.io/jackson-dataformat-xml/javadoc/2.14/com/fasterxml/jackson/dataformat/xml/annotation/JacksonXmlElementWrapper.html) annotation that must be used with the [`JacksonXmlProperty`](http://fasterxml.github.io/jackson-dataformat-xml/javadoc/2.14/com/fasterxml/jackson/dataformat/xml/annotation/JacksonXmlProperty.html#localName--) indicating the wrapper list tag; focusing on the xml structure you want to deserialize the xml structure below to a list:\r\n\r\n~~~\r\n&lt;ENTITY&gt; \r\n    &lt;USER_NAME&gt;xcc&lt;/USER_NAME&gt; \r\n    &lt;COMPANYS&gt;\r\n        &lt;COMPANY&gt;\r\n            &lt;COMPANYNAME&gt;NAME-1&lt;/COMPANYNAME&gt;\r\n        &lt;/COMPANY&gt;\r\n        &lt;COMPANY&gt;\r\n            &lt;COMPANYNAME&gt;NAME-2&lt;/COMPANYNAME&gt;\r\n        &lt;/COMPANY&gt;\r\n   &lt;/COMPANYS&gt;\r\n&lt;/ENTITY&gt; \r\n~~~\r\n\r\nThis structure can be converted to an `Entity` class containing a `Companies` class field containg a `List&lt;Company&gt;` field like below:\r\n\r\n~~~\r\n@Data\r\n@JsonIgnoreProperties(ignoreUnknown = true) //&lt;-- up to you insert other properties\r\n@JacksonXmlRootElement(localName = &quot;TX&quot;)\r\npublic class ServiceBusReq {\r\n\r\n    @JacksonXmlProperty(localName = &quot;ENTITY&quot;)\r\n    private Entity entity;\r\n}\r\n\r\n@Data\r\npublic class Entity {\r\n\r\n    @JacksonXmlProperty(localName = &quot;USER_NAME&quot;)\r\n    private String username;\r\n    @JacksonXmlProperty(localName = &quot;COMPANYS&quot;) \r\n    private Companies companies;\r\n}\r\n\r\n@Data\r\npublic class Companies {\r\n\r\n    @JacksonXmlProperty(localName = &quot;COMPANY&quot;)\r\n    @JacksonXmlElementWrapper(useWrapping = false)\r\n    private List&lt;Company&gt; companies;\r\n}\r\n\r\n@Data\r\npublic class Company {\r\n\r\n    @JacksonXmlProperty(localName = &quot;COMPANYNAME&quot;)\r\n    private String companyName;\r\n}\r\n~~~","title":"Jackson XML deserialize to ObjectNode, cannot get array value","body":"<p>For lists there is the specific <a href=\"http://fasterxml.github.io/jackson-dataformat-xml/javadoc/2.14/com/fasterxml/jackson/dataformat/xml/annotation/JacksonXmlElementWrapper.html\" rel=\"nofollow noreferrer\"><code>JacksonXmlElementWrapper</code></a> annotation that must be used with the <a href=\"http://fasterxml.github.io/jackson-dataformat-xml/javadoc/2.14/com/fasterxml/jackson/dataformat/xml/annotation/JacksonXmlProperty.html#localName--\" rel=\"nofollow noreferrer\"><code>JacksonXmlProperty</code></a> indicating the wrapper list tag; focusing on the xml structure you want to deserialize the xml structure below to a list:</p>\n<pre><code>&lt;ENTITY&gt; \n    &lt;USER_NAME&gt;xcc&lt;/USER_NAME&gt; \n    &lt;COMPANYS&gt;\n        &lt;COMPANY&gt;\n            &lt;COMPANYNAME&gt;NAME-1&lt;/COMPANYNAME&gt;\n        &lt;/COMPANY&gt;\n        &lt;COMPANY&gt;\n            &lt;COMPANYNAME&gt;NAME-2&lt;/COMPANYNAME&gt;\n        &lt;/COMPANY&gt;\n   &lt;/COMPANYS&gt;\n&lt;/ENTITY&gt; \n</code></pre>\n<p>This structure can be converted to an <code>Entity</code> class containing a <code>Companies</code> class field containg a <code>List&lt;Company&gt;</code> field like below:</p>\n<pre><code>@Data\n@JsonIgnoreProperties(ignoreUnknown = true) //&lt;-- up to you insert other properties\n@JacksonXmlRootElement(localName = &quot;TX&quot;)\npublic class ServiceBusReq {\n\n    @JacksonXmlProperty(localName = &quot;ENTITY&quot;)\n    private Entity entity;\n}\n\n@Data\npublic class Entity {\n\n    @JacksonXmlProperty(localName = &quot;USER_NAME&quot;)\n    private String username;\n    @JacksonXmlProperty(localName = &quot;COMPANYS&quot;) \n    private Companies companies;\n}\n\n@Data\npublic class Companies {\n\n    @JacksonXmlProperty(localName = &quot;COMPANY&quot;)\n    @JacksonXmlElementWrapper(useWrapping = false)\n    private List&lt;Company&gt; companies;\n}\n\n@Data\npublic class Company {\n\n    @JacksonXmlProperty(localName = &quot;COMPANYNAME&quot;)\n    private String companyName;\n}\n</code></pre>\n"}],"owner":{"account_id":23926861,"reputation":1,"user_id":17921872,"display_name":"EverSpring"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":139,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681118890,"creation_date":1680943359,"question_id":75964207,"body_markdown":"When I use jackson deserialization xml, xml has node is array, java bean has attribute is ObjectNode, ObjectNode cannot get array value,Here is the sample code\r\njackson version: 2.10.5\r\n\r\njava bean:\r\n```\r\nimport com.fasterxml.jackson.databind.node.ObjectNode;\r\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;\r\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlRootElement;\r\nimport lombok.Data;\r\n\r\n@Data\r\n@JacksonXmlRootElement(localName = &quot;TX&quot;)\r\npublic class ServiceBusReq&lt;T&gt; {\r\n\r\n\t@JacksonXmlProperty(localName = &quot;TX_HEADER&quot;)\r\n\tprivate ServiceBusHeaderReq txHeader;\r\n\t\r\n\t@JacksonXmlProperty(localName = &quot;TX_EMB&quot;)\r\n\tprivate String txEmb;\r\n\r\n    /**\r\n     **Notice:** I cannot specify the creation of an Entity object because the content received here is variable\r\n     */    \r\n    @JacksonXmlProperty(localName = &quot;ENTITY&quot;)\r\n\tprivate ObjectNode entity;\r\n\r\n\tprivate T msgObject;\r\n}\r\n```\r\n\r\nXML content:\r\n```\r\n&lt;TX&gt; \r\n  &lt;TX_HEADER&gt; \r\n    &lt;SYS_HDR_LEN/&gt;  \r\n    &lt;SYS_PKG_VRSN&gt;01&lt;/SYS_PKG_VRSN&gt;  \r\n    &lt;SYS_TTL_LEN/&gt;  \r\n    &lt;SYS_REQ_SEC_ID&gt;402205&lt;/SYS_REQ_SEC_ID&gt;  \r\n    &lt;SYS_SND_SEC_ID&gt;402205&lt;/SYS_SND_SEC_ID&gt; \r\n  &lt;/TX_HEADER&gt; \r\n  &lt;TX_EMB/&gt;  \r\n  &lt;ENTITY&gt; \r\n    &lt;USER_NAME&gt;xcc&lt;/USER_NAME&gt; \r\n    &lt;COMPANYS&gt;\r\n\t\t&lt;COMPANY&gt;\r\n\t\t\t&lt;COMPANYNAME&gt;NAME-1&lt;/COMPANYNAME&gt;\r\n\t\t&lt;/COMPANY&gt;\r\n\t\t&lt;COMPANY&gt;\r\n\t\t\t&lt;COMPANYNAME&gt;NAME-2&lt;/COMPANYNAME&gt;\r\n\t\t&lt;/COMPANY&gt;\r\n&lt;/COMPANYS&gt;\r\n  &lt;/ENTITY&gt; \r\n&lt;/TX&gt;\r\n```\r\n\r\nmain :\r\n```\r\nXmlMapper xmlMapper = XmlMapper.xmlBuilder().build();\r\nServiceBusReq serviceBusReq = xmlMapper.readValue(xml, ServiceBusReq.class);\r\nSystem.out.println(serviceBusReq);\r\n```\r\n\r\nresult:\r\n```\r\nServiceBusReq(txHeader=ServiceBusHeaderReq(sysHdrLen=null, sysPkgVrsn=01, sysTtlLen=null, sysReqSecId=402205, sysSndSecId=402205, sysTxCode=null, sysTxVrsn=null, sysTxType=null, sysReserved=null, sysEvtTraceId=null, sysSndSerialNo=null, sysPkgType=null, sysMsgLen=null, sysIsEncrypted=null, sysEncryptType=null, sysCompressType=null, sysEmbMsgLen=null, sysReqTime=null, sysTimeLeft=null, sysPkgStsType=null), txBody=null, txEmb=null, entity={&quot;USER_NAME&quot;:&quot;xcc&quot;,&quot;COMPANYS&quot;:{&quot;COMPANY&quot;:{&quot;COMPANYNAME&quot;:&quot;NAME-2&quot;}}}, msgObject=null)\r\n```\r\n\r\n\r\n\r\n\r\nThe reason I use ObjectNode instead of classes is because classes are uncertain. I want COMPANYS to get an array,who can help me,Thank you!  if not use ObjectNode, what can use","title":"Jackson XML deserialize to ObjectNode, cannot get array value","body":"<p>When I use jackson deserialization xml, xml has node is array, java bean has attribute is ObjectNode, ObjectNode cannot get array value,Here is the sample code\njackson version: 2.10.5</p>\n<p>java bean:</p>\n<pre><code>import com.fasterxml.jackson.databind.node.ObjectNode;\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlRootElement;\nimport lombok.Data;\n\n@Data\n@JacksonXmlRootElement(localName = &quot;TX&quot;)\npublic class ServiceBusReq&lt;T&gt; {\n\n    @JacksonXmlProperty(localName = &quot;TX_HEADER&quot;)\n    private ServiceBusHeaderReq txHeader;\n    \n    @JacksonXmlProperty(localName = &quot;TX_EMB&quot;)\n    private String txEmb;\n\n    /**\n     **Notice:** I cannot specify the creation of an Entity object because the content received here is variable\n     */    \n    @JacksonXmlProperty(localName = &quot;ENTITY&quot;)\n    private ObjectNode entity;\n\n    private T msgObject;\n}\n</code></pre>\n<p>XML content:</p>\n<pre><code>&lt;TX&gt; \n  &lt;TX_HEADER&gt; \n    &lt;SYS_HDR_LEN/&gt;  \n    &lt;SYS_PKG_VRSN&gt;01&lt;/SYS_PKG_VRSN&gt;  \n    &lt;SYS_TTL_LEN/&gt;  \n    &lt;SYS_REQ_SEC_ID&gt;402205&lt;/SYS_REQ_SEC_ID&gt;  \n    &lt;SYS_SND_SEC_ID&gt;402205&lt;/SYS_SND_SEC_ID&gt; \n  &lt;/TX_HEADER&gt; \n  &lt;TX_EMB/&gt;  \n  &lt;ENTITY&gt; \n    &lt;USER_NAME&gt;xcc&lt;/USER_NAME&gt; \n    &lt;COMPANYS&gt;\n        &lt;COMPANY&gt;\n            &lt;COMPANYNAME&gt;NAME-1&lt;/COMPANYNAME&gt;\n        &lt;/COMPANY&gt;\n        &lt;COMPANY&gt;\n            &lt;COMPANYNAME&gt;NAME-2&lt;/COMPANYNAME&gt;\n        &lt;/COMPANY&gt;\n&lt;/COMPANYS&gt;\n  &lt;/ENTITY&gt; \n&lt;/TX&gt;\n</code></pre>\n<p>main :</p>\n<pre><code>XmlMapper xmlMapper = XmlMapper.xmlBuilder().build();\nServiceBusReq serviceBusReq = xmlMapper.readValue(xml, ServiceBusReq.class);\nSystem.out.println(serviceBusReq);\n</code></pre>\n<p>result:</p>\n<pre><code>ServiceBusReq(txHeader=ServiceBusHeaderReq(sysHdrLen=null, sysPkgVrsn=01, sysTtlLen=null, sysReqSecId=402205, sysSndSecId=402205, sysTxCode=null, sysTxVrsn=null, sysTxType=null, sysReserved=null, sysEvtTraceId=null, sysSndSerialNo=null, sysPkgType=null, sysMsgLen=null, sysIsEncrypted=null, sysEncryptType=null, sysCompressType=null, sysEmbMsgLen=null, sysReqTime=null, sysTimeLeft=null, sysPkgStsType=null), txBody=null, txEmb=null, entity={&quot;USER_NAME&quot;:&quot;xcc&quot;,&quot;COMPANYS&quot;:{&quot;COMPANY&quot;:{&quot;COMPANYNAME&quot;:&quot;NAME-2&quot;}}}, msgObject=null)\n</code></pre>\n<p>The reason I use ObjectNode instead of classes is because classes are uncertain. I want COMPANYS to get an array,who can help me,Thank you!  if not use ObjectNode, what can use</p>\n"},{"tags":["java","html","css","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":2203408,"reputation":5012,"user_id":1947216,"display_name":"mentallurg"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681082106,"creation_date":1681082106,"answer_id":75973340,"question_id":75973287,"body_markdown":"Resources in `resources/static` are mapped to the root, `/`. Templates are also mapped to the root, `/`. That&#39;s why the reference in the template should be `background.jpg`.\r\n","title":"CSS background-image not working with Spring Boot application","body":"<p>Resources in <code>resources/static</code> are mapped to the root, <code>/</code>. Templates are also mapped to the root, <code>/</code>. That's why the reference in the template should be <code>background.jpg</code>.</p>\n"},{"tags":[],"owner":{"account_id":21932089,"reputation":160,"user_id":16213900,"display_name":"covenant"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681117767,"creation_date":1681117767,"answer_id":75975743,"question_id":75973287,"body_markdown":"For those who struggle with this, if you are using Spring Security dependency, give permission to your files like this:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nThen put your image under the static/img folder like this:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nPut the CSS into your CSS file:\r\n\r\n    body {\r\n        background-image: url(../img/background.jpg);\r\n        background-repeat: no-repeat;\r\n        background-size: cover;\r\n    }\r\n\r\nLastly, add CSS link to your HTML file:\r\n\r\n    &lt;link rel=&quot;stylesheet&quot; th:href=&quot;@{/css/register.css}&quot;&gt;\r\n\r\nHope this helps to someone!\r\n\r\n  [1]: https://i.stack.imgur.com/jlJff.png\r\n  [2]: https://i.stack.imgur.com/xV6Ml.png","title":"CSS background-image not working with Spring Boot application","body":"<p>For those who struggle with this, if you are using Spring Security dependency, give permission to your files like this:</p>\n<p><a href=\"https://i.stack.imgur.com/jlJff.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jlJff.png\" alt=\"enter image description here\" /></a></p>\n<p>Then put your image under the static/img folder like this:</p>\n<p><a href=\"https://i.stack.imgur.com/xV6Ml.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xV6Ml.png\" alt=\"enter image description here\" /></a></p>\n<p>Put the CSS into your CSS file:</p>\n<pre><code>body {\n    background-image: url(../img/background.jpg);\n    background-repeat: no-repeat;\n    background-size: cover;\n}\n</code></pre>\n<p>Lastly, add CSS link to your HTML file:</p>\n<pre><code>&lt;link rel=&quot;stylesheet&quot; th:href=&quot;@{/css/register.css}&quot;&gt;\n</code></pre>\n<p>Hope this helps to someone!</p>\n"}],"owner":{"account_id":21932089,"reputation":160,"user_id":16213900,"display_name":"covenant"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":434,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75975743,"answer_count":2,"score":0,"last_activity_date":1681117767,"creation_date":1681080995,"question_id":75973287,"body_markdown":"I read so many posts about this issue but I just couldn&#39;t solve it. I am trying to add a simple background image in my html page as follows:\r\n\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html lang=&quot;en&quot;&gt;\r\n    &lt;head&gt;\r\n        &lt;meta charset=&quot;UTF-8&quot;&gt;\r\n        &lt;title&gt;Title&lt;/title&gt;\r\n        &lt;style&gt;\r\n            body {\r\n                background-image: url(../static/background.jpg);\r\n                background-repeat: no-repeat;\r\n                background-size: cover;\r\n            }\r\n        &lt;/style&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nWhen I run the Spring application and went to `localhost:8080/temp`, I gotta see my html page which I set in my controller as get request but all I got is just a white blank page. The thing is, if I manually right click my `temp.html` file and open it in chrome, it works just fine, I can see my image. So I think there is a problem with spring boot or something?\r\n\r\nHere&#39;s my resources directory:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/raGQN.png","title":"CSS background-image not working with Spring Boot application","body":"<p>I read so many posts about this issue but I just couldn't solve it. I am trying to add a simple background image in my html page as follows:</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot;&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\n    &lt;title&gt;Title&lt;/title&gt;\n    &lt;style&gt;\n        body {\n            background-image: url(../static/background.jpg);\n            background-repeat: no-repeat;\n            background-size: cover;\n        }\n    &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>When I run the Spring application and went to <code>localhost:8080/temp</code>, I gotta see my html page which I set in my controller as get request but all I got is just a white blank page. The thing is, if I manually right click my <code>temp.html</code> file and open it in chrome, it works just fine, I can see my image. So I think there is a problem with spring boot or something?</p>\n<p>Here's my resources directory:</p>\n<p><a href=\"https://i.stack.imgur.com/raGQN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/raGQN.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","arrays","collections"],"comments":[{"owner":{"account_id":76626,"reputation":6476,"user_id":219210,"display_name":"Hardcoded"},"score":11,"creation_date":1278344901,"post_id":960431,"comment_id":3274883,"body_markdown":"You can only cast to Integer[] by using: `Integer[] arr = (Integer[])list.toArray(new Integer[list.size]);`","body":"You can only cast to Integer[] by using: <code>Integer[] arr = (Integer[])list.toArray(new Integer[list.size]);</code>"},{"owner":{"account_id":266709,"reputation":11846,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1324027891,"post_id":960431,"comment_id":10567114,"body_markdown":"@ripper234, eddie&#39;s solution is worse than the one on the question. actually the original one is technically the best as long as the List is RandomAccess impl (even it will be properly unrolled and the bounds check for array removed)","body":"@ripper234, eddie&#39;s solution is worse than the one on the question. actually the original one is technically the best as long as the List is RandomAccess impl (even it will be properly unrolled and the bounds check for array removed)"},{"owner":{"account_id":181983,"reputation":22075,"user_id":416369,"accept_rate":29,"display_name":"sactiw"},"score":1,"creation_date":1365523813,"post_id":960431,"comment_id":22654090,"body_markdown":"@Hardcoded you might want to edit your comment to use list.size() method and drop the unnecessary cast.","body":"@Hardcoded you might want to edit your comment to use list.size() method and drop the unnecessary cast."},{"owner":{"account_id":76626,"reputation":6476,"user_id":219210,"display_name":"Hardcoded"},"score":0,"creation_date":1367238155,"post_id":960431,"comment_id":23297049,"body_markdown":"@sactiw How should I do this? This comment is written 3 years ago and you can only edit your comments for the first 5 minutes.","body":"@sactiw How should I do this? This comment is written 3 years ago and you can only edit your comments for the first 5 minutes."},{"owner":{"account_id":320401,"reputation":1520,"user_id":638661,"accept_rate":55,"display_name":"Makoto"},"score":2,"creation_date":1402877655,"post_id":960431,"comment_id":37429195,"body_markdown":"Is there a better way to do this now in Java 8?","body":"Is there a better way to do this now in Java 8?"},{"owner":{"account_id":4680926,"reputation":2259,"user_id":3789665,"accept_rate":57,"display_name":"greybeard"},"score":2,"creation_date":1455045115,"post_id":960431,"comment_id":58310624,"body_markdown":"(@Makoto : see [Pshemo&#39;s answer](http://stackoverflow.com/a/23945015/3789665))","body":"(@Makoto : see <a href=\"http://stackoverflow.com/a/23945015/3789665\">Pshemo&#39;s answer</a>)"},{"owner":{"account_id":1228802,"reputation":279,"user_id":1193815,"accept_rate":50,"display_name":"old_soul_on_the_run"},"score":7,"creation_date":1537660165,"post_id":960431,"comment_id":91865730,"body_markdown":"int[] arr = listOfIntegers.stream().mapToInt(x-&gt;x).toArray();","body":"int[] arr = listOfIntegers.stream().mapToInt(x-&gt;x).toArray();"}],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":8,"up_vote_count":269,"is_accepted":true,"score":261,"last_activity_date":1244320098,"creation_date":1244320098,"answer_id":960449,"question_id":960431,"body_markdown":"Unfortunately, I don&#39;t believe there really *is* a better way of doing this due to the nature of Java&#39;s handling of primitive types, boxing, arrays and generics. In particular:\r\n\r\n- `List&lt;T&gt;.toArray` won&#39;t work because there&#39;s no conversion from `Integer` to `int`\r\n- You can&#39;t use `int` as a type argument for generics, so it would *have* to be an `int`-specific method (or one which used reflection to do nasty trickery).\r\n\r\nI believe there are libraries which have autogenerated versions of this kind of method for all the primitive types (i.e. there&#39;s a template which is copied for each type). It&#39;s ugly, but that&#39;s the way it is I&#39;m afraid :(\r\n\r\nEven though the [`Arrays`][1] class came out before generics arrived in Java, it would still have to include all the horrible overloads if it were introduced today (assuming you want to use primitive arrays).\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/util/Arrays.html","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>Unfortunately, I don't believe there really <em>is</em> a better way of doing this due to the nature of Java's handling of primitive types, boxing, arrays and generics. In particular:</p>\n\n<ul>\n<li><code>List&lt;T&gt;.toArray</code> won't work because there's no conversion from <code>Integer</code> to <code>int</code></li>\n<li>You can't use <code>int</code> as a type argument for generics, so it would <em>have</em> to be an <code>int</code>-specific method (or one which used reflection to do nasty trickery).</li>\n</ul>\n\n<p>I believe there are libraries which have autogenerated versions of this kind of method for all the primitive types (i.e. there's a template which is copied for each type). It's ugly, but that's the way it is I'm afraid :(</p>\n\n<p>Even though the <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Arrays.html\" rel=\"noreferrer\"><code>Arrays</code></a> class came out before generics arrived in Java, it would still have to include all the horrible overloads if it were introduced today (assuming you want to use primitive arrays).</p>\n"},{"tags":[],"owner":{"account_id":18929,"reputation":5197,"user_id":43864,"accept_rate":62,"display_name":"neesh"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1649876831,"creation_date":1244320407,"answer_id":960466,"question_id":960431,"body_markdown":"There is really no way of &quot;one-lining&quot; what you are trying to do, because toArray returns an Object[] and you cannot cast from Object[] to int[] or Integer[] to int[].\r\n","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>There is really no way of &quot;one-lining&quot; what you are trying to do, because toArray returns an Object[] and you cannot cast from Object[] to int[] or Integer[] to int[].</p>\n"},{"tags":[],"owner":{"account_id":23143,"reputation":53986,"user_id":57752,"accept_rate":73,"display_name":"Eddie"},"down_vote_count":3,"up_vote_count":185,"is_accepted":false,"score":182,"last_activity_date":1363248575,"creation_date":1244321308,"answer_id":960507,"question_id":960431,"body_markdown":"The easiest way to do this is to make use of [Apache Commons Lang][1].  It has a handy ArrayUtils class that can do what you want.  Use the [`toPrimitive`][2] method with the overload for an array of `Integer`s.\r\n\r\n    List&lt;Integer&gt; myList;\r\n     ... assign and fill the list\r\n    int[] intArray = ArrayUtils.toPrimitive(myList.toArray(new Integer[myList.size()]));\r\n\r\nThis way you don&#39;t reinvent the wheel.  Commons Lang has a great many useful things that Java left out.  Above, I chose to create an Integer list of the right size.  You can also use a 0-length static Integer array and let Java allocate an array of the right size:\r\n\r\n    static final Integer[] NO_INTS = new Integer[0];\r\n       ....\r\n    int[] intArray2 = ArrayUtils.toPrimitive(myList.toArray(NO_INTS));\r\n\r\n[1]: http://commons.apache.org/lang\r\n[2]: http://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/ArrayUtils.html#toPrimitive%28java.lang.Integer%5b%5d%29\r\n","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>The easiest way to do this is to make use of <a href=\"http://commons.apache.org/lang\" rel=\"noreferrer\">Apache Commons Lang</a>.  It has a handy ArrayUtils class that can do what you want.  Use the <a href=\"http://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/ArrayUtils.html#toPrimitive%28java.lang.Integer%5b%5d%29\" rel=\"noreferrer\"><code>toPrimitive</code></a> method with the overload for an array of <code>Integer</code>s.</p>\n\n<pre><code>List&lt;Integer&gt; myList;\n ... assign and fill the list\nint[] intArray = ArrayUtils.toPrimitive(myList.toArray(new Integer[myList.size()]));\n</code></pre>\n\n<p>This way you don't reinvent the wheel.  Commons Lang has a great many useful things that Java left out.  Above, I chose to create an Integer list of the right size.  You can also use a 0-length static Integer array and let Java allocate an array of the right size:</p>\n\n<pre><code>static final Integer[] NO_INTS = new Integer[0];\n   ....\nint[] intArray2 = ArrayUtils.toPrimitive(myList.toArray(NO_INTS));\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"Mike"},"down_vote_count":1,"up_vote_count":63,"is_accepted":false,"score":62,"last_activity_date":1649876921,"creation_date":1244472947,"answer_id":965289,"question_id":960431,"body_markdown":"Use:\r\n\r\n    int[] toIntArray(List&lt;Integer&gt; list)  {\r\n        int[] ret = new int[list.size()];\r\n        int i = 0;\r\n        for (Integer e : list)\r\n            ret[i++] = e;\r\n        return ret;\r\n    }\r\n\r\nThis slight change to your code is to avoid expensive list indexing (since a List is not necessarily an ArrayList, but it could be a linked list, for which random access is expensive).\r\n\r\n\r\n","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>Use:</p>\n<pre><code>int[] toIntArray(List&lt;Integer&gt; list)  {\n    int[] ret = new int[list.size()];\n    int i = 0;\n    for (Integer e : list)\n        ret[i++] = e;\n    return ret;\n}\n</code></pre>\n<p>This slight change to your code is to avoid expensive list indexing (since a List is not necessarily an ArrayList, but it could be a linked list, for which random access is expensive).</p>\n"},{"tags":[],"owner":{"account_id":7848,"reputation":108920,"user_id":13792,"accept_rate":100,"display_name":"ColinD"},"down_vote_count":2,"up_vote_count":224,"is_accepted":false,"score":222,"last_activity_date":1463463301,"creation_date":1278279154,"answer_id":3176296,"question_id":960431,"body_markdown":"In addition to Commons Lang, you can do this with [Guava][1]&#39;s method [`Ints.toArray(Collection&lt;Integer&gt; collection)`][2]:\r\n\r\n    List&lt;Integer&gt; list = ...\r\n    int[] ints = Ints.toArray(list);\r\n\r\nThis saves you having to do the intermediate array conversion that the Commons Lang equivalent requires yourself.\r\n\r\n  [1]: https://github.com/google/guava\r\n  [2]: http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/primitives/Ints.html#toArray(java.util.Collection)","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>In addition to Commons Lang, you can do this with <a href=\"https://github.com/google/guava\" rel=\"noreferrer\">Guava</a>'s method <a href=\"http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/primitives/Ints.html#toArray(java.util.Collection)\" rel=\"noreferrer\"><code>Ints.toArray(Collection&lt;Integer&gt; collection)</code></a>:</p>\n\n<pre><code>List&lt;Integer&gt; list = ...\nint[] ints = Ints.toArray(list);\n</code></pre>\n\n<p>This saves you having to do the intermediate array conversion that the Commons Lang equivalent requires yourself.</p>\n"},{"tags":[],"owner":{"account_id":32251,"reputation":114942,"user_id":89266,"accept_rate":91,"display_name":"dfa"},"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1649876959,"creation_date":1278340820,"answer_id":3180339,"question_id":960431,"body_markdown":"Also try [Dollar][1] ([check this revision][2]):\r\n\r\n    import static com.humaorie.dollar.Dollar.*\r\n    ...\r\n\r\n    List&lt;Integer&gt; source = ...;\r\n    int[] ints = $(source).convert().toIntArray();\r\n\r\n  [1]: http://bitbucket.org/dfa/dollar/\r\n  [2]: http://bitbucket.org/dfa/dollar/changeset/cea42757d873\r\n\r\n\r\n","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>Also try <a href=\"http://bitbucket.org/dfa/dollar/\" rel=\"nofollow noreferrer\">Dollar</a> (<a href=\"http://bitbucket.org/dfa/dollar/changeset/cea42757d873\" rel=\"nofollow noreferrer\">check this revision</a>):</p>\n<pre><code>import static com.humaorie.dollar.Dollar.*\n...\n\nList&lt;Integer&gt; source = ...;\nint[] ints = $(source).convert().toIntArray();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":321153,"reputation":67,"user_id":639802,"display_name":"DennisTemper"},"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1649877131,"creation_date":1307613836,"answer_id":6291107,"question_id":960431,"body_markdown":"I would recommend you to use the `List&lt;?&gt;` skeletal implementation from the Java collections API. It appears to be quite helpful in this particular case:\r\n\r\n    package mypackage;\r\n\r\n    import java.util.AbstractList;\r\n    import java.util.Arrays;\r\n    import java.util.Collections;\r\n    import java.util.List;\r\n\r\n    public class Test {\r\n\r\n        // Helper method to convert int arrays into Lists\r\n        static List&lt;Integer&gt; intArrayAsList(final int[] a) {\r\n            if(a == null)\r\n                throw new NullPointerException();\r\n            return new AbstractList&lt;Integer&gt;() {\r\n\r\n                @Override\r\n                public Integer get(int i) {\r\n                    return a[i]; // Autoboxing\r\n                }\r\n                @Override\r\n                public Integer set(int i, Integer val) {\r\n                    final int old = a[i];\r\n                    a[i] = val; // Auto-unboxing\r\n                    return old; // Autoboxing\r\n                }\r\n                @Override\r\n                public int size() {\r\n                    return a.length;\r\n                }\r\n            };\r\n        }\r\n\r\n        public static void main(final String[] args) {\r\n            int[] a = {1, 2, 3, 4, 5};\r\n            Collections.reverse(intArrayAsList(a));\r\n            System.out.println(Arrays.toString(a));\r\n        }\r\n    }\r\n\r\nBeware of boxing/unboxing drawbacks.\r\n\r\n\r\n","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>I would recommend you to use the <code>List&lt;?&gt;</code> skeletal implementation from the Java collections API. It appears to be quite helpful in this particular case:</p>\n<pre><code>package mypackage;\n\nimport java.util.AbstractList;\nimport java.util.Arrays;\nimport java.util.Collections;\nimport java.util.List;\n\npublic class Test {\n\n    // Helper method to convert int arrays into Lists\n    static List&lt;Integer&gt; intArrayAsList(final int[] a) {\n        if(a == null)\n            throw new NullPointerException();\n        return new AbstractList&lt;Integer&gt;() {\n\n            @Override\n            public Integer get(int i) {\n                return a[i]; // Autoboxing\n            }\n            @Override\n            public Integer set(int i, Integer val) {\n                final int old = a[i];\n                a[i] = val; // Auto-unboxing\n                return old; // Autoboxing\n            }\n            @Override\n            public int size() {\n                return a.length;\n            }\n        };\n    }\n\n    public static void main(final String[] args) {\n        int[] a = {1, 2, 3, 4, 5};\n        Collections.reverse(intArrayAsList(a));\n        System.out.println(Arrays.toString(a));\n    }\n}\n</code></pre>\n<p>Beware of boxing/unboxing drawbacks.</p>\n"},{"tags":[],"owner":{"account_id":325916,"reputation":5887,"user_id":697099,"accept_rate":40,"display_name":"gerardw"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1378235303,"creation_date":1330370325,"answer_id":9470875,"question_id":960431,"body_markdown":"    int[] ret = new int[list.size()];       \r\n    Iterator&lt;Integer&gt; iter = list.iterator();\r\n    for (int i=0; iter.hasNext(); i++) {       \r\n        ret[i] = iter.next();                \r\n    }                                        \r\n    return ret;                              ","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<pre><code>int[] ret = new int[list.size()];       \nIterator&lt;Integer&gt; iter = list.iterator();\nfor (int i=0; iter.hasNext(); i++) {       \n    ret[i] = iter.next();                \n}                                        \nreturn ret;                              \n</code></pre>\n"},{"tags":[],"owner":{"account_id":37187,"reputation":46683,"user_id":106261,"accept_rate":87,"display_name":"NimChimpsky"},"down_vote_count":3,"up_vote_count":3,"is_accepted":false,"score":0,"last_activity_date":1649877548,"creation_date":1352477285,"answer_id":13311659,"question_id":960431,"body_markdown":"Using a lambda you could do this (compiles in JDK lambda):\r\n\r\n    public static void main(String ars[]) {\r\n        TransformService transformService = (inputs) -&gt; {\r\n            int[] ints = new int[inputs.size()];\r\n            int i = 0;\r\n            for (Integer element : inputs) {\r\n                ints[ i++ ] = element;\r\n            }\r\n            return ints;\r\n        };\r\n\r\n        List&lt;Integer&gt; inputs = new ArrayList&lt;Integer&gt;(5) { {add(10); add(10);} };\r\n\r\n        int[] results = transformService.transform(inputs);\r\n    }\r\n\r\n    public interface TransformService {\r\n        int[] transform(List&lt;Integer&gt; inputs);\r\n    }\r\n\r\n\r\n\r\n","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>Using a lambda you could do this (compiles in JDK lambda):</p>\n<pre><code>public static void main(String ars[]) {\n    TransformService transformService = (inputs) -&gt; {\n        int[] ints = new int[inputs.size()];\n        int i = 0;\n        for (Integer element : inputs) {\n            ints[ i++ ] = element;\n        }\n        return ints;\n    };\n\n    List&lt;Integer&gt; inputs = new ArrayList&lt;Integer&gt;(5) { {add(10); add(10);} };\n\n    int[] results = transformService.transform(inputs);\n}\n\npublic interface TransformService {\n    int[] transform(List&lt;Integer&gt; inputs);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":153967,"reputation":1960,"user_id":369604,"accept_rate":77,"display_name":"Loduwijk"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1649877696,"creation_date":1374595029,"answer_id":17815188,"question_id":960431,"body_markdown":"I&#39;ve noticed several uses of *for* loops, but you don&#39;t even need anything inside the loop. I mention this only because the original question was trying to find less verbose code.\r\n\r\n    int[] toArray(List&lt;Integer&gt; list) {\r\n        int[] ret = new int[ list.size() ];\r\n        int i = 0;\r\n        for( Iterator&lt;Integer&gt; it = list.iterator();\r\n             it.hasNext();\r\n             ret[i++] = it.next() );\r\n        return ret;\r\n    }\r\n\r\nIf Java allowed multiple declarations in a *for* loop the way C++ does, we could go a step further and do for(int i = 0, Iterator&lt;Integer&gt; it...\r\n\r\nIn the end though (this part is just my opinion), if you are going to have a helping function or method to do something for you, just set it up and forget about it. It can be a one-liner or ten; if you&#39;ll never look at it again you won&#39;t know the difference.\r\n\r\n\r\n","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>I've noticed several uses of <em>for</em> loops, but you don't even need anything inside the loop. I mention this only because the original question was trying to find less verbose code.</p>\n<pre><code>int[] toArray(List&lt;Integer&gt; list) {\n    int[] ret = new int[ list.size() ];\n    int i = 0;\n    for( Iterator&lt;Integer&gt; it = list.iterator();\n         it.hasNext();\n         ret[i++] = it.next() );\n    return ret;\n}\n</code></pre>\n<p>If Java allowed multiple declarations in a <em>for</em> loop the way C++ does, we could go a step further and do for(int i = 0, Iterator it...</p>\n<p>In the end though (this part is just my opinion), if you are going to have a helping function or method to do something for you, just set it up and forget about it. It can be a one-liner or ten; if you'll never look at it again you won't know the difference.</p>\n"},{"tags":[],"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"down_vote_count":1,"up_vote_count":1051,"is_accepted":false,"score":1050,"last_activity_date":1681117697,"creation_date":1401408317,"answer_id":23945015,"question_id":960431,"body_markdown":"With streams added in Java 8 we can write code like:\r\n\r\n```\r\nint[] example1 = list.stream().mapToInt(i-&gt;i).toArray();\r\n// OR\r\nint[] example2 = list.stream().mapToInt(Integer::intValue).toArray();\r\n```\r\n\r\n---\r\nThought process:\r\n\r\n- The simple `Stream#toArray` returns an `Object[]` array, so it is not what we want. Also, `Stream#toArray(IntFunction&lt;A[]&gt; generator)` which returns `A[]` doesn&#39;t do what we want, because the generic type `A` can&#39;t represent the primitive type `int`\r\n- So it would be nice to have some kind of stream which would be designed to handle primitive type `int` instead of the reference type like `Integer`, because its `toArray` method will most likely also return an `int[]` array (returning something else like `Object[]` or even boxed `Integer[]` would be unnatural for `int`). And fortunately Java 8 has such a stream which is [`IntStream`][1]\r\n- So now the only thing we need to figure out is how to convert our `Stream&lt;Integer&gt;` (which will be returned from `list.stream()`) to that shiny `IntStream`.  \r\n \r\n  Quick searching in documentation of `Stream` while looking for methods which return `IntStream` points us to our solution which is [`mapToInt(ToIntFunction&lt;? super T&gt; mapper)`][2] method. All we need to do is provide a mapping from `Integer` to `int`.\r\n\r\n  Since [`ToIntFunction`][3] is *functional interface* we can also provide its instance via *lambda* or *method reference*.\r\n\r\n  Anyway to convert Integer to int we can use [`Integer#intValue`][4] so inside `mapToInt` we can write:\r\n\r\n    ```\r\n    mapToInt( (Integer i) -&gt; i.intValue() )\r\n    ```\r\n\r\n    (or some may prefer: `mapToInt(Integer::intValue)`.)\r\n\r\n    But similar code can be generated using unboxing, since the compiler knows that the result of this lambda must be of type `int` (the lambda used in `mapToInt` is an implementation of the `ToIntFunction` interface which expects as body a method of type: `int applyAsInt(T value)` which is expected to return an `int`).\r\n\r\n    So we can simply write:\r\n\r\n    ```\r\n    mapToInt((Integer i)-&gt;i)\r\n    ```\r\n\r\n    Also, since the `Integer` type in `(Integer i)` can be inferred by the compiler because `List&lt;Integer&gt;#stream()` returns a `Stream&lt;Integer&gt;`, we can also skip it which leaves us with\r\n\r\n    ```\r\n    mapToInt(i -&gt; i)\r\n    ```\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#mapToInt-java.util.function.ToIntFunction-\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/util/function/ToIntFunction.html\r\n  [4]: https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#intValue--","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>With streams added in Java 8 we can write code like:</p>\n<pre><code>int[] example1 = list.stream().mapToInt(i-&gt;i).toArray();\n// OR\nint[] example2 = list.stream().mapToInt(Integer::intValue).toArray();\n</code></pre>\n<hr />\n<p>Thought process:</p>\n<ul>\n<li><p>The simple <code>Stream#toArray</code> returns an <code>Object[]</code> array, so it is not what we want. Also, <code>Stream#toArray(IntFunction&lt;A[]&gt; generator)</code> which returns <code>A[]</code> doesn't do what we want, because the generic type <code>A</code> can't represent the primitive type <code>int</code></p>\n</li>\n<li><p>So it would be nice to have some kind of stream which would be designed to handle primitive type <code>int</code> instead of the reference type like <code>Integer</code>, because its <code>toArray</code> method will most likely also return an <code>int[]</code> array (returning something else like <code>Object[]</code> or even boxed <code>Integer[]</code> would be unnatural for <code>int</code>). And fortunately Java 8 has such a stream which is <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html\" rel=\"noreferrer\"><code>IntStream</code></a></p>\n</li>\n<li><p>So now the only thing we need to figure out is how to convert our <code>Stream&lt;Integer&gt;</code> (which will be returned from <code>list.stream()</code>) to that shiny <code>IntStream</code>.</p>\n<p>Quick searching in documentation of <code>Stream</code> while looking for methods which return <code>IntStream</code> points us to our solution which is <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#mapToInt-java.util.function.ToIntFunction-\" rel=\"noreferrer\"><code>mapToInt(ToIntFunction&lt;? super T&gt; mapper)</code></a> method. All we need to do is provide a mapping from <code>Integer</code> to <code>int</code>.</p>\n<p>Since <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/function/ToIntFunction.html\" rel=\"noreferrer\"><code>ToIntFunction</code></a> is <em>functional interface</em> we can also provide its instance via <em>lambda</em> or <em>method reference</em>.</p>\n<p>Anyway to convert Integer to int we can use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#intValue--\" rel=\"noreferrer\"><code>Integer#intValue</code></a> so inside <code>mapToInt</code> we can write:</p>\n<pre><code>mapToInt( (Integer i) -&gt; i.intValue() )\n</code></pre>\n<p>(or some may prefer: <code>mapToInt(Integer::intValue)</code>.)</p>\n<p>But similar code can be generated using unboxing, since the compiler knows that the result of this lambda must be of type <code>int</code> (the lambda used in <code>mapToInt</code> is an implementation of the <code>ToIntFunction</code> interface which expects as body a method of type: <code>int applyAsInt(T value)</code> which is expected to return an <code>int</code>).</p>\n<p>So we can simply write:</p>\n<pre><code>mapToInt((Integer i)-&gt;i)\n</code></pre>\n<p>Also, since the <code>Integer</code> type in <code>(Integer i)</code> can be inferred by the compiler because <code>List&lt;Integer&gt;#stream()</code> returns a <code>Stream&lt;Integer&gt;</code>, we can also skip it which leaves us with</p>\n<pre><code>mapToInt(i -&gt; i)\n</code></pre>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1448888080,"creation_date":1448888080,"answer_id":33999155,"question_id":960431,"body_markdown":"If you are simply mapping an `Integer` to an `int` then you should consider [using parallelism][1], since your mapping logic does not rely on any variables outside its scope.\r\n\r\n    int[] arr = list.parallelStream().mapToInt(Integer::intValue).toArray();\r\n\r\nJust be aware of this \r\n\r\n&gt; Note that parallelism is not automatically faster than performing operations serially, although it can be if you have enough data and processor cores. While aggregate operations enable you to more easily implement parallelism, it is still your responsibility to determine if your application is suitable for parallelism.\r\n\r\n---\r\n\r\nThere are two ways to map Integers to their primitive form:\r\n\r\n1. Via a `ToIntFunction`.\r\n\r\n        mapToInt(Integer::intValue)\r\n2. Via explicit [unboxing][3] with lambda expression.\r\n\r\n        mapToInt(i -&gt; i.intValue())\r\n3. Via implicit (auto-) unboxing with lambda expression.\r\n\r\n        mapToInt(i -&gt; i)\r\n\r\n---\r\n\r\nGiven a list with a `null` value\r\n\r\n    List&lt;Integer&gt; list = Arrays.asList(1, 2, null, 4, 5);\r\n\r\nHere are three options to handle `null`:\r\n\r\n1. Filter out the `null` values before mapping.\r\n\r\n        int[] arr = list.parallelStream().filter(Objects::nonNull).mapToInt(Integer::intValue).toArray();\r\n\r\n2. Map the `null` values to a default value.\r\n\r\n        int[] arr = list.parallelStream().map(i -&gt; i == null ? -1 : i).mapToInt(Integer::intValue).toArray();\r\n\r\n3. Handle `null` inside the lambda expression.\r\n\r\n        int[] arr = list.parallelStream().mapToInt(i -&gt; i == null ? -1 : i.intValue()).toArray();\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/collections/streams/parallelism.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html#parallelStream--\r\n  [3]: https://docs.oracle.com/javase/tutorial/java/data/autoboxing.html","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>If you are simply mapping an <code>Integer</code> to an <code>int</code> then you should consider <a href=\"https://docs.oracle.com/javase/tutorial/collections/streams/parallelism.html\" rel=\"noreferrer\">using parallelism</a>, since your mapping logic does not rely on any variables outside its scope.</p>\n\n<pre><code>int[] arr = list.parallelStream().mapToInt(Integer::intValue).toArray();\n</code></pre>\n\n<p>Just be aware of this </p>\n\n<blockquote>\n  <p>Note that parallelism is not automatically faster than performing operations serially, although it can be if you have enough data and processor cores. While aggregate operations enable you to more easily implement parallelism, it is still your responsibility to determine if your application is suitable for parallelism.</p>\n</blockquote>\n\n<hr>\n\n<p>There are two ways to map Integers to their primitive form:</p>\n\n<ol>\n<li><p>Via a <code>ToIntFunction</code>.</p>\n\n<pre><code>mapToInt(Integer::intValue)\n</code></pre></li>\n<li><p>Via explicit <a href=\"https://docs.oracle.com/javase/tutorial/java/data/autoboxing.html\" rel=\"noreferrer\">unboxing</a> with lambda expression.</p>\n\n<pre><code>mapToInt(i -&gt; i.intValue())\n</code></pre></li>\n<li><p>Via implicit (auto-) unboxing with lambda expression.</p>\n\n<pre><code>mapToInt(i -&gt; i)\n</code></pre></li>\n</ol>\n\n<hr>\n\n<p>Given a list with a <code>null</code> value</p>\n\n<pre><code>List&lt;Integer&gt; list = Arrays.asList(1, 2, null, 4, 5);\n</code></pre>\n\n<p>Here are three options to handle <code>null</code>:</p>\n\n<ol>\n<li><p>Filter out the <code>null</code> values before mapping.</p>\n\n<pre><code>int[] arr = list.parallelStream().filter(Objects::nonNull).mapToInt(Integer::intValue).toArray();\n</code></pre></li>\n<li><p>Map the <code>null</code> values to a default value.</p>\n\n<pre><code>int[] arr = list.parallelStream().map(i -&gt; i == null ? -1 : i).mapToInt(Integer::intValue).toArray();\n</code></pre></li>\n<li><p>Handle <code>null</code> inside the lambda expression.</p>\n\n<pre><code>int[] arr = list.parallelStream().mapToInt(i -&gt; i == null ? -1 : i.intValue()).toArray();\n</code></pre></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1712726,"reputation":6528,"user_id":1570415,"display_name":"Donald Raab"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1456860767,"creation_date":1456786614,"answer_id":35711427,"question_id":960431,"body_markdown":"With [Eclipse Collections][1], you can do the following if you have a list of type  `java.util.List&lt;Integer&gt;`:\r\n\r\n    List&lt;Integer&gt; integers = Lists.mutable.with(1, 2, 3, 4, 5);\r\n    int[] ints = LazyIterate.adapt(integers).collectInt(i -&gt; i).toArray();\r\n    \r\n    Assert.assertArrayEquals(new int[]{1, 2, 3, 4, 5}, ints);\r\n\r\nIf you already have an Eclipse Collections type like [`MutableList`][2], you can do the following:\r\n\r\n    MutableList&lt;Integer&gt; integers = Lists.mutable.with(1, 2, 3, 4, 5);\r\n    int[] ints = integers.asLazy().collectInt(i -&gt; i).toArray();\r\n    \r\n    Assert.assertArrayEquals(new int[]{1, 2, 3, 4, 5}, ints);\r\n\r\n\r\nNote: I am a committer for Eclipse Collections\r\n\r\n\r\n  [1]: https://www.eclipse.org/collections/\r\n  [2]: https://www.eclipse.org/collections/javadoc/7.0.0/org/eclipse/collections/api/list/MutableList.html","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>With <a href=\"https://www.eclipse.org/collections/\" rel=\"nofollow\">Eclipse Collections</a>, you can do the following if you have a list of type  <code>java.util.List&lt;Integer&gt;</code>:</p>\n\n<pre><code>List&lt;Integer&gt; integers = Lists.mutable.with(1, 2, 3, 4, 5);\nint[] ints = LazyIterate.adapt(integers).collectInt(i -&gt; i).toArray();\n\nAssert.assertArrayEquals(new int[]{1, 2, 3, 4, 5}, ints);\n</code></pre>\n\n<p>If you already have an Eclipse Collections type like <a href=\"https://www.eclipse.org/collections/javadoc/7.0.0/org/eclipse/collections/api/list/MutableList.html\" rel=\"nofollow\"><code>MutableList</code></a>, you can do the following:</p>\n\n<pre><code>MutableList&lt;Integer&gt; integers = Lists.mutable.with(1, 2, 3, 4, 5);\nint[] ints = integers.asLazy().collectInt(i -&gt; i).toArray();\n\nAssert.assertArrayEquals(new int[]{1, 2, 3, 4, 5}, ints);\n</code></pre>\n\n<p>Note: I am a committer for Eclipse Collections</p>\n"},{"tags":[],"owner":{"account_id":3050838,"reputation":2195,"user_id":2585433,"accept_rate":64,"display_name":"Noor Nawaz"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1649878105,"creation_date":1468233494,"answer_id":38304849,"question_id":960431,"body_markdown":"Here is a **Java 8** single line code for this:\r\n\r\n    public int[] toIntArray(List&lt;Integer&gt; intList){\r\n        return intList.stream().mapToInt(Integer::intValue).toArray();\r\n    }\r\n\r\n","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>Here is a <strong>Java 8</strong> single line code for this:</p>\n<pre><code>public int[] toIntArray(List&lt;Integer&gt; intList){\n    return intList.stream().mapToInt(Integer::intValue).toArray();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":464810,"reputation":2023,"user_id":868540,"accept_rate":72,"display_name":"Pumphouse"},"down_vote_count":0,"up_vote_count":85,"is_accepted":false,"score":85,"last_activity_date":1541570151,"creation_date":1473395402,"answer_id":39403890,"question_id":960431,"body_markdown":"**Java 8** has given us an easy way to do this via streams...\r\n\r\nUsing the collections `stream()` function and then mapping to ints, you&#39;ll get an IntStream. With the `IntStream` we can call toArray() which gives us `int []`\r\n\r\n    int [] ints = list.stream().mapToInt(Integer::intValue).toArray();\r\n\r\n[to int []][1]\r\n\r\n[to IntStream][2]\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html\r\n  [2]: https://stackoverflow.com/questions/24633913/how-do-i-get-an-intstream-from-a-listinteger","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p><strong>Java 8</strong> has given us an easy way to do this via streams...</p>\n\n<p>Using the collections <code>stream()</code> function and then mapping to ints, you'll get an IntStream. With the <code>IntStream</code> we can call toArray() which gives us <code>int []</code></p>\n\n<pre><code>int [] ints = list.stream().mapToInt(Integer::intValue).toArray();\n</code></pre>\n\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html\" rel=\"noreferrer\">to int []</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/24633913/how-do-i-get-an-intstream-from-a-listinteger\">to IntStream</a></p>\n"},{"tags":[],"owner":{"account_id":2094393,"reputation":1989,"user_id":1863510,"display_name":"THANN Phearum"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1477901065,"creation_date":1477901065,"answer_id":40338454,"question_id":960431,"body_markdown":"This simple loop is always correct! no bugs\r\n\r\n      int[] integers = new int[myList.size()];\r\n      for (int i = 0; i &lt; integers.length; i++) {\r\n          integers[i] = myList.get(i);\r\n      }","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>This simple loop is always correct! no bugs</p>\n\n<pre><code>  int[] integers = new int[myList.size()];\n  for (int i = 0; i &lt; integers.length; i++) {\n      integers[i] = myList.get(i);\n  }\n</code></pre>\n"}],"owner":{"display_name":"unknown"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":776373,"favorite_count":0,"down_vote_count":1,"up_vote_count":768,"closed_date":1540381860,"accepted_answer_id":960449,"answer_count":16,"score":767,"last_activity_date":1681117697,"creation_date":1244319618,"question_id":960431,"body_markdown":"How can I convert a `List&lt;Integer&gt;` to `int[]` in Java?\r\n\r\nI&#39;m confused because `List.toArray()` actually returns an `Object[]`, which can be cast to neither `Integer[]` nor `int[]`.\r\n\r\nRight now I&#39;m using a loop to do so:\r\n\r\n    int[] toIntArray(List&lt;Integer&gt; list) {\r\n      int[] ret = new int[list.size()];\r\n      for(int i = 0; i &lt; ret.length; i++)\r\n        ret[i] = list.get(i);\r\n      return ret;\r\n    }\r\n\r\nIs there&#39;s a better way to do this?\r\n\r\n&lt;sub&gt;This is similar to the question\r\n*https://stackoverflow.com/questions/880581/java-convert-int-to-integer*.&lt;/sub&gt;\r\n\r\n\r\n","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>How can I convert a <code>List&lt;Integer&gt;</code> to <code>int[]</code> in Java?</p>\n<p>I'm confused because <code>List.toArray()</code> actually returns an <code>Object[]</code>, which can be cast to neither <code>Integer[]</code> nor <code>int[]</code>.</p>\n<p>Right now I'm using a loop to do so:</p>\n<pre><code>int[] toIntArray(List&lt;Integer&gt; list) {\n  int[] ret = new int[list.size()];\n  for(int i = 0; i &lt; ret.length; i++)\n    ret[i] = list.get(i);\n  return ret;\n}\n</code></pre>\n<p>Is there's a better way to do this?</p>\n<p><sub>This is similar to the question\n<em><a href=\"https://stackoverflow.com/questions/880581/java-convert-int-to-integer\">How can I convert int[] to Integer[] in Java?</a></em>.</sub></p>\n"},{"tags":["java","urlencode","oauth-1.0a"],"answers":[{"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681117429,"creation_date":1681117429,"answer_id":75975708,"question_id":75974411,"body_markdown":"You are overthinking it. The way java stores strings internally is completely irrelevant to the matter and is transparent to you as a programmer. Just set your string as a header value and it will work. I wrote my own simplified Http client based on `HttpsURLConnection` class and I used it it to set auth header for authentication as well as many other headers and it works just fine. Here is a [Javadoc for my HttpClient][1] and here is a [GitHub][2] page for my MgntUtils Library. There you can see the source code. Here is the [HttpClient class source code][3]. See the line 344.\r\n\r\n\r\n  [1]: http://michaelgantman.github.io/Mgnt/docs/com/mgnt/lifecycle/management/httpclient/HttpClient.html\r\n  [2]: https://github.com/michaelgantman/Mgnt\r\n  [3]: https://github.com/michaelgantman/Mgnt/blob/master/src/main/java/com/mgnt/lifecycle/management/httpclient/HttpClient.java","title":"Set Authorization Header with UTF-8 in Java","body":"<p>You are overthinking it. The way java stores strings internally is completely irrelevant to the matter and is transparent to you as a programmer. Just set your string as a header value and it will work. I wrote my own simplified Http client based on <code>HttpsURLConnection</code> class and I used it it to set auth header for authentication as well as many other headers and it works just fine. Here is a <a href=\"http://michaelgantman.github.io/Mgnt/docs/com/mgnt/lifecycle/management/httpclient/HttpClient.html\" rel=\"nofollow noreferrer\">Javadoc for my HttpClient</a> and here is a <a href=\"https://github.com/michaelgantman/Mgnt\" rel=\"nofollow noreferrer\">GitHub</a> page for my MgntUtils Library. There you can see the source code. Here is the <a href=\"https://github.com/michaelgantman/Mgnt/blob/master/src/main/java/com/mgnt/lifecycle/management/httpclient/HttpClient.java\" rel=\"nofollow noreferrer\">HttpClient class source code</a>. See the line 344.</p>\n"}],"owner":{"account_id":14337166,"reputation":69,"user_id":19422364,"display_name":"HLR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":138,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1681121395,"accepted_answer_id":75975708,"answer_count":1,"score":0,"last_activity_date":1681117429,"creation_date":1681103403,"question_id":75974411,"body_markdown":"I am trying to perform the OAuth 1.0a authentication flow using Java. OAuth 1.0a requires &quot;All parameter names and values [to be] escaped using the RFC3985 percent-encoding mechanism... Text names and values MUST be encoded as UTF-8 octets.&quot; I would like to use the HttpsURLConnection class and use the setRequestProperty method to add the oauth parameters to the Authentication header. However, Java internally stores strings with UTF-16 encoding. I built a method that performs the percent encoding for me, so the string &quot;Hello World!&quot; is successfully changed to &quot;Hello%20World%21&quot;. Even though it follows percent-encoding, it is still internally stored in UTF-16. If I pass this string into the setRequestProperty under an arbitrary key, this would be unreadable to a server accepting UTF-8 data. How do I add UTF-8 text to an HTTP header? The setRequestProperty method takes two Strings, so no matter what, I can only pass in data stored in UTF-16. I have also converted the text data to a byte array that is in UTF-8 format, but I cannot use an array as input to the setRequestProperty.","title":"Set Authorization Header with UTF-8 in Java","body":"<p>I am trying to perform the OAuth 1.0a authentication flow using Java. OAuth 1.0a requires &quot;All parameter names and values [to be] escaped using the RFC3985 percent-encoding mechanism... Text names and values MUST be encoded as UTF-8 octets.&quot; I would like to use the HttpsURLConnection class and use the setRequestProperty method to add the oauth parameters to the Authentication header. However, Java internally stores strings with UTF-16 encoding. I built a method that performs the percent encoding for me, so the string &quot;Hello World!&quot; is successfully changed to &quot;Hello%20World%21&quot;. Even though it follows percent-encoding, it is still internally stored in UTF-16. If I pass this string into the setRequestProperty under an arbitrary key, this would be unreadable to a server accepting UTF-8 data. How do I add UTF-8 text to an HTTP header? The setRequestProperty method takes two Strings, so no matter what, I can only pass in data stored in UTF-16. I have also converted the text data to a byte array that is in UTF-8 format, but I cannot use an array as input to the setRequestProperty.</p>\n"},{"tags":["java","kotlin","generics"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1681118447,"post_id":75975585,"comment_id":134000872,"body_markdown":"The most viable solution is going to be to remove the generics on the method and to override it in SettingColor to return a SettingColor.  That&#39;s as good as it&#39;s going to get.","body":"The most viable solution is going to be to remove the generics on the method and to override it in SettingColor to return a SettingColor.  That&#39;s as good as it&#39;s going to get."}],"owner":{"account_id":25807987,"reputation":63,"user_id":19549245,"display_name":"OffeeX"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":315,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1681117021,"creation_date":1681116367,"question_id":75975585,"body_markdown":"`val color = setting(&quot;Color&quot;).color().depend(mode) { mode.like(&quot;Lightmap&quot;) }`\r\n\r\n```\r\nclass SettingColor(n: String, d: String, val color: ColorMutable) : Setting(n, d)\r\n```\r\n\r\n```\r\nabstract class Setting(var name: String, val description: String) {\r\n    fun &lt;T : Setting&gt;depend(vararg dependencies: Setting, resolver: () -&gt; Boolean): T {\r\n\t\treturn this as T\r\n\t}\r\n    class Builder(\r\n\t    private val m: Module,\r\n\t    private val n: String,\r\n\t    private val d: String\r\n    ) {\r\n        private fun &lt;S : Setting&gt;Module.setup(s: S): S {\r\n\t\t\t  g?.settings?.add(s)\r\n\t\t\t  this.addSetting(s)\r\n\t\t\t  return s\r\n\t\t}\r\n        fun color(color: ColorMutable = ColorMutable.WHITE) = m.setup(SettingColor(n, d, color))\r\n}\r\n```\r\n\r\n\r\nProblem with the `depend()` method. My IDE says, there are not enough info to infer type of T. However  `color()` method i&#39;m using here instantiates `SettingColor`, which is a direct child of the \r\n`Setting` class, in which `depend()` method is written in.\r\n\r\nThe only possible solution, which i don&#39;t really want to stick to, is to explicitly set type for `depend()` like this:\r\n\r\n`val color = setting(&quot;Color&quot;).color().depend&lt;SettingColor&gt;(mode) { mode.like(&quot;Lightmap&quot;) }`\r\n\r\nUPD: Kotlin version is 1.8.10","title":"Kotlin: Not enough information to infer type variable T","body":"<p><code>val color = setting(&quot;Color&quot;).color().depend(mode) { mode.like(&quot;Lightmap&quot;) }</code></p>\n<pre><code>class SettingColor(n: String, d: String, val color: ColorMutable) : Setting(n, d)\n</code></pre>\n<pre><code>abstract class Setting(var name: String, val description: String) {\n    fun &lt;T : Setting&gt;depend(vararg dependencies: Setting, resolver: () -&gt; Boolean): T {\n        return this as T\n    }\n    class Builder(\n        private val m: Module,\n        private val n: String,\n        private val d: String\n    ) {\n        private fun &lt;S : Setting&gt;Module.setup(s: S): S {\n              g?.settings?.add(s)\n              this.addSetting(s)\n              return s\n        }\n        fun color(color: ColorMutable = ColorMutable.WHITE) = m.setup(SettingColor(n, d, color))\n}\n</code></pre>\n<p>Problem with the <code>depend()</code> method. My IDE says, there are not enough info to infer type of T. However  <code>color()</code> method i'm using here instantiates <code>SettingColor</code>, which is a direct child of the\n<code>Setting</code> class, in which <code>depend()</code> method is written in.</p>\n<p>The only possible solution, which i don't really want to stick to, is to explicitly set type for <code>depend()</code> like this:</p>\n<p><code>val color = setting(&quot;Color&quot;).color().depend&lt;SettingColor&gt;(mode) { mode.like(&quot;Lightmap&quot;) }</code></p>\n<p>UPD: Kotlin version is 1.8.10</p>\n"},{"tags":["java","audio"],"answers":[{"tags":[],"owner":{"account_id":9934708,"reputation":997,"user_id":7353417,"display_name":"pierpy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681116773,"creation_date":1681116773,"answer_id":75975633,"question_id":75971209,"body_markdown":"The reverb is tied to MIDI CC 91. You need to set a message to that controller with value `0` , before sending `channel.noteOn` message. Maybe you want to set to `0` all other effects, so take a look at [Control change messages specifications](https://www.midi.org/specifications-old/item/table-3-control-change-messages-data-bytes-2)","title":"How can I create a sound with Java without special effects being added to it?","body":"<p>The reverb is tied to MIDI CC 91. You need to set a message to that controller with value <code>0</code> , before sending <code>channel.noteOn</code> message. Maybe you want to set to <code>0</code> all other effects, so take a look at <a href=\"https://www.midi.org/specifications-old/item/table-3-control-change-messages-data-bytes-2\" rel=\"nofollow noreferrer\">Control change messages specifications</a></p>\n"}],"owner":{"account_id":25160220,"reputation":1,"user_id":19004507,"display_name":"RyanJK5"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1681116773,"creation_date":1681052178,"question_id":75971209,"body_markdown":"I&#39;ve been trying to figure this out for a while now. This is the code I&#39;m using to play sounds:\r\n\r\n    private void playSound(int num) {\r\n        if (num &lt; 0) {\r\n            return;\r\n        }\r\n        MidiChannel channel = synth.getChannels()[0];\r\n        final int note = (int) (127f / maxNum * num);\r\n        channel.noteOn(note, 80);\r\n    }\r\nAll the MIDI channels have some kind of reverb or added effects on them. I tried stopping the sound after sleeping for a given amount of time (tried using both noteOff and noteOn with a velocity of 0), but the note never stops playing when I call these methods. For context, I&#39;m trying to recreate one of those [sorting algorithm visualizers](https://youtu.be/kPRA0W1kECg), so I want the sounds being played to sound similar to that.","title":"How can I create a sound with Java without special effects being added to it?","body":"<p>I've been trying to figure this out for a while now. This is the code I'm using to play sounds:</p>\n<pre><code>private void playSound(int num) {\n    if (num &lt; 0) {\n        return;\n    }\n    MidiChannel channel = synth.getChannels()[0];\n    final int note = (int) (127f / maxNum * num);\n    channel.noteOn(note, 80);\n}\n</code></pre>\n<p>All the MIDI channels have some kind of reverb or added effects on them. I tried stopping the sound after sleeping for a given amount of time (tried using both noteOff and noteOn with a velocity of 0), but the note never stops playing when I call these methods. For context, I'm trying to recreate one of those <a href=\"https://youtu.be/kPRA0W1kECg\" rel=\"nofollow noreferrer\">sorting algorithm visualizers</a>, so I want the sounds being played to sound similar to that.</p>\n"},{"tags":["java","intellij-idea","casting","compiler-warnings","redundancy"],"answers":[{"tags":[],"owner":{"account_id":2818342,"reputation":299838,"user_id":2422776,"display_name":"Mureinik"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1681116199,"creation_date":1681116199,"answer_id":75975567,"question_id":75975539,"body_markdown":"The value type of the map is `Function&lt;Object, ?&gt;` - i.e., it doesn&#39;t matter what the return type of the function is.\r\n\r\nSince casting doesn&#39;t really &quot;do&quot; anything, just let&#39;s the compiler know the type of the object, and since you don&#39;t need it to be a string in order to compile, you can just remove it.\r\n\r\nHaving said that, there also is no reason to &quot;reimplement&quot; the function `v -&gt; v`, and you could use `Function.identity()` instead.","title":"Casting to String is redundant","body":"<p>The value type of the map is <code>Function&lt;Object, ?&gt;</code> - i.e., it doesn't matter what the return type of the function is.</p>\n<p>Since casting doesn't really &quot;do&quot; anything, just let's the compiler know the type of the object, and since you don't need it to be a string in order to compile, you can just remove it.</p>\n<p>Having said that, there also is no reason to &quot;reimplement&quot; the function <code>v -&gt; v</code>, and you could use <code>Function.identity()</code> instead.</p>\n"}],"owner":{"account_id":4108248,"reputation":552,"user_id":3371582,"display_name":"IJR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":166,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75975567,"answer_count":1,"score":0,"last_activity_date":1681116357,"creation_date":1681115860,"question_id":75975539,"body_markdown":"Why does IntelliJ tell this casting from Object to String is redundant?\r\n\r\n\r\n    public class Utils {\r\n    \t\r\n    \tprivate static Map&lt;Class, Function&lt;Object, ?&gt;&gt; functions = new HashMap&lt;&gt;();\r\n    \t\r\n    \tstatic {\r\n    \t\tfunctions.put(String.class, v -&gt; (String) v);\r\n    \t\tfunctions.put(Foo.class, v -&gt; {\r\n    \t\t\tFoo foo = new Foo();\r\n    \t\t\tfoo.setA((String) ((Map&lt;String, Object&gt;) v).get(&quot;A&quot;));\r\n    \t\t\tfoo.setB((String) ((Map&lt;String, Object&gt;) v).get(&quot;B&quot;));\r\n    \t\t\treturn foo;\r\n    \t\t});\r\n    \t}\r\n    }\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1nv0I.png","title":"Casting to String is redundant","body":"<p>Why does IntelliJ tell this casting from Object to String is redundant?</p>\n<pre><code>public class Utils {\n    \n    private static Map&lt;Class, Function&lt;Object, ?&gt;&gt; functions = new HashMap&lt;&gt;();\n    \n    static {\n        functions.put(String.class, v -&gt; (String) v);\n        functions.put(Foo.class, v -&gt; {\n            Foo foo = new Foo();\n            foo.setA((String) ((Map&lt;String, Object&gt;) v).get(&quot;A&quot;));\n            foo.setB((String) ((Map&lt;String, Object&gt;) v).get(&quot;B&quot;));\n            return foo;\n        });\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/1nv0I.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1nv0I.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring","hibernate","jackson"],"comments":[{"owner":{"account_id":24109083,"reputation":150,"user_id":18079889,"display_name":"Mohammed Fataka"},"score":0,"creation_date":1681045924,"post_id":75969017,"comment_id":133992811,"body_markdown":"Does this answer your question? [Spring Boot @ManyToOne only Id @JsonProperty](https://stackoverflow.com/questions/60357405/spring-boot-manytoone-only-id-jsonproperty)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/60357405/spring-boot-manytoone-only-id-jsonproperty\">Spring Boot @ManyToOne only Id @JsonProperty</a>"}],"answers":[{"tags":[],"owner":{"account_id":2261604,"reputation":72,"user_id":1991545,"display_name":"abhi_88"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681116158,"creation_date":1681116158,"answer_id":75975563,"question_id":75969017,"body_markdown":"Try to implement link using hateoas.  Here is a sample request data.    \r\n\r\n    {\r\n    &quot;title&quot;: &quot;Model&quot;,\r\n    &quot;sex&quot;: &quot;CHILD&quot;,\r\n    &quot;manufacturer&quot;: \r\n\t            &quot;_links&quot;: {\r\n                &quot;self&quot;: {\r\n                    &quot;href&quot;: &quot;/manufacturers/1&quot;\r\n                }\r\n            },\r\n    &quot;sizes&quot;: [\r\n      {\r\n        &quot;size&quot;: 37,\r\n        &quot;quantity&quot;: 5\r\n      },\r\n      {\r\n        &quot;size&quot;: 39,\r\n        &quot;quantity&quot;: 4\r\n      }\r\n    ]\r\n  }\r\nNow no need to provide all Manufacturer fields in request data, instead you need to provide only id/","title":"How to send only Id foreign key in POST request via JSON?","body":"<p>Try to implement link using hateoas.  Here is a sample request data.</p>\n<pre><code>{\n&quot;title&quot;: &quot;Model&quot;,\n&quot;sex&quot;: &quot;CHILD&quot;,\n&quot;manufacturer&quot;: \n            &quot;_links&quot;: {\n            &quot;self&quot;: {\n                &quot;href&quot;: &quot;/manufacturers/1&quot;\n            }\n        },\n&quot;sizes&quot;: [\n  {\n    &quot;size&quot;: 37,\n    &quot;quantity&quot;: 5\n  },\n  {\n    &quot;size&quot;: 39,\n    &quot;quantity&quot;: 4\n  }\n]\n</code></pre>\n<p>}\nNow no need to provide all Manufacturer fields in request data, instead you need to provide only id/</p>\n"}],"owner":{"account_id":26929571,"reputation":25,"user_id":20502277,"display_name":"velovatik"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":132,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1681116158,"creation_date":1681020352,"question_id":75969017,"body_markdown":"I make internet shoe shop and now I create REST Controller for its goods, so now I&#39;m testing POST request and I have relation to good&#39;s manufacturer with manufacturerId\r\n[![DB Architecture](https://i.stack.imgur.com/asonT.png)](https://i.stack.imgur.com/asonT.png)\r\nBut now I need to write all information about manufacturer into JSON, but I think it&#39;s not a good practice to act like that.\r\n\r\nGood entity:\r\n```\r\n@Entity\r\n@Table(name = &quot;goods&quot;)\r\npublic class Good {\r\n    @Id\r\n    @Column(name = &quot;id&quot;)\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    //@JsonIgnore\r\n    private int id;\r\n\r\n    @Column(name = &quot;Title&quot;)\r\n    private String title;\r\n\r\n//    @Enumerated(EnumType.STRING)\r\n//    @Column(name = &quot;sex&quot;)\r\n//    private sexType sexType;\r\n\r\n    @Column(name = &quot;sex&quot;)\r\n    private String sex;\r\n\r\n    /**\r\n     * proved and it actually works!\r\n     */\r\n    //@JsonManagedReference\r\n    @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.DETACH,\r\n    CascadeType.REFRESH, CascadeType.MERGE})\r\n    @JoinColumn(name = &quot;ManufacturerId&quot;)\r\n    //@JsonIgnoreProperties\r\n    Manufacturer manufacturer; //Many goods can refer to one manufacturer\r\n\r\n\r\n    @JsonManagedReference\r\n    @OneToMany(cascade = {CascadeType.PERSIST, CascadeType.DETACH,\r\n            CascadeType.REFRESH, CascadeType.MERGE}, mappedBy = &quot;good&quot;)//Uni-directional reference to size array\r\n    List&lt;Size&gt; sizes;\r\n```\r\n\r\nManufacturer entity:\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;manufacturers&quot;)\r\npublic class Manufacturer {\r\n    @Id\r\n    @Column(name = &quot;id&quot;)\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private int id;\r\n\r\n    @Column(name = &quot;ManufacturerName&quot;)\r\n    private String manufacturerName;\r\n\r\n    @Column(name = &quot;Address&quot;)\r\n    private String address;\r\n\r\n    @Column(name = &quot;Telephone&quot;)\r\n    private String telephone;\r\n\r\n    //@JsonBackReference\r\n    @OneToMany(cascade = {CascadeType.PERSIST, CascadeType.DETACH,\r\n            CascadeType.REFRESH, CascadeType.MERGE},\r\n            mappedBy = &quot;manufacturer&quot;)\r\n    @JsonIgnore\r\n    private List&lt;Good&gt; goods;\r\n```\r\nJSON example for POST request:\r\n\r\n```\r\n  {\r\n    &quot;title&quot;: &quot;Model&quot;,\r\n    &quot;sex&quot;: &quot;CHILD&quot;,\r\n    &quot;manufacturer&quot;: {\r\n      &quot;id&quot;: 1,\r\n      &quot;manufacturerName&quot;: &quot;Ralf&quot;,\r\n      &quot;address&quot;: &quot;Moscow&quot;,\r\n      &quot;telephone&quot;: &quot;9-999-999-99-99&quot;\r\n    },\r\n    &quot;sizes&quot;: [\r\n      {\r\n        &quot;size&quot;: 37,\r\n        &quot;quantity&quot;: 5\r\n      },\r\n      {\r\n        &quot;size&quot;: 39,\r\n        &quot;quantity&quot;: 4\r\n      }\r\n    ]\r\n  }\r\n```\r\nHow can I send only manufacturerId?\r\n\r\n\r\nIf I use `@JsonIgnore` annotatinon, I think I won&#39;t get additional info about manufacturer","title":"How to send only Id foreign key in POST request via JSON?","body":"<p>I make internet shoe shop and now I create REST Controller for its goods, so now I'm testing POST request and I have relation to good's manufacturer with manufacturerId\n<a href=\"https://i.stack.imgur.com/asonT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/asonT.png\" alt=\"DB Architecture\" /></a>\nBut now I need to write all information about manufacturer into JSON, but I think it's not a good practice to act like that.</p>\n<p>Good entity:</p>\n<pre><code>@Entity\n@Table(name = &quot;goods&quot;)\npublic class Good {\n    @Id\n    @Column(name = &quot;id&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    //@JsonIgnore\n    private int id;\n\n    @Column(name = &quot;Title&quot;)\n    private String title;\n\n//    @Enumerated(EnumType.STRING)\n//    @Column(name = &quot;sex&quot;)\n//    private sexType sexType;\n\n    @Column(name = &quot;sex&quot;)\n    private String sex;\n\n    /**\n     * proved and it actually works!\n     */\n    //@JsonManagedReference\n    @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.DETACH,\n    CascadeType.REFRESH, CascadeType.MERGE})\n    @JoinColumn(name = &quot;ManufacturerId&quot;)\n    //@JsonIgnoreProperties\n    Manufacturer manufacturer; //Many goods can refer to one manufacturer\n\n\n    @JsonManagedReference\n    @OneToMany(cascade = {CascadeType.PERSIST, CascadeType.DETACH,\n            CascadeType.REFRESH, CascadeType.MERGE}, mappedBy = &quot;good&quot;)//Uni-directional reference to size array\n    List&lt;Size&gt; sizes;\n</code></pre>\n<p>Manufacturer entity:</p>\n<pre><code>@Entity\n@Table(name = &quot;manufacturers&quot;)\npublic class Manufacturer {\n    @Id\n    @Column(name = &quot;id&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int id;\n\n    @Column(name = &quot;ManufacturerName&quot;)\n    private String manufacturerName;\n\n    @Column(name = &quot;Address&quot;)\n    private String address;\n\n    @Column(name = &quot;Telephone&quot;)\n    private String telephone;\n\n    //@JsonBackReference\n    @OneToMany(cascade = {CascadeType.PERSIST, CascadeType.DETACH,\n            CascadeType.REFRESH, CascadeType.MERGE},\n            mappedBy = &quot;manufacturer&quot;)\n    @JsonIgnore\n    private List&lt;Good&gt; goods;\n</code></pre>\n<p>JSON example for POST request:</p>\n<pre><code>  {\n    &quot;title&quot;: &quot;Model&quot;,\n    &quot;sex&quot;: &quot;CHILD&quot;,\n    &quot;manufacturer&quot;: {\n      &quot;id&quot;: 1,\n      &quot;manufacturerName&quot;: &quot;Ralf&quot;,\n      &quot;address&quot;: &quot;Moscow&quot;,\n      &quot;telephone&quot;: &quot;9-999-999-99-99&quot;\n    },\n    &quot;sizes&quot;: [\n      {\n        &quot;size&quot;: 37,\n        &quot;quantity&quot;: 5\n      },\n      {\n        &quot;size&quot;: 39,\n        &quot;quantity&quot;: 4\n      }\n    ]\n  }\n</code></pre>\n<p>How can I send only manufacturerId?</p>\n<p>If I use <code>@JsonIgnore</code> annotatinon, I think I won't get additional info about manufacturer</p>\n"},{"tags":["java","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1617492659,"post_id":66936394,"comment_id":118320327,"body_markdown":"Note that assigning this as a field default means that your application will be consuming a huge amount of randomness for no reason (as most object instances are not about to be persisted); using `@GeneratedValue` is nearly always preferable.","body":"Note that assigning this as a field default means that your application will be consuming a huge amount of randomness for no reason (as most object instances are not about to be persisted); using <code>@GeneratedValue</code> is nearly always preferable."}],"answers":[{"tags":[],"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1667728969,"creation_date":1617491723,"answer_id":66936685,"question_id":66936394,"body_markdown":"I&#39;m not a hibernate specialist, however, if you do it like this, in general, it should be kind of ok, which means that the probability of collision is low, however &quot;what if&quot; there is a collision? In other words, you can&#39;t be 100% sure that you&#39;re &quot;guaranteed to avoid collision&quot;. If your system can deal with collision (re-create a UUID for example, assuming that performance penalty is negligible because this will happen in extremely rare cases) then no problem of course.\r\n\r\nNow the real question is whether there is something else that can be done here?\r\nWell, Hibernate is able to generate the `UUID` in a way that also uses an IP of the machine as a parameter of generation: \r\n\r\n~~~\r\n@Entity\r\npublic class SampleEntity {\r\n \r\n    @Id\r\n    @GeneratedValue(generator = &quot;UUID&quot;)\r\n    @GenericGenerator(\r\n        name = &quot;UUID&quot;,\r\n        strategy = &quot;org.hibernate.id.UUIDGenerator&quot;,\r\n        parameters = {\r\n            @Parameter(\r\n                name = &quot;uuid_gen_strategy_class&quot;,\r\n                value = &quot;org.hibernate.id.uuid.CustomVersionOneStrategy&quot;\r\n            )\r\n        }\r\n    )\r\n    @Column(name = &quot;id&quot;, updatable = false, nullable = false)\r\n    private UUID id;\r\n     \r\n    …\r\n}\r\n~~~\r\n\r\nFor more information read [here][1] for example\r\n\r\nOf course, the best approach would be to let the DB deal with the ID generation. You haven&#39;t specified which database do you use. For example, Postgresql allows generating UUID keys with the help of extension:\r\n\r\nRead [here][2] for example.\r\n\r\nIn general, using the UUID is not always a good idea - it&#39;s hard to deal with them in day-to-day life, and in general they introduce an overhead that might be significant if there are many rows in the table. So you might consider using an auto-increment sequence or something for the primary key - DB will be able to do it and you won&#39;t need to bother. \r\n\r\n\r\n  [1]: https://thorben-janssen.com/generate-uuids-primary-keys-hibernate/\r\n  [2]: https://www.postgresqltutorial.com/postgresql-uuid/","title":"UUID primary key for JPA Entity: safe approach to use unique values on multiple instances","body":"<p>I'm not a hibernate specialist, however, if you do it like this, in general, it should be kind of ok, which means that the probability of collision is low, however &quot;what if&quot; there is a collision? In other words, you can't be 100% sure that you're &quot;guaranteed to avoid collision&quot;. If your system can deal with collision (re-create a UUID for example, assuming that performance penalty is negligible because this will happen in extremely rare cases) then no problem of course.</p>\n<p>Now the real question is whether there is something else that can be done here?\nWell, Hibernate is able to generate the <code>UUID</code> in a way that also uses an IP of the machine as a parameter of generation:</p>\n<pre><code>@Entity\npublic class SampleEntity {\n \n    @Id\n    @GeneratedValue(generator = &quot;UUID&quot;)\n    @GenericGenerator(\n        name = &quot;UUID&quot;,\n        strategy = &quot;org.hibernate.id.UUIDGenerator&quot;,\n        parameters = {\n            @Parameter(\n                name = &quot;uuid_gen_strategy_class&quot;,\n                value = &quot;org.hibernate.id.uuid.CustomVersionOneStrategy&quot;\n            )\n        }\n    )\n    @Column(name = &quot;id&quot;, updatable = false, nullable = false)\n    private UUID id;\n     \n    …\n}\n</code></pre>\n<p>For more information read <a href=\"https://thorben-janssen.com/generate-uuids-primary-keys-hibernate/\" rel=\"nofollow noreferrer\">here</a> for example</p>\n<p>Of course, the best approach would be to let the DB deal with the ID generation. You haven't specified which database do you use. For example, Postgresql allows generating UUID keys with the help of extension:</p>\n<p>Read <a href=\"https://www.postgresqltutorial.com/postgresql-uuid/\" rel=\"nofollow noreferrer\">here</a> for example.</p>\n<p>In general, using the UUID is not always a good idea - it's hard to deal with them in day-to-day life, and in general they introduce an overhead that might be significant if there are many rows in the table. So you might consider using an auto-increment sequence or something for the primary key - DB will be able to do it and you won't need to bother.</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1667755851,"creation_date":1617491733,"answer_id":66936686,"question_id":66936394,"body_markdown":"&gt;`UUID uuid = UUID.randomUUID()`\r\n&gt;\r\n&gt;My doubt is this: Is this approach safe? Can I be sure ids will always be unique?\r\n\r\nYes, *extremely* safe. \r\n\r\nA [UUID Version 4][1] has 122 bits of randomly generated data. That is a *vast* range of numbers. Assuming your UUID is being generated with a [cryptographically-strong random number generator][2], you have no practical concerns with using a randomly-generated UUID. \r\n\r\nFor details, see the [*Collisions*][3] section on Wikipedia.\r\n\r\nIf you want to worry, apply your worry to things that are *much* more likely to happen. Top in my mind: [Cosmic rays][4] [flipping bits][5] in non-[EEC memory][6]. (See valid [rant by Linus Torvalds][7] on the issue.) \r\n\r\nPersonally, I consider the point-in-space-and-time versions such as Version 1 to be even less of a concern for collisions. But others debate this. Either way, Version 1 or Version 4, I would sleep well.\r\n\r\nDespite saying the above, you should still ensure that your code is written to be robust in the face of collisions. Not because of collisions from randomly-generated duplicates, but because of collision from the all-too-human possibilities such as a bug in your code that double-posts the record to database, or a DBA who mistakenly loads back-up data twice, and so on. \r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Universally_unique_identifier#Version_4_(random)\r\n  [2]: https://en.wikipedia.org/wiki/Cryptographically_secure_pseudorandom_number_generator\r\n  [3]: https://en.wikipedia.org/wiki/Universally_unique_identifier#Collisions\r\n  [4]: https://en.m.wikipedia.org/wiki/Cosmic_ray\r\n  [5]: https://en.m.wikipedia.org/wiki/Cosmic_ray#Effect_on_electronics\r\n  [6]: https://en.wikipedia.org/wiki/ECC_memory\r\n  [7]: https://www.theregister.com/2021/01/04/linus_torvalds_intel_killed_ecc/","title":"UUID primary key for JPA Entity: safe approach to use unique values on multiple instances","body":"<blockquote>\n<p><code>UUID uuid = UUID.randomUUID()</code></p>\n<p>My doubt is this: Is this approach safe? Can I be sure ids will always be unique?</p>\n</blockquote>\n<p>Yes, <em>extremely</em> safe.</p>\n<p>A <a href=\"https://en.wikipedia.org/wiki/Universally_unique_identifier#Version_4_(random)\" rel=\"nofollow noreferrer\">UUID Version 4</a> has 122 bits of randomly generated data. That is a <em>vast</em> range of numbers. Assuming your UUID is being generated with a <a href=\"https://en.wikipedia.org/wiki/Cryptographically_secure_pseudorandom_number_generator\" rel=\"nofollow noreferrer\">cryptographically-strong random number generator</a>, you have no practical concerns with using a randomly-generated UUID.</p>\n<p>For details, see the <a href=\"https://en.wikipedia.org/wiki/Universally_unique_identifier#Collisions\" rel=\"nofollow noreferrer\"><em>Collisions</em></a> section on Wikipedia.</p>\n<p>If you want to worry, apply your worry to things that are <em>much</em> more likely to happen. Top in my mind: <a href=\"https://en.m.wikipedia.org/wiki/Cosmic_ray\" rel=\"nofollow noreferrer\">Cosmic rays</a> <a href=\"https://en.m.wikipedia.org/wiki/Cosmic_ray#Effect_on_electronics\" rel=\"nofollow noreferrer\">flipping bits</a> in non-<a href=\"https://en.wikipedia.org/wiki/ECC_memory\" rel=\"nofollow noreferrer\">EEC memory</a>. (See valid <a href=\"https://www.theregister.com/2021/01/04/linus_torvalds_intel_killed_ecc/\" rel=\"nofollow noreferrer\">rant by Linus Torvalds</a> on the issue.)</p>\n<p>Personally, I consider the point-in-space-and-time versions such as Version 1 to be even less of a concern for collisions. But others debate this. Either way, Version 1 or Version 4, I would sleep well.</p>\n<p>Despite saying the above, you should still ensure that your code is written to be robust in the face of collisions. Not because of collisions from randomly-generated duplicates, but because of collision from the all-too-human possibilities such as a bug in your code that double-posts the record to database, or a DBA who mistakenly loads back-up data twice, and so on.</p>\n"},{"tags":[],"owner":{"account_id":19370048,"reputation":659,"user_id":14163532,"display_name":"PKS"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1681116089,"creation_date":1681116089,"answer_id":75975553,"question_id":66936394,"body_markdown":"For those who are using hibernate 6.0+ then write the following way\r\n\r\n      @Id\r\n      @GeneratedValue(strategy = UUID)\r\n      UUID id;","title":"UUID primary key for JPA Entity: safe approach to use unique values on multiple instances","body":"<p>For those who are using hibernate 6.0+ then write the following way</p>\n<pre><code>  @Id\n  @GeneratedValue(strategy = UUID)\n  UUID id;\n</code></pre>\n"}],"owner":{"account_id":254664,"reputation":11551,"user_id":534218,"accept_rate":54,"display_name":"Safari"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35755,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":3,"score":12,"last_activity_date":1681116089,"creation_date":1617488714,"question_id":66936394,"body_markdown":"I&#39;m using SpringBoot, JPA and Hibernate.\r\n\r\nI have a doubt.\r\n\r\nFor my entities I need to have an UUID as primary key (and I would like to save this id in &quot;clear mode&quot; (string) and not binary)\r\n\r\nI&#39;m using this code:\r\n\r\n    @Id\r\n    @Column(name = &quot;id&quot;)\r\n    @Type(type = &quot;uuid-char&quot;)\r\n    private UUID uuid = UUID.randomUUID();\r\n\r\nMy doubt is this: Is this approach safe? Can I be sure ids will always be unique?  \r\n\r\nI understand that, using this code, the UUID will be generated code side so, what&#39;s happen if I will have multiple instances for my service using the same DB service for all instances?\r\n\r\nIs it possible that more instances  will generate the same UUID?\r\n","title":"UUID primary key for JPA Entity: safe approach to use unique values on multiple instances","body":"<p>I'm using SpringBoot, JPA and Hibernate.</p>\n<p>I have a doubt.</p>\n<p>For my entities I need to have an UUID as primary key (and I would like to save this id in &quot;clear mode&quot; (string) and not binary)</p>\n<p>I'm using this code:</p>\n<pre><code>@Id\n@Column(name = &quot;id&quot;)\n@Type(type = &quot;uuid-char&quot;)\nprivate UUID uuid = UUID.randomUUID();\n</code></pre>\n<p>My doubt is this: Is this approach safe? Can I be sure ids will always be unique?</p>\n<p>I understand that, using this code, the UUID will be generated code side so, what's happen if I will have multiple instances for my service using the same DB service for all instances?</p>\n<p>Is it possible that more instances  will generate the same UUID?</p>\n"},{"tags":["java","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":1866848,"reputation":18503,"user_id":1690193,"accept_rate":93,"display_name":"Nick.Mc"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681115958,"creation_date":1681115958,"answer_id":75975547,"question_id":74569662,"body_markdown":"The root cause was that the springboot queries were using the wrong data type for a parameter, making the select queries non sargable, in turn requiring a table scan (rather than utilising the index)..... lots and lots of table scans that were hidden by scaling the server up to a huge core count. After we fixed the parameter data type in the query to match the search fields data type, db activity went waaaaaaay down and the problem disappeared. AFAIK the CannotAcquireLockException was a legitimate message - it couldn&#39;t actually acquire a shared lock it was simply too busy doing table scans and dealing with the data merge.","title":"Troubleshooting springboot locking issues","body":"<p>The root cause was that the springboot queries were using the wrong data type for a parameter, making the select queries non sargable, in turn requiring a table scan (rather than utilising the index)..... lots and lots of table scans that were hidden by scaling the server up to a huge core count. After we fixed the parameter data type in the query to match the search fields data type, db activity went waaaaaaay down and the problem disappeared. AFAIK the CannotAcquireLockException was a legitimate message - it couldn't actually acquire a shared lock it was simply too busy doing table scans and dealing with the data merge.</p>\n"}],"owner":{"account_id":1866848,"reputation":18503,"user_id":1690193,"accept_rate":93,"display_name":"Nick.Mc"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75975547,"answer_count":1,"score":1,"last_activity_date":1681115958,"creation_date":1669362614,"question_id":74569662,"body_markdown":"I&#39;m a DB guy with some app experience. I do not have a code sample so hoping someone with springboot experience can shed light on this.\r\n\r\nWe have Java code using springboot to select single rows out of the database all day (for a web  application)\r\n\r\nWe have a morning process which needs to merge into the same table. Target table has 1.3 million rows. Source table has between 8k to 16k rows\r\n\r\nUnder normal circumstances this merge is complete in under five minutes or so\r\n\r\nHowever in 3 out of 14 runs we have an issue where this activity collides with springboot select activity\r\n\r\nNote that all tables are indexes, queries optmised etc.\r\n\r\nWhat confuses me is that springboot is running a `select` query, however the error returned is\r\n\r\n&gt; CannotAcquireLockException\r\n\r\nWhen I check the [docs][1] it says\r\n\r\n&gt; Exception thrown on failure to acquire a lock during an update, for example during a &quot;select for update&quot; statement.\r\n\r\n**But this is not an update statement**\r\n\r\nAs far as I know it is not a SELECT FOR UPDATE statement.\r\n\r\nI&#39;m not too sharp on the Java code but I can see this code fragment:\r\n\r\n(Sorry for screenshot I&#39;ll come back and convert to code if anyone shows any interest)\r\n\r\n[![enter image description here][2]][2]\r\n\r\nIs `CrudRepository` automatically assuming this is write query and needlessly applying locks? can anyone tell me what to look for to confirm this query is set to read only?\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/dao/CannotAcquireLockException.html\r\n  [2]: https://i.stack.imgur.com/WVUxz.png","title":"Troubleshooting springboot locking issues","body":"<p>I'm a DB guy with some app experience. I do not have a code sample so hoping someone with springboot experience can shed light on this.</p>\n<p>We have Java code using springboot to select single rows out of the database all day (for a web  application)</p>\n<p>We have a morning process which needs to merge into the same table. Target table has 1.3 million rows. Source table has between 8k to 16k rows</p>\n<p>Under normal circumstances this merge is complete in under five minutes or so</p>\n<p>However in 3 out of 14 runs we have an issue where this activity collides with springboot select activity</p>\n<p>Note that all tables are indexes, queries optmised etc.</p>\n<p>What confuses me is that springboot is running a <code>select</code> query, however the error returned is</p>\n<blockquote>\n<p>CannotAcquireLockException</p>\n</blockquote>\n<p>When I check the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/dao/CannotAcquireLockException.html\" rel=\"nofollow noreferrer\">docs</a> it says</p>\n<blockquote>\n<p>Exception thrown on failure to acquire a lock during an update, for example during a &quot;select for update&quot; statement.</p>\n</blockquote>\n<p><strong>But this is not an update statement</strong></p>\n<p>As far as I know it is not a SELECT FOR UPDATE statement.</p>\n<p>I'm not too sharp on the Java code but I can see this code fragment:</p>\n<p>(Sorry for screenshot I'll come back and convert to code if anyone shows any interest)</p>\n<p><a href=\"https://i.stack.imgur.com/WVUxz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WVUxz.png\" alt=\"enter image description here\" /></a></p>\n<p>Is <code>CrudRepository</code> automatically assuming this is write query and needlessly applying locks? can anyone tell me what to look for to confirm this query is set to read only?</p>\n"},{"tags":["java","security","ssl"],"answers":[{"tags":[],"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1460509243,"creation_date":1460509243,"answer_id":36586720,"question_id":36585744,"body_markdown":"If you&#39;re using a JDK, adding it to the JRE truststore won&#39;t help. You need to add it to the truststore of the JRE that comes inside the JDK.","title":"added certificate to java keystore, still error","body":"<p>If you're using a JDK, adding it to the JRE truststore won't help. You need to add it to the truststore of the JRE that comes inside the JDK.</p>\n"},{"tags":[],"owner":{"account_id":4923650,"reputation":985,"user_id":3965524,"accept_rate":91,"display_name":"JavaTec"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1461181963,"creation_date":1460560291,"answer_id":36602661,"question_id":36585744,"body_markdown":"There were two types of setup where we were able to make it work:\r\n\r\n1. On one machine, the person installing the JDk had done some changes to the folder structure for installing Java and had the following structure: Java/jre/lib/security as well as Java/lib/security. We added certificates to cacerts of Java/lib/security and it started to work\r\n\r\n2. On a second machine, where the user did the default istallation, the following folder structure existed: Java/jre_1.8/lib/security and Java/jdk_1.8/jre/lib/security. We updated cacerts at Java/jre_1.8/lib/security and it started to work (For some reason, updating cacartes at Java/jdk_1.8/jre/lib/security did not work)","title":"added certificate to java keystore, still error","body":"<p>There were two types of setup where we were able to make it work:</p>\n\n<ol>\n<li><p>On one machine, the person installing the JDk had done some changes to the folder structure for installing Java and had the following structure: Java/jre/lib/security as well as Java/lib/security. We added certificates to cacerts of Java/lib/security and it started to work</p></li>\n<li><p>On a second machine, where the user did the default istallation, the following folder structure existed: Java/jre_1.8/lib/security and Java/jdk_1.8/jre/lib/security. We updated cacerts at Java/jre_1.8/lib/security and it started to work (For some reason, updating cacartes at Java/jdk_1.8/jre/lib/security did not work)</p></li>\n</ol>\n"}],"owner":{"account_id":4923650,"reputation":985,"user_id":3965524,"accept_rate":91,"display_name":"JavaTec"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12832,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":36602661,"answer_count":2,"score":4,"last_activity_date":1681115878,"creation_date":1460502822,"question_id":36585744,"body_markdown":"Based on various web inputs, I have followed the following steps to add certificate to my local jdk keystore:\r\n\r\n1. Downloaded the certificates by hitting the following command from a Linux host: openssl s_client -connect MyService:443 -showcerts\r\n\r\n2. Copied the content between (and including) ------BEGIN CERTIFICATE-------- and --------END CERTIFICATE---------, saved it as C:\\Java\\jre\\lib\\security\\cer1.cer\r\n\r\n3. Typed: C:\\Java\\jre\\bin&gt;keytool -keystore C:\\Java\\jre\\lib\\security\\cacerts -importcert -alias cer1 -file C:\\Java\\jre\\lib\\security\\cer1.cer\r\n\r\nThis showed a message the certificate added successfully. Which i verified by using list command for keytool\r\n\r\n4. Then i restarted my machine, and tried to run my Java program again, but still keep getting error:     \r\n\r\n&quot;sun.security.validator.ValidatorException: PKIX path building failed:     sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid     certification path to requested target&quot;\r\n\r\nJDK Used: 1.8.0_31, Windows 7\r\n\r\nPlease help!","title":"added certificate to java keystore, still error","body":"<p>Based on various web inputs, I have followed the following steps to add certificate to my local jdk keystore:</p>\n\n<ol>\n<li><p>Downloaded the certificates by hitting the following command from a Linux host: openssl s_client -connect MyService:443 -showcerts</p></li>\n<li><p>Copied the content between (and including) ------BEGIN CERTIFICATE-------- and --------END CERTIFICATE---------, saved it as C:\\Java\\jre\\lib\\security\\cer1.cer</p></li>\n<li><p>Typed: C:\\Java\\jre\\bin>keytool -keystore C:\\Java\\jre\\lib\\security\\cacerts -importcert -alias cer1 -file C:\\Java\\jre\\lib\\security\\cer1.cer</p></li>\n</ol>\n\n<p>This showed a message the certificate added successfully. Which i verified by using list command for keytool</p>\n\n<ol start=\"4\">\n<li>Then i restarted my machine, and tried to run my Java program again, but still keep getting error:     </li>\n</ol>\n\n<p>\"sun.security.validator.ValidatorException: PKIX path building failed:     sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid     certification path to requested target\"</p>\n\n<p>JDK Used: 1.8.0_31, Windows 7</p>\n\n<p>Please help!</p>\n"},{"tags":["java","java-8","option-type"],"comments":[{"owner":{"account_id":1734091,"reputation":92376,"user_id":1587046,"accept_rate":62,"display_name":"Alexis C."},"score":1,"creation_date":1434449698,"post_id":30864583,"comment_id":49771187,"body_markdown":"See http://stackoverflow.com/questions/26684562/java-8-map-and-flatmap-methods","body":"See <a href=\"http://stackoverflow.com/questions/26684562/java-8-map-and-flatmap-methods\" title=\"java 8 map and flatmap methods\">stackoverflow.com/questions/26684562/&hellip;</a>"},{"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"score":7,"creation_date":1434449768,"post_id":30864583,"comment_id":49771235,"body_markdown":"@AlexisC. Your link is about Stream&#39;s map and flatMap, not Optional.","body":"@AlexisC. Your link is about Stream&#39;s map and flatMap, not Optional."},{"owner":{"account_id":5797135,"reputation":2134,"user_id":4572590,"accept_rate":83,"display_name":"griFlo"},"score":0,"creation_date":1434449801,"post_id":30864583,"comment_id":49771251,"body_markdown":"from the java doc: If a value is present, apply the provided Optional-bearing mapping function to it, return that result, otherwise return an empty Optional. This method is similar to map(Function), but the provided mapper is one whose result is already an Optional, and if invoked, flatMap does not wrap it with an additional Optional.","body":"from the java doc: If a value is present, apply the provided Optional-bearing mapping function to it, return that result, otherwise return an empty Optional. This method is similar to map(Function), but the provided mapper is one whose result is already an Optional, and if invoked, flatMap does not wrap it with an additional Optional."},{"owner":{"account_id":1734091,"reputation":92376,"user_id":1587046,"accept_rate":62,"display_name":"Alexis C."},"score":1,"creation_date":1434449930,"post_id":30864583,"comment_id":49771336,"body_markdown":"@Eran That doesn&#39;t matter, if you understand how map/flatMap works whether it&#39;s for a Stream or not, it&#39;s the same for an Optional. If the op understood how it works for a Stream, then he shouldn&#39;t asked this question. The concept is the same.","body":"@Eran That doesn&#39;t matter, if you understand how map/flatMap works whether it&#39;s for a Stream or not, it&#39;s the same for an Optional. If the op understood how it works for a Stream, then he shouldn&#39;t asked this question. The concept is the same."},{"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"score":4,"creation_date":1434450178,"post_id":30864583,"comment_id":49771487,"body_markdown":"@AlexisC. Not really. Optional&#39;s flatMap has little in common with Stream&#39;s flatMap.","body":"@AlexisC. Not really. Optional&#39;s flatMap has little in common with Stream&#39;s flatMap."},{"owner":{"account_id":1734091,"reputation":92376,"user_id":1587046,"accept_rate":62,"display_name":"Alexis C."},"score":1,"creation_date":1434450480,"post_id":30864583,"comment_id":49771683,"body_markdown":"@Eran I&#39;m speaking about the **conceptual** difference between a map and a flatMap, I&#39;m not making a one-to-one correspondance between `Stream#flatMap` and `Optional#flatMap`.","body":"@Eran I&#39;m speaking about the <b>conceptual</b> difference between a map and a flatMap, I&#39;m not making a one-to-one correspondance between <code>Stream#flatMap</code> and <code>Optional#flatMap</code>."}],"answers":[{"tags":[],"owner":{"account_id":2770660,"reputation":4602,"user_id":2385324,"accept_rate":87,"display_name":"Diego Martinoia"},"down_vote_count":0,"up_vote_count":92,"is_accepted":false,"score":92,"last_activity_date":1539714923,"creation_date":1434449763,"answer_id":30864727,"question_id":30864583,"body_markdown":"They both take a function from the type of the optional to something.\r\n\r\n`map()` applies the function &quot;***as is***&quot; on the optional you have:\r\n\r\n    if (optional.isEmpty()) return Optional.empty();\r\n    else return Optional.of(f(optional.get()));\r\n\r\nWhat happens if your function is a function from `T -&gt; Optional&lt;U&gt;`?   \r\nYour result is now an `Optional&lt;Optional&lt;U&gt;&gt;`!\r\n\r\nThat&#39;s what `flatMap()` is about: if your function already returns an `Optional`, `flatMap()` is a bit smarter and doesn&#39;t double wrap it, returning `Optional&lt;U&gt;`. \r\n \r\nIt&#39;s the composition of two functional idioms: `map` and `flatten`.\r\n\r\n","title":"What is the difference between Optional.flatMap and Optional.map?","body":"<p>They both take a function from the type of the optional to something.</p>\n\n<p><code>map()</code> applies the function \"<strong><em>as is</em></strong>\" on the optional you have:</p>\n\n<pre><code>if (optional.isEmpty()) return Optional.empty();\nelse return Optional.of(f(optional.get()));\n</code></pre>\n\n<p>What happens if your function is a function from <code>T -&gt; Optional&lt;U&gt;</code>?<br>\nYour result is now an <code>Optional&lt;Optional&lt;U&gt;&gt;</code>!</p>\n\n<p>That's what <code>flatMap()</code> is about: if your function already returns an <code>Optional</code>, <code>flatMap()</code> is a bit smarter and doesn't double wrap it, returning <code>Optional&lt;U&gt;</code>. </p>\n\n<p>It's the composition of two functional idioms: <code>map</code> and <code>flatten</code>.</p>\n"},{"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"down_vote_count":0,"up_vote_count":230,"is_accepted":true,"score":230,"last_activity_date":1536333328,"creation_date":1434449799,"answer_id":30864741,"question_id":30864583,"body_markdown":"Use `map` if the function returns the object you need or `flatMap` if the function returns an `Optional`. For example:\r\n\r\n    public static void main(String[] args) {\r\n      Optional&lt;String&gt; s = Optional.of(&quot;input&quot;);\r\n      System.out.println(s.map(Test::getOutput));\r\n      System.out.println(s.flatMap(Test::getOutputOpt));\r\n    }\r\n\r\n    static String getOutput(String input) {\r\n      return input == null ? null : &quot;output for &quot; + input;\r\n    }\r\n\r\n    static Optional&lt;String&gt; getOutputOpt(String input) {\r\n      return input == null ? Optional.empty() : Optional.of(&quot;output for &quot; + input);\r\n    }\r\n\r\nBoth print statements print the same thing.","title":"What is the difference between Optional.flatMap and Optional.map?","body":"<p>Use <code>map</code> if the function returns the object you need or <code>flatMap</code> if the function returns an <code>Optional</code>. For example:</p>\n\n<pre><code>public static void main(String[] args) {\n  Optional&lt;String&gt; s = Optional.of(\"input\");\n  System.out.println(s.map(Test::getOutput));\n  System.out.println(s.flatMap(Test::getOutputOpt));\n}\n\nstatic String getOutput(String input) {\n  return input == null ? null : \"output for \" + input;\n}\n\nstatic Optional&lt;String&gt; getOutputOpt(String input) {\n  return input == null ? Optional.empty() : Optional.of(\"output for \" + input);\n}\n</code></pre>\n\n<p>Both print statements print the same thing.</p>\n"},{"tags":[],"owner":{"account_id":2172622,"reputation":1478,"user_id":1924182,"display_name":"SandeepGodara"},"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1681115717,"creation_date":1489604966,"answer_id":42818673,"question_id":30864583,"body_markdown":"### NOTE\r\nBelow is the illustration of `map()` and `flatMap()` functions, otherwise `Optional` is primarily designed to be used as a return type only.\r\n\r\n---\r\nAs you already may know `Optional` is a kind of container which may or may not contain a single object, so it can be used wherever you anticipate a `null` value (you may never see NPE if you use `Optional` properly).\r\n\r\nFor example if you have a method which expects a `Person` object which may be *nullable* you may want to write the method something like this:\r\n\r\n    void doSome(Optional&lt;Person&gt; person) {\r\n        /* and here you want to retrieve some property phone out of person\r\n           you may write something like this:\r\n        */\r\n        Optional&lt;String&gt; phone = person.map((p) -&gt; p.getPhone());\r\n        phone.ifPresent((ph) -&gt; dial(ph));\r\n    }\r\n\r\n    class Person {\r\n        private String phone;\r\n        // setters, getters\r\n    }\r\n\r\nHere you have returned a `String` type which is automatically wrapped in an `Optional` type.\r\n\r\nIf `Person` class looked like this (i.e. `phone` is also `Optional`):\r\n\r\n    class Person {\r\n        private Optional&lt;String&gt; phone;\r\n        // setters, getters\r\n    }\r\n\r\nIn this case invoking `map()` function will wrap the returned value in `Optional` and yield something like:\r\n\r\n    Optional&lt;Optional&lt;String&gt;&gt;\r\n\r\nBut you may want `Optional&lt;String&gt;` instead, so here comes `flatMap()`:\r\n\r\n    void doSome(Optional&lt;Person&gt; person) {\r\n        Optional&lt;String&gt; phone = person.flatMap((p) -&gt; p.getPhone());\r\n        phone.ifPresent((ph) -&gt; dial(ph));\r\n    }\r\n\r\n---\r\n### P.S.\r\nNever call `get()` method (if you need to) on an `Optional` without checking it with `isPresent()` unless you can&#39;t live without `NullPointerException`.","title":"What is the difference between Optional.flatMap and Optional.map?","body":"<h3>NOTE</h3>\n<p>Below is the illustration of <code>map()</code> and <code>flatMap()</code> functions, otherwise <code>Optional</code> is primarily designed to be used as a return type only.</p>\n<hr />\n<p>As you already may know <code>Optional</code> is a kind of container which may or may not contain a single object, so it can be used wherever you anticipate a <code>null</code> value (you may never see NPE if you use <code>Optional</code> properly).</p>\n<p>For example if you have a method which expects a <code>Person</code> object which may be <em>nullable</em> you may want to write the method something like this:</p>\n<pre><code>void doSome(Optional&lt;Person&gt; person) {\n    /* and here you want to retrieve some property phone out of person\n       you may write something like this:\n    */\n    Optional&lt;String&gt; phone = person.map((p) -&gt; p.getPhone());\n    phone.ifPresent((ph) -&gt; dial(ph));\n}\n\nclass Person {\n    private String phone;\n    // setters, getters\n}\n</code></pre>\n<p>Here you have returned a <code>String</code> type which is automatically wrapped in an <code>Optional</code> type.</p>\n<p>If <code>Person</code> class looked like this (i.e. <code>phone</code> is also <code>Optional</code>):</p>\n<pre><code>class Person {\n    private Optional&lt;String&gt; phone;\n    // setters, getters\n}\n</code></pre>\n<p>In this case invoking <code>map()</code> function will wrap the returned value in <code>Optional</code> and yield something like:</p>\n<pre><code>Optional&lt;Optional&lt;String&gt;&gt;\n</code></pre>\n<p>But you may want <code>Optional&lt;String&gt;</code> instead, so here comes <code>flatMap()</code>:</p>\n<pre><code>void doSome(Optional&lt;Person&gt; person) {\n    Optional&lt;String&gt; phone = person.flatMap((p) -&gt; p.getPhone());\n    phone.ifPresent((ph) -&gt; dial(ph));\n}\n</code></pre>\n<hr />\n<h3>P.S.</h3>\n<p>Never call <code>get()</code> method (if you need to) on an <code>Optional</code> without checking it with <code>isPresent()</code> unless you can't live without <code>NullPointerException</code>.</p>\n"},{"tags":[],"owner":{"account_id":255080,"reputation":15519,"user_id":534877,"accept_rate":65,"display_name":"Robert Niestroj"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1537789905,"creation_date":1524250857,"answer_id":49948146,"question_id":30864583,"body_markdown":"What helped me was a look at the source code of the two functions. \r\n\r\n**Map** - wraps the result in an Optional.\r\n\r\n    public&lt;U&gt; Optional&lt;U&gt; map(Function&lt;? super T, ? extends U&gt; mapper) {\r\n        Objects.requireNonNull(mapper);\r\n        if (!isPresent())\r\n            return empty();\r\n        else {\r\n            return Optional.ofNullable(mapper.apply(value)); //&lt;--- wraps in an optional\r\n        }\r\n    }\r\n\r\n**flatMap** - returns the &#39;raw&#39; object\r\n\r\n    public&lt;U&gt; Optional&lt;U&gt; flatMap(Function&lt;? super T, Optional&lt;U&gt;&gt; mapper) {\r\n        Objects.requireNonNull(mapper);\r\n        if (!isPresent())\r\n            return empty();\r\n        else {\r\n            return Objects.requireNonNull(mapper.apply(value)); //&lt;---  returns &#39;raw&#39; object\r\n        }\r\n    }","title":"What is the difference between Optional.flatMap and Optional.map?","body":"<p>What helped me was a look at the source code of the two functions. </p>\n\n<p><strong>Map</strong> - wraps the result in an Optional.</p>\n\n<pre><code>public&lt;U&gt; Optional&lt;U&gt; map(Function&lt;? super T, ? extends U&gt; mapper) {\n    Objects.requireNonNull(mapper);\n    if (!isPresent())\n        return empty();\n    else {\n        return Optional.ofNullable(mapper.apply(value)); //&lt;--- wraps in an optional\n    }\n}\n</code></pre>\n\n<p><strong>flatMap</strong> - returns the 'raw' object</p>\n\n<pre><code>public&lt;U&gt; Optional&lt;U&gt; flatMap(Function&lt;? super T, Optional&lt;U&gt;&gt; mapper) {\n    Objects.requireNonNull(mapper);\n    if (!isPresent())\n        return empty();\n    else {\n        return Objects.requireNonNull(mapper.apply(value)); //&lt;---  returns 'raw' object\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1622089,"reputation":17709,"user_id":1498427,"accept_rate":89,"display_name":"catch23"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1658777928,"creation_date":1539799179,"answer_id":52860979,"question_id":30864583,"body_markdown":" - `Optional.map()`:\r\n   \r\nTakes every element and if the value exists, it is passed to the function:\r\n\r\n    Optional&lt;T&gt; optionalValue = ...;\r\n    Optional&lt;Boolean&gt; added = optionalValue.map(results::add);\r\n\r\nNow **added** has one of three values: `true` or `false` wrapped into an ***Optional*** , if `optionalValue` was present, or an ***empty Optional*** otherwise.\r\n\r\nIf you don&#39;t need to process the result you can simply use `ifPresent()`, it doesn&#39;t have return value:\r\n\r\n    optionalValue.ifPresent(results::add); \r\n\r\n - `Optional.flatMap()`:\r\n\r\nWorks similar to the same method of streams. Flattens out the stream of streams. With the difference that if the value is presented it is applied to function. Otherwise, an empty optional is returned.\r\n\r\nYou can use it for composing optional value functions calls. \r\n\r\nSuppose we have methods:\r\n\r\n    public static Optional&lt;Double&gt; inverse(Double x) {\r\n        return x == 0 ? Optional.empty() : Optional.of(1 / x);\r\n    }\r\n    \r\n    public static Optional&lt;Double&gt; squareRoot(Double x) {\r\n        return x &lt; 0 ? Optional.empty() : Optional.of(Math.sqrt(x));\r\n    }\r\n\r\nThen you can compute the square root of the inverse, like:\r\n\r\n    Optional&lt;Double&gt; result = inverse(-4.0).flatMap(MyMath::squareRoot);\r\n\r\nor, if you prefer:\r\n\r\n    Optional&lt;Double&gt; result = Optional.of(-4.0)\r\n                         .flatMap(MyMath::inverse)\r\n                         .flatMap(MyMath::squareRoot);\r\n\r\nIf either the `inverse()` or the `squareRoot()` returns `Optional.empty()`, the result is empty.\r\n\r\n\r\n","title":"What is the difference between Optional.flatMap and Optional.map?","body":"<ul>\n<li><code>Optional.map()</code>:</li>\n</ul>\n<p>Takes every element and if the value exists, it is passed to the function:</p>\n<pre><code>Optional&lt;T&gt; optionalValue = ...;\nOptional&lt;Boolean&gt; added = optionalValue.map(results::add);\n</code></pre>\n<p>Now <strong>added</strong> has one of three values: <code>true</code> or <code>false</code> wrapped into an <em><strong>Optional</strong></em> , if <code>optionalValue</code> was present, or an <em><strong>empty Optional</strong></em> otherwise.</p>\n<p>If you don't need to process the result you can simply use <code>ifPresent()</code>, it doesn't have return value:</p>\n<pre><code>optionalValue.ifPresent(results::add); \n</code></pre>\n<ul>\n<li><code>Optional.flatMap()</code>:</li>\n</ul>\n<p>Works similar to the same method of streams. Flattens out the stream of streams. With the difference that if the value is presented it is applied to function. Otherwise, an empty optional is returned.</p>\n<p>You can use it for composing optional value functions calls.</p>\n<p>Suppose we have methods:</p>\n<pre><code>public static Optional&lt;Double&gt; inverse(Double x) {\n    return x == 0 ? Optional.empty() : Optional.of(1 / x);\n}\n\npublic static Optional&lt;Double&gt; squareRoot(Double x) {\n    return x &lt; 0 ? Optional.empty() : Optional.of(Math.sqrt(x));\n}\n</code></pre>\n<p>Then you can compute the square root of the inverse, like:</p>\n<pre><code>Optional&lt;Double&gt; result = inverse(-4.0).flatMap(MyMath::squareRoot);\n</code></pre>\n<p>or, if you prefer:</p>\n<pre><code>Optional&lt;Double&gt; result = Optional.of(-4.0)\n                     .flatMap(MyMath::inverse)\n                     .flatMap(MyMath::squareRoot);\n</code></pre>\n<p>If either the <code>inverse()</code> or the <code>squareRoot()</code> returns <code>Optional.empty()</code>, the result is empty.</p>\n"},{"tags":[],"owner":{"account_id":17541523,"reputation":161,"user_id":12723614,"display_name":"momonannan"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1579169192,"creation_date":1579169192,"answer_id":59767176,"question_id":30864583,"body_markdown":"Okay. You **only need to use &#39;flatMap&#39; when you&#39;re facing nested Optionals**. Here&#39;s the example.\r\n```\r\npublic class Person {\r\n\r\n    private Optional&lt;Car&gt; optionalCar;\r\n\r\n    public Optional&lt;Car&gt; getOptionalCar() {\r\n        return optionalCar;\r\n    }\r\n}\r\n\r\npublic class Car {\r\n\r\n    private Optional&lt;Insurance&gt; optionalInsurance;\r\n\r\n    public Optional&lt;Insurance&gt; getOptionalInsurance() {\r\n        return optionalInsurance;\r\n    }\r\n}\r\n\r\npublic class Insurance {\r\n\r\n    private String name;\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n}\r\n\r\npublic class Test {\r\n\r\n    // map cannot deal with nested Optionals\r\n    public Optional&lt;String&gt; getCarInsuranceName(Person person) {\r\n        return person.getOptionalCar()\r\n                .map(Car::getOptionalInsurance) // ① leads to a Optional&lt;Optional&lt;Insurance&gt;\r\n                .map(Insurance::getName);       // ②\r\n    }\r\n\r\n}\r\n```\r\nLike Stream, Optional#map will return a value wrapped by a Optional. That&#39;s why we get a nested Optional -- `Optional&lt;Optional&lt;Insurance&gt;`. And at ②, we want to map it as an Insurance instance, that&#39;s how the tragedy happened.\r\nThe root is nested Optionals. If we can get the core value regardless the shells, we&#39;ll get it done. That&#39;s what flatMap does.\r\n```\r\npublic Optional&lt;String&gt; getCarInsuranceName(Person person) {\r\n    return person.getOptionalCar()\r\n                 .flatMap(Car::getOptionalInsurance)\r\n                 .map(Insurance::getName);\r\n}\r\n```\r\nIn the end, I stronly recommed the *Java 8 In Action* to you if you&#39;d like to study Java8 Systematicly.","title":"What is the difference between Optional.flatMap and Optional.map?","body":"<p>Okay. You <strong>only need to use 'flatMap' when you're facing nested Optionals</strong>. Here's the example.</p>\n\n<pre><code>public class Person {\n\n    private Optional&lt;Car&gt; optionalCar;\n\n    public Optional&lt;Car&gt; getOptionalCar() {\n        return optionalCar;\n    }\n}\n\npublic class Car {\n\n    private Optional&lt;Insurance&gt; optionalInsurance;\n\n    public Optional&lt;Insurance&gt; getOptionalInsurance() {\n        return optionalInsurance;\n    }\n}\n\npublic class Insurance {\n\n    private String name;\n\n    public String getName() {\n        return name;\n    }\n\n}\n\npublic class Test {\n\n    // map cannot deal with nested Optionals\n    public Optional&lt;String&gt; getCarInsuranceName(Person person) {\n        return person.getOptionalCar()\n                .map(Car::getOptionalInsurance) // ① leads to a Optional&lt;Optional&lt;Insurance&gt;\n                .map(Insurance::getName);       // ②\n    }\n\n}\n</code></pre>\n\n<p>Like Stream, Optional#map will return a value wrapped by a Optional. That's why we get a nested Optional -- <code>Optional&lt;Optional&lt;Insurance&gt;</code>. And at ②, we want to map it as an Insurance instance, that's how the tragedy happened.\nThe root is nested Optionals. If we can get the core value regardless the shells, we'll get it done. That's what flatMap does.</p>\n\n<pre><code>public Optional&lt;String&gt; getCarInsuranceName(Person person) {\n    return person.getOptionalCar()\n                 .flatMap(Car::getOptionalInsurance)\n                 .map(Insurance::getName);\n}\n</code></pre>\n\n<p>In the end, I stronly recommed the <em>Java 8 In Action</em> to you if you'd like to study Java8 Systematicly.</p>\n"},{"tags":[],"owner":{"account_id":9929434,"reputation":319,"user_id":7349926,"display_name":"Mathew Stephen"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1610360459,"creation_date":1610360459,"answer_id":65664997,"question_id":30864583,"body_markdown":"You can refer below link to understand in detail (best explanation which I could find):\r\n\r\nhttps://www.programmergirl.com/java-8-map-flatmap-difference/\r\n\r\nBoth map and flatMap - accept Function. The return type of map() is a single value whereas flatMap  is returning stream of values\r\n\r\n    &lt;R&gt; Stream&lt;R&gt; map(Function&lt;? super T, ? extends R&gt; mapper)\r\n    \r\n    &lt;R&gt; Stream&lt;R&gt; flatMap(Function&lt;? super T, ? extends Stream&lt;? extends R&gt;&gt; mapper)\r\n\r\n\r\n","title":"What is the difference between Optional.flatMap and Optional.map?","body":"<p>You can refer below link to understand in detail (best explanation which I could find):</p>\n<p><a href=\"https://www.programmergirl.com/java-8-map-flatmap-difference/\" rel=\"nofollow noreferrer\">https://www.programmergirl.com/java-8-map-flatmap-difference/</a></p>\n<p>Both map and flatMap - accept Function. The return type of map() is a single value whereas flatMap  is returning stream of values</p>\n<pre><code>&lt;R&gt; Stream&lt;R&gt; map(Function&lt;? super T, ? extends R&gt; mapper)\n\n&lt;R&gt; Stream&lt;R&gt; flatMap(Function&lt;? super T, ? extends Stream&lt;? extends R&gt;&gt; mapper)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6829513,"reputation":3942,"user_id":5254103,"accept_rate":0,"display_name":"BaiJiFeiLong"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1641721928,"creation_date":1641721928,"answer_id":70640109,"question_id":30864583,"body_markdown":"They do the **same** thing.\r\n\r\nThe **only difference** is that, the `lambda` return&#39;s type is **wrapped** by `Optional` or not.\r\n\r\nFor normal usage, `map` is shorter than `flatMap`\r\n\r\nExample:\r\n\r\n    package bj;\r\n\r\n    import java.util.Optional;\r\n\r\n    import static java.lang.System.out;\r\n\r\n    public class App {\r\n\r\n        public static void main(String[] args) {\r\n            out.println(Optional.of(10).map    (x -&gt;             x * x));\r\n            out.println(Optional.of(10).flatMap(x -&gt; Optional.of(x * x)));\r\n            out.println(Optional.of(10).map    (x -&gt; Optional.of(x * x).get()));\r\n\r\n            out.println(Optional.&lt;Integer&gt;empty().map    (x -&gt;             x * x));\r\n            out.println(Optional.&lt;Integer&gt;empty().flatMap(x -&gt; Optional.of(x * x)));\r\n            out.println(Optional.&lt;Integer&gt;empty().map    (x -&gt; Optional.of(x * x).get()));\r\n        }\r\n    }\r\n\r\n\r\nOutput:\r\n\r\n    Optional[100]\r\n    Optional[100]\r\n    Optional[100]\r\n    Optional.empty\r\n    Optional.empty\r\n    Optional.empty\r\n\r\n","title":"What is the difference between Optional.flatMap and Optional.map?","body":"<p>They do the <strong>same</strong> thing.</p>\n<p>The <strong>only difference</strong> is that, the <code>lambda</code> return's type is <strong>wrapped</strong> by <code>Optional</code> or not.</p>\n<p>For normal usage, <code>map</code> is shorter than <code>flatMap</code></p>\n<p>Example:</p>\n<pre><code>package bj;\n\nimport java.util.Optional;\n\nimport static java.lang.System.out;\n\npublic class App {\n\n    public static void main(String[] args) {\n        out.println(Optional.of(10).map    (x -&gt;             x * x));\n        out.println(Optional.of(10).flatMap(x -&gt; Optional.of(x * x)));\n        out.println(Optional.of(10).map    (x -&gt; Optional.of(x * x).get()));\n\n        out.println(Optional.&lt;Integer&gt;empty().map    (x -&gt;             x * x));\n        out.println(Optional.&lt;Integer&gt;empty().flatMap(x -&gt; Optional.of(x * x)));\n        out.println(Optional.&lt;Integer&gt;empty().map    (x -&gt; Optional.of(x * x).get()));\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>Optional[100]\nOptional[100]\nOptional[100]\nOptional.empty\nOptional.empty\nOptional.empty\n</code></pre>\n"}],"owner":{"account_id":1917510,"reputation":23561,"user_id":1729795,"accept_rate":83,"display_name":"codependent"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":164622,"favorite_count":0,"down_vote_count":0,"up_vote_count":240,"accepted_answer_id":30864741,"answer_count":8,"score":240,"last_activity_date":1681115717,"creation_date":1434449396,"question_id":30864583,"body_markdown":"What&#39;s the difference between these two methods: `Optional.flatMap()` and `Optional.map()`?\r\n\r\nAn example would be appreciated.","title":"What is the difference between Optional.flatMap and Optional.map?","body":"<p>What's the difference between these two methods: <code>Optional.flatMap()</code> and <code>Optional.map()</code>?</p>\n\n<p>An example would be appreciated.</p>\n"},{"tags":["java","elasticsearch","bulk"],"comments":[{"owner":{"account_id":9775903,"reputation":199,"user_id":7245951,"accept_rate":75,"display_name":"TheDominus"},"score":0,"creation_date":1681114991,"post_id":75975424,"comment_id":134000354,"body_markdown":"Is this issue related to this question - https://stackoverflow.com/questions/57109948/sockettimeoutexception-while-retrieving-or-inserting-data-into-elastic-search-by ?","body":"Is this issue related to this question - <a href=\"https://stackoverflow.com/questions/57109948/sockettimeoutexception-while-retrieving-or-inserting-data-into-elastic-search-by\" title=\"sockettimeoutexception while retrieving or inserting data into elastic search by\">stackoverflow.com/questions/57109948/&hellip;</a> ?"}],"owner":{"account_id":9775903,"reputation":199,"user_id":7245951,"accept_rate":75,"display_name":"TheDominus"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1681114831,"creation_date":1681114831,"question_id":75975424,"body_markdown":"I am trying to do a bulk update (sync) to Elastic Search. \r\nThe Bulk Update to Elastic Search is wrapped over a service and other application call that API to Bulk Update which internally calls ES Bulk API. \r\n\r\nApplication (Client) -&gt; BulkUpdateToES (Wrapper Service) -&gt; esclient.bulk()\r\n\r\n\r\nNow, esclient.[bulk][1]() is failing with a socket timeout exception. \r\n\r\n```\r\njava.net.SocketTimeoutException: 30,000 milliseconds timeout on connection http-outgoing-44 [ACTIVE]\\n\\tat org.apache.http.nio.protocol.HttpAsyncRequestExecutor.timeout(HttpAsyncRequestExecutor.java:387)\\n\\tat org.apache.http.impl.nio.client.InternalIODispatch.onTimeout(InternalIODispatch.java:98)\\n\\tat org.apache.http.impl.nio.client.InternalIODispatch.onTimeout(InternalIODispatch.java:40)\\n\\tat org.apache.http.impl.nio.reactor.AbstractIODispatch.timeout(AbstractIODispatch.java:175)\\n\\tat org.apache.http.impl.nio.reactor.BaseIOReactor.sessionTimedOut(BaseIOReactor.java:261)\\n\\tat org.apache.http.impl.nio.reactor.AbstractIOReactor.timeoutCheck(AbstractIOReactor.java:506)\\n\\tat org.apache.http.impl.nio.reactor.BaseIOReactor.validate(BaseIOReactor.java:211)\\n\\tat org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:280)\\n\\tat org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)\\n\\tat org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)\\n\\t... 1 more\r\n```\r\n\r\nHowever, the service call seems to not timeout i.e the response from BulkUpdateToES is returned under 1 sec.\r\n\r\nI am trying to reproduce the issue and will update the response data once I get it. \r\n\r\nHowever, I could not understand even though the ES is using a sync bulk update. How did the Wrapper API call did not had a timeout issue though ES had a timeout issue. \r\n\r\n\r\n  [1]: https://www.elastic.co/guide/en/elasticsearch/client/java-rest/current/java-rest-high-document-bulk.html","title":"SocketTimeout Exception in Elastic Search, But No timeout at API Level","body":"<p>I am trying to do a bulk update (sync) to Elastic Search.\nThe Bulk Update to Elastic Search is wrapped over a service and other application call that API to Bulk Update which internally calls ES Bulk API.</p>\n<p>Application (Client) -&gt; BulkUpdateToES (Wrapper Service) -&gt; esclient.bulk()</p>\n<p>Now, esclient.<a href=\"https://www.elastic.co/guide/en/elasticsearch/client/java-rest/current/java-rest-high-document-bulk.html\" rel=\"nofollow noreferrer\">bulk</a>() is failing with a socket timeout exception.</p>\n<pre><code>java.net.SocketTimeoutException: 30,000 milliseconds timeout on connection http-outgoing-44 [ACTIVE]\\n\\tat org.apache.http.nio.protocol.HttpAsyncRequestExecutor.timeout(HttpAsyncRequestExecutor.java:387)\\n\\tat org.apache.http.impl.nio.client.InternalIODispatch.onTimeout(InternalIODispatch.java:98)\\n\\tat org.apache.http.impl.nio.client.InternalIODispatch.onTimeout(InternalIODispatch.java:40)\\n\\tat org.apache.http.impl.nio.reactor.AbstractIODispatch.timeout(AbstractIODispatch.java:175)\\n\\tat org.apache.http.impl.nio.reactor.BaseIOReactor.sessionTimedOut(BaseIOReactor.java:261)\\n\\tat org.apache.http.impl.nio.reactor.AbstractIOReactor.timeoutCheck(AbstractIOReactor.java:506)\\n\\tat org.apache.http.impl.nio.reactor.BaseIOReactor.validate(BaseIOReactor.java:211)\\n\\tat org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:280)\\n\\tat org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)\\n\\tat org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)\\n\\t... 1 more\n</code></pre>\n<p>However, the service call seems to not timeout i.e the response from BulkUpdateToES is returned under 1 sec.</p>\n<p>I am trying to reproduce the issue and will update the response data once I get it.</p>\n<p>However, I could not understand even though the ES is using a sync bulk update. How did the Wrapper API call did not had a timeout issue though ES had a timeout issue.</p>\n"},{"tags":["java","aws-sdk","apache-beam","amazon-sqs"],"owner":{"account_id":27911298,"reputation":21,"user_id":21313440,"display_name":"Alon Harell"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1681114543,"creation_date":1681114543,"question_id":75975401,"body_markdown":"I have a data pipeline processor written in Java using Apache Beam 2.46, with AWS SDK v2.\r\n\r\nPart of the pipeline includes reading messages as a stream from AWS SQS queue, and then if processing of the message fails rewriting them to the queue.\r\nBeam uses the SqsUnboundedReader class to manage the stream-reading from SQS.\r\n\r\nApparently, after reading a message from the queue, beam gives it a processing timeout of about 2 minutes (unconfigurable) and then deletes the message from the queue.\r\n\r\n\r\n\r\n\r\nMy pipeline logic requires that I &quot;manually&quot; send the acknowledgements to SQS (meaning, manually delete the read message from the queue).\r\nIs it possible?","title":"Apache Beam SqsIO Messages Acknowledge","body":"<p>I have a data pipeline processor written in Java using Apache Beam 2.46, with AWS SDK v2.</p>\n<p>Part of the pipeline includes reading messages as a stream from AWS SQS queue, and then if processing of the message fails rewriting them to the queue.\nBeam uses the SqsUnboundedReader class to manage the stream-reading from SQS.</p>\n<p>Apparently, after reading a message from the queue, beam gives it a processing timeout of about 2 minutes (unconfigurable) and then deletes the message from the queue.</p>\n<p>My pipeline logic requires that I &quot;manually&quot; send the acknowledgements to SQS (meaning, manually delete the read message from the queue).\nIs it possible?</p>\n"},{"tags":["java","regex","objectmapper","jsonnode"],"answers":[{"tags":[],"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681114193,"creation_date":1681114193,"answer_id":75975373,"question_id":75974991,"body_markdown":"if you are interested in the regex, you can use this: `#\\\\w+#\\\\w+` to match (and remove) 2 groups of #abc or something like `#\\\\d+#\\\\w+` if the first one is always going to be numeric:\r\n\r\n    @Test\r\n    void test() throws JsonProcessingException {\r\n    \tString eventData = &quot;&quot;&quot;\r\n    \t\t{\r\n    \t\t\t&quot;uniqueCode&quot;: &quot;ZZ&quot;,\r\n    \t\t\t&quot;entity&quot;: &quot;PROFILE&quot;,\r\n    \t\t\t&quot;id&quot;: &quot;e2b627b360d664377b227b--70378143#1&quot;,\r\n    \t\t\t&quot;data&quot;: [\r\n    \t\t\t\t&quot;DynamicAttribute&quot;\r\n    \t\t\t],\r\n    \t\t\t&quot;values&quot;: {\r\n    \t\t\t\t&quot;DynamicAttribute#1279930005#ZZ8400&quot;: [\r\n    \t\t\t\t\t{\r\n    \t\t\t\t\t\t&quot;property&quot;: &quot;activeFlag&quot;,\r\n    \t\t\t\t\t\t&quot;currentState&quot;: true,\r\n    \t\t\t\t\t\t&quot;previousState&quot;: null\r\n    \t\t\t\t\t}\r\n    \t\t\t\t]\r\n    \t\t\t},\r\n    \t\t\t&quot;DATE_TIME&quot;: &quot;05-Apr-2023 19:17:14.376&quot;\r\n    \t\t}\r\n    \t\t&quot;&quot;&quot;;\r\n    \r\n    \tObjectMapper objectMapper = new ObjectMapper();\r\n    \tJsonNode jsonNode = objectMapper.readTree(eventData);\r\n    \tObjectNode objectNode = objectMapper.convertValue(jsonNode.get(&quot;values&quot;), ObjectNode.class);\r\n    \r\n    \tString json = objectNode.toString().replaceAll(&quot;#\\\\w+#\\\\w+&quot;, &quot;&quot;);\r\n    \tassertEquals(json, &quot;{\\&quot;DynamicAttribute\\&quot;:[{\\&quot;property\\&quot;:\\&quot;activeFlag\\&quot;,\\&quot;currentState\\&quot;:true,\\&quot;previousState\\&quot;:null}]}&quot;);\r\n    }","title":"Regex to remove special characters from a Json node","body":"<p>if you are interested in the regex, you can use this: <code>#\\\\w+#\\\\w+</code> to match (and remove) 2 groups of #abc or something like <code>#\\\\d+#\\\\w+</code> if the first one is always going to be numeric:</p>\n<pre><code>@Test\nvoid test() throws JsonProcessingException {\n    String eventData = &quot;&quot;&quot;\n        {\n            &quot;uniqueCode&quot;: &quot;ZZ&quot;,\n            &quot;entity&quot;: &quot;PROFILE&quot;,\n            &quot;id&quot;: &quot;e2b627b360d664377b227b--70378143#1&quot;,\n            &quot;data&quot;: [\n                &quot;DynamicAttribute&quot;\n            ],\n            &quot;values&quot;: {\n                &quot;DynamicAttribute#1279930005#ZZ8400&quot;: [\n                    {\n                        &quot;property&quot;: &quot;activeFlag&quot;,\n                        &quot;currentState&quot;: true,\n                        &quot;previousState&quot;: null\n                    }\n                ]\n            },\n            &quot;DATE_TIME&quot;: &quot;05-Apr-2023 19:17:14.376&quot;\n        }\n        &quot;&quot;&quot;;\n\n    ObjectMapper objectMapper = new ObjectMapper();\n    JsonNode jsonNode = objectMapper.readTree(eventData);\n    ObjectNode objectNode = objectMapper.convertValue(jsonNode.get(&quot;values&quot;), ObjectNode.class);\n\n    String json = objectNode.toString().replaceAll(&quot;#\\\\w+#\\\\w+&quot;, &quot;&quot;);\n    assertEquals(json, &quot;{\\&quot;DynamicAttribute\\&quot;:[{\\&quot;property\\&quot;:\\&quot;activeFlag\\&quot;,\\&quot;currentState\\&quot;:true,\\&quot;previousState\\&quot;:null}]}&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":13004388,"reputation":111,"user_id":9399421,"display_name":"Scarlett John"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":135,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75975373,"answer_count":1,"score":0,"last_activity_date":1681114193,"creation_date":1681110548,"question_id":75974991,"body_markdown":"I have a JSON node as below from which I need to remove all the values after # like DynamicAttribute#1279930005#ZZ8400  to  DynamicAttribute\r\n\r\n    {\r\n    &quot;uniqueCode&quot;: &quot;ZZ&quot;,\r\n    &quot;entity&quot;: &quot;PROFILE&quot;,\r\n    &quot;id&quot;: &quot;e2b627b360d664377b227b--70378143#1&quot;,\r\n    &quot;data&quot;: [\r\n        &quot;DynamicAttribute&quot;\r\n    ],\r\n    &quot;values&quot;: {\r\n        &quot;DynamicAttribute#1279930005#ZZ8400&quot;: [\r\n            {\r\n                &quot;property&quot;: &quot;activeFlag&quot;,\r\n                &quot;currentState&quot;: true,\r\n                &quot;previousState&quot;: null\r\n            }\r\n        ]\r\n    },\r\n    &quot;DATE_TIME&quot;: &quot;05-Apr-2023 19:17:14.376&quot;}\r\n\r\n What i tried so far was as below :\r\n\r\n    \r\n    String eventData; //Has the above json payload\r\n    ObjectMapper objectMapper = new ObjectMapper();\r\n    JsonNode jsonNode = objectMapper.readTree(eventData);\r\n    ObjectNode objectNode = objectMapper.convertValue(jsonNode.get(&quot;values&quot;), ObjectNode.class);\r\n    objectNode.toString().replaceAll(&quot;\\\\#.*&quot;, &quot;\\&quot;:[&quot;);\r\n\r\nBut the above is giving me only like below and removing the rest of the fields from json :\r\n\r\n&quot;{\\&quot;DynamicAttribute\\&quot;:[&quot;\r\n","title":"Regex to remove special characters from a Json node","body":"<p>I have a JSON node as below from which I need to remove all the values after # like DynamicAttribute#1279930005#ZZ8400  to  DynamicAttribute</p>\n<pre><code>{\n&quot;uniqueCode&quot;: &quot;ZZ&quot;,\n&quot;entity&quot;: &quot;PROFILE&quot;,\n&quot;id&quot;: &quot;e2b627b360d664377b227b--70378143#1&quot;,\n&quot;data&quot;: [\n    &quot;DynamicAttribute&quot;\n],\n&quot;values&quot;: {\n    &quot;DynamicAttribute#1279930005#ZZ8400&quot;: [\n        {\n            &quot;property&quot;: &quot;activeFlag&quot;,\n            &quot;currentState&quot;: true,\n            &quot;previousState&quot;: null\n        }\n    ]\n},\n&quot;DATE_TIME&quot;: &quot;05-Apr-2023 19:17:14.376&quot;}\n</code></pre>\n<p>What i tried so far was as below :</p>\n<pre><code>String eventData; //Has the above json payload\nObjectMapper objectMapper = new ObjectMapper();\nJsonNode jsonNode = objectMapper.readTree(eventData);\nObjectNode objectNode = objectMapper.convertValue(jsonNode.get(&quot;values&quot;), ObjectNode.class);\nobjectNode.toString().replaceAll(&quot;\\\\#.*&quot;, &quot;\\&quot;:[&quot;);\n</code></pre>\n<p>But the above is giving me only like below and removing the rest of the fields from json :</p>\n<p>&quot;{&quot;DynamicAttribute&quot;:[&quot;</p>\n"},{"tags":["java","spring","spring-boot","maven"],"answers":[{"tags":[],"owner":{"account_id":28261166,"reputation":1,"user_id":21605845,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681092017,"creation_date":1681092017,"answer_id":75973825,"question_id":75973795,"body_markdown":"There was a missing dependency package during compilation. Please package com. atgui: gmall common: jar: 0.0.1 SNAPSHOT first\r\n\r\n","title":"Maven packaging failed","body":"<p>There was a missing dependency package during compilation. Please package com. atgui: gmall common: jar: 0.0.1 SNAPSHOT first</p>\n"},{"tags":[],"owner":{"account_id":13524226,"reputation":45,"user_id":9756492,"display_name":"Japhy Fan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681113900,"creation_date":1681113900,"answer_id":75975331,"question_id":75973795,"body_markdown":"Try to change gmall common version to 0.0.2 SNAPSHOT and reinstall.Or restart idea. Once there are too many dependencies, maven will make mistakes.","title":"Maven packaging failed","body":"<p>Try to change gmall common version to 0.0.2 SNAPSHOT and reinstall.Or restart idea. Once there are too many dependencies, maven will make mistakes.</p>\n"}],"owner":{"account_id":17663169,"reputation":1,"user_id":12821154,"display_name":"Guan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1681113900,"creation_date":1681091629,"question_id":75973795,"body_markdown":"```\r\n[ERROR] Failed to execute goal on project gmall-pms: Could not resolve dependencies for project com.atguigu:gmall-pms:jar:0.0.1-SNAPSHOT: Could not find artifact com.atguigu:gmall-common:jar:0.0.1-SNAPSHOT -&gt; [Help 1]\r\n[ERROR] \r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[ERROR] \r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException\r\n```\r\n\r\n[enter image description here](https://i.stack.imgur.com/o9q91.png)\r\n\r\n[enter image description here](https://i.stack.imgur.com/QO7MM.jpg)\r\n\r\nDelete the original file and repackage\r\n\r\n","title":"Maven packaging failed","body":"<pre><code>[ERROR] Failed to execute goal on project gmall-pms: Could not resolve dependencies for project com.atguigu:gmall-pms:jar:0.0.1-SNAPSHOT: Could not find artifact com.atguigu:gmall-common:jar:0.0.1-SNAPSHOT -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/o9q91.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p><a href=\"https://i.stack.imgur.com/QO7MM.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Delete the original file and repackage</p>\n"},{"tags":["java","spring","spring-integration","sftp","spring-integration-sftp"],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680878480,"creation_date":1680878480,"answer_id":75959442,"question_id":75958454,"body_markdown":"That `.remoteDirectory(&quot;.&quot;)` is just a placeholder. When the polling is in action, that `RotatingServerAdvice` sets a current directory into the `Sftp.inboundAdapter()` overriding your initial placeholder. Not clear what the problem you have. Would you mind to share an error or suspicious behavior? \r\n\r\nIt is clearly explained in that doc:\r\n\r\n&gt; This advice will poll directory `foo` on server `one` until no new files exist then move to directory `bar` and then directory `baz` on server `two`, etc.","title":"What is a proper way to specify different remote directories when using DelegatingSessionFactory?","body":"<p>That <code>.remoteDirectory(&quot;.&quot;)</code> is just a placeholder. When the polling is in action, that <code>RotatingServerAdvice</code> sets a current directory into the <code>Sftp.inboundAdapter()</code> overriding your initial placeholder. Not clear what the problem you have. Would you mind to share an error or suspicious behavior?</p>\n<p>It is clearly explained in that doc:</p>\n<blockquote>\n<p>This advice will poll directory <code>foo</code> on server <code>one</code> until no new files exist then move to directory <code>bar</code> and then directory <code>baz</code> on server <code>two</code>, etc.</p>\n</blockquote>\n"}],"owner":{"account_id":23029514,"reputation":3,"user_id":17149233,"display_name":"Margarita"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681113438,"creation_date":1680870719,"question_id":75958454,"body_markdown":"I want my DelegatingSessionFactory to search for files in different remote directories on the same server. I try to use RotatingServerAdvice. The [documentation ](https://docs.spring.io/spring-integration/reference/html/sftp.html#sftp-rotating-server-advice) says I need to specify bean IntegrationFlow, which should be defined as \r\n\r\n```\r\n@Bean\r\npublic IntegrationFlow flow() {\r\n    return IntegrationFlow.from(Sftp.inboundAdapter(sf())\r\n                    .filter(new SftpPersistentAcceptOnceFileListFilter(new SimpleMetadataStore(), &quot;rotate&quot;))\r\n                    .localDirectory(new File(tmpDir))\r\n                    .localFilenameExpression(&quot;#remoteDirectory + T(java.io.File).separator + #root&quot;)\r\n                    .remoteDirectory(&quot;.&quot;),\r\n                e -&gt; e.poller(Pollers.fixedDelay(1).advice(advice())))\r\n            .channel(MessageChannels.queue(&quot;files&quot;))\r\n            .get();\r\n}\r\n```\r\n\r\nthe problem is that I don&#39;t know what to specify in &quot;remoteDirectory&quot; field (they use &quot;.&quot;, which I don&#39;t know why), also the application won&#39;t start unless I use this field. When using RotatingServerAdvice I provide remote directories this way:\r\n\r\n```\r\n@Bean\r\n    public RotatingServerAdvice advice() {\r\n        List&lt;RotationPolicy.KeyDirectory&gt; keyDirectories = new ArrayList&lt;&gt;();\r\n        for (String remoteDir: properties.getRemoteDirectory()) {\r\n            keyDirectories.add(new RotationPolicy.KeyDirectory(SESSION_1_KEY, remoteDir));\r\n        }\r\n        return new RotatingServerAdvice(sftpSessionFactory(), keyDirectories);\r\n    }\r\n```\r\n\r\nSo, what do I need to do with *.remoteDirectory(&quot;.&quot;)* to make it work properly? \r\n\r\n\r\nThe full code of my SFTP config is below:\r\n\r\n```\r\n@Configuration\r\n@RequiredArgsConstructor\r\npublic class SFTPConfig {\r\n\r\n    private static final String SESSION_1_KEY = &quot;SESSION_1&quot;;\r\n\r\n    private final SFTPProperties properties;\r\n    private final TimeService timeService;\r\n\r\n    @Value(&quot;${cron.parse}&quot;)\r\n    private String cronParse;\r\n\r\n    @Bean\r\n    public DelegatingSessionFactory&lt;ChannelSftp.LsEntry&gt; sftpSessionFactory() {\r\n        DefaultSftpSessionFactory defaultSftpSessionFactory = new DefaultSftpSessionFactory();\r\n        defaultSftpSessionFactory.setHost(properties.getHost());\r\n        defaultSftpSessionFactory.setPort(properties.getPort());\r\n        defaultSftpSessionFactory.setUser(properties.getUsername());\r\n        defaultSftpSessionFactory.setPassword(properties.getPassword());\r\n        defaultSftpSessionFactory.setAllowUnknownKeys(true);\r\n\r\n        CachingSessionFactory&lt;LsEntry&gt; cachingSessionFactory =\r\n                new CachingSessionFactory&lt;&gt;(defaultSftpSessionFactory);\r\n        cachingSessionFactory.setPoolSize(properties.getPoolSize());\r\n        cachingSessionFactory.setSessionWaitTimeout(properties.getTimeout());\r\n\r\n        Map&lt;Object, SessionFactory&lt;ChannelSftp.LsEntry&gt;&gt; sessionMap = new HashMap&lt;&gt;();\r\n        sessionMap.put(SESSION_1_KEY, cachingSessionFactory);\r\n        return new DelegatingSessionFactory&lt;&gt;(sessionMap, cachingSessionFactory);\r\n    }\r\n\r\n    @Bean\r\n    public PollableChannel sftpChannel() {\r\n        return new QueueChannel();\r\n    }\r\n\r\n    @Bean(name = PollerMetadata.DEFAULT_POLLER)\r\n    public PollerMetadata defaultPoller() {\r\n        PollerMetadata pollerMetadata = new PollerMetadata();\r\n        pollerMetadata.setTrigger(new PeriodicTrigger(10));\r\n        return pollerMetadata;\r\n    }\r\n\r\n    @Bean\r\n    public MessageHandler messageHandler(MyService myService, DirectoriesProperties directoriesProperties,\r\n                                         FileService fileService, IHub hub) {\r\n        return new MyMessageHandler(myService, directoriesProperties, fileService, hub);\r\n    }\r\n\r\n    @Bean\r\n    public IntegrationFlow integrationFlow(MyService myService, DirectoriesProperties directoriesProperties,FileService fileService, IHub hub) {\r\n\r\n        return IntegrationFlows\r\n                .from(Sftp.inboundAdapter(sftpSessionFactory())\r\n                                .filter(filter())\r\n                                .localDirectory(new File(properties.getLocalDirectory()))\r\n                                .autoCreateLocalDirectory(true)\r\n                                .deleteRemoteFiles(true)\r\n                                .localFilter(new AcceptOnceFileListFilter&lt;&gt;())\r\n                                .remoteDirectory(&quot;.&quot;),\r\n                        e -&gt; e.poller(Pollers.cron(cronParse).advice(advice())))\r\n                .channel(sftpChannel())\r\n                .handle(messageHandler(myService, directoriesProperties, fileService, hub))\r\n                .get();\r\n    }\r\n\r\n    @Bean\r\n    public RotatingServerAdvice advice() {\r\n        List&lt;RotationPolicy.KeyDirectory&gt; keyDirectories = new ArrayList&lt;&gt;();\r\n        for (String remoteDir: properties.getRemoteDirectory()) {\r\n            keyDirectories.add(new RotationPolicy.KeyDirectory(SESSION_1_KEY, remoteDir));\r\n        }\r\n        return new RotatingServerAdvice(sftpSessionFactory(), keyDirectories);\r\n    }\r\n\r\n    private ChainFileListFilter&lt;LsEntry&gt; filter() {\r\n        ChainFileListFilter&lt;LsEntry&gt; filter = new ChainFileListFilter&lt;&gt;();\r\n        filter.addFilter(new SftpRegexPatternFileListFilter(&quot;files_\\\\d{12}.txt&quot;));\r\n        filter.addFilter(new TimestampPeriodFileListFilter(timeService, properties.getPeriod()));\r\n        return filter;\r\n    }\r\n}\r\n```\r\n\r\nI&#39;ve spent a few days trying to make DelegatingSession work. Before, it used to be just CachingSessionFactory with one remote directory to use. Please, help me to understand what do I have to do with `.remoteDirectory(&quot;.&quot;)` part. Thanks in advance\r\n\r\n\r\n**UPDATE**\r\n\r\nArtem, thank you for your explanation. I thought my problem was with `.remoteDirectory(&quot;.&quot;)`, but now I have no suggestion why my integration test fails... Here is the code:\r\n\r\n```\r\npublic class ParsingTest extends BaseTest {\r\n\r\n    @Autowired\r\n    private MessageHandler messageHandler;\r\n    @Autowired\r\n    private MessageSource&lt;File&gt; messageSource;\r\n\r\n    @Test\r\n    void shouldSaveAllCalls() {\r\n        String filename = &quot;files_010120230300.txt&quot;;\r\n        String resourcePath = &quot;/files/good/&quot; + filename;\r\n        prepareFileInRemoteSftpServer(resourcePath, filename);\r\n\r\n        receiveAndHandleFileFromSftp();\r\n\r\n    }\r\n\r\n    private void prepareFileInRemoteSftpServer(String resourcePath, String remoteFilename) {\r\n        MountableFile mountableFile = MountableFile.forClasspathResource(resourcePath);\r\n        sftpContainer.copyFileToContainer(mountableFile, sftpRemotePath + remoteFilename);\r\n    }\r\n\r\n    private void receiveAndHandleFileFromSftp() {\r\n        Message&lt;?&gt; message = messageSource.receive();\r\n        assertThat(message).isNotNull();\r\n        messageHandler.handleMessage(message);\r\n    }\r\n\r\n}\r\n\r\n```\r\nIt fails on the line `assertThat(message).isNotNull();` because message is null. \r\n\r\nWould you mind telling me where I am wrong? My only suggestion is about wrong usage of `messageSource.receive();` but I don&#39;t know how else I can receive data","title":"What is a proper way to specify different remote directories when using DelegatingSessionFactory?","body":"<p>I want my DelegatingSessionFactory to search for files in different remote directories on the same server. I try to use RotatingServerAdvice. The <a href=\"https://docs.spring.io/spring-integration/reference/html/sftp.html#sftp-rotating-server-advice\" rel=\"nofollow noreferrer\">documentation </a> says I need to specify bean IntegrationFlow, which should be defined as</p>\n<pre><code>@Bean\npublic IntegrationFlow flow() {\n    return IntegrationFlow.from(Sftp.inboundAdapter(sf())\n                    .filter(new SftpPersistentAcceptOnceFileListFilter(new SimpleMetadataStore(), &quot;rotate&quot;))\n                    .localDirectory(new File(tmpDir))\n                    .localFilenameExpression(&quot;#remoteDirectory + T(java.io.File).separator + #root&quot;)\n                    .remoteDirectory(&quot;.&quot;),\n                e -&gt; e.poller(Pollers.fixedDelay(1).advice(advice())))\n            .channel(MessageChannels.queue(&quot;files&quot;))\n            .get();\n}\n</code></pre>\n<p>the problem is that I don't know what to specify in &quot;remoteDirectory&quot; field (they use &quot;.&quot;, which I don't know why), also the application won't start unless I use this field. When using RotatingServerAdvice I provide remote directories this way:</p>\n<pre><code>@Bean\n    public RotatingServerAdvice advice() {\n        List&lt;RotationPolicy.KeyDirectory&gt; keyDirectories = new ArrayList&lt;&gt;();\n        for (String remoteDir: properties.getRemoteDirectory()) {\n            keyDirectories.add(new RotationPolicy.KeyDirectory(SESSION_1_KEY, remoteDir));\n        }\n        return new RotatingServerAdvice(sftpSessionFactory(), keyDirectories);\n    }\n</code></pre>\n<p>So, what do I need to do with <em>.remoteDirectory(&quot;.&quot;)</em> to make it work properly?</p>\n<p>The full code of my SFTP config is below:</p>\n<pre><code>@Configuration\n@RequiredArgsConstructor\npublic class SFTPConfig {\n\n    private static final String SESSION_1_KEY = &quot;SESSION_1&quot;;\n\n    private final SFTPProperties properties;\n    private final TimeService timeService;\n\n    @Value(&quot;${cron.parse}&quot;)\n    private String cronParse;\n\n    @Bean\n    public DelegatingSessionFactory&lt;ChannelSftp.LsEntry&gt; sftpSessionFactory() {\n        DefaultSftpSessionFactory defaultSftpSessionFactory = new DefaultSftpSessionFactory();\n        defaultSftpSessionFactory.setHost(properties.getHost());\n        defaultSftpSessionFactory.setPort(properties.getPort());\n        defaultSftpSessionFactory.setUser(properties.getUsername());\n        defaultSftpSessionFactory.setPassword(properties.getPassword());\n        defaultSftpSessionFactory.setAllowUnknownKeys(true);\n\n        CachingSessionFactory&lt;LsEntry&gt; cachingSessionFactory =\n                new CachingSessionFactory&lt;&gt;(defaultSftpSessionFactory);\n        cachingSessionFactory.setPoolSize(properties.getPoolSize());\n        cachingSessionFactory.setSessionWaitTimeout(properties.getTimeout());\n\n        Map&lt;Object, SessionFactory&lt;ChannelSftp.LsEntry&gt;&gt; sessionMap = new HashMap&lt;&gt;();\n        sessionMap.put(SESSION_1_KEY, cachingSessionFactory);\n        return new DelegatingSessionFactory&lt;&gt;(sessionMap, cachingSessionFactory);\n    }\n\n    @Bean\n    public PollableChannel sftpChannel() {\n        return new QueueChannel();\n    }\n\n    @Bean(name = PollerMetadata.DEFAULT_POLLER)\n    public PollerMetadata defaultPoller() {\n        PollerMetadata pollerMetadata = new PollerMetadata();\n        pollerMetadata.setTrigger(new PeriodicTrigger(10));\n        return pollerMetadata;\n    }\n\n    @Bean\n    public MessageHandler messageHandler(MyService myService, DirectoriesProperties directoriesProperties,\n                                         FileService fileService, IHub hub) {\n        return new MyMessageHandler(myService, directoriesProperties, fileService, hub);\n    }\n\n    @Bean\n    public IntegrationFlow integrationFlow(MyService myService, DirectoriesProperties directoriesProperties,FileService fileService, IHub hub) {\n\n        return IntegrationFlows\n                .from(Sftp.inboundAdapter(sftpSessionFactory())\n                                .filter(filter())\n                                .localDirectory(new File(properties.getLocalDirectory()))\n                                .autoCreateLocalDirectory(true)\n                                .deleteRemoteFiles(true)\n                                .localFilter(new AcceptOnceFileListFilter&lt;&gt;())\n                                .remoteDirectory(&quot;.&quot;),\n                        e -&gt; e.poller(Pollers.cron(cronParse).advice(advice())))\n                .channel(sftpChannel())\n                .handle(messageHandler(myService, directoriesProperties, fileService, hub))\n                .get();\n    }\n\n    @Bean\n    public RotatingServerAdvice advice() {\n        List&lt;RotationPolicy.KeyDirectory&gt; keyDirectories = new ArrayList&lt;&gt;();\n        for (String remoteDir: properties.getRemoteDirectory()) {\n            keyDirectories.add(new RotationPolicy.KeyDirectory(SESSION_1_KEY, remoteDir));\n        }\n        return new RotatingServerAdvice(sftpSessionFactory(), keyDirectories);\n    }\n\n    private ChainFileListFilter&lt;LsEntry&gt; filter() {\n        ChainFileListFilter&lt;LsEntry&gt; filter = new ChainFileListFilter&lt;&gt;();\n        filter.addFilter(new SftpRegexPatternFileListFilter(&quot;files_\\\\d{12}.txt&quot;));\n        filter.addFilter(new TimestampPeriodFileListFilter(timeService, properties.getPeriod()));\n        return filter;\n    }\n}\n</code></pre>\n<p>I've spent a few days trying to make DelegatingSession work. Before, it used to be just CachingSessionFactory with one remote directory to use. Please, help me to understand what do I have to do with <code>.remoteDirectory(&quot;.&quot;)</code> part. Thanks in advance</p>\n<p><strong>UPDATE</strong></p>\n<p>Artem, thank you for your explanation. I thought my problem was with <code>.remoteDirectory(&quot;.&quot;)</code>, but now I have no suggestion why my integration test fails... Here is the code:</p>\n<pre><code>public class ParsingTest extends BaseTest {\n\n    @Autowired\n    private MessageHandler messageHandler;\n    @Autowired\n    private MessageSource&lt;File&gt; messageSource;\n\n    @Test\n    void shouldSaveAllCalls() {\n        String filename = &quot;files_010120230300.txt&quot;;\n        String resourcePath = &quot;/files/good/&quot; + filename;\n        prepareFileInRemoteSftpServer(resourcePath, filename);\n\n        receiveAndHandleFileFromSftp();\n\n    }\n\n    private void prepareFileInRemoteSftpServer(String resourcePath, String remoteFilename) {\n        MountableFile mountableFile = MountableFile.forClasspathResource(resourcePath);\n        sftpContainer.copyFileToContainer(mountableFile, sftpRemotePath + remoteFilename);\n    }\n\n    private void receiveAndHandleFileFromSftp() {\n        Message&lt;?&gt; message = messageSource.receive();\n        assertThat(message).isNotNull();\n        messageHandler.handleMessage(message);\n    }\n\n}\n\n</code></pre>\n<p>It fails on the line <code>assertThat(message).isNotNull();</code> because message is null.</p>\n<p>Would you mind telling me where I am wrong? My only suggestion is about wrong usage of <code>messageSource.receive();</code> but I don't know how else I can receive data</p>\n"},{"tags":["java","android","dalvik","smali"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1681080286,"post_id":75964676,"comment_id":133997057,"body_markdown":"Searching the error in your tile returns some results here on Stackoverflow. Have you checked them if their answers are applicable in your case?","body":"Searching the error in your tile returns some results here on Stackoverflow. Have you checked them if their answers are applicable in your case?"},{"owner":{"account_id":28248364,"reputation":1,"user_id":21595024,"display_name":"aviation_hacker"},"score":0,"creation_date":1681111548,"post_id":75964676,"comment_id":133999852,"body_markdown":"Hey Robert, indeed I have had a look through all of those, but nothing is quite like my application usecase - most of them seem to be to do with instances of various viewers and forgetting to declare an object or something along those lines, whereas here I guess this used to work, but something has changed?\n\nI&#39;ve actually just been thinking about this now, and looking at the errors/code again, I&#39;m actually wondering if it&#39;s failing to get a resource ID, which is what is causing the getResourceEntryName to fail? I&#39;ll keep looking into this and will report back regardless :)","body":"Hey Robert, indeed I have had a look through all of those, but nothing is quite like my application usecase - most of them seem to be to do with instances of various viewers and forgetting to declare an object or something along those lines, whereas here I guess this used to work, but something has changed?  I&#39;ve actually just been thinking about this now, and looking at the errors/code again, I&#39;m actually wondering if it&#39;s failing to get a resource ID, which is what is causing the getResourceEntryName to fail? I&#39;ll keep looking into this and will report back regardless :)"}],"answers":[{"tags":[],"owner":{"account_id":28248364,"reputation":1,"user_id":21595024,"display_name":"aviation_hacker"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681113359,"creation_date":1681113359,"answer_id":75975285,"question_id":75964676,"body_markdown":"So, referencing the [Android Developer Website][1], I managed to change the getResourceEntryName element to GetResourceName and then had a look at the LogCat - what were previously the ResourceEntryNames I&#39;m supposing changed to android:id/EntryName due to how the application logging would append it all together.\r\n\r\nSo in this case, it looks like there isn&#39;t a global issue with the code itself (the rest seem to work fine), but it instead has to do with a particular element it is retrieving not having an ID, hence the issue appearing in the logs.\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/content/res/Resources#getResourceEntryName(int)","title":"android.content.res.Resources$NotFoundException: Unable to find resource ID #0xffffffff?","body":"<p>So, referencing the <a href=\"https://developer.android.com/reference/android/content/res/Resources#getResourceEntryName(int)\" rel=\"nofollow noreferrer\">Android Developer Website</a>, I managed to change the getResourceEntryName element to GetResourceName and then had a look at the LogCat - what were previously the ResourceEntryNames I'm supposing changed to android:id/EntryName due to how the application logging would append it all together.</p>\n<p>So in this case, it looks like there isn't a global issue with the code itself (the rest seem to work fine), but it instead has to do with a particular element it is retrieving not having an ID, hence the issue appearing in the logs.</p>\n"}],"owner":{"account_id":28248364,"reputation":1,"user_id":21595024,"display_name":"aviation_hacker"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":303,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1681113359,"creation_date":1680949636,"question_id":75964676,"body_markdown":"I&#39;m trying to repair an old android app that I&#39;ve been using for years (not the original developer). I&#39;ve got all the other issues fixed (yay! By pure luck almost) and I&#39;m running into this issue, where it seems to have an issue getting the ResourceEntryName? Unfortunately I can&#39;t figure out exactly what&#39;s wrong with it and where it&#39;s throwing the error apart from the line references given, nor am I particularly java/android dalvik familiar either, so I may be out of my depth on this one.\r\n\r\nI&#39;ve double checked as many of the obvious resource issues that I could find in terms of specific references (maneuvers etc, as it&#39;s designed to take data from Maps notifications and display them on a Pebble Watch), and have also tried reordering the order that it getID&#39;s and getResources as some of the other issues were to do with the order things were executed in, due to the application parsing notification data to then display on the watch - no practical difference here, and depending on the order these were loaded in it came back with Fatal Errors so I&#39;ve put them back to original using a backup file. Also tried commenting out the line as well, results in the app crashing and a Fatal Error, same with removing the integer in brackets as well. Another thread suggested moving the drawables into the base drawable folders rather than version specific eg. drawable-v23 but that didn&#39;t make a difference either, nor did moving layout files incase there was one missing/in another folder.\r\n\r\nAny help/suggestions you could provide would be appreciated! \r\nI did have a search through on similar errors, and the causes seemed to be rather wide ranging and application specific, so I thought it best to ask my own question instead. I&#39;ve attached both the LogCat that&#39;s throwing the error (seems to repeat pretty frequently in the logs, but doesn&#39;t affect functionality seemingly at all?) and also the code from the .smali file in question.\r\n\r\nThanks in advance! :)\r\n\r\n```\r\n04-08 21:43:14.890 25573 27081 E corp.pebble.nav: No package ID ff found for ID 0xffffffff.\r\n04-08 21:43:14.890 25573 27081 D NotificationHandler: getResources failed\r\n04-08 21:43:14.890 25573 27081 D NotificationHandler: android.content.res.Resources$NotFoundException: Unable to find resource ID #0xffffffff\r\n04-08 21:43:14.890 25573 27081 D NotificationHandler: \tat android.content.res.ResourcesImpl.getResourceEntryName(ResourcesImpl.java:289)\r\n04-08 21:43:14.890 25573 27081 D NotificationHandler: \tat android.content.res.Resources.getResourceEntryName(Resources.java:2335)\r\n04-08 21:43:14.890 25573 27081 D NotificationHandler: \tat com.batescorp.pebble.nav.lib.NotificationHandler.a(SourceFile:259)\r\n04-08 21:43:14.890 25573 27081 D NotificationHandler: \tat com.batescorp.pebble.nav.lib.NotificationHandler.a(SourceFile:333)\r\n04-08 21:43:14.890 25573 27081 D NotificationHandler: \tat com.batescorp.pebble.nav.lib.NotificationHandler.a(SourceFile:333)\r\n04-08 21:43:14.890 25573 27081 D NotificationHandler: \tat com.batescorp.pebble.nav.lib.NotificationHandler.a(SourceFile:333)\r\n04-08 21:43:14.890 25573 27081 D NotificationHandler: \tat com.batescorp.pebble.nav.lib.NotificationHandler.a(SourceFile:27)\r\n04-08 21:43:14.890 25573 27081 D NotificationHandler: \tat com.batescorp.pebble.nav.lib.NotificationHandler$1.run(SourceFile:210)\r\n04-08 21:43:14.890 25573 27081 D NotificationHandler: \tat java.lang.Thread.run(Thread.java:1012)\r\n```\r\n\r\n\r\n```\r\n# instance fields\r\n.field private a:Ljava/lang/String;\r\n```\r\n\r\n```\r\n.line 67\r\n    const-string v0, &quot;&quot;\r\n\r\n    iput-object v0, p0, Lcom/batescorp/pebble/nav/lib/NotificationHandler;-&gt;a:Ljava/lang/String;\r\n```\r\n\r\n\r\n```\r\n.line 259\r\n    :try_start_1\r\n    invoke-virtual {p2}, Landroid/content/Context;-&gt;getResources()Landroid/content/res/Resources;\r\n\r\n    move-result-object v4\r\n\r\n    invoke-virtual {v1}, Landroid/view/View;-&gt;getId()I\r\n\r\n    move-result v5\r\n\r\n    invoke-virtual {v4, v5}, Landroid/content/res/Resources;-&gt;getResourceEntryName(I)Ljava/lang/String;\r\n    :try_end_1\r\n    .catch Ljava/lang/Exception; {:try_start_1 .. :try_end_1} :catch_0\r\n\r\n    move-result-object v0\r\n\r\n    move-object v4, v0\r\n```\r\n\r\n\r\n```\r\n.line 333\r\n    check-cast v1, Landroid/view/ViewGroup;\r\n\r\n    invoke-direct {p0, p1, p2, v1}, Lcom/batescorp/pebble/nav/lib/NotificationHandler;-&gt;a(Landroid/content/Context;Landroid/content/Context;Landroid/view/ViewGroup;)Ljava/lang/String;\r\n\r\n    goto/16 :goto_1\r\n```","title":"android.content.res.Resources$NotFoundException: Unable to find resource ID #0xffffffff?","body":"<p>I'm trying to repair an old android app that I've been using for years (not the original developer). I've got all the other issues fixed (yay! By pure luck almost) and I'm running into this issue, where it seems to have an issue getting the ResourceEntryName? Unfortunately I can't figure out exactly what's wrong with it and where it's throwing the error apart from the line references given, nor am I particularly java/android dalvik familiar either, so I may be out of my depth on this one.</p>\n<p>I've double checked as many of the obvious resource issues that I could find in terms of specific references (maneuvers etc, as it's designed to take data from Maps notifications and display them on a Pebble Watch), and have also tried reordering the order that it getID's and getResources as some of the other issues were to do with the order things were executed in, due to the application parsing notification data to then display on the watch - no practical difference here, and depending on the order these were loaded in it came back with Fatal Errors so I've put them back to original using a backup file. Also tried commenting out the line as well, results in the app crashing and a Fatal Error, same with removing the integer in brackets as well. Another thread suggested moving the drawables into the base drawable folders rather than version specific eg. drawable-v23 but that didn't make a difference either, nor did moving layout files incase there was one missing/in another folder.</p>\n<p>Any help/suggestions you could provide would be appreciated!\nI did have a search through on similar errors, and the causes seemed to be rather wide ranging and application specific, so I thought it best to ask my own question instead. I've attached both the LogCat that's throwing the error (seems to repeat pretty frequently in the logs, but doesn't affect functionality seemingly at all?) and also the code from the .smali file in question.</p>\n<p>Thanks in advance! :)</p>\n<pre><code>04-08 21:43:14.890 25573 27081 E corp.pebble.nav: No package ID ff found for ID 0xffffffff.\n04-08 21:43:14.890 25573 27081 D NotificationHandler: getResources failed\n04-08 21:43:14.890 25573 27081 D NotificationHandler: android.content.res.Resources$NotFoundException: Unable to find resource ID #0xffffffff\n04-08 21:43:14.890 25573 27081 D NotificationHandler:   at android.content.res.ResourcesImpl.getResourceEntryName(ResourcesImpl.java:289)\n04-08 21:43:14.890 25573 27081 D NotificationHandler:   at android.content.res.Resources.getResourceEntryName(Resources.java:2335)\n04-08 21:43:14.890 25573 27081 D NotificationHandler:   at com.batescorp.pebble.nav.lib.NotificationHandler.a(SourceFile:259)\n04-08 21:43:14.890 25573 27081 D NotificationHandler:   at com.batescorp.pebble.nav.lib.NotificationHandler.a(SourceFile:333)\n04-08 21:43:14.890 25573 27081 D NotificationHandler:   at com.batescorp.pebble.nav.lib.NotificationHandler.a(SourceFile:333)\n04-08 21:43:14.890 25573 27081 D NotificationHandler:   at com.batescorp.pebble.nav.lib.NotificationHandler.a(SourceFile:333)\n04-08 21:43:14.890 25573 27081 D NotificationHandler:   at com.batescorp.pebble.nav.lib.NotificationHandler.a(SourceFile:27)\n04-08 21:43:14.890 25573 27081 D NotificationHandler:   at com.batescorp.pebble.nav.lib.NotificationHandler$1.run(SourceFile:210)\n04-08 21:43:14.890 25573 27081 D NotificationHandler:   at java.lang.Thread.run(Thread.java:1012)\n</code></pre>\n<pre><code># instance fields\n.field private a:Ljava/lang/String;\n</code></pre>\n<pre><code>.line 67\n    const-string v0, &quot;&quot;\n\n    iput-object v0, p0, Lcom/batescorp/pebble/nav/lib/NotificationHandler;-&gt;a:Ljava/lang/String;\n</code></pre>\n<pre><code>.line 259\n    :try_start_1\n    invoke-virtual {p2}, Landroid/content/Context;-&gt;getResources()Landroid/content/res/Resources;\n\n    move-result-object v4\n\n    invoke-virtual {v1}, Landroid/view/View;-&gt;getId()I\n\n    move-result v5\n\n    invoke-virtual {v4, v5}, Landroid/content/res/Resources;-&gt;getResourceEntryName(I)Ljava/lang/String;\n    :try_end_1\n    .catch Ljava/lang/Exception; {:try_start_1 .. :try_end_1} :catch_0\n\n    move-result-object v0\n\n    move-object v4, v0\n</code></pre>\n<pre><code>.line 333\n    check-cast v1, Landroid/view/ViewGroup;\n\n    invoke-direct {p0, p1, p2, v1}, Lcom/batescorp/pebble/nav/lib/NotificationHandler;-&gt;a(Landroid/content/Context;Landroid/content/Context;Landroid/view/ViewGroup;)Ljava/lang/String;\n\n    goto/16 :goto_1\n</code></pre>\n"},{"tags":["java","multithreading","concurrency","synchronize","reentrantlock"],"comments":[{"owner":{"account_id":2784842,"reputation":67271,"user_id":2396539,"accept_rate":78,"display_name":"Aniket Thakur"},"score":4,"creation_date":1465237050,"post_id":11821801,"comment_id":62806822,"body_markdown":"BTW all java intrinsic locks are reentrant by nature.","body":"BTW all java intrinsic locks are reentrant by nature."},{"owner":{"account_id":2784842,"reputation":67271,"user_id":2396539,"accept_rate":78,"display_name":"Aniket Thakur"},"score":0,"creation_date":1473867405,"post_id":11821801,"comment_id":66306406,"body_markdown":"@pongapundit so `synchronized(this){synchronized(this){//some code}}` will not cause dead lock. For intrinsic lock if they obtain monitor on a resource and if they want it again they can get it without a dead lock.","body":"@pongapundit so <code>synchronized(this){synchronized(this){&#47;&#47;some code}}</code> will not cause dead lock. For intrinsic lock if they obtain monitor on a resource and if they want it again they can get it without a dead lock."},{"owner":{"account_id":17121470,"reputation":381,"user_id":12389586,"display_name":"trilocho"},"score":0,"creation_date":1633362254,"post_id":11821801,"comment_id":122733765,"body_markdown":"object.lock;......;object.unlock equals synchronized(this.class) it is at class-level lock not object-level","body":"object.lock;......;object.unlock equals synchronized(this.class) it is at class-level lock not object-level"}],"answers":[{"tags":[],"owner":{"account_id":24725,"reputation":54586,"user_id":63074,"accept_rate":55,"display_name":"Mike Dinescu"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1557192332,"creation_date":1344219055,"answer_id":11821823,"question_id":11821801,"body_markdown":"[`ReentrantReadWriteLock`][1] is a specialized lock whereas `synchronized(this)` is a general purpose lock. They are similar but not quite the same.\r\n\r\nYou are right in that you could use `synchronized(this)` instead of `ReentrantReadWriteLock` but the opposite is not always true.\r\n\r\nIf you&#39;d like to better understand what makes `ReentrantReadWriteLock` special look up some information about producer-consumer thread synchronization.\r\n\r\nIn general you can remember that whole-method synchronization and general purpose synchronization (using the `synchronized` keyword) can be used in most applications without thinking *too much* about the semantics of the synchronization but if you need to squeeze performance out of your code you may need to explore other more fine-grained, or special-purpose synchronization mechanisms.\r\n\r\nBy the way, using `synchronized(this)` - and in general locking using a public class instance - can be problematic because it opens up your code to potential dead-locks because somebody else not knowingly might try to lock against your object somewhere else in the program.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html","title":"Why use a ReentrantLock if one can use synchronized(this)?","body":"<p><a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html\" rel=\"nofollow noreferrer\"><code>ReentrantReadWriteLock</code></a> is a specialized lock whereas <code>synchronized(this)</code> is a general purpose lock. They are similar but not quite the same.</p>\n\n<p>You are right in that you could use <code>synchronized(this)</code> instead of <code>ReentrantReadWriteLock</code> but the opposite is not always true.</p>\n\n<p>If you'd like to better understand what makes <code>ReentrantReadWriteLock</code> special look up some information about producer-consumer thread synchronization.</p>\n\n<p>In general you can remember that whole-method synchronization and general purpose synchronization (using the <code>synchronized</code> keyword) can be used in most applications without thinking <em>too much</em> about the semantics of the synchronization but if you need to squeeze performance out of your code you may need to explore other more fine-grained, or special-purpose synchronization mechanisms.</p>\n\n<p>By the way, using <code>synchronized(this)</code> - and in general locking using a public class instance - can be problematic because it opens up your code to potential dead-locks because somebody else not knowingly might try to lock against your object somewhere else in the program.</p>\n"},{"tags":[],"owner":{"account_id":290123,"reputation":29330,"user_id":591495,"display_name":"obataku"},"down_vote_count":0,"up_vote_count":557,"is_accepted":true,"score":557,"last_activity_date":1593290613,"creation_date":1344220188,"answer_id":11821900,"question_id":11821801,"body_markdown":"A [ReentrantLock][1] is _unstructured_, unlike `synchronized` constructs -- i.e.  you don&#39;t need to use a block structure for locking and can even hold a lock across methods. An example:\r\n\r\n    private ReentrantLock lock;\r\n\r\n    public void foo() {\r\n      ...\r\n      lock.lock();\r\n      ...\r\n    }\r\n\r\n    public void bar() {\r\n      ...\r\n      lock.unlock();\r\n      ...\r\n    }\r\n\r\nSuch flow is impossible to represent via a single monitor in a `synchronized` construct.\r\n___\r\nAside from that, `ReentrantLock` supports [lock polling](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html#tryLock()) and [interruptible lock waits that support time-out](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html#tryLock(long,%20java.util.concurrent.TimeUnit)). `ReentrantLock` also has support for [configurable _fairness_ policy](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html#ReentrantLock(boolean)), allowing more flexible thread scheduling.\r\n\r\n&gt;The constructor for this class accepts an optional _fairness_ parameter. When set `true`, under contention, locks favor granting access to the longest-waiting thread. Otherwise this lock does not guarantee any particular access order. Programs using fair locks accessed by many threads may display lower overall throughput (i.e., are slower; often much slower) than those using the default setting, but have smaller variances in times to obtain locks and guarantee lack of starvation. Note however, that fairness of locks does not guarantee fairness of thread scheduling. Thus, one of many threads using a fair lock may obtain it multiple times in succession while other active threads are not progressing and not currently holding the lock. Also note that the untimed `tryLock` method does not honor the fairness setting. It will succeed if the lock is available even if other threads are waiting.\r\n\r\n___\r\n`ReentrantLock` **may** also be [__more scalable__](http://lycog.com/concurency/performance-reentrantlock-synchronized/), performing much better under higher contention. You can read more about this [here](http://www.ibm.com/developerworks/java/library/j-jtp10264/).\r\n\r\nThis claim has been contested, however; see the following comment:\r\n&gt;In the reentrant lock test, a new lock is created each time, thus there is no exclusive locking and the resulting data is invalid. Also, the IBM link offers no source code for the underlying benchmark so its impossible to characterize whether the test was even conducted correctly. \r\n\r\n___\r\nWhen should you use `ReentrantLock`s? According to that developerWorks article...\r\n&gt;The answer is pretty simple -- use it when you actually need something it provides that `synchronized` doesn&#39;t, like timed lock waits, interruptible lock waits, non-block-structured locks, multiple condition variables, or lock polling. `ReentrantLock` also has scalability benefits, and you should use it if you actually have a situation that exhibits high contention, but remember that the vast majority of `synchronized` blocks hardly ever exhibit any contention, let alone high contention. I would advise developing with synchronization until synchronization has proven to be inadequate, rather than simply assuming &quot;the performance will be better&quot; if you use `ReentrantLock`. Remember, these are advanced tools for advanced users. (And truly advanced users tend to prefer the simplest tools they can find until they&#39;re convinced the simple tools are inadequate.) As always, make it right first, and then worry about whether or not you have to make it faster.\r\n\r\n___\r\n\r\nOne final aspect that&#39;s gonna become more relevant in the near future has to do with [Java 15 and Project Loom][2]. In the (new) world of virtual threads, the underlying scheduler would be able to work much better with `ReentrantLock` than it&#39;s able to do with `synchronized`, that&#39;s true at least in the initial Java 15 release but may be optimized later. \r\n\r\n&gt; In the current Loom implementation, a virtual thread can be pinned in two situations: when there is a native frame on the stack — when Java code calls into native code (JNI) that then calls back into Java — and when inside a `synchronized` block or method. In those cases, blocking the virtual thread will block the physical thread that carries it. Once the native call completes or the monitor released (the `synchronized` block/method is exited) the thread is unpinned.\r\n\r\n&gt; If you have a common I/O operation guarded by a `synchronized`, replace the monitor with a `ReentrantLock` to let your application benefit fully from Loom’s scalability boost even before we fix pinning by monitors (or, better yet, use the higher-performance `StampedLock` if you can).\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/ReentrantLock.html\r\n  [2]:\r\nhttp://cr.openjdk.java.net/~rpressler/loom/loom/sol1_part1.html#pinning","title":"Why use a ReentrantLock if one can use synchronized(this)?","body":"<p>A <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/ReentrantLock.html\" rel=\"noreferrer\">ReentrantLock</a> is <em>unstructured</em>, unlike <code>synchronized</code> constructs -- i.e.  you don't need to use a block structure for locking and can even hold a lock across methods. An example:</p>\n<pre><code>private ReentrantLock lock;\n\npublic void foo() {\n  ...\n  lock.lock();\n  ...\n}\n\npublic void bar() {\n  ...\n  lock.unlock();\n  ...\n}\n</code></pre>\n<p>Such flow is impossible to represent via a single monitor in a <code>synchronized</code> construct.</p>\n<hr />\n<p>Aside from that, <code>ReentrantLock</code> supports <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html#tryLock()\" rel=\"noreferrer\">lock polling</a> and <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html#tryLock(long,%20java.util.concurrent.TimeUnit)\" rel=\"noreferrer\">interruptible lock waits that support time-out</a>. <code>ReentrantLock</code> also has support for <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html#ReentrantLock(boolean)\" rel=\"noreferrer\">configurable <em>fairness</em> policy</a>, allowing more flexible thread scheduling.</p>\n<blockquote>\n<p>The constructor for this class accepts an optional <em>fairness</em> parameter. When set <code>true</code>, under contention, locks favor granting access to the longest-waiting thread. Otherwise this lock does not guarantee any particular access order. Programs using fair locks accessed by many threads may display lower overall throughput (i.e., are slower; often much slower) than those using the default setting, but have smaller variances in times to obtain locks and guarantee lack of starvation. Note however, that fairness of locks does not guarantee fairness of thread scheduling. Thus, one of many threads using a fair lock may obtain it multiple times in succession while other active threads are not progressing and not currently holding the lock. Also note that the untimed <code>tryLock</code> method does not honor the fairness setting. It will succeed if the lock is available even if other threads are waiting.</p>\n</blockquote>\n<hr />\n<p><code>ReentrantLock</code> <strong>may</strong> also be <a href=\"http://lycog.com/concurency/performance-reentrantlock-synchronized/\" rel=\"noreferrer\"><strong>more scalable</strong></a>, performing much better under higher contention. You can read more about this <a href=\"http://www.ibm.com/developerworks/java/library/j-jtp10264/\" rel=\"noreferrer\">here</a>.</p>\n<p>This claim has been contested, however; see the following comment:</p>\n<blockquote>\n<p>In the reentrant lock test, a new lock is created each time, thus there is no exclusive locking and the resulting data is invalid. Also, the IBM link offers no source code for the underlying benchmark so its impossible to characterize whether the test was even conducted correctly.</p>\n</blockquote>\n<hr />\n<p>When should you use <code>ReentrantLock</code>s? According to that developerWorks article...</p>\n<blockquote>\n<p>The answer is pretty simple -- use it when you actually need something it provides that <code>synchronized</code> doesn't, like timed lock waits, interruptible lock waits, non-block-structured locks, multiple condition variables, or lock polling. <code>ReentrantLock</code> also has scalability benefits, and you should use it if you actually have a situation that exhibits high contention, but remember that the vast majority of <code>synchronized</code> blocks hardly ever exhibit any contention, let alone high contention. I would advise developing with synchronization until synchronization has proven to be inadequate, rather than simply assuming &quot;the performance will be better&quot; if you use <code>ReentrantLock</code>. Remember, these are advanced tools for advanced users. (And truly advanced users tend to prefer the simplest tools they can find until they're convinced the simple tools are inadequate.) As always, make it right first, and then worry about whether or not you have to make it faster.</p>\n</blockquote>\n<hr />\n<p>One final aspect that's gonna become more relevant in the near future has to do with <a href=\"http://cr.openjdk.java.net/%7Erpressler/loom/loom/sol1_part1.html#pinning\" rel=\"noreferrer\">Java 15 and Project Loom</a>. In the (new) world of virtual threads, the underlying scheduler would be able to work much better with <code>ReentrantLock</code> than it's able to do with <code>synchronized</code>, that's true at least in the initial Java 15 release but may be optimized later.</p>\n<blockquote>\n<p>In the current Loom implementation, a virtual thread can be pinned in two situations: when there is a native frame on the stack — when Java code calls into native code (JNI) that then calls back into Java — and when inside a <code>synchronized</code> block or method. In those cases, blocking the virtual thread will block the physical thread that carries it. Once the native call completes or the monitor released (the <code>synchronized</code> block/method is exited) the thread is unpinned.</p>\n</blockquote>\n<blockquote>\n<p>If you have a common I/O operation guarded by a <code>synchronized</code>, replace the monitor with a <code>ReentrantLock</code> to let your application benefit fully from Loom’s scalability boost even before we fix pinning by monitors (or, better yet, use the higher-performance <code>StampedLock</code> if you can).</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1681112681,"creation_date":1461522547,"answer_id":36827191,"question_id":11821801,"body_markdown":"\r\nA simple example using `ReentrantLock`\r\n\r\n    import java.util.concurrent.locks.ReentrantLock;\r\n\r\n    class ReentrantLockDemo {\r\n\t    private final ReentrantLock lock = new ReentrantLock();\r\n\r\n\t    public void safeMethod1() {\r\n\t\t    try {\r\n\t\t\t    lock.lock();\r\n\t\t\t    /* your business logic goes here */\r\n\r\n\t\t    } finally {\r\n\t\t\t    lock.unlock();\r\n\t\t    }\r\n\t     }\r\n    }\r\n\r\nFrom oracle documentation page about [ReentrantLock][1]:\r\n\r\n&gt; A reentrant mutual exclusion Lock with the same basic behaviour and semantics as the implicit monitor lock accessed using synchronized methods and statements, but with extended capabilities.\r\n\r\n&gt;The constructor for this class accepts an optional *fairness* parameter. When set true, under contention,  *locks favor granting access to the longest-waiting thread*. Otherwise this lock does not guarantee any particular access order.\r\n\r\n*ReentrantLock* key APIs, which are better over **synchronized**\r\n\r\n1. `lockInterruptibly()` : Acquires the lock unless the current thread is interrupted.\r\n2. \t`tryLock()` :  Acquires the lock only if it is not held by another thread at the time of invocation\r\n3.\t`tryLock(long timeout, TimeUnit unit)`\r\nAcquires the lock if it is not held by another thread within the given waiting time and the current thread has not been interrupted. This API avoid thread starvation, which is a drawback with `synchronized`\r\n4. `public ReentrantLock(boolean fair)` : ReentrantLock with the fairness policy.\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/ReentrantLock.html\r\n ","title":"Why use a ReentrantLock if one can use synchronized(this)?","body":"<p>A simple example using <code>ReentrantLock</code></p>\n<pre><code>import java.util.concurrent.locks.ReentrantLock;\n\nclass ReentrantLockDemo {\n    private final ReentrantLock lock = new ReentrantLock();\n\n    public void safeMethod1() {\n        try {\n            lock.lock();\n            /* your business logic goes here */\n\n        } finally {\n            lock.unlock();\n        }\n     }\n}\n</code></pre>\n<p>From oracle documentation page about <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/ReentrantLock.html\" rel=\"nofollow noreferrer\">ReentrantLock</a>:</p>\n<blockquote>\n<p>A reentrant mutual exclusion Lock with the same basic behaviour and semantics as the implicit monitor lock accessed using synchronized methods and statements, but with extended capabilities.</p>\n</blockquote>\n<blockquote>\n<p>The constructor for this class accepts an optional <em>fairness</em> parameter. When set true, under contention,  <em>locks favor granting access to the longest-waiting thread</em>. Otherwise this lock does not guarantee any particular access order.</p>\n</blockquote>\n<p><em>ReentrantLock</em> key APIs, which are better over <strong>synchronized</strong></p>\n<ol>\n<li><code>lockInterruptibly()</code> : Acquires the lock unless the current thread is interrupted.</li>\n<li><code>tryLock()</code> :  Acquires the lock only if it is not held by another thread at the time of invocation</li>\n<li><code>tryLock(long timeout, TimeUnit unit)</code>\nAcquires the lock if it is not held by another thread within the given waiting time and the current thread has not been interrupted. This API avoid thread starvation, which is a drawback with <code>synchronized</code></li>\n<li><code>public ReentrantLock(boolean fair)</code> : ReentrantLock with the fairness policy.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":444211,"reputation":61229,"user_id":835883,"accept_rate":81,"display_name":"j2emanue"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1466276355,"creation_date":1466276355,"answer_id":37900587,"question_id":11821801,"body_markdown":"You can use reentrant locks with a fairness policy  or timeout to avoid thread starvation.  You can apply a  thread fairness policy.   it will help avoid a thread waiting forever to get to your resources. \r\n\r\n    private final ReentrantLock lock = new ReentrantLock(true);\r\n    //the param true turns on the fairness policy. \r\n\r\nThe &quot;fairness policy&quot; picks the next runnable thread to execute. It is based on priority, time since last run, blah blah\r\n\r\nalso,\r\nSynchronize can block indefinitely if it cant escape the block. Reentrantlock can have timeout set.  ","title":"Why use a ReentrantLock if one can use synchronized(this)?","body":"<p>You can use reentrant locks with a fairness policy  or timeout to avoid thread starvation.  You can apply a  thread fairness policy.   it will help avoid a thread waiting forever to get to your resources. </p>\n\n<pre><code>private final ReentrantLock lock = new ReentrantLock(true);\n//the param true turns on the fairness policy. \n</code></pre>\n\n<p>The \"fairness policy\" picks the next runnable thread to execute. It is based on priority, time since last run, blah blah</p>\n\n<p>also,\nSynchronize can block indefinitely if it cant escape the block. Reentrantlock can have timeout set.  </p>\n"},{"tags":[],"owner":{"account_id":5236368,"reputation":1089,"user_id":4184808,"accept_rate":0,"display_name":"Sumit Kapoor"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1538829281,"creation_date":1538829281,"answer_id":52679146,"question_id":11821801,"body_markdown":"**Synchronized locks** does not offer any mechanism of waiting queue in which after the execution of one thread any thread running in parallel can acquire the lock. Due to which the thread which is there in the system and running for a longer period of time never gets chance to access the shared resource thus leading to starvation.\r\n\r\n**Reentrant locks** are very much flexible and has a fairness policy in which if a thread is waiting for a longer time and after the completion of the currently executing thread we can make sure that the longer waiting thread gets the chance of accessing the shared resource hereby decreasing the throughput of the system and making it more time consuming. \r\n\r\n","title":"Why use a ReentrantLock if one can use synchronized(this)?","body":"<p><strong>Synchronized locks</strong> does not offer any mechanism of waiting queue in which after the execution of one thread any thread running in parallel can acquire the lock. Due to which the thread which is there in the system and running for a longer period of time never gets chance to access the shared resource thus leading to starvation.</p>\n\n<p><strong>Reentrant locks</strong> are very much flexible and has a fairness policy in which if a thread is waiting for a longer time and after the completion of the currently executing thread we can make sure that the longer waiting thread gets the chance of accessing the shared resource hereby decreasing the throughput of the system and making it more time consuming. </p>\n"},{"tags":[],"owner":{"account_id":7422340,"reputation":2446,"user_id":5646176,"accept_rate":50,"display_name":"RonTLV"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1542181179,"creation_date":1542181179,"answer_id":53295187,"question_id":11821801,"body_markdown":"Lets assume this code is running in a thread:\r\n\r\n    private static ReentrantLock lock = new ReentrantLock();\r\n    \r\n    void accessResource() {\r\n        lock.lock();\r\n        if( checkSomeCondition() ) {\r\n            accessResource();\r\n        }\r\n        lock.unlock();\r\n    }\r\n\r\nBecause the thread owns the lock it will allow multiple calls to lock(), so it re-enter the lock. This can be achieved with a reference count so it doesn&#39;t has to acquire lock again.","title":"Why use a ReentrantLock if one can use synchronized(this)?","body":"<p>Lets assume this code is running in a thread:</p>\n\n<pre><code>private static ReentrantLock lock = new ReentrantLock();\n\nvoid accessResource() {\n    lock.lock();\n    if( checkSomeCondition() ) {\n        accessResource();\n    }\n    lock.unlock();\n}\n</code></pre>\n\n<p>Because the thread owns the lock it will allow multiple calls to lock(), so it re-enter the lock. This can be achieved with a reference count so it doesn't has to acquire lock again.</p>\n"},{"tags":[],"owner":{"account_id":2700381,"reputation":1167,"user_id":2331225,"accept_rate":75,"display_name":"Dhaval D"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1558502105,"creation_date":1558502105,"answer_id":56249714,"question_id":11821801,"body_markdown":"One thing to keep in mind is : &lt;br/&gt;&lt;br/&gt;\r\nThe name &#39;*ReentrantLock*&#39; gives out a wrong message about other locking mechanism that they are not re-entrant. **This is not true.** Lock acquired via &#39;synchronized&#39; is also re-entrant in Java. \r\n\r\nKey difference is that &#39;synchronized&#39; uses intrinsic lock ( one that every Object has ) while Lock API doesn&#39;t.","title":"Why use a ReentrantLock if one can use synchronized(this)?","body":"<p>One thing to keep in mind is : <br/><br/>\nThe name '<em>ReentrantLock</em>' gives out a wrong message about other locking mechanism that they are not re-entrant. <strong>This is not true.</strong> Lock acquired via 'synchronized' is also re-entrant in Java. </p>\n\n<p>Key difference is that 'synchronized' uses intrinsic lock ( one that every Object has ) while Lock API doesn't.</p>\n"},{"tags":[],"owner":{"account_id":1630934,"reputation":3623,"user_id":1505487,"accept_rate":40,"display_name":"Solubris"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1586998937,"creation_date":1586998937,"answer_id":61241052,"question_id":11821801,"body_markdown":"I think the wait/notify/notifyAll methods don&#39;t belong on the Object class as it pollutes all objects with methods that are rarely used.  They make much more sense on a dedicated Lock class.  So from this point of view, perhaps it&#39;s better to use a tool that is explicitly designed for the job at hand - ie ReentrantLock.\r\n","title":"Why use a ReentrantLock if one can use synchronized(this)?","body":"<p>I think the wait/notify/notifyAll methods don't belong on the Object class as it pollutes all objects with methods that are rarely used.  They make much more sense on a dedicated Lock class.  So from this point of view, perhaps it's better to use a tool that is explicitly designed for the job at hand - ie ReentrantLock.</p>\n"}],"owner":{"account_id":357639,"reputation":10547,"user_id":992600,"accept_rate":74,"display_name":"adhg"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":189380,"favorite_count":0,"down_vote_count":1,"up_vote_count":385,"accepted_answer_id":11821900,"answer_count":8,"score":384,"last_activity_date":1681112681,"creation_date":1344218919,"question_id":11821801,"body_markdown":"I&#39;m trying to understand what makes the lock in concurrency so important if one can use `synchronized (this)`. In the dummy code below, I can do either:\r\n\r\n 1. synchronized the entire method or synchronize the vulnerable area (`synchronized(this){...}`)\r\n 2. OR lock the vulnerable code area with a ReentrantLock.\r\n\r\nCode:\r\n\r\n        private final ReentrantLock lock = new ReentrantLock(); \r\n        private static List&lt;Integer&gt; ints;\r\n\t\r\n        public Integer getResult(String name) { \r\n            .\r\n            .\r\n            .\r\n            lock.lock();\r\n            try {\r\n                if (ints.size()==3) {\r\n                    ints=null;\r\n                    return -9;\r\n                }\t\r\n\t\t\t\r\n                for (int x=0; x&lt;ints.size(); x++) {\r\n                    System.out.println(&quot;[&quot;+name+&quot;] &quot;+x+&quot;/&quot;+ints.size()+&quot;. values &gt;&gt;&gt;&gt;&quot;+ints.get(x));\r\n                }\r\n\t\t\t\r\n            } finally {\r\n                lock.unlock();\r\n            } \r\n            return random;\r\n    }\r\n\r\n ","title":"Why use a ReentrantLock if one can use synchronized(this)?","body":"<p>I'm trying to understand what makes the lock in concurrency so important if one can use <code>synchronized (this)</code>. In the dummy code below, I can do either:</p>\n\n<ol>\n<li>synchronized the entire method or synchronize the vulnerable area (<code>synchronized(this){...}</code>)</li>\n<li>OR lock the vulnerable code area with a ReentrantLock.</li>\n</ol>\n\n<p>Code:</p>\n\n<pre><code>    private final ReentrantLock lock = new ReentrantLock(); \n    private static List&lt;Integer&gt; ints;\n\n    public Integer getResult(String name) { \n        .\n        .\n        .\n        lock.lock();\n        try {\n            if (ints.size()==3) {\n                ints=null;\n                return -9;\n            }   \n\n            for (int x=0; x&lt;ints.size(); x++) {\n                System.out.println(\"[\"+name+\"] \"+x+\"/\"+ints.size()+\". values &gt;&gt;&gt;&gt;\"+ints.get(x));\n            }\n\n        } finally {\n            lock.unlock();\n        } \n        return random;\n}\n</code></pre>\n"},{"tags":["java","csv","apache-commons-csv"],"comments":[{"owner":{"account_id":957028,"reputation":15133,"user_id":982149,"accept_rate":100,"display_name":"Fildor"},"score":1,"creation_date":1503578400,"post_id":45861824,"comment_id":78681865,"body_markdown":"Have you tried reading until newLine before giving the fileReader to the parser?","body":"Have you tried reading until newLine before giving the fileReader to the parser?"}],"answers":[{"tags":[],"owner":{"account_id":7373320,"reputation":17364,"user_id":5612858,"display_name":"Arnaud"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1503578489,"creation_date":1503578489,"answer_id":45861940,"question_id":45861824,"body_markdown":"\r\nYou may want to read the first line, before passing the reader to the `CSVParser` :\r\n\r\n    static void processFile(final File file) {\r\n        FileReader filereader = new FileReader(file);\r\n        BufferedReader bufferedReader = new BufferedReader(filereader);\r\n        bufferedReader.readLine();// try-catch omitted\r\n        final CSVFormat format = CSVFormat.DEFAULT.withDelimiter(&#39;;&#39;);\r\n        CSVParser parser = new CSVParser(bufferedReader, format);\r\n        final List&lt;CSVRecord&gt; records = parser.getRecords();\r\n        //stuff\r\n    }","title":"How can I skip the first line of a csv in Java?","body":"<p>You may want to read the first line, before passing the reader to the <code>CSVParser</code> :</p>\n\n<pre><code>static void processFile(final File file) {\n    FileReader filereader = new FileReader(file);\n    BufferedReader bufferedReader = new BufferedReader(filereader);\n    bufferedReader.readLine();// try-catch omitted\n    final CSVFormat format = CSVFormat.DEFAULT.withDelimiter(';');\n    CSVParser parser = new CSVParser(bufferedReader, format);\n    final List&lt;CSVRecord&gt; records = parser.getRecords();\n    //stuff\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5644665,"reputation":35951,"user_id":4467208,"accept_rate":51,"display_name":"Murat Karag&#246;z"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1503579154,"creation_date":1503578529,"answer_id":45861956,"question_id":45861824,"body_markdown":"You could consume the first line and then pass it to the CSVParser. Other than that there is a method [#withIgnoreEmptyLines](https://commons.apache.org/proper/commons-csv/apidocs/org/apache/commons/csv/CSVFormat.html#withIgnoreEmptyLines-boolean-) which might solve the issue.","title":"How can I skip the first line of a csv in Java?","body":"<p>You could consume the first line and then pass it to the CSVParser. Other than that there is a method <a href=\"https://commons.apache.org/proper/commons-csv/apidocs/org/apache/commons/csv/CSVFormat.html#withIgnoreEmptyLines-boolean-\" rel=\"nofollow noreferrer\">#withIgnoreEmptyLines</a> which might solve the issue.</p>\n"},{"tags":[],"owner":{"account_id":323466,"reputation":14771,"user_id":643500,"display_name":"Sully"},"down_vote_count":1,"up_vote_count":32,"is_accepted":false,"score":31,"last_activity_date":1660626544,"creation_date":1534255754,"answer_id":51843471,"question_id":45861824,"body_markdown":"The correct way to skip the first line if it is a header is by using a different `CSVFormat`\r\n\r\n    CSVFormat format = CSVFormat.DEFAULT.withDelimiter(&#39;;&#39;).withFirstRecordAsHeader();\r\n\r\n**Update: June 30 2022**\r\n\r\nFor 1.9+, use\r\n\r\n    CSVFormat.DEFAULT.builder()                                                                  \r\n        .setDelimiter(&#39;;&#39;)\r\n        .setHeader()\r\n        .setSkipHeaderRecord(true)  // skip header\r\n        .build();","title":"How can I skip the first line of a csv in Java?","body":"<p>The correct way to skip the first line if it is a header is by using a different <code>CSVFormat</code></p>\n<pre><code>CSVFormat format = CSVFormat.DEFAULT.withDelimiter(';').withFirstRecordAsHeader();\n</code></pre>\n<p><strong>Update: June 30 2022</strong></p>\n<p>For 1.9+, use</p>\n<pre><code>CSVFormat.DEFAULT.builder()                                                                  \n    .setDelimiter(';')\n    .setHeader()\n    .setSkipHeaderRecord(true)  // skip header\n    .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2043107,"reputation":111,"user_id":1823828,"display_name":"Musab Qamri"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1536931241,"creation_date":1535624032,"answer_id":52094514,"question_id":45861824,"body_markdown":"You can filter it using Java Streams:\r\n\r\n    parser.getRecords().stream()\r\n         .filter(record -&gt; record.getRecordNumber() != 1) \r\n         .collect(Collectors.toList());\r\n","title":"How can I skip the first line of a csv in Java?","body":"<p>You can filter it using Java Streams:</p>\n\n<pre><code>parser.getRecords().stream()\n     .filter(record -&gt; record.getRecordNumber() != 1) \n     .collect(Collectors.toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5649194,"reputation":86,"user_id":4470400,"display_name":"Frank Why"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1563865142,"creation_date":1563865142,"answer_id":57158354,"question_id":45861824,"body_markdown":"You can skip the first record using stream:\r\n\r\n    List&lt;CSVRecord&gt; noHeadersLine = records.stream.skip(1).collect(toList());","title":"How can I skip the first line of a csv in Java?","body":"<p>You can skip the first record using stream:</p>\n\n<pre><code>List&lt;CSVRecord&gt; noHeadersLine = records.stream.skip(1).collect(toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1974565,"reputation":529,"user_id":1772653,"display_name":"Markus Lenger"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1631268592,"creation_date":1631268592,"answer_id":69130644,"question_id":45861824,"body_markdown":"In version 1.9.0 of org.apache.commons:commons-csv use:\r\n\r\n    val format = CSVFormat.Builder.create(CSVFormat.DEFAULT)\r\n            .setHeader()\r\n            .setSkipHeaderRecord(true)\r\n            .build()\r\n\r\n    val parser = CSVParser.parse(reader, format)","title":"How can I skip the first line of a csv in Java?","body":"<p>In version 1.9.0 of org.apache.commons:commons-csv use:</p>\n<pre><code>val format = CSVFormat.Builder.create(CSVFormat.DEFAULT)\n        .setHeader()\n        .setSkipHeaderRecord(true)\n        .build()\n\nval parser = CSVParser.parse(reader, format)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6222965,"reputation":25,"user_id":4842096,"display_name":"Matt Minton"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1648678850,"creation_date":1648678850,"answer_id":71684776,"question_id":45861824,"body_markdown":"I am assuming your file format looks something like:\r\n\r\n    &lt;garbage line here&gt;\r\n    &lt;header data&gt;\r\n    &lt;record data starts here&gt;\r\n\r\nFor version 1.9.0, use, as given above, but with one addition:\r\n\r\n    Reader in = new FileReader(fileName);\r\n    BufferedReader bufferedReader = new BufferedReader(in);\r\n    System.out.println(bufferedReader.readLine());\r\n    CSVFormat format = CSVFormat.Builder.create(CSVFormat.DEFAULT)\r\n                .setHeader()\r\n                .setSkipHeaderRecord(true)\r\n                .build();\r\n    CSVParser parser = CSVParser.parse(bufferedReader, format);\r\n    for (CSVRecord record : parser.getRecords()) {\r\n        &lt;do something&gt;\r\n    }\r\n\r\nIf you don&#39;t skip that first line somehow, you will throw an IllegalArgumentException.\r\n","title":"How can I skip the first line of a csv in Java?","body":"<p>I am assuming your file format looks something like:</p>\n<pre><code>&lt;garbage line here&gt;\n&lt;header data&gt;\n&lt;record data starts here&gt;\n</code></pre>\n<p>For version 1.9.0, use, as given above, but with one addition:</p>\n<pre><code>Reader in = new FileReader(fileName);\nBufferedReader bufferedReader = new BufferedReader(in);\nSystem.out.println(bufferedReader.readLine());\nCSVFormat format = CSVFormat.Builder.create(CSVFormat.DEFAULT)\n            .setHeader()\n            .setSkipHeaderRecord(true)\n            .build();\nCSVParser parser = CSVParser.parse(bufferedReader, format);\nfor (CSVRecord record : parser.getRecords()) {\n    &lt;do something&gt;\n}\n</code></pre>\n<p>If you don't skip that first line somehow, you will throw an IllegalArgumentException.</p>\n"},{"tags":[],"owner":{"account_id":1901517,"reputation":70,"user_id":1717289,"display_name":"fdm"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660304544,"creation_date":1660304544,"answer_id":73333608,"question_id":45861824,"body_markdown":"the .setHeader() method must be call for the .setSkipHeaderRecord(true)  to take effect. \r\n```\r\nCSVFormat.DEFAULT.builder()                                                                  \r\n    .setDelimiter(&#39;;&#39;)\r\n    .setHeader()    \r\n    .setSkipHeaderRecord(true)  // skip header\r\n    .build();\r\n```","title":"How can I skip the first line of a csv in Java?","body":"<p>the .setHeader() method must be call for the .setSkipHeaderRecord(true)  to take effect.</p>\n<pre><code>CSVFormat.DEFAULT.builder()                                                                  \n    .setDelimiter(';')\n    .setHeader()    \n    .setSkipHeaderRecord(true)  // skip header\n    .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20375424,"reputation":517,"user_id":14946729,"display_name":"grigouille"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681112598,"creation_date":1681112598,"answer_id":75975216,"question_id":45861824,"body_markdown":"If your first record doesn&#39;t contain CR LF characters, you can use the &quot;readLine&quot; method. Otherwise you have to read twice.\r\n\r\nFirst get the headers :\r\n\r\n    CSVFormat format;\r\n    List&lt;String&gt; headers = null;\r\n    try(Reader reader = getReader()) {\r\n      Iterator&lt;CSVRecord&gt; iter = format.parse(reader).iterator();\r\n      if(iter.hasNext()) iter.next();\r\n      if(iter.hasNext()) {\r\n        headers = iter.next().toList();\r\n      }\r\n    }\r\n\r\nThen read again :\r\n\r\n    try(Reader reader = getReader()) {\r\n      format = format.builder().setHeader(headers.toArray(new String[0])).build();\r\n      Iterator&lt;CSVRecord&gt; iter = format.parse(reader).iterator();\r\n      if(iter.hasNext()) iter.next();\r\n      if(iter.hasNext()) iter.next();\r\n      while(iter.hasNext()) {\r\n        CSVRecord record = iter.next();\r\n        //do stuff\r\n      }\r\n    }\r\n","title":"How can I skip the first line of a csv in Java?","body":"<p>If your first record doesn't contain CR LF characters, you can use the &quot;readLine&quot; method. Otherwise you have to read twice.</p>\n<p>First get the headers :</p>\n<pre><code>CSVFormat format;\nList&lt;String&gt; headers = null;\ntry(Reader reader = getReader()) {\n  Iterator&lt;CSVRecord&gt; iter = format.parse(reader).iterator();\n  if(iter.hasNext()) iter.next();\n  if(iter.hasNext()) {\n    headers = iter.next().toList();\n  }\n}\n</code></pre>\n<p>Then read again :</p>\n<pre><code>try(Reader reader = getReader()) {\n  format = format.builder().setHeader(headers.toArray(new String[0])).build();\n  Iterator&lt;CSVRecord&gt; iter = format.parse(reader).iterator();\n  if(iter.hasNext()) iter.next();\n  if(iter.hasNext()) iter.next();\n  while(iter.hasNext()) {\n    CSVRecord record = iter.next();\n    //do stuff\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":10422949,"reputation":603,"user_id":7685112,"accept_rate":100,"display_name":"Medusa"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22656,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":45861940,"answer_count":9,"score":16,"last_activity_date":1681112598,"creation_date":1503578133,"question_id":45861824,"body_markdown":"I want to skip the first line and use the second as header.\r\n\r\nI am using classes from apache commons csv to process a CSV file.\r\n\r\nThe header of the CSV file is in the second row, not the first (which contains coordinates). \r\n\r\nMy code looks like this: \r\n    \r\n    static void processFile(final File file) {\r\n        FileReader filereader = new FileReader(file);\r\n    \tfinal CSVFormat format = CSVFormat.DEFAULT.withDelimiter(&#39;;&#39;);\r\n        CSVParser parser = new CSVParser(filereader, format);\r\n        final List&lt;CSVRecord&gt; records = parser.getRecords();\r\n        //stuff\r\n    }\r\n\r\nI naively thought,\r\n\r\n    CSVFormat format = CSVFormat.DEFAULT.withFirstRecordAsHeader().withDelimiter(;)\r\n\r\nwould solve the problem, as it&#39;s different from withFirstRowAsHeader and I thought it would detect that the first row doesn&#39;t contain any semicolons and is not a record. It doesn&#39;t. I tried to skip the first line (that CSVFormat seems to think is the header) with\r\n\r\n    CSVFormat format = CSVFormat.DEFAULT.withSkipHeaderRecord().withFirstRecordAsHeader().withDelimiter(;);\r\n\r\nbut that also doesn&#39;t work. What can I do?  What&#39;s the difference between withFirstRowAsHeader and withFirstRecordAsHeader?","title":"How can I skip the first line of a csv in Java?","body":"<p>I want to skip the first line and use the second as header.</p>\n\n<p>I am using classes from apache commons csv to process a CSV file.</p>\n\n<p>The header of the CSV file is in the second row, not the first (which contains coordinates). </p>\n\n<p>My code looks like this: </p>\n\n<pre><code>static void processFile(final File file) {\n    FileReader filereader = new FileReader(file);\n    final CSVFormat format = CSVFormat.DEFAULT.withDelimiter(';');\n    CSVParser parser = new CSVParser(filereader, format);\n    final List&lt;CSVRecord&gt; records = parser.getRecords();\n    //stuff\n}\n</code></pre>\n\n<p>I naively thought,</p>\n\n<pre><code>CSVFormat format = CSVFormat.DEFAULT.withFirstRecordAsHeader().withDelimiter(;)\n</code></pre>\n\n<p>would solve the problem, as it's different from withFirstRowAsHeader and I thought it would detect that the first row doesn't contain any semicolons and is not a record. It doesn't. I tried to skip the first line (that CSVFormat seems to think is the header) with</p>\n\n<pre><code>CSVFormat format = CSVFormat.DEFAULT.withSkipHeaderRecord().withFirstRecordAsHeader().withDelimiter(;);\n</code></pre>\n\n<p>but that also doesn't work. What can I do?  What's the difference between withFirstRowAsHeader and withFirstRecordAsHeader?</p>\n"},{"tags":["java","spring","grpc","channel","grpc-java"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1681117997,"post_id":75975183,"comment_id":134000798,"body_markdown":"Are you trying to set a timeout per request, or per attempt?","body":"Are you trying to set a timeout per request, or per attempt?"},{"owner":{"account_id":8389289,"reputation":723,"user_id":6298537,"display_name":"yashjain12yj"},"score":0,"creation_date":1681118567,"post_id":75975183,"comment_id":134000900,"body_markdown":"@LouisWasserman I want to set timeout per attempt","body":"@LouisWasserman I want to set timeout per attempt"},{"owner":{"account_id":5967476,"reputation":24635,"user_id":4690866,"display_name":"Eric Anderson"},"score":0,"creation_date":1681150130,"post_id":75975183,"comment_id":134006885,"body_markdown":"Per-attempt timeouts are not supported. They might be part of a future effort to add hedging xds support (due to how xds structures hedging, they are related).","body":"Per-attempt timeouts are not supported. They might be part of a future effort to add hedging xds support (due to how xds structures hedging, they are related)."}],"owner":{"account_id":8389289,"reputation":723,"user_id":6298537,"display_name":"yashjain12yj"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":188,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1681112311,"creation_date":1681112311,"question_id":75975183,"body_markdown":"I&#39;m creating a Java GRPC client. Here I&#39;m using a managed channel to create a channel and further passing that channel to create a blocking stub.\r\n\r\n\r\n```\r\nManagedChannelBuilder.forAddress(this.getServiceHost(), this.getServicePort())\r\n    .usePlaintext()\r\n    .keepAliveWithoutCalls(this.isKeepAliveWithoutCall())\r\n    .keepAliveTime(this.getKeepAliveTime(), TimeUnit.MILLISECONDS)\r\n    .idleTimeout(this.getIdleTimeoutInMilliseconds(), TimeUnit.MILLISECONDS)\r\n    .keepAliveTimeout(this.getKeepAliveTimeoutInMilliseconds(), TimeUnit.MILLISECONDS)\r\n    .defaultServiceConfig(this.getRetryConfig())\r\n    .enableRetry()\r\n    .build();\r\n```\r\n\r\nWhile doing retries, if I have given `maxAttempts` as 3, I want to set a timeout for each of the attempts.\r\n\r\nIn which parameter should I set that value?","title":"How to give request timeout per request in Java Grpc","body":"<p>I'm creating a Java GRPC client. Here I'm using a managed channel to create a channel and further passing that channel to create a blocking stub.</p>\n<pre><code>ManagedChannelBuilder.forAddress(this.getServiceHost(), this.getServicePort())\n    .usePlaintext()\n    .keepAliveWithoutCalls(this.isKeepAliveWithoutCall())\n    .keepAliveTime(this.getKeepAliveTime(), TimeUnit.MILLISECONDS)\n    .idleTimeout(this.getIdleTimeoutInMilliseconds(), TimeUnit.MILLISECONDS)\n    .keepAliveTimeout(this.getKeepAliveTimeoutInMilliseconds(), TimeUnit.MILLISECONDS)\n    .defaultServiceConfig(this.getRetryConfig())\n    .enableRetry()\n    .build();\n</code></pre>\n<p>While doing retries, if I have given <code>maxAttempts</code> as 3, I want to set a timeout for each of the attempts.</p>\n<p>In which parameter should I set that value?</p>\n"},{"tags":["java","list","jmeter","beanshell"],"answers":[{"tags":[],"owner":{"account_id":3460456,"reputation":162728,"user_id":2897748,"display_name":"Dmitri T"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681110349,"creation_date":1681110349,"answer_id":75974979,"question_id":75969128,"body_markdown":" 1. You&#39;re trying to pass a [String][1] to the [ArrayList.addAll()][2] function, it won&#39;t work as the function expects a [Collection][3].\r\n 2. [Since JMeter 3.1 it&#39;s recommended to use JSR223 Test Elements and Groovy language for scripting][4] so consider migrating\r\n\r\n 3. The code you wrote doesn&#39;t compile so I fail to see how did you get this output\r\n\r\nIf you have these `carID_1=[307,308,304]` stored as Strings you could do something like:\r\n\r\n\tvars.put(&#39;carID_1&#39;, &#39;[307,308,304]&#39;)\r\n\tvars.put(&#39;carID_2&#39;, &#39;[305]&#39;)\r\n\tvars.put(&#39;carID_3&#39;, &#39;[306]&#39;)\r\n\tvars.put(&quot;carID_matchNr&quot;, &quot;3&quot;)\r\n\t\r\n\tList&lt;Integer&gt; allCarID = new ArrayList&lt;Integer&gt;();\r\n\t\r\n\t1.upto((vars.get(&#39;carID_matchNr&#39;) as int), {\r\n\t    def carIDs = new groovy.json.JsonSlurper().parseText(vars.get(&#39;carID_&#39; + it))\r\n\t    allCarID.addAll(carIDs)\r\n\t})\r\n\t\r\n\tlog.info(&#39;All Car: &#39; + allCarID)\r\n    \r\n[![enter image description here][5]][5]\r\n\r\nMore information on Groovy scripting in JMeter: [Apache Groovy: What Is Groovy Used For?][6]\r\n\r\n\r\n\r\n\r\n    \r\n\r\n \r\n\r\n\r\n\r\n \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/lang/String.html\r\n  [2]: https://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#addAll(java.util.Collection)\r\n  [3]: https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html\r\n  [4]: https://jmeter.apache.org/usermanual/best-practices.html#bsh_scripting\r\n  [5]: https://i.stack.imgur.com/qQJpU.png\r\n  [6]: https://www.blazemeter.com/blog/apache-groovy","title":"Can&#39;t merge a list using addAll method in Jmeter&#39;s BeanShell","body":"<ol>\n<li><p>You're trying to pass a <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html\" rel=\"nofollow noreferrer\">String</a> to the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#addAll(java.util.Collection)\" rel=\"nofollow noreferrer\">ArrayList.addAll()</a> function, it won't work as the function expects a <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html\" rel=\"nofollow noreferrer\">Collection</a>.</p>\n</li>\n<li><p><a href=\"https://jmeter.apache.org/usermanual/best-practices.html#bsh_scripting\" rel=\"nofollow noreferrer\">Since JMeter 3.1 it's recommended to use JSR223 Test Elements and Groovy language for scripting</a> so consider migrating</p>\n</li>\n<li><p>The code you wrote doesn't compile so I fail to see how did you get this output</p>\n</li>\n</ol>\n<p>If you have these <code>carID_1=[307,308,304]</code> stored as Strings you could do something like:</p>\n<pre><code>vars.put('carID_1', '[307,308,304]')\nvars.put('carID_2', '[305]')\nvars.put('carID_3', '[306]')\nvars.put(&quot;carID_matchNr&quot;, &quot;3&quot;)\n\nList&lt;Integer&gt; allCarID = new ArrayList&lt;Integer&gt;();\n\n1.upto((vars.get('carID_matchNr') as int), {\n    def carIDs = new groovy.json.JsonSlurper().parseText(vars.get('carID_' + it))\n    allCarID.addAll(carIDs)\n})\n\nlog.info('All Car: ' + allCarID)\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/qQJpU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qQJpU.png\" alt=\"enter image description here\" /></a></p>\n<p>More information on Groovy scripting in JMeter: <a href=\"https://www.blazemeter.com/blog/apache-groovy\" rel=\"nofollow noreferrer\">Apache Groovy: What Is Groovy Used For?</a></p>\n"},{"tags":[],"owner":{"account_id":10263942,"reputation":5676,"user_id":7574461,"display_name":"lucas-nguyen-17"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681110803,"creation_date":1681110803,"answer_id":75975020,"question_id":75969128,"body_markdown":"I think the problem might come from `vars.get(&quot;carID_&quot;+i)`, it will return String instead of List. Therefore, use `vars.getObject(&quot;carID_&quot;+i)` and `flatten()` of groovy methods will help you.\r\n\r\n1. Use JSR223\r\n2. Choose language: groovy\r\n3. Sample code as below:\r\n\r\n```groovy\r\nvars.putObject(&quot;carID_1&quot;, [307,308,304])\r\nvars.putObject(&quot;carID_2&quot;, [305])\r\nvars.putObject(&quot;carID_3&quot;, [306])\r\n\r\ndef allCarID = []\r\n\r\nfor (int i = 1; i &lt;= 3; i++){\r\n    def x = vars.getObject(&quot;carID_&quot;+i)\r\n    allCarID.add(x)\r\n}\r\n\r\nallCarID = allCarID.flatten()\r\n\r\nlog.info(&quot;All Car: &quot; + allCarID)\r\n```\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/XAMl6.png","title":"Can&#39;t merge a list using addAll method in Jmeter&#39;s BeanShell","body":"<p>I think the problem might come from <code>vars.get(&quot;carID_&quot;+i)</code>, it will return String instead of List. Therefore, use <code>vars.getObject(&quot;carID_&quot;+i)</code> and <code>flatten()</code> of groovy methods will help you.</p>\n<ol>\n<li>Use JSR223</li>\n<li>Choose language: groovy</li>\n<li>Sample code as below:</li>\n</ol>\n<pre><code>vars.putObject(&quot;carID_1&quot;, [307,308,304])\nvars.putObject(&quot;carID_2&quot;, [305])\nvars.putObject(&quot;carID_3&quot;, [306])\n\ndef allCarID = []\n\nfor (int i = 1; i &lt;= 3; i++){\n    def x = vars.getObject(&quot;carID_&quot;+i)\n    allCarID.add(x)\n}\n\nallCarID = allCarID.flatten()\n\nlog.info(&quot;All Car: &quot; + allCarID)\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/XAMl6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XAMl6.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":3364245,"reputation":5,"user_id":7373607,"display_name":"ilf"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75974979,"answer_count":2,"score":0,"last_activity_date":1681110803,"creation_date":1681022515,"question_id":75969128,"body_markdown":"Trying to merge a list using addAll method in Jmeter&#39;s BeanShell, but the BeanShellInterpreter said the method not found.\r\n\r\nI tried to merge 2 lists using the tutorial from [here](https://www.digitalocean.com/community/tutorials/merge-two-lists-in-java).\r\n\r\n# The list that I want to merge, looks like this:\r\n\r\n1. carID_1=\\[307,308,304\\]\r\n2. carID_2=\\[305\\]\r\n3. carID_3=\\[306\\]\r\n\r\n# And here&#39;s the code I wrote:\r\n\r\n```java\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nList&lt;Integer&gt; allCarID = new ArrayList&lt;Integer&gt;();\r\nnumOfCarID = vars.get(&quot;carID_matchNr&quot;); //contains the number of list used for looping\r\nint numOfCarID = Integer.parseInt(numOfCarID);\r\n\r\nfor (int i = 1; i &lt;= numOfCarID; i++){\r\n\tx = vars.get(&quot;carID_&quot;+i);\r\n\tallCarID.addAll(x);\r\n}\r\n\r\nlog.info(&quot;All Car: &quot; + allCarID);\r\n```\r\n\r\nWhen I try to run the code, it gives me an error said that `Encountered &quot;=&quot; at line 4, column 25.`. After some research, I try to change the code to `List allCarID = new ArrayList();` and code successfully reached the addAll method.\r\n\r\nIt show an error like this:\r\n`Error in method invocation: Method addAll( java.lang.String ) not found in class&#39;java.util.ArrayList&#39;`.\r\n\r\nTry to change `addAll`to &#39;add&#39;, the code executed successfully and didn&#39;t show an error, but the result I wanted was different.\r\n\r\nWhat I want is a list `[307,308,304,305,306]`, but I got a `[[307,308,304], [305], [306]]` instead.  \r\n  \r\nAny kind of help is very helpful, thank you in advance.","title":"Can&#39;t merge a list using addAll method in Jmeter&#39;s BeanShell","body":"<p>Trying to merge a list using addAll method in Jmeter's BeanShell, but the BeanShellInterpreter said the method not found.</p>\n<p>I tried to merge 2 lists using the tutorial from <a href=\"https://www.digitalocean.com/community/tutorials/merge-two-lists-in-java\" rel=\"nofollow noreferrer\">here</a>.</p>\n<h1>The list that I want to merge, looks like this:</h1>\n<ol>\n<li>carID_1=[307,308,304]</li>\n<li>carID_2=[305]</li>\n<li>carID_3=[306]</li>\n</ol>\n<h1>And here's the code I wrote:</h1>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.ArrayList;\nimport java.util.List;\n\nList&lt;Integer&gt; allCarID = new ArrayList&lt;Integer&gt;();\nnumOfCarID = vars.get(&quot;carID_matchNr&quot;); //contains the number of list used for looping\nint numOfCarID = Integer.parseInt(numOfCarID);\n\nfor (int i = 1; i &lt;= numOfCarID; i++){\n    x = vars.get(&quot;carID_&quot;+i);\n    allCarID.addAll(x);\n}\n\nlog.info(&quot;All Car: &quot; + allCarID);\n</code></pre>\n<p>When I try to run the code, it gives me an error said that <code>Encountered &quot;=&quot; at line 4, column 25.</code>. After some research, I try to change the code to <code>List allCarID = new ArrayList();</code> and code successfully reached the addAll method.</p>\n<p>It show an error like this:\n<code>Error in method invocation: Method addAll( java.lang.String ) not found in class'java.util.ArrayList'</code>.</p>\n<p>Try to change <code>addAll</code>to 'add', the code executed successfully and didn't show an error, but the result I wanted was different.</p>\n<p>What I want is a list <code>[307,308,304,305,306]</code>, but I got a <code>[[307,308,304], [305], [306]]</code> instead.</p>\n<p>Any kind of help is very helpful, thank you in advance.</p>\n"},{"tags":["java","android","reactjs","react-native","kotlin"],"owner":{"account_id":6586032,"reputation":1672,"user_id":5088774,"accept_rate":6,"display_name":"DIGITAL JEDI"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681110753,"creation_date":1681110753,"question_id":75975014,"body_markdown":"I want to integrate my existing Android and ios projects into react native. So I create a new react native project using expo bare flow. I have followed all the steps mentioned in the official React native document: https://reactnative.dev/docs/integration-with-existing-apps?language=kotlin\r\n\r\nThis is my MainActivity code, which just navigates to RNModuleActivity\r\n\r\n    class MainActivity : AppCompatActivity() {\r\n        override fun onCreate(savedInstanceState: Bundle?) {\r\n            super.onCreate(savedInstanceState)\r\n            setContentView(R.layout.activity_main)\r\n            val btnGoRNScreen = findViewById&lt;Button&gt;(R.id.button)\r\n            btnGoRNScreen.setOnClickListener {\r\n                \r\n                val intent = Intent(this@MainActivity, RNModuleActivity::class.java)\r\n                intent.putExtra(&quot;message_from_native&quot;, &quot;yes&quot;)\r\n                startActivity(intent)\r\n            }\r\n        }\r\n    }\r\n\r\nMy RNModuleActivity code:\r\n\r\n    class RNModuleActivity : Activity(), DefaultHardwareBackBtnHandler {\r\n        private lateinit var reactRootView: ReactRootView\r\n        private lateinit var reactInstanceManager: ReactInstanceManager\r\n        override fun onCreate(savedInstanceState: Bundle?) {\r\n            super.onCreate(savedInstanceState)\r\n            SoLoader.init(this, false)\r\n            reactRootView = ReactRootView(this)\r\n            val packages: List&lt;ReactPackage&gt; = PackageList(application).packages\r\n            // Packages that cannot be autolinked yet can be added manually here, for example:\r\n            // packages.add(MyReactNativePackage())\r\n            // Remember to include them in `settings.gradle` and `app/build.gradle` too.\r\n            reactInstanceManager = ReactInstanceManager.builder()\r\n                .setApplication(application)\r\n                .setCurrentActivity(this)\r\n                .setBundleAssetName(&quot;index.android.bundle&quot;)\r\n                .setJSMainModulePath(&quot;index&quot;)\r\n                .addPackages(packages)\r\n                .setUseDeveloperSupport(BuildConfig.DEBUG)\r\n                .setInitialLifecycleState(LifecycleState.RESUMED)\r\n                .build()\r\n            \r\n            // the string in AppRegistry.registerComponent() in index.js\r\n            reactRootView?.startReactApplication(reactInstanceManager, &quot;testapp&quot;, null)\r\n            setContentView(reactRootView)\r\n        }\r\n    \r\n        override fun invokeDefaultOnBackPressed() {\r\n            super.onBackPressed()\r\n        }\r\n    \r\n        override fun onPause() {\r\n            super.onPause()\r\n            reactInstanceManager.onHostPause(this)\r\n        }\r\n    \r\n        override fun onResume() {\r\n            super.onResume()\r\n            reactInstanceManager.onHostResume(this, this)\r\n        }\r\n    \r\n        override fun onDestroy() {\r\n            super.onDestroy()\r\n            reactInstanceManager.onHostDestroy(this)\r\n            reactRootView.unmountReactApplication()\r\n        }\r\n    \r\n        override fun onBackPressed() {\r\n            reactInstanceManager.onBackPressed()\r\n            super.onBackPressed()\r\n        }\r\n    \r\n        override fun onKeyUp(keyCode: Int, event: KeyEvent?): Boolean {\r\n            if (keyCode == KeyEvent.KEYCODE_MENU &amp;&amp; reactInstanceManager != null) {\r\n                reactInstanceManager.showDevOptionsDialog()\r\n                return true\r\n            }\r\n            return super.onKeyUp(keyCode, event)\r\n        }\r\n    }\r\n\r\nI have set the default activity to MainActivity in my manifest file. But when I click on the button to navigate to RNModuleActivity it returns this error\r\n\r\n    java.lang.NoClassDefFoundError: com.facebook.react.jscexecutor.JSCExecutor\r\n                                                                                                        \tat com.facebook.react.jscexecutor.JSCExecutor.loadLibrary(JSCExecutor.java:24)\r\n                                                                                                        \tat com.facebook.react.ReactInstanceManagerBuilder.getDefaultJSExecutorFactory(ReactInstanceManagerBuilder.java:363)\r\n                                                                                                        \tat com.facebook.react.ReactInstanceManagerBuilder.build(ReactInstanceManagerBuilder.java:316)\r\n                                                                                                        \tat com.krytron.RNModuleActivity.onCreate","title":"Integrate existing Anroid App into React Native Project","body":"<p>I want to integrate my existing Android and ios projects into react native. So I create a new react native project using expo bare flow. I have followed all the steps mentioned in the official React native document: <a href=\"https://reactnative.dev/docs/integration-with-existing-apps?language=kotlin\" rel=\"nofollow noreferrer\">https://reactnative.dev/docs/integration-with-existing-apps?language=kotlin</a></p>\n<p>This is my MainActivity code, which just navigates to RNModuleActivity</p>\n<pre><code>class MainActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        val btnGoRNScreen = findViewById&lt;Button&gt;(R.id.button)\n        btnGoRNScreen.setOnClickListener {\n            \n            val intent = Intent(this@MainActivity, RNModuleActivity::class.java)\n            intent.putExtra(&quot;message_from_native&quot;, &quot;yes&quot;)\n            startActivity(intent)\n        }\n    }\n}\n</code></pre>\n<p>My RNModuleActivity code:</p>\n<pre><code>class RNModuleActivity : Activity(), DefaultHardwareBackBtnHandler {\n    private lateinit var reactRootView: ReactRootView\n    private lateinit var reactInstanceManager: ReactInstanceManager\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        SoLoader.init(this, false)\n        reactRootView = ReactRootView(this)\n        val packages: List&lt;ReactPackage&gt; = PackageList(application).packages\n        // Packages that cannot be autolinked yet can be added manually here, for example:\n        // packages.add(MyReactNativePackage())\n        // Remember to include them in `settings.gradle` and `app/build.gradle` too.\n        reactInstanceManager = ReactInstanceManager.builder()\n            .setApplication(application)\n            .setCurrentActivity(this)\n            .setBundleAssetName(&quot;index.android.bundle&quot;)\n            .setJSMainModulePath(&quot;index&quot;)\n            .addPackages(packages)\n            .setUseDeveloperSupport(BuildConfig.DEBUG)\n            .setInitialLifecycleState(LifecycleState.RESUMED)\n            .build()\n        \n        // the string in AppRegistry.registerComponent() in index.js\n        reactRootView?.startReactApplication(reactInstanceManager, &quot;testapp&quot;, null)\n        setContentView(reactRootView)\n    }\n\n    override fun invokeDefaultOnBackPressed() {\n        super.onBackPressed()\n    }\n\n    override fun onPause() {\n        super.onPause()\n        reactInstanceManager.onHostPause(this)\n    }\n\n    override fun onResume() {\n        super.onResume()\n        reactInstanceManager.onHostResume(this, this)\n    }\n\n    override fun onDestroy() {\n        super.onDestroy()\n        reactInstanceManager.onHostDestroy(this)\n        reactRootView.unmountReactApplication()\n    }\n\n    override fun onBackPressed() {\n        reactInstanceManager.onBackPressed()\n        super.onBackPressed()\n    }\n\n    override fun onKeyUp(keyCode: Int, event: KeyEvent?): Boolean {\n        if (keyCode == KeyEvent.KEYCODE_MENU &amp;&amp; reactInstanceManager != null) {\n            reactInstanceManager.showDevOptionsDialog()\n            return true\n        }\n        return super.onKeyUp(keyCode, event)\n    }\n}\n</code></pre>\n<p>I have set the default activity to MainActivity in my manifest file. But when I click on the button to navigate to RNModuleActivity it returns this error</p>\n<pre><code>java.lang.NoClassDefFoundError: com.facebook.react.jscexecutor.JSCExecutor\n                                                                                                        at com.facebook.react.jscexecutor.JSCExecutor.loadLibrary(JSCExecutor.java:24)\n                                                                                                        at com.facebook.react.ReactInstanceManagerBuilder.getDefaultJSExecutorFactory(ReactInstanceManagerBuilder.java:363)\n                                                                                                        at com.facebook.react.ReactInstanceManagerBuilder.build(ReactInstanceManagerBuilder.java:316)\n                                                                                                        at com.krytron.RNModuleActivity.onCreate\n</code></pre>\n"},{"tags":["java","multithreading","java-me","synchronized","volatile"],"answers":[{"tags":[],"owner":{"account_id":5530,"reputation":63236,"user_id":8946,"accept_rate":84,"display_name":"Lawrence Dol"},"down_vote_count":2,"up_vote_count":469,"is_accepted":true,"score":467,"last_activity_date":1667442130,"creation_date":1282204113,"answer_id":3519736,"question_id":3519664,"body_markdown":"It&#39;s important to understand that there are *two* aspects to thread safety.\r\n\r\n1. execution control, and\r\n2. memory visibility  \r\n\r\nThe first has to do with controlling when code executes (including the order in which instructions are executed) and whether it can execute concurrently, and the second to do with when the effects in memory of what has been done are visible to other threads.  Because each CPU has several levels of cache between it and main memory, threads running on different CPUs or cores can see &quot;memory&quot; differently at any given moment in time because threads are permitted to obtain and work on private copies of main memory.\r\n\r\nUsing `synchronized` prevents any other thread from obtaining the monitor (or lock) ***for the same object***, thereby preventing all code blocks protected by synchronization ***on the same object*** from executing concurrently.  Synchronization *also* creates a &quot;happens-before&quot; memory barrier, causing a memory visibility constraint such that anything done up to the point some thread releases a lock *appears* to another thread subsequently acquiring ***the same lock*** to have happened before it acquired the lock. In practical terms, on current hardware, this typically causes flushing of the CPU caches when a monitor is acquired and writes to main memory when it is released, both of which are (relatively) expensive.\r\n\r\nUsing `volatile`, on the other hand, forces all accesses (read or write) to the volatile variable to occur to main memory, effectively keeping the volatile variable out of CPU caches. This can be useful for some actions where it is simply required that visibility of the variable be correct and order of accesses is not important. Using `volatile` also changes treatment of `long` and `double` to require accesses to them to be atomic; on some (older) hardware this might require locks, though not on modern 64 bit hardware. Under the new (JSR-133) memory model for Java 5+, the semantics of volatile have been strengthened to be almost as strong as synchronized with respect to memory visibility and instruction ordering (see http://www.cs.umd.edu/users/pugh/java/memoryModel/jsr-133-faq.html#volatile).  For the purposes of visibility, each access to a volatile field acts like half a synchronization.\r\n\r\n&gt; Under the new memory model, it is still true that volatile variables cannot be reordered with each other. The difference is that it is now no longer so easy to reorder normal field accesses around them. Writing to a volatile field has the same memory effect as a monitor release, and reading from a volatile field has the same memory effect as a monitor acquire. In effect, because the new memory model places stricter constraints on reordering of volatile field accesses with other field accesses, volatile or not, anything that was visible to thread `A` when it writes to volatile field `f` becomes visible to thread `B` when it reads `f`.\r\n&gt;\r\n&gt; -- [JSR 133 (Java Memory Model) FAQ](http://www.cs.umd.edu/~pugh/java/memoryModel/jsr-133-faq.html)\r\n\r\nSo, now both forms of memory barrier (under the current JMM) cause an instruction re-ordering barrier which prevents the compiler or run-time from re-ordering instructions across the barrier. In the old JMM, volatile did not prevent re-ordering. This can be important, because apart from memory barriers the only limitation imposed is that,  *for any particular thread*, the net effect of the code is the same as it would be if the instructions were executed in precisely the order in which they appear in the source.\r\n\r\nOne use of volatile is for a shared but immutable object is recreated on the fly, with many other threads taking a reference to the object at a particular point in their execution cycle.  One needs the other threads to begin using the recreated object once it is published, but does not need the additional overhead of full synchronization and it&#39;s attendant contention and cache flushing.\r\n\r\n    // Declaration\r\n    public class SharedLocation {\r\n        static public volatile SomeObject someObject=new SomeObject(); // default object\r\n        }\r\n    \r\n    // Publishing code\r\n    SharedLocation.someObject=new SomeObject(...); // new object is published\r\n\r\n    // Using code\r\n    // Note: do not simply use SharedLocation.someObject.xxx(), since although\r\n    //       someObject will be internally consistent for xxx(), a subsequent \r\n    //       call to yyy() might be inconsistent with xxx() if the object was \r\n    //       replaced in between calls.\r\n    private String getError() {\r\n        SomeObject myCopy=SharedLocation.someObject; // gets current copy\r\n        ...\r\n        int cod=myCopy.getErrorCode();\r\n        String txt=myCopy.getErrorText();\r\n        return (cod+&quot; - &quot;+txt);\r\n        }\r\n    // And so on, with myCopy always in a consistent state within and across calls\r\n    // Eventually we will return to the code that gets the current SomeObject.\r\n\r\nSpeaking to your read-update-write question, specifically.  Consider the following unsafe code:\r\n\r\n    public void updateCounter() {\r\n        if(counter==1000) { counter=0; }\r\n        else              { counter++; }\r\n        }\r\n\r\nNow, with the updateCounter() method unsynchronized, two threads may enter it at the same time.  Among the many permutations of what could happen, one is that thread-1 does the test for counter==1000 and finds it true and is then suspended. Then thread-2 does the same test and also sees it true and is suspended. Then thread-1 resumes and sets counter to 0. Then thread-2 resumes and again sets counter to 0 because it missed the update from thread-1.  This can also happen even if thread switching does not occur as I have described, but simply because two different cached copies of counter were present in two different CPU cores and the threads each ran on a separate core. For that matter, one thread could have counter at one value and the other could have counter at some entirely different value just because of caching.\r\n\r\nWhat&#39;s important in this example is that the variable *counter* was read from main memory into cache, updated in cache and only written back to main memory at some indeterminate point later when a memory barrier occurred or when the cache memory was needed for something else. Making the counter `volatile` is insufficient for thread-safety of this code, because the test for the maximum and the assignments are discrete operations, including the increment which is a set of non-atomic `read+increment+write` machine instructions, something like: \r\n\r\n    MOV EAX,counter\r\n    INC EAX\r\n    MOV counter,EAX\r\n\r\nVolatile variables are useful only when ***all*** operations performed on them are &quot;atomic&quot;, such as my example where a reference to a fully formed object is only read or written (and, indeed, typically it&#39;s only written from a single point). Another example would be a volatile array reference backing a copy-on-write list, provided the array was only read by first taking a local copy of the reference to it.\r\n","title":"Difference between volatile and synchronized in Java","body":"<p>It's important to understand that there are <em>two</em> aspects to thread safety.</p>\n<ol>\n<li>execution control, and</li>\n<li>memory visibility</li>\n</ol>\n<p>The first has to do with controlling when code executes (including the order in which instructions are executed) and whether it can execute concurrently, and the second to do with when the effects in memory of what has been done are visible to other threads.  Because each CPU has several levels of cache between it and main memory, threads running on different CPUs or cores can see &quot;memory&quot; differently at any given moment in time because threads are permitted to obtain and work on private copies of main memory.</p>\n<p>Using <code>synchronized</code> prevents any other thread from obtaining the monitor (or lock) <em><strong>for the same object</strong></em>, thereby preventing all code blocks protected by synchronization <em><strong>on the same object</strong></em> from executing concurrently.  Synchronization <em>also</em> creates a &quot;happens-before&quot; memory barrier, causing a memory visibility constraint such that anything done up to the point some thread releases a lock <em>appears</em> to another thread subsequently acquiring <em><strong>the same lock</strong></em> to have happened before it acquired the lock. In practical terms, on current hardware, this typically causes flushing of the CPU caches when a monitor is acquired and writes to main memory when it is released, both of which are (relatively) expensive.</p>\n<p>Using <code>volatile</code>, on the other hand, forces all accesses (read or write) to the volatile variable to occur to main memory, effectively keeping the volatile variable out of CPU caches. This can be useful for some actions where it is simply required that visibility of the variable be correct and order of accesses is not important. Using <code>volatile</code> also changes treatment of <code>long</code> and <code>double</code> to require accesses to them to be atomic; on some (older) hardware this might require locks, though not on modern 64 bit hardware. Under the new (JSR-133) memory model for Java 5+, the semantics of volatile have been strengthened to be almost as strong as synchronized with respect to memory visibility and instruction ordering (see <a href=\"http://www.cs.umd.edu/users/pugh/java/memoryModel/jsr-133-faq.html#volatile\" rel=\"noreferrer\">http://www.cs.umd.edu/users/pugh/java/memoryModel/jsr-133-faq.html#volatile</a>).  For the purposes of visibility, each access to a volatile field acts like half a synchronization.</p>\n<blockquote>\n<p>Under the new memory model, it is still true that volatile variables cannot be reordered with each other. The difference is that it is now no longer so easy to reorder normal field accesses around them. Writing to a volatile field has the same memory effect as a monitor release, and reading from a volatile field has the same memory effect as a monitor acquire. In effect, because the new memory model places stricter constraints on reordering of volatile field accesses with other field accesses, volatile or not, anything that was visible to thread <code>A</code> when it writes to volatile field <code>f</code> becomes visible to thread <code>B</code> when it reads <code>f</code>.</p>\n<p>-- <a href=\"http://www.cs.umd.edu/%7Epugh/java/memoryModel/jsr-133-faq.html\" rel=\"noreferrer\">JSR 133 (Java Memory Model) FAQ</a></p>\n</blockquote>\n<p>So, now both forms of memory barrier (under the current JMM) cause an instruction re-ordering barrier which prevents the compiler or run-time from re-ordering instructions across the barrier. In the old JMM, volatile did not prevent re-ordering. This can be important, because apart from memory barriers the only limitation imposed is that,  <em>for any particular thread</em>, the net effect of the code is the same as it would be if the instructions were executed in precisely the order in which they appear in the source.</p>\n<p>One use of volatile is for a shared but immutable object is recreated on the fly, with many other threads taking a reference to the object at a particular point in their execution cycle.  One needs the other threads to begin using the recreated object once it is published, but does not need the additional overhead of full synchronization and it's attendant contention and cache flushing.</p>\n<pre><code>// Declaration\npublic class SharedLocation {\n    static public volatile SomeObject someObject=new SomeObject(); // default object\n    }\n\n// Publishing code\nSharedLocation.someObject=new SomeObject(...); // new object is published\n\n// Using code\n// Note: do not simply use SharedLocation.someObject.xxx(), since although\n//       someObject will be internally consistent for xxx(), a subsequent \n//       call to yyy() might be inconsistent with xxx() if the object was \n//       replaced in between calls.\nprivate String getError() {\n    SomeObject myCopy=SharedLocation.someObject; // gets current copy\n    ...\n    int cod=myCopy.getErrorCode();\n    String txt=myCopy.getErrorText();\n    return (cod+&quot; - &quot;+txt);\n    }\n// And so on, with myCopy always in a consistent state within and across calls\n// Eventually we will return to the code that gets the current SomeObject.\n</code></pre>\n<p>Speaking to your read-update-write question, specifically.  Consider the following unsafe code:</p>\n<pre><code>public void updateCounter() {\n    if(counter==1000) { counter=0; }\n    else              { counter++; }\n    }\n</code></pre>\n<p>Now, with the updateCounter() method unsynchronized, two threads may enter it at the same time.  Among the many permutations of what could happen, one is that thread-1 does the test for counter==1000 and finds it true and is then suspended. Then thread-2 does the same test and also sees it true and is suspended. Then thread-1 resumes and sets counter to 0. Then thread-2 resumes and again sets counter to 0 because it missed the update from thread-1.  This can also happen even if thread switching does not occur as I have described, but simply because two different cached copies of counter were present in two different CPU cores and the threads each ran on a separate core. For that matter, one thread could have counter at one value and the other could have counter at some entirely different value just because of caching.</p>\n<p>What's important in this example is that the variable <em>counter</em> was read from main memory into cache, updated in cache and only written back to main memory at some indeterminate point later when a memory barrier occurred or when the cache memory was needed for something else. Making the counter <code>volatile</code> is insufficient for thread-safety of this code, because the test for the maximum and the assignments are discrete operations, including the increment which is a set of non-atomic <code>read+increment+write</code> machine instructions, something like:</p>\n<pre><code>MOV EAX,counter\nINC EAX\nMOV counter,EAX\n</code></pre>\n<p>Volatile variables are useful only when <em><strong>all</strong></em> operations performed on them are &quot;atomic&quot;, such as my example where a reference to a fully formed object is only read or written (and, indeed, typically it's only written from a single point). Another example would be a volatile array reference backing a copy-on-write list, provided the array was only read by first taking a local copy of the reference to it.</p>\n"},{"tags":[],"owner":{"account_id":184855,"reputation":10523,"user_id":421162,"display_name":"Kerem Baydoğan"},"down_vote_count":11,"up_vote_count":125,"is_accepted":false,"score":114,"last_activity_date":1470476829,"creation_date":1282204255,"answer_id":3519746,"question_id":3519664,"body_markdown":"&gt; **volatile** is a **field modifier**, while **synchronized** modifies **code blocks** and **methods**. So we can specify three variations of a simple accessor using those two keywords:\r\n&gt;\r\n&gt;\r\n&gt;         int i1;\r\n&gt;         int geti1() {return i1;}\r\n&gt;\r\n&gt;         volatile int i2;\r\n&gt;         int geti2() {return i2;}\r\n&gt;\r\n&gt;         int i3;\r\n&gt;         synchronized int geti3() {return i3;}\r\n&gt;\r\n&gt; `geti1()` accesses the value currently stored in `i1` in the current thread.\r\nThreads can have local copies of variables, and the data does not have to be the same as the data held in other threads.In particular, another thread may have updated `i1` in it&#39;s thread, but the value in the current thread could be different from that updated value. In fact Java has the idea of a &quot;main&quot; memory, and this is the memory that holds the current &quot;correct&quot; value for variables. Threads can have their own copy of data for variables, and the thread copy can be different from the &quot;main&quot; memory. So in fact, it is possible for the &quot;main&quot; memory to have a value of **1** for `i1`, for thread1 to have a value of **2** for `i1` and for **thread2** to have a value of **3** for `i1` if **thread1** and **thread2** have both updated i1 but those updated value has not yet been propagated to &quot;main&quot; memory or other threads.\r\n\r\n&gt; On the other hand, `geti2()` effectively accesses the value of `i2` from &quot;main&quot; memory. A volatile variable is not allowed to have a local copy of a variable that is different from the value currently held in &quot;main&quot; memory. Effectively, a variable declared volatile must have it&#39;s data synchronized across all threads, so that whenever you access or update the variable in any thread, all other threads immediately see the same value. Generally volatile variables have a higher access and update overhead than &quot;plain&quot; variables. Generally threads are allowed to have their own copy of data is for better efficiency.\r\n\r\n&gt; There are two differences between volitile and synchronized.\r\n\r\n&gt; Firstly synchronized obtains and releases locks on monitors which can force only one thread at a time to execute a code block. That&#39;s the fairly well known aspect to synchronized. But synchronized also synchronizes memory. In fact synchronized synchronizes the whole of thread memory with &quot;main&quot; memory. So executing `geti3()` does the following:\r\n\r\n&gt;   1. The thread acquires the lock on the monitor for object this .\r\n&gt;   2. The thread memory flushes all its variables, i.e. it has all of its variables effectively read from &quot;main&quot; memory .\r\n&gt;   3. The code block is executed (in this case setting the return value to the current value of i3, which may have just been reset from &quot;main&quot; memory).\r\n&gt;   4. (Any changes to variables would normally now be written out to &quot;main&quot; memory, but for geti3() we have no changes.)\r\n&gt;   5. The thread releases the lock on the monitor for object this. \r\n\r\n&gt; So where volatile only synchronizes the value of one variable between thread memory and &quot;main&quot; memory, synchronized synchronizes the value of all variables between thread memory and &quot;main&quot; memory, and locks and releases a monitor to boot. Clearly synchronized is likely to have more overhead than volatile. \r\n\r\n\r\nhttp://javaexp.blogspot.com/2007/12/difference-between-volatile-and.html","title":"Difference between volatile and synchronized in Java","body":"<blockquote>\n  <p><strong>volatile</strong> is a <strong>field modifier</strong>, while <strong>synchronized</strong> modifies <strong>code blocks</strong> and <strong>methods</strong>. So we can specify three variations of a simple accessor using those two keywords:</p>\n\n<pre><code>    int i1;\n    int geti1() {return i1;}\n\n    volatile int i2;\n    int geti2() {return i2;}\n\n    int i3;\n    synchronized int geti3() {return i3;}\n</code></pre>\n  \n  <p><code>geti1()</code> accesses the value currently stored in <code>i1</code> in the current thread.\n  Threads can have local copies of variables, and the data does not have to be the same as the data held in other threads.In particular, another thread may have updated <code>i1</code> in it's thread, but the value in the current thread could be different from that updated value. In fact Java has the idea of a \"main\" memory, and this is the memory that holds the current \"correct\" value for variables. Threads can have their own copy of data for variables, and the thread copy can be different from the \"main\" memory. So in fact, it is possible for the \"main\" memory to have a value of <strong>1</strong> for <code>i1</code>, for thread1 to have a value of <strong>2</strong> for <code>i1</code> and for <strong>thread2</strong> to have a value of <strong>3</strong> for <code>i1</code> if <strong>thread1</strong> and <strong>thread2</strong> have both updated i1 but those updated value has not yet been propagated to \"main\" memory or other threads.</p>\n  \n  <p>On the other hand, <code>geti2()</code> effectively accesses the value of <code>i2</code> from \"main\" memory. A volatile variable is not allowed to have a local copy of a variable that is different from the value currently held in \"main\" memory. Effectively, a variable declared volatile must have it's data synchronized across all threads, so that whenever you access or update the variable in any thread, all other threads immediately see the same value. Generally volatile variables have a higher access and update overhead than \"plain\" variables. Generally threads are allowed to have their own copy of data is for better efficiency.</p>\n  \n  <p>There are two differences between volitile and synchronized.</p>\n  \n  <p>Firstly synchronized obtains and releases locks on monitors which can force only one thread at a time to execute a code block. That's the fairly well known aspect to synchronized. But synchronized also synchronizes memory. In fact synchronized synchronizes the whole of thread memory with \"main\" memory. So executing <code>geti3()</code> does the following:</p>\n  \n  <ol>\n  <li>The thread acquires the lock on the monitor for object this .</li>\n  <li>The thread memory flushes all its variables, i.e. it has all of its variables effectively read from \"main\" memory .</li>\n  <li>The code block is executed (in this case setting the return value to the current value of i3, which may have just been reset from \"main\" memory).</li>\n  <li>(Any changes to variables would normally now be written out to \"main\" memory, but for geti3() we have no changes.)</li>\n  <li>The thread releases the lock on the monitor for object this. </li>\n  </ol>\n  \n  <p>So where volatile only synchronizes the value of one variable between thread memory and \"main\" memory, synchronized synchronizes the value of all variables between thread memory and \"main\" memory, and locks and releases a monitor to boot. Clearly synchronized is likely to have more overhead than volatile. </p>\n</blockquote>\n\n<p><a href=\"http://javaexp.blogspot.com/2007/12/difference-between-volatile-and.html\" rel=\"noreferrer\">http://javaexp.blogspot.com/2007/12/difference-between-volatile-and.html</a></p>\n"},{"tags":[],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1681110174,"creation_date":1450442588,"answer_id":34355995,"question_id":3519664,"body_markdown":"[synchronized][1]\r\n\r\nis keyword used to guard a method or code block.  By making method as synchronized , you achieve two things.\r\n\r\n\r\n &gt;1. Two executions of `synchronized` methods on the same object never run\r\n &gt;2. Change in the object state is visible to other threads\r\n\r\n`volatile` is variable access modifier which forces all threads to get latest value of the variable from main memory. All threads can access volatile variable value at same time with out any locks. \r\n\r\nA good example to use volatile variable : `Date` variable.\r\n\r\nAssume that you have made Date variable `volatile`. You don&#39;t need different threads showing different time for same variable. All the threads, which access this variable always get latest data from main memory so that all threads show real (actual) Date value. \r\n\r\nLawrence Dol cleary explained your `read-write-update query`. \r\n\r\nRegarding your other queries\r\n\r\n *When is it more suitable to declare variables volatile than access them through synchronized?* \r\n\r\nYou have to use `volatile` if you think all threads should get actual value of the variable in real time like Data example covered above.\r\n\r\n*Is it a good idea to use volatile for variables that depend on input?*\r\n\r\nAnswer will be same as in first query. \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html","title":"Difference between volatile and synchronized in Java","body":"<p><a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html\" rel=\"nofollow noreferrer\">synchronized</a></p>\n<p>is keyword used to guard a method or code block.  By making method as synchronized , you achieve two things.</p>\n<blockquote>\n<ol>\n<li>Two executions of <code>synchronized</code> methods on the same object never run</li>\n<li>Change in the object state is visible to other threads</li>\n</ol>\n</blockquote>\n<p><code>volatile</code> is variable access modifier which forces all threads to get latest value of the variable from main memory. All threads can access volatile variable value at same time with out any locks.</p>\n<p>A good example to use volatile variable : <code>Date</code> variable.</p>\n<p>Assume that you have made Date variable <code>volatile</code>. You don't need different threads showing different time for same variable. All the threads, which access this variable always get latest data from main memory so that all threads show real (actual) Date value.</p>\n<p>Lawrence Dol cleary explained your <code>read-write-update query</code>.</p>\n<p>Regarding your other queries</p>\n<p><em>When is it more suitable to declare variables volatile than access them through synchronized?</em></p>\n<p>You have to use <code>volatile</code> if you think all threads should get actual value of the variable in real time like Data example covered above.</p>\n<p><em>Is it a good idea to use volatile for variables that depend on input?</em></p>\n<p>Answer will be same as in first query.</p>\n"},{"tags":[],"owner":{"account_id":8344713,"reputation":5886,"user_id":6296435,"accept_rate":71,"display_name":"Maverick Meerkat"},"down_vote_count":0,"up_vote_count":62,"is_accepted":false,"score":62,"last_activity_date":1647225154,"creation_date":1549629804,"answer_id":54592753,"question_id":3519664,"body_markdown":"There are 3 main issues with multithreading:\r\n\r\n1) Race Conditions\r\n\r\n2) Caching / stale memory\r\n\r\n3) Compiler and CPU optimisations\r\n\r\n`volatile` can solve 2 &amp; 3, but can&#39;t solve 1. `synchronized`/explicit locks can solve 1, 2 &amp; 3.\r\n\r\n**Elaboration**:\r\n----------------\r\n\r\n1) Consider this thread unsafe code:\r\n\r\n`x++;` \r\n\r\nWhile it may look like one operation, it&#39;s actually 3: reading the current value of x from memory, adding 1 to it, and saving it back to memory. If few threads try to do it at the same time, the result of the operation is undefined. If `x` originally was 1, after 2 threads operating the code it may be 2 and it may be 3, depending on which thread completed which part of the operation before control was transferred to the other thread. This is a form of **race condition**. \r\n\r\nUsing `synchronized` on a block of code makes it **atomic** - meaning it make it as if the 3 operations happen at once, and there&#39;s no way for another thread to come in the middle and interfere. So if `x` was 1, and 2 threads try to preform `x++` we **know** in the end it will be equal to 3. So it solves the race condition problem. \r\n\r\n    synchronized (this) {\r\n       x++; // no problem now\r\n    }\r\n\r\nMarking `x` as `volatile` does not make `x++;` atomic, so it doesn&#39;t solve this problem.\r\n\r\n2) In addition, threads have their own context - i.e. they can cache values from main memory. That means that a few threads can have copies of a variable, but they operate on their working copy without sharing the new state of the variable among other threads. \r\n\r\nConsider that on one thread, `x = 10;`. And somewhat later, in another thread, `x = 20;`. The change in value of `x` might not appear in the first thread, because the other thread has saved the new value to its working memory, but hasn&#39;t copied it to the main memory. Or that it did copy it to the main memory, but the first thread hasn&#39;t updated its working copy. So if now the first thread checks `if (x == 20)` the answer will be `false`. \r\n\r\nMarking a variable as `volatile` basically tells all threads to do read and write operations on main memory only. `synchronized` tells every thread to go update their value from main memory when they enter the block, and flush the result back to main memory when they exit the block. \r\n\r\nNote that unlike data races, stale memory is not so easy to (re)produce, as flushes to main memory occur anyway. \r\n\r\n3) The complier and CPU can (without any form of synchronization between threads) treat all code as single threaded. Meaning it can look at some code, that is very meaningful in a multithreading aspect, and treat it as if it’s single threaded, where it’s not so meaningful. So it can look at a code and decide, in sake of optimisation, to reorder it, or even remove parts of it completely, if it doesn’t know that this code is designed to work on multiple threads.  \r\n\r\nConsider the following code:\r\n\r\n    boolean b = false;\r\n    int x = 10;\r\n    \r\n    void threadA() {\r\n    \tx = 20;\r\n    \tb = true;\r\n    }\r\n    \r\n    void threadB() {\r\n    \tif (b) {\r\n    \t\tSystem.out.println(x);\r\n    \t}\r\n    }\r\n\r\n \r\nYou would think that threadB could only print 20 (or not print anything at all if threadB if-check is executed before setting `b` to true), as `b` is set to true only after `x` is set to 20, but the compiler/CPU might decide to reorder threadA, in that case threadB could also print 10. Marking `b` as `volatile` ensures that it won’t be reordered (or discarded in certain cases). Which mean threadB could only print 20 (or nothing at all). Marking the methods as syncrhonized will achieve the same result. Also marking a variable as `volatile` only ensures that it won’t get reordered, but everything before/after it can still be reordered, so synchronization can be more suited in some scenarios.\r\n\r\nNote that before Java 5 New Memory Model, volatile didn’t solve this issue. \r\n\r\n","title":"Difference between volatile and synchronized in Java","body":"<p>There are 3 main issues with multithreading:</p>\n<ol>\n<li><p>Race Conditions</p>\n</li>\n<li><p>Caching / stale memory</p>\n</li>\n<li><p>Compiler and CPU optimisations</p>\n</li>\n</ol>\n<p><code>volatile</code> can solve 2 &amp; 3, but can't solve 1. <code>synchronized</code>/explicit locks can solve 1, 2 &amp; 3.</p>\n<h2><strong>Elaboration</strong>:</h2>\n<ol>\n<li>Consider this thread unsafe code:</li>\n</ol>\n<p><code>x++;</code></p>\n<p>While it may look like one operation, it's actually 3: reading the current value of x from memory, adding 1 to it, and saving it back to memory. If few threads try to do it at the same time, the result of the operation is undefined. If <code>x</code> originally was 1, after 2 threads operating the code it may be 2 and it may be 3, depending on which thread completed which part of the operation before control was transferred to the other thread. This is a form of <strong>race condition</strong>.</p>\n<p>Using <code>synchronized</code> on a block of code makes it <strong>atomic</strong> - meaning it make it as if the 3 operations happen at once, and there's no way for another thread to come in the middle and interfere. So if <code>x</code> was 1, and 2 threads try to preform <code>x++</code> we <strong>know</strong> in the end it will be equal to 3. So it solves the race condition problem.</p>\n<pre><code>synchronized (this) {\n   x++; // no problem now\n}\n</code></pre>\n<p>Marking <code>x</code> as <code>volatile</code> does not make <code>x++;</code> atomic, so it doesn't solve this problem.</p>\n<ol start=\"2\">\n<li>In addition, threads have their own context - i.e. they can cache values from main memory. That means that a few threads can have copies of a variable, but they operate on their working copy without sharing the new state of the variable among other threads.</li>\n</ol>\n<p>Consider that on one thread, <code>x = 10;</code>. And somewhat later, in another thread, <code>x = 20;</code>. The change in value of <code>x</code> might not appear in the first thread, because the other thread has saved the new value to its working memory, but hasn't copied it to the main memory. Or that it did copy it to the main memory, but the first thread hasn't updated its working copy. So if now the first thread checks <code>if (x == 20)</code> the answer will be <code>false</code>.</p>\n<p>Marking a variable as <code>volatile</code> basically tells all threads to do read and write operations on main memory only. <code>synchronized</code> tells every thread to go update their value from main memory when they enter the block, and flush the result back to main memory when they exit the block.</p>\n<p>Note that unlike data races, stale memory is not so easy to (re)produce, as flushes to main memory occur anyway.</p>\n<ol start=\"3\">\n<li>The complier and CPU can (without any form of synchronization between threads) treat all code as single threaded. Meaning it can look at some code, that is very meaningful in a multithreading aspect, and treat it as if it’s single threaded, where it’s not so meaningful. So it can look at a code and decide, in sake of optimisation, to reorder it, or even remove parts of it completely, if it doesn’t know that this code is designed to work on multiple threads.</li>\n</ol>\n<p>Consider the following code:</p>\n<pre><code>boolean b = false;\nint x = 10;\n\nvoid threadA() {\n    x = 20;\n    b = true;\n}\n\nvoid threadB() {\n    if (b) {\n        System.out.println(x);\n    }\n}\n</code></pre>\n<p>You would think that threadB could only print 20 (or not print anything at all if threadB if-check is executed before setting <code>b</code> to true), as <code>b</code> is set to true only after <code>x</code> is set to 20, but the compiler/CPU might decide to reorder threadA, in that case threadB could also print 10. Marking <code>b</code> as <code>volatile</code> ensures that it won’t be reordered (or discarded in certain cases). Which mean threadB could only print 20 (or nothing at all). Marking the methods as syncrhonized will achieve the same result. Also marking a variable as <code>volatile</code> only ensures that it won’t get reordered, but everything before/after it can still be reordered, so synchronization can be more suited in some scenarios.</p>\n<p>Note that before Java 5 New Memory Model, volatile didn’t solve this issue.</p>\n"}],"owner":{"account_id":141278,"reputation":12438,"user_id":348183,"accept_rate":97,"display_name":"Albus Dumbledore"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":134440,"favorite_count":0,"down_vote_count":1,"up_vote_count":307,"accepted_answer_id":3519736,"answer_count":4,"score":306,"last_activity_date":1681110174,"creation_date":1282203284,"question_id":3519664,"body_markdown":"I am wondering at the difference between declaring a variable as `volatile` and always accessing the variable in a `synchronized(this)` block in Java?\r\n\r\nAccording to this article http://www.javamex.com/tutorials/synchronization_volatile.shtml there is a lot to be said and there are many differences but also some similarities.\r\n\r\nI am particularly interested in this piece of info:\r\n\r\n&gt; ...\r\n&gt;\r\n- access to a volatile variable never has the potential to block: we&#39;re only ever doing a simple read or write, so unlike a synchronized block we will never hold on to any lock;\r\n- because accessing a volatile variable never holds a lock, it is not suitable for cases where we want to **read-update-write** as an atomic operation (unless we&#39;re prepared to &quot;miss an update&quot;);\r\n\r\nWhat do they mean by **read-update-write**? Isn&#39;t a write also an update or do they simply mean that the **update** is a write that depends on the read?\r\n\r\nMost of all, when is it more suitable to declare variables `volatile` rather than access them through a `synchronized` block? Is it a good idea to use `volatile` for variables that depend on input? For instance, there is a variable called `render` that is read through the rendering loop and set by a keypress event?","title":"Difference between volatile and synchronized in Java","body":"<p>I am wondering at the difference between declaring a variable as <code>volatile</code> and always accessing the variable in a <code>synchronized(this)</code> block in Java?</p>\n\n<p>According to this article <a href=\"http://www.javamex.com/tutorials/synchronization_volatile.shtml\" rel=\"noreferrer\">http://www.javamex.com/tutorials/synchronization_volatile.shtml</a> there is a lot to be said and there are many differences but also some similarities.</p>\n\n<p>I am particularly interested in this piece of info:</p>\n\n<blockquote>\n  <p>...</p>\n  \n  <ul>\n  <li>access to a volatile variable never has the potential to block: we're only ever doing a simple read or write, so unlike a synchronized block we will never hold on to any lock;</li>\n  <li>because accessing a volatile variable never holds a lock, it is not suitable for cases where we want to <strong>read-update-write</strong> as an atomic operation (unless we're prepared to \"miss an update\");</li>\n  </ul>\n</blockquote>\n\n<p>What do they mean by <strong>read-update-write</strong>? Isn't a write also an update or do they simply mean that the <strong>update</strong> is a write that depends on the read?</p>\n\n<p>Most of all, when is it more suitable to declare variables <code>volatile</code> rather than access them through a <code>synchronized</code> block? Is it a good idea to use <code>volatile</code> for variables that depend on input? For instance, there is a variable called <code>render</code> that is read through the rendering loop and set by a keypress event?</p>\n"},{"tags":["java","android","android-permissions"],"comments":[{"owner":{"account_id":10396927,"reputation":68267,"user_id":7666442,"display_name":"AskNilesh"},"score":1,"creation_date":1537508017,"post_id":52437112,"comment_id":91817330,"body_markdown":"https://developer.android.com/reference/android/content/Context.html#getExternalFilesDir(java.lang.String)","body":"<a href=\"https://developer.android.com/reference/android/content/Context.html#getExternalFilesDir(java.lang.String)\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/content/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":6657226,"reputation":16109,"user_id":5137352,"accept_rate":89,"display_name":"Nabin Bhandari"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1537508150,"creation_date":1537507809,"answer_id":52437155,"question_id":52437112,"body_markdown":"Although it returns path to external storage, you don&#39;t need permission to access directory returned by `getExternalFilesDir()`.\r\n\r\nIt is same as `getFilesDir()` but it is public to other apps as well.\r\n\r\nAlso note that if you write anything in that directory and clear app data or uninstall the app, everything will be deleted.\r\n\r\nFor more information, read the documentation at https://developer.android.com/reference/android/content/Context.html#getExternalFilesDir(java.lang.String)","title":"getExternalFilesDir permissions","body":"<p>Although it returns path to external storage, you don't need permission to access directory returned by <code>getExternalFilesDir()</code>.</p>\n\n<p>It is same as <code>getFilesDir()</code> but it is public to other apps as well.</p>\n\n<p>Also note that if you write anything in that directory and clear app data or uninstall the app, everything will be deleted.</p>\n\n<p>For more information, read the documentation at <a href=\"https://developer.android.com/reference/android/content/Context.html#getExternalFilesDir(java.lang.String)\" rel=\"noreferrer\">https://developer.android.com/reference/android/content/Context.html#getExternalFilesDir(java.lang.String)</a></p>\n"},{"tags":[],"owner":{"account_id":14279418,"reputation":215,"user_id":10314536,"display_name":"Archu Mohan"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1537507838,"creation_date":1537507838,"answer_id":52437162,"question_id":52437112,"body_markdown":"    String[] permissions = {Manifest.permission.WRITE_EXTERNAL_STORAGE};\r\n    requestPermissions(permissions, WRITE_REQUEST_CODE);\r\n\r\n use this code\r\n\r\n  \r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, String permissions[], int[] \r\n    grantResults) {\r\n    switch (requestCode) {\r\n       case WRITE_REQUEST_CODE:\r\n         if(grantResults[0] == PackageManager.PERMISSION_GRANTED){\r\n           //Granted.\r\n\r\n\r\n         }\r\n       else{\r\n           //Denied.\r\n         }\r\n        break;\r\n    }\r\n    }","title":"getExternalFilesDir permissions","body":"<pre><code>String[] permissions = {Manifest.permission.WRITE_EXTERNAL_STORAGE};\nrequestPermissions(permissions, WRITE_REQUEST_CODE);\n</code></pre>\n\n<p>use this code</p>\n\n<pre><code>@Override\npublic void onRequestPermissionsResult(int requestCode, String permissions[], int[] \ngrantResults) {\nswitch (requestCode) {\n   case WRITE_REQUEST_CODE:\n     if(grantResults[0] == PackageManager.PERMISSION_GRANTED){\n       //Granted.\n\n\n     }\n   else{\n       //Denied.\n     }\n    break;\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7359103,"reputation":449,"user_id":5602887,"display_name":"Xt Z"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681110159,"creation_date":1681110159,"answer_id":75974959,"question_id":52437112,"body_markdown":"not need ask runtime permission, but if your app&#39;s minSdkVersion less then 19 and you need write to getExternalFilesDir() path , you need declare WRITE_EXTERNAL_STORAGE in your AndroidManifest.xml\r\n\r\ncheck this :https://developer.android.com/reference/android/Manifest.permission#WRITE_EXTERNAL_STORAGE","title":"getExternalFilesDir permissions","body":"<p>not need ask runtime permission, but if your app's minSdkVersion less then 19 and you need write to getExternalFilesDir() path , you need declare WRITE_EXTERNAL_STORAGE in your AndroidManifest.xml</p>\n<p>check this :<a href=\"https://developer.android.com/reference/android/Manifest.permission#WRITE_EXTERNAL_STORAGE\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/Manifest.permission#WRITE_EXTERNAL_STORAGE</a></p>\n"}],"owner":{"account_id":10875141,"reputation":2530,"user_id":8199772,"accept_rate":55,"display_name":"ClassA"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3616,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":52437155,"answer_count":3,"score":8,"last_activity_date":1681110159,"creation_date":1537507534,"question_id":52437112,"body_markdown":"My application is live on Play Store, I noticed that I was not asking permissions when calling:\r\n\r\n    File savedImagesDirectory = getBaseContext.getExternalFilesDir(&quot;SavedImages&quot;);\r\n    if(savedImagesDirectory != null) {\r\n        if (!savedImagesDirectory.exists()) {\r\n            if (savedImagesDirectory.mkdir()) ; //directory is created;\r\n        }\r\n    }\r\n\r\nStrange thing is, I&#39;m not getting any crashes when calling this without runtime permissions. I tested on my device running Nougat and the files are created and I experienced no crashes.\r\n\r\nI only have permissions in my Manifest, but I don&#39;t ask runtime permissions.\r\n\r\nI&#39;ve seen A LOT of answers on SO that say that runtime permissions should be asked when creating a folder/file in external file directory.\r\n\r\n\r\n----------\r\n\r\n\r\n**My question:**\r\n\r\nShould I ask runtime permissions when calling the above? If yes, why am I not experiencing any crashes? \r\n\r\nIt would also be helpful if someone can provide a link where I can read up about this.","title":"getExternalFilesDir permissions","body":"<p>My application is live on Play Store, I noticed that I was not asking permissions when calling:</p>\n\n<pre><code>File savedImagesDirectory = getBaseContext.getExternalFilesDir(\"SavedImages\");\nif(savedImagesDirectory != null) {\n    if (!savedImagesDirectory.exists()) {\n        if (savedImagesDirectory.mkdir()) ; //directory is created;\n    }\n}\n</code></pre>\n\n<p>Strange thing is, I'm not getting any crashes when calling this without runtime permissions. I tested on my device running Nougat and the files are created and I experienced no crashes.</p>\n\n<p>I only have permissions in my Manifest, but I don't ask runtime permissions.</p>\n\n<p>I've seen A LOT of answers on SO that say that runtime permissions should be asked when creating a folder/file in external file directory.</p>\n\n<hr>\n\n<p><strong>My question:</strong></p>\n\n<p>Should I ask runtime permissions when calling the above? If yes, why am I not experiencing any crashes? </p>\n\n<p>It would also be helpful if someone can provide a link where I can read up about this.</p>\n"},{"tags":["java","hadoop","mapreduce"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1681109016,"post_id":75974496,"comment_id":133999527,"body_markdown":"You seem to be missing your Driver class and sample of your input data. Refer [mcve]","body":"You seem to be missing your Driver class and sample of your input data. Refer <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"},{"owner":{"account_id":8324450,"reputation":17075,"user_id":6933993,"accept_rate":97,"display_name":"thebluephantom"},"score":0,"creation_date":1681123659,"post_id":75974496,"comment_id":134001738,"body_markdown":"May be move to Spark and make life easier.","body":"May be move to Spark and make life easier."}],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681110025,"creation_date":1681109207,"answer_id":75974861,"question_id":75974496,"body_markdown":"Reducers are distributed, so cannot be used to store state between each instance, such as a Map. More particularly, notice that `key` parameter is one instance - you get one Reducer class instance per unique key; not all keys are passed through that one instance function. \r\n\r\nYou can use Hadoop `DistributedCache` or `Counter` for maintaining some state across tasks, but you should already have all values from the same ID in a single `Iterable&lt;Text&gt;` object. E.g. all reviews (with star count) by-id. Therefore, filter by `value.getStars() == 5`. (Look into defining a Writable `Movie` class, rather than using `Text`), then define a simple counter, e.g.\r\n```\r\nint fiveStarCount = 0;\r\nfor (Text t : values) {\r\n  // todo: get stars\r\n  fiveStarCount += parseStars(t) == 5 ? 1 : 0;\r\n}\r\nif (fiveStarCount &gt;= 500) {\r\n  context.write(movieId, NullWritable.get());  // assuming you only care about the movie id\r\n}\r\n```\r\n\r\nThen, there is nothing to sort here... You need a second MapReduce job to read that output, then you write `(null,id)` tuples, then the reducer can sort the value by dumping all data into something like `TreeSet` object and writing back to the context. \r\n\r\n---\r\n\r\nIf you really need to filter, join, and sort, I&#39;d recommend Hive or Spark over pure Mapreduce","title":"Why is My MapReduce job Not Counting Correctly?","body":"<p>Reducers are distributed, so cannot be used to store state between each instance, such as a Map. More particularly, notice that <code>key</code> parameter is one instance - you get one Reducer class instance per unique key; not all keys are passed through that one instance function.</p>\n<p>You can use Hadoop <code>DistributedCache</code> or <code>Counter</code> for maintaining some state across tasks, but you should already have all values from the same ID in a single <code>Iterable&lt;Text&gt;</code> object. E.g. all reviews (with star count) by-id. Therefore, filter by <code>value.getStars() == 5</code>. (Look into defining a Writable <code>Movie</code> class, rather than using <code>Text</code>), then define a simple counter, e.g.</p>\n<pre><code>int fiveStarCount = 0;\nfor (Text t : values) {\n  // todo: get stars\n  fiveStarCount += parseStars(t) == 5 ? 1 : 0;\n}\nif (fiveStarCount &gt;= 500) {\n  context.write(movieId, NullWritable.get());  // assuming you only care about the movie id\n}\n</code></pre>\n<p>Then, there is nothing to sort here... You need a second MapReduce job to read that output, then you write <code>(null,id)</code> tuples, then the reducer can sort the value by dumping all data into something like <code>TreeSet</code> object and writing back to the context.</p>\n<hr />\n<p>If you really need to filter, join, and sort, I'd recommend Hive or Spark over pure Mapreduce</p>\n"}],"owner":{"account_id":21130232,"reputation":27,"user_id":15534758,"display_name":"wirly"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681110025,"creation_date":1681104651,"question_id":75974496,"body_markdown":"I am currently writing a MapReduce task to parse through a dataset and list movies that have 500+ 5-star ratings.\r\n\r\nTo do this, I already have a mapreduce jobs that filter action movies from a list of movies, and one that filters 5-star reviews for movies.  The inputs to this new job, and to each mapper, is a list of movieIDS.\r\n\r\nThe input to the first mapper is a list of MovieIDS that are applicable to be counted FOR.  And the input to the second mapper is a movieID that has gotten a single 5-star review.\r\n\r\nMy task is then to join these in the reducer, by counting the number of 5-star reviews a particular movie (key) has gotten, seeing if it has gotten a total of 500 reviews, and then seeing if that particular movie has been filtered in the list of applicable movies.\r\n\r\nMy problem, however, is that the HashMap data structure I&#39;m using to count the number of 5-star reviews for a particular movie ID is only ever initialized to one.\r\n\r\nHere is the code:\r\n\r\n    public class JoinRatings extends Configured implements Tool {\r\n\tpublic static class TokenizerMapperA extends Mapper&lt;Object, Text, Text, Text&gt; {\r\n\t\tprivate Text node1;\r\n\t\tprivate Text node2 = new Text(&quot;1&quot;);\r\n\r\n\t\t@Override\r\n\t\tprotected void map(Object key, Text value, Context context) throws IOException, InterruptedException {\r\n\t\t\t//Write movie ID and int writeable 1\r\n\t\t\tnode1 = new Text(value.toString());\r\n\t\t\tcontext.write(node1, node2);\r\n\t\t}\r\n\t}\r\n\tpublic static class TokenizerMapperB extends Mapper&lt;Object, Text, Text, Text&gt; {\r\n\t\tprivate Text node1;\r\n\t\tprivate Text node2 = new Text(&quot;2&quot;);\r\n\r\n\t\t@Override\r\n\t\tprotected void map(Object key, Text value, Context context) throws IOException, InterruptedException {\r\n\t\t\tnode1 = new Text(value.toString());\r\n\t\t\tcontext.write(node1, node2);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static class CountReducer extends Reducer&lt;Text, Text, Text, NullWritable&gt;{\r\n\t\tprivate Text node1;\r\n\t\tprivate Set&lt;String&gt; distinctNodes;\r\n\t\tMap&lt;String, Integer&gt; map;\r\n\t\tprivate final static IntWritable one = new IntWritable(1);\r\n\t\tprivate final static IntWritable two = new IntWritable(2);\r\n\r\n\t\t@Override\r\n\t\tprotected void setup(Context context) {\r\n\t\t\tdistinctNodes = new HashSet&lt;String&gt;(); \r\n\t\t\tmap = new HashMap&lt;String,Integer&gt;();\r\n\t\t }\r\n\r\n\t\t @Override\r\n\t\t protected void reduce(Text key, Iterable&lt;Text&gt; values, Context context) {\r\n\t\t\t//Add all action movie IDs to unique set distinctNodes\r\n\t\t\tString keyString = key.toString().strip();\r\n\t\t\tString valueString = &quot;NULL&quot;;\r\n\t\t\tint counter = 0\r\n\r\n\t\t\t\tfor (Text text : values) {\r\n\t\t\t\t\tString value = text.toString().strip();\r\n\r\n\t\t\t\t\t\t// try {\r\n\t\t\t\t\t\t// \tText testText = new Text(value);\r\n\t\t\t\t\t\t// \tcontext.write(testText, NullWritable.get());\r\n\t\t\t\t\t\t// } catch (IOException e) {\r\n\t\t\t\t\t\t// \te.printStackTrace();\r\n\t\t\t\t\t\t// } catch (InterruptedException e) {\r\n\t\t\t\t\t\t// \te.printStackTrace();\r\n\t\t\t\t\t\t// }\r\n\r\n\t\t\t\t\tif (value.equals(&quot;1&quot;)) {\r\n\t\t\t\t\t\tdistinctNodes.add(keyString);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (value.equals(&quot;2&quot;)) {\r\n\t\t\t\t\t\tif (map.containsKey(keyString)) {\r\n\t\t\t\t\t\t\tmap.put(keyString, map.get(keyString) + 1);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmap.put(keyString, 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\r\n\t\t }\r\n\r\n\t\t @Override\r\n\t\t protected void cleanup(Context context) throws IOException, InterruptedException {\r\n\r\n\t\t\tString numOfDistinctNodes = Integer.toString(distinctNodes.size());\r\n\t\t\tcontext.write(new Text(numOfDistinctNodes), NullWritable.get());\r\n\t\t\tString sizeOfMap = Integer.toString(map.size());\r\n\t\t\tcontext.write(new Text(sizeOfMap), NullWritable.get());\r\n\r\n\r\n\t\t\tfor(Map.Entry&lt;String, Integer&gt; mapElement : map.entrySet()) {\r\n\t\t\t\t\tString test = Integer.toString(mapElement.getValue());\r\n\t\t\t\t\tcontext.write(new Text(test), NullWritable.get());\r\n\t\t\t}\r\n\r\n\t\t\tfor (String s: distinct nodes) {\r\n\t\t\t\tif (map.containsKey(s)) {\r\n\t\t\t\t\tif (map.get(s) &gt;= 500) {\r\n\t\t\t\t\t\tnode1 = new Text(s);\r\n\t\t\t\t\t\tcontext.write(node1, NullWritable.get());\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//Order movieID by ascending\r\n\r\n\t\t\t//Write all movie IDs with 500+ 5-star reviews (to context)\r\n\t\t }\r\n\t}\r\n\r\nAs you can see I am using a Text value from the mappers to distinguish between which data-structure the reducer should be adding to.  This seems to work well for Text &quot;1&quot;, which is adding applicable movies the 5 star ratings can count towards to a HashSet, but my HashMap is not counting the number of 5 star reviews for a particular key/MovieID, only ever initializing values to 1.\r\n\r\nMy inclination is that I&#39;m using MapReduce incorrectly, and that the reducer is getting only a single input of {MovieID, 2}, instead of {MovieID, 2, 2, 2, 2}.  \r\n","title":"Why is My MapReduce job Not Counting Correctly?","body":"<p>I am currently writing a MapReduce task to parse through a dataset and list movies that have 500+ 5-star ratings.</p>\n<p>To do this, I already have a mapreduce jobs that filter action movies from a list of movies, and one that filters 5-star reviews for movies.  The inputs to this new job, and to each mapper, is a list of movieIDS.</p>\n<p>The input to the first mapper is a list of MovieIDS that are applicable to be counted FOR.  And the input to the second mapper is a movieID that has gotten a single 5-star review.</p>\n<p>My task is then to join these in the reducer, by counting the number of 5-star reviews a particular movie (key) has gotten, seeing if it has gotten a total of 500 reviews, and then seeing if that particular movie has been filtered in the list of applicable movies.</p>\n<p>My problem, however, is that the HashMap data structure I'm using to count the number of 5-star reviews for a particular movie ID is only ever initialized to one.</p>\n<p>Here is the code:</p>\n<pre><code>public class JoinRatings extends Configured implements Tool {\npublic static class TokenizerMapperA extends Mapper&lt;Object, Text, Text, Text&gt; {\n    private Text node1;\n    private Text node2 = new Text(&quot;1&quot;);\n\n    @Override\n    protected void map(Object key, Text value, Context context) throws IOException, InterruptedException {\n        //Write movie ID and int writeable 1\n        node1 = new Text(value.toString());\n        context.write(node1, node2);\n    }\n}\npublic static class TokenizerMapperB extends Mapper&lt;Object, Text, Text, Text&gt; {\n    private Text node1;\n    private Text node2 = new Text(&quot;2&quot;);\n\n    @Override\n    protected void map(Object key, Text value, Context context) throws IOException, InterruptedException {\n        node1 = new Text(value.toString());\n        context.write(node1, node2);\n    }\n}\n\npublic static class CountReducer extends Reducer&lt;Text, Text, Text, NullWritable&gt;{\n    private Text node1;\n    private Set&lt;String&gt; distinctNodes;\n    Map&lt;String, Integer&gt; map;\n    private final static IntWritable one = new IntWritable(1);\n    private final static IntWritable two = new IntWritable(2);\n\n    @Override\n    protected void setup(Context context) {\n        distinctNodes = new HashSet&lt;String&gt;(); \n        map = new HashMap&lt;String,Integer&gt;();\n     }\n\n     @Override\n     protected void reduce(Text key, Iterable&lt;Text&gt; values, Context context) {\n        //Add all action movie IDs to unique set distinctNodes\n        String keyString = key.toString().strip();\n        String valueString = &quot;NULL&quot;;\n        int counter = 0\n\n            for (Text text : values) {\n                String value = text.toString().strip();\n\n                    // try {\n                    //  Text testText = new Text(value);\n                    //  context.write(testText, NullWritable.get());\n                    // } catch (IOException e) {\n                    //  e.printStackTrace();\n                    // } catch (InterruptedException e) {\n                    //  e.printStackTrace();\n                    // }\n\n                if (value.equals(&quot;1&quot;)) {\n                    distinctNodes.add(keyString);\n                }\n                else if (value.equals(&quot;2&quot;)) {\n                    if (map.containsKey(keyString)) {\n                        map.put(keyString, map.get(keyString) + 1);\n                    } else {\n                        map.put(keyString, 1);\n                    }\n                }\n            }\n\n\n    \n     }\n\n     @Override\n     protected void cleanup(Context context) throws IOException, InterruptedException {\n\n        String numOfDistinctNodes = Integer.toString(distinctNodes.size());\n        context.write(new Text(numOfDistinctNodes), NullWritable.get());\n        String sizeOfMap = Integer.toString(map.size());\n        context.write(new Text(sizeOfMap), NullWritable.get());\n\n\n        for(Map.Entry&lt;String, Integer&gt; mapElement : map.entrySet()) {\n                String test = Integer.toString(mapElement.getValue());\n                context.write(new Text(test), NullWritable.get());\n        }\n\n        for (String s: distinct nodes) {\n            if (map.containsKey(s)) {\n                if (map.get(s) &gt;= 500) {\n                    node1 = new Text(s);\n                    context.write(node1, NullWritable.get());\n                }\n            }\n        }\n        \n        //Order movieID by ascending\n\n        //Write all movie IDs with 500+ 5-star reviews (to context)\n     }\n}\n</code></pre>\n<p>As you can see I am using a Text value from the mappers to distinguish between which data-structure the reducer should be adding to.  This seems to work well for Text &quot;1&quot;, which is adding applicable movies the 5 star ratings can count towards to a HashSet, but my HashMap is not counting the number of 5 star reviews for a particular key/MovieID, only ever initializing values to 1.</p>\n<p>My inclination is that I'm using MapReduce incorrectly, and that the reducer is getting only a single input of {MovieID, 2}, instead of {MovieID, 2, 2, 2, 2}.</p>\n"},{"tags":["java","spring-boot","oauth-2.0"],"owner":{"account_id":25757934,"reputation":23,"user_id":19509326,"display_name":"AndyTingWeiYang"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681109639,"creation_date":1681109170,"question_id":75974857,"body_markdown":"Couldn&#39;t get the tokenValue from Google login\r\n\r\nI&#39;m trying to use oAuth login through Google and successfully get the OAuth2AuthenticationToken from Google. Please see below picture.\r\n\r\nI would like to save the token value into Redis to keep the login status in my website. However, I couldn&#39;t find the method to retrieve the tokenValue in the Principal &gt; idToken. Is there any method to get it?\r\n\r\n\r\n[![OAuth2AuthenticationToken from Google](https://i.stack.imgur.com/yt1BL.png)](https://i.stack.imgur.com/yt1BL.png)\r\n\r\n\r\nController\r\n\r\n`@RestController\r\n@RequestMapping(&quot;/&quot;)\r\npublic class LoginController {\r\n\r\n    @GetMapping\r\n    public Map&lt;String, Object&gt; login(OAuth2AuthenticationToken token){\r\n        return token.getPrincipal().getAttributes();\r\n    }\r\n\r\n}`","title":"How to get oAuth2 tokenValue from Google login","body":"<p>Couldn't get the tokenValue from Google login</p>\n<p>I'm trying to use oAuth login through Google and successfully get the OAuth2AuthenticationToken from Google. Please see below picture.</p>\n<p>I would like to save the token value into Redis to keep the login status in my website. However, I couldn't find the method to retrieve the tokenValue in the Principal &gt; idToken. Is there any method to get it?</p>\n<p><a href=\"https://i.stack.imgur.com/yt1BL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yt1BL.png\" alt=\"OAuth2AuthenticationToken from Google\" /></a></p>\n<p>Controller</p>\n<p>`@RestController\n@RequestMapping(&quot;/&quot;)\npublic class LoginController {</p>\n<pre><code>@GetMapping\npublic Map&lt;String, Object&gt; login(OAuth2AuthenticationToken token){\n    return token.getPrincipal().getAttributes();\n}\n</code></pre>\n<p>}`</p>\n"},{"tags":["java","garbage-collection"],"comments":[{"owner":{"account_id":6104455,"reputation":4456,"user_id":4762502,"accept_rate":73,"display_name":"Gaurav Jeswani"},"score":0,"creation_date":1681108931,"post_id":75974815,"comment_id":133999512,"body_markdown":"GC is totally dependent on your JVM. You have no control on this.","body":"GC is totally dependent on your JVM. You have no control on this."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1681109332,"post_id":75974815,"comment_id":133999570,"body_markdown":"Maybe there is another memory leak.  Maybe your application is simply generating excessive garbage.  (And when you say *&quot;... way more than ...&quot;*, can you be more precise?)","body":"Maybe there is another memory leak.  Maybe your application is simply generating excessive garbage.  (And when you say <i>&quot;... way more than ...&quot;</i>, can you be more precise?)"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1681109421,"post_id":75974815,"comment_id":133999587,"body_markdown":"What exactly do you mean by &quot;going wrong&quot;? What behaviour do you expect?","body":"What exactly do you mean by &quot;going wrong&quot;? What behaviour do you expect?"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1681109486,"post_id":75974815,"comment_id":133999596,"body_markdown":"Don&#39;t link to information in a git repo like that.  As soon as you delete the repo containing the logs, your question makes no sense.  Information that is relevant to the question should be &gt;in the question&lt;.","body":"Don&#39;t link to information in a git repo like that.  As soon as you delete the repo containing the logs, your question makes no sense.  Information that is relevant to the question should be &gt;in the question&lt;."},{"owner":{"account_id":9132976,"reputation":69,"user_id":6793827,"display_name":"P K"},"score":0,"creation_date":1681109873,"post_id":75974815,"comment_id":133999634,"body_markdown":"Added more information to the question @StephenC","body":"Added more information to the question @StephenC"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1681109919,"post_id":75974815,"comment_id":133999642,"body_markdown":"After briefly scanning the logs, I don&#39;t think there is anything &quot;wrong&quot; here.  This *appears to be* a simple case of an application generating a lot of garbage.  That leads to lots of young gen GCs and occasional old gen GCs to deal with tenured objects.  If you want to fix this:  1) look for more storage leaks, 2) look for ways (i.e. application algorithm changes) to reduce the rate of garbage generation and 3) look for ways to reduce the total amount / number of reachable (non-leaking) objects.","body":"After briefly scanning the logs, I don&#39;t think there is anything &quot;wrong&quot; here.  This <i>appears to be</i> a simple case of an application generating a lot of garbage.  That leads to lots of young gen GCs and occasional old gen GCs to deal with tenured objects.  If you want to fix this:  1) look for more storage leaks, 2) look for ways (i.e. application algorithm changes) to reduce the rate of garbage generation and 3) look for ways to reduce the total amount / number of reachable (non-leaking) objects."},{"owner":{"account_id":9132976,"reputation":69,"user_id":6793827,"display_name":"P K"},"score":0,"creation_date":1681110601,"post_id":75974815,"comment_id":133999736,"body_markdown":"@StephenC the amount of garbage per second after the restart is not more than before. If you look closely in the GC log before restart the young gen sizes are bigger before a minor GC whereas they are happening at smaller sizes and taking more time later. This is my worry. I worked on this application for the past year trying to reduce the garbage and this is the best till date. Unfortunately it is turning out to be too expensive in terms of garbage and resource consumption","body":"@StephenC the amount of garbage per second after the restart is not more than before. If you look closely in the GC log before restart the young gen sizes are bigger before a minor GC whereas they are happening at smaller sizes and taking more time later. This is my worry. I worked on this application for the past year trying to reduce the garbage and this is the best till date. Unfortunately it is turning out to be too expensive in terms of garbage and resource consumption"},{"owner":{"account_id":9132976,"reputation":69,"user_id":6793827,"display_name":"P K"},"score":0,"creation_date":1681110914,"post_id":75974815,"comment_id":133999776,"body_markdown":"@StephenC my worry is that the GCs will start happening all the time after some time rendering the app unresponsive. This is what happens when there is a mem leak but a mem leak makes the old gen grow which I don’t see here.","body":"@StephenC my worry is that the GCs will start happening all the time after some time rendering the app unresponsive. This is what happens when there is a mem leak but a mem leak makes the old gen grow which I don’t see here."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1681110969,"post_id":75974815,"comment_id":133999781,"body_markdown":"There is not enough information on what precisely you have changed.  For instance, you must have done something to cause 1) the new space to be smaller and 2) more objects to be retained in the old space.  As to your broader problem, we can&#39;t advise you how to tune an application based on zero information about the application, what it does, and how it is implemented.  My advice would be to hire a consultant ...","body":"There is not enough information on what precisely you have changed.  For instance, you must have done something to cause 1) the new space to be smaller and 2) more objects to be retained in the old space.  As to your broader problem, we can&#39;t advise you how to tune an application based on zero information about the application, what it does, and how it is implemented.  My advice would be to hire a consultant ..."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1681111113,"post_id":75974815,"comment_id":133999795,"body_markdown":"But if you are *actually* worrying about response times, try switching to G1GC or maybe ZGC; i.e. a low pause GC.","body":"But if you are <i>actually</i> worrying about response times, try switching to G1GC or maybe ZGC; i.e. a low pause GC."},{"owner":{"account_id":9132976,"reputation":69,"user_id":6793827,"display_name":"P K"},"score":0,"creation_date":1681270365,"post_id":75974815,"comment_id":134027761,"body_markdown":"@StephenC Hiring a consultant is going to pretty difficult. I did try G1GC with defaults and it led to frequent GCs. The eden space was not growing enough (~2GB) leading to frequent GCs and also the old gen kept stable. This led to the slowdown of the app. I then tried the following params  as suggested as basic tuning on Redhat&#39;s GC guide and I saw increase eden and old gen but the performance of the app is still not up to the mark. I will keep you posted","body":"@StephenC Hiring a consultant is going to pretty difficult. I did try G1GC with defaults and it led to frequent GCs. The eden space was not growing enough (~2GB) leading to frequent GCs and also the old gen kept stable. This led to the slowdown of the app. I then tried the following params  as suggested as basic tuning on Redhat&#39;s GC guide and I saw increase eden and old gen but the performance of the app is still not up to the mark. I will keep you posted"},{"owner":{"account_id":9132976,"reputation":69,"user_id":6793827,"display_name":"P K"},"score":0,"creation_date":1681270374,"post_id":75974815,"comment_id":134027762,"body_markdown":"@StephenC (-Xms40960m -Xmx40960m -XX:+AlwaysPreTouch -XX:+UseG1GC -Dinactivity.days.to.expiry=60 -agentpath:/dasd/share/yourkit-2021.3-b231/bin/linux-x86-64/libyjpagent.so=port=10001,listen=all,telemetrylimit=1 -XX:+PrintGCDetails -XX:+PrintGCDateStamps -Xloggc:/logs/ade_gc.log -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/logs/heap_dump.bin -XX:MaxGCPauseMillis=500 -XX:ParallelGCThreads=20 -XX:ConcGCThreads=5 -XX:InitiatingHeapOccupancyPercent=70)","body":"@StephenC (-Xms40960m -Xmx40960m -XX:+AlwaysPreTouch -XX:+UseG1GC -Dinactivity.days.to.expiry=60 -agentpath:/dasd/share/yourkit-2021.3-b231/bin/linux-x86-64/&zwnj;&#8203;libyjpagent.so=port=&zwnj;&#8203;10001,listen=all,tel&zwnj;&#8203;emetrylimit=1 -XX:+PrintGCDetails -XX:+PrintGCDateStamps -Xloggc:/logs/ade_gc.log -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/logs/heap_dump.bin -XX:MaxGCPauseMillis=500 -XX:ParallelGCThreads=20 -XX:ConcGCThreads=5 -XX:InitiatingHeapOccupancyPercent=70)"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1681271359,"post_id":75974815,"comment_id":134027851,"body_markdown":"Frequent GCs is not the real problem.  The problem you are trying to avoid is long or uneven response times.  But if the long responses are actually due to your application generating too much garbage, then GC tuning is not going to help.  You need to fix the application.  Or get faster hardware.","body":"Frequent GCs is not the real problem.  The problem you are trying to avoid is long or uneven response times.  But if the long responses are actually due to your application generating too much garbage, then GC tuning is not going to help.  You need to fix the application.  Or get faster hardware."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1681280416,"post_id":75974815,"comment_id":134028964,"body_markdown":"*&quot;Hiring a consultant is going to pretty difficult&quot;* - The flip side is that spending another a year trying to get your application to go faster will also be pretty difficult ... to explain to your boss or client or whoever is waiting for your project completion. (I assume you are doing this because the application&#39;s performance actually matters ... to them.)","body":"<i>&quot;Hiring a consultant is going to pretty difficult&quot;</i> - The flip side is that spending another a year trying to get your application to go faster will also be pretty difficult ... to explain to your boss or client or whoever is waiting for your project completion. (I assume you are doing this because the application&#39;s performance actually matters ... to them.)"}],"owner":{"account_id":9132976,"reputation":69,"user_id":6793827,"display_name":"P K"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681109531,"creation_date":1681108711,"question_id":75974815,"body_markdown":"My application is doing frequent Major GCs after a restart and both Minor and Major GCs are happening more frequently as well as the GC times have increased significantly especially the minor GC times. I&#39;m unable to understand why this is happening. Even though the xmx (40GB) is way more than the current consumption (12GB to 28GB) the GCs are happening more frequently. Please guide me on what could be going wrong. There was a memory leak and I fixed it but now this is something I really don&#39;t understand. \r\n\r\nBefore restart:\r\n[![enter image description here][1]][1]\r\n[![enter image description here][2]][2]\r\n\r\nAfter restart:\r\n[![enter image description here][3]][3]\r\n[![enter image description here][4]][4] Following are the JAVA_OPTIONS:\r\n```\r\nopenjdk version &quot;1.8.0_362&quot;\r\nOpenJDK Runtime Environment (build 1.8.0_362-b08)\r\nOpenJDK 64-Bit Server VM (build 25.362-b08, mixed mode)\r\n```\r\n\r\n```\r\n-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/logs/heap_dump.bin -XX:InitialHeapSize=268435456 -XX:MaxHeapFreeRatio=70 -XX:MaxHeapSize=42949672960 -XX:MinHeapFreeRatio=10 -XX:+PrintGC -XX:+PrintGCDateStamps -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+UseParallelGC \r\n```\r\nPlease find the GC logs here - https://github.com/kprateek777/gc\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/epCqq.png\r\n  [2]: https://i.stack.imgur.com/nAXOj.png\r\n  [3]: https://i.stack.imgur.com/Gj290.png\r\n  [4]: https://i.stack.imgur.com/LXgNR.png","title":"java application doing frequent major GCs though xmx is yet to reach","body":"<p>My application is doing frequent Major GCs after a restart and both Minor and Major GCs are happening more frequently as well as the GC times have increased significantly especially the minor GC times. I'm unable to understand why this is happening. Even though the xmx (40GB) is way more than the current consumption (12GB to 28GB) the GCs are happening more frequently. Please guide me on what could be going wrong. There was a memory leak and I fixed it but now this is something I really don't understand.</p>\n<p>Before restart:\n<a href=\"https://i.stack.imgur.com/epCqq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/epCqq.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/nAXOj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nAXOj.png\" alt=\"enter image description here\" /></a></p>\n<p>After restart:\n<a href=\"https://i.stack.imgur.com/Gj290.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Gj290.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/LXgNR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LXgNR.png\" alt=\"enter image description here\" /></a> Following are the JAVA_OPTIONS:</p>\n<pre><code>openjdk version &quot;1.8.0_362&quot;\nOpenJDK Runtime Environment (build 1.8.0_362-b08)\nOpenJDK 64-Bit Server VM (build 25.362-b08, mixed mode)\n</code></pre>\n<pre><code>-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/logs/heap_dump.bin -XX:InitialHeapSize=268435456 -XX:MaxHeapFreeRatio=70 -XX:MaxHeapSize=42949672960 -XX:MinHeapFreeRatio=10 -XX:+PrintGC -XX:+PrintGCDateStamps -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+UseParallelGC \n</code></pre>\n<p>Please find the GC logs here - <a href=\"https://github.com/kprateek777/gc\" rel=\"nofollow noreferrer\">https://github.com/kprateek777/gc</a></p>\n"},{"tags":["java","sql","jpa"],"comments":[{"owner":{"account_id":15138451,"reputation":460,"user_id":12083015,"display_name":"Erwin"},"score":1,"creation_date":1681110509,"post_id":75974869,"comment_id":133999721,"body_markdown":"check [this](https://stackoverflow.com/a/12459909/12083015)","body":"check <a href=\"https://stackoverflow.com/a/12459909/12083015\">this</a>"},{"owner":{"account_id":22866981,"reputation":131,"user_id":17010647,"display_name":"Ksu"},"score":1,"creation_date":1681118225,"post_id":75974869,"comment_id":134000832,"body_markdown":"https://stackoverflow.com/questions/12459779/query-specified-join-fetching-but-the-owner-of-the-fetched-association-was-not","body":"<a href=\"https://stackoverflow.com/questions/12459779/query-specified-join-fetching-but-the-owner-of-the-fetched-association-was-not\" title=\"query specified join fetching but the owner of the fetched association was not\">stackoverflow.com/questions/12459779/&hellip;</a>"}],"owner":{"account_id":2174240,"reputation":1419,"user_id":1925356,"accept_rate":33,"display_name":"Alex Mi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681109306,"creation_date":1681109306,"question_id":75974869,"body_markdown":"I would like to create a JPA query that selects all entities matching some conditions, but I receive an error.\r\n\r\nMy select is:\r\n\r\n     select count(*) from Employee emplWithLicence  JOIN FETCH emplWithLicence.firma fa JOIN FETCH emplWithLicence.user userWithLicence JOIN FETCH userWithLicence.contact ctc LEFT OUTER JOIN FETCH userWithLicence.licence lice where userWithLicence.active = true and emplWithLicence.firma.name like &#39;Be%&#39; \r\n\r\nIn the future more conditions may come to the where clause, but this should not change my logic. Now, when I try to execute the logic above I receive the error below:\r\n\r\n    Caused by: org.hibernate.QueryException: query specified join fetching, but the owner of the fetched association was not present in the select list [FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=fa,role=at.home.digest.model.dave.Employee.firma,tableName=firma,tableAlias=firma1_,origin=empl employee0_,columns={employee0_.firma_id ,className=at.home.digest.model.dave.Firma}}]\r\n\tat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.ast.tree.SelectClause.initializeExplicitSelectClause(SelectClause.java:217)\r\n\tat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.ast.HqlSqlWalker.useSelectClause(HqlSqlWalker.java:1018)\r\n\tat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.ast.HqlSqlWalker.processQuery(HqlSqlWalker.java:786)\r\n\tat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:677)\r\n\tat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker.java:313)\r\n\tat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:261)\r\n\tat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:271)\r\n\tat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:191)\r\n\t... 162 more\r\n\r\nwhat is my problem, how can I fix it?\r\n\r\n","title":"JPA select count of all entitties matching some conditions","body":"<p>I would like to create a JPA query that selects all entities matching some conditions, but I receive an error.</p>\n<p>My select is:</p>\n<pre><code> select count(*) from Employee emplWithLicence  JOIN FETCH emplWithLicence.firma fa JOIN FETCH emplWithLicence.user userWithLicence JOIN FETCH userWithLicence.contact ctc LEFT OUTER JOIN FETCH userWithLicence.licence lice where userWithLicence.active = true and emplWithLicence.firma.name like 'Be%' \n</code></pre>\n<p>In the future more conditions may come to the where clause, but this should not change my logic. Now, when I try to execute the logic above I receive the error below:</p>\n<pre><code>Caused by: org.hibernate.QueryException: query specified join fetching, but the owner of the fetched association was not present in the select list [FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=fa,role=at.home.digest.model.dave.Employee.firma,tableName=firma,tableAlias=firma1_,origin=empl employee0_,columns={employee0_.firma_id ,className=at.home.digest.model.dave.Firma}}]\nat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.ast.tree.SelectClause.initializeExplicitSelectClause(SelectClause.java:217)\nat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.ast.HqlSqlWalker.useSelectClause(HqlSqlWalker.java:1018)\nat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.ast.HqlSqlWalker.processQuery(HqlSqlWalker.java:786)\nat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:677)\nat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker.java:313)\nat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:261)\nat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:271)\nat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:191)\n... 162 more\n</code></pre>\n<p>what is my problem, how can I fix it?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9481,"page":511,"page_size":100}
