{"items":[{"tags":["java","frequency","alphabet"],"answers":[{"tags":[],"owner":{"account_id":19720197,"reputation":483,"user_id":14438712,"display_name":"null_awe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677866644,"creation_date":1605832713,"answer_id":64922109,"question_id":64922058,"body_markdown":"Percentage is `ratio * 100` (`1/2 = 0.5 = (0.5 * 100)% = 50%`), and the ratio here is `lettersLabels[i] / totalLetters`. So, in order to find the percentage, you just use `lettersFrequency[i] = (double) lettersLabels[i] / (double) totalLetters * 100;`. So, you might need a variable `totalLetters` at the beginning to count the number of letters.\r\n\r\nYou have a mistake in your code, which is initializing arrays with `0`. You have already initialized the arrays with `int[] arr = new int[26];`, so you don&#39;t need those two lines, which will give an error since initializing arrays with an `int` is the wrong type. Also, when setting some part of `lettersFrequency` to something, you need to specify the index, like `lettersFrequency[i]`, and instead of using `characters` when its out of scope to get the characters, so instead you have to use the `letterLabels` array.","title":"I&#39;m trying to count the percentage of every letter in a document by using a scanner, but I can&#39;t figure out how to correctly compute and display it","body":"<p>Percentage is <code>ratio * 100</code> (<code>1/2 = 0.5 = (0.5 * 100)% = 50%</code>), and the ratio here is <code>lettersLabels[i] / totalLetters</code>. So, in order to find the percentage, you just use <code>lettersFrequency[i] = (double) lettersLabels[i] / (double) totalLetters * 100;</code>. So, you might need a variable <code>totalLetters</code> at the beginning to count the number of letters.</p>\n<p>You have a mistake in your code, which is initializing arrays with <code>0</code>. You have already initialized the arrays with <code>int[] arr = new int[26];</code>, so you don't need those two lines, which will give an error since initializing arrays with an <code>int</code> is the wrong type. Also, when setting some part of <code>lettersFrequency</code> to something, you need to specify the index, like <code>lettersFrequency[i]</code>, and instead of using <code>characters</code> when its out of scope to get the characters, so instead you have to use the <code>letterLabels</code> array.</p>\n"},{"tags":[],"owner":{"account_id":3868372,"reputation":4436,"user_id":3204335,"display_name":"MD Ruhul Amin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1605833903,"creation_date":1605833542,"answer_id":64922201,"question_id":64922058,"body_markdown":"Here I&#39;ve fix some of the errors with description see the code comments for explanation :\r\n```\r\n        int [ ]lettersLabels = new int [26];\r\n        int [ ]lettersFrequency = new int [26];\r\n        String line;\r\n        \r\n        int totalLetter =0; // needed to calculate %\r\n\r\n// No need to initialize, it&#39;s already initialized with 0 values.\r\n// remove those lines.\r\n//initialize arrays\r\n//        letterLabels = 0;\r\n//        lettersFrequency = 0;\r\n\r\n        Scanner sc = new Scanner(constitution);\r\n        \r\n         while(sc.hasNextLine())\r\n         {\r\n            line = sc.nextLine();\r\n            // need to lower case the current line\r\n            line = line.toLowerCase();\r\n            char[] characters = line.toCharArray();\r\n         \r\n            for (int i = 0; i&lt; characters.length ; i++) \r\n            {\r\n                if((characters[i] &gt;=&#39;a&#39;) &amp;&amp; (characters[i]&lt;=&#39;z&#39;))\r\n                {\r\n                     // lets count the letter frequency.\r\n                     totalLetter++;\r\n                     lettersFrequency[characters[i] -&#39;a&#39; ]++;\r\n                }\r\n            }\r\n         }\r\n\r\n         // get rid of divide by zero exception\r\n         if(totalLetter ==0) totalLetter =1;\r\n         \r\n         for (int i = 0; i &lt; 26; i++) \r\n         {\r\n          char ch = &#39;a&#39;+i;\r\n          // let&#39;s count the parentage of each letter.\r\n          double parcentage = (lettersFrequency[i]*100.00)/totalLetter;\r\n          System.out.println(&quot;parcentage of &quot;+ ch+ &quot; is: &quot; +lettersFrequency +&quot;%&quot;);\r\n         }\r\n```","title":"I&#39;m trying to count the percentage of every letter in a document by using a scanner, but I can&#39;t figure out how to correctly compute and display it","body":"<p>Here I've fix some of the errors with description see the code comments for explanation :</p>\n<pre><code>        int [ ]lettersLabels = new int [26];\n        int [ ]lettersFrequency = new int [26];\n        String line;\n        \n        int totalLetter =0; // needed to calculate %\n\n// No need to initialize, it's already initialized with 0 values.\n// remove those lines.\n//initialize arrays\n//        letterLabels = 0;\n//        lettersFrequency = 0;\n\n        Scanner sc = new Scanner(constitution);\n        \n         while(sc.hasNextLine())\n         {\n            line = sc.nextLine();\n            // need to lower case the current line\n            line = line.toLowerCase();\n            char[] characters = line.toCharArray();\n         \n            for (int i = 0; i&lt; characters.length ; i++) \n            {\n                if((characters[i] &gt;='a') &amp;&amp; (characters[i]&lt;='z'))\n                {\n                     // lets count the letter frequency.\n                     totalLetter++;\n                     lettersFrequency[characters[i] -'a' ]++;\n                }\n            }\n         }\n\n         // get rid of divide by zero exception\n         if(totalLetter ==0) totalLetter =1;\n         \n         for (int i = 0; i &lt; 26; i++) \n         {\n          char ch = 'a'+i;\n          // let's count the parentage of each letter.\n          double parcentage = (lettersFrequency[i]*100.00)/totalLetter;\n          System.out.println(&quot;parcentage of &quot;+ ch+ &quot; is: &quot; +lettersFrequency +&quot;%&quot;);\n         }\n</code></pre>\n"}],"owner":{"account_id":19574403,"reputation":67,"user_id":14324795,"display_name":"Anna M"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1677866644,"creation_date":1605832311,"question_id":64922058,"body_markdown":"First I uploaded the file I&#39;m using, the constitution. Then, I created two arrays, one for the length of the alphabet, the second to compute the frequency. I created a while loop to read every line in the document and count the frequency of every letter, I just can&#39;t figure out how to compute each as a percentage of each letter because after I&#39;m going to put it into a bar chart.\r\n\r\n```     File contitution = new File (&quot;Constitution.txt&quot;);\r\n        int [ ]lettersLabels = new int [26];\r\n        int [ ]lettersFrequency = new int [26];\r\n        String line;\r\n\r\n//initialize arrays\r\n        letterLabels = 0;\r\n        lettersFrequency = 0;\r\n\r\n        Scanner sc = new Scanner(constitution);\r\n\r\n         while(sc.hasNextLine())\r\n         {\r\n            line = sc.nextLine();\r\n            line = sc.toLowerCase();\r\n            char[] characters = line.toCharArray();\r\n         \r\n            for (int i = 0; i&lt; characters.length ; i++) \r\n            {\r\n                if((characters[i] &gt;=&#39;a&#39;) &amp;&amp; (characters[i]&lt;=&#39;z&#39;))\r\n                {\r\n                     lettersLabels[characters[i] -&#39;a&#39; ]++;\r\n                }\r\n            }\r\n         }\r\n         \r\n         for (int i = 0; i &lt; 26; i++) \r\n         {\r\n          lettersFrequency = &#39;a&#39; + [characters[i] -&#39;a&#39; ]++;\r\n          lettersFrequency = lettersFrequency / 100;\r\n          System.out.println(lettersFrequency);\r\n         }\r\n\r\n```","title":"I&#39;m trying to count the percentage of every letter in a document by using a scanner, but I can&#39;t figure out how to correctly compute and display it","body":"<p>First I uploaded the file I'm using, the constitution. Then, I created two arrays, one for the length of the alphabet, the second to compute the frequency. I created a while loop to read every line in the document and count the frequency of every letter, I just can't figure out how to compute each as a percentage of each letter because after I'm going to put it into a bar chart.</p>\n<pre><code>        int [ ]lettersLabels = new int [26];\n        int [ ]lettersFrequency = new int [26];\n        String line;\n\n//initialize arrays\n        letterLabels = 0;\n        lettersFrequency = 0;\n\n        Scanner sc = new Scanner(constitution);\n\n         while(sc.hasNextLine())\n         {\n            line = sc.nextLine();\n            line = sc.toLowerCase();\n            char[] characters = line.toCharArray();\n         \n            for (int i = 0; i&lt; characters.length ; i++) \n            {\n                if((characters[i] &gt;='a') &amp;&amp; (characters[i]&lt;='z'))\n                {\n                     lettersLabels[characters[i] -'a' ]++;\n                }\n            }\n         }\n         \n         for (int i = 0; i &lt; 26; i++) \n         {\n          lettersFrequency = 'a' + [characters[i] -'a' ]++;\n          lettersFrequency = lettersFrequency / 100;\n          System.out.println(lettersFrequency);\n         }\n\n</code></pre>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":256027,"reputation":4511,"user_id":536466,"accept_rate":75,"display_name":"Julian Suarez"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1397662241,"creation_date":1397662241,"answer_id":23113860,"question_id":23113238,"body_markdown":"Store the picture on a file, save the filename of the file on a bundle and then when restored from a bundle get the filename, then get the picture from the file and put it on your imageView.\r\n\r\nBTW, Have you looked at http://square.github.io/picasso/, or https://github.com/koush/ion","title":"Any way to save the state of a imageView that show an image retrieved from url?","body":"<p>Store the picture on a file, save the filename of the file on a bundle and then when restored from a bundle get the filename, then get the picture from the file and put it on your imageView.</p>\n\n<p>BTW, Have you looked at <a href=\"http://square.github.io/picasso/\" rel=\"nofollow\">http://square.github.io/picasso/</a>, or <a href=\"https://github.com/koush/ion\" rel=\"nofollow\">https://github.com/koush/ion</a></p>\n"}],"owner":{"account_id":207926,"reputation":1576,"user_id":458097,"accept_rate":27,"display_name":"arpho"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677866629,"creation_date":1397660647,"question_id":23113238,"body_markdown":"In my application I show a picture retrieved from url, but it is lost after the device is rotated, I save the state of the textview inmy application, using bundle, there is a way to save and recover the image?","title":"Any way to save the state of a imageView that show an image retrieved from url?","body":"<p>In my application I show a picture retrieved from url, but it is lost after the device is rotated, I save the state of the textview inmy application, using bundle, there is a way to save and recover the image?</p>\n"},{"tags":["java","spring-boot","hibernate","kotlin","spring-data-jpa"],"comments":[{"owner":{"account_id":6104455,"reputation":4456,"user_id":4762502,"accept_rate":73,"display_name":"Gaurav Jeswani"},"score":0,"creation_date":1677238746,"post_id":75556114,"comment_id":133302973,"body_markdown":"It intermittently, create issues with the list, as it internally uses hibernate, prefer to use native query in this case.","body":"It intermittently, create issues with the list, as it internally uses hibernate, prefer to use native query in this case."},{"owner":{"account_id":13722742,"reputation":16978,"user_id":10134209,"display_name":"gidds"},"score":0,"creation_date":1677278446,"post_id":75556114,"comment_id":133313138,"body_markdown":"What is the exact error message (the question title might have mangled it a little), and where is it thrown? It might also help to see your `Recipe` class.","body":"What is the exact error message (the question title might have mangled it a little), and where is it thrown? It might also help to see your <code>Recipe</code> class."},{"owner":{"account_id":16664048,"reputation":473,"user_id":12043263,"display_name":"Just A Question"},"score":0,"creation_date":1677344773,"post_id":75556114,"comment_id":133321069,"body_markdown":"I  added the error log. The recipe class is really basic, but I can add it too, if it would help you.","body":"I  added the error log. The recipe class is really basic, but I can add it too, if it would help you."},{"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"score":0,"creation_date":1677833938,"post_id":75556114,"comment_id":133419088,"body_markdown":"you can log the generated sql and then try to execute it in sqldeveloper, maybe you&#39;ll find something related to the mapping. https://www.baeldung.com/sql-logging-spring-boot","body":"you can log the generated sql and then try to execute it in sqldeveloper, maybe you&#39;ll find something related to the mapping. <a href=\"https://www.baeldung.com/sql-logging-spring-boot\" rel=\"nofollow noreferrer\">baeldung.com/sql-logging-spring-boot</a>"}],"answers":[{"tags":[],"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1677866548,"creation_date":1677423275,"answer_id":75572804,"question_id":75556114,"body_markdown":"Since Hibernate team [completely redesigned query model in HBN6](https://vladmihalcea.com/hibernate-sqm-semantic-query-model/), that is expected something have stopped working, especially for cases like yours which actually looks like a hack/trick. Here I would suggest to ask a question on [HBN forum](https://discourse.hibernate.org/c/hibernate-orm/5).\r\n\r\n\r\nHowever, some workarounds do exist:\r\n\r\nI. idiomatic way to implement such queries is to use jpa specifications, something like:\r\n\r\n```java\r\npublic interface RecipeRepository extends JpaRepository&lt;Recipe, Long&gt;, JpaSpecificationExecutor&lt;Recipe&gt; {\r\n\r\n    default List&lt;Recipe&gt; findRecipesBy(List&lt;Long&gt; authorIds, List&lt;Long&gt; recipeIds) {\r\n        Specification&lt;Recipe&gt; specification = (root, cq, cb) -&gt; {\r\n            List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\r\n            if (authorIds != null &amp;&amp; !authorIds.isEmpty()) {\r\n                predicates.add(root.get(&quot;author&quot;).get(&quot;id&quot;).in(authorIds));\r\n            }\r\n            if (recipeIds != null &amp;&amp; !recipeIds.isEmpty()) {\r\n                predicates.add(root.get(&quot;id&quot;).in(recipeIds));\r\n            }\r\n            return cb.and(predicates.toArray(new Predicate[0]));\r\n        };\r\n        return findAll(specification);\r\n    }\r\n    \r\n}\r\n```\r\n\r\nII. trick with `coalesce` - seems to be applicable for PostgreSQL only:\r\n\r\n```java\r\n@Query(&quot;SELECT r FROM Recipe r WHERE &quot;\r\n            + &quot;(coalesce(:authorIds) is null or r.author.id in (:authorIds)) &quot;\r\n            + &quot;and (coalesce(:recipeIds) is null or r.id in (:recipeIds)) &quot;\r\n            + &quot;and (:minPrice is null or r.estimatedPrice &gt;= :minPrice) &quot;\r\n            + &quot;and (:maxPrice is null or r.estimatedPrice &lt;= :maxPrice) &quot;\r\n            + &quot;and ( cast(:beforeDate as timestamp) is null or r.createdAt &lt; cast(:beforeDate as timestamp)) &quot;\r\n            + &quot;and ( cast(:afterDate as timestamp) is null or r.createdAt &gt; cast(:afterDate as timestamp)) &quot;\r\n            + &quot;and (:minLikeCount is null or r.likeCount &gt;= :minLikeCount) &quot;\r\n            + &quot;and (coalesce(:categoryIds) is null or exists(select rc from r.categories rc where rc.id in (:categoryIds))) &quot;\r\n    )\r\n```\r\n\r\nIII. trick with SpEL - delegate null checks to SpEL:\r\n\r\n```\r\n@Query(&quot;SELECT r FROM Recipe r WHERE &quot;\r\n            + &quot;(:#{#authorIds == null} = true or r.author.id in (:authorIds)) &quot;\r\n            + &quot;and (:#{#recipeIds == null} = true or r.id in (:recipeIds)) &quot;\r\n            + &quot;and (:minPrice is null or r.estimatedPrice &gt;= :minPrice) &quot;\r\n            + &quot;and (:maxPrice is null or r.estimatedPrice &lt;= :maxPrice) &quot;\r\n            + &quot;and ( cast(:beforeDate as timestamp) is null or r.createdAt &lt; cast(:beforeDate as timestamp)) &quot;\r\n            + &quot;and ( cast(:afterDate as timestamp) is null or r.createdAt &gt; cast(:afterDate as timestamp)) &quot;\r\n            + &quot;and (:minLikeCount is null or r.likeCount &gt;= :minLikeCount) &quot;\r\n            + &quot;and (:#{#categoryIds == null} = true or exists(select rc from r.categories rc where rc.id in (:categoryIds))) &quot;\r\n    )\r\n\r\n```","title":"Hibernate randomly throws error: Cannot coerce value `[]` [java.util.ArrayList] as Long","body":"<p>Since Hibernate team <a href=\"https://vladmihalcea.com/hibernate-sqm-semantic-query-model/\" rel=\"noreferrer\">completely redesigned query model in HBN6</a>, that is expected something have stopped working, especially for cases like yours which actually looks like a hack/trick. Here I would suggest to ask a question on <a href=\"https://discourse.hibernate.org/c/hibernate-orm/5\" rel=\"noreferrer\">HBN forum</a>.</p>\n<p>However, some workarounds do exist:</p>\n<p>I. idiomatic way to implement such queries is to use jpa specifications, something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface RecipeRepository extends JpaRepository&lt;Recipe, Long&gt;, JpaSpecificationExecutor&lt;Recipe&gt; {\n\n    default List&lt;Recipe&gt; findRecipesBy(List&lt;Long&gt; authorIds, List&lt;Long&gt; recipeIds) {\n        Specification&lt;Recipe&gt; specification = (root, cq, cb) -&gt; {\n            List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\n            if (authorIds != null &amp;&amp; !authorIds.isEmpty()) {\n                predicates.add(root.get(&quot;author&quot;).get(&quot;id&quot;).in(authorIds));\n            }\n            if (recipeIds != null &amp;&amp; !recipeIds.isEmpty()) {\n                predicates.add(root.get(&quot;id&quot;).in(recipeIds));\n            }\n            return cb.and(predicates.toArray(new Predicate[0]));\n        };\n        return findAll(specification);\n    }\n    \n}\n</code></pre>\n<p>II. trick with <code>coalesce</code> - seems to be applicable for PostgreSQL only:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Query(&quot;SELECT r FROM Recipe r WHERE &quot;\n            + &quot;(coalesce(:authorIds) is null or r.author.id in (:authorIds)) &quot;\n            + &quot;and (coalesce(:recipeIds) is null or r.id in (:recipeIds)) &quot;\n            + &quot;and (:minPrice is null or r.estimatedPrice &gt;= :minPrice) &quot;\n            + &quot;and (:maxPrice is null or r.estimatedPrice &lt;= :maxPrice) &quot;\n            + &quot;and ( cast(:beforeDate as timestamp) is null or r.createdAt &lt; cast(:beforeDate as timestamp)) &quot;\n            + &quot;and ( cast(:afterDate as timestamp) is null or r.createdAt &gt; cast(:afterDate as timestamp)) &quot;\n            + &quot;and (:minLikeCount is null or r.likeCount &gt;= :minLikeCount) &quot;\n            + &quot;and (coalesce(:categoryIds) is null or exists(select rc from r.categories rc where rc.id in (:categoryIds))) &quot;\n    )\n</code></pre>\n<p>III. trick with SpEL - delegate null checks to SpEL:</p>\n<pre><code>@Query(&quot;SELECT r FROM Recipe r WHERE &quot;\n            + &quot;(:#{#authorIds == null} = true or r.author.id in (:authorIds)) &quot;\n            + &quot;and (:#{#recipeIds == null} = true or r.id in (:recipeIds)) &quot;\n            + &quot;and (:minPrice is null or r.estimatedPrice &gt;= :minPrice) &quot;\n            + &quot;and (:maxPrice is null or r.estimatedPrice &lt;= :maxPrice) &quot;\n            + &quot;and ( cast(:beforeDate as timestamp) is null or r.createdAt &lt; cast(:beforeDate as timestamp)) &quot;\n            + &quot;and ( cast(:afterDate as timestamp) is null or r.createdAt &gt; cast(:afterDate as timestamp)) &quot;\n            + &quot;and (:minLikeCount is null or r.likeCount &gt;= :minLikeCount) &quot;\n            + &quot;and (:#{#categoryIds == null} = true or exists(select rc from r.categories rc where rc.id in (:categoryIds))) &quot;\n    )\n\n</code></pre>\n"}],"owner":{"account_id":16664048,"reputation":473,"user_id":12043263,"display_name":"Just A Question"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3188,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":75572804,"answer_count":1,"score":7,"last_activity_date":1677866548,"creation_date":1677238666,"question_id":75556114,"body_markdown":"I&#39;m encountering unstable errors when using a parameter of type List with my repository methods. The issue seems to be related to the interoperability between Kotlin lists and Java. When I run my unit test, it fails randomly, and I suspect this has something to do with the MutableList returned by listOf() in Kotlin. More information can be found in this StackOverflow post: https://stackoverflow.com/questions/52580173/listof-returns-mutablelist.\r\n\r\nHere&#39;s an example of my unit test and repository method:\r\n```kotlin\r\n            @Test\r\n            fun `should return recipes with the specified author, locale and categories`() {\r\n                println(&quot;AuthorID: &quot; + author.id)\r\n\r\n                recipeRepo.findRecipesBy(\r\n                    locale = LanguageSelection.ENGLISH,\r\n                    authorIds = arrayListOf(44),\r\n                )\r\n                // it throws before reaching asserts\r\n            }\r\n\r\n```\r\n\r\nRepository:\r\n```kotlin\r\ninterface RecipeRepository : JpaRepository&lt;Recipe, Long&gt; {\r\n\r\n    @Query(&quot;SELECT r FROM Recipe r WHERE &quot;\r\n            + &quot;(:authorIds is null or r.author.id in (:authorIds)) &quot;\r\n            + &quot;and (:recipeIds is null or r.id in (:recipeIds)) &quot;\r\n            + &quot;and (:minPrice is null or r.estimatedPrice &gt;= :minPrice) &quot;\r\n            + &quot;and (:maxPrice is null or r.estimatedPrice &lt;= :maxPrice) &quot;\r\n            + &quot;and ( cast(:beforeDate as timestamp) is null or r.createdAt &lt; cast(:beforeDate as timestamp)) &quot;\r\n            + &quot;and ( cast(:afterDate as timestamp) is null or r.createdAt &gt; cast(:afterDate as timestamp)) &quot;\r\n            + &quot;and (:minLikeCount is null or r.likeCount &gt;= :minLikeCount) &quot;\r\n            + &quot;and (:categoryIds is null or exists(select rc from r.categories rc where rc.id in (:categoryIds))) &quot;\r\n    )\r\n\r\n    fun findRecipesBy(\r\n        @Param(&quot;authorIds&quot;) authorIds: ArrayList&lt;Long&gt;? = null,\r\n        @Param(&quot;recipeIds&quot;) recipeIds: ArrayList&lt;Long&gt;? = null,\r\n        @Param(&quot;minPrice&quot;) minPrice: Double? = null,\r\n        @Param(&quot;maxPrice&quot;) maxPrice: Double? = null,\r\n        @Param(&quot;beforeDate&quot;) beforeDate: Date? = null,\r\n        @Param(&quot;afterDate&quot;) afterDate: Date? = null,\r\n        @Param(&quot;minLikeCount&quot;) minLikeCount: Int? = null,\r\n        @Param(&quot;categoryIds&quot;) categoryIds: ArrayList&lt;Long&gt;? = null,\r\n        sort: Sort = Sort.by(Sort.Direction.ASC, &quot;createdAt&quot;),\r\n    ): List&lt;Recipe&gt;\r\n\r\n}\r\n```\r\n\r\nError:\r\n```\r\n\r\nParameter value [[44]] did not match expected type [BasicSqmPathSource(id : Long) ]\r\norg.springframework.dao.InvalidDataAccessApiUsageException: Parameter value [[44]] did not match expected type [BasicSqmPathSource(id : Long) ]\r\n\tat app//org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:371)\r\n\tat app//org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:235)\r\n\tat app//org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)\r\n\tat app//org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\r\n\tat app//org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)\r\n\tat app//org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\r\n\tat app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat app//org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:134)\r\n\tat app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat app//org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\r\n\tat app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat app//org.springframework.data.repository.core.support.MethodInvocationValidator.invoke(MethodInvocationValidator.java:94)\r\n\tat app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat app//org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)\r\n\tat app/jdk.proxy3/jdk.proxy3.$Proxy189.findRecipesBy(Unknown Source)\r\n\tat app//com.fittastetic.fittastetic_backend.shared.recipe.repository.RecipeRepository$DefaultImpls.findRecipesBy$default(RecipeRepository.kt:38)\r\n    ...\r\nCaused by: org.hibernate.type.descriptor.java.CoercionException: Cannot coerce value `[44]` [java.util.ArrayList] as Long\r\n\tat app//org.hibernate.type.descriptor.java.LongJavaType.coerce(LongJavaType.java:155)\r\n\tat app//org.hibernate.type.descriptor.java.LongJavaType.coerce(LongJavaType.java:24)\r\n\tat app//org.hibernate.query.internal.QueryParameterBindingImpl.coerce(QueryParameterBindingImpl.java:144)\r\n\tat app//org.hibernate.query.internal.QueryParameterBindingImpl.setBindValue(QueryParameterBindingImpl.java:111)\r\n\t... 141 more\r\n\r\n```","title":"Hibernate randomly throws error: Cannot coerce value `[]` [java.util.ArrayList] as Long","body":"<p>I'm encountering unstable errors when using a parameter of type List with my repository methods. The issue seems to be related to the interoperability between Kotlin lists and Java. When I run my unit test, it fails randomly, and I suspect this has something to do with the MutableList returned by listOf() in Kotlin. More information can be found in this StackOverflow post: <a href=\"https://stackoverflow.com/questions/52580173/listof-returns-mutablelist\">listOf() returns MutableList</a>.</p>\n<p>Here's an example of my unit test and repository method:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>            @Test\n            fun `should return recipes with the specified author, locale and categories`() {\n                println(&quot;AuthorID: &quot; + author.id)\n\n                recipeRepo.findRecipesBy(\n                    locale = LanguageSelection.ENGLISH,\n                    authorIds = arrayListOf(44),\n                )\n                // it throws before reaching asserts\n            }\n\n</code></pre>\n<p>Repository:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>interface RecipeRepository : JpaRepository&lt;Recipe, Long&gt; {\n\n    @Query(&quot;SELECT r FROM Recipe r WHERE &quot;\n            + &quot;(:authorIds is null or r.author.id in (:authorIds)) &quot;\n            + &quot;and (:recipeIds is null or r.id in (:recipeIds)) &quot;\n            + &quot;and (:minPrice is null or r.estimatedPrice &gt;= :minPrice) &quot;\n            + &quot;and (:maxPrice is null or r.estimatedPrice &lt;= :maxPrice) &quot;\n            + &quot;and ( cast(:beforeDate as timestamp) is null or r.createdAt &lt; cast(:beforeDate as timestamp)) &quot;\n            + &quot;and ( cast(:afterDate as timestamp) is null or r.createdAt &gt; cast(:afterDate as timestamp)) &quot;\n            + &quot;and (:minLikeCount is null or r.likeCount &gt;= :minLikeCount) &quot;\n            + &quot;and (:categoryIds is null or exists(select rc from r.categories rc where rc.id in (:categoryIds))) &quot;\n    )\n\n    fun findRecipesBy(\n        @Param(&quot;authorIds&quot;) authorIds: ArrayList&lt;Long&gt;? = null,\n        @Param(&quot;recipeIds&quot;) recipeIds: ArrayList&lt;Long&gt;? = null,\n        @Param(&quot;minPrice&quot;) minPrice: Double? = null,\n        @Param(&quot;maxPrice&quot;) maxPrice: Double? = null,\n        @Param(&quot;beforeDate&quot;) beforeDate: Date? = null,\n        @Param(&quot;afterDate&quot;) afterDate: Date? = null,\n        @Param(&quot;minLikeCount&quot;) minLikeCount: Int? = null,\n        @Param(&quot;categoryIds&quot;) categoryIds: ArrayList&lt;Long&gt;? = null,\n        sort: Sort = Sort.by(Sort.Direction.ASC, &quot;createdAt&quot;),\n    ): List&lt;Recipe&gt;\n\n}\n</code></pre>\n<p>Error:</p>\n<pre><code>\nParameter value [[44]] did not match expected type [BasicSqmPathSource(id : Long) ]\norg.springframework.dao.InvalidDataAccessApiUsageException: Parameter value [[44]] did not match expected type [BasicSqmPathSource(id : Long) ]\n    at app//org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:371)\n    at app//org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:235)\n    at app//org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)\n    at app//org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\n    at app//org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)\n    at app//org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\n    at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at app//org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:134)\n    at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at app//org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\n    at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at app//org.springframework.data.repository.core.support.MethodInvocationValidator.invoke(MethodInvocationValidator.java:94)\n    at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at app//org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)\n    at app/jdk.proxy3/jdk.proxy3.$Proxy189.findRecipesBy(Unknown Source)\n    at app//com.fittastetic.fittastetic_backend.shared.recipe.repository.RecipeRepository$DefaultImpls.findRecipesBy$default(RecipeRepository.kt:38)\n    ...\nCaused by: org.hibernate.type.descriptor.java.CoercionException: Cannot coerce value `[44]` [java.util.ArrayList] as Long\n    at app//org.hibernate.type.descriptor.java.LongJavaType.coerce(LongJavaType.java:155)\n    at app//org.hibernate.type.descriptor.java.LongJavaType.coerce(LongJavaType.java:24)\n    at app//org.hibernate.query.internal.QueryParameterBindingImpl.coerce(QueryParameterBindingImpl.java:144)\n    at app//org.hibernate.query.internal.QueryParameterBindingImpl.setBindValue(QueryParameterBindingImpl.java:111)\n    ... 141 more\n\n</code></pre>\n"},{"tags":["java","arrays","for-loop","if-statement"],"comments":[{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1677865927,"post_id":75630322,"comment_id":133428164,"body_markdown":"Time to use a debugger or sprinkle your code with `println` statements.  See where your calculations go wrong.","body":"Time to use a debugger or sprinkle your code with <code>println</code> statements.  See where your calculations go wrong."},{"owner":{"account_id":80364,"reputation":90939,"user_id":227299,"accept_rate":72,"display_name":"Ruan Mendes"},"score":0,"creation_date":1677866334,"post_id":75630322,"comment_id":133428271,"body_markdown":"Didn&#39;t downvote but https://idownvotedbecau.se/nodebugging/","body":"Didn&#39;t downvote but <a href=\"https://idownvotedbecau.se/nodebugging/\" rel=\"nofollow noreferrer\">idownvotedbecau.se/nodebugging</a>"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677866256,"creation_date":1677866256,"answer_id":75630406,"question_id":75630322,"body_markdown":"Your direct issue is simple: You have a field named `String[] grade;` in your `GradesAverage` class. Like all fields of non-primitive types that aren&#39;t initialized, its initial value is therefore `null`.\r\n\r\nYou never set it. There&#39;s a `setScore` which sets the `score` array, but no `setGrades`.\r\n\r\nLater in `computeResult`, you evaluate `grade[i]`. Array brackets &#39;dereference&#39;, they follow the pointer. `x[i]` where `x` is `null` thus gives you a `NullPointerException`.\r\n\r\nBut, you have an underlying problem.\r\n\r\nNB: Java has pointers; it&#39;s just that the official term is &#39;reference&#39;, just like java has functions but the official term is &#39;method&#39;. No matter what you care to call it, they point at things, it&#39;s like an address in an address book and not a house. `null` refers to a blank page in the address book, most things you can do with a reference are things you do to the house and not the page in the address book - `arr[idx]` is one such thing. Anytime you ask a reference to do something to the thing it refers to, and that reference is `null`, you get a NullPointerException. You can&#39;t very well walk over to the house listed in the address book on page 48 if page 48 is blank.\r\n\r\n## Debugging\r\n\r\nExperienced programmers can generally look at code like this and just see the problem. However, this &#39;crystal ball debugging&#39; (where you just look at it ever more intently until you go EUREKA!!!) is not reliable and not how real programmers operate.\r\n\r\nInstead, they debug. Debugging is very simple, you simply &#39;evaluate&#39; what your code is supposed to do, line by line, in your head. Then you compare what you think should happen, with what actually happens. Every time what actually happens diverges from what you thought would happen, you found a bug. Solve it, keep going, until the app does exactly what you wanted it to.\r\n\r\nYou can use debuggers, which make this easy by letting you inspect variables and execute code one line at a time (&#39;stepping through&#39;). However, if &#39;learning how to use the debugger&#39; is a bit too much of a learning curve issue right now, you can always toss a boatload of `System.out.println(&quot;DBG: Variable x is now &quot; + x);` style statements throughout the code as a poor and inefficient, but easy to learn alternative.\r\n","title":"Nesting an if statement inside an array loop","body":"<p>Your direct issue is simple: You have a field named <code>String[] grade;</code> in your <code>GradesAverage</code> class. Like all fields of non-primitive types that aren't initialized, its initial value is therefore <code>null</code>.</p>\n<p>You never set it. There's a <code>setScore</code> which sets the <code>score</code> array, but no <code>setGrades</code>.</p>\n<p>Later in <code>computeResult</code>, you evaluate <code>grade[i]</code>. Array brackets 'dereference', they follow the pointer. <code>x[i]</code> where <code>x</code> is <code>null</code> thus gives you a <code>NullPointerException</code>.</p>\n<p>But, you have an underlying problem.</p>\n<p>NB: Java has pointers; it's just that the official term is 'reference', just like java has functions but the official term is 'method'. No matter what you care to call it, they point at things, it's like an address in an address book and not a house. <code>null</code> refers to a blank page in the address book, most things you can do with a reference are things you do to the house and not the page in the address book - <code>arr[idx]</code> is one such thing. Anytime you ask a reference to do something to the thing it refers to, and that reference is <code>null</code>, you get a NullPointerException. You can't very well walk over to the house listed in the address book on page 48 if page 48 is blank.</p>\n<h2>Debugging</h2>\n<p>Experienced programmers can generally look at code like this and just see the problem. However, this 'crystal ball debugging' (where you just look at it ever more intently until you go EUREKA!!!) is not reliable and not how real programmers operate.</p>\n<p>Instead, they debug. Debugging is very simple, you simply 'evaluate' what your code is supposed to do, line by line, in your head. Then you compare what you think should happen, with what actually happens. Every time what actually happens diverges from what you thought would happen, you found a bug. Solve it, keep going, until the app does exactly what you wanted it to.</p>\n<p>You can use debuggers, which make this easy by letting you inspect variables and execute code one line at a time ('stepping through'). However, if 'learning how to use the debugger' is a bit too much of a learning curve issue right now, you can always toss a boatload of <code>System.out.println(&quot;DBG: Variable x is now &quot; + x);</code> style statements throughout the code as a poor and inefficient, but easy to learn alternative.</p>\n"}],"owner":{"account_id":27929303,"reputation":1,"user_id":21327736,"display_name":"Zaedriel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1677866256,"creation_date":1677865704,"question_id":75630322,"body_markdown":"Trying to follow an exercise for college and completely lost. As an example app class and instan object challenge, we are tasked to create an app that asks a user for how many subjects they are taking (via scanner) and then using arrays to record each score they have for each subject (so if they took 5 subjects, they enter 5 scores between 1-100). The instantiable should then take those scores, assign a grade as a string to each entry in the array and then get the average score for the user. \r\n\r\ne.g. if I enter 4 subjects, I get prompted to enter 4 int values, then I should see the corresponding grade for each subject as a row, and another that calculated the average score of the 4 entered.\r\n\r\n\r\nInstantiable class object\r\n```\r\npublic class GradesAverage{\r\n//Data member declaration (variables, but instantiable class name) - always private\r\n\tprivate int subjects;\r\n\tprivate int[] score;\r\n\tString[] grade;\r\n\tprivate int avg;\r\n\tprivate\tint tally;\r\n\r\n//Constructor\r\n\tpublic GradesAverage(){\r\n\r\n\t}\r\n//Setters - inputs (pulling from App class)\r\n\tpublic void setSubjects(int subjects){\r\n\t\tthis.subjects=subjects;\r\n\t}\r\n\tpublic void setScore(int[] score){\r\n\t\tthis.score=score;\r\n\t}\r\n//Compute- process\r\n\tpublic void computeResults(){\r\n\t\tfor(int i=0;i&lt;subjects;i++){\r\n\t\t\tif(score[i]&gt;=90 &amp;&amp; score[i]&lt;=100){\r\n\t\t\t\tgrade[i]=&quot;A&quot;;\r\n\t\t\t}\r\n\t\t\telse if(score[i]&gt;=80 &amp;&amp; score[i]&lt;90){\r\n\t\t\t\tgrade[i]=&quot;A-&quot;;\r\n\t\t\t}\r\n\t\t\telse if(score[i]&gt;=70 &amp;&amp; score[i]&lt;80){\r\n\t\t\t\tgrade[i]=&quot;B&quot;;\r\n\t\t\t}\r\n\t\t\telse if(score[i]&gt;=60 &amp;&amp; score[i]&lt;70){\r\n\t\t\t\tgrade[i]=&quot;B-&quot;;\r\n\t\t\t}\r\n\t\t\telse if(score[i]&gt;=50 &amp;&amp; score[i]&lt;60){\r\n\t\t\t\tgrade[i]=&quot;C&quot;;\r\n\t\t\t}\r\n\t\t\telse if(score[i]&gt;=40 &amp;&amp; score[i]&lt;50){\r\n\t\t\t\tgrade[i]=&quot;D&quot;;\r\n\t\t\t}\r\n\t\t\telse if(score[i]&gt;=0 &amp;&amp; score[i]&lt;40){\r\n\t\t\t\tgrade[i]=&quot;F&quot;;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tgrade[i]=&quot;ERROR&quot;;\r\n\t\t\t}\r\n\t\t\ttally=score[i-1]+score[i];\r\n\t\t}\r\n\r\n\t\tavg=tally/subjects;\r\n\t}\r\n//Getters - outputs (sent to App class)\r\n\tpublic int[] getScore(){\r\n\t\treturn score;\r\n\t}\r\n\tpublic String[] getGrade(){\r\n\t\treturn grade;\r\n\t}\r\n\tpublic int getAverage(){\r\n\t\treturn avg;\r\n\t}\r\n}\r\n```\r\nApp class object\r\n\r\n```\r\nimport java.util.*;\r\npublic class GradesAverageApp{\r\n\tpublic static void main(String[] args){\r\n//declare variables\r\n\t\tint subjects=0;\r\n\t\tint[] score=new int[10];\r\n\t\tint avg;\r\n\t\tString[] grade;\r\n\t\tint tally;\r\n//declare and create objects\r\n\t\tScanner keyboard=new Scanner(System.in);\r\n\t\tGradesAverage g=new GradesAverage();\r\n\r\n//inputs (pulling from user input e.g. scanner)\r\n\t\tSystem.out.println(&quot;Please enter how many subject you are taking&quot;);\r\n\t\tsubjects=keyboard.nextInt();\r\n\t\tfor(int i=0;i&lt;subjects;i++){\r\n\t\t\tSystem.out.println(&quot;Please enter the score (0-100) for subject #&quot;+(i+1));\r\n\t\t\tscore[i]=keyboard.nextInt();\r\n\t\t}\r\n//declare setters\r\n\t\tg.setSubjects(subjects);\r\n\t\tg.setScore(score);\r\n//compute process\r\n\t\tg.computeResults();\r\n//get results\r\n\t\tgrade=g.getGrade();\r\n\t\tavg=g.getAverage();\r\n//outputs (back to the user)\r\n\t\tfor(int i=0;i&lt;subjects;i++){\r\n\t\t\tSystem.out.println(&quot;You scored &quot;+score[i]+&quot; in subject #&quot;+(i+1)+&quot;, giving you a final grade of &quot;+grade[i]+&quot;.&quot;);\r\n\t\t}\r\n\t\tSystem.out.println(&quot;Your overall average score was &quot;+avg);\r\n\t}\r\n}\r\n```\r\nI&#39;m still very new to Java but I cannot figure out why the app won&#39;t finish the compute stage.\r\nExample of the error I get:\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.NullPointerException\r\n        at GradesAverage.computeResults(GradesAverage.java:41)\r\n        at GradesAverageApp.main(GradesAverageApp.java:30)\r\n```\r\n","title":"Nesting an if statement inside an array loop","body":"<p>Trying to follow an exercise for college and completely lost. As an example app class and instan object challenge, we are tasked to create an app that asks a user for how many subjects they are taking (via scanner) and then using arrays to record each score they have for each subject (so if they took 5 subjects, they enter 5 scores between 1-100). The instantiable should then take those scores, assign a grade as a string to each entry in the array and then get the average score for the user.</p>\n<p>e.g. if I enter 4 subjects, I get prompted to enter 4 int values, then I should see the corresponding grade for each subject as a row, and another that calculated the average score of the 4 entered.</p>\n<p>Instantiable class object</p>\n<pre><code>public class GradesAverage{\n//Data member declaration (variables, but instantiable class name) - always private\n    private int subjects;\n    private int[] score;\n    String[] grade;\n    private int avg;\n    private int tally;\n\n//Constructor\n    public GradesAverage(){\n\n    }\n//Setters - inputs (pulling from App class)\n    public void setSubjects(int subjects){\n        this.subjects=subjects;\n    }\n    public void setScore(int[] score){\n        this.score=score;\n    }\n//Compute- process\n    public void computeResults(){\n        for(int i=0;i&lt;subjects;i++){\n            if(score[i]&gt;=90 &amp;&amp; score[i]&lt;=100){\n                grade[i]=&quot;A&quot;;\n            }\n            else if(score[i]&gt;=80 &amp;&amp; score[i]&lt;90){\n                grade[i]=&quot;A-&quot;;\n            }\n            else if(score[i]&gt;=70 &amp;&amp; score[i]&lt;80){\n                grade[i]=&quot;B&quot;;\n            }\n            else if(score[i]&gt;=60 &amp;&amp; score[i]&lt;70){\n                grade[i]=&quot;B-&quot;;\n            }\n            else if(score[i]&gt;=50 &amp;&amp; score[i]&lt;60){\n                grade[i]=&quot;C&quot;;\n            }\n            else if(score[i]&gt;=40 &amp;&amp; score[i]&lt;50){\n                grade[i]=&quot;D&quot;;\n            }\n            else if(score[i]&gt;=0 &amp;&amp; score[i]&lt;40){\n                grade[i]=&quot;F&quot;;\n            }\n            else{\n                grade[i]=&quot;ERROR&quot;;\n            }\n            tally=score[i-1]+score[i];\n        }\n\n        avg=tally/subjects;\n    }\n//Getters - outputs (sent to App class)\n    public int[] getScore(){\n        return score;\n    }\n    public String[] getGrade(){\n        return grade;\n    }\n    public int getAverage(){\n        return avg;\n    }\n}\n</code></pre>\n<p>App class object</p>\n<pre><code>import java.util.*;\npublic class GradesAverageApp{\n    public static void main(String[] args){\n//declare variables\n        int subjects=0;\n        int[] score=new int[10];\n        int avg;\n        String[] grade;\n        int tally;\n//declare and create objects\n        Scanner keyboard=new Scanner(System.in);\n        GradesAverage g=new GradesAverage();\n\n//inputs (pulling from user input e.g. scanner)\n        System.out.println(&quot;Please enter how many subject you are taking&quot;);\n        subjects=keyboard.nextInt();\n        for(int i=0;i&lt;subjects;i++){\n            System.out.println(&quot;Please enter the score (0-100) for subject #&quot;+(i+1));\n            score[i]=keyboard.nextInt();\n        }\n//declare setters\n        g.setSubjects(subjects);\n        g.setScore(score);\n//compute process\n        g.computeResults();\n//get results\n        grade=g.getGrade();\n        avg=g.getAverage();\n//outputs (back to the user)\n        for(int i=0;i&lt;subjects;i++){\n            System.out.println(&quot;You scored &quot;+score[i]+&quot; in subject #&quot;+(i+1)+&quot;, giving you a final grade of &quot;+grade[i]+&quot;.&quot;);\n        }\n        System.out.println(&quot;Your overall average score was &quot;+avg);\n    }\n}\n</code></pre>\n<p>I'm still very new to Java but I cannot figure out why the app won't finish the compute stage.\nExample of the error I get:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NullPointerException\n        at GradesAverage.computeResults(GradesAverage.java:41)\n        at GradesAverageApp.main(GradesAverageApp.java:30)\n</code></pre>\n"},{"tags":["java","jaxb","deserialization"],"owner":{"account_id":3707987,"reputation":55,"user_id":3085993,"display_name":"Francesco"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677865842,"creation_date":1677865842,"question_id":75630340,"body_markdown":"I have this xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot;&gt;\r\n    \t&lt;soap:Header&gt;\r\n    \t\t&lt;MessageResponse GId=&quot;JPEF&quot; MId=&quot;65effb8f-2180-428c-9285-527fdc97fc7a&quot; MTs=&quot;2023-03-02T19:40:14.201518+01:00&quot; METs=&quot;2023-03-12T19:40:14.201518+01:00&quot; xmlns=&quot;urn:crif-message:2006-08-23&quot;&gt;\r\n    \t\t\t&lt;P SId=&quot;S18&quot; PId=&quot;EuriscAC&quot; PNs=&quot;urn:crif-anagraficaunica-eurisc:2006-11-28&quot;&gt;\r\n    \t\t\t\t&lt;R L=&quot;en-US&quot; C=&quot;urn:crif-messagegateway:2006-08-23:S&quot; D=&quot;Success.&quot; /&gt;\r\n    \t\t\t&lt;/P&gt;\r\n    \t\t\t&lt;Tx TxNs=&quot;urn:crif-messagegateway:2006-08-23&quot;&gt;\r\n    \t\t\t\t&lt;R L=&quot;en-US&quot; C=&quot;urn:crif-messagegateway:2006-08-23:S&quot; D=&quot;Success.&quot; /&gt;\r\n    \t\t\t&lt;/Tx&gt;\r\n    \t\t&lt;/MessageResponse&gt;\r\n    \t&lt;/soap:Header&gt;\r\n    \t&lt;soap:Body&gt;\r\n    \t\t&lt;MGResponse xmlns=&quot;urn:crif-messagegateway:2006-08-23&quot;&gt;&amp;lt;MGResponse xmlns=&quot;urn:crif-messagegateway:2006-08-23&quot;&amp;gt;&amp;lt;EuriscACResponse xmlns=&quot;urn:crif-anagraficaunica-eurisc:2006-11-28&quot;&amp;gt;&amp;lt;CD CCC=&quot;163214729&quot; DRF=&quot;2023-02-27&quot; TO=&quot;FC&quot; FO=&quot;RC&quot; V=&quot;E&quot; ICR=&quot;5000&quot; /&amp;gt;&amp;lt;C CCC=&quot;163214729&quot; FO=&quot;RC&quot; V=&quot;E&quot; /&amp;gt;&amp;lt;/EuriscACResponse&amp;gt;&amp;lt;/MGResponse&amp;gt;&lt;/MGResponse&gt;\r\n    \t&lt;/soap:Body&gt;\r\n    &lt;/soap:Envelope&gt;\r\n\r\nand I have 2 pojos, one for the header and the other for the body.\r\nwhilst I succeed in deserialize the header, the body gives me an headache.\r\n\r\nthe *header* pojo is\r\n\r\n    package generatedschema.header;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.HashMap;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    import javax.xml.bind.annotation.XmlAccessType;\r\n    import javax.xml.bind.annotation.XmlAccessorType;\r\n    import javax.xml.bind.annotation.XmlAnyAttribute;\r\n    import javax.xml.bind.annotation.XmlAnyElement;\r\n    import javax.xml.bind.annotation.XmlAttribute;\r\n    import javax.xml.bind.annotation.XmlElement;\r\n    import javax.xml.bind.annotation.XmlRootElement;\r\n    import javax.xml.bind.annotation.XmlSchemaType;\r\n    import javax.xml.bind.annotation.XmlType;\r\n    import javax.xml.bind.annotation.adapters.CollapsedStringAdapter;\r\n    import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;\r\n    import javax.xml.datatype.XMLGregorianCalendar;\r\n    import javax.xml.namespace.QName;\r\n    \r\n    \r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n    @XmlType(name = &quot;&quot;, propOrder = {\r\n        &quot;p&quot;,\r\n        &quot;tx&quot;,\r\n        &quot;any&quot;\r\n    })\r\n    @XmlRootElement(name = &quot;MessageResponse&quot;)\r\n    public class MessageResponse\r\n        extends MessageAttributeSet\r\n    {\r\n    \r\n        @XmlElement(name = &quot;P&quot;, required = true)\r\n        protected List&lt;MessageResponse.P&gt; p;\r\n        @XmlElement(name = &quot;Tx&quot;, required = true)\r\n        protected MessageResponse.Tx tx;\r\n        @XmlAnyElement(lax = true)\r\n        protected List&lt;Object&gt; any;\r\n        @XmlAttribute(name = &quot;METs&quot;, required = true)\r\n        @XmlSchemaType(name = &quot;dateTime&quot;)\r\n        protected XMLGregorianCalendar meTs;\r\n    \r\n        public List&lt;MessageResponse.P&gt; getP() {\r\n            if (p == null) {\r\n                p = new ArrayList&lt;MessageResponse.P&gt;();\r\n            }\r\n            return this.p;\r\n        }\r\n    \r\n        public MessageResponse.Tx getTx() {\r\n            return tx;\r\n        }\r\n    \r\n        public void setTx(MessageResponse.Tx value) {\r\n            this.tx = value;\r\n        }\r\n    \r\n        public List&lt;Object&gt; getAny() {\r\n            if (any == null) {\r\n                any = new ArrayList&lt;Object&gt;();\r\n            }\r\n            return this.any;\r\n        }\r\n    \r\n        public XMLGregorianCalendar getMETs() {\r\n            return meTs;\r\n        }\r\n    \r\n        public void setMETs(XMLGregorianCalendar value) {\r\n            this.meTs = value;\r\n        }\r\n    \r\n    \r\n        @XmlAccessorType(XmlAccessType.FIELD)\r\n        @XmlType(name = &quot;&quot;, propOrder = {\r\n            &quot;r&quot;,\r\n            &quot;any&quot;\r\n        })\r\n        public static class P {\r\n    \r\n            @XmlElement(name = &quot;R&quot;, required = true)\r\n            protected MessageResponse.P.R r;\r\n            @XmlAnyElement(lax = true)\r\n            protected List&lt;Object&gt; any;\r\n            @XmlAttribute(name = &quot;SId&quot;, required = true)\r\n            protected String sId;\r\n            @XmlAttribute(name = &quot;PId&quot;, required = true)\r\n            protected String pId;\r\n            @XmlAttribute(name = &quot;PNs&quot;, required = true)\r\n            protected String pNs;\r\n            @XmlAnyAttribute\r\n            private Map&lt;QName, String&gt; otherAttributes = new HashMap&lt;QName, String&gt;();\r\n    \r\n            public MessageResponse.P.R getR() {\r\n                return r;\r\n            }\r\n    \r\n            public void setR(MessageResponse.P.R value) {\r\n                this.r = value;\r\n            }\r\n    \r\n            public List&lt;Object&gt; getAny() {\r\n                if (any == null) {\r\n                    any = new ArrayList&lt;Object&gt;();\r\n                }\r\n                return this.any;\r\n            }\r\n    \r\n            public String getSId() {\r\n                return sId;\r\n            }\r\n    \r\n            public void setSId(String value) {\r\n                this.sId = value;\r\n            }\r\n    \r\n            public String getPId() {\r\n                return pId;\r\n            }\r\n    \r\n            public void setPId(String value) {\r\n                this.pId = value;\r\n            }\r\n    \r\n            public String getPNs() {\r\n                return pNs;\r\n            }\r\n    \r\n            public void setPNs(String value) {\r\n                this.pNs = value;\r\n            }\r\n    \r\n            public Map&lt;QName, String&gt; getOtherAttributes() {\r\n                return otherAttributes;\r\n            }\r\n    \r\n            @XmlAccessorType(XmlAccessType.FIELD)\r\n            @XmlType(name = &quot;&quot;)\r\n            public static class R {\r\n    \r\n                @XmlAttribute(name = &quot;L&quot;, required = true)\r\n                @XmlJavaTypeAdapter(CollapsedStringAdapter.class)\r\n                @XmlSchemaType(name = &quot;language&quot;)\r\n                protected String l;\r\n                @XmlAttribute(name = &quot;C&quot;, required = true)\r\n                @XmlSchemaType(name = &quot;anyURI&quot;)\r\n                protected String c;\r\n                @XmlAttribute(name = &quot;D&quot;, required = true)\r\n                protected String d;\r\n                @XmlAnyAttribute\r\n                private Map&lt;QName, String&gt; otherAttributes = new HashMap&lt;QName, String&gt;();\r\n    \r\n                public String getL() {\r\n                    return l;\r\n                }\r\n    \r\n                public void setL(String value) {\r\n                    this.l = value;\r\n                }\r\n    \r\n                public String getC() {\r\n                    return c;\r\n                }\r\n    \r\n                public void setC(String value) {\r\n                    this.c = value;\r\n                }\r\n    \r\n                public String getD() {\r\n                    return d;\r\n                }\r\n    \r\n                public void setD(String value) {\r\n                    this.d = value;\r\n                }\r\n    \r\n                public Map&lt;QName, String&gt; getOtherAttributes() {\r\n                    return otherAttributes;\r\n                }\r\n    \r\n            }\r\n    \r\n        }\r\n    \r\n    \r\n        @XmlAccessorType(XmlAccessType.FIELD)\r\n        @XmlType(name = &quot;&quot;, propOrder = {\r\n            &quot;r&quot;,\r\n            &quot;any&quot;\r\n        })\r\n        public static class Tx {\r\n    \r\n            @XmlElement(name = &quot;R&quot;, required = true)\r\n            protected MessageResponse.Tx.R r;\r\n            @XmlAnyElement(lax = true)\r\n            protected List&lt;Object&gt; any;\r\n            @XmlAttribute(name = &quot;TxNs&quot;, required = true)\r\n            protected String txNs;\r\n            @XmlAnyAttribute\r\n            private Map&lt;QName, String&gt; otherAttributes = new HashMap&lt;QName, String&gt;();\r\n    \r\n            public MessageResponse.Tx.R getR() {\r\n                return r;\r\n            }\r\n    \r\n            public void setR(MessageResponse.Tx.R value) {\r\n                this.r = value;\r\n            }\r\n    \r\n            public List&lt;Object&gt; getAny() {\r\n                if (any == null) {\r\n                    any = new ArrayList&lt;Object&gt;();\r\n                }\r\n                return this.any;\r\n            }\r\n    \r\n            public String getTxNs() {\r\n                return txNs;\r\n            }\r\n    \r\n            public void setTxNs(String value) {\r\n                this.txNs = value;\r\n            }\r\n    \r\n            public Map&lt;QName, String&gt; getOtherAttributes() {\r\n                return otherAttributes;\r\n            }\r\n    \r\n            @XmlAccessorType(XmlAccessType.FIELD)\r\n            @XmlType(name = &quot;&quot;)\r\n            public static class R {\r\n    \r\n                @XmlAttribute(name = &quot;L&quot;, required = true)\r\n                @XmlJavaTypeAdapter(CollapsedStringAdapter.class)\r\n                @XmlSchemaType(name = &quot;language&quot;)\r\n                protected String l;\r\n                @XmlAttribute(name = &quot;C&quot;, required = true)\r\n                @XmlSchemaType(name = &quot;anyURI&quot;)\r\n                protected String c;\r\n                @XmlAttribute(name = &quot;D&quot;, required = true)\r\n                protected String d;\r\n                @XmlAnyAttribute\r\n                private Map&lt;QName, String&gt; otherAttributes = new HashMap&lt;QName, String&gt;();\r\n    \r\n                public String getL() {\r\n                    return l;\r\n                }\r\n    \r\n                public void setL(String value) {\r\n                    this.l = value;\r\n                }\r\n    \r\n                public String getC() {\r\n                    return c;\r\n                }\r\n    \r\n                public void setC(String value) {\r\n                    this.c = value;\r\n                }\r\n    \r\n                public String getD() {\r\n                    return d;\r\n                }\r\n    \r\n                public void setD(String value) {\r\n                    this.d = value;\r\n                }\r\n    \r\n                public Map&lt;QName, String&gt; getOtherAttributes() {\r\n                    return otherAttributes;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nand the pojo for the *body* in\r\n\r\n    package generatedschema.eurisc;\r\n    import java.math.BigInteger;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import javax.xml.bind.annotation.XmlAccessType;\r\n    import javax.xml.bind.annotation.XmlAccessorType;\r\n    import javax.xml.bind.annotation.XmlAttribute;\r\n    import javax.xml.bind.annotation.XmlElement;\r\n    import javax.xml.bind.annotation.XmlRootElement;\r\n    import javax.xml.bind.annotation.XmlSchemaType;\r\n    import javax.xml.bind.annotation.XmlType;\r\n    import javax.xml.datatype.XMLGregorianCalendar;\r\n    \r\n    @XmlRootElement(name = &quot;EuriscACResponse&quot;)\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n    @XmlType(name = &quot;&quot;, propOrder = {\r\n        &quot;cd&quot;,\r\n        &quot;c&quot;,\r\n        &quot;e&quot;\r\n    })\r\n    public class EuriscACResponse {\r\n        @XmlElement(name = &quot;CD&quot;)\r\n        protected EuriscACResponse.CD cd;\r\n        @XmlElement(name = &quot;C&quot;)\r\n        protected EuriscACResponse.C c;\r\n        @XmlElement(name = &quot;E&quot;)\r\n        protected List&lt;Errore&gt; e;\r\n        public EuriscACResponse.CD getCD() {\r\n            return cd;\r\n        }\r\n        public void setCD(EuriscACResponse.CD value) {\r\n            this.cd = value;\r\n        }\r\n        public EuriscACResponse.C getC() {\r\n            return c;\r\n        }\r\n        public void setC(EuriscACResponse.C value) {\r\n            this.c = value;\r\n        }\r\n        public List&lt;Errore&gt; getE() {\r\n            if (e == null) {\r\n                e = new ArrayList&lt;Errore&gt;();\r\n            }\r\n            return this.e;\r\n        }\r\n        @XmlAccessorType(XmlAccessType.FIELD)\r\n        @XmlType(name = &quot;&quot;)\r\n        public static class C {\r\n            @XmlAttribute(name = &quot;CCC&quot;)\r\n            protected String ccc;\r\n            @XmlAttribute(name = &quot;CCE&quot;)\r\n            protected String cce;\r\n            @XmlAttribute(name = &quot;CCT&quot;)\r\n            protected String cct;\r\n            @XmlAttribute(name = &quot;FO&quot;)\r\n            protected String fo;\r\n            @XmlAttribute(name = &quot;V&quot;)\r\n            protected String v;\r\n            @XmlAttribute(name = &quot;LUI&quot;)\r\n            protected Boolean lui;\r\n            @XmlAttribute(name = &quot;ICR&quot;)\r\n            protected BigInteger icr;\r\n            @XmlAttribute(name = &quot;IRM&quot;)\r\n            protected BigInteger irm;\r\n            @XmlAttribute(name = &quot;FAC&quot;)\r\n            protected String fac;\r\n            @XmlAttribute(name = &quot;S&quot;)\r\n            protected String s;\r\n            public String getCCC() {\r\n                return ccc;\r\n            }\r\n            public void setCCC(String value) {\r\n                this.ccc = value;\r\n            }\r\n            public String getCCE() {\r\n                return cce;\r\n            }\r\n            public void setCCE(String value) {\r\n                this.cce = value;\r\n            }\r\n            public String getCCT() {\r\n                return cct;\r\n            }\r\n            public void setCCT(String value) {\r\n                this.cct = value;\r\n            }\r\n            public String getFO() {\r\n                return fo;\r\n            }\r\n            public void setFO(String value) {\r\n                this.fo = value;\r\n            }\r\n            public String getV() {\r\n                return v;\r\n            }\r\n            public void setV(String value) {\r\n                this.v = value;\r\n            }\r\n            public Boolean isLUI() {\r\n                return lui;\r\n            }\r\n            public void setLUI(Boolean value) {\r\n                this.lui = value;\r\n            }\r\n            public BigInteger getICR() {\r\n                return icr;\r\n            }\r\n            public void setICR(BigInteger value) {\r\n                this.icr = value;\r\n            }\r\n            public BigInteger getIRM() {\r\n                return irm;\r\n            }\r\n            public void setIRM(BigInteger value) {\r\n                this.irm = value;\r\n            }\r\n            public String getFAC() {\r\n                return fac;\r\n            }\r\n            public void setFAC(String value) {\r\n                this.fac = value;\r\n            }\r\n            public String getS() {\r\n                return s;\r\n            }\r\n            public void setS(String value) {\r\n                this.s = value;\r\n            }\r\n        }\r\n        @XmlAccessorType(XmlAccessType.FIELD)\r\n        @XmlType(name = &quot;&quot;)\r\n        public static class CD {\r\n            @XmlAttribute(name = &quot;CCC&quot;, required = true)\r\n            protected String ccc;\r\n            @XmlAttribute(name = &quot;CCE&quot;)\r\n            protected String cce;\r\n            @XmlAttribute(name = &quot;CCT&quot;)\r\n            protected String cct;\r\n            @XmlAttribute(name = &quot;DRF&quot;)\r\n            @XmlSchemaType(name = &quot;date&quot;)\r\n            protected XMLGregorianCalendar drf;\r\n            @XmlAttribute(name = &quot;DIO&quot;)\r\n            @XmlSchemaType(name = &quot;date&quot;)\r\n            protected XMLGregorianCalendar dio;\r\n            @XmlAttribute(name = &quot;TO&quot;, required = true)\r\n            protected String to;\r\n            @XmlAttribute(name = &quot;FO&quot;)\r\n            protected String fo;\r\n            @XmlAttribute(name = &quot;V&quot;)\r\n            protected String v;\r\n            @XmlAttribute(name = &quot;ICR&quot;)\r\n            protected BigInteger icr;\r\n            @XmlAttribute(name = &quot;IRM&quot;)\r\n            protected BigInteger irm;\r\n            @XmlAttribute(name = &quot;NR&quot;)\r\n            protected Integer nr;\r\n            @XmlAttribute(name = &quot;PR&quot;)\r\n            protected String pr;\r\n            @XmlAttribute(name = &quot;LUI&quot;)\r\n            protected Boolean lui;\r\n            public String getCCC() {\r\n                return ccc;\r\n            }\r\n            public void setCCC(String value) {\r\n                this.ccc = value;\r\n            }\r\n            public String getCCE() {\r\n                return cce;\r\n            }\r\n            public void setCCE(String value) {\r\n                this.cce = value;\r\n            }\r\n            public String getCCT() {\r\n                return cct;\r\n            }\r\n            public void setCCT(String value) {\r\n                this.cct = value;\r\n            }\r\n            public XMLGregorianCalendar getDRF() {\r\n                return drf;\r\n            }\r\n            public void setDRF(XMLGregorianCalendar value) {\r\n                this.drf = value;\r\n            }\r\n            public XMLGregorianCalendar getDIO() {\r\n                return dio;\r\n            }\r\n            public void setDIO(XMLGregorianCalendar value) {\r\n                this.dio = value;\r\n            }\r\n            public String getTO() {\r\n                return to;\r\n            }\r\n            public void setTO(String value) {\r\n                this.to = value;\r\n            }\r\n            public String getFO() {\r\n                return fo;\r\n            }\r\n            public void setFO(String value) {\r\n                this.fo = value;\r\n            }\r\n            public String getV() {\r\n                return v;\r\n            }\r\n            public void setV(String value) {\r\n                this.v = value;\r\n            }\r\n            public BigInteger getICR() {\r\n                return icr;\r\n            }\r\n            public void setICR(BigInteger value) {\r\n                this.icr = value;\r\n            }\r\n            public BigInteger getIRM() {\r\n                return irm;\r\n            }\r\n            public void setIRM(BigInteger value) {\r\n                this.irm = value;\r\n            }\r\n            public Integer getNR() {\r\n                return nr;\r\n            }\r\n            public void setNR(Integer value) {\r\n                this.nr = value;\r\n            }\r\n            public String getPR() {\r\n                return pr;\r\n            }\r\n            public void setPR(String value) {\r\n                this.pr = value;\r\n            }\r\n            public Boolean isLUI() {\r\n                return lui;\r\n            }\r\n            public void setLUI(Boolean value) {\r\n                this.lui = value;\r\n            }\r\n        }\r\n    }\r\n\r\nthe snippet in which I try to deserialize is like this\r\n\r\n\t\tJAXBContext jaxbContext = JAXBContext.newInstance(MessageResponse.class, EuriscACResponse.class);\r\n\t\tUnmarshaller unmarshaller = jaxbContext.createUnmarshaller();\r\n\r\n\t\tJAXBElement&lt;MessageResponse&gt; soapHead = unmarshaller.unmarshal(soapResponse.getSOAPHeader(), MessageResponse.class);\r\n\t\tList&lt;Object&gt; elementi = soapHead.getValue().getAny();\r\n\t\tMessageResponse result = (MessageResponse) elementi.get(0);\r\n\t\tList&lt;P&gt; risultatoFinaleHeader = result.getP();\r\n\t\tString descrizioneErroreHeader = risultatoFinaleHeader.get(0).getR().getD();\r\n\r\n\t\tif (!descrizioneErroreHeader.equals(&quot;Success.&quot;)) {\r\n\t\t\trispostaDto.setDescrErrore(&quot;Errore: &quot; + descrizioneErroreHeader);\r\n\t\t} else {\r\n\t\t\tJAXBElement&lt;EuriscACResponse&gt; soapBody = unmarshaller.unmarshal(soapResponse.getSOAPBody().getFirstChild().getFirstChild(), EuriscACResponse.class);\r\n\r\nbut it result in an error:\r\n\r\n    java.lang.IllegalArgumentException: Unexpected node type: [#text: &lt;MGResponse xmlns=&quot;urn:crif-messagegateway:2006-08-23&quot;&gt;&lt;EuriscACResponse xmlns=&quot;urn:crif-anagraficaunica-eurisc:2006-11-28&quot;&gt;&lt;CD CCC=&quot;163214729&quot; DRF=&quot;2023-02-27&quot; TO=&quot;FC&quot; FO=&quot;RC&quot; V=&quot;E&quot; ICR=&quot;5000&quot; /&gt;&lt;C CCC=&quot;163214729&quot; FO=&quot;RC&quot; V=&quot;E&quot; /&gt;&lt;/EuriscACResponse&gt;&lt;/MGResponse&gt;]\r\n\r\nwhere is my mistake?\r\nI&#39;m expecting that using the two getFirstChild lead me to the EuriscACResponse node, but obviously it&#39;s not so simple.\r\n","title":"nested body response with separate pojos","body":"<p>I have this xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot;&gt;\n    &lt;soap:Header&gt;\n        &lt;MessageResponse GId=&quot;JPEF&quot; MId=&quot;65effb8f-2180-428c-9285-527fdc97fc7a&quot; MTs=&quot;2023-03-02T19:40:14.201518+01:00&quot; METs=&quot;2023-03-12T19:40:14.201518+01:00&quot; xmlns=&quot;urn:crif-message:2006-08-23&quot;&gt;\n            &lt;P SId=&quot;S18&quot; PId=&quot;EuriscAC&quot; PNs=&quot;urn:crif-anagraficaunica-eurisc:2006-11-28&quot;&gt;\n                &lt;R L=&quot;en-US&quot; C=&quot;urn:crif-messagegateway:2006-08-23:S&quot; D=&quot;Success.&quot; /&gt;\n            &lt;/P&gt;\n            &lt;Tx TxNs=&quot;urn:crif-messagegateway:2006-08-23&quot;&gt;\n                &lt;R L=&quot;en-US&quot; C=&quot;urn:crif-messagegateway:2006-08-23:S&quot; D=&quot;Success.&quot; /&gt;\n            &lt;/Tx&gt;\n        &lt;/MessageResponse&gt;\n    &lt;/soap:Header&gt;\n    &lt;soap:Body&gt;\n        &lt;MGResponse xmlns=&quot;urn:crif-messagegateway:2006-08-23&quot;&gt;&amp;lt;MGResponse xmlns=&quot;urn:crif-messagegateway:2006-08-23&quot;&amp;gt;&amp;lt;EuriscACResponse xmlns=&quot;urn:crif-anagraficaunica-eurisc:2006-11-28&quot;&amp;gt;&amp;lt;CD CCC=&quot;163214729&quot; DRF=&quot;2023-02-27&quot; TO=&quot;FC&quot; FO=&quot;RC&quot; V=&quot;E&quot; ICR=&quot;5000&quot; /&amp;gt;&amp;lt;C CCC=&quot;163214729&quot; FO=&quot;RC&quot; V=&quot;E&quot; /&amp;gt;&amp;lt;/EuriscACResponse&amp;gt;&amp;lt;/MGResponse&amp;gt;&lt;/MGResponse&gt;\n    &lt;/soap:Body&gt;\n&lt;/soap:Envelope&gt;\n</code></pre>\n<p>and I have 2 pojos, one for the header and the other for the body.\nwhilst I succeed in deserialize the header, the body gives me an headache.</p>\n<p>the <em>header</em> pojo is</p>\n<pre><code>package generatedschema.header;\n\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport javax.xml.bind.annotation.XmlAccessType;\nimport javax.xml.bind.annotation.XmlAccessorType;\nimport javax.xml.bind.annotation.XmlAnyAttribute;\nimport javax.xml.bind.annotation.XmlAnyElement;\nimport javax.xml.bind.annotation.XmlAttribute;\nimport javax.xml.bind.annotation.XmlElement;\nimport javax.xml.bind.annotation.XmlRootElement;\nimport javax.xml.bind.annotation.XmlSchemaType;\nimport javax.xml.bind.annotation.XmlType;\nimport javax.xml.bind.annotation.adapters.CollapsedStringAdapter;\nimport javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;\nimport javax.xml.datatype.XMLGregorianCalendar;\nimport javax.xml.namespace.QName;\n\n\n@XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(name = &quot;&quot;, propOrder = {\n    &quot;p&quot;,\n    &quot;tx&quot;,\n    &quot;any&quot;\n})\n@XmlRootElement(name = &quot;MessageResponse&quot;)\npublic class MessageResponse\n    extends MessageAttributeSet\n{\n\n    @XmlElement(name = &quot;P&quot;, required = true)\n    protected List&lt;MessageResponse.P&gt; p;\n    @XmlElement(name = &quot;Tx&quot;, required = true)\n    protected MessageResponse.Tx tx;\n    @XmlAnyElement(lax = true)\n    protected List&lt;Object&gt; any;\n    @XmlAttribute(name = &quot;METs&quot;, required = true)\n    @XmlSchemaType(name = &quot;dateTime&quot;)\n    protected XMLGregorianCalendar meTs;\n\n    public List&lt;MessageResponse.P&gt; getP() {\n        if (p == null) {\n            p = new ArrayList&lt;MessageResponse.P&gt;();\n        }\n        return this.p;\n    }\n\n    public MessageResponse.Tx getTx() {\n        return tx;\n    }\n\n    public void setTx(MessageResponse.Tx value) {\n        this.tx = value;\n    }\n\n    public List&lt;Object&gt; getAny() {\n        if (any == null) {\n            any = new ArrayList&lt;Object&gt;();\n        }\n        return this.any;\n    }\n\n    public XMLGregorianCalendar getMETs() {\n        return meTs;\n    }\n\n    public void setMETs(XMLGregorianCalendar value) {\n        this.meTs = value;\n    }\n\n\n    @XmlAccessorType(XmlAccessType.FIELD)\n    @XmlType(name = &quot;&quot;, propOrder = {\n        &quot;r&quot;,\n        &quot;any&quot;\n    })\n    public static class P {\n\n        @XmlElement(name = &quot;R&quot;, required = true)\n        protected MessageResponse.P.R r;\n        @XmlAnyElement(lax = true)\n        protected List&lt;Object&gt; any;\n        @XmlAttribute(name = &quot;SId&quot;, required = true)\n        protected String sId;\n        @XmlAttribute(name = &quot;PId&quot;, required = true)\n        protected String pId;\n        @XmlAttribute(name = &quot;PNs&quot;, required = true)\n        protected String pNs;\n        @XmlAnyAttribute\n        private Map&lt;QName, String&gt; otherAttributes = new HashMap&lt;QName, String&gt;();\n\n        public MessageResponse.P.R getR() {\n            return r;\n        }\n\n        public void setR(MessageResponse.P.R value) {\n            this.r = value;\n        }\n\n        public List&lt;Object&gt; getAny() {\n            if (any == null) {\n                any = new ArrayList&lt;Object&gt;();\n            }\n            return this.any;\n        }\n\n        public String getSId() {\n            return sId;\n        }\n\n        public void setSId(String value) {\n            this.sId = value;\n        }\n\n        public String getPId() {\n            return pId;\n        }\n\n        public void setPId(String value) {\n            this.pId = value;\n        }\n\n        public String getPNs() {\n            return pNs;\n        }\n\n        public void setPNs(String value) {\n            this.pNs = value;\n        }\n\n        public Map&lt;QName, String&gt; getOtherAttributes() {\n            return otherAttributes;\n        }\n\n        @XmlAccessorType(XmlAccessType.FIELD)\n        @XmlType(name = &quot;&quot;)\n        public static class R {\n\n            @XmlAttribute(name = &quot;L&quot;, required = true)\n            @XmlJavaTypeAdapter(CollapsedStringAdapter.class)\n            @XmlSchemaType(name = &quot;language&quot;)\n            protected String l;\n            @XmlAttribute(name = &quot;C&quot;, required = true)\n            @XmlSchemaType(name = &quot;anyURI&quot;)\n            protected String c;\n            @XmlAttribute(name = &quot;D&quot;, required = true)\n            protected String d;\n            @XmlAnyAttribute\n            private Map&lt;QName, String&gt; otherAttributes = new HashMap&lt;QName, String&gt;();\n\n            public String getL() {\n                return l;\n            }\n\n            public void setL(String value) {\n                this.l = value;\n            }\n\n            public String getC() {\n                return c;\n            }\n\n            public void setC(String value) {\n                this.c = value;\n            }\n\n            public String getD() {\n                return d;\n            }\n\n            public void setD(String value) {\n                this.d = value;\n            }\n\n            public Map&lt;QName, String&gt; getOtherAttributes() {\n                return otherAttributes;\n            }\n\n        }\n\n    }\n\n\n    @XmlAccessorType(XmlAccessType.FIELD)\n    @XmlType(name = &quot;&quot;, propOrder = {\n        &quot;r&quot;,\n        &quot;any&quot;\n    })\n    public static class Tx {\n\n        @XmlElement(name = &quot;R&quot;, required = true)\n        protected MessageResponse.Tx.R r;\n        @XmlAnyElement(lax = true)\n        protected List&lt;Object&gt; any;\n        @XmlAttribute(name = &quot;TxNs&quot;, required = true)\n        protected String txNs;\n        @XmlAnyAttribute\n        private Map&lt;QName, String&gt; otherAttributes = new HashMap&lt;QName, String&gt;();\n\n        public MessageResponse.Tx.R getR() {\n            return r;\n        }\n\n        public void setR(MessageResponse.Tx.R value) {\n            this.r = value;\n        }\n\n        public List&lt;Object&gt; getAny() {\n            if (any == null) {\n                any = new ArrayList&lt;Object&gt;();\n            }\n            return this.any;\n        }\n\n        public String getTxNs() {\n            return txNs;\n        }\n\n        public void setTxNs(String value) {\n            this.txNs = value;\n        }\n\n        public Map&lt;QName, String&gt; getOtherAttributes() {\n            return otherAttributes;\n        }\n\n        @XmlAccessorType(XmlAccessType.FIELD)\n        @XmlType(name = &quot;&quot;)\n        public static class R {\n\n            @XmlAttribute(name = &quot;L&quot;, required = true)\n            @XmlJavaTypeAdapter(CollapsedStringAdapter.class)\n            @XmlSchemaType(name = &quot;language&quot;)\n            protected String l;\n            @XmlAttribute(name = &quot;C&quot;, required = true)\n            @XmlSchemaType(name = &quot;anyURI&quot;)\n            protected String c;\n            @XmlAttribute(name = &quot;D&quot;, required = true)\n            protected String d;\n            @XmlAnyAttribute\n            private Map&lt;QName, String&gt; otherAttributes = new HashMap&lt;QName, String&gt;();\n\n            public String getL() {\n                return l;\n            }\n\n            public void setL(String value) {\n                this.l = value;\n            }\n\n            public String getC() {\n                return c;\n            }\n\n            public void setC(String value) {\n                this.c = value;\n            }\n\n            public String getD() {\n                return d;\n            }\n\n            public void setD(String value) {\n                this.d = value;\n            }\n\n            public Map&lt;QName, String&gt; getOtherAttributes() {\n                return otherAttributes;\n            }\n        }\n    }\n}\n</code></pre>\n<p>and the pojo for the <em>body</em> in</p>\n<pre><code>package generatedschema.eurisc;\nimport java.math.BigInteger;\nimport java.util.ArrayList;\nimport java.util.List;\nimport javax.xml.bind.annotation.XmlAccessType;\nimport javax.xml.bind.annotation.XmlAccessorType;\nimport javax.xml.bind.annotation.XmlAttribute;\nimport javax.xml.bind.annotation.XmlElement;\nimport javax.xml.bind.annotation.XmlRootElement;\nimport javax.xml.bind.annotation.XmlSchemaType;\nimport javax.xml.bind.annotation.XmlType;\nimport javax.xml.datatype.XMLGregorianCalendar;\n\n@XmlRootElement(name = &quot;EuriscACResponse&quot;)\n@XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(name = &quot;&quot;, propOrder = {\n    &quot;cd&quot;,\n    &quot;c&quot;,\n    &quot;e&quot;\n})\npublic class EuriscACResponse {\n    @XmlElement(name = &quot;CD&quot;)\n    protected EuriscACResponse.CD cd;\n    @XmlElement(name = &quot;C&quot;)\n    protected EuriscACResponse.C c;\n    @XmlElement(name = &quot;E&quot;)\n    protected List&lt;Errore&gt; e;\n    public EuriscACResponse.CD getCD() {\n        return cd;\n    }\n    public void setCD(EuriscACResponse.CD value) {\n        this.cd = value;\n    }\n    public EuriscACResponse.C getC() {\n        return c;\n    }\n    public void setC(EuriscACResponse.C value) {\n        this.c = value;\n    }\n    public List&lt;Errore&gt; getE() {\n        if (e == null) {\n            e = new ArrayList&lt;Errore&gt;();\n        }\n        return this.e;\n    }\n    @XmlAccessorType(XmlAccessType.FIELD)\n    @XmlType(name = &quot;&quot;)\n    public static class C {\n        @XmlAttribute(name = &quot;CCC&quot;)\n        protected String ccc;\n        @XmlAttribute(name = &quot;CCE&quot;)\n        protected String cce;\n        @XmlAttribute(name = &quot;CCT&quot;)\n        protected String cct;\n        @XmlAttribute(name = &quot;FO&quot;)\n        protected String fo;\n        @XmlAttribute(name = &quot;V&quot;)\n        protected String v;\n        @XmlAttribute(name = &quot;LUI&quot;)\n        protected Boolean lui;\n        @XmlAttribute(name = &quot;ICR&quot;)\n        protected BigInteger icr;\n        @XmlAttribute(name = &quot;IRM&quot;)\n        protected BigInteger irm;\n        @XmlAttribute(name = &quot;FAC&quot;)\n        protected String fac;\n        @XmlAttribute(name = &quot;S&quot;)\n        protected String s;\n        public String getCCC() {\n            return ccc;\n        }\n        public void setCCC(String value) {\n            this.ccc = value;\n        }\n        public String getCCE() {\n            return cce;\n        }\n        public void setCCE(String value) {\n            this.cce = value;\n        }\n        public String getCCT() {\n            return cct;\n        }\n        public void setCCT(String value) {\n            this.cct = value;\n        }\n        public String getFO() {\n            return fo;\n        }\n        public void setFO(String value) {\n            this.fo = value;\n        }\n        public String getV() {\n            return v;\n        }\n        public void setV(String value) {\n            this.v = value;\n        }\n        public Boolean isLUI() {\n            return lui;\n        }\n        public void setLUI(Boolean value) {\n            this.lui = value;\n        }\n        public BigInteger getICR() {\n            return icr;\n        }\n        public void setICR(BigInteger value) {\n            this.icr = value;\n        }\n        public BigInteger getIRM() {\n            return irm;\n        }\n        public void setIRM(BigInteger value) {\n            this.irm = value;\n        }\n        public String getFAC() {\n            return fac;\n        }\n        public void setFAC(String value) {\n            this.fac = value;\n        }\n        public String getS() {\n            return s;\n        }\n        public void setS(String value) {\n            this.s = value;\n        }\n    }\n    @XmlAccessorType(XmlAccessType.FIELD)\n    @XmlType(name = &quot;&quot;)\n    public static class CD {\n        @XmlAttribute(name = &quot;CCC&quot;, required = true)\n        protected String ccc;\n        @XmlAttribute(name = &quot;CCE&quot;)\n        protected String cce;\n        @XmlAttribute(name = &quot;CCT&quot;)\n        protected String cct;\n        @XmlAttribute(name = &quot;DRF&quot;)\n        @XmlSchemaType(name = &quot;date&quot;)\n        protected XMLGregorianCalendar drf;\n        @XmlAttribute(name = &quot;DIO&quot;)\n        @XmlSchemaType(name = &quot;date&quot;)\n        protected XMLGregorianCalendar dio;\n        @XmlAttribute(name = &quot;TO&quot;, required = true)\n        protected String to;\n        @XmlAttribute(name = &quot;FO&quot;)\n        protected String fo;\n        @XmlAttribute(name = &quot;V&quot;)\n        protected String v;\n        @XmlAttribute(name = &quot;ICR&quot;)\n        protected BigInteger icr;\n        @XmlAttribute(name = &quot;IRM&quot;)\n        protected BigInteger irm;\n        @XmlAttribute(name = &quot;NR&quot;)\n        protected Integer nr;\n        @XmlAttribute(name = &quot;PR&quot;)\n        protected String pr;\n        @XmlAttribute(name = &quot;LUI&quot;)\n        protected Boolean lui;\n        public String getCCC() {\n            return ccc;\n        }\n        public void setCCC(String value) {\n            this.ccc = value;\n        }\n        public String getCCE() {\n            return cce;\n        }\n        public void setCCE(String value) {\n            this.cce = value;\n        }\n        public String getCCT() {\n            return cct;\n        }\n        public void setCCT(String value) {\n            this.cct = value;\n        }\n        public XMLGregorianCalendar getDRF() {\n            return drf;\n        }\n        public void setDRF(XMLGregorianCalendar value) {\n            this.drf = value;\n        }\n        public XMLGregorianCalendar getDIO() {\n            return dio;\n        }\n        public void setDIO(XMLGregorianCalendar value) {\n            this.dio = value;\n        }\n        public String getTO() {\n            return to;\n        }\n        public void setTO(String value) {\n            this.to = value;\n        }\n        public String getFO() {\n            return fo;\n        }\n        public void setFO(String value) {\n            this.fo = value;\n        }\n        public String getV() {\n            return v;\n        }\n        public void setV(String value) {\n            this.v = value;\n        }\n        public BigInteger getICR() {\n            return icr;\n        }\n        public void setICR(BigInteger value) {\n            this.icr = value;\n        }\n        public BigInteger getIRM() {\n            return irm;\n        }\n        public void setIRM(BigInteger value) {\n            this.irm = value;\n        }\n        public Integer getNR() {\n            return nr;\n        }\n        public void setNR(Integer value) {\n            this.nr = value;\n        }\n        public String getPR() {\n            return pr;\n        }\n        public void setPR(String value) {\n            this.pr = value;\n        }\n        public Boolean isLUI() {\n            return lui;\n        }\n        public void setLUI(Boolean value) {\n            this.lui = value;\n        }\n    }\n}\n</code></pre>\n<p>the snippet in which I try to deserialize is like this</p>\n<pre><code>    JAXBContext jaxbContext = JAXBContext.newInstance(MessageResponse.class, EuriscACResponse.class);\n    Unmarshaller unmarshaller = jaxbContext.createUnmarshaller();\n\n    JAXBElement&lt;MessageResponse&gt; soapHead = unmarshaller.unmarshal(soapResponse.getSOAPHeader(), MessageResponse.class);\n    List&lt;Object&gt; elementi = soapHead.getValue().getAny();\n    MessageResponse result = (MessageResponse) elementi.get(0);\n    List&lt;P&gt; risultatoFinaleHeader = result.getP();\n    String descrizioneErroreHeader = risultatoFinaleHeader.get(0).getR().getD();\n\n    if (!descrizioneErroreHeader.equals(&quot;Success.&quot;)) {\n        rispostaDto.setDescrErrore(&quot;Errore: &quot; + descrizioneErroreHeader);\n    } else {\n        JAXBElement&lt;EuriscACResponse&gt; soapBody = unmarshaller.unmarshal(soapResponse.getSOAPBody().getFirstChild().getFirstChild(), EuriscACResponse.class);\n</code></pre>\n<p>but it result in an error:</p>\n<pre><code>java.lang.IllegalArgumentException: Unexpected node type: [#text: &lt;MGResponse xmlns=&quot;urn:crif-messagegateway:2006-08-23&quot;&gt;&lt;EuriscACResponse xmlns=&quot;urn:crif-anagraficaunica-eurisc:2006-11-28&quot;&gt;&lt;CD CCC=&quot;163214729&quot; DRF=&quot;2023-02-27&quot; TO=&quot;FC&quot; FO=&quot;RC&quot; V=&quot;E&quot; ICR=&quot;5000&quot; /&gt;&lt;C CCC=&quot;163214729&quot; FO=&quot;RC&quot; V=&quot;E&quot; /&gt;&lt;/EuriscACResponse&gt;&lt;/MGResponse&gt;]\n</code></pre>\n<p>where is my mistake?\nI'm expecting that using the two getFirstChild lead me to the EuriscACResponse node, but obviously it's not so simple.</p>\n"},{"tags":["java","input","java.util.scanner","nosuchelementexception"],"answers":[{"tags":[],"owner":{"display_name":"user1766873"},"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1351046827,"creation_date":1351045131,"answer_id":13042106,"question_id":13042008,"body_markdown":"The problem is\r\n\r\n&gt; When a Scanner is closed, it will close its input source if the source implements the Closeable interface.\r\n\r\nhttp://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html\r\n\r\nThus `scan.close()` closes `System.in`.\r\n\r\n\r\nTo fix it you can make\r\n\r\n`Scanner scan` `static`\r\nand do not close it in PromptCustomerQty.  Code below works.\r\n\r\n\r\n    public static void main (String[] args) {   \r\n\r\n    // Create a customer\r\n    // Future proofing the possabiltiies of multiple customers\r\n    Customer customer = new Customer(&quot;Will&quot;);\r\n\r\n    // Create object for each Product\r\n    // (Name,Code,Description,Price)\r\n    // Initalize Qty at 0\r\n    Product Computer = new Product(&quot;Computer&quot;,&quot;PC1003&quot;,&quot;Basic Computer&quot;,399.99); \r\n    Product Monitor = new Product(&quot;Monitor&quot;,&quot;MN1003&quot;,&quot;LCD Monitor&quot;,99.99);\r\n    Product Printer = new Product(&quot;Printer&quot;,&quot;PR1003x&quot;,&quot;Inkjet Printer&quot;,54.23);\r\n\r\n    // Define internal variables \r\n    // ## DONT CHANGE \r\n    ArrayList&lt;Product&gt; ProductList = new ArrayList&lt;Product&gt;(); // List to store Products\r\n    String formatString = &quot;%-15s %-10s %-20s %-10s %-10s %n&quot;; // Default format for output\r\n\r\n    // Add objects to list\r\n    ProductList.add(Computer);\r\n    ProductList.add(Monitor);\r\n    ProductList.add(Printer);\r\n\r\n    // Ask users for quantities \r\n    PromptCustomerQty(customer, ProductList);\r\n\r\n    // Ask user for payment method\r\n    PromptCustomerPayment(customer);\r\n\r\n    // Create the header\r\n    PrintHeader(customer, formatString);\r\n\r\n    // Create Body\r\n    PrintBody(ProductList, formatString);   \r\n    }\r\n\r\n    static Scanner scan;\r\n\r\n    public static void PromptCustomerQty(Customer customer, ArrayList&lt;Product&gt; ProductList)               {\r\n    // Initiate a Scanner\r\n    scan = new Scanner(System.in);\r\n\r\n    // **** VARIABLES ****\r\n    int qty = 0;\r\n\r\n    // Greet Customer\r\n    System.out.println(&quot;Hello &quot; + customer.getName());\r\n\r\n    // Loop through each item and ask for qty desired\r\n    for (Product p : ProductList) {\r\n\r\n        do {\r\n        // Ask user for qty\r\n        System.out.println(&quot;How many would you like for product: &quot; + p.name);\r\n        System.out.print(&quot;&gt; &quot;);\r\n\r\n        // Get input and set qty for the object\r\n        qty = scan.nextInt();\r\n\r\n        }\r\n        while (qty &lt; 0); // Validation\r\n\r\n        p.setQty(qty); // Set qty for object\r\n        qty = 0; // Reset count\r\n    }\r\n\r\n    // Cleanup\r\n\r\n    }\r\n\r\n    public static void PromptCustomerPayment (Customer customer) {\r\n    // Variables\r\n    String payment = &quot;&quot;;\r\n\r\n    // Prompt User\r\n    do {\r\n    System.out.println(&quot;Would you like to pay in full? [Yes/No]&quot;);\r\n    System.out.print(&quot;&gt; &quot;);\r\n\r\n    payment = scan.next();\r\n\r\n    } while ((!payment.toLowerCase().equals(&quot;yes&quot;)) &amp;&amp; (!payment.toLowerCase().equals(&quot;no&quot;)));\r\n\r\n    // Check/set result\r\n    if (payment.toLowerCase() == &quot;yes&quot;) {\r\n        customer.setPaidInFull(true);\r\n    }\r\n    else {\r\n        customer.setPaidInFull(false);\r\n    }\r\n    }\r\n\r\n\r\nOn a side note, you shouldn&#39;t use `==` for String comparision, use `.equals` instead.","title":"java.util.NoSuchElementException - Scanner reading user input","body":"<p>The problem is</p>\n\n<blockquote>\n  <p>When a Scanner is closed, it will close its input source if the source implements the Closeable interface.</p>\n</blockquote>\n\n<p><a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html\" rel=\"noreferrer\">http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html</a></p>\n\n<p>Thus <code>scan.close()</code> closes <code>System.in</code>.</p>\n\n<p>To fix it you can make</p>\n\n<p><code>Scanner scan</code> <code>static</code>\nand do not close it in PromptCustomerQty.  Code below works.</p>\n\n<pre><code>public static void main (String[] args) {   \n\n// Create a customer\n// Future proofing the possabiltiies of multiple customers\nCustomer customer = new Customer(\"Will\");\n\n// Create object for each Product\n// (Name,Code,Description,Price)\n// Initalize Qty at 0\nProduct Computer = new Product(\"Computer\",\"PC1003\",\"Basic Computer\",399.99); \nProduct Monitor = new Product(\"Monitor\",\"MN1003\",\"LCD Monitor\",99.99);\nProduct Printer = new Product(\"Printer\",\"PR1003x\",\"Inkjet Printer\",54.23);\n\n// Define internal variables \n// ## DONT CHANGE \nArrayList&lt;Product&gt; ProductList = new ArrayList&lt;Product&gt;(); // List to store Products\nString formatString = \"%-15s %-10s %-20s %-10s %-10s %n\"; // Default format for output\n\n// Add objects to list\nProductList.add(Computer);\nProductList.add(Monitor);\nProductList.add(Printer);\n\n// Ask users for quantities \nPromptCustomerQty(customer, ProductList);\n\n// Ask user for payment method\nPromptCustomerPayment(customer);\n\n// Create the header\nPrintHeader(customer, formatString);\n\n// Create Body\nPrintBody(ProductList, formatString);   \n}\n\nstatic Scanner scan;\n\npublic static void PromptCustomerQty(Customer customer, ArrayList&lt;Product&gt; ProductList)               {\n// Initiate a Scanner\nscan = new Scanner(System.in);\n\n// **** VARIABLES ****\nint qty = 0;\n\n// Greet Customer\nSystem.out.println(\"Hello \" + customer.getName());\n\n// Loop through each item and ask for qty desired\nfor (Product p : ProductList) {\n\n    do {\n    // Ask user for qty\n    System.out.println(\"How many would you like for product: \" + p.name);\n    System.out.print(\"&gt; \");\n\n    // Get input and set qty for the object\n    qty = scan.nextInt();\n\n    }\n    while (qty &lt; 0); // Validation\n\n    p.setQty(qty); // Set qty for object\n    qty = 0; // Reset count\n}\n\n// Cleanup\n\n}\n\npublic static void PromptCustomerPayment (Customer customer) {\n// Variables\nString payment = \"\";\n\n// Prompt User\ndo {\nSystem.out.println(\"Would you like to pay in full? [Yes/No]\");\nSystem.out.print(\"&gt; \");\n\npayment = scan.next();\n\n} while ((!payment.toLowerCase().equals(\"yes\")) &amp;&amp; (!payment.toLowerCase().equals(\"no\")));\n\n// Check/set result\nif (payment.toLowerCase() == \"yes\") {\n    customer.setPaidInFull(true);\n}\nelse {\n    customer.setPaidInFull(false);\n}\n}\n</code></pre>\n\n<p>On a side note, you shouldn't use <code>==</code> for String comparision, use <code>.equals</code> instead.</p>\n"},{"tags":[],"owner":{"account_id":1885169,"reputation":34027,"user_id":1704529,"display_name":"Yogendra Singh"},"down_vote_count":0,"up_vote_count":190,"is_accepted":true,"score":190,"last_activity_date":1469973276,"creation_date":1351046757,"answer_id":13042296,"question_id":13042008,"body_markdown":"**This has really puzzled me for a while but this is what I found in the end.**\r\n\r\nWhen you call, `sc.close()` in first method, it not only closes your scanner but closes your `System.in` input stream as well. You can verify it by printing its status at very top of the second method as :\r\n\r\n        System.out.println(System.in.available());\r\n\r\nSo, now when you re-instantiate, `Scanner` in second method, it doesn&#39;t find any open `System.in` stream and hence the exception.\r\n\r\nI doubt if there is any way out to reopen `System.in` because:\r\n\r\n`public void close() throws IOException --&gt; Closes this input stream and releases any system resources associated with this stream. The general contract of close is that it closes the input stream. A closed stream cannot perform input operations and **cannot be reopened.**`\r\n\r\nThe only good solution for your problem is to initiate the `Scanner` in your main method, pass that as argument in your two methods, and close it again in your main method e.g.:\r\n   \r\n`main` method related code block:\r\n\r\n    Scanner scanner = new Scanner(System.in);  \r\n    \r\n    // Ask users for quantities \r\n    PromptCustomerQty(customer, ProductList, scanner );\r\n\r\n    // Ask user for payment method\r\n    PromptCustomerPayment(customer, scanner );\r\n     \r\n    //close the scanner \r\n    scanner.close();\r\n\r\n\r\nYour Methods:\r\n\r\n     public static void PromptCustomerQty(Customer customer, \r\n                                 ArrayList&lt;Product&gt; ProductList, Scanner scanner) {\r\n\r\n        // no more scanner instantiation\r\n        ...\r\n        // no more scanner close\r\n     }\r\n\r\n\r\n     public static void PromptCustomerPayment (Customer customer, Scanner sc) {\r\n\r\n        // no more scanner instantiation\r\n        ...\r\n        // no more scanner close\r\n     }\r\n\r\nHope this gives you some insight about the failure and possible resolution.\r\n","title":"java.util.NoSuchElementException - Scanner reading user input","body":"<p><strong>This has really puzzled me for a while but this is what I found in the end.</strong></p>\n\n<p>When you call, <code>sc.close()</code> in first method, it not only closes your scanner but closes your <code>System.in</code> input stream as well. You can verify it by printing its status at very top of the second method as :</p>\n\n<pre><code>    System.out.println(System.in.available());\n</code></pre>\n\n<p>So, now when you re-instantiate, <code>Scanner</code> in second method, it doesn't find any open <code>System.in</code> stream and hence the exception.</p>\n\n<p>I doubt if there is any way out to reopen <code>System.in</code> because:</p>\n\n<p><code>public void close() throws IOException --&gt; Closes this input stream and releases any system resources associated with this stream. The general contract of close is that it closes the input stream. A closed stream cannot perform input operations and **cannot be reopened.**</code></p>\n\n<p>The only good solution for your problem is to initiate the <code>Scanner</code> in your main method, pass that as argument in your two methods, and close it again in your main method e.g.:</p>\n\n<p><code>main</code> method related code block:</p>\n\n<pre><code>Scanner scanner = new Scanner(System.in);  \n\n// Ask users for quantities \nPromptCustomerQty(customer, ProductList, scanner );\n\n// Ask user for payment method\nPromptCustomerPayment(customer, scanner );\n\n//close the scanner \nscanner.close();\n</code></pre>\n\n<p>Your Methods:</p>\n\n<pre><code> public static void PromptCustomerQty(Customer customer, \n                             ArrayList&lt;Product&gt; ProductList, Scanner scanner) {\n\n    // no more scanner instantiation\n    ...\n    // no more scanner close\n }\n\n\n public static void PromptCustomerPayment (Customer customer, Scanner sc) {\n\n    // no more scanner instantiation\n    ...\n    // no more scanner close\n }\n</code></pre>\n\n<p>Hope this gives you some insight about the failure and possible resolution.</p>\n"},{"tags":[],"owner":{"account_id":19204643,"reputation":95,"user_id":14031802,"display_name":"Shady"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1597743876,"creation_date":1597737687,"answer_id":63464274,"question_id":13042008,"body_markdown":"You need to remove the scanner closing lines: `scan.close();`\r\n\r\nIt happened to me before and that was the reason.\r\n\r\n\r\n\r\n","title":"java.util.NoSuchElementException - Scanner reading user input","body":"<p>You need to remove the scanner closing lines: <code>scan.close();</code></p>\n<p>It happened to me before and that was the reason.</p>\n"},{"tags":[],"owner":{"account_id":19958834,"reputation":21,"user_id":14626924,"display_name":"Eduardo Salvadinha"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1605195959,"creation_date":1605195959,"answer_id":64807117,"question_id":13042008,"body_markdown":"the reason of the exception has been explained already, however the suggested solution isn&#39;t really the best.\r\n\r\nYou should create a class that keeps a Scanner as private using Singleton Pattern, that makes that scanner unique on your code.\r\n\r\nThen you can implement the methods you need or you can create a getScanner ( not recommended ) and you can control it with a private boolean, something like alreadyClosed.\r\n\r\nIf you are not aware how to use Singleton Pattern, here&#39;s a example:\r\n\r\n```\r\npublic class Reader {\r\n\t\r\n\t\r\n\tprivate Scanner reader;\r\n\tprivate static Reader singleton = null;\r\n\tprivate boolean alreadyClosed;\r\n\t\r\n\tprivate Reader() {\r\n\t\talreadyClosed = false;\r\n\t\treader = new Scanner(System.in);\r\n\t}\r\n\t\r\n\tpublic static Reader getInstance() {\r\n\t\tif(singleton == null) {\r\n\t\t\tsingleton = new Reader();\r\n\t\t}\r\n\t\treturn singleton;\r\n\t}\r\n\t\r\n\tpublic int nextInt() throws AlreadyClosedException {\r\n\t\tif(!alreadyClosed) {\r\n\t\t\treturn reader.nextInt();\r\n\t\t}\r\n\t\tthrow new AlreadyClosedException(); //Custom exception\r\n\t}\r\n\t\r\n\tpublic double nextDouble() throws AlreadyClosedException {\r\n\t\tif(!alreadyClosed) {\r\n\t\t\treturn reader.nextDouble();\r\n\t\t}\r\n\t\tthrow new AlreadyClosedException();\r\n\t}\r\n\t\r\n\tpublic String nextLine() throws AlreadyClosedException {\r\n\t\tif(!alreadyClosed) {\r\n\t\t\treturn reader.nextLine();\r\n\t\t}\r\n\t\tthrow new AlreadyClosedException();\r\n\t}\r\n\t\r\n\tpublic void close() {\r\n\t\talreadyClosed = true;\r\n\t\treader.close();\r\n\t}\t\r\n}\r\n\r\n```\r\n","title":"java.util.NoSuchElementException - Scanner reading user input","body":"<p>the reason of the exception has been explained already, however the suggested solution isn't really the best.</p>\n<p>You should create a class that keeps a Scanner as private using Singleton Pattern, that makes that scanner unique on your code.</p>\n<p>Then you can implement the methods you need or you can create a getScanner ( not recommended ) and you can control it with a private boolean, something like alreadyClosed.</p>\n<p>If you are not aware how to use Singleton Pattern, here's a example:</p>\n<pre><code>public class Reader {\n    \n    \n    private Scanner reader;\n    private static Reader singleton = null;\n    private boolean alreadyClosed;\n    \n    private Reader() {\n        alreadyClosed = false;\n        reader = new Scanner(System.in);\n    }\n    \n    public static Reader getInstance() {\n        if(singleton == null) {\n            singleton = new Reader();\n        }\n        return singleton;\n    }\n    \n    public int nextInt() throws AlreadyClosedException {\n        if(!alreadyClosed) {\n            return reader.nextInt();\n        }\n        throw new AlreadyClosedException(); //Custom exception\n    }\n    \n    public double nextDouble() throws AlreadyClosedException {\n        if(!alreadyClosed) {\n            return reader.nextDouble();\n        }\n        throw new AlreadyClosedException();\n    }\n    \n    public String nextLine() throws AlreadyClosedException {\n        if(!alreadyClosed) {\n            return reader.nextLine();\n        }\n        throw new AlreadyClosedException();\n    }\n    \n    public void close() {\n        alreadyClosed = true;\n        reader.close();\n    }   \n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14633071,"reputation":358,"user_id":10568210,"display_name":"Alex Ertl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1647227770,"creation_date":1647227770,"answer_id":71462635,"question_id":13042008,"body_markdown":"For anyone who arrived here while taking an online exam on a site like HackerRank-\r\n\r\nYou might receive this if you are trying to test your (possibly) perfectly fine code by clicking the button to execute main() with custom input.\r\n\r\nIn this case, you need to be clicking the other button, something like &quot;Run Unit Tests&quot;. You&#39;re likely only being evaluated on whether the code passes the unit tests they wrote- not your ability to refactor code to fewer LOC or your coding style.","title":"java.util.NoSuchElementException - Scanner reading user input","body":"<p>For anyone who arrived here while taking an online exam on a site like HackerRank-</p>\n<p>You might receive this if you are trying to test your (possibly) perfectly fine code by clicking the button to execute main() with custom input.</p>\n<p>In this case, you need to be clicking the other button, something like &quot;Run Unit Tests&quot;. You're likely only being evaluated on whether the code passes the unit tests they wrote- not your ability to refactor code to fewer LOC or your coding style.</p>\n"},{"tags":[],"owner":{"account_id":27929294,"reputation":1,"user_id":21327729,"display_name":"Maheeka Kossinna"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677865299,"creation_date":1677865299,"answer_id":75630268,"question_id":13042008,"body_markdown":"Found this thread because I ran into the same problem. After finding the cause from here, a method I found to be useful was to use the separate scanner objects for the different uses (since it is otherwise buggy if taking multiple inputs with a single scanner objects), and then close all scanner objects when all scanner objects are finished being used. Made for clearer code and didn&#39;t run into any problems after that.","title":"java.util.NoSuchElementException - Scanner reading user input","body":"<p>Found this thread because I ran into the same problem. After finding the cause from here, a method I found to be useful was to use the separate scanner objects for the different uses (since it is otherwise buggy if taking multiple inputs with a single scanner objects), and then close all scanner objects when all scanner objects are finished being used. Made for clearer code and didn't run into any problems after that.</p>\n"}],"owner":{"account_id":1971095,"reputation":1537,"user_id":1769999,"accept_rate":84,"display_name":"fortune"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":156645,"favorite_count":0,"down_vote_count":1,"up_vote_count":91,"accepted_answer_id":13042296,"answer_count":6,"score":90,"last_activity_date":1677865299,"creation_date":1351044285,"question_id":13042008,"body_markdown":"I&#39;m new to using Java, but I have some previous experience with C#. The issue I&#39;m having comes with reading user input from console.\r\n\r\nI&#39;m running into the &quot;java.util.NoSuchElementException&quot; error with this portion of code:\r\n\r\n    payment = sc.next(); // PromptCustomerPayment function\r\n\r\nI have two functions that get user input:\r\n\r\n - PromptCustomerQty\r\n - PromptCustomerPayment\r\n\r\nIf I don&#39;t call PromptCustomerQty then I don&#39;t get this error, which leads me to believe I am doing something wrong with scanner. Below is my full code sample. I appreciate any help. \r\n\r\n    public static void main (String[] args) {\t\r\n\t\t\r\n\t\t// Create a customer\r\n\t\t// Future proofing the possabiltiies of multiple customers\r\n\t\tCustomer customer = new Customer(&quot;Will&quot;);\r\n\t\t\r\n\t\t// Create object for each Product\r\n\t\t// (Name,Code,Description,Price)\r\n\t\t// Initalize Qty at 0\r\n\t\tProduct Computer = new Product(&quot;Computer&quot;,&quot;PC1003&quot;,&quot;Basic Computer&quot;,399.99); \r\n\t\tProduct Monitor = new Product(&quot;Monitor&quot;,&quot;MN1003&quot;,&quot;LCD Monitor&quot;,99.99);\r\n\t\tProduct Printer = new Product(&quot;Printer&quot;,&quot;PR1003x&quot;,&quot;Inkjet Printer&quot;,54.23);\r\n\t\t\r\n\t\t// Define internal variables \r\n\t\t// ## DONT CHANGE \r\n\t\tArrayList&lt;Product&gt; ProductList = new ArrayList&lt;Product&gt;(); // List to store Products\r\n\t\tString formatString = &quot;%-15s %-10s %-20s %-10s %-10s %n&quot;; // Default format for output\r\n\r\n\t\t// Add objects to list\r\n\t\tProductList.add(Computer);\r\n\t\tProductList.add(Monitor);\r\n\t\tProductList.add(Printer);\r\n\t\t\r\n\t\t// Ask users for quantities \r\n\t\tPromptCustomerQty(customer, ProductList);\r\n\t\t\r\n\t\t// Ask user for payment method\r\n\t\tPromptCustomerPayment(customer);\r\n\t\t\r\n\t\t// Create the header\r\n\t\tPrintHeader(customer, formatString);\r\n\t\t\r\n\t\t// Create Body\r\n\t\tPrintBody(ProductList, formatString);\t\r\n\t}\r\n\t\r\n\tpublic static void PromptCustomerQty(Customer customer, ArrayList&lt;Product&gt; ProductList) {\r\n\t\t// Initiate a Scanner\r\n\t\tScanner scan = new Scanner(System.in);\r\n\t\t\r\n\t\t// **** VARIABLES ****\r\n\t\tint qty = 0;\r\n\t\t\r\n\t\t// Greet Customer\r\n\t\tSystem.out.println(&quot;Hello &quot; + customer.getName());\r\n\t\t\r\n\t\t// Loop through each item and ask for qty desired\r\n\t\tfor (Product p : ProductList) {\r\n\t\r\n\t\t\tdo {\r\n\t\t\t// Ask user for qty\r\n\t\t\tSystem.out.println(&quot;How many would you like for product: &quot; + p.name);\r\n\t\t\tSystem.out.print(&quot;&gt; &quot;);\r\n\t\t\t\r\n\t\t\t// Get input and set qty for the object\r\n\t\t\tqty = scan.nextInt();\r\n\t\t\t\r\n\t\t\t}\r\n\t\t\twhile (qty &lt; 0); // Validation\r\n\t\t\t\r\n\t\t\tp.setQty(qty); // Set qty for object\r\n\t\t\tqty = 0; // Reset count\r\n\t\t}\r\n\t\t\r\n\t\t// Cleanup\r\n\t\tscan.close();\r\n\t}\r\n\t\r\n\tpublic static void PromptCustomerPayment (Customer customer) {\r\n\t\t// Initiate Scanner \r\n\t\tScanner sc = new Scanner(System.in);\r\n\t\t\r\n\t\t// Variables\r\n\t\tString payment = &quot;&quot;;\r\n\r\n\t\t// Prompt User\r\n\t\tdo {\r\n\t\tSystem.out.println(&quot;Would you like to pay in full? [Yes/No]&quot;);\r\n\t\tSystem.out.print(&quot;&gt; &quot;);\r\n\t\t\r\n\t\tpayment = sc.next();\r\n\t\t\r\n\t\t} while ((!payment.toLowerCase().equals(&quot;yes&quot;)) &amp;&amp; (!payment.toLowerCase().equals(&quot;no&quot;)));\r\n\t\t\r\n\t\t// Check/set result\r\n\t\tif (payment.toLowerCase().equals(&quot;yes&quot;)) {\r\n\t\t\tcustomer.setPaidInFull(true);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tcustomer.setPaidInFull(false);\r\n\t\t}\r\n\t\t\r\n\t\t// Cleanup\r\n\t\tsc.close();\t\r\n\t}","title":"java.util.NoSuchElementException - Scanner reading user input","body":"<p>I'm new to using Java, but I have some previous experience with C#. The issue I'm having comes with reading user input from console.</p>\n<p>I'm running into the &quot;java.util.NoSuchElementException&quot; error with this portion of code:</p>\n<pre><code>payment = sc.next(); // PromptCustomerPayment function\n</code></pre>\n<p>I have two functions that get user input:</p>\n<ul>\n<li>PromptCustomerQty</li>\n<li>PromptCustomerPayment</li>\n</ul>\n<p>If I don't call PromptCustomerQty then I don't get this error, which leads me to believe I am doing something wrong with scanner. Below is my full code sample. I appreciate any help.</p>\n<pre><code>public static void main (String[] args) {   \n    \n    // Create a customer\n    // Future proofing the possabiltiies of multiple customers\n    Customer customer = new Customer(&quot;Will&quot;);\n    \n    // Create object for each Product\n    // (Name,Code,Description,Price)\n    // Initalize Qty at 0\n    Product Computer = new Product(&quot;Computer&quot;,&quot;PC1003&quot;,&quot;Basic Computer&quot;,399.99); \n    Product Monitor = new Product(&quot;Monitor&quot;,&quot;MN1003&quot;,&quot;LCD Monitor&quot;,99.99);\n    Product Printer = new Product(&quot;Printer&quot;,&quot;PR1003x&quot;,&quot;Inkjet Printer&quot;,54.23);\n    \n    // Define internal variables \n    // ## DONT CHANGE \n    ArrayList&lt;Product&gt; ProductList = new ArrayList&lt;Product&gt;(); // List to store Products\n    String formatString = &quot;%-15s %-10s %-20s %-10s %-10s %n&quot;; // Default format for output\n\n    // Add objects to list\n    ProductList.add(Computer);\n    ProductList.add(Monitor);\n    ProductList.add(Printer);\n    \n    // Ask users for quantities \n    PromptCustomerQty(customer, ProductList);\n    \n    // Ask user for payment method\n    PromptCustomerPayment(customer);\n    \n    // Create the header\n    PrintHeader(customer, formatString);\n    \n    // Create Body\n    PrintBody(ProductList, formatString);   \n}\n\npublic static void PromptCustomerQty(Customer customer, ArrayList&lt;Product&gt; ProductList) {\n    // Initiate a Scanner\n    Scanner scan = new Scanner(System.in);\n    \n    // **** VARIABLES ****\n    int qty = 0;\n    \n    // Greet Customer\n    System.out.println(&quot;Hello &quot; + customer.getName());\n    \n    // Loop through each item and ask for qty desired\n    for (Product p : ProductList) {\n\n        do {\n        // Ask user for qty\n        System.out.println(&quot;How many would you like for product: &quot; + p.name);\n        System.out.print(&quot;&gt; &quot;);\n        \n        // Get input and set qty for the object\n        qty = scan.nextInt();\n        \n        }\n        while (qty &lt; 0); // Validation\n        \n        p.setQty(qty); // Set qty for object\n        qty = 0; // Reset count\n    }\n    \n    // Cleanup\n    scan.close();\n}\n\npublic static void PromptCustomerPayment (Customer customer) {\n    // Initiate Scanner \n    Scanner sc = new Scanner(System.in);\n    \n    // Variables\n    String payment = &quot;&quot;;\n\n    // Prompt User\n    do {\n    System.out.println(&quot;Would you like to pay in full? [Yes/No]&quot;);\n    System.out.print(&quot;&gt; &quot;);\n    \n    payment = sc.next();\n    \n    } while ((!payment.toLowerCase().equals(&quot;yes&quot;)) &amp;&amp; (!payment.toLowerCase().equals(&quot;no&quot;)));\n    \n    // Check/set result\n    if (payment.toLowerCase().equals(&quot;yes&quot;)) {\n        customer.setPaidInFull(true);\n    }\n    else {\n        customer.setPaidInFull(false);\n    }\n    \n    // Cleanup\n    sc.close(); \n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":4395013,"reputation":1126,"user_id":3582362,"accept_rate":100,"display_name":"Calvin P."},"score":0,"creation_date":1677862219,"post_id":75629684,"comment_id":133427127,"body_markdown":"Just to clarify, are you trying to print each transaction or just the total income/expense for each day?","body":"Just to clarify, are you trying to print each transaction or just the total income/expense for each day?"},{"owner":{"account_id":27928720,"reputation":35,"user_id":21327269,"display_name":"koderkodo"},"score":0,"creation_date":1677862584,"post_id":75629684,"comment_id":133427230,"body_markdown":"No, I don&#39;t need to print every transaction, I just want to print total balance for each date where transactions are created, for example, if on `03/03/2023` user created three transactions and I want to print `income - expense` result. I think I gave a good example at the end of the questions about what expected output is. \n\nIf the user has transactions for 10 different dates, show `income - expense` result for every date","body":"No, I don&#39;t need to print every transaction, I just want to print total balance for each date where transactions are created, for example, if on <code>03&#47;03&#47;2023</code> user created three transactions and I want to print <code>income - expense</code> result. I think I gave a good example at the end of the questions about what expected output is.   If the user has transactions for 10 different dates, show <code>income - expense</code> result for every date"},{"owner":{"account_id":27928720,"reputation":35,"user_id":21327269,"display_name":"koderkodo"},"score":0,"creation_date":1677862705,"post_id":75629684,"comment_id":133427272,"body_markdown":"See the example in question after `.... Imagine user have the next transactions.` and also I provided more examples at the end of the question.","body":"See the example in question after <code>.... Imagine user have the next transactions.</code> and also I provided more examples at the end of the question."}],"owner":{"account_id":27928720,"reputation":35,"user_id":21327269,"display_name":"koderkodo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677865083,"creation_date":1677861421,"question_id":75629684,"body_markdown":"I&#39;ll be direct.\r\n\r\nUser have wallets, on each wallet they can create a transaction, the transaction can be income or expense.\r\n\r\nWhen a user is creating a transaction he also picks a date when that transaction is created, then I have a controller to display all user transactions. And this is the format to display it. Imagine user have the next transactions.\r\n\r\n`Income: &gt; Amount: 50, Date: 03/03/2023`\r\n\r\n`Income: &gt; Amount: 50, Date: 03/03/2023`\r\n\r\n`Expense: &gt; Amount: 50, Date: 03/03/2023`\r\n\r\n`Income: &gt; Amount: 100, Date: 03/16/2023`\r\n\r\n`Expense: &gt; Amount: 15, Date: 03/16/2023`\r\n\r\nAnd on the page I would like to display:\r\n\r\n`Transaction: 03/03/2023/ Balance: 100` Because, that is `income - expense`\r\n\r\n`Transaction: 03/16/2023/ Balance: 85` Because, that is `income - expense`\r\n\r\nHow I tried and what are various outputs based on attempts:\r\n\r\n```\r\n@GetMapping(&quot;/userTransactions/{user_id}&quot;)\r\npublic String getUserTransactions(@PathVariable(&quot;user_id&quot;) long user_id, TransactionGroup transactionGroup, Model model) {\r\n    Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\r\n    UserDetailsImpl user = (UserDetailsImpl) authentication.getPrincipal();\r\n    long userId = user.getId();\r\n    model.addAttribute(&quot;userId&quot;, userId);\r\n\r\n    List&lt;Transaction&gt; transactions = transactionRepository.getTransactionsByUserId(user_id);\r\n    List&lt;TransactionGroup&gt; transactionByDate = new ArrayList&lt;&gt;();\r\n    List&lt;Transaction&gt; transOnSingleDate = new ArrayList&lt;&gt;();\r\n    boolean currDates = transactions.stream().findFirst().isPresent();\r\n\r\n    if (currDates) {\r\n        LocalDate currDate = transactions.get(0).getDate();\r\n\r\n        TransactionGroup transGroup = new TransactionGroup();\r\n\r\n        for (Transaction t : transactions) {\r\n            if (!currDate.isEqual(t.getDate())) {\r\n                transGroup.setDate(currDate);\r\n                transGroup.setTransactions(transOnSingleDate);\r\n                transactionByDate.add(transGroup);\r\n                transGroup = new TransactionGroup();\r\n                transOnSingleDate = new ArrayList&lt;&gt;();\r\n            }\r\n\r\n            transOnSingleDate.add(t);\r\n            currDate = t.getDate();\r\n        }\r\n        transGroup.setDate(currDate);\r\n        transGroup.setTransactions(transOnSingleDate);\r\n        transactionByDate.add(transGroup);\r\n\r\n\r\n        for (int i = 0; i &lt; transactionByDate.size(); i++) {\r\n            LocalDate date = transGroup.getDate();\r\n            transactions = transGroup.getTransactions();\r\n            double income = transactions.stream()\r\n                    .filter(trans -&gt; trans.getTransactionType().getDisplayName().equalsIgnoreCase(&quot;income&quot;))\r\n                    .mapToDouble(Transaction::getAmount)\r\n                    .sum();\r\n            double expense = transactions.stream()\r\n                    .filter(trans -&gt; trans.getTransactionType().getDisplayName().equalsIgnoreCase(&quot;expense&quot;))\r\n                    .mapToDouble(Transaction::getAmount)\r\n                    .sum();\r\n            double left = income - expense;\r\n            System.out.println(&quot;date:&quot; + date + &quot;,income:&quot; + income + &quot;,expense:&quot; + expense + &quot;,left:&quot; + left);\r\n        }\r\n    } else {\r\n        System.out.println(&quot;Empty&quot;);\r\n    }\r\n\r\n\r\n    model.addAttribute(&quot;transactionGroup&quot;, transactionByDate);\r\n    return &quot;transactions&quot;;\r\n}\r\n```\r\n\r\nAnd that works fine, all transactions are displayed, but the problem is with looping through transaction dates.\r\n\r\nIf I loop through `transactions` like this\r\n\r\n```\r\nfor (int i = 0; i &lt; transactionByDate.size(); i++) {\r\n```\r\n\r\nthen this is the response:\r\n\r\n`date:2023-03-16,income:100.0,expense:15.0,left:85.0`\r\n\r\nas you can see, only one date is printed, instead of:\r\n\r\n```\r\ndate:2023-03-16,income:100.0,expense:15.0,left:85.0\r\n```\r\n\r\n```\r\ndate:2023-03-03,income:150.0,expense:50.0,left:50.0\r\n```\r\n\r\nIf I try to loop like this:\r\n\r\n```\r\nfor (int i = 0; i &lt; transactions.size(); i++) {\r\n```\r\n\r\nits same,\r\n\r\nIf I try to loop like this:\r\n\r\n```\r\nfor (int i = 0; i &lt; transGroup.getTransactions().size(); i++) {\r\n```\r\n\r\nit&#39;s also the same.  \r\n  \r\nSo my question is, how to loop through this list so actually I can get output like:\r\n\r\n```\r\ndate:2023-03-16,income:100.0,expense:15.0,left:85.0\r\n```\r\n\r\n```\r\ndate:2023-03-03,income:150.0,expense:50.0,left:50.0\r\n```\r\n\r\nBecause I have transactions on those two dates. Or for example if user have transactions on three different days, show him output like:\r\n\r\n```\r\ndate:2023-03-16,income:100.0,expense:15.0,left:85.0\r\n```\r\n\r\n```\r\ndate:2023-03-03,income:150.0,expense:50.0,left:50.0\r\n```\r\n\r\n```\r\ndate:2023-03-19,income:200.0,expense:50.0,left:150.0 &gt; new date\r\n```\r\n\r\n`Thymeleaf:`\r\n\r\n        &lt;!DOCTYPE html&gt;\r\n    &lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\r\n    \r\n    &lt;head&gt;\r\n        &lt;meta charset=&quot;utf-8&quot;&gt;\r\n        &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; th:href=&quot;@{/css/transaction.css}&quot;/&gt;\r\n        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width&quot;/&gt;\r\n        &lt;script src=&quot;http://localhost:35729/livereload.js&quot;&gt;&lt;/script&gt;\r\n        &lt;script src=&quot;https://kit.fontawesome.com/9ab80cc16b.js&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;\r\n    \r\n        &lt;meta http-equiv=&quot;x-ua-compatible&quot; content=&quot;ie=edge&quot;&gt;\r\n        &lt;title&gt;Users&lt;/title&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n    \r\n    &lt;header&gt;\r\n        &lt;h1 class=&quot;logo&quot;&gt;Spender&lt;/h1&gt;\r\n        &lt;input type=&quot;checkbox&quot; class=&quot;nav-toggle&quot; id=&quot;nav-toggle&quot;&gt;\r\n        &lt;nav&gt;\r\n            &lt;ul&gt;\r\n                &lt;li&gt;&lt;a th:href=&quot;@{/api/test/homePage}&quot;&gt;Homepage&lt;/a&gt;&lt;/li&gt;\r\n                &lt;li&gt;&lt;a id=&quot;wallets&quot; th:href=&quot;@{/api/wallet/userWallet/balance/{userId} (userId=${userId})}&quot;&gt;Wallets&lt;/a&gt;&lt;/li&gt;\r\n                &lt;li&gt;&lt;a href=&quot;javascript: document.logoutForm.submit()&quot; role=&quot;menuitem&quot;&gt;Logout&lt;/a&gt;&lt;/li&gt;\r\n            &lt;/ul&gt;\r\n        &lt;/nav&gt;\r\n        &lt;label for=&quot;nav-toggle&quot; class=&quot;nav-toggle-label&quot;&gt;\r\n            &lt;span&gt;&lt;/span&gt;\r\n        &lt;/label&gt;\r\n    &lt;/header&gt;\r\n    &lt;br&gt;\r\n    &lt;br&gt;\r\n    &lt;br&gt;\r\n    &lt;br&gt;\r\n    &lt;br&gt;\r\n    &lt;br&gt;\r\n    &lt;br&gt;\r\n    &lt;br&gt;\r\n    &lt;div class=&quot;date&quot; th:each=&quot;singleGroup : ${transactionGroup}&quot;&gt; &lt;h1 th:text=&quot;${singleGroup.date}&quot;&gt;&lt;/h1&gt;\r\n        &lt;h2 th:text=&quot;${balance}&quot;&gt;&lt;/h2&gt;\r\n        &lt;div class=&quot;transaction&quot; th:each=&quot;singleTrans : ${singleGroup.transactions}&quot;&gt;\r\n    &lt;h2&gt;Amount: &lt;span th:text=&quot;${singleTrans.amount}&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&lt;br&gt;\r\n            &lt;h2&gt;Note: &lt;span th:text=&quot;${singleTrans.note}&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&lt;br&gt;\r\n            &lt;h2&gt;Wallet name: &lt;span th:text=&quot;${singleTrans .walletName}&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&lt;br&gt;\r\n            &lt;h2&gt;Expense Category: &lt;span th:text=&quot;${singleTrans .expenseCategories}&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&lt;br&gt;\r\n            &lt;h2&gt;IncomeCategory: &lt;span th:text=&quot;${singleTrans .incomeCategories}&quot;&gt;&lt;/span&gt;&lt;/h2&gt;\r\n            &lt;a class=&quot;card__link&quot; th:href=&quot;@{/api/transaction/delete/{id}(id=${singleTrans.id})}&quot;\r\n               th:data-confirm-delete=&quot;|Are you sure you want to delete ${singleTrans.walletName} wallet?|&quot;\r\n               onclick=&quot;if (!confirm(this.getAttribute(&#39;data-confirm-delete&#39;))) return false&quot;&gt;Delete&lt;/a&gt;\r\n            &lt;a class=&quot;card__link&quot; th:href=&quot;@{/api/transaction/showFormForUpdate/{id}(id=${singleTrans.id})}&quot;&gt;Update&lt;/a&gt;\r\n            &lt;hr&gt;\r\n    &lt;/div&gt;\r\n    \r\n    &lt;/div&gt;\r\n    &lt;div style=&quot;text-align:center&quot;\r\n         th:if=&quot;${#lists.isEmpty(transactionGroup)}&quot;&gt;&lt;h1&gt;You don&#39;t have any transaction&lt;/h1&gt;\r\n        &lt;a th:href=&quot;@{/api/wallet/userWallet/balance/{userId} (userId=${userId})}&quot;&gt;Wallets&lt;/a&gt;\r\n    &lt;/div&gt;\r\n    \r\n    \r\n    &lt;form name=&quot;logoutForm&quot; th:action=&quot;@{/api/auth/signout}&quot; method=&quot;post&quot; th:hidden=&quot;true&quot;&gt;\r\n        &lt;input hidden type=&quot;submit&quot; value=&quot;Sign Out&quot;/&gt;\r\n    &lt;/form&gt;\r\n    \r\n    &lt;/body&gt;\r\n    \r\n    &lt;/html&gt;","title":"For loop to return all data recorded by date","body":"<p>I'll be direct.</p>\n<p>User have wallets, on each wallet they can create a transaction, the transaction can be income or expense.</p>\n<p>When a user is creating a transaction he also picks a date when that transaction is created, then I have a controller to display all user transactions. And this is the format to display it. Imagine user have the next transactions.</p>\n<p><code>Income: &gt; Amount: 50, Date: 03/03/2023</code></p>\n<p><code>Income: &gt; Amount: 50, Date: 03/03/2023</code></p>\n<p><code>Expense: &gt; Amount: 50, Date: 03/03/2023</code></p>\n<p><code>Income: &gt; Amount: 100, Date: 03/16/2023</code></p>\n<p><code>Expense: &gt; Amount: 15, Date: 03/16/2023</code></p>\n<p>And on the page I would like to display:</p>\n<p><code>Transaction: 03/03/2023/ Balance: 100</code> Because, that is <code>income - expense</code></p>\n<p><code>Transaction: 03/16/2023/ Balance: 85</code> Because, that is <code>income - expense</code></p>\n<p>How I tried and what are various outputs based on attempts:</p>\n<pre><code>@GetMapping(&quot;/userTransactions/{user_id}&quot;)\npublic String getUserTransactions(@PathVariable(&quot;user_id&quot;) long user_id, TransactionGroup transactionGroup, Model model) {\n    Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\n    UserDetailsImpl user = (UserDetailsImpl) authentication.getPrincipal();\n    long userId = user.getId();\n    model.addAttribute(&quot;userId&quot;, userId);\n\n    List&lt;Transaction&gt; transactions = transactionRepository.getTransactionsByUserId(user_id);\n    List&lt;TransactionGroup&gt; transactionByDate = new ArrayList&lt;&gt;();\n    List&lt;Transaction&gt; transOnSingleDate = new ArrayList&lt;&gt;();\n    boolean currDates = transactions.stream().findFirst().isPresent();\n\n    if (currDates) {\n        LocalDate currDate = transactions.get(0).getDate();\n\n        TransactionGroup transGroup = new TransactionGroup();\n\n        for (Transaction t : transactions) {\n            if (!currDate.isEqual(t.getDate())) {\n                transGroup.setDate(currDate);\n                transGroup.setTransactions(transOnSingleDate);\n                transactionByDate.add(transGroup);\n                transGroup = new TransactionGroup();\n                transOnSingleDate = new ArrayList&lt;&gt;();\n            }\n\n            transOnSingleDate.add(t);\n            currDate = t.getDate();\n        }\n        transGroup.setDate(currDate);\n        transGroup.setTransactions(transOnSingleDate);\n        transactionByDate.add(transGroup);\n\n\n        for (int i = 0; i &lt; transactionByDate.size(); i++) {\n            LocalDate date = transGroup.getDate();\n            transactions = transGroup.getTransactions();\n            double income = transactions.stream()\n                    .filter(trans -&gt; trans.getTransactionType().getDisplayName().equalsIgnoreCase(&quot;income&quot;))\n                    .mapToDouble(Transaction::getAmount)\n                    .sum();\n            double expense = transactions.stream()\n                    .filter(trans -&gt; trans.getTransactionType().getDisplayName().equalsIgnoreCase(&quot;expense&quot;))\n                    .mapToDouble(Transaction::getAmount)\n                    .sum();\n            double left = income - expense;\n            System.out.println(&quot;date:&quot; + date + &quot;,income:&quot; + income + &quot;,expense:&quot; + expense + &quot;,left:&quot; + left);\n        }\n    } else {\n        System.out.println(&quot;Empty&quot;);\n    }\n\n\n    model.addAttribute(&quot;transactionGroup&quot;, transactionByDate);\n    return &quot;transactions&quot;;\n}\n</code></pre>\n<p>And that works fine, all transactions are displayed, but the problem is with looping through transaction dates.</p>\n<p>If I loop through <code>transactions</code> like this</p>\n<pre><code>for (int i = 0; i &lt; transactionByDate.size(); i++) {\n</code></pre>\n<p>then this is the response:</p>\n<p><code>date:2023-03-16,income:100.0,expense:15.0,left:85.0</code></p>\n<p>as you can see, only one date is printed, instead of:</p>\n<pre><code>date:2023-03-16,income:100.0,expense:15.0,left:85.0\n</code></pre>\n<pre><code>date:2023-03-03,income:150.0,expense:50.0,left:50.0\n</code></pre>\n<p>If I try to loop like this:</p>\n<pre><code>for (int i = 0; i &lt; transactions.size(); i++) {\n</code></pre>\n<p>its same,</p>\n<p>If I try to loop like this:</p>\n<pre><code>for (int i = 0; i &lt; transGroup.getTransactions().size(); i++) {\n</code></pre>\n<p>it's also the same.</p>\n<p>So my question is, how to loop through this list so actually I can get output like:</p>\n<pre><code>date:2023-03-16,income:100.0,expense:15.0,left:85.0\n</code></pre>\n<pre><code>date:2023-03-03,income:150.0,expense:50.0,left:50.0\n</code></pre>\n<p>Because I have transactions on those two dates. Or for example if user have transactions on three different days, show him output like:</p>\n<pre><code>date:2023-03-16,income:100.0,expense:15.0,left:85.0\n</code></pre>\n<pre><code>date:2023-03-03,income:150.0,expense:50.0,left:50.0\n</code></pre>\n<pre><code>date:2023-03-19,income:200.0,expense:50.0,left:150.0 &gt; new date\n</code></pre>\n<p><code>Thymeleaf:</code></p>\n<pre><code>    &lt;!DOCTYPE html&gt;\n&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\n\n&lt;head&gt;\n    &lt;meta charset=&quot;utf-8&quot;&gt;\n    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; th:href=&quot;@{/css/transaction.css}&quot;/&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width&quot;/&gt;\n    &lt;script src=&quot;http://localhost:35729/livereload.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://kit.fontawesome.com/9ab80cc16b.js&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;\n\n    &lt;meta http-equiv=&quot;x-ua-compatible&quot; content=&quot;ie=edge&quot;&gt;\n    &lt;title&gt;Users&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;header&gt;\n    &lt;h1 class=&quot;logo&quot;&gt;Spender&lt;/h1&gt;\n    &lt;input type=&quot;checkbox&quot; class=&quot;nav-toggle&quot; id=&quot;nav-toggle&quot;&gt;\n    &lt;nav&gt;\n        &lt;ul&gt;\n            &lt;li&gt;&lt;a th:href=&quot;@{/api/test/homePage}&quot;&gt;Homepage&lt;/a&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;a id=&quot;wallets&quot; th:href=&quot;@{/api/wallet/userWallet/balance/{userId} (userId=${userId})}&quot;&gt;Wallets&lt;/a&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;a href=&quot;javascript: document.logoutForm.submit()&quot; role=&quot;menuitem&quot;&gt;Logout&lt;/a&gt;&lt;/li&gt;\n        &lt;/ul&gt;\n    &lt;/nav&gt;\n    &lt;label for=&quot;nav-toggle&quot; class=&quot;nav-toggle-label&quot;&gt;\n        &lt;span&gt;&lt;/span&gt;\n    &lt;/label&gt;\n&lt;/header&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;div class=&quot;date&quot; th:each=&quot;singleGroup : ${transactionGroup}&quot;&gt; &lt;h1 th:text=&quot;${singleGroup.date}&quot;&gt;&lt;/h1&gt;\n    &lt;h2 th:text=&quot;${balance}&quot;&gt;&lt;/h2&gt;\n    &lt;div class=&quot;transaction&quot; th:each=&quot;singleTrans : ${singleGroup.transactions}&quot;&gt;\n&lt;h2&gt;Amount: &lt;span th:text=&quot;${singleTrans.amount}&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&lt;br&gt;\n        &lt;h2&gt;Note: &lt;span th:text=&quot;${singleTrans.note}&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&lt;br&gt;\n        &lt;h2&gt;Wallet name: &lt;span th:text=&quot;${singleTrans .walletName}&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&lt;br&gt;\n        &lt;h2&gt;Expense Category: &lt;span th:text=&quot;${singleTrans .expenseCategories}&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&lt;br&gt;\n        &lt;h2&gt;IncomeCategory: &lt;span th:text=&quot;${singleTrans .incomeCategories}&quot;&gt;&lt;/span&gt;&lt;/h2&gt;\n        &lt;a class=&quot;card__link&quot; th:href=&quot;@{/api/transaction/delete/{id}(id=${singleTrans.id})}&quot;\n           th:data-confirm-delete=&quot;|Are you sure you want to delete ${singleTrans.walletName} wallet?|&quot;\n           onclick=&quot;if (!confirm(this.getAttribute('data-confirm-delete'))) return false&quot;&gt;Delete&lt;/a&gt;\n        &lt;a class=&quot;card__link&quot; th:href=&quot;@{/api/transaction/showFormForUpdate/{id}(id=${singleTrans.id})}&quot;&gt;Update&lt;/a&gt;\n        &lt;hr&gt;\n&lt;/div&gt;\n\n&lt;/div&gt;\n&lt;div style=&quot;text-align:center&quot;\n     th:if=&quot;${#lists.isEmpty(transactionGroup)}&quot;&gt;&lt;h1&gt;You don't have any transaction&lt;/h1&gt;\n    &lt;a th:href=&quot;@{/api/wallet/userWallet/balance/{userId} (userId=${userId})}&quot;&gt;Wallets&lt;/a&gt;\n&lt;/div&gt;\n\n\n&lt;form name=&quot;logoutForm&quot; th:action=&quot;@{/api/auth/signout}&quot; method=&quot;post&quot; th:hidden=&quot;true&quot;&gt;\n    &lt;input hidden type=&quot;submit&quot; value=&quot;Sign Out&quot;/&gt;\n&lt;/form&gt;\n\n&lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["java","spring","scala","apache-spark"],"answers":[{"tags":[],"owner":{"account_id":7034556,"reputation":12325,"user_id":5389127,"display_name":"Ga&#235;l J"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677864907,"creation_date":1677864907,"answer_id":75630211,"question_id":75629038,"body_markdown":"Scala libraries are compiled against a Scala version which is visible in the artifact name like `spark-sql_2.13` means it&#39;s `spark-sql` compiled for Scala 2.13.\r\n\r\nYou cannot have multiple Scala versions in the same project.\r\n\r\nIn your case, you have:\r\n- `scala-library`: 2.12\r\n- `spark-core`: 2.12\r\n- `spark.sql`: 2.13\r\n\r\nChoose a single version and stick to it. 2.13 if possible as it&#39;s more recent.","title":"Can&#39;t create SparkSession in Spring Boot","body":"<p>Scala libraries are compiled against a Scala version which is visible in the artifact name like <code>spark-sql_2.13</code> means it's <code>spark-sql</code> compiled for Scala 2.13.</p>\n<p>You cannot have multiple Scala versions in the same project.</p>\n<p>In your case, you have:</p>\n<ul>\n<li><code>scala-library</code>: 2.12</li>\n<li><code>spark-core</code>: 2.12</li>\n<li><code>spark.sql</code>: 2.13</li>\n</ul>\n<p>Choose a single version and stick to it. 2.13 if possible as it's more recent.</p>\n"}],"owner":{"account_id":27928104,"reputation":11,"user_id":21326776,"display_name":"dev-rev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":199,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1677864907,"creation_date":1677857561,"question_id":75629038,"body_markdown":"I&#39;m trying to run Spark on Spring, the project itself runs without errors, but after I try to create a session, i get this error.\r\n\r\n```\r\njava.lang.NoSuchMethodError: &#39;scala.collection.SeqOps scala.collection.mutable.Buffer$.empty()&#39;\r\n\r\n```\r\n\r\npom.xml\r\n```\r\n    &lt;dependencies&gt;\r\n\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.thoughtworks.paranamer&lt;/groupId&gt;\r\n                &lt;artifactId&gt;paranamer&lt;/artifactId&gt;\r\n                &lt;version&gt;2.8&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-core --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n            &lt;version&gt;6.0.5&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spark-core_2.12&lt;/artifactId&gt;\r\n            &lt;version&gt;3.3.0&lt;/version&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;log4j&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;log4j&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-sql --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spark-sql_2.13&lt;/artifactId&gt;\r\n            &lt;version&gt;3.3.2&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.scala-lang&lt;/groupId&gt;\r\n            &lt;artifactId&gt;scala-library&lt;/artifactId&gt;\r\n            &lt;version&gt;2.12.15&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n```\r\n\r\ncontroller\r\n```\r\n@RestController\r\npublic class MainController {\r\n    @GetMapping(&quot;/&quot;)\r\n    public String index() {\r\n        SparkSession spark = SparkSession\r\n                .builder()\r\n                .appName(&quot;AppSpark&quot;)\r\n                .config(&quot;spark.master&quot;, &quot;local&quot;)\r\n                .getOrCreate();\r\n\r\n        return &quot;Hello World!&quot;;\r\n    }\r\n}\r\n```\r\n\r\nI tried to downgrade the versions in the pom file, but it did not help, only the error type changed.\r\n\r\nIf anyone has come across the same error, I would appreciate any help.","title":"Can&#39;t create SparkSession in Spring Boot","body":"<p>I'm trying to run Spark on Spring, the project itself runs without errors, but after I try to create a session, i get this error.</p>\n<pre><code>java.lang.NoSuchMethodError: 'scala.collection.SeqOps scala.collection.mutable.Buffer$.empty()'\n\n</code></pre>\n<p>pom.xml</p>\n<pre><code>    &lt;dependencies&gt;\n\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;com.thoughtworks.paranamer&lt;/groupId&gt;\n                &lt;artifactId&gt;paranamer&lt;/artifactId&gt;\n                &lt;version&gt;2.8&lt;/version&gt;\n            &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-core --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n            &lt;version&gt;6.0.5&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n            &lt;artifactId&gt;spark-core_2.12&lt;/artifactId&gt;\n            &lt;version&gt;3.3.0&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n                    &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;log4j&lt;/groupId&gt;\n                    &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n                &lt;scope&gt;test&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-sql --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n            &lt;artifactId&gt;spark-sql_2.13&lt;/artifactId&gt;\n            &lt;version&gt;3.3.2&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.scala-lang&lt;/groupId&gt;\n            &lt;artifactId&gt;scala-library&lt;/artifactId&gt;\n            &lt;version&gt;2.12.15&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p>controller</p>\n<pre><code>@RestController\npublic class MainController {\n    @GetMapping(&quot;/&quot;)\n    public String index() {\n        SparkSession spark = SparkSession\n                .builder()\n                .appName(&quot;AppSpark&quot;)\n                .config(&quot;spark.master&quot;, &quot;local&quot;)\n                .getOrCreate();\n\n        return &quot;Hello World!&quot;;\n    }\n}\n</code></pre>\n<p>I tried to downgrade the versions in the pom file, but it did not help, only the error type changed.</p>\n<p>If anyone has come across the same error, I would appreciate any help.</p>\n"},{"tags":["java","postgresql","uuid","criteriabuilder"],"owner":{"account_id":2735926,"reputation":1,"user_id":2358604,"display_name":"user2358604"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677864814,"creation_date":1677864704,"question_id":75630190,"body_markdown":"I have an entity\r\n\r\n    import jakarta.persistence.Entity\r\n\r\nI&#39;m using CriteriaBuilder\r\n\r\n    import jakarta.persistence.criteria.CriteriaBuilder\r\n\r\nUsing this line gives 1 result, as expected.\r\n\r\n    all.where(criteriaBuilder.equal(root.get(&quot;code&quot;), item.getCode()));\r\n\r\nUsing this line gives 0 results, as not expected.\r\n\r\n    all.where(criteriaBuilder.equal(root.get(&quot;uuid&quot;), item.getUuid()));\r\n\r\nThe field generated in Postgresql has data_type uuid (and contains values).\r\n\r\nThe hibernate query looks like this:\r\n    select\r\n        c1_0.uuid,\r\n        c1_0.code,\r\n        c1_0.created_time \r\n    from\r\n        case_o c1_0 \r\n    where\r\n        c1_0.uuid=?\r\n\r\nI have tried changing the dialect and the database-type but that does not seem to help.\r\n\r\nAny ideas on what the correct way to filter on uuid is?","title":"Cannot filter on UUID with CriteriaBuilder in Java using Postgresql","body":"<p>I have an entity</p>\n<pre><code>import jakarta.persistence.Entity\n</code></pre>\n<p>I'm using CriteriaBuilder</p>\n<pre><code>import jakarta.persistence.criteria.CriteriaBuilder\n</code></pre>\n<p>Using this line gives 1 result, as expected.</p>\n<pre><code>all.where(criteriaBuilder.equal(root.get(&quot;code&quot;), item.getCode()));\n</code></pre>\n<p>Using this line gives 0 results, as not expected.</p>\n<pre><code>all.where(criteriaBuilder.equal(root.get(&quot;uuid&quot;), item.getUuid()));\n</code></pre>\n<p>The field generated in Postgresql has data_type uuid (and contains values).</p>\n<p>The hibernate query looks like this:\nselect\nc1_0.uuid,\nc1_0.code,\nc1_0.created_time\nfrom\ncase_o c1_0\nwhere\nc1_0.uuid=?</p>\n<p>I have tried changing the dialect and the database-type but that does not seem to help.</p>\n<p>Any ideas on what the correct way to filter on uuid is?</p>\n"},{"tags":["java","design-patterns","decoupling","solid"],"owner":{"account_id":16506411,"reputation":1143,"user_id":11926338,"display_name":"Pavel Petrashov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677864497,"creation_date":1677864497,"question_id":75630164,"body_markdown":"I have a service that gets users from DB and creates a file from them. It can be different types of files (SCV, XML, etc).\r\n\r\n    import java.io.File;\r\n    import java.util.Iterator;\r\n    \r\n    public class MyService {\r\n    \r\n        private final EventsDao eventsDao;\r\n        private final UserDao userDao;\r\n    \r\n        public MyService(EventsDao eventsDao, UserDao userDao) {\r\n            this.eventsDao = eventsDao;\r\n            this.userDao = userDao;\r\n        }\r\n    \r\n        public void start() {\r\n            Iterator&lt;Event&gt; events = eventsDao.getEvents();\r\n    \r\n            FileBuilder fileBuilder = new CsvFileBuilder();\r\n    \r\n            while (events.hasNext()) {\r\n                Event event = events.next();\r\n    \r\n                User user = userDao.getUser(event.getUserId());\r\n    \r\n                if (user == null) {\r\n                    System.out.println(&quot;user is null and won&#39;t be included to the file&quot;);\r\n                    continue;\r\n                }\r\n    \r\n                fileBuilder.addLine(UserMapper.toViewableUser(user));\r\n            }\r\n    \r\n            File scvFile = fileBuilder.build();\r\n    \r\n            sendFile(scvFile);\r\n            deleteFile(scvFile);\r\n        }\r\n    \r\n        private void sendFile(File scvFile) {}\r\n        private void deleteFile(File scvFile) {}\r\n    }\r\n\r\nYou can notice the problem here: I create `new CsvFileBuilder()` in the service. It violates SOLID principles.  I am looking for how to refactor that and decouple service and builder implementation. I could pass `FileBuilder` in the service&#39;s constructor but after that, it will be a singleton and I don&#39;t know how to implement it correctly. Take a look at builder implementation: \r\n\r\n    import java.io.File;\r\n    import java.io.FileWriter;\r\n    import java.io.IOException;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class CsvFileBuilder implements FileBuilder {\r\n    \r\n        private final File targetFile;\r\n        private final CSVWriter writer;\r\n    \r\n        public CsvFileBuilder() {\r\n            try {\r\n                this.targetFile = File.createTempFile(&quot;users&quot;, &quot;test.csv&quot;);\r\n                this.writer = new CSVWriter(new FileWriter(targetFile), &#39;|&#39;, CSVWriter.NO_QUOTE_CHARACTER);\r\n                addHeader();\r\n            } catch (IOException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n    \r\n        private void addHeader() {\r\n            List&lt;String&gt; headers = new ArrayList&lt;&gt;();\r\n            //....\r\n            writer.writeNext(headers.toArray(new String[0]));\r\n        }\r\n    \r\n        @Override\r\n        public void addLine(ViewableUser viewableUser) {\r\n            List&lt;String&gt; cells = new ArrayList&lt;&gt;();\r\n            //...\r\n            writer.writeNext(cells.toArray(new String[0]));\r\n        }\r\n    \r\n        @Override\r\n        public File build() {\r\n            try {\r\n                writer.flush();\r\n                writer.close();\r\n                return targetFile;\r\n            } catch (IOException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n    }\r\n\r\nIf I create it as singleton it will be mutable because I add a new line on every step and only in the end build file. \r\n\r\nIf I pass literature to the builder it looks bad because it is not the builder&#39;s responsibility to go to the DB, get user, map it. etc.\r\n\r\nSo, How can I move builder implementation creation from direct service?","title":"How to decouple service and class creation in that service?","body":"<p>I have a service that gets users from DB and creates a file from them. It can be different types of files (SCV, XML, etc).</p>\n<pre><code>import java.io.File;\nimport java.util.Iterator;\n\npublic class MyService {\n\n    private final EventsDao eventsDao;\n    private final UserDao userDao;\n\n    public MyService(EventsDao eventsDao, UserDao userDao) {\n        this.eventsDao = eventsDao;\n        this.userDao = userDao;\n    }\n\n    public void start() {\n        Iterator&lt;Event&gt; events = eventsDao.getEvents();\n\n        FileBuilder fileBuilder = new CsvFileBuilder();\n\n        while (events.hasNext()) {\n            Event event = events.next();\n\n            User user = userDao.getUser(event.getUserId());\n\n            if (user == null) {\n                System.out.println(&quot;user is null and won't be included to the file&quot;);\n                continue;\n            }\n\n            fileBuilder.addLine(UserMapper.toViewableUser(user));\n        }\n\n        File scvFile = fileBuilder.build();\n\n        sendFile(scvFile);\n        deleteFile(scvFile);\n    }\n\n    private void sendFile(File scvFile) {}\n    private void deleteFile(File scvFile) {}\n}\n</code></pre>\n<p>You can notice the problem here: I create <code>new CsvFileBuilder()</code> in the service. It violates SOLID principles.  I am looking for how to refactor that and decouple service and builder implementation. I could pass <code>FileBuilder</code> in the service's constructor but after that, it will be a singleton and I don't know how to implement it correctly. Take a look at builder implementation:</p>\n<pre><code>import java.io.File;\nimport java.io.FileWriter;\nimport java.io.IOException;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class CsvFileBuilder implements FileBuilder {\n\n    private final File targetFile;\n    private final CSVWriter writer;\n\n    public CsvFileBuilder() {\n        try {\n            this.targetFile = File.createTempFile(&quot;users&quot;, &quot;test.csv&quot;);\n            this.writer = new CSVWriter(new FileWriter(targetFile), '|', CSVWriter.NO_QUOTE_CHARACTER);\n            addHeader();\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    private void addHeader() {\n        List&lt;String&gt; headers = new ArrayList&lt;&gt;();\n        //....\n        writer.writeNext(headers.toArray(new String[0]));\n    }\n\n    @Override\n    public void addLine(ViewableUser viewableUser) {\n        List&lt;String&gt; cells = new ArrayList&lt;&gt;();\n        //...\n        writer.writeNext(cells.toArray(new String[0]));\n    }\n\n    @Override\n    public File build() {\n        try {\n            writer.flush();\n            writer.close();\n            return targetFile;\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n<p>If I create it as singleton it will be mutable because I add a new line on every step and only in the end build file.</p>\n<p>If I pass literature to the builder it looks bad because it is not the builder's responsibility to go to the DB, get user, map it. etc.</p>\n<p>So, How can I move builder implementation creation from direct service?</p>\n"},{"tags":["java","spring","spring-mvc"],"comments":[{"owner":{"account_id":8761405,"reputation":1504,"user_id":6551263,"display_name":"Chetan Ahirrao"},"score":0,"creation_date":1677940219,"post_id":75595943,"comment_id":133438239,"body_markdown":"Please post contents of your pom.xml","body":"Please post contents of your pom.xml"}],"owner":{"account_id":22179690,"reputation":1,"user_id":16423596,"display_name":"E Pabitra"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":220,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677864420,"creation_date":1677608706,"question_id":75595943,"body_markdown":"I get this error when running my project as a Spring Boot App on STS, I am not able to run my web applications but if I run my standalone applications I don&#39;t get any error and my application executes successfully. I got this error when I am using spring-boot-starter-web and spring-boot-dev-tools dependencies.\r\n\r\nPlease Give a solution as soon as possible\r\n\r\n**Log Of The Application**\r\n\r\nJava HotSpot(TM) 64-Bit Server VM warning: Options -Xverify:none and -noverify were deprecated in JDK 13 and will likely be removed in a future release.\r\n\r\n2023-02-28T23:03:26.954+05:30  INFO 2296 --- [  restartedMain] com.basu.Application                     : Starting Application using Java 17.0.6 with PID 2296 (C:\\Users\\epabi\\workspace-sts-3.9.6.RELEASE\\16_SB_Web_MVC_App-1\\target\\classes started by epabi in C:\\Users\\epabi\\workspace-sts-3.9.6.RELEASE\\16_SB_Web_MVC_App-1)\r\n2023-02-28T23:03:26.963+05:30  INFO 2296 --- [  restartedMain] com.basu.Application                     : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2023-02-28T23:03:27.157+05:30  INFO 2296 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set &#39;spring.devtools.add-properties&#39; to &#39;false&#39; to disable\r\n2023-02-28T23:03:27.158+05:30  INFO 2296 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the &#39;logging.level.web&#39; property to &#39;DEBUG&#39;\r\n2023-02-28T23:03:29.426+05:30  WARN 2296 --- [  restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server\r\n2023-02-28T23:03:29.442+05:30  INFO 2296 --- [  restartedMain] .s.b.a.l.ConditionEvaluationReportLogger : \r\n\r\nError starting ApplicationContext. To display the condition evaluation report re-run your application with &#39;debug&#39; enabled.\r\n2023-02-28T23:03:29.495+05:30 ERROR 2296 --- [  restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : \r\n\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nAn attempt was made to call a method that does not exist. The attempt was made from the following location:\r\n\r\n    org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:191)\r\n\r\nThe following method did not exist:\r\n\r\n    &#39;void org.apache.tomcat.util.modeler.Registry.disableRegistry()&#39;\r\n\r\nThe calling method&#39;s class, org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory, was loaded from the following location:\r\n\r\n    jar:file:/C:/Users/epabi/.m2/repository/org/springframework/boot/spring-boot/3.0.2/spring-boot-3.0.2.jar!/org/springframework/boot/web/embedded/tomcat/TomcatServletWebServerFactory.class\r\n\r\nThe called method&#39;s class, org.apache.tomcat.util.modeler.Registry, is available from the following locations:\r\n\r\n    jar:file:/C:/Users/epabi/Downloads/spring-tool-suite-3.9.6.RELEASE-e4.9.0-win32-x86_64/sts-bundle/pivotal-tc-server/runtimes/tomcat-9.0.10.A.RELEASE/lib/tomcat-coyote.jar!/org/apache/tomcat/util/modeler/Registry.class\r\n    jar:file:/C:/Users/epabi/.m2/repository/org/apache/tomcat/embed/tomcat-embed-core/10.1.5/tomcat-embed-core-10.1.5.jar!/org/apache/tomcat/util/modeler/Registry.class\r\n\r\nThe called method&#39;s class hierarchy was loaded from the following locations:\r\n\r\n    org.apache.tomcat.util.modeler.Registry: file:/C:/Users/epabi/Downloads/spring-tool-suite-3.9.6.RELEASE-e4.9.0-win32-x86_64/sts-bundle/pivotal-tc-server/runtimes/tomcat-9.0.10.A.RELEASE/lib/tomcat-coyote.jar\r\n\r\n\r\nAction:\r\n\r\nCorrect the classpath of your application so that it contains compatible versions of the classes org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory and org.apache.tomcat.util.modeler.Registry\r\n\r\n\r\n\r\n1. Before this error I am got an UnsupportedClassVersion error so for solving that I changed the JRE version to my current jdk17.\r\n2. Then I got this error and I am suffering for 5 days to solve this error.\r\n\r\nPlease someone, give a solution as soon as possible.","title":"Correct the classpath of your application so that it contains compatible versions of the classes org.springframework.boot.web.embedded.tomcat","body":"<p>I get this error when running my project as a Spring Boot App on STS, I am not able to run my web applications but if I run my standalone applications I don't get any error and my application executes successfully. I got this error when I am using spring-boot-starter-web and spring-boot-dev-tools dependencies.</p>\n<p>Please Give a solution as soon as possible</p>\n<p><strong>Log Of The Application</strong></p>\n<p>Java HotSpot(TM) 64-Bit Server VM warning: Options -Xverify:none and -noverify were deprecated in JDK 13 and will likely be removed in a future release.</p>\n<p>2023-02-28T23:03:26.954+05:30  INFO 2296 --- [  restartedMain] com.basu.Application                     : Starting Application using Java 17.0.6 with PID 2296 (C:\\Users\\epabi\\workspace-sts-3.9.6.RELEASE\\16_SB_Web_MVC_App-1\\target\\classes started by epabi in C:\\Users\\epabi\\workspace-sts-3.9.6.RELEASE\\16_SB_Web_MVC_App-1)\n2023-02-28T23:03:26.963+05:30  INFO 2296 --- [  restartedMain] com.basu.Application                     : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-02-28T23:03:27.157+05:30  INFO 2296 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable\n2023-02-28T23:03:27.158+05:30  INFO 2296 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'\n2023-02-28T23:03:29.426+05:30  WARN 2296 --- [  restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server\n2023-02-28T23:03:29.442+05:30  INFO 2296 --- [  restartedMain] .s.b.a.l.ConditionEvaluationReportLogger :</p>\n<p>Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.\n2023-02-28T23:03:29.495+05:30 ERROR 2296 --- [  restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   :</p>\n<hr />\n<p>APPLICATION FAILED TO START</p>\n<hr />\n<p>Description:</p>\n<p>An attempt was made to call a method that does not exist. The attempt was made from the following location:</p>\n<pre><code>org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:191)\n</code></pre>\n<p>The following method did not exist:</p>\n<pre><code>'void org.apache.tomcat.util.modeler.Registry.disableRegistry()'\n</code></pre>\n<p>The calling method's class, org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory, was loaded from the following location:</p>\n<pre><code>jar:file:/C:/Users/epabi/.m2/repository/org/springframework/boot/spring-boot/3.0.2/spring-boot-3.0.2.jar!/org/springframework/boot/web/embedded/tomcat/TomcatServletWebServerFactory.class\n</code></pre>\n<p>The called method's class, org.apache.tomcat.util.modeler.Registry, is available from the following locations:</p>\n<pre><code>jar:file:/C:/Users/epabi/Downloads/spring-tool-suite-3.9.6.RELEASE-e4.9.0-win32-x86_64/sts-bundle/pivotal-tc-server/runtimes/tomcat-9.0.10.A.RELEASE/lib/tomcat-coyote.jar!/org/apache/tomcat/util/modeler/Registry.class\njar:file:/C:/Users/epabi/.m2/repository/org/apache/tomcat/embed/tomcat-embed-core/10.1.5/tomcat-embed-core-10.1.5.jar!/org/apache/tomcat/util/modeler/Registry.class\n</code></pre>\n<p>The called method's class hierarchy was loaded from the following locations:</p>\n<pre><code>org.apache.tomcat.util.modeler.Registry: file:/C:/Users/epabi/Downloads/spring-tool-suite-3.9.6.RELEASE-e4.9.0-win32-x86_64/sts-bundle/pivotal-tc-server/runtimes/tomcat-9.0.10.A.RELEASE/lib/tomcat-coyote.jar\n</code></pre>\n<p>Action:</p>\n<p>Correct the classpath of your application so that it contains compatible versions of the classes org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory and org.apache.tomcat.util.modeler.Registry</p>\n<ol>\n<li>Before this error I am got an UnsupportedClassVersion error so for solving that I changed the JRE version to my current jdk17.</li>\n<li>Then I got this error and I am suffering for 5 days to solve this error.</li>\n</ol>\n<p>Please someone, give a solution as soon as possible.</p>\n"},{"tags":["java","android","bluetooth","usb","processing"],"comments":[{"owner":{"account_id":18245228,"reputation":380,"user_id":13281485,"display_name":"girraiffe"},"score":1,"creation_date":1677861328,"post_id":75629360,"comment_id":133426866,"body_markdown":"Possible duplicate of [ADB over Bluetooth Android](https://stackoverflow.com/questions/11129817/adb-over-bluetooth-android). If that doesn&#39;t work, simply googling your question yields many results.","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/11129817/adb-over-bluetooth-android\">ADB over Bluetooth Android</a>. If that doesn&#39;t work, simply googling your question yields many results."},{"owner":{"account_id":442814,"reputation":23181,"user_id":833647,"display_name":"Ken Wolf"},"score":0,"creation_date":1677863402,"post_id":75629360,"comment_id":133427495,"body_markdown":"Why not wifi? https://developer.android.com/studio/command-line/adb#connect-to-a-device-over-wi-fi","body":"Why not wifi? <a href=\"https://developer.android.com/studio/command-line/adb#connect-to-a-device-over-wi-fi\" rel=\"nofollow noreferrer\">developer.android.com/studio/command-line/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":19682641,"reputation":80,"user_id":14409408,"display_name":"Lookyus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677864016,"creation_date":1677864016,"answer_id":75630096,"question_id":75629360,"body_markdown":"You can do it over WiFi using adb. Your phone and PC have to be on the same network.\r\n\r\nJust enter this command in your cmd:\r\n`adb connect IP_ADDRESS_OF_YOUR_PHONE`\r\n\r\nYou have to be in the directory where your adb is for this to work.","title":"Can I debug apps using Bluetooth instead of USB?","body":"<p>You can do it over WiFi using adb. Your phone and PC have to be on the same network.</p>\n<p>Just enter this command in your cmd:\n<code>adb connect IP_ADDRESS_OF_YOUR_PHONE</code></p>\n<p>You have to be in the directory where your adb is for this to work.</p>\n"}],"owner":{"account_id":25065898,"reputation":1,"user_id":18920236,"display_name":"jjok13"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677864016,"creation_date":1677859437,"question_id":75629360,"body_markdown":"Is it possible to debug apps on Android using Bluetooth?\r\n\r\nI am working with Processing 4.1.1 and I&#39;d like to run my apps on my Android phone. Processing allows to run apps on devices which are connected through USB debugging, but there is something wrong with my cable/device as it is constantly disconnecting.\r\n\r\n&gt; Other than using an emulator, could I debug through Bluetooth? If yes, how?","title":"Can I debug apps using Bluetooth instead of USB?","body":"<p>Is it possible to debug apps on Android using Bluetooth?</p>\n<p>I am working with Processing 4.1.1 and I'd like to run my apps on my Android phone. Processing allows to run apps on devices which are connected through USB debugging, but there is something wrong with my cable/device as it is constantly disconnecting.</p>\n<blockquote>\n<p>Other than using an emulator, could I debug through Bluetooth? If yes, how?</p>\n</blockquote>\n"},{"tags":["java","domain-driven-design"],"comments":[{"owner":{"account_id":7630732,"reputation":1728,"user_id":5785871,"accept_rate":80,"display_name":"mslowiak"},"score":1,"creation_date":1673091053,"post_id":74616509,"comment_id":132422518,"body_markdown":"From the ddd perspective I would go with the 2nd option to have clearly visualised the models - one the `Token`, and the second `LocalizedToken` because as you already mentioned, it is a different conception","body":"From the ddd perspective I would go with the 2nd option to have clearly visualised the models - one the <code>Token</code>, and the second <code>LocalizedToken</code> because as you already mentioned, it is a different conception"}],"answers":[{"tags":[],"owner":{"account_id":14879218,"reputation":383,"user_id":10744429,"display_name":"WLefever"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677863938,"creation_date":1677863938,"answer_id":75630087,"question_id":74616509,"body_markdown":"I wouldn&#39;t recommend using an Enum for this. In general when using Enums you&#39;re tempted to switch over the Enum type to do some action or return a response. If you later decide another type of `Token` is an option, you need to update all the existing code. This violates the Open-Closed principle. ","title":"Java Generics in use case VS standard type with Enum","body":"<p>I wouldn't recommend using an Enum for this. In general when using Enums you're tempted to switch over the Enum type to do some action or return a response. If you later decide another type of <code>Token</code> is an option, you need to update all the existing code. This violates the Open-Closed principle.</p>\n"}],"owner":{"account_id":24349304,"reputation":33,"user_id":18285469,"display_name":"Jos&#233; Puente Fuentes"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677863938,"creation_date":1669736056,"question_id":74616509,"body_markdown":"In a Java Spring Boot DDD project we have several APIs exposed.\r\n\r\nNow for only one of these APIs we need that the &quot;Token&quot; entity contains one more attribute: &quot;Locales&quot;.\r\n\r\nIn use cases that use &quot;Token&quot; without &quot;Locales&quot; I would not want the getter of that new attribute to be accessible.\r\nFor this I am considering two options:\r\n\r\n - Add &quot;Locales&quot; to the &quot;Token&quot; entity and also another &quot;Type&quot; attribute (an Enum)\r\n   that, depending on whether it is of one type or another, when\r\n   accessing the &quot;Locales&quot; getter, returns the elements or an\r\n   Optional.Empty (or an exception). This way only the use cases that are\r\n   for the &quot;LocalizedToken&quot; will get the &quot;Locales&quot;, but in my\r\n   opinion the interface is less clear and more errors could happen when\r\n   using attributes that are not really used in all APIs.\r\n - Extend &quot;Token&quot; with a &quot;LocalizedToken&quot; entity and make use cases that use each\r\n   exposed API only have access to the type it needs. For example, with\r\n   generics, create use case: `CreateTokens&lt;T extends Token&gt;`. This\r\n   option looks cleaner but requires a lot more modifications, as these\r\n   generics are spread throughout the domain, repositories, etc.\r\n\r\nIn your opinion, which is the best approach? Or any other suggestion?\r\n\r\nThanks!","title":"Java Generics in use case VS standard type with Enum","body":"<p>In a Java Spring Boot DDD project we have several APIs exposed.</p>\n<p>Now for only one of these APIs we need that the &quot;Token&quot; entity contains one more attribute: &quot;Locales&quot;.</p>\n<p>In use cases that use &quot;Token&quot; without &quot;Locales&quot; I would not want the getter of that new attribute to be accessible.\nFor this I am considering two options:</p>\n<ul>\n<li>Add &quot;Locales&quot; to the &quot;Token&quot; entity and also another &quot;Type&quot; attribute (an Enum)\nthat, depending on whether it is of one type or another, when\naccessing the &quot;Locales&quot; getter, returns the elements or an\nOptional.Empty (or an exception). This way only the use cases that are\nfor the &quot;LocalizedToken&quot; will get the &quot;Locales&quot;, but in my\nopinion the interface is less clear and more errors could happen when\nusing attributes that are not really used in all APIs.</li>\n<li>Extend &quot;Token&quot; with a &quot;LocalizedToken&quot; entity and make use cases that use each\nexposed API only have access to the type it needs. For example, with\ngenerics, create use case: <code>CreateTokens&lt;T extends Token&gt;</code>. This\noption looks cleaner but requires a lot more modifications, as these\ngenerics are spread throughout the domain, repositories, etc.</li>\n</ul>\n<p>In your opinion, which is the best approach? Or any other suggestion?</p>\n<p>Thanks!</p>\n"},{"tags":["java","spring","spring-boot","swagger","openapi"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1677783900,"post_id":75619756,"comment_id":133410665,"body_markdown":"So you mean you need it only in the swagger documentation?","body":"So you mean you need it only in the swagger documentation?"},{"owner":{"account_id":18624324,"reputation":186,"user_id":13573784,"display_name":"Vitor Nilson"},"score":0,"creation_date":1677784015,"post_id":75619756,"comment_id":133410694,"body_markdown":"@Jens exactly, only in Swagger. I need to create custom Examples, like in the print that is on my question but only in Swagger.","body":"@Jens exactly, only in Swagger. I need to create custom Examples, like in the print that is on my question but only in Swagger."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1677784441,"post_id":75619756,"comment_id":133410811,"body_markdown":"*my API has a lot of possible errors* But it is an example, so one should be enough?","body":"<i>my API has a lot of possible errors</i> But it is an example, so one should be enough?"},{"owner":{"account_id":18624324,"reputation":186,"user_id":13573784,"display_name":"Vitor Nilson"},"score":0,"creation_date":1677784810,"post_id":75619756,"comment_id":133410905,"body_markdown":"@Jens hmm, not exaclty a simple example. There&#39;s a requirement in which I need to show the possible errors that might occur. This is a requirement because the company has a service desk, and they would like to take look at the error our users are saying that are facing. So, for example, if there&#39;s a 409 http code and there&#39;s 3 possible ways this 409 is thrown I need to map theses 3 possible ways in swagger UI.","body":"@Jens hmm, not exaclty a simple example. There&#39;s a requirement in which I need to show the possible errors that might occur. This is a requirement because the company has a service desk, and they would like to take look at the error our users are saying that are facing. So, for example, if there&#39;s a 409 http code and there&#39;s 3 possible ways this 409 is thrown I need to map theses 3 possible ways in swagger UI."},{"owner":{"account_id":9543959,"reputation":77,"user_id":7090837,"display_name":"Yeras_QazaQ"},"score":0,"creation_date":1677842564,"post_id":75619756,"comment_id":133421429,"body_markdown":"You can use @ApiResponse(code = 200, message = &quot;Successfully retrieved list&quot;) to your controller for describing","body":"You can use @ApiResponse(code = 200, message = &quot;Successfully retrieved list&quot;) to your controller for describing"},{"owner":{"account_id":18624324,"reputation":186,"user_id":13573784,"display_name":"Vitor Nilson"},"score":0,"creation_date":1677842869,"post_id":75619756,"comment_id":133421505,"body_markdown":"@Yeras_QazaQ I need to show examples. This suggestion only documents the http status and the description of it. I need to do something like in the print, but less verbose than writing all the possible responses hard coded.","body":"@Yeras_QazaQ I need to show examples. This suggestion only documents the http status and the description of it. I need to do something like in the print, but less verbose than writing all the possible responses hard coded."}],"answers":[{"tags":[],"owner":{"account_id":18624324,"reputation":186,"user_id":13573784,"display_name":"Vitor Nilson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677863788,"creation_date":1677854091,"answer_id":75628389,"question_id":75619756,"body_markdown":"**SOLVED**\r\n\r\n*Solution: Document the API programmatically.*\r\n\r\nSpring has a lib that you can manipulate the entire OpenAPI project.\r\n\r\nThere&#39;s my configuration class, which is the solution:\r\n\r\n```java\r\npackage br.orchestratorapi.config;\r\n\r\nimport br.com.dto.ErpResponseBodyDTO;\r\nimport br.com.exception.MessageError;\r\nimport br.com.exception.MyExceptionWrapperClassException;\r\nimport com.google.gson.Gson;\r\nimport com.google.gson.JsonArray;\r\nimport com.google.gson.JsonObject;\r\nimport io.swagger.v3.oas.models.OpenAPI;\r\nimport io.swagger.v3.oas.models.Operation;\r\nimport io.swagger.v3.oas.models.examples.Example;\r\nimport io.swagger.v3.oas.models.media.Content;\r\nimport io.swagger.v3.oas.models.media.MediaType;\r\nimport io.swagger.v3.oas.models.responses.ApiResponse;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Data;\r\nimport org.springdoc.core.customizers.OpenApiCustomiser;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.core.io.Resource;\r\nimport org.springframework.util.FileCopyUtils;\r\n\r\nimport java.io.IOException;\r\nimport java.io.InputStreamReader;\r\nimport java.io.Reader;\r\nimport java.io.UncheckedIOException;\r\nimport java.util.List;\r\nimport java.util.ArrayList;\r\nimport java.util.Optional;\r\n\r\n@Configuration\r\npublic class OpenAPIExamples {\r\n\r\n@Value(&quot;classpath:/swagger_examples.json&quot;)\r\n    private Resource swaggerExamples;\r\n\r\n    @Bean\r\n    public OpenApiCustomiser openApiCustomiser() {\r\n        return openAPI -&gt; buildExamplesFromJson().forEach(exampleValue -&gt; setExamplesOnEndpoints(openAPI, exampleValue, &quot;application/json&quot;));\r\n    }\r\n\r\n    private void setExamplesOnEndpoints(OpenAPI api, ExampleValue exampleValue, String bodyType) {\r\n        Optional.ofNullable(api.getPaths())\r\n                .map(paths -&gt; paths.get(exampleValue.getPath()))\r\n                .map(paths -&gt; getOperationForHttpMethod(exampleValue.getHttpMethod(), paths))\r\n                .ifPresent(operation -&gt; setExamplesOnEndpoints(exampleValue, bodyType, operation));\r\n    }\r\n\r\n    private void setExamplesOnEndpoints(ExampleValue exampleValue, String bodyType, Operation operation) {\r\n        ApiResponse response = operation.getResponses().get(String.valueOf(exampleValue.getHttpStatus()));\r\n        if(response == null)\r\n             response = new ApiResponse();\r\n\r\n        Content content = response.getContent();\r\n        if(content == null)\r\n             content = new Content();\r\n\r\n        MediaType mediaType = content.get(bodyType);\r\n\r\n        if(mediaType == null)\r\n            mediaType = new MediaType();\r\n\r\n        mediaType.addExamples(exampleValue.getExampleName(), exampleValue.getExample());\r\n\r\n        content.put(bodyType, mediaType);\r\n        response.setContent(content);\r\n\r\n        operation.getResponses().put(String.valueOf(exampleValue.getHttpStatus()), response);\r\n    }\r\n\r\n\r\n    private Operation getOperationForHttpMethod(String httpMethod, PathItem paths) {\r\n        switch (httpMethod) {\r\n            case &quot;POST&quot;:\r\n                return paths.getPost();\r\n            case &quot;PATCH&quot;:\r\n                return paths.getPatch();\r\n            case &quot;PUT&quot;:\r\n                return paths.getPut();\r\n            case &quot;DELETE&quot;:\r\n                return paths.getDelete();\r\n            case &quot;GET&quot;:\r\n                return paths.getGet();\r\n            case &quot;OPTIONS&quot;:\r\n                return paths.getOptions();\r\n            case &quot;HEAD&quot;:\r\n                return paths.getHead();\r\n            case &quot;TRACE&quot;:\r\n                return paths.getTrace();\r\n            default:\r\n                return null;\r\n        }\r\n    }\r\n\r\n    public List&lt;ExampleValue&gt; buildExamplesFromJson() {\r\n        List&lt;ExampleValue&gt; result = new ArrayList&lt;&gt;();\r\n\r\n        JsonObject jsonObject = new Gson().fromJson(asString(swaggerExamples), JsonObject.class);\r\n        JsonArray endpoints = jsonObject.getAsJsonArray(&quot;endpoints&quot;);\r\n\r\n        endpoints.forEach(element -&gt; {\r\n            JsonObject path = element.getAsJsonObject();\r\n\r\n            String endpointPath = path.get(&quot;path&quot;).getAsString();\r\n            String method = path.get(&quot;method&quot;).getAsString();\r\n\r\n            path.get(&quot;responses&quot;).getAsJsonArray().forEach(response -&gt; {\r\n                JsonObject resp = response.getAsJsonObject();\r\n\r\n                int status = resp.get(&quot;status&quot;).getAsInt();\r\n\r\n                resp.getAsJsonArray(&quot;errors&quot;).forEach(error -&gt; {\r\n\r\n                    JsonObject errorObj = error.getAsJsonObject();\r\n                    String enumName = errorObj.get(&quot;enum&quot;).getAsString();\r\n\r\n\r\n                    Example example = new Example();\r\n                    example.description(errorObj.get(&quot;description&quot;).getAsString());\r\n                    example.value(ErpResponseBodyDTO.builder().error(new MyExceptionWrapperClassException(MessageError.valueOf(enumName)).getResponse().getError()).build());\r\n\r\n                    ExampleValue exampleValue = new ExampleValue(errorObj.get(&quot;exampleName&quot;).getAsString(), example, status, method, endpointPath);\r\n\r\n                    result.add(exampleValue);\r\n\r\n                });\r\n\r\n            });\r\n\r\n\r\n        });\r\n\r\n        return result;\r\n\r\n    }\r\n\r\n    public static String asString(Resource resource) {\r\n        try (Reader reader = new InputStreamReader(resource.getInputStream())) {\r\n            return FileCopyUtils.copyToString(reader);\r\n        } catch (IOException e) {\r\n            throw new UncheckedIOException(e);\r\n        }\r\n    }\r\n\r\n    @Data\r\n    @AllArgsConstructor\r\n    private class ExampleValue {\r\n        private String exampleName;\r\n        private Example example;\r\n        private int httpStatus;\r\n        private String httpMethod;\r\n        private String path;\r\n    }\r\n\r\n }\r\n\r\n```\r\n\r\nAs you can see, I read a Json file from resources:\r\n\r\n\r\n```\r\n{\r\n  &quot;endpoints&quot;: [\r\n\r\n\r\n    {\r\n      &quot;path&quot;:  &quot;/endpoint/that/{already}/{exists-in-swagger}&quot;,\r\n      &quot;method&quot;: &quot;POST&quot;,\r\n      &quot;responses&quot;: [\r\n\r\n        {\r\n          &quot;status&quot;:  401,\r\n          &quot;errors&quot;:[\r\n            {&quot;description&quot;:&quot;A description&quot;,&quot;enum&quot;: &quot;ENUM_THAT_I_HAVE_SO_PAY_ATTENTION&quot;, &quot;exampleName&quot;:  &quot;You have thrown an error&quot;}\r\n          ]\r\n        }\r\n\r\n      ]\r\n    }\r\n\r\n\r\n  ]\r\n}\r\n```","title":"Spring Boot Open API 3.0 - How to show custom examples without writing a Json Manually","body":"<p><strong>SOLVED</strong></p>\n<p><em>Solution: Document the API programmatically.</em></p>\n<p>Spring has a lib that you can manipulate the entire OpenAPI project.</p>\n<p>There's my configuration class, which is the solution:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package br.orchestratorapi.config;\n\nimport br.com.dto.ErpResponseBodyDTO;\nimport br.com.exception.MessageError;\nimport br.com.exception.MyExceptionWrapperClassException;\nimport com.google.gson.Gson;\nimport com.google.gson.JsonArray;\nimport com.google.gson.JsonObject;\nimport io.swagger.v3.oas.models.OpenAPI;\nimport io.swagger.v3.oas.models.Operation;\nimport io.swagger.v3.oas.models.examples.Example;\nimport io.swagger.v3.oas.models.media.Content;\nimport io.swagger.v3.oas.models.media.MediaType;\nimport io.swagger.v3.oas.models.responses.ApiResponse;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport org.springdoc.core.customizers.OpenApiCustomiser;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.core.io.Resource;\nimport org.springframework.util.FileCopyUtils;\n\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.Reader;\nimport java.io.UncheckedIOException;\nimport java.util.List;\nimport java.util.ArrayList;\nimport java.util.Optional;\n\n@Configuration\npublic class OpenAPIExamples {\n\n@Value(&quot;classpath:/swagger_examples.json&quot;)\n    private Resource swaggerExamples;\n\n    @Bean\n    public OpenApiCustomiser openApiCustomiser() {\n        return openAPI -&gt; buildExamplesFromJson().forEach(exampleValue -&gt; setExamplesOnEndpoints(openAPI, exampleValue, &quot;application/json&quot;));\n    }\n\n    private void setExamplesOnEndpoints(OpenAPI api, ExampleValue exampleValue, String bodyType) {\n        Optional.ofNullable(api.getPaths())\n                .map(paths -&gt; paths.get(exampleValue.getPath()))\n                .map(paths -&gt; getOperationForHttpMethod(exampleValue.getHttpMethod(), paths))\n                .ifPresent(operation -&gt; setExamplesOnEndpoints(exampleValue, bodyType, operation));\n    }\n\n    private void setExamplesOnEndpoints(ExampleValue exampleValue, String bodyType, Operation operation) {\n        ApiResponse response = operation.getResponses().get(String.valueOf(exampleValue.getHttpStatus()));\n        if(response == null)\n             response = new ApiResponse();\n\n        Content content = response.getContent();\n        if(content == null)\n             content = new Content();\n\n        MediaType mediaType = content.get(bodyType);\n\n        if(mediaType == null)\n            mediaType = new MediaType();\n\n        mediaType.addExamples(exampleValue.getExampleName(), exampleValue.getExample());\n\n        content.put(bodyType, mediaType);\n        response.setContent(content);\n\n        operation.getResponses().put(String.valueOf(exampleValue.getHttpStatus()), response);\n    }\n\n\n    private Operation getOperationForHttpMethod(String httpMethod, PathItem paths) {\n        switch (httpMethod) {\n            case &quot;POST&quot;:\n                return paths.getPost();\n            case &quot;PATCH&quot;:\n                return paths.getPatch();\n            case &quot;PUT&quot;:\n                return paths.getPut();\n            case &quot;DELETE&quot;:\n                return paths.getDelete();\n            case &quot;GET&quot;:\n                return paths.getGet();\n            case &quot;OPTIONS&quot;:\n                return paths.getOptions();\n            case &quot;HEAD&quot;:\n                return paths.getHead();\n            case &quot;TRACE&quot;:\n                return paths.getTrace();\n            default:\n                return null;\n        }\n    }\n\n    public List&lt;ExampleValue&gt; buildExamplesFromJson() {\n        List&lt;ExampleValue&gt; result = new ArrayList&lt;&gt;();\n\n        JsonObject jsonObject = new Gson().fromJson(asString(swaggerExamples), JsonObject.class);\n        JsonArray endpoints = jsonObject.getAsJsonArray(&quot;endpoints&quot;);\n\n        endpoints.forEach(element -&gt; {\n            JsonObject path = element.getAsJsonObject();\n\n            String endpointPath = path.get(&quot;path&quot;).getAsString();\n            String method = path.get(&quot;method&quot;).getAsString();\n\n            path.get(&quot;responses&quot;).getAsJsonArray().forEach(response -&gt; {\n                JsonObject resp = response.getAsJsonObject();\n\n                int status = resp.get(&quot;status&quot;).getAsInt();\n\n                resp.getAsJsonArray(&quot;errors&quot;).forEach(error -&gt; {\n\n                    JsonObject errorObj = error.getAsJsonObject();\n                    String enumName = errorObj.get(&quot;enum&quot;).getAsString();\n\n\n                    Example example = new Example();\n                    example.description(errorObj.get(&quot;description&quot;).getAsString());\n                    example.value(ErpResponseBodyDTO.builder().error(new MyExceptionWrapperClassException(MessageError.valueOf(enumName)).getResponse().getError()).build());\n\n                    ExampleValue exampleValue = new ExampleValue(errorObj.get(&quot;exampleName&quot;).getAsString(), example, status, method, endpointPath);\n\n                    result.add(exampleValue);\n\n                });\n\n            });\n\n\n        });\n\n        return result;\n\n    }\n\n    public static String asString(Resource resource) {\n        try (Reader reader = new InputStreamReader(resource.getInputStream())) {\n            return FileCopyUtils.copyToString(reader);\n        } catch (IOException e) {\n            throw new UncheckedIOException(e);\n        }\n    }\n\n    @Data\n    @AllArgsConstructor\n    private class ExampleValue {\n        private String exampleName;\n        private Example example;\n        private int httpStatus;\n        private String httpMethod;\n        private String path;\n    }\n\n }\n\n</code></pre>\n<p>As you can see, I read a Json file from resources:</p>\n<pre><code>{\n  &quot;endpoints&quot;: [\n\n\n    {\n      &quot;path&quot;:  &quot;/endpoint/that/{already}/{exists-in-swagger}&quot;,\n      &quot;method&quot;: &quot;POST&quot;,\n      &quot;responses&quot;: [\n\n        {\n          &quot;status&quot;:  401,\n          &quot;errors&quot;:[\n            {&quot;description&quot;:&quot;A description&quot;,&quot;enum&quot;: &quot;ENUM_THAT_I_HAVE_SO_PAY_ATTENTION&quot;, &quot;exampleName&quot;:  &quot;You have thrown an error&quot;}\n          ]\n        }\n\n      ]\n    }\n\n\n  ]\n}\n</code></pre>\n"}],"owner":{"account_id":18624324,"reputation":186,"user_id":13573784,"display_name":"Vitor Nilson"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1728,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677863788,"creation_date":1677783423,"question_id":75619756,"body_markdown":"I am working in a Spring Boot 2.5.2 + Java 8 project which has Open API 3.0:\r\n\r\n```\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\r\n\t&lt;version&gt;1.6.14&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nI need to show some specific error bodies to the user like this:\r\n\r\nThis example comes from **another** Spring boot project where swagger is mapped with an yaml file.\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9yLXB.png\r\n\r\n\r\n\r\n---\r\n\r\n---\r\n\r\n---\r\n\r\nI need to show examples with a similar body but using annotations (because if a new endpoint is added it will be automatically mapped to the Swagger UI. We are facing an issue where developers are forgetting to map the endpoint in the yaml file, this action is trying to avoid this).\r\n\r\nHere are my mapping:\r\n\r\n```\r\n@ApiResponse(responseCode = &quot;401&quot;,\r\n                    description = &quot;Something is required.&quot;,\r\n                    content = {\r\n                            @Content(mediaType = &quot;application/json&quot;,\r\n\r\n                                    examples = {\r\n\r\n                                        //The problem lays here!!\r\n                                    }\r\n\r\n                            )\r\n\r\n                    })\r\n    })\r\n    public abstract ResponseEntity&lt;Mono&lt;Object&gt;&gt; queryLegacy(String query);\r\n```\r\n\r\nMy error class is `ErpResponseBodyDTO.class`.\r\n\r\n```\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class ErpResponseBodyDTO{\r\n  private Long code;\r\n  private String message;\r\n}\r\n```\r\n\r\nHow can I create a Instance of this class like `new ErpResponseBodyDTO(123, &quot;Error Message&quot;);` and use this instance as an Example?\r\n\r\nI mean, something like:\r\n\r\n```\r\n...\r\n@Content(mediaType = &quot;application/json&quot;,\r\n\r\nexamples = {\r\n\r\n    new ErpResponseBodyDTO(123, &quot;Error Message&quot;),\r\n    new ErpResponseBodyDTO(456, &quot;Error Message 2&quot;),\r\n    new ErpResponseBodyDTO(789, &quot;Error Message 3&quot;)\r\n}\r\n)\r\n...\r\n\r\n```\r\n\r\nI don&#39;t want to write manually a Json Example because my API has a lot of possible errors and writing it in the `@ExampleObject(value=&quot; \r\n {&quot;A&quot;:&quot;BIG&quot;, &quot;JSON&quot;:&quot;HERE&quot;}  &quot;)` will pollute the code. ","title":"Spring Boot Open API 3.0 - How to show custom examples without writing a Json Manually","body":"<p>I am working in a Spring Boot 2.5.2 + Java 8 project which has Open API 3.0:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n    &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\n    &lt;version&gt;1.6.14&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I need to show some specific error bodies to the user like this:</p>\n<p>This example comes from <strong>another</strong> Spring boot project where swagger is mapped with an yaml file.\n<a href=\"https://i.stack.imgur.com/9yLXB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9yLXB.png\" alt=\"enter image description here\" /></a></p>\n<hr />\n<hr />\n<hr />\n<p>I need to show examples with a similar body but using annotations (because if a new endpoint is added it will be automatically mapped to the Swagger UI. We are facing an issue where developers are forgetting to map the endpoint in the yaml file, this action is trying to avoid this).</p>\n<p>Here are my mapping:</p>\n<pre><code>@ApiResponse(responseCode = &quot;401&quot;,\n                    description = &quot;Something is required.&quot;,\n                    content = {\n                            @Content(mediaType = &quot;application/json&quot;,\n\n                                    examples = {\n\n                                        //The problem lays here!!\n                                    }\n\n                            )\n\n                    })\n    })\n    public abstract ResponseEntity&lt;Mono&lt;Object&gt;&gt; queryLegacy(String query);\n</code></pre>\n<p>My error class is <code>ErpResponseBodyDTO.class</code>.</p>\n<pre><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\npublic class ErpResponseBodyDTO{\n  private Long code;\n  private String message;\n}\n</code></pre>\n<p>How can I create a Instance of this class like <code>new ErpResponseBodyDTO(123, &quot;Error Message&quot;);</code> and use this instance as an Example?</p>\n<p>I mean, something like:</p>\n<pre><code>...\n@Content(mediaType = &quot;application/json&quot;,\n\nexamples = {\n\n    new ErpResponseBodyDTO(123, &quot;Error Message&quot;),\n    new ErpResponseBodyDTO(456, &quot;Error Message 2&quot;),\n    new ErpResponseBodyDTO(789, &quot;Error Message 3&quot;)\n}\n)\n...\n\n</code></pre>\n<p>I don't want to write manually a Json Example because my API has a lot of possible errors and writing it in the <code>@ExampleObject(value=&quot;  {&quot;A&quot;:&quot;BIG&quot;, &quot;JSON&quot;:&quot;HERE&quot;}  &quot;)</code> will pollute the code.</p>\n"},{"tags":["java","xml","xslt"],"comments":[{"owner":{"account_id":3616427,"reputation":114440,"user_id":3016153,"display_name":"michael.hor257k"},"score":2,"creation_date":1677792301,"post_id":75620841,"comment_id":133412740,"body_markdown":"I doubt very much XSLT is the right tool for this.","body":"I doubt very much XSLT is the right tool for this."},{"owner":{"account_id":26503505,"reputation":31,"user_id":20140051,"display_name":"pouce"},"score":0,"creation_date":1677792410,"post_id":75620841,"comment_id":133412773,"body_markdown":"Yes, xml unit must be more useful but i already use xslt to sort xml files. So i would like to use xslt again to show differences between the two files sorted.","body":"Yes, xml unit must be more useful but i already use xslt to sort xml files. So i would like to use xslt again to show differences between the two files sorted."},{"owner":{"account_id":3616427,"reputation":114440,"user_id":3016153,"display_name":"michael.hor257k"},"score":0,"creation_date":1677793308,"post_id":75620841,"comment_id":133412997,"body_markdown":"Well, it cannot work the way you imagine. And I am not sure it can work at all. You did not explain what are the rules for the comparison or even what is the expected result. If the 2 documents have *exactly* the same structure, and the only differences you are looking for are in the values of the `key` and `value` attributes of corresponding nodes, then it *might* be possible - but it won&#39;t be easy (esp. not in XSLT 1.0).","body":"Well, it cannot work the way you imagine. And I am not sure it can work at all. You did not explain what are the rules for the comparison or even what is the expected result. If the 2 documents have <i>exactly</i> the same structure, and the only differences you are looking for are in the values of the <code>key</code> and <code>value</code> attributes of corresponding nodes, then it <i>might</i> be possible - but it won&#39;t be easy (esp. not in XSLT 1.0)."},{"owner":{"account_id":26503505,"reputation":31,"user_id":20140051,"display_name":"pouce"},"score":0,"creation_date":1677793446,"post_id":75620841,"comment_id":133413025,"body_markdown":"Yes, the structure is the same.","body":"Yes, the structure is the same."},{"owner":{"account_id":3616427,"reputation":114440,"user_id":3016153,"display_name":"michael.hor257k"},"score":0,"creation_date":1677794171,"post_id":75620841,"comment_id":133413187,"body_markdown":"Here is something quite similar that you could adapt to your situation. Though I would still advise against it. https://stackoverflow.com/a/32890764/3016153","body":"Here is something quite similar that you could adapt to your situation. Though I would still advise against it. <a href=\"https://stackoverflow.com/a/32890764/3016153\">stackoverflow.com/a/32890764/3016153</a>"},{"owner":{"account_id":26503505,"reputation":31,"user_id":20140051,"display_name":"pouce"},"score":0,"creation_date":1677795662,"post_id":75620841,"comment_id":133413458,"body_markdown":"Thank you but I don&#39;t know how to do otherwise because with XMLUnit1 the result done is not clear for me and with java it seems difficult to make with hashmap .","body":"Thank you but I don&#39;t know how to do otherwise because with XMLUnit1 the result done is not clear for me and with java it seems difficult to make with hashmap ."},{"owner":{"account_id":3616427,"reputation":114440,"user_id":3016153,"display_name":"michael.hor257k"},"score":0,"creation_date":1677863522,"post_id":75620841,"comment_id":133427520,"body_markdown":"I rolled your question back to the original, after you have (quite correctly) posted a new one with the changed requirements.","body":"I rolled your question back to the original, after you have (quite correctly) posted a new one with the changed requirements."},{"owner":{"account_id":26503505,"reputation":31,"user_id":20140051,"display_name":"pouce"},"score":0,"creation_date":1677864557,"post_id":75620841,"comment_id":133427774,"body_markdown":"Yes, i would like to better explain the problem. So i posted a new message but it has been deleted. How better explain because my edit has also been deleted.","body":"Yes, i would like to better explain the problem. So i posted a new message but it has been deleted. How better explain because my edit has also been deleted."},{"owner":{"account_id":3616427,"reputation":114440,"user_id":3016153,"display_name":"michael.hor257k"},"score":0,"creation_date":1677865295,"post_id":75620841,"comment_id":133427978,"body_markdown":"I have reopened your other question. But I must tell you that you are not explaining the logic very well (at least not well enough for me to understand it).","body":"I have reopened your other question. But I must tell you that you are not explaining the logic very well (at least not well enough for me to understand it)."},{"owner":{"account_id":26503505,"reputation":31,"user_id":20140051,"display_name":"pouce"},"score":0,"creation_date":1677867000,"post_id":75620841,"comment_id":133428415,"body_markdown":"I edited it. I hope it is better now.","body":"I edited it. I hope it is better now."}],"answers":[{"tags":[],"owner":{"account_id":91947,"reputation":161814,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677796422,"creation_date":1677796422,"answer_id":75621454,"question_id":75620841,"body_markdown":"As you are using Java it is usually possible to use Saxon HE (currently supported versions are 10, 11, 12) and XSLT 3:\r\n\r\n    &lt;xsl:stylesheet version=&quot;3.0&quot;\r\n    xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;\r\n    \r\n    &lt;xsl:output method=&quot;text&quot;/&gt;\r\n    \r\n    &lt;xsl:key name=&quot;key&quot; match=&quot;*&quot; use=&quot;@key, @value&quot; composite=&quot;yes&quot; /&gt;\r\n    \r\n    &lt;xsl:template match=&quot;/&quot;&gt;\r\n    &lt;xsl:text&gt;&quot;only in file1&quot;&amp;#10;&lt;/xsl:text&gt;\r\n    &lt;xsl:value-of select=&quot;//*[not(key(&#39;key&#39;, (@key, @value), $file2))]!(&#39;key: &#39; || @key || &#39; value : &#39; || @value)&quot; separator=&quot;&amp;#10;&quot;/&gt;\r\n    &lt;xsl:text&gt;&amp;#10;&quot;only in file&quot;&amp;#10;&lt;/xsl:text&gt;\r\n    &lt;xsl:value-of select=&quot;$file2//*[not(key(&#39;key&#39;, (@key, @value), current()))]!(&#39;key: &#39; || @key || &#39; value : &#39; || @value)&quot; separator=&quot;&amp;#10;&quot;/&gt;\r\n    &lt;/xsl:template&gt;\r\n    \r\n    \r\n    &lt;xsl:variable name=&quot;file2&quot; select=&quot;doc(&#39;file2.xml&#39;)&quot;/&gt;\r\n    \r\n    &lt;/xsl:stylesheet&gt;\r\n\r\nResult\r\n\r\n    &quot;only in file1&quot;\r\n    key: B value : B1\r\n    key: Z value : Z1\r\n    key: Y value : \r\n    key: C value : C1\r\n    &quot;only in file&quot;\r\n    key: B value : O1\r\n    key: G value : Z1\r\n    key: Y2 value : \r\n    key: C1 value : C8","title":"Compare two xml files with XSLT","body":"<p>As you are using Java it is usually possible to use Saxon HE (currently supported versions are 10, 11, 12) and XSLT 3:</p>\n<pre><code>&lt;xsl:stylesheet version=&quot;3.0&quot;\nxmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;\n\n&lt;xsl:output method=&quot;text&quot;/&gt;\n\n&lt;xsl:key name=&quot;key&quot; match=&quot;*&quot; use=&quot;@key, @value&quot; composite=&quot;yes&quot; /&gt;\n\n&lt;xsl:template match=&quot;/&quot;&gt;\n&lt;xsl:text&gt;&quot;only in file1&quot;&amp;#10;&lt;/xsl:text&gt;\n&lt;xsl:value-of select=&quot;//*[not(key('key', (@key, @value), $file2))]!('key: ' || @key || ' value : ' || @value)&quot; separator=&quot;&amp;#10;&quot;/&gt;\n&lt;xsl:text&gt;&amp;#10;&quot;only in file&quot;&amp;#10;&lt;/xsl:text&gt;\n&lt;xsl:value-of select=&quot;$file2//*[not(key('key', (@key, @value), current()))]!('key: ' || @key || ' value : ' || @value)&quot; separator=&quot;&amp;#10;&quot;/&gt;\n&lt;/xsl:template&gt;\n\n\n&lt;xsl:variable name=&quot;file2&quot; select=&quot;doc('file2.xml')&quot;/&gt;\n\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n<p>Result</p>\n<pre><code>&quot;only in file1&quot;\nkey: B value : B1\nkey: Z value : Z1\nkey: Y value : \nkey: C value : C1\n&quot;only in file&quot;\nkey: B value : O1\nkey: G value : Z1\nkey: Y2 value : \nkey: C1 value : C8\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3616427,"reputation":114440,"user_id":3016153,"display_name":"michael.hor257k"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677819461,"creation_date":1677819461,"answer_id":75623321,"question_id":75620841,"body_markdown":"Here is something relatively simple I managed to put together quickly. The result format is different from what you show - but I see no good reason to perform the same comparison twice. (If you want, you could put the result in a variable and then &quot;print&quot; it out twice, once for each side).\r\n\r\n**XSLT 1.0**\r\n\r\n    &lt;xsl:stylesheet version=&quot;1.0&quot; \r\n    xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;\r\n    &lt;xsl:output method=&quot;xml&quot; version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; indent=&quot;yes&quot;/&gt;\r\n    \r\n    &lt;xsl:variable name=&quot;v1&quot; select=&quot;//node&quot; /&gt;\r\n    &lt;xsl:variable name=&quot;v2&quot; select=&quot;document(&#39;file2.xml&#39;)//node&quot; /&gt;\r\n    \r\n    &lt;xsl:template match=&quot;/&quot;&gt;\r\n    \t&lt;differences&gt;\r\n    \t\t&lt;xsl:for-each select=&quot;$v1&quot;&gt;\r\n    \t\t\t&lt;xsl:variable name=&quot;i&quot; select=&quot;position()&quot; /&gt;\r\n    \t\t\t&lt;xsl:variable name=&quot;n2&quot; select=&quot;$v2[$i]&quot; /&gt;\r\n    \t\t\t&lt;xsl:if test=&quot;@key != $n2/@key or @value != $n2/@value&quot;&gt;\r\n    \t\t\t\t&lt;diff key1=&quot;{@key}&quot; key2=&quot;{$n2/@key}&quot; value1=&quot;{@value}&quot; value2=&quot;{$n2/@value}&quot;/&gt;\r\n    \t\t\t&lt;/xsl:if&gt;\r\n    \t\t&lt;/xsl:for-each&gt;\r\n    \t&lt;/differences&gt;\r\n    &lt;/xsl:template&gt;\r\n    \r\n    &lt;/xsl:stylesheet&gt;\r\n\r\nApplied to your input example, the result will be:\r\n\r\n**Result**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;differences&gt;\r\n       &lt;diff key1=&quot;B&quot; key2=&quot;B&quot; value1=&quot;B1&quot; value2=&quot;O1&quot;/&gt;\r\n       &lt;diff key1=&quot;Z&quot; key2=&quot;G&quot; value1=&quot;Z1&quot; value2=&quot;Z1&quot;/&gt;\r\n       &lt;diff key1=&quot;Y&quot; key2=&quot;Y2&quot; value1=&quot;&quot; value2=&quot;&quot;/&gt;\r\n       &lt;diff key1=&quot;C&quot; key2=&quot;C1&quot; value1=&quot;C1&quot; value2=&quot;C8&quot;/&gt;\r\n    &lt;/differences&gt;\r\n\r\n","title":"Compare two xml files with XSLT","body":"<p>Here is something relatively simple I managed to put together quickly. The result format is different from what you show - but I see no good reason to perform the same comparison twice. (If you want, you could put the result in a variable and then &quot;print&quot; it out twice, once for each side).</p>\n<p><strong>XSLT 1.0</strong></p>\n<pre><code>&lt;xsl:stylesheet version=&quot;1.0&quot; \nxmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;\n&lt;xsl:output method=&quot;xml&quot; version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; indent=&quot;yes&quot;/&gt;\n\n&lt;xsl:variable name=&quot;v1&quot; select=&quot;//node&quot; /&gt;\n&lt;xsl:variable name=&quot;v2&quot; select=&quot;document('file2.xml')//node&quot; /&gt;\n\n&lt;xsl:template match=&quot;/&quot;&gt;\n    &lt;differences&gt;\n        &lt;xsl:for-each select=&quot;$v1&quot;&gt;\n            &lt;xsl:variable name=&quot;i&quot; select=&quot;position()&quot; /&gt;\n            &lt;xsl:variable name=&quot;n2&quot; select=&quot;$v2[$i]&quot; /&gt;\n            &lt;xsl:if test=&quot;@key != $n2/@key or @value != $n2/@value&quot;&gt;\n                &lt;diff key1=&quot;{@key}&quot; key2=&quot;{$n2/@key}&quot; value1=&quot;{@value}&quot; value2=&quot;{$n2/@value}&quot;/&gt;\n            &lt;/xsl:if&gt;\n        &lt;/xsl:for-each&gt;\n    &lt;/differences&gt;\n&lt;/xsl:template&gt;\n\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n<p>Applied to your input example, the result will be:</p>\n<p><strong>Result</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;differences&gt;\n   &lt;diff key1=&quot;B&quot; key2=&quot;B&quot; value1=&quot;B1&quot; value2=&quot;O1&quot;/&gt;\n   &lt;diff key1=&quot;Z&quot; key2=&quot;G&quot; value1=&quot;Z1&quot; value2=&quot;Z1&quot;/&gt;\n   &lt;diff key1=&quot;Y&quot; key2=&quot;Y2&quot; value1=&quot;&quot; value2=&quot;&quot;/&gt;\n   &lt;diff key1=&quot;C&quot; key2=&quot;C1&quot; value1=&quot;C1&quot; value2=&quot;C8&quot;/&gt;\n&lt;/differences&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677844302,"creation_date":1677844302,"answer_id":75626733,"question_id":75620841,"body_markdown":"You asked:\r\n\r\n&gt; I have an synthax error with $file2/[not(@key=$key1)]\r\n\r\nWell, yes, that isn&#39;t a valid XPath expression. I can&#39;t offer an immediate correction, because I&#39;ve no idea what it was intended to do. And when I look at the rest of your stylesheet, it&#39;s full of similar errors that suggest you haven&#39;t mastered the basics. I&#39;m afraid my immediate reaction is, only someone with a much better knowledge of XPath should be attempting a task as complex as this.\r\n\r\nUnlike @michael.hor257k, I think that XSLT is a perfectly good tool for this job, especially later versions such as XSLT 3.0. However, there are two big jobs to do before you start coding: one is to define the requirements much more precisely, and the second is to learn XSLT. I would recommend writing some simpler XSLT stylesheets before you tackle a difficult one like this.","title":"Compare two xml files with XSLT","body":"<p>You asked:</p>\n<blockquote>\n<p>I have an synthax error with $file2/[not(@key=$key1)]</p>\n</blockquote>\n<p>Well, yes, that isn't a valid XPath expression. I can't offer an immediate correction, because I've no idea what it was intended to do. And when I look at the rest of your stylesheet, it's full of similar errors that suggest you haven't mastered the basics. I'm afraid my immediate reaction is, only someone with a much better knowledge of XPath should be attempting a task as complex as this.</p>\n<p>Unlike @michael.hor257k, I think that XSLT is a perfectly good tool for this job, especially later versions such as XSLT 3.0. However, there are two big jobs to do before you start coding: one is to define the requirements much more precisely, and the second is to learn XSLT. I would recommend writing some simpler XSLT stylesheets before you tackle a difficult one like this.</p>\n"}],"owner":{"account_id":26503505,"reputation":31,"user_id":20140051,"display_name":"pouce"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":155,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":3,"score":-1,"last_activity_date":1677863428,"creation_date":1677791215,"question_id":75620841,"body_markdown":"I have two XML files, file1.xml and file2.xml.\r\nI want to compare these two files and write in the file3.txt the difference of contents.\r\n\r\nIt doesn&#39;t work because I have an synthax error with $file2/[not(@key=$key1)]\r\n\r\nHow can I solve that ?\r\n\r\n**File 1**\r\n\r\n\r\n```\r\n&lt;node key=&quot;U&quot;&gt;\r\n  &lt;node key=&quot;E&quot; value=&quot;E1&quot;/&gt;\r\n  &lt;node key=&quot;B&quot; value=&quot;B1&quot;/&gt;\r\n  &lt;node key=&quot;Z&quot; value=&quot;Z1&quot;/&gt;\r\n  &lt;node key=&quot;T&quot;&gt;\r\n    &lt;node key=&quot;Y&quot;&gt;\r\n      &lt;node key=&quot;H&quot; value=&quot;H1&quot;/&gt;\r\n      &lt;node key=&quot;C&quot; value=&quot;C1&quot;/&gt;\r\n      &lt;node key=&quot;P&quot; value=&quot;P1&quot;/&gt;\r\n    &lt;/node&gt;\r\n  &lt;/node&gt;\r\n&lt;/node&gt;\r\n```\r\n\r\n****File 2**** **\r\n\r\n\r\n```\r\n&lt;node key=&quot;U&quot;&gt;\r\n  &lt;node key=&quot;E&quot; value=&quot;E1&quot;/&gt;\r\n  &lt;node key=&quot;B&quot; value=&quot;O1&quot;/&gt;\r\n  &lt;node key=&quot;G&quot; value=&quot;Z1&quot;/&gt;\r\n  &lt;node key=&quot;T&quot;&gt;\r\n    &lt;node key=&quot;Y2&quot;&gt;\r\n      &lt;node key=&quot;H&quot; value=&quot;H1&quot;/&gt;\r\n      &lt;node key=&quot;C1&quot; value=&quot;C8&quot;/&gt;\r\n      &lt;node key=&quot;P&quot; value=&quot;P1&quot;/&gt;\r\n    &lt;/node&gt;\r\n  &lt;/node&gt;\r\n&lt;/node&gt;\r\n\r\n\r\n\r\n\r\n\r\n```\r\n**XSLT**\r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;xsl:stylesheet version=&quot;1.0&quot;\r\nxmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;\r\n&lt;xsl:output method=&quot;xml&quot;  omit-xml-declaration=&quot;yes&quot; version=&quot;1.0&quot; encoding=&quot;utf-8&quot; indent=&quot;yes&quot;/&gt;\r\n\r\n&lt;xsl:variable name=&quot;file2&quot; select=&quot;document(&#39;file2.xml&#39;)&quot; /&gt;\r\n\r\n&lt;xsl:variable name=&quot;key1&quot; select=&quot;@key&quot; /&gt;\r\n&lt;xsl:variable name=&quot;key2&quot; select=&quot;@key&quot; /&gt;\r\n\r\n&lt;xsl:template match=&quot;@* | node()&quot;&gt;\r\n\t&lt;xsl:comment&gt;&quot;only in file1&quot;&lt;/xsl:comment&gt;\r\n        &lt;xsl:apply-templates select=&quot;[not(@key=$key2)]&quot;/&gt;\r\n\t&lt;xsl:comment&gt;&quot;only in file2&quot;&lt;/xsl:comment&gt;\r\n        &lt;xsl:apply-templates select=&quot;$file2/[not(@key=$key1)]&quot;/&gt;\r\n&lt;/xsl:template&gt;\r\n&lt;/xsl:stylesheet&gt;\r\n\r\n```\r\n\r\n**Java Code**\r\n\r\n\r\n```\r\npackage XSLT;\r\n\r\nimport javax.xml.transform.*;\r\nimport javax.xml.transform.stream.StreamResult;\r\nimport javax.xml.transform.stream.StreamSource;\r\nimport java.io.File;\r\nimport java.io.IOException;\r\nimport java.net.URISyntaxException;\r\n\r\npublic class MainCompare {\r\n    public static void main(String[] args) throws IOException, URISyntaxException, TransformerException {\r\n        TransformerFactory factory = TransformerFactory.newInstance();\r\n        Source xslt = new StreamSource(new File(&quot;transform2.xslt&quot;));\r\n        Transformer transformer = factory.newTransformer(xslt);\r\n\r\n        Source text = new StreamSource(new File(&quot;file1.xml&quot;));\r\n        transformer.transform(text, new StreamResult(new File(&quot;file3.txt&quot;)));\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nI would like to get differences between the two XML files.\r\n\r\nResult wanted\r\n\r\n&gt;     &quot;only in file1&quot;\r\n&gt;     \r\n&gt;      key=&quot;B&quot; value=&quot;B1&quot;\r\n&gt;      key=&quot;Z&quot; value=&quot;Z1&quot;\r\n&gt;      key=&quot;Y&quot;\r\n&gt;      key=&quot;C&quot; value=&quot;C1&quot;\r\n&gt;     \r\n&gt;     &quot;only in file2&quot;\r\n&gt;     \r\n&gt;       key=&quot;B&quot; value=&quot;O1&quot;\r\n&gt;       key=&quot;G&quot; value=&quot;Z1&quot;\r\n&gt;       key=&quot;Y2&quot;\r\n&gt;       key=&quot;C1&quot; value=&quot;C8&quot;","title":"Compare two xml files with XSLT","body":"<p>I have two XML files, file1.xml and file2.xml.\nI want to compare these two files and write in the file3.txt the difference of contents.</p>\n<p>It doesn't work because I have an synthax error with $file2/[not(@key=$key1)]</p>\n<p>How can I solve that ?</p>\n<p><strong>File 1</strong></p>\n<pre><code>&lt;node key=&quot;U&quot;&gt;\n  &lt;node key=&quot;E&quot; value=&quot;E1&quot;/&gt;\n  &lt;node key=&quot;B&quot; value=&quot;B1&quot;/&gt;\n  &lt;node key=&quot;Z&quot; value=&quot;Z1&quot;/&gt;\n  &lt;node key=&quot;T&quot;&gt;\n    &lt;node key=&quot;Y&quot;&gt;\n      &lt;node key=&quot;H&quot; value=&quot;H1&quot;/&gt;\n      &lt;node key=&quot;C&quot; value=&quot;C1&quot;/&gt;\n      &lt;node key=&quot;P&quot; value=&quot;P1&quot;/&gt;\n    &lt;/node&gt;\n  &lt;/node&gt;\n&lt;/node&gt;\n</code></pre>\n<p><strong><strong>File 2</strong></strong> **</p>\n<pre><code>&lt;node key=&quot;U&quot;&gt;\n  &lt;node key=&quot;E&quot; value=&quot;E1&quot;/&gt;\n  &lt;node key=&quot;B&quot; value=&quot;O1&quot;/&gt;\n  &lt;node key=&quot;G&quot; value=&quot;Z1&quot;/&gt;\n  &lt;node key=&quot;T&quot;&gt;\n    &lt;node key=&quot;Y2&quot;&gt;\n      &lt;node key=&quot;H&quot; value=&quot;H1&quot;/&gt;\n      &lt;node key=&quot;C1&quot; value=&quot;C8&quot;/&gt;\n      &lt;node key=&quot;P&quot; value=&quot;P1&quot;/&gt;\n    &lt;/node&gt;\n  &lt;/node&gt;\n&lt;/node&gt;\n\n\n\n\n\n</code></pre>\n<p><strong>XSLT</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;xsl:stylesheet version=&quot;1.0&quot;\nxmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;\n&lt;xsl:output method=&quot;xml&quot;  omit-xml-declaration=&quot;yes&quot; version=&quot;1.0&quot; encoding=&quot;utf-8&quot; indent=&quot;yes&quot;/&gt;\n\n&lt;xsl:variable name=&quot;file2&quot; select=&quot;document('file2.xml')&quot; /&gt;\n\n&lt;xsl:variable name=&quot;key1&quot; select=&quot;@key&quot; /&gt;\n&lt;xsl:variable name=&quot;key2&quot; select=&quot;@key&quot; /&gt;\n\n&lt;xsl:template match=&quot;@* | node()&quot;&gt;\n    &lt;xsl:comment&gt;&quot;only in file1&quot;&lt;/xsl:comment&gt;\n        &lt;xsl:apply-templates select=&quot;[not(@key=$key2)]&quot;/&gt;\n    &lt;xsl:comment&gt;&quot;only in file2&quot;&lt;/xsl:comment&gt;\n        &lt;xsl:apply-templates select=&quot;$file2/[not(@key=$key1)]&quot;/&gt;\n&lt;/xsl:template&gt;\n&lt;/xsl:stylesheet&gt;\n\n</code></pre>\n<p><strong>Java Code</strong></p>\n<pre><code>package XSLT;\n\nimport javax.xml.transform.*;\nimport javax.xml.transform.stream.StreamResult;\nimport javax.xml.transform.stream.StreamSource;\nimport java.io.File;\nimport java.io.IOException;\nimport java.net.URISyntaxException;\n\npublic class MainCompare {\n    public static void main(String[] args) throws IOException, URISyntaxException, TransformerException {\n        TransformerFactory factory = TransformerFactory.newInstance();\n        Source xslt = new StreamSource(new File(&quot;transform2.xslt&quot;));\n        Transformer transformer = factory.newTransformer(xslt);\n\n        Source text = new StreamSource(new File(&quot;file1.xml&quot;));\n        transformer.transform(text, new StreamResult(new File(&quot;file3.txt&quot;)));\n    }\n}\n</code></pre>\n<p>I would like to get differences between the two XML files.</p>\n<p>Result wanted</p>\n<blockquote>\n<pre><code>&quot;only in file1&quot;\n\n key=&quot;B&quot; value=&quot;B1&quot;\n key=&quot;Z&quot; value=&quot;Z1&quot;\n key=&quot;Y&quot;\n key=&quot;C&quot; value=&quot;C1&quot;\n\n&quot;only in file2&quot;\n\n  key=&quot;B&quot; value=&quot;O1&quot;\n  key=&quot;G&quot; value=&quot;Z1&quot;\n  key=&quot;Y2&quot;\n  key=&quot;C1&quot; value=&quot;C8&quot;\n</code></pre>\n</blockquote>\n"},{"tags":["java","android","android-softkeyboard"],"comments":[{"owner":{"account_id":1060138,"reputation":15246,"user_id":1061944,"accept_rate":41,"display_name":"Murtaza Khursheed Hussain"},"score":0,"creation_date":1424344550,"post_id":28604932,"comment_id":45514463,"body_markdown":"what is in `android:keyBackground=&quot;@drawable/key_background&quot;` ?","body":"what is in <code>android:keyBackground=&quot;@drawable&#47;key_background&quot;</code> ?"},{"owner":{"account_id":2636880,"reputation":1485,"user_id":2281306,"accept_rate":88,"display_name":"Arvin Jayanake"},"score":0,"creation_date":1424344669,"post_id":28604932,"comment_id":45514542,"body_markdown":"that is shape drawable xml","body":"that is shape drawable xml"}],"answers":[{"tags":[],"owner":{"account_id":3401362,"reputation":3329,"user_id":2853423,"accept_rate":43,"display_name":"Born To Win"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1499303132,"creation_date":1424345210,"answer_id":28605168,"question_id":28604932,"body_markdown":"Please look into this you will get an idea for your problem.\r\nhttp://developer.android.com/reference/android/inputmethodservice/KeyboardView.html\r\n\r\n    android:keyTextColor=&quot;your color code&quot;","title":"I&#39;m developing a keyboard for android. How to change the text color of the keys?","body":"<p>Please look into this you will get an idea for your problem.\n<a href=\"http://developer.android.com/reference/android/inputmethodservice/KeyboardView.html\" rel=\"nofollow noreferrer\">http://developer.android.com/reference/android/inputmethodservice/KeyboardView.html</a></p>\n\n<pre><code>android:keyTextColor=\"your color code\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3490195,"reputation":3633,"user_id":2920079,"display_name":"user543"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1424345249,"creation_date":1424345249,"answer_id":28605179,"question_id":28604932,"body_markdown":"U can use android:keyTextColor attribute: like\r\n\r\n    android:keyTextColor=&quot;@android:color/black&quot;","title":"I&#39;m developing a keyboard for android. How to change the text color of the keys?","body":"<p>U can use android:keyTextColor attribute: like</p>\n\n<pre><code>android:keyTextColor=\"@android:color/black\"\n</code></pre>\n"}],"owner":{"account_id":2636880,"reputation":1485,"user_id":2281306,"accept_rate":88,"display_name":"Arvin Jayanake"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3645,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":28605168,"answer_count":2,"score":1,"last_activity_date":1677863276,"creation_date":1424344500,"question_id":28604932,"body_markdown":"&lt;p&gt;How to change the text color of the keys?&lt;/p&gt;\r\n&lt;p&gt;Here is my keyboard layout.&lt;/p&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;android.inputmethodservice.KeyboardView \r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:id=&quot;@+id/keyboard&quot;\r\n        android:keyBackground=&quot;@drawable/key_background&quot;\r\n        android:background=&quot;@color/keyboard_background&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_alignParentBottom=&quot;true&quot;\r\n        android:keyPreviewLayout=&quot;@layout/preview&quot; /&gt;\r\n\r\n\r\n**key_background.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; &gt;\r\n    \r\n        &lt;!-- Bottom 2dp Shadow --&gt;\r\n        &lt;item android:top=&quot;4dp&quot;\r\n            android:left=&quot;2dp&quot;\r\n            android:right=&quot;2dp&quot;&gt; \r\n            &lt;shape android:shape=&quot;rectangle&quot; &gt;\r\n                &lt;solid android:color=&quot;@color/key_shadow&quot; /&gt;\r\n                &lt;corners android:radius=&quot;4dp&quot;/&gt;\r\n            &lt;/shape&gt;\r\n        &lt;/item&gt;\r\n    \r\n        &lt;!-- White Top color --&gt;\r\n        &lt;item android:bottom=&quot;4px&quot; \r\n            android:top=&quot;4dp&quot;\r\n            android:left=&quot;2dp&quot;\r\n            android:right=&quot;2dp&quot;&gt;\r\n            &lt;shape android:shape=&quot;rectangle&quot; &gt;\r\n                &lt;solid android:color=&quot;@color/white&quot; /&gt;\r\n                &lt;corners android:radius=&quot;4dp&quot; /&gt;\r\n            &lt;/shape&gt;\r\n        &lt;/item&gt;\r\n    \r\n    &lt;/layer-list&gt;","title":"I&#39;m developing a keyboard for android. How to change the text color of the keys?","body":"<p>How to change the text color of the keys?</p>\n\n<p>Here is my keyboard layout.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;android.inputmethodservice.KeyboardView \n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:id=\"@+id/keyboard\"\n    android:keyBackground=\"@drawable/key_background\"\n    android:background=\"@color/keyboard_background\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:layout_alignParentBottom=\"true\"\n    android:keyPreviewLayout=\"@layout/preview\" /&gt;\n</code></pre>\n\n<p><strong>key_background.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layer-list xmlns:android=\"http://schemas.android.com/apk/res/android\" &gt;\n\n    &lt;!-- Bottom 2dp Shadow --&gt;\n    &lt;item android:top=\"4dp\"\n        android:left=\"2dp\"\n        android:right=\"2dp\"&gt; \n        &lt;shape android:shape=\"rectangle\" &gt;\n            &lt;solid android:color=\"@color/key_shadow\" /&gt;\n            &lt;corners android:radius=\"4dp\"/&gt;\n        &lt;/shape&gt;\n    &lt;/item&gt;\n\n    &lt;!-- White Top color --&gt;\n    &lt;item android:bottom=\"4px\" \n        android:top=\"4dp\"\n        android:left=\"2dp\"\n        android:right=\"2dp\"&gt;\n        &lt;shape android:shape=\"rectangle\" &gt;\n            &lt;solid android:color=\"@color/white\" /&gt;\n            &lt;corners android:radius=\"4dp\" /&gt;\n        &lt;/shape&gt;\n    &lt;/item&gt;\n\n&lt;/layer-list&gt;\n</code></pre>\n"},{"tags":["java","hibernate","transactions","wildfly","jta"],"comments":[{"owner":{"account_id":274743,"reputation":1993,"user_id":567162,"accept_rate":70,"display_name":"D-Klotz"},"score":3,"creation_date":1505748417,"post_id":43282331,"comment_id":79528987,"body_markdown":"Did you ever get an answer to this? I am also looking at using release_mode after_transaction on wildfly but unsure.","body":"Did you ever get an answer to this? I am also looking at using release_mode after_transaction on wildfly but unsure."},{"owner":{"account_id":5431088,"reputation":1748,"user_id":4321944,"display_name":"Martin Rauscher"},"score":4,"creation_date":1506326614,"post_id":43282331,"comment_id":79757691,"body_markdown":"Nope, looks like nobody understands this stuff :(","body":"Nope, looks like nobody understands this stuff :("},{"owner":{"account_id":938389,"reputation":896,"user_id":966914,"accept_rate":33,"display_name":"John"},"score":5,"creation_date":1511194312,"post_id":43282331,"comment_id":81745785,"body_markdown":"Have a look here: https://vladmihalcea.com/2015/12/22/hibernate-aggressive-connection-release/","body":"Have a look here: <a href=\"https://vladmihalcea.com/2015/12/22/hibernate-aggressive-connection-release/\" rel=\"nofollow noreferrer\">vladmihalcea.com/2015/12/22/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":5976707,"reputation":107,"user_id":4697306,"display_name":"zaarour"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665485359,"creation_date":1665485359,"answer_id":74026878,"question_id":43282331,"body_markdown":"Problems with connection pool management can occur at several levels, database, hibernate, application server. In order to facilitate this management, it is strongly recommended to use C3p0 which is a Java library that provides a convenient way for managing database connections.\r\nSee document [C3Po link][1]\r\n\r\nYou can then configure in your hibernate.cfg.xml file the release mode of JTA transactions. It is best to leave it at the default value: &quot;auto&quot;, as shown below: \r\n\r\n    &lt;property name=&quot;hibernate.connection.release_mode&quot;&gt;auto&lt;/property&gt;&lt;!-- Release mode database connection- auto the default value --&gt;\r\n    &lt;property name=&quot;hibernate.c3p0.max_statements&quot;&gt;0&lt;/property&gt; &lt;!--  Number of prepared statements will be cached. 0 no caching --&gt;\r\n    &lt;property name=&quot;hibernate.c3p0.max_size&quot;&gt;1000&lt;/property&gt; &lt;!-- Max connection pool size --&gt;\r\n    &lt;property name=&quot;hibernate.c3p0.min_size&quot;&gt;50&lt;/property&gt; &lt;!-- Min connection pool size --&gt;\r\n    &lt;property name=&quot;hibernate.c3p0.timeout&quot;&gt;550&lt;/property&gt; &lt;!-- Time in seconds before free a connection. 0 no expiration --&gt; \r\n    &lt;property name=&quot;hibernate.c3p0.idleConnectionTestPeriod&quot;&gt;1800&lt;/property&gt; &lt;!--  idle time in seconds before testing if a connection is valid - Setting a fairly long idleConnectionTestPeriod, and not testing on checkout and check-in at all is an excellent, high-performance approach. --&gt;\r\n    &lt;property name=&quot;hibernate.c3p0.preferredTestQuery&quot;&gt;SELECT 1;&lt;/property&gt;\r\n\r\n\r\n  [1]: https://www.baeldung.com/hibernate-c3p0\r\n\r\n","title":"Why is hibernate.connection.release_mode after_transaction not recommended for JTA?","body":"<p>Problems with connection pool management can occur at several levels, database, hibernate, application server. In order to facilitate this management, it is strongly recommended to use C3p0 which is a Java library that provides a convenient way for managing database connections.\nSee document <a href=\"https://www.baeldung.com/hibernate-c3p0\" rel=\"nofollow noreferrer\">C3Po link</a></p>\n<p>You can then configure in your hibernate.cfg.xml file the release mode of JTA transactions. It is best to leave it at the default value: &quot;auto&quot;, as shown below:</p>\n<pre><code>&lt;property name=&quot;hibernate.connection.release_mode&quot;&gt;auto&lt;/property&gt;&lt;!-- Release mode database connection- auto the default value --&gt;\n&lt;property name=&quot;hibernate.c3p0.max_statements&quot;&gt;0&lt;/property&gt; &lt;!--  Number of prepared statements will be cached. 0 no caching --&gt;\n&lt;property name=&quot;hibernate.c3p0.max_size&quot;&gt;1000&lt;/property&gt; &lt;!-- Max connection pool size --&gt;\n&lt;property name=&quot;hibernate.c3p0.min_size&quot;&gt;50&lt;/property&gt; &lt;!-- Min connection pool size --&gt;\n&lt;property name=&quot;hibernate.c3p0.timeout&quot;&gt;550&lt;/property&gt; &lt;!-- Time in seconds before free a connection. 0 no expiration --&gt; \n&lt;property name=&quot;hibernate.c3p0.idleConnectionTestPeriod&quot;&gt;1800&lt;/property&gt; &lt;!--  idle time in seconds before testing if a connection is valid - Setting a fairly long idleConnectionTestPeriod, and not testing on checkout and check-in at all is an excellent, high-performance approach. --&gt;\n&lt;property name=&quot;hibernate.c3p0.preferredTestQuery&quot;&gt;SELECT 1;&lt;/property&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6509695,"reputation":6576,"user_id":5037430,"display_name":"u-ways"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1677863246,"creation_date":1677854540,"answer_id":75628478,"question_id":43282331,"body_markdown":"6 years later, but I hope this can help future readers.\r\n\r\n## Background \r\n\r\nFor a couple of years, we have encountered a production bug that kept exhausting the pooled connection in an Atomikos managed Hibernate (3.x.x) &amp; JTA integration.\r\n\r\nWith our Atomikos &quot;recovery strategy&quot; (i.e. force release all connections), this was fine until recent upscale with direct modern collaborators with multiple instances in K8S pushed the app&#39;s tipping point where we needed to address this issue.\r\n\r\nNavigating around, I found the following set:\r\n\r\n```java\r\nsetProperty(&quot;hibernate.connection.release_mode&quot;, &quot;after_transaction&quot;);\r\n```\r\n\r\nWhich after research it led me to this question (and other multiple unclear/unanswered questions regarding this mode) \r\n\r\nSo here are the findings:\r\n\r\n## Origin of Flag\r\n\r\nIn 2005, it seems that a Hibernate JTA integration was causing issues, as a result [HHH-1287](https://hibernate.atlassian.net/browse/HHH-1287) was raised:\r\n\r\n&gt; It looks like the ExtendedJTATransaction is simply not available after the CMT completes and the WebSphereExtendedJTATransactionLookup class attempts to look it up at java:comp/websphere/ExtendedJTATransaction as part of the normal &#39;after completion&#39; callback.\r\n&gt;\r\n&gt; The problem occurs when the afterCompletion callback event fires and the ConnectionManager.isAggressiveRelease() method is called from ConnectionManager.afterTransaction(). This attempts to check to see if a transaction is in progress. This test in fact causes the transaction manager to be created (together with a look up of the current transaction) The lookup of the ExtendedJTATransaction fails and the an exception is thrown (see stack trace below).\r\n&gt; \r\n&gt; Although there may be an inconsistency in the way that a SSB and MDB operate, It seems fair to say that the transaction may not be available if it has completed. A workaround is therefore requested.\r\n\r\nAs a result a change was committed to circumvent the JTA transaction check in this scenario in the connection manager: (This has then gone though further improvements)\r\n\r\n```java\r\nprivate boolean isAggressiveReleaseNoTransactionCheck() {\r\n    if (releaseMode == ConnectionReleaseMode.AFTER_STATEMENT) {\r\n        return true;\r\n    }\r\n    else {\r\n        boolean inAutoCommitState;\r\n        try {\r\n            inAutoCommitState = isAutoCommit();\r\n        }\r\n        catch( SQLException e ) {\r\n            inAutoCommitState=true; // assume we are in an auto-commit state\r\n        }\r\n        return releaseMode == ConnectionReleaseMode.AFTER_TRANSACTION &amp;&amp; inAutoCommitState;\r\n    }\r\n}\r\n```\r\n\r\n## Feature Release  \r\n\r\nAfter verifying this works, it was released in the wild with the following documentation for 3.x.x:\r\n\r\n**Table&#160;3.4.&#160;Hibernate JDBC and Connection Properties**\r\n\r\n| Property name | Purpose |\r\n| ------------- | ------- |\r\n| hibernate.connection.release_mode\t| Specify when Hibernate should release JDBC connections. By default, a JDBC connection is held until the session is explicitly closed or disconnected. For an application server JTA datasource, you should use&#160;`after_statement`&#160;to aggressively release connections after every JDBC call. For a non-JTA connection, it often makes sense to release the connection at the end of each transaction, by using&#160;`after_transaction`.&#160;`auto`&#160;will choose&#160;`after_statement`&#160;for the JTA and CMT transaction strategies and&#160;`after_transaction`&#160;for the JDBC transaction strategy. **eg.**&#160;`auto`&#160;(default) /&#160;`on_close`&#160;/&#160;`after_transaction`&#160;/ `after_statement`\r\n\r\n&gt; For an application server JTA datasource, you should use&#160;`after_statement`&#160;to aggressively release connections after every JDBC call.\r\n\r\n## Given conclusion \r\n\r\nTherefore, this was work around certain containers (not just EE containers) that implement &quot;resource containment&quot; checks. \r\n\r\nThe Hibernate Session defers  getting a JDBC Connection until it actually needs one, which can lead to  cases like the following where 2 beans share a Session/EM:\r\n\r\n- Bean1: get&#160;Session, but don&#39;t use it yet in way that needs Connection  \r\n- Bean1: call Bean2...  \r\n- Bean2: get Session, do some work forcing Session to obtain Connection  \r\n- Bean2: return (Session still hold Connection)  \r\n  \r\nAt this point, these containers see this as a &quot;leaked&quot; Connection because  the handle was not released by the end of the scope in which it was  obtained. Hence, aggressive releasing. \r\n\r\nYou can read more about this in detail here: [[hibernate-dev] - Connection release modes](http://lists.jboss.org/pipermail/hibernate-dev/2006-December/000903.html)\r\n\r\n### Useful References and Resources:\r\n-   [Hibernate - 11.5. Connection Release Modes](https://docs.jboss.org/hibernate/stable/core.old/reference/en/html/transactions-connection-release.html &quot;Follow link&quot;)\r\n-   [HHH-1287 - The issue that introduced the &quot;after_statement&quot; flag](https://hibernate.atlassian.net/browse/HHH-1287 &quot;Follow link&quot;)\r\n-   [&quot;after_transaction&quot; vs &quot;after_statement&quot; - Hibernate Aggressive Connection Release](https://vladmihalcea.com/hibernate-aggressive-connection-release/ &quot;Follow link&quot;)","title":"Why is hibernate.connection.release_mode after_transaction not recommended for JTA?","body":"<p>6 years later, but I hope this can help future readers.</p>\n<h2>Background</h2>\n<p>For a couple of years, we have encountered a production bug that kept exhausting the pooled connection in an Atomikos managed Hibernate (3.x.x) &amp; JTA integration.</p>\n<p>With our Atomikos &quot;recovery strategy&quot; (i.e. force release all connections), this was fine until recent upscale with direct modern collaborators with multiple instances in K8S pushed the app's tipping point where we needed to address this issue.</p>\n<p>Navigating around, I found the following set:</p>\n<pre class=\"lang-java prettyprint-override\"><code>setProperty(&quot;hibernate.connection.release_mode&quot;, &quot;after_transaction&quot;);\n</code></pre>\n<p>Which after research it led me to this question (and other multiple unclear/unanswered questions regarding this mode)</p>\n<p>So here are the findings:</p>\n<h2>Origin of Flag</h2>\n<p>In 2005, it seems that a Hibernate JTA integration was causing issues, as a result <a href=\"https://hibernate.atlassian.net/browse/HHH-1287\" rel=\"noreferrer\">HHH-1287</a> was raised:</p>\n<blockquote>\n<p>It looks like the ExtendedJTATransaction is simply not available after the CMT completes and the WebSphereExtendedJTATransactionLookup class attempts to look it up at java:comp/websphere/ExtendedJTATransaction as part of the normal 'after completion' callback.</p>\n<p>The problem occurs when the afterCompletion callback event fires and the ConnectionManager.isAggressiveRelease() method is called from ConnectionManager.afterTransaction(). This attempts to check to see if a transaction is in progress. This test in fact causes the transaction manager to be created (together with a look up of the current transaction) The lookup of the ExtendedJTATransaction fails and the an exception is thrown (see stack trace below).</p>\n<p>Although there may be an inconsistency in the way that a SSB and MDB operate, It seems fair to say that the transaction may not be available if it has completed. A workaround is therefore requested.</p>\n</blockquote>\n<p>As a result a change was committed to circumvent the JTA transaction check in this scenario in the connection manager: (This has then gone though further improvements)</p>\n<pre class=\"lang-java prettyprint-override\"><code>private boolean isAggressiveReleaseNoTransactionCheck() {\n    if (releaseMode == ConnectionReleaseMode.AFTER_STATEMENT) {\n        return true;\n    }\n    else {\n        boolean inAutoCommitState;\n        try {\n            inAutoCommitState = isAutoCommit();\n        }\n        catch( SQLException e ) {\n            inAutoCommitState=true; // assume we are in an auto-commit state\n        }\n        return releaseMode == ConnectionReleaseMode.AFTER_TRANSACTION &amp;&amp; inAutoCommitState;\n    }\n}\n</code></pre>\n<h2>Feature Release</h2>\n<p>After verifying this works, it was released in the wild with the following documentation for 3.x.x:</p>\n<p><strong>Table 3.4. Hibernate JDBC and Connection Properties</strong></p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Property name</th>\n<th>Purpose</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>hibernate.connection.release_mode</td>\n<td>Specify when Hibernate should release JDBC connections. By default, a JDBC connection is held until the session is explicitly closed or disconnected. For an application server JTA datasource, you should use <code>after_statement</code> to aggressively release connections after every JDBC call. For a non-JTA connection, it often makes sense to release the connection at the end of each transaction, by using <code>after_transaction</code>. <code>auto</code> will choose <code>after_statement</code> for the JTA and CMT transaction strategies and <code>after_transaction</code> for the JDBC transaction strategy. <strong>eg.</strong> <code>auto</code> (default) / <code>on_close</code> / <code>after_transaction</code> / <code>after_statement</code></td>\n</tr>\n</tbody>\n</table>\n</div>\n<blockquote>\n<p>For an application server JTA datasource, you should use <code>after_statement</code> to aggressively release connections after every JDBC call.</p>\n</blockquote>\n<h2>Given conclusion</h2>\n<p>Therefore, this was work around certain containers (not just EE containers) that implement &quot;resource containment&quot; checks.</p>\n<p>The Hibernate Session defers  getting a JDBC Connection until it actually needs one, which can lead to  cases like the following where 2 beans share a Session/EM:</p>\n<ul>\n<li>Bean1: get Session, but don't use it yet in way that needs Connection</li>\n<li>Bean1: call Bean2...</li>\n<li>Bean2: get Session, do some work forcing Session to obtain Connection</li>\n<li>Bean2: return (Session still hold Connection)</li>\n</ul>\n<p>At this point, these containers see this as a &quot;leaked&quot; Connection because  the handle was not released by the end of the scope in which it was  obtained. Hence, aggressive releasing.</p>\n<p>You can read more about this in detail here: <a href=\"http://lists.jboss.org/pipermail/hibernate-dev/2006-December/000903.html\" rel=\"noreferrer\">[hibernate-dev] - Connection release modes</a></p>\n<h3>Useful References and Resources:</h3>\n<ul>\n<li><a href=\"https://docs.jboss.org/hibernate/stable/core.old/reference/en/html/transactions-connection-release.html\" rel=\"noreferrer\" title=\"Follow link\">Hibernate - 11.5. Connection Release Modes</a></li>\n<li><a href=\"https://hibernate.atlassian.net/browse/HHH-1287\" rel=\"noreferrer\" title=\"Follow link\">HHH-1287 - The issue that introduced the &quot;after_statement&quot; flag</a></li>\n<li><a href=\"https://vladmihalcea.com/hibernate-aggressive-connection-release/\" rel=\"noreferrer\" title=\"Follow link\">&quot;after_transaction&quot; vs &quot;after_statement&quot; - Hibernate Aggressive Connection Release</a></li>\n</ul>\n"}],"owner":{"account_id":5431088,"reputation":1748,"user_id":4321944,"display_name":"Martin Rauscher"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8331,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":2,"score":13,"last_activity_date":1677863246,"creation_date":1491580222,"question_id":43282331,"body_markdown":"While analyzing some performance problems in Wildfly 10.1 in high pressure scenarios I came to the conclusion, that sometimes parallel HTTP threads block each other. \r\n\r\nThe reason seemed to be that in some HTTP requests we execute two JPQL Queries (actually a delete and a select) and sometimes the second of the two simply didn&#39;t get a JDBC connection from the pool. (We use IBM DB2, if that is important...) That seemed rather ridiculous as the first statement already got a connection.\r\n\r\nAfter reading the Hibernate docs, I see that the default for `hibernate.connection.release_mode` is `after_statement` and that `after_transaction` is not recommended for JTA apps...\r\n\r\nSo... I have a few questions now:\r\n\r\n* Why does `after_statement` ever make sense? (unless you have auto_comit on of course...)\r\n* Why shouldn&#39;t I use `after_transaction` in JTA apps?\r\n* Is my assumption correct that `after_transaction` should fix the described issue?\r\n\r\nAny help is appreciated!","title":"Why is hibernate.connection.release_mode after_transaction not recommended for JTA?","body":"<p>While analyzing some performance problems in Wildfly 10.1 in high pressure scenarios I came to the conclusion, that sometimes parallel HTTP threads block each other. </p>\n\n<p>The reason seemed to be that in some HTTP requests we execute two JPQL Queries (actually a delete and a select) and sometimes the second of the two simply didn't get a JDBC connection from the pool. (We use IBM DB2, if that is important...) That seemed rather ridiculous as the first statement already got a connection.</p>\n\n<p>After reading the Hibernate docs, I see that the default for <code>hibernate.connection.release_mode</code> is <code>after_statement</code> and that <code>after_transaction</code> is not recommended for JTA apps...</p>\n\n<p>So... I have a few questions now:</p>\n\n<ul>\n<li>Why does <code>after_statement</code> ever make sense? (unless you have auto_comit on of course...)</li>\n<li>Why shouldn't I use <code>after_transaction</code> in JTA apps?</li>\n<li>Is my assumption correct that <code>after_transaction</code> should fix the described issue?</li>\n</ul>\n\n<p>Any help is appreciated!</p>\n"},{"tags":["java","android","apk"],"comments":[{"owner":{"account_id":1326012,"reputation":14772,"user_id":1270789,"accept_rate":81,"display_name":"Ken Y-N"},"score":0,"creation_date":1677805849,"post_id":75622234,"comment_id":133415020,"body_markdown":"Please [edit] your post and add the exact text of the error message, and also a compilable version of the code. (And please also fix the formatting)","body":"Please <a href=\"https://stackoverflow.com/posts/75622234/edit\">edit</a> your post and add the exact text of the error message, and also a compilable version of the code. (And please also fix the formatting)"},{"owner":{"account_id":21584472,"reputation":690,"user_id":15915172,"display_name":"Rakesh Saini"},"score":0,"creation_date":1677817707,"post_id":75622234,"comment_id":133416246,"body_markdown":"Have you added &lt;intent-filter&gt;&lt;intent-filter&gt; in the manifest file?","body":"Have you added &lt;intent-filter&gt;&lt;intent-filter&gt; in the manifest file?"},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1677832422,"post_id":75622234,"comment_id":133418740,"body_markdown":"On command-line execute `./gradlew assemble` (Linux/Mac) or `gradlew asemble` (Windows) and you will get output including error messages`.","body":"On command-line execute <code>.&#47;gradlew assemble</code> (Linux/Mac) or <code>gradlew asemble</code> (Windows) and you will get output including error messages`."}],"owner":{"account_id":26530206,"reputation":11,"user_id":20162526,"display_name":"dankatapich"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677863217,"creation_date":1677804500,"question_id":75622234,"body_markdown":"Hi so recently I had some issues with really stupid and simple code for a testing out an android app the code is below if somebody can tell me where I make a mistake? \r\n\r\nThat is what&#39;s in the manifest file:\r\n\r\n```xml\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    package=&quot;example.myapp&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.GET_TASKS&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.KILL_BACKGROUND_PROCESSES&quot; /&gt;\r\n\r\n    &lt;!-- other manifest declarations here --&gt;\r\n\r\n&lt;/manifest&gt;\r\n```\r\n\r\n\r\n```java\r\nimport android.app.*;\r\nimport android.content.*;\r\nimport android.net.*;\r\nimport android.os.*;\r\nimport java.io.*;\r\nimport java.net.*;\r\nimport java.util.*;\r\n\r\npublic class BootReceiver extends BroadcastReceiver {\r\n    @Override\r\n    public void onReceive(Context context, Intent intent) {\r\n        Intent serviceIntent = new Intent(context, InternetCheckService.class);\r\n        context.startService(serviceIntent);\r\n    }\r\n}\r\n\r\npublic class InternetCheckService extends Service {\r\n    private static final String WEBHOOK_URL = &quot;https://discord.com/api/webhooks/1234567890/abcdefghijklmnopqrstuvwxyz&quot;;\r\n\r\n    @Override\r\n    public int onStartCommand(Intent intent, int flags, int startId) {\r\n        ConnectivityManager connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\r\n        NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();\r\n        if (networkInfo != null &amp;&amp; networkInfo.isConnected()) {\r\n            try {\r\n                String publicIpAddress = getPublicIpAddress();\r\n                String serialNumber = Build.getSerial();\r\n                boolean isRooted = isDeviceRooted();\r\n                float cpuUsage = getCpuUsage();\r\n                float ramUsage = getRamUsage();\r\n                String message = String.format(&quot;Device %s is online with IP address %s\\n\\nSystem Information:\\nRooted: %s\\nCPU Usage: %s%%\\nRAM Usage: %s%%&quot;, serialNumber, publicIpAddress, isRooted ? &quot;Yes&quot; : &quot;No&quot;, cpuUsage, ramUsage);\r\n                sendWebhookMessage(WEBHOOK_URL, message);\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        } else {\r\n            Intent intent = new Intent(this, MainActivity.class);\r\n            intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n            startActivity(intent);\r\n        }\r\n        return START_NOT_STICKY;\r\n    }\r\n\r\n    @Override\r\n    public IBinder onBind(Intent intent) {\r\n        return null;\r\n    }\r\n\r\n    private String getPublicIpAddress() throws IOException {\r\n        URL url = new URL(&quot;https://api.ipify.org&quot;);\r\n        HttpURLConnection connection = (HttpURLConnection) url.openConnection();\r\n        connection.setRequestMethod(&quot;GET&quot;);\r\n        BufferedReader reader = new BufferedReader(new InputStreamReader(connection.getInputStream()));\r\n        String line = reader.readLine();\r\n        reader.close();\r\n        return line;\r\n    }\r\n\r\n    private boolean isDeviceRooted() {\r\n        return checkRootMethod1() || checkRootMethod2() || checkRootMethod3();\r\n    }\r\n\r\n    private boolean checkRootMethod1() {\r\n        String buildTags = android.os.Build.TAGS;\r\n        return buildTags != null &amp;&amp; buildTags.contains(&quot;test-keys&quot;);\r\n    }\r\n\r\n    private boolean checkRootMethod2() {\r\n        String[] paths = {&quot;/system/app/Superuser.apk&quot;, &quot;/sbin/su&quot;, &quot;/system/bin/su&quot;, &quot;/system/xbin/su&quot;, &quot;/data/local/xbin/su&quot;, &quot;/data/local/bin/su&quot;, &quot;/system/sd/xbin/su&quot;, &quot;/system/bin/failsafe/su&quot;, &quot;/data/local/su&quot;};\r\n        for (String path : paths) {\r\n            if (new File(path).exists()) return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private boolean checkRootMethod3() {\r\n        Process process = null;\r\n        try {\r\n            process = Runtime.getRuntime().exec(new String[]{&quot;su&quot;, &quot;-c&quot;, &quot;id&quot;});\r\n            BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));\r\n            String output = reader.readLine();\r\n            reader.close();\r\n            return output != null &amp;&amp; output.contains(&quot;uid=0&quot;);\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        } finally {\r\n            if (process != null) {\r\n                process.destroy();\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private float getCpuUsage() {\r\n        try {\r\n            RandomAccessFile reader = new RandomAccessFile\r\n```\r\n\r\nI can&#39;t figure it out.\r\n\r\nI tried to compile it several times with other variants of the same code and nothing.","title":"Android app will not compile and dosent give any specific error","body":"<p>Hi so recently I had some issues with really stupid and simple code for a testing out an android app the code is below if somebody can tell me where I make a mistake?</p>\n<p>That is what's in the manifest file:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    package=&quot;example.myapp&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.GET_TASKS&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.KILL_BACKGROUND_PROCESSES&quot; /&gt;\n\n    &lt;!-- other manifest declarations here --&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import android.app.*;\nimport android.content.*;\nimport android.net.*;\nimport android.os.*;\nimport java.io.*;\nimport java.net.*;\nimport java.util.*;\n\npublic class BootReceiver extends BroadcastReceiver {\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        Intent serviceIntent = new Intent(context, InternetCheckService.class);\n        context.startService(serviceIntent);\n    }\n}\n\npublic class InternetCheckService extends Service {\n    private static final String WEBHOOK_URL = &quot;https://discord.com/api/webhooks/1234567890/abcdefghijklmnopqrstuvwxyz&quot;;\n\n    @Override\n    public int onStartCommand(Intent intent, int flags, int startId) {\n        ConnectivityManager connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\n        NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();\n        if (networkInfo != null &amp;&amp; networkInfo.isConnected()) {\n            try {\n                String publicIpAddress = getPublicIpAddress();\n                String serialNumber = Build.getSerial();\n                boolean isRooted = isDeviceRooted();\n                float cpuUsage = getCpuUsage();\n                float ramUsage = getRamUsage();\n                String message = String.format(&quot;Device %s is online with IP address %s\\n\\nSystem Information:\\nRooted: %s\\nCPU Usage: %s%%\\nRAM Usage: %s%%&quot;, serialNumber, publicIpAddress, isRooted ? &quot;Yes&quot; : &quot;No&quot;, cpuUsage, ramUsage);\n                sendWebhookMessage(WEBHOOK_URL, message);\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        } else {\n            Intent intent = new Intent(this, MainActivity.class);\n            intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n            startActivity(intent);\n        }\n        return START_NOT_STICKY;\n    }\n\n    @Override\n    public IBinder onBind(Intent intent) {\n        return null;\n    }\n\n    private String getPublicIpAddress() throws IOException {\n        URL url = new URL(&quot;https://api.ipify.org&quot;);\n        HttpURLConnection connection = (HttpURLConnection) url.openConnection();\n        connection.setRequestMethod(&quot;GET&quot;);\n        BufferedReader reader = new BufferedReader(new InputStreamReader(connection.getInputStream()));\n        String line = reader.readLine();\n        reader.close();\n        return line;\n    }\n\n    private boolean isDeviceRooted() {\n        return checkRootMethod1() || checkRootMethod2() || checkRootMethod3();\n    }\n\n    private boolean checkRootMethod1() {\n        String buildTags = android.os.Build.TAGS;\n        return buildTags != null &amp;&amp; buildTags.contains(&quot;test-keys&quot;);\n    }\n\n    private boolean checkRootMethod2() {\n        String[] paths = {&quot;/system/app/Superuser.apk&quot;, &quot;/sbin/su&quot;, &quot;/system/bin/su&quot;, &quot;/system/xbin/su&quot;, &quot;/data/local/xbin/su&quot;, &quot;/data/local/bin/su&quot;, &quot;/system/sd/xbin/su&quot;, &quot;/system/bin/failsafe/su&quot;, &quot;/data/local/su&quot;};\n        for (String path : paths) {\n            if (new File(path).exists()) return true;\n        }\n        return false;\n    }\n\n    private boolean checkRootMethod3() {\n        Process process = null;\n        try {\n            process = Runtime.getRuntime().exec(new String[]{&quot;su&quot;, &quot;-c&quot;, &quot;id&quot;});\n            BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));\n            String output = reader.readLine();\n            reader.close();\n            return output != null &amp;&amp; output.contains(&quot;uid=0&quot;);\n        } catch (IOException e) {\n            e.printStackTrace();\n        } finally {\n            if (process != null) {\n                process.destroy();\n            }\n        }\n        return false;\n    }\n\n    private float getCpuUsage() {\n        try {\n            RandomAccessFile reader = new RandomAccessFile\n</code></pre>\n<p>I can't figure it out.</p>\n<p>I tried to compile it several times with other variants of the same code and nothing.</p>\n"},{"tags":["java","intellij-idea","intellij-14"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1677771274,"post_id":75617327,"comment_id":133407012,"body_markdown":"On a side note, if you&#39;re doing excessive horizontal scrolling, that&#39;s usually a sign of either a lack of abstraction or poorly-formatted code. 80 or 120 characters should be an ideal limit for the size of your lines in most projects I&#39;ve worked on.","body":"On a side note, if you&#39;re doing excessive horizontal scrolling, that&#39;s usually a sign of either a lack of abstraction or poorly-formatted code. 80 or 120 characters should be an ideal limit for the size of your lines in most projects I&#39;ve worked on."},{"owner":{"account_id":13438592,"reputation":327,"user_id":14891347,"display_name":"nightwolf555"},"score":0,"creation_date":1677774218,"post_id":75617327,"comment_id":133407990,"body_markdown":"Even something like 90-100 characters will cause excessive scrolling on any normal sized screen with all the spacing and extra details and line numbers shown by intellj","body":"Even something like 90-100 characters will cause excessive scrolling on any normal sized screen with all the spacing and extra details and line numbers shown by intellj"}],"answers":[{"tags":[],"owner":{"account_id":17081761,"reputation":2089,"user_id":12360005,"display_name":"Ruslan Kuleshov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677862849,"creation_date":1677862849,"answer_id":75629917,"question_id":75617327,"body_markdown":"There are some requests to redesign merge dialog window, please feel free to vote:\r\n\r\n\r\nhttps://youtrack.jetbrains.com/issue/IDEA-66552/Merge-dialog-should-not-be-modal-as-well-as-side-diffs-invoked-from-it\r\n\r\nhttps://youtrack.jetbrains.com/issue/IDEA-66552/Merge-dialog-should-not-be-modal-as-well-as-side-diffs-invoked-from-it","title":"Change Layout for IntellJ Git Merge/ Resolve conflicts to 1 page vertical view","body":"<p>There are some requests to redesign merge dialog window, please feel free to vote:</p>\n<p><a href=\"https://youtrack.jetbrains.com/issue/IDEA-66552/Merge-dialog-should-not-be-modal-as-well-as-side-diffs-invoked-from-it\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/IDEA-66552/Merge-dialog-should-not-be-modal-as-well-as-side-diffs-invoked-from-it</a></p>\n<p><a href=\"https://youtrack.jetbrains.com/issue/IDEA-66552/Merge-dialog-should-not-be-modal-as-well-as-side-diffs-invoked-from-it\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/IDEA-66552/Merge-dialog-should-not-be-modal-as-well-as-side-diffs-invoked-from-it</a></p>\n"}],"owner":{"account_id":13438592,"reputation":327,"user_id":14891347,"display_name":"nightwolf555"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677862849,"creation_date":1677769658,"question_id":75617327,"body_markdown":"When I merge java code in intellj it seperate things into 3 tab vertical window with a tab for local changes, result and develop. This uses up a huge amount of screen real estate and is impossible to see all the code at once. It would be much preferable to have a 1 screen vertical layout, with the options then choose which change to select, by clicking accept to code stacked on top of eachother. \r\n\r\nThis is much more readable and usable by user and doesnt require constant horizontal scrolling and window size adjusting, when I&#39;m writing angular code in vscode it gives me a layout like this. is there a way to achieve a similar layout and functionality in intellj?","title":"Change Layout for IntellJ Git Merge/ Resolve conflicts to 1 page vertical view","body":"<p>When I merge java code in intellj it seperate things into 3 tab vertical window with a tab for local changes, result and develop. This uses up a huge amount of screen real estate and is impossible to see all the code at once. It would be much preferable to have a 1 screen vertical layout, with the options then choose which change to select, by clicking accept to code stacked on top of eachother.</p>\n<p>This is much more readable and usable by user and doesnt require constant horizontal scrolling and window size adjusting, when I'm writing angular code in vscode it gives me a layout like this. is there a way to achieve a similar layout and functionality in intellj?</p>\n"},{"tags":["java","spark-java"],"comments":[{"owner":{"account_id":3544299,"reputation":1351,"user_id":2960660,"accept_rate":100,"display_name":"Laercio Metzner"},"score":0,"creation_date":1483523021,"post_id":41452156,"comment_id":70126810,"body_markdown":"Prrobably those instances are using the same port number. When you start a spark instance it has to run on its own port","body":"Prrobably those instances are using the same port number. When you start a spark instance it has to run on its own port"},{"owner":{"account_id":226469,"reputation":12047,"user_id":487534,"accept_rate":90,"display_name":"jabal"},"score":1,"creation_date":1483566774,"post_id":41452156,"comment_id":70153527,"body_markdown":"No, it happens when you try to initialize a second one regardless of the port being the same or not. The first initialization sets a flag to true and from that point on most of the configuration methods get locked down.","body":"No, it happens when you try to initialize a second one regardless of the port being the same or not. The first initialization sets a flag to true and from that point on most of the configuration methods get locked down."},{"owner":{"account_id":59864,"reputation":11232,"user_id":179014,"accept_rate":60,"display_name":"asmaier"},"score":0,"creation_date":1514368422,"post_id":41452156,"comment_id":82948210,"body_markdown":"I had the same issue when running integration tests with sparkjava. As a workaround make sure to set forkCount=1/reuseForks=false for maven failsafe plugin to execute each test class in its own JVM process (see http://maven.apache.org/surefire/maven-surefire-plugin/examples/fork-options-and-parallel-execution.html)","body":"I had the same issue when running integration tests with sparkjava. As a workaround make sure to set forkCount=1/reuseForks=false for maven failsafe plugin to execute each test class in its own JVM process (see <a href=\"http://maven.apache.org/surefire/maven-surefire-plugin/examples/fork-options-and-parallel-execution.html\" rel=\"nofollow noreferrer\">maven.apache.org/surefire/maven-surefire-plugin/examples/&hellip;</a>)"}],"answers":[{"tags":[],"owner":{"account_id":226469,"reputation":12047,"user_id":487534,"accept_rate":90,"display_name":"jabal"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1484774883,"creation_date":1484774883,"answer_id":41729764,"question_id":41452156,"body_markdown":"The trick is to ignore the external static shell around Spark implemented in `spark.Spark` and directly work with the internal `spark.webserver.SparkServer`. There are some obstackles in the code that require workaround, e.g. `spark.webserver.JettyHandler` is not public, so you can&#39;t instantiate it from your code, but you can extend that with your own class placed into that package and turn it public.\r\n\r\nSo the solution is along these lines:\r\n\r\n    SimpleRouteMatcher routeMatcher1 = new SimpleRouteMatcher();\r\n    routeMatcher1.parseValidateAddRoute(&quot;get &#39;/foo&#39;&quot;, &quot;*/*&quot;, wrap(&quot;/foo&quot;, &quot;*/*&quot;, (req, res) -&gt; &quot;Hello World 1&quot;));\r\n    \t\t\r\n    MatcherFilter matcherFilter1 = new MatcherFilter(routeMatcher1, false, false);\r\n    matcherFilter1.init(null);\r\n    PublicJettyHandler handler1 = new PublicJettyHandler(matcherFilter1);\r\n    SparkServer server1 = new SparkServer(handler1);\r\n    \t\t\r\n    new Thread(() -&gt; {\r\n    \t\t\tserver1.ignite(&quot;0.0.0.0&quot;, 4567, null, null, null, null, &quot;/META-INF/resources/&quot;, null, new CountDownLatch(1),\r\n    \t\t\t\t\t-1, -1, -1);\r\n    \t\t}).start();\r\n\r\nAnd need to duplicate the wrap method in your codebase:\r\n\r\n    protected RouteImpl wrap(final String path, String acceptType, final Route route) {\r\n            if (acceptType == null) {\r\n                acceptType = &quot;*/*&quot;;\r\n            }\r\n            RouteImpl impl = new RouteImpl(path, acceptType) {\r\n                @Override\r\n                public Object handle(Request request, Response response) throws Exception {\r\n                    return route.handle(request, response);\r\n                }\r\n            };\r\n            return impl;\r\n        }\r\n\r\nThis seems to be a viable workaround if you need multiple Spark servers in your app.","title":"Multiple Spark servers in a single JVM","body":"<p>The trick is to ignore the external static shell around Spark implemented in <code>spark.Spark</code> and directly work with the internal <code>spark.webserver.SparkServer</code>. There are some obstackles in the code that require workaround, e.g. <code>spark.webserver.JettyHandler</code> is not public, so you can't instantiate it from your code, but you can extend that with your own class placed into that package and turn it public.</p>\n\n<p>So the solution is along these lines:</p>\n\n<pre><code>SimpleRouteMatcher routeMatcher1 = new SimpleRouteMatcher();\nrouteMatcher1.parseValidateAddRoute(\"get '/foo'\", \"*/*\", wrap(\"/foo\", \"*/*\", (req, res) -&gt; \"Hello World 1\"));\n\nMatcherFilter matcherFilter1 = new MatcherFilter(routeMatcher1, false, false);\nmatcherFilter1.init(null);\nPublicJettyHandler handler1 = new PublicJettyHandler(matcherFilter1);\nSparkServer server1 = new SparkServer(handler1);\n\nnew Thread(() -&gt; {\n            server1.ignite(\"0.0.0.0\", 4567, null, null, null, null, \"/META-INF/resources/\", null, new CountDownLatch(1),\n                    -1, -1, -1);\n        }).start();\n</code></pre>\n\n<p>And need to duplicate the wrap method in your codebase:</p>\n\n<pre><code>protected RouteImpl wrap(final String path, String acceptType, final Route route) {\n        if (acceptType == null) {\n            acceptType = \"*/*\";\n        }\n        RouteImpl impl = new RouteImpl(path, acceptType) {\n            @Override\n            public Object handle(Request request, Response response) throws Exception {\n                return route.handle(request, response);\n            }\n        };\n        return impl;\n    }\n</code></pre>\n\n<p>This seems to be a viable workaround if you need multiple Spark servers in your app.</p>\n"},{"tags":[],"owner":{"account_id":67096,"reputation":24787,"user_id":196507,"accept_rate":90,"display_name":"lepe"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1491192915,"creation_date":1491192915,"answer_id":43176400,"question_id":41452156,"body_markdown":"From Spark 2.5 you can use `ignite()`:\r\n\r\nhttp://sparkjava.com/news.html#spark25released\r\n\r\nExample:\r\n\r\n    public static void main(String[] args) {\r\n        igniteFirstSpark();\r\n        igniteSecondSpark();\r\n    }\r\n    \r\n    static void igniteSecondSpark() {\r\n        Service http = ignite();\r\n    \r\n        http.get(&quot;/basicHello&quot;, (q, a) -&gt; &quot;Hello from port 4567!&quot;);\r\n    }\r\n    \r\n    static void igniteFirstSpark() {\r\n        Service http = ignite()\r\n                          .port(8080)\r\n                          .threadPool(20);\r\n    \r\n        http.get(&quot;/configuredHello&quot;, (q, a) -&gt; &quot;Hello from port 8080!&quot;);\r\n    }\r\n\r\nI personally initialize them something like this:\r\n\r\n    import spark.Service\r\n    \r\n    public static void main(String[] args) {\r\n        Service service1 = Service.ignite().port(8080).threadPool(20)\r\n        Service service2 = Service.ignite().port(8081).threadPool(10)\r\n    }\r\n\r\nI recommend to read about [how to use those services outside your main method](https://stackoverflow.com/questions/34976459/sparkjava-do-routes-have-to-be-in-main-method), which I think would be a great use here.\r\n\r\n","title":"Multiple Spark servers in a single JVM","body":"<p>From Spark 2.5 you can use <code>ignite()</code>:</p>\n\n<p><a href=\"http://sparkjava.com/news.html#spark25released\" rel=\"noreferrer\">http://sparkjava.com/news.html#spark25released</a></p>\n\n<p>Example:</p>\n\n<pre><code>public static void main(String[] args) {\n    igniteFirstSpark();\n    igniteSecondSpark();\n}\n\nstatic void igniteSecondSpark() {\n    Service http = ignite();\n\n    http.get(\"/basicHello\", (q, a) -&gt; \"Hello from port 4567!\");\n}\n\nstatic void igniteFirstSpark() {\n    Service http = ignite()\n                      .port(8080)\n                      .threadPool(20);\n\n    http.get(\"/configuredHello\", (q, a) -&gt; \"Hello from port 8080!\");\n}\n</code></pre>\n\n<p>I personally initialize them something like this:</p>\n\n<pre><code>import spark.Service\n\npublic static void main(String[] args) {\n    Service service1 = Service.ignite().port(8080).threadPool(20)\n    Service service2 = Service.ignite().port(8081).threadPool(10)\n}\n</code></pre>\n\n<p>I recommend to read about <a href=\"https://stackoverflow.com/questions/34976459/sparkjava-do-routes-have-to-be-in-main-method\">how to use those services outside your main method</a>, which I think would be a great use here.</p>\n"},{"tags":[],"owner":{"account_id":13294590,"reputation":11,"user_id":9598040,"display_name":"Agu-GC"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1528907385,"creation_date":1528897936,"answer_id":50838983,"question_id":41452156,"body_markdown":"I have this problem running unit tests with Spark, to fix it I modify the `pom.xml` file.\r\n\r\n`forkCount=1\r\nreuseForks=false`\r\n\r\n\r\n\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;${surefire.version}&lt;/version&gt;\r\n                &lt;dependencies&gt;\r\n                    &lt;dependency&gt;\r\n                        &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;junit-platform-surefire-provider&lt;/artifactId&gt;\r\n                        &lt;version&gt;${junit.platform.version}&lt;/version&gt;\r\n                    &lt;/dependency&gt;\r\n                &lt;/dependencies&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;forkCount&gt;1&lt;/forkCount&gt;\r\n                    &lt;reuseForks&gt;false&lt;/reuseForks&gt;","title":"Multiple Spark servers in a single JVM","body":"<p>I have this problem running unit tests with Spark, to fix it I modify the <code>pom.xml</code> file.</p>\n\n<p><code>forkCount=1\nreuseForks=false</code></p>\n\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;version&gt;${surefire.version}&lt;/version&gt;\n            &lt;dependencies&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\n                    &lt;artifactId&gt;junit-platform-surefire-provider&lt;/artifactId&gt;\n                    &lt;version&gt;${junit.platform.version}&lt;/version&gt;\n                &lt;/dependency&gt;\n            &lt;/dependencies&gt;\n            &lt;configuration&gt;\n                &lt;forkCount&gt;1&lt;/forkCount&gt;\n                &lt;reuseForks&gt;false&lt;/reuseForks&gt;\n</code></pre>\n"}],"owner":{"account_id":226469,"reputation":12047,"user_id":487534,"accept_rate":90,"display_name":"jabal"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5109,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":43176400,"answer_count":3,"score":10,"last_activity_date":1677862356,"creation_date":1483476747,"question_id":41452156,"body_markdown":"Is there any way to run multiple instances of Sparkjava server in the same JVM? I am using it in a &quot;plugin&quot; software and based on external circumstances multiple instances of my plugin might be started up which then cause\r\n\r\n    java.lang.IllegalStateException: This must be done before route mapping has begun\r\n    at spark.SparkBase.throwBeforeRouteMappingException(SparkBase.java:256)\r\n    at spark.SparkBase.port(SparkBase.java:101)\r\n    at com.foo.bar.a(SourceFile:59)\r\n\r\nIt seems to me by looking at the code that it is heavily built around static fields in the code, so I am thinking about a classloader trick or working with `SparkServerFactory` somehow eliminating `SparkBase`.","title":"Multiple Spark servers in a single JVM","body":"<p>Is there any way to run multiple instances of Sparkjava server in the same JVM? I am using it in a \"plugin\" software and based on external circumstances multiple instances of my plugin might be started up which then cause</p>\n\n<pre><code>java.lang.IllegalStateException: This must be done before route mapping has begun\nat spark.SparkBase.throwBeforeRouteMappingException(SparkBase.java:256)\nat spark.SparkBase.port(SparkBase.java:101)\nat com.foo.bar.a(SourceFile:59)\n</code></pre>\n\n<p>It seems to me by looking at the code that it is heavily built around static fields in the code, so I am thinking about a classloader trick or working with <code>SparkServerFactory</code> somehow eliminating <code>SparkBase</code>.</p>\n"},{"tags":["java","intellij-idea","dead-code"],"comments":[{"owner":{"account_id":1301815,"reputation":31761,"user_id":1251549,"accept_rate":29,"display_name":"Cherry"},"score":0,"creation_date":1395283132,"post_id":22522013,"comment_id":34271277,"body_markdown":"Just run inspection click right button and see this in the menu list.","body":"Just run inspection click right button and see this in the menu list."},{"owner":{"account_id":2339925,"reputation":15581,"user_id":2051454,"accept_rate":60,"display_name":"Software Engineer"},"score":0,"creation_date":1395330433,"post_id":22522013,"comment_id":34299029,"body_markdown":"That&#39;s two questions -- they would be better as separate questions. Also serialVersionXXX is a bad idea for most projects.","body":"That&#39;s two questions -- they would be better as separate questions. Also serialVersionXXX is a bad idea for most projects."},{"owner":{"account_id":2339925,"reputation":15581,"user_id":2051454,"accept_rate":60,"display_name":"Software Engineer"},"score":2,"creation_date":1395596373,"post_id":22522013,"comment_id":34399219,"body_markdown":"It&#39;s a bad idea because very few developers know what it&#39;s for, and it is almost always misused. It is extremely rare in java to use the serialization mechanism to read and write objects at the byte level, and if you do the default serial version is usually sufficient to provide safety. A hard coded serialVersion must be updated manually every time the interface of a class changes, and every time the field list changes -- invariably, developers do not do this because they simply don&#39;t understand what the serialVersion is for. The main reason you see it in code is because of eclipse.","body":"It&#39;s a bad idea because very few developers know what it&#39;s for, and it is almost always misused. It is extremely rare in java to use the serialization mechanism to read and write objects at the byte level, and if you do the default serial version is usually sufficient to provide safety. A hard coded serialVersion must be updated manually every time the interface of a class changes, and every time the field list changes -- invariably, developers do not do this because they simply don&#39;t understand what the serialVersion is for. The main reason you see it in code is because of eclipse."}],"answers":[{"tags":[],"owner":{"account_id":282742,"reputation":21634,"user_id":579828,"accept_rate":83,"display_name":"Vic"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1395304762,"creation_date":1395304762,"answer_id":22527505,"question_id":22522013,"body_markdown":"Maybe you should look into the `Unused Symbol` inspection with the following settings:\r\n\r\n![enter image description here][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/t3zFX.png","title":"How find all unused classes in Intellij Idea?","body":"<p>Maybe you should look into the <code>Unused Symbol</code> inspection with the following settings:</p>\n\n<p><img src=\"https://i.stack.imgur.com/t3zFX.png\" alt=\"enter image description here\"></p>\n"},{"tags":[],"owner":{"account_id":6189696,"reputation":303,"user_id":4822716,"display_name":"sunny"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1429773570,"creation_date":1429773570,"answer_id":29816357,"question_id":22522013,"body_markdown":"I am not sure if this will answer your question but I used a tool in past as Fortify to run code review rules on the project, that precisely points to the unused imports, dead code, unused classes etc. It is a paid software but I am sure there will be some free plugins/software will be available for same.\r\n\r\n","title":"How find all unused classes in Intellij Idea?","body":"<p>I am not sure if this will answer your question but I used a tool in past as Fortify to run code review rules on the project, that precisely points to the unused imports, dead code, unused classes etc. It is a paid software but I am sure there will be some free plugins/software will be available for same.</p>\n"},{"tags":[],"owner":{"account_id":37073,"reputation":23568,"user_id":105904,"display_name":"Andrew Janke"},"down_vote_count":5,"up_vote_count":16,"is_accepted":false,"score":11,"last_activity_date":1430282616,"creation_date":1430282616,"answer_id":29934536,"question_id":22522013,"body_markdown":"I don&#39;t think this is doable. I suspect this feature is intentionally left out of IDEs because it can&#39;t be used safely the way that other &quot;remove unused XXX&quot; refactorings can.\r\n\r\nThe unused declarations IDEA (and AFAIK, NetBeans) looks for are for private members and local variables: things that are not accessible, even dynamically, from outside that class or scope. (Well, at least without doing things with Reflection or JVM hacking that you&#39;re not supposed to.) No matter what outside code does with your library, it won&#39;t cause those things to be used, because their scope is limited and the IDE can see all of it. The compiler can determine this by looking at just your code.\r\n\r\nFor classes, even if they don&#39;t have `public` access, they can be referenced dynamically with `Class.forName()`, and this actually happens in live code. So even if they&#39;re not apparently used within the code of your project, they might be used depending on what you or external code using your library runs. So the IDE can&#39;t guarantee that removing those classes won&#39;t change externally observable behavior.\r\n\r\nWhich is why I think IDEA just doesn&#39;t provide this behavior: it might give users false expectations of safety, and removing them is not a safe refactoring.","title":"How find all unused classes in Intellij Idea?","body":"<p>I don't think this is doable. I suspect this feature is intentionally left out of IDEs because it can't be used safely the way that other \"remove unused XXX\" refactorings can.</p>\n\n<p>The unused declarations IDEA (and AFAIK, NetBeans) looks for are for private members and local variables: things that are not accessible, even dynamically, from outside that class or scope. (Well, at least without doing things with Reflection or JVM hacking that you're not supposed to.) No matter what outside code does with your library, it won't cause those things to be used, because their scope is limited and the IDE can see all of it. The compiler can determine this by looking at just your code.</p>\n\n<p>For classes, even if they don't have <code>public</code> access, they can be referenced dynamically with <code>Class.forName()</code>, and this actually happens in live code. So even if they're not apparently used within the code of your project, they might be used depending on what you or external code using your library runs. So the IDE can't guarantee that removing those classes won't change externally observable behavior.</p>\n\n<p>Which is why I think IDEA just doesn't provide this behavior: it might give users false expectations of safety, and removing them is not a safe refactoring.</p>\n"},{"tags":[],"owner":{"account_id":5696978,"reputation":4019,"user_id":4503189,"display_name":"BlondCode"},"down_vote_count":5,"up_vote_count":267,"is_accepted":false,"score":262,"last_activity_date":1563363395,"creation_date":1467889980,"answer_id":38244028,"question_id":22522013,"body_markdown":"- Press &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;Shift&lt;/kbd&gt;+&lt;kbd&gt;A&lt;/kbd&gt; (in Mac &lt;kbd&gt;Command&lt;/kbd&gt;+&lt;kbd&gt;Shift&lt;/kbd&gt;+&lt;kbd&gt;A&lt;/kbd&gt;)\r\n- Enter &quot;unused declar&quot;\r\n- Double-click on &quot;Unused declaration&quot;\r\n\r\nSettings will pop up\r\n\r\n- Click on Java/Declaration redundancy/Unused declaration\r\n- on the right bottom select &quot;On the fly editor settings&quot;\r\n- untick check fields, ..., check parameters. Only Check Classes should be ticked.\r\n- Press OK\r\n\r\nSettings closes\r\n\r\n- On the menu bar, click on Analyze / Run Inspection by Name (or &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;Alt&lt;/kbd&gt;+&lt;kbd&gt;Shift&lt;/kbd&gt;+&lt;kbd&gt;I&lt;/kbd&gt; - in Mac &lt;kbd&gt;Command&lt;/kbd&gt;+&lt;kbd&gt;Option&lt;/kbd&gt;+&lt;kbd&gt;Shift&lt;/kbd&gt;+&lt;kbd&gt;I&lt;/kbd&gt;)\r\n- Insert text &quot;Unused decla&quot;\r\n- Select &quot;Unused declaration   Java|Declaration redundancy&quot;\r\n\r\nSearch starts\r\n\r\n- Check the job state on bottom of Idea, when finished: enjoy the results and the great feeling of cleaning up the messed code. :)\r\n\r\n","title":"How find all unused classes in Intellij Idea?","body":"<ul>\n<li>Press <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>A</kbd> (in Mac <kbd>Command</kbd>+<kbd>Shift</kbd>+<kbd>A</kbd>)</li>\n<li>Enter \"unused declar\"</li>\n<li>Double-click on \"Unused declaration\"</li>\n</ul>\n\n<p>Settings will pop up</p>\n\n<ul>\n<li>Click on Java/Declaration redundancy/Unused declaration</li>\n<li>on the right bottom select \"On the fly editor settings\"</li>\n<li>untick check fields, ..., check parameters. Only Check Classes should be ticked.</li>\n<li>Press OK</li>\n</ul>\n\n<p>Settings closes</p>\n\n<ul>\n<li>On the menu bar, click on Analyze / Run Inspection by Name (or <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>Shift</kbd>+<kbd>I</kbd> - in Mac <kbd>Command</kbd>+<kbd>Option</kbd>+<kbd>Shift</kbd>+<kbd>I</kbd>)</li>\n<li>Insert text \"Unused decla\"</li>\n<li>Select \"Unused declaration   Java|Declaration redundancy\"</li>\n</ul>\n\n<p>Search starts</p>\n\n<ul>\n<li>Check the job state on bottom of Idea, when finished: enjoy the results and the great feeling of cleaning up the messed code. :)</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":5080491,"reputation":15121,"user_id":4076764,"accept_rate":74,"display_name":"Adam Hughes"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1677861988,"creation_date":1636469394,"answer_id":69900235,"question_id":22522013,"body_markdown":"Update 2023:\r\n\r\nctrl + alt + shift + I \r\n\r\n[![enter image description here][1]][1]\r\n\r\nClick on highlighted &quot;Unused declaration&quot; \r\n\r\n[![enter image description here][2]][2]\r\n\r\nSelect the options you care about.  In this case, I chose only &quot;Classes&quot; to find unused classes.\r\n\r\n**BE CAREFUL WITH THIS THOUGH**  I&#39;ve found that classes that are used inherently by reference, for example through hibernate, will say they&#39;re unused but right clicking class and doing Find Usages shows otherwise.  This only checks if constructor is called explicitly.  \r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gujcL.png\r\n  [2]: https://i.stack.imgur.com/LO1YB.png\r\n  [3]: https://i.stack.imgur.com/SVYUZ.gif","title":"How find all unused classes in Intellij Idea?","body":"<p>Update 2023:</p>\n<p>ctrl + alt + shift + I</p>\n<p><a href=\"https://i.stack.imgur.com/gujcL.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/gujcL.png\" alt=\"enter image description here\" /></a></p>\n<p>Click on highlighted &quot;Unused declaration&quot;</p>\n<p><a href=\"https://i.stack.imgur.com/LO1YB.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/LO1YB.png\" alt=\"enter image description here\" /></a></p>\n<p>Select the options you care about.  In this case, I chose only &quot;Classes&quot; to find unused classes.</p>\n<p><strong>BE CAREFUL WITH THIS THOUGH</strong>  I've found that classes that are used inherently by reference, for example through hibernate, will say they're unused but right clicking class and doing Find Usages shows otherwise.  This only checks if constructor is called explicitly.</p>\n"},{"tags":[],"owner":{"account_id":3532567,"reputation":349,"user_id":2951657,"display_name":"Thuan Tran"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670576052,"creation_date":1670576052,"answer_id":74740759,"question_id":22522013,"body_markdown":"Press Ctrl + Shift + A, in action tab choose Analyze -&gt; Run Inspection by Name...-&gt; Unused declaration -&gt; Show popup -&gt; Click OK\r\n [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/XMNp1.png","title":"How find all unused classes in Intellij Idea?","body":"<p>Press Ctrl + Shift + A, in action tab choose Analyze -&gt; Run Inspection by Name...-&gt; Unused declaration -&gt; Show popup -&gt; Click OK\n<a href=\"https://i.stack.imgur.com/XMNp1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XMNp1.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":5418168,"reputation":1454,"user_id":4312720,"display_name":"Jorge Tovar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672086416,"creation_date":1672086416,"answer_id":74923759,"question_id":22522013,"body_markdown":"\r\n- Go to the **code tab, analyze code**,  and **run inspection by name**. \r\n\r\n[![navigation][1]][1]\r\n\r\n- Select class checkbox ✅\r\n\r\n[![settings][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/TDln4.png\r\n  [2]: https://i.stack.imgur.com/V0AsS.png","title":"How find all unused classes in Intellij Idea?","body":"<ul>\n<li>Go to the <strong>code tab, analyze code</strong>,  and <strong>run inspection by name</strong>.</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/TDln4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TDln4.png\" alt=\"navigation\" /></a></p>\n<ul>\n<li>Select class checkbox ✅</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/V0AsS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/V0AsS.png\" alt=\"settings\" /></a></p>\n"}],"owner":{"account_id":1301815,"reputation":31761,"user_id":1251549,"accept_rate":29,"display_name":"Cherry"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":89054,"favorite_count":0,"down_vote_count":0,"up_vote_count":166,"answer_count":7,"score":166,"last_activity_date":1677861988,"creation_date":1395281030,"question_id":22522013,"body_markdown":"There is an inspection &quot;Unused declaration&quot; which can find all unused code in Intellij Idea. (see https://stackoverflow.com/questions/6587729/how-to-use-intellij-idea-to-find-all-unused-code)\r\nBut I want to find all unused classes, **not** methods, variables etc. **Only** classes. (it is difficult to find only classes in 3000 result list). How I can do that?\r\n","title":"How find all unused classes in Intellij Idea?","body":"<p>There is an inspection &quot;Unused declaration&quot; which can find all unused code in Intellij Idea. (see <a href=\"https://stackoverflow.com/questions/6587729/how-to-use-intellij-idea-to-find-all-unused-code\">How to use IntelliJ IDEA to find all unused code?</a>)\nBut I want to find all unused classes, <strong>not</strong> methods, variables etc. <strong>Only</strong> classes. (it is difficult to find only classes in 3000 result list). How I can do that?</p>\n"},{"tags":["java","spring-boot","spring-security","authorization","shiro"],"comments":[{"owner":{"account_id":6993865,"reputation":58,"user_id":5362116,"display_name":"Shubham"},"score":0,"creation_date":1675710858,"post_id":75359869,"comment_id":132983710,"body_markdown":"Assigning static roles that are applicable on all resources will not be helpful. \nI can have John and Jane as admins for Resource1, and Alice and Bob as admins for Resource2.\nAnd there can be N Number of these resources","body":"Assigning static roles that are applicable on all resources will not be helpful.  I can have John and Jane as admins for Resource1, and Alice and Bob as admins for Resource2. And there can be N Number of these resources"},{"owner":{"account_id":6993865,"reputation":58,"user_id":5362116,"display_name":"Shubham"},"score":0,"creation_date":1675715262,"post_id":75359869,"comment_id":132984910,"body_markdown":"Currently we using a request filter to intercept call there we check the user, also in a database we are storing user -&gt; urls mapping. Like john -&gt; /resources/R1. I am looking for a better and straight forward way to achieve this.","body":"Currently we using a request filter to intercept call there we check the user, also in a database we are storing user -&gt; urls mapping. Like john -&gt; /resources/R1. I am looking for a better and straight forward way to achieve this."}],"answers":[{"tags":[],"owner":{"account_id":3583855,"reputation":150,"user_id":2991440,"display_name":"krishnan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675683649,"creation_date":1675683649,"answer_id":75360845,"question_id":75359869,"body_markdown":"You could use Spring Security for this use case.\r\nAs a general practice it is recommended to assign roles for users for maintability. \r\nFor example assign admin role to - john.doe@company.com, jane.doe@company.com then manage the access using the role.\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfiguration extends WebSecurityConfigurerAdapter {\r\n    \t\r\n    \t// Roles for users\r\n    \tprivate static final String ROLE_1 = &quot;ADMIN&quot;;\r\n    \tprivate static final String ROLE_2 = &quot;USER&quot;;\r\n    \t\r\n    \t// In-memory users with roles\r\n    \t@Override\r\n    \tprotected void configure(AuthenticationManagerBuilder auth) throws Exception {\t\t\r\n    \t\tauth.inMemoryAuthentication()\r\n    \t\t\t\t.withUser(&quot;john.doe@company.com&quot;)\r\n    \t\t\t\t.password(passwordEncoder().encode(&quot;admin@123&quot;))\r\n    \t\t\t\t.roles(ROLE_1)\r\n                    .and()\r\n    \t\t\t\t.withUser(&quot;jane.doe@company.com&quot;)\r\n    \t\t\t\t.password(passwordEncoder().encode(&quot;admin@12345&quot;))\r\n    \t\t\t\t.roles(ROLE_1)\r\n    \t\t\t\t.and()\r\n    \t\t\t\t.withUser(&quot;user&quot;)\r\n    \t\t\t\t.password(passwordEncoder().encode(&quot;user@123&quot;))\r\n    \t\t\t\t.roles(ROLE_2);\r\n    \t}\r\n    \t\r\n    \t// Password encoding\r\n    \t@Bean\r\n    \tpublic PasswordEncoder passwordEncoder() {\r\n    \t\treturn new BCryptPasswordEncoder();\r\n    \t}\r\n    \r\n    \t// Authorized the request based on role\r\n    \t@Override\r\n    \tprotected void configure(HttpSecurity http) throws Exception {\r\n    \t\thttp.authorizeRequests()\r\n    \t\t\t\t.antMatchers(&quot;/resources/**&quot;).hasRole(ROLE_1)\r\n    \t\t\t\t.antMatchers(&quot;/all&quot;).permitAll()\r\n    \t\t\t\t.and().formLogin();\r\n    \t}\r\n    }","title":"Achieve Dynamic REST Resource specific Authorization","body":"<p>You could use Spring Security for this use case.\nAs a general practice it is recommended to assign roles for users for maintability.\nFor example assign admin role to - john.doe@company.com, jane.doe@company.com then manage the access using the role.</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfiguration extends WebSecurityConfigurerAdapter {\n    \n    // Roles for users\n    private static final String ROLE_1 = &quot;ADMIN&quot;;\n    private static final String ROLE_2 = &quot;USER&quot;;\n    \n    // In-memory users with roles\n    @Override\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {      \n        auth.inMemoryAuthentication()\n                .withUser(&quot;john.doe@company.com&quot;)\n                .password(passwordEncoder().encode(&quot;admin@123&quot;))\n                .roles(ROLE_1)\n                .and()\n                .withUser(&quot;jane.doe@company.com&quot;)\n                .password(passwordEncoder().encode(&quot;admin@12345&quot;))\n                .roles(ROLE_1)\n                .and()\n                .withUser(&quot;user&quot;)\n                .password(passwordEncoder().encode(&quot;user@123&quot;))\n                .roles(ROLE_2);\n    }\n    \n    // Password encoding\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    // Authorized the request based on role\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.authorizeRequests()\n                .antMatchers(&quot;/resources/**&quot;).hasRole(ROLE_1)\n                .antMatchers(&quot;/all&quot;).permitAll()\n                .and().formLogin();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9881954,"reputation":96,"user_id":7317761,"display_name":"Sakshi Sachdeva"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677861604,"creation_date":1677861207,"answer_id":75629651,"question_id":75359869,"body_markdown":"This can be achieved using a method level security from SpringBoot.\r\n\r\nFirst enable Method Level Security by annotating a Config class like -\r\n```\r\n@Configuration\r\n@EnableGlobalMethodSecurity(prePostEnabled = true)\r\npublic class GlobalMethodConfig extends GlobalMethodSecurityConfiguration\r\n```\r\n\r\nThen provide an implementation of `PermissionEvaluator` class like -\r\n```\r\n@Override\r\npublic boolean hasPermission(Authentication authentication, Serializable targetId, Object permission) {\r\n  if (permission.equals(&quot;RESOURCE_WRITE_AUTHORITY&quot;)) {\r\n    Resource res = resourceRepository.getResourceById((String) targetId);\r\n    if(env != null) {\r\n      return env.getAdmins().contains(authentication.getName());\r\n    }\r\n  }\r\n  return false;\r\n}\r\n```\r\n\r\nAfter which you can annotate your PUT method in controller or the corresponding method in the service, to use PermissionEvaluator, like \r\n\r\n```\r\n@PreAuthorize(&quot;hasPermission(#resourceName, &#39;RESOURCE_WRITE_AUTHORITY&#39;)&quot;)\r\npublic Environment updateResource(String resourceName)\r\n```\r\n\r\nReferences -\r\nhttps://docs.spring.io/spring-security/site/docs/3.0.x/reference/el-access.html#:~:text=15.3.1%C2%A0%40Pre%20and%20%40Post%20Annotations","title":"Achieve Dynamic REST Resource specific Authorization","body":"<p>This can be achieved using a method level security from SpringBoot.</p>\n<p>First enable Method Level Security by annotating a Config class like -</p>\n<pre><code>@Configuration\n@EnableGlobalMethodSecurity(prePostEnabled = true)\npublic class GlobalMethodConfig extends GlobalMethodSecurityConfiguration\n</code></pre>\n<p>Then provide an implementation of <code>PermissionEvaluator</code> class like -</p>\n<pre><code>@Override\npublic boolean hasPermission(Authentication authentication, Serializable targetId, Object permission) {\n  if (permission.equals(&quot;RESOURCE_WRITE_AUTHORITY&quot;)) {\n    Resource res = resourceRepository.getResourceById((String) targetId);\n    if(env != null) {\n      return env.getAdmins().contains(authentication.getName());\n    }\n  }\n  return false;\n}\n</code></pre>\n<p>After which you can annotate your PUT method in controller or the corresponding method in the service, to use PermissionEvaluator, like</p>\n<pre><code>@PreAuthorize(&quot;hasPermission(#resourceName, 'RESOURCE_WRITE_AUTHORITY')&quot;)\npublic Environment updateResource(String resourceName)\n</code></pre>\n<p>References -\n<a href=\"https://docs.spring.io/spring-security/site/docs/3.0.x/reference/el-access.html#:%7E:text=15.3.1%C2%A0%40Pre%20and%20%40Post%20Annotations\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-security/site/docs/3.0.x/reference/el-access.html#:~:text=15.3.1%C2%A0%40Pre%20and%20%40Post%20Annotations</a></p>\n"}],"owner":{"account_id":6993865,"reputation":58,"user_id":5362116,"display_name":"Shubham"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":105,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":75629651,"answer_count":2,"score":-1,"last_activity_date":1677861604,"creation_date":1675678019,"question_id":75359869,"body_markdown":"We have a SpringBoot based module, we have REST APIs which allow creating resources with Params like\r\n\r\n#### Request \r\n**POST** /resources\r\n```\r\n{\r\n  &quot;resourceName&quot;: &quot;Res1&quot;,\r\n  &quot;admins&quot;: [&quot;john.doe@company.com&quot;, &quot;jane.doe@company.com&quot;]\r\n}\r\n```\r\n\r\n#### Response\r\n```\r\n{\r\n  &quot;id&quot;: &quot;R1&quot;\r\n  &quot;resourceName&quot;: &quot;Res1&quot;,\r\n  &quot;admins&quot;: [&quot;john.doe@company.com&quot;, &quot;jane.doe@company.com&quot;]\r\n}\r\n```\r\n\r\n#### Request \r\n**POST** /resources\r\n```\r\n{\r\n  &quot;resourceName&quot;: &quot;Res2&quot;,\r\n  &quot;admins&quot;: [&quot;alice@company.com&quot;, &quot;bob@company.com&quot;]\r\n}\r\n```\r\n\r\n#### Response\r\n```\r\n{\r\n  &quot;id&quot;: &quot;R2&quot;\r\n  &quot;resourceName&quot;: &quot;Res2&quot;,\r\n  &quot;admins&quot;: [&quot;alice@company.com&quot;, &quot;bob@company.com&quot;]\r\n}\r\n```\r\n\r\n\r\nFor `R1` update API should only be accesible by John/Jane\r\n\r\n\r\n#### Request \r\n**PUT** /resources/R1\r\n```\r\n{\r\n  &quot;resourceName&quot;: &quot;Resource1&quot;,\r\n  &quot;admins&quot;: [&quot;john.doe@company.com&quot;, &quot;jane.doe@company.com&quot;, &quot;jacob@company.com&quot;]\r\n}\r\n```\r\n\r\n#### Response\r\nFor John / Jane the response should be:\r\n```\r\n{\r\n  &quot;id&quot;: &quot;R1&quot;\r\n  &quot;resourceName&quot;: &quot;Resource1&quot;,\r\n  &quot;admins&quot;: [&quot;john.doe@company.com&quot;, &quot;jane.doe@company.com&quot;, &quot;jacob@company.com&quot;]\r\n}\r\n```\r\n\r\nWhen Alice / Bob user are updating `R1` this response should be `403 Forbidden`\r\n\r\nSimilarly For `R2` update API should only be accesible by Alice / Bob.\r\n\r\nWhen John / Jane are updating `R2` this response should be `403 Forbidden`\r\n\r\nPlease suggest which framework can be used to achieve this, preferably with less boiler plate\r\n\r\nCurrently we have a system where resource access is in for of RoleBasedAccessControl. \r\nWe achieve restriction by storing permissions. The RBAC config is saved in DB.\r\n\r\nBut now we need more fine grained control per resource which can be managed directly by existing admins","title":"Achieve Dynamic REST Resource specific Authorization","body":"<p>We have a SpringBoot based module, we have REST APIs which allow creating resources with Params like</p>\n<h4>Request</h4>\n<p><strong>POST</strong> /resources</p>\n<pre><code>{\n  &quot;resourceName&quot;: &quot;Res1&quot;,\n  &quot;admins&quot;: [&quot;john.doe@company.com&quot;, &quot;jane.doe@company.com&quot;]\n}\n</code></pre>\n<h4>Response</h4>\n<pre><code>{\n  &quot;id&quot;: &quot;R1&quot;\n  &quot;resourceName&quot;: &quot;Res1&quot;,\n  &quot;admins&quot;: [&quot;john.doe@company.com&quot;, &quot;jane.doe@company.com&quot;]\n}\n</code></pre>\n<h4>Request</h4>\n<p><strong>POST</strong> /resources</p>\n<pre><code>{\n  &quot;resourceName&quot;: &quot;Res2&quot;,\n  &quot;admins&quot;: [&quot;alice@company.com&quot;, &quot;bob@company.com&quot;]\n}\n</code></pre>\n<h4>Response</h4>\n<pre><code>{\n  &quot;id&quot;: &quot;R2&quot;\n  &quot;resourceName&quot;: &quot;Res2&quot;,\n  &quot;admins&quot;: [&quot;alice@company.com&quot;, &quot;bob@company.com&quot;]\n}\n</code></pre>\n<p>For <code>R1</code> update API should only be accesible by John/Jane</p>\n<h4>Request</h4>\n<p><strong>PUT</strong> /resources/R1</p>\n<pre><code>{\n  &quot;resourceName&quot;: &quot;Resource1&quot;,\n  &quot;admins&quot;: [&quot;john.doe@company.com&quot;, &quot;jane.doe@company.com&quot;, &quot;jacob@company.com&quot;]\n}\n</code></pre>\n<h4>Response</h4>\n<p>For John / Jane the response should be:</p>\n<pre><code>{\n  &quot;id&quot;: &quot;R1&quot;\n  &quot;resourceName&quot;: &quot;Resource1&quot;,\n  &quot;admins&quot;: [&quot;john.doe@company.com&quot;, &quot;jane.doe@company.com&quot;, &quot;jacob@company.com&quot;]\n}\n</code></pre>\n<p>When Alice / Bob user are updating <code>R1</code> this response should be <code>403 Forbidden</code></p>\n<p>Similarly For <code>R2</code> update API should only be accesible by Alice / Bob.</p>\n<p>When John / Jane are updating <code>R2</code> this response should be <code>403 Forbidden</code></p>\n<p>Please suggest which framework can be used to achieve this, preferably with less boiler plate</p>\n<p>Currently we have a system where resource access is in for of RoleBasedAccessControl.\nWe achieve restriction by storing permissions. The RBAC config is saved in DB.</p>\n<p>But now we need more fine grained control per resource which can be managed directly by existing admins</p>\n"},{"tags":["java","spring","mongodb","spring-boot"],"comments":[{"owner":{"account_id":13141180,"reputation":4284,"user_id":9492730,"display_name":"dododo"},"score":0,"creation_date":1677856569,"post_id":75628677,"comment_id":133425350,"body_markdown":"there is no other option. Effectively gridfs simply split a big message on smaller chunks. It&#39;s the only way to store bigger documents. If you don&#39;t want using gridfs, you can do the same splitting logic somehow on your end.","body":"there is no other option. Effectively gridfs simply split a big message on smaller chunks. It&#39;s the only way to store bigger documents. If you don&#39;t want using gridfs, you can do the same splitting logic somehow on your end."}],"answers":[{"tags":[],"owner":{"account_id":959814,"reputation":8884,"user_id":984422,"display_name":"Wahyu Kristianto"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677861461,"creation_date":1677856922,"answer_id":75628913,"question_id":75628677,"body_markdown":"Store metadata in a separate collection. By storing the metadata associated with the GridFS files in a separate collection, you can use the full range of MongoDB aggregation and sorting features. [Official docs](https://www.mongodb.com/docs/manual/core/gridfs/#std-label-gridfs-files-collection).","title":"MongDB-JSON document size &gt;16MB throws error when saving","body":"<p>Store metadata in a separate collection. By storing the metadata associated with the GridFS files in a separate collection, you can use the full range of MongoDB aggregation and sorting features. <a href=\"https://www.mongodb.com/docs/manual/core/gridfs/#std-label-gridfs-files-collection\" rel=\"nofollow noreferrer\">Official docs</a>.</p>\n"}],"owner":{"account_id":27928105,"reputation":1,"user_id":21326777,"display_name":"Kapila"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677861461,"creation_date":1677855717,"question_id":75628677,"body_markdown":"We have few JSON Documents those are greater than 16 MB when saving to MongoDB, iam getting **&quot;Payload document size is larger than maximum of 16MB&quot;** as an error.Is there an approach to store this documents along with documents that are less than 16MB  in the same collection,so that my queries will be seamless.I have explored GridFS option provided by mongodb,but i have queries that need to support aggregation pipelines,but GridFS doesn&#39;t support Aggregation and sort by etc.Can someone help here.\r\n\r\n\r\nI tried using GridFS,but GridFS doen&#39;t seems to support Aggregation and sort by.I want better approach to store documents &gt;16MB in the same collection without much complexity.\r\n","title":"MongDB-JSON document size &gt;16MB throws error when saving","body":"<p>We have few JSON Documents those are greater than 16 MB when saving to MongoDB, iam getting <strong>&quot;Payload document size is larger than maximum of 16MB&quot;</strong> as an error.Is there an approach to store this documents along with documents that are less than 16MB  in the same collection,so that my queries will be seamless.I have explored GridFS option provided by mongodb,but i have queries that need to support aggregation pipelines,but GridFS doesn't support Aggregation and sort by etc.Can someone help here.</p>\n<p>I tried using GridFS,but GridFS doen't seems to support Aggregation and sort by.I want better approach to store documents &gt;16MB in the same collection without much complexity.</p>\n"},{"tags":["java","spring-boot","selenium-webdriver","gradle"],"answers":[{"tags":[],"owner":{"account_id":3683051,"reputation":6733,"user_id":3067542,"accept_rate":85,"display_name":"Vincent F"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677861011,"creation_date":1677861011,"answer_id":75629624,"question_id":75629623,"body_markdown":"I again got tricked by Spring Boot dependency management, which is most of the time super useful, but sometimes confusing like here...\r\n\r\nAs documented in Spring boot 2.6 , Selenium is managed by the BOM (I was not aware of this), and what a surprise : `v3.141.59` is defined there - so this is where it&#39;s coming from, without me defining it anywhere. \r\n\r\nhttps://docs.spring.io/spring-boot/docs/2.6.6/reference/html/dependency-versions.html#appendix.dependency-versions.properties \r\n\r\n[![enter image description here][1]][1] \r\n\r\nSo the solution is quite simple : we simply need to override the version in the gradle build file \r\n\r\n    ext[&#39;selenium.version&#39;] = &#39;4.6.0&#39;\r\n\r\n    dependencies {\r\n\r\n        testImplementation group: &#39;org.seleniumhq.selenium&#39;, name: &#39;selenium-java&#39; \r\n        ...\r\n    }\r\n\r\nand all the &quot;right&quot; dependencies versions are now coming. \r\n\r\n  [1]: https://i.stack.imgur.com/p8I3X.png","title":"gradle - unexplainable dependency version coming","body":"<p>I again got tricked by Spring Boot dependency management, which is most of the time super useful, but sometimes confusing like here...</p>\n<p>As documented in Spring boot 2.6 , Selenium is managed by the BOM (I was not aware of this), and what a surprise : <code>v3.141.59</code> is defined there - so this is where it's coming from, without me defining it anywhere.</p>\n<p><a href=\"https://docs.spring.io/spring-boot/docs/2.6.6/reference/html/dependency-versions.html#appendix.dependency-versions.properties\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/2.6.6/reference/html/dependency-versions.html#appendix.dependency-versions.properties</a></p>\n<p><a href=\"https://i.stack.imgur.com/p8I3X.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/p8I3X.png\" alt=\"enter image description here\" /></a></p>\n<p>So the solution is quite simple : we simply need to override the version in the gradle build file</p>\n<pre><code>ext['selenium.version'] = '4.6.0'\n\ndependencies {\n\n    testImplementation group: 'org.seleniumhq.selenium', name: 'selenium-java' \n    ...\n}\n</code></pre>\n<p>and all the &quot;right&quot; dependencies versions are now coming.</p>\n"}],"owner":{"account_id":3683051,"reputation":6733,"user_id":3067542,"accept_rate":85,"display_name":"Vincent F"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75629624,"answer_count":1,"score":1,"last_activity_date":1677861011,"creation_date":1677861011,"question_id":75629623,"body_markdown":"I have a Spring Boot 2.6.1 application for which I use Selenium during my tests. \r\n\r\nI am using `selenium-java` `4.6.0` \r\n\r\n    testImplementation group: &#39;org.seleniumhq.selenium&#39;, name: &#39;selenium-java&#39;, version: &#39;4.6.0&#39;\r\n\r\nbut the transitive dependencies that are pulled are all older versions (mostly 3.141.59), which leads to some issue at runtime, with classes not found etc : \r\n\r\n[![enter image description here][1]][1]\r\n\r\nI can override all these dependencies manually, but that doesn&#39;t look like the right way.. \r\n\r\nanyway, where are these versions coming from ? I am not defining them anywhere, so I would expect all the versions showed in https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java/4.6.0 to be pulled. \r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0PwDh.png","title":"gradle - unexplainable dependency version coming","body":"<p>I have a Spring Boot 2.6.1 application for which I use Selenium during my tests.</p>\n<p>I am using <code>selenium-java</code> <code>4.6.0</code></p>\n<pre><code>testImplementation group: 'org.seleniumhq.selenium', name: 'selenium-java', version: '4.6.0'\n</code></pre>\n<p>but the transitive dependencies that are pulled are all older versions (mostly 3.141.59), which leads to some issue at runtime, with classes not found etc :</p>\n<p><a href=\"https://i.stack.imgur.com/0PwDh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0PwDh.png\" alt=\"enter image description here\" /></a></p>\n<p>I can override all these dependencies manually, but that doesn't look like the right way..</p>\n<p>anyway, where are these versions coming from ? I am not defining them anywhere, so I would expect all the versions showed in <a href=\"https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java/4.6.0\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java/4.6.0</a> to be pulled.</p>\n"},{"tags":["python","java","pdf","metadata","pdf2htmlex"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":2,"creation_date":1677861430,"post_id":75629621,"comment_id":133426890,"body_markdown":"Has the modification been stored as an incremental update or not? If not, you have no chance unless you also have the original.","body":"Has the modification been stored as an incremental update or not? If not, you have no chance unless you also have the original."},{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1677863364,"post_id":75629621,"comment_id":133427478,"body_markdown":"https://www.startpage.com/sp/search?query=pdfdiff&amp;cat=web&amp;pl=opensearch&amp;language=english","body":"<a href=\"https://www.startpage.com/sp/search?query=pdfdiff&amp;cat=web&amp;pl=opensearch&amp;language=english\" rel=\"nofollow noreferrer\">startpage.com/sp/&hellip;</a>"}],"owner":{"account_id":18652597,"reputation":1,"user_id":13965682,"display_name":"Syhaa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677861002,"creation_date":1677861002,"question_id":75629621,"body_markdown":"Now I have a pdf file which I see the creation time and the modification time.\r\nIs there a way to know which part (e.g. tables/figures/text) are modified in the metadata? \r\n\r\nIn other words, how could I identify the difference between the initial pdf file the current one.\r\n\r\nI tried PyPDF and Pdf2htmlEX which do not help.","title":"How to identify the modified content in a pdf file?","body":"<p>Now I have a pdf file which I see the creation time and the modification time.\nIs there a way to know which part (e.g. tables/figures/text) are modified in the metadata?</p>\n<p>In other words, how could I identify the difference between the initial pdf file the current one.</p>\n<p>I tried PyPDF and Pdf2htmlEX which do not help.</p>\n"},{"tags":["java","arrays","syntax","processing","visualization"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1677005281,"post_id":75524611,"comment_id":133250476,"body_markdown":"Are you sure it&#39;s Java? Can you give a bit more complete code, like at least a method where this code resides in? Where do `size()`, `background()`, `smooth()`, `stroke()`, `strokeWeight()`, `ellipse()` come from? what type is `color` exactly? where does `height` come from? Just soooo many possibilities for syntax errors...","body":"Are you sure it&#39;s Java? Can you give a bit more complete code, like at least a method where this code resides in? Where do <code>size()</code>, <code>background()</code>, <code>smooth()</code>, <code>stroke()</code>, <code>strokeWeight()</code>, <code>ellipse()</code> come from? what type is <code>color</code> exactly? where does <code>height</code> come from? Just soooo many possibilities for syntax errors..."},{"owner":{"account_id":102965,"reputation":415230,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":1,"creation_date":1677005519,"post_id":75524611,"comment_id":133250552,"body_markdown":"You probably meant `for(int i = 0; i &lt; fibonacci.length; i++) {`. (I.e. `=` instead of `&lt;`.)","body":"You probably meant <code>for(int i = 0; i &lt; fibonacci.length; i++) {</code>. (I.e. <code>=</code> instead of <code>&lt;</code>.)"},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":2,"creation_date":1677005639,"post_id":75524611,"comment_id":133250583,"body_markdown":"@Jens @cyberbrain this is about [Processing](https://processing.org/), `color` is a valid type, `#xxxxxx` is the right way to specify colors and `size`, `background` etc. are defined.","body":"@Jens @cyberbrain this is about <a href=\"https://processing.org/\" rel=\"nofollow noreferrer\">Processing</a>, <code>color</code> is a valid type, <code>#xxxxxx</code> is the right way to specify colors and <code>size</code>, <code>background</code> etc. are defined."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1677005849,"post_id":75524611,"comment_id":133250658,"body_markdown":"@Jules are you sure arrays are defined with normal parens instead of braces, like you&#39;re doing in the first line? Where are you getting that error? What tutorial are you following?","body":"@Jules are you sure arrays are defined with normal parens instead of braces, like you&#39;re doing in the first line? Where are you getting that error? What tutorial are you following?"},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1677006011,"post_id":75524611,"comment_id":133250703,"body_markdown":"Also, you mispelled &quot;palette&quot; in the declaration.","body":"Also, you mispelled &quot;palette&quot; in the declaration."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1677006105,"post_id":75524611,"comment_id":133250739,"body_markdown":"Once you fixed those issues (including the one pointed out by aioobe in another comment) you should be able to run the example and see what you probably expect to see (circles further and further apart).","body":"Once you fixed those issues (including the one pointed out by aioobe in another comment) you should be able to run the example and see what you probably expect to see (circles further and further apart)."}],"answers":[{"tags":[],"owner":{"account_id":25065898,"reputation":1,"user_id":18920236,"display_name":"jjok13"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677860831,"creation_date":1677860831,"answer_id":75629597,"question_id":75524611,"body_markdown":"A few things:\r\n\r\n 1. Processing works with `setup()` and `draw()` methods, which are both missing from your snippet.\r\n 2. To make a copy of an array, you will have to use the `arrayCopy()` method\r\n 3. The `for` loop declaration is incorrect. Instead of `for(int i &lt; 0; ...` you should place `for(int i = 0; ...`\r\n\r\nI also removed the `pallete` array, as it does not serve any purpose in the current snippet.\r\n\r\nWith these changes, the snippet was able to launch and successfully run:\r\n\r\n    color[] dessert = {#9F9694, #791F33, #BA3D49, #F1E6D4, #E2E1DC};\r\n    \r\n    void setup(){\r\n      size(600,200);\r\n      background(dessert[0]);\r\n      smooth();\r\n    }\r\n    \r\n    void draw(){\r\n      int[] fibonacci = {0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377};\r\n      for(int i = 0; i &lt; fibonacci.length; i++) { \r\n        stroke(dessert[1]);\r\n        strokeWeight(2);\r\n        float x = fibonacci[i];\r\n        ellipse(x, height/2, 20, 20);\r\n      }\r\n    }","title":"Processing is giving a &quot;bad identifier&quot; error. I&#39;m not quite sure what that means","body":"<p>A few things:</p>\n<ol>\n<li>Processing works with <code>setup()</code> and <code>draw()</code> methods, which are both missing from your snippet.</li>\n<li>To make a copy of an array, you will have to use the <code>arrayCopy()</code> method</li>\n<li>The <code>for</code> loop declaration is incorrect. Instead of <code>for(int i &lt; 0; ...</code> you should place <code>for(int i = 0; ...</code></li>\n</ol>\n<p>I also removed the <code>pallete</code> array, as it does not serve any purpose in the current snippet.</p>\n<p>With these changes, the snippet was able to launch and successfully run:</p>\n<pre><code>color[] dessert = {#9F9694, #791F33, #BA3D49, #F1E6D4, #E2E1DC};\n\nvoid setup(){\n  size(600,200);\n  background(dessert[0]);\n  smooth();\n}\n\nvoid draw(){\n  int[] fibonacci = {0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377};\n  for(int i = 0; i &lt; fibonacci.length; i++) { \n    stroke(dessert[1]);\n    strokeWeight(2);\n    float x = fibonacci[i];\n    ellipse(x, height/2, 20, 20);\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":27844488,"reputation":11,"user_id":21260270,"display_name":"Jules"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":339,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1677860831,"creation_date":1677004713,"question_id":75524611,"body_markdown":"I am trying to make a simple data visualization chart. This code is supposed to result in a small dot graph.\r\n\r\nHowever, processing is giving me a &#39;bad identifier&#39; syntax error. It&#39;s saying that maybe I forgot a variable or something.\r\n\r\nIt doesn&#39;t make sense to me, because I am following a tutorial and coded the exact same thing so. I&#39;m not sure where the error is coming from. \r\n\r\n\r\n\r\n    color[] dessert = (#9F9694, #791F33, #BA3D49, #F1E6D4, #E2E1DC);\r\n    color[] pallette = dessert;\r\n\r\n    size(600,200);\r\n    background(palette[0]);\r\n    smooth();\r\n\r\n    int[] fibonacci = {0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377};\r\n    for(int i &lt; 0; i &lt; fibonacci.length; i++) { \r\n      stroke(palette[1]);\r\n      strokeWeight(2);\r\n      float x = fibonacci[i];\r\n      ellipse(x, height/2, 20, 20);\r\n    }\r\n    ","title":"Processing is giving a &quot;bad identifier&quot; error. I&#39;m not quite sure what that means","body":"<p>I am trying to make a simple data visualization chart. This code is supposed to result in a small dot graph.</p>\n<p>However, processing is giving me a 'bad identifier' syntax error. It's saying that maybe I forgot a variable or something.</p>\n<p>It doesn't make sense to me, because I am following a tutorial and coded the exact same thing so. I'm not sure where the error is coming from.</p>\n<pre><code>color[] dessert = (#9F9694, #791F33, #BA3D49, #F1E6D4, #E2E1DC);\ncolor[] pallette = dessert;\n\nsize(600,200);\nbackground(palette[0]);\nsmooth();\n\nint[] fibonacci = {0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377};\nfor(int i &lt; 0; i &lt; fibonacci.length; i++) { \n  stroke(palette[1]);\n  strokeWeight(2);\n  float x = fibonacci[i];\n  ellipse(x, height/2, 20, 20);\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","hibernate","spring-mvc"],"comments":[{"owner":{"account_id":2486870,"reputation":685,"user_id":2165146,"display_name":"muhammed ozbilici"},"score":0,"creation_date":1677881233,"post_id":75629579,"comment_id":133431674,"body_markdown":"try to print sql query so you can start searching from that `logging.level.org.hibernate.SQL=DEBUG\nlogging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE`","body":"try to print sql query so you can start searching from that <code>logging.level.org.hibernate.SQL=DEBUG logging.level.org.hibernate.type.descriptor.sql.BasicBinder=&zwnj;&#8203;TRACE</code>"},{"owner":{"account_id":17915945,"reputation":35,"user_id":13016907,"display_name":"NANB"},"score":0,"creation_date":1677894779,"post_id":75629579,"comment_id":133433437,"body_markdown":"thank you for your reply I have added it to the application.properties but can&#39;t understand why I am getting a null value in person in phonenumber entity","body":"thank you for your reply I have added it to the application.properties but can&#39;t understand why I am getting a null value in person in phonenumber entity"},{"owner":{"account_id":7861285,"reputation":181,"user_id":5941624,"display_name":"fatemeakbari"},"score":0,"creation_date":1686660642,"post_id":75629579,"comment_id":134827142,"body_markdown":"you&#39;ve set fetch type lazy so until you don&#39;t call getPerson(), person not loaded. notice it&#39;s better because if you call it, person call getphonenumber and they fall into the loop and you give out of memory exception. for test you can set getPerson in toString() method of phoneNumber","body":"you&#39;ve set fetch type lazy so until you don&#39;t call getPerson(), person not loaded. notice it&#39;s better because if you call it, person call getphonenumber and they fall into the loop and you give out of memory exception. for test you can set getPerson in toString() method of phoneNumber"}],"owner":{"account_id":17915945,"reputation":35,"user_id":13016907,"display_name":"NANB"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677860764,"creation_date":1677860764,"question_id":75629579,"body_markdown":"I am trying to create two tables person and phonenumber using a model in spring-boot. Person table has an attribute name, age, and person_id where person_id is the primary_key and in the table, phonenumber has an attribute number,person_id where person_id is the primary key and foreign key refers to the person table person_id. and passing the JSON data as a post request to the controller but getting a null value in the phonenumber&#39;s person variable of person type.\r\n\r\nbelow are the codes:-\r\nperson.java\r\n```\r\npackage com.BitGeekTalks.JanShayog.model;\r\n\r\nimport jakarta.persistence.*;\r\n\r\n@Entity\r\n@Table(name = &quot;person&quot;)\r\npublic class Person {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;person_id&quot;)\r\n    private long person_id;\r\n    @Column(name =&quot;firstname&quot;)\r\n    private String firstName;\r\n    @Column(name =&quot;age&quot;)\r\n    private long age;\r\n    @OneToOne(mappedBy = &quot;person&quot;,cascade = CascadeType.ALL)\r\n    private PhoneNumber phoneNumber;\r\n\r\n    public Person(String firstName, long age, PhoneNumber phoneNumber) {\r\n        this.firstName = firstName;\r\n        this.age = age;\r\n        this.phoneNumber = phoneNumber;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Person{&quot; +\r\n                &quot;person_id=&quot; + person_id +\r\n                &quot;, firstName=&#39;&quot; + firstName + &#39;\\&#39;&#39; +\r\n                &quot;, age=&quot; + age +\r\n                &quot;, phoneNumber=&quot; + phoneNumber +\r\n                &#39;}&#39;;\r\n    }\r\n\r\n    public Person() {\r\n    }\r\n\r\n    public long getPerson_id() {\r\n        return person_id;\r\n    }\r\n\r\n    public void setPerson_id(long person_id) {\r\n        this.person_id = person_id;\r\n    }\r\n\r\n    public String getFirstName() {\r\n        return firstName;\r\n    }\r\n\r\n    public void setFirstName(String firstName) {\r\n        this.firstName = firstName;\r\n    }\r\n\r\n    public long getAge() {\r\n        return age;\r\n    }\r\n\r\n    public void setAge(long age) {\r\n        this.age = age;\r\n    }\r\n\r\n    public PhoneNumber getPhoneNumber() {\r\n        return phoneNumber;\r\n    }\r\n\r\n    public void setPhoneNumber(PhoneNumber phoneNumber) {\r\n        this.phoneNumber = phoneNumber;\r\n    }\r\n}\r\n\r\n```\r\nphonenumber.java\r\n\r\n```\r\npackage com.BitGeekTalks.JanShayog.model;\r\n\r\nimport jakarta.persistence.*;\r\n\r\n@Entity\r\n@Table(name = &quot;PhoneNumber&quot;)\r\npublic class PhoneNumber {\r\n    @Column(name = &quot;number&quot;)\r\n    private String number;\r\n    @Id\r\n    @Column(name = &quot;phone_number_id&quot;)\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long phoneNumberId;\r\n    @OneToOne(cascade = CascadeType.ALL,fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;person_id&quot;)\r\n    private Person person;\r\n\r\n\r\n    public Long getPhoneNumberId() {\r\n        return phoneNumberId;\r\n    }\r\n\r\n    public void setPhoneNumberId(Long phoneNumberId) {\r\n        this.phoneNumberId = phoneNumberId;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;PhoneNumber{&quot; +\r\n                &quot;number=&#39;&quot; + number + &#39;\\&#39;&#39; +\r\n                &quot;, phoneNumberId=&quot; + phoneNumberId +\r\n                &quot;, person=&quot; + person +\r\n                &#39;}&#39;;\r\n    }\r\n\r\n    public PhoneNumber(String number, Person person) {\r\n        this.number = number;\r\n        this.person = person;\r\n        person.setPhoneNumber(this);\r\n    }\r\n\r\n    public String getNumber() {\r\n        return number;\r\n    }\r\n\r\n    public void setNumber(String number) {\r\n        this.number = number;\r\n    }\r\n\r\n    public Person getPerson() {\r\n        return person;\r\n    }\r\n\r\n    public void setPerson(Person person) {\r\n        this.person = person;\r\n    }\r\n\r\n    public PhoneNumber() {\r\n    }\r\n\r\n\r\n}\r\n\r\n```\r\npersonservice.java\r\n```package com.BitGeekTalks.JanShayog.service;\r\n\r\nimport com.BitGeekTalks.JanShayog.model.Person;\r\nimport com.BitGeekTalks.JanShayog.repository.PersonRepo;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\npublic class PersonService {\r\n    @Autowired\r\n    private PersonRepo personRepo;\r\n    public Person addPerson(Person person) {\r\n        return personRepo.save(person);\r\n    }\r\n}\r\n```\r\npersonrepo.java\r\n```package com.BitGeekTalks.JanShayog.repository;\r\n\r\nimport com.BitGeekTalks.JanShayog.model.Person;\r\nimport org.springframework.data.repository.CrudRepository;\r\n\r\npublic interface PersonRepo extends CrudRepository&lt;Person,Integer&gt; {\r\n}\r\n```\r\npersoncontroller.java\r\n```\r\npackage com.BitGeekTalks.JanShayog.controller;\r\n\r\nimport com.BitGeekTalks.JanShayog.model.Person;\r\nimport com.BitGeekTalks.JanShayog.service.PersonService;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/api&quot;)\r\npublic class PersonController {\r\n\r\n    @Autowired\r\n    private PersonService personService;\r\n    @PostMapping(&quot;/person&quot;)\r\n    public String addPerson(@RequestBody Person person){\r\n        //System.out.println(person);\r\n        Person person1 = personService.addPerson(person);\r\n        return person1.toString();\r\n    }\r\n}\r\n\r\n```\r\njson data i am passing \r\n```\r\n{\r\n  &quot;firstName&quot;: &quot;John&quot;,\r\n  &quot;age&quot;: 30,\r\n  &quot;phoneNumber&quot;: {\r\n    &quot;number&quot;: &quot;123-456-7890&quot;\r\n  }\r\n}\r\n```\r\noutput i am getting as\r\n```Person{person_id=8, firstName=&#39;John&#39;, age=30, phoneNumber=PhoneNumber{number=&#39;123-456-7890&#39;, phoneNumberId=8, person=null}}```\r\n\r\ntable should be as below\r\n``` \r\nperson(person_id(pk),name,age)\r\nphonenumber(person_id(pk)(fk refer to person.person_id),number)\r\n```\r\n\r\nhelp me out so that i can learn ahead.","title":"getting null value in nested bidirectional oneToOne relation","body":"<p>I am trying to create two tables person and phonenumber using a model in spring-boot. Person table has an attribute name, age, and person_id where person_id is the primary_key and in the table, phonenumber has an attribute number,person_id where person_id is the primary key and foreign key refers to the person table person_id. and passing the JSON data as a post request to the controller but getting a null value in the phonenumber's person variable of person type.</p>\n<p>below are the codes:-\nperson.java</p>\n<pre><code>package com.BitGeekTalks.JanShayog.model;\n\nimport jakarta.persistence.*;\n\n@Entity\n@Table(name = &quot;person&quot;)\npublic class Person {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;person_id&quot;)\n    private long person_id;\n    @Column(name =&quot;firstname&quot;)\n    private String firstName;\n    @Column(name =&quot;age&quot;)\n    private long age;\n    @OneToOne(mappedBy = &quot;person&quot;,cascade = CascadeType.ALL)\n    private PhoneNumber phoneNumber;\n\n    public Person(String firstName, long age, PhoneNumber phoneNumber) {\n        this.firstName = firstName;\n        this.age = age;\n        this.phoneNumber = phoneNumber;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Person{&quot; +\n                &quot;person_id=&quot; + person_id +\n                &quot;, firstName='&quot; + firstName + '\\'' +\n                &quot;, age=&quot; + age +\n                &quot;, phoneNumber=&quot; + phoneNumber +\n                '}';\n    }\n\n    public Person() {\n    }\n\n    public long getPerson_id() {\n        return person_id;\n    }\n\n    public void setPerson_id(long person_id) {\n        this.person_id = person_id;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public long getAge() {\n        return age;\n    }\n\n    public void setAge(long age) {\n        this.age = age;\n    }\n\n    public PhoneNumber getPhoneNumber() {\n        return phoneNumber;\n    }\n\n    public void setPhoneNumber(PhoneNumber phoneNumber) {\n        this.phoneNumber = phoneNumber;\n    }\n}\n\n</code></pre>\n<p>phonenumber.java</p>\n<pre><code>package com.BitGeekTalks.JanShayog.model;\n\nimport jakarta.persistence.*;\n\n@Entity\n@Table(name = &quot;PhoneNumber&quot;)\npublic class PhoneNumber {\n    @Column(name = &quot;number&quot;)\n    private String number;\n    @Id\n    @Column(name = &quot;phone_number_id&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long phoneNumberId;\n    @OneToOne(cascade = CascadeType.ALL,fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;person_id&quot;)\n    private Person person;\n\n\n    public Long getPhoneNumberId() {\n        return phoneNumberId;\n    }\n\n    public void setPhoneNumberId(Long phoneNumberId) {\n        this.phoneNumberId = phoneNumberId;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;PhoneNumber{&quot; +\n                &quot;number='&quot; + number + '\\'' +\n                &quot;, phoneNumberId=&quot; + phoneNumberId +\n                &quot;, person=&quot; + person +\n                '}';\n    }\n\n    public PhoneNumber(String number, Person person) {\n        this.number = number;\n        this.person = person;\n        person.setPhoneNumber(this);\n    }\n\n    public String getNumber() {\n        return number;\n    }\n\n    public void setNumber(String number) {\n        this.number = number;\n    }\n\n    public Person getPerson() {\n        return person;\n    }\n\n    public void setPerson(Person person) {\n        this.person = person;\n    }\n\n    public PhoneNumber() {\n    }\n\n\n}\n\n</code></pre>\n<p>personservice.java</p>\n<pre><code>\nimport com.BitGeekTalks.JanShayog.model.Person;\nimport com.BitGeekTalks.JanShayog.repository.PersonRepo;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class PersonService {\n    @Autowired\n    private PersonRepo personRepo;\n    public Person addPerson(Person person) {\n        return personRepo.save(person);\n    }\n}\n</code></pre>\n<p>personrepo.java</p>\n<pre><code>\nimport com.BitGeekTalks.JanShayog.model.Person;\nimport org.springframework.data.repository.CrudRepository;\n\npublic interface PersonRepo extends CrudRepository&lt;Person,Integer&gt; {\n}\n</code></pre>\n<p>personcontroller.java</p>\n<pre><code>package com.BitGeekTalks.JanShayog.controller;\n\nimport com.BitGeekTalks.JanShayog.model.Person;\nimport com.BitGeekTalks.JanShayog.service.PersonService;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(&quot;/api&quot;)\npublic class PersonController {\n\n    @Autowired\n    private PersonService personService;\n    @PostMapping(&quot;/person&quot;)\n    public String addPerson(@RequestBody Person person){\n        //System.out.println(person);\n        Person person1 = personService.addPerson(person);\n        return person1.toString();\n    }\n}\n\n</code></pre>\n<p>json data i am passing</p>\n<pre><code>{\n  &quot;firstName&quot;: &quot;John&quot;,\n  &quot;age&quot;: 30,\n  &quot;phoneNumber&quot;: {\n    &quot;number&quot;: &quot;123-456-7890&quot;\n  }\n}\n</code></pre>\n<p>output i am getting as\n<code>Person{person_id=8, firstName='John', age=30, phoneNumber=PhoneNumber{number='123-456-7890', phoneNumberId=8, person=null}}</code></p>\n<p>table should be as below</p>\n<pre><code>person(person_id(pk),name,age)\nphonenumber(person_id(pk)(fk refer to person.person_id),number)\n</code></pre>\n<p>help me out so that i can learn ahead.</p>\n"},{"tags":["java","rabbitmq","spring-rabbit"],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677860659,"creation_date":1677860659,"answer_id":75629560,"question_id":75629476,"body_markdown":"For that purpose you must not use a `@RabbitListener`, but rather a dedicated API for on-demand receive. See `RabbitTemplate`:\r\n\r\n\t/**\r\n\t * Receive a message if there is one from a default queue. Returns immediately,\r\n\t * possibly with a null value.\r\n\t *\r\n\t * @return a message or null if there is none waiting\r\n\t * @throws AmqpException if there is a problem\r\n\t */\r\n\t@Nullable\r\n\tMessage receive() throws AmqpException;\r\n\r\nTo optimize this call for a batch request you may consider to use a scoped operation:\r\n\r\n\t/**\r\n\t * Invoke the callback and run all operations on the template argument in a dedicated\r\n\t * thread-bound channel and reliably close the channel afterwards.\r\n\t * @param action the call back.\r\n\t * @param &lt;T&gt; the return type.\r\n\t * @return the result from the\r\n\t * {@link OperationsCallback#doInRabbit(RabbitOperations operations)}.\r\n\t * @throws AmqpException if one occurs.\r\n\t * @since 2.0\r\n\t */\r\n\t@Nullable\r\n\tdefault &lt;T&gt; T invoke(OperationsCallback&lt;T&gt; action) throws AmqpException {\r\n\r\nSee more in docs: https://docs.spring.io/spring-amqp/reference/html/#amqp-template","title":"How to consume fixed messages per time on RabbitMQ?","body":"<p>For that purpose you must not use a <code>@RabbitListener</code>, but rather a dedicated API for on-demand receive. See <code>RabbitTemplate</code>:</p>\n<pre><code>/**\n * Receive a message if there is one from a default queue. Returns immediately,\n * possibly with a null value.\n *\n * @return a message or null if there is none waiting\n * @throws AmqpException if there is a problem\n */\n@Nullable\nMessage receive() throws AmqpException;\n</code></pre>\n<p>To optimize this call for a batch request you may consider to use a scoped operation:</p>\n<pre><code>/**\n * Invoke the callback and run all operations on the template argument in a dedicated\n * thread-bound channel and reliably close the channel afterwards.\n * @param action the call back.\n * @param &lt;T&gt; the return type.\n * @return the result from the\n * {@link OperationsCallback#doInRabbit(RabbitOperations operations)}.\n * @throws AmqpException if one occurs.\n * @since 2.0\n */\n@Nullable\ndefault &lt;T&gt; T invoke(OperationsCallback&lt;T&gt; action) throws AmqpException {\n</code></pre>\n<p>See more in docs: <a href=\"https://docs.spring.io/spring-amqp/reference/html/#amqp-template\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-amqp/reference/html/#amqp-template</a></p>\n"}],"owner":{"account_id":2706605,"reputation":552,"user_id":2336081,"display_name":"Rafa Acioly"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677860659,"creation_date":1677860179,"question_id":75629476,"body_markdown":"Currently, I&#39;m using the `spring-boot-starter-amqp` module and can use the annotation `@RabbitListener` to read messages on background, How can I consume a fixed number of messages from a queue only when a method is called?\r\n\r\nWhat I&#39;m trying to build is an &quot;on-demand&quot; consumer for a queue, I&#39;ll receive an HTTP request on an endpoint with the number of messages and I want to consume only this amount defined.","title":"How to consume fixed messages per time on RabbitMQ?","body":"<p>Currently, I'm using the <code>spring-boot-starter-amqp</code> module and can use the annotation <code>@RabbitListener</code> to read messages on background, How can I consume a fixed number of messages from a queue only when a method is called?</p>\n<p>What I'm trying to build is an &quot;on-demand&quot; consumer for a queue, I'll receive an HTTP request on an endpoint with the number of messages and I want to consume only this amount defined.</p>\n"},{"tags":["java","io","profiling"],"answers":[{"tags":[],"owner":{"account_id":12145,"reputation":40207,"user_id":23771,"accept_rate":60,"display_name":"Mike Dunlavey"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638371540,"creation_date":1637937191,"answer_id":70126031,"question_id":70125051,"body_markdown":"It&#39;s unconventional but easy. Just do [*this*](https://stackoverflow.com/a/317160/23771).\r\n\r\nIt&#39;s hard to find a profiler that a) works on wall-clock time rather than CPU time, b) samples the call stack, not just the IP, c) takes a small number of samples rather than a large number.\r\n\r\nRemember, your overriding goal is ***locating*** the problem, so you can fix it, not just ***timing*** it but wondering what it is.\r\nThe bigger the problem is, the more likely a random halt will land in it and tell you exactly what it&#39;s doing and why.\r\n\r\nHow big are problems? If a problem takes X% of time, X% is the most you could save by fixing it. So if X is 10% or less, why bother? Supposing X% is bigger than 10%, then every sample has that probability of landing in it. So if you take N samples, the number of times it lands in the problem is N times X% (average).\r\n\r\nHow many samples do you need? Well, if you see the program doing something wasteful on one sample, it&#39;s doubtful that you&#39;ve found it. But if you see it doing the same wasteful thing on ***two*** samples, statistics say you&#39;ve found the problem! And the smaller N is before you see the problem, the bigger it is! Do you know exactly how big it is? No, and you don&#39;t care, because you know it&#39;s big enough to fix. (If you want more information, take more samples. I never take more than 20.) (You can always measure the speedup afterwards, with a simple timer.)\r\n\r\nIs there more than one problem? You bet there is! If you fix one problem, it makes the remaining ones bigger! Example, there could be two problems, problem A costing 50%, and problem B costing 25%. The first time you look, you find problem A, fix it, and now problem B costs 50%, not 25%. Fix both of them, and you&#39;re 4 times faster. (This is the *magnification effect*.)\r\n(If you happen to fix B first, no problem. Now A is 67% of the time.)&lt;br&gt;\r\nMoral: Don&#39;t stop looking and fixing until you fail to find things you can fix.\r\n\r\nWhat typically happens with profilers is they find things that don&#39;t amount to much and/or you can&#39;t fix anyway. Like 5% in some obscure library routine. Does this leave programmers disappointed? NO. It makes them ***happy***, because it seemingly tells them their code is optimal!\r\nIs that a paradox? Yes.\r\nProfilers are popular precisely because they *don&#39;t work!*","title":"How to profile the IO activities triggered by the java process?","body":"<p>It's unconventional but easy. Just do <a href=\"https://stackoverflow.com/a/317160/23771\"><em>this</em></a>.</p>\n<p>It's hard to find a profiler that a) works on wall-clock time rather than CPU time, b) samples the call stack, not just the IP, c) takes a small number of samples rather than a large number.</p>\n<p>Remember, your overriding goal is <em><strong>locating</strong></em> the problem, so you can fix it, not just <em><strong>timing</strong></em> it but wondering what it is.\nThe bigger the problem is, the more likely a random halt will land in it and tell you exactly what it's doing and why.</p>\n<p>How big are problems? If a problem takes X% of time, X% is the most you could save by fixing it. So if X is 10% or less, why bother? Supposing X% is bigger than 10%, then every sample has that probability of landing in it. So if you take N samples, the number of times it lands in the problem is N times X% (average).</p>\n<p>How many samples do you need? Well, if you see the program doing something wasteful on one sample, it's doubtful that you've found it. But if you see it doing the same wasteful thing on <em><strong>two</strong></em> samples, statistics say you've found the problem! And the smaller N is before you see the problem, the bigger it is! Do you know exactly how big it is? No, and you don't care, because you know it's big enough to fix. (If you want more information, take more samples. I never take more than 20.) (You can always measure the speedup afterwards, with a simple timer.)</p>\n<p>Is there more than one problem? You bet there is! If you fix one problem, it makes the remaining ones bigger! Example, there could be two problems, problem A costing 50%, and problem B costing 25%. The first time you look, you find problem A, fix it, and now problem B costs 50%, not 25%. Fix both of them, and you're 4 times faster. (This is the <em>magnification effect</em>.)\n(If you happen to fix B first, no problem. Now A is 67% of the time.)<br>\nMoral: Don't stop looking and fixing until you fail to find things you can fix.</p>\n<p>What typically happens with profilers is they find things that don't amount to much and/or you can't fix anyway. Like 5% in some obscure library routine. Does this leave programmers disappointed? NO. It makes them <em><strong>happy</strong></em>, because it seemingly tells them their code is optimal!\nIs that a paradox? Yes.\nProfilers are popular precisely because they <em>don't work!</em></p>\n"},{"tags":[],"owner":{"account_id":900581,"reputation":46749,"user_id":936832,"accept_rate":75,"display_name":"Ingo Kegel"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1638098561,"creation_date":1638098561,"answer_id":70142903,"question_id":70125051,"body_markdown":"&gt;Is there any tool for profiling DISK IO for java?\r\n\r\nSome JVM profilers have probes that deal with file access. [JProfiler][1] for example has a file probe that measures read and write operations for both java.io and java.nio.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nMeasurements are resolved by file:\r\n\r\n[![enter image description here][3]][3]\r\n\r\nFor performance considerations, the hot spots view of the file probe shows which files are responsible for most of the time spent in disk I/O and gives you expandable back traces for each file.\r\n\r\n[![enter image description here][4]][4]\r\n\r\nDisclaimer: My company develops JProfiler\r\n\r\n\r\n  [1]: https://www.ej-technologies.com/products/jprofiler/overview.html\r\n  [2]: https://i.stack.imgur.com/VKFMn.png\r\n  [3]: https://i.stack.imgur.com/8Uwfv.png\r\n  [4]: https://i.stack.imgur.com/BjxnL.png","title":"How to profile the IO activities triggered by the java process?","body":"<blockquote>\n<p>Is there any tool for profiling DISK IO for java?</p>\n</blockquote>\n<p>Some JVM profilers have probes that deal with file access. <a href=\"https://www.ej-technologies.com/products/jprofiler/overview.html\" rel=\"nofollow noreferrer\">JProfiler</a> for example has a file probe that measures read and write operations for both java.io and java.nio.</p>\n<p><a href=\"https://i.stack.imgur.com/VKFMn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VKFMn.png\" alt=\"enter image description here\" /></a></p>\n<p>Measurements are resolved by file:</p>\n<p><a href=\"https://i.stack.imgur.com/8Uwfv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8Uwfv.png\" alt=\"enter image description here\" /></a></p>\n<p>For performance considerations, the hot spots view of the file probe shows which files are responsible for most of the time spent in disk I/O and gives you expandable back traces for each file.</p>\n<p><a href=\"https://i.stack.imgur.com/BjxnL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BjxnL.png\" alt=\"enter image description here\" /></a></p>\n<p>Disclaimer: My company develops JProfiler</p>\n"},{"tags":[],"owner":{"account_id":411202,"reputation":41987,"user_id":783510,"accept_rate":91,"display_name":"Philipp Cla&#223;en"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677193886,"creation_date":1677193886,"answer_id":75551236,"question_id":70125051,"body_markdown":"If your goal is find the bottleneck in your Java application (including IO), I would also suggest to try the &quot;poor man&#39;s profile&quot; technique pointed out already by Mike Dunlavey [in his answer][1]:\r\n\r\n1. Run the application with a realistic workload and take thread dumps.\r\n1. Repeat it a few times until you spot a pattern. (If there is an obvious bottleneck, it is likely that the program gets interrupted during expensive operations.)\r\n\r\nHow can you get a stack trace in Java? If you have the PID of the process, you have two options:\r\n1. Run `kill -3 PID` to make the process print the stack traces on stdout\r\n2. JDK includes a tool called [jstack][2] to get the thread dump: `jstack PID`\r\n\r\nIn my experience, this simple technique is surprisingly powerful and requires no setup. The overhead is also low, so you can use it safely in production.\r\n\r\nIf you are on Linux, an alternative is to use [perf top for live profiling][3]: `sudo perf top` \r\n\r\nperf tends to work better with natively compiled languages such as C++, but if you cannot get anything out of Java thread dumps, it is worth a try. Since perf works on the Kernel level, it can also reveal bottlenecks in IO. Again, the overhead is low, so you can run it in production (with a realistic workload).\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/70126031/783510\r\n  [2]: https://stackoverflow.com/a/4876519/783510\r\n  [3]: https://perf.wiki.kernel.org/index.php/Tutorial#Live_analysis_with_perf_top","title":"How to profile the IO activities triggered by the java process?","body":"<p>If your goal is find the bottleneck in your Java application (including IO), I would also suggest to try the &quot;poor man's profile&quot; technique pointed out already by Mike Dunlavey <a href=\"https://stackoverflow.com/a/70126031/783510\">in his answer</a>:</p>\n<ol>\n<li>Run the application with a realistic workload and take thread dumps.</li>\n<li>Repeat it a few times until you spot a pattern. (If there is an obvious bottleneck, it is likely that the program gets interrupted during expensive operations.)</li>\n</ol>\n<p>How can you get a stack trace in Java? If you have the PID of the process, you have two options:</p>\n<ol>\n<li>Run <code>kill -3 PID</code> to make the process print the stack traces on stdout</li>\n<li>JDK includes a tool called <a href=\"https://stackoverflow.com/a/4876519/783510\">jstack</a> to get the thread dump: <code>jstack PID</code></li>\n</ol>\n<p>In my experience, this simple technique is surprisingly powerful and requires no setup. The overhead is also low, so you can use it safely in production.</p>\n<p>If you are on Linux, an alternative is to use <a href=\"https://perf.wiki.kernel.org/index.php/Tutorial#Live_analysis_with_perf_top\" rel=\"nofollow noreferrer\">perf top for live profiling</a>: <code>sudo perf top</code></p>\n<p>perf tends to work better with natively compiled languages such as C++, but if you cannot get anything out of Java thread dumps, it is worth a try. Since perf works on the Kernel level, it can also reveal bottlenecks in IO. Again, the overhead is low, so you can run it in production (with a realistic workload).</p>\n"},{"tags":[],"owner":{"account_id":124056,"reputation":2936,"user_id":1944458,"accept_rate":25,"display_name":"dspeyer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677860584,"creation_date":1677860584,"answer_id":75629545,"question_id":70125051,"body_markdown":"I&#39;ve had good results with Linux perf.  It can measure all IO activity for time and take stack traces.\r\n\r\nI haven&#39;t used it with java, but I&#39;m reading that if you compile with `-XX:+PreserveFramePointer` the stack traces and symbols will work.","title":"How to profile the IO activities triggered by the java process?","body":"<p>I've had good results with Linux perf.  It can measure all IO activity for time and take stack traces.</p>\n<p>I haven't used it with java, but I'm reading that if you compile with <code>-XX:+PreserveFramePointer</code> the stack traces and symbols will work.</p>\n"}],"owner":{"account_id":3558883,"reputation":1652,"user_id":2971851,"accept_rate":100,"display_name":"Steven Chou"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":473,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":70142903,"answer_count":4,"score":3,"last_activity_date":1677860584,"creation_date":1637932742,"question_id":70125051,"body_markdown":"Currently, I know there are some tools for profiling the CPU/memory for the java process.\r\n\r\nWhen I wanted to track how the java process interacts with IO, I didn&#39;t find any tool for checking the details, especially for which threads/call-stacks, usages, and files.\r\n \r\nThe tools I can use are some OS-level commands like `dstat`.\r\n\r\nIs there any tool for profiling DISK IO for java?","title":"How to profile the IO activities triggered by the java process?","body":"<p>Currently, I know there are some tools for profiling the CPU/memory for the java process.</p>\n<p>When I wanted to track how the java process interacts with IO, I didn't find any tool for checking the details, especially for which threads/call-stacks, usages, and files.</p>\n<p>The tools I can use are some OS-level commands like <code>dstat</code>.</p>\n<p>Is there any tool for profiling DISK IO for java?</p>\n"},{"tags":["java","maven","maven-3","maven-plugin"],"comments":[{"owner":{"account_id":405356,"reputation":31601,"user_id":774183,"accept_rate":78,"display_name":"carlspring"},"score":0,"creation_date":1452006392,"post_id":34529565,"comment_id":56975007,"body_markdown":"Post your mojo&#39;s code as well. Most-likely, your goal is not defined as `convert`.","body":"Post your mojo&#39;s code as well. Most-likely, your goal is not defined as <code>convert</code>."},{"owner":{"account_id":405356,"reputation":31601,"user_id":774183,"accept_rate":78,"display_name":"carlspring"},"score":0,"creation_date":1452186590,"post_id":34529565,"comment_id":57067592,"body_markdown":"Did my answer not work...?","body":"Did my answer not work...?"},{"owner":{"account_id":4112953,"reputation":2266,"user_id":3375325,"accept_rate":71,"display_name":"jansohn"},"score":1,"creation_date":1475243619,"post_id":34529565,"comment_id":66879219,"body_markdown":"Did you find a solution? Having the same problem and I&#39;m out of ideas... My test POM has a `&lt;executions&gt;`section.","body":"Did you find a solution? Having the same problem and I&#39;m out of ideas... My test POM has a <code>&lt;executions&gt;</code>section."},{"owner":{"account_id":1161070,"reputation":4494,"user_id":1631510,"accept_rate":86,"display_name":"danidemi"},"score":0,"creation_date":1489961642,"post_id":34529565,"comment_id":72887058,"body_markdown":"Any solution ? Same problem for me.","body":"Any solution ? Same problem for me."},{"owner":{"account_id":3841249,"reputation":546,"user_id":3184240,"accept_rate":96,"display_name":"MMP"},"score":0,"creation_date":1505960460,"post_id":34529565,"comment_id":79629306,"body_markdown":"https://stackoverflow.com/questions/44009232/nosuchelementexception-thrown-while-testing-maven-plugin?noredirect=1&amp;lq=1","body":"<a href=\"https://stackoverflow.com/questions/44009232/nosuchelementexception-thrown-while-testing-maven-plugin?noredirect=1&amp;lq=1\" title=\"nosuchelementexception thrown while testing maven plugin\">stackoverflow.com/questions/44009232/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":405356,"reputation":31601,"user_id":774183,"accept_rate":78,"display_name":"carlspring"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1452085354,"creation_date":1452006621,"answer_id":34614934,"question_id":34529565,"body_markdown":"Your test project&#39;s `pom.xml` needs to have the an `&lt;execution/&gt;` section with the respective `&lt;goal/&gt;`:\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0\r\n                                 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        \r\n        &lt;groupId&gt;com.my.utils.test&lt;/groupId&gt;\r\n        &lt;artifactId&gt;project-to-test&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;packaging&gt;jar&lt;/packaging&gt;\r\n        \r\n        &lt;name&gt;Test&lt;/name&gt;\r\n        \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;com.my.utils&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;converter-maven-plugin&lt;/artifactId&gt;\r\n                    \r\n                    &lt;configuration&gt;\r\n                        ...\r\n                    &lt;/configuration&gt;\r\n                    \r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;convert&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\nOtherwise, the testing harness will fail to understand what it has to map and load.","title":"org.codehaus.plexus.component.repository.exception.ComponentLookupException: java.util.NoSuchElementException","body":"<p>Your test project's <code>pom.xml</code> needs to have the an <code>&lt;execution/&gt;</code> section with the respective <code>&lt;goal/&gt;</code>:</p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0\n                             http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.my.utils.test&lt;/groupId&gt;\n    &lt;artifactId&gt;project-to-test&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;name&gt;Test&lt;/name&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;com.my.utils&lt;/groupId&gt;\n                &lt;artifactId&gt;converter-maven-plugin&lt;/artifactId&gt;\n\n                &lt;configuration&gt;\n                    ...\n                &lt;/configuration&gt;\n\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;convert&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>Otherwise, the testing harness will fail to understand what it has to map and load.</p>\n"},{"tags":[],"owner":{"account_id":7921383,"reputation":141,"user_id":5982254,"display_name":"Bobby King"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1516913358,"creation_date":1516913358,"answer_id":48451668,"question_id":34529565,"body_markdown":"I had the same issue, followed all of the advice but still had the issue.  I solved it by clearing out my local repo then doing a mvn clean install -DskipTests from terminal.  Then I ran my jUnit test from Eclipse and it worked.  Must have been a conflicting dependency somewhere.","title":"org.codehaus.plexus.component.repository.exception.ComponentLookupException: java.util.NoSuchElementException","body":"<p>I had the same issue, followed all of the advice but still had the issue.  I solved it by clearing out my local repo then doing a mvn clean install -DskipTests from terminal.  Then I ran my jUnit test from Eclipse and it worked.  Must have been a conflicting dependency somewhere.</p>\n"},{"tags":[],"owner":{"account_id":3333666,"reputation":2544,"user_id":2801909,"accept_rate":33,"display_name":"Vijay Nandwana"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1576657859,"creation_date":1576657859,"answer_id":59388155,"question_id":34529565,"body_markdown":"I was facing this issue in one of the modules that had proper execution configuration with the appropriate goal. I resolved this by simply running `mvn clean install` in that specific module (without deleting anything from the local repo).","title":"org.codehaus.plexus.component.repository.exception.ComponentLookupException: java.util.NoSuchElementException","body":"<p>I was facing this issue in one of the modules that had proper execution configuration with the appropriate goal. I resolved this by simply running <code>mvn clean install</code> in that specific module (without deleting anything from the local repo).</p>\n"},{"tags":[],"owner":{"account_id":19545508,"reputation":11,"user_id":14302409,"display_name":"Shruti Sarda"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1600454356,"creation_date":1600454356,"answer_id":63961148,"question_id":34529565,"body_markdown":"Just update the maven project and mvn clean install. It will work","title":"org.codehaus.plexus.component.repository.exception.ComponentLookupException: java.util.NoSuchElementException","body":"<p>Just update the maven project and mvn clean install. It will work</p>\n"},{"tags":[],"owner":{"account_id":26770476,"reputation":61,"user_id":20366943,"display_name":"DOĞUŞ İZGİ"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1670520328,"creation_date":1670520328,"answer_id":74734082,"question_id":34529565,"body_markdown":"open your location \r\n\r\nFile | Settings | Build, Execution, Deployment | Build Tools | Maven \r\n\r\nChange &quot;maven home path:&quot; to Use Maven wrapper here. This is how my problem was solved.[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kbc7q.png","title":"org.codehaus.plexus.component.repository.exception.ComponentLookupException: java.util.NoSuchElementException","body":"<p>open your location</p>\n<p>File | Settings | Build, Execution, Deployment | Build Tools | Maven</p>\n<p>Change &quot;maven home path:&quot; to Use Maven wrapper here. This is how my problem was solved.<a href=\"https://i.stack.imgur.com/kbc7q.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":[],"owner":{"account_id":9421451,"reputation":11,"user_id":7007737,"display_name":"Tocotti"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677860447,"creation_date":1677860447,"answer_id":75629523,"question_id":34529565,"body_markdown":"I had a similar issue working with jmeter maven plugin.\r\nIn my case, because I was using about 15 third part plugins for integration jmeter&lt;-&gt;maven, I had the need to build and install those plugins separately in a local repository, different by default repository of maven: ${user.home}/.m2/repository, and then I had to refer each one of them in pom.xml as dependencies, specifying the repository too.\r\n\r\nDuring the build and the resolving of artifact for each one of them I was facing the issue:  \r\norg.codehaus.plexus.component.repository.exception.ComponentLookupException: java.util.NoSuchElementException . \r\nI solved the issue by deciding to install those third part plugin in default repository too: ${user.home}/.m2/repository, and then specifying the new repository in pom.xml:\r\n\r\n`&lt;repositories&gt;\r\n\r\n    &lt;repository&gt;\r\n\r\n        &lt;id&gt;project-repo&lt;/id&gt;\r\n\r\n        &lt;url&gt;file://C:/Users/myuser/.m2/repository&lt;/url&gt;\r\n\r\n    &lt;/repository&gt;\r\n\r\n&lt;/repositories&gt;`\r\n\r\nThis worked fine to me.","title":"org.codehaus.plexus.component.repository.exception.ComponentLookupException: java.util.NoSuchElementException","body":"<p>I had a similar issue working with jmeter maven plugin.\nIn my case, because I was using about 15 third part plugins for integration jmeter&lt;-&gt;maven, I had the need to build and install those plugins separately in a local repository, different by default repository of maven: ${user.home}/.m2/repository, and then I had to refer each one of them in pom.xml as dependencies, specifying the repository too.</p>\n<p>During the build and the resolving of artifact for each one of them I was facing the issue:<br />\norg.codehaus.plexus.component.repository.exception.ComponentLookupException: java.util.NoSuchElementException .\nI solved the issue by deciding to install those third part plugin in default repository too: ${user.home}/.m2/repository, and then specifying the new repository in pom.xml:</p>\n<p>`</p>\n<pre><code>&lt;repository&gt;\n\n    &lt;id&gt;project-repo&lt;/id&gt;\n\n    &lt;url&gt;file://C:/Users/myuser/.m2/repository&lt;/url&gt;\n\n&lt;/repository&gt;\n</code></pre>\n<p>`</p>\n<p>This worked fine to me.</p>\n"}],"owner":{"account_id":362593,"reputation":6319,"user_id":705869,"accept_rate":77,"display_name":"nKognito"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16578,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":6,"score":8,"last_activity_date":1677860447,"creation_date":1451478444,"question_id":34529565,"body_markdown":"I try to test my maven plugin and receive weird exception. Found similar question [here][1], but the answer didn&#39;t help.\r\n\r\npom.xml\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-plugin-api&lt;/artifactId&gt;\r\n            &lt;version&gt;3.3.9&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-project&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0-alpha-2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.jcabi&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jcabi-aether&lt;/artifactId&gt;\r\n            &lt;version&gt;0.10.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugin-tools&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-plugin-annotations&lt;/artifactId&gt;\r\n            &lt;version&gt;3.4&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugin-testing&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-plugin-testing-harness&lt;/artifactId&gt;\r\n            &lt;version&gt;3.3.0&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-aether-provider&lt;/artifactId&gt;\r\n            &lt;version&gt;3.3.9&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-core&lt;/artifactId&gt;\r\n            &lt;version&gt;3.3.9&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-compat&lt;/artifactId&gt;\r\n            &lt;version&gt;3.3.9&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-model&lt;/artifactId&gt;\r\n            &lt;version&gt;3.3.9&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;junit&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n            &lt;version&gt;4.12&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\nTest class:\r\n\r\n    public class ConverterMojoTest {\r\n    \r\n        @Rule\r\n        public MojoRule rule = new MojoRule() {\r\n    \r\n            @Override\r\n            protected void before() throws Throwable {\r\n                super.before();\r\n            }\r\n    \r\n            @Override\r\n            protected void after() {\r\n                super.after();\r\n            }\r\n        };\r\n    \r\n        @Rule\r\n        public TestResources resources = new TestResources();\r\n    \r\n    \r\n        @Test\r\n        public void testExecute() throws Exception {\r\n            File project = resources.getBasedir(&quot;valid&quot;);\r\n            File pom = new File(project, &quot;pom.xml&quot;);\r\n            Assert.assertNotNull(pom);\r\n            Assert.assertTrue(pom.exists());\r\n    \r\n            ConverterMojo mojo = (ConverterMojo) rule.lookupMojo(&quot;convert&quot;, pom);\r\n            Assert.assertNotNull(mojo);\r\n            mojo.execute();\r\n        }\r\n    }\r\n\r\nTest project pom.xml:\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;com.my.utils.test&lt;/groupId&gt;\r\n        &lt;artifactId&gt;project-to-test&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;packaging&gt;jar&lt;/packaging&gt;\r\n        &lt;name&gt;Test&lt;/name&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;com.my.utils&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;converter-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;configuration&gt;\r\n                        \r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\nException:\r\n\r\n    org.codehaus.plexus.component.repository.exception.ComponentLookupException: java.util.NoSuchElementException\r\n          role: org.apache.maven.plugin.Mojo\r\n      roleHint: com.my.utils:converter-maven-plugin:1.0.0-SNAPSHOT:convert\r\n\r\n  [1]: https://stackoverflow.com/questions/15779351/component-lookup-exception-with-org-apache-maven-repository-repositorysystem-in","title":"org.codehaus.plexus.component.repository.exception.ComponentLookupException: java.util.NoSuchElementException","body":"<p>I try to test my maven plugin and receive weird exception. Found similar question <a href=\"https://stackoverflow.com/questions/15779351/component-lookup-exception-with-org-apache-maven-repository-repositorysystem-in\">here</a>, but the answer didn't help.</p>\n\n<p>pom.xml</p>\n\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-plugin-api&lt;/artifactId&gt;\n        &lt;version&gt;3.3.9&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-project&lt;/artifactId&gt;\n        &lt;version&gt;3.0-alpha-2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.jcabi&lt;/groupId&gt;\n        &lt;artifactId&gt;jcabi-aether&lt;/artifactId&gt;\n        &lt;version&gt;0.10.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.maven.plugin-tools&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-plugin-annotations&lt;/artifactId&gt;\n        &lt;version&gt;3.4&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.maven.plugin-testing&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-plugin-testing-harness&lt;/artifactId&gt;\n        &lt;version&gt;3.3.0&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-aether-provider&lt;/artifactId&gt;\n        &lt;version&gt;3.3.9&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-core&lt;/artifactId&gt;\n        &lt;version&gt;3.3.9&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-compat&lt;/artifactId&gt;\n        &lt;version&gt;3.3.9&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-model&lt;/artifactId&gt;\n        &lt;version&gt;3.3.9&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;junit&lt;/groupId&gt;\n        &lt;artifactId&gt;junit&lt;/artifactId&gt;\n        &lt;version&gt;4.12&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n\n<p>Test class:</p>\n\n<pre><code>public class ConverterMojoTest {\n\n    @Rule\n    public MojoRule rule = new MojoRule() {\n\n        @Override\n        protected void before() throws Throwable {\n            super.before();\n        }\n\n        @Override\n        protected void after() {\n            super.after();\n        }\n    };\n\n    @Rule\n    public TestResources resources = new TestResources();\n\n\n    @Test\n    public void testExecute() throws Exception {\n        File project = resources.getBasedir(\"valid\");\n        File pom = new File(project, \"pom.xml\");\n        Assert.assertNotNull(pom);\n        Assert.assertTrue(pom.exists());\n\n        ConverterMojo mojo = (ConverterMojo) rule.lookupMojo(\"convert\", pom);\n        Assert.assertNotNull(mojo);\n        mojo.execute();\n    }\n}\n</code></pre>\n\n<p>Test project pom.xml:</p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.my.utils.test&lt;/groupId&gt;\n    &lt;artifactId&gt;project-to-test&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;name&gt;Test&lt;/name&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;com.my.utils&lt;/groupId&gt;\n                &lt;artifactId&gt;converter-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>Exception:</p>\n\n<pre><code>org.codehaus.plexus.component.repository.exception.ComponentLookupException: java.util.NoSuchElementException\n      role: org.apache.maven.plugin.Mojo\n  roleHint: com.my.utils:converter-maven-plugin:1.0.0-SNAPSHOT:convert\n</code></pre>\n"},{"tags":["java","servlets","aem","sling"],"comments":[{"owner":{"account_id":19726215,"reputation":538,"user_id":14442758,"display_name":"Z-100"},"score":0,"creation_date":1677832201,"post_id":75624750,"comment_id":133418685,"body_markdown":"Please take a look at [ask]. And provide a little bit more information","body":"Please take a look at <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. And provide a little bit more information"},{"owner":{"account_id":70798,"reputation":2030,"user_id":204968,"display_name":"ronnyfm"},"score":0,"creation_date":1678979681,"post_id":75624750,"comment_id":133641375,"body_markdown":"That has to do with a component not with the page, look if one of the components included is missing or using a wrong sling:resourceType","body":"That has to do with a component not with the page, look if one of the components included is missing or using a wrong sling:resourceType"},{"owner":{"account_id":4280077,"reputation":621,"user_id":10399628,"display_name":"e-israel"},"score":0,"creation_date":1686590748,"post_id":75624750,"comment_id":134816671,"body_markdown":"That happens when a bundle is not installed, check all your bundles to detect what&#39;s not working correctly, then fix the dependencies.","body":"That happens when a bundle is not installed, check all your bundles to detect what&#39;s not working correctly, then fix the dependencies."}],"owner":{"account_id":20763740,"reputation":1,"user_id":15248249,"display_name":"Vijitha"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":161,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677860359,"creation_date":1677832113,"question_id":75624750,"body_markdown":"I am  seeing  below error for many of the content pages in logs. \r\n\r\nEnable JSON and Enable XML are selected for  DefaultGetServlet and I am using AEM 6.5 version.\r\n\r\n    GET /content/test/***********.html HTTP/1.1]org.apache.sling.servlets.get.impl.DefaultGetServlet No renderer for extension html, cannot render resource JcrNodeResource, type=nt:unstructured, superType=null, path=/content/******/jcr:content/root/responsivegrid/*****_copy.\r\n\r\nWhile debugging I have observed that nodes are not having `sling:resourceType`. We have the same issue for &quot;n&quot; of nodes in our project. How can we delete these nodes using servlet?\r\n\r\n*For example*: How can I delete text node which does not have `sling:resourceType`.\r\n\r\n    /content\r\n      /company\r\n        /us/en\r\n          /test\r\n            /text","title":"GET /content/test/***********.html HTTP/1.1]org.apache.sling.servlets.get.impl.DefaultGetServlet No renderer for extension html","body":"<p>I am  seeing  below error for many of the content pages in logs.</p>\n<p>Enable JSON and Enable XML are selected for  DefaultGetServlet and I am using AEM 6.5 version.</p>\n<pre><code>GET /content/test/***********.html HTTP/1.1]org.apache.sling.servlets.get.impl.DefaultGetServlet No renderer for extension html, cannot render resource JcrNodeResource, type=nt:unstructured, superType=null, path=/content/******/jcr:content/root/responsivegrid/*****_copy.\n</code></pre>\n<p>While debugging I have observed that nodes are not having <code>sling:resourceType</code>. We have the same issue for &quot;n&quot; of nodes in our project. How can we delete these nodes using servlet?</p>\n<p><em>For example</em>: How can I delete text node which does not have <code>sling:resourceType</code>.</p>\n<pre><code>/content\n  /company\n    /us/en\n      /test\n        /text\n</code></pre>\n"},{"tags":["java","maps","key-value"],"answers":[{"tags":[],"owner":{"account_id":1726806,"reputation":13951,"user_id":4790924,"accept_rate":67,"display_name":"Sharon Ben Asher"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677843310,"creation_date":1677842858,"answer_id":75626511,"question_id":75626324,"body_markdown":"there is no way to achieve this with iteration on one map. the reason is that the result must include mapping that exists in only one map (either myMap or the default) so iteration on one map will always exclude keys that are present only in the other.\r\n\r\nso first you need to construct a set that includes union of keys from both maps \r\n\r\n\t\tSet&lt;String&gt; unionKeys = new HashSet&lt;&gt;(myMap.keySet());\r\n\t\tunionKeys.addAll(defaultValuesMap.keySet());\r\n\r\nthis set is the basis of the iteration, the value can be taken using the ternary operator from myMap or the default\r\n\r\n\t\tMap&lt;String, String&gt; resultMap = unionKeys.stream()\r\n\t\t\t.collect(Collectors.toMap(\r\n\t\t\t\tFunction.identity(),\r\n\t\t\t\tkey -&gt; myMap.containsKey(key) &amp;&amp; !myMap.get(key).isBlank() ? \r\n\t\t\t\t\tmyMap.get(key) : defaultValuesMap.get(key)\r\n\t\t\t\t)\r\n\t\t\t);\r\n\r\n","title":"How do I add elements from one map to another if it doesn&#39;t exist already or the value is blank?","body":"<p>there is no way to achieve this with iteration on one map. the reason is that the result must include mapping that exists in only one map (either myMap or the default) so iteration on one map will always exclude keys that are present only in the other.</p>\n<p>so first you need to construct a set that includes union of keys from both maps</p>\n<pre><code>    Set&lt;String&gt; unionKeys = new HashSet&lt;&gt;(myMap.keySet());\n    unionKeys.addAll(defaultValuesMap.keySet());\n</code></pre>\n<p>this set is the basis of the iteration, the value can be taken using the ternary operator from myMap or the default</p>\n<pre><code>    Map&lt;String, String&gt; resultMap = unionKeys.stream()\n        .collect(Collectors.toMap(\n            Function.identity(),\n            key -&gt; myMap.containsKey(key) &amp;&amp; !myMap.get(key).isBlank() ? \n                myMap.get(key) : defaultValuesMap.get(key)\n            )\n        );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1677860272,"creation_date":1677843600,"answer_id":75626625,"question_id":75626324,"body_markdown":"# Unmodifiable map\r\n\r\n[`Map.of`][1] returns an [unmodifiable map][2], which as the name implies cannot be modified. \r\n\r\nCreate a third result map or if you want to do it in place like in your example, make the second map modifiable. Then you can use `map.compute` to get the desired result:\r\n\r\n    Map&lt;String, String&gt; defaultValuesMap = Map.of(\r\n            &quot;BMW&quot;, &quot;Something&quot;,\r\n            &quot;Audi&quot;, &quot;Something else&quot;,\r\n            &quot;Nissan&quot;, &quot;Something else&quot;);\r\n\r\n    Map&lt;String, String&gt; myMap = new HashMap&lt;&gt;(Map.of(\r\n            &quot;Mercedes&quot;, &quot;Something&quot;,\r\n            &quot;Suzuki&quot;, &quot;Whatever&quot;,\r\n            &quot;Audi&quot;, &quot;Dummy data&quot;,\r\n            &quot;Nissan&quot;, &quot;&quot;));\r\n\r\n    defaultValuesMap.forEach((k,v) -&gt;{\r\n        myMap.compute(k, (k1, prev) -&gt; prev == null || prev.isBlank() ? v : prev);\r\n    });\r\n\r\n    System.out.println(myMap);\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#of(K,V,K,V,K,V)\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#unmodifiable","title":"How do I add elements from one map to another if it doesn&#39;t exist already or the value is blank?","body":"<h1>Unmodifiable map</h1>\n<p><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#of(K,V,K,V,K,V)\" rel=\"nofollow noreferrer\"><code>Map.of</code></a> returns an <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#unmodifiable\" rel=\"nofollow noreferrer\">unmodifiable map</a>, which as the name implies cannot be modified.</p>\n<p>Create a third result map or if you want to do it in place like in your example, make the second map modifiable. Then you can use <code>map.compute</code> to get the desired result:</p>\n<pre><code>Map&lt;String, String&gt; defaultValuesMap = Map.of(\n        &quot;BMW&quot;, &quot;Something&quot;,\n        &quot;Audi&quot;, &quot;Something else&quot;,\n        &quot;Nissan&quot;, &quot;Something else&quot;);\n\nMap&lt;String, String&gt; myMap = new HashMap&lt;&gt;(Map.of(\n        &quot;Mercedes&quot;, &quot;Something&quot;,\n        &quot;Suzuki&quot;, &quot;Whatever&quot;,\n        &quot;Audi&quot;, &quot;Dummy data&quot;,\n        &quot;Nissan&quot;, &quot;&quot;));\n\ndefaultValuesMap.forEach((k,v) -&gt;{\n    myMap.compute(k, (k1, prev) -&gt; prev == null || prev.isBlank() ? v : prev);\n});\n\nSystem.out.println(myMap);\n</code></pre>\n"}],"owner":{"account_id":13216928,"reputation":1467,"user_id":9545125,"display_name":"TheStranger"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":826,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75626625,"answer_count":2,"score":1,"last_activity_date":1677860272,"creation_date":1677841751,"question_id":75626324,"body_markdown":"In my Spring Boot application I have two Maps:\r\n\r\n    Map&lt;String, String&gt; defaultValuesMap = Map.of(\r\n        &quot;BMW&quot;, &quot;Something&quot;,\r\n        &quot;Audi&quot;, &quot;Something else&quot;,\r\n        &quot;Nissan&quot;, &quot;Something else&quot;\r\n    );\r\n\r\n    Map&lt;String, String&gt; myMap = Map.of(\r\n        &quot;Mercedes&quot;, &quot;Something&quot;,\r\n        &quot;Suzuki&quot;, &quot;Whatever&quot;,\r\n        &quot;Audi&quot;, &quot;Dummy data&quot;,\r\n        &quot;Nissan&quot;, &quot;&quot;\r\n    );\r\n\r\nI&#39;m trying to make some logic that takes alle the Entries in `defaultValuesMap` and say if that entry does not exist in `myMap` OR it exists but the value is blank, then replace that key/value pair with the one from `defaultValuesMap`.\r\n\r\nThe result would look like this:\r\n\r\n    Map&lt;String, String&gt; myMap = Map.of(\r\n        &quot;Mercedes&quot;, &quot;Something&quot;,\r\n        &quot;Suzuki&quot;, &quot;Whatever&quot;,\r\n        &quot;Audi&quot;, &quot;Dummy data&quot;,\r\n        &quot;Nissan&quot;, &quot;Something else&quot;,\r\n        &quot;BMW&quot;, &quot;Something&quot;\r\n    );\r\n\r\nI&#39;ve tried something like this:\r\n\r\n    defaultValuesMap.entrySet()\r\n        .stream()\r\n        .map(entry -&gt; {\r\n            if (!myMap.containsKey(entry) || myMap.get(entry).isBlank)\r\n                            myMap.put(\r\n                                    entry.getKey(),\r\n                                    entry.getValue());\r\n                        return entry;\r\n                    });\r\n\r\nThis didn&#39;t work, then I tried to add `collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));` to the end of it but then it just replaced the elements even if they were not missing or blank...\r\n\r\n","title":"How do I add elements from one map to another if it doesn&#39;t exist already or the value is blank?","body":"<p>In my Spring Boot application I have two Maps:</p>\n<pre><code>Map&lt;String, String&gt; defaultValuesMap = Map.of(\n    &quot;BMW&quot;, &quot;Something&quot;,\n    &quot;Audi&quot;, &quot;Something else&quot;,\n    &quot;Nissan&quot;, &quot;Something else&quot;\n);\n\nMap&lt;String, String&gt; myMap = Map.of(\n    &quot;Mercedes&quot;, &quot;Something&quot;,\n    &quot;Suzuki&quot;, &quot;Whatever&quot;,\n    &quot;Audi&quot;, &quot;Dummy data&quot;,\n    &quot;Nissan&quot;, &quot;&quot;\n);\n</code></pre>\n<p>I'm trying to make some logic that takes alle the Entries in <code>defaultValuesMap</code> and say if that entry does not exist in <code>myMap</code> OR it exists but the value is blank, then replace that key/value pair with the one from <code>defaultValuesMap</code>.</p>\n<p>The result would look like this:</p>\n<pre><code>Map&lt;String, String&gt; myMap = Map.of(\n    &quot;Mercedes&quot;, &quot;Something&quot;,\n    &quot;Suzuki&quot;, &quot;Whatever&quot;,\n    &quot;Audi&quot;, &quot;Dummy data&quot;,\n    &quot;Nissan&quot;, &quot;Something else&quot;,\n    &quot;BMW&quot;, &quot;Something&quot;\n);\n</code></pre>\n<p>I've tried something like this:</p>\n<pre><code>defaultValuesMap.entrySet()\n    .stream()\n    .map(entry -&gt; {\n        if (!myMap.containsKey(entry) || myMap.get(entry).isBlank)\n                        myMap.put(\n                                entry.getKey(),\n                                entry.getValue());\n                    return entry;\n                });\n</code></pre>\n<p>This didn't work, then I tried to add <code>collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));</code> to the end of it but then it just replaced the elements even if they were not missing or blank...</p>\n"},{"tags":["java","xml","jaxb","pojo"],"answers":[{"tags":[],"owner":{"account_id":4875529,"reputation":55,"user_id":3930769,"display_name":"Peter Odd"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677859993,"creation_date":1677859993,"answer_id":75629451,"question_id":75625337,"body_markdown":"I managed to solve this issue myself after some more hours, with the help of `@XmlPath` from  [EclipseLink MOXy][1]. I mapped the `&lt;supplement&gt;`-tags to two individual variables.\r\n\r\n``` java \r\n@XmlRootElement(name = &quot;foobar&quot;)\r\n@XmlAccessorType(XmlAccessType.FIELD)\r\npublic class Foobar {\r\n    @XmlAttribute\r\n    private String name;\r\n\r\n    @XmlPath(&quot;supplement[@key=&#39;head&#39;]/text()&quot;)\r\n    private String head;  // maps to XMLs supplement:key=head\r\n\r\n    @XmlPath(&quot;supplement[@key=&#39;body&#39;]/text()&quot;)\r\n    private String body;  // maps to XMLs supplement:key=body\r\n}\r\n```\r\n\r\n\r\nEclipseLink MOXy, maven dependency\r\n``` xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.eclipse.persistence&lt;/groupId&gt;\r\n    &lt;artifactId&gt;org.eclipse.persistence.moxy&lt;/artifactId&gt;\r\n    &lt;version&gt;2.4.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n``` \r\n\r\n\r\n  [1]: https://www.eclipse.org/eclipselink/#moxy","title":"Map XML list / XML elements with different attribute values to separate fields","body":"<p>I managed to solve this issue myself after some more hours, with the help of <code>@XmlPath</code> from  <a href=\"https://www.eclipse.org/eclipselink/#moxy\" rel=\"nofollow noreferrer\">EclipseLink MOXy</a>. I mapped the <code>&lt;supplement&gt;</code>-tags to two individual variables.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@XmlRootElement(name = &quot;foobar&quot;)\n@XmlAccessorType(XmlAccessType.FIELD)\npublic class Foobar {\n    @XmlAttribute\n    private String name;\n\n    @XmlPath(&quot;supplement[@key='head']/text()&quot;)\n    private String head;  // maps to XMLs supplement:key=head\n\n    @XmlPath(&quot;supplement[@key='body']/text()&quot;)\n    private String body;  // maps to XMLs supplement:key=body\n}\n</code></pre>\n<p>EclipseLink MOXy, maven dependency</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.eclipse.persistence&lt;/groupId&gt;\n    &lt;artifactId&gt;org.eclipse.persistence.moxy&lt;/artifactId&gt;\n    &lt;version&gt;2.4.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":4875529,"reputation":55,"user_id":3930769,"display_name":"Peter Odd"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":290,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75629451,"answer_count":1,"score":0,"last_activity_date":1677859993,"creation_date":1677835899,"question_id":75625337,"body_markdown":"I have an XML file that looks like this:\r\n\r\n**XML file:**\r\n``` xml\r\n&lt;foobar name=&quot;quux&quot;&gt;\r\n    &lt;supplement key=&quot;head&quot;&gt;this is a text row&lt;/supplement&gt;\r\n    &lt;supplement key=&quot;body&quot;&gt;this is some other text row&lt;/supplement&gt;\r\n&lt;/foobar&gt;\r\n```\r\n\r\nI would like to have `&lt;supplement&gt;` mapped to two separate variables; `head` and `body`.\r\n\r\n**Java POJO:**\r\n``` java\r\n@XmlRootElement(name = &quot;foobar&quot;)\r\n@XmlAccessorType(XmlAccessType.FIELD)\r\npublic class Foobar {\r\n    @XmlAttribute\r\n    private String name;\r\n\r\n    private String head;  // should be mapped to XMLs supplement:key=head\r\n\r\n    private String body;  // should be mapped to XMLs supplement:key=body\r\n}\r\n```\r\n\r\nCan this be done? If so how?\r\n\r\n\r\nAnother doable solution would be to have both `&lt;supplement&gt;`-tags added to a `HashMap&lt;String, String&gt;`, where the `key`-value is used as index, but I have failed to do this unfortunately.\r\n\r\n\r\n\r\nAs a workaround I have a solution to map `&lt;supplement&gt;` as a list, using:\r\n\r\n``` java\r\n@XmlElement(name = &quot;supplement&quot;)\r\nprivate List&lt;NewSupplement&gt; supplements = new ArrayList&lt;&gt;();\r\n```\r\n\r\nThe problem with this solution is that list index value is decided by the order of `&lt;supplement&gt;`-tags in the XML file, ie. if `key=&quot;head&quot;` comes first in the XML file this is added to index 0 but if `key=&quot;body&quot;` comes first that is added to index 0, which might cause me some problems / unnecessary headache.\r\n\r\nI would rather have the first solution (or a HashMap) if that is doable.\r\nAny suggestions?","title":"Map XML list / XML elements with different attribute values to separate fields","body":"<p>I have an XML file that looks like this:</p>\n<p><strong>XML file:</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;foobar name=&quot;quux&quot;&gt;\n    &lt;supplement key=&quot;head&quot;&gt;this is a text row&lt;/supplement&gt;\n    &lt;supplement key=&quot;body&quot;&gt;this is some other text row&lt;/supplement&gt;\n&lt;/foobar&gt;\n</code></pre>\n<p>I would like to have <code>&lt;supplement&gt;</code> mapped to two separate variables; <code>head</code> and <code>body</code>.</p>\n<p><strong>Java POJO:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@XmlRootElement(name = &quot;foobar&quot;)\n@XmlAccessorType(XmlAccessType.FIELD)\npublic class Foobar {\n    @XmlAttribute\n    private String name;\n\n    private String head;  // should be mapped to XMLs supplement:key=head\n\n    private String body;  // should be mapped to XMLs supplement:key=body\n}\n</code></pre>\n<p>Can this be done? If so how?</p>\n<p>Another doable solution would be to have both <code>&lt;supplement&gt;</code>-tags added to a <code>HashMap&lt;String, String&gt;</code>, where the <code>key</code>-value is used as index, but I have failed to do this unfortunately.</p>\n<p>As a workaround I have a solution to map <code>&lt;supplement&gt;</code> as a list, using:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@XmlElement(name = &quot;supplement&quot;)\nprivate List&lt;NewSupplement&gt; supplements = new ArrayList&lt;&gt;();\n</code></pre>\n<p>The problem with this solution is that list index value is decided by the order of <code>&lt;supplement&gt;</code>-tags in the XML file, ie. if <code>key=&quot;head&quot;</code> comes first in the XML file this is added to index 0 but if <code>key=&quot;body&quot;</code> comes first that is added to index 0, which might cause me some problems / unnecessary headache.</p>\n<p>I would rather have the first solution (or a HashMap) if that is doable.\nAny suggestions?</p>\n"},{"tags":["java","amazon-web-services","amazon-s3","google-cloud-storage"],"comments":[{"owner":{"account_id":100740,"reputation":73217,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":0,"creation_date":1677860004,"post_id":75629162,"comment_id":133426460,"body_markdown":"Maybe report a bug or raise a support ticket with Google Cloud. It will probably depend on their definition of &quot;S3 compatibility&quot;.","body":"Maybe report a bug or raise a support ticket with Google Cloud. It will probably depend on their definition of &quot;S3 compatibility&quot;."},{"owner":{"account_id":7783745,"reputation":29,"user_id":5889351,"display_name":"Dave Breeze"},"score":0,"creation_date":1677920691,"post_id":75629162,"comment_id":133435626,"body_markdown":"Thanks for the response -  I have opened ticket 271559073 with Google","body":"Thanks for the response -  I have opened ticket 271559073 with Google"},{"owner":{"account_id":7783745,"reputation":29,"user_id":5889351,"display_name":"Dave Breeze"},"score":0,"creation_date":1700662924,"post_id":75629162,"comment_id":136682217,"body_markdown":"Have yet to receuve a resokution to the case opened against Google COS. I would question the commitment of Google to AWS compatibilty","body":"Have yet to receuve a resokution to the case opened against Google COS. I would question the commitment of Google to AWS compatibilty"}],"owner":{"account_id":7783745,"reputation":29,"user_id":5889351,"display_name":"Dave Breeze"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677859936,"creation_date":1677858314,"question_id":75629162,"body_markdown":"I am using the AWS S3 SDK to upload objects to various s3 providers. The uploads are multi-part. On completion of an upload if the bucket is configured for versioning then my expectation is that CompleteMultipartUploadResult will contain the versionId. This expectation does not hold true when the s3 provider is Google. All other tested providers return a valid version-id. \r\n\r\nFurther if I issue a ListVersionsRequest() and iterate through the version summaries then for non Google buckets I retrieve the versions as expected BUT for Google the versionSummary is empty.\r\n\r\nAny advice on how to obtain versionIds using AWS on Google platform - Thanks\r\n\r\nSimplified sample code:\r\n\r\n\r\n```\r\nCompleteMultipartUploadResult result = s3Client.completeMultipartUpload(completeRequest);\r\n\t\t\t\r\nexpiration = result.getExpirationTime();\r\nversionid = result.getVersionId();\r\n \r\nListVersionsRequest versionRequest = new ListVersionsRequest();\r\nversionRequest.setBucketName(destBucketName);\r\n\r\nVersionListing versionListing = null;            \r\ndo {\r\n        versionListing = s3Client.listVersions(versionRequest);\r\n        for (S3VersionSummary versionSummary:versionListing.getVersionSummaries())\r\n        {\r\n        \tlog.debug(&quot;key:&quot; + versionSummary.getKey() +\r\n\t\t                    &quot; size:&quot; + versionSummary.getSize() + \r\n\t\t                    &quot; date:&quot; + versionSummary.getLastModified() +\r\n\t\t                    &quot; latest:&quot; + versionSummary.isLatest() +\r\n\t\t                    &quot; versionID:&quot; + versionSummary.getVersionId() + &quot;)&quot;);\r\n\r\n        }\r\n        versionRequest.setKeyMarker(versionListing.getNextKeyMarker());\r\n\tversionRequest.setVersionIdMarker(versionListing.getNextVersionIdMarker());\r\n    } while (versionListing.isTruncated()); `\r\n```\r\nUsing the Google web interface I can see the versions in the buckets - confirming that versioning is enabled and being actioned but I cannot retrieve versioning information programatically","title":"Java using AWS SDK with S3 object versions","body":"<p>I am using the AWS S3 SDK to upload objects to various s3 providers. The uploads are multi-part. On completion of an upload if the bucket is configured for versioning then my expectation is that CompleteMultipartUploadResult will contain the versionId. This expectation does not hold true when the s3 provider is Google. All other tested providers return a valid version-id.</p>\n<p>Further if I issue a ListVersionsRequest() and iterate through the version summaries then for non Google buckets I retrieve the versions as expected BUT for Google the versionSummary is empty.</p>\n<p>Any advice on how to obtain versionIds using AWS on Google platform - Thanks</p>\n<p>Simplified sample code:</p>\n<pre><code>CompleteMultipartUploadResult result = s3Client.completeMultipartUpload(completeRequest);\n            \nexpiration = result.getExpirationTime();\nversionid = result.getVersionId();\n \nListVersionsRequest versionRequest = new ListVersionsRequest();\nversionRequest.setBucketName(destBucketName);\n\nVersionListing versionListing = null;            \ndo {\n        versionListing = s3Client.listVersions(versionRequest);\n        for (S3VersionSummary versionSummary:versionListing.getVersionSummaries())\n        {\n            log.debug(&quot;key:&quot; + versionSummary.getKey() +\n                            &quot; size:&quot; + versionSummary.getSize() + \n                            &quot; date:&quot; + versionSummary.getLastModified() +\n                            &quot; latest:&quot; + versionSummary.isLatest() +\n                            &quot; versionID:&quot; + versionSummary.getVersionId() + &quot;)&quot;);\n\n        }\n        versionRequest.setKeyMarker(versionListing.getNextKeyMarker());\n    versionRequest.setVersionIdMarker(versionListing.getNextVersionIdMarker());\n    } while (versionListing.isTruncated()); `\n</code></pre>\n<p>Using the Google web interface I can see the versions in the buckets - confirming that versioning is enabled and being actioned but I cannot retrieve versioning information programatically</p>\n"},{"tags":["java","spring-boot","redis","cucumber","lettuce"],"comments":[{"owner":{"account_id":58650,"reputation":3399,"user_id":175554,"accept_rate":40,"display_name":"ozkanpakdil"},"score":0,"creation_date":1678312319,"post_id":75629442,"comment_id":133510473,"body_markdown":"can you https://stackoverflow.com/help/minimal-reproducible-example ?","body":"can you <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a> ?"}],"owner":{"account_id":1050519,"reputation":348,"user_id":1054592,"accept_rate":85,"display_name":"Chinmay"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":425,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677859924,"creation_date":1677859924,"question_id":75629442,"body_markdown":"I had used following tutorial to integrate Redis using Lettuce connection in my springboot application. \r\nhttps://blog.tericcabrel.com/data-caching-spring-boot-redis/\r\n\r\nThe good thing about the above approach is I was able to define my own repository methods. Also, was able to set and get my own Objects. That`s what I did  - for a key &quot;id&quot; I set hashmap object as value. I was able to perform a get on &#39;id&#39; and get the object too. \r\n\r\nNow, I am trying to write some integration tests using cucumber - here I cannot create beans so I am using following way to do it - \r\n\r\n        RedisClient redisClient = RedisClient.create(\r\n                    new RedisURI(&quot;myRedisCluster.com&quot;,\r\n                            6379,\r\n                            30,\r\n                            TimeUnit.SECONDS));\r\n    \r\n    StatefulRedisConnection&lt;String, Object&gt; connect = RedisClient.create(new RedisURI(&quot;myRedisCLuster.com&quot;, 6379, 30, TimeUnit.SECONDS)).connect(\r\n                    new RedisCodec&lt;String, Object&gt;() {\r\n                        private Charset charset = Charset.forName(&quot;UTF-8&quot;);\r\n    \r\n                        public String decodeKey(ByteBuffer bytes) {\r\n                            return charset.decode(bytes).toString();\r\n                        }\r\n                        public Object decodeValue(ByteBuffer bytes) {\r\n                            try {\r\n                                byte[] array = new byte[bytes.remaining()];\r\n                                bytes.get(array);\r\n                                ObjectInputStream is = new ObjectInputStream(new ByteArrayInputStream(array));\r\n                                return is.readObject();\r\n                            } catch (Exception e) {\r\n                                return null;\r\n                            }\r\n                        }\r\n                        public ByteBuffer encodeKey(String key) {\r\n                            return charset.encode(key);\r\n                        }\r\n                        public ByteBuffer encodeValue(Object value) {\r\n                            try {\r\n                                ByteArrayOutputStream bytes = new ByteArrayOutputStream();\r\n                                ObjectOutputStream os = new ObjectOutputStream(bytes);\r\n                                os.writeObject(value);\r\n                                return ByteBuffer.wrap(bytes.toByteArray());\r\n                            } catch (IOException e) {\r\n                                return null;\r\n                            }\r\n                        }\r\n                    }\r\n            );\r\n    \r\n            RedisCommands&lt;String, Object&gt; commands = connect.sync();\r\n    \r\n            final Object result = commands.get(Id);\r\n            HashMap&lt;String, String&gt; cacheAccountWalletMap = (HashMap&lt;String, String&gt;) result;\r\n\r\nThe above code can connect to my redis cluster, but get command yeilds Null. I tried simpler way without the serializers and decoders but still I get null back. \r\n\r\nWhat can I do to get it right ?","title":"Redis Lettuce - get object data","body":"<p>I had used following tutorial to integrate Redis using Lettuce connection in my springboot application.\n<a href=\"https://blog.tericcabrel.com/data-caching-spring-boot-redis/\" rel=\"nofollow noreferrer\">https://blog.tericcabrel.com/data-caching-spring-boot-redis/</a></p>\n<p>The good thing about the above approach is I was able to define my own repository methods. Also, was able to set and get my own Objects. That`s what I did  - for a key &quot;id&quot; I set hashmap object as value. I was able to perform a get on 'id' and get the object too.</p>\n<p>Now, I am trying to write some integration tests using cucumber - here I cannot create beans so I am using following way to do it -</p>\n<pre><code>    RedisClient redisClient = RedisClient.create(\n                new RedisURI(&quot;myRedisCluster.com&quot;,\n                        6379,\n                        30,\n                        TimeUnit.SECONDS));\n\nStatefulRedisConnection&lt;String, Object&gt; connect = RedisClient.create(new RedisURI(&quot;myRedisCLuster.com&quot;, 6379, 30, TimeUnit.SECONDS)).connect(\n                new RedisCodec&lt;String, Object&gt;() {\n                    private Charset charset = Charset.forName(&quot;UTF-8&quot;);\n\n                    public String decodeKey(ByteBuffer bytes) {\n                        return charset.decode(bytes).toString();\n                    }\n                    public Object decodeValue(ByteBuffer bytes) {\n                        try {\n                            byte[] array = new byte[bytes.remaining()];\n                            bytes.get(array);\n                            ObjectInputStream is = new ObjectInputStream(new ByteArrayInputStream(array));\n                            return is.readObject();\n                        } catch (Exception e) {\n                            return null;\n                        }\n                    }\n                    public ByteBuffer encodeKey(String key) {\n                        return charset.encode(key);\n                    }\n                    public ByteBuffer encodeValue(Object value) {\n                        try {\n                            ByteArrayOutputStream bytes = new ByteArrayOutputStream();\n                            ObjectOutputStream os = new ObjectOutputStream(bytes);\n                            os.writeObject(value);\n                            return ByteBuffer.wrap(bytes.toByteArray());\n                        } catch (IOException e) {\n                            return null;\n                        }\n                    }\n                }\n        );\n\n        RedisCommands&lt;String, Object&gt; commands = connect.sync();\n\n        final Object result = commands.get(Id);\n        HashMap&lt;String, String&gt; cacheAccountWalletMap = (HashMap&lt;String, String&gt;) result;\n</code></pre>\n<p>The above code can connect to my redis cluster, but get command yeilds Null. I tried simpler way without the serializers and decoders but still I get null back.</p>\n<p>What can I do to get it right ?</p>\n"},{"tags":["java","ftp"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":1,"creation_date":1677840396,"post_id":75625871,"comment_id":133420828,"body_markdown":"filter the list? what&#39;s the problem _exactly_, don&#39;t see you trying _anything_. ..","body":"filter the list? what&#39;s the problem <i>exactly</i>, don&#39;t see you trying <i>anything</i>. .."}],"answers":[{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677859689,"creation_date":1677845566,"answer_id":75626930,"question_id":75625871,"body_markdown":"`listFiles` is overloaded to accept an optional `FTPFileFilter`. This is an interface with a single method, so you can use a lambda for the implementation. For instance:\r\n\r\n```\r\nPattern pattern = Pattern.compile(&quot;whatever you need&quot;);\r\nFTPFile[] remoteFiles = ftpClient.listFiles(remotePath,\r\n        file -&gt; pattern.matcher(file.getName()).matches());\r\n```","title":"Downloading specific files(regex specific files) from FTP folder using java","body":"<p><code>listFiles</code> is overloaded to accept an optional <code>FTPFileFilter</code>. This is an interface with a single method, so you can use a lambda for the implementation. For instance:</p>\n<pre><code>Pattern pattern = Pattern.compile(&quot;whatever you need&quot;);\nFTPFile[] remoteFiles = ftpClient.listFiles(remotePath,\n        file -&gt; pattern.matcher(file.getName()).matches());\n</code></pre>\n"}],"owner":{"account_id":17850963,"reputation":27,"user_id":12966727,"display_name":"TheUnborn"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":101,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1677876156,"answer_count":1,"score":0,"last_activity_date":1677859689,"creation_date":1677839139,"question_id":75625871,"body_markdown":"I am  trying to download files from FTP folder using java but I want to download certain files not all the files. How to add the regex to the code to download the files. \r\n\r\n\r\nright now I am able to download all the files from FTP location. I want to add regex so it downloads specific files.\r\n\r\n\r\n```\r\nprivate static void downloadFolder(\r\n    FTPClient ftpClient, String remotePath, String localPath) throws IOException\r\n{\r\n    System.out.println(&quot;Downloading folder &quot; + remotePath + &quot; to &quot; + localPath);\r\n\r\n    FTPFile[] remoteFiles = ftpClient.listFiles(remotePath);\r\n\r\n    for (FTPFile remoteFile : remoteFiles)\r\n    {\r\n        if (!remoteFile.getName().equals(&quot;.&quot;) &amp;&amp; !remoteFile.getName().equals(&quot;..&quot;))\r\n        {\r\n            String remoteFilePath = remotePath + &quot;/&quot; + remoteFile.getName();\r\n            String localFilePath = localPath + &quot;/&quot; + remoteFile.getName();\r\n\r\n            if (remoteFile.isDirectory())\r\n            {\r\n                new File(localFilePath).mkdirs();\r\n\r\n                downloadFolder(ftpClient, remoteFilePath, localFilePath);\r\n            }\r\n            else\r\n            {\r\n                System.out.println(&quot;Downloading file &quot; + remoteFilePath + &quot; to &quot; +\r\n                    localFilePath);\r\n\r\n                OutputStream outputStream =\r\n                    new BufferedOutputStream(new FileOutputStream(localFilePath));\r\n                if (!ftpClient.retrieveFile(remoteFilePath, outputStream))\r\n                {\r\n                    System.out.println(&quot;Failed to download file &quot; + remoteFilePath);\r\n                }\r\n                outputStream.close();\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n","title":"Downloading specific files(regex specific files) from FTP folder using java","body":"<p>I am  trying to download files from FTP folder using java but I want to download certain files not all the files. How to add the regex to the code to download the files.</p>\n<p>right now I am able to download all the files from FTP location. I want to add regex so it downloads specific files.</p>\n<pre><code>private static void downloadFolder(\n    FTPClient ftpClient, String remotePath, String localPath) throws IOException\n{\n    System.out.println(&quot;Downloading folder &quot; + remotePath + &quot; to &quot; + localPath);\n\n    FTPFile[] remoteFiles = ftpClient.listFiles(remotePath);\n\n    for (FTPFile remoteFile : remoteFiles)\n    {\n        if (!remoteFile.getName().equals(&quot;.&quot;) &amp;&amp; !remoteFile.getName().equals(&quot;..&quot;))\n        {\n            String remoteFilePath = remotePath + &quot;/&quot; + remoteFile.getName();\n            String localFilePath = localPath + &quot;/&quot; + remoteFile.getName();\n\n            if (remoteFile.isDirectory())\n            {\n                new File(localFilePath).mkdirs();\n\n                downloadFolder(ftpClient, remoteFilePath, localFilePath);\n            }\n            else\n            {\n                System.out.println(&quot;Downloading file &quot; + remoteFilePath + &quot; to &quot; +\n                    localFilePath);\n\n                OutputStream outputStream =\n                    new BufferedOutputStream(new FileOutputStream(localFilePath));\n                if (!ftpClient.retrieveFile(remoteFilePath, outputStream))\n                {\n                    System.out.println(&quot;Failed to download file &quot; + remoteFilePath);\n                }\n                outputStream.close();\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","jenkins","groovy","jenkins-groovy"],"comments":[{"owner":{"account_id":1333316,"reputation":26958,"user_id":1276664,"accept_rate":17,"display_name":"daggett"},"score":0,"creation_date":1677849572,"post_id":75627065,"comment_id":133423193,"body_markdown":"It&#39;s not clear what is not working and what is the expected result... Please edit your question and add details.","body":"It&#39;s not clear what is not working and what is the expected result... Please edit your question and add details."}],"answers":[{"tags":[],"owner":{"account_id":4395013,"reputation":1126,"user_id":3582362,"accept_rate":100,"display_name":"Calvin P."},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677859318,"creation_date":1677847802,"answer_id":75627300,"question_id":75627065,"body_markdown":"I believe you&#39;re going for something like this\r\n\r\n    //example list\r\n    def version_list = [&quot;Version-2.2.0.0&quot;,&quot;Version-2.2.1.0&quot;,&quot;Version-2.1.1.0&quot;,&quot;Version-2.1.0.0&quot;,&quot;Version-2.3.0.0&quot;]\r\n    //group by version first 2 digits\r\n    def ver_map = version_list.groupBy{ ver -&gt; ver.substring(8,11) }\r\n\r\n    ver_map.each{ k, v -&gt;\r\n        //prints the lowest (root) version in each set, \r\n        //then determines if any has point version\r\n        println new StringBuilder().append(v.min{it}).append(&quot; &quot;).append(v.any{ \r\n            it.matches(&quot;^Version\\\\-([0-9])\\\\.([0-9])\\\\.([1-9])\\\\.([0-9])\\$&quot;)} \r\n                ? &quot;has a point release!&quot; : &quot;has no point release&quot;)}\r\n\r\nIn this example, prints out\r\n\r\n    Version-2.2.0.0 has a point release!\r\n    Version-2.1.0.0 has a point release!\r\n    Version-2.3.0.0 has no point release","title":"String filtering","body":"<p>I believe you're going for something like this</p>\n<pre><code>//example list\ndef version_list = [&quot;Version-2.2.0.0&quot;,&quot;Version-2.2.1.0&quot;,&quot;Version-2.1.1.0&quot;,&quot;Version-2.1.0.0&quot;,&quot;Version-2.3.0.0&quot;]\n//group by version first 2 digits\ndef ver_map = version_list.groupBy{ ver -&gt; ver.substring(8,11) }\n\nver_map.each{ k, v -&gt;\n    //prints the lowest (root) version in each set, \n    //then determines if any has point version\n    println new StringBuilder().append(v.min{it}).append(&quot; &quot;).append(v.any{ \n        it.matches(&quot;^Version\\\\-([0-9])\\\\.([0-9])\\\\.([1-9])\\\\.([0-9])\\$&quot;)} \n            ? &quot;has a point release!&quot; : &quot;has no point release&quot;)}\n</code></pre>\n<p>In this example, prints out</p>\n<pre><code>Version-2.2.0.0 has a point release!\nVersion-2.1.0.0 has a point release!\nVersion-2.3.0.0 has no point release\n</code></pre>\n"}],"owner":{"account_id":19313347,"reputation":87,"user_id":14118611,"display_name":"Angelo Uitz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1677923595,"accepted_answer_id":75627300,"answer_count":1,"score":1,"last_activity_date":1677859318,"creation_date":1677846440,"question_id":75627065,"body_markdown":"I have a Java like Groovy script, using for Jenkins Pipelines. \r\n\r\nIn there I have the following scenario. \r\nThere&#39;s a ArrayList with Strings, specifying versions of a script, such as:\r\n\r\n    def version_list = [] as ArrayList&lt;String&gt;\r\n    -&gt; [Version-2.5.0.0, Version-2.4.0.0, Version-2.3.1.0, Version-2.3.0.0, Version-2.0.0.0]\r\n    \r\nThis list is fixed and cannot be modified.\r\nI am iterating over the list to get each element, to do some processing.\r\n\r\nAdditionally I need to check for each element, if there is a point release of the same version i.e.:\r\n\r\n       version_list.each{each_version -&gt; //each_version = Version-2.3.0.0\r\n                        if(version_list.contains(2.3.x.0)){ //while x!=0\r\n                           print(&quot;Version &quot; + each_version + &quot;has point_release&quot;)\r\n                        }\r\n                    }\r\n\r\nI already tried the following, but this is not working. \r\n\r\n     def version_list = [] as ArrayList&lt;String&gt;\r\n     def splitted_ver = [] as ArrayList&lt;String&gt;\r\n     \r\n     version_list.each{each_version -&gt;\r\n                            splitted_ver = each_version.split(&quot;\\\\.&quot;)\r\n                            if (version_list.contains(&quot;^&quot; + splitted_ver[0] + &quot;.&quot; +  splitted_ver[1] + &quot;(.([1-9]+)\\\\.([0-9]+)\\$)&quot;)){\r\n                                print(each_version + &quot; has a point_release!&quot;)   \r\n                            }else{\r\n                                print(&quot;has no point_release&quot;)\r\n                            }\r\n                        }\r\n","title":"String filtering","body":"<p>I have a Java like Groovy script, using for Jenkins Pipelines.</p>\n<p>In there I have the following scenario.\nThere's a ArrayList with Strings, specifying versions of a script, such as:</p>\n<pre><code>def version_list = [] as ArrayList&lt;String&gt;\n-&gt; [Version-2.5.0.0, Version-2.4.0.0, Version-2.3.1.0, Version-2.3.0.0, Version-2.0.0.0]\n</code></pre>\n<p>This list is fixed and cannot be modified.\nI am iterating over the list to get each element, to do some processing.</p>\n<p>Additionally I need to check for each element, if there is a point release of the same version i.e.:</p>\n<pre><code>   version_list.each{each_version -&gt; //each_version = Version-2.3.0.0\n                    if(version_list.contains(2.3.x.0)){ //while x!=0\n                       print(&quot;Version &quot; + each_version + &quot;has point_release&quot;)\n                    }\n                }\n</code></pre>\n<p>I already tried the following, but this is not working.</p>\n<pre><code> def version_list = [] as ArrayList&lt;String&gt;\n def splitted_ver = [] as ArrayList&lt;String&gt;\n \n version_list.each{each_version -&gt;\n                        splitted_ver = each_version.split(&quot;\\\\.&quot;)\n                        if (version_list.contains(&quot;^&quot; + splitted_ver[0] + &quot;.&quot; +  splitted_ver[1] + &quot;(.([1-9]+)\\\\.([0-9]+)\\$)&quot;)){\n                            print(each_version + &quot; has a point_release!&quot;)   \n                        }else{\n                            print(&quot;has no point_release&quot;)\n                        }\n                    }\n</code></pre>\n"},{"tags":["java","spring","configuration","redis"],"comments":[{"owner":{"account_id":3505777,"reputation":1260,"user_id":2931342,"accept_rate":75,"display_name":"Shrikant Havale"},"score":0,"creation_date":1449840719,"post_id":34201135,"comment_id":56193387,"body_markdown":"currently doing by using `@Value` annotation, any better suggestions","body":"currently doing by using <code>@Value</code> annotation, any better suggestions"}],"answers":[{"tags":[],"owner":{"account_id":3572434,"reputation":6241,"user_id":2982437,"accept_rate":59,"display_name":"Nick Bondarenko"},"down_vote_count":0,"up_vote_count":41,"is_accepted":true,"score":41,"last_activity_date":1450778126,"creation_date":1450337638,"answer_id":34329008,"question_id":34201135,"body_markdown":"You can use `@PropertySource` to read options from application.properties or other property file you want. Please look [PropertySource usage example][1] and working [example of usage spring-redis-cache][2]. Or look at this small sample:\r\n\r\n    @Configuration\r\n    @PropertySource(&quot;application.properties&quot;)\r\n    public class SpringSessionRedisConfiguration {\r\n\r\n  \t    @Value(&quot;${redis.hostname}&quot;)\r\n     \tprivate String redisHostName;\r\n\r\n\t    @Value(&quot;${redis.port}&quot;)\r\n    \tprivate int redisPort;\r\n\r\n   \t    @Bean\r\n     \tpublic static PropertySourcesPlaceholderConfigurer    propertySourcesPlaceholderConfigurer() {\r\n     \t\treturn new PropertySourcesPlaceholderConfigurer();\r\n    \t}\r\n\r\n\t\t@Bean\r\n\t\tJedisConnectionFactory jedisConnectionFactory() {\r\n\t\t\tJedisConnectionFactory factory = new JedisConnectionFactory();\r\n\t\t\tfactory.setHostName(redisHostName);\r\n\t\t\tfactory.setPort(redisPort);\r\n\t\t\tfactory.setUsePool(true);\r\n\t\t\treturn factory;\r\n\t\t}\r\n\r\n\t\t@Bean\r\n\t\tRedisTemplate&lt;Object, Object&gt; redisTemplate() {\r\n\t\t\tRedisTemplate&lt;Object, Object&gt; redisTemplate = new RedisTemplate&lt;Object, Object&gt;();\r\n\t\t\tredisTemplate.setConnectionFactory(jedisConnectionFactory());\r\n\t\t\treturn redisTemplate;\r\n\t\t}\r\n\r\n\t\t@Bean\r\n\t\tRedisCacheManager cacheManager() {\r\n\t\t\tRedisCacheManager redisCacheManager = new RedisCacheManager(redisTemplate());\r\n\t\t\treturn redisCacheManager;\r\n\t\t}\r\n\t}\r\n\r\nIn present time (**december 2015**) the *spring.redis.sentinel* options in `application.properties` has limited support of `RedisSentinelConfiguration`:\r\n\r\n&gt; Please note that currently only [Jedis][3] and lettuce [Lettuce][4] support Redis Sentinel.\r\n\r\nYou may read more about this in [official documentation][5]. \r\n\r\n\r\n  [1]: http://www.mkyong.com/spring/spring-propertysources-example/\r\n  [2]: https://github.com/matheustardivo/spring-redis-cache/blob/master/src/main/java/net/tardivo/spring/redis/cache/SpringConfiguration.java\r\n  [3]: http://github.com/xetorthio/jedis\r\n  [4]: http://github.com/mp911de/lettuce\r\n  [5]: http://docs.spring.io/spring-data/redis/docs/current/reference/html/#redis:sentinel","title":"Spring Redis - Read configuration from application.properties file","body":"<p>You can use <code>@PropertySource</code> to read options from application.properties or other property file you want. Please look <a href=\"http://www.mkyong.com/spring/spring-propertysources-example/\" rel=\"noreferrer\">PropertySource usage example</a> and working <a href=\"https://github.com/matheustardivo/spring-redis-cache/blob/master/src/main/java/net/tardivo/spring/redis/cache/SpringConfiguration.java\" rel=\"noreferrer\">example of usage spring-redis-cache</a>. Or look at this small sample:</p>\n\n<pre><code>@Configuration\n@PropertySource(\"application.properties\")\npublic class SpringSessionRedisConfiguration {\n\n    @Value(\"${redis.hostname}\")\n    private String redisHostName;\n\n    @Value(\"${redis.port}\")\n    private int redisPort;\n\n    @Bean\n    public static PropertySourcesPlaceholderConfigurer    propertySourcesPlaceholderConfigurer() {\n        return new PropertySourcesPlaceholderConfigurer();\n    }\n\n    @Bean\n    JedisConnectionFactory jedisConnectionFactory() {\n        JedisConnectionFactory factory = new JedisConnectionFactory();\n        factory.setHostName(redisHostName);\n        factory.setPort(redisPort);\n        factory.setUsePool(true);\n        return factory;\n    }\n\n    @Bean\n    RedisTemplate&lt;Object, Object&gt; redisTemplate() {\n        RedisTemplate&lt;Object, Object&gt; redisTemplate = new RedisTemplate&lt;Object, Object&gt;();\n        redisTemplate.setConnectionFactory(jedisConnectionFactory());\n        return redisTemplate;\n    }\n\n    @Bean\n    RedisCacheManager cacheManager() {\n        RedisCacheManager redisCacheManager = new RedisCacheManager(redisTemplate());\n        return redisCacheManager;\n    }\n}\n</code></pre>\n\n<p>In present time (<strong>december 2015</strong>) the <em>spring.redis.sentinel</em> options in <code>application.properties</code> has limited support of <code>RedisSentinelConfiguration</code>:</p>\n\n<blockquote>\n  <p>Please note that currently only <a href=\"http://github.com/xetorthio/jedis\" rel=\"noreferrer\">Jedis</a> and lettuce <a href=\"http://github.com/mp911de/lettuce\" rel=\"noreferrer\">Lettuce</a> support Redis Sentinel.</p>\n</blockquote>\n\n<p>You may read more about this in <a href=\"http://docs.spring.io/spring-data/redis/docs/current/reference/html/#redis:sentinel\" rel=\"noreferrer\">official documentation</a>. </p>\n"},{"tags":[],"owner":{"account_id":3581078,"reputation":374,"user_id":2989287,"display_name":"Wheelchair Geek"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1450544014,"creation_date":1450544014,"answer_id":34373114,"question_id":34201135,"body_markdown":"I found this within the spring boot doc section 24 paragraph 7\r\n\r\n    @Component\r\n    @ConfigurationProperties(prefix=&quot;connection&quot;)\r\n    public class ConnectionSettings {\r\n    \r\n        private String username;\r\n    \r\n        private InetAddress remoteAddress;\r\n    \r\n        // ... getters and setters\r\n    \r\n    } \r\n\r\nProperties can then be modified via connection.property \r\n\r\nReference link: https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config-typesafe-configuration-properties  ","title":"Spring Redis - Read configuration from application.properties file","body":"<p>I found this within the spring boot doc section 24 paragraph 7</p>\n\n<pre><code>@Component\n@ConfigurationProperties(prefix=\"connection\")\npublic class ConnectionSettings {\n\n    private String username;\n\n    private InetAddress remoteAddress;\n\n    // ... getters and setters\n\n} \n</code></pre>\n\n<p>Properties can then be modified via connection.property </p>\n\n<p>Reference link: <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config-typesafe-configuration-properties\" rel=\"nofollow\">https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config-typesafe-configuration-properties</a>  </p>\n"},{"tags":[],"owner":{"account_id":3581078,"reputation":374,"user_id":2989287,"display_name":"Wheelchair Geek"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1450564340,"creation_date":1450564340,"answer_id":34376070,"question_id":34201135,"body_markdown":"Upon looking deeper I found this, could it be what you are looking for?  \r\n\r\n    # REDIS (RedisProperties)\r\n    spring.redis.database=0 # Database index used by the connection factory.\r\n    spring.redis.host=localhost # Redis server host.\r\n    spring.redis.password= # Login password of the redis server.\r\n    spring.redis.pool.max-active=8 # Max number of connections that can be allocated by the pool at a given time. Use a negative value for no limit.\r\n    spring.redis.pool.max-idle=8 # Max number of &quot;idle&quot; connections in the pool. Use a negative value to indicate an unlimited number of idle connections.\r\n    spring.redis.pool.max-wait=-1 # Maximum amount of time (in milliseconds) a connection allocation should block before throwing an exception when the pool is exhausted. Use a negative value to block indefinitely.\r\n    spring.redis.pool.min-idle=0 # Target for the minimum number of idle connections to maintain in the pool. This setting only has an effect if it is positive.\r\n    spring.redis.port=6379 # Redis server port.\r\n    spring.redis.sentinel.master= # Name of Redis server.\r\n    spring.redis.sentinel.nodes= # Comma-separated list of host:port pairs.\r\n    spring.redis.timeout=0 # Connection timeout in milliseconds. \r\n\r\n \r\nRefernce:https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html Searchterm Redis \r\n\r\nFrom what I can see the values already exist and are defined as \r\n\r\n    spring.redis.host=localhost # Redis server host.\r\n    spring.redis.port=6379 # Redis server port.\r\n\r\nif you want to create your own properties you can look at my previous post in this thread.    ","title":"Spring Redis - Read configuration from application.properties file","body":"<p>Upon looking deeper I found this, could it be what you are looking for?  </p>\n\n<pre><code># REDIS (RedisProperties)\nspring.redis.database=0 # Database index used by the connection factory.\nspring.redis.host=localhost # Redis server host.\nspring.redis.password= # Login password of the redis server.\nspring.redis.pool.max-active=8 # Max number of connections that can be allocated by the pool at a given time. Use a negative value for no limit.\nspring.redis.pool.max-idle=8 # Max number of \"idle\" connections in the pool. Use a negative value to indicate an unlimited number of idle connections.\nspring.redis.pool.max-wait=-1 # Maximum amount of time (in milliseconds) a connection allocation should block before throwing an exception when the pool is exhausted. Use a negative value to block indefinitely.\nspring.redis.pool.min-idle=0 # Target for the minimum number of idle connections to maintain in the pool. This setting only has an effect if it is positive.\nspring.redis.port=6379 # Redis server port.\nspring.redis.sentinel.master= # Name of Redis server.\nspring.redis.sentinel.nodes= # Comma-separated list of host:port pairs.\nspring.redis.timeout=0 # Connection timeout in milliseconds. \n</code></pre>\n\n<p>Refernce:<a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html\" rel=\"noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html</a> Searchterm Redis </p>\n\n<p>From what I can see the values already exist and are defined as </p>\n\n<pre><code>spring.redis.host=localhost # Redis server host.\nspring.redis.port=6379 # Redis server port.\n</code></pre>\n\n<p>if you want to create your own properties you can look at my previous post in this thread.    </p>\n"},{"tags":[],"owner":{"account_id":2558390,"reputation":3993,"user_id":2219920,"accept_rate":71,"display_name":"Pulkit"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1450588900,"creation_date":1450588900,"answer_id":34378234,"question_id":34201135,"body_markdown":"I think this what you are looking for\r\nhttp://docs.spring.io/spring-session/docs/current/reference/html5/guides/boot.html","title":"Spring Redis - Read configuration from application.properties file","body":"<p>I think this what you are looking for\n<a href=\"http://docs.spring.io/spring-session/docs/current/reference/html5/guides/boot.html\" rel=\"nofollow\">http://docs.spring.io/spring-session/docs/current/reference/html5/guides/boot.html</a></p>\n"},{"tags":[],"owner":{"account_id":5959209,"reputation":34,"user_id":4684871,"display_name":"Kylo Zhang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1465969296,"creation_date":1465969296,"answer_id":37826997,"question_id":34201135,"body_markdown":"You can use the ResourcePropertySource to generate a PropertySource object.\r\n\r\n    PropertySource propertySource = new ResourcePropertySource(&quot;path/to/your/application.properties&quot;);\r\n\r\nThen pass it to the constructor of the RedisSentinelConfiguration.","title":"Spring Redis - Read configuration from application.properties file","body":"<p>You can use the ResourcePropertySource to generate a PropertySource object.</p>\n\n<pre><code>PropertySource propertySource = new ResourcePropertySource(\"path/to/your/application.properties\");\n</code></pre>\n\n<p>Then pass it to the constructor of the RedisSentinelConfiguration.</p>\n"},{"tags":[],"owner":{"account_id":9682826,"reputation":3,"user_id":7183814,"display_name":"Andy"},"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1479598502,"creation_date":1479598502,"answer_id":40699080,"question_id":34201135,"body_markdown":"    @Autowired\r\n    private JedisConnectionFactory connectionFactory;\r\n\r\n    @Bean\r\n    JedisConnectionFactory connectionFactory() {\r\n        return connectionFactory\r\n    }","title":"Spring Redis - Read configuration from application.properties file","body":"<pre><code>@Autowired\nprivate JedisConnectionFactory connectionFactory;\n\n@Bean\nJedisConnectionFactory connectionFactory() {\n    return connectionFactory\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10074485,"reputation":71,"user_id":7447076,"display_name":"Kelevra"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1497617845,"creation_date":1497617845,"answer_id":44589819,"question_id":34201135,"body_markdown":"Here is an elegant solution to solve your issue :\r\n\r\n    @Configuration\r\n    @PropertySource(name=&quot;application&quot;, value=&quot;classpath:application.properties&quot;)\r\n    public class SpringSessionRedisConfiguration {\r\n    \r\n        @Resource\r\n        ConfigurableEnvironment environment;\r\n        \r\n        @Bean\r\n        public PropertiesPropertySource propertySource() {\r\n            return (PropertiesPropertySource) environment.getPropertySources().get(&quot;application&quot;);\r\n        }\r\n        \r\n        @Bean\r\n        public JedisConnectionFactory jedisConnectionFactory() {\r\n            return new JedisConnectionFactory(sentinelConfiguration(), poolConfiguration());\r\n        }\r\n        \r\n        @Bean\r\n        public RedisSentinelConfiguration sentinelConfiguration() {\r\n            return new RedisSentinelConfiguration(propertySource());\r\n        }\r\n        \r\n        @Bean\r\n        public JedisPoolConfig poolConfiguration() {\r\n            JedisPoolConfiguration config = new JedisPoolConfiguration();\r\n            // add your customized configuration if needed\r\n            return config;\r\n        }\r\n        \r\n        @Bean\r\n        RedisTemplate&lt;Object, Object&gt; redisTemplate() {\r\n            RedisTemplate&lt;Object, Object&gt; redisTemplate = new RedisTemplate&lt;Object, Object&gt;();\r\n            redisTemplate.setConnectionFactory(jedisConnectionFactory());\r\n            return redisTemplate;\r\n        }\r\n        \r\n        @Bean\r\n        RedisCacheManager cacheManager() {\r\n            return new RedisCacheManager(redisTemplate());\r\n        }\r\n    \r\n    }\r\n\r\nso, to resume :\r\n\r\n - add a specific name for the @PropertySource\r\n - inject a ConfigurableEnvironment instead of Environment\r\n - get the PropertiesPropertySource in your ConfigurableEnvironment using the name you mentioned on your @PropertySource\r\n - Use this PropertySource object to construct your RedisSentinelConfiguration object\r\n - Don&#39;t forget to add &#39;spring.redis.sentinel.master&#39; and &#39;spring.redis.sentinel.nodes&#39; properties in you property file\r\n\r\nTested in my workspace,\r\nRegards","title":"Spring Redis - Read configuration from application.properties file","body":"<p>Here is an elegant solution to solve your issue :</p>\n\n<pre><code>@Configuration\n@PropertySource(name=\"application\", value=\"classpath:application.properties\")\npublic class SpringSessionRedisConfiguration {\n\n    @Resource\n    ConfigurableEnvironment environment;\n\n    @Bean\n    public PropertiesPropertySource propertySource() {\n        return (PropertiesPropertySource) environment.getPropertySources().get(\"application\");\n    }\n\n    @Bean\n    public JedisConnectionFactory jedisConnectionFactory() {\n        return new JedisConnectionFactory(sentinelConfiguration(), poolConfiguration());\n    }\n\n    @Bean\n    public RedisSentinelConfiguration sentinelConfiguration() {\n        return new RedisSentinelConfiguration(propertySource());\n    }\n\n    @Bean\n    public JedisPoolConfig poolConfiguration() {\n        JedisPoolConfiguration config = new JedisPoolConfiguration();\n        // add your customized configuration if needed\n        return config;\n    }\n\n    @Bean\n    RedisTemplate&lt;Object, Object&gt; redisTemplate() {\n        RedisTemplate&lt;Object, Object&gt; redisTemplate = new RedisTemplate&lt;Object, Object&gt;();\n        redisTemplate.setConnectionFactory(jedisConnectionFactory());\n        return redisTemplate;\n    }\n\n    @Bean\n    RedisCacheManager cacheManager() {\n        return new RedisCacheManager(redisTemplate());\n    }\n\n}\n</code></pre>\n\n<p>so, to resume :</p>\n\n<ul>\n<li>add a specific name for the @PropertySource</li>\n<li>inject a ConfigurableEnvironment instead of Environment</li>\n<li>get the PropertiesPropertySource in your ConfigurableEnvironment using the name you mentioned on your @PropertySource</li>\n<li>Use this PropertySource object to construct your RedisSentinelConfiguration object</li>\n<li>Don't forget to add 'spring.redis.sentinel.master' and 'spring.redis.sentinel.nodes' properties in you property file</li>\n</ul>\n\n<p>Tested in my workspace,\nRegards</p>\n"},{"tags":[],"owner":{"account_id":13840774,"reputation":11,"user_id":9991177,"display_name":"tarun goel"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1529982382,"creation_date":1529959418,"answer_id":51031521,"question_id":34201135,"body_markdown":"Use `@DirtiesContext(classMode = classmode.AFTER_CLASS)` at each test class. This will surely work for you.","title":"Spring Redis - Read configuration from application.properties file","body":"<p>Use <code>@DirtiesContext(classMode = classmode.AFTER_CLASS)</code> at each test class. This will surely work for you.</p>\n"},{"tags":[],"owner":{"account_id":3392016,"reputation":121,"user_id":2846650,"display_name":"user2846650"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1539277844,"creation_date":1539277844,"answer_id":52765571,"question_id":34201135,"body_markdown":"This works for me :\r\n\r\n    @Configuration\r\n    @EnableRedisRepositories\r\n    public class RedisConfig {\r\n\r\n        @Bean\r\n        public JedisConnectionFactory jedisConnectionFactory() {\r\n            RedisProperties properties = redisProperties();\r\n            RedisStandaloneConfiguration configuration = new RedisStandaloneConfiguration();\r\n            configuration.setHostName(properties.getHost());\r\n            configuration.setPort(properties.getPort());\r\n\r\n            return new JedisConnectionFactory(configuration);\r\n        }\r\n\r\n        @Bean\r\n        public RedisTemplate&lt;String, Object&gt; redisTemplate() {\r\n            final RedisTemplate&lt;String, Object&gt; template = new RedisTemplate&lt;&gt;();\r\n            template.setConnectionFactory(jedisConnectionFactory());\r\n            template.setValueSerializer(new GenericToStringSerializer&lt;&gt;(Object.class));\r\n            return template;\r\n        }\r\n\r\n        @Bean\r\n        @Primary\r\n        public RedisProperties redisProperties() {\r\n            return new RedisProperties();\r\n        }\r\n\r\n    }\r\n\r\nand properties file :\r\n\r\n    spring.redis.host=localhost\r\n    spring.redis.port=6379\r\n","title":"Spring Redis - Read configuration from application.properties file","body":"<p>This works for me :</p>\n\n<pre><code>@Configuration\n@EnableRedisRepositories\npublic class RedisConfig {\n\n    @Bean\n    public JedisConnectionFactory jedisConnectionFactory() {\n        RedisProperties properties = redisProperties();\n        RedisStandaloneConfiguration configuration = new RedisStandaloneConfiguration();\n        configuration.setHostName(properties.getHost());\n        configuration.setPort(properties.getPort());\n\n        return new JedisConnectionFactory(configuration);\n    }\n\n    @Bean\n    public RedisTemplate&lt;String, Object&gt; redisTemplate() {\n        final RedisTemplate&lt;String, Object&gt; template = new RedisTemplate&lt;&gt;();\n        template.setConnectionFactory(jedisConnectionFactory());\n        template.setValueSerializer(new GenericToStringSerializer&lt;&gt;(Object.class));\n        return template;\n    }\n\n    @Bean\n    @Primary\n    public RedisProperties redisProperties() {\n        return new RedisProperties();\n    }\n\n}\n</code></pre>\n\n<p>and properties file :</p>\n\n<pre><code>spring.redis.host=localhost\nspring.redis.port=6379\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27928589,"reputation":11,"user_id":21327165,"display_name":"Piotr Adamczuk"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677858852,"creation_date":1677858852,"answer_id":75629261,"question_id":34201135,"body_markdown":"Property prefix spring.redis is no longer valid currently spring uses: spring.data.redis prefix","title":"Spring Redis - Read configuration from application.properties file","body":"<p>Property prefix spring.redis is no longer valid currently spring uses: spring.data.redis prefix</p>\n"}],"owner":{"account_id":3505777,"reputation":1260,"user_id":2931342,"accept_rate":75,"display_name":"Shrikant Havale"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":101936,"favorite_count":0,"down_vote_count":0,"up_vote_count":30,"accepted_answer_id":34329008,"answer_count":10,"score":30,"last_activity_date":1677858852,"creation_date":1449748206,"question_id":34201135,"body_markdown":"I have Spring Redis working using `spring-data-redis` with all default configuration likes `localhost` default `port` and so on.\n\nNow I am trying to make the same configuration by configuring it in `application.properties` file. But I cannot figure out how should I create beans exactly that my property values are read.\n\nRedis Configuration File\n\n    @EnableRedisHttpSession\n    @Configuration\n    public class SpringSessionRedisConfiguration {\n\n    @Bean\n    JedisConnectionFactory connectionFactory() {\n        return new JedisConnectionFactory();\n    }\n\n    @Autowired\n    @Bean\n    RedisCacheManager redisCacheManager(final StringRedisTemplate stringRedisTemplate) {\n        return new RedisCacheManager(stringRedisTemplate);\n    }\n\n    @Autowired\n    @Bean\n    StringRedisTemplate template(final RedisConnectionFactory connectionFactory) {\n        return new StringRedisTemplate(connectionFactory);\n    }\n    }\n\nStandard Parameters in application.properties\n\n&gt; spring.redis.sentinel.master=themaster\n&gt;\n&gt; spring.redis.sentinel.nodes=192.168.188.231:26379\n&gt;\n&gt; spring.redis.password=12345\n\nWhat I tried,\n\n 1. I can possibly use `@PropertySource` and then inject `@Value` and get the values. But I don&#39;t want to do that as those properties are not defined by me but are from Spring.\n 2. In this documentation [Spring Redis Documentation][1], it only says that it can be configured using properties but doesn&#39;t show concrete example.\n 3. I also went through Spring Data Redis API classes, and found that `RedisProperties` should help me, but still cannot figure out how exactly to tell Spring to read from properties file.\n\n  [1]: http://docs.spring.io/spring-data/data-redis/docs/current/reference/pdf/spring-data-redis-reference.pdf","title":"Spring Redis - Read configuration from application.properties file","body":"<p>I have Spring Redis working using <code>spring-data-redis</code> with all default configuration likes <code>localhost</code> default <code>port</code> and so on.</p>\n<p>Now I am trying to make the same configuration by configuring it in <code>application.properties</code> file. But I cannot figure out how should I create beans exactly that my property values are read.</p>\n<p>Redis Configuration File</p>\n<pre><code>@EnableRedisHttpSession\n@Configuration\npublic class SpringSessionRedisConfiguration {\n\n@Bean\nJedisConnectionFactory connectionFactory() {\n    return new JedisConnectionFactory();\n}\n\n@Autowired\n@Bean\nRedisCacheManager redisCacheManager(final StringRedisTemplate stringRedisTemplate) {\n    return new RedisCacheManager(stringRedisTemplate);\n}\n\n@Autowired\n@Bean\nStringRedisTemplate template(final RedisConnectionFactory connectionFactory) {\n    return new StringRedisTemplate(connectionFactory);\n}\n}\n</code></pre>\n<p>Standard Parameters in application.properties</p>\n<blockquote>\n<p>spring.redis.sentinel.master=themaster</p>\n<p>spring.redis.sentinel.nodes=192.168.188.231:26379</p>\n<p>spring.redis.password=12345</p>\n</blockquote>\n<p>What I tried,</p>\n<ol>\n<li>I can possibly use <code>@PropertySource</code> and then inject <code>@Value</code> and get the values. But I don't want to do that as those properties are not defined by me but are from Spring.</li>\n<li>In this documentation <a href=\"http://docs.spring.io/spring-data/data-redis/docs/current/reference/pdf/spring-data-redis-reference.pdf\" rel=\"noreferrer\">Spring Redis Documentation</a>, it only says that it can be configured using properties but doesn't show concrete example.</li>\n<li>I also went through Spring Data Redis API classes, and found that <code>RedisProperties</code> should help me, but still cannot figure out how exactly to tell Spring to read from properties file.</li>\n</ol>\n"},{"tags":["java","google-app-engine","jpa","spring-data","spring-boot"],"comments":[{"owner":{"account_id":412334,"reputation":33758,"user_id":785349,"accept_rate":94,"display_name":"quarks"},"score":0,"creation_date":1402035802,"post_id":24074749,"comment_id":37127106,"body_markdown":"If I comment out the @EnableAutoConfiguration I get: [INFO] WARNING: failed metricFilter: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named &#39;metricFilter&#39; is defined","body":"If I comment out the @EnableAutoConfiguration I get: [INFO] WARNING: failed metricFilter: org.springframework.beans.factory.NoSuchBeanDefinitionExcept&zwnj;&#8203;ion: No bean named &#39;metricFilter&#39; is defined"},{"owner":{"account_id":412334,"reputation":33758,"user_id":785349,"accept_rate":94,"display_name":"quarks"},"score":0,"creation_date":1402041034,"post_id":24074749,"comment_id":37129545,"body_markdown":"Here is the complete code: http://bit.ly/1i53oAq","body":"Here is the complete code: <a href=\"http://bit.ly/1i53oAq\" rel=\"nofollow noreferrer\">bit.ly/1i53oAq</a>"},{"owner":{"account_id":83518,"reputation":6215,"user_id":234110,"accept_rate":67,"display_name":"Anand Rockzz"},"score":0,"creation_date":1483157630,"post_id":24074749,"comment_id":70013734,"body_markdown":"In my case it was [spring-boot-starter-data-jpa](http://stackoverflow.com/a/37554576/234110)","body":"In my case it was <a href=\"http://stackoverflow.com/a/37554576/234110\">spring-boot-starter-data-jpa</a>"}],"answers":[{"tags":[],"owner":{"account_id":1473276,"reputation":110999,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"down_vote_count":2,"up_vote_count":193,"is_accepted":true,"score":191,"last_activity_date":1512043526,"creation_date":1402070590,"answer_id":24086178,"question_id":24074749,"body_markdown":"You haven&#39;t provided Spring Boot with enough information to auto-configure a `DataSource`. To do so, you&#39;ll need to add some properties to `application.properties` with the `spring.datasource` prefix. Take a look at [DataSourceProperties](https://github.com/spring-projects/spring-boot/blob/master/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/jdbc/DataSourceProperties.java) to see all of the properties that you can set. \r\n\r\nYou&#39;ll need to provide the appropriate url and driver class name:\r\n\r\n    spring.datasource.url = …\r\n    spring.datasource.driver-class-name = …","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>You haven't provided Spring Boot with enough information to auto-configure a <code>DataSource</code>. To do so, you'll need to add some properties to <code>application.properties</code> with the <code>spring.datasource</code> prefix. Take a look at <a href=\"https://github.com/spring-projects/spring-boot/blob/master/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/jdbc/DataSourceProperties.java\" rel=\"noreferrer\">DataSourceProperties</a> to see all of the properties that you can set. </p>\n\n<p>You'll need to provide the appropriate url and driver class name:</p>\n\n<pre><code>spring.datasource.url = …\nspring.datasource.driver-class-name = …\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1473276,"reputation":110999,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"down_vote_count":1,"up_vote_count":21,"is_accepted":false,"score":20,"last_activity_date":1402080174,"creation_date":1402073932,"answer_id":24087111,"question_id":24074749,"body_markdown":"Now that I look closer, I think that the DataSource problem is a red-herring. Boot&#39;s Hibernate auto-configuration is being triggered and that&#39;s what causing a DataSource to be required. Hibernate&#39;s on the classpath because you&#39;ve got a dependency on `spring-boot-starter-data-jpa` which pulls in `hibernate-entitymanager`.\r\n\r\nUpdate your `spring-boot-starter-data-jpa` dependency to exclude Hibernate:\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;exclusions&gt;\r\n            &lt;exclusion&gt;\r\n                &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n                &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n            &lt;/exclusion&gt;\r\n        &lt;/exclusions&gt;\r\n    &lt;/dependency&gt;","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>Now that I look closer, I think that the DataSource problem is a red-herring. Boot's Hibernate auto-configuration is being triggered and that's what causing a DataSource to be required. Hibernate's on the classpath because you've got a dependency on <code>spring-boot-starter-data-jpa</code> which pulls in <code>hibernate-entitymanager</code>.</p>\n\n<p>Update your <code>spring-boot-starter-data-jpa</code> dependency to exclude Hibernate:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":341413,"reputation":4448,"user_id":672009,"accept_rate":79,"display_name":"user672009"},"down_vote_count":4,"up_vote_count":125,"is_accepted":false,"score":121,"last_activity_date":1549650839,"creation_date":1408194098,"answer_id":25340415,"question_id":24074749,"body_markdown":"If you want to use embedded H2 database from Spring Boot starter add the below dependency to your pom file.\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.3.156&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nBut as mentioned in comments, the embedded H2 database keeps data in memory and doesn&#39;t stores it permanently.","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>If you want to use embedded H2 database from Spring Boot starter add the below dependency to your pom file.</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n        &lt;artifactId&gt;h2&lt;/artifactId&gt;\n        &lt;version&gt;1.3.156&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p>But as mentioned in comments, the embedded H2 database keeps data in memory and doesn't stores it permanently.</p>\n"},{"tags":[],"owner":{"account_id":4690037,"reputation":31,"user_id":3796391,"display_name":"user3796391"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1420618089,"creation_date":1420618089,"answer_id":27814926,"question_id":24074749,"body_markdown":"In my case , I put it a maven dependency for org.jasig.cas in my pom that triggered a hibernate dependency and that caused Spring Boot to look for a datasource to auto-configure hibernate persistence.\r\nI solved it by adding the com.h2database maven dependency as suggested by user672009. Thanks guys!","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>In my case , I put it a maven dependency for org.jasig.cas in my pom that triggered a hibernate dependency and that caused Spring Boot to look for a datasource to auto-configure hibernate persistence.\nI solved it by adding the com.h2database maven dependency as suggested by user672009. Thanks guys!</p>\n"},{"tags":[],"owner":{"account_id":5730744,"reputation":186,"user_id":4526369,"display_name":"Arturo Araya"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1509618156,"creation_date":1425930410,"answer_id":28950546,"question_id":24074749,"body_markdown":"From the [Spring manual][1].\n\n&gt;Spring Boot can auto-configure embedded H2, HSQL, and Derby databases. You don’t need to provide any connection URLs, simply include a build dependency to the embedded database that you want to use.\n&gt;\n&gt;For example, typical POM dependencies would be:\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\n        &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n\nFor me leaving out the spring-boot-starter-data-jpa dependency and just using the spring-boot-starter-jdbc dependency worked like a charm, as long as I had h2 (or hsqldb) included as dependencies.\n\n\n  [1]: http://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-sql.html#boot-features-embedded-database-support","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>From the <a href=\"http://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-sql.html#boot-features-embedded-database-support\" rel=\"noreferrer\">Spring manual</a>.</p>\n<blockquote>\n<p>Spring Boot can auto-configure embedded H2, HSQL, and Derby databases. You don’t need to provide any connection URLs, simply include a build dependency to the embedded database that you want to use.</p>\n<p>For example, typical POM dependencies would be:</p>\n</blockquote>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\n    &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>For me leaving out the spring-boot-starter-data-jpa dependency and just using the spring-boot-starter-jdbc dependency worked like a charm, as long as I had h2 (or hsqldb) included as dependencies.</p>\n"},{"tags":[],"owner":{"account_id":3475520,"reputation":129,"user_id":2908829,"display_name":"bcsshdha"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1434480796,"creation_date":1434480796,"answer_id":30875876,"question_id":24074749,"body_markdown":"I don&#39;t if it is too late to answer. \r\nI could solve this issue by excluding DataSourceAutoConfiguration from spring boot.","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>I don't if it is too late to answer. \nI could solve this issue by excluding DataSourceAutoConfiguration from spring boot.</p>\n"},{"tags":[],"owner":{"account_id":1199784,"reputation":18304,"user_id":1170677,"accept_rate":54,"display_name":"Adelin"},"down_vote_count":1,"up_vote_count":97,"is_accepted":false,"score":96,"last_activity_date":1439987325,"creation_date":1439987325,"answer_id":32095553,"question_id":24074749,"body_markdown":"I&#39;d the same problem and excluding the DataSourceAutoConfiguration solved the problem. \r\n\r\n    @SpringBootApplication\r\n    @EnableAutoConfiguration(exclude={DataSourceAutoConfiguration.class})\r\n    public class RecommendationEngineWithCassandraApplication {\r\n    \r\n        public static void main(String[] args) {\r\n            SpringApplication.run(RecommendationEngineWithCassandraApplication.class, args);\r\n        }\r\n    }","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>I'd the same problem and excluding the DataSourceAutoConfiguration solved the problem. </p>\n\n<pre><code>@SpringBootApplication\n@EnableAutoConfiguration(exclude={DataSourceAutoConfiguration.class})\npublic class RecommendationEngineWithCassandraApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(RecommendationEngineWithCassandraApplication.class, args);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4813898,"reputation":337,"user_id":3886537,"display_name":"Anil"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1481093210,"creation_date":1442935826,"answer_id":32720979,"question_id":24074749,"body_markdown":"Doing below works. \r\n\r\n    @EnableAutoConfiguration(exclude={DataSourceAutoConfiguration.class})\r\n\r\nBut If I wanted to have dataSource, I should not do the above configuration. \r\nThe below link says that we need to all the properties in application.properties file. All the properties should start with \r\n`spring.datasource.*`\r\n\r\nhttp://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>Doing below works. </p>\n\n<pre><code>@EnableAutoConfiguration(exclude={DataSourceAutoConfiguration.class})\n</code></pre>\n\n<p>But If I wanted to have dataSource, I should not do the above configuration. \nThe below link says that we need to all the properties in application.properties file. All the properties should start with \n<code>spring.datasource.*</code></p>\n\n<p><a href=\"http://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html\" rel=\"nofollow noreferrer\">http://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html</a></p>\n"},{"tags":[],"owner":{"account_id":132233,"reputation":3702,"user_id":332788,"accept_rate":71,"display_name":"aliopi"},"down_vote_count":0,"up_vote_count":67,"is_accepted":false,"score":67,"last_activity_date":1487313440,"creation_date":1444664778,"answer_id":33085173,"question_id":24074749,"body_markdown":"This worked for me (1.3.0.M5) :\r\n\r\n    import org.springframework.boot.autoconfigure.jdbc.*;\r\n    import org.springframework.boot.autoconfigure.orm.jpa.*;\r\n\r\n    @Configuration\r\n    @EnableAutoConfiguration(exclude = {DataSourceAutoConfiguration.class, HibernateJpaAutoConfiguration.class})\r\n    public class Application {\r\n\r\nExclude both classes.\r\n\r\nIt did not work with\r\n\r\n    @SpringBootApplication(exclude = {DataSourceAutoConfiguration.class, HibernateJpaAutoConfiguration.class})","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>This worked for me (1.3.0.M5) :</p>\n\n<pre><code>import org.springframework.boot.autoconfigure.jdbc.*;\nimport org.springframework.boot.autoconfigure.orm.jpa.*;\n\n@Configuration\n@EnableAutoConfiguration(exclude = {DataSourceAutoConfiguration.class, HibernateJpaAutoConfiguration.class})\npublic class Application {\n</code></pre>\n\n<p>Exclude both classes.</p>\n\n<p>It did not work with</p>\n\n<pre><code>@SpringBootApplication(exclude = {DataSourceAutoConfiguration.class, HibernateJpaAutoConfiguration.class})\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6943111,"reputation":1653,"user_id":5328679,"accept_rate":72,"display_name":"Felipe S."},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1446292810,"creation_date":1446292810,"answer_id":33451297,"question_id":24074749,"body_markdown":"As this is one of the first topics returned in google for this error, I&#39;ll post what I did in case someone face the same issue..\r\nI didn&#39;t want to exclude `DataSourceAutoConfiguration` neither use a memory database.. \r\n\r\nIn my case I was setting the parameters as the other repliers said but the `application.properties` file was inside the wrong folder.. lol\r\n\r\nSo in case nothing like this works, check if the file is inside `src/main/resources`! In my case it was inside `src/main/resources/static`","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>As this is one of the first topics returned in google for this error, I'll post what I did in case someone face the same issue..\nI didn't want to exclude <code>DataSourceAutoConfiguration</code> neither use a memory database.. </p>\n\n<p>In my case I was setting the parameters as the other repliers said but the <code>application.properties</code> file was inside the wrong folder.. lol</p>\n\n<p>So in case nothing like this works, check if the file is inside <code>src/main/resources</code>! In my case it was inside <code>src/main/resources/static</code></p>\n"},{"tags":[],"owner":{"account_id":7247808,"reputation":3044,"user_id":5819877,"accept_rate":100,"display_name":"Praveen Kumar K S"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1453364075,"creation_date":1453364075,"answer_id":34918484,"question_id":24074749,"body_markdown":"Answer is very simple, SpringBoot will look for Embeddable database driver, If you didn&#39;t configure in any of your configuration in form of XML or Annotations, it will throws this exception.\r\nMake the changes in your annotation like this\r\n&lt;pre&gt;&lt;code&gt;@EnableAutoConfiguration(exclude=DataSourceAutoConfiguration.class)&lt;/pre&gt;&lt;/code&gt; this will exclude the DataSourceAutoConfiguration.\r\nAnd the Perfect Simple Coding completion would be work if you have properly configured your class.\r\n&lt;pre&gt;&lt;code&gt;\r\n    `@Controller`\r\n    `@EnableAutoConfiguration(exclude=DataSourceAutoConfiguration.class)`\r\n     `public class SimpleController {`\r\n      `@RequestMapping(&quot;/&quot;)`\r\n      `@ResponseBody`\r\n       `String home() {`\r\n        `return &quot;Hello World!&quot;;`\r\n       `}public static void main(String[] args) throws Exception {`\r\n        `SpringApplication.run(SimpleController.class, args);`\r\n       `}`\r\n    `}`&lt;/pre&gt;&lt;/code&gt;","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>Answer is very simple, SpringBoot will look for Embeddable database driver, If you didn't configure in any of your configuration in form of XML or Annotations, it will throws this exception.\nMake the changes in your annotation like this\n<pre><code>@EnableAutoConfiguration(exclude=DataSourceAutoConfiguration.class)</pre></code> this will exclude the DataSourceAutoConfiguration.\nAnd the Perfect Simple Coding completion would be work if you have properly configured your class.\n<pre><code>\n    <code>@Controller</code>\n    <code>@EnableAutoConfiguration(exclude=DataSourceAutoConfiguration.class)</code>\n     <code>public class SimpleController {</code>\n      <code>@RequestMapping(\"/\")</code>\n      <code>@ResponseBody</code>\n       <code>String home() {</code>\n        <code>return \"Hello World!\";</code>\n       <code>}public static void main(String[] args) throws Exception {</code>\n        <code>SpringApplication.run(SimpleController.class, args);</code>\n       <code>}</code>\n    <code>}</code></pre></code></p>\n"},{"tags":[],"owner":{"account_id":7247808,"reputation":3044,"user_id":5819877,"accept_rate":100,"display_name":"Praveen Kumar K S"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1453371989,"creation_date":1453371989,"answer_id":34921106,"question_id":24074749,"body_markdown":"You can download the derby-10.10.1.1.jar from the [Maven Repository][1] and place it in your WEB-INF/lib folder, like this Application/WEB-INF/lib/derby-10.10.1.1.jar.\r\nYour embedded AnnotationConfigEmbeddedWebApplicationContext will pickup the database driver and your webserver will start running without any issues :-)\r\n\r\n\r\n  [1]: http://mvnrepository.com/artifact/org.apache.derby/derby/10.10.1.1","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>You can download the derby-10.10.1.1.jar from the <a href=\"http://mvnrepository.com/artifact/org.apache.derby/derby/10.10.1.1\" rel=\"nofollow\">Maven Repository</a> and place it in your WEB-INF/lib folder, like this Application/WEB-INF/lib/derby-10.10.1.1.jar.\nYour embedded AnnotationConfigEmbeddedWebApplicationContext will pickup the database driver and your webserver will start running without any issues :-)</p>\n"},{"tags":[],"owner":{"account_id":4535771,"reputation":21,"user_id":3685027,"display_name":"Virmerson"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1470498389,"creation_date":1470498389,"answer_id":38806026,"question_id":24074749,"body_markdown":"I solve my problem just adding **@AutoConfigureTestDatabase(replace=Replace.NONE)**\r\n    \r\n    @RunWith(SpringRunner.class)\r\n    @DataJpaTest\r\n    @AutoConfigureTestDatabase(replace=Replace.NONE)\r\n    public class TestClienteRepository {\r\n    \r\n    }\r\n\r\n","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>I solve my problem just adding <strong>@AutoConfigureTestDatabase(replace=Replace.NONE)</strong></p>\n\n<pre><code>@RunWith(SpringRunner.class)\n@DataJpaTest\n@AutoConfigureTestDatabase(replace=Replace.NONE)\npublic class TestClienteRepository {\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9130767,"reputation":41,"user_id":6792493,"display_name":"RWork"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1472974703,"creation_date":1472971726,"answer_id":39314301,"question_id":24074749,"body_markdown":"If you are using Gradle, include right jar of driver as below:\r\n\r\n    compile(&quot;org.mongodb:mongo-java-driver:3.3.0&quot;)\r\n\r\nOr if using Maven then do it in Maven style, it should solve your problem.","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>If you are using Gradle, include right jar of driver as below:</p>\n\n<pre><code>compile(\"org.mongodb:mongo-java-driver:3.3.0\")\n</code></pre>\n\n<p>Or if using Maven then do it in Maven style, it should solve your problem.</p>\n"},{"tags":[],"owner":{"account_id":1831530,"reputation":799,"user_id":1662829,"accept_rate":65,"display_name":"decapo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1474426346,"creation_date":1474426346,"answer_id":39606774,"question_id":24074749,"body_markdown":"To anybody coming to this thread after hours of banging your head against a wall.  I solved this error by changing\r\n\r\n    create table `group`(\r\n    \tid char(19) primary key\r\n    );\r\n\r\nto \r\n\r\n    create table if not exists `group`(\r\n    \tid char(19) primary key\r\n    );\r\nin my schema.sql file in the resources directory.","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>To anybody coming to this thread after hours of banging your head against a wall.  I solved this error by changing</p>\n\n<pre><code>create table `group`(\n    id char(19) primary key\n);\n</code></pre>\n\n<p>to </p>\n\n<pre><code>create table if not exists `group`(\n    id char(19) primary key\n);\n</code></pre>\n\n<p>in my schema.sql file in the resources directory.</p>\n"},{"tags":[],"owner":{"account_id":7717125,"reputation":141,"user_id":5844489,"display_name":"xiaofeig"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1479438947,"creation_date":1479438947,"answer_id":40668788,"question_id":24074749,"body_markdown":"I had two dependencies with groupId of org.springframework.data, then I removed jpa and kept mongodb only , and it worked!\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-data-mongodb&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\n\r\n ","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>I had two dependencies with groupId of org.springframework.data, then I removed jpa and kept mongodb only , and it worked!</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-data-mongodb&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4448063,"reputation":2887,"user_id":3620833,"accept_rate":67,"display_name":"Vino"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1490607862,"creation_date":1490607862,"answer_id":43043020,"question_id":24074749,"body_markdown":"Spring boot will look for datasoure properties in application.properties file.\r\n\r\nPlease define it in application.properties or yml file\r\n\r\n**application.properties**\r\n\r\n    spring.datasource.url=xxx\r\n    spring.datasource.username=xxx\r\n    spring.datasource.password=xxx\r\n    spring.datasource.driver-class-name=xxx\r\n\r\nIf you need your own configuration you could set your own profile and use the datasource values while bean creation.\r\n","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>Spring boot will look for datasoure properties in application.properties file.</p>\n\n<p>Please define it in application.properties or yml file</p>\n\n<p><strong>application.properties</strong></p>\n\n<pre><code>spring.datasource.url=xxx\nspring.datasource.username=xxx\nspring.datasource.password=xxx\nspring.datasource.driver-class-name=xxx\n</code></pre>\n\n<p>If you need your own configuration you could set your own profile and use the datasource values while bean creation.</p>\n"},{"tags":[],"owner":{"account_id":266517,"reputation":996,"user_id":554132,"display_name":"Ajitesh"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1492668926,"creation_date":1492668926,"answer_id":43511600,"question_id":24074749,"body_markdown":"I faced this exception while I was doing APIs for ElasticSearch using Spring Data. I did the following and it worked.\r\n\r\n    @SpringDataApplication(exclude = {DataSourceAutoConfiguration.class, HibernateJpaAutoConfiguration.class})","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>I faced this exception while I was doing APIs for ElasticSearch using Spring Data. I did the following and it worked.</p>\n\n<pre><code>@SpringDataApplication(exclude = {DataSourceAutoConfiguration.class, HibernateJpaAutoConfiguration.class})\n</code></pre>\n"},{"tags":[],"owner":{"account_id":379606,"reputation":5664,"user_id":733092,"accept_rate":86,"display_name":"Noumenon"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1495747222,"creation_date":1495747222,"answer_id":44190020,"question_id":24074749,"body_markdown":"I got the error message in the title from `o.s.b.d.LoggingFailureAnalysisReporter` along with the message &quot;APPLICATION FAILED TO START&quot;. It turned out that I hadn&#39;t added `-Dspring.profiles.active=dev` to my Eclipse debug configuration so I had no active profile.","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>I got the error message in the title from <code>o.s.b.d.LoggingFailureAnalysisReporter</code> along with the message \"APPLICATION FAILED TO START\". It turned out that I hadn't added <code>-Dspring.profiles.active=dev</code> to my Eclipse debug configuration so I had no active profile.</p>\n"},{"tags":[],"owner":{"account_id":5488688,"reputation":1124,"user_id":4362715,"display_name":"redoff"},"down_vote_count":0,"up_vote_count":38,"is_accepted":false,"score":38,"last_activity_date":1518500570,"creation_date":1498744021,"answer_id":44826982,"question_id":24074749,"body_markdown":"You can add \r\n\r\n    spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration   \r\n\r\n\r\nto your `application.properties` file.","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>You can add </p>\n\n<pre><code>spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration   \n</code></pre>\n\n<p>to your <code>application.properties</code> file.</p>\n"},{"tags":[],"owner":{"account_id":4436233,"reputation":81,"user_id":3612019,"display_name":"naresh goyal"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1502203111,"creation_date":1502203111,"answer_id":45571291,"question_id":24074749,"body_markdown":"I too faced the same issue. \r\n\r\n    Cannot determine embedded database driver class for database type NONE.\r\n\r\nIn my case deleting the jar file from repository corresponding to the database fixes the issue. There was corrupted jar present in the repository which was causing the issue. ","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>I too faced the same issue. </p>\n\n<pre><code>Cannot determine embedded database driver class for database type NONE.\n</code></pre>\n\n<p>In my case deleting the jar file from repository corresponding to the database fixes the issue. There was corrupted jar present in the repository which was causing the issue. </p>\n"},{"tags":[],"owner":{"account_id":3043751,"reputation":3340,"user_id":2580058,"accept_rate":100,"display_name":"Karol Kr&#243;l"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1505910063,"creation_date":1505910063,"answer_id":46321962,"question_id":24074749,"body_markdown":"If you really need &quot;spring-boot-starter-data-jpa&quot; as your project dependency and at the same time you don&#39;t want to allow your app to access any database, you can simply exclude auto-configuration classes\r\n\r\n    @SpringBootApplication(exclude = DataSourceAutoConfiguration.class)","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>If you really need \"spring-boot-starter-data-jpa\" as your project dependency and at the same time you don't want to allow your app to access any database, you can simply exclude auto-configuration classes</p>\n\n<pre><code>@SpringBootApplication(exclude = DataSourceAutoConfiguration.class)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2337627,"reputation":803,"user_id":2049580,"display_name":"Bagesh Sharma"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1515123222,"creation_date":1511347256,"answer_id":47432579,"question_id":24074749,"body_markdown":"I tried all the mentioned things above but could not resolve the issue. I am using SQLite and my SQLite file was in the resources directory.\r\n\r\na) **Set Up done for IDE**\r\n\r\nI need to manually add below lines in the .classpath file of my project.\r\n\r\n    &lt;classpathentry kind=&quot;src&quot; path=&quot;resources&quot;/&gt;\r\n    &lt;classpathentry kind=&quot;output&quot; path=&quot;target/classes&quot;/&gt;\r\n\r\nAfter that, I refreshed and Cleaned the project from MenuBar at the top. like Project-&gt;Clean-&gt;My Project Name.\r\n\r\nAfter that, I run the project and problem resolved.\r\n\r\n**application.properties** for my project is\r\n\r\n    spring.datasource.url=jdbc:sqlite:resources/apiusers.sqlite\r\n    spring.datasource.driver-class-name=org.sqlite.JDBC\r\n    spring.jpa.properties.hibernate.dialect=com.enigmabridge.hibernate.dialect.SQLiteDialect\r\n    spring.datasource.username=\r\n    spring.datasource.password=\r\n    spring.jpa.hibernate.ddl-auto=update\r\n\r\n b) **Set Up done if Jar deployment throw same error**\r\n\r\nYou need to add following lines to your pom.xml\r\n\r\n    \r\n      &lt;build&gt;\r\n\t\t\t&lt;resources&gt;\r\n\t\t\t&lt;resource&gt;\r\n\t\t\t\t&lt;directory&gt;resources&lt;/directory&gt;\r\n\t\t\t\t&lt;targetPath&gt;${project.build.outputDirectory}&lt;/targetPath&gt;\r\n\t\t\t\t&lt;includes&gt;\r\n\t\t\t\t\t&lt;include&gt;application.properties&lt;/include&gt;\r\n\t\t\t\t&lt;/includes&gt;\r\n\t\t\t&lt;/resource&gt;\r\n\t\t&lt;/resources&gt;\r\n\t&lt;/build&gt;\r\n\r\nMay be it may help someone.","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>I tried all the mentioned things above but could not resolve the issue. I am using SQLite and my SQLite file was in the resources directory.</p>\n\n<p>a) <strong>Set Up done for IDE</strong></p>\n\n<p>I need to manually add below lines in the .classpath file of my project.</p>\n\n<pre><code>&lt;classpathentry kind=\"src\" path=\"resources\"/&gt;\n&lt;classpathentry kind=\"output\" path=\"target/classes\"/&gt;\n</code></pre>\n\n<p>After that, I refreshed and Cleaned the project from MenuBar at the top. like Project->Clean->My Project Name.</p>\n\n<p>After that, I run the project and problem resolved.</p>\n\n<p><strong>application.properties</strong> for my project is</p>\n\n<pre><code>spring.datasource.url=jdbc:sqlite:resources/apiusers.sqlite\nspring.datasource.driver-class-name=org.sqlite.JDBC\nspring.jpa.properties.hibernate.dialect=com.enigmabridge.hibernate.dialect.SQLiteDialect\nspring.datasource.username=\nspring.datasource.password=\nspring.jpa.hibernate.ddl-auto=update\n</code></pre>\n\n<p>b) <strong>Set Up done if Jar deployment throw same error</strong></p>\n\n<p>You need to add following lines to your pom.xml</p>\n\n<pre><code>  &lt;build&gt;\n        &lt;resources&gt;\n        &lt;resource&gt;\n            &lt;directory&gt;resources&lt;/directory&gt;\n            &lt;targetPath&gt;${project.build.outputDirectory}&lt;/targetPath&gt;\n            &lt;includes&gt;\n                &lt;include&gt;application.properties&lt;/include&gt;\n            &lt;/includes&gt;\n        &lt;/resource&gt;\n    &lt;/resources&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>May be it may help someone.</p>\n"},{"tags":[],"owner":{"account_id":2518649,"reputation":375,"user_id":2189445,"display_name":"Prashant Sharma"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1518004104,"creation_date":1518004104,"answer_id":48663055,"question_id":24074749,"body_markdown":"if you do not have any database in your application simply disable the auto-config of datasource by adding below annotation.\r\n\r\n    @SpringBootApplication(exclude={DataSourceAutoConfiguration.class})","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>if you do not have any database in your application simply disable the auto-config of datasource by adding below annotation.</p>\n\n<pre><code>@SpringBootApplication(exclude={DataSourceAutoConfiguration.class})\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13398259,"reputation":11,"user_id":9668524,"display_name":"谢兆鑫"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1524128915,"creation_date":1524125620,"answer_id":49915992,"question_id":24074749,"body_markdown":"The same to @Anas. I can run it in Eclipse, but when i use &quot;java -jar ...&quot; run it, it giving me this error. Then i find my java build path is wrong, it missing the folder “src/main/resources”, so, the application can&#39;t find application.properties. When i add the “src/main/resources” folder in java build path, it worked.\r\n\r\nAnd, you need add &quot;@PropertySource({&quot;application.properties&quot;})&quot; in your Application class.\r\n\r\n[Screenshot-1][1]\r\n\r\n[Screenshot-2][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lPQHX.png\r\n  [2]: https://i.stack.imgur.com/2h59v.png","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>The same to @Anas. I can run it in Eclipse, but when i use \"java -jar ...\" run it, it giving me this error. Then i find my java build path is wrong, it missing the folder “src/main/resources”, so, the application can't find application.properties. When i add the “src/main/resources” folder in java build path, it worked.</p>\n\n<p>And, you need add \"@PropertySource({\"application.properties\"})\" in your Application class.</p>\n\n<p><a href=\"https://i.stack.imgur.com/lPQHX.png\" rel=\"nofollow noreferrer\">Screenshot-1</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/2h59v.png\" rel=\"nofollow noreferrer\">Screenshot-2</a></p>\n"},{"tags":[],"owner":{"account_id":4403145,"reputation":614,"user_id":3588217,"accept_rate":55,"display_name":"greenhorn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524548983,"creation_date":1524548983,"answer_id":49994268,"question_id":24074749,"body_markdown":"Right click the project and select the following option Maven -&gt; Update Project. This has solved my issue.","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>Right click the project and select the following option Maven -> Update Project. This has solved my issue.</p>\n"},{"tags":[],"owner":{"account_id":6181130,"reputation":2050,"user_id":4816597,"accept_rate":67,"display_name":"imbond"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1525366131,"creation_date":1525366131,"answer_id":50160158,"question_id":24074749,"body_markdown":"Generally, such error occurs when you&#39;ve used JPA and forget to add database connection. So, you must add database related dependencies in your application. \r\n\r\nThough, you want to use JPA without connecting any external database then add hsqldb in your dependency.\r\n\r\nI hope this helps!","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>Generally, such error occurs when you've used JPA and forget to add database connection. So, you must add database related dependencies in your application. </p>\n\n<p>Though, you want to use JPA without connecting any external database then add hsqldb in your dependency.</p>\n\n<p>I hope this helps!</p>\n"},{"tags":[],"owner":{"account_id":13715324,"reputation":191,"user_id":9896584,"display_name":"Philip Dilip"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1528190539,"creation_date":1528189449,"answer_id":50696222,"question_id":24074749,"body_markdown":"This is how I resolved this problem.\r\n\r\nIn my case: I had to configure the datasource for MySQL Server, which was an external Server. \r\n\r\nAs we all know, Spring boot has capability to auto-configure DataSource for embedded databases.\r\n\r\nThus, I realized that I had to disable datasource auto-configuration in order use my custom configuration.\r\n\r\nAs mentioned above by many, I disabled Automatic DataSource configuration of Spring Boot at application.properties\r\n\r\n\r\n&gt; spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration\r\n\r\n\r\nI defined all hibernate configuration properties in a separate file: \r\nhibernate-mysql.properties\r\n\r\nThen, I coded my own Custom Hibernate Configuration in following manner and it resolved the issue. \r\n\r\nMy way to configure the desired DataSource based on properties in a custom property file and populate your LocalSessionFactoryBean with your data source and other hibernate configuration. \r\n\r\n**Hibernate Custom Configuration Class:-**&lt;br&gt;\r\n**---------------------------------------------------------**&lt;br&gt;\r\n&lt;br&gt;\r\n\r\n[Hibernate Custom Configuration][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lZOXJ.png","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>This is how I resolved this problem.</p>\n\n<p>In my case: I had to configure the datasource for MySQL Server, which was an external Server. </p>\n\n<p>As we all know, Spring boot has capability to auto-configure DataSource for embedded databases.</p>\n\n<p>Thus, I realized that I had to disable datasource auto-configuration in order use my custom configuration.</p>\n\n<p>As mentioned above by many, I disabled Automatic DataSource configuration of Spring Boot at application.properties</p>\n\n<blockquote>\n  <p>spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration</p>\n</blockquote>\n\n<p>I defined all hibernate configuration properties in a separate file: \nhibernate-mysql.properties</p>\n\n<p>Then, I coded my own Custom Hibernate Configuration in following manner and it resolved the issue. </p>\n\n<p>My way to configure the desired DataSource based on properties in a custom property file and populate your LocalSessionFactoryBean with your data source and other hibernate configuration. </p>\n\n<p><strong>Hibernate Custom Configuration Class:-</strong><br>\n<strong>---------------------------------------------------------</strong><br>\n<br></p>\n\n<p><a href=\"https://i.stack.imgur.com/lZOXJ.png\" rel=\"nofollow noreferrer\">Hibernate Custom Configuration</a></p>\n"},{"tags":[],"owner":{"account_id":13863452,"reputation":1,"user_id":10008494,"display_name":"www314599782"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1530238399,"creation_date":1530238002,"answer_id":51093364,"question_id":24074749,"body_markdown":"Delete `C:\\Users\\admin\\.IntelliJIdea2018.1\\system\\compile-server`","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>Delete <code>C:\\Users\\admin\\.IntelliJIdea2018.1\\system\\compile-server</code></p>\n"},{"tags":[],"owner":{"account_id":2539887,"reputation":478,"user_id":2205911,"accept_rate":0,"display_name":"Leo Lee"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1543937544,"creation_date":1531797249,"answer_id":51372713,"question_id":24074749,"body_markdown":"In my case, using IDEA, after remove the **`out`** direcory, then everything return to normal. I just don&#39;t know why, but it worked out.","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>In my case, using IDEA, after remove the <strong><code>out</code></strong> direcory, then everything return to normal. I just don't know why, but it worked out.</p>\n"},{"tags":[],"owner":{"account_id":6833305,"reputation":3084,"user_id":5256337,"display_name":"Lova Chittumuri"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1542952935,"creation_date":1542952935,"answer_id":53441352,"question_id":24074749,"body_markdown":"Use this below dependency.\r\n\r\n    &lt;dependency&gt;\r\n       &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n       &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n       &lt;scope&gt;runtime&lt;/scope&gt;\r\n    &lt;/dependency&gt;","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>Use this below dependency.</p>\n\n<pre><code>&lt;dependency&gt;\n   &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n   &lt;artifactId&gt;h2&lt;/artifactId&gt;\n   &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3653998,"reputation":5437,"user_id":3045483,"accept_rate":86,"display_name":"rajeev pani.."},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1547137204,"creation_date":1547137204,"answer_id":54132859,"question_id":24074749,"body_markdown":"I&#39;d the similar problem and excluding the DataSourceAutoConfiguration and HibernateJpaAutoConfiguration solved the problem.\r\n\r\nI have added these two lines in my application.properties file and it worked.\r\n\r\n    \r\n\r\n    &gt; spring.autoconfigure.exclude[0]=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration\r\n    &gt; spring.autoconfigure.exclude[1]=org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration\r\n\r\n","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>I'd the similar problem and excluding the DataSourceAutoConfiguration and HibernateJpaAutoConfiguration solved the problem.</p>\n\n<p>I have added these two lines in my application.properties file and it worked.</p>\n\n<pre><code>&gt; spring.autoconfigure.exclude[0]=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration\n&gt; spring.autoconfigure.exclude[1]=org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4548484,"reputation":345,"user_id":3694297,"display_name":"Sangeeth"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1551062310,"creation_date":1551062310,"answer_id":54858773,"question_id":24074749,"body_markdown":"Already enough of answers were posted. However, I&#39;m posting what mistake i did and how i corrected it.\r\n\r\nIn my case, i had packaged my project as `pom` instead of `jar`\r\n\r\n**pom.xml:**\r\n\r\n    ...\r\n     &lt;packaging&gt;pom&lt;/packaging&gt;\r\n    ...\r\n\r\nChanged to:\r\n\r\n    ...\r\n     &lt;packaging&gt;jar&lt;/packaging&gt;\r\n    ...\r\n\r\nIt may helpful for someone with the same mistake.","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>Already enough of answers were posted. However, I'm posting what mistake i did and how i corrected it.</p>\n\n<p>In my case, i had packaged my project as <code>pom</code> instead of <code>jar</code></p>\n\n<p><strong>pom.xml:</strong></p>\n\n<pre><code>...\n &lt;packaging&gt;pom&lt;/packaging&gt;\n...\n</code></pre>\n\n<p>Changed to:</p>\n\n<pre><code>...\n &lt;packaging&gt;jar&lt;/packaging&gt;\n...\n</code></pre>\n\n<p>It may helpful for someone with the same mistake.</p>\n"},{"tags":[],"owner":{"account_id":1407557,"reputation":51,"user_id":3591888,"display_name":"shashin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631876652,"creation_date":1631876652,"answer_id":69222355,"question_id":24074749,"body_markdown":"My application file wasn&#39;t being read and Spring was trying to connect to an embedded H2 database (that wasn&#39;t added in the pom) instead. This was throwing the following error message:\r\n   \r\n\r\n&gt; if you have database settings to be loaded from a particular profile\r\n&gt; you may need to activate it (no profiles are currently active).\r\n\r\n\r\nMake sure that your application file is being read by following [this][1] question.\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/33022827/3591888","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>My application file wasn't being read and Spring was trying to connect to an embedded H2 database (that wasn't added in the pom) instead. This was throwing the following error message:</p>\n<blockquote>\n<p>if you have database settings to be loaded from a particular profile\nyou may need to activate it (no profiles are currently active).</p>\n</blockquote>\n<p>Make sure that your application file is being read by following <a href=\"https://stackoverflow.com/q/33022827/3591888\">this</a> question.</p>\n"},{"tags":[],"owner":{"account_id":10993587,"reputation":94,"user_id":8076598,"display_name":"Nakshtra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637829538,"creation_date":1637829538,"answer_id":70108055,"question_id":24074749,"body_markdown":"If none of it works, try Making a Repository class as well as RepositoryInterface, \r\nthough a class of implementation should automatically be generated by spring boot,\r\nthis is what worked for me.","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>If none of it works, try Making a Repository class as well as RepositoryInterface,\nthough a class of implementation should automatically be generated by spring boot,\nthis is what worked for me.</p>\n"},{"tags":[],"owner":{"account_id":1668855,"reputation":14404,"user_id":2700303,"accept_rate":63,"display_name":"MiguelSlv"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677858821,"creation_date":1677858821,"answer_id":75629252,"question_id":24074749,"body_markdown":"In my case i had an empty application.properties file at `target\\classes`. \r\nI just deleted to fix the problem.","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>In my case i had an empty application.properties file at <code>target\\classes</code>.\nI just deleted to fix the problem.</p>\n"}],"owner":{"account_id":412334,"reputation":33758,"user_id":785349,"accept_rate":94,"display_name":"quarks"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":585712,"favorite_count":0,"down_vote_count":0,"up_vote_count":234,"accepted_answer_id":24086178,"answer_count":36,"score":234,"last_activity_date":1677858821,"creation_date":1402032284,"question_id":24074749,"body_markdown":"This is the error that is thrown when trying to run my web app:\r\n\r\n    [INFO] WARNING: Nested in org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration&#39;: Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private javax.sql.DataSource org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration.dataSource; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39; defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceAutoConfiguration$NonEmbeddedConfiguration.class]: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public javax.sql.DataSource org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration$NonEmbeddedConfiguration.dataSource()] threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Cannot determine embedded database driver class for database type NONE. If you want an embedded database please put a supported one on the classpath.:\r\n        [INFO] org.springframework.beans.factory.BeanCreationException: Cannot determine embedded database driver class for database type NONE. If you want an embedded database please put a supported one on the classpath.\r\n        [INFO] \tat org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.getDriverClassName(DataSourceProperties.java:91)\r\n        [INFO] \tat org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration$NonEmbeddedConfiguration.dataSource(DataSourceAutoConfiguration.java:100)\r\n        [INFO] \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        [INFO] \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n        [INFO] \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        [INFO] \tat java.lang.reflect.Method.invoke(Method.java:606)\r\n        [INFO] \tat com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:115)\r\n        [INFO] \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:166)\r\n        [INFO] \tat org.springframework.beans.factory.support.ConstructorResolver$3.run(ConstructorResolver.java:580)\r\n        [INFO] \tat java.security.AccessController.doPrivileged(Native Method)\r\n        [INFO] \tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:577)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1094)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:989)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:504)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:304)\r\n        [INFO] \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:300)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)\r\n        [INFO] \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1017)\r\n        [INFO] \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:960)\r\n        [INFO] \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:858)\r\n        [INFO] \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:480)\r\n        [INFO] \tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)\r\n        [INFO] \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:289)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1185)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:537)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:304)\r\n        [INFO] \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:300)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)\r\n        [INFO] \tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:370)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1094)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:989)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:504)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:304)\r\n        [INFO] \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:300)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)\r\n        [INFO] \tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:973)\r\n        [INFO] \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:750)\r\n        [INFO] \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:482)\r\n        [INFO] \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:683)\r\n        [INFO] \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:313)\r\n        [INFO] \tat org.springframework.boot.builder.SpringApplicationBuilder.run(SpringApplicationBuilder.java:142)\r\n        [INFO] \tat org.springframework.boot.legacy.context.web.SpringBootContextLoaderListener.initWebApplicationContext(SpringBootContextLoaderListener.java:60)\r\n        [INFO] \tat org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:106)\r\n        [INFO] \tat org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:548)\r\n        [INFO] \tat org.mortbay.jetty.servlet.Context.startContext(Context.java:136)\r\n        [INFO] \tat org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)\r\n        [INFO] \tat org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)\r\n        [INFO] \tat org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)\r\n        [INFO] \tat org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)\r\n        [INFO] \tat org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)\r\n        [INFO] \tat org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)\r\n        [INFO] \tat org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)\r\n        [INFO] \tat org.mortbay.jetty.Server.doStart(Server.java:224)\r\n        [INFO] \tat org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)\r\n        [INFO] \tat com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:249)\r\n        [INFO] \tat com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:306)\r\n        [INFO] \tat com.google.appengine.tools.development.AutomaticInstanceHolder.startUp(AutomaticInstanceHolder.java:26)\r\n        [INFO] \tat com.google.appengine.tools.development.AbstractModule.startup(AbstractModule.java:79)\r\n        [INFO] \tat com.google.appengine.tools.development.Modules.startup(Modules.java:88)\r\n        [INFO] \tat com.google.appengine.tools.development.DevAppServerImpl.doStart(DevAppServerImpl.java:254)\r\n        [INFO] \tat com.google.appengine.tools.development.DevAppServerImpl.access$000(DevAppServerImpl.java:47)\r\n        [INFO] \tat com.google.appengine.tools.development.DevAppServerImpl$1.run(DevAppServerImpl.java:212)\r\n        [INFO] \tat com.google.appengine.tools.development.DevAppServerImpl$1.run(DevAppServerImpl.java:210)\r\n        [INFO] \tat java.security.AccessController.doPrivileged(Native Method)\r\n        [INFO] \tat com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:210)\r\n        [INFO] \tat com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:277)\r\n        [INFO] \tat com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:48)\r\n        [INFO] \tat com.google.appengine.tools.development.DevAppServerMain.run(DevAppServerMain.java:219)\r\n        [INFO] \tat com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:210)\r\n\r\n\r\nI believe I have the right combination of `datanucleus-appengine` and `datanucleus` jars:\r\n\r\n&gt; 2.1: Requires DataNucleus 3.1.x (core, api-jdo, api-jpa, enhancer). Requires SDK 1.6.4+ Note that this release of Datanucleus is no longer\r\n&gt; supported by the DataNucleus project\r\n\r\n\r\n**JPA App Config:**\r\n\r\n    @Configuration\r\n    @EnableJpaRepositories(&quot;demo.core.entity&quot;)\r\n    @EnableTransactionManagement\r\n    class JpaApplicationConfig {\r\n        private static final Logger logger = Logger\r\n                .getLogger(JpaApplicationConfig.class.getName());\r\n        @Bean\r\n        public AbstractEntityManagerFactoryBean entityManagerFactory() {\r\n            logger.info(&quot;Loading Entity Manager...&quot;);\r\n            LocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();\r\n            factory.setPersistenceUnitName(&quot;transactions-optional&quot;);\r\n            return factory;\r\n        }\r\n        @Bean\r\n        public PlatformTransactionManager transactionManager() {\r\n            logger.info(&quot;Loading Transaction Manager...&quot;);\r\n            JpaTransactionManager txManager = new JpaTransactionManager();\r\n            txManager.setEntityManagerFactory(entityManagerFactory().getObject());\r\n            return txManager;\r\n        }\r\n        @Bean\r\n        public PersistenceExceptionTranslator persistenceExceptionTranslator() {\r\n            return new OpenJpaDialect();\r\n        }\r\n    }\r\n\r\n**Application.java**\r\n\r\n    @Configuration\r\n    @ComponentScan\r\n    @EnableAutoConfiguration\r\n    @RestController\r\n    public class Application {\r\n    \r\n        private static final EntityManagerFactory INSTANCE =\r\n                Persistence.createEntityManagerFactory(&quot;transactions-optional&quot;);\r\n    \r\n        public static void main(String[] args) {\r\n            SpringApplication.run(Application.class, args);\r\n        }\r\n        \r\n        @RequestMapping(&quot;/&quot;)\r\n        public String home() {\r\n        \treturn &quot;Hello World&quot;;\r\n        }\r\n    \r\n    }\r\n\r\n**POM:**\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;...&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n    \t&lt;groupId&gt;org.demohq&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;demo-boot&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;packaging&gt;war&lt;/packaging&gt;\r\n    \r\n    \t&lt;name&gt;demo-boot&lt;/name&gt;\r\n    \t&lt;description&gt;Demo project&lt;/description&gt;\r\n    \r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;1.1.0.BUILD-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;/parent&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-legacy&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.1.0.BUILD-SNAPSHOT&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!--&lt;dependency&gt;--&gt;\r\n    \t\t\t&lt;!--&lt;groupId&gt;net.kindleit&lt;/groupId&gt;--&gt;\r\n    \t\t\t&lt;!--&lt;artifactId&gt;gae-runtime&lt;/artifactId&gt;--&gt;\r\n    \t\t\t&lt;!--&lt;version&gt;${gae.version}&lt;/version&gt;--&gt;\r\n    \t\t\t&lt;!--&lt;type&gt;pom&lt;/type&gt;--&gt;\r\n    \t\t\t&lt;!--&lt;scope&gt;provided&lt;/scope&gt;--&gt;\r\n    \t\t&lt;!--&lt;/dependency&gt;--&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!--&lt;dependency&gt;--&gt;\r\n                &lt;!--&lt;groupId&gt;org.hsqldb&lt;/groupId&gt;--&gt;\r\n                &lt;!--&lt;artifactId&gt;hsqldb&lt;/artifactId&gt;--&gt;\r\n                &lt;!--&lt;scope&gt;runtime&lt;/scope&gt;--&gt;\r\n            &lt;!--&lt;/dependency&gt;--&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.google.appengine&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;appengine-api-labs&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${gae.version}&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.google.appengine&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;appengine-api-stubs&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${gae.version}&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.google.appengine&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;appengine-testing&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${gae.version}&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n            &lt;!-- DataNucleus --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;\r\n                &lt;artifactId&gt;datanucleus-api-jpa&lt;/artifactId&gt;\r\n                &lt;version&gt;${datanucleus.jpa.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;\r\n                &lt;artifactId&gt;datanucleus-core&lt;/artifactId&gt;\r\n                &lt;version&gt;${datanucleus.jpa.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;\r\n                &lt;artifactId&gt;datanucleus-enhancer&lt;/artifactId&gt;\r\n                &lt;version&gt;${datanucleus.jpa.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.google.appengine.orm&lt;/groupId&gt;\r\n                &lt;artifactId&gt;datanucleus-appengine&lt;/artifactId&gt;\r\n                &lt;version&gt;${datanucleus.version}&lt;/version&gt;\r\n                &lt;!-- Need to exclude the enhancer since it interfere with the enhancer plugin. --&gt;\r\n                &lt;exclusions&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;datanucleus-enhancer&lt;/artifactId&gt;\r\n                    &lt;/exclusion&gt;\r\n                &lt;/exclusions&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.jdo&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jdo-api&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.geronimo.specs&lt;/groupId&gt;\r\n                &lt;artifactId&gt;geronimo-jpa_2.0_spec&lt;/artifactId&gt;\r\n                &lt;version&gt;1.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;!-- OpenJPA --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.openjpa&lt;/groupId&gt;\r\n                &lt;artifactId&gt;openjpa-persistence&lt;/artifactId&gt;\r\n                &lt;version&gt;2.3.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n    \r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;properties&gt;\r\n    \t\t&lt;start-class&gt;demo.Application&lt;/start-class&gt;\r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t\t&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n    \t\t&lt;java.version&gt;1.7&lt;/java.version&gt;\r\n    \t\t&lt;m2eclipse.wtp.contextRoot&gt;/&lt;/m2eclipse.wtp.contextRoot&gt;\r\n            &lt;datanucleus.jpa.version&gt;3.1.1&lt;/datanucleus.jpa.version&gt;\r\n            &lt;datanucleus.version&gt;2.1.2&lt;/datanucleus.version&gt;\r\n    \t\t&lt;gae.version&gt;1.8.8&lt;/gae.version&gt;\r\n    \t\t&lt;gae.home&gt;${settings.localRepository}/com/google/appengine/appengine-java-sdk/${gae.version}/appengine-java-sdk/appengine-java-sdk-${gae.version}&lt;/gae.home&gt;\r\n    \t\t&lt;gae.application.version&gt;test&lt;/gae.application.version&gt;\r\n            &lt;!--&lt;org.springframework-version&gt;4.0.5.RELEASE&lt;/org.springframework-version&gt;--&gt;\r\n    \t&lt;/properties&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n                &lt;!--\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;net.kindleit&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-gae-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;0.9.6&lt;/version&gt;\r\n    \t\t\t\t&lt;dependencies&gt;\r\n    \t\t\t\t\t&lt;dependency&gt;\r\n    \t\t\t\t\t\t&lt;groupId&gt;net.kindleit&lt;/groupId&gt;\r\n    \t\t\t\t\t\t&lt;artifactId&gt;gae-runtime&lt;/artifactId&gt;\r\n    \t\t\t\t\t\t&lt;version&gt;${gae.version}&lt;/version&gt;\r\n    \t\t\t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n    \t\t\t\t\t&lt;/dependency&gt;\r\n    \t\t\t\t&lt;/dependencies&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n                --&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;com.google.appengine&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;appengine-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;${gae.version}&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;enableJarClasses&gt;false&lt;/enableJarClasses&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;goals&gt;gae:deploy&lt;/goals&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;tomcat6-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;2.0&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;path&gt;/&lt;/path&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-datanucleus-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;${datanucleus.jpa.version}&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;api&gt;JPA&lt;/api&gt;\r\n                        &lt;!--&lt;mappingIncludes&gt;**/entity/*.class&lt;/mappingIncludes&gt;--&gt;\r\n                        &lt;verbose&gt;true&lt;/verbose&gt;\r\n                    &lt;/configuration&gt;\r\n                    &lt;dependencies&gt;\r\n                        &lt;dependency&gt;\r\n                            &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;datanucleus-core&lt;/artifactId&gt;\r\n                            &lt;version&gt;${datanucleus.jpa.version}&lt;/version&gt;\r\n                        &lt;/dependency&gt;\r\n                    &lt;/dependencies&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;phase&gt;compile&lt;/phase&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;enhance&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    \t&lt;profiles&gt;\r\n    \t\t&lt;!-- We can configure our integration server to activate this profile and \r\n    \t\t\tperform gae:deploy, thus uploading latest snapshot to the http://1.latest.&lt;applicationName&gt;.appspot.com \r\n    \t\t\tautomatically --&gt;\r\n    \t\t&lt;profile&gt;\r\n    \t\t\t&lt;id&gt;integration-build&lt;/id&gt;\r\n    \t\t\t&lt;properties&gt;\r\n    \t\t\t\t&lt;gae.application.version&gt;stage&lt;/gae.application.version&gt;\r\n    \t\t\t&lt;/properties&gt;\r\n    \t\t&lt;/profile&gt;\r\n    \r\n    \t\t&lt;!-- This profile will activate automatically during release and upload \r\n    \t\t\tapplication to the http://2.latest.&lt;applicationName&gt;.appspot.com (We might \r\n    \t\t\twant to set the 2nd version as our applications Default version to be accessible \r\n    \t\t\tat http://&lt;applicationName&gt;.appspot.com) --&gt;\r\n    \t\t&lt;profile&gt;\r\n    \t\t\t&lt;id&gt;release-build&lt;/id&gt;\r\n    \t\t\t&lt;activation&gt;\r\n    \t\t\t\t&lt;property&gt;\r\n    \t\t\t\t\t&lt;name&gt;performRelease&lt;/name&gt;\r\n    \t\t\t\t\t&lt;value&gt;true&lt;/value&gt;\r\n    \t\t\t\t&lt;/property&gt;\r\n    \t\t\t&lt;/activation&gt;\r\n    \r\n    \t\t\t&lt;properties&gt;\r\n    \t\t\t\t&lt;!-- During release, set application version in appengine-web.xml to \r\n    \t\t\t\t\t2 --&gt;\r\n    \t\t\t\t&lt;gae.application.version&gt;release&lt;/gae.application.version&gt;\r\n    \t\t\t&lt;/properties&gt;\r\n    \t\t&lt;/profile&gt;\r\n    \t&lt;/profiles&gt;\r\n    \r\n    \t&lt;repositories&gt;\r\n    \t\t&lt;repository&gt;\r\n    \t\t\t&lt;id&gt;spring-snapshots&lt;/id&gt;\r\n    \t\t\t&lt;name&gt;Spring Snapshots&lt;/name&gt;\r\n    \t\t\t&lt;url&gt;http://repo.spring.io/snapshot&lt;/url&gt;\r\n    \t\t\t&lt;snapshots&gt;\r\n    \t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n    \t\t\t&lt;/snapshots&gt;\r\n    \t\t&lt;/repository&gt;\r\n    \t\t&lt;repository&gt;\r\n    \t\t\t&lt;id&gt;spring-milestones&lt;/id&gt;\r\n    \t\t\t&lt;name&gt;Spring Milestones&lt;/name&gt;\r\n    \t\t\t&lt;url&gt;http://repo.spring.io/milestone&lt;/url&gt;\r\n    \t\t\t&lt;snapshots&gt;\r\n    \t\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n    \t\t\t&lt;/snapshots&gt;\r\n    \t\t&lt;/repository&gt;\r\n    \t&lt;/repositories&gt;\r\n    \t&lt;pluginRepositories&gt;\r\n    \t\t&lt;pluginRepository&gt;\r\n    \t\t\t&lt;id&gt;spring-snapshots&lt;/id&gt;\r\n    \t\t\t&lt;name&gt;Spring Snapshots&lt;/name&gt;\r\n    \t\t\t&lt;url&gt;http://repo.spring.io/snapshot&lt;/url&gt;\r\n    \t\t\t&lt;snapshots&gt;\r\n    \t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n    \t\t\t&lt;/snapshots&gt;\r\n    \t\t&lt;/pluginRepository&gt;\r\n    \t\t&lt;pluginRepository&gt;\r\n    \t\t\t&lt;id&gt;spring-milestones&lt;/id&gt;\r\n    \t\t\t&lt;name&gt;Spring Milestones&lt;/name&gt;\r\n    \t\t\t&lt;url&gt;http://repo.spring.io/milestone&lt;/url&gt;\r\n    \t\t\t&lt;snapshots&gt;\r\n    \t\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n    \t\t\t&lt;/snapshots&gt;\r\n    \t\t&lt;/pluginRepository&gt;\r\n    \t&lt;/pluginRepositories&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\nI wonder what could be missing in my app? I followed the instruction from here https://stackoverflow.com/questions/15359784/using-spring-data-jpa-on-google-appengine\r\n\r\n","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>This is the error that is thrown when trying to run my web app:</p>\n\n<pre><code>[INFO] WARNING: Nested in org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private javax.sql.DataSource org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration.dataSource; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceAutoConfiguration$NonEmbeddedConfiguration.class]: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public javax.sql.DataSource org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration$NonEmbeddedConfiguration.dataSource()] threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Cannot determine embedded database driver class for database type NONE. If you want an embedded database please put a supported one on the classpath.:\n    [INFO] org.springframework.beans.factory.BeanCreationException: Cannot determine embedded database driver class for database type NONE. If you want an embedded database please put a supported one on the classpath.\n    [INFO]  at org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.getDriverClassName(DataSourceProperties.java:91)\n    [INFO]  at org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration$NonEmbeddedConfiguration.dataSource(DataSourceAutoConfiguration.java:100)\n    [INFO]  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    [INFO]  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    [INFO]  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    [INFO]  at java.lang.reflect.Method.invoke(Method.java:606)\n    [INFO]  at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:115)\n    [INFO]  at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:166)\n    [INFO]  at org.springframework.beans.factory.support.ConstructorResolver$3.run(ConstructorResolver.java:580)\n    [INFO]  at java.security.AccessController.doPrivileged(Native Method)\n    [INFO]  at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:577)\n    [INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1094)\n    [INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:989)\n    [INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:504)\n    [INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)\n    [INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:304)\n    [INFO]  at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\n    [INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:300)\n    [INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)\n    [INFO]  at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1017)\n    [INFO]  at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:960)\n    [INFO]  at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:858)\n    [INFO]  at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:480)\n    [INFO]  at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)\n    [INFO]  at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:289)\n    [INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1185)\n    [INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:537)\n    [INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)\n    [INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:304)\n    [INFO]  at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\n    [INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:300)\n    [INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)\n    [INFO]  at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:370)\n    [INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1094)\n    [INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:989)\n    [INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:504)\n    [INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)\n    [INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:304)\n    [INFO]  at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\n    [INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:300)\n    [INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)\n    [INFO]  at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:973)\n    [INFO]  at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:750)\n    [INFO]  at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:482)\n    [INFO]  at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:683)\n    [INFO]  at org.springframework.boot.SpringApplication.run(SpringApplication.java:313)\n    [INFO]  at org.springframework.boot.builder.SpringApplicationBuilder.run(SpringApplicationBuilder.java:142)\n    [INFO]  at org.springframework.boot.legacy.context.web.SpringBootContextLoaderListener.initWebApplicationContext(SpringBootContextLoaderListener.java:60)\n    [INFO]  at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:106)\n    [INFO]  at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:548)\n    [INFO]  at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)\n    [INFO]  at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)\n    [INFO]  at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)\n    [INFO]  at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)\n    [INFO]  at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)\n    [INFO]  at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)\n    [INFO]  at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)\n    [INFO]  at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)\n    [INFO]  at org.mortbay.jetty.Server.doStart(Server.java:224)\n    [INFO]  at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)\n    [INFO]  at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:249)\n    [INFO]  at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:306)\n    [INFO]  at com.google.appengine.tools.development.AutomaticInstanceHolder.startUp(AutomaticInstanceHolder.java:26)\n    [INFO]  at com.google.appengine.tools.development.AbstractModule.startup(AbstractModule.java:79)\n    [INFO]  at com.google.appengine.tools.development.Modules.startup(Modules.java:88)\n    [INFO]  at com.google.appengine.tools.development.DevAppServerImpl.doStart(DevAppServerImpl.java:254)\n    [INFO]  at com.google.appengine.tools.development.DevAppServerImpl.access$000(DevAppServerImpl.java:47)\n    [INFO]  at com.google.appengine.tools.development.DevAppServerImpl$1.run(DevAppServerImpl.java:212)\n    [INFO]  at com.google.appengine.tools.development.DevAppServerImpl$1.run(DevAppServerImpl.java:210)\n    [INFO]  at java.security.AccessController.doPrivileged(Native Method)\n    [INFO]  at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:210)\n    [INFO]  at com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:277)\n    [INFO]  at com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:48)\n    [INFO]  at com.google.appengine.tools.development.DevAppServerMain.run(DevAppServerMain.java:219)\n    [INFO]  at com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:210)\n</code></pre>\n\n<p>I believe I have the right combination of <code>datanucleus-appengine</code> and <code>datanucleus</code> jars:</p>\n\n<blockquote>\n  <p>2.1: Requires DataNucleus 3.1.x (core, api-jdo, api-jpa, enhancer). Requires SDK 1.6.4+ Note that this release of Datanucleus is no longer\n  supported by the DataNucleus project</p>\n</blockquote>\n\n<p><strong>JPA App Config:</strong></p>\n\n<pre><code>@Configuration\n@EnableJpaRepositories(\"demo.core.entity\")\n@EnableTransactionManagement\nclass JpaApplicationConfig {\n    private static final Logger logger = Logger\n            .getLogger(JpaApplicationConfig.class.getName());\n    @Bean\n    public AbstractEntityManagerFactoryBean entityManagerFactory() {\n        logger.info(\"Loading Entity Manager...\");\n        LocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();\n        factory.setPersistenceUnitName(\"transactions-optional\");\n        return factory;\n    }\n    @Bean\n    public PlatformTransactionManager transactionManager() {\n        logger.info(\"Loading Transaction Manager...\");\n        JpaTransactionManager txManager = new JpaTransactionManager();\n        txManager.setEntityManagerFactory(entityManagerFactory().getObject());\n        return txManager;\n    }\n    @Bean\n    public PersistenceExceptionTranslator persistenceExceptionTranslator() {\n        return new OpenJpaDialect();\n    }\n}\n</code></pre>\n\n<p><strong>Application.java</strong></p>\n\n<pre><code>@Configuration\n@ComponentScan\n@EnableAutoConfiguration\n@RestController\npublic class Application {\n\n    private static final EntityManagerFactory INSTANCE =\n            Persistence.createEntityManagerFactory(\"transactions-optional\");\n\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n\n    @RequestMapping(\"/\")\n    public String home() {\n        return \"Hello World\";\n    }\n\n}\n</code></pre>\n\n<p><strong>POM:</strong></p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"...\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;org.demohq&lt;/groupId&gt;\n    &lt;artifactId&gt;demo-boot&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n\n    &lt;name&gt;demo-boot&lt;/name&gt;\n    &lt;description&gt;Demo project&lt;/description&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;1.1.0.BUILD-SNAPSHOT&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-legacy&lt;/artifactId&gt;\n            &lt;version&gt;1.1.0.BUILD-SNAPSHOT&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!--&lt;dependency&gt;--&gt;\n            &lt;!--&lt;groupId&gt;net.kindleit&lt;/groupId&gt;--&gt;\n            &lt;!--&lt;artifactId&gt;gae-runtime&lt;/artifactId&gt;--&gt;\n            &lt;!--&lt;version&gt;${gae.version}&lt;/version&gt;--&gt;\n            &lt;!--&lt;type&gt;pom&lt;/type&gt;--&gt;\n            &lt;!--&lt;scope&gt;provided&lt;/scope&gt;--&gt;\n        &lt;!--&lt;/dependency&gt;--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;!--&lt;dependency&gt;--&gt;\n            &lt;!--&lt;groupId&gt;org.hsqldb&lt;/groupId&gt;--&gt;\n            &lt;!--&lt;artifactId&gt;hsqldb&lt;/artifactId&gt;--&gt;\n            &lt;!--&lt;scope&gt;runtime&lt;/scope&gt;--&gt;\n        &lt;!--&lt;/dependency&gt;--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.appengine&lt;/groupId&gt;\n            &lt;artifactId&gt;appengine-api-labs&lt;/artifactId&gt;\n            &lt;version&gt;${gae.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.appengine&lt;/groupId&gt;\n            &lt;artifactId&gt;appengine-api-stubs&lt;/artifactId&gt;\n            &lt;version&gt;${gae.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.appengine&lt;/groupId&gt;\n            &lt;artifactId&gt;appengine-testing&lt;/artifactId&gt;\n            &lt;version&gt;${gae.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!-- DataNucleus --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;\n            &lt;artifactId&gt;datanucleus-api-jpa&lt;/artifactId&gt;\n            &lt;version&gt;${datanucleus.jpa.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;\n            &lt;artifactId&gt;datanucleus-core&lt;/artifactId&gt;\n            &lt;version&gt;${datanucleus.jpa.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;\n            &lt;artifactId&gt;datanucleus-enhancer&lt;/artifactId&gt;\n            &lt;version&gt;${datanucleus.jpa.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.appengine.orm&lt;/groupId&gt;\n            &lt;artifactId&gt;datanucleus-appengine&lt;/artifactId&gt;\n            &lt;version&gt;${datanucleus.version}&lt;/version&gt;\n            &lt;!-- Need to exclude the enhancer since it interfere with the enhancer plugin. --&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;\n                    &lt;artifactId&gt;datanucleus-enhancer&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.jdo&lt;/groupId&gt;\n            &lt;artifactId&gt;jdo-api&lt;/artifactId&gt;\n            &lt;version&gt;3.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.geronimo.specs&lt;/groupId&gt;\n            &lt;artifactId&gt;geronimo-jpa_2.0_spec&lt;/artifactId&gt;\n            &lt;version&gt;1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- OpenJPA --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.openjpa&lt;/groupId&gt;\n            &lt;artifactId&gt;openjpa-persistence&lt;/artifactId&gt;\n            &lt;version&gt;2.3.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n    &lt;/dependencies&gt;\n\n    &lt;properties&gt;\n        &lt;start-class&gt;demo.Application&lt;/start-class&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n        &lt;java.version&gt;1.7&lt;/java.version&gt;\n        &lt;m2eclipse.wtp.contextRoot&gt;/&lt;/m2eclipse.wtp.contextRoot&gt;\n        &lt;datanucleus.jpa.version&gt;3.1.1&lt;/datanucleus.jpa.version&gt;\n        &lt;datanucleus.version&gt;2.1.2&lt;/datanucleus.version&gt;\n        &lt;gae.version&gt;1.8.8&lt;/gae.version&gt;\n        &lt;gae.home&gt;${settings.localRepository}/com/google/appengine/appengine-java-sdk/${gae.version}/appengine-java-sdk/appengine-java-sdk-${gae.version}&lt;/gae.home&gt;\n        &lt;gae.application.version&gt;test&lt;/gae.application.version&gt;\n        &lt;!--&lt;org.springframework-version&gt;4.0.5.RELEASE&lt;/org.springframework-version&gt;--&gt;\n    &lt;/properties&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n            &lt;!--\n            &lt;plugin&gt;\n                &lt;groupId&gt;net.kindleit&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-gae-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.9.6&lt;/version&gt;\n                &lt;dependencies&gt;\n                    &lt;dependency&gt;\n                        &lt;groupId&gt;net.kindleit&lt;/groupId&gt;\n                        &lt;artifactId&gt;gae-runtime&lt;/artifactId&gt;\n                        &lt;version&gt;${gae.version}&lt;/version&gt;\n                        &lt;type&gt;pom&lt;/type&gt;\n                    &lt;/dependency&gt;\n                &lt;/dependencies&gt;\n            &lt;/plugin&gt;\n            --&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;com.google.appengine&lt;/groupId&gt;\n                &lt;artifactId&gt;appengine-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${gae.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;enableJarClasses&gt;false&lt;/enableJarClasses&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;goals&gt;gae:deploy&lt;/goals&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;\n                &lt;artifactId&gt;tomcat6-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;path&gt;/&lt;/path&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-datanucleus-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${datanucleus.jpa.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;api&gt;JPA&lt;/api&gt;\n                    &lt;!--&lt;mappingIncludes&gt;**/entity/*.class&lt;/mappingIncludes&gt;--&gt;\n                    &lt;verbose&gt;true&lt;/verbose&gt;\n                &lt;/configuration&gt;\n                &lt;dependencies&gt;\n                    &lt;dependency&gt;\n                        &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;\n                        &lt;artifactId&gt;datanucleus-core&lt;/artifactId&gt;\n                        &lt;version&gt;${datanucleus.jpa.version}&lt;/version&gt;\n                    &lt;/dependency&gt;\n                &lt;/dependencies&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;compile&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;enhance&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;profiles&gt;\n        &lt;!-- We can configure our integration server to activate this profile and \n            perform gae:deploy, thus uploading latest snapshot to the http://1.latest.&lt;applicationName&gt;.appspot.com \n            automatically --&gt;\n        &lt;profile&gt;\n            &lt;id&gt;integration-build&lt;/id&gt;\n            &lt;properties&gt;\n                &lt;gae.application.version&gt;stage&lt;/gae.application.version&gt;\n            &lt;/properties&gt;\n        &lt;/profile&gt;\n\n        &lt;!-- This profile will activate automatically during release and upload \n            application to the http://2.latest.&lt;applicationName&gt;.appspot.com (We might \n            want to set the 2nd version as our applications Default version to be accessible \n            at http://&lt;applicationName&gt;.appspot.com) --&gt;\n        &lt;profile&gt;\n            &lt;id&gt;release-build&lt;/id&gt;\n            &lt;activation&gt;\n                &lt;property&gt;\n                    &lt;name&gt;performRelease&lt;/name&gt;\n                    &lt;value&gt;true&lt;/value&gt;\n                &lt;/property&gt;\n            &lt;/activation&gt;\n\n            &lt;properties&gt;\n                &lt;!-- During release, set application version in appengine-web.xml to \n                    2 --&gt;\n                &lt;gae.application.version&gt;release&lt;/gae.application.version&gt;\n            &lt;/properties&gt;\n        &lt;/profile&gt;\n    &lt;/profiles&gt;\n\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-snapshots&lt;/id&gt;\n            &lt;name&gt;Spring Snapshots&lt;/name&gt;\n            &lt;url&gt;http://repo.spring.io/snapshot&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/repository&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-milestones&lt;/id&gt;\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\n            &lt;url&gt;http://repo.spring.io/milestone&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n    &lt;pluginRepositories&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;spring-snapshots&lt;/id&gt;\n            &lt;name&gt;Spring Snapshots&lt;/name&gt;\n            &lt;url&gt;http://repo.spring.io/snapshot&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/pluginRepository&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;spring-milestones&lt;/id&gt;\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\n            &lt;url&gt;http://repo.spring.io/milestone&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/pluginRepository&gt;\n    &lt;/pluginRepositories&gt;\n\n&lt;/project&gt;\n</code></pre>\n\n<p>I wonder what could be missing in my app? I followed the instruction from here <a href=\"https://stackoverflow.com/questions/15359784/using-spring-data-jpa-on-google-appengine\">Using Spring Data JPA on Google Appengine</a></p>\n"},{"tags":["java","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":1491916,"reputation":873,"user_id":1398821,"display_name":"arbuzov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574953502,"creation_date":1574953502,"answer_id":59091668,"question_id":59091626,"body_markdown":"    \r\n    @ServletComponentScan\r\n    @SpringBootApplication\r\n    public class Application {\r\n    \r\n        public static void main(String[] args) {\r\n            SpringApplication.run(Application.class, args);\r\n        }\r\n    }\r\n\r\n\r\n`@ServletComponentScan` will fix the problem","title":"@WebFilter requires ServletComponentScan","body":"<pre><code>@ServletComponentScan\n@SpringBootApplication\npublic class Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n}\n</code></pre>\n\n<p><code>@ServletComponentScan</code> will fix the problem</p>\n"},{"tags":[],"owner":{"account_id":26416562,"reputation":21,"user_id":20064889,"display_name":"Kason"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677858736,"creation_date":1677858736,"answer_id":75629238,"question_id":59091626,"body_markdown":"The `ServletComponentScan` annotation is necessary to enable scanning of Servlet components, including `@WebServlet`, `@WebFilter`, and `@WebListener` in a Spring Boot application and register them with the Servlet Container.\r\n\r\nI would prefer to use `@WebFilter` with `@ServletComponentScan`, but there is another simple way you can register your filter without XML file by using `@Component`.\r\n\r\n```java\r\n@Component\r\npublic class MyFilter implements Filter {\r\n    ...\r\n}\r\n```\r\n\r\nIf you don&#39;t have a particular URL pattern to match, you can use the `@Component` annotation to mark a class as a filter. By implementing the `OncePerRequestFilter` interface, you can ensure that the filter&#39;s `doFilter()` method is executed only once per request. ","title":"@WebFilter requires ServletComponentScan","body":"<p>The <code>ServletComponentScan</code> annotation is necessary to enable scanning of Servlet components, including <code>@WebServlet</code>, <code>@WebFilter</code>, and <code>@WebListener</code> in a Spring Boot application and register them with the Servlet Container.</p>\n<p>I would prefer to use <code>@WebFilter</code> with <code>@ServletComponentScan</code>, but there is another simple way you can register your filter without XML file by using <code>@Component</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class MyFilter implements Filter {\n    ...\n}\n</code></pre>\n<p>If you don't have a particular URL pattern to match, you can use the <code>@Component</code> annotation to mark a class as a filter. By implementing the <code>OncePerRequestFilter</code> interface, you can ensure that the filter's <code>doFilter()</code> method is executed only once per request.</p>\n"}],"owner":{"account_id":1491916,"reputation":873,"user_id":1398821,"display_name":"arbuzov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":254,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1677858736,"creation_date":1574953309,"question_id":59091626,"body_markdown":"Class may be annotated with `@WebFilter(urlPatterns=&quot;*&quot;)` but spring does not run it on request. Why? If I add `@ServletComponentScan` annotation to Application class. It will work fine. Сan somehow make it work in a different way?","title":"@WebFilter requires ServletComponentScan","body":"<p>Class may be annotated with <code>@WebFilter(urlPatterns=\"*\")</code> but spring does not run it on request. Why? If I add <code>@ServletComponentScan</code> annotation to Application class. It will work fine. Сan somehow make it work in a different way?</p>\n"},{"tags":["java","spring-boot","pagination","spring-jdbc"],"comments":[{"owner":{"account_id":5478423,"reputation":1520,"user_id":4355748,"accept_rate":56,"display_name":"Rana_S"},"score":0,"creation_date":1665103223,"post_id":73866387,"comment_id":130626890,"body_markdown":"Is this related to `spring-data-jdbc`?","body":"Is this related to <code>spring-data-jdbc</code>?"},{"owner":{"account_id":6683686,"reputation":407,"user_id":5155846,"accept_rate":56,"display_name":"Ahmad"},"score":0,"creation_date":1665426852,"post_id":73866387,"comment_id":130693160,"body_markdown":"@Rana_S yes it is","body":"@Rana_S yes it is"}],"answers":[{"tags":[],"owner":{"account_id":136750,"reputation":6224,"user_id":340467,"accept_rate":68,"display_name":"benzen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677858651,"creation_date":1677858651,"answer_id":75629224,"question_id":73866387,"body_markdown":"Nothing prevent you from doing this. But as of spring boot 3.0.3, this doesn&#39;t trigger the expected behavior","title":"Use dynamic sorting is spring data jdbc custom query","body":"<p>Nothing prevent you from doing this. But as of spring boot 3.0.3, this doesn't trigger the expected behavior</p>\n"}],"owner":{"account_id":6683686,"reputation":407,"user_id":5155846,"accept_rate":56,"display_name":"Ahmad"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":191,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677858651,"creation_date":1664275884,"question_id":73866387,"body_markdown":"I have the following `jdbc` repository method\r\n```\r\n@Query(&quot;select c.id, (select count(s.id) from student s where s.class_id=c.id) from class c limit :limit offset :offset&quot;)\r\nList&lt;ClassInfo&gt; findClassInfo(Integer limit, Integer offset, Sort sort);\r\n```\r\nI need to include `sort` parameter into this native query. is it possible to do so?","title":"Use dynamic sorting is spring data jdbc custom query","body":"<p>I have the following <code>jdbc</code> repository method</p>\n<pre><code>@Query(&quot;select c.id, (select count(s.id) from student s where s.class_id=c.id) from class c limit :limit offset :offset&quot;)\nList&lt;ClassInfo&gt; findClassInfo(Integer limit, Integer offset, Sort sort);\n</code></pre>\n<p>I need to include <code>sort</code> parameter into this native query. is it possible to do so?</p>\n"},{"tags":["java","linux","google-chrome","selenium-webdriver","selenium-chromedriver"],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676413700,"creation_date":1676413700,"answer_id":75453836,"question_id":75453713,"body_markdown":"This error message...\r\n\r\n\tThe server encountered an unexpected condition that prevented it from fulfilling the request\r\n\r\n...implies that [ChromeDriver](https://stackoverflow.com/a/59927747/7429447) was unable to spawn a new _Browsing Context_ i.e. [tag:google-chrome] session.\r\n\r\nYour main issue is the **incompatibility** between the `--headless=new` argument/functionality and the [Selenium](https://stackoverflow.com/a/54482491/7429447) version you are using.\r\n\r\n- You are using _Selenium v3.14.0_\r\n\r\n\t  Build info: version: &amp;#39;3.14.0&amp;#39;\r\n\r\n- But you are trying to use the argument _**`--headless=new`**_\r\n\r\nwhere as [_**`--headless=new`**_](https://stackoverflow.com/a/75417182/7429447) argument/feature landed with _**Selenium v4.8.0**_\r\n\r\n\r\n----------\r\n\r\n\r\n\r\nSolution\r\n--------\r\nTo use the argument [_`--headless=new`_](https://stackoverflow.com/q/75367068/7429447 ) ensure that:\r\n\r\n- _ChromeDriver_ is updated to [ChromeDriver v110.0](https://chromedriver.storage.googleapis.com/index.html?path=110.0.5481.77/) level.\r\n- _Chrome Browser_ is updated to  current _chrome=110.0_ (as per [chromedriver=110.0 release notes](https://chromedriver.storage.googleapis.com/110.0.5481.77/notes.txt)).\r\n- _Selenium_ is upgraded to latest [_**Version 4.8.0**_](https://www.selenium.dev/downloads/).","title":"Selenium Chrome failed to start: crashed using chromedriverin Apache Tomcat/10.0.23 on a remote server","body":"<p>This error message...</p>\n<pre><code>The server encountered an unexpected condition that prevented it from fulfilling the request\n</code></pre>\n<p>...implies that <a href=\"https://stackoverflow.com/a/59927747/7429447\">ChromeDriver</a> was unable to spawn a new <em>Browsing Context</em> i.e. <a href=\"/questions/tagged/google-chrome\" class=\"post-tag\" title=\"show questions tagged &#39;google-chrome&#39;\" aria-label=\"show questions tagged &#39;google-chrome&#39;\" rel=\"tag\" aria-labelledby=\"google-chrome-container\">google-chrome</a> session.</p>\n<p>Your main issue is the <strong>incompatibility</strong> between the <code>--headless=new</code> argument/functionality and the <a href=\"https://stackoverflow.com/a/54482491/7429447\">Selenium</a> version you are using.</p>\n<ul>\n<li><p>You are using <em>Selenium v3.14.0</em></p>\n<pre><code>Build info: version: &amp;#39;3.14.0&amp;#39;\n</code></pre>\n</li>\n<li><p>But you are trying to use the argument <em><strong><code>--headless=new</code></strong></em></p>\n</li>\n</ul>\n<p>where as <a href=\"https://stackoverflow.com/a/75417182/7429447\"><em><strong><code>--headless=new</code></strong></em></a> argument/feature landed with <em><strong>Selenium v4.8.0</strong></em></p>\n<hr />\n<h2>Solution</h2>\n<p>To use the argument <a href=\"https://stackoverflow.com/q/75367068/7429447\"><em><code>--headless=new</code></em></a> ensure that:</p>\n<ul>\n<li><em>ChromeDriver</em> is updated to <a href=\"https://chromedriver.storage.googleapis.com/index.html?path=110.0.5481.77/\" rel=\"nofollow noreferrer\">ChromeDriver v110.0</a> level.</li>\n<li><em>Chrome Browser</em> is updated to  current <em>chrome=110.0</em> (as per <a href=\"https://chromedriver.storage.googleapis.com/110.0.5481.77/notes.txt\" rel=\"nofollow noreferrer\">chromedriver=110.0 release notes</a>).</li>\n<li><em>Selenium</em> is upgraded to latest <a href=\"https://www.selenium.dev/downloads/\" rel=\"nofollow noreferrer\"><em><strong>Version 4.8.0</strong></em></a>.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":21694700,"reputation":1,"user_id":21112992,"display_name":"Sammi Jhonson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677858531,"creation_date":1677858531,"answer_id":75629206,"question_id":75453713,"body_markdown":"Maybe you have not installed browser. Install and try again. ","title":"Selenium Chrome failed to start: crashed using chromedriverin Apache Tomcat/10.0.23 on a remote server","body":"<p>Maybe you have not installed browser. Install and try again.</p>\n"}],"owner":{"account_id":26958837,"reputation":75,"user_id":20526798,"display_name":"Stewart LloydJones"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":430,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75453836,"answer_count":2,"score":1,"last_activity_date":1677858531,"creation_date":1676412667,"question_id":75453713,"body_markdown":"I am running a java webapp in Apache Tomcat/10.0.23 on a remote server which implements selenium chromedriver. However when I create the web driver it returns a HTTP Status 500 – Internal Server Error but in the logs is shows ChromeDriver was started successfully.\r\n\r\nGoogle-chrome location: /usr/bin/google-chrome /usr/share/man/man1/google-chrome.1.gz\r\n\r\nGoogle-chrome version: 110.0.5481.77\r\n\r\nChromedriver location:  /usr/bin/chromedriver\r\n\r\nChromedriver version: 110.0.5481.77 (65ed616c6e8ee3fe0ad64fe83796c020644d42af-refs/branch-heads/5481@{#839})\r\n\r\nServlet:\r\n```\r\nimport java.io.IOException;\r\nimport org.openqa.selenium.PageLoadStrategy;\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.chrome.ChromeDriver;\r\nimport org.openqa.selenium.chrome.ChromeOptions;\r\n\r\nimport jakarta.servlet.ServletException;\r\nimport jakarta.servlet.annotation.WebServlet;\r\nimport jakarta.servlet.http.HttpServlet;\r\nimport jakarta.servlet.http.HttpServletRequest;\r\nimport jakarta.servlet.http.HttpServletResponse;\r\n\r\n@WebServlet(name = &quot;TestServlet&quot;, urlPatterns = { &quot;/test&quot; })\r\npublic class TestServlet extends HttpServlet {\r\n    @Override\r\n    protected void doGet(HttpServletRequest request, HttpServletResponse response)\r\n            throws ServletException, IOException {\r\n\r\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;/usr/bin/chromedriver&quot;);\r\n        ChromeOptions options = new ChromeOptions();\r\n        options.setPageLoadStrategy(PageLoadStrategy.EAGER);\r\n        options.addArguments(&quot;--headless=new&quot;);\r\n        options.addArguments(&quot;--disable-dev-shm-usage&quot;);\r\n        options.addArguments(&quot;--no-sandbox&quot;);\r\n        WebDriver driver = new ChromeDriver(options);\r\n        driver.get(&quot;https://www.google.com/&quot;);\r\n        System.out.println(&quot;Page Title: &quot; + driver.getTitle());\r\n        driver.quit();\r\n    }\r\n}\r\n```\r\nError:\r\n```\r\n&lt;body&gt;\r\n\t&lt;h1&gt;HTTP Status 500 – Internal Server Error&lt;/h1&gt;\r\n\t&lt;hr class=&quot;line&quot; /&gt;\r\n\t&lt;p&gt;&lt;b&gt;Type&lt;/b&gt; Exception Report&lt;/p&gt;\r\n\t&lt;p&gt;&lt;b&gt;Message&lt;/b&gt; unknown error: Chrome failed to start: crashed.&lt;/p&gt;\r\n\t&lt;p&gt;&lt;b&gt;Description&lt;/b&gt; The server encountered an unexpected condition that prevented it from fulfilling the request.\r\n\t&lt;/p&gt;\r\n\t&lt;p&gt;&lt;b&gt;Exception&lt;/b&gt;&lt;/p&gt;\r\n\t&lt;pre&gt;org.openqa.selenium.WebDriverException: unknown error: Chrome failed to start: crashed.\r\n  (unknown error: DevToolsActivePort file doesn&amp;#39;t exist)\r\n  (The process started from chrome location &amp;#47;usr&amp;#47;bin&amp;#47;google-chrome is no longer running, so ChromeDriver is assuming that Chrome has crashed.)\r\nBuild info: version: &amp;#39;3.14.0&amp;#39;, revision: &amp;#39;aacccce0&amp;#39;, time: &amp;#39;2018-08-02T20:19:58.91Z&amp;#39;\r\nSystem info: host: &amp;#39;ip-xxxxxxxxxxx;, ip: &amp;#39;127.0.0.1&amp;#39;, os.name: &amp;#39;Linux&amp;#39;, os.arch: &amp;#39;amd64&amp;#39;, os.version: &amp;#39;5.10.0-21-cloud-amd64&amp;#39;, java.version: &amp;#39;11.0.15.1&amp;#39;\r\nDriver info: driver.version: ChromeDriver\r\nremote stacktrace: #0 0x5642671afd93 &amp;lt;unknown&amp;gt;\r\n#1 0x564266f7e2d7 &amp;lt;unknown&amp;gt;\r\n#2 0x564266fa6ab0 &amp;lt;unknown&amp;gt;\r\n#3 0x564266fa2a3d &amp;lt;unknown&amp;gt;\r\n#4 0x564266fe74f4 &amp;lt;unknown&amp;gt;\r\n#5 0x564266fde353 &amp;lt;unknown&amp;gt;\r\n#6 0x564266fade40 &amp;lt;unknown&amp;gt;\r\n#7 0x564266faf038 &amp;lt;unknown&amp;gt;\r\n#8 0x5642672038be &amp;lt;unknown&amp;gt;\r\n#9 0x5642672078f0 &amp;lt;unknown&amp;gt;\r\n#10 0x5642671e7f90 &amp;lt;unknown&amp;gt;\r\n#11 0x564267208b7d &amp;lt;unknown&amp;gt;\r\n#12 0x5642671d9578 &amp;lt;unknown&amp;gt;\r\n#13 0x56426722d348 &amp;lt;unknown&amp;gt;\r\n#14 0x56426722d4d6 &amp;lt;unknown&amp;gt;\r\n#15 0x564267247341 &amp;lt;unknown&amp;gt;\r\n#16 0x7f086945dea7 start_thread\r\n\r\n\tjava.base&amp;#47;jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tjava.base&amp;#47;jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n\tjava.base&amp;#47;jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tjava.base&amp;#47;java.lang.reflect.Constructor.newInstance(Constructor.java:490)\r\n\torg.openqa.selenium.remote.W3CHandshakeResponse.lambda$new$0(W3CHandshakeResponse.java:57)\r\n\torg.openqa.selenium.remote.W3CHandshakeResponse.lambda$getResponseFunction$2(W3CHandshakeResponse.java:104)\r\n\torg.openqa.selenium.remote.ProtocolHandshake.lambda$createSession$0(ProtocolHandshake.java:122)\r\n\tjava.base&amp;#47;java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\r\n\tjava.base&amp;#47;java.util.Spliterators$ArraySpliterator.tryAdvance(Spliterators.java:958)\r\n\tjava.base&amp;#47;java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:127)\r\n\tjava.base&amp;#47;java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:502)\r\n\tjava.base&amp;#47;java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:488)\r\n\tjava.base&amp;#47;java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\r\n\tjava.base&amp;#47;java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150)\r\n\tjava.base&amp;#47;java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tjava.base&amp;#47;java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:543)\r\n\torg.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:125)\r\n\torg.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:73)\r\n\torg.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:136)\r\n\torg.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:83)\r\n\torg.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:548)\r\n\torg.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:212)\r\n\torg.openqa.selenium.remote.RemoteWebDriver.&amp;lt;init&amp;gt;(RemoteWebDriver.java:130)\r\n\torg.openqa.selenium.chrome.ChromeDriver.&amp;lt;init&amp;gt;(ChromeDriver.java:181)\r\n\torg.openqa.selenium.chrome.ChromeDriver.&amp;lt;init&amp;gt;(ChromeDriver.java:168)\r\n\torg.openqa.selenium.chrome.ChromeDriver.&amp;lt;init&amp;gt;(ChromeDriver.java:157)\r\n\tcom.fourdcontrols.servlets.TestServlet.doGet(TestServlet.java:29)\r\n\tjakarta.servlet.http.HttpServlet.service(HttpServlet.java:668)\r\n\tjakarta.servlet.http.HttpServlet.service(HttpServlet.java:777)\r\n\torg.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n&lt;/pre&gt;\r\n\t&lt;p&gt;&lt;b&gt;Note&lt;/b&gt; The full stack trace of the root cause is available in the server logs.&lt;/p&gt;\r\n\t&lt;hr class=&quot;line&quot; /&gt;\r\n\t&lt;h3&gt;Apache Tomcat/10.0.23&lt;/h3&gt;\r\n&lt;/body&gt;\r\n```\r\n\r\n**Log:**\r\n\r\n```\r\nStarting ChromeDriver 110.0.5481.77 (65ed616c6e8ee3fe0ad64fe83796c020644d42af-refs/branch-heads/5481@{#839}) on port 29602\r\nOnly local connections are allowed.\r\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\r\nChromeDriver was started successfully.\r\n```\r\nI&#39;ve tried older versions of chrome driver and google chrome but get the same error.","title":"Selenium Chrome failed to start: crashed using chromedriverin Apache Tomcat/10.0.23 on a remote server","body":"<p>I am running a java webapp in Apache Tomcat/10.0.23 on a remote server which implements selenium chromedriver. However when I create the web driver it returns a HTTP Status 500 – Internal Server Error but in the logs is shows ChromeDriver was started successfully.</p>\n<p>Google-chrome location: /usr/bin/google-chrome /usr/share/man/man1/google-chrome.1.gz</p>\n<p>Google-chrome version: 110.0.5481.77</p>\n<p>Chromedriver location:  /usr/bin/chromedriver</p>\n<p>Chromedriver version: 110.0.5481.77 (65ed616c6e8ee3fe0ad64fe83796c020644d42af-refs/branch-heads/5481@{#839})</p>\n<p>Servlet:</p>\n<pre><code>import java.io.IOException;\nimport org.openqa.selenium.PageLoadStrategy;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.chrome.ChromeOptions;\n\nimport jakarta.servlet.ServletException;\nimport jakarta.servlet.annotation.WebServlet;\nimport jakarta.servlet.http.HttpServlet;\nimport jakarta.servlet.http.HttpServletRequest;\nimport jakarta.servlet.http.HttpServletResponse;\n\n@WebServlet(name = &quot;TestServlet&quot;, urlPatterns = { &quot;/test&quot; })\npublic class TestServlet extends HttpServlet {\n    @Override\n    protected void doGet(HttpServletRequest request, HttpServletResponse response)\n            throws ServletException, IOException {\n\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;/usr/bin/chromedriver&quot;);\n        ChromeOptions options = new ChromeOptions();\n        options.setPageLoadStrategy(PageLoadStrategy.EAGER);\n        options.addArguments(&quot;--headless=new&quot;);\n        options.addArguments(&quot;--disable-dev-shm-usage&quot;);\n        options.addArguments(&quot;--no-sandbox&quot;);\n        WebDriver driver = new ChromeDriver(options);\n        driver.get(&quot;https://www.google.com/&quot;);\n        System.out.println(&quot;Page Title: &quot; + driver.getTitle());\n        driver.quit();\n    }\n}\n</code></pre>\n<p>Error:</p>\n<pre><code>&lt;body&gt;\n    &lt;h1&gt;HTTP Status 500 – Internal Server Error&lt;/h1&gt;\n    &lt;hr class=&quot;line&quot; /&gt;\n    &lt;p&gt;&lt;b&gt;Type&lt;/b&gt; Exception Report&lt;/p&gt;\n    &lt;p&gt;&lt;b&gt;Message&lt;/b&gt; unknown error: Chrome failed to start: crashed.&lt;/p&gt;\n    &lt;p&gt;&lt;b&gt;Description&lt;/b&gt; The server encountered an unexpected condition that prevented it from fulfilling the request.\n    &lt;/p&gt;\n    &lt;p&gt;&lt;b&gt;Exception&lt;/b&gt;&lt;/p&gt;\n    &lt;pre&gt;org.openqa.selenium.WebDriverException: unknown error: Chrome failed to start: crashed.\n  (unknown error: DevToolsActivePort file doesn&amp;#39;t exist)\n  (The process started from chrome location &amp;#47;usr&amp;#47;bin&amp;#47;google-chrome is no longer running, so ChromeDriver is assuming that Chrome has crashed.)\nBuild info: version: &amp;#39;3.14.0&amp;#39;, revision: &amp;#39;aacccce0&amp;#39;, time: &amp;#39;2018-08-02T20:19:58.91Z&amp;#39;\nSystem info: host: &amp;#39;ip-xxxxxxxxxxx;, ip: &amp;#39;127.0.0.1&amp;#39;, os.name: &amp;#39;Linux&amp;#39;, os.arch: &amp;#39;amd64&amp;#39;, os.version: &amp;#39;5.10.0-21-cloud-amd64&amp;#39;, java.version: &amp;#39;11.0.15.1&amp;#39;\nDriver info: driver.version: ChromeDriver\nremote stacktrace: #0 0x5642671afd93 &amp;lt;unknown&amp;gt;\n#1 0x564266f7e2d7 &amp;lt;unknown&amp;gt;\n#2 0x564266fa6ab0 &amp;lt;unknown&amp;gt;\n#3 0x564266fa2a3d &amp;lt;unknown&amp;gt;\n#4 0x564266fe74f4 &amp;lt;unknown&amp;gt;\n#5 0x564266fde353 &amp;lt;unknown&amp;gt;\n#6 0x564266fade40 &amp;lt;unknown&amp;gt;\n#7 0x564266faf038 &amp;lt;unknown&amp;gt;\n#8 0x5642672038be &amp;lt;unknown&amp;gt;\n#9 0x5642672078f0 &amp;lt;unknown&amp;gt;\n#10 0x5642671e7f90 &amp;lt;unknown&amp;gt;\n#11 0x564267208b7d &amp;lt;unknown&amp;gt;\n#12 0x5642671d9578 &amp;lt;unknown&amp;gt;\n#13 0x56426722d348 &amp;lt;unknown&amp;gt;\n#14 0x56426722d4d6 &amp;lt;unknown&amp;gt;\n#15 0x564267247341 &amp;lt;unknown&amp;gt;\n#16 0x7f086945dea7 start_thread\n\n    java.base&amp;#47;jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    java.base&amp;#47;jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    java.base&amp;#47;jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    java.base&amp;#47;java.lang.reflect.Constructor.newInstance(Constructor.java:490)\n    org.openqa.selenium.remote.W3CHandshakeResponse.lambda$new$0(W3CHandshakeResponse.java:57)\n    org.openqa.selenium.remote.W3CHandshakeResponse.lambda$getResponseFunction$2(W3CHandshakeResponse.java:104)\n    org.openqa.selenium.remote.ProtocolHandshake.lambda$createSession$0(ProtocolHandshake.java:122)\n    java.base&amp;#47;java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\n    java.base&amp;#47;java.util.Spliterators$ArraySpliterator.tryAdvance(Spliterators.java:958)\n    java.base&amp;#47;java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:127)\n    java.base&amp;#47;java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:502)\n    java.base&amp;#47;java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:488)\n    java.base&amp;#47;java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\n    java.base&amp;#47;java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150)\n    java.base&amp;#47;java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n    java.base&amp;#47;java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:543)\n    org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:125)\n    org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:73)\n    org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:136)\n    org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:83)\n    org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:548)\n    org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:212)\n    org.openqa.selenium.remote.RemoteWebDriver.&amp;lt;init&amp;gt;(RemoteWebDriver.java:130)\n    org.openqa.selenium.chrome.ChromeDriver.&amp;lt;init&amp;gt;(ChromeDriver.java:181)\n    org.openqa.selenium.chrome.ChromeDriver.&amp;lt;init&amp;gt;(ChromeDriver.java:168)\n    org.openqa.selenium.chrome.ChromeDriver.&amp;lt;init&amp;gt;(ChromeDriver.java:157)\n    com.fourdcontrols.servlets.TestServlet.doGet(TestServlet.java:29)\n    jakarta.servlet.http.HttpServlet.service(HttpServlet.java:668)\n    jakarta.servlet.http.HttpServlet.service(HttpServlet.java:777)\n    org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n&lt;/pre&gt;\n    &lt;p&gt;&lt;b&gt;Note&lt;/b&gt; The full stack trace of the root cause is available in the server logs.&lt;/p&gt;\n    &lt;hr class=&quot;line&quot; /&gt;\n    &lt;h3&gt;Apache Tomcat/10.0.23&lt;/h3&gt;\n&lt;/body&gt;\n</code></pre>\n<p><strong>Log:</strong></p>\n<pre><code>Starting ChromeDriver 110.0.5481.77 (65ed616c6e8ee3fe0ad64fe83796c020644d42af-refs/branch-heads/5481@{#839}) on port 29602\nOnly local connections are allowed.\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\nChromeDriver was started successfully.\n</code></pre>\n<p>I've tried older versions of chrome driver and google chrome but get the same error.</p>\n"},{"tags":["java","jax-rs"],"comments":[{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1671818355,"post_id":74899041,"comment_id":132183893,"body_markdown":"Did you try it to see what happens?","body":"Did you try it to see what happens?"},{"owner":{"account_id":6228391,"reputation":708,"user_id":4845935,"display_name":"dimnnv"},"score":0,"creation_date":1671834543,"post_id":74899041,"comment_id":132187025,"body_markdown":"This was the production code that I’ve encountered in one of work projects. In theory I could simplify, run and debug it, but regardless of result, I still want to find some sort of ‘official confirmation’ of how it should work (e.g. documentation reference).","body":"This was the production code that I’ve encountered in one of work projects. In theory I could simplify, run and debug it, but regardless of result, I still want to find some sort of ‘official confirmation’ of how it should work (e.g. documentation reference)."},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1671912639,"post_id":74899041,"comment_id":132196825,"body_markdown":"I can tell you that on the Jersey client side, when you try to send a GET request with a body, you get an &quot;HTTP non-compliance error&quot;. I forgot on the server side, but there might have been a warning if not an error. Other implementations might be different. The semantics of the non-annotated parameter is always to be the body.","body":"I can tell you that on the Jersey client side, when you try to send a GET request with a body, you get an &quot;HTTP non-compliance error&quot;. I forgot on the server side, but there might have been a warning if not an error. Other implementations might be different. The semantics of the non-annotated parameter is always to be the body."}],"answers":[{"tags":[],"owner":{"account_id":1630483,"reputation":4039,"user_id":1505146,"accept_rate":50,"display_name":"Tasos P."},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1677842520,"creation_date":1677842520,"answer_id":75626445,"question_id":74899041,"body_markdown":"This is definitely a corner case due to the fact that HTTP specification ([RFC 2616](https://www.rfc-editor.org/rfc/rfc2616#section-9.3) at least) [does not explicitly forbid](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/GET) a body being present in a GET request.\r\n\r\nOn the other hand, JAX-RS ([JSR311](https://jcp.org/aboutJava/communityprocess/mrel/jsr311/index.html)) is very specific in 3.3.2.1:\r\n\r\n&gt; The value of a non-annotated parameter, called the entity parameter, is mapped from the request entity body.\r\nConversion between an entity body and a Java type is the responsibility of an entity provider, see section 4.2. &lt;br/&gt;\r\n&gt; Resource methods MUST NOT have more than one parameter that is not annotated with one of the above-\r\nlisted annotations.\r\n\r\nSo, to finally answer your question:\r\nAssuming your implementation accepts a GET request with a body (highly unlikely, based on my experience), JAX-RS *should* try to read it into the `domain` parameter.\r\n\r\nHowever, I&#39;d expect that `domain` would be `null`, since `GET` requests don&#39;t usually have a body, so with proper `null` handling of the parameter, this behavior can easily go undetected. ","title":"Non-annotated param of resource GET method","body":"<p>This is definitely a corner case due to the fact that HTTP specification (<a href=\"https://www.rfc-editor.org/rfc/rfc2616#section-9.3\" rel=\"nofollow noreferrer\">RFC 2616</a> at least) <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/GET\" rel=\"nofollow noreferrer\">does not explicitly forbid</a> a body being present in a GET request.</p>\n<p>On the other hand, JAX-RS (<a href=\"https://jcp.org/aboutJava/communityprocess/mrel/jsr311/index.html\" rel=\"nofollow noreferrer\">JSR311</a>) is very specific in 3.3.2.1:</p>\n<blockquote>\n<p>The value of a non-annotated parameter, called the entity parameter, is mapped from the request entity body.\nConversion between an entity body and a Java type is the responsibility of an entity provider, see section 4.2. <br/>\nResource methods MUST NOT have more than one parameter that is not annotated with one of the above-\nlisted annotations.</p>\n</blockquote>\n<p>So, to finally answer your question:\nAssuming your implementation accepts a GET request with a body (highly unlikely, based on my experience), JAX-RS <em>should</em> try to read it into the <code>domain</code> parameter.</p>\n<p>However, I'd expect that <code>domain</code> would be <code>null</code>, since <code>GET</code> requests don't usually have a body, so with proper <code>null</code> handling of the parameter, this behavior can easily go undetected.</p>\n"}],"owner":{"account_id":6228391,"reputation":708,"user_id":4845935,"display_name":"dimnnv"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1677858425,"creation_date":1671794291,"question_id":74899041,"body_markdown":"There are multiple annotations in JAX-RS method params: `@QueryParam`, `@PathParam`, etc.\r\nhttps://docs.oracle.com/cd/E19798-01/821-1841/6nmq2cp1v/index.html\r\n\r\nHowever, these annotations are not mandatory. I have a situation when a parameter of GET method is not annotated:\r\n\r\n```\r\n  @GET\r\n  @Produces(MediaType.APPLICATION_JSON)\r\n  public Map&lt;String, Object&gt; getProduct(\r\n      String domain,\r\n      @QueryParam(&quot;code&quot;) String code,\r\n      @QueryParam(&quot;region&quot;) String region\r\n  ) {\r\n```\r\nHere **domain** parameter is not annotated at all. I’m not sure what it means. (It is a production code from some repository).\r\n\r\nFor POST methods this would mean that domain parameter would consume request body: https://stackoverflow.com/questions/1725315/how-to-get-full-rest-request-body-using-jersey\r\n\r\nBut what it would mean for GET method? As far as I know body does not make much sense for GET requests (i.e., it can be safely ignored according to web standard).\r\n\r\nWhat is the default fallback for unannotated parameters? I did not find the answer in documentation.","title":"Non-annotated param of resource GET method","body":"<p>There are multiple annotations in JAX-RS method params: <code>@QueryParam</code>, <code>@PathParam</code>, etc.\n<a href=\"https://docs.oracle.com/cd/E19798-01/821-1841/6nmq2cp1v/index.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/cd/E19798-01/821-1841/6nmq2cp1v/index.html</a></p>\n<p>However, these annotations are not mandatory. I have a situation when a parameter of GET method is not annotated:</p>\n<pre><code>  @GET\n  @Produces(MediaType.APPLICATION_JSON)\n  public Map&lt;String, Object&gt; getProduct(\n      String domain,\n      @QueryParam(&quot;code&quot;) String code,\n      @QueryParam(&quot;region&quot;) String region\n  ) {\n</code></pre>\n<p>Here <strong>domain</strong> parameter is not annotated at all. I’m not sure what it means. (It is a production code from some repository).</p>\n<p>For POST methods this would mean that domain parameter would consume request body: <a href=\"https://stackoverflow.com/questions/1725315/how-to-get-full-rest-request-body-using-jersey\">How to get full REST request body using Jersey?</a></p>\n<p>But what it would mean for GET method? As far as I know body does not make much sense for GET requests (i.e., it can be safely ignored according to web standard).</p>\n<p>What is the default fallback for unannotated parameters? I did not find the answer in documentation.</p>\n"},{"tags":["java","csv","apache-camel","spring-camel","bindy"],"comments":[{"owner":{"account_id":2269593,"reputation":43907,"user_id":1997376,"accept_rate":100,"display_name":"Nicolas Filotto"},"score":0,"creation_date":1678212487,"post_id":75629178,"comment_id":133488411,"body_markdown":"I&#39;m afraid that your assumption is correct, it is only position-based right now. Feel free to create a ticket for this need","body":"I&#39;m afraid that your assumption is correct, it is only position-based right now. Feel free to create a ticket for this need"}],"owner":{"account_id":1887821,"reputation":2984,"user_id":1706691,"accept_rate":69,"display_name":"James"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1677858398,"creation_date":1677858398,"question_id":75629178,"body_markdown":"I found several examples of [Apache Camel Bindy][1] unmarshalling CSV records into POJOs using field position:\r\n\r\n    @CsvRecord(separator = &quot;,&quot;)\r\n    public class Person {\r\n    \r\n        @DataField(pos = 1)\r\n        private String name;\r\n        @DataField(pos = 2)\r\n        private String address;\r\n\r\nI have 50+ different CSV files that I want to unmarshall into the same POJO. Each file has a header. The header names remain constant between the files, but the field position varies. For example, \r\n\r\n    File1.csv\r\n    --------------------------- \r\n    name,homeAddress,someOtherFields\r\n    bob,123 Any Street,data\r\n     \r\n    File2.csv \r\n    ---------------------------\r\n    homeAddress,name,someOtherFields\r\n    321 XYZ Street,jill,data\r\n     \r\n    File3.csv \r\n    ---------------------------\r\n    name,someOtherFields,homeAddress \r\n    sue,data,123 Any Street\r\n     \r\n    etc.\r\n\r\nI was hoping something like this would work:\r\n    \r\n    @CsvRecord(separator = &quot;,&quot;)\r\n    public class Person {\r\n    \r\n        @DataField(columnName = &quot;name&quot;)\r\n        private String name;\r\n        @DataField(columnName = &quot;homeAddress&quot;)\r\n        private String address;\r\n\r\nBut `columnName` seems to be used for ouptut only. Also, `pos` is required.\r\n\r\n\r\n  [1]: https://camel.apache.org/components/3.20.x/dataformats/bindy-dataformat.html\r\n\r\n","title":"Can Apache Camel unmarshal CSV records into a POJO using header names?","body":"<p>I found several examples of <a href=\"https://camel.apache.org/components/3.20.x/dataformats/bindy-dataformat.html\" rel=\"nofollow noreferrer\">Apache Camel Bindy</a> unmarshalling CSV records into POJOs using field position:</p>\n<pre><code>@CsvRecord(separator = &quot;,&quot;)\npublic class Person {\n\n    @DataField(pos = 1)\n    private String name;\n    @DataField(pos = 2)\n    private String address;\n</code></pre>\n<p>I have 50+ different CSV files that I want to unmarshall into the same POJO. Each file has a header. The header names remain constant between the files, but the field position varies. For example,</p>\n<pre><code>File1.csv\n--------------------------- \nname,homeAddress,someOtherFields\nbob,123 Any Street,data\n \nFile2.csv \n---------------------------\nhomeAddress,name,someOtherFields\n321 XYZ Street,jill,data\n \nFile3.csv \n---------------------------\nname,someOtherFields,homeAddress \nsue,data,123 Any Street\n \netc.\n</code></pre>\n<p>I was hoping something like this would work:</p>\n<pre><code>@CsvRecord(separator = &quot;,&quot;)\npublic class Person {\n\n    @DataField(columnName = &quot;name&quot;)\n    private String name;\n    @DataField(columnName = &quot;homeAddress&quot;)\n    private String address;\n</code></pre>\n<p>But <code>columnName</code> seems to be used for ouptut only. Also, <code>pos</code> is required.</p>\n"},{"tags":["java","language-agnostic","parameters","out-parameters"],"comments":[{"owner":{"account_id":52616,"reputation":1042915,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"score":1,"creation_date":1292453540,"post_id":4455693,"comment_id":4867681,"body_markdown":"*&quot;return values: I&#39;d like a general solution. I.e. one with several IN OUT parameters involved&quot;* See my answer. Several IN/OUT params? Return an object instance with properties for each. Barring that, no, there&#39;s nothing better than the array trick.","body":"<i>&quot;return values: I&#39;d like a general solution. I.e. one with several IN OUT parameters involved&quot;</i> See my answer. Several IN/OUT params? Return an object instance with properties for each. Barring that, no, there&#39;s nothing better than the array trick."},{"owner":{"account_id":69443,"reputation":85343,"user_id":202009,"accept_rate":79,"display_name":"Andy Thomas"},"score":1,"creation_date":1292454301,"post_id":4455693,"comment_id":4867769,"body_markdown":"When I first began learning Java, after many years of C/C++ development, I also looked for a way to pass by reference. But now, years after that, I can no longer recall the last time I wanted to do that. The array trick is less elegant than other approaches cited in these answers and comments.","body":"When I first began learning Java, after many years of C/C++ development, I also looked for a way to pass by reference. But now, years after that, I can no longer recall the last time I wanted to do that. The array trick is less elegant than other approaches cited in these answers and comments."}],"answers":[{"tags":[],"owner":{"account_id":52616,"reputation":1042915,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1292453354,"creation_date":1292452933,"answer_id":4455707,"question_id":4455693,"body_markdown":"My question would be: Why doesn&#39;t `method` *return* something? Rather than setting an in/out argument?\r\n\r\nBut assuming you *absolutely, positively must* have an in/out argument, which is a whole different question, then the array trick is fine. Alternately, it&#39;s not less clumsy, but the other way is to pass in an object reference:\r\n\r\n    public class Foo {\r\n        private String value;\r\n\r\n        public Foo(String v) {\r\n            this.value = v;\r\n        }\r\n\r\n        public String getValue() {\r\n            return this.value;\r\n        }\r\n\r\n        public void setValue(String v) {\r\n            this.value = v;\r\n        }\r\n     }\r\n\r\n     // ....\r\n     public void method(String in, Foo inOut) {\r\n         inOut.setValue(in);\r\n     }\r\n\r\n(Or, of course, just make `value` public.) See? I said it wasn&#39;t less clumsy.\r\n\r\nBut I&#39;d ask again: Can&#39;t `method` return something? And if it needs to return multiple things, can&#39;t it return an object instance with properties for those things?\r\n\r\n**Off-topic:** This is one of the areas where I really like the C# approach. One of the arguments against in/out arguments is that they&#39;re unclear at the point where you&#39;re *calling* the function. So C# makes you make it clear, by specifying the keyword both at the declaration of the function *and* when calling it. In the absense of that kind of syntactic help, I&#39;d avoid &quot;simulating&quot; in/out arguments.","title":"How to create IN OUT or OUT parameters in Java","body":"<p>My question would be: Why doesn't <code>method</code> <em>return</em> something? Rather than setting an in/out argument?</p>\n\n<p>But assuming you <em>absolutely, positively must</em> have an in/out argument, which is a whole different question, then the array trick is fine. Alternately, it's not less clumsy, but the other way is to pass in an object reference:</p>\n\n<pre><code>public class Foo {\n    private String value;\n\n    public Foo(String v) {\n        this.value = v;\n    }\n\n    public String getValue() {\n        return this.value;\n    }\n\n    public void setValue(String v) {\n        this.value = v;\n    }\n }\n\n // ....\n public void method(String in, Foo inOut) {\n     inOut.setValue(in);\n }\n</code></pre>\n\n<p>(Or, of course, just make <code>value</code> public.) See? I said it wasn't less clumsy.</p>\n\n<p>But I'd ask again: Can't <code>method</code> return something? And if it needs to return multiple things, can't it return an object instance with properties for those things?</p>\n\n<p><strong>Off-topic:</strong> This is one of the areas where I really like the C# approach. One of the arguments against in/out arguments is that they're unclear at the point where you're <em>calling</em> the function. So C# makes you make it clear, by specifying the keyword both at the declaration of the function <em>and</em> when calling it. In the absense of that kind of syntactic help, I'd avoid \"simulating\" in/out arguments.</p>\n"},{"tags":[],"owner":{"account_id":149087,"reputation":18896,"user_id":361319,"accept_rate":62,"display_name":"dty"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1677858260,"creation_date":1292452940,"answer_id":4455710,"question_id":4455693,"body_markdown":"There&#39;s no direct way. Other techniques include:\r\n\r\n - Passing a holder object (a bit like your 1-ary array)\r\n - Using, e.g., an AtomicInteger\r\n - Passing a more useful object from a business perspective that happens to be mutable\r\n - A callback to a custom interface for receiving the result\r\n\r\nIf you think about it, the array trick is not dissimilar to passing a T* in C/C++","title":"How to create IN OUT or OUT parameters in Java","body":"<p>There's no direct way. Other techniques include:</p>\n<ul>\n<li>Passing a holder object (a bit like your 1-ary array)</li>\n<li>Using, e.g., an AtomicInteger</li>\n<li>Passing a more useful object from a business perspective that happens to be mutable</li>\n<li>A callback to a custom interface for receiving the result</li>\n</ul>\n<p>If you think about it, the array trick is not dissimilar to passing a T* in C/C++</p>\n"},{"tags":[],"owner":{"account_id":191595,"reputation":3629,"user_id":432259,"accept_rate":94,"display_name":"Art Licis"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1292453159,"creation_date":1292453159,"answer_id":4455730,"question_id":4455693,"body_markdown":"Java copies anything you pass as an argument. If you pass a primitive, inside method you have copy of that primitive, and no modifications will affect the actual variable outside method. If you pass object, you pass copy of reference, which actually references to the original object. This is the way how you can propagate modifications to the context of something that called the method - by modifying the state of the object that the reference is &#39;pointing&#39; to. See more on this: [Does Java Pass by Value or by Reference?][1]\r\n\r\n\r\n  [1]: http://www.javaworld.com/javaqa/2000-05/03-qa-0526-pass.html","title":"How to create IN OUT or OUT parameters in Java","body":"<p>Java copies anything you pass as an argument. If you pass a primitive, inside method you have copy of that primitive, and no modifications will affect the actual variable outside method. If you pass object, you pass copy of reference, which actually references to the original object. This is the way how you can propagate modifications to the context of something that called the method - by modifying the state of the object that the reference is 'pointing' to. See more on this: <a href=\"http://www.javaworld.com/javaqa/2000-05/03-qa-0526-pass.html\" rel=\"nofollow\">Does Java Pass by Value or by Reference?</a></p>\n"}],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26911,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":4455707,"answer_count":3,"score":11,"last_activity_date":1677858260,"creation_date":1292452792,"question_id":4455693,"body_markdown":"In PL/SQL (or many other languages), I can have IN OUT or OUT parameters, which are returned from a procedure. How can I achieve a similar thing in Java?\r\n\r\nI know this trick:\r\n\r\n    public void method(String in, String[] inOut, String[] inOut2) {\r\n      inOut[0] = in;\r\n    }\r\n\r\nWhere the `in` parameter represents an IN parameter and the `inOut` parameter can hold a return value. The convention would be that `String[] inOut` is an array of `inOut.length == 1`.\r\n\r\nThat&#39;s kind of clumsy. \r\n\r\n**EDIT Feedback to answers**: Other tricks include:\r\n\r\n  - holder/wrapper classes, but I don&#39;t want to introduce any new types, callbacks, etc.\r\n  - return values: I&#39;d like a **general** solution. I.e. one with several IN OUT parameters involved.\r\n  - wrapper for IN OUT parameter as a return value: That&#39;s a viable option, but still not so nice, because that wrapper would have to be generated somehow\r\n\r\nDoes anyone know a better way to achieve this generally? The reason I need a general solution is because I want to generate convenience source code from PL/SQL in a database schema.","title":"How to create IN OUT or OUT parameters in Java","body":"<p>In PL/SQL (or many other languages), I can have IN OUT or OUT parameters, which are returned from a procedure. How can I achieve a similar thing in Java?</p>\n\n<p>I know this trick:</p>\n\n<pre><code>public void method(String in, String[] inOut, String[] inOut2) {\n  inOut[0] = in;\n}\n</code></pre>\n\n<p>Where the <code>in</code> parameter represents an IN parameter and the <code>inOut</code> parameter can hold a return value. The convention would be that <code>String[] inOut</code> is an array of <code>inOut.length == 1</code>.</p>\n\n<p>That's kind of clumsy. </p>\n\n<p><strong>EDIT Feedback to answers</strong>: Other tricks include:</p>\n\n<ul>\n<li>holder/wrapper classes, but I don't want to introduce any new types, callbacks, etc.</li>\n<li>return values: I'd like a <strong>general</strong> solution. I.e. one with several IN OUT parameters involved.</li>\n<li>wrapper for IN OUT parameter as a return value: That's a viable option, but still not so nice, because that wrapper would have to be generated somehow</li>\n</ul>\n\n<p>Does anyone know a better way to achieve this generally? The reason I need a general solution is because I want to generate convenience source code from PL/SQL in a database schema.</p>\n"},{"tags":["java","spring","spring-boot","spring-data-mongodb"],"comments":[{"owner":{"account_id":1473276,"reputation":110999,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1677836575,"post_id":75621457,"comment_id":133419820,"body_markdown":"Have you compiled your Mongo entities with `-parameters`?","body":"Have you compiled your Mongo entities with <code>-parameters</code>?"},{"owner":{"account_id":3456997,"reputation":241,"user_id":2895277,"display_name":"Chad Showalter"},"score":0,"creation_date":1677846697,"post_id":75621457,"comment_id":133422400,"body_markdown":"@Andy Wilkinson No, we have not.  In looking closer at [the docs](https://docs.spring.io/spring-data/mongodb/docs/current/reference/html/) I see that this is mentioned under Customized Object Construction.  We do frequently have entities with multiple constructors and use @PersistenceConstructor/Creator to indicate the one to be used by the framework.  Until the upgrade to Spring Boot 3, this &quot;just worked.&quot;  Is compiling with `-parameters` a reasonable pattern for this scenario?  It does indeed eliminate the errors in our case when I do so.","body":"@Andy Wilkinson No, we have not.  In looking closer at <a href=\"https://docs.spring.io/spring-data/mongodb/docs/current/reference/html/\" rel=\"nofollow noreferrer\">the docs</a> I see that this is mentioned under Customized Object Construction.  We do frequently have entities with multiple constructors and use @PersistenceConstructor/Creator to indicate the one to be used by the framework.  Until the upgrade to Spring Boot 3, this &quot;just worked.&quot;  Is compiling with <code>-parameters</code> a reasonable pattern for this scenario?  It does indeed eliminate the errors in our case when I do so."},{"owner":{"account_id":1473276,"reputation":110999,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1677847015,"post_id":75621457,"comment_id":133422489,"body_markdown":"Yes, it&#39;s both reasonable and recommended. The change in behavior in Spring Boot 3.0 is due to [this change in Spring Framework 6.0](https://github.com/spring-projects/spring-framework/pull/29531).","body":"Yes, it&#39;s both reasonable and recommended. The change in behavior in Spring Boot 3.0 is due to <a href=\"https://github.com/spring-projects/spring-framework/pull/29531\" rel=\"nofollow noreferrer\">this change in Spring Framework 6.0</a>."},{"owner":{"account_id":3456997,"reputation":241,"user_id":2895277,"display_name":"Chad Showalter"},"score":0,"creation_date":1677848630,"post_id":75621457,"comment_id":133422931,"body_markdown":"Okay, and thanks. Regarding the compiler flag, is it reasonable/recommended to compile our entire java codebase with `-parameters` or would it be better to somehow segment compilation between parts of our codebase that need it and those that do not?  E.g. compile the entities as their own artifact.  Or some other way.","body":"Okay, and thanks. Regarding the compiler flag, is it reasonable/recommended to compile our entire java codebase with <code>-parameters</code> or would it be better to somehow segment compilation between parts of our codebase that need it and those that do not?  E.g. compile the entities as their own artifact.  Or some other way."},{"owner":{"account_id":1473276,"reputation":110999,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1677850551,"post_id":75621457,"comment_id":133423451,"body_markdown":"If it were me, I&#39;d turn it on everywhere. It may increase class sizes a little but I would not expect the effect to be too dramatic. I&#39;d only split things into separate artifacts if really necessary.","body":"If it were me, I&#39;d turn it on everywhere. It may increase class sizes a little but I would not expect the effect to be too dramatic. I&#39;d only split things into separate artifacts if really necessary."}],"answers":[{"tags":[],"owner":{"account_id":1473276,"reputation":110999,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1677857546,"creation_date":1677857546,"answer_id":75629035,"question_id":75621457,"body_markdown":"Due to [these changes in Spring Framework 6.0](https://github.com/spring-projects/spring-framework/pull/29531), the use of the `-parameters` compiler option is now strongly encouraged. It allows the names of constructor and methods parameters to be discovered without having to resort to extracting them from debug information in `.class` files.\r\n\r\nSpring Framework 6&#39;s [upgrade guide](https://github.com/spring-projects/spring-framework/wiki/Upgrading-to-Spring-Framework-6.x) has the following to say on this topic:\r\n\r\n&gt; `LocalVariableTableParameterNameDiscoverer` is deprecated now and logs a warning for each successful resolution attempt (it only kicks in when `StandardReflectionParameterNameDiscoverer` has not found names). Compile your Java sources with the common Java 8+ `-parameters` flag for parameter name retention (instead of relying on the `-debug` compiler flag) in order to avoid that warning, or report it to the maintainers of the affected code. With the Kotlin compiler, we recommend the `-java-parameters` flag for completeness.","title":"&quot;Using deprecated &#39;-debug&#39; fallback for parameter name resolution&quot; warning persists in Spring Boot 3.0.3 when MongoMappingContext creates entities","body":"<p>Due to <a href=\"https://github.com/spring-projects/spring-framework/pull/29531\" rel=\"nofollow noreferrer\">these changes in Spring Framework 6.0</a>, the use of the <code>-parameters</code> compiler option is now strongly encouraged. It allows the names of constructor and methods parameters to be discovered without having to resort to extracting them from debug information in <code>.class</code> files.</p>\n<p>Spring Framework 6's <a href=\"https://github.com/spring-projects/spring-framework/wiki/Upgrading-to-Spring-Framework-6.x\" rel=\"nofollow noreferrer\">upgrade guide</a> has the following to say on this topic:</p>\n<blockquote>\n<p><code>LocalVariableTableParameterNameDiscoverer</code> is deprecated now and logs a warning for each successful resolution attempt (it only kicks in when <code>StandardReflectionParameterNameDiscoverer</code> has not found names). Compile your Java sources with the common Java 8+ <code>-parameters</code> flag for parameter name retention (instead of relying on the <code>-debug</code> compiler flag) in order to avoid that warning, or report it to the maintainers of the affected code. With the Kotlin compiler, we recommend the <code>-java-parameters</code> flag for completeness.</p>\n</blockquote>\n"}],"owner":{"account_id":3456997,"reputation":241,"user_id":2895277,"display_name":"Chad Showalter"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3682,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75629035,"answer_count":1,"score":0,"last_activity_date":1677857546,"creation_date":1677796440,"question_id":75621457,"body_markdown":"I am using Spring Boot 3.0.3, Spring Core 6.0.5 with Spring Data MongoDB 4.0.2.  I see many warning messages of the form \r\n```\r\nocalVariableTableParameterNameDiscoverer : Using deprecated &#39;-debug&#39; fallback for parameter name resolution. Compile the affected code with &#39;-parameters&#39; instead or avoid its introspection: &lt;your mongo entity here&gt;\r\n```\r\nInserting a breakpoint at source of the message, I get this stack trace: \r\n```inspectClass:123, LocalVariableTableParameterNameDiscoverer (org.springframework.core)\r\napply:-1, LocalVariableTableParameterNameDiscoverer$$Lambda$1162/0x00000008013cfa98 (org.springframework.core)\r\ncomputeIfAbsent:1708, ConcurrentHashMap (java.util.concurrent)\r\ndoGetParameterNames:96, LocalVariableTableParameterNameDiscoverer (org.springframework.core)\r\ngetParameterNames:90, LocalVariableTableParameterNameDiscoverer (org.springframework.core)\r\ngetParameterNames:67, PrioritizedParameterNameDiscoverer (org.springframework.core)\r\nbuildPreferredConstructor:236, PreferredConstructorDiscoverer$Discoverers (org.springframework.data.mapping.model)\r\ndiscover:118, PreferredConstructorDiscoverer$Discoverers$1 (org.springframework.data.mapping.model)\r\ndiscover:82, PreferredConstructorDiscoverer (org.springframework.data.mapping.model)\r\ndiscover:81, InstanceCreatorMetadataDiscoverer (org.springframework.data.mapping.model)\r\n&lt;init&gt;:113, BasicPersistentEntity (org.springframework.data.mapping.model)\r\n&lt;init&gt;:84, BasicMongoPersistentEntity (org.springframework.data.mongodb.core.mapping)\r\ncreatePersistentEntity:88, MongoMappingContext (org.springframework.data.mongodb.core.mapping)\r\ncreatePersistentEntity:41, MongoMappingContext (org.springframework.data.mongodb.core.mapping)\r\ndoAddPersistentEntity:403, AbstractMappingContext (org.springframework.data.mapping.context)\r\naddPersistentEntity:379, AbstractMappingContext (org.springframework.data.mapping.context)\r\naddPersistentEntity:339, AbstractMappingContext (org.springframework.data.mapping.context)\r\naccept:-1, AbstractMappingContext$$Lambda$1098/0x00000008013bded0 (org.springframework.data.mapping.context)\r\nforEach:75, Iterable (java.lang)\r\nforEach:-1, ManagedTypes$$Lambda$1093/0x00000008013b90f0 (org.springframework.data.domain)\r\nforEach:79, MongoManagedTypes (org.springframework.data.mongodb)\r\ninitialize:484, AbstractMappingContext (org.springframework.data.mapping.context)\r\nafterPropertiesSet:476, AbstractMappingContext (org.springframework.data.mapping.context)\r\ninvokeInitMethods:1798, AbstractAutowireCapableBeanFactory (org.springframework.beans.factory.support)\r\ninitializeBean:1748, AbstractAutowireCapableBeanFactory (org.springframework.beans.factory.support)\r\ndoCreateBean:600, AbstractAutowireCapableBeanFactory (org.springframework.beans.factory.support)\r\ncreateBean:522, AbstractAutowireCapableBeanFactory (org.springframework.beans.factory.support)\r\nlambda$doGetBean$0:326, AbstractBeanFactory (org.springframework.beans.factory.support)\r\ngetObject:-1, AbstractBeanFactory$$Lambda$414/0x0000000800e45ff0 (org.springframework.beans.factory.support)\r\ngetSingleton:234, DefaultSingletonBeanRegistry (org.springframework.beans.factory.support)\r\ndoGetBean:324, AbstractBeanFactory (org.springframework.beans.factory.support)\r\ngetBean:200, AbstractBeanFactory (org.springframework.beans.factory.support)\r\nresolveCandidate:254, DependencyDescriptor (org.springframework.beans.factory.config)\r\ndoResolveDependency:1405, DefaultListableBeanFactory (org.springframework.beans.factory.support)\r\nresolveDependency:1325, DefaultListableBeanFactory (org.springframework.beans.factory.support)\r\nresolveAutowiredArgument:885, ConstructorResolver (org.springframework.beans.factory.support)\r\ncreateArgumentArray:789, ConstructorResolver (org.springframework.beans.factory.support)\r\ninstantiateUsingFactoryMethod:548, ConstructorResolver (org.springframework.beans.factory.support)\r\n... truncated\r\n```\r\nI am aware of [this issue][1] but I understand that I am using code that should contain the fix explained there.  Is this evidence that we&#39;re not following current recommended practices for initializing our Mongo entities somehow?  We did not see this warning prior to upgrading our app to Spring Boot 3.0.x.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/74845574/using-deprecated-debug-fallback-for-parameter-name-resolution-compile-the-af","title":"&quot;Using deprecated &#39;-debug&#39; fallback for parameter name resolution&quot; warning persists in Spring Boot 3.0.3 when MongoMappingContext creates entities","body":"<p>I am using Spring Boot 3.0.3, Spring Core 6.0.5 with Spring Data MongoDB 4.0.2.  I see many warning messages of the form</p>\n<pre><code>ocalVariableTableParameterNameDiscoverer : Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: &lt;your mongo entity here&gt;\n</code></pre>\n<p>Inserting a breakpoint at source of the message, I get this stack trace:</p>\n<pre><code>apply:-1, LocalVariableTableParameterNameDiscoverer$$Lambda$1162/0x00000008013cfa98 (org.springframework.core)\ncomputeIfAbsent:1708, ConcurrentHashMap (java.util.concurrent)\ndoGetParameterNames:96, LocalVariableTableParameterNameDiscoverer (org.springframework.core)\ngetParameterNames:90, LocalVariableTableParameterNameDiscoverer (org.springframework.core)\ngetParameterNames:67, PrioritizedParameterNameDiscoverer (org.springframework.core)\nbuildPreferredConstructor:236, PreferredConstructorDiscoverer$Discoverers (org.springframework.data.mapping.model)\ndiscover:118, PreferredConstructorDiscoverer$Discoverers$1 (org.springframework.data.mapping.model)\ndiscover:82, PreferredConstructorDiscoverer (org.springframework.data.mapping.model)\ndiscover:81, InstanceCreatorMetadataDiscoverer (org.springframework.data.mapping.model)\n&lt;init&gt;:113, BasicPersistentEntity (org.springframework.data.mapping.model)\n&lt;init&gt;:84, BasicMongoPersistentEntity (org.springframework.data.mongodb.core.mapping)\ncreatePersistentEntity:88, MongoMappingContext (org.springframework.data.mongodb.core.mapping)\ncreatePersistentEntity:41, MongoMappingContext (org.springframework.data.mongodb.core.mapping)\ndoAddPersistentEntity:403, AbstractMappingContext (org.springframework.data.mapping.context)\naddPersistentEntity:379, AbstractMappingContext (org.springframework.data.mapping.context)\naddPersistentEntity:339, AbstractMappingContext (org.springframework.data.mapping.context)\naccept:-1, AbstractMappingContext$$Lambda$1098/0x00000008013bded0 (org.springframework.data.mapping.context)\nforEach:75, Iterable (java.lang)\nforEach:-1, ManagedTypes$$Lambda$1093/0x00000008013b90f0 (org.springframework.data.domain)\nforEach:79, MongoManagedTypes (org.springframework.data.mongodb)\ninitialize:484, AbstractMappingContext (org.springframework.data.mapping.context)\nafterPropertiesSet:476, AbstractMappingContext (org.springframework.data.mapping.context)\ninvokeInitMethods:1798, AbstractAutowireCapableBeanFactory (org.springframework.beans.factory.support)\ninitializeBean:1748, AbstractAutowireCapableBeanFactory (org.springframework.beans.factory.support)\ndoCreateBean:600, AbstractAutowireCapableBeanFactory (org.springframework.beans.factory.support)\ncreateBean:522, AbstractAutowireCapableBeanFactory (org.springframework.beans.factory.support)\nlambda$doGetBean$0:326, AbstractBeanFactory (org.springframework.beans.factory.support)\ngetObject:-1, AbstractBeanFactory$$Lambda$414/0x0000000800e45ff0 (org.springframework.beans.factory.support)\ngetSingleton:234, DefaultSingletonBeanRegistry (org.springframework.beans.factory.support)\ndoGetBean:324, AbstractBeanFactory (org.springframework.beans.factory.support)\ngetBean:200, AbstractBeanFactory (org.springframework.beans.factory.support)\nresolveCandidate:254, DependencyDescriptor (org.springframework.beans.factory.config)\ndoResolveDependency:1405, DefaultListableBeanFactory (org.springframework.beans.factory.support)\nresolveDependency:1325, DefaultListableBeanFactory (org.springframework.beans.factory.support)\nresolveAutowiredArgument:885, ConstructorResolver (org.springframework.beans.factory.support)\ncreateArgumentArray:789, ConstructorResolver (org.springframework.beans.factory.support)\ninstantiateUsingFactoryMethod:548, ConstructorResolver (org.springframework.beans.factory.support)\n... truncated\n</code></pre>\n<p>I am aware of <a href=\"https://stackoverflow.com/questions/74845574/using-deprecated-debug-fallback-for-parameter-name-resolution-compile-the-af\">this issue</a> but I understand that I am using code that should contain the fix explained there.  Is this evidence that we're not following current recommended practices for initializing our Mongo entities somehow?  We did not see this warning prior to upgrading our app to Spring Boot 3.0.x.</p>\n"},{"tags":["java","android","bluetooth"],"comments":[{"owner":{"account_id":11524089,"reputation":161,"user_id":8445079,"display_name":"Paolino L Angeletti"},"score":1,"creation_date":1677765199,"post_id":75616022,"comment_id":133405024,"body_markdown":"can you post your entire code?\nThe problem seems to be related to a client bluetooth not previous closed.","body":"can you post your entire code? The problem seems to be related to a client bluetooth not previous closed."},{"owner":{"account_id":27054227,"reputation":1,"user_id":20607170,"display_name":"emrecuni"},"score":0,"creation_date":1677830194,"post_id":75616022,"comment_id":133418240,"body_markdown":"my code is above","body":"my code is above"}],"answers":[{"tags":[],"owner":{"account_id":11524089,"reputation":161,"user_id":8445079,"display_name":"Paolino L Angeletti"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677857329,"creation_date":1677857329,"answer_id":75628997,"question_id":75616022,"body_markdown":"try this code:\r\n\r\n    if(!fail) {\r\n        mConnectedThread = new ConnectedThread(mBTSocket, mHandler);\r\n        mConnectedThread.start();\r\n        mHandler.obtainMessage(CONNECTING_STATUS, 1, -1, name).sendToTarget();\r\n        mBTSocket.close();\r\n    }","title":"Bluetooth Connection Exception On Java","body":"<p>try this code:</p>\n<pre><code>if(!fail) {\n    mConnectedThread = new ConnectedThread(mBTSocket, mHandler);\n    mConnectedThread.start();\n    mHandler.obtainMessage(CONNECTING_STATUS, 1, -1, name).sendToTarget();\n    mBTSocket.close();\n}\n</code></pre>\n"}],"owner":{"account_id":27054227,"reputation":1,"user_id":20607170,"display_name":"emrecuni"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677857329,"creation_date":1677763403,"question_id":75616022,"body_markdown":"I want to make a bluetooth connection. I can scan but cannot pair devices. I get an error like this &quot;read failed, socket might closed or timeout&quot;. \r\n\r\nIt is written in other titles to use &quot;createRfcommSocketToServiceRecord&quot; instead of &quot;createInsecureRfcommSocketToServiceRecord&quot;. However, this was not the solution.\r\n\r\n\r\n\r\n        @Override\r\n        public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {\r\n\r\n            if(!mBTAdapter.isEnabled()) {\r\n                Toast.makeText(getBaseContext(), getString(R.string.BTnotOn), Toast.LENGTH_SHORT).show();\r\n                return;\r\n            }\r\n\r\n            mBluetoothStatus.setText(getString(R.string.cConnet));\r\n            // Get the device MAC address, which is the last 17 chars in the View\r\n            String info = ((TextView) view).getText().toString();\r\n            final String address = info.substring(info.length() - 17);\r\n            final String name = info.substring(0,info.length() - 17);\r\n\r\n            // Spawn a new thread to avoid blocking the GUI one\r\n            new Thread()\r\n            {\r\n                @Override\r\n                public void run() {\r\n                    boolean fail = false;\r\n\r\n                    try {\r\n                        mBTSocket = createBluetoothSocket(device);\r\n                    } catch (IOException e) {\r\n                        fail = true;\r\n                        Toast.makeText(getBaseContext(), getString(R.string.ErrSockCrea), Toast.LENGTH_SHORT).show();\r\n                    }\r\n                    // Establish the Bluetooth socket connection.\r\n                    try {\r\n                        mBTSocket.connect();\r\n                    } catch (IOException e) {\r\n                        System.out.println(e.getMessage());\r\n                        try {\r\n                            fail = true;\r\n                            mBTSocket.close();\r\n                            mHandler.obtainMessage(CONNECTING_STATUS, -1, -1)\r\n                                    .sendToTarget();\r\n                        } catch (IOException e2) {\r\n                            //insert code to deal with this\r\n                            Toast.makeText(getBaseContext(), getString(R.string.ErrSockCrea), Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }\r\n                    if(!fail) {\r\n                        mConnectedThread = new ConnectedThread(mBTSocket, mHandler);\r\n                        mConnectedThread.start();\r\n\r\n                        mHandler.obtainMessage(CONNECTING_STATUS, 1, -1, name)\r\n                                .sendToTarget();\r\n                    }\r\n                }\r\n            }.start();\r\n        }\r\n    };\r\n\r\n    private BluetoothSocket createBluetoothSocket(BluetoothDevice device) throws IOException {\r\n        try {\r\n            final Method m = device.getClass().getMethod(&quot;createRfcommSocketToServiceRecord&quot;, UUID.class); \r\n            return (BluetoothSocket) m.invoke(device, BT_MODULE_UUID);\r\n        } catch (Exception e) {\r\n            Log.e(TAG, &quot;Could not create Insecure RFComm Connection&quot;,e);\r\n        }\r\n        return  device.createRfcommSocketToServiceRecord(BT_MODULE_UUID);\r\n    }\r\n","title":"Bluetooth Connection Exception On Java","body":"<p>I want to make a bluetooth connection. I can scan but cannot pair devices. I get an error like this &quot;read failed, socket might closed or timeout&quot;.</p>\n<p>It is written in other titles to use &quot;createRfcommSocketToServiceRecord&quot; instead of &quot;createInsecureRfcommSocketToServiceRecord&quot;. However, this was not the solution.</p>\n<pre><code>    @Override\n    public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {\n\n        if(!mBTAdapter.isEnabled()) {\n            Toast.makeText(getBaseContext(), getString(R.string.BTnotOn), Toast.LENGTH_SHORT).show();\n            return;\n        }\n\n        mBluetoothStatus.setText(getString(R.string.cConnet));\n        // Get the device MAC address, which is the last 17 chars in the View\n        String info = ((TextView) view).getText().toString();\n        final String address = info.substring(info.length() - 17);\n        final String name = info.substring(0,info.length() - 17);\n\n        // Spawn a new thread to avoid blocking the GUI one\n        new Thread()\n        {\n            @Override\n            public void run() {\n                boolean fail = false;\n\n                try {\n                    mBTSocket = createBluetoothSocket(device);\n                } catch (IOException e) {\n                    fail = true;\n                    Toast.makeText(getBaseContext(), getString(R.string.ErrSockCrea), Toast.LENGTH_SHORT).show();\n                }\n                // Establish the Bluetooth socket connection.\n                try {\n                    mBTSocket.connect();\n                } catch (IOException e) {\n                    System.out.println(e.getMessage());\n                    try {\n                        fail = true;\n                        mBTSocket.close();\n                        mHandler.obtainMessage(CONNECTING_STATUS, -1, -1)\n                                .sendToTarget();\n                    } catch (IOException e2) {\n                        //insert code to deal with this\n                        Toast.makeText(getBaseContext(), getString(R.string.ErrSockCrea), Toast.LENGTH_SHORT).show();\n                    }\n                }\n                if(!fail) {\n                    mConnectedThread = new ConnectedThread(mBTSocket, mHandler);\n                    mConnectedThread.start();\n\n                    mHandler.obtainMessage(CONNECTING_STATUS, 1, -1, name)\n                            .sendToTarget();\n                }\n            }\n        }.start();\n    }\n};\n\nprivate BluetoothSocket createBluetoothSocket(BluetoothDevice device) throws IOException {\n    try {\n        final Method m = device.getClass().getMethod(&quot;createRfcommSocketToServiceRecord&quot;, UUID.class); \n        return (BluetoothSocket) m.invoke(device, BT_MODULE_UUID);\n    } catch (Exception e) {\n        Log.e(TAG, &quot;Could not create Insecure RFComm Connection&quot;,e);\n    }\n    return  device.createRfcommSocketToServiceRecord(BT_MODULE_UUID);\n}\n</code></pre>\n"},{"tags":["java","mongodb","distinct"],"answers":[{"tags":[],"owner":{"account_id":959814,"reputation":8884,"user_id":984422,"display_name":"Wahyu Kristianto"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677857277,"creation_date":1677857277,"answer_id":75628981,"question_id":75628671,"body_markdown":"&gt; So, maybe not distinct\r\n\r\nThe error message suggests that the `distinct` method is not able to return the expected result because the `marketId` field is not of type `String`, which is what the method expects by default.\r\n\r\nYou can still use the `distinct` method as follows:\r\n\r\n```\r\nList&lt;String&gt; marketIds = quoteCol\r\n    .distinct(&quot;marketId&quot;, String.class)\r\n    .into(new ArrayList&lt;&gt;());\r\n```\r\n","title":"MongoDb how to get a list of unique fields from a pojo doc","body":"<blockquote>\n<p>So, maybe not distinct</p>\n</blockquote>\n<p>The error message suggests that the <code>distinct</code> method is not able to return the expected result because the <code>marketId</code> field is not of type <code>String</code>, which is what the method expects by default.</p>\n<p>You can still use the <code>distinct</code> method as follows:</p>\n<pre><code>List&lt;String&gt; marketIds = quoteCol\n    .distinct(&quot;marketId&quot;, String.class)\n    .into(new ArrayList&lt;&gt;());\n</code></pre>\n"}],"owner":{"account_id":12339491,"reputation":31,"user_id":9003250,"display_name":"Michael"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677857277,"creation_date":1677855685,"question_id":75628671,"body_markdown":"I&#39;m new to Mongodb and I&#39;m trying to get what I thought would be quite a simple unique call on a field. What I want is a list of all the unique or distinct (one of each) marketIds:\r\n\r\n    sample doc -&gt; added to local mongodb as a pojo (with a double array codec)\r\n      {\r\n        &quot;_id&quot;: {\r\n          &quot;$oid&quot;: &quot;63fe576c931a3f5dc2aa355d&quot;\r\n        },\r\n        &quot;con&quot;: false,\r\n        &quot;img&quot;: true,\r\n        &quot;marketId&quot;: &quot;MSFT134048&quot;,\r\n        &quot;totalMatched&quot;: 525.9,\r\n        &quot;tsMs&quot;: {\r\n          &quot;$numberLong&quot;: &quot;1677612908236&quot;\r\n        }\r\n        ...\r\n      }\r\n      {\r\n        &quot;_id&quot;: {\r\n          &quot;$oid&quot;: &quot;63fe576c931a3f5dc2aa355e&quot;\r\n        },\r\n        &quot;con&quot;: false,\r\n        &quot;img&quot;: true,\r\n        &quot;marketId&quot;: &quot;MSFT134050&quot;,\r\n        &quot;totalMatched&quot;: 529.5,\r\n        &quot;tsMs&quot;: {\r\n          &quot;$numberLong&quot;: &quot;1677612908236&quot;\r\n        }\r\n        ...\r\n      }\r\nI&#39;d like either two full documents or a set of the two marketIds (both containing [MSFT134048, MSFT134050] the latter is preferable).\r\n\r\nI&#39;m using the local desktop version of mongodb (not paid-for Atlas).\r\n\r\nThe various methods I&#39;ve tried either get an error or empty results:\r\n\r\n 1.   `var doc = quoteCol.distinct(&quot;marketId&quot;, PriceUpdate.class);`\r\n 2.   `var doc = quoteCol.distinct(&quot;marketId&quot;, Document.class);`\r\n\r\n    error: CurrentBSONType is DOCUMENT, not when CurrentBSONType is STRING\r\n\r\n 3. So, maybe not distinct, how about aggregate:\r\n    ```\r\n    final Bson field1 = new Document(&quot;marketId&quot;, &quot;$marketId&quot;);\r\n    final List&lt;Bson&gt; bsonList = Arrays.asList(field1);\r\n    var ret = quoteCol.aggregate(bsonList);\r\n    Unrecognized pipeline stage name: &#39;marketId&#39;\r\n    ```\r\n\r\n 4. Agreggate with group:\r\n    ```   \r\n    final Bson field1 = new Document(&quot;marketId&quot;, &quot;$marketId&quot;);`\r\n    final Bson groupField = new Document(&quot;_id&quot;, field1);`\r\n    final Bson group = new Document(&quot;$group&quot;, groupField);`\r\n    final List&lt;Bson&gt; bsonList = Arrays.asList(group);`\r\n    var ret = quoteCol.aggregate(bsonList);`\r\n    The return from the above is a list of unpopulated docs with null marketIds.\r\n    ```\r\n\r\nHow to do it please?\r\n\r\nThanks","title":"MongoDb how to get a list of unique fields from a pojo doc","body":"<p>I'm new to Mongodb and I'm trying to get what I thought would be quite a simple unique call on a field. What I want is a list of all the unique or distinct (one of each) marketIds:</p>\n<pre><code>sample doc -&gt; added to local mongodb as a pojo (with a double array codec)\n  {\n    &quot;_id&quot;: {\n      &quot;$oid&quot;: &quot;63fe576c931a3f5dc2aa355d&quot;\n    },\n    &quot;con&quot;: false,\n    &quot;img&quot;: true,\n    &quot;marketId&quot;: &quot;MSFT134048&quot;,\n    &quot;totalMatched&quot;: 525.9,\n    &quot;tsMs&quot;: {\n      &quot;$numberLong&quot;: &quot;1677612908236&quot;\n    }\n    ...\n  }\n  {\n    &quot;_id&quot;: {\n      &quot;$oid&quot;: &quot;63fe576c931a3f5dc2aa355e&quot;\n    },\n    &quot;con&quot;: false,\n    &quot;img&quot;: true,\n    &quot;marketId&quot;: &quot;MSFT134050&quot;,\n    &quot;totalMatched&quot;: 529.5,\n    &quot;tsMs&quot;: {\n      &quot;$numberLong&quot;: &quot;1677612908236&quot;\n    }\n    ...\n  }\n</code></pre>\n<p>I'd like either two full documents or a set of the two marketIds (both containing [MSFT134048, MSFT134050] the latter is preferable).</p>\n<p>I'm using the local desktop version of mongodb (not paid-for Atlas).</p>\n<p>The various methods I've tried either get an error or empty results:</p>\n<ol>\n<li><code>var doc = quoteCol.distinct(&quot;marketId&quot;, PriceUpdate.class);</code></li>\n<li><code>var doc = quoteCol.distinct(&quot;marketId&quot;, Document.class);</code></li>\n</ol>\n<pre><code>error: CurrentBSONType is DOCUMENT, not when CurrentBSONType is STRING\n</code></pre>\n<ol start=\"3\">\n<li><p>So, maybe not distinct, how about aggregate:</p>\n<pre><code>final Bson field1 = new Document(&quot;marketId&quot;, &quot;$marketId&quot;);\nfinal List&lt;Bson&gt; bsonList = Arrays.asList(field1);\nvar ret = quoteCol.aggregate(bsonList);\nUnrecognized pipeline stage name: 'marketId'\n</code></pre>\n</li>\n<li><p>Agreggate with group:</p>\n<pre><code>final Bson field1 = new Document(&quot;marketId&quot;, &quot;$marketId&quot;);`\nfinal Bson groupField = new Document(&quot;_id&quot;, field1);`\nfinal Bson group = new Document(&quot;$group&quot;, groupField);`\nfinal List&lt;Bson&gt; bsonList = Arrays.asList(group);`\nvar ret = quoteCol.aggregate(bsonList);`\nThe return from the above is a list of unpopulated docs with null marketIds.\n</code></pre>\n</li>\n</ol>\n<p>How to do it please?</p>\n<p>Thanks</p>\n"},{"tags":["java","android","sqlite","openstreetmap"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1591513412,"post_id":62241582,"comment_id":110079834,"body_markdown":"Yes on Android Q that path is not writable. You should know that by now as your problem has been reported here five times a week for the last months.","body":"Yes on Android Q that path is not writable. You should know that by now as your problem has been reported here five times a week for the last months."},{"owner":{"account_id":288238,"reputation":14443,"user_id":588532,"accept_rate":88,"display_name":"Uriel Frankel"},"score":0,"creation_date":1591513766,"post_id":62241582,"comment_id":110079928,"body_markdown":"https://stackoverflow.com/a/57653808/588532","body":"<a href=\"https://stackoverflow.com/a/57653808/588532\">stackoverflow.com/a/57653808/588532</a>"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1591515546,"post_id":62241582,"comment_id":110080360,"body_markdown":"@Uriel Frankel, please dont advertise your hack as a fix. Your hack will not live long also.","body":"@Uriel Frankel, please dont advertise your hack as a fix. Your hack will not live long also."},{"owner":{"account_id":288238,"reputation":14443,"user_id":588532,"accept_rate":88,"display_name":"Uriel Frankel"},"score":0,"creation_date":1591515594,"post_id":62241582,"comment_id":110080374,"body_markdown":"@blackapps You are right","body":"@blackapps You are right"},{"owner":{"account_id":288238,"reputation":14443,"user_id":588532,"accept_rate":88,"display_name":"Uriel Frankel"},"score":1,"creation_date":1591517526,"post_id":62241582,"comment_id":110080935,"body_markdown":"@blackapps but the official Android docs says: Running on Android 10\nIf your app targets Android 10 (API level 29), opt-out of scoped storage and continue using the approach for Android 9 and lower to perform this operation.","body":"@blackapps but the official Android docs says: Running on Android 10 If your app targets Android 10 (API level 29), opt-out of scoped storage and continue using the approach for Android 9 and lower to perform this operation."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1591518660,"post_id":62241582,"comment_id":110081275,"body_markdown":"Yes, then lower target level.","body":"Yes, then lower target level."},{"owner":{"account_id":1361461,"reputation":1592,"user_id":1298744,"accept_rate":71,"display_name":"Zelig63"},"score":0,"creation_date":1591542759,"post_id":62241582,"comment_id":110089715,"body_markdown":"Going back to API level 27 solved my problem (the logcat now tells me external storage is writable). Unfortunately, visually, it doesn&#39;t change anything : still no map but only the grid, the compass and the zoom buttons. In the logcat, I don&#39;t see any error or warning message, only `D/FA: Connected to remote service` which really looks like a good news, but don&#39;t know if it is related to OSM.","body":"Going back to API level 27 solved my problem (the logcat now tells me external storage is writable). Unfortunately, visually, it doesn&#39;t change anything : still no map but only the grid, the compass and the zoom buttons. In the logcat, I don&#39;t see any error or warning message, only <code>D&#47;FA: Connected to remote service</code> which really looks like a good news, but don&#39;t know if it is related to OSM."},{"owner":{"account_id":1361461,"reputation":1592,"user_id":1298744,"accept_rate":71,"display_name":"Zelig63"},"score":0,"creation_date":1591543726,"post_id":62241582,"comment_id":110090133,"body_markdown":"Better now I have changed the data source from `HIKEBIKEMAP` to `MAPNIK`!","body":"Better now I have changed the data source from <code>HIKEBIKEMAP</code> to <code>MAPNIK</code>!"}],"answers":[{"tags":[],"owner":{"account_id":288238,"reputation":14443,"user_id":588532,"accept_rate":88,"display_name":"Uriel Frankel"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1591517691,"creation_date":1591517691,"answer_id":62242640,"question_id":62241582,"body_markdown":"Because you are targeting Andorid 10 - api 29, the official Android docs states:\r\n\r\n&gt; **Running on Android 10**\r\n&gt; \r\n&gt; If your app targets Android 10 (API level 29), opt-out of scoped\r\n&gt; storage and continue using the approach for Android 9 and lower to\r\n&gt; perform this operation.\r\n\r\nSo you need to add to the AndroidManifest.xml:\r\n\r\n    &lt;manifest ... &gt;\r\n    &lt;!-- This attribute is &quot;false&quot; by default on apps targeting\r\n       Android 10 or higher. --&gt;\r\n        &lt;application android:requestLegacyExternalStorage=&quot;true&quot; ... &gt;\r\n         ...\r\n        &lt;/application&gt;\r\n    &lt;/manifest&gt;\r\n\r\n@blackapps This is not a hack.","title":"File storage error when trying to display an OpenStreetMap map","body":"<p>Because you are targeting Andorid 10 - api 29, the official Android docs states:</p>\n\n<blockquote>\n  <p><strong>Running on Android 10</strong></p>\n  \n  <p>If your app targets Android 10 (API level 29), opt-out of scoped\n  storage and continue using the approach for Android 9 and lower to\n  perform this operation.</p>\n</blockquote>\n\n<p>So you need to add to the AndroidManifest.xml:</p>\n\n<pre><code>&lt;manifest ... &gt;\n&lt;!-- This attribute is \"false\" by default on apps targeting\n   Android 10 or higher. --&gt;\n    &lt;application android:requestLegacyExternalStorage=\"true\" ... &gt;\n     ...\n    &lt;/application&gt;\n&lt;/manifest&gt;\n</code></pre>\n\n<p>@blackapps This is not a hack.</p>\n"},{"tags":[],"owner":{"account_id":3682348,"reputation":1,"user_id":3067022,"display_name":"Manuel Silverio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677857238,"creation_date":1677857026,"answer_id":75628936,"question_id":62241582,"body_markdown":"A better approach is to move the storage used for cache from external to internal. This must be done before the view is loaded/inflated.\r\n\r\nFor an Activity:\r\n\r\n    Configuration.getInstance().osmdroidTileCache = filesDir\r\n\r\nFor a fragment: \r\n\r\n    Configuration.getInstance().osmdroidTileCache = requireContext().filesDir\r\n\r\nIf using Activity binding, you must change the directory right before calling this:\r\n\r\n    binding = ActivityNameBinding.inflate(layoutInflater)\r\nOtherwise, the map view will be built and automatically attempt to access external storage.","title":"File storage error when trying to display an OpenStreetMap map","body":"<p>A better approach is to move the storage used for cache from external to internal. This must be done before the view is loaded/inflated.</p>\n<p>For an Activity:</p>\n<pre><code>Configuration.getInstance().osmdroidTileCache = filesDir\n</code></pre>\n<p>For a fragment:</p>\n<pre><code>Configuration.getInstance().osmdroidTileCache = requireContext().filesDir\n</code></pre>\n<p>If using Activity binding, you must change the directory right before calling this:</p>\n<pre><code>binding = ActivityNameBinding.inflate(layoutInflater)\n</code></pre>\n<p>Otherwise, the map view will be built and automatically attempt to access external storage.</p>\n"}],"owner":{"account_id":1361461,"reputation":1592,"user_id":1298744,"accept_rate":71,"display_name":"Zelig63"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":223,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":62242640,"answer_count":2,"score":1,"last_activity_date":1677857238,"creation_date":1591510401,"question_id":62241582,"body_markdown":"My Android app using OpenStreetMap, which has been perfectly working for months, is now not able anymore to display the OpenStreetMap map. Despite the `WRITE_EXTERNAL_STORAGE` permission granted, I get messages like these :\r\n\r\n    E/OsmDroid: Unable to start the SQLite tile writer. Check external storage availability.\r\n    I/StorageUtils: /storage/emulated/0 is NOT writable\r\n\r\nAs I am targetting API29 and running on an Android 10 phone, I suppose the problem is related to the new policy about external storage access and the requirement to use the Storage Access Framework. Am I right?\r\n\r\nNo matter if I am right or wrong, does anyone know how I could fix this?","title":"File storage error when trying to display an OpenStreetMap map","body":"<p>My Android app using OpenStreetMap, which has been perfectly working for months, is now not able anymore to display the OpenStreetMap map. Despite the <code>WRITE_EXTERNAL_STORAGE</code> permission granted, I get messages like these :</p>\n\n<pre><code>E/OsmDroid: Unable to start the SQLite tile writer. Check external storage availability.\nI/StorageUtils: /storage/emulated/0 is NOT writable\n</code></pre>\n\n<p>As I am targetting API29 and running on an Android 10 phone, I suppose the problem is related to the new policy about external storage access and the requirement to use the Storage Access Framework. Am I right?</p>\n\n<p>No matter if I am right or wrong, does anyone know how I could fix this?</p>\n"},{"tags":["java","mockito","junit4"],"comments":[{"owner":{"account_id":7898962,"reputation":515,"user_id":5966620,"display_name":"Bibek Kr. Bazaz"},"score":0,"creation_date":1561615879,"post_id":56784899,"comment_id":100123908,"body_markdown":"both are public methods","body":"both are public methods"},{"owner":{"account_id":1046317,"reputation":996,"user_id":1051228,"accept_rate":44,"display_name":"sandeep"},"score":0,"creation_date":1561615946,"post_id":56784899,"comment_id":100123929,"body_markdown":"irrespective of wether it public or private, it need to be tested because its part of class to be tested. if its private then it will be tested through methodUnderTest()","body":"irrespective of wether it public or private, it need to be tested because its part of class to be tested. if its private then it will be tested through methodUnderTest()"},{"owner":{"account_id":5559956,"reputation":13819,"user_id":9840318,"display_name":"Madhu Bhat"},"score":0,"creation_date":1561615951,"post_id":56784899,"comment_id":100123933,"body_markdown":"Have you not tried when(spyA.display()).thenReturn(anyValue)?","body":"Have you not tried when(spyA.display()).thenReturn(anyValue)?"},{"owner":{"account_id":5559956,"reputation":13819,"user_id":9840318,"display_name":"Madhu Bhat"},"score":0,"creation_date":1561616008,"post_id":56784899,"comment_id":100123953,"body_markdown":"@sandeep private methods can&#39;t be mocked with mockito","body":"@sandeep private methods can&#39;t be mocked with mockito"},{"owner":{"account_id":1046317,"reputation":996,"user_id":1051228,"accept_rate":44,"display_name":"sandeep"},"score":0,"creation_date":1561616086,"post_id":56784899,"comment_id":100123974,"body_markdown":"Agree, when did i said to mock it. I am saying its not good to mock anything in class that is under test.","body":"Agree, when did i said to mock it. I am saying its not good to mock anything in class that is under test."},{"owner":{"account_id":5559956,"reputation":13819,"user_id":9840318,"display_name":"Madhu Bhat"},"score":0,"creation_date":1561616233,"post_id":56784899,"comment_id":100124033,"body_markdown":"@sandeep please read the question of OP again.","body":"@sandeep please read the question of OP again."},{"owner":{"account_id":1046317,"reputation":996,"user_id":1051228,"accept_rate":44,"display_name":"sandeep"},"score":0,"creation_date":1561616311,"post_id":56784899,"comment_id":100124067,"body_markdown":"@madhu I read the question thats why replying. basically what he is tying to do is antipattern.","body":"@madhu I read the question thats why replying. basically what he is tying to do is antipattern."},{"owner":{"account_id":5559956,"reputation":13819,"user_id":9840318,"display_name":"Madhu Bhat"},"score":1,"creation_date":1561617335,"post_id":56784899,"comment_id":100124507,"body_markdown":"@sandeep the OP is just asking about how to mock a method while testing another method. There is no harm in mocking `display` method while testing `methodUnderTest`. That being said, having test for `display` method is necessary too. But that is outside the scope of this question.","body":"@sandeep the OP is just asking about how to mock a method while testing another method. There is no harm in mocking <code>display</code> method while testing <code>methodUnderTest</code>. That being said, having test for <code>display</code> method is necessary too. But that is outside the scope of this question."}],"answers":[{"tags":[],"owner":{"account_id":2923083,"reputation":746,"user_id":2504962,"display_name":"Rashin"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1561616043,"creation_date":1561616043,"answer_id":56784964,"question_id":56784899,"body_markdown":"You don&#39;t need mockito for it. In the test when you create your test object you can create it by\r\n```java\r\nA underTest = new A() {\r\n    @Override\r\n    public int display() {\r\n        return &lt;expected result&gt;\r\n    }\r\n}\r\n\r\n```\r\n\r\nIn this way you can control what kind of value is returned by the display method.","title":"How to mock a method of a class being called inside another method that is being tested of the same class?","body":"<p>You don't need mockito for it. In the test when you create your test object you can create it by</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>A underTest = new A() {\n    @Override\n    public int display() {\n        return &lt;expected result&gt;\n    }\n}\n\n</code></pre>\n\n<p>In this way you can control what kind of value is returned by the display method.</p>\n"},{"tags":[],"owner":{"account_id":6952291,"reputation":750,"user_id":5334551,"display_name":"Highbrainer"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1677856977,"creation_date":1561616186,"answer_id":56784997,"question_id":56784899,"body_markdown":"If you want to use mockito, I&#39;d go for something like that : \r\n\r\n```java\r\n@Spy\r\nprivate A a;\r\n\r\n@Test\r\npublic void test() {\t\r\n\t\r\n\t//define the behaviour\r\n\tMockito.when(a.display()).thenReturn(12);\r\n\t\r\n\t// call methodUnderTest\r\n\tint res = a.methodUnderTest();\r\n\t\r\n\t// check that you get what you want\r\n\tAssert.assertEquals(SOME_VALUE, res);\r\n\t\r\n}\r\n```\r\n\r\nAnd if you don&#39;t want to use annotations, you&#39;d initialize `a` like this :\r\n```java\r\nA a = Mockito.spy(new A());\r\n```\r\n\r\n\r\nHTH!","title":"How to mock a method of a class being called inside another method that is being tested of the same class?","body":"<p>If you want to use mockito, I'd go for something like that :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Spy\nprivate A a;\n\n@Test\npublic void test() {    \n    \n    //define the behaviour\n    Mockito.when(a.display()).thenReturn(12);\n    \n    // call methodUnderTest\n    int res = a.methodUnderTest();\n    \n    // check that you get what you want\n    Assert.assertEquals(SOME_VALUE, res);\n    \n}\n</code></pre>\n<p>And if you don't want to use annotations, you'd initialize <code>a</code> like this :</p>\n<pre class=\"lang-java prettyprint-override\"><code>A a = Mockito.spy(new A());\n</code></pre>\n<p>HTH!</p>\n"},{"tags":[],"owner":{"account_id":3496867,"reputation":3005,"user_id":2924784,"accept_rate":83,"display_name":"orirab"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1561616528,"creation_date":1561616194,"answer_id":56785000,"question_id":56784899,"body_markdown":"If this is your class:\r\n```\r\n    public static class A{\r\n        public int methodUnderTest() {\r\n            return display();\r\n        }\r\n\r\n        public int display(){\r\n            return 1;\r\n        }\r\n    }\r\n```\r\nthen using mockito, you can do this:\r\n```\r\n        A a = spy(new A());\r\n        when(a.display()).thenReturn(0);\r\n        System.out.println(a.methodUnderTest()); // will print 0\r\n```\r\n\r\nExplanation:\r\n\r\nWhen you `mock()` a class, there is no underlying instance, and all the methods you call will do nothing and return default values unless specified otherwise.\r\n\r\nWhen you `spy()` on an instance, all calls get recorded, and **forwarded to the actual instance**. This means that your class behaviour will stay exactly the same unless you mock a specific call.\r\n\r\n----------\r\nHaving said that, a case like yours is usually a symptom that you need to split the class, and invest a bit in [separating your concerns][1].\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Separation_of_concerns","title":"How to mock a method of a class being called inside another method that is being tested of the same class?","body":"<p>If this is your class:</p>\n\n<pre><code>    public static class A{\n        public int methodUnderTest() {\n            return display();\n        }\n\n        public int display(){\n            return 1;\n        }\n    }\n</code></pre>\n\n<p>then using mockito, you can do this:</p>\n\n<pre><code>        A a = spy(new A());\n        when(a.display()).thenReturn(0);\n        System.out.println(a.methodUnderTest()); // will print 0\n</code></pre>\n\n<p>Explanation:</p>\n\n<p>When you <code>mock()</code> a class, there is no underlying instance, and all the methods you call will do nothing and return default values unless specified otherwise.</p>\n\n<p>When you <code>spy()</code> on an instance, all calls get recorded, and <strong>forwarded to the actual instance</strong>. This means that your class behaviour will stay exactly the same unless you mock a specific call.</p>\n\n<hr>\n\n<p>Having said that, a case like yours is usually a symptom that you need to split the class, and invest a bit in <a href=\"https://en.wikipedia.org/wiki/Separation_of_concerns\" rel=\"nofollow noreferrer\">separating your concerns</a>.</p>\n"}],"owner":{"account_id":7898962,"reputation":515,"user_id":5966620,"display_name":"Bibek Kr. Bazaz"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6251,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":56784964,"answer_count":3,"score":0,"last_activity_date":1677856977,"creation_date":1561615749,"question_id":56784899,"body_markdown":"For Example there is a class A with two methods methodUnderTest() and display() where methodUnderTest calls the display method. While writing a junit using mockito how can I mock the display() method?\r\n\r\n\r\n\r\n    class A{\r\n    public int method methodUnderTest{\r\n       //some code\r\n       display();\r\n    }\r\n    \r\n    public int display(){\r\n      //some code\r\n    }\r\n\r\n    }\r\n\r\n","title":"How to mock a method of a class being called inside another method that is being tested of the same class?","body":"<p>For Example there is a class A with two methods methodUnderTest() and display() where methodUnderTest calls the display method. While writing a junit using mockito how can I mock the display() method?</p>\n\n<pre><code>class A{\npublic int method methodUnderTest{\n   //some code\n   display();\n}\n\npublic int display(){\n  //some code\n}\n\n}\n</code></pre>\n"},{"tags":["python","java","arrays"],"comments":[{"owner":{"account_id":15419912,"reputation":161,"user_id":11124236,"display_name":"Sullivan"},"score":0,"creation_date":1677855768,"post_id":75628631,"comment_id":133425113,"body_markdown":"This is a sample how to create 3D array:\n`num_var = 5`\n`last_union_neg = [[[0 for k in range(unknown_size)] for j in range(3)] for i in range(num_var+1)]`\nfor access and modify the elements of the 3D like other lists \n`last_union_neg[0][1][0] = 23`","body":"This is a sample how to create 3D array: <code>num_var = 5</code> <code>last_union_neg = [[[0 for k in range(unknown_size)] for j in range(3)] for i in range(num_var+1)]</code> for access and modify the elements of the 3D like other lists  <code>last_union_neg[0][1][0] = 23</code>"},{"owner":{"account_id":17236237,"reputation":4285,"user_id":12479639,"display_name":"Axe319"},"score":0,"creation_date":1677859690,"post_id":75628631,"comment_id":133426364,"body_markdown":"Just use a nested list comprehension `last_union_neg = [[[] for _ in range(3)] for _ in range(number_of_variables + 1)]` and then `list.append`. `last_union_neg[0][0].append(2)`, etc.","body":"Just use a nested list comprehension <code>last_union_neg = [[[] for _ in range(3)] for _ in range(number_of_variables + 1)]</code> and then <code>list.append</code>. <code>last_union_neg[0][0].append(2)</code>, etc."}],"answers":[{"tags":[],"owner":{"account_id":23426499,"reputation":23,"user_id":17485914,"display_name":"Utorque"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677855837,"creation_date":1677855837,"answer_id":75628704,"question_id":75628631,"body_markdown":"You don&#39;t have to init array dimension in python, since it&#39;s more like a linked list. Just create your array like `my_array = []`. Then, you can append arrays in it : `my_array.append(another_array)` as many times as you want. Do it 3 times and you have your matrix.","title":"Init 3D Java array without exact size in Python","body":"<p>You don't have to init array dimension in python, since it's more like a linked list. Just create your array like <code>my_array = []</code>. Then, you can append arrays in it : <code>my_array.append(another_array)</code> as many times as you want. Do it 3 times and you have your matrix.</p>\n"}],"owner":{"account_id":27928138,"reputation":1,"user_id":21326801,"display_name":"zbalint00"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1677856824,"creation_date":1677855511,"question_id":75628631,"body_markdown":"I want to init a 3D array in python without knowing the last dimension size.\r\n\r\nThis is what i have in Java:\r\n\r\n```\r\nlastUnionNeg = new int[numberOfVariables+1][3][];\r\n```\r\nI want to do the same in Python if it is possible.\r\nI search a lot but i did not find any useful. Can anybody help me? ","title":"Init 3D Java array without exact size in Python","body":"<p>I want to init a 3D array in python without knowing the last dimension size.</p>\n<p>This is what i have in Java:</p>\n<pre><code>lastUnionNeg = new int[numberOfVariables+1][3][];\n</code></pre>\n<p>I want to do the same in Python if it is possible.\nI search a lot but i did not find any useful. Can anybody help me?</p>\n"},{"tags":["java","authentication","console","passwords","banking"],"answers":[{"tags":[],"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1624665200,"creation_date":1624665200,"answer_id":68138093,"question_id":68134810,"body_markdown":"`Any idea why the &quot;Wrong Pin. Try Again&quot; shows up twice in console?`\r\n\r\nYes...In your **BankingSystemWithPin.getBankAccountByPin()** method you have your `for` loop used to iterate through the different bank accounts to locate a related pin number. This is fine for your specific use case at this point however you do need to get rid of that `else if{}` code block and here is why:\r\n\r\nIf for example you have ten specific accounts and each account contains a unique pin number and the pin number entered was related to the fifth account then upon each iteration up to the 5th one the `else if` condition is met and therefore outputs `Wrong Pin. Try Again.`. The fifth iteration holds the correct PIN and then exits the method with a `return bankAccount;`. What you would see within the console window is:\r\n\r\n    Wrong Pin. Try Again.\r\n    Wrong Pin. Try Again.\r\n    Wrong Pin. Try Again.\r\n    Wrong Pin. Try Again.\r\n    Enter an option: \r\n    A. Check balance \r\n    B. Deposit \r\n    C. Withdraw \r\n    X. Exit\r\n\r\nYou don&#39;t want that `else if` code block in that `for` loop so just delete it. Instead, place the following code line directly **after** for `for` loop block:\r\n\r\n    System.out.println(&quot;Wrong Pin. Try Again.&quot;);\r\n\r\nRemember, because you are exiting the method anyways within the `for` loop if a correct pin number can be found related to a bank account, the above line will **never** be reached. It will only be reached if the supplied PIN number can not be found. Your **getBankAccountByPin()** method should look something like this:\r\n\r\n    public static BankAccount getBankAccountByPin(BankAccount[] bankAccounts, String pin) {\r\n        for (BankAccount bankAccount : bankAccounts) {\r\n            if (bankAccount.pin.equals(pin)) {\r\n                System.out.println();\r\n                System.out.println(&quot;Account Number: &quot; + bankAccount.IBAN);\r\n                return bankAccount;\r\n            } \r\n        }\r\n        System.err.println(&quot;Wrong PIN. Try Again.&quot;);\r\n        System.err.println();\r\n        return null;\r\n    }\r\n\r\nThat&#39;s not all...before carrying on after the call to the above method you need to ensure that it actually supplied a bank account number. After all, if the pin number supplied is wrong then there will be no bank account number, null will be returned instead and you don&#39;t want to carry on with a null. You need to validate that a bank account number was indeed acquired before showing the menu. To do this you will need to place the call to the **getBankAccountByPin()** method within a `while` loop like this:\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class BankingSystemWithPin {\r\n    \r\n    private static int pinAttempts = 0;\r\n    \r\n    public static void main(String[] args) {\r\n        BankAccount bankAccount1 = new BankAccount(&quot;RO29455302311322&quot;, 200, &quot;1234&quot;);\r\n        BankAccount bankAccount2 = new BankAccount(&quot;RO43593530521134&quot;, 600, &quot;7530&quot;);\r\n        BankAccount[] bankAccounts = {bankAccount1, bankAccount2};\r\n        Scanner scanner = new Scanner(System.in);\r\n        BankAccount currentBankAccount = null;\r\n        while (currentBankAccount == null) {\r\n            pinAttempts++;\r\n            if (pinAttempts &gt; 3) {\r\n                System.err.println();\r\n                System.err.println(&quot;You have exceeded the allowable number of login attempts!&quot;);\r\n                System.err.println(&quot;The transaction is over. &quot;);\r\n                System.exit(0);\r\n            }\r\n            Menu.welcome();\r\n            String pin = scanner.nextLine();\r\n            currentBankAccount = BankingSystemWithPin.getBankAccountByPin(bankAccounts, pin);\r\n        }\r\n        \r\n        // PIN correct and account number acquired!\r\n        ATM.useATM(currentBankAccount);\r\n    }\r\n    \r\n    public static BankAccount getBankAccountByPin(BankAccount[] bankAccounts, String pin) {\r\n        for (BankAccount bankAccount : bankAccounts) {\r\n            if (bankAccount.pin.equals(pin)) {\r\n                System.out.println();\r\n                System.out.println(&quot;Account Number: &quot; + bankAccount.IBAN);\r\n                return bankAccount;\r\n            } \r\n        }\r\n        System.err.println(&quot;Wrong Pin. Try Again.&quot;);\r\n        System.err.println();\r\n        return null;\r\n    }\r\n}\r\n```\r\n\r\nNow, for locking out a User. How will you ever know which User to Lock-out? There is no way of locking-out a User for the simple reason that you will never know who to lock out since there is no ATM card involved. You can however shut down the application and force the User to restart it in order to try again after three failed attempts. \r\n\r\nThis is obviously best done where you try to validate the PIN and acquire the bank account number related to it...the **BankingSystemWithPin** class. The above code also demonstrates this by adding a private integer class member variable named **pinAttempts** and wrapping the call to the **getBankAccountByPin()** method within a `while` loop. This keeps things compact and simple.","title":"Java - ATM Banking login with 3 times try pin lock","body":"<p><code>Any idea why the &quot;Wrong Pin. Try Again&quot; shows up twice in console?</code></p>\n<p>Yes...In your <strong>BankingSystemWithPin.getBankAccountByPin()</strong> method you have your <code>for</code> loop used to iterate through the different bank accounts to locate a related pin number. This is fine for your specific use case at this point however you do need to get rid of that <code>else if{}</code> code block and here is why:</p>\n<p>If for example you have ten specific accounts and each account contains a unique pin number and the pin number entered was related to the fifth account then upon each iteration up to the 5th one the <code>else if</code> condition is met and therefore outputs <code>Wrong Pin. Try Again.</code>. The fifth iteration holds the correct PIN and then exits the method with a <code>return bankAccount;</code>. What you would see within the console window is:</p>\n<pre><code>Wrong Pin. Try Again.\nWrong Pin. Try Again.\nWrong Pin. Try Again.\nWrong Pin. Try Again.\nEnter an option: \nA. Check balance \nB. Deposit \nC. Withdraw \nX. Exit\n</code></pre>\n<p>You don't want that <code>else if</code> code block in that <code>for</code> loop so just delete it. Instead, place the following code line directly <strong>after</strong> for <code>for</code> loop block:</p>\n<pre><code>System.out.println(&quot;Wrong Pin. Try Again.&quot;);\n</code></pre>\n<p>Remember, because you are exiting the method anyways within the <code>for</code> loop if a correct pin number can be found related to a bank account, the above line will <strong>never</strong> be reached. It will only be reached if the supplied PIN number can not be found. Your <strong>getBankAccountByPin()</strong> method should look something like this:</p>\n<pre><code>public static BankAccount getBankAccountByPin(BankAccount[] bankAccounts, String pin) {\n    for (BankAccount bankAccount : bankAccounts) {\n        if (bankAccount.pin.equals(pin)) {\n            System.out.println();\n            System.out.println(&quot;Account Number: &quot; + bankAccount.IBAN);\n            return bankAccount;\n        } \n    }\n    System.err.println(&quot;Wrong PIN. Try Again.&quot;);\n    System.err.println();\n    return null;\n}\n</code></pre>\n<p>That's not all...before carrying on after the call to the above method you need to ensure that it actually supplied a bank account number. After all, if the pin number supplied is wrong then there will be no bank account number, null will be returned instead and you don't want to carry on with a null. You need to validate that a bank account number was indeed acquired before showing the menu. To do this you will need to place the call to the <strong>getBankAccountByPin()</strong> method within a <code>while</code> loop like this:</p>\n<pre><code>import java.util.Scanner;\n\npublic class BankingSystemWithPin {\n    \n    private static int pinAttempts = 0;\n    \n    public static void main(String[] args) {\n        BankAccount bankAccount1 = new BankAccount(&quot;RO29455302311322&quot;, 200, &quot;1234&quot;);\n        BankAccount bankAccount2 = new BankAccount(&quot;RO43593530521134&quot;, 600, &quot;7530&quot;);\n        BankAccount[] bankAccounts = {bankAccount1, bankAccount2};\n        Scanner scanner = new Scanner(System.in);\n        BankAccount currentBankAccount = null;\n        while (currentBankAccount == null) {\n            pinAttempts++;\n            if (pinAttempts &gt; 3) {\n                System.err.println();\n                System.err.println(&quot;You have exceeded the allowable number of login attempts!&quot;);\n                System.err.println(&quot;The transaction is over. &quot;);\n                System.exit(0);\n            }\n            Menu.welcome();\n            String pin = scanner.nextLine();\n            currentBankAccount = BankingSystemWithPin.getBankAccountByPin(bankAccounts, pin);\n        }\n        \n        // PIN correct and account number acquired!\n        ATM.useATM(currentBankAccount);\n    }\n    \n    public static BankAccount getBankAccountByPin(BankAccount[] bankAccounts, String pin) {\n        for (BankAccount bankAccount : bankAccounts) {\n            if (bankAccount.pin.equals(pin)) {\n                System.out.println();\n                System.out.println(&quot;Account Number: &quot; + bankAccount.IBAN);\n                return bankAccount;\n            } \n        }\n        System.err.println(&quot;Wrong Pin. Try Again.&quot;);\n        System.err.println();\n        return null;\n    }\n}\n</code></pre>\n<p>Now, for locking out a User. How will you ever know which User to Lock-out? There is no way of locking-out a User for the simple reason that you will never know who to lock out since there is no ATM card involved. You can however shut down the application and force the User to restart it in order to try again after three failed attempts.</p>\n<p>This is obviously best done where you try to validate the PIN and acquire the bank account number related to it...the <strong>BankingSystemWithPin</strong> class. The above code also demonstrates this by adding a private integer class member variable named <strong>pinAttempts</strong> and wrapping the call to the <strong>getBankAccountByPin()</strong> method within a <code>while</code> loop. This keeps things compact and simple.</p>\n"},{"tags":[],"owner":{"account_id":20106472,"reputation":11,"user_id":14743862,"display_name":"Md Tech Tamizha"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1651539961,"creation_date":1651450484,"answer_id":72081305,"question_id":68134810,"body_markdown":"Because you are creating two constructors and also you are using a for loop inside validation, the loop runs two times and you get two warning messages. So I tried the below code.\r\n    \r\n    import java.util.Scanner;\r\n    \r\n    public class BankingSystemWithPin {\r\n        public static void main(String[] args) {\r\n            BankAccount bankAccount1 = new BankAccount(&quot;RO29455302311322&quot;, 200, &quot;1234&quot;);\r\n            BankAccount bankAccount2 = new BankAccount(&quot;RO43593530521134&quot;, 600, &quot;7530&quot;);\r\n            BankAccount[] bankAccounts = {bankAccount1, bankAccount2};\r\n            Scanner scanner = new Scanner(System.in);\r\n            Menu.welcome();\r\n            String pin = scanner.nextLine();\r\n            BankAccount currentBankAccount = BankingSystemWithPin.getBankAccountByPin(bankAccounts, pin);\r\n            ATM.useATM(currentBankAccount);\r\n        }\r\n            public static BankAccount getBankAccountByPin(BankAccount[] bankAccounts, String pin) {\r\n            for (BankAccount bankAccount : bankAccounts) {\r\n                if (bankAccount.pin.equals(pin)) {\r\n                    return bankAccount;\r\n                }\r\n            }\r\n            System.out.println(&quot;Wrong Pin. Try Again.&quot;);\r\n            return null;\r\n        }\r\n    }","title":"Java - ATM Banking login with 3 times try pin lock","body":"<p>Because you are creating two constructors and also you are using a for loop inside validation, the loop runs two times and you get two warning messages. So I tried the below code.</p>\n<pre><code>import java.util.Scanner;\n\npublic class BankingSystemWithPin {\n    public static void main(String[] args) {\n        BankAccount bankAccount1 = new BankAccount(&quot;RO29455302311322&quot;, 200, &quot;1234&quot;);\n        BankAccount bankAccount2 = new BankAccount(&quot;RO43593530521134&quot;, 600, &quot;7530&quot;);\n        BankAccount[] bankAccounts = {bankAccount1, bankAccount2};\n        Scanner scanner = new Scanner(System.in);\n        Menu.welcome();\n        String pin = scanner.nextLine();\n        BankAccount currentBankAccount = BankingSystemWithPin.getBankAccountByPin(bankAccounts, pin);\n        ATM.useATM(currentBankAccount);\n    }\n        public static BankAccount getBankAccountByPin(BankAccount[] bankAccounts, String pin) {\n        for (BankAccount bankAccount : bankAccounts) {\n            if (bankAccount.pin.equals(pin)) {\n                return bankAccount;\n            }\n        }\n        System.out.println(&quot;Wrong Pin. Try Again.&quot;);\n        return null;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26262130,"reputation":11,"user_id":19933262,"display_name":"pradana-asih"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677856817,"creation_date":1677856817,"answer_id":75628890,"question_id":68134810,"body_markdown":"\r\nit turns out that the error is in a class where the constructor is not clearly added.\r\n\r\nYou can check my edits at\r\n\r\nhttps://github.com/pradanaasih1233/belajar-apa-aja/tree/main/ATM\r\n\r\n","title":"Java - ATM Banking login with 3 times try pin lock","body":"<p>it turns out that the error is in a class where the constructor is not clearly added.</p>\n<p>You can check my edits at</p>\n<p><a href=\"https://github.com/pradanaasih1233/belajar-apa-aja/tree/main/ATM\" rel=\"nofollow noreferrer\">https://github.com/pradanaasih1233/belajar-apa-aja/tree/main/ATM</a></p>\n"}],"owner":{"account_id":22052675,"reputation":21,"user_id":16316707,"display_name":"razro"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4628,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1677856817,"creation_date":1624640931,"question_id":68134810,"body_markdown":"I&#39;m new to java programming. I&#39;m trying to make a banking system log-in that locks the user after entering the wrong pin 3 times. I&#39;m trying to merge 2 pieces of code. Any ideas why &quot;Wrong Pin. Try Again&quot; shows up twice in the console?\r\n\r\nATM class\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class ATM {\r\n        public static void useATM(BankAccount bankAccount) {\r\n            Scanner scanner = new Scanner(System.in);\r\n            char option = &#39;\\0&#39;;\r\n            do {\r\n                Menu.showMenu();\r\n                option = scanner.next().charAt(0);\r\n                switch (option) {\r\n                    case &#39;A&#39;:\r\n                        System.out.println(bankAccount.getBalance());\r\n                        break;\r\n                    case &#39;B&#39;:\r\n                        System.out.println(&quot;Enter an amount to deposit: &quot;);\r\n                        int amountToDeposit = scanner.nextInt();\r\n                        bankAccount.deposit(amountToDeposit);\r\n                        break;\r\n                    case &#39;C&#39;:\r\n                        System.out.println(&quot;Enter an amount to withdraw: &quot;);\r\n                        int amountToWithdraw = scanner.nextInt();\r\n                        bankAccount.withdraw(amountToWithdraw);\r\n                        break;\r\n                    case &#39;X&#39;:\r\n                        System.out.println(&quot;The transaction is over. &quot;);\r\n                        break;\r\n                    default:\r\n                        System.out.println(&quot;Not a valid option. Choose another option.&quot;);\r\n                        break;\r\n                }\r\n            } while (option != &#39;X&#39;);\r\n        }\r\n    }\r\n\r\nBankAccount class\r\n\r\n    public class BankAccount {\r\n        String IBAN;\r\n        int balance;\r\n        String pin;\r\n    \r\n        public BankAccount(String IBAN, int balance, String pin) {\r\n            this.IBAN = IBAN;\r\n            this.balance = balance;\r\n            this.pin = pin;\r\n        }\r\n    \r\n        public int getBalance() {\r\n            return this.balance;\r\n        }\r\n    \r\n        public void deposit(int amount) {\r\n            this.balance = this.balance + amount;\r\n        }\r\n    \r\n        public void withdraw(int amount) {\r\n            if (amount &lt;= this.balance) {\r\n                this.balance = this.balance - amount;\r\n                System.out.println(&quot;You withdrew &quot; + amount);\r\n            } else {\r\n                System.out.println(&quot;Not enough money. &quot;);\r\n            }\r\n        }\r\n    }\r\n\r\nBankingSystemWithPin main class\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class BankingSystemWithPin {\r\n        public static void main(String[] args) {\r\n            BankAccount bankAccount1 = new BankAccount(&quot;RO29455302311322&quot;, 200, &quot;1234&quot;);\r\n            BankAccount bankAccount2 = new BankAccount(&quot;RO43593530521134&quot;, 600, &quot;7530&quot;);\r\n            BankAccount[] bankAccounts = {bankAccount1, bankAccount2};\r\n            Scanner scanner = new Scanner(System.in);\r\n            Menu.welcome();\r\n            String pin = scanner.nextLine();\r\n            BankAccount currentBankAccount = BankingSystemWithPin.getBankAccountByPin(bankAccounts, pin);\r\n            ATM.useATM(currentBankAccount);\r\n        }\r\n            public static BankAccount getBankAccountByPin(BankAccount[] bankAccounts, String pin) {\r\n            for (BankAccount bankAccount : bankAccounts) {\r\n                if (bankAccount.pin.equals(pin)) {\r\n                    return bankAccount;\r\n                } else if (!bankAccount.pin.equals(pin) ) {\r\n                    System.out.println(&quot;Wrong Pin. Try Again.&quot;);\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n    }\r\n\r\nMenu class\r\n\r\n    public class Menu {\r\n        public static void showMenu() {\r\n            System.out.println(&quot;Enter an option: &quot;);\r\n            System.out.println(&quot;A. Check balance &quot;);\r\n            System.out.println(&quot;B. Deposit &quot;);\r\n            System.out.println(&quot;C. Withdraw &quot;);\r\n            System.out.println(&quot;X. Exit&quot;);\r\n        }\r\n            public static void welcome() {\r\n            System.out.println(&quot;Welcome! &quot;);\r\n            System.out.println(&quot;Please insert your pin: &quot;);\r\n        }\r\n    }\r\n\r\nFor the next piece of code, I&#39;m trying to merge it with my login system. What is the proper way to merge it into the main code? Should I try to paste it in BanckAccount class, or make a method to call it in main?\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class PinLockout {\r\n       \r\n                Scanner scanner = new Scanner(System.in);\r\n                int pin = 1234;\r\n                int tries = 0;\r\n                System.out.println(&quot;ENTER YOUR PIN: &quot;);\r\n                int entry = scanner.nextInt();\r\n                tries++;\r\n                while (entry != pin &amp;&amp; tries &lt; 3) {\r\n                    System.out.println(&quot;\\nINCORRECT PIN. TRY AGAIN.&quot;);\r\n                    System.out.println(&quot;ENTER YOUR PIN: &quot;);\r\n                    entry = scanner.nextInt();\r\n                    tries++;\r\n                }\r\n                if (entry == pin)\r\n                    System.out.println(&quot;\\nPIN ACCEPTED. ACCESS GRANTED.&quot;);\r\n                else if (tries &gt;= 3)\r\n                    System.out.println(&quot;\\nYOU HAVE RUN OUT OF TRIES. ACCOUNT LOCKED.&quot;);\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\n\r\n\r\n\r\n","title":"Java - ATM Banking login with 3 times try pin lock","body":"<p>I'm new to java programming. I'm trying to make a banking system log-in that locks the user after entering the wrong pin 3 times. I'm trying to merge 2 pieces of code. Any ideas why &quot;Wrong Pin. Try Again&quot; shows up twice in the console?</p>\n<p>ATM class</p>\n<pre><code>import java.util.Scanner;\n\npublic class ATM {\n    public static void useATM(BankAccount bankAccount) {\n        Scanner scanner = new Scanner(System.in);\n        char option = '\\0';\n        do {\n            Menu.showMenu();\n            option = scanner.next().charAt(0);\n            switch (option) {\n                case 'A':\n                    System.out.println(bankAccount.getBalance());\n                    break;\n                case 'B':\n                    System.out.println(&quot;Enter an amount to deposit: &quot;);\n                    int amountToDeposit = scanner.nextInt();\n                    bankAccount.deposit(amountToDeposit);\n                    break;\n                case 'C':\n                    System.out.println(&quot;Enter an amount to withdraw: &quot;);\n                    int amountToWithdraw = scanner.nextInt();\n                    bankAccount.withdraw(amountToWithdraw);\n                    break;\n                case 'X':\n                    System.out.println(&quot;The transaction is over. &quot;);\n                    break;\n                default:\n                    System.out.println(&quot;Not a valid option. Choose another option.&quot;);\n                    break;\n            }\n        } while (option != 'X');\n    }\n}\n</code></pre>\n<p>BankAccount class</p>\n<pre><code>public class BankAccount {\n    String IBAN;\n    int balance;\n    String pin;\n\n    public BankAccount(String IBAN, int balance, String pin) {\n        this.IBAN = IBAN;\n        this.balance = balance;\n        this.pin = pin;\n    }\n\n    public int getBalance() {\n        return this.balance;\n    }\n\n    public void deposit(int amount) {\n        this.balance = this.balance + amount;\n    }\n\n    public void withdraw(int amount) {\n        if (amount &lt;= this.balance) {\n            this.balance = this.balance - amount;\n            System.out.println(&quot;You withdrew &quot; + amount);\n        } else {\n            System.out.println(&quot;Not enough money. &quot;);\n        }\n    }\n}\n</code></pre>\n<p>BankingSystemWithPin main class</p>\n<pre><code>import java.util.Scanner;\n\npublic class BankingSystemWithPin {\n    public static void main(String[] args) {\n        BankAccount bankAccount1 = new BankAccount(&quot;RO29455302311322&quot;, 200, &quot;1234&quot;);\n        BankAccount bankAccount2 = new BankAccount(&quot;RO43593530521134&quot;, 600, &quot;7530&quot;);\n        BankAccount[] bankAccounts = {bankAccount1, bankAccount2};\n        Scanner scanner = new Scanner(System.in);\n        Menu.welcome();\n        String pin = scanner.nextLine();\n        BankAccount currentBankAccount = BankingSystemWithPin.getBankAccountByPin(bankAccounts, pin);\n        ATM.useATM(currentBankAccount);\n    }\n        public static BankAccount getBankAccountByPin(BankAccount[] bankAccounts, String pin) {\n        for (BankAccount bankAccount : bankAccounts) {\n            if (bankAccount.pin.equals(pin)) {\n                return bankAccount;\n            } else if (!bankAccount.pin.equals(pin) ) {\n                System.out.println(&quot;Wrong Pin. Try Again.&quot;);\n            }\n        }\n        return null;\n    }\n}\n</code></pre>\n<p>Menu class</p>\n<pre><code>public class Menu {\n    public static void showMenu() {\n        System.out.println(&quot;Enter an option: &quot;);\n        System.out.println(&quot;A. Check balance &quot;);\n        System.out.println(&quot;B. Deposit &quot;);\n        System.out.println(&quot;C. Withdraw &quot;);\n        System.out.println(&quot;X. Exit&quot;);\n    }\n        public static void welcome() {\n        System.out.println(&quot;Welcome! &quot;);\n        System.out.println(&quot;Please insert your pin: &quot;);\n    }\n}\n</code></pre>\n<p>For the next piece of code, I'm trying to merge it with my login system. What is the proper way to merge it into the main code? Should I try to paste it in BanckAccount class, or make a method to call it in main?</p>\n<pre><code>import java.util.Scanner;\n\npublic class PinLockout {\n   \n            Scanner scanner = new Scanner(System.in);\n            int pin = 1234;\n            int tries = 0;\n            System.out.println(&quot;ENTER YOUR PIN: &quot;);\n            int entry = scanner.nextInt();\n            tries++;\n            while (entry != pin &amp;&amp; tries &lt; 3) {\n                System.out.println(&quot;\\nINCORRECT PIN. TRY AGAIN.&quot;);\n                System.out.println(&quot;ENTER YOUR PIN: &quot;);\n                entry = scanner.nextInt();\n                tries++;\n            }\n            if (entry == pin)\n                System.out.println(&quot;\\nPIN ACCEPTED. ACCESS GRANTED.&quot;);\n            else if (tries &gt;= 3)\n                System.out.println(&quot;\\nYOU HAVE RUN OUT OF TRIES. ACCOUNT LOCKED.&quot;);\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":123958,"reputation":109285,"user_id":318758,"accept_rate":100,"display_name":"Joni"},"score":1,"creation_date":1594061406,"post_id":62762327,"comment_id":110989054,"body_markdown":"You say it doesn&#39;t work. What exactly do you mean? What happens, and what did you expect to happen?","body":"You say it doesn&#39;t work. What exactly do you mean? What happens, and what did you expect to happen?"},{"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"score":0,"creation_date":1594061606,"post_id":62762327,"comment_id":110989152,"body_markdown":"Remove the `+` symbol from this line `DanachBuchstabenPosition = BuchstabenPosition += 1;`","body":"Remove the <code>+</code> symbol from this line <code>DanachBuchstabenPosition = BuchstabenPosition += 1;</code>"}],"answers":[{"tags":[],"owner":{"account_id":14179476,"reputation":2663,"user_id":10243634,"display_name":"Oboe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1594061440,"creation_date":1594061440,"answer_id":62762607,"question_id":62762327,"body_markdown":"I would do:\r\n\r\n    String name = &quot;Oracle&quot;;\r\n\r\n    Random random = new Random();\r\n    int index = random.nextInt(name.length());\r\n            \r\n    char randomChar = name.charAt(index);\r\n            \r\n    System.out.println(&quot;Index:&quot; + index + &quot; Letter:&quot; + randomChar);","title":"Revealing 1 random letter of a word doesnt work","body":"<p>I would do:</p>\n<pre><code>String name = &quot;Oracle&quot;;\n\nRandom random = new Random();\nint index = random.nextInt(name.length());\n        \nchar randomChar = name.charAt(index);\n        \nSystem.out.println(&quot;Index:&quot; + index + &quot; Letter:&quot; + randomChar);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12016542,"reputation":2344,"user_id":8791491,"display_name":"L.Grozinger"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1594129219,"creation_date":1594129219,"answer_id":62776629,"question_id":62762327,"body_markdown":"This line:\r\n\r\n    DanachBuchstabenPosition = BuchstabenPosition += 1;\r\n\r\nWill first increment `BuchstabenPosition`, then assign `DanachBuchstabenPosition` to be the value of `BuchstabenPosition`. So, `BuchstabenPosition` and `DanachBuchstabenPosition` are the same integer. The call to [substring][1] will then return the empty string `&quot;&quot;`.\r\n\r\nInstead assign `DanachBuchstabenPosition` as this:\r\n\r\n    DanachBuchstabenPosition = BuchstabenPosition + 1;\r\n\r\nSo that it is 1 greater than `BuchstabenPosition`.\r\n\r\n\r\nAlso, consider using [`charAt`][2] instead, which is closer to what the logic of your code requires.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring(int,%20int)\r\n  [2]: https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#charAt(int)","title":"Revealing 1 random letter of a word doesnt work","body":"<p>This line:</p>\n<pre><code>DanachBuchstabenPosition = BuchstabenPosition += 1;\n</code></pre>\n<p>Will first increment <code>BuchstabenPosition</code>, then assign <code>DanachBuchstabenPosition</code> to be the value of <code>BuchstabenPosition</code>. So, <code>BuchstabenPosition</code> and <code>DanachBuchstabenPosition</code> are the same integer. The call to <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring(int,%20int)\" rel=\"nofollow noreferrer\">substring</a> will then return the empty string <code>&quot;&quot;</code>.</p>\n<p>Instead assign <code>DanachBuchstabenPosition</code> as this:</p>\n<pre><code>DanachBuchstabenPosition = BuchstabenPosition + 1;\n</code></pre>\n<p>So that it is 1 greater than <code>BuchstabenPosition</code>.</p>\n<p>Also, consider using <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#charAt(int)\" rel=\"nofollow noreferrer\"><code>charAt</code></a> instead, which is closer to what the logic of your code requires.</p>\n"}],"owner":{"account_id":18816171,"reputation":19,"user_id":13723251,"display_name":"Rexan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":62776629,"answer_count":2,"score":0,"last_activity_date":1677856679,"creation_date":1594060338,"question_id":62762327,"body_markdown":"I want to create an app where the user has to guess the company name of an icon. Everything works fine but I want to have a button that prints a hint for the user. I want to print 1 random letter of the companys name. But the company name and the length of the name changes because of the different levels.\r\nSo I thought I had to get the length of the companys name and then pick a random number of 0-companyname.\r\nThen I could use substring to chose 1 random letter of the companyname.\r\nBut it doesnt work. Here the important parts my code:\r\n\r\n  ```\r\n  Import java.util.Random;\r\n\r\n  int Laenge;\r\n  int BuchstabenPosition;\r\n  int DanachBuchstabenPosition;\r\n  Random r = new Random();\r\n    \r\n  Laenge = companyName.length();\r\n  BuchstabenPosition = r.nextInt(Laenge);\r\n  DanachBuchstabenPosition = BuchstabenPosition += 1;\r\n  tvHint.setText(&quot;Ein Buchstabe: &quot; + companyName.substring(BuchstabenPosition,DanachBuchstabenPosition));\r\n  ```\r\n\r\nWhen I run the app and click on the hint button, it only shows &quot;Ein Buchstabe: &quot;.\r\nI hope u understand what I want to do but here an example:\r\n\r\nLevel 1: Icon of YouTube, user doesnt have a clue of the company name, clicks hint button, a random letter of the word reveals, user now knows the name of the company and get to level 2.\r\n\r\nLevel 2: Icon of Stackoverflow, user doesnt have a clue of the company name, clicks hint button, a random letter of the word reveals.\r\n\r\nIf every company name would have the same length I could just make for example:\r\n```\r\n  int BuchstabenPosition;\r\n  int DanachBuchstabenPosition;\r\n  Random r = new Random();\r\n\r\n  BuchstabenPosition = r.nextInt(8);\r\n  DanachBuchstabenPosition = BuchstabenPosition += 1;\r\n  tvHint.setText(&quot;Ein Buchstabe: &quot; + companyName.substring(BuchstabenPosition,DanachBuchstabenPosition));\r\n```\r\nright?\r\nBut the companyname length changes.","title":"Revealing 1 random letter of a word doesnt work","body":"<p>I want to create an app where the user has to guess the company name of an icon. Everything works fine but I want to have a button that prints a hint for the user. I want to print 1 random letter of the companys name. But the company name and the length of the name changes because of the different levels.\nSo I thought I had to get the length of the companys name and then pick a random number of 0-companyname.\nThen I could use substring to chose 1 random letter of the companyname.\nBut it doesnt work. Here the important parts my code:</p>\n<pre><code>Import java.util.Random;\n\nint Laenge;\nint BuchstabenPosition;\nint DanachBuchstabenPosition;\nRandom r = new Random();\n  \nLaenge = companyName.length();\nBuchstabenPosition = r.nextInt(Laenge);\nDanachBuchstabenPosition = BuchstabenPosition += 1;\ntvHint.setText(&quot;Ein Buchstabe: &quot; + companyName.substring(BuchstabenPosition,DanachBuchstabenPosition));\n</code></pre>\n<p>When I run the app and click on the hint button, it only shows &quot;Ein Buchstabe: &quot;.\nI hope u understand what I want to do but here an example:</p>\n<p>Level 1: Icon of YouTube, user doesnt have a clue of the company name, clicks hint button, a random letter of the word reveals, user now knows the name of the company and get to level 2.</p>\n<p>Level 2: Icon of Stackoverflow, user doesnt have a clue of the company name, clicks hint button, a random letter of the word reveals.</p>\n<p>If every company name would have the same length I could just make for example:</p>\n<pre><code>  int BuchstabenPosition;\n  int DanachBuchstabenPosition;\n  Random r = new Random();\n\n  BuchstabenPosition = r.nextInt(8);\n  DanachBuchstabenPosition = BuchstabenPosition += 1;\n  tvHint.setText(&quot;Ein Buchstabe: &quot; + companyName.substring(BuchstabenPosition,DanachBuchstabenPosition));\n</code></pre>\n<p>right?\nBut the companyname length changes.</p>\n"},{"tags":["java","spring","spring-boot","maven"],"comments":[{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1578254832,"post_id":59603731,"comment_id":105371406,"body_markdown":"In which package is your main class located? And what is the URL you&#39;re using to reach this controller?","body":"In which package is your main class located? And what is the URL you&#39;re using to reach this controller?"},{"owner":{"account_id":15109469,"reputation":1459,"user_id":10904039,"display_name":"Phill Alexakis"},"score":0,"creation_date":1578254995,"post_id":59603731,"comment_id":105371445,"body_markdown":"the class is located at `Controller` package and i&#39;m trying to access it at `localhost:8080/api` , i&#39;m updating the questing with this information","body":"the class is located at <code>Controller</code> package and i&#39;m trying to access it at <code>localhost:8080&#47;api</code> , i&#39;m updating the questing with this information"},{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1578255351,"post_id":59603731,"comment_id":105371519,"body_markdown":"So package name is **not** Controller. It&#39;s myrest. That&#39;s what the problem is. All Spring beans must be in the same package as, or in a subpackage of, the main application class. https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using-boot-locating-the-main-class","body":"So package name is <b>not</b> Controller. It&#39;s myrest. That&#39;s what the problem is. All Spring beans must be in the same package as, or in a subpackage of, the main application class. <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using-boot-locating-the-main-class\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/reference/htmlsingle&zwnj;&#8203;/&hellip;</a>"},{"owner":{"account_id":15109469,"reputation":1459,"user_id":10904039,"display_name":"Phill Alexakis"},"score":0,"creation_date":1578255636,"post_id":59603731,"comment_id":105371568,"body_markdown":"In another project of mine, i have in the same directory `src/main/java` two packages, one of them contains the controller, and another package in the same dir that has the @SpringBootApplication main class, although the **package name** of the controller is named as a **sub** package of the main class. So basically if i rename `Controller` to `myrest.Controller` it should work right?","body":"In another project of mine, i have in the same directory <code>src&#47;main&#47;java</code> two packages, one of them contains the controller, and another package in the same dir that has the @SpringBootApplication main class, although the <b>package name</b> of the controller is named as a <b>sub</b> package of the main class. So basically if i rename <code>Controller</code> to <code>myrest.Controller</code> it should work right?"},{"owner":{"account_id":15109469,"reputation":1459,"user_id":10904039,"display_name":"Phill Alexakis"},"score":0,"creation_date":1578255729,"post_id":59603731,"comment_id":105371581,"body_markdown":"@JBNizet i renamed it to `myrest.Controller` and it worked!","body":"@JBNizet i renamed it to <code>myrest.Controller</code> and it worked!"},{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1578255742,"post_id":59603731,"comment_id":105371584,"body_markdown":"Yes, as I just explained, and as the application I linked to explains. You should really stick to Java naming conventions, too. Packages should start with your reverse domain name (com.mycompany.myproject...), and should be lowercase. The more you disrespect conventions, the more bugs or difficulties you&#39;ll face.","body":"Yes, as I just explained, and as the application I linked to explains. You should really stick to Java naming conventions, too. Packages should start with your reverse domain name (com.mycompany.myproject...), and should be lowercase. The more you disrespect conventions, the more bugs or difficulties you&#39;ll face."},{"owner":{"account_id":15109469,"reputation":1459,"user_id":10904039,"display_name":"Phill Alexakis"},"score":0,"creation_date":1578255931,"post_id":59603731,"comment_id":105371631,"body_markdown":"@JBNizet indeed, i will change it to lowercase. Thank you , you may post the answer","body":"@JBNizet indeed, i will change it to lowercase. Thank you , you may post the answer"}],"answers":[{"tags":[],"owner":{"account_id":14409449,"reputation":340,"user_id":10408686,"display_name":"Cường Lư Quốc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1578295606,"creation_date":1578295606,"answer_id":59608189,"question_id":59603731,"body_markdown":"As I remember, SpringBoot only scan packages which have the same prefix with Application class (in your case: myrest).\r\nIf you want spring boot scan another package, you should define them through annotation: ```@ComponentScan(&quot;package.hear&quot;)```","title":"Request Mapping returns 404 instead of the mapped String after creating a basic example from spring.start.io","body":"<p>As I remember, SpringBoot only scan packages which have the same prefix with Application class (in your case: myrest).\nIf you want spring boot scan another package, you should define them through annotation: <code>@ComponentScan(\"package.hear\")</code></p>\n"},{"tags":[],"owner":{"account_id":15109469,"reputation":1459,"user_id":10904039,"display_name":"Phill Alexakis"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1592834314,"creation_date":1592834314,"answer_id":62516166,"question_id":59603731,"body_markdown":"I renamed the `Controller` package to `myrest.controller` , \r\n\r\nhas to be a subpackage of the main package!","title":"Request Mapping returns 404 instead of the mapped String after creating a basic example from spring.start.io","body":"<p>I renamed the <code>Controller</code> package to <code>myrest.controller</code> ,</p>\n<p>has to be a subpackage of the main package!</p>\n"}],"owner":{"account_id":15109469,"reputation":1459,"user_id":10904039,"display_name":"Phill Alexakis"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":62516166,"answer_count":2,"score":1,"last_activity_date":1677856641,"creation_date":1578254586,"question_id":59603731,"body_markdown":"I&#39;ve already been on the following topics but **none** seemed to worked for me:\r\n\r\n 1. [RequestMapping leads to 404 Error][1] , added the regex ( `/app/**` to **Rest Controller** and `**/api` to the **Method**) but still won&#39;t map it.\r\n 2. [Spring @RequestMapping, 404 error][2] , added `&lt;packaging&gt;jar&lt;/packaging&gt; \r\n` to my **pom.xml** , although i can&#39;t find the path to change it (i doubt that the issue might be there, i&#39;m not sure though).\r\n 3. [Request Mapping returning error 404][3] , i visit the correct **endpoint** which is `localhost:8080/api` (port is not in use), i also tried it with another port number.\r\n 4. [Spring RequestMapping 404 error][4] , we might have the same issue here, i don&#39;t see why i should change the mapping, haven&#39;t changed anything on default directories or files.\r\n\r\nThis is **not** the first time i&#39;m making a **Springboot** application\r\n\r\n - My `pom.xml`\r\n```xml \r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n\t\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.2.2.RELEASE&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;myrest&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;remoteapi&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1&lt;/version&gt;\r\n\t&lt;name&gt;remoteapi&lt;/name&gt;\r\n\t&lt;description&gt;Rest Mobile Dev ICSD Api&lt;/description&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\n - My `RestController` class\r\n```java\r\n\r\npackage Controller;\r\n\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n@RestController\r\npublic class MainController {\r\n\r\n\t\r\n\t\r\n\t\r\n\t@RequestMapping(value=&quot;/api&quot;)\r\n\tpublic String test()\r\n\t{\r\n\t\treturn &quot;Hello World&quot;;\r\n\t}\r\n}\r\n\r\n\r\n```\r\n\r\nThis is my **directory**, the `MainController` class is inside `Controller` package\r\n\r\n[![enter image description here][5]][5]\r\n\r\n\r\nThe `URL` i&#39;m accessing it from is `localhost:8080/api`\r\n\r\n\r\n**Important Note:** if i run the exact method with the exact mapping on **an older project**, **it runs perfectly**.\r\n\r\nMy Comments: This is pretty odd , since i&#39;ve never changed anything on configurations, probably i missed something when i created the project? I Still haven&#39;t figured what that might be.\r\n\r\nEdit: Added the directory, and the that location i&#39;m trying to access it\r\n\r\n  [1]: https://stackoverflow.com/questions/17002543/requestmapping-leads-to-404-error\r\n  [2]: https://stackoverflow.com/questions/41678768/spring-requestmapping-404-error\r\n  [3]: https://stackoverflow.com/questions/36863440/request-mapping-returning-error-404\r\n  [4]: https://stackoverflow.com/questions/43535279/spring-requestmapping-404-error\r\n  [5]: https://i.stack.imgur.com/0yxlr.png","title":"Request Mapping returns 404 instead of the mapped String after creating a basic example from spring.start.io","body":"<p>I've already been on the following topics but <strong>none</strong> seemed to worked for me:</p>\n<ol>\n<li><a href=\"https://stackoverflow.com/questions/17002543/requestmapping-leads-to-404-error\">RequestMapping leads to 404 Error</a> , added the regex ( <code>/app/**</code> to <strong>Rest Controller</strong> and <code>**/api</code> to the <strong>Method</strong>) but still won't map it.</li>\n<li><a href=\"https://stackoverflow.com/questions/41678768/spring-requestmapping-404-error\">Spring @RequestMapping, 404 error</a> , added <code>&lt;packaging&gt;jar&lt;/packaging&gt;  </code> to my <strong>pom.xml</strong> , although i can't find the path to change it (i doubt that the issue might be there, i'm not sure though).</li>\n<li><a href=\"https://stackoverflow.com/questions/36863440/request-mapping-returning-error-404\">Request Mapping returning error 404</a> , i visit the correct <strong>endpoint</strong> which is <code>localhost:8080/api</code> (port is not in use), i also tried it with another port number.</li>\n<li><a href=\"https://stackoverflow.com/questions/43535279/spring-requestmapping-404-error\">Spring RequestMapping 404 error</a> , we might have the same issue here, i don't see why i should change the mapping, haven't changed anything on default directories or files.</li>\n</ol>\n<p>This is <strong>not</strong> the first time i'm making a <strong>Springboot</strong> application</p>\n<ul>\n<li>My <code>pom.xml</code></li>\n</ul>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    \n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.2.2.RELEASE&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;myrest&lt;/groupId&gt;\n    &lt;artifactId&gt;remoteapi&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1&lt;/version&gt;\n    &lt;name&gt;remoteapi&lt;/name&gt;\n    &lt;description&gt;Rest Mobile Dev ICSD Api&lt;/description&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\n                    &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<ul>\n<li>My <code>RestController</code> class</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>\npackage Controller;\n\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class MainController {\n\n    \n    \n    \n    @RequestMapping(value=&quot;/api&quot;)\n    public String test()\n    {\n        return &quot;Hello World&quot;;\n    }\n}\n\n\n</code></pre>\n<p>This is my <strong>directory</strong>, the <code>MainController</code> class is inside <code>Controller</code> package</p>\n<p><a href=\"https://i.stack.imgur.com/0yxlr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0yxlr.png\" alt=\"enter image description here\" /></a></p>\n<p>The <code>URL</code> i'm accessing it from is <code>localhost:8080/api</code></p>\n<p><strong>Important Note:</strong> if i run the exact method with the exact mapping on <strong>an older project</strong>, <strong>it runs perfectly</strong>.</p>\n<p>My Comments: This is pretty odd , since i've never changed anything on configurations, probably i missed something when i created the project? I Still haven't figured what that might be.</p>\n<p>Edit: Added the directory, and the that location i'm trying to access it</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":18867242,"reputation":1,"user_id":13762721,"display_name":"Mustafa Bahadır Demir"},"score":0,"creation_date":1592398643,"post_id":62429548,"comment_id":110410712,"body_markdown":"The answers I get are 1,4,and 16.","body":"The answers I get are 1,4,and 16."},{"owner":{"account_id":11827645,"reputation":3065,"user_id":9011164,"accept_rate":50,"display_name":"KunLun"},"score":0,"creation_date":1592399989,"post_id":62429548,"comment_id":110411468,"body_markdown":"What what is wrong at 1,4 and 16? Take a paper and a pen and calculate on paper what your code do.","body":"What what is wrong at 1,4 and 16? Take a paper and a pen and calculate on paper what your code do."},{"owner":{"account_id":18867242,"reputation":1,"user_id":13762721,"display_name":"Mustafa Bahadır Demir"},"score":0,"creation_date":1592400270,"post_id":62429548,"comment_id":110411645,"body_markdown":"Turns out I had it all wrong. I thought x += x is not x +1 but x+x. I got it now ty for the advice","body":"Turns out I had it all wrong. I thought x += x is not x +1 but x+x. I got it now ty for the advice"},{"owner":{"account_id":11827645,"reputation":3065,"user_id":9011164,"accept_rate":50,"display_name":"KunLun"},"score":0,"creation_date":1592400810,"post_id":62429548,"comment_id":110411956,"body_markdown":"You are right `x += x` it&#39;s not `x+1`. `a += b` it&#39;s short for `a = a + b`. Also for `x += 1`, you can simply call `x++` or `++x`.  http://www.c4learn.com/java/java-increment-decrement-operator/","body":"You are right <code>x += x</code> it&#39;s not <code>x+1</code>. <code>a += b</code> it&#39;s short for <code>a = a + b</code>. Also for <code>x += 1</code>, you can simply call <code>x++</code> or <code>++x</code>.  <a href=\"http://www.c4learn.com/java/java-increment-decrement-operator/\" rel=\"nofollow noreferrer\">c4learn.com/java/java-increment-decrement-operator</a>"}],"answers":[{"tags":[],"owner":{"account_id":4254130,"reputation":13758,"user_id":3480246,"display_name":"Jan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592398888,"creation_date":1592398888,"answer_id":62429642,"question_id":62429548,"body_markdown":"welcome to Stack Overflow!\r\n\r\n     x += x;\r\n\r\nShould be \r\n\r\n     x += 1;\r\n\r\ninstead - so you get the next number. With x += x in place you get x as 1, 2, 4 and then 8... and 8x8 = 64 is outside your when condition :-)\r\n\r\n","title":"Java:Beginner question: Why do I not get the numbers (1,4,9,16,25,36,49) from this code","body":"<p>welcome to Stack Overflow!</p>\n\n<pre><code> x += x;\n</code></pre>\n\n<p>Should be </p>\n\n<pre><code> x += 1;\n</code></pre>\n\n<p>instead - so you get the next number. With x += x in place you get x as 1, 2, 4 and then 8... and 8x8 = 64 is outside your when condition :-)</p>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1592398893,"creation_date":1592398893,"answer_id":62429644,"question_id":62429548,"body_markdown":"because... that&#39;s what the code does.\r\n\r\n`x` is 1 in the first loop, meaningly, the square is `1*1`, which is 1.\r\n\r\nThen, you add x to itself (`x += x`), so in the next cycle, x is 2, and the square is 4.\r\n\r\nThen, you add x to itself again, and now x is 4, and the square of that is 16.\r\n\r\nI have no idea why you were expecting to get 9 from this.\r\n\r\nIf you replace `x += x` with `x += 1` (or, shorter, `x++`), you&#39;d get 1,4,9,16,25,36,49.\r\n\r\nNB: In general, to know why code isn&#39;t working / doesn&#39;t do what you want, debug it. Invest some time in learning how to use a debugger, or if you just can&#39;t do that, debug inefficiently, using a lot of `System.out.println` statements. Walk through the code &#39;mentally&#39;, be the computer, figure out at each step what happens and what the values of variables will be, and then compare what you think happens to what actually happens (by checking the debugger, or, by printing the values of various variables). At the point where what you think happens doesn&#39;t match what actually happens? You found a bug. That would have gotten you there in this case.\r\n","title":"Java:Beginner question: Why do I not get the numbers (1,4,9,16,25,36,49) from this code","body":"<p>because... that's what the code does.</p>\n\n<p><code>x</code> is 1 in the first loop, meaningly, the square is <code>1*1</code>, which is 1.</p>\n\n<p>Then, you add x to itself (<code>x += x</code>), so in the next cycle, x is 2, and the square is 4.</p>\n\n<p>Then, you add x to itself again, and now x is 4, and the square of that is 16.</p>\n\n<p>I have no idea why you were expecting to get 9 from this.</p>\n\n<p>If you replace <code>x += x</code> with <code>x += 1</code> (or, shorter, <code>x++</code>), you'd get 1,4,9,16,25,36,49.</p>\n\n<p>NB: In general, to know why code isn't working / doesn't do what you want, debug it. Invest some time in learning how to use a debugger, or if you just can't do that, debug inefficiently, using a lot of <code>System.out.println</code> statements. Walk through the code 'mentally', be the computer, figure out at each step what happens and what the values of variables will be, and then compare what you think happens to what actually happens (by checking the debugger, or, by printing the values of various variables). At the point where what you think happens doesn't match what actually happens? You found a bug. That would have gotten you there in this case.</p>\n"},{"tags":[],"owner":{"account_id":12117763,"reputation":363,"user_id":8850857,"display_name":"Atahan Atay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592399105,"creation_date":1592399105,"answer_id":62429709,"question_id":62429548,"body_markdown":"The problem is in that line;\r\n\r\n```x += x;```\r\n\r\nyou add x to x, so you multiply x by 2;\r\n\r\n    1) x=1 -&gt; x*x=1\r\n    2) x=2 -&gt; x*x=4\r\n    2) x=4 -&gt; x*x=16\r\n    2) x=8 -&gt; x*x=64\r\n\r\nYou must add 1 to x.\r\n\r\nSo change this line ```x += x;``` by ```x += 1;```","title":"Java:Beginner question: Why do I not get the numbers (1,4,9,16,25,36,49) from this code","body":"<p>The problem is in that line;</p>\n\n<p><code>x += x;</code></p>\n\n<p>you add x to x, so you multiply x by 2;</p>\n\n<pre><code>1) x=1 -&gt; x*x=1\n2) x=2 -&gt; x*x=4\n2) x=4 -&gt; x*x=16\n2) x=8 -&gt; x*x=64\n</code></pre>\n\n<p>You must add 1 to x.</p>\n\n<p>So change this line <code>x += x;</code> by <code>x += 1;</code></p>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592400389,"creation_date":1592400389,"answer_id":62430160,"question_id":62429548,"body_markdown":"Putting in a few simple print statements might have shed some light.\r\n```\r\nScanner scanner = new Scanner(System.in);\r\n// put your code here\r\nint N = scanner.nextInt();\r\nint x = 1;\r\nint Square = x * x;\r\n\r\nwhile (x * x &lt;= N) {\r\n    Square = x * x;\r\n    System.out.println(Square);\r\n    x += x;\r\n    System.out.println(&quot;adding x to x to get &quot; + x);\r\n    System.out.println(&quot;x * x will now be &quot; + (x*x));\r\n} \r\n```\r\nFor N = 50, Prints\r\n```\r\n1\r\nadding x to x to get 2\r\nx * x will now be 4\r\n4\r\nadding x to x to get 4\r\nx * x will now be 16\r\n16\r\nadding x to x to get 8\r\nx * x will now be 64","title":"Java:Beginner question: Why do I not get the numbers (1,4,9,16,25,36,49) from this code","body":"<p>Putting in a few simple print statements might have shed some light.</p>\n\n<pre><code>Scanner scanner = new Scanner(System.in);\n// put your code here\nint N = scanner.nextInt();\nint x = 1;\nint Square = x * x;\n\nwhile (x * x &lt;= N) {\n    Square = x * x;\n    System.out.println(Square);\n    x += x;\n    System.out.println(\"adding x to x to get \" + x);\n    System.out.println(\"x * x will now be \" + (x*x));\n} \n</code></pre>\n\n<p>For N = 50, Prints</p>\n\n<pre><code>1\nadding x to x to get 2\nx * x will now be 4\n4\nadding x to x to get 4\nx * x will now be 16\n16\nadding x to x to get 8\nx * x will now be 64\n</code></pre>\n"}],"owner":{"account_id":18867242,"reputation":1,"user_id":13762721,"display_name":"Mustafa Bahadır Demir"},"comment_count":4,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1592403542,"accepted_answer_id":62429644,"answer_count":4,"score":-3,"last_activity_date":1677856605,"creation_date":1592398608,"question_id":62429548,"body_markdown":"I am currently doing some hyperskill education and I do not get why this code skips some numbers for no reason. The input from java Scanner is 50 so basically N=50\r\n\r\n\r\n```Java\r\nimport java.util.Scanner;\r\n    \r\nclass Main {\r\n    public static void main(String[] args) {\r\n        Scanner scanner = new Scanner(System.in);\r\n        // put your code here\r\n        int N = scanner.nextInt();\r\n        int x = 1;\r\n        int Square = x * x;\r\n\r\n        while (x * x &lt;= N) {\r\n            Square = x * x;\r\n            System.out.println(Square);\r\n            x += x;\r\n        } \r\n    }\r\n}\r\n```\r\n\r\n","title":"Java:Beginner question: Why do I not get the numbers (1,4,9,16,25,36,49) from this code","body":"<p>I am currently doing some hyperskill education and I do not get why this code skips some numbers for no reason. The input from java Scanner is 50 so basically N=50</p>\n\n<pre><code>import java.util.Scanner;\n\nclass Main {\n    public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in);\n        // put your code here\n        int N = scanner.nextInt();\n        int x = 1;\n        int Square = x * x;\n\n        while (x * x &lt;= N) {\n            Square = x * x;\n            System.out.println(Square);\n            x += x;\n        } \n    }\n}\n</code></pre>\n"},{"tags":["java","json","maven","jersey"],"answers":[{"tags":[],"owner":{"account_id":13405788,"reputation":147,"user_id":9673864,"display_name":"wouterio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1591358609,"creation_date":1591358609,"answer_id":62214938,"question_id":62213119,"body_markdown":"Problem solved. Running the app within Eclipse apparently doesn&#39;t require explicitly registering a `JacksonJsonProvider`, but running the standalone app does:\r\n\r\n    ClientConfig config = new ClientConfig().connectorProvider(new ApacheConnectorProvider()).register(new JacksonJsonProvider());\r\n    Client client = ClientBuilder.newBuilder().withConfig(config) ...","title":"MessageBodyProviderNotFoundException after building with maven shade plugin","body":"<p>Problem solved. Running the app within Eclipse apparently doesn't require explicitly registering a <code>JacksonJsonProvider</code>, but running the standalone app does:</p>\n\n<pre><code>ClientConfig config = new ClientConfig().connectorProvider(new ApacheConnectorProvider()).register(new JacksonJsonProvider());\nClient client = ClientBuilder.newBuilder().withConfig(config) ...\n</code></pre>\n"}],"owner":{"account_id":13405788,"reputation":147,"user_id":9673864,"display_name":"wouterio"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":62214938,"answer_count":1,"score":1,"last_activity_date":1677856553,"creation_date":1591352506,"question_id":62213119,"body_markdown":"Hi I&#39;m building a java REST client application that uses json. There&#39;s a conflict in my dependencies: one essential dependency requires jackson databind/core/annotations 2.10.1, another essential dependency uses an older version 2.2.2.\r\n\r\nWhen running the app in Eclipse, this led to a `MessageBodyProviderNotFoundException`. The problem was that maven included version 2.2.2 instead of 2.10.1. So I use dependency management to resolve the conflict and include version 2.10.1. Within Eclipse this solved the issue and the app runs fine.\r\n\r\nBut after building the app with the maven shade plugin, the standalone app still fails with the `MessageBodyProviderNotFoundException`. The exception is thrown in a part of the code requiring version 2.10.1, not in the part depending on version 2.2.2.\r\n\r\nAny thoughts? Thanks in advance!\r\n\r\nEDIT: I checked my local maven repository and it only contains version 2.10.1. So the problem is not that the jar somehow still includes version 2.2.2.","title":"MessageBodyProviderNotFoundException after building with maven shade plugin","body":"<p>Hi I'm building a java REST client application that uses json. There's a conflict in my dependencies: one essential dependency requires jackson databind/core/annotations 2.10.1, another essential dependency uses an older version 2.2.2.</p>\n\n<p>When running the app in Eclipse, this led to a <code>MessageBodyProviderNotFoundException</code>. The problem was that maven included version 2.2.2 instead of 2.10.1. So I use dependency management to resolve the conflict and include version 2.10.1. Within Eclipse this solved the issue and the app runs fine.</p>\n\n<p>But after building the app with the maven shade plugin, the standalone app still fails with the <code>MessageBodyProviderNotFoundException</code>. The exception is thrown in a part of the code requiring version 2.10.1, not in the part depending on version 2.2.2.</p>\n\n<p>Any thoughts? Thanks in advance!</p>\n\n<p>EDIT: I checked my local maven repository and it only contains version 2.10.1. So the problem is not that the jar somehow still includes version 2.2.2.</p>\n"},{"tags":["java","refactoring","automated-refactoring"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1676980278,"post_id":75520058,"comment_id":133242224,"body_markdown":"A long time ago I [looked for something very similar for Eclipse](https://stackoverflow.com/questions/7566565/is-there-a-way-to-apply-a-refactoring-script-just-for-its-side-effects) and didn&#39;t find a good answer. It&#39;s quite possible that this thing now exists.","body":"A long time ago I <a href=\"https://stackoverflow.com/questions/7566565/is-there-a-way-to-apply-a-refactoring-script-just-for-its-side-effects\">looked for something very similar for Eclipse</a> and didn&#39;t find a good answer. It&#39;s quite possible that this thing now exists."},{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":1,"creation_date":1676982866,"post_id":75520058,"comment_id":133243055,"body_markdown":"Well, the company I&#39;m working for develops a rule-based refactoring engine (Eclipse plugin and Maven plugin), but it doesn&#39;t allow custom rules. It does have some for frequently used migration paths, such as between jUnit versions and various styles of Asserts: https://jsparrow.github.io/","body":"Well, the company I&#39;m working for develops a rule-based refactoring engine (Eclipse plugin and Maven plugin), but it doesn&#39;t allow custom rules. It does have some for frequently used migration paths, such as between jUnit versions and various styles of Asserts: <a href=\"https://jsparrow.github.io/\" rel=\"nofollow noreferrer\">jsparrow.github.io</a>"},{"owner":{"account_id":12647983,"reputation":137,"user_id":9193100,"display_name":"Garruk The Wildspeaker"},"score":0,"creation_date":1677061317,"post_id":75520058,"comment_id":133261442,"body_markdown":"I need exactly the same but with the custom rules :(","body":"I need exactly the same but with the custom rules :("},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":2,"creation_date":1677244836,"post_id":75520058,"comment_id":133304669,"body_markdown":"Get IntelliJ.  It&#39;s terrific at refactoring.  Not something I&#39;d script.","body":"Get IntelliJ.  It&#39;s terrific at refactoring.  Not something I&#39;d script."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1677245816,"post_id":75520058,"comment_id":133304943,"body_markdown":"@duffymo: indeed it is, but as a developer of libraries that others use, I want to hand them a simple way to do all the &quot;mechanical&quot; transformations that might be necessary to migrate to another major version of my library.","body":"@duffymo: indeed it is, but as a developer of libraries that others use, I want to hand them a simple way to do all the &quot;mechanical&quot; transformations that might be necessary to migrate to another major version of my library."},{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":0,"creation_date":1677246321,"post_id":75520058,"comment_id":133305092,"body_markdown":"@GarrukTheWildspeaker if you have a specific migration path in mind that may also be useful to other people, feel free to use the [jsparrow contact form](https://jsparrow.io/contact-us/) to send us a feature request - it will be considered. User-customizable rules are unfortunately out of scope for now.","body":"@GarrukTheWildspeaker if you have a specific migration path in mind that may also be useful to other people, feel free to use the <a href=\"https://jsparrow.io/contact-us/\" rel=\"nofollow noreferrer\">jsparrow contact form</a> to send us a feature request - it will be considered. User-customizable rules are unfortunately out of scope for now."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1677265891,"post_id":75520058,"comment_id":133310488,"body_markdown":"@JoachimSauer, if I&#39;m a user of your library I expect to add your code as a package.  I&#39;m certainly not going to apply any refactorings.  I expect you to do that, publish the modified package to a public repo with release notes.  I would get rid of your library if you gave me a script to apply a refactoring to your code.  I have never gotten a script to modify MY code from Spring Boot.  I don&#39;t see how it can be practical.","body":"@JoachimSauer, if I&#39;m a user of your library I expect to add your code as a package.  I&#39;m certainly not going to apply any refactorings.  I expect you to do that, publish the modified package to a public repo with release notes.  I would get rid of your library if you gave me a script to apply a refactoring to your code.  I have never gotten a script to modify MY code from Spring Boot.  I don&#39;t see how it can be practical."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1677288493,"post_id":75520058,"comment_id":133314383,"body_markdown":"@duffymo: I&#39;m not talking about applying refactoring to the library. I&#39;m talking about the client code that *uses* the library.","body":"@duffymo: I&#39;m not talking about applying refactoring to the library. I&#39;m talking about the client code that <i>uses</i> the library."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1677324951,"post_id":75520058,"comment_id":133317847,"body_markdown":"Yes.  I&#39;ve never seen such a thing from Spring Boot or any library that I use.  I would not expect to ever get more than release notes.  Conversion refactoring is up to me.","body":"Yes.  I&#39;ve never seen such a thing from Spring Boot or any library that I use.  I would not expect to ever get more than release notes.  Conversion refactoring is up to me."},{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":1,"creation_date":1677472020,"post_id":75520058,"comment_id":133337738,"body_markdown":"@duffymo backwards compatibility is hard, and there are occasionly valid reasons for a library to break it. If it does, helping users with the migration will ease the pain. But this comment thread is not the right place for this discussion.","body":"@duffymo backwards compatibility is hard, and there are occasionly valid reasons for a library to break it. If it does, helping users with the migration will ease the pain. But this comment thread is not the right place for this discussion."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1677502805,"post_id":75520058,"comment_id":133344199,"body_markdown":"I don&#39;t disagree that it&#39;s painful.  I&#39;m pointing out that Spring Boot offers no such script.  I don&#39;t need instruction from you on how SO works.","body":"I don&#39;t disagree that it&#39;s painful.  I&#39;m pointing out that Spring Boot offers no such script.  I don&#39;t need instruction from you on how SO works."},{"owner":{"account_id":18141984,"reputation":136,"user_id":13195754,"display_name":"branboyer"},"score":0,"creation_date":1677729332,"post_id":75520058,"comment_id":133396839,"body_markdown":"Intellij already has refactoring shortcuts to do that, but it also has a systematic programmatic way (and with Groovy): https://www.jetbrains.com/help/idea/structural-search-and-replace.html#share_template","body":"Intellij already has refactoring shortcuts to do that, but it also has a systematic programmatic way (and with Groovy): <a href=\"https://www.jetbrains.com/help/idea/structural-search-and-replace.html#share_template\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1947400,"reputation":1111,"user_id":1752215,"display_name":"cw&#39;"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1677761026,"creation_date":1677761026,"answer_id":75615576,"question_id":75520058,"body_markdown":"Sounds like a job for [OpenRewrite][1]. Standard recipes, e.g., for renaming a package are available. You can also write your own recipes, which make use of a visitor pattern over a tree-based representation of your source code (which will preserve, e.g., indentation).\r\n\r\nYou can use Maven or Gradle to execute the rewrite. \r\n\r\nFor instance the change package configuration from the getting started page looks like this:\r\n\r\n    type: specs.openrewrite.org/v1beta/recipe\r\n    name: com.yourorg.VetToVeterinary\r\n    recipeList:\r\n      - org.openrewrite.java.ChangePackage:\r\n        oldPackageName: org.springframework.samples.petclinic.vet\r\n        newPackageName: org.springframework.samples.petclinic.veterinary\r\n\r\n\r\n  [1]: https://docs.openrewrite.org/running-recipes/getting-started","title":"How to automate Java code refactoring using a script with instructions?","body":"<p>Sounds like a job for <a href=\"https://docs.openrewrite.org/running-recipes/getting-started\" rel=\"nofollow noreferrer\">OpenRewrite</a>. Standard recipes, e.g., for renaming a package are available. You can also write your own recipes, which make use of a visitor pattern over a tree-based representation of your source code (which will preserve, e.g., indentation).</p>\n<p>You can use Maven or Gradle to execute the rewrite.</p>\n<p>For instance the change package configuration from the getting started page looks like this:</p>\n<pre><code>type: specs.openrewrite.org/v1beta/recipe\nname: com.yourorg.VetToVeterinary\nrecipeList:\n  - org.openrewrite.java.ChangePackage:\n    oldPackageName: org.springframework.samples.petclinic.vet\n    newPackageName: org.springframework.samples.petclinic.veterinary\n</code></pre>\n"},{"tags":[],"owner":{"account_id":41366,"reputation":93989,"user_id":120163,"accept_rate":59,"display_name":"Ira Baxter"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1677856217,"creation_date":1677784372,"answer_id":75619901,"question_id":75520058,"body_markdown":"Not Groovy based (but then other answers suggesting &quot;OpenRewrite&quot; or &quot;IntelliJ&quot; aren&#39;t Groovy based either).\r\n\r\nWhat OP is asking for is a [program transformation system (PTS)][1] that will let him write custom transformation rules.  Most PTS system provide you with access to the target language AST... and you write custom rules by coding procedural visitors that clamber around the tree, matching and splicing individual tree nodes. Eclipse works like this; apparantly also OpenRewrite.\r\n\r\nThat&#39;s a clumsy way to do it, mostly because the details of the AST are voluminous and sort of arbitrary, and your tree-crawling code has to know all of this.  See [program_transforms on AST vs surface syntax][2]  for more details.  Ideally you&#39;d write transformations using the surface syntax of the programming language and let the PTS take care of doing the matching and replacement against the actual AST.\r\n\r\nOur [DMS Software Reengineering Toolkit][3] will let you do this.  The transformations op wants do are coded like this:\r\n\r\n    Domain Java~v11; -- specifies which specific Java dialect grammar is relevant\r\n\r\n    rule rename_foo(p:access_path_prefix): access_path -&gt; access_path\r\n      = &quot;\\p foo.method2&quot; -&gt; &quot;\\p foo.method3&quot;;\r\n\r\n    rule rename_myMethod(p:access_path_prefix): access_path -&gt; access_path\r\n      = &quot;\\p myMethod&quot; -&gt; &quot;\\p your_method&quot;;\r\n\r\n    rule change_import_AnotherClassFromExternalPackage: import_statement -&gt; import_statement\r\n      = &quot;import org.you.core.util.AnotherClassFromExternalPackage&quot;\r\n        -&gt; &quot;import com.me.core.util.AnotherClassFromExternalPackage&quot;;\r\n\r\n    ruleset my_patches = \r\n       { rename_foo, \r\n         rename_myMethod, \r\n         change_import_AnotherClassFromExternalPackage\r\n       }\r\n\r\nThe `Domain` keyword tells DMS which precise grammar to use to parse the source text, including the specific dialect. (Java 6 is not the same as Java 11).\r\n\r\nIndividual rules are named (e.g., `rename_foo`). The parmeter list (e.g. `p:access_path_prefix`) allows one to specify a named piece of syntax (e.g., `p`) that can match an arbitrary tree of the syntax category (e.g., `access_path_prefix`).  Each rule specifies that it is a mapping `-&gt;` from one piece of syntax to another; for these rules, source and target syntax categories are the same (e.g. `access_path`). \r\n\r\nEach rule also specifies the details of the mapping ( `= &quot;*match*&quot; -&gt; &quot;*replacement*&quot;` ) where match and replacement are valid surface syntax patterns that match the source and target syntax categories respectively.  The reason for the quote marks is to separate the rule syntax from the source/target language syntax (e..g Java) inside the quotes. The match pattern `&quot;\\p foo.method2&quot;` matches an arbitrary path prefix (a sequence of identifiers trailed by dots or a special case of empty, as defined by the Java grammar) followed by the end of the access_path `foo.method2` as op desired. The replacement pattern is that same access_path_prefix `p` followed by the changed end of access path `foo.method3`.\r\n\r\nThe `ruleset mypatches` collects the individual rules into a group that DMS can apply everywhere.\r\n\r\nOne can run a DMS RuleRewrite engine configured for Java~v11, point it at a legal Java file, and apply the `mypatches` ruleset to achieve what OP desires. DMS parses the file to build the AST, parses the rules to construct the ASTs necessary for matching, matches the rule ASTs and replaces ASTs where matches occur (so you don&#39;t have to do all this stuff with procedural tree hacking).  When complete, DMS regenerates the transformed source text, preserving indentation, comments, etc.\r\n\r\nSo you get a mechanical process for applying the rules of interest, with the rules being fairly easy to write because they use (Java) surface syntax rather than tree-climbing primitives.\r\n\r\nThese are rather simple examples.  We&#39;ve used DMS to carry out massive rewrites across Java and C++, and even to translate COBOL to Java.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Program_transformation\r\n  [2]: http://www.semdesigns.com/Products/DMS/ProgramTransformation.html\r\n  [3]: http://www.semdesigns.com/Products/DMS/DMSToolkit.html","title":"How to automate Java code refactoring using a script with instructions?","body":"<p>Not Groovy based (but then other answers suggesting &quot;OpenRewrite&quot; or &quot;IntelliJ&quot; aren't Groovy based either).</p>\n<p>What OP is asking for is a <a href=\"https://en.wikipedia.org/wiki/Program_transformation\" rel=\"nofollow noreferrer\">program transformation system (PTS)</a> that will let him write custom transformation rules.  Most PTS system provide you with access to the target language AST... and you write custom rules by coding procedural visitors that clamber around the tree, matching and splicing individual tree nodes. Eclipse works like this; apparantly also OpenRewrite.</p>\n<p>That's a clumsy way to do it, mostly because the details of the AST are voluminous and sort of arbitrary, and your tree-crawling code has to know all of this.  See <a href=\"http://www.semdesigns.com/Products/DMS/ProgramTransformation.html\" rel=\"nofollow noreferrer\">program_transforms on AST vs surface syntax</a>  for more details.  Ideally you'd write transformations using the surface syntax of the programming language and let the PTS take care of doing the matching and replacement against the actual AST.</p>\n<p>Our <a href=\"http://www.semdesigns.com/Products/DMS/DMSToolkit.html\" rel=\"nofollow noreferrer\">DMS Software Reengineering Toolkit</a> will let you do this.  The transformations op wants do are coded like this:</p>\n<pre><code>Domain Java~v11; -- specifies which specific Java dialect grammar is relevant\n\nrule rename_foo(p:access_path_prefix): access_path -&gt; access_path\n  = &quot;\\p foo.method2&quot; -&gt; &quot;\\p foo.method3&quot;;\n\nrule rename_myMethod(p:access_path_prefix): access_path -&gt; access_path\n  = &quot;\\p myMethod&quot; -&gt; &quot;\\p your_method&quot;;\n\nrule change_import_AnotherClassFromExternalPackage: import_statement -&gt; import_statement\n  = &quot;import org.you.core.util.AnotherClassFromExternalPackage&quot;\n    -&gt; &quot;import com.me.core.util.AnotherClassFromExternalPackage&quot;;\n\nruleset my_patches = \n   { rename_foo, \n     rename_myMethod, \n     change_import_AnotherClassFromExternalPackage\n   }\n</code></pre>\n<p>The <code>Domain</code> keyword tells DMS which precise grammar to use to parse the source text, including the specific dialect. (Java 6 is not the same as Java 11).</p>\n<p>Individual rules are named (e.g., <code>rename_foo</code>). The parmeter list (e.g. <code>p:access_path_prefix</code>) allows one to specify a named piece of syntax (e.g., <code>p</code>) that can match an arbitrary tree of the syntax category (e.g., <code>access_path_prefix</code>).  Each rule specifies that it is a mapping <code>-&gt;</code> from one piece of syntax to another; for these rules, source and target syntax categories are the same (e.g. <code>access_path</code>).</p>\n<p>Each rule also specifies the details of the mapping ( <code>= &quot;*match*&quot; -&gt; &quot;*replacement*&quot;</code> ) where match and replacement are valid surface syntax patterns that match the source and target syntax categories respectively.  The reason for the quote marks is to separate the rule syntax from the source/target language syntax (e..g Java) inside the quotes. The match pattern <code>&quot;\\p foo.method2&quot;</code> matches an arbitrary path prefix (a sequence of identifiers trailed by dots or a special case of empty, as defined by the Java grammar) followed by the end of the access_path <code>foo.method2</code> as op desired. The replacement pattern is that same access_path_prefix <code>p</code> followed by the changed end of access path <code>foo.method3</code>.</p>\n<p>The <code>ruleset mypatches</code> collects the individual rules into a group that DMS can apply everywhere.</p>\n<p>One can run a DMS RuleRewrite engine configured for Java~v11, point it at a legal Java file, and apply the <code>mypatches</code> ruleset to achieve what OP desires. DMS parses the file to build the AST, parses the rules to construct the ASTs necessary for matching, matches the rule ASTs and replaces ASTs where matches occur (so you don't have to do all this stuff with procedural tree hacking).  When complete, DMS regenerates the transformed source text, preserving indentation, comments, etc.</p>\n<p>So you get a mechanical process for applying the rules of interest, with the rules being fairly easy to write because they use (Java) surface syntax rather than tree-climbing primitives.</p>\n<p>These are rather simple examples.  We've used DMS to carry out massive rewrites across Java and C++, and even to translate COBOL to Java.</p>\n"},{"tags":[],"owner":{"account_id":1920986,"reputation":723,"user_id":1732516,"accept_rate":57,"display_name":"ashK"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677839654,"creation_date":1677839654,"answer_id":75625958,"question_id":75520058,"body_markdown":"I would have an excel with columns like,\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/u9q1P.png\r\n\r\n 1. Use a library like Apache POI to read the Excel file and extract the required information (project name, package name, class name, method name, and field name).\r\n 2. Use a library like Eclipse JDT to parse the source code and build the AST.\r\n 3. Traverse the AST and identify the nodes that correspond to the specified classes, methods, and fields.\r\n 4. Apply the required modifications to the identified AST nodes.\r\n 5. Generate the modified source code from the updated AST.","title":"How to automate Java code refactoring using a script with instructions?","body":"<p>I would have an excel with columns like,</p>\n<p><a href=\"https://i.stack.imgur.com/u9q1P.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/u9q1P.png\" alt=\"enter image description here\" /></a></p>\n<ol>\n<li>Use a library like Apache POI to read the Excel file and extract the required information (project name, package name, class name, method name, and field name).</li>\n<li>Use a library like Eclipse JDT to parse the source code and build the AST.</li>\n<li>Traverse the AST and identify the nodes that correspond to the specified classes, methods, and fields.</li>\n<li>Apply the required modifications to the identified AST nodes.</li>\n<li>Generate the modified source code from the updated AST.</li>\n</ol>\n"}],"owner":{"account_id":12647983,"reputation":137,"user_id":9193100,"display_name":"Garruk The Wildspeaker"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":619,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":3,"score":6,"last_activity_date":1677856217,"creation_date":1676979822,"question_id":75520058,"body_markdown":"How to refactor this class programmatically via Java code/Groovy plugin?\r\nLet&#39;s say, I need to:\r\n- Rename `foo.method2` to `foo.method3`\r\n- Rename `myMethod` to `yourMethod`\r\n- Change the imported package `org.you.core.util.AnotherClassFromExternalPackage`\r\n \r\n```\r\nimport com.me.core.util.AnotherClassFromExternalPackage;\r\nimport com.me.core.util.Foo;\r\n\r\npublic class MyClass implements AnotherClassFromExternalPackage {\r\n\r\n    private final Foo foo;\r\n\r\n    public MyClass() {\r\n        this.foo = new Foo();\r\n    }\r\n\r\n    @Override\r\n    public long myMethod() {\r\n        return foo.method2();\r\n    }\r\n}\r\n```\r\n\r\nHow to create a script that will parse the code, apply syntactical transformations and save it using given instructions?\r\n\r\nThe code above is just an example. The bigger problem is that I have a lot of projects that are using the same external library. And sometimes they release a new version with breaking changes that is breaking the current code after the dependency bump.\r\nAnd I must update the dependency to the latest version every 2 weeks for 10+ projects. I need to write a script that will fix these breaking changes automatically.\r\nIdeally, apply code transformations one by one.","title":"How to automate Java code refactoring using a script with instructions?","body":"<p>How to refactor this class programmatically via Java code/Groovy plugin?\nLet's say, I need to:</p>\n<ul>\n<li>Rename <code>foo.method2</code> to <code>foo.method3</code></li>\n<li>Rename <code>myMethod</code> to <code>yourMethod</code></li>\n<li>Change the imported package <code>org.you.core.util.AnotherClassFromExternalPackage</code></li>\n</ul>\n<pre><code>import com.me.core.util.AnotherClassFromExternalPackage;\nimport com.me.core.util.Foo;\n\npublic class MyClass implements AnotherClassFromExternalPackage {\n\n    private final Foo foo;\n\n    public MyClass() {\n        this.foo = new Foo();\n    }\n\n    @Override\n    public long myMethod() {\n        return foo.method2();\n    }\n}\n</code></pre>\n<p>How to create a script that will parse the code, apply syntactical transformations and save it using given instructions?</p>\n<p>The code above is just an example. The bigger problem is that I have a lot of projects that are using the same external library. And sometimes they release a new version with breaking changes that is breaking the current code after the dependency bump.\nAnd I must update the dependency to the latest version every 2 weeks for 10+ projects. I need to write a script that will fix these breaking changes automatically.\nIdeally, apply code transformations one by one.</p>\n"},{"tags":["java","list","arraylist"],"comments":[{"owner":{"account_id":1303659,"reputation":2036,"user_id":1253088,"display_name":"Vaibs"},"score":0,"creation_date":1586530610,"post_id":61142631,"comment_id":108167618,"body_markdown":"You would have found the solution while searching. many posts. https://stackoverflow.com/questions/541749/how-to-determine-an-objects-class","body":"You would have found the solution while searching. many posts. <a href=\"https://stackoverflow.com/questions/541749/how-to-determine-an-objects-class\" title=\"how to determine an objects class\">stackoverflow.com/questions/541749/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":444874,"reputation":663,"user_id":836967,"display_name":"Giancarlo Romeo"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1586531554,"creation_date":1586530069,"answer_id":61142777,"question_id":61142631,"body_markdown":"Use the `instanceof` to check the *runtime* type of object.\r\n\r\nExample of iteration:\r\n\r\n    for (Item item : db) {\r\n        if (item instanceof Car){\r\n            System.out.println(&quot;A car is: &quot; + item)\r\n        } else {\r\n            System.out.println(&quot;A bike is: &quot; + item)\r\n        }\r\n    }","title":"How to print specific item from ArrayList","body":"<p>Use the <code>instanceof</code> to check the <em>runtime</em> type of object.</p>\n\n<p>Example of iteration:</p>\n\n<pre><code>for (Item item : db) {\n    if (item instanceof Car){\n        System.out.println(\"A car is: \" + item)\n    } else {\n        System.out.println(\"A bike is: \" + item)\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":17989314,"reputation":3,"user_id":13073782,"display_name":"cshostgr"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":61142777,"answer_count":1,"score":0,"last_activity_date":1677856209,"creation_date":1586529595,"question_id":61142631,"body_markdown":"I am trying to print specific item from my ArrayList \r\n\r\nI have super class named  Item, I created a new class with ArrayList named db in the database I&#39;m storing Cars,Bikes , \r\n\r\n    ArrayList&lt; Item &gt; db = new ArrayList&lt; Item &gt;();\r\n\r\n    Car newCar = new Car(getModel(),getPrice());\r\n\r\n    db.add(newCar);\r\n\r\n    Bike newBike = new Bike(getModel(),getPrice())\r\n\r\n    db.add(newBike);\r\n\r\n\r\nNow I&#39;m trying to print only cars something like this,\r\n\r\n    if( db==newCar){\r\n      System.out.println(&quot;The first car is : &quot;+db.car)\r\n    }\r\n    else{\r\n\r\n      System.out.println(&quot;The first bike is : &quot;+db.car)\r\n\r\n    }\r\n\r\n\r\n","title":"How to print specific item from ArrayList","body":"<p>I am trying to print specific item from my ArrayList </p>\n\n<p>I have super class named  Item, I created a new class with ArrayList named db in the database I'm storing Cars,Bikes , </p>\n\n<pre><code>ArrayList&lt; Item &gt; db = new ArrayList&lt; Item &gt;();\n\nCar newCar = new Car(getModel(),getPrice());\n\ndb.add(newCar);\n\nBike newBike = new Bike(getModel(),getPrice())\n\ndb.add(newBike);\n</code></pre>\n\n<p>Now I'm trying to print only cars something like this,</p>\n\n<pre><code>if( db==newCar){\n  System.out.println(\"The first car is : \"+db.car)\n}\nelse{\n\n  System.out.println(\"The first bike is : \"+db.car)\n\n}\n</code></pre>\n"},{"tags":["java","android","android-recyclerview","surfaceview"],"comments":[{"owner":{"account_id":8578846,"reputation":1181,"user_id":6427258,"accept_rate":50,"display_name":"tendai"},"score":0,"creation_date":1577183401,"post_id":59465963,"comment_id":105114224,"body_markdown":"This might not be the best option but you might want to use a static placeholder view and an interface to listen for click changes in order to trigger setting VstGridAdapter.java onBindViewHolder holder.view to r","body":"This might not be the best option but you might want to use a static placeholder view and an interface to listen for click changes in order to trigger setting VstGridAdapter.java onBindViewHolder holder.view to r"},{"owner":{"account_id":1260896,"reputation":1488,"user_id":1219213,"accept_rate":60,"display_name":"TheRealChx101"},"score":1,"creation_date":1577342572,"post_id":59465963,"comment_id":105144978,"body_markdown":"It should work ok. You may be doing something wrong. Most views can be rendered inside the RecyclerView. Make sure that RV has the proper layout manager and orientation set. Also, try inflating your SurfaceView that way it inherits the RV&#39; size. Lastly, I would extend `SurfaceView` into a custom view and move the logic there then inflate the custom class instead so your adapter is only concerned with displaying the SurfaceView.","body":"It should work ok. You may be doing something wrong. Most views can be rendered inside the RecyclerView. Make sure that RV has the proper layout manager and orientation set. Also, try inflating your SurfaceView that way it inherits the RV&#39; size. Lastly, I would extend <code>SurfaceView</code> into a custom view and move the logic there then inflate the custom class instead so your adapter is only concerned with displaying the SurfaceView."},{"owner":{"account_id":10222220,"reputation":75,"user_id":8680581,"display_name":"Clark Kent"},"score":0,"creation_date":1577345665,"post_id":59465963,"comment_id":105145845,"body_markdown":"@TheRealChx101 added a minimal example demonstrating the issue","body":"@TheRealChx101 added a minimal example demonstrating the issue"},{"owner":{"account_id":10222220,"reputation":75,"user_id":8680581,"display_name":"Clark Kent"},"score":0,"creation_date":1577379072,"post_id":59465963,"comment_id":105156622,"body_markdown":"@TheRealChx101 also how would i do that?","body":"@TheRealChx101 also how would i do that?"}],"answers":[{"tags":[],"owner":{"account_id":10222220,"reputation":75,"user_id":8680581,"display_name":"Clark Kent"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1577431912,"creation_date":1577431912,"answer_id":59497487,"question_id":59465963,"body_markdown":"apparently in order to get it to display i needed to give the view fixed size layout paramaters: `mView.setLayoutParams(new ViewGroup.LayoutParams(500, 500));`","title":"Android RecyclerView fails to render a SurfaceView","body":"<p>apparently in order to get it to display i needed to give the view fixed size layout paramaters: <code>mView.setLayoutParams(new ViewGroup.LayoutParams(500, 500));</code></p>\n"}],"owner":{"account_id":10222220,"reputation":75,"user_id":8680581,"display_name":"Clark Kent"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1100,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":59497487,"answer_count":1,"score":2,"last_activity_date":1677855990,"creation_date":1577176146,"question_id":59465963,"body_markdown":"can a SurfaceView be rendered inside a RecyclerView\r\n\r\nEDIT: even this fails to render inside of a RecyclerView: https://github.com/android/ndk-samples/tree/master/hello-gl2\r\n\r\nEDIT2: https://github.com/mgood7123/RecyclerViewSurfaceViewGrid minimal example demonstrating the issue\r\n\r\n```\r\n    // public class GLSurfaceView extends SurfaceView implements SurfaceHolder.Callback2 {\r\n    // class GL2JNIView extends GLSurfaceView {\r\n    GL2JNIView mView;\r\n    public ViewGroup onViewRequest(Context mContext) {\r\n        if (context == null) context = mContext;\r\n        mView = new GL2JNIView(context);\r\n        RelativeLayout rel = new RelativeLayout(context);\r\n        rel.addView(mView);\r\n        mView.onResume();\r\n        return rel;\r\n    }\r\n    public ViewGroup onViewRequest_(Context mContext) {} // old openGL Cube\r\n```\r\n\r\nwhat i am trying to do is make a Grid of SurfaceView&#39;s\r\n\r\n```\r\n@Keep\r\npublic class NativeView {\r\n    String TAG = &quot;EglSample&quot;;\r\n    public static native void nativeOnStart();\r\n    public static native void nativeOnResume();\r\n    public static native void nativeOnPause();\r\n    public static native void nativeOnStop();\r\n\r\n    // this is part of graphics manager\r\n    public native void nativeSetSurface(Surface surface);\r\n\r\n    View surfaceView = null;\r\n    SurfaceHolderCallback surfaceHolderCallback = null;\r\n\r\n    public NativeView(Context context) {\r\n        System.loadLibrary(&quot;nativeegl&quot;);\r\n        surfaceHolderCallback = new SurfaceHolderCallback();\r\n        surfaceView = new View(surfaceHolderCallback, context);\r\n    }\r\n\r\n    class View extends SurfaceView {\r\n        public View(SurfaceHolder.Callback callback, Context context) {\r\n            super(context);\r\n            getHolder().addCallback(callback);\r\n        }\r\n\r\n        public View(SurfaceHolder.Callback callback, Context context, AttributeSet attrs) {\r\n            super(context, attrs);\r\n            getHolder().addCallback(callback);\r\n        }\r\n\r\n        public View(SurfaceHolder.Callback callback, Context context, AttributeSet attrs, int defStyle) {\r\n            super(context, attrs, defStyle);\r\n            getHolder().addCallback(callback);\r\n        }\r\n\r\n        public View(SurfaceHolder.Callback callback, Context context, AttributeSet attrs, int defStyle, int defStyleRes) {\r\n            super(context, attrs, defStyle, defStyleRes);\r\n            getHolder().addCallback(callback);\r\n        }\r\n    }\r\n\r\n    class SurfaceHolderCallback implements SurfaceHolder.Callback {\r\n        @Override\r\n        public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {\r\n            nativeSetSurface(holder.getSurface());\r\n        }\r\n\r\n        @Override\r\n        public void surfaceCreated(SurfaceHolder holder) {\r\n        }\r\n\r\n        @Override\r\n        public void surfaceDestroyed(SurfaceHolder holder) {\r\n            nativeSetSurface(null);\r\n        }\r\n    }\r\n}\r\n    public ViewGroup onViewRequest(Context mContext) {\r\n        if (context == null) context = mContext;\r\n\r\n        if (n == null) n = new NativeView(context);\r\n        Log.i(n.TAG, &quot;onViewRequest(Activity, Context)&quot;);\r\n        // build layout\r\n        RelativeLayout rel = new RelativeLayout(context);\r\n        rel.addView(n.surfaceView);\r\n        n.surfaceView.setOnClickListener(new MyListener());\r\n        // set text\r\n        TextView text = new TextView(context);\r\n        text.setText(&quot;Hello World! Try clicking the screen&quot;);\r\n        text.setTextSize(60f);\r\n        text.setTextColor(Color.WHITE);\r\n        rel.addView(text);\r\n        Log.i(n.TAG, &quot;onCreate()&quot;);\r\n        // build layout\r\n        NativeView.nativeOnStart();\r\n        NativeView.nativeOnResume();\r\n        return rel;\r\n    }\r\n```\r\n\r\nfull:\r\n\r\nhttps://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/vstdemoopengladdonscube/src/main/java/vst/demo/opengl/addons/cube/main.java\r\n\r\nhttps://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/vstdemoopengladdonscube/src/main/java/vst/demo/opengl/addons/cube/NativeView.java\r\n\r\nas it renders corrupted in a recycler view (text but no surface view) (you can barely make out the white text but the fact that it is there means the view heirarchy IS being drawn)\r\n\r\n[![corrupted][1]][1]\r\n\r\n(set USE_RECYCLER_VIEW = true)\r\n\r\nhttps://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/VstManager/src/main/java/vst/manager/VstGrid.java#L29\r\n\r\n```\r\n    Boolean USE_RECYCLER_VIEW = false;\r\n    public LinearLayout getView() {\r\n        // this assumes the first available &quot;*\\.addons\\.*&quot; package\r\n        if (!USE_RECYCLER_VIEW) {\r\n            VST pkg = mVstMan.loadPackage(mActivity, mVstMan.getPackages(mActivity)[0].packageName, false);\r\n            VST.CLASS vstClass = mVstMan.loadClass(pkg, &quot;main&quot;);\r\n            Object vstClassInstance = mVstMan.newInstance(vstClass, &quot;main&quot;);\r\n            // android.widget.RelativeLayout cannot be cast to android.widget.LinearLayout\r\n            LinearLayout x = new LinearLayout(mActivity);\r\n            x.addView((ViewGroup) mVstMan.invokeMethod(\r\n                    vstClass, vstClassInstance,\r\n                    &quot;onViewRequest&quot;, Context.class,\r\n                    pkg.activityApplicationContext\r\n                    )\r\n            );\r\n            return x;\r\n        } else {\r\n            if (recyclerViewMain == null)\r\n                recyclerViewMain = (LinearLayout) LayoutInflater.from(mActivity.getApplicationContext())\r\n                        .inflate(R.layout.vst_grid, null, false);\r\n            if (recyclerView == null) {\r\n                recyclerView = recyclerViewMain\r\n                        .findViewById(R.id.VstGrid);\r\n\r\n                // use this setting to improve performance if you know that changes\r\n                // in content do not change the layout size of the RecyclerView\r\n                recyclerView.setHasFixedSize(true);\r\n            }\r\n            if (layoutManager == null) {\r\n                // use a linear layout manager\r\n                layoutManager = new GridLayoutManager(mActivity, 1);\r\n                recyclerView.setLayoutManager(layoutManager);\r\n            }\r\n            if (mAdapter == null) {\r\n                // specify an adapter (see also next example)\r\n                mAdapter = new VstGridAdapter(mActivity, mVstMan, mVstUI);\r\n                recyclerView.setAdapter(mAdapter);\r\n            }\r\n            mAdapter.update();\r\n            return recyclerViewMain;\r\n        }\r\n    }\r\n```\r\n\r\nhttps://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/VstManager/src/main/java/vst/manager/VstGridAdapter.java#L86\r\n\r\n```\r\n    // Create new views (invoked by the layout manager)\r\n    @Override\r\n    public MyViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\r\n        VST pkg = mVstMan.loadPackage(mActivity, mVstMan.getPackages(mActivity)[0].packageName, false);\r\n        VST.CLASS vstClass = mVstMan.loadClass(pkg, &quot;main&quot;);\r\n        Object vstClassInstance = mVstMan.newInstance(vstClass, &quot;main&quot;);\r\n        // android.widget.RelativeLayout cannot be cast to android.widget.LinearLayout\r\n        LinearLayout x = new LinearLayout(mActivity);\r\n        x.addView((ViewGroup) mVstMan.invokeMethod(\r\n                        vstClass, vstClassInstance,\r\n                        &quot;onViewRequest&quot;, Context.class,\r\n                        pkg.activityApplicationContext\r\n                )\r\n        );\r\n        return new MyViewHolder(x);\r\n    }\r\n```\r\n\r\nhttps://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/vstdemoopengladdonscube/src/main/cpp/RotatingSquares/jniapi.cpp\r\n\r\nhttps://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/vstdemoopengladdonscube/src/main/cpp/RotatingSquares/renderer.cpp#L153\r\n\r\nmeanwhile it renders perfectly fine if NOT in a recycler view (leave USE_RECYCLER_VIEW as false)\r\n\r\n[![not corrupted][2]][2]\r\n\r\nwhy?\r\n\r\n  [1]: https://i.stack.imgur.com/luOux.jpg\r\n  [2]: https://i.stack.imgur.com/3qmAs.jpg","title":"Android RecyclerView fails to render a SurfaceView","body":"<p>can a SurfaceView be rendered inside a RecyclerView</p>\n<p>EDIT: even this fails to render inside of a RecyclerView: <a href=\"https://github.com/android/ndk-samples/tree/master/hello-gl2\" rel=\"nofollow noreferrer\">https://github.com/android/ndk-samples/tree/master/hello-gl2</a></p>\n<p>EDIT2: <a href=\"https://github.com/mgood7123/RecyclerViewSurfaceViewGrid\" rel=\"nofollow noreferrer\">https://github.com/mgood7123/RecyclerViewSurfaceViewGrid</a> minimal example demonstrating the issue</p>\n<pre><code>    // public class GLSurfaceView extends SurfaceView implements SurfaceHolder.Callback2 {\n    // class GL2JNIView extends GLSurfaceView {\n    GL2JNIView mView;\n    public ViewGroup onViewRequest(Context mContext) {\n        if (context == null) context = mContext;\n        mView = new GL2JNIView(context);\n        RelativeLayout rel = new RelativeLayout(context);\n        rel.addView(mView);\n        mView.onResume();\n        return rel;\n    }\n    public ViewGroup onViewRequest_(Context mContext) {} // old openGL Cube\n</code></pre>\n<p>what i am trying to do is make a Grid of SurfaceView's</p>\n<pre><code>@Keep\npublic class NativeView {\n    String TAG = &quot;EglSample&quot;;\n    public static native void nativeOnStart();\n    public static native void nativeOnResume();\n    public static native void nativeOnPause();\n    public static native void nativeOnStop();\n\n    // this is part of graphics manager\n    public native void nativeSetSurface(Surface surface);\n\n    View surfaceView = null;\n    SurfaceHolderCallback surfaceHolderCallback = null;\n\n    public NativeView(Context context) {\n        System.loadLibrary(&quot;nativeegl&quot;);\n        surfaceHolderCallback = new SurfaceHolderCallback();\n        surfaceView = new View(surfaceHolderCallback, context);\n    }\n\n    class View extends SurfaceView {\n        public View(SurfaceHolder.Callback callback, Context context) {\n            super(context);\n            getHolder().addCallback(callback);\n        }\n\n        public View(SurfaceHolder.Callback callback, Context context, AttributeSet attrs) {\n            super(context, attrs);\n            getHolder().addCallback(callback);\n        }\n\n        public View(SurfaceHolder.Callback callback, Context context, AttributeSet attrs, int defStyle) {\n            super(context, attrs, defStyle);\n            getHolder().addCallback(callback);\n        }\n\n        public View(SurfaceHolder.Callback callback, Context context, AttributeSet attrs, int defStyle, int defStyleRes) {\n            super(context, attrs, defStyle, defStyleRes);\n            getHolder().addCallback(callback);\n        }\n    }\n\n    class SurfaceHolderCallback implements SurfaceHolder.Callback {\n        @Override\n        public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {\n            nativeSetSurface(holder.getSurface());\n        }\n\n        @Override\n        public void surfaceCreated(SurfaceHolder holder) {\n        }\n\n        @Override\n        public void surfaceDestroyed(SurfaceHolder holder) {\n            nativeSetSurface(null);\n        }\n    }\n}\n    public ViewGroup onViewRequest(Context mContext) {\n        if (context == null) context = mContext;\n\n        if (n == null) n = new NativeView(context);\n        Log.i(n.TAG, &quot;onViewRequest(Activity, Context)&quot;);\n        // build layout\n        RelativeLayout rel = new RelativeLayout(context);\n        rel.addView(n.surfaceView);\n        n.surfaceView.setOnClickListener(new MyListener());\n        // set text\n        TextView text = new TextView(context);\n        text.setText(&quot;Hello World! Try clicking the screen&quot;);\n        text.setTextSize(60f);\n        text.setTextColor(Color.WHITE);\n        rel.addView(text);\n        Log.i(n.TAG, &quot;onCreate()&quot;);\n        // build layout\n        NativeView.nativeOnStart();\n        NativeView.nativeOnResume();\n        return rel;\n    }\n</code></pre>\n<p>full:</p>\n<p><a href=\"https://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/vstdemoopengladdonscube/src/main/java/vst/demo/opengl/addons/cube/main.java\" rel=\"nofollow noreferrer\">https://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/vstdemoopengladdonscube/src/main/java/vst/demo/opengl/addons/cube/main.java</a></p>\n<p><a href=\"https://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/vstdemoopengladdonscube/src/main/java/vst/demo/opengl/addons/cube/NativeView.java\" rel=\"nofollow noreferrer\">https://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/vstdemoopengladdonscube/src/main/java/vst/demo/opengl/addons/cube/NativeView.java</a></p>\n<p>as it renders corrupted in a recycler view (text but no surface view) (you can barely make out the white text but the fact that it is there means the view heirarchy IS being drawn)</p>\n<p><a href=\"https://i.stack.imgur.com/luOux.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/luOux.jpg\" alt=\"corrupted\" /></a></p>\n<p>(set USE_RECYCLER_VIEW = true)</p>\n<p><a href=\"https://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/VstManager/src/main/java/vst/manager/VstGrid.java#L29\" rel=\"nofollow noreferrer\">https://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/VstManager/src/main/java/vst/manager/VstGrid.java#L29</a></p>\n<pre><code>    Boolean USE_RECYCLER_VIEW = false;\n    public LinearLayout getView() {\n        // this assumes the first available &quot;*\\.addons\\.*&quot; package\n        if (!USE_RECYCLER_VIEW) {\n            VST pkg = mVstMan.loadPackage(mActivity, mVstMan.getPackages(mActivity)[0].packageName, false);\n            VST.CLASS vstClass = mVstMan.loadClass(pkg, &quot;main&quot;);\n            Object vstClassInstance = mVstMan.newInstance(vstClass, &quot;main&quot;);\n            // android.widget.RelativeLayout cannot be cast to android.widget.LinearLayout\n            LinearLayout x = new LinearLayout(mActivity);\n            x.addView((ViewGroup) mVstMan.invokeMethod(\n                    vstClass, vstClassInstance,\n                    &quot;onViewRequest&quot;, Context.class,\n                    pkg.activityApplicationContext\n                    )\n            );\n            return x;\n        } else {\n            if (recyclerViewMain == null)\n                recyclerViewMain = (LinearLayout) LayoutInflater.from(mActivity.getApplicationContext())\n                        .inflate(R.layout.vst_grid, null, false);\n            if (recyclerView == null) {\n                recyclerView = recyclerViewMain\n                        .findViewById(R.id.VstGrid);\n\n                // use this setting to improve performance if you know that changes\n                // in content do not change the layout size of the RecyclerView\n                recyclerView.setHasFixedSize(true);\n            }\n            if (layoutManager == null) {\n                // use a linear layout manager\n                layoutManager = new GridLayoutManager(mActivity, 1);\n                recyclerView.setLayoutManager(layoutManager);\n            }\n            if (mAdapter == null) {\n                // specify an adapter (see also next example)\n                mAdapter = new VstGridAdapter(mActivity, mVstMan, mVstUI);\n                recyclerView.setAdapter(mAdapter);\n            }\n            mAdapter.update();\n            return recyclerViewMain;\n        }\n    }\n</code></pre>\n<p><a href=\"https://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/VstManager/src/main/java/vst/manager/VstGridAdapter.java#L86\" rel=\"nofollow noreferrer\">https://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/VstManager/src/main/java/vst/manager/VstGridAdapter.java#L86</a></p>\n<pre><code>    // Create new views (invoked by the layout manager)\n    @Override\n    public MyViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n        VST pkg = mVstMan.loadPackage(mActivity, mVstMan.getPackages(mActivity)[0].packageName, false);\n        VST.CLASS vstClass = mVstMan.loadClass(pkg, &quot;main&quot;);\n        Object vstClassInstance = mVstMan.newInstance(vstClass, &quot;main&quot;);\n        // android.widget.RelativeLayout cannot be cast to android.widget.LinearLayout\n        LinearLayout x = new LinearLayout(mActivity);\n        x.addView((ViewGroup) mVstMan.invokeMethod(\n                        vstClass, vstClassInstance,\n                        &quot;onViewRequest&quot;, Context.class,\n                        pkg.activityApplicationContext\n                )\n        );\n        return new MyViewHolder(x);\n    }\n</code></pre>\n<p><a href=\"https://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/vstdemoopengladdonscube/src/main/cpp/RotatingSquares/jniapi.cpp\" rel=\"nofollow noreferrer\">https://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/vstdemoopengladdonscube/src/main/cpp/RotatingSquares/jniapi.cpp</a></p>\n<p><a href=\"https://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/vstdemoopengladdonscube/src/main/cpp/RotatingSquares/renderer.cpp#L153\" rel=\"nofollow noreferrer\">https://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/vstdemoopengladdonscube/src/main/cpp/RotatingSquares/renderer.cpp#L153</a></p>\n<p>meanwhile it renders perfectly fine if NOT in a recycler view (leave USE_RECYCLER_VIEW as false)</p>\n<p><a href=\"https://i.stack.imgur.com/3qmAs.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3qmAs.jpg\" alt=\"not corrupted\" /></a></p>\n<p>why?</p>\n"},{"tags":["java","spring","spring-cloud","spring-cloud-stream","spring-cloud-function"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1655684614,"post_id":72681126,"comment_id":128383217,"body_markdown":"How does it fail? Compile error? runtime error? What is the error message / stacktrace?","body":"How does it fail? Compile error? runtime error? What is the error message / stacktrace?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1655704605,"post_id":72681126,"comment_id":128385863,"body_markdown":"The class doesn&#39;t implement `Serializable` a record is automatically serializable.","body":"The class doesn&#39;t implement <code>Serializable</code> a record is automatically serializable."},{"owner":{"account_id":1770403,"reputation":64,"user_id":1615316,"accept_rate":50,"display_name":"Andyrewwer"},"score":0,"creation_date":1655756765,"post_id":72681126,"comment_id":128402887,"body_markdown":"Does this require more than just public class MessageClass implements Serializable {...} -- if so that did not fix it.","body":"Does this require more than just public class MessageClass implements Serializable {...} -- if so that did not fix it."}],"answers":[{"tags":[],"owner":{"account_id":290076,"reputation":228,"user_id":591417,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677855867,"creation_date":1677855867,"answer_id":75628709,"question_id":72681126,"body_markdown":"A bit old, but if someone needs an answer:\r\nThe problem is the class doesn&#39;t have getters: \r\n\r\n    public String content() {\r\n        return content;\r\n    }\r\n\r\n    public String key() {\r\n        return key;\r\n    }\r\nIn records it&#39;s possible because Jackson know abou them and treat them differently, but normal classes should have the good old getters (or you should tell Jackson about it):\r\n\r\n    public String getContent() {\r\n        return content;\r\n    }\r\n\r\n    public String getKey() {\r\n        return key;\r\n    }","title":"Spring Cloud Stream - unable to serialize java class (works for java record)","body":"<p>A bit old, but if someone needs an answer:\nThe problem is the class doesn't have getters:</p>\n<pre><code>public String content() {\n    return content;\n}\n\npublic String key() {\n    return key;\n}\n</code></pre>\n<p>In records it's possible because Jackson know abou them and treat them differently, but normal classes should have the good old getters (or you should tell Jackson about it):</p>\n<pre><code>public String getContent() {\n    return content;\n}\n\npublic String getKey() {\n    return key;\n}\n</code></pre>\n"}],"owner":{"account_id":1770403,"reputation":64,"user_id":1615316,"accept_rate":50,"display_name":"Andyrewwer"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":540,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677855867,"creation_date":1655684107,"question_id":72681126,"body_markdown":"Hi I am having an issue with new functional spring cloud stream... \r\n\r\nI have a basic example:\r\n```\r\n@Autowired\r\n\tprivate StreamBridge streamBridge;\r\n\r\n\t@PostMapping(&quot;/publish/{topic}&quot;)\r\n//\tfails\r\n\tpublic boolean publish(@RequestBody MessageClass msg, @PathVariable String topic) {\r\n//\tworks\r\n//\tpublic boolean publish(@RequestBody MessageRecord msg, @PathVariable String topic) {\r\n\t\treturn this.streamBridge.send(topic, msg);\r\n\t}\r\n```\r\n\r\nTrying to simply as much as possible this is my java class:\r\n```\r\npublic class MessageClass {\r\n\r\n    private String key;\r\n    private String content;\r\n\r\n    public MessageClass(String key, String content) {\r\n        this.key = key;\r\n        this.content = content;\r\n    }\r\n\r\n    public MessageClass() {\r\n    }\r\n\r\n    public String content() {\r\n        return content;\r\n    }\r\n\r\n    public String key() {\r\n        return key;\r\n    }\r\n\r\n    public void setKey(String key) {\r\n        this.key = key;\r\n    }\r\n\r\n    public void setContent(String content) {\r\n        this.content = content;\r\n    }\r\n}\r\n```\r\nand record:\r\n```\r\npublic record MessageRecord(String key, String content) {}\r\n```\r\n\r\nThis fails for the MessageClass but succeeds with MessageRecord. \r\n\r\nRelevant stack trace (I think, full below):\r\n\r\n```\r\njava.lang.ClassCastException: class io.enfuse.streamerrorexample.pkg.MessageClass cannot be cast to class [B (io.enfuse.streamerrorexample.pkg.MessageClass is in unnamed module of loader &#39;app&#39;; [B is in module java.base of loader &#39;bootstrap&#39;)\r\n        at org.apache.kafka.common.serialization.ByteArraySerializer.serialize(ByteArraySerializer.java:19) ~[kafka-clients-3.1.1.jar:na]\r\n```\r\n\r\nSee repo here: https://github.com/andyrewwer/spring-cloud-stream-error-example/settings/access\r\n\r\nWhat is the difference between the java class and record and why does it work for record but not class?\r\n\r\n\r\nFull stack trace:\r\n```\r\n2022-06-19 18:04:14.361 ERROR 70401 --- [nio-8080-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.messaging.MessageHandlingException: error occurred in message handler [org.springframework.cloud.stream.binder.kafka.KafkaMessageChannelBinder$ProducerConfigurationMessageHandler@32e459ed]; nested exception is org.apache.kafka.common.errors.SerializationException: Can&#39;t convert value of class io.enfuse.streamerrorexample.pkg.MessageClass to class org.apache.kafka.common.serialization.ByteArraySerializer specified in value.serializer, failedMessage=GenericMessage [payload=io.enfuse.streamerrorexample.pkg.MessageClass@1dacd968, headers={id=fbe5d434-cd95-00b2-51ca-88a5f3b0f867, contentType=application/json, target-protocol=kafka, timestamp=1655687054356}]] with root cause\r\n\r\njava.lang.ClassCastException: class io.enfuse.streamerrorexample.pkg.MessageClass cannot be cast to class [B (io.enfuse.streamerrorexample.pkg.MessageClass is in unnamed module of loader &#39;app&#39;; [B is in module java.base of loader &#39;bootstrap&#39;)\r\n        at org.apache.kafka.common.serialization.ByteArraySerializer.serialize(ByteArraySerializer.java:19) ~[kafka-clients-3.1.1.jar:na]\r\n        at org.apache.kafka.common.serialization.Serializer.serialize(Serializer.java:62) ~[kafka-clients-3.1.1.jar:na]\r\n        at org.apache.kafka.clients.producer.KafkaProducer.doSend(KafkaProducer.java:954) ~[kafka-clients-3.1.1.jar:na]\r\n        at org.apache.kafka.clients.producer.KafkaProducer.send(KafkaProducer.java:914) ~[kafka-clients-3.1.1.jar:na]\r\n        at org.springframework.kafka.core.DefaultKafkaProducerFactory$CloseSafeProducer.send(DefaultKafkaProducerFactory.java:993) ~[spring-kafka-2.8.6.jar:2.8.6]\r\n        at org.springframework.kafka.core.KafkaTemplate.doSend(KafkaTemplate.java:655) ~[spring-kafka-2.8.6.jar:2.8.6]\r\n        at org.springframework.kafka.core.KafkaTemplate.send(KafkaTemplate.java:429) ~[spring-kafka-2.8.6.jar:2.8.6]\r\n        at org.springframework.integration.kafka.outbound.KafkaProducerMessageHandler.handleRequestMessage(KafkaProducerMessageHandler.java:513) ~[spring-integration-kafka-5.5.12.jar:5.5.12]\r\n        at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:136) ~[spring-integration-core-5.5.12.jar:5.5.12]\r\n        at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:56) ~[spring-integration-core-5.5.12.jar:5.5.12]\r\n        at org.springframework.cloud.stream.binder.AbstractMessageChannelBinder$SendingHandler.handleMessageInternal(AbstractMessageChannelBinder.java:1074) ~[spring-cloud-stream-3.2.4.jar:3.2.4]\r\n        at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:56) ~[spring-integration-core-5.5.12.jar:5.5.12]\r\n        at org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115) ~[spring-integration-core-5.5.12.jar:5.5.12]\r\n        at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133) ~[spring-integration-core-5.5.12.jar:5.5.12]\r\n        at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106) ~[spring-integration-core-5.5.12.jar:5.5.12]\r\n        at org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72) ~[spring-integration-core-5.5.12.jar:5.5.12]\r\n        at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317) ~[spring-integration-core-5.5.12.jar:5.5.12]\r\n        at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272) ~[spring-integration-core-5.5.12.jar:5.5.12]\r\n        at org.springframework.cloud.stream.function.StreamBridge.send(StreamBridge.java:235) ~[spring-cloud-stream-3.2.4.jar:3.2.4]\r\n        at org.springframework.cloud.stream.function.StreamBridge.send(StreamBridge.java:170) ~[spring-cloud-stream-3.2.4.jar:3.2.4]\r\n        at org.springframework.cloud.stream.function.StreamBridge.send(StreamBridge.java:150) ~[spring-cloud-stream-3.2.4.jar:3.2.4]\r\n        at io.enfuse.streamerrorexample.pkg.StreamService.publish(StreamService.java:23) ~[main/:na]\r\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:577) ~[na:na]\r\n        at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.20.jar:5.3.20]\r\n        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.20.jar:5.3.20]\r\n        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.20.jar:5.3.20]\r\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.20.jar:5.3.20]\r\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.20.jar:5.3.20]\r\n        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.20.jar:5.3.20]\r\n        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.20.jar:5.3.20]\r\n        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.20.jar:5.3.20]\r\n        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.20.jar:5.3.20]\r\n        at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.20.jar:5.3.20]\r\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.63.jar:4.0.FR]\r\n        at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.20.jar:5.3.20]\r\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.63.jar:4.0.FR]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.63.jar:9.0.63]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.20.jar:5.3.20]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.20.jar:5.3.20]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.20.jar:5.3.20]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.20.jar:5.3.20]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.20.jar:5.3.20]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.20.jar:5.3.20]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at java.base/java.lang.Thread.run(Thread.java:833) ~[na:an]\r\n```","title":"Spring Cloud Stream - unable to serialize java class (works for java record)","body":"<p>Hi I am having an issue with new functional spring cloud stream...</p>\n<p>I have a basic example:</p>\n<pre><code>@Autowired\n    private StreamBridge streamBridge;\n\n    @PostMapping(&quot;/publish/{topic}&quot;)\n//  fails\n    public boolean publish(@RequestBody MessageClass msg, @PathVariable String topic) {\n//  works\n//  public boolean publish(@RequestBody MessageRecord msg, @PathVariable String topic) {\n        return this.streamBridge.send(topic, msg);\n    }\n</code></pre>\n<p>Trying to simply as much as possible this is my java class:</p>\n<pre><code>public class MessageClass {\n\n    private String key;\n    private String content;\n\n    public MessageClass(String key, String content) {\n        this.key = key;\n        this.content = content;\n    }\n\n    public MessageClass() {\n    }\n\n    public String content() {\n        return content;\n    }\n\n    public String key() {\n        return key;\n    }\n\n    public void setKey(String key) {\n        this.key = key;\n    }\n\n    public void setContent(String content) {\n        this.content = content;\n    }\n}\n</code></pre>\n<p>and record:</p>\n<pre><code>public record MessageRecord(String key, String content) {}\n</code></pre>\n<p>This fails for the MessageClass but succeeds with MessageRecord.</p>\n<p>Relevant stack trace (I think, full below):</p>\n<pre><code>java.lang.ClassCastException: class io.enfuse.streamerrorexample.pkg.MessageClass cannot be cast to class [B (io.enfuse.streamerrorexample.pkg.MessageClass is in unnamed module of loader 'app'; [B is in module java.base of loader 'bootstrap')\n        at org.apache.kafka.common.serialization.ByteArraySerializer.serialize(ByteArraySerializer.java:19) ~[kafka-clients-3.1.1.jar:na]\n</code></pre>\n<p>See repo here: <a href=\"https://github.com/andyrewwer/spring-cloud-stream-error-example/settings/access\" rel=\"nofollow noreferrer\">https://github.com/andyrewwer/spring-cloud-stream-error-example/settings/access</a></p>\n<p>What is the difference between the java class and record and why does it work for record but not class?</p>\n<p>Full stack trace:</p>\n<pre><code>2022-06-19 18:04:14.361 ERROR 70401 --- [nio-8080-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.messaging.MessageHandlingException: error occurred in message handler [org.springframework.cloud.stream.binder.kafka.KafkaMessageChannelBinder$ProducerConfigurationMessageHandler@32e459ed]; nested exception is org.apache.kafka.common.errors.SerializationException: Can't convert value of class io.enfuse.streamerrorexample.pkg.MessageClass to class org.apache.kafka.common.serialization.ByteArraySerializer specified in value.serializer, failedMessage=GenericMessage [payload=io.enfuse.streamerrorexample.pkg.MessageClass@1dacd968, headers={id=fbe5d434-cd95-00b2-51ca-88a5f3b0f867, contentType=application/json, target-protocol=kafka, timestamp=1655687054356}]] with root cause\n\njava.lang.ClassCastException: class io.enfuse.streamerrorexample.pkg.MessageClass cannot be cast to class [B (io.enfuse.streamerrorexample.pkg.MessageClass is in unnamed module of loader 'app'; [B is in module java.base of loader 'bootstrap')\n        at org.apache.kafka.common.serialization.ByteArraySerializer.serialize(ByteArraySerializer.java:19) ~[kafka-clients-3.1.1.jar:na]\n        at org.apache.kafka.common.serialization.Serializer.serialize(Serializer.java:62) ~[kafka-clients-3.1.1.jar:na]\n        at org.apache.kafka.clients.producer.KafkaProducer.doSend(KafkaProducer.java:954) ~[kafka-clients-3.1.1.jar:na]\n        at org.apache.kafka.clients.producer.KafkaProducer.send(KafkaProducer.java:914) ~[kafka-clients-3.1.1.jar:na]\n        at org.springframework.kafka.core.DefaultKafkaProducerFactory$CloseSafeProducer.send(DefaultKafkaProducerFactory.java:993) ~[spring-kafka-2.8.6.jar:2.8.6]\n        at org.springframework.kafka.core.KafkaTemplate.doSend(KafkaTemplate.java:655) ~[spring-kafka-2.8.6.jar:2.8.6]\n        at org.springframework.kafka.core.KafkaTemplate.send(KafkaTemplate.java:429) ~[spring-kafka-2.8.6.jar:2.8.6]\n        at org.springframework.integration.kafka.outbound.KafkaProducerMessageHandler.handleRequestMessage(KafkaProducerMessageHandler.java:513) ~[spring-integration-kafka-5.5.12.jar:5.5.12]\n        at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:136) ~[spring-integration-core-5.5.12.jar:5.5.12]\n        at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:56) ~[spring-integration-core-5.5.12.jar:5.5.12]\n        at org.springframework.cloud.stream.binder.AbstractMessageChannelBinder$SendingHandler.handleMessageInternal(AbstractMessageChannelBinder.java:1074) ~[spring-cloud-stream-3.2.4.jar:3.2.4]\n        at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:56) ~[spring-integration-core-5.5.12.jar:5.5.12]\n        at org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115) ~[spring-integration-core-5.5.12.jar:5.5.12]\n        at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133) ~[spring-integration-core-5.5.12.jar:5.5.12]\n        at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106) ~[spring-integration-core-5.5.12.jar:5.5.12]\n        at org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72) ~[spring-integration-core-5.5.12.jar:5.5.12]\n        at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317) ~[spring-integration-core-5.5.12.jar:5.5.12]\n        at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272) ~[spring-integration-core-5.5.12.jar:5.5.12]\n        at org.springframework.cloud.stream.function.StreamBridge.send(StreamBridge.java:235) ~[spring-cloud-stream-3.2.4.jar:3.2.4]\n        at org.springframework.cloud.stream.function.StreamBridge.send(StreamBridge.java:170) ~[spring-cloud-stream-3.2.4.jar:3.2.4]\n        at org.springframework.cloud.stream.function.StreamBridge.send(StreamBridge.java:150) ~[spring-cloud-stream-3.2.4.jar:3.2.4]\n        at io.enfuse.streamerrorexample.pkg.StreamService.publish(StreamService.java:23) ~[main/:na]\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\n        at java.base/java.lang.reflect.Method.invoke(Method.java:577) ~[na:na]\n        at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.20.jar:5.3.20]\n        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.20.jar:5.3.20]\n        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.20.jar:5.3.20]\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.20.jar:5.3.20]\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.20.jar:5.3.20]\n        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.20.jar:5.3.20]\n        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.20.jar:5.3.20]\n        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.20.jar:5.3.20]\n        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.20.jar:5.3.20]\n        at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.20.jar:5.3.20]\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.63.jar:4.0.FR]\n        at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.20.jar:5.3.20]\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.63.jar:4.0.FR]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.63.jar:9.0.63]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.20.jar:5.3.20]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.20.jar:5.3.20]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.20.jar:5.3.20]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.20.jar:5.3.20]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.20.jar:5.3.20]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.20.jar:5.3.20]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at java.base/java.lang.Thread.run(Thread.java:833) ~[na:an]\n</code></pre>\n"},{"tags":["java","unit-testing","amazon-dynamodb","mockito"],"comments":[{"owner":{"account_id":19772972,"reputation":324,"user_id":14479601,"display_name":"Bend"},"score":0,"creation_date":1677595220,"post_id":75593139,"comment_id":133366374,"body_markdown":"Usually the goal of mocking is to `hard code` functionality during the tests. What functionality are you looking to hard-code? I am guessing you are looking to mock the dbMapper.save(***) since your DB may not exist at test time, is that correct?","body":"Usually the goal of mocking is to <code>hard code</code> functionality during the tests. What functionality are you looking to hard-code? I am guessing you are looking to mock the dbMapper.save(***) since your DB may not exist at test time, is that correct?"},{"owner":{"account_id":15776603,"reputation":3,"user_id":11384263,"display_name":"Dhushy_A"},"score":0,"creation_date":1677653334,"post_id":75593139,"comment_id":133378205,"body_markdown":"yes  I have to mock dbMapper @Bend","body":"yes  I have to mock dbMapper @Bend"}],"answers":[{"tags":[],"owner":{"account_id":19772972,"reputation":324,"user_id":14479601,"display_name":"Bend"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677855533,"creation_date":1677596948,"answer_id":75593830,"question_id":75593139,"body_markdown":"If you are looking to mock `saveOrUpdateToDynamoDb` so that method could be called during tests, without actually trying to connect to the DB, you could do something like this:\r\n\r\n```\r\npublic class Foo {\r\n\r\n    // @VisibleForTesting makes it obvious why this is package-private, not private\r\n    @VisibleForTesting\r\n    DynamoDBMapper dbMapper = ***\r\n\r\n    private void saveOrUpdateToDynamoDb(final JobExecution existingJobExecution) {\r\n        final JobExecution jobExecution = JobExecution.builder().jobMasterId(&quot;12&quot;).jobType(&quot;lamda&quot;)\r\n            .jobAction(&quot;Entry message load into MC&quot;).status(&quot;running&quot;).startDate(startTime).referenceId(&quot;225&quot;)\r\n            .payload(messageBody).ttlExpiry(5259600+Instant.now().getEpochSecond()).build();\r\n        saveOrUpdateToDynamoDb(jobExecution);\r\n    }\r\n\r\n    @VisibleForTesting\r\n    void saveOrUpdateToDynamoDb(final JobExecution existingJobExecution) {\r\n        dbMapper.save(existingJobExecution,\r\n            new TableNameOverride(String.format(STRING_CONCAT, CAPABILITY_CODE, envName, TABLE_NAME)).config());\r\n    }\r\n\r\n}\r\n```\r\n\r\nThen in your tests (which should be in the same package)\r\n```\r\n    @Test\r\n    void testXYZ() {\r\n        doNothing().when(foo.saveOrUpdateToDynamoDb(any(JobExecution.class)));\r\n\r\n        // test now\r\n    }\r\n\r\n    //OR\r\n    @Test\r\n    void testXYZ() {\r\n        Foo foo = new Foo();\r\n        foo.dbMapper = mock(DynamoDBMapper.class);\r\n\r\n        doNothing().when(foo.dbMapper.save(any(JobExecution.class), any(TableNameOverride.class)));\r\n\r\n        // test now\r\n    }\r\n\r\n```\r\n\r\nTo the calling code, this will look like a successful DB save.","title":"How to mock JobExecution.builder() using mockito and mock DynamoDBMapper for unit testing?","body":"<p>If you are looking to mock <code>saveOrUpdateToDynamoDb</code> so that method could be called during tests, without actually trying to connect to the DB, you could do something like this:</p>\n<pre><code>public class Foo {\n\n    // @VisibleForTesting makes it obvious why this is package-private, not private\n    @VisibleForTesting\n    DynamoDBMapper dbMapper = ***\n\n    private void saveOrUpdateToDynamoDb(final JobExecution existingJobExecution) {\n        final JobExecution jobExecution = JobExecution.builder().jobMasterId(&quot;12&quot;).jobType(&quot;lamda&quot;)\n            .jobAction(&quot;Entry message load into MC&quot;).status(&quot;running&quot;).startDate(startTime).referenceId(&quot;225&quot;)\n            .payload(messageBody).ttlExpiry(5259600+Instant.now().getEpochSecond()).build();\n        saveOrUpdateToDynamoDb(jobExecution);\n    }\n\n    @VisibleForTesting\n    void saveOrUpdateToDynamoDb(final JobExecution existingJobExecution) {\n        dbMapper.save(existingJobExecution,\n            new TableNameOverride(String.format(STRING_CONCAT, CAPABILITY_CODE, envName, TABLE_NAME)).config());\n    }\n\n}\n</code></pre>\n<p>Then in your tests (which should be in the same package)</p>\n<pre><code>    @Test\n    void testXYZ() {\n        doNothing().when(foo.saveOrUpdateToDynamoDb(any(JobExecution.class)));\n\n        // test now\n    }\n\n    //OR\n    @Test\n    void testXYZ() {\n        Foo foo = new Foo();\n        foo.dbMapper = mock(DynamoDBMapper.class);\n\n        doNothing().when(foo.dbMapper.save(any(JobExecution.class), any(TableNameOverride.class)));\n\n        // test now\n    }\n\n</code></pre>\n<p>To the calling code, this will look like a successful DB save.</p>\n"}],"owner":{"account_id":15776603,"reputation":3,"user_id":11384263,"display_name":"Dhushy_A"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677855533,"creation_date":1677593205,"question_id":75593139,"body_markdown":"I want to test below method using mockito. jobExecution object is saved in DynamoDB. Please refer the code below.\r\n\r\n    private void saveOrUpdateToDynamoDb(final JobExecution existingJobExecution) {\r\n    final JobExecution jobExecution = JobExecution.builder().jobMasterId(&quot;12&quot;).jobType(&quot;lamda&quot;)\r\n            \t\t\t.jobAction(&quot;Entry message load into MC&quot;).status(&quot;running&quot;).startDate(startTime).referenceId(&quot;225&quot;)\r\n            \t\t\t\t.payload(messageBody).ttlExpiry(5259600+Instant.now().getEpochSecond()).build();\r\n    saveOrUpdateToDynamoDb(jobExecution);\r\n    }\r\n\r\n    private void saveOrUpdateToDynamoDb(final JobExecution existingJobExecution) {\r\n    \tdbMapper.save(existingJobExecution,\r\n    \t\t\t\t\tnew TableNameOverride(String.format(STRING_CONCAT, CAPABILITY_CODE, envName, TABLE_NAME)).config());\r\n    }\r\n\r\n","title":"How to mock JobExecution.builder() using mockito and mock DynamoDBMapper for unit testing?","body":"<p>I want to test below method using mockito. jobExecution object is saved in DynamoDB. Please refer the code below.</p>\n<pre><code>private void saveOrUpdateToDynamoDb(final JobExecution existingJobExecution) {\nfinal JobExecution jobExecution = JobExecution.builder().jobMasterId(&quot;12&quot;).jobType(&quot;lamda&quot;)\n                    .jobAction(&quot;Entry message load into MC&quot;).status(&quot;running&quot;).startDate(startTime).referenceId(&quot;225&quot;)\n                        .payload(messageBody).ttlExpiry(5259600+Instant.now().getEpochSecond()).build();\nsaveOrUpdateToDynamoDb(jobExecution);\n}\n\nprivate void saveOrUpdateToDynamoDb(final JobExecution existingJobExecution) {\n    dbMapper.save(existingJobExecution,\n                    new TableNameOverride(String.format(STRING_CONCAT, CAPABILITY_CODE, envName, TABLE_NAME)).config());\n}\n</code></pre>\n"},{"tags":["java","debugging","webview","javafx","getelementbyid"],"comments":[{"owner":{"account_id":4824596,"reputation":10769,"user_id":3894351,"accept_rate":75,"display_name":"Elltz"},"score":0,"creation_date":1443471166,"post_id":32829596,"comment_id":53497825,"body_markdown":"post the whole error log sir","body":"post the whole error log sir"},{"owner":{"account_id":2599692,"reputation":89,"user_id":2252455,"accept_rate":71,"display_name":"lorigio"},"score":0,"creation_date":1443472848,"post_id":32829596,"comment_id":53498687,"body_markdown":"@Elltz it only says nullpointerexception and the number of the line","body":"@Elltz it only says nullpointerexception and the number of the line"},{"owner":{"account_id":329268,"reputation":1561,"user_id":652696,"accept_rate":75,"display_name":"dejuknow"},"score":0,"creation_date":1443476569,"post_id":32829596,"comment_id":53500435,"body_markdown":"So which line is it?","body":"So which line is it?"},{"owner":{"account_id":2599692,"reputation":89,"user_id":2252455,"accept_rate":71,"display_name":"lorigio"},"score":0,"creation_date":1443476651,"post_id":32829596,"comment_id":53500470,"body_markdown":"@dejuknow System.out.println(&quot;You are logged in as &quot; + el.getChildNodes().item(1).getChildNodes().item(1).getTextContent().trim());","body":"@dejuknow System.out.println(&quot;You are logged in as &quot; + el.getChildNodes().item(1).getChildNodes().item(1).getTextCo&zwnj;&#8203;ntent().trim());"}],"answers":[{"tags":[],"owner":{"account_id":329268,"reputation":1561,"user_id":652696,"accept_rate":75,"display_name":"dejuknow"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1443477339,"creation_date":1443477339,"answer_id":32832443,"question_id":32829596,"body_markdown":"Either:\r\n\r\n1) `engine.getDocument().getElementById(&quot;nav-profile&quot;)` is returning null so your `Element el` is null.\r\n\r\nOR\r\n\r\n2) something in the chained call below is returning null, perhaps your `.item(1)` method (did you mean `.item(0)`)?\r\n\r\n    el.getChildNodes().item(1).getChildNodes().item(1).getTextContent()\r\n\r\n\r\nInstead of polling every five seconds, the better solution would be to attach a listener to the load worker and only check when the webpage has successfully loaded. See the API for an [example][1].\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/javafx/api/javafx/scene/web/WebEngine.html","title":"bug: javafx webengine getelementbyid return null inside a thread","body":"<p>Either:</p>\n\n<p>1) <code>engine.getDocument().getElementById(\"nav-profile\")</code> is returning null so your <code>Element el</code> is null.</p>\n\n<p>OR</p>\n\n<p>2) something in the chained call below is returning null, perhaps your <code>.item(1)</code> method (did you mean <code>.item(0)</code>)?</p>\n\n<pre><code>el.getChildNodes().item(1).getChildNodes().item(1).getTextContent()\n</code></pre>\n\n<p>Instead of polling every five seconds, the better solution would be to attach a listener to the load worker and only check when the webpage has successfully loaded. See the API for an <a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/scene/web/WebEngine.html\" rel=\"nofollow\">example</a>.</p>\n"},{"tags":[],"owner":{"account_id":4948185,"reputation":248,"user_id":3983013,"accept_rate":75,"display_name":"Piotr Michalczyk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677855056,"creation_date":1677855056,"answer_id":75628560,"question_id":32829596,"body_markdown":"From what I understood when it comes to dealing with JavaFX, the FX Application main thread is responsible for controlling JavaFX objects directly and other threads are disallowed. In this particular case this caused NullPointerException to be thrown, in other cases `&#39;Not on FX application thread&#39;` would probably be seen. To solve this problem the `Platform.runLater(runnableObject)` should be used.\r\n","title":"bug: javafx webengine getelementbyid return null inside a thread","body":"<p>From what I understood when it comes to dealing with JavaFX, the FX Application main thread is responsible for controlling JavaFX objects directly and other threads are disallowed. In this particular case this caused NullPointerException to be thrown, in other cases <code>'Not on FX application thread'</code> would probably be seen. To solve this problem the <code>Platform.runLater(runnableObject)</code> should be used.</p>\n"}],"owner":{"account_id":2599692,"reputation":89,"user_id":2252455,"accept_rate":71,"display_name":"lorigio"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1124,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1677855056,"creation_date":1443465287,"question_id":32829596,"body_markdown":"Edit: added screenshot \r\n\r\ni have a problem with javafx.\r\nI need to get a element from the document but when i write this code inside a thread it returns null on getelementbyid\r\n\r\nWorks:\r\n\r\n            scanprofilesbutton.setOnAction((ActionEvent e) -&gt; {\r\n            \r\n            if (engine.getLocation().contains(&quot;events&quot;)) {\r\n                if (engine.getDocument() == null) {\r\n                    System.out.println(&quot;null&quot;);\r\n                }\r\n               \r\n                Element el = engine.getDocument().getElementById(&quot;nav-profile&quot;);\r\n                System.out.println(&quot;You are logged in as &quot; + el.getChildNodes().item(1).getChildNodes().item(1).getTextContent().trim());\r\n            }            \r\n        });\r\n\r\nException (java.lang.NullPointerException):\r\n\r\n            scanprofilesbutton.setOnAction((ActionEvent e) -&gt; {\r\n            \r\n            Thread thread = new Thread() {\r\n                public void run() {\r\n                    while (true) {\r\n                        if (engine.getLocation().contains(&quot;events&quot;)) {\r\n                            if (engine.getDocument() == null) {\r\n                                System.out.println(&quot;null&quot;);\r\n                            }\r\n                          \r\n                            Element el = engine.getDocument().getElementById(&quot;nav-profile&quot;);\r\n                            Exception -&gt;&gt; System.out.println(&quot;You are logged in as &quot; + el.getChildNodes().item(1).getChildNodes().item(1).getTextContent().trim());                         \r\n                        } else {\r\n                            break;\r\n                        }\r\n                        try {\r\n                            Thread.sleep(5000);\r\n                        } catch (Exception e) {\r\n                        }\r\n                    }\r\n                }\r\n            };\r\n\r\n            thread.start();\r\n        });\r\n\r\nI&#39;m stuck on this and i didn&#39;t found any solution. Thanks!\r\n\r\nscreenshot:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/yPLSy.png","title":"bug: javafx webengine getelementbyid return null inside a thread","body":"<p>Edit: added screenshot </p>\n\n<p>i have a problem with javafx.\nI need to get a element from the document but when i write this code inside a thread it returns null on getelementbyid</p>\n\n<p>Works:</p>\n\n<pre><code>        scanprofilesbutton.setOnAction((ActionEvent e) -&gt; {\n\n        if (engine.getLocation().contains(\"events\")) {\n            if (engine.getDocument() == null) {\n                System.out.println(\"null\");\n            }\n\n            Element el = engine.getDocument().getElementById(\"nav-profile\");\n            System.out.println(\"You are logged in as \" + el.getChildNodes().item(1).getChildNodes().item(1).getTextContent().trim());\n        }            \n    });\n</code></pre>\n\n<p>Exception (java.lang.NullPointerException):</p>\n\n<pre><code>        scanprofilesbutton.setOnAction((ActionEvent e) -&gt; {\n\n        Thread thread = new Thread() {\n            public void run() {\n                while (true) {\n                    if (engine.getLocation().contains(\"events\")) {\n                        if (engine.getDocument() == null) {\n                            System.out.println(\"null\");\n                        }\n\n                        Element el = engine.getDocument().getElementById(\"nav-profile\");\n                        Exception -&gt;&gt; System.out.println(\"You are logged in as \" + el.getChildNodes().item(1).getChildNodes().item(1).getTextContent().trim());                         \n                    } else {\n                        break;\n                    }\n                    try {\n                        Thread.sleep(5000);\n                    } catch (Exception e) {\n                    }\n                }\n            }\n        };\n\n        thread.start();\n    });\n</code></pre>\n\n<p>I'm stuck on this and i didn't found any solution. Thanks!</p>\n\n<p>screenshot:\n<a href=\"https://i.stack.imgur.com/yPLSy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yPLSy.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","spring-boot","java-8"],"comments":[{"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"score":2,"creation_date":1677851852,"post_id":75627970,"comment_id":133423841,"body_markdown":"you mean `|| emp.getEmpEmailId().equals(empEmailId)` ? no need to use `emp-&gt;` in the second part of the condition.","body":"you mean <code>|| emp.getEmpEmailId().equals(empEmailId)</code> ? no need to use <code>emp-&gt;</code> in the second part of the condition."}],"answers":[{"tags":[],"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677854128,"creation_date":1677854128,"answer_id":75628396,"question_id":75627970,"body_markdown":"A simple solution will be to use the simple &#39;or&#39; expression:\r\n\r\n    @Test\r\n\tvoid test() {\r\n\t\tvar allData = List.of(\r\n\t\t\tnew Employee(&quot;john&quot;, &quot;a@b.c&quot;),\r\n\t\t\tnew Employee(&quot;doe&quot;, &quot;a@b.c&quot;),\r\n\t\t\tnew Employee(&quot;jane&quot;, &quot;x@y.z&quot;)\r\n\t\t);\r\n\r\n\t\tvar filtered = allData.stream()\r\n\t\t\t.filter(emp -&gt;  &quot;jane&quot;.equals(emp.empName()) || &quot;x@y.z&quot;.equals(emp.empName()))\r\n\t\t    .collect(Collectors.toList());\r\n    }\r\n\r\nIf the filtering criteria is describing something specific about this `employee`, you can encapsulate it inside the class, like this:\r\n\r\n    record Employee (String empName, String empEmailId) {\r\n    \tprivate boolean hasNameOrEmail(String name, String email) {\r\n    \t\treturn name.equals(this.empName) || email.equals(this.empEmailId);\r\n    \t}\r\n    }\r\n    \r\n    @Test\r\n\tvoid test() {\r\n        // ...\r\n        var filtered = allData.stream()\r\n\t\t\t.filter(emp -&gt; emp.hasNameOrEmail(&quot;jane&quot;, &quot;x@y.z&quot;))\r\n\t\t    .collect(Collectors.toList());\r\n    }\r\n\r\nLastly, if you want to create something more generic, you can declare different `Predicate` objects that can be chained with `.or()` :\r\n\r\n    public Predicate&lt;Employee&gt; hasName(String lookingFor) {\r\n    \treturn emp -&gt; lookingFor.equals(emp.empName());\r\n    }\r\n    public Predicate&lt;Employee&gt; hasEmail(String lookingFor) {\r\n    \treturn emp -&gt; lookingFor.equals(emp.empEmailId());\r\n    }\r\n\r\n    @Test\r\n    void test() {\r\n    \t// ...\t\t\r\n    \tvar filtered = allData.stream()\r\n    \t\t.filter(hasName(&quot;jane&quot;).or(hasEmail(&quot;x@y.z&quot;)))\r\n    \t\t.collect(Collectors.toList());\r\n    }\r\n","title":"how to use multiple filter using OR conditon in java 8","body":"<p>A simple solution will be to use the simple 'or' expression:</p>\n<pre><code>@Test\nvoid test() {\n    var allData = List.of(\n        new Employee(&quot;john&quot;, &quot;a@b.c&quot;),\n        new Employee(&quot;doe&quot;, &quot;a@b.c&quot;),\n        new Employee(&quot;jane&quot;, &quot;x@y.z&quot;)\n    );\n\n    var filtered = allData.stream()\n        .filter(emp -&gt;  &quot;jane&quot;.equals(emp.empName()) || &quot;x@y.z&quot;.equals(emp.empName()))\n        .collect(Collectors.toList());\n}\n</code></pre>\n<p>If the filtering criteria is describing something specific about this <code>employee</code>, you can encapsulate it inside the class, like this:</p>\n<pre><code>record Employee (String empName, String empEmailId) {\n    private boolean hasNameOrEmail(String name, String email) {\n        return name.equals(this.empName) || email.equals(this.empEmailId);\n    }\n}\n\n@Test\nvoid test() {\n    // ...\n    var filtered = allData.stream()\n        .filter(emp -&gt; emp.hasNameOrEmail(&quot;jane&quot;, &quot;x@y.z&quot;))\n        .collect(Collectors.toList());\n}\n</code></pre>\n<p>Lastly, if you want to create something more generic, you can declare different <code>Predicate</code> objects that can be chained with <code>.or()</code> :</p>\n<pre><code>public Predicate&lt;Employee&gt; hasName(String lookingFor) {\n    return emp -&gt; lookingFor.equals(emp.empName());\n}\npublic Predicate&lt;Employee&gt; hasEmail(String lookingFor) {\n    return emp -&gt; lookingFor.equals(emp.empEmailId());\n}\n\n@Test\nvoid test() {\n    // ...      \n    var filtered = allData.stream()\n        .filter(hasName(&quot;jane&quot;).or(hasEmail(&quot;x@y.z&quot;)))\n        .collect(Collectors.toList());\n}\n</code></pre>\n"}],"owner":{"account_id":27927637,"reputation":1,"user_id":21326393,"display_name":"522_Tejas Gundgal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1677924023,"answer_count":1,"score":-1,"last_activity_date":1677854128,"creation_date":1677851692,"question_id":75627970,"body_markdown":"how to use multiple filter using OR conditon in java 8\r\n\r\n    return getAllData().stream()\r\n                .filter(emp -&gt; emp.getEmpName().equals(empName) &amp;&amp; emp-&gt;emp.getEmpEmailId().equals(empEmailId))\r\n                .collect(Collectors.toList());\r\n\r\n\r\ni&#39;ve tried this butnits not accepting my .getEmailId()\r\n\r\ncan anyone please help\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"how to use multiple filter using OR conditon in java 8","body":"<p>how to use multiple filter using OR conditon in java 8</p>\n<pre><code>return getAllData().stream()\n            .filter(emp -&gt; emp.getEmpName().equals(empName) &amp;&amp; emp-&gt;emp.getEmpEmailId().equals(empEmailId))\n            .collect(Collectors.toList());\n</code></pre>\n<p>i've tried this butnits not accepting my .getEmailId()</p>\n<p>can anyone please help</p>\n"},{"tags":["java","security"],"comments":[{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1677854075,"post_id":75628345,"comment_id":133424623,"body_markdown":"Which paths do you want to allow? You probably don&#39;t want your users to call `downloadPdf(&quot;../../../../../../../etc/passwd&quot;)`. If your file names follow a pattern, you could only allow those. Or forbid anything that&#39;s not a letter or digit, as well as two consecutive dots (but allow a single dot for the file extension).","body":"Which paths do you want to allow? You probably don&#39;t want your users to call <code>downloadPdf(&quot;..&#47;..&#47;..&#47;..&#47;..&#47;..&#47;..&#47;etc&#47;passwd&quot;)</code>. If your file names follow a pattern, you could only allow those. Or forbid anything that&#39;s not a letter or digit, as well as two consecutive dots (but allow a single dot for the file extension)."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1677855200,"post_id":75628345,"comment_id":133424966,"body_markdown":"This is really more of a logical issue since you can only mitigate this by *not* assigning the sort of stuff @knittl has just mentioned, so it depends on the variables more than the code in which they are used. Better code might look more like `Path pdfFile = Path.of(path).resolve(&quot;PDF&quot;).resolve(fileName);InputStream in = Files.newInputStream(pdfFile);`","body":"This is really more of a logical issue since you can only mitigate this by <i>not</i> assigning the sort of stuff @knittl has just mentioned, so it depends on the variables more than the code in which they are used. Better code might look more like <code>Path pdfFile = Path.of(path).resolve(&quot;PDF&quot;).resolve(fileName);InputStream in = Files.newInputStream(pdfFile);</code>"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1677861238,"post_id":75628345,"comment_id":133426838,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":23758415,"reputation":1,"user_id":17774198,"display_name":"Pragati"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677853856,"creation_date":1677853856,"question_id":75628345,"body_markdown":"Controller class -\r\nGet method calls a downloadPdf\r\n\r\nServiceImpl class -\r\n     downloadPdf (fileName) \r\n     {\r\n     pdfFilePath = path + &quot;/PDF/&quot;  \r\n      **FileInputStream fs = new  FileInputStream (new File(pdfFilePath + fileName))**\r\n    }\r\n\r\nHighlighted code is throwing Path Manipulation vulnerability, how to fix this ?\r\nApproach I was thinking - To getCanonicalPath of pdfFilePath or fileName or both and then compares it with expected path ?\r\n\r\n\r\nsome validatePath method which I can use to fix it.","title":"How to remediate Path Manipulation in Java Code","body":"<p>Controller class -\nGet method calls a downloadPdf</p>\n<p>ServiceImpl class -\ndownloadPdf (fileName)\n{\npdfFilePath = path + &quot;/PDF/&quot;<br />\n<strong>FileInputStream fs = new  FileInputStream (new File(pdfFilePath + fileName))</strong>\n}</p>\n<p>Highlighted code is throwing Path Manipulation vulnerability, how to fix this ?\nApproach I was thinking - To getCanonicalPath of pdfFilePath or fileName or both and then compares it with expected path ?</p>\n<p>some validatePath method which I can use to fix it.</p>\n"},{"tags":["javascript","java","c#","sql"],"comments":[{"owner":{"account_id":20264817,"reputation":56067,"user_id":14868997,"display_name":"Charlieface"},"score":0,"creation_date":1677853682,"post_id":75627235,"comment_id":133424485,"body_markdown":"The `_5` and `_9` are confusing me, they seem irrelevant, unclear why you would need to alias like that. The ultimate goal is still unclear. So are you trying to take a single table, and nest all its foreign-keyed tables as JSON objects? Why is pure SQL disallowed, it looks like it could be done with dynamic SQL generated from querying the system tables for foreign keys? Do you want an answer in Java, C# or JS? Picking only one will likely get you a better answer.","body":"The <code>_5</code> and <code>_9</code> are confusing me, they seem irrelevant, unclear why you would need to alias like that. The ultimate goal is still unclear. So are you trying to take a single table, and nest all its foreign-keyed tables as JSON objects? Why is pure SQL disallowed, it looks like it could be done with dynamic SQL generated from querying the system tables for foreign keys? Do you want an answer in Java, C# or JS? Picking only one will likely get you a better answer."},{"owner":{"account_id":2978117,"reputation":655,"user_id":2528735,"display_name":"thewallrus"},"score":0,"creation_date":1677854208,"post_id":75627235,"comment_id":133424664,"body_markdown":"What format is your input? You&#39;ve got 3 different way here,  1)You&#39;ve shown a database which could be read as input, 2)you&#39;ve hardcoded an input in code with `new String[]`, 3)and you have a JSON input also. It does look like you want a JSON output though.","body":"What format is your input? You&#39;ve got 3 different way here,  1)You&#39;ve shown a database which could be read as input, 2)you&#39;ve hardcoded an input in code with <code>new String[]</code>, 3)and you have a JSON input also. It does look like you want a JSON output though."},{"owner":{"account_id":931121,"reputation":21651,"user_id":961018,"accept_rate":56,"display_name":"mjs"},"score":0,"creation_date":1677854397,"post_id":75627235,"comment_id":133424720,"body_markdown":"No, I don&#39;t want json output. Just that kind of structure. I have to present to you someway. Yes, it comes from the database. Currently a Java ResultSet at its core. But the source of the data is less relevant which is why I had to produce a smaller example which can easily be used to further the cause. You may try it on a ResultSet as well.","body":"No, I don&#39;t want json output. Just that kind of structure. I have to present to you someway. Yes, it comes from the database. Currently a Java ResultSet at its core. But the source of the data is less relevant which is why I had to produce a smaller example which can easily be used to further the cause. You may try it on a ResultSet as well."},{"owner":{"account_id":931121,"reputation":21651,"user_id":961018,"accept_rate":56,"display_name":"mjs"},"score":0,"creation_date":1677854610,"post_id":75627235,"comment_id":133424767,"body_markdown":"@Charlieface I am not sure how it is confusing but it is confusing to me as well TBH. I haven&#39;t been sure how to tackle the problem and surely the _9 does not help. The reason for them is that you might sometimes have joins on the same table, so you want to be able to distinguish them. You may try to look at the other example which does not have these, but try to look past them I would say. SQL agg functions will not do because you are assuming the result is always serializable, which almost anything is, even bytea but it is not ideal to transform it into one col/val at the DB level. Java!","body":"@Charlieface I am not sure how it is confusing but it is confusing to me as well TBH. I haven&#39;t been sure how to tackle the problem and surely the _9 does not help. The reason for them is that you might sometimes have joins on the same table, so you want to be able to distinguish them. You may try to look at the other example which does not have these, but try to look past them I would say. SQL agg functions will not do because you are assuming the result is always serializable, which almost anything is, even bytea but it is not ideal to transform it into one col/val at the DB level. Java!"},{"owner":{"account_id":20264817,"reputation":56067,"user_id":14868997,"display_name":"Charlieface"},"score":0,"creation_date":1677854795,"post_id":75627235,"comment_id":133424826,"body_markdown":"Well you can use nested `JSON_OBJECT_AGG` functions, and generate those dynamically. Please be clear about what exactly you are trying to achieve, in other words how do you want to make this more generic (more able to deal with different table designs)? Which tables would you automatically include, what happens if you have a recursive foreign-key etc?","body":"Well you can use nested <code>JSON_OBJECT_AGG</code> functions, and generate those dynamically. Please be clear about what exactly you are trying to achieve, in other words how do you want to make this more generic (more able to deal with different table designs)? Which tables would you automatically include, what happens if you have a recursive foreign-key etc?"},{"owner":{"account_id":931121,"reputation":21651,"user_id":961018,"accept_rate":56,"display_name":"mjs"},"score":0,"creation_date":1677861238,"post_id":75627235,"comment_id":133426839,"body_markdown":"@Charlieface I think you are thinking too far ahead. The problem at hand is to be able to modify the table rows, as in grouping them by their join points. Then presenting them in the fashion I presented. Think of this table as Account hasMany Shops hasMany Text. In the end, I want to build an object where I can access account.shops[0].text[0] .. the data is there to do it. Hibernate does this for us with the same set of data. But I can not with ease get there myself.","body":"@Charlieface I think you are thinking too far ahead. The problem at hand is to be able to modify the table rows, as in grouping them by their join points. Then presenting them in the fashion I presented. Think of this table as Account hasMany Shops hasMany Text. In the end, I want to build an object where I can access account.shops[0].text[0] .. the data is there to do it. Hibernate does this for us with the same set of data. But I can not with ease get there myself."},{"owner":{"account_id":20264817,"reputation":56067,"user_id":14868997,"display_name":"Charlieface"},"score":0,"creation_date":1677862750,"post_id":75627235,"comment_id":133427288,"body_markdown":"Does it need to be in Postgres or can it be SQL Server? You can do it in Postgres something like this https://dbfiddle.uk/cRaKpfDi","body":"Does it need to be in Postgres or can it be SQL Server? You can do it in Postgres something like this <a href=\"https://dbfiddle.uk/cRaKpfDi\" rel=\"nofollow noreferrer\">dbfiddle.uk/cRaKpfDi</a>"},{"owner":{"account_id":931121,"reputation":21651,"user_id":961018,"accept_rate":56,"display_name":"mjs"},"score":0,"creation_date":1677863466,"post_id":75627235,"comment_id":133427512,"body_markdown":"Neither, I think that was clear :) Whatever those DB&#39;s are capable of doing I would like to do on the backend instead. The output that was generated by your link was also incomplete unless the underlying data is wrong but something along those lines, but again, the goal is to do similarly but on the backend.","body":"Neither, I think that was clear :) Whatever those DB&#39;s are capable of doing I would like to do on the backend instead. The output that was generated by your link was also incomplete unless the underlying data is wrong but something along those lines, but again, the goal is to do similarly but on the backend."}],"owner":{"account_id":931121,"reputation":21651,"user_id":961018,"accept_rate":56,"display_name":"mjs"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677853369,"creation_date":1677847452,"question_id":75627235,"body_markdown":"I can not find any satisfactory answer on this seemingly common issue with rows repeating for join queries. \r\n\r\n---\r\n---\r\n\r\nNote I am looking for a **very** **particular** answer, but I know this is possible to do. \r\n\r\nSo I believe in order for this not to get out of hand with answers that go off the trail please, try to adhere to these rules: \r\n\r\n  1. Do not produce a response in how to do it in pure SQL, or at the DB level. \r\n  2. Do not answer with a very specific answer to this exact problem with hard to reuse code. It needs to be repeatable with other structures. It means the joins/nesting can be arbitrarily long, and not limited to two as in this example. \r\n  3. You may utilize pseudo code or any language you like as long as it is commented on the process and clear. Personally I utilize Java so would have been ideal. \r\n  4. No hibernate solutions. \r\n  5. Is as efficient as possible but postprocessing after row/col collection with Java streams might be ok but is not the ideal solution. On the fly grouping would be ideal on the first iteration of the data. \r\n\r\nNow, lets dig deeper: \r\n\r\nWhat we have is output that looks something like this: \r\n[![enter image description here][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/VEwmN.png\r\n\r\nEntire create, insert and query can be found here on **dbfiddle**: \r\nhttps://dbfiddle.uk/a6TIilXz\r\n\r\nFrom the fiddle it is quite easy to understand the relationship of the columns. \r\n\r\nWe know from this query that the join is : \r\n\r\n&gt; account_3.id = accountshop_5.account\r\n\r\nLets call this relationship for **shops**\r\n\r\nThen we know another join: \r\n\r\n&gt; accountshop_5.shop = shoptext_9.shop\r\n\r\nLets call this relationship for **texts**\r\n\r\nSo we can define: \r\n\r\n    let relations = {\r\n        &#39;account_3.id -&gt; accountshop_5.account&#39; : &#39;shops&#39;,\r\n        &#39;accountshop_5.shop -&gt; shoptext_9.shop&#39; : &#39;texts&#39;\r\n    }\r\n\r\n---\r\n\r\n---\r\n\r\n\r\nThe goal is to iterate the **eachRow**, and **eachColumnKey** and in the end generate something that will look like this: \r\n\r\n    [\r\n        { /* account_3 */\r\n            \r\n            id: &#39;account.1&#39;,\r\n            \r\n            shops: [ /* accountshop_5 */\r\n            \r\n                {\r\n                    id      : &#39;account.1 ::shop.1&#39;,\r\n                    account : &#39;account.1&#39;,\r\n                    shop    : &#39;shop.1&#39;,\r\n                    \r\n                    texts: [ /* shoptext_9 */\r\n                        {\r\n                            id  : &#39;shop.1 :: txt.1&#39;,\r\n                            \r\n                            shop: &#39;shop.1&#39;,\r\n                            txt : &#39;This is txt 1&#39;\r\n                        },\r\n                        \r\n                        {\r\n                            id  : &#39;shop.1 :: txt.2&#39;,\r\n                            \r\n                            shop: &#39;shop.1&#39;,\r\n                            txt : &#39;This is txt 2&#39;\r\n                        },\r\n                        \r\n                        {\r\n                            id  : &#39;shop.1 :: txt.3&#39;,\r\n                            \r\n                            shop: &#39;shop.1&#39;,\r\n                            txt : &#39;This is txt 3&#39;\r\n                        }\r\n                    ]\r\n                },\r\n                \r\n                {\r\n                    id      : &#39;account.1 ::shop.2&#39;,\r\n                    account : &#39;account.1&#39;,\r\n                    shop    : &#39;shop.2&#39;,\r\n                    \r\n                    texts: [ /* shoptext_9 */\r\n                        {\r\n                            id  : &#39;shop.2 :: txt.7&#39;,\r\n                            \r\n                            shop: &#39;shop.2&#39;,\r\n                            txt : &#39;This is txt 7&#39;\r\n                        },\r\n                        \r\n                        {\r\n                            id  : &#39;shop.2 :: txt.8&#39;,\r\n                            \r\n                            shop: &#39;shop.2&#39;,\r\n                            txt : &#39;This is txt 8&#39;\r\n                        },\r\n                        \r\n                        {\r\n                            id  : &#39;shop.2 :: txt.9&#39;,\r\n                            \r\n                            shop: &#39;shop.2&#39;,\r\n                            txt : &#39;This is txt 9&#39;\r\n                        }\r\n                    ]\r\n                }\r\n            ]\r\n        }\r\n    ]\r\n\r\n\r\nI believe the problem here is well defined. \r\n\r\nI&#39;ve tried somethings in Java, I tried to collect them row by row, column by column, but was not able to add the finishing touches to the end array. \r\n\r\n---\r\n\r\n---\r\n\r\n\r\n**In Java**, I&#39;ve attempted to use streams after iterating all rows to collect them, then using `groupingBy` but not successfully later been able to build the desired object. \r\n\r\n**Here is a fully working** and **compilable** **Java example** that you can play with directly that works on similarly structured data: \r\n\r\n\r\n    public static void main(String[] args) {\r\n        String[]   keys = new String[]{ \r\n                         &quot;club.id&quot;,        /***/ &quot;club.country&quot;,  /***/  &quot;fan.id&quot;, /***/ &quot;fan.age&quot; };\r\n        String[][] rows = new String[][]{  /***/                  /***/            /***/           \r\n                                           /***/                  /***/            /***/           \r\n            new String[]{ &quot;barca&quot;,         /***/ &quot;spain &quot;,        /***/  &quot;peter&quot; , /***/ &quot;18&quot;,     },  \r\n            new String[]{ &quot;barca&quot;,         /***/ &quot;spain &quot;,        /***/  &quot;peter&quot; , /***/ &quot;18&quot;,     },  \r\n            new String[]{ &quot;barca&quot;,         /***/ &quot;spain &quot;,        /***/  &quot;peter&quot; , /***/ &quot;18&quot;,     },  \r\n            new String[]{ &quot;barca&quot;,         /***/ &quot;spain &quot;,        /***/  &quot;jonas&quot; , /***/ &quot;19&quot;,     },  \r\n            new String[]{ &quot;barca&quot;,         /***/ &quot;spain &quot;,        /***/  &quot;jonas&quot; , /***/ &quot;19&quot;,     },  \r\n            new String[]{ &quot;barca&quot;,         /***/ &quot;spain &quot;,        /***/  &quot;jonas&quot; , /***/ &quot;19&quot;,     },\r\n                                                                                 \r\n            new String[]{ &quot;real&quot;,          /***/ &quot;spain &quot;,        /***/  &quot;sara&quot;  , /***/ &quot;80&quot;,     },  \r\n            new String[]{ &quot;real&quot;,          /***/ &quot;spain &quot;,        /***/  &quot;sara&quot;  , /***/ &quot;80&quot;,     },  \r\n            new String[]{ &quot;real&quot;,          /***/ &quot;spain &quot;,        /***/  &quot;sara&quot;  , /***/ &quot;80&quot;,     },  \r\n            new String[]{ &quot;real&quot;,          /***/ &quot;spain &quot;,        /***/  &quot;sara&quot;  , /***/ &quot;90&quot;,     },  \r\n            new String[]{ &quot;real&quot;,          /***/ &quot;spain &quot;,        /***/  &quot;sara&quot;  , /***/ &quot;90&quot;,     },  \r\n            new String[]{ &quot;real&quot;,          /***/ &quot;spain &quot;,        /***/  &quot;sara&quot;  , /***/ &quot;90&quot;,     }\r\n              \r\n        };\r\n        \r\n        List&lt;Map&lt;String, Object&gt;&gt; list = new ArrayList&lt;&gt;();\r\n        for (String[] row : rows) {\r\n            Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();\r\n        \r\n            int i = 0; for (String key : keys) {\r\n                map.put(key, row[i++]);\r\n            }\r\n            \r\n            list.add(map);\r\n        }\r\n    \r\n        // System.out.println(Gsons.PUBLICS_PRETTY.toJson(list));\r\n     \r\n        String[] groupsBy = new String[]{ &quot;club.id&quot;, &quot;fan.id&quot;, &quot;fan.age&quot; }; \r\n        String[] namesBy  = new String[]{ &quot;clubs&quot;  , &quot;fans&quot;  , &quot;ages&quot;    };\r\n    \r\n        Object o = list.stream()\r\n            .map(row -&gt; {\r\n                return row;                    \r\n            })\r\n            .collect(\r\n                \r\n                groupingBy(row -&gt; { return row.get(groupsBy[0]); },\r\n                    groupingBy(row -&gt; { return row.get(groupsBy[1]); },\r\n                            groupingBy(row -&gt; { return row.get(groupsBy[2]); } \r\n                        ) \r\n                    ) \r\n                )\r\n            )\r\n        ;\r\n    \r\n        // System.out.println(Gsons.PUBLICS_PRETTY.toJson(o));;\r\n    }\r\n\r\nThe input in the Java example after having been built up has: \r\n\r\n    [\r\n      {\r\n        &quot;club.country&quot;: &quot;spain &quot;,\r\n        &quot;club.id&quot;: &quot;barca&quot;,\r\n        &quot;fan.id&quot;: &quot;peter&quot;,\r\n        &quot;fan.age&quot;: &quot;18&quot;\r\n      },\r\n      {\r\n        &quot;club.country&quot;: &quot;spain &quot;,\r\n        &quot;club.id&quot;: &quot;barca&quot;,\r\n        &quot;fan.id&quot;: &quot;peter&quot;,\r\n        &quot;fan.age&quot;: &quot;18&quot;\r\n      },\r\n      {\r\n        &quot;club.country&quot;: &quot;spain &quot;,\r\n        &quot;club.id&quot;: &quot;barca&quot;,\r\n        &quot;fan.id&quot;: &quot;peter&quot;,\r\n        &quot;fan.age&quot;: &quot;18&quot;\r\n      },\r\n      {\r\n        &quot;club.country&quot;: &quot;spain &quot;,\r\n        &quot;club.id&quot;: &quot;barca&quot;,\r\n        &quot;fan.id&quot;: &quot;jonas&quot;,\r\n        &quot;fan.age&quot;: &quot;19&quot;\r\n      },\r\n      {\r\n        &quot;club.country&quot;: &quot;spain &quot;,\r\n        &quot;club.id&quot;: &quot;barca&quot;,\r\n        &quot;fan.id&quot;: &quot;jonas&quot;,\r\n        &quot;fan.age&quot;: &quot;19&quot;\r\n      },\r\n      {\r\n        &quot;club.country&quot;: &quot;spain &quot;,\r\n        &quot;club.id&quot;: &quot;barca&quot;,\r\n        &quot;fan.id&quot;: &quot;jonas&quot;,\r\n        &quot;fan.age&quot;: &quot;19&quot;\r\n      },\r\n      {\r\n        &quot;club.country&quot;: &quot;spain &quot;,\r\n        &quot;club.id&quot;: &quot;real&quot;,\r\n        &quot;fan.id&quot;: &quot;sara&quot;,\r\n        &quot;fan.age&quot;: &quot;80&quot;\r\n      },\r\n      {\r\n        &quot;club.country&quot;: &quot;spain &quot;,\r\n        &quot;club.id&quot;: &quot;real&quot;,\r\n        &quot;fan.id&quot;: &quot;sara&quot;,\r\n        &quot;fan.age&quot;: &quot;80&quot;\r\n      },\r\n      {\r\n        &quot;club.country&quot;: &quot;spain &quot;,\r\n        &quot;club.id&quot;: &quot;real&quot;,\r\n        &quot;fan.id&quot;: &quot;sara&quot;,\r\n        &quot;fan.age&quot;: &quot;80&quot;\r\n      },\r\n      {\r\n        &quot;club.country&quot;: &quot;spain &quot;,\r\n        &quot;club.id&quot;: &quot;real&quot;,\r\n        &quot;fan.id&quot;: &quot;sara&quot;,\r\n        &quot;fan.age&quot;: &quot;90&quot;\r\n      },\r\n      {\r\n        &quot;club.country&quot;: &quot;spain &quot;,\r\n        &quot;club.id&quot;: &quot;real&quot;,\r\n        &quot;fan.id&quot;: &quot;sara&quot;,\r\n        &quot;fan.age&quot;: &quot;90&quot;\r\n      },\r\n      {\r\n        &quot;club.country&quot;: &quot;spain &quot;,\r\n        &quot;club.id&quot;: &quot;real&quot;,\r\n        &quot;fan.id&quot;: &quot;sara&quot;,\r\n        &quot;fan.age&quot;: &quot;90&quot;\r\n      }\r\n    ]\r\n\r\nBut the output I am able to get currently is the following which is not entirely correct: \r\n\r\n    {\r\n      &quot;barca&quot;: {\r\n        &quot;jonas&quot;: {\r\n          &quot;19&quot;: [\r\n            {\r\n              &quot;club.country&quot;: &quot;spain &quot;,\r\n              &quot;club.id&quot;: &quot;barca&quot;,\r\n              &quot;fan.id&quot;: &quot;jonas&quot;,\r\n              &quot;fan.age&quot;: &quot;19&quot;\r\n            },\r\n            {\r\n              &quot;club.country&quot;: &quot;spain &quot;,\r\n              &quot;club.id&quot;: &quot;barca&quot;,\r\n              &quot;fan.id&quot;: &quot;jonas&quot;,\r\n              &quot;fan.age&quot;: &quot;19&quot;\r\n            },\r\n            {\r\n              &quot;club.country&quot;: &quot;spain &quot;,\r\n              &quot;club.id&quot;: &quot;barca&quot;,\r\n              &quot;fan.id&quot;: &quot;jonas&quot;,\r\n              &quot;fan.age&quot;: &quot;19&quot;\r\n            }\r\n          ]\r\n        },\r\n        &quot;peter&quot;: {\r\n          &quot;18&quot;: [\r\n            {\r\n              &quot;club.country&quot;: &quot;spain &quot;,\r\n              &quot;club.id&quot;: &quot;barca&quot;,\r\n              &quot;fan.id&quot;: &quot;peter&quot;,\r\n              &quot;fan.age&quot;: &quot;18&quot;\r\n            },\r\n            {\r\n              &quot;club.country&quot;: &quot;spain &quot;,\r\n              &quot;club.id&quot;: &quot;barca&quot;,\r\n              &quot;fan.id&quot;: &quot;peter&quot;,\r\n              &quot;fan.age&quot;: &quot;18&quot;\r\n            },\r\n            {\r\n              &quot;club.country&quot;: &quot;spain &quot;,\r\n              &quot;club.id&quot;: &quot;barca&quot;,\r\n              &quot;fan.id&quot;: &quot;peter&quot;,\r\n              &quot;fan.age&quot;: &quot;18&quot;\r\n            }\r\n          ]\r\n        }\r\n      },\r\n      &quot;real&quot;: {\r\n        &quot;sara&quot;: {\r\n          &quot;90&quot;: [\r\n            {\r\n              &quot;club.country&quot;: &quot;spain &quot;,\r\n              &quot;club.id&quot;: &quot;real&quot;,\r\n              &quot;fan.id&quot;: &quot;sara&quot;,\r\n              &quot;fan.age&quot;: &quot;90&quot;\r\n            },\r\n            {\r\n              &quot;club.country&quot;: &quot;spain &quot;,\r\n              &quot;club.id&quot;: &quot;real&quot;,\r\n              &quot;fan.id&quot;: &quot;sara&quot;,\r\n              &quot;fan.age&quot;: &quot;90&quot;\r\n            },\r\n            {\r\n              &quot;club.country&quot;: &quot;spain &quot;,\r\n              &quot;club.id&quot;: &quot;real&quot;,\r\n              &quot;fan.id&quot;: &quot;sara&quot;,\r\n              &quot;fan.age&quot;: &quot;90&quot;\r\n            }\r\n          ],\r\n          &quot;80&quot;: [\r\n            {\r\n              &quot;club.country&quot;: &quot;spain &quot;,\r\n              &quot;club.id&quot;: &quot;real&quot;,\r\n              &quot;fan.id&quot;: &quot;sara&quot;,\r\n              &quot;fan.age&quot;: &quot;80&quot;\r\n            },\r\n            {\r\n              &quot;club.country&quot;: &quot;spain &quot;,\r\n              &quot;club.id&quot;: &quot;real&quot;,\r\n              &quot;fan.id&quot;: &quot;sara&quot;,\r\n              &quot;fan.age&quot;: &quot;80&quot;\r\n            },\r\n            {\r\n              &quot;club.country&quot;: &quot;spain &quot;,\r\n              &quot;club.id&quot;: &quot;real&quot;,\r\n              &quot;fan.id&quot;: &quot;sara&quot;,\r\n              &quot;fan.age&quot;: &quot;80&quot;\r\n            }\r\n          ]\r\n        }\r\n      }\r\n    }\r\n\r\nThe desired output for the Java example would be something like: \r\n\r\n    [\r\n         {\r\n             &#39;clubs&#39; : [\r\n                 {\r\n                     &#39;club.id&#39;      : &quot;barca&quot;,\r\n                     &#39;club.country&#39; : &quot;spain&quot;,\r\n                     &#39;fans&#39; : [\r\n                         {\r\n                             &#39;fan.id&#39;  : &quot;peter&quot;, \r\n                             &#39;ages&#39;    : [\r\n                                 {\r\n                                     &#39;fan.age&#39; : 18\r\n                                     // Nothing more to add here, but in theory possible\r\n                                 },\r\n                                 {\r\n                                     &#39;fan.age&#39; : 19\r\n                                     // Nothing more to add here, but in theory possible\r\n                                 }\r\n                             ]\r\n                         },\r\n                     ]\r\n                 },\r\n                 \r\n                 {\r\n                     &#39;club.id&#39; : &quot;real&quot;, \r\n                     &#39;fans&#39; : [\r\n                         {\r\n                             &#39;fan.id&#39;  : &quot;peter&quot;, \r\n                             \r\n                             &#39;ages&#39;    : [\r\n                                 {\r\n                                     &#39;fan.age&#39; : 18\r\n                                     // Nothing more to add here, but in theory possible\r\n                                 },\r\n                                 {\r\n                                     &#39;fan.age&#39; : 19\r\n                                     // Nothing more to add here, but in theory possible\r\n                                 }\r\n                             ]\r\n                         }\r\n                     ]\r\n                 }\r\n             \r\n             ]\r\n         }\r\n         \r\n    ]\r\n\r\nI know it looks long, but it is because I&#39;ve also provided lots of data to reproduce it so you can play it it. \r\n\r\nLet me know if you have any questions!","title":"SQL resultset &quot;POST PROCESSING&quot; result into composite keyed like representation for commonly occurring (left) join that ends up with rows repeated","body":"<p>I can not find any satisfactory answer on this seemingly common issue with rows repeating for join queries.</p>\n<hr />\n<hr />\n<p>Note I am looking for a <strong>very</strong> <strong>particular</strong> answer, but I know this is possible to do.</p>\n<p>So I believe in order for this not to get out of hand with answers that go off the trail please, try to adhere to these rules:</p>\n<ol>\n<li>Do not produce a response in how to do it in pure SQL, or at the DB level.</li>\n<li>Do not answer with a very specific answer to this exact problem with hard to reuse code. It needs to be repeatable with other structures. It means the joins/nesting can be arbitrarily long, and not limited to two as in this example.</li>\n<li>You may utilize pseudo code or any language you like as long as it is commented on the process and clear. Personally I utilize Java so would have been ideal.</li>\n<li>No hibernate solutions.</li>\n<li>Is as efficient as possible but postprocessing after row/col collection with Java streams might be ok but is not the ideal solution. On the fly grouping would be ideal on the first iteration of the data.</li>\n</ol>\n<p>Now, lets dig deeper:</p>\n<p>What we have is output that looks something like this:\n<a href=\"https://i.stack.imgur.com/VEwmN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VEwmN.png\" alt=\"enter image description here\" /></a></p>\n<p>Entire create, insert and query can be found here on <strong>dbfiddle</strong>:\n<a href=\"https://dbfiddle.uk/a6TIilXz\" rel=\"nofollow noreferrer\">https://dbfiddle.uk/a6TIilXz</a></p>\n<p>From the fiddle it is quite easy to understand the relationship of the columns.</p>\n<p>We know from this query that the join is :</p>\n<blockquote>\n<p>account_3.id = accountshop_5.account</p>\n</blockquote>\n<p>Lets call this relationship for <strong>shops</strong></p>\n<p>Then we know another join:</p>\n<blockquote>\n<p>accountshop_5.shop = shoptext_9.shop</p>\n</blockquote>\n<p>Lets call this relationship for <strong>texts</strong></p>\n<p>So we can define:</p>\n<pre><code>let relations = {\n    'account_3.id -&gt; accountshop_5.account' : 'shops',\n    'accountshop_5.shop -&gt; shoptext_9.shop' : 'texts'\n}\n</code></pre>\n<hr />\n<hr />\n<p>The goal is to iterate the <strong>eachRow</strong>, and <strong>eachColumnKey</strong> and in the end generate something that will look like this:</p>\n<pre><code>[\n    { /* account_3 */\n        \n        id: 'account.1',\n        \n        shops: [ /* accountshop_5 */\n        \n            {\n                id      : 'account.1 ::shop.1',\n                account : 'account.1',\n                shop    : 'shop.1',\n                \n                texts: [ /* shoptext_9 */\n                    {\n                        id  : 'shop.1 :: txt.1',\n                        \n                        shop: 'shop.1',\n                        txt : 'This is txt 1'\n                    },\n                    \n                    {\n                        id  : 'shop.1 :: txt.2',\n                        \n                        shop: 'shop.1',\n                        txt : 'This is txt 2'\n                    },\n                    \n                    {\n                        id  : 'shop.1 :: txt.3',\n                        \n                        shop: 'shop.1',\n                        txt : 'This is txt 3'\n                    }\n                ]\n            },\n            \n            {\n                id      : 'account.1 ::shop.2',\n                account : 'account.1',\n                shop    : 'shop.2',\n                \n                texts: [ /* shoptext_9 */\n                    {\n                        id  : 'shop.2 :: txt.7',\n                        \n                        shop: 'shop.2',\n                        txt : 'This is txt 7'\n                    },\n                    \n                    {\n                        id  : 'shop.2 :: txt.8',\n                        \n                        shop: 'shop.2',\n                        txt : 'This is txt 8'\n                    },\n                    \n                    {\n                        id  : 'shop.2 :: txt.9',\n                        \n                        shop: 'shop.2',\n                        txt : 'This is txt 9'\n                    }\n                ]\n            }\n        ]\n    }\n]\n</code></pre>\n<p>I believe the problem here is well defined.</p>\n<p>I've tried somethings in Java, I tried to collect them row by row, column by column, but was not able to add the finishing touches to the end array.</p>\n<hr />\n<hr />\n<p><strong>In Java</strong>, I've attempted to use streams after iterating all rows to collect them, then using <code>groupingBy</code> but not successfully later been able to build the desired object.</p>\n<p><strong>Here is a fully working</strong> and <strong>compilable</strong> <strong>Java example</strong> that you can play with directly that works on similarly structured data:</p>\n<pre><code>public static void main(String[] args) {\n    String[]   keys = new String[]{ \n                     &quot;club.id&quot;,        /***/ &quot;club.country&quot;,  /***/  &quot;fan.id&quot;, /***/ &quot;fan.age&quot; };\n    String[][] rows = new String[][]{  /***/                  /***/            /***/           \n                                       /***/                  /***/            /***/           \n        new String[]{ &quot;barca&quot;,         /***/ &quot;spain &quot;,        /***/  &quot;peter&quot; , /***/ &quot;18&quot;,     },  \n        new String[]{ &quot;barca&quot;,         /***/ &quot;spain &quot;,        /***/  &quot;peter&quot; , /***/ &quot;18&quot;,     },  \n        new String[]{ &quot;barca&quot;,         /***/ &quot;spain &quot;,        /***/  &quot;peter&quot; , /***/ &quot;18&quot;,     },  \n        new String[]{ &quot;barca&quot;,         /***/ &quot;spain &quot;,        /***/  &quot;jonas&quot; , /***/ &quot;19&quot;,     },  \n        new String[]{ &quot;barca&quot;,         /***/ &quot;spain &quot;,        /***/  &quot;jonas&quot; , /***/ &quot;19&quot;,     },  \n        new String[]{ &quot;barca&quot;,         /***/ &quot;spain &quot;,        /***/  &quot;jonas&quot; , /***/ &quot;19&quot;,     },\n                                                                             \n        new String[]{ &quot;real&quot;,          /***/ &quot;spain &quot;,        /***/  &quot;sara&quot;  , /***/ &quot;80&quot;,     },  \n        new String[]{ &quot;real&quot;,          /***/ &quot;spain &quot;,        /***/  &quot;sara&quot;  , /***/ &quot;80&quot;,     },  \n        new String[]{ &quot;real&quot;,          /***/ &quot;spain &quot;,        /***/  &quot;sara&quot;  , /***/ &quot;80&quot;,     },  \n        new String[]{ &quot;real&quot;,          /***/ &quot;spain &quot;,        /***/  &quot;sara&quot;  , /***/ &quot;90&quot;,     },  \n        new String[]{ &quot;real&quot;,          /***/ &quot;spain &quot;,        /***/  &quot;sara&quot;  , /***/ &quot;90&quot;,     },  \n        new String[]{ &quot;real&quot;,          /***/ &quot;spain &quot;,        /***/  &quot;sara&quot;  , /***/ &quot;90&quot;,     }\n          \n    };\n    \n    List&lt;Map&lt;String, Object&gt;&gt; list = new ArrayList&lt;&gt;();\n    for (String[] row : rows) {\n        Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();\n    \n        int i = 0; for (String key : keys) {\n            map.put(key, row[i++]);\n        }\n        \n        list.add(map);\n    }\n\n    // System.out.println(Gsons.PUBLICS_PRETTY.toJson(list));\n \n    String[] groupsBy = new String[]{ &quot;club.id&quot;, &quot;fan.id&quot;, &quot;fan.age&quot; }; \n    String[] namesBy  = new String[]{ &quot;clubs&quot;  , &quot;fans&quot;  , &quot;ages&quot;    };\n\n    Object o = list.stream()\n        .map(row -&gt; {\n            return row;                    \n        })\n        .collect(\n            \n            groupingBy(row -&gt; { return row.get(groupsBy[0]); },\n                groupingBy(row -&gt; { return row.get(groupsBy[1]); },\n                        groupingBy(row -&gt; { return row.get(groupsBy[2]); } \n                    ) \n                ) \n            )\n        )\n    ;\n\n    // System.out.println(Gsons.PUBLICS_PRETTY.toJson(o));;\n}\n</code></pre>\n<p>The input in the Java example after having been built up has:</p>\n<pre><code>[\n  {\n    &quot;club.country&quot;: &quot;spain &quot;,\n    &quot;club.id&quot;: &quot;barca&quot;,\n    &quot;fan.id&quot;: &quot;peter&quot;,\n    &quot;fan.age&quot;: &quot;18&quot;\n  },\n  {\n    &quot;club.country&quot;: &quot;spain &quot;,\n    &quot;club.id&quot;: &quot;barca&quot;,\n    &quot;fan.id&quot;: &quot;peter&quot;,\n    &quot;fan.age&quot;: &quot;18&quot;\n  },\n  {\n    &quot;club.country&quot;: &quot;spain &quot;,\n    &quot;club.id&quot;: &quot;barca&quot;,\n    &quot;fan.id&quot;: &quot;peter&quot;,\n    &quot;fan.age&quot;: &quot;18&quot;\n  },\n  {\n    &quot;club.country&quot;: &quot;spain &quot;,\n    &quot;club.id&quot;: &quot;barca&quot;,\n    &quot;fan.id&quot;: &quot;jonas&quot;,\n    &quot;fan.age&quot;: &quot;19&quot;\n  },\n  {\n    &quot;club.country&quot;: &quot;spain &quot;,\n    &quot;club.id&quot;: &quot;barca&quot;,\n    &quot;fan.id&quot;: &quot;jonas&quot;,\n    &quot;fan.age&quot;: &quot;19&quot;\n  },\n  {\n    &quot;club.country&quot;: &quot;spain &quot;,\n    &quot;club.id&quot;: &quot;barca&quot;,\n    &quot;fan.id&quot;: &quot;jonas&quot;,\n    &quot;fan.age&quot;: &quot;19&quot;\n  },\n  {\n    &quot;club.country&quot;: &quot;spain &quot;,\n    &quot;club.id&quot;: &quot;real&quot;,\n    &quot;fan.id&quot;: &quot;sara&quot;,\n    &quot;fan.age&quot;: &quot;80&quot;\n  },\n  {\n    &quot;club.country&quot;: &quot;spain &quot;,\n    &quot;club.id&quot;: &quot;real&quot;,\n    &quot;fan.id&quot;: &quot;sara&quot;,\n    &quot;fan.age&quot;: &quot;80&quot;\n  },\n  {\n    &quot;club.country&quot;: &quot;spain &quot;,\n    &quot;club.id&quot;: &quot;real&quot;,\n    &quot;fan.id&quot;: &quot;sara&quot;,\n    &quot;fan.age&quot;: &quot;80&quot;\n  },\n  {\n    &quot;club.country&quot;: &quot;spain &quot;,\n    &quot;club.id&quot;: &quot;real&quot;,\n    &quot;fan.id&quot;: &quot;sara&quot;,\n    &quot;fan.age&quot;: &quot;90&quot;\n  },\n  {\n    &quot;club.country&quot;: &quot;spain &quot;,\n    &quot;club.id&quot;: &quot;real&quot;,\n    &quot;fan.id&quot;: &quot;sara&quot;,\n    &quot;fan.age&quot;: &quot;90&quot;\n  },\n  {\n    &quot;club.country&quot;: &quot;spain &quot;,\n    &quot;club.id&quot;: &quot;real&quot;,\n    &quot;fan.id&quot;: &quot;sara&quot;,\n    &quot;fan.age&quot;: &quot;90&quot;\n  }\n]\n</code></pre>\n<p>But the output I am able to get currently is the following which is not entirely correct:</p>\n<pre><code>{\n  &quot;barca&quot;: {\n    &quot;jonas&quot;: {\n      &quot;19&quot;: [\n        {\n          &quot;club.country&quot;: &quot;spain &quot;,\n          &quot;club.id&quot;: &quot;barca&quot;,\n          &quot;fan.id&quot;: &quot;jonas&quot;,\n          &quot;fan.age&quot;: &quot;19&quot;\n        },\n        {\n          &quot;club.country&quot;: &quot;spain &quot;,\n          &quot;club.id&quot;: &quot;barca&quot;,\n          &quot;fan.id&quot;: &quot;jonas&quot;,\n          &quot;fan.age&quot;: &quot;19&quot;\n        },\n        {\n          &quot;club.country&quot;: &quot;spain &quot;,\n          &quot;club.id&quot;: &quot;barca&quot;,\n          &quot;fan.id&quot;: &quot;jonas&quot;,\n          &quot;fan.age&quot;: &quot;19&quot;\n        }\n      ]\n    },\n    &quot;peter&quot;: {\n      &quot;18&quot;: [\n        {\n          &quot;club.country&quot;: &quot;spain &quot;,\n          &quot;club.id&quot;: &quot;barca&quot;,\n          &quot;fan.id&quot;: &quot;peter&quot;,\n          &quot;fan.age&quot;: &quot;18&quot;\n        },\n        {\n          &quot;club.country&quot;: &quot;spain &quot;,\n          &quot;club.id&quot;: &quot;barca&quot;,\n          &quot;fan.id&quot;: &quot;peter&quot;,\n          &quot;fan.age&quot;: &quot;18&quot;\n        },\n        {\n          &quot;club.country&quot;: &quot;spain &quot;,\n          &quot;club.id&quot;: &quot;barca&quot;,\n          &quot;fan.id&quot;: &quot;peter&quot;,\n          &quot;fan.age&quot;: &quot;18&quot;\n        }\n      ]\n    }\n  },\n  &quot;real&quot;: {\n    &quot;sara&quot;: {\n      &quot;90&quot;: [\n        {\n          &quot;club.country&quot;: &quot;spain &quot;,\n          &quot;club.id&quot;: &quot;real&quot;,\n          &quot;fan.id&quot;: &quot;sara&quot;,\n          &quot;fan.age&quot;: &quot;90&quot;\n        },\n        {\n          &quot;club.country&quot;: &quot;spain &quot;,\n          &quot;club.id&quot;: &quot;real&quot;,\n          &quot;fan.id&quot;: &quot;sara&quot;,\n          &quot;fan.age&quot;: &quot;90&quot;\n        },\n        {\n          &quot;club.country&quot;: &quot;spain &quot;,\n          &quot;club.id&quot;: &quot;real&quot;,\n          &quot;fan.id&quot;: &quot;sara&quot;,\n          &quot;fan.age&quot;: &quot;90&quot;\n        }\n      ],\n      &quot;80&quot;: [\n        {\n          &quot;club.country&quot;: &quot;spain &quot;,\n          &quot;club.id&quot;: &quot;real&quot;,\n          &quot;fan.id&quot;: &quot;sara&quot;,\n          &quot;fan.age&quot;: &quot;80&quot;\n        },\n        {\n          &quot;club.country&quot;: &quot;spain &quot;,\n          &quot;club.id&quot;: &quot;real&quot;,\n          &quot;fan.id&quot;: &quot;sara&quot;,\n          &quot;fan.age&quot;: &quot;80&quot;\n        },\n        {\n          &quot;club.country&quot;: &quot;spain &quot;,\n          &quot;club.id&quot;: &quot;real&quot;,\n          &quot;fan.id&quot;: &quot;sara&quot;,\n          &quot;fan.age&quot;: &quot;80&quot;\n        }\n      ]\n    }\n  }\n}\n</code></pre>\n<p>The desired output for the Java example would be something like:</p>\n<pre><code>[\n     {\n         'clubs' : [\n             {\n                 'club.id'      : &quot;barca&quot;,\n                 'club.country' : &quot;spain&quot;,\n                 'fans' : [\n                     {\n                         'fan.id'  : &quot;peter&quot;, \n                         'ages'    : [\n                             {\n                                 'fan.age' : 18\n                                 // Nothing more to add here, but in theory possible\n                             },\n                             {\n                                 'fan.age' : 19\n                                 // Nothing more to add here, but in theory possible\n                             }\n                         ]\n                     },\n                 ]\n             },\n             \n             {\n                 'club.id' : &quot;real&quot;, \n                 'fans' : [\n                     {\n                         'fan.id'  : &quot;peter&quot;, \n                         \n                         'ages'    : [\n                             {\n                                 'fan.age' : 18\n                                 // Nothing more to add here, but in theory possible\n                             },\n                             {\n                                 'fan.age' : 19\n                                 // Nothing more to add here, but in theory possible\n                             }\n                         ]\n                     }\n                 ]\n             }\n         \n         ]\n     }\n     \n]\n</code></pre>\n<p>I know it looks long, but it is because I've also provided lots of data to reproduce it so you can play it it.</p>\n<p>Let me know if you have any questions!</p>\n"},{"tags":["java","spring-boot","maven","openjdk-17"],"answers":[{"tags":[],"owner":{"account_id":6329023,"reputation":1391,"user_id":6307306,"display_name":"Igor Manoel"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1677852857,"creation_date":1677852857,"answer_id":75628185,"question_id":71833412,"body_markdown":"Open the terminal and run the following commands:\r\n\r\n    javac -version\r\nand you should see something about javac 17.x.x.\r\n\r\nIf you have a different version, maybe you should update your environment variables to point your JAVA_HOME to the appropriate JDK 17.","title":"--add-exports command not working for java.util.concurrent package","body":"<p>Open the terminal and run the following commands:</p>\n<pre><code>javac -version\n</code></pre>\n<p>and you should see something about javac 17.x.x.</p>\n<p>If you have a different version, maybe you should update your environment variables to point your JAVA_HOME to the appropriate JDK 17.</p>\n"}],"owner":{"account_id":9003213,"reputation":211,"user_id":6711019,"display_name":"Onias da Rocha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3412,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1677852857,"creation_date":1649705803,"question_id":71833412,"body_markdown":"I&#39;m currently upgrading a project from JDK 11 to 17, and even tho I had previously dealt with the `module java.base does not &quot;opens java.util.concurrent&quot; to unnamed module @6c38726a` error and managed to fix it using the `--add-opens java.base/java.util.concurrent=ALL-UNNAMED` command on the VM options, for some reason it seems that for this project it isn&#39;t working.\r\n\r\nDockerfile:\r\n\r\n    ENV JAVA_OPTS=&quot;--add-opens=java.base/java.util=ALL-UNNAMED --add-opens java.base/java.util.concurrent=ALL-UNNAMED&quot;\r\n\r\npom.xml:\r\n\r\n    &lt;properties&gt;\r\n    &lt;jvm.options&gt;--add-opens=java.base/java.util=ALL-UNNAMED --add-opens java.base/java.util.concurrent=ALL-UNNAMED&lt;/jvm.options&gt;\r\n    &lt;/properties\r\n    &lt;pluginManagement&gt;\r\n      &lt;plugins&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;${maven-compiler-plugin.version}&lt;/version&gt;\r\n          &lt;configuration&gt;\r\n            &lt;compilerArgs&gt;${jvm.options}&lt;/compilerArgs&gt;\r\n            &lt;optimize&gt;true&lt;/optimize&gt;\r\n          &lt;/configuration&gt;\r\n       &lt;/plugin&gt;\r\n  &lt;/pluginManagement&gt;\r\n\r\n","title":"--add-exports command not working for java.util.concurrent package","body":"<p>I'm currently upgrading a project from JDK 11 to 17, and even tho I had previously dealt with the <code>module java.base does not &quot;opens java.util.concurrent&quot; to unnamed module @6c38726a</code> error and managed to fix it using the <code>--add-opens java.base/java.util.concurrent=ALL-UNNAMED</code> command on the VM options, for some reason it seems that for this project it isn't working.</p>\n<p>Dockerfile:</p>\n<pre><code>ENV JAVA_OPTS=&quot;--add-opens=java.base/java.util=ALL-UNNAMED --add-opens java.base/java.util.concurrent=ALL-UNNAMED&quot;\n</code></pre>\n<p>pom.xml:</p>\n<pre><code>&lt;properties&gt;\n&lt;jvm.options&gt;--add-opens=java.base/java.util=ALL-UNNAMED --add-opens java.base/java.util.concurrent=ALL-UNNAMED&lt;/jvm.options&gt;\n&lt;/properties\n&lt;pluginManagement&gt;\n  &lt;plugins&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n      &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n      &lt;version&gt;${maven-compiler-plugin.version}&lt;/version&gt;\n      &lt;configuration&gt;\n        &lt;compilerArgs&gt;${jvm.options}&lt;/compilerArgs&gt;\n        &lt;optimize&gt;true&lt;/optimize&gt;\n      &lt;/configuration&gt;\n   &lt;/plugin&gt;\n</code></pre>\n  \n"},{"tags":["java","regex","unicode"],"comments":[{"owner":{"account_id":4739783,"reputation":612574,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":3,"creation_date":1677851684,"post_id":75627927,"comment_id":133423793,"body_markdown":"Try `\\p{InLatin_1_Supplement}`","body":"Try <code>\\p{InLatin_1_Supplement}</code>"},{"owner":{"account_id":4739783,"reputation":612574,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":2,"creation_date":1677851864,"post_id":75627927,"comment_id":133423846,"body_markdown":"I&#39;d rather check in the code, not at regex101, it differs from the real Java environment.","body":"I&#39;d rather check in the code, not at regex101, it differs from the real Java environment."}],"answers":[{"tags":[],"owner":{"account_id":4739783,"reputation":612574,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1677852652,"creation_date":1677852652,"answer_id":75628149,"question_id":75627927,"body_markdown":"The Unicode property class in Java looks like\r\n```none\r\n\\p{InLatin_1_Supplement}\r\n```\r\nSee the [Java demo online][1]:\r\n```java\r\nString s = &quot;&#235;&#232;&quot;;\r\nSystem.out.println(s.matches(&quot;\\\\p{InLatin_1_Supplement}+&quot;)); // -&gt; true\r\n```\r\n\r\n\r\n  [1]: https://ideone.com/zWaeJM","title":"\\p{InLatin1Supplement} is an unknown unicode-character-property-name in Regex","body":"<p>The Unicode property class in Java looks like</p>\n<pre class=\"lang-none prettyprint-override\"><code>\\p{InLatin_1_Supplement}\n</code></pre>\n<p>See the <a href=\"https://ideone.com/zWaeJM\" rel=\"nofollow noreferrer\">Java demo online</a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String s = &quot;ëè&quot;;\nSystem.out.println(s.matches(&quot;\\\\p{InLatin_1_Supplement}+&quot;)); // -&gt; true\n</code></pre>\n"}],"owner":{"account_id":23646042,"reputation":447,"user_id":18197654,"display_name":"xtay2"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":130,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"accepted_answer_id":75628149,"answer_count":1,"score":1,"last_activity_date":1677852652,"creation_date":1677851497,"question_id":75627927,"body_markdown":"The docs for `java.util.regex.Pattern` specify:\r\n\r\n&gt; Blocks are specified with the prefix In, as in InMongolian, or by\r\n&gt; using the keyword block (or its short form blk) as in block=Mongolian\r\n&gt; or blk=Mongolian.\r\n&gt; \r\n&gt; The block names supported by Pattern are the valid block names\r\n&gt; accepted and defined by UnicodeBlock.forName.\r\n\r\nand there exists a constant `Character.UnicodeBlock.LATIN_1_SUPPLEMENT` which does get found by `UnicodeBlock.forName`.\r\n\r\nEither way, I&#39;m getting a\r\n```\r\njava.util.regex.PatternSyntaxException: Unknown character property name {InLatin1Supplement} near index 21\r\n\\p{InLatin1Supplement}\r\n                     ^\r\n```\r\nWhats up with that?","title":"\\p{InLatin1Supplement} is an unknown unicode-character-property-name in Regex","body":"<p>The docs for <code>java.util.regex.Pattern</code> specify:</p>\n<blockquote>\n<p>Blocks are specified with the prefix In, as in InMongolian, or by\nusing the keyword block (or its short form blk) as in block=Mongolian\nor blk=Mongolian.</p>\n<p>The block names supported by Pattern are the valid block names\naccepted and defined by UnicodeBlock.forName.</p>\n</blockquote>\n<p>and there exists a constant <code>Character.UnicodeBlock.LATIN_1_SUPPLEMENT</code> which does get found by <code>UnicodeBlock.forName</code>.</p>\n<p>Either way, I'm getting a</p>\n<pre><code>java.util.regex.PatternSyntaxException: Unknown character property name {InLatin1Supplement} near index 21\n\\p{InLatin1Supplement}\n                     ^\n</code></pre>\n<p>Whats up with that?</p>\n"},{"tags":["java","junit","mockito","httpurlconnection","powermockito"],"comments":[{"owner":{"account_id":977224,"reputation":7453,"user_id":997958,"display_name":"Kraylog"},"score":0,"creation_date":1677851561,"post_id":75627834,"comment_id":133423753,"body_markdown":"Did you consider not mocking `HttpUrlConnection` at all and writing an integration test instead? Mocking code you don&#39;t own has issues.","body":"Did you consider not mocking <code>HttpUrlConnection</code> at all and writing an integration test instead? Mocking code you don&#39;t own has issues."},{"owner":{"account_id":480617,"reputation":2495,"user_id":893952,"accept_rate":57,"display_name":"Harry Coder"},"score":0,"creation_date":1677852111,"post_id":75627834,"comment_id":133423938,"body_markdown":"Seems like you have to mock URL too.","body":"Seems like you have to mock URL too."}],"answers":[{"tags":[],"owner":{"account_id":4477746,"reputation":1014,"user_id":3642410,"accept_rate":100,"display_name":"Karim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677852584,"creation_date":1677852584,"answer_id":75628137,"question_id":75627834,"body_markdown":"You can&#39;t mock this call using Mockito be URL is created inside the method, consider changing the method signature of:\r\n\r\n    public static Object callApi(String jsonPayload) throws IOException \r\n\r\nto \r\n\r\n    public static Object callApi(String jsonPayload,  HttpURLConnection http) throws IOException \r\n\r\nand then you pass the mocked `HttpURLConnection` to your method\r\n\r\n","title":"Error while mocking HttpUrlConnection call in REST service using Mockito in Java application","body":"<p>You can't mock this call using Mockito be URL is created inside the method, consider changing the method signature of:</p>\n<pre><code>public static Object callApi(String jsonPayload) throws IOException \n</code></pre>\n<p>to</p>\n<pre><code>public static Object callApi(String jsonPayload,  HttpURLConnection http) throws IOException \n</code></pre>\n<p>and then you pass the mocked <code>HttpURLConnection</code> to your method</p>\n"}],"owner":{"account_id":14950008,"reputation":1,"user_id":10794008,"display_name":"Anand_Pawar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":352,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677852584,"creation_date":1677850948,"question_id":75627834,"body_markdown":"I am new to Java. I wanted to write unit test for the following method using Junit and Mockito framework. This method takes in payload, establish the http connection and return response:\r\n\r\n```\r\npublic static Object callApi(String jsonPayload) throws IOException {\r\n        String serverUrl = &quot;some url&quot;;\r\n        URL url = new URL(serverUrl);\r\n        HttpURLConnection http = (HttpURLConnection) url.openConnection();\r\n        http.setRequestMethod(&quot;POST&quot;);\r\n        http.setDoOutput(true);\r\n        http.setRequestProperty(&quot;Accept&quot;, &quot;application/json&quot;);\r\n        http.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n        byte[] out = jsonPayload.getBytes(StandardCharsets.UTF_8);\r\n        OutputStream stream = http.getOutputStream();\r\n        stream.write(out);\r\n        StringBuilder response = new StringBuilder();\r\n\r\n        try (BufferedReader br = new BufferedReader(\r\n                new InputStreamReader(http.getInputStream(), StandardCharsets.UTF_8))) {\r\n            String responseLine;\r\n            while ((responseLine = br.readLine()) != null) {\r\n                response.append(responseLine.trim());\r\n            }\r\n            System.out.println(response);\r\n        }\r\n        http.disconnect();\r\n        return response.toString();\r\n    }\r\n```\r\n\r\n\r\n\r\nUnit test which I wrote looks like --\r\n\r\n```\r\n    @Test\r\n    public void testCallApi4() throws Exception {\r\n        // Create a mock HttpURLConnection\r\n        HttpURLConnection connection = mock(HttpURLConnection.class);\r\n        Mockito.doNothing().when(connection).setRequestMethod(&quot;POST&quot;);\r\n        Mockito.doNothing().when(connection).setDoOutput(true);\r\n        Mockito.doNothing().when(connection).setRequestProperty(&quot;Accept&quot;, &quot;application/json&quot;);\r\n        Mockito.doNothing().when(connection).setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n        OutputStream os = mock(OutputStream.class);\r\n        when(connection.getOutputStream()).thenReturn(os);\r\n        InputStream is = new ByteArrayInputStream(&quot;{\\&quot;result\\&quot;:\\&quot;success\\&quot;}&quot;.getBytes(StandardCharsets.UTF_8));\r\n        when(connection.getInputStream()).thenReturn(is);\r\n\r\n        // Mock the URL and URLConnection\r\n        URL url = mock(URL.class);\r\n        PowerMockito.whenNew(URL.class).withArguments(&quot;http://localhost:8080/sdk/caas/v1/&quot;).thenReturn(url);\r\n        when(url.openConnection()).thenReturn(connection);\r\n\r\n        // Call the method\r\n        String response = (String) ControllerHelper.callApi(&quot;{\\&quot;data\\&quot;:\\&quot;test\\&quot;}&quot;);\r\n\r\n        // Verify the HttpURLConnection was created with the correct parameters\r\n        verify(url, Mockito.times(1)).openConnection();\r\n        verify(connection, times(1)).setRequestMethod(&quot;POST&quot;);\r\n        verify(connection, times(1)).setDoOutput(true);\r\n        verify(connection, times(1)).setRequestProperty(&quot;Accept&quot;, &quot;application/json&quot;);\r\n        verify(connection, times(1)).setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n        verify(os, times(1)).write(&quot;{\\&quot;data\\&quot;:\\&quot;test\\&quot;}&quot;.getBytes(StandardCharsets.UTF_8));\r\n\r\n        // Verify the response is correct\r\n        assertEquals(&quot;{\\&quot;result\\&quot;:\\&quot;success\\&quot;}&quot;, response);\r\n    }\r\n```\r\n\r\nBut somehow I am not able mock it properly and getting an error--\r\n```\r\njava.net.ConnectException: Connection refused\r\n\r\n\tat java.base/sun.nio.ch.Net.connect0(Native Method)\r\n\tat java.base/sun.nio.ch.Net.connect(Net.java:579)\r\n\tat java.base/sun.nio.ch.Net.connect(Net.java:568)\r\n\tat java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:588)\r\n\tat java.base/java.net.Socket.connect(Socket.java:633)\r\n\tat java.base/java.net.Socket.connect(Socket.java:583)\r\n\tat java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183)\r\n\tat java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:498)\r\n\tat java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:603)\r\n\tat java.base/sun.net.www.http.HttpClient.&lt;init&gt;(HttpClient.java:246)\r\n\tat java.base/sun.net.www.http.HttpClient.New(HttpClient.java:351)\r\n\tat java.base/sun.net.www.http.HttpClient.New(HttpClient.java:373)\r\n\tat java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1309)\r\n\tat java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1242)\r\n\tat java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1128)\r\n\tat java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1057)\r\n\tat java.base/sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1430)\r\n\tat java.base/sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1401)\r\n\tat com.jio.caas.utils.ControllerHelper.callApi(ControllerHelper.java:47)\r\n```\r\nCan somebody please tell me what am I missing?? I tried several ways of mocking this. ","title":"Error while mocking HttpUrlConnection call in REST service using Mockito in Java application","body":"<p>I am new to Java. I wanted to write unit test for the following method using Junit and Mockito framework. This method takes in payload, establish the http connection and return response:</p>\n<pre><code>public static Object callApi(String jsonPayload) throws IOException {\n        String serverUrl = &quot;some url&quot;;\n        URL url = new URL(serverUrl);\n        HttpURLConnection http = (HttpURLConnection) url.openConnection();\n        http.setRequestMethod(&quot;POST&quot;);\n        http.setDoOutput(true);\n        http.setRequestProperty(&quot;Accept&quot;, &quot;application/json&quot;);\n        http.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\n        byte[] out = jsonPayload.getBytes(StandardCharsets.UTF_8);\n        OutputStream stream = http.getOutputStream();\n        stream.write(out);\n        StringBuilder response = new StringBuilder();\n\n        try (BufferedReader br = new BufferedReader(\n                new InputStreamReader(http.getInputStream(), StandardCharsets.UTF_8))) {\n            String responseLine;\n            while ((responseLine = br.readLine()) != null) {\n                response.append(responseLine.trim());\n            }\n            System.out.println(response);\n        }\n        http.disconnect();\n        return response.toString();\n    }\n</code></pre>\n<p>Unit test which I wrote looks like --</p>\n<pre><code>    @Test\n    public void testCallApi4() throws Exception {\n        // Create a mock HttpURLConnection\n        HttpURLConnection connection = mock(HttpURLConnection.class);\n        Mockito.doNothing().when(connection).setRequestMethod(&quot;POST&quot;);\n        Mockito.doNothing().when(connection).setDoOutput(true);\n        Mockito.doNothing().when(connection).setRequestProperty(&quot;Accept&quot;, &quot;application/json&quot;);\n        Mockito.doNothing().when(connection).setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\n        OutputStream os = mock(OutputStream.class);\n        when(connection.getOutputStream()).thenReturn(os);\n        InputStream is = new ByteArrayInputStream(&quot;{\\&quot;result\\&quot;:\\&quot;success\\&quot;}&quot;.getBytes(StandardCharsets.UTF_8));\n        when(connection.getInputStream()).thenReturn(is);\n\n        // Mock the URL and URLConnection\n        URL url = mock(URL.class);\n        PowerMockito.whenNew(URL.class).withArguments(&quot;http://localhost:8080/sdk/caas/v1/&quot;).thenReturn(url);\n        when(url.openConnection()).thenReturn(connection);\n\n        // Call the method\n        String response = (String) ControllerHelper.callApi(&quot;{\\&quot;data\\&quot;:\\&quot;test\\&quot;}&quot;);\n\n        // Verify the HttpURLConnection was created with the correct parameters\n        verify(url, Mockito.times(1)).openConnection();\n        verify(connection, times(1)).setRequestMethod(&quot;POST&quot;);\n        verify(connection, times(1)).setDoOutput(true);\n        verify(connection, times(1)).setRequestProperty(&quot;Accept&quot;, &quot;application/json&quot;);\n        verify(connection, times(1)).setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\n        verify(os, times(1)).write(&quot;{\\&quot;data\\&quot;:\\&quot;test\\&quot;}&quot;.getBytes(StandardCharsets.UTF_8));\n\n        // Verify the response is correct\n        assertEquals(&quot;{\\&quot;result\\&quot;:\\&quot;success\\&quot;}&quot;, response);\n    }\n</code></pre>\n<p>But somehow I am not able mock it properly and getting an error--</p>\n<pre><code>java.net.ConnectException: Connection refused\n\n    at java.base/sun.nio.ch.Net.connect0(Native Method)\n    at java.base/sun.nio.ch.Net.connect(Net.java:579)\n    at java.base/sun.nio.ch.Net.connect(Net.java:568)\n    at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:588)\n    at java.base/java.net.Socket.connect(Socket.java:633)\n    at java.base/java.net.Socket.connect(Socket.java:583)\n    at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183)\n    at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:498)\n    at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:603)\n    at java.base/sun.net.www.http.HttpClient.&lt;init&gt;(HttpClient.java:246)\n    at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:351)\n    at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:373)\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1309)\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1242)\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1128)\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1057)\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1430)\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1401)\n    at com.jio.caas.utils.ControllerHelper.callApi(ControllerHelper.java:47)\n</code></pre>\n<p>Can somebody please tell me what am I missing?? I tried several ways of mocking this.</p>\n"},{"tags":["java","sorting"],"comments":[{"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"score":0,"creation_date":1677847935,"post_id":75627151,"comment_id":133422719,"body_markdown":"In addition to your literal description of how you approach the problem, it would be helpful to see the actual code with a sample input and the expected output.","body":"In addition to your literal description of how you approach the problem, it would be helpful to see the actual code with a sample input and the expected output."},{"owner":{"account_id":17271350,"reputation":446,"user_id":12507002,"display_name":"Sandeep Nair"},"score":0,"creation_date":1677849301,"post_id":75627151,"comment_id":133423129,"body_markdown":"@Eritrean sorry please find the working code","body":"@Eritrean sorry please find the working code"},{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":2,"creation_date":1677849574,"post_id":75627151,"comment_id":133423194,"body_markdown":"You don&#39;t need to create a new list, you can just `list.remove(mostReviewed); list.set(2, mostReviewed)`. Not sure if it&#39;s &quot;more performant&quot;, but I doubt performance really is a big issue here anyway.","body":"You don&#39;t need to create a new list, you can just <code>list.remove(mostReviewed); list.set(2, mostReviewed)</code>. Not sure if it&#39;s &quot;more performant&quot;, but I doubt performance really is a big issue here anyway."}],"answers":[{"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677852568,"creation_date":1677852568,"answer_id":75628135,"question_id":75627151,"body_markdown":"As pointed out by @daniu in the comments you can remove the most reviewed element and add it back at the desired index. You can simplify the logic of finding the most reviewed element after a certain index by using Collections.max and passing a sublist. Something like below should be equivalent:\r\n\r\n    List&lt;Hotel&gt; hotels = new ArrayList&lt;&gt;();\r\n    hotels.add(new Hotel(&quot;A&quot;, 2, 50));\r\n    hotels.add(new Hotel(&quot;B&quot;, 4, 30));\r\n    hotels.add(new Hotel(&quot;C&quot;, 1, 60));\r\n    hotels.add(new Hotel(&quot;D&quot;, 8, 10));\r\n    hotels.sort(Comparator.comparing(Hotel::getNumberOfBookings).reversed());\r\n\r\n    if(hotels.size() &gt; 3){\r\n        var mostReviewedHotel =\r\n                Collections.max(hotels.subList(2, hotels.size()), Comparator.comparing(Hotel::getNumberOfReviews));\r\n        hotels.remove(mostReviewedHotel);\r\n        hotels.add(2, mostReviewedHotel);\r\n    }\r\n    hotels.forEach(System.out::println);","title":"Java Sort particular index","body":"<p>As pointed out by @daniu in the comments you can remove the most reviewed element and add it back at the desired index. You can simplify the logic of finding the most reviewed element after a certain index by using Collections.max and passing a sublist. Something like below should be equivalent:</p>\n<pre><code>List&lt;Hotel&gt; hotels = new ArrayList&lt;&gt;();\nhotels.add(new Hotel(&quot;A&quot;, 2, 50));\nhotels.add(new Hotel(&quot;B&quot;, 4, 30));\nhotels.add(new Hotel(&quot;C&quot;, 1, 60));\nhotels.add(new Hotel(&quot;D&quot;, 8, 10));\nhotels.sort(Comparator.comparing(Hotel::getNumberOfBookings).reversed());\n\nif(hotels.size() &gt; 3){\n    var mostReviewedHotel =\n            Collections.max(hotels.subList(2, hotels.size()), Comparator.comparing(Hotel::getNumberOfReviews));\n    hotels.remove(mostReviewedHotel);\n    hotels.add(2, mostReviewedHotel);\n}\nhotels.forEach(System.out::println);\n</code></pre>\n"}],"owner":{"account_id":17271350,"reputation":446,"user_id":12507002,"display_name":"Sandeep Nair"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":75628135,"answer_count":1,"score":-1,"last_activity_date":1677852568,"creation_date":1677846940,"question_id":75627151,"body_markdown":"I have a model\r\n```\r\nHotel\r\n  name\r\n  bookings\r\n  reviews\r\n```\r\n\r\nI have a strange sorting requirement and wanted to check with you if there is a better way\r\nI need to sort list of books based on bookings and just the third item in the list with max number of reviews\r\n\r\nWhat I have done so far and it works\r\n\r\n - Created a default comparator on bookings to sort the list  \r\n - If the list is less than 3 do nothing \r\n - If the list is greater than or equal to 3 split list in two 0 to 2 and 3 to end of list\r\n - Create a new list and add first sublist to it. \r\n - Find the max recommended item from second sublist (3 to end of list) and add it to the newly created list and remove from the second sublist\r\n - Finally add the 2nd sublist which does not have max recommended but is sorted by number of bookings\r\n\r\nIs there any performant efficient way of doing this?\r\n\r\nEdit: Sorry here is the current code which works fine\r\npublic class HotelSort {\r\n```\r\n        public static void main(String args[]){\r\n            List&lt;Hotel&gt; hotels = new ArrayList&lt;&gt;();\r\n            hotels.add(new Hotel(&quot;A&quot;, 2, 50));\r\n            hotels.add(new Hotel(&quot;B&quot;, 4, 30));\r\n            hotels.add(new Hotel(&quot;C&quot;, 1, 60));\r\n            hotels.add(new Hotel(&quot;D&quot;, 8, 10));\r\n            hotels.sort(Comparator.comparing(Hotel::getNumberOfBookings).reversed());\r\n    \r\n            if(hotels.size() &lt; 3){\r\n                System.out.println(hotels);\r\n            } else {\r\n                var customSortedList = new ArrayList&lt;&gt;(hotels.subList(0, 2));\r\n                var secondList = new ArrayList&lt;&gt;(hotels.subList(2, hotels.size()));\r\n                var mostReviewedHotel = secondList.stream().max(Comparator.comparing(Hotel::getNumberOfReviews)).orElseThrow();\r\n                secondList.remove(mostReviewedHotel);\r\n                customSortedList.add(mostReviewedHotel);\r\n                customSortedList.addAll(secondList);\r\n                System.out.println(customSortedList);\r\n            }\r\n        }\r\n    }\r\n\r\n```\r\n\r\nThe output in this case is which is correct but just wanted to see if there is a better performant way\r\n\r\n```\r\nHotel{name=&#39;C&#39;, numberOfReviews=1, numberOfBookings=60},\r\n Hotel{name=&#39;A&#39;, numberOfReviews=2, numberOfBookings=50}, \r\nHotel{name=&#39;D&#39;, numberOfReviews=8, numberOfBookings=10}, \r\nHotel{name=&#39;B&#39;, numberOfReviews=4, numberOfBookings=30}\r\n```","title":"Java Sort particular index","body":"<p>I have a model</p>\n<pre><code>Hotel\n  name\n  bookings\n  reviews\n</code></pre>\n<p>I have a strange sorting requirement and wanted to check with you if there is a better way\nI need to sort list of books based on bookings and just the third item in the list with max number of reviews</p>\n<p>What I have done so far and it works</p>\n<ul>\n<li>Created a default comparator on bookings to sort the list</li>\n<li>If the list is less than 3 do nothing</li>\n<li>If the list is greater than or equal to 3 split list in two 0 to 2 and 3 to end of list</li>\n<li>Create a new list and add first sublist to it.</li>\n<li>Find the max recommended item from second sublist (3 to end of list) and add it to the newly created list and remove from the second sublist</li>\n<li>Finally add the 2nd sublist which does not have max recommended but is sorted by number of bookings</li>\n</ul>\n<p>Is there any performant efficient way of doing this?</p>\n<p>Edit: Sorry here is the current code which works fine\npublic class HotelSort {</p>\n<pre><code>        public static void main(String args[]){\n            List&lt;Hotel&gt; hotels = new ArrayList&lt;&gt;();\n            hotels.add(new Hotel(&quot;A&quot;, 2, 50));\n            hotels.add(new Hotel(&quot;B&quot;, 4, 30));\n            hotels.add(new Hotel(&quot;C&quot;, 1, 60));\n            hotels.add(new Hotel(&quot;D&quot;, 8, 10));\n            hotels.sort(Comparator.comparing(Hotel::getNumberOfBookings).reversed());\n    \n            if(hotels.size() &lt; 3){\n                System.out.println(hotels);\n            } else {\n                var customSortedList = new ArrayList&lt;&gt;(hotels.subList(0, 2));\n                var secondList = new ArrayList&lt;&gt;(hotels.subList(2, hotels.size()));\n                var mostReviewedHotel = secondList.stream().max(Comparator.comparing(Hotel::getNumberOfReviews)).orElseThrow();\n                secondList.remove(mostReviewedHotel);\n                customSortedList.add(mostReviewedHotel);\n                customSortedList.addAll(secondList);\n                System.out.println(customSortedList);\n            }\n        }\n    }\n\n</code></pre>\n<p>The output in this case is which is correct but just wanted to see if there is a better performant way</p>\n<pre><code>Hotel{name='C', numberOfReviews=1, numberOfBookings=60},\n Hotel{name='A', numberOfReviews=2, numberOfBookings=50}, \nHotel{name='D', numberOfReviews=8, numberOfBookings=10}, \nHotel{name='B', numberOfReviews=4, numberOfBookings=30}\n</code></pre>\n"},{"tags":["java","import","sdk","export","oracle-data-integrator"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1677851954,"post_id":75627502,"comment_id":133423886,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":4346469,"reputation":1896,"user_id":3548287,"display_name":"JeromeFr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677852172,"creation_date":1677852172,"answer_id":75628061,"question_id":75627502,"body_markdown":"The [documentation for the ODI SDK][1] provides ways to [export][2] and [import][3] objects.\r\n\r\nTo export specific objects, have a look at the `exportToXml` and `exportToXmlWithParents` methods.\r\n\r\nBut first you need to retrieve the objects you want to export, use the &quot;Finder&quot; interfaces for each object type.\r\nFor instance for finding mappings, use the [IMappingFinder][4] interface. The `findByName` methods let you find a specific mapping by it&#39;s name. The `findByProject` methods let you find all the mappings from a project or a folder.\r\n\r\nI&#39;m sure there are some examples online ;)\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/middleware/fusion-middleware/data-integrator/12.2.1.4/odija/index.html\r\n  [2]: https://docs.oracle.com/en/middleware/fusion-middleware/data-integrator/12.2.1.4/odija/oracle/odi/impexp/support/ExportServiceImpl.html\r\n  [3]: https://docs.oracle.com/en/middleware/fusion-middleware/data-integrator/12.2.1.4/odija/oracle/odi/impexp/support/ImportServiceImpl.html\r\n  [4]: https://docs.oracle.com/en/middleware/fusion-middleware/data-integrator/12.2.1.4/odija/oracle/odi/domain/mapping/finder/IMappingFinder.html","title":"ODI 12c export and import objects using Java SDK","body":"<p>The <a href=\"https://docs.oracle.com/en/middleware/fusion-middleware/data-integrator/12.2.1.4/odija/index.html\" rel=\"nofollow noreferrer\">documentation for the ODI SDK</a> provides ways to <a href=\"https://docs.oracle.com/en/middleware/fusion-middleware/data-integrator/12.2.1.4/odija/oracle/odi/impexp/support/ExportServiceImpl.html\" rel=\"nofollow noreferrer\">export</a> and <a href=\"https://docs.oracle.com/en/middleware/fusion-middleware/data-integrator/12.2.1.4/odija/oracle/odi/impexp/support/ImportServiceImpl.html\" rel=\"nofollow noreferrer\">import</a> objects.</p>\n<p>To export specific objects, have a look at the <code>exportToXml</code> and <code>exportToXmlWithParents</code> methods.</p>\n<p>But first you need to retrieve the objects you want to export, use the &quot;Finder&quot; interfaces for each object type.\nFor instance for finding mappings, use the <a href=\"https://docs.oracle.com/en/middleware/fusion-middleware/data-integrator/12.2.1.4/odija/oracle/odi/domain/mapping/finder/IMappingFinder.html\" rel=\"nofollow noreferrer\">IMappingFinder</a> interface. The <code>findByName</code> methods let you find a specific mapping by it's name. The <code>findByProject</code> methods let you find all the mappings from a project or a folder.</p>\n<p>I'm sure there are some examples online ;)</p>\n"}],"owner":{"account_id":27925427,"reputation":1,"user_id":21324643,"display_name":"mansa"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":199,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677852172,"creation_date":1677849059,"question_id":75627502,"body_markdown":"Hi I am trying to write a pure Java code that can run outside of odi studio to export and import specific objects like mapping variables procedures separately in to xml files.\r\n\r\n\r\nAny help or code references will be appreciated? ","title":"ODI 12c export and import objects using Java SDK","body":"<p>Hi I am trying to write a pure Java code that can run outside of odi studio to export and import specific objects like mapping variables procedures separately in to xml files.</p>\n<p>Any help or code references will be appreciated?</p>\n"},{"tags":["java","docker","docker-registry","amazon-ecr"],"comments":[{"owner":{"account_id":293130,"reputation":238888,"user_id":596285,"accept_rate":100,"display_name":"BMitch"},"score":1,"creation_date":1668000168,"post_id":74367880,"comment_id":131301188,"body_markdown":"The DNS for Docker Hub&#39;s registry API is `registry-1.docker.io`. Many clients automatically map `docker.io` over to this, but I don&#39;t know about Jib.","body":"The DNS for Docker Hub&#39;s registry API is <code>registry-1.docker.io</code>. Many clients automatically map <code>docker.io</code> over to this, but I don&#39;t know about Jib."}],"answers":[{"tags":[],"owner":{"account_id":15000286,"reputation":11,"user_id":10828175,"display_name":"yangbo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677852150,"creation_date":1677499195,"answer_id":75580218,"question_id":74367880,"body_markdown":"1. Get token:\r\n   ```\r\n   curl &#39;https://auth.docker.io/token? \r\n   service=registry.docker.io&amp;scope=repository:library/ubuntu:pull&#39;\r\n   ```\r\n   resp:\r\n   ```\r\n   {\r\n       &quot;token&quot;: &quot;tokentokentokentokentokentoken&quot;,\r\n       &quot;expires_in&quot;: 300,\r\n       &quot;issued_at&quot;: &quot;2023-02-27T11:41:47.155402344Z&quot;\r\n   }\r\n   ```\r\n2. Get manifest, https://registry-1.docker.io/v2/library/ubuntu/manifests/${tag or image digest}\r\n   ```\r\n   curl &#39;https://registry-1.docker.io/v2/library/ubuntu/manifests/sha256:c985bc3f77946b8e92c9a3648c6f31751a7dd972e06604785e47303f4ad47c4c&#39; --header &#39;Accept: application/vnd.oci.image.manifest.v1+json&#39; --header &#39;Authorization: Bearer tokentokentokentokentokentoken&#39;\r\n   ```\r\n   resp:\r\n   ```\r\n   {\r\n       &quot;schemaVersion&quot;: 2,\r\n       &quot;mediaType&quot;: &quot;application/vnd.oci.image.manifest.v1+json&quot;,\r\n       &quot;config&quot;: {\r\n           &quot;mediaType&quot;: &quot;application/vnd.oci.image.config.v1+json&quot;,\r\n           &quot;size&quot;: 2299,\r\n           &quot;digest&quot;: &quot;sha256:58db3edaf2be6e80f628796355b1bdeaf8bea1692b402f48b7e7b8d1ff100b02&quot;\r\n       },\r\n       &quot;layers&quot;: [\r\n           {\r\n               &quot;mediaType&quot;: &quot;application/vnd.oci.image.layer.v1.tar+gzip&quot;,\r\n               &quot;size&quot;: 29528717,\r\n               &quot;digest&quot;: &quot;sha256:677076032cca0a2362d25cf3660072e738d1b96fe860409a33ce901d695d7ee8&quot;\r\n           }\r\n       ]\r\n   }\r\n   ```\r\n3. Get layer, https://registry-1.docker.io/v2/library/ubuntu/blobs/${config or layer digest}\r\n   ```\r\n   curl &#39;https://registry-1.docker.io/v2/library/ubuntu/blobs/sha256:58db3edaf2be6e80f628796355b1bdeaf8bea1692b402f48b7e7b8d1ff100b02&#39; --header &#39;Authorization: Bearer tokentokentokentokentokentoken&#39;\r\n   ```\r\n   resp: \r\n   ```\r\n   stream(save to file)\r\n   ```","title":"How to fetch dockerhub registry image layers in Java?","body":"<ol>\n<li>Get token:\n<pre><code>curl 'https://auth.docker.io/token? \nservice=registry.docker.io&amp;scope=repository:library/ubuntu:pull'\n</code></pre>\nresp:\n<pre><code>{\n    &quot;token&quot;: &quot;tokentokentokentokentokentoken&quot;,\n    &quot;expires_in&quot;: 300,\n    &quot;issued_at&quot;: &quot;2023-02-27T11:41:47.155402344Z&quot;\n}\n</code></pre>\n</li>\n<li>Get manifest, <a href=\"https://registry-1.docker.io/v2/library/ubuntu/manifests/$%7Btag\" rel=\"nofollow noreferrer\">https://registry-1.docker.io/v2/library/ubuntu/manifests/${tag</a> or image digest}\n<pre><code>curl 'https://registry-1.docker.io/v2/library/ubuntu/manifests/sha256:c985bc3f77946b8e92c9a3648c6f31751a7dd972e06604785e47303f4ad47c4c' --header 'Accept: application/vnd.oci.image.manifest.v1+json' --header 'Authorization: Bearer tokentokentokentokentokentoken'\n</code></pre>\nresp:\n<pre><code>{\n    &quot;schemaVersion&quot;: 2,\n    &quot;mediaType&quot;: &quot;application/vnd.oci.image.manifest.v1+json&quot;,\n    &quot;config&quot;: {\n        &quot;mediaType&quot;: &quot;application/vnd.oci.image.config.v1+json&quot;,\n        &quot;size&quot;: 2299,\n        &quot;digest&quot;: &quot;sha256:58db3edaf2be6e80f628796355b1bdeaf8bea1692b402f48b7e7b8d1ff100b02&quot;\n    },\n    &quot;layers&quot;: [\n        {\n            &quot;mediaType&quot;: &quot;application/vnd.oci.image.layer.v1.tar+gzip&quot;,\n            &quot;size&quot;: 29528717,\n            &quot;digest&quot;: &quot;sha256:677076032cca0a2362d25cf3660072e738d1b96fe860409a33ce901d695d7ee8&quot;\n        }\n    ]\n}\n</code></pre>\n</li>\n<li>Get layer, <a href=\"https://registry-1.docker.io/v2/library/ubuntu/blobs/$%7Bconfig\" rel=\"nofollow noreferrer\">https://registry-1.docker.io/v2/library/ubuntu/blobs/${config</a> or layer digest}\n<pre><code>curl 'https://registry-1.docker.io/v2/library/ubuntu/blobs/sha256:58db3edaf2be6e80f628796355b1bdeaf8bea1692b402f48b7e7b8d1ff100b02' --header 'Authorization: Bearer tokentokentokentokentokentoken'\n</code></pre>\nresp:\n<pre><code>stream(save to file)\n</code></pre>\n</li>\n</ol>\n"}],"owner":{"account_id":145899,"reputation":8031,"user_id":356011,"accept_rate":95,"display_name":"marathon"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677852150,"creation_date":1667946689,"question_id":74367880,"body_markdown":"I attempted using Google&#39;s Jib package and it doesn&#39;t appear to work.\r\n\r\n```java\r\n        FailoverHttpClient httpClient = new FailoverHttpClient(true, false,\r\n                ignored -&gt; {});\r\n        var client = RegistryClient.factory(EventHandlers.NONE, &quot;registry.hub.docker.com&quot;, &quot;ubuntu&quot;, httpClient)\r\n                .newRegistryClient();\r\n        var manifest = client.pullManifest(&quot;latest&quot;);\r\n        var template = manifest.getManifest();\r\n```\r\nThrows a 404 exception.   If I try using `library/ubuntu` for the image name, it throws a 401 exception.\r\n\r\nIs there possibly another way to do this?","title":"How to fetch dockerhub registry image layers in Java?","body":"<p>I attempted using Google's Jib package and it doesn't appear to work.</p>\n<pre class=\"lang-java prettyprint-override\"><code>        FailoverHttpClient httpClient = new FailoverHttpClient(true, false,\n                ignored -&gt; {});\n        var client = RegistryClient.factory(EventHandlers.NONE, &quot;registry.hub.docker.com&quot;, &quot;ubuntu&quot;, httpClient)\n                .newRegistryClient();\n        var manifest = client.pullManifest(&quot;latest&quot;);\n        var template = manifest.getManifest();\n</code></pre>\n<p>Throws a 404 exception.   If I try using <code>library/ubuntu</code> for the image name, it throws a 401 exception.</p>\n<p>Is there possibly another way to do this?</p>\n"},{"tags":["java","spring","spring-boot","jpa","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":18532137,"reputation":63,"user_id":13502658,"display_name":"Jiandong"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677852001,"creation_date":1677852001,"answer_id":75628032,"question_id":75625046,"body_markdown":"Since you already aggregated all the transactions by each date, It likes a pure calculation issue.\r\n\r\n    LocalDate date = transGroup.getDate();\r\n    List&lt;Transaction&gt; transactions = transGroup.getTransactions();\r\n    // 1. sum all income\r\n    double income = transactions.stream()\r\n            .filter(trans-&gt;trans.getTransactionType().getDisplayName().equalsIgnoreCase(&quot;income&quot;))\r\n            .mapToDouble(Transaction::getAmount)\r\n            .sum();\r\n    // 2. sum all expense\r\n    double expense = transactions.stream()\r\n            .filter(trans-&gt;trans.getTransactionType().getDisplayName().equalsIgnoreCase(&quot;expense&quot;))\r\n            .mapToDouble(Transaction::getAmount)\r\n            .sum();\r\n    // 3. subtraction\r\n    double left = income - expense;\r\n    System.out.println(&quot;date:&quot; + date + &quot;,income:&quot; + income + &quot;,expense:&quot;+ expense + &quot;,left:&quot; + left);\r\n","title":"How to retrieve double values from entity inside list and deal with them","body":"<p>Since you already aggregated all the transactions by each date, It likes a pure calculation issue.</p>\n<pre><code>LocalDate date = transGroup.getDate();\nList&lt;Transaction&gt; transactions = transGroup.getTransactions();\n// 1. sum all income\ndouble income = transactions.stream()\n        .filter(trans-&gt;trans.getTransactionType().getDisplayName().equalsIgnoreCase(&quot;income&quot;))\n        .mapToDouble(Transaction::getAmount)\n        .sum();\n// 2. sum all expense\ndouble expense = transactions.stream()\n        .filter(trans-&gt;trans.getTransactionType().getDisplayName().equalsIgnoreCase(&quot;expense&quot;))\n        .mapToDouble(Transaction::getAmount)\n        .sum();\n// 3. subtraction\ndouble left = income - expense;\nSystem.out.println(&quot;date:&quot; + date + &quot;,income:&quot; + income + &quot;,expense:&quot;+ expense + &quot;,left:&quot; + left);\n</code></pre>\n"}],"owner":{"account_id":27558404,"reputation":23,"user_id":21032025,"display_name":"Frosty Nah"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1677852001,"creation_date":1677834041,"question_id":75625046,"body_markdown":"I didn&#39;t know how to create a better title so here is a full explanation.\r\n\r\nI have `wallet` entity:\r\n\r\n    @Entity\r\n    @Table(name = &quot;wallet&quot;)\r\n    public class Wallet {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;wallet_id&quot;)\r\n    private Long id;\r\n\r\n    @NotBlank(message = &quot;Please, insert a wallet name&quot;)\r\n    private String walletName;\r\n\r\n    @NotNull(message = &quot;Please, insert a amount&quot;)\r\n    private Double initialBalance;\r\n\r\n    @Transient\r\n    private double totalBalance;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY, optional = false)\r\n    @JoinColumn(name = &quot;user_id&quot;, nullable = false, referencedColumnName = &quot;user_id&quot;, insertable = false, updatable = false)\r\n    @OnDelete(action = OnDeleteAction.CASCADE)\r\n    @JsonIgnore\r\n    private User user;\r\n\r\n    @Column(name = &quot;user_id&quot;, nullable = false)\r\n    private Long userId;\r\n\r\n    @OneToMany(mappedBy = &quot;wallet&quot;, cascade = {\r\n            CascadeType.ALL})\r\n    private Set&lt;Transaction&gt; transactions;\r\n\r\nAnd I also have a `transaction` entity:\r\n\r\n    @Entity\r\n    @Table(name = &quot;transaction&quot;)\r\n    public class Transaction {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;transaction_id&quot;)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;user_id&quot;, nullable = false)\r\n    private Long userId;\r\n\r\n    @Column(name = &quot;wallet_name&quot;, nullable = false)\r\n    private String walletName;\r\n\r\n    @Column\r\n    @NotNull(message = &quot;Please, insert a amount&quot;)\r\n    @Min(value = 0, message = &quot;Please, insert a positive amount&quot;)\r\n    private Double amount;\r\n\r\n    @Column\r\n    private String note;\r\n\r\n    @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)\r\n    @Column(name = &quot;date&quot;)\r\n    private LocalDate date;\r\n\r\n    @ManyToOne\r\n    @OnDelete(action = OnDeleteAction.NO_ACTION)\r\n    @JoinColumn(name = &quot;wallet_id&quot;, nullable = false)\r\n    private Wallet wallet;\r\n\r\n    @Enumerated(EnumType.STRING)\r\n    @Column(name = &quot;transaction_type&quot;, columnDefinition = &quot;ENUM(&#39;EXPENSE&#39;, &#39;INCOME&#39;)&quot;)\r\n    private TransactionType transactionType;\r\n\r\n    @Nullable\r\n    @Enumerated(EnumType.STRING)\r\n    @Column(name = &quot;expense_categories&quot;, columnDefinition = &quot;ENUM(&#39;FOOD_AND_DRINK&#39;, &#39;SHOPPING&#39;, &#39;TRANSPORT&#39;, &#39;HOME&#39;,&quot; +\r\n            &quot; &#39;BILLS_AND_FEES&#39;, &#39;ENTERTAINMENT&#39;, &#39;CAR&#39;, &#39;TRAVEL&#39;, &#39;FAMILY_AND_PERSONAL&#39;, &#39;HEALTHCARE&#39;,&quot; +\r\n            &quot; &#39;EDUCATION&#39;, &#39;GROCERIES&#39;, &#39;GIFTS&#39;, &#39;BEAUTY&#39;, &#39;WORK&#39;, &#39;SPORTS_AND_HOBBIES&#39;, &#39;OTHER&#39;)&quot;)\r\n    private ExpenseCategories expenseCategories;\r\n\r\n    @Nullable\r\n    @Enumerated(EnumType.STRING)\r\n    @Column(name = &quot;income_categories&quot;, columnDefinition = &quot;ENUM(&#39;SALARY&#39;, &#39;BUSINESS&#39;, &#39;GIFTS&#39;, &#39;EXTRA_INCOME&#39;, &#39;LOAN&#39;, &#39;PARENTAL_LEAVE&#39;, &#39;INSURANCE_PAYOUT&#39;, &#39;OTHER&#39;)&quot;)\r\n    private IncomeCategories incomeCategories;\r\n\r\nNow, for you to get a better picture what I want, I will go chronologically how things work:\r\n\r\nHere is controller that allow user to create a `income transaction:`\r\n\r\n    @PostMapping(&quot;/saveIncome/{walletId}&quot;)\r\n    public String saveIncome(@PathVariable(value = &quot;walletId&quot;) long walletId, @Valid Transaction transaction, BindingResult result, Model model) {\r\n\r\n        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\r\n        UserDetailsImpl user = (UserDetailsImpl) authentication.getPrincipal();\r\n        long userId = user.getId();\r\n\r\n        Wallet wallet = walletService.getWalletById(walletId);\r\n\r\n        boolean thereAreErrors = result.hasErrors();\r\n        if (thereAreErrors) {\r\n            model.addAttribute(&quot;incomeCategories&quot;, IncomeCategories.values());\r\n            return &quot;income_transaction&quot;;\r\n        }\r\n\r\n        transaction.setWallet(wallet);\r\n        transaction.setUserId(userId);\r\n        transaction.setWalletName(wallet.getWalletName());\r\n        transactionService.saveIncome(transaction, walletId, userId);\r\n        return &quot;redirect:/api/wallet/userWallet/balance/&quot; + userId;\r\n    }\r\n    \r\nNothing special, and that works fine.\r\n\r\nNow, when a user successfully created a transaction, I have a controller that returns a page where the user actually can see all transactions that he made. This is how its looks:\r\n\r\n    @GetMapping(&quot;/userTransactions/{user_id}&quot;)\r\n    public String getUserTransactions(@PathVariable(&quot;user_id&quot;) long user_id, TransactionGroup transactionGroup, Model model) {\r\n        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\r\n        UserDetailsImpl user = (UserDetailsImpl) authentication.getPrincipal();\r\n        long userId = user.getId();\r\n        model.addAttribute(&quot;userId&quot;, userId);\r\n\r\n        List&lt;Transaction&gt; transactions = transactionRepository.getTransactionsByUserId(user_id);\r\n        List&lt;TransactionGroup&gt; transactionByDate = new ArrayList&lt;&gt;();\r\n        List&lt;Transaction&gt; transOnSingleDate = new ArrayList&lt;&gt;();\r\n        boolean currDates = transactions.stream().findFirst().isPresent();\r\n\r\n        if (currDates) {\r\n            LocalDate currDate = transactions.get(0).getDate();\r\n\r\n            TransactionGroup transGroup = new TransactionGroup();\r\n\r\n            for (Transaction t : transactions) {\r\n                if (!currDate.isEqual(t.getDate())) {\r\n                    transGroup.setDate(currDate);\r\n                    transGroup.setTransactions(transOnSingleDate);\r\n                    transactionByDate.add(transGroup);\r\n                    transGroup = new TransactionGroup();\r\n                    transOnSingleDate = new ArrayList&lt;&gt;();\r\n                }\r\n\r\n                transOnSingleDate.add(t);\r\n                currDate = t.getDate();\r\n            }\r\n            transGroup.setDate(currDate);\r\n            transGroup.setTransactions(transOnSingleDate);\r\n\r\n            transactionByDate.add(transGroup);\r\n        } else {\r\n            System.out.println(&quot;Empty&quot;);\r\n        }\r\n\r\n\r\n        model.addAttribute(&quot;transactionGroup&quot;, transactionByDate);\r\n        return &quot;transactions&quot;;\r\n    }\r\n\r\nYou can see that I have some lists because I wanted to show all transactions by each date. And that also works fine. For more context, this is my &#39;helper&#39; class that help me to display user transactions by date:\r\n\r\n    public class TransactionGroup {\r\n        private LocalDate date;\r\n        private List&lt;Transaction&gt; transactions;\r\n\r\n        public LocalDate getDate() {\r\n            return date;\r\n        }\r\n\r\n        public void setDate(LocalDate date) {\r\n            this.date = date;\r\n        }\r\n\r\n        public List&lt;Transaction&gt; getTransactions() {\r\n            return transactions;\r\n        }\r\n\r\n        public void setTransactions(List&lt;Transaction&gt; transactions) {\r\n            this.transactions = transactions;\r\n        }\r\n\r\nNow, I hope you get a full picture of how it works. And now, what do I want to achieve?\r\n\r\nYou can see here this field:\r\n\r\n    @Column\r\n    @NotNull(message = &quot;Please, insert a amount&quot;)\r\n    @Min(value = 0, message = &quot;Please, insert a positive amount&quot;)\r\n    private Double amount;\r\n    \r\nI want to calculate amount that left for each date. For example:\r\n\r\n`Date 03/03/2023 Transaction income: 100, Transaction income: 100 - Transaction expense: 50 == 150`\r\n\r\nI tried like this inside `getUserTransactionController`:\r\n\r\n     for (int i = 0; i &lt; transGroup.getTransactions().size(); i++) {\r\n                double result = 0;\r\n\r\n                if (transGroup.getTransactions().get(i).getTransactionType().getDisplayName().equalsIgnoreCase(&quot;income&quot;)) {\r\n                    System.out.println(&quot;Income amount for date &quot; +\r\n                            transGroup.getTransactions().get(i).getDate() + &quot; is &quot; + transGroup.getTransactions().get(i).getAmount());\r\n                    result = result + transGroup.getTransactions().get(i).getAmount();\r\n                    System.out.println(&quot;Result is &quot; + result);\r\n                    System.out.println(&quot;------&quot;);\r\n\r\n                }\r\n\r\nBut that isn&#39;t good, first of all it return me a correct values but doesnt sum it, and If I even made it so code actually sum it, I dont know how I&#39;m suppose to subtract it from `expense` amount.\r\n\r\nAny suggestion, advice, what I can try?\r\n\r\n\r\n\r\n","title":"How to retrieve double values from entity inside list and deal with them","body":"<p>I didn't know how to create a better title so here is a full explanation.</p>\n<p>I have <code>wallet</code> entity:</p>\n<pre><code>@Entity\n@Table(name = &quot;wallet&quot;)\npublic class Wallet {\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\n@Column(name = &quot;wallet_id&quot;)\nprivate Long id;\n\n@NotBlank(message = &quot;Please, insert a wallet name&quot;)\nprivate String walletName;\n\n@NotNull(message = &quot;Please, insert a amount&quot;)\nprivate Double initialBalance;\n\n@Transient\nprivate double totalBalance;\n\n@ManyToOne(fetch = FetchType.LAZY, optional = false)\n@JoinColumn(name = &quot;user_id&quot;, nullable = false, referencedColumnName = &quot;user_id&quot;, insertable = false, updatable = false)\n@OnDelete(action = OnDeleteAction.CASCADE)\n@JsonIgnore\nprivate User user;\n\n@Column(name = &quot;user_id&quot;, nullable = false)\nprivate Long userId;\n\n@OneToMany(mappedBy = &quot;wallet&quot;, cascade = {\n        CascadeType.ALL})\nprivate Set&lt;Transaction&gt; transactions;\n</code></pre>\n<p>And I also have a <code>transaction</code> entity:</p>\n<pre><code>@Entity\n@Table(name = &quot;transaction&quot;)\npublic class Transaction {\n\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\n@Column(name = &quot;transaction_id&quot;)\nprivate Long id;\n\n@Column(name = &quot;user_id&quot;, nullable = false)\nprivate Long userId;\n\n@Column(name = &quot;wallet_name&quot;, nullable = false)\nprivate String walletName;\n\n@Column\n@NotNull(message = &quot;Please, insert a amount&quot;)\n@Min(value = 0, message = &quot;Please, insert a positive amount&quot;)\nprivate Double amount;\n\n@Column\nprivate String note;\n\n@DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)\n@Column(name = &quot;date&quot;)\nprivate LocalDate date;\n\n@ManyToOne\n@OnDelete(action = OnDeleteAction.NO_ACTION)\n@JoinColumn(name = &quot;wallet_id&quot;, nullable = false)\nprivate Wallet wallet;\n\n@Enumerated(EnumType.STRING)\n@Column(name = &quot;transaction_type&quot;, columnDefinition = &quot;ENUM('EXPENSE', 'INCOME')&quot;)\nprivate TransactionType transactionType;\n\n@Nullable\n@Enumerated(EnumType.STRING)\n@Column(name = &quot;expense_categories&quot;, columnDefinition = &quot;ENUM('FOOD_AND_DRINK', 'SHOPPING', 'TRANSPORT', 'HOME',&quot; +\n        &quot; 'BILLS_AND_FEES', 'ENTERTAINMENT', 'CAR', 'TRAVEL', 'FAMILY_AND_PERSONAL', 'HEALTHCARE',&quot; +\n        &quot; 'EDUCATION', 'GROCERIES', 'GIFTS', 'BEAUTY', 'WORK', 'SPORTS_AND_HOBBIES', 'OTHER')&quot;)\nprivate ExpenseCategories expenseCategories;\n\n@Nullable\n@Enumerated(EnumType.STRING)\n@Column(name = &quot;income_categories&quot;, columnDefinition = &quot;ENUM('SALARY', 'BUSINESS', 'GIFTS', 'EXTRA_INCOME', 'LOAN', 'PARENTAL_LEAVE', 'INSURANCE_PAYOUT', 'OTHER')&quot;)\nprivate IncomeCategories incomeCategories;\n</code></pre>\n<p>Now, for you to get a better picture what I want, I will go chronologically how things work:</p>\n<p>Here is controller that allow user to create a <code>income transaction:</code></p>\n<pre><code>@PostMapping(&quot;/saveIncome/{walletId}&quot;)\npublic String saveIncome(@PathVariable(value = &quot;walletId&quot;) long walletId, @Valid Transaction transaction, BindingResult result, Model model) {\n\n    Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\n    UserDetailsImpl user = (UserDetailsImpl) authentication.getPrincipal();\n    long userId = user.getId();\n\n    Wallet wallet = walletService.getWalletById(walletId);\n\n    boolean thereAreErrors = result.hasErrors();\n    if (thereAreErrors) {\n        model.addAttribute(&quot;incomeCategories&quot;, IncomeCategories.values());\n        return &quot;income_transaction&quot;;\n    }\n\n    transaction.setWallet(wallet);\n    transaction.setUserId(userId);\n    transaction.setWalletName(wallet.getWalletName());\n    transactionService.saveIncome(transaction, walletId, userId);\n    return &quot;redirect:/api/wallet/userWallet/balance/&quot; + userId;\n}\n</code></pre>\n<p>Nothing special, and that works fine.</p>\n<p>Now, when a user successfully created a transaction, I have a controller that returns a page where the user actually can see all transactions that he made. This is how its looks:</p>\n<pre><code>@GetMapping(&quot;/userTransactions/{user_id}&quot;)\npublic String getUserTransactions(@PathVariable(&quot;user_id&quot;) long user_id, TransactionGroup transactionGroup, Model model) {\n    Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\n    UserDetailsImpl user = (UserDetailsImpl) authentication.getPrincipal();\n    long userId = user.getId();\n    model.addAttribute(&quot;userId&quot;, userId);\n\n    List&lt;Transaction&gt; transactions = transactionRepository.getTransactionsByUserId(user_id);\n    List&lt;TransactionGroup&gt; transactionByDate = new ArrayList&lt;&gt;();\n    List&lt;Transaction&gt; transOnSingleDate = new ArrayList&lt;&gt;();\n    boolean currDates = transactions.stream().findFirst().isPresent();\n\n    if (currDates) {\n        LocalDate currDate = transactions.get(0).getDate();\n\n        TransactionGroup transGroup = new TransactionGroup();\n\n        for (Transaction t : transactions) {\n            if (!currDate.isEqual(t.getDate())) {\n                transGroup.setDate(currDate);\n                transGroup.setTransactions(transOnSingleDate);\n                transactionByDate.add(transGroup);\n                transGroup = new TransactionGroup();\n                transOnSingleDate = new ArrayList&lt;&gt;();\n            }\n\n            transOnSingleDate.add(t);\n            currDate = t.getDate();\n        }\n        transGroup.setDate(currDate);\n        transGroup.setTransactions(transOnSingleDate);\n\n        transactionByDate.add(transGroup);\n    } else {\n        System.out.println(&quot;Empty&quot;);\n    }\n\n\n    model.addAttribute(&quot;transactionGroup&quot;, transactionByDate);\n    return &quot;transactions&quot;;\n}\n</code></pre>\n<p>You can see that I have some lists because I wanted to show all transactions by each date. And that also works fine. For more context, this is my 'helper' class that help me to display user transactions by date:</p>\n<pre><code>public class TransactionGroup {\n    private LocalDate date;\n    private List&lt;Transaction&gt; transactions;\n\n    public LocalDate getDate() {\n        return date;\n    }\n\n    public void setDate(LocalDate date) {\n        this.date = date;\n    }\n\n    public List&lt;Transaction&gt; getTransactions() {\n        return transactions;\n    }\n\n    public void setTransactions(List&lt;Transaction&gt; transactions) {\n        this.transactions = transactions;\n    }\n</code></pre>\n<p>Now, I hope you get a full picture of how it works. And now, what do I want to achieve?</p>\n<p>You can see here this field:</p>\n<pre><code>@Column\n@NotNull(message = &quot;Please, insert a amount&quot;)\n@Min(value = 0, message = &quot;Please, insert a positive amount&quot;)\nprivate Double amount;\n</code></pre>\n<p>I want to calculate amount that left for each date. For example:</p>\n<p><code>Date 03/03/2023 Transaction income: 100, Transaction income: 100 - Transaction expense: 50 == 150</code></p>\n<p>I tried like this inside <code>getUserTransactionController</code>:</p>\n<pre><code> for (int i = 0; i &lt; transGroup.getTransactions().size(); i++) {\n            double result = 0;\n\n            if (transGroup.getTransactions().get(i).getTransactionType().getDisplayName().equalsIgnoreCase(&quot;income&quot;)) {\n                System.out.println(&quot;Income amount for date &quot; +\n                        transGroup.getTransactions().get(i).getDate() + &quot; is &quot; + transGroup.getTransactions().get(i).getAmount());\n                result = result + transGroup.getTransactions().get(i).getAmount();\n                System.out.println(&quot;Result is &quot; + result);\n                System.out.println(&quot;------&quot;);\n\n            }\n</code></pre>\n<p>But that isn't good, first of all it return me a correct values but doesnt sum it, and If I even made it so code actually sum it, I dont know how I'm suppose to subtract it from <code>expense</code> amount.</p>\n<p>Any suggestion, advice, what I can try?</p>\n"},{"tags":["java","spring-boot","unit-testing","testing","integration-testing"],"answers":[{"tags":[],"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677845883,"creation_date":1677834780,"answer_id":75625150,"question_id":75624848,"body_markdown":"&gt; Although the test hits to the controller above, it does not hit the\r\n&gt; service method below\r\n\r\nYour test is currently written for testing of the controller and not the service. Because categoryService is mocked. Consider rewriting it. Like:\r\n\r\n    @Autowired\r\n    private CategoryService categoryService;\r\n\r\n    @MockBean\r\n    private CategoryRepository categoryRepository;\r\n\r\nOn the other hand if your goal is to test the controller you will need to add more mocked answers like this:\r\n\r\n    when(categoryService.findById(any())).thenReturn(categoryResponse);","title":"Tested method call does not hit the service in Spring Boot","body":"<blockquote>\n<p>Although the test hits to the controller above, it does not hit the\nservice method below</p>\n</blockquote>\n<p>Your test is currently written for testing of the controller and not the service. Because categoryService is mocked. Consider rewriting it. Like:</p>\n<pre><code>@Autowired\nprivate CategoryService categoryService;\n\n@MockBean\nprivate CategoryRepository categoryRepository;\n</code></pre>\n<p>On the other hand if your goal is to test the controller you will need to add more mocked answers like this:</p>\n<pre><code>when(categoryService.findById(any())).thenReturn(categoryResponse);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6676840,"reputation":2917,"user_id":5151202,"display_name":"times29"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677851929,"creation_date":1677851929,"answer_id":75628020,"question_id":75624848,"body_markdown":"Try the test like this:\r\n```java\r\n@AutoConfigureMockMvc\r\n@SpringBootTest\r\nclass CategoryControllerTest {\r\n\r\n    @MockBean\r\n    private CategoryService categoryService;\r\n\r\n    @Autowired\r\n    private MockMvc mockMvc;\r\n\r\n    @Test\r\n    void test_findById() throws Exception {\r\n        // Arrange\r\n        LocalDateTime dateTime = LocalDate.of(2022, 1, 1).atStartOfDay();\r\n\r\n        final long categoryId = 123L;\r\n        Category category = new Category();\r\n        category.setId(categoryId);\r\n        category.setName(&quot;Category&quot;);\r\n        category.setOrdinal(1);\r\n\r\n        when(clock.instant()).thenReturn(dateTime.atZone(ZoneId.of(&quot;UTC&quot;)).toInstant());\r\n        when(categoryService.findById(categoryId)).thenReturn(Optional.of(category));\r\n\r\n        // Act &amp; assert\r\n        mockMvc.perform(get(&quot;/api/v1/categories/{id}&quot;, categoryId))\r\n                .andExpect(status().isOk())\r\n                .andExpect(content().contentType(&quot;application/json&quot;))\r\n                .andExpect(content().string(&quot;{\\&quot;timestamp\\&quot;:1640995200000,\\&quot;message\\&quot;:\\&quot;Success\\&quot;,\\&quot;data\\&quot;:{\\&quot;id\\&quot;:123,\\&quot;name\\&quot;:\\&quot;Category\\&quot;,\\&quot;ordinal\\&quot;:1}}&quot;));\r\n    }\r\n\r\n}\r\n```\r\n\r\nWith this setup, you let Spring basically create the standard application context. The `@AutoConfigureMockMvc` annotation allows you to use the `MockMvc` object to make requests against your controllers.","title":"Tested method call does not hit the service in Spring Boot","body":"<p>Try the test like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@AutoConfigureMockMvc\n@SpringBootTest\nclass CategoryControllerTest {\n\n    @MockBean\n    private CategoryService categoryService;\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @Test\n    void test_findById() throws Exception {\n        // Arrange\n        LocalDateTime dateTime = LocalDate.of(2022, 1, 1).atStartOfDay();\n\n        final long categoryId = 123L;\n        Category category = new Category();\n        category.setId(categoryId);\n        category.setName(&quot;Category&quot;);\n        category.setOrdinal(1);\n\n        when(clock.instant()).thenReturn(dateTime.atZone(ZoneId.of(&quot;UTC&quot;)).toInstant());\n        when(categoryService.findById(categoryId)).thenReturn(Optional.of(category));\n\n        // Act &amp; assert\n        mockMvc.perform(get(&quot;/api/v1/categories/{id}&quot;, categoryId))\n                .andExpect(status().isOk())\n                .andExpect(content().contentType(&quot;application/json&quot;))\n                .andExpect(content().string(&quot;{\\&quot;timestamp\\&quot;:1640995200000,\\&quot;message\\&quot;:\\&quot;Success\\&quot;,\\&quot;data\\&quot;:{\\&quot;id\\&quot;:123,\\&quot;name\\&quot;:\\&quot;Category\\&quot;,\\&quot;ordinal\\&quot;:1}}&quot;));\n    }\n\n}\n</code></pre>\n<p>With this setup, you let Spring basically create the standard application context. The <code>@AutoConfigureMockMvc</code> annotation allows you to use the <code>MockMvc</code> object to make requests against your controllers.</p>\n"}],"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":529,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1677851929,"creation_date":1677832731,"question_id":75624848,"body_markdown":"I am trying to test a service method that uses MapStruct as shown below:\r\n\r\n```\r\n@SpringBootTest(classes = {CategoryController.class, CategoryService.class, CategoryResponseMapperImpl.class})\r\nclass CategoryControllerTest {\r\n\r\n    @Autowired\r\n    private CategoryController categoryController;\r\n\r\n    @MockBean\r\n    private CategoryRepository categoryRepository;\r\n\r\n    @MockBean\r\n    private CategoryService categoryService;\r\n\r\n    @Spy\r\n    // @SpyBean\r\n    public CategoryResponseMapper categoryResponseMapper = new CategoryResponseMapperImpl();\r\n\r\n    @Test\r\n    void test_findById() throws Exception {\r\n        LocalDateTime dateTime = LocalDate.of(2022, 1, 1).atStartOfDay();\r\n\r\n        Category category = new Category();\r\n        category.setId(123L);\r\n        category.setName(&quot;Category&quot;);\r\n        category.setOrdinal(1);\r\n\r\n        when(clock.instant()).thenReturn(dateTime.atZone(ZoneId.of(&quot;UTC&quot;)).toInstant());\r\n        when(categoryRepository.findById(any())).thenReturn(Optional.of(category));\r\n\r\n        MockHttpServletRequestBuilder requestBuilder = MockMvcRequestBuilders.get(&quot;/api/v1/categories/{id}&quot;, 123L);\r\n        MockMvcBuilders.standaloneSetup(categoryController)\r\n                .build()\r\n                .perform(requestBuilder)\r\n                .andExpect(MockMvcResultMatchers.status().isOk())\r\n                .andExpect(MockMvcResultMatchers.content().contentType(&quot;application/json&quot;))\r\n                .andExpect(MockMvcResultMatchers.content()\r\n                        .string(\r\n                                &quot;{\\&quot;timestamp\\&quot;:1640995200000,\\&quot;message\\&quot;:\\&quot;Success\\&quot;,\\&quot;data\\&quot;:{\\&quot;id\\&quot;:123,\\&quot;name\\&quot;:\\&quot;Category\\&quot;,\\&quot;ordinal\\&quot;:1}}&quot;));\r\n    }\r\n}\r\n```\r\n\r\n&lt;br/&gt;\r\n\r\n```\r\n@GetMapping(&quot;/categories/{id}&quot;)\r\npublic ResponseEntity&lt;ApiResponse&lt;CategoryResponse&gt;&gt; findById(@PathVariable long id) {\r\n    final CategoryResponse response = categoryService.findById(id);\r\n    return ResponseEntity.ok(new ApiResponse&lt;&gt;(Instant.now(clock).toEpochMilli(), SUCCESS, response));\r\n}\r\n```\r\n\r\nAlthough the test hits to the controller above, it does not hit the service method below and the response data returns as null:\r\n\r\n```\r\nprivate final CategoryRepository categoryRepository;\r\nprivate final CategoryRequestMapper categoryRequestMapper;\r\nprivate final CategoryResponseMapper categoryResponseMapper;\r\n\r\npublic CategoryResponse findById(Long id) {\r\n    return categoryRepository.findById(id)\r\n            .map(categoryResponseMapper::toDto)\r\n            .orElseThrow(() -&gt; {\r\n                return new NoSuchElementFoundException(NOT_FOUND);\r\n            });\r\n}\r\n```\r\n\r\nSo, where is the problem? ","title":"Tested method call does not hit the service in Spring Boot","body":"<p>I am trying to test a service method that uses MapStruct as shown below:</p>\n<pre><code>@SpringBootTest(classes = {CategoryController.class, CategoryService.class, CategoryResponseMapperImpl.class})\nclass CategoryControllerTest {\n\n    @Autowired\n    private CategoryController categoryController;\n\n    @MockBean\n    private CategoryRepository categoryRepository;\n\n    @MockBean\n    private CategoryService categoryService;\n\n    @Spy\n    // @SpyBean\n    public CategoryResponseMapper categoryResponseMapper = new CategoryResponseMapperImpl();\n\n    @Test\n    void test_findById() throws Exception {\n        LocalDateTime dateTime = LocalDate.of(2022, 1, 1).atStartOfDay();\n\n        Category category = new Category();\n        category.setId(123L);\n        category.setName(&quot;Category&quot;);\n        category.setOrdinal(1);\n\n        when(clock.instant()).thenReturn(dateTime.atZone(ZoneId.of(&quot;UTC&quot;)).toInstant());\n        when(categoryRepository.findById(any())).thenReturn(Optional.of(category));\n\n        MockHttpServletRequestBuilder requestBuilder = MockMvcRequestBuilders.get(&quot;/api/v1/categories/{id}&quot;, 123L);\n        MockMvcBuilders.standaloneSetup(categoryController)\n                .build()\n                .perform(requestBuilder)\n                .andExpect(MockMvcResultMatchers.status().isOk())\n                .andExpect(MockMvcResultMatchers.content().contentType(&quot;application/json&quot;))\n                .andExpect(MockMvcResultMatchers.content()\n                        .string(\n                                &quot;{\\&quot;timestamp\\&quot;:1640995200000,\\&quot;message\\&quot;:\\&quot;Success\\&quot;,\\&quot;data\\&quot;:{\\&quot;id\\&quot;:123,\\&quot;name\\&quot;:\\&quot;Category\\&quot;,\\&quot;ordinal\\&quot;:1}}&quot;));\n    }\n}\n</code></pre>\n<br/>\n<pre><code>@GetMapping(&quot;/categories/{id}&quot;)\npublic ResponseEntity&lt;ApiResponse&lt;CategoryResponse&gt;&gt; findById(@PathVariable long id) {\n    final CategoryResponse response = categoryService.findById(id);\n    return ResponseEntity.ok(new ApiResponse&lt;&gt;(Instant.now(clock).toEpochMilli(), SUCCESS, response));\n}\n</code></pre>\n<p>Although the test hits to the controller above, it does not hit the service method below and the response data returns as null:</p>\n<pre><code>private final CategoryRepository categoryRepository;\nprivate final CategoryRequestMapper categoryRequestMapper;\nprivate final CategoryResponseMapper categoryResponseMapper;\n\npublic CategoryResponse findById(Long id) {\n    return categoryRepository.findById(id)\n            .map(categoryResponseMapper::toDto)\n            .orElseThrow(() -&gt; {\n                return new NoSuchElementFoundException(NOT_FOUND);\n            });\n}\n</code></pre>\n<p>So, where is the problem?</p>\n"},{"tags":["java","collections","graph","tree"],"comments":[{"owner":{"account_id":11089,"reputation":400030,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"score":6,"creation_date":1297521599,"post_id":4978487,"comment_id":5559294,"body_markdown":"&quot;Why doesn&#39;t X do Y&quot; is rarely going to have a proper answer.","body":"&quot;Why doesn&#39;t X do Y&quot; is rarely going to have a proper answer."},{"owner":{"account_id":121177,"reputation":18547,"user_id":314073,"accept_rate":88,"display_name":"Xorty"},"score":0,"creation_date":1297524866,"post_id":4978487,"comment_id":5559626,"body_markdown":"TreeSet is actually Tree with unique keys, which is also Set.","body":"TreeSet is actually Tree with unique keys, which is also Set."},{"owner":{"account_id":266709,"reputation":11846,"user_id":554431,"display_name":"bestsss"},"score":1,"creation_date":1297565611,"post_id":4978487,"comment_id":5564149,"body_markdown":"@Lu, it&#39;s the other way around :) TreeSet uses TreeMap. I mean what you need exactly to have as interface.","body":"@Lu, it&#39;s the other way around :) TreeSet uses TreeMap. I mean what you need exactly to have as interface."},{"owner":{"account_id":109733,"reputation":31428,"user_id":290629,"accept_rate":88,"display_name":"卢声远 Shengyuan Lu"},"score":0,"creation_date":1297565794,"post_id":4978487,"comment_id":5564160,"body_markdown":"@bestsss: you&#39;re right, TreeSet uses TreeMap. My previous comment was deleted.","body":"@bestsss: you&#39;re right, TreeSet uses TreeMap. My previous comment was deleted."},{"owner":{"account_id":266709,"reputation":11846,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1297566043,"post_id":4978487,"comment_id":5564177,"body_markdown":"@Lu, look at the TreeMap, you can navigate it quite decently, almost like a tree. I never needed to treat it like a tree to use it.","body":"@Lu, look at the TreeMap, you can navigate it quite decently, almost like a tree. I never needed to treat it like a tree to use it."}],"answers":[{"tags":[],"owner":{"account_id":102965,"reputation":415230,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"down_vote_count":1,"up_vote_count":38,"is_accepted":true,"score":37,"last_activity_date":1493104264,"creation_date":1297521343,"answer_id":4978623,"question_id":4978487,"body_markdown":"&gt; *I am wondering why the Framework doesn&#39;t contain structures as Tree and Graph which are basic collections. Both can be regarded as sub types of `Collection`.*\r\n\r\nThis is a good question. I think it simply boils down to scoping. The core features that Collections API provides classes for are:\r\n\r\n- **iteration order**: Lists and sorted maps have specified iteration order, most sets don&#39;t.\r\n\r\n- **duplicates**: Lists allow duplicates, sets do not\r\n\r\n- **index**: List values are indexed by integers, map values are indexed by other objects.\r\n\r\nThis gets us very far and I assume Joshua Bloch et al argued that more feature rich collections (graphs and trees which require internal relationship between elements, sets with multiplicity, bi-directional maps, ...) can be implemented on top of these three core features, and are thus better off in libraries. \r\n","title":"Why Java Collection Framework doesn&#39;t contain Tree and Graph","body":"<blockquote>\n  <p><em>I am wondering why the Framework doesn't contain structures as Tree and Graph which are basic collections. Both can be regarded as sub types of <code>Collection</code>.</em></p>\n</blockquote>\n\n<p>This is a good question. I think it simply boils down to scoping. The core features that Collections API provides classes for are:</p>\n\n<ul>\n<li><p><strong>iteration order</strong>: Lists and sorted maps have specified iteration order, most sets don't.</p></li>\n<li><p><strong>duplicates</strong>: Lists allow duplicates, sets do not</p></li>\n<li><p><strong>index</strong>: List values are indexed by integers, map values are indexed by other objects.</p></li>\n</ul>\n\n<p>This gets us very far and I assume Joshua Bloch et al argued that more feature rich collections (graphs and trees which require internal relationship between elements, sets with multiplicity, bi-directional maps, ...) can be implemented on top of these three core features, and are thus better off in libraries. </p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1297523891,"creation_date":1297522263,"answer_id":4978677,"question_id":4978487,"body_markdown":"I suspect that the answer is that it is a combination of two things:\r\n\r\n - A generic tree or graph interface would be &quot;feature poor&quot;.\r\n - It is easier and more efficient to implement a tree or graph using fields to represent child and (if you need them) parent pointers.\r\n\r\nNote that neither Apache commons or Google commons have generic graph or tree support.  However, I did come across a couple of generic tree/graph hierarchies:\r\n\r\n  - The jsfcompounds project on JavaNet has the [&quot;com.truchsess.util&quot;][1] graph and tree framework.\r\n  - The [OpenJGraph][2] project (inactive) on SourceForge includes tree and graph libraries.\r\n\r\n\r\n  [1]: https://jsfcompounds.dev.java.net/treeutils/site/apidocs/com/truchsess/util/package-summary.html\r\n  [2]: http://sourceforge.net/projects/openjgraph/","title":"Why Java Collection Framework doesn&#39;t contain Tree and Graph","body":"<p>I suspect that the answer is that it is a combination of two things:</p>\n\n<ul>\n<li>A generic tree or graph interface would be \"feature poor\".</li>\n<li>It is easier and more efficient to implement a tree or graph using fields to represent child and (if you need them) parent pointers.</li>\n</ul>\n\n<p>Note that neither Apache commons or Google commons have generic graph or tree support.  However, I did come across a couple of generic tree/graph hierarchies:</p>\n\n<ul>\n<li>The jsfcompounds project on JavaNet has the <a href=\"https://jsfcompounds.dev.java.net/treeutils/site/apidocs/com/truchsess/util/package-summary.html\" rel=\"noreferrer\">\"com.truchsess.util\"</a> graph and tree framework.</li>\n<li>The <a href=\"http://sourceforge.net/projects/openjgraph/\" rel=\"noreferrer\">OpenJGraph</a> project (inactive) on SourceForge includes tree and graph libraries.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":56438,"reputation":14829,"user_id":169045,"accept_rate":89,"display_name":"rodion"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1297522290,"creation_date":1297522290,"answer_id":4978680,"question_id":4978487,"body_markdown":"I am afraid the answer is: it&#39;s too troublesome to design and maintain a generic tree structure and interfaces (see answer to [this post][1]). Most users will need the performance of tree-based implementations of lists and sets, but will not be concerned with the internals, so most of them are hidden. \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1356401/generic-tree-implementation-in-java","title":"Why Java Collection Framework doesn&#39;t contain Tree and Graph","body":"<p>I am afraid the answer is: it's too troublesome to design and maintain a generic tree structure and interfaces (see answer to <a href=\"https://stackoverflow.com/questions/1356401/generic-tree-implementation-in-java\">this post</a>). Most users will need the performance of tree-based implementations of lists and sets, but will not be concerned with the internals, so most of them are hidden. </p>\n"},{"tags":[],"owner":{"account_id":216313,"reputation":12017,"user_id":471478,"accept_rate":86,"display_name":"scravy"},"down_vote_count":1,"up_vote_count":18,"is_accepted":false,"score":17,"last_activity_date":1418934036,"creation_date":1297528420,"answer_id":4979168,"question_id":4978487,"body_markdown":"The `java.util` package contains data structures to organize data of any kind. It deals basically with **abstract** data structures (like `List`, `Set`, `Map`) which are defined via their methods and behavior (e.g. a Set does contain no elements twice, a List maintains order and allows duplicates, etc.).\r\n\r\nYou as a developer are free to choose which implementation of these data structures are best suited for the kind of data you deal with (*HashSet vs. TreeSet / LinkedList vs. ArrayList / etc.*). For example for Sets and Maps you may choose between hash-based implementations and tree-based implementations, which may or may not be suited for what you want to do (in most cases a hash-based implementation will be the best choice, while sometimes, when order is important, a tree may be better suited for your needs - See also [HashSet vs TreeSet (here at Stackoverflow)][1]).\r\n\r\nIf you are thinking of a Tree as a special kind of Graph (which it is), then you’re interested in specific properties which apply to graphs, not to collections in general (which, essentially, are lists, and are in turn used to implement things like graphs).\r\n\r\nAs mentioned in this thread, if you’re interested in modeling Graphs, there are plenty of choices for Graph libraries. Personally I can recommend [JGraphT][2].\r\n\r\nI don’t know *why* there is no graph library within the JDK (and I don’t know whether that’s a good thing to ask?), but I guess Sun decided to leave this to developers, since most applications that require graphs also require very unique implementations.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1463284/hashset-vs-treeset\r\n  [2]: http://www.jgrapht.org/","title":"Why Java Collection Framework doesn&#39;t contain Tree and Graph","body":"<p>The <code>java.util</code> package contains data structures to organize data of any kind. It deals basically with <strong>abstract</strong> data structures (like <code>List</code>, <code>Set</code>, <code>Map</code>) which are defined via their methods and behavior (e.g. a Set does contain no elements twice, a List maintains order and allows duplicates, etc.).</p>\n\n<p>You as a developer are free to choose which implementation of these data structures are best suited for the kind of data you deal with (<em>HashSet vs. TreeSet / LinkedList vs. ArrayList / etc.</em>). For example for Sets and Maps you may choose between hash-based implementations and tree-based implementations, which may or may not be suited for what you want to do (in most cases a hash-based implementation will be the best choice, while sometimes, when order is important, a tree may be better suited for your needs - See also <a href=\"https://stackoverflow.com/questions/1463284/hashset-vs-treeset\">HashSet vs TreeSet (here at Stackoverflow)</a>).</p>\n\n<p>If you are thinking of a Tree as a special kind of Graph (which it is), then you’re interested in specific properties which apply to graphs, not to collections in general (which, essentially, are lists, and are in turn used to implement things like graphs).</p>\n\n<p>As mentioned in this thread, if you’re interested in modeling Graphs, there are plenty of choices for Graph libraries. Personally I can recommend <a href=\"http://www.jgrapht.org/\" rel=\"noreferrer\">JGraphT</a>.</p>\n\n<p>I don’t know <em>why</em> there is no graph library within the JDK (and I don’t know whether that’s a good thing to ask?), but I guess Sun decided to leave this to developers, since most applications that require graphs also require very unique implementations.</p>\n"},{"tags":[],"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"Paŭlo Ebermann"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1297532415,"creation_date":1297532415,"answer_id":4979522,"question_id":4978487,"body_markdown":"There is an interface for trees - `javax.swing.tree.TreeModel`, which in fact works for arbitrary directed graphs (with a distinguished &quot;root&quot; node). It does not implement the `Collection` interface, though (since Swing is a bit older than the collection framework, and it is not really clear that being a collection would really be appropriate here).\r\n(One implementation of TreeModel is `DefaultTreeModel`, which uses a tree build from `TreeNode` objects, which is itself an interface implementable by users.) \r\n\r\nAnother type of trees are given by the XML-DOM frameworks.\r\nSome specific use trees (or mostly &quot;tree nodes&quot;) are defined by `java.io.File`, `java.awt.Component` (and subclasses), the Compiler tree API (`com.sun.source.tree.*`), the Doclet API (`com.sun.javadoc.*`), the Reflection API (`java.lang.Class`), the language model API (`javax.lang.**`).\r\n\r\nIf you compare these API\r\n\r\nThe problem is, there is no clear general-purpose useful interface for trees - what should such a tree be able to do?\r\nIs a tree simply a collection of other trees (those one level lower), or simply a pointer to the root node, where each node itself contains more nodes? Or is a tree a collection of all the nodes? Or a collection of all the contents of all the nodes? Do all nodes have to have &quot;content&quot;, or only the leaf nodes? If a tree were a collection of some content elements (and not the nodes itself), how should an iterator behave? What would be the size of a tree?\r\n\r\nHere is a proposal for a tree node (or in fact it could be a general directed graph node, if not for the parent-pointer) interface:\r\n\r\n    /**\r\n     * A general interface for a tree node.\r\n     * @param &lt;N&gt; the concrete node type.\r\n     */\r\n    public interface Node&lt;N extends Node&lt;N&gt;&gt; {\r\n    \r\n       /**\r\n        * equivalent to {@link #children children()}.{@link Collection#isEmpty isEmpty()}.\r\n        * @returns true, if this is a leaf node, else false.\r\n        */\r\n       public boolean isLeaf();\r\n       \r\n       /**\r\n        * returns a collection of all children of this node.\r\n        * This collection can be changed, if this node is mutable.\r\n        */\r\n       public Collection&lt;N&gt; children();\r\n       /**\r\n        * returns the parent of this node.\r\n        * @return null, if this is the root node, or the node does not know its parent, or has multiple parents.\r\n        */\r\n       public N parent();\r\n    }\r\n    \r\n    /**\r\n     * a tree node with content objects.\r\n     * @param &lt;N&gt; the concrete node type\r\n     * @param &lt;C&gt; the type of the content of this node.\r\n     */\r\n    public interface ContentNode&lt;C,N extends ContentNode&lt;C,N&gt;&gt;\r\n              extends Node&lt;N&gt;\r\n    {\r\n       /**\r\n        * returns the content of this node, if any.\r\n        */\r\n       public C content();\r\n    }\r\n\r\nWould this be enough for all types of trees, for example the ones listed above? I don&#39;t think so.","title":"Why Java Collection Framework doesn&#39;t contain Tree and Graph","body":"<p>There is an interface for trees - <code>javax.swing.tree.TreeModel</code>, which in fact works for arbitrary directed graphs (with a distinguished \"root\" node). It does not implement the <code>Collection</code> interface, though (since Swing is a bit older than the collection framework, and it is not really clear that being a collection would really be appropriate here).\n(One implementation of TreeModel is <code>DefaultTreeModel</code>, which uses a tree build from <code>TreeNode</code> objects, which is itself an interface implementable by users.) </p>\n\n<p>Another type of trees are given by the XML-DOM frameworks.\nSome specific use trees (or mostly \"tree nodes\") are defined by <code>java.io.File</code>, <code>java.awt.Component</code> (and subclasses), the Compiler tree API (<code>com.sun.source.tree.*</code>), the Doclet API (<code>com.sun.javadoc.*</code>), the Reflection API (<code>java.lang.Class</code>), the language model API (<code>javax.lang.**</code>).</p>\n\n<p>If you compare these API</p>\n\n<p>The problem is, there is no clear general-purpose useful interface for trees - what should such a tree be able to do?\nIs a tree simply a collection of other trees (those one level lower), or simply a pointer to the root node, where each node itself contains more nodes? Or is a tree a collection of all the nodes? Or a collection of all the contents of all the nodes? Do all nodes have to have \"content\", or only the leaf nodes? If a tree were a collection of some content elements (and not the nodes itself), how should an iterator behave? What would be the size of a tree?</p>\n\n<p>Here is a proposal for a tree node (or in fact it could be a general directed graph node, if not for the parent-pointer) interface:</p>\n\n<pre><code>/**\n * A general interface for a tree node.\n * @param &lt;N&gt; the concrete node type.\n */\npublic interface Node&lt;N extends Node&lt;N&gt;&gt; {\n\n   /**\n    * equivalent to {@link #children children()}.{@link Collection#isEmpty isEmpty()}.\n    * @returns true, if this is a leaf node, else false.\n    */\n   public boolean isLeaf();\n\n   /**\n    * returns a collection of all children of this node.\n    * This collection can be changed, if this node is mutable.\n    */\n   public Collection&lt;N&gt; children();\n   /**\n    * returns the parent of this node.\n    * @return null, if this is the root node, or the node does not know its parent, or has multiple parents.\n    */\n   public N parent();\n}\n\n/**\n * a tree node with content objects.\n * @param &lt;N&gt; the concrete node type\n * @param &lt;C&gt; the type of the content of this node.\n */\npublic interface ContentNode&lt;C,N extends ContentNode&lt;C,N&gt;&gt;\n          extends Node&lt;N&gt;\n{\n   /**\n    * returns the content of this node, if any.\n    */\n   public C content();\n}\n</code></pre>\n\n<p>Would this be enough for all types of trees, for example the ones listed above? I don't think so.</p>\n"},{"tags":[],"owner":{"account_id":1033883,"reputation":884,"user_id":1041665,"accept_rate":67,"display_name":"Yago M&#233;ndez Vidal"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1493076389,"creation_date":1356622952,"answer_id":14057252,"question_id":4978487,"body_markdown":"**Original answer**\r\n\r\nThe main problem with graphs (and more concretely trees, as you know, a special case where there&#39;s a one only root, there can be no loops and all nodes are connected) is that each item in that supposed collection should be hold in another structure: the node. It&#39;s tough to *make standard* that kind of treatment as it requires a double layer of &quot;containers&quot;.\r\n\r\nIf anyone ever happens to work with the `TreeModel` for `JTree` would notice that is almost impossible to avoid the fact that there are `TreeNode`s behind (inside?) and you have to manipulate both, nodes and trees.\r\n\r\nAnyway, I agree that the structure would be useful but it&#39;s very hard to *make it standard*, just notice that, for instance, neither Apache Commons Collections &lt;s&gt;nor Google Guava&lt;/s&gt;, two big collection extensions for the API, don&#39;t have them either.\r\n\r\n**Update**\r\n\r\nAccording to [the overview of the API][1]:\r\n\r\n&gt; The main design goal was to produce an API that was reasonably small,\r\n&gt; both in size, and, more importantly, in &quot;conceptual weight.&quot; It was\r\n&gt; critical that the new functionality not seem alien to current Java\r\n&gt; programmers; it had to augment current facilities, rather than\r\n&gt; replacing them. At the same time, the new API had to be powerful\r\n&gt; enough to provide all the advantages described above.\r\n\r\nSo while graphs [are proper collections][2] and it&#39;d be maybe possible to make it standard, the size and complexity of the implementation would be too big to fit this design goal, because of the previously explained need of a double layer of containers.\r\n\r\nAlso, Google Guava [has added support for graphs][3]. Apache [had a sandbox (development in progress) for graphs][4] but seems dormant since 2011.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/technotes/guides/collections/overview.html\r\n  [2]: https://en.wikipedia.org/wiki/Collection_(abstract_data_type)#Graphs\r\n  [3]: https://github.com/google/guava/wiki/GraphsExplained\r\n  [4]: https://commons.apache.org/sandbox/commons-graph/","title":"Why Java Collection Framework doesn&#39;t contain Tree and Graph","body":"<p><strong>Original answer</strong></p>\n\n<p>The main problem with graphs (and more concretely trees, as you know, a special case where there's a one only root, there can be no loops and all nodes are connected) is that each item in that supposed collection should be hold in another structure: the node. It's tough to <em>make standard</em> that kind of treatment as it requires a double layer of \"containers\".</p>\n\n<p>If anyone ever happens to work with the <code>TreeModel</code> for <code>JTree</code> would notice that is almost impossible to avoid the fact that there are <code>TreeNode</code>s behind (inside?) and you have to manipulate both, nodes and trees.</p>\n\n<p>Anyway, I agree that the structure would be useful but it's very hard to <em>make it standard</em>, just notice that, for instance, neither Apache Commons Collections <s>nor Google Guava</s>, two big collection extensions for the API, don't have them either.</p>\n\n<p><strong>Update</strong></p>\n\n<p>According to <a href=\"http://docs.oracle.com/javase/6/docs/technotes/guides/collections/overview.html\" rel=\"nofollow noreferrer\">the overview of the API</a>:</p>\n\n<blockquote>\n  <p>The main design goal was to produce an API that was reasonably small,\n  both in size, and, more importantly, in \"conceptual weight.\" It was\n  critical that the new functionality not seem alien to current Java\n  programmers; it had to augment current facilities, rather than\n  replacing them. At the same time, the new API had to be powerful\n  enough to provide all the advantages described above.</p>\n</blockquote>\n\n<p>So while graphs <a href=\"https://en.wikipedia.org/wiki/Collection_(abstract_data_type)#Graphs\" rel=\"nofollow noreferrer\">are proper collections</a> and it'd be maybe possible to make it standard, the size and complexity of the implementation would be too big to fit this design goal, because of the previously explained need of a double layer of containers.</p>\n\n<p>Also, Google Guava <a href=\"https://github.com/google/guava/wiki/GraphsExplained\" rel=\"nofollow noreferrer\">has added support for graphs</a>. Apache <a href=\"https://commons.apache.org/sandbox/commons-graph/\" rel=\"nofollow noreferrer\">had a sandbox (development in progress) for graphs</a> but seems dormant since 2011.</p>\n"}],"owner":{"account_id":109733,"reputation":31428,"user_id":290629,"accept_rate":88,"display_name":"卢声远 Shengyuan Lu"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36846,"favorite_count":0,"down_vote_count":0,"up_vote_count":60,"accepted_answer_id":4978623,"answer_count":6,"score":60,"last_activity_date":1677851918,"creation_date":1297519848,"question_id":4978487,"body_markdown":"I am familiar with Java Collection Framework which contains basic interfaces: `Collection` and `Map`. I am wondering why the Framework doesn&#39;t contain structures as Tree and Graph which are basic collections. Both can be regarded as sub types of `Collection`. \r\n\r\nBy the way, I know `TreeSet` is implemented by Red-Black Tree underlying. However, the `TreeSet` is not a Tree but a `Set`, so there&#39;s no real Tree in the framework.","title":"Why Java Collection Framework doesn&#39;t contain Tree and Graph","body":"<p>I am familiar with Java Collection Framework which contains basic interfaces: <code>Collection</code> and <code>Map</code>. I am wondering why the Framework doesn't contain structures as Tree and Graph which are basic collections. Both can be regarded as sub types of <code>Collection</code>. </p>\n\n<p>By the way, I know <code>TreeSet</code> is implemented by Red-Black Tree underlying. However, the <code>TreeSet</code> is not a Tree but a <code>Set</code>, so there's no real Tree in the framework.</p>\n"},{"tags":["java","hibernate","jpa","batch-processing"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":2,"creation_date":1677868341,"post_id":75627524,"comment_id":133428732,"body_markdown":"I don&#39;t believe you can do this with a native SQL. JPA providers cannot order native sql and are required to execute them immediately when you call execute on the query - so they can&#39;t be delayed and batched up when the transaction commits. If you want batch processing, you&#39;ll have to use JPA managed entity objects or control the statements yourself (JDBC)","body":"I don&#39;t believe you can do this with a native SQL. JPA providers cannot order native sql and are required to execute them immediately when you call execute on the query - so they can&#39;t be delayed and batched up when the transaction commits. If you want batch processing, you&#39;ll have to use JPA managed entity objects or control the statements yourself (JDBC)"}],"answers":[{"tags":[],"owner":{"account_id":15696710,"reputation":36,"user_id":11326015,"display_name":"Guhan Sundaresan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677851906,"creation_date":1677851906,"answer_id":75628015,"question_id":75627524,"body_markdown":"If your update is working but not in batches, then you should probably try after setting the property **spring.jpa.properties.hibernate.order_updates** to true. This ensures that Hibernate executes all identical update statements that only differ in the provided bind parameter values. Without this property, the JDBC driver closes and executes the batch when you execute a different DB update elsewhere. By ordering the statements, you enable the JDBC driver to group the updates as efficiently as possible.\r\n\r\nIf update call isn&#39;t working in the first place, then check out the solutions provided here: https://thorben-janssen.com/use-native-queries-perform-bulk-updates/","title":"JPA Batch update not working with native sql query","body":"<p>If your update is working but not in batches, then you should probably try after setting the property <strong>spring.jpa.properties.hibernate.order_updates</strong> to true. This ensures that Hibernate executes all identical update statements that only differ in the provided bind parameter values. Without this property, the JDBC driver closes and executes the batch when you execute a different DB update elsewhere. By ordering the statements, you enable the JDBC driver to group the updates as efficiently as possible.</p>\n<p>If update call isn't working in the first place, then check out the solutions provided here: <a href=\"https://thorben-janssen.com/use-native-queries-perform-bulk-updates/\" rel=\"nofollow noreferrer\">https://thorben-janssen.com/use-native-queries-perform-bulk-updates/</a></p>\n"}],"owner":{"account_id":301784,"reputation":37,"user_id":16187859,"display_name":"Nirmal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1088,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677851906,"creation_date":1677849159,"question_id":75627524,"body_markdown":"I am using jpa/hibernate in my application and have enabled jdbc batching:\r\n\r\nspring.jpa.properties.hibernate.jdbc.batch_size=100\r\n\r\nhowever there are some sections in the code which still use Native sqls to update the DB and I noticed that batch update/insert is not working for those native queries\r\n\r\n```\r\nEntityManager em;\r\nem.flushMode(FlushModeType.Commit);\r\nem.beginTransaction();\r\nfor (i ....){\r\n//some business logic\r\n  em.createNativeQuery(&quot;update some db row&quot;); //Batch:False (not updated in batch)\r\n}\r\nem.commit();\r\n```\r\n\r\nbasically the update method is called from multiple places, and idea is that all the records should be persisted in batch at the end of transaction.\r\n \r\nI think this is happening because with native query we are bypassing first level catche and writing to the db directly, however Is there any way we can leverage jpa batching with native query?","title":"JPA Batch update not working with native sql query","body":"<p>I am using jpa/hibernate in my application and have enabled jdbc batching:</p>\n<p>spring.jpa.properties.hibernate.jdbc.batch_size=100</p>\n<p>however there are some sections in the code which still use Native sqls to update the DB and I noticed that batch update/insert is not working for those native queries</p>\n<pre><code>EntityManager em;\nem.flushMode(FlushModeType.Commit);\nem.beginTransaction();\nfor (i ....){\n//some business logic\n  em.createNativeQuery(&quot;update some db row&quot;); //Batch:False (not updated in batch)\n}\nem.commit();\n</code></pre>\n<p>basically the update method is called from multiple places, and idea is that all the records should be persisted in batch at the end of transaction.</p>\n<p>I think this is happening because with native query we are bypassing first level catche and writing to the db directly, however Is there any way we can leverage jpa batching with native query?</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":682692,"reputation":49061,"user_id":535275,"accept_rate":91,"display_name":"Scott Hunter"},"score":0,"creation_date":1677849941,"post_id":75627626,"comment_id":133423284,"body_markdown":"This does not appear to even attempt to generate your shift array.","body":"This does not appear to even attempt to generate your shift array."},{"owner":{"account_id":26838297,"reputation":45,"user_id":20425228,"display_name":"maria"},"score":0,"creation_date":1677850061,"post_id":75627626,"comment_id":133423316,"body_markdown":"thought i should move all even numbers to the front and then find out how many positions they moved, is my logic wrong? how should i approach the problem then? @ScottHunter","body":"thought i should move all even numbers to the front and then find out how many positions they moved, is my logic wrong? how should i approach the problem then? @ScottHunter"},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1677850417,"post_id":75627626,"comment_id":133423411,"body_markdown":"You cannot shift positions in a Java Array. You could do that maybe with a `List`, but for an array, you just have to create a new array and put in the values at the correct positions. Another option would be that you first put all elements of your array into a list, modify the list and then convert it back to an array - but bad for two reasons: if this is a homework task or similar, you probably are not supposed to use `List`. If this is a &quot;real&quot; problem, I would rather work only with lists and not with arrays for such problems, so you don&#39;t have to convert.","body":"You cannot shift positions in a Java Array. You could do that maybe with a <code>List</code>, but for an array, you just have to create a new array and put in the values at the correct positions. Another option would be that you first put all elements of your array into a list, modify the list and then convert it back to an array - but bad for two reasons: if this is a homework task or similar, you probably are not supposed to use <code>List</code>. If this is a &quot;real&quot; problem, I would rather work only with lists and not with arrays for such problems, so you don&#39;t have to convert."},{"owner":{"account_id":682692,"reputation":49061,"user_id":535275,"accept_rate":91,"display_name":"Scott Hunter"},"score":1,"creation_date":1677850492,"post_id":75627626,"comment_id":133423437,"body_markdown":"@cyberbrain: And yet the posted code *is* shifting the contents of the array (by swapping adjacent elements repeatedly).","body":"@cyberbrain: And yet the posted code <i>is</i> shifting the contents of the array (by swapping adjacent elements repeatedly)."},{"owner":{"account_id":682692,"reputation":49061,"user_id":535275,"accept_rate":91,"display_name":"Scott Hunter"},"score":0,"creation_date":1677850513,"post_id":75627626,"comment_id":133423441,"body_markdown":"What if the same even number appears multiple times?","body":"What if the same even number appears multiple times?"},{"owner":{"account_id":682692,"reputation":49061,"user_id":535275,"accept_rate":91,"display_name":"Scott Hunter"},"score":0,"creation_date":1677850698,"post_id":75627626,"comment_id":133423493,"body_markdown":"Not that your code is *very* inefficient, if the order of the even and odd values does not have to be what this produces (for example, if {2,4,8,6,3,7,1,5} would be an acceptable result).  And a more efficient algorithm could make computing your shift array very easy.","body":"Not that your code is <i>very</i> inefficient, if the order of the even and odd values does not have to be what this produces (for example, if {2,4,8,6,3,7,1,5} would be an acceptable result).  And a more efficient algorithm could make computing your shift array very easy."},{"owner":{"account_id":26838297,"reputation":45,"user_id":20425228,"display_name":"maria"},"score":0,"creation_date":1677851042,"post_id":75627626,"comment_id":133423594,"body_markdown":"@ScottHunter could you please give me some hints on how to do write a more efficient algorithm? i&#39;m a bit stuck with it (and a beginner with java), so some directions are really appreciated right now!","body":"@ScottHunter could you please give me some hints on how to do write a more efficient algorithm? i&#39;m a bit stuck with it (and a beginner with java), so some directions are really appreciated right now!"},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1677855771,"post_id":75627626,"comment_id":133425115,"body_markdown":"@cyberbrain *You cannot shift positions in a Java Array.*   It was clear (at least to me) that the OP did not mean a literal shift.  Even if they were swapped, they still &quot;shifted&quot; their positions as they moved from one position to another.","body":"@cyberbrain <i>You cannot shift positions in a Java Array.</i>   It was clear (at least to me) that the OP did not mean a literal shift.  Even if they were swapped, they still &quot;shifted&quot; their positions as they moved from one position to another."}],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1677851409,"creation_date":1677851409,"answer_id":75627911,"question_id":75627626,"body_markdown":"&quot;How many times does this number need to shift&quot; in this case is actually just &quot;how many odd numbers in total are before this number&quot;, because you are trying to move all the even numbers to the beginning without changing the relative positions of the even numbers. Each even number needs to &quot;move over&quot; however many odd numbers there are before it.\r\n\r\nSo you just need to keep a cumulative count:\r\n\r\n    int[] a = { 1, 3, 2, 5, 4, 7, 8, 6 };\r\n    List&lt;Integer&gt; shifts = new ArrayList&lt;&gt;();\r\n    int oddNumberCount = 0;\r\n    for (int i : a) {\r\n        if (i % 2 == 0) {\r\n            shifts.add(oddNumberCount);\r\n        } else {\r\n            oddNumberCount++;\r\n        }\r\n    }\r\n\r\nI don&#39;t know how many even numbers there will be, so I used a list. If you require an array as the output you can convert it to a list simply like this ([See Also][1]):\r\n\r\n    int[] result = shifts.stream().mapToInt(x -&gt; x).toArray();\r\n\r\nIf you do know how many even numbers there will be, you can of course just start with an array of that given size.\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/718554/5133585","title":"Shift elements of an array","body":"<p>&quot;How many times does this number need to shift&quot; in this case is actually just &quot;how many odd numbers in total are before this number&quot;, because you are trying to move all the even numbers to the beginning without changing the relative positions of the even numbers. Each even number needs to &quot;move over&quot; however many odd numbers there are before it.</p>\n<p>So you just need to keep a cumulative count:</p>\n<pre><code>int[] a = { 1, 3, 2, 5, 4, 7, 8, 6 };\nList&lt;Integer&gt; shifts = new ArrayList&lt;&gt;();\nint oddNumberCount = 0;\nfor (int i : a) {\n    if (i % 2 == 0) {\n        shifts.add(oddNumberCount);\n    } else {\n        oddNumberCount++;\n    }\n}\n</code></pre>\n<p>I don't know how many even numbers there will be, so I used a list. If you require an array as the output you can convert it to a list simply like this (<a href=\"https://stackoverflow.com/q/718554/5133585\">See Also</a>):</p>\n<pre><code>int[] result = shifts.stream().mapToInt(x -&gt; x).toArray();\n</code></pre>\n<p>If you do know how many even numbers there will be, you can of course just start with an array of that given size.</p>\n"},{"tags":[],"owner":{"account_id":4477746,"reputation":1014,"user_id":3642410,"accept_rate":100,"display_name":"Karim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677851891,"creation_date":1677851891,"answer_id":75628008,"question_id":75627626,"body_markdown":"What are you lacking in your code is you don&#39;t track what&#39;s the current position of the even numbers correctly:\r\n\r\n    public static void main(String...arg){\r\n        int[] a={1,3,2,5, 4, 7, 8, 6,0}; //the array to be shifted\r\n        \r\n        int indexEvenNumber = 0;//where should we put the even number if we found it.\r\n        for (int i = 0; i &lt; a.length; i++) {\r\n            if (a[i] % 2 == 0) {\r\n                int temp = a[i];\r\n                a[i] = a[indexEvenNumber];\r\n                a[indexEvenNumber] = temp;\r\n                indexEvenNumber++;\r\n            }\r\n        }\r\n        // print the shifted array to confirm results\r\n        Arrays.stream(a).forEach(System.out::println);\r\n\r\n    }","title":"Shift elements of an array","body":"<p>What are you lacking in your code is you don't track what's the current position of the even numbers correctly:</p>\n<pre><code>public static void main(String...arg){\n    int[] a={1,3,2,5, 4, 7, 8, 6,0}; //the array to be shifted\n    \n    int indexEvenNumber = 0;//where should we put the even number if we found it.\n    for (int i = 0; i &lt; a.length; i++) {\n        if (a[i] % 2 == 0) {\n            int temp = a[i];\n            a[i] = a[indexEvenNumber];\n            a[indexEvenNumber] = temp;\n            indexEvenNumber++;\n        }\n    }\n    // print the shifted array to confirm results\n    Arrays.stream(a).forEach(System.out::println);\n\n}\n</code></pre>\n"}],"owner":{"account_id":26838297,"reputation":45,"user_id":20425228,"display_name":"maria"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":100,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1677851891,"creation_date":1677849797,"question_id":75627626,"body_markdown":"I&#39;m writing a code that moves all even numbers to the front of the array and odd numbers to the back. So when an array looks like this:\r\n\r\n```\r\nint[] a={1,3,2,5, 4, 7, 8, 6};\r\n```\r\n\r\nthe output should look like:\r\n\r\n```\r\nint[] b={2,4,8,6, 1, 3, 5, 7};\r\n```\r\n\r\nmy problem is that the programme should return an array of positions that every even number moved to get to these positions. with my example the output should look like this: \\[2, 3, 4, 4\\]\r\n\r\n```\r\nshiftArray = {2,3,4,4};\r\n```\r\n\r\nas number 2 moved two positions, number 4 three positions etc.\r\n\r\nhere is what i have so far:\r\n\r\n```\r\nint temp=0;\r\nint a=0;\r\nfor(int i=0;i&lt;arr.length;i++){\r\n    if(arr[i]%2==0){\r\n\r\n        for (int j=i;j&gt;a;j--){\r\n            temp=arr[j-1];\r\n            arr[j-1]=arr[j];\r\n            arr[j]=temp;\r\n        }\r\n        a++;\r\n    }\r\nreturn arr;\r\n}\r\n```\r\n\r\nhow can i use what i have so far to get my desired output?","title":"Shift elements of an array","body":"<p>I'm writing a code that moves all even numbers to the front of the array and odd numbers to the back. So when an array looks like this:</p>\n<pre><code>int[] a={1,3,2,5, 4, 7, 8, 6};\n</code></pre>\n<p>the output should look like:</p>\n<pre><code>int[] b={2,4,8,6, 1, 3, 5, 7};\n</code></pre>\n<p>my problem is that the programme should return an array of positions that every even number moved to get to these positions. with my example the output should look like this: [2, 3, 4, 4]</p>\n<pre><code>shiftArray = {2,3,4,4};\n</code></pre>\n<p>as number 2 moved two positions, number 4 three positions etc.</p>\n<p>here is what i have so far:</p>\n<pre><code>int temp=0;\nint a=0;\nfor(int i=0;i&lt;arr.length;i++){\n    if(arr[i]%2==0){\n\n        for (int j=i;j&gt;a;j--){\n            temp=arr[j-1];\n            arr[j-1]=arr[j];\n            arr[j]=temp;\n        }\n        a++;\n    }\nreturn arr;\n}\n</code></pre>\n<p>how can i use what i have so far to get my desired output?</p>\n"},{"tags":["java","debugging"],"owner":{"account_id":27927200,"reputation":11,"user_id":21326042,"display_name":"Jonas Calderhead"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677851677,"creation_date":1677848538,"question_id":75627410,"body_markdown":"My problem is that the expected value is an `IndexOutOfBoundsException` but somehow I&#39;m not getting that picked up in my conditionals at the start of my method.\r\n\r\nThis is the test case I&#39;m not passing:\r\n\r\n```\r\n@Test(expected = IndexOutOfBoundsException.class)\r\n    public void testDSListAddInsertInvalidIndexHigh2() {\r\n        DSListInterface&lt;String&gt; list = createStringList(3);\r\n        list.add(3, &quot;Hello&quot;);\r\n    }\r\n```\r\n\r\nThis is the conditional that should be catching it:\r\n\r\n```\r\nif(index &lt; 0) throw new IndexOutOfBoundsException(); // invalid index, must be greater than zero \r\nif(isEmpty()) throw new IndexOutOfBoundsException();\r\nif(index &gt; size() + 1) throw new IndexOutOfBoundsException();\r\n```\r\n\r\nHere&#39;s the complete code, all the other test cases worked but &quot;one&quot; (at index 1) isn&#39;t. I gave chatgpt a shoot at debugging and it helped a bit but I&#39;m stuck.\r\n\r\n\r\n```\r\npublic class DSList&lt;T&gt; implements DSListInterface&lt;T&gt; {\r\n    private DSNode&lt;T&gt; first;\r\n    \r\n    public DSList() {\r\n        super();\r\n        this.first = null;\r\n    }\r\n\r\n    public void add(int index, T data) {\r\n        if(index &lt; 0) throw new IndexOutOfBoundsException(); // invalid index, must be greater than zero\r\n        if(isEmpty()) throw new IndexOutOfBoundsException();\r\n        if(index &gt; size() + 1) throw new IndexOutOfBoundsException();\r\n         \r\n        DSNode&lt;T&gt; newNode = new DSNode&lt;&gt;();\r\n        newNode.setData(data);\r\n        \r\n        if(index == 0) {\r\n            newNode.setNext(first);\r\n            first = newNode;\r\n        }\r\n        else {\r\n                DSNode&lt;T&gt; beforeNode = null;\r\n                DSNode&lt;T&gt; afterNode = first;\r\n                \r\n                 // empty list\r\n        \r\n                for(int i = 0; i &lt; index; i++) {\r\n                    if(afterNode == null) {\r\n                        throw new IndexOutOfBoundsException(); // invalid index, too big\r\n                    }\r\n                    else {\r\n                        if(i &lt; index -1) {\r\n                            beforeNode = afterNode.getNext();\r\n                        }\r\n                        afterNode = afterNode.getNext();\r\n                    }\r\n                }\r\n                beforeNode.setNext(newNode);\r\n                newNode.setNext(afterNode);\r\n        }      \r\n    }\r\n```\r\n\r\n\r\nAlso here&#39;s the node class:\r\n```\r\npublic class DSNode&lt;T&gt; {\r\n    private T data;\r\n    private DSNode&lt;T&gt; next;\r\n    \r\n    public DSNode() {\r\n        super();\r\n        this.data = null;\r\n        this.next = null;\r\n    }\r\n    \r\n    public T getData() {\r\n        return this.data;\r\n    }\r\n    \r\n    public void setData(T data) {\r\n        this.data = data;\r\n    }\r\n    \r\n    public DSNode&lt;T&gt; getNext() {\r\n        return this.next;\r\n    }\r\n    \r\n    public void setNext(DSNode&lt;T&gt; next) {\r\n        this.next = next;\r\n    }\r\n}\r\n```","title":"Debugging a linked list add(int index, T data) method","body":"<p>My problem is that the expected value is an <code>IndexOutOfBoundsException</code> but somehow I'm not getting that picked up in my conditionals at the start of my method.</p>\n<p>This is the test case I'm not passing:</p>\n<pre><code>@Test(expected = IndexOutOfBoundsException.class)\n    public void testDSListAddInsertInvalidIndexHigh2() {\n        DSListInterface&lt;String&gt; list = createStringList(3);\n        list.add(3, &quot;Hello&quot;);\n    }\n</code></pre>\n<p>This is the conditional that should be catching it:</p>\n<pre><code>if(index &lt; 0) throw new IndexOutOfBoundsException(); // invalid index, must be greater than zero \nif(isEmpty()) throw new IndexOutOfBoundsException();\nif(index &gt; size() + 1) throw new IndexOutOfBoundsException();\n</code></pre>\n<p>Here's the complete code, all the other test cases worked but &quot;one&quot; (at index 1) isn't. I gave chatgpt a shoot at debugging and it helped a bit but I'm stuck.</p>\n<pre><code>public class DSList&lt;T&gt; implements DSListInterface&lt;T&gt; {\n    private DSNode&lt;T&gt; first;\n    \n    public DSList() {\n        super();\n        this.first = null;\n    }\n\n    public void add(int index, T data) {\n        if(index &lt; 0) throw new IndexOutOfBoundsException(); // invalid index, must be greater than zero\n        if(isEmpty()) throw new IndexOutOfBoundsException();\n        if(index &gt; size() + 1) throw new IndexOutOfBoundsException();\n         \n        DSNode&lt;T&gt; newNode = new DSNode&lt;&gt;();\n        newNode.setData(data);\n        \n        if(index == 0) {\n            newNode.setNext(first);\n            first = newNode;\n        }\n        else {\n                DSNode&lt;T&gt; beforeNode = null;\n                DSNode&lt;T&gt; afterNode = first;\n                \n                 // empty list\n        \n                for(int i = 0; i &lt; index; i++) {\n                    if(afterNode == null) {\n                        throw new IndexOutOfBoundsException(); // invalid index, too big\n                    }\n                    else {\n                        if(i &lt; index -1) {\n                            beforeNode = afterNode.getNext();\n                        }\n                        afterNode = afterNode.getNext();\n                    }\n                }\n                beforeNode.setNext(newNode);\n                newNode.setNext(afterNode);\n        }      \n    }\n</code></pre>\n<p>Also here's the node class:</p>\n<pre><code>public class DSNode&lt;T&gt; {\n    private T data;\n    private DSNode&lt;T&gt; next;\n    \n    public DSNode() {\n        super();\n        this.data = null;\n        this.next = null;\n    }\n    \n    public T getData() {\n        return this.data;\n    }\n    \n    public void setData(T data) {\n        this.data = data;\n    }\n    \n    public DSNode&lt;T&gt; getNext() {\n        return this.next;\n    }\n    \n    public void setNext(DSNode&lt;T&gt; next) {\n        this.next = next;\n    }\n}\n</code></pre>\n"},{"tags":["java","jackson","jackson-databind","java-record"],"answers":[{"tags":[],"owner":{"account_id":7630732,"reputation":1728,"user_id":5785871,"accept_rate":80,"display_name":"mslowiak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673030150,"creation_date":1673030150,"answer_id":75034891,"question_id":75034745,"body_markdown":"The `TestRecord` is a record which means all of its fields are final. So you cannto deserialise the JSON to this object using default configuration.\r\n\r\nI think you have two options to do that:\r\n1. Mark every field with JsonProperty\r\n```\r\n public record TestRecord(@JsonProperty(&quot;name&quot;) String name, @JsonUnwrapped Address address) {}\r\n public record Address(@JsonProperty(&quot;city&quot;) String city, @JsonProperty(&quot;state&quot;) String state) {}\r\n```\r\n\r\n2. Change field visibility level for Jackson using: \r\n```\r\n@JsonAutoDetect(fieldVisibility = JsonAutoDetect.Visibility.ANY)\r\npublic record TestRecord(String name, @JsonUnwrapped Address address) {}\r\n```","title":"Jackson: &quot;Can not set final&quot; when deserializing Java record with @JsonUnwrapped annotation","body":"<p>The <code>TestRecord</code> is a record which means all of its fields are final. So you cannto deserialise the JSON to this object using default configuration.</p>\n<p>I think you have two options to do that:</p>\n<ol>\n<li>Mark every field with JsonProperty</li>\n</ol>\n<pre><code> public record TestRecord(@JsonProperty(&quot;name&quot;) String name, @JsonUnwrapped Address address) {}\n public record Address(@JsonProperty(&quot;city&quot;) String city, @JsonProperty(&quot;state&quot;) String state) {}\n</code></pre>\n<ol start=\"2\">\n<li>Change field visibility level for Jackson using:</li>\n</ol>\n<pre><code>@JsonAutoDetect(fieldVisibility = JsonAutoDetect.Visibility.ANY)\npublic record TestRecord(String name, @JsonUnwrapped Address address) {}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":306540,"reputation":1801,"user_id":2695990,"display_name":"fascynacja"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677851613,"creation_date":1677851613,"answer_id":75627952,"question_id":75034745,"body_markdown":"You can try to create specific TestRecord constructor which takes 3 String values and then calls the canonical constructor of the TestRecord class. This new constructor needs to have @JsonCreator annotation in order to instruct Jackson to use it when deserializing.\r\n\r\n     public record Address(String city, String state) {   }\r\n    \r\n     public record TestRecord(String name, Address address) {\r\n    \r\n            @JsonCreator\r\n            public TestRecord(@JsonProperty(&quot;name&quot;) String name, @JsonProperty(&quot;city&quot;) String city, @JsonProperty(&quot;state&quot;) String state) {\r\n                this(name, new Address(city, state));\r\n            }\r\n    \r\n        }\r\n\r\n ","title":"Jackson: &quot;Can not set final&quot; when deserializing Java record with @JsonUnwrapped annotation","body":"<p>You can try to create specific TestRecord constructor which takes 3 String values and then calls the canonical constructor of the TestRecord class. This new constructor needs to have @JsonCreator annotation in order to instruct Jackson to use it when deserializing.</p>\n<pre><code> public record Address(String city, String state) {   }\n\n public record TestRecord(String name, Address address) {\n\n        @JsonCreator\n        public TestRecord(@JsonProperty(&quot;name&quot;) String name, @JsonProperty(&quot;city&quot;) String city, @JsonProperty(&quot;state&quot;) String state) {\n            this(name, new Address(city, state));\n        }\n\n    }\n</code></pre>\n"}],"owner":{"account_id":356037,"reputation":3541,"user_id":695318,"accept_rate":68,"display_name":"nogridbag"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1309,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1677851613,"creation_date":1673029242,"question_id":75034745,"body_markdown":"I have a simple Java record with a traditional POJO for the Address class. Serialization works as expected, but deserialization fails with the error message &quot;Can not set final&quot;\r\n\r\n    public record TestRecord(String name, @JsonUnwrapped Address address) {}\r\n\r\nSerializing this works fine.\r\n\r\n    Address address = new Address();\r\n    address.setCity(&quot;New York&quot;);\r\n    address.setState(&quot;NY&quot;);\r\n    TestRecord rec = new TestRecord(&quot;Bob&quot;, address);\r\n\r\n    JsonMapper jsonMapper = new JsonMapper();\r\n    jsonMapper.writeValueAsString(rec); // {&quot;name&quot;:&quot;Bob&quot;,&quot;city&quot;:&quot;New York&quot;,&quot;state&quot;:&quot;NY&quot;}\r\n\r\nBut deserializing throws an exception:\r\n\r\n    @Test\r\n    void should_DeserializeUnwrappedRecord() throws JsonProcessingException {\r\n\r\n        Address address = new Address();\r\n        address.setCity(&quot;New York&quot;);\r\n        address.setState(&quot;NY&quot;);\r\n        TestRecord expectedRecord = new TestRecord(&quot;Bob&quot;, address);\r\n\r\n        String json = &quot;&quot;&quot;\r\n                {&quot;name&quot;:&quot;Bob&quot;,&quot;city&quot;:&quot;New York&quot;,&quot;state&quot;:&quot;NY&quot;}&quot;&quot;&quot;;\r\n\r\n        JsonMapper jsonMapper = new JsonMapper();\r\n        TestRecord actualValue = jsonMapper.readValue(json, TestRecord.class);\r\n        assertEquals(expectedRecord, actualValue);\r\n    }\r\n\r\nException:\r\n\r\n        com.fasterxml.jackson.databind.JsonMappingException: Can not set final org.example.AppTest$Address field org.example.AppTest$TestRecord.address to org.example.AppTest$Address\r\n     at [Source: UNKNOWN; byte offset: #UNKNOWN]\r\n    \r\n    \tat com.fasterxml.jackson.databind.JsonMappingException.from(JsonMappingException.java:276)\r\n    Caused by: java.lang.IllegalAccessException: Can not set final org.example.AppTest$Address field org.example.AppTest$TestRecord.address to org.example.AppTest$Address\r\n    \tat java.base/jdk.internal.reflect.UnsafeFieldAccessorImpl.throwFinalFieldIllegalAccessException(UnsafeFieldAccessorImpl.java:76)\r\n    \tat java.base/jdk.internal.reflect.UnsafeFieldAccessorImpl.throwFinalFieldIllegalAccessException(UnsafeFieldAccessorImpl.java:80)\r\n    \tat java.base/jdk.internal.reflect.UnsafeQualifiedObjectFieldAccessorImpl.set(UnsafeQualifiedObjectFieldAccessorImpl.java:79)\r\n    \tat java.base/java.lang.reflect.Field.set(Field.java:799)\r\n\r\n\r\nIf I were to change TestRecord to a plain Java class it works fine.","title":"Jackson: &quot;Can not set final&quot; when deserializing Java record with @JsonUnwrapped annotation","body":"<p>I have a simple Java record with a traditional POJO for the Address class. Serialization works as expected, but deserialization fails with the error message &quot;Can not set final&quot;</p>\n<pre><code>public record TestRecord(String name, @JsonUnwrapped Address address) {}\n</code></pre>\n<p>Serializing this works fine.</p>\n<pre><code>Address address = new Address();\naddress.setCity(&quot;New York&quot;);\naddress.setState(&quot;NY&quot;);\nTestRecord rec = new TestRecord(&quot;Bob&quot;, address);\n\nJsonMapper jsonMapper = new JsonMapper();\njsonMapper.writeValueAsString(rec); // {&quot;name&quot;:&quot;Bob&quot;,&quot;city&quot;:&quot;New York&quot;,&quot;state&quot;:&quot;NY&quot;}\n</code></pre>\n<p>But deserializing throws an exception:</p>\n<pre><code>@Test\nvoid should_DeserializeUnwrappedRecord() throws JsonProcessingException {\n\n    Address address = new Address();\n    address.setCity(&quot;New York&quot;);\n    address.setState(&quot;NY&quot;);\n    TestRecord expectedRecord = new TestRecord(&quot;Bob&quot;, address);\n\n    String json = &quot;&quot;&quot;\n            {&quot;name&quot;:&quot;Bob&quot;,&quot;city&quot;:&quot;New York&quot;,&quot;state&quot;:&quot;NY&quot;}&quot;&quot;&quot;;\n\n    JsonMapper jsonMapper = new JsonMapper();\n    TestRecord actualValue = jsonMapper.readValue(json, TestRecord.class);\n    assertEquals(expectedRecord, actualValue);\n}\n</code></pre>\n<p>Exception:</p>\n<pre><code>    com.fasterxml.jackson.databind.JsonMappingException: Can not set final org.example.AppTest$Address field org.example.AppTest$TestRecord.address to org.example.AppTest$Address\n at [Source: UNKNOWN; byte offset: #UNKNOWN]\n\n    at com.fasterxml.jackson.databind.JsonMappingException.from(JsonMappingException.java:276)\nCaused by: java.lang.IllegalAccessException: Can not set final org.example.AppTest$Address field org.example.AppTest$TestRecord.address to org.example.AppTest$Address\n    at java.base/jdk.internal.reflect.UnsafeFieldAccessorImpl.throwFinalFieldIllegalAccessException(UnsafeFieldAccessorImpl.java:76)\n    at java.base/jdk.internal.reflect.UnsafeFieldAccessorImpl.throwFinalFieldIllegalAccessException(UnsafeFieldAccessorImpl.java:80)\n    at java.base/jdk.internal.reflect.UnsafeQualifiedObjectFieldAccessorImpl.set(UnsafeQualifiedObjectFieldAccessorImpl.java:79)\n    at java.base/java.lang.reflect.Field.set(Field.java:799)\n</code></pre>\n<p>If I were to change TestRecord to a plain Java class it works fine.</p>\n"},{"tags":["java","spring-boot","spring-mvc","spring-security","jwt"],"comments":[{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":2,"creation_date":1677876280,"post_id":75627422,"comment_id":133430642,"body_markdown":"most common is to NOT write a custom `JwtAuthenticationFilter` since spring security already has one built in, as it implements the `resource server` part of the oauth2 rfc, that handles JWTs. So writing your own filter is unecassary, and bad practice. If you actually use the built in functionality of spring security you will get error handling automagically.","body":"most common is to NOT write a custom <code>JwtAuthenticationFilter</code> since spring security already has one built in, as it implements the <code>resource server</code> part of the oauth2 rfc, that handles JWTs. So writing your own filter is unecassary, and bad practice. If you actually use the built in functionality of spring security you will get error handling automagically."},{"owner":{"account_id":3565741,"reputation":247,"user_id":2977317,"display_name":"musicinmusic"},"score":0,"creation_date":1677931542,"post_id":75627422,"comment_id":133436962,"body_markdown":"@Toerktumlare thanks, but how would I be able to work with JWT then? In my overriden doFilterInternal I&#39;m checking if the request contains a valid JWT token in the Authorization header. \n\nAlso, would I just use some other extension of OncePerRequestFilter class with other implementation of doFilterInternal and put its bean here?\n\n.addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class)\n\nIf there&#39;s a working example somewhere or more detailed resources please point me to it. Thanks again","body":"@Toerktumlare thanks, but how would I be able to work with JWT then? In my overriden doFilterInternal I&#39;m checking if the request contains a valid JWT token in the Authorization header.   Also, would I just use some other extension of OncePerRequestFilter class with other implementation of doFilterInternal and put its bean here?  .addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class)  If there&#39;s a working example somewhere or more detailed resources please point me to it. Thanks again"},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1677935259,"post_id":75627422,"comment_id":133437483,"body_markdown":"before asking on stack overflow i suggest you actually google for the spring security documentation and do a search for just `resource server`. If someone tells you what you should do and you dont understand, you should use google https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/index.html us writing an answer for you and you dont understand the answer, means that you havn&#39;t done proper research before asking. so also please read this https://meta.stackoverflow.com/questions/261592/how-much-research-effort-is-expected-of-stack-overflow-users","body":"before asking on stack overflow i suggest you actually google for the spring security documentation and do a search for just <code>resource server</code>. If someone tells you what you should do and you dont understand, you should use google <a href=\"https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/index.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/reference/servlet/oauth2/&hellip;</a> us writing an answer for you and you dont understand the answer, means that you havn&#39;t done proper research before asking. so also please read this <a href=\"https://meta.stackoverflow.com/questions/261592/how-much-research-effort-is-expected-of-stack-overflow-users\" title=\"how much research effort is expected of stack overflow users\">meta.stackoverflow.com/questions/261592/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1677851310,"creation_date":1677851310,"answer_id":75627902,"question_id":75627422,"body_markdown":"Basically it is because spring-security and spring-mvc has different mechanism to handle the exception. \r\n\r\nSpring Security inserts many Filters to validate the HTTP request before the request really hit and processed by the spring-mvc Servlet (i.e `DispatcherServlet`) (see [this][1] for details)\r\n\r\nAnd `@ExceptionHandler` is exception handling mechanism of spring-mvc and so it will only work if exception occurs during spring-mvc process the request.\r\n\r\nNow your request already fail and return in the `JwtAuthenticationFilter` before it has chance to be processed by spring-mvc and that &#39;s why `@ExceptionHandler` does not work.\r\n\r\n\r\nHow to fix it depends on your `JwtAuthenticationFilter` implementation . I usually delegate to an `AuthenticationEntryPoint` to process the exception if the authentication fail. In `AuthenticationEntryPoint`, use Jackson to prepare the error response JSON and return.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/servlet/architecture.html#servlet-filters-review","title":"Unable to catch MalformedJwtException in Spring Boot with custom exception handler","body":"<p>Basically it is because spring-security and spring-mvc has different mechanism to handle the exception.</p>\n<p>Spring Security inserts many Filters to validate the HTTP request before the request really hit and processed by the spring-mvc Servlet (i.e <code>DispatcherServlet</code>) (see <a href=\"https://docs.spring.io/spring-security/reference/servlet/architecture.html#servlet-filters-review\" rel=\"nofollow noreferrer\">this</a> for details)</p>\n<p>And <code>@ExceptionHandler</code> is exception handling mechanism of spring-mvc and so it will only work if exception occurs during spring-mvc process the request.</p>\n<p>Now your request already fail and return in the <code>JwtAuthenticationFilter</code> before it has chance to be processed by spring-mvc and that 's why <code>@ExceptionHandler</code> does not work.</p>\n<p>How to fix it depends on your <code>JwtAuthenticationFilter</code> implementation . I usually delegate to an <code>AuthenticationEntryPoint</code> to process the exception if the authentication fail. In <code>AuthenticationEntryPoint</code>, use Jackson to prepare the error response JSON and return.</p>\n"}],"owner":{"account_id":3565741,"reputation":247,"user_id":2977317,"display_name":"musicinmusic"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":591,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75627902,"answer_count":1,"score":1,"last_activity_date":1677851417,"creation_date":1677848589,"question_id":75627422,"body_markdown":"I&#39;m using Spring Boot 3.0.3, Java 17 and io.jsonwebtoken v0.11.5. I&#39;ve implemented Spring Security and it works great. One thing that I would like to customize is a JSON response when there&#39;s no jwt token passed or when there&#39;s wrong jwt token passed, I&#39;m just getting an empty JSON response with Status 403 forbidden. I&#39;d like to add a text to that message.\r\n\r\nSo I am trying to catch a MalformedJwtException in my custom exception handler, but it&#39;s not being caught. \r\n\r\nI have a JwtAuthenticationFilter class which extracts the JWT token from the request header and validates it. If the token is not valid, it throws a MalformedJwtException. I tried using try-catch statement and throwing my custom exception but it doesn&#39;t get caught either.\r\n\r\nHere is the relevant code from JwtAuthenticationFilter (method doFilterInternal):\r\n\r\n    try {\r\n      jwt = authHeader.substring(authHeaderStartsWith.length());\r\n      userEmail = jwtService.extractUsername(jwt);\r\n    } catch (Exception ex) {\r\n      throw new CustomJWTException(&quot;To access this resource, you must provide a valid security token&quot;, HttpStatus.UNAUTHORIZED);\r\n    }\r\n\r\nAnd here is my custom exception handler:\r\n\r\n\r\n    @ControllerAdvice\r\n    public class GlobalExceptionHandler {\r\n      @ExceptionHandler(value = {CustomException.class})\r\n      public ResponseEntity&lt;ResponseWrapper&gt; handleCustomException(CustomException ex) {\r\n        var response = new ResponseWrapper(ex.getHttpStatus(), ex.getMessage());\r\n       return ResponseEntity.status(ex.getHttpStatus()).body(response);\r\n      }\r\n    \r\n      @ExceptionHandler(value = {CustomJWTException.class})\r\n      public ResponseEntity&lt;ResponseWrapper&gt; handleCustomJWTException(CustomJWTException ex) {\r\n        var message = ex.getMessage();\r\n    \r\n        if (message == null || message.isEmpty()) {\r\n          message = &quot;To access this resource, you must provide a valid security token&quot;;\r\n        }\r\n    \r\n        var response = new ResponseWrapper(HttpStatus.UNAUTHORIZED, message);\r\n        return ResponseEntity.status(HttpStatus.UNAUTHORIZED).body(response);\r\n      }\r\n    \r\n      @ExceptionHandler(value = {MalformedJwtException.class})\r\n      public ResponseEntity&lt;ResponseWrapper&gt; handleMalformedJwtException(MalformedJwtException ex) {\r\n        var message = ex.getMessage();\r\n    \r\n        if (message == null || message.isEmpty()) {\r\n          message = &quot;To access this resource, you must provide a valid security token&quot;;\r\n        }\r\n    \r\n        var response = new ResponseWrapper(HttpStatus.UNAUTHORIZED, message);\r\n        return ResponseEntity.status(HttpStatus.UNAUTHORIZED).body(response);\r\n      }\r\n    }\r\n\r\n\r\nI know for sure that the code in the doFilterInternal method gets executed and works perfectly. Also my CustomJWTException is also getting thrown (even shown in the Debug console) but for some reason it doesn&#39;t end up in my exception handler.\\\r\n\r\nI also know for a fact that my exception handler works because I&#39;m throwing CustomException is some other service and it works great (the exceptioin handler catches it).\r\n\r\nI&#39;ve tried tweaking @Order(Ordered.HIGHEST_PRECEDENCE) but nothing changed. \r\n\r\nHow can I achieve the desired result?","title":"Unable to catch MalformedJwtException in Spring Boot with custom exception handler","body":"<p>I'm using Spring Boot 3.0.3, Java 17 and io.jsonwebtoken v0.11.5. I've implemented Spring Security and it works great. One thing that I would like to customize is a JSON response when there's no jwt token passed or when there's wrong jwt token passed, I'm just getting an empty JSON response with Status 403 forbidden. I'd like to add a text to that message.</p>\n<p>So I am trying to catch a MalformedJwtException in my custom exception handler, but it's not being caught.</p>\n<p>I have a JwtAuthenticationFilter class which extracts the JWT token from the request header and validates it. If the token is not valid, it throws a MalformedJwtException. I tried using try-catch statement and throwing my custom exception but it doesn't get caught either.</p>\n<p>Here is the relevant code from JwtAuthenticationFilter (method doFilterInternal):</p>\n<pre><code>try {\n  jwt = authHeader.substring(authHeaderStartsWith.length());\n  userEmail = jwtService.extractUsername(jwt);\n} catch (Exception ex) {\n  throw new CustomJWTException(&quot;To access this resource, you must provide a valid security token&quot;, HttpStatus.UNAUTHORIZED);\n}\n</code></pre>\n<p>And here is my custom exception handler:</p>\n<pre><code>@ControllerAdvice\npublic class GlobalExceptionHandler {\n  @ExceptionHandler(value = {CustomException.class})\n  public ResponseEntity&lt;ResponseWrapper&gt; handleCustomException(CustomException ex) {\n    var response = new ResponseWrapper(ex.getHttpStatus(), ex.getMessage());\n   return ResponseEntity.status(ex.getHttpStatus()).body(response);\n  }\n\n  @ExceptionHandler(value = {CustomJWTException.class})\n  public ResponseEntity&lt;ResponseWrapper&gt; handleCustomJWTException(CustomJWTException ex) {\n    var message = ex.getMessage();\n\n    if (message == null || message.isEmpty()) {\n      message = &quot;To access this resource, you must provide a valid security token&quot;;\n    }\n\n    var response = new ResponseWrapper(HttpStatus.UNAUTHORIZED, message);\n    return ResponseEntity.status(HttpStatus.UNAUTHORIZED).body(response);\n  }\n\n  @ExceptionHandler(value = {MalformedJwtException.class})\n  public ResponseEntity&lt;ResponseWrapper&gt; handleMalformedJwtException(MalformedJwtException ex) {\n    var message = ex.getMessage();\n\n    if (message == null || message.isEmpty()) {\n      message = &quot;To access this resource, you must provide a valid security token&quot;;\n    }\n\n    var response = new ResponseWrapper(HttpStatus.UNAUTHORIZED, message);\n    return ResponseEntity.status(HttpStatus.UNAUTHORIZED).body(response);\n  }\n}\n</code></pre>\n<p>I know for sure that the code in the doFilterInternal method gets executed and works perfectly. Also my CustomJWTException is also getting thrown (even shown in the Debug console) but for some reason it doesn't end up in my exception handler.\\</p>\n<p>I also know for a fact that my exception handler works because I'm throwing CustomException is some other service and it works great (the exceptioin handler catches it).</p>\n<p>I've tried tweaking @Order(Ordered.HIGHEST_PRECEDENCE) but nothing changed.</p>\n<p>How can I achieve the desired result?</p>\n"},{"tags":["java","docker","spring-boot","keycloak","thorntail"],"answers":[{"tags":[],"owner":{"account_id":13450538,"reputation":11992,"user_id":9705485,"display_name":"Ryan Dawson"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1534494992,"creation_date":1534425995,"answer_id":51878212,"question_id":51877246,"body_markdown":"I think your problem is `auth-server-url: http://localhost:8180/auth`. That `localhost` effectively has a different meaning when your app is running inside a docker container. \n\nInside the container it needs to be the name of the container i.e. `keycloak`. This is a bit awkward as when you connect to keycloak from your host machine you&#39;d want to use `localhost` but the token issuer url needs to match to the url on which the token was requested (otherwise the token is rejected) so you end up having to put `keycloak` into your etc/hosts file. \n\nYou are in good company with this problem - I&#39;ve encountered this [working with Activiti][2]. And you can find the [JHipster project dealing with it in the same way][1] - they say:\n\n \n\n&gt; To make things work, you’ll need to make sure to add the following to your hosts file (`/etc/hosts` on Mac/Linux, `c:\\Windows\\System32\\Drivers\\etc\\hosts` on Windows).\n&gt;\n&gt;`127.0.0.1 keycloak`\n&gt;\n&gt;This is because you will access your application with a browser on your machine (which name is `localhost`, or `127.0.0.1`), but inside Docker it will run in its own container, which name is `keycloak`.\n\n\n  [1]: https://www.jhipster.tech/docker-compose/#7\n  [2]: https://github.com/Activiti/activiti-cloud-examples/tree/7-201712-EA","title":"Docker (Spring Boot or Thorntail) and Keycloak","body":"<p>I think your problem is <code>auth-server-url: http://localhost:8180/auth</code>. That <code>localhost</code> effectively has a different meaning when your app is running inside a docker container.</p>\n<p>Inside the container it needs to be the name of the container i.e. <code>keycloak</code>. This is a bit awkward as when you connect to keycloak from your host machine you'd want to use <code>localhost</code> but the token issuer url needs to match to the url on which the token was requested (otherwise the token is rejected) so you end up having to put <code>keycloak</code> into your etc/hosts file.</p>\n<p>You are in good company with this problem - I've encountered this <a href=\"https://github.com/Activiti/activiti-cloud-examples/tree/7-201712-EA\" rel=\"noreferrer\">working with Activiti</a>. And you can find the <a href=\"https://www.jhipster.tech/docker-compose/#7\" rel=\"noreferrer\">JHipster project dealing with it in the same way</a> - they say:</p>\n<blockquote>\n<p>To make things work, you’ll need to make sure to add the following to your hosts file (<code>/etc/hosts</code> on Mac/Linux, <code>c:\\Windows\\System32\\Drivers\\etc\\hosts</code> on Windows).</p>\n<p><code>127.0.0.1 keycloak</code></p>\n<p>This is because you will access your application with a browser on your machine (which name is <code>localhost</code>, or <code>127.0.0.1</code>), but inside Docker it will run in its own container, which name is <code>keycloak</code>.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":6203098,"reputation":487,"user_id":4832160,"accept_rate":33,"display_name":"xProgramery"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1543852150,"creation_date":1543852150,"answer_id":53597218,"question_id":51877246,"body_markdown":"Thank you for the question and the answer! I was struggling with this for quite sometime and getting connection refused error. The reason was because I was mapping 8180:8080, and as soon as I mapped **8080:8080** everything started working! Thanks again!","title":"Docker (Spring Boot or Thorntail) and Keycloak","body":"<p>Thank you for the question and the answer! I was struggling with this for quite sometime and getting connection refused error. The reason was because I was mapping 8180:8080, and as soon as I mapped <strong>8080:8080</strong> everything started working! Thanks again!</p>\n"},{"tags":[],"owner":{"account_id":27511027,"reputation":1,"user_id":20992937,"display_name":"Sparckmen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677851041,"creation_date":1677851004,"answer_id":75627849,"question_id":51877246,"body_markdown":"If you want to change exposed port you need to modify keycloak config in docker-compose:\r\n\r\n      KC_HTTP_PORT: port_you_wanted\r\n      KC_HTTPS_PORT: port_you_wanted\r\n    ports: \r\n     - &quot;port_you_wanted:port_you_wanted&quot;\r\n","title":"Docker (Spring Boot or Thorntail) and Keycloak","body":"<p>If you want to change exposed port you need to modify keycloak config in docker-compose:</p>\n<pre><code>  KC_HTTP_PORT: port_you_wanted\n  KC_HTTPS_PORT: port_you_wanted\nports: \n - &quot;port_you_wanted:port_you_wanted&quot;\n</code></pre>\n"}],"owner":{"account_id":9362065,"reputation":223,"user_id":11091154,"display_name":"Dagger87"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6312,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":51878212,"answer_count":3,"score":6,"last_activity_date":1677851041,"creation_date":1534422935,"question_id":51877246,"body_markdown":"i have a Problem Running Spring Boot and Keycloak both in docker containers.\r\n\r\nI started with Keycloak with mysql as db running in docker.\r\n\r\n    services:\r\n      mysql:\r\n        image: mysql:5.7\r\n        container_name: mysql\r\n        volumes:\r\n          - mysql_data:/var/lib/mysql\r\n        environment:\r\n          MYSQL_ROOT_PASSWORD: root\r\n          MYSQL_DATABASE: keycloak\r\n          MYSQL_USER: keycloak\r\n          MYSQL_PASSWORD: password\r\n        networks:\r\n          - testNetwork\r\n    \r\n      keycloak:\r\n        image: jboss/keycloak\r\n        container_name: keycloak\r\n        restart: on-failure\r\n        volumes:\r\n          - ./config:/config/\r\n        environment:\r\n          DB_VENDOR: MYSQL\r\n          DB_ADDR: mysql\r\n          DB_DATABASE: keycloak\r\n          DB_USER: keycloak\r\n          DB_PASSWORD: password\r\n          KEYCLOAK_USER: xxx\r\n          KEYCLOAK_PASSWORD: yyy\r\n          KEYCLOAK_IMPORT_REALM: /keycloak/import/realm-import.json\r\n        ports:\r\n          - 8180:8080\r\n        depends_on:\r\n          - mysql\r\n        networks:\r\n          - testNetwork\r\n\r\n\r\nThen i added my realm (SpringBootKeycloak), my client (testclient), and a user with role &#39;user&#39;.\r\nAfter that i added spring-security to my Spring-boot-application. And edited my application.yml\r\n\r\n    spring:\r\n      main:\r\n        banner-mode: &#39;off&#39;\r\n      application:\r\n        name: testclient\r\n        version: @project.version@\r\n      jpa:\r\n        hibernate:\r\n          ddl-auto: create\r\n      datasource:\r\n        url: jdbc:h2:mem:testclient;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE\r\n        username: xxx\r\n        password: xxx\r\n    keycloak:\r\n      auth-server-url: http://localhost:8180/auth\r\n      realm: SpringBootKeycloak\r\n      resource: testclient\r\n      public-client: true\r\n      principal-attribute: preferred_username\r\n      security-constraints:\r\n        - authRoles:\r\n          - user\r\n          securityCollections:\r\n            - patterns:\r\n              - /*\r\n    server:\r\n      port: ${port:8090}\r\n      rest:\r\n        path: testclient\r\n\r\naccoring to that i added my SecurityConfig:\r\n\r\n      /**\r\n       * Secure appropriate endpoints\r\n       */\r\n      @Override\r\n      protected void configure(HttpSecurity http) throws Exception {\r\n        super.configure(http);\r\n        http.authorizeRequests()\r\n            .antMatchers(&quot;/*&quot;).hasRole(&quot;user&quot;) // only user with role user are allowed to access\r\n            .anyRequest().permitAll();\r\n      }\r\n\r\nRunning my SpringBoot-Application locally is working fine.\r\nI have to login with keycloak and get redirected to localhost:8090.\r\nBut when i add my SpringBoot-Application to my docker-compose and start it in a container i get still to keycloak for login, but when i should redirect i get a 403.\r\n\r\n      testclient:\r\n        image: testclient\r\n        container_name: testclient\r\n        environment:\r\n          JAVA_OPTS: &quot;-agentlib:jdwp=transport=dt_socket,address=5005,server=y,suspend=n&quot;\r\n        build:\r\n          context: testclient-application\r\n        ports:\r\n          - 8090:8090\r\n          - 5006:5005\r\n        networks:\r\n          - testNetwork\r\n\r\nwith following container log:\r\n\r\n    {&quot;@timestamp&quot;:&quot;2018-08-16T11:50:11.530+00:00&quot;,&quot;@version&quot;:&quot;1&quot;,&quot;message&quot;:&quot;failed to turn code into token&quot;,&quot;logger_name&quot;:&quot;org.keycloak.adapters.OAuthRequestAuthenticator&quot;,&quot;thread_name&quot;:&quot;http-nio-8090-exec-6&quot;,&quot;level&quot;:&quot;ERROR&quot;,&quot;level_value&quot;:40000,&quot;stack_trace&quot;:&quot;java.net.ConnectException: Connection refused (Connection refused)\\n\\tat java.net.PlainSocketImpl.socketConnect(Native Method)\\n\\tat java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)\\n\\tat java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)\\n\\tat java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)\\n\\tat java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\\n\\tat java.net.Socket.connect(Socket.java:589)\\n\\tat org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:121)\\n\\tat org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:180)\\n\\tat org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:144)\\n\\tat org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:134)\\n\\tat org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:610)\\n\\tat org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:445)\\n\\tat org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:835)\\n\\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)\\n\\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:108)\\n\\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)\\n\\tat org.keycloak.adapters.ServerRequest.invokeAccessCodeToToken(ServerRequest.java:111)\\n\\tat org.keycloak.adapters.OAuthRequestAuthenticator.resolveCode(OAuthRequestAuthenticator.java:336)\\n\\tat org.keycloak.adapters.OAuthRequestAuthenticator.authenticate(OAuthRequestAuthenticator.java:281)\\n\\tat org.keycloak.adapters.RequestAuthenticator.authenticate(RequestAuthenticator.java:139)\\n\\tat org.keycloak.adapters.tomcat.AbstractKeycloakAuthenticatorValve.authenticateInternal(AbstractKeycloakAuthenticatorValve.java:203)\\n\\tat org.keycloak.adapters.tomcat.KeycloakAuthenticatorValve.authenticate(KeycloakAuthenticatorValve.java:50)\\n\\tat org.keycloak.adapters.tomcat.KeycloakAuthenticatorValve.doAuthenticate(KeycloakAuthenticatorValve.java:57)\\n\\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:575)\\n\\tat org.keycloak.adapters.tomcat.AbstractKeycloakAuthenticatorValve.invoke(AbstractKeycloakAuthenticatorValve.java:181)\\n\\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)\\n\\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)\\n\\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)\\n\\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)\\n\\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:800)\\n\\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\\n\\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:800)\\n\\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1471)\\n\\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\\n\\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\\n\\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\\n\\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\\n\\tat java.lang.Thread.run(Thread.java:748)\\n&quot;,&quot;app&quot;:&quot;testclient&quot;,&quot;version&quot;:&quot;1.0.0-SNAPSHOT&quot;}\r\n\r\nI can&#39;t figure out how to solve this...\r\n\r\nEDIT 1: \r\nOne more information: I&#39;m running docker on Windows.\r\n\r\n**EDIT 2: A SOLUTION**\r\n\r\nMy Working solution contains following:\r\n\r\n1. Step, add keycloak as hosts\r\n\r\n&gt; To make things work, you’ll need to make sure to add the following to your hosts file (/etc/hosts on Mac/Linux, c:\\Windows\\System32\\Drivers\\etc\\hosts on Windows).\r\n\r\n&gt;    127.0.0.1 keycloak\r\n\r\n&gt;    This is because you will access your application with a browser on your machine (which name is localhost, or 127.0.0.1), but inside Docker it will run in its own container, which name is keycloak.\r\n\r\n2. Step\r\n\r\nInner Docker port and published port needs to be same:\r\n\r\n    services:\r\n      mysql:\r\n        image: mysql:5.7\r\n        container_name: mysql\r\n        volumes:\r\n          - mysql_data:/var/lib/mysql\r\n        environment:\r\n          MYSQL_ROOT_PASSWORD: root\r\n          MYSQL_DATABASE: keycloak\r\n          MYSQL_USER: keycloak\r\n          MYSQL_PASSWORD: password\r\n        networks:\r\n          - testNetwork\r\n    \r\n      keycloak:\r\n        image: jboss/keycloak\r\n        container_name: keycloak\r\n        restart: on-failure\r\n        volumes:\r\n          - ./config:/config/\r\n        environment:\r\n          DB_VENDOR: MYSQL\r\n          DB_ADDR: mysql\r\n          DB_DATABASE: keycloak\r\n          DB_USER: keycloak\r\n          DB_PASSWORD: password\r\n          KEYCLOAK_USER: xxx\r\n          KEYCLOAK_PASSWORD: yyy\r\n          KEYCLOAK_IMPORT_REALM: /keycloak/import/realm-import.json\r\n        ports:\r\n          - 8080:8080   &lt;--- edited\r\n        depends_on:\r\n          - mysql\r\n        networks:\r\n          - testNetwork\r\n\r\nStep 3: keycloak definition in application.yml for Spring boot edited auth-server-url:\r\n\r\n        keycloak:\r\n      realm: SpringBootKeycloak\r\n      auth-server-url: http://keycloak:8080/auth   &lt;--- edited\r\n      resource: testclient\r\n      public-client: true\r\n      security-constraints:\r\n        - authRoles:\r\n          - user\r\n          securityCollections:\r\n            - patterns:\r\n              - /*\r\n      ssl-required: external\r\n      confidential-port: 0\r\n\r\nThe ugly thing coming with this solution:\r\nYou cant map your Docker Port onto another port to access from url.\r\n  ports: \r\n    - 8080:8080\r\ni spend a lot of time testing other combinations, with the result that the access url port has to be the same as inner docker port (8080 in my case).\r\n\r\nEDIT 4:\r\n\r\n***Same thing is working with Thorntail.***\r\n\r\n\r\nTo change the port for Keycloak add...\r\n\r\n    environment:\r\n      JAVA_OPTS: &quot;-Djboss.socket.binding.port-offset=10 -Xms64m -Xmx512m -XX:MetaspaceSize=96M -XX:MaxMetaspaceSize=256m\r\n      -Djava.net.preferIPv4Stack=true -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true&quot;\r\n\r\n... for keycloak in docker-compose.\r\n-Djboss.socket.binding.port-offset=10 sets default port (8080) + offset (10)\r\nThe rest are default values for keycloak.\r\nDon&#39;t forget to edit &quot;ports&quot; and &quot;auth-server-url&quot;\r\n","title":"Docker (Spring Boot or Thorntail) and Keycloak","body":"<p>i have a Problem Running Spring Boot and Keycloak both in docker containers.</p>\n\n<p>I started with Keycloak with mysql as db running in docker.</p>\n\n<pre><code>services:\n  mysql:\n    image: mysql:5.7\n    container_name: mysql\n    volumes:\n      - mysql_data:/var/lib/mysql\n    environment:\n      MYSQL_ROOT_PASSWORD: root\n      MYSQL_DATABASE: keycloak\n      MYSQL_USER: keycloak\n      MYSQL_PASSWORD: password\n    networks:\n      - testNetwork\n\n  keycloak:\n    image: jboss/keycloak\n    container_name: keycloak\n    restart: on-failure\n    volumes:\n      - ./config:/config/\n    environment:\n      DB_VENDOR: MYSQL\n      DB_ADDR: mysql\n      DB_DATABASE: keycloak\n      DB_USER: keycloak\n      DB_PASSWORD: password\n      KEYCLOAK_USER: xxx\n      KEYCLOAK_PASSWORD: yyy\n      KEYCLOAK_IMPORT_REALM: /keycloak/import/realm-import.json\n    ports:\n      - 8180:8080\n    depends_on:\n      - mysql\n    networks:\n      - testNetwork\n</code></pre>\n\n<p>Then i added my realm (SpringBootKeycloak), my client (testclient), and a user with role 'user'.\nAfter that i added spring-security to my Spring-boot-application. And edited my application.yml</p>\n\n<pre><code>spring:\n  main:\n    banner-mode: 'off'\n  application:\n    name: testclient\n    version: @project.version@\n  jpa:\n    hibernate:\n      ddl-auto: create\n  datasource:\n    url: jdbc:h2:mem:testclient;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE\n    username: xxx\n    password: xxx\nkeycloak:\n  auth-server-url: http://localhost:8180/auth\n  realm: SpringBootKeycloak\n  resource: testclient\n  public-client: true\n  principal-attribute: preferred_username\n  security-constraints:\n    - authRoles:\n      - user\n      securityCollections:\n        - patterns:\n          - /*\nserver:\n  port: ${port:8090}\n  rest:\n    path: testclient\n</code></pre>\n\n<p>accoring to that i added my SecurityConfig:</p>\n\n<pre><code>  /**\n   * Secure appropriate endpoints\n   */\n  @Override\n  protected void configure(HttpSecurity http) throws Exception {\n    super.configure(http);\n    http.authorizeRequests()\n        .antMatchers(\"/*\").hasRole(\"user\") // only user with role user are allowed to access\n        .anyRequest().permitAll();\n  }\n</code></pre>\n\n<p>Running my SpringBoot-Application locally is working fine.\nI have to login with keycloak and get redirected to localhost:8090.\nBut when i add my SpringBoot-Application to my docker-compose and start it in a container i get still to keycloak for login, but when i should redirect i get a 403.</p>\n\n<pre><code>  testclient:\n    image: testclient\n    container_name: testclient\n    environment:\n      JAVA_OPTS: \"-agentlib:jdwp=transport=dt_socket,address=5005,server=y,suspend=n\"\n    build:\n      context: testclient-application\n    ports:\n      - 8090:8090\n      - 5006:5005\n    networks:\n      - testNetwork\n</code></pre>\n\n<p>with following container log:</p>\n\n<pre><code>{\"@timestamp\":\"2018-08-16T11:50:11.530+00:00\",\"@version\":\"1\",\"message\":\"failed to turn code into token\",\"logger_name\":\"org.keycloak.adapters.OAuthRequestAuthenticator\",\"thread_name\":\"http-nio-8090-exec-6\",\"level\":\"ERROR\",\"level_value\":40000,\"stack_trace\":\"java.net.ConnectException: Connection refused (Connection refused)\\n\\tat java.net.PlainSocketImpl.socketConnect(Native Method)\\n\\tat java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)\\n\\tat java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)\\n\\tat java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)\\n\\tat java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\\n\\tat java.net.Socket.connect(Socket.java:589)\\n\\tat org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:121)\\n\\tat org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:180)\\n\\tat org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:144)\\n\\tat org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:134)\\n\\tat org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:610)\\n\\tat org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:445)\\n\\tat org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:835)\\n\\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)\\n\\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:108)\\n\\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)\\n\\tat org.keycloak.adapters.ServerRequest.invokeAccessCodeToToken(ServerRequest.java:111)\\n\\tat org.keycloak.adapters.OAuthRequestAuthenticator.resolveCode(OAuthRequestAuthenticator.java:336)\\n\\tat org.keycloak.adapters.OAuthRequestAuthenticator.authenticate(OAuthRequestAuthenticator.java:281)\\n\\tat org.keycloak.adapters.RequestAuthenticator.authenticate(RequestAuthenticator.java:139)\\n\\tat org.keycloak.adapters.tomcat.AbstractKeycloakAuthenticatorValve.authenticateInternal(AbstractKeycloakAuthenticatorValve.java:203)\\n\\tat org.keycloak.adapters.tomcat.KeycloakAuthenticatorValve.authenticate(KeycloakAuthenticatorValve.java:50)\\n\\tat org.keycloak.adapters.tomcat.KeycloakAuthenticatorValve.doAuthenticate(KeycloakAuthenticatorValve.java:57)\\n\\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:575)\\n\\tat org.keycloak.adapters.tomcat.AbstractKeycloakAuthenticatorValve.invoke(AbstractKeycloakAuthenticatorValve.java:181)\\n\\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)\\n\\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)\\n\\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)\\n\\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)\\n\\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:800)\\n\\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\\n\\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:800)\\n\\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1471)\\n\\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\\n\\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\\n\\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\\n\\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\\n\\tat java.lang.Thread.run(Thread.java:748)\\n\",\"app\":\"testclient\",\"version\":\"1.0.0-SNAPSHOT\"}\n</code></pre>\n\n<p>I can't figure out how to solve this...</p>\n\n<p>EDIT 1: \nOne more information: I'm running docker on Windows.</p>\n\n<p><strong>EDIT 2: A SOLUTION</strong></p>\n\n<p>My Working solution contains following:</p>\n\n<ol>\n<li>Step, add keycloak as hosts</li>\n</ol>\n\n<blockquote>\n  <p>To make things work, you’ll need to make sure to add the following to your hosts file (/etc/hosts on Mac/Linux, c:\\Windows\\System32\\Drivers\\etc\\hosts on Windows).</p>\n  \n  <p>127.0.0.1 keycloak</p>\n  \n  <p>This is because you will access your application with a browser on your machine (which name is localhost, or 127.0.0.1), but inside Docker it will run in its own container, which name is keycloak.</p>\n</blockquote>\n\n<ol start=\"2\">\n<li>Step</li>\n</ol>\n\n<p>Inner Docker port and published port needs to be same:</p>\n\n<pre><code>services:\n  mysql:\n    image: mysql:5.7\n    container_name: mysql\n    volumes:\n      - mysql_data:/var/lib/mysql\n    environment:\n      MYSQL_ROOT_PASSWORD: root\n      MYSQL_DATABASE: keycloak\n      MYSQL_USER: keycloak\n      MYSQL_PASSWORD: password\n    networks:\n      - testNetwork\n\n  keycloak:\n    image: jboss/keycloak\n    container_name: keycloak\n    restart: on-failure\n    volumes:\n      - ./config:/config/\n    environment:\n      DB_VENDOR: MYSQL\n      DB_ADDR: mysql\n      DB_DATABASE: keycloak\n      DB_USER: keycloak\n      DB_PASSWORD: password\n      KEYCLOAK_USER: xxx\n      KEYCLOAK_PASSWORD: yyy\n      KEYCLOAK_IMPORT_REALM: /keycloak/import/realm-import.json\n    ports:\n      - 8080:8080   &lt;--- edited\n    depends_on:\n      - mysql\n    networks:\n      - testNetwork\n</code></pre>\n\n<p>Step 3: keycloak definition in application.yml for Spring boot edited auth-server-url:</p>\n\n<pre><code>    keycloak:\n  realm: SpringBootKeycloak\n  auth-server-url: http://keycloak:8080/auth   &lt;--- edited\n  resource: testclient\n  public-client: true\n  security-constraints:\n    - authRoles:\n      - user\n      securityCollections:\n        - patterns:\n          - /*\n  ssl-required: external\n  confidential-port: 0\n</code></pre>\n\n<p>The ugly thing coming with this solution:\nYou cant map your Docker Port onto another port to access from url.\n  ports: \n    - 8080:8080\ni spend a lot of time testing other combinations, with the result that the access url port has to be the same as inner docker port (8080 in my case).</p>\n\n<p>EDIT 4:</p>\n\n<p><strong><em>Same thing is working with Thorntail.</em></strong></p>\n\n<p>To change the port for Keycloak add...</p>\n\n<pre><code>environment:\n  JAVA_OPTS: \"-Djboss.socket.binding.port-offset=10 -Xms64m -Xmx512m -XX:MetaspaceSize=96M -XX:MaxMetaspaceSize=256m\n  -Djava.net.preferIPv4Stack=true -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true\"\n</code></pre>\n\n<p>... for keycloak in docker-compose.\n-Djboss.socket.binding.port-offset=10 sets default port (8080) + offset (10)\nThe rest are default values for keycloak.\nDon't forget to edit \"ports\" and \"auth-server-url\"</p>\n"},{"tags":["java","apache-spark","encoding","utf-8","bigdata"],"answers":[{"tags":[],"owner":{"account_id":3172929,"reputation":140,"user_id":2681448,"accept_rate":50,"display_name":"Shreyas K C"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1469708928,"creation_date":1469708928,"answer_id":38636394,"question_id":38636189,"body_markdown":"Run your Spark job like this :\r\n `spark-submit --class com.something.class --name &quot;someName&quot; --conf &quot;spark.driver.extraJavaOptions=-Dfile.encoding=utf-8&quot; `","title":"Spark-Submit through command line does not enforce UTF-8 encoding","body":"<p>Run your Spark job like this :\n <code>spark-submit --class com.something.class --name \"someName\" --conf \"spark.driver.extraJavaOptions=-Dfile.encoding=utf-8\"</code></p>\n"},{"tags":[],"owner":{"account_id":4655396,"reputation":34,"user_id":3771113,"display_name":"nits41089"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1544704356,"creation_date":1544704356,"answer_id":53761946,"question_id":38636189,"body_markdown":"Not working in my case\r\n\r\nThe command i use is\r\n\r\n    spark-submit --class com.rera.esearch --jars /Users/nitinthakur/.ivy2/cache/mysql/mysql-connector-java/jars/mysql-connector-java-8.0.11.jar /Users/nitinthakur/IdeaProjects/Rera2/target/scala-2.11/rera2_2.11-0.1.jar\r\n    --conf &quot;spark.driver.extraJavaOptions=-Dfile.encoding=utf-8&quot; 127.0.0.1 root\r\n\r\nOutput of below commands\r\n\r\n    println(System.getProperty(&quot;file.encoding&quot;)) // US-ASCII\r\n    println(scala.util.Properties.encodingString) // US-ASCII\r\n\r\n","title":"Spark-Submit through command line does not enforce UTF-8 encoding","body":"<p>Not working in my case</p>\n\n<p>The command i use is</p>\n\n<pre><code>spark-submit --class com.rera.esearch --jars /Users/nitinthakur/.ivy2/cache/mysql/mysql-connector-java/jars/mysql-connector-java-8.0.11.jar /Users/nitinthakur/IdeaProjects/Rera2/target/scala-2.11/rera2_2.11-0.1.jar\n--conf \"spark.driver.extraJavaOptions=-Dfile.encoding=utf-8\" 127.0.0.1 root\n</code></pre>\n\n<p>Output of below commands</p>\n\n<pre><code>println(System.getProperty(\"file.encoding\")) // US-ASCII\nprintln(scala.util.Properties.encodingString) // US-ASCII\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2849240,"reputation":109,"user_id":2446776,"display_name":"user2446776"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1569487006,"creation_date":1569487006,"answer_id":58112751,"question_id":38636189,"body_markdown":"If you are seeing the issue in a code that runs in executor(like the code between foreachPartition or mapPartition) you would have to set spark.executor.extraJavaOptions that is\r\n\r\n    --conf &#39;spark.executor.extraJavaOptions=-Dfile.encoding=UTF-8&#39;\r\n\r\nif your code is running in driver then set as said above, i.e\r\n\r\n    --conf &quot;spark.driver.extraJavaOptions=-Dfile.encoding=utf-8&quot;","title":"Spark-Submit through command line does not enforce UTF-8 encoding","body":"<p>If you are seeing the issue in a code that runs in executor(like the code between foreachPartition or mapPartition) you would have to set spark.executor.extraJavaOptions that is</p>\n\n<pre><code>--conf 'spark.executor.extraJavaOptions=-Dfile.encoding=UTF-8'\n</code></pre>\n\n<p>if your code is running in driver then set as said above, i.e</p>\n\n<pre><code>--conf \"spark.driver.extraJavaOptions=-Dfile.encoding=utf-8\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20260742,"reputation":3,"user_id":14859171,"display_name":"Devigny"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677850865,"creation_date":1677850848,"answer_id":75627818,"question_id":38636189,"body_markdown":"It seems like the arguments order matters. You have to specify the encoding before the JAR file like so:\r\n\r\n    spark-submit --class my.package.app --conf &quot;spark.driver.extraJavaOptions=-Dfile.encoding=utf-8&quot; --conf spark.driver.extraJavaOptions=-Dfile.encoding=UTF-8 --conf spark.executor.extraJavaOptions=-Dfile.encoding=UTF-8 my-app.jar \r\n\r\nI tried specifying the encoding after the JAR file and it seems like the specified encoding doesn&#39;t get picked up.","title":"Spark-Submit through command line does not enforce UTF-8 encoding","body":"<p>It seems like the arguments order matters. You have to specify the encoding before the JAR file like so:</p>\n<pre><code>spark-submit --class my.package.app --conf &quot;spark.driver.extraJavaOptions=-Dfile.encoding=utf-8&quot; --conf spark.driver.extraJavaOptions=-Dfile.encoding=UTF-8 --conf spark.executor.extraJavaOptions=-Dfile.encoding=UTF-8 my-app.jar \n</code></pre>\n<p>I tried specifying the encoding after the JAR file and it seems like the specified encoding doesn't get picked up.</p>\n"}],"owner":{"account_id":6760990,"reputation":2864,"user_id":5207772,"display_name":"KJ Sudarshan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4302,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":38636394,"answer_count":4,"score":2,"last_activity_date":1677850865,"creation_date":1469708404,"question_id":38636189,"body_markdown":"When I run my spark job from an IDE using Spark&#39;s Java APIs, I get the output in a desired encoding format (UTF-8). But if I start the &#39;spark-submit&#39; method from command line, the output misses out on the encoding.\r\n\r\nIs there a way where I can enforce encoding to &#39;spark-submit&#39; when used through command line interface.\r\n\r\nI am using Windows 10 OS and Eclipse IDE.\r\n\r\nYour help will be really appreciated.\r\n\r\nThank you.","title":"Spark-Submit through command line does not enforce UTF-8 encoding","body":"<p>When I run my spark job from an IDE using Spark's Java APIs, I get the output in a desired encoding format (UTF-8). But if I start the 'spark-submit' method from command line, the output misses out on the encoding.</p>\n\n<p>Is there a way where I can enforce encoding to 'spark-submit' when used through command line interface.</p>\n\n<p>I am using Windows 10 OS and Eclipse IDE.</p>\n\n<p>Your help will be really appreciated.</p>\n\n<p>Thank you.</p>\n"},{"tags":["java","spring","esapi"],"comments":[{"owner":{"account_id":434040,"reputation":17358,"user_id":819742,"accept_rate":69,"display_name":"randominstanceOfLivingThing"},"score":0,"creation_date":1460677575,"post_id":36635745,"comment_id":60866801,"body_markdown":"Maybe the ESAPI.properties is in multiple locations. Can you remove a property that you know is working and see that it checks if your change is picked up by ESAPI library.","body":"Maybe the ESAPI.properties is in multiple locations. Can you remove a property that you know is working and see that it checks if your change is picked up by ESAPI library."},{"owner":{"account_id":268409,"reputation":6226,"user_id":557153,"accept_rate":83,"display_name":"avgvstvs"},"score":0,"creation_date":1460748837,"post_id":36635745,"comment_id":60904129,"body_markdown":"Can you run the application on your local machine?","body":"Can you run the application on your local machine?"}],"answers":[{"tags":[],"owner":{"account_id":385460,"reputation":1357,"user_id":742609,"display_name":"Kevin W. Wall"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1460781850,"creation_date":1460781850,"answer_id":36660200,"question_id":36635745,"body_markdown":"Following up on Suresh&#39;s comment...Toward that end, look at wherever you captured stdout and look for &quot;Attempting to load ESAPI.properties&quot; and follow that trail. It should look something like this:\r\n\r\n    Attempting to load ESAPI.properties via file I/O.\r\n    Attempting to load ESAPI.properties as resource file via file I/O.\r\n    Not found in &#39;org.owasp.esapi.resources&#39; directory or file not readable: /home/kww/Code/GitHub/kwwall/esapi-java-legacy/ESAPI.properties\r\n    Found in SystemResource Directory/resourceDirectory: /home/kww/Code/GitHub/kwwall/esapi-java-legacy/target/test-classes/esapi/ESAPI.properties\r\n    Loaded &#39;ESAPI.properties&#39; properties file\r\n\r\nAnd them make sure that it is loading ESAPI.properties from where you expected it to be loaded.","title":"ESAPI throwing org.owasp.esapi.errors.ConfigurationException when trying to log a warning","body":"<p>Following up on Suresh's comment...Toward that end, look at wherever you captured stdout and look for \"Attempting to load ESAPI.properties\" and follow that trail. It should look something like this:</p>\n\n<pre><code>Attempting to load ESAPI.properties via file I/O.\nAttempting to load ESAPI.properties as resource file via file I/O.\nNot found in 'org.owasp.esapi.resources' directory or file not readable: /home/kww/Code/GitHub/kwwall/esapi-java-legacy/ESAPI.properties\nFound in SystemResource Directory/resourceDirectory: /home/kww/Code/GitHub/kwwall/esapi-java-legacy/target/test-classes/esapi/ESAPI.properties\nLoaded 'ESAPI.properties' properties file\n</code></pre>\n\n<p>And them make sure that it is loading ESAPI.properties from where you expected it to be loaded.</p>\n"},{"tags":[],"owner":{"account_id":1086887,"reputation":355,"user_id":1082397,"accept_rate":100,"display_name":"mongiesama"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1461017144,"creation_date":1461017144,"answer_id":36705108,"question_id":36635745,"body_markdown":"It turns out I was also importing a library called opensaml (as a dependency of some other dependency). This library has its own implementation of SecurityConfiguration, which is the interface ESAPI uses to load configuration. For some reason the opensaml implements nearly all the methods to just return null or 0:\r\n\r\n    package org.opensaml;\r\n    /**\r\n     * Minimal implementation of OWASP ESAPI {@link SecurityConfiguration}, providing the support used within OpenSAML.\r\n     */\r\n    public class ESAPISecurityConfig implements SecurityConfiguration {\r\n        /** Constructor. */\r\n        public ESAPISecurityConfig() {\r\n        }\r\n        // snip...\r\n        /** {@inheritDoc} */\r\n        public String getHTTPUtilitiesImplementation() {\r\n            return null;\r\n        }\r\n        // snip....\r\n    }\r\n\r\nIn a class called DefaultBootstrap, this was getting executed somewhere during the startup of my application, which overrides ESAPI&#39;s default implementation:\r\n\r\n    protected static void initializeESAPI() {\r\n        ESAPI.initialize(&quot;org.opensaml.ESAPISecurityConfig&quot;);\r\n    }\r\n\r\nI couldn&#39;t get rid of the opensaml library, so I had to change my code so that before I invoke ESAPI, I override it back to the default implementation:\r\n\r\n            ESAPI.initialize(&quot;org.owasp.esapi.reference.DefaultSecurityConfiguration&quot;);\r\n            value = ESAPI.encoder().canonicalize(value);\r\n","title":"ESAPI throwing org.owasp.esapi.errors.ConfigurationException when trying to log a warning","body":"<p>It turns out I was also importing a library called opensaml (as a dependency of some other dependency). This library has its own implementation of SecurityConfiguration, which is the interface ESAPI uses to load configuration. For some reason the opensaml implements nearly all the methods to just return null or 0:</p>\n\n<pre><code>package org.opensaml;\n/**\n * Minimal implementation of OWASP ESAPI {@link SecurityConfiguration}, providing the support used within OpenSAML.\n */\npublic class ESAPISecurityConfig implements SecurityConfiguration {\n    /** Constructor. */\n    public ESAPISecurityConfig() {\n    }\n    // snip...\n    /** {@inheritDoc} */\n    public String getHTTPUtilitiesImplementation() {\n        return null;\n    }\n    // snip....\n}\n</code></pre>\n\n<p>In a class called DefaultBootstrap, this was getting executed somewhere during the startup of my application, which overrides ESAPI's default implementation:</p>\n\n<pre><code>protected static void initializeESAPI() {\n    ESAPI.initialize(\"org.opensaml.ESAPISecurityConfig\");\n}\n</code></pre>\n\n<p>I couldn't get rid of the opensaml library, so I had to change my code so that before I invoke ESAPI, I override it back to the default implementation:</p>\n\n<pre><code>        ESAPI.initialize(\"org.owasp.esapi.reference.DefaultSecurityConfiguration\");\n        value = ESAPI.encoder().canonicalize(value);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27927412,"reputation":1,"user_id":21326210,"display_name":"Saiteja Ch"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677850654,"creation_date":1677850654,"answer_id":75627779,"question_id":36635745,"body_markdown":"In my case, I have SAML library in my project which is initializing the ESAPI with its specific security configuration(ESAPISecurityConfig).\r\n\r\nThe ESAPISecurityConfig always returns null when requested for HTTPUtilitiesImplementation. \r\n```\r\n /** {@inheritDoc} */\r\n    public String getHTTPUtilitiesImplementation() {\r\n        return null;\r\n    }\r\n```\r\n\r\nIn DefaultBootstrap.class in saml library. It is clear that the intialization of ESAPI would happen it there is no system property available for the key &quot;org.owasp.esapi.SecurityConfiguration&quot;.\r\n\r\n```\r\n    /**\r\n     * Initializes the OWASPI ESAPI library.\r\n     */\r\n    protected static void initializeESAPI() {\r\n        Logger log = getLogger();\r\n        String systemPropertyKey = &quot;org.owasp.esapi.SecurityConfiguration&quot;;\r\n        String opensamlConfigImpl = ESAPISecurityConfig.class.getName();\r\n        \r\n        String currentValue = System.getProperty(systemPropertyKey);\r\n        if (currentValue == null || currentValue.isEmpty()) {\r\n            log.debug(&quot;Setting ESAPI SecurityConfiguration impl to OpenSAML internal class: {}&quot;, opensamlConfigImpl);\r\n            System.setProperty(systemPropertyKey, opensamlConfigImpl);\r\n            // We still need to call ESAPI.initialize() despite setting the system property, b/c within the ESAPI class\r\n            // the property is only evaluated once in a static initializer and stored. The initialize method however\r\n            // does overwrite the statically-set value from the system property. But still set the system property for \r\n            // consistency, so other callers can see what has been set.\r\n            ESAPI.initialize(opensamlConfigImpl);\r\n        } else {\r\n            log.debug(&quot;ESAPI SecurityConfiguration impl was already set non-null and non-empty via system property, leaving existing value in place: {}&quot;,\r\n                    currentValue);\r\n        }\r\n    \r\n``` \r\nSo to prevent SAML from initializing ESAPI we can either set the below before the control reaches SAML. I have added it in a static block in our application which we use to inject few properties to spring environment.\r\n\r\n```\r\nString systemPropertyKey = &quot;org.owasp.esapi.SecurityConfiguration&quot;;\r\nString defaultConfigImpl = DefaultSecurityConfiguration.class.getName();\r\n**System.setProperty(systemPropertyKey, defaultConfigImpl );**\r\nESAPI.initialize(defaultConfigImpl);\r\n\r\n```\r\n\r\nOr you can add below property in your runtime arguments which prevents SAML from creating its own implementation. When we call the methods on ESAPI for the first time in our application a default instance would be created automatically.\r\n\r\n```\r\n-Dorg.owasp.esapi.SecurityConfiguration=org.owasp.esapi.reference.DefaultSecurityConfiguration\r\n\r\n```","title":"ESAPI throwing org.owasp.esapi.errors.ConfigurationException when trying to log a warning","body":"<p>In my case, I have SAML library in my project which is initializing the ESAPI with its specific security configuration(ESAPISecurityConfig).</p>\n<p>The ESAPISecurityConfig always returns null when requested for HTTPUtilitiesImplementation.</p>\n<pre><code> /** {@inheritDoc} */\n    public String getHTTPUtilitiesImplementation() {\n        return null;\n    }\n</code></pre>\n<p>In DefaultBootstrap.class in saml library. It is clear that the intialization of ESAPI would happen it there is no system property available for the key &quot;org.owasp.esapi.SecurityConfiguration&quot;.</p>\n<pre><code>    /**\n     * Initializes the OWASPI ESAPI library.\n     */\n    protected static void initializeESAPI() {\n        Logger log = getLogger();\n        String systemPropertyKey = &quot;org.owasp.esapi.SecurityConfiguration&quot;;\n        String opensamlConfigImpl = ESAPISecurityConfig.class.getName();\n        \n        String currentValue = System.getProperty(systemPropertyKey);\n        if (currentValue == null || currentValue.isEmpty()) {\n            log.debug(&quot;Setting ESAPI SecurityConfiguration impl to OpenSAML internal class: {}&quot;, opensamlConfigImpl);\n            System.setProperty(systemPropertyKey, opensamlConfigImpl);\n            // We still need to call ESAPI.initialize() despite setting the system property, b/c within the ESAPI class\n            // the property is only evaluated once in a static initializer and stored. The initialize method however\n            // does overwrite the statically-set value from the system property. But still set the system property for \n            // consistency, so other callers can see what has been set.\n            ESAPI.initialize(opensamlConfigImpl);\n        } else {\n            log.debug(&quot;ESAPI SecurityConfiguration impl was already set non-null and non-empty via system property, leaving existing value in place: {}&quot;,\n                    currentValue);\n        }\n    \n</code></pre>\n<p>So to prevent SAML from initializing ESAPI we can either set the below before the control reaches SAML. I have added it in a static block in our application which we use to inject few properties to spring environment.</p>\n<pre><code>String systemPropertyKey = &quot;org.owasp.esapi.SecurityConfiguration&quot;;\nString defaultConfigImpl = DefaultSecurityConfiguration.class.getName();\n**System.setProperty(systemPropertyKey, defaultConfigImpl );**\nESAPI.initialize(defaultConfigImpl);\n\n</code></pre>\n<p>Or you can add below property in your runtime arguments which prevents SAML from creating its own implementation. When we call the methods on ESAPI for the first time in our application a default instance would be created automatically.</p>\n<pre><code>-Dorg.owasp.esapi.SecurityConfiguration=org.owasp.esapi.reference.DefaultSecurityConfiguration\n\n</code></pre>\n"}],"owner":{"account_id":1086887,"reputation":355,"user_id":1082397,"accept_rate":100,"display_name":"mongiesama"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13113,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":36705108,"answer_count":3,"score":1,"last_activity_date":1677850654,"creation_date":1460676255,"question_id":36635745,"body_markdown":"We&#39;ve added a filter to our spring webapp that checks all incoming requests for anything that could cause an XSS vulnerability. However, when it tries to write to the log, we get the following stack trace:\r\n\r\n    com.blah.blah.web.controllers.ExceptionLoggingController - ERROR: Exception: code=500,uri=/post.html,servlet=dispatch,class=org.owasp.esapi.errors.ConfigurationException,from=1.2.3.4,message=Request processing failed; nested exception is org.owasp.esapi.errors.ConfigurationException: java.lang.IllegalArgumentException: Classname cannot be null or empty. HTTPUtilities type name cannot be null or empty.\r\n    org.owasp.esapi.errors.ConfigurationException: java.lang.IllegalArgumentException: Classname cannot be null or empty. HTTPUtilities type name cannot be null or empty.\r\n        at org.owasp.esapi.util.ObjFactory.make(ObjFactory.java:105)\r\n        at org.owasp.esapi.ESAPI.httpUtilities(ESAPI.java:121)\r\n        at org.owasp.esapi.ESAPI.currentRequest(ESAPI.java:70)\r\n        at org.owasp.esapi.reference.JavaLogFactory$JavaLogger.log(JavaLogFactory.java:308)\r\n        at org.owasp.esapi.reference.JavaLogFactory$JavaLogger.warning(JavaLogFactory.java:242)\r\n        at org.owasp.esapi.reference.DefaultEncoder.canonicalize(DefaultEncoder.java:181)\r\n        at org.owasp.esapi.reference.DefaultEncoder.canonicalize(DefaultEncoder.java:120)\r\n        at com.blah.blah.web.MyFilter.removeXSS(MyFilter.java:26)\r\n\r\nI have ESAPI.properties on the classpath, that seems to be otherwise working, that does have the &quot;missing&quot; class configured:\r\n\r\n    ESAPI.HTTPUtilities=org.owasp.esapi.reference.DefaultHTTPUtilities\r\n\r\nAnd DefaultHTTPUtilities is on the classpath as well.","title":"ESAPI throwing org.owasp.esapi.errors.ConfigurationException when trying to log a warning","body":"<p>We've added a filter to our spring webapp that checks all incoming requests for anything that could cause an XSS vulnerability. However, when it tries to write to the log, we get the following stack trace:</p>\n\n<pre><code>com.blah.blah.web.controllers.ExceptionLoggingController - ERROR: Exception: code=500,uri=/post.html,servlet=dispatch,class=org.owasp.esapi.errors.ConfigurationException,from=1.2.3.4,message=Request processing failed; nested exception is org.owasp.esapi.errors.ConfigurationException: java.lang.IllegalArgumentException: Classname cannot be null or empty. HTTPUtilities type name cannot be null or empty.\norg.owasp.esapi.errors.ConfigurationException: java.lang.IllegalArgumentException: Classname cannot be null or empty. HTTPUtilities type name cannot be null or empty.\n    at org.owasp.esapi.util.ObjFactory.make(ObjFactory.java:105)\n    at org.owasp.esapi.ESAPI.httpUtilities(ESAPI.java:121)\n    at org.owasp.esapi.ESAPI.currentRequest(ESAPI.java:70)\n    at org.owasp.esapi.reference.JavaLogFactory$JavaLogger.log(JavaLogFactory.java:308)\n    at org.owasp.esapi.reference.JavaLogFactory$JavaLogger.warning(JavaLogFactory.java:242)\n    at org.owasp.esapi.reference.DefaultEncoder.canonicalize(DefaultEncoder.java:181)\n    at org.owasp.esapi.reference.DefaultEncoder.canonicalize(DefaultEncoder.java:120)\n    at com.blah.blah.web.MyFilter.removeXSS(MyFilter.java:26)\n</code></pre>\n\n<p>I have ESAPI.properties on the classpath, that seems to be otherwise working, that does have the \"missing\" class configured:</p>\n\n<pre><code>ESAPI.HTTPUtilities=org.owasp.esapi.reference.DefaultHTTPUtilities\n</code></pre>\n\n<p>And DefaultHTTPUtilities is on the classpath as well.</p>\n"},{"tags":["java","io","apache-commons-io"],"comments":[{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":1,"creation_date":1386431200,"post_id":20443179,"comment_id":30540752,"body_markdown":"If you can&#39;t find that in the source code, isn&#39;t it a strong indication that it isn&#39;t there?","body":"If you can&#39;t find that in the source code, isn&#39;t it a strong indication that it isn&#39;t there?"},{"owner":{"account_id":1476678,"reputation":7374,"user_id":1386911,"accept_rate":56,"display_name":"Daniel H&#225;ri"},"score":0,"creation_date":1490946345,"post_id":20443179,"comment_id":73347930,"body_markdown":"For files, use FileUtils.readFileToString(), it uses IOUtils, but also closes the stream.","body":"For files, use FileUtils.readFileToString(), it uses IOUtils, but also closes the stream."}],"answers":[{"tags":[],"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"down_vote_count":0,"up_vote_count":42,"is_accepted":true,"score":42,"last_activity_date":1464108001,"creation_date":1386431264,"answer_id":20443250,"question_id":20443179,"body_markdown":"[The javadoc][1] says:\r\n\r\n&gt; Wherever possible, the methods in this class do not flush or close the stream. This is to avoid making non-portable assumptions about the streams&#39; origin and further use. Thus the caller is still responsible for closing streams after use. \r\n\r\n\r\n  [1]: http://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/IOUtils.html","title":"Do I need to close the input stream manually after using IOUtils.toString(input) of commons-io?","body":"<p><a href=\"http://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/IOUtils.html\" rel=\"noreferrer\">The javadoc</a> says:</p>\n\n<blockquote>\n  <p>Wherever possible, the methods in this class do not flush or close the stream. This is to avoid making non-portable assumptions about the streams' origin and further use. Thus the caller is still responsible for closing streams after use. </p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":4538686,"reputation":514,"user_id":3687170,"accept_rate":78,"display_name":"Cybermonk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677850261,"creation_date":1677850261,"answer_id":75627714,"question_id":20443179,"body_markdown":"Yes, and InputStream is now AutoCloseable so you can do:\r\n    \r\n    try(InputStream input = getInputStream()) \r\n","title":"Do I need to close the input stream manually after using IOUtils.toString(input) of commons-io?","body":"<p>Yes, and InputStream is now AutoCloseable so you can do:</p>\n<pre><code>try(InputStream input = getInputStream()) \n</code></pre>\n"}],"owner":{"account_id":137777,"reputation":194868,"user_id":342235,"accept_rate":77,"display_name":"Freewind"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14383,"favorite_count":0,"down_vote_count":0,"up_vote_count":40,"accepted_answer_id":20443250,"answer_count":2,"score":40,"last_activity_date":1677850261,"creation_date":1386430880,"question_id":20443179,"body_markdown":"[Commons-IO](http://commons.apache.org/proper/commons-io/) has an `IOUtils.toString(inputStream)` method, which can read all content from an input stream:\r\n\r\n    InputStream input = getInputStream();\r\n    String content = IOUtils.toString(input);\r\n\r\nMy question is shall I close the input stream manually after using it?\r\n\r\nI thought IOUtils may close it since it has read all the content, but I can&#39;t find that in the source code.","title":"Do I need to close the input stream manually after using IOUtils.toString(input) of commons-io?","body":"<p><a href=\"http://commons.apache.org/proper/commons-io/\">Commons-IO</a> has an <code>IOUtils.toString(inputStream)</code> method, which can read all content from an input stream:</p>\n\n<pre><code>InputStream input = getInputStream();\nString content = IOUtils.toString(input);\n</code></pre>\n\n<p>My question is shall I close the input stream manually after using it?</p>\n\n<p>I thought IOUtils may close it since it has read all the content, but I can't find that in the source code.</p>\n"},{"tags":["java","mysql","ssl","jdbc"],"comments":[{"owner":{"account_id":949838,"reputation":381,"user_id":976212,"accept_rate":56,"display_name":"Mark Matten"},"score":0,"creation_date":1343074489,"post_id":4663061,"comment_id":15386559,"body_markdown":"See\r\n\r\nhttp://stackoverflow.com/questions/11509751/how-to-connect-to-mysql-with-x509-using-jdbc","body":"See    <a href=\"http://stackoverflow.com/questions/11509751/how-to-connect-to-mysql-with-x509-using-jdbc\" title=\"how to connect to mysql with x509 using jdbc\">stackoverflow.com/questions/11509751/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":54362,"reputation":11938,"user_id":162634,"accept_rate":62,"display_name":"Victor Sorokin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1300445870,"creation_date":1300445870,"answer_id":5350962,"question_id":4663061,"body_markdown":"I&#39;ve settled on using `REQUIRE SSL`. If someone knows how to make X509 work with JDBC, this info would be appreciated.","title":"MySQL JDBC over SSL problem","body":"<p>I've settled on using <code>REQUIRE SSL</code>. If someone knows how to make X509 work with JDBC, this info would be appreciated.</p>\n"},{"tags":[],"owner":{"account_id":949838,"reputation":381,"user_id":976212,"accept_rate":56,"display_name":"Mark Matten"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1342437714,"creation_date":1342437714,"answer_id":11503205,"question_id":4663061,"body_markdown":"I can connect without even specifying the client certificate properties when the user has been configurated with only REQUIRES SSL.\r\n\r\n","title":"MySQL JDBC over SSL problem","body":"<p>I can connect without even specifying the client certificate properties when the user has been configurated with only REQUIRES SSL.</p>\n"},{"tags":[],"owner":{"account_id":2678694,"reputation":1777,"user_id":2314464,"display_name":"sehrope"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1372865334,"creation_date":1372865334,"answer_id":17452079,"question_id":4663061,"body_markdown":"Support for self-signed certificates was recently added to the MariaDB JDBC driver (which also works for connecting to MySQL). The latest version (1.1.3 as of writing this) also allows you to directly specify the server certificate at runtime so that you do not need to configure key stores or import certificates in advance.\r\n\r\nThe two properties to set are `useSSL` and `serverSslCert`. The latter can be either the certificate itself (a String value) or a path to a file that contains the certificate (either full path or classpath relative):\r\n\r\n    String url = &quot;jdbc:mysql://&quot; + host + &quot;:&quot; + port + &quot;/&quot; + database;\r\n    Properties info = new Properties();\r\n    info.setProperty(&quot;user&quot;, username);\r\n    info.setProperty(&quot;password&quot;, password);\r\n    info.setProperty(&quot;useSSL&quot;, &quot;true&quot;);\r\n    info.setProperty(&quot;serverSslCert&quot;, &quot;classpath:server.crt&quot;);\r\n    Connection conn = DriverManager.getConnection(url, info);\r\n\r\nFor a full working example of how to connect see here: https://github.com/properssl/java-jdbc-mariadb\r\n","title":"MySQL JDBC over SSL problem","body":"<p>Support for self-signed certificates was recently added to the MariaDB JDBC driver (which also works for connecting to MySQL). The latest version (1.1.3 as of writing this) also allows you to directly specify the server certificate at runtime so that you do not need to configure key stores or import certificates in advance.</p>\n\n<p>The two properties to set are <code>useSSL</code> and <code>serverSslCert</code>. The latter can be either the certificate itself (a String value) or a path to a file that contains the certificate (either full path or classpath relative):</p>\n\n<pre><code>String url = \"jdbc:mysql://\" + host + \":\" + port + \"/\" + database;\nProperties info = new Properties();\ninfo.setProperty(\"user\", username);\ninfo.setProperty(\"password\", password);\ninfo.setProperty(\"useSSL\", \"true\");\ninfo.setProperty(\"serverSslCert\", \"classpath:server.crt\");\nConnection conn = DriverManager.getConnection(url, info);\n</code></pre>\n\n<p>For a full working example of how to connect see here: <a href=\"https://github.com/properssl/java-jdbc-mariadb\" rel=\"noreferrer\">https://github.com/properssl/java-jdbc-mariadb</a></p>\n"},{"tags":[],"owner":{"account_id":3598301,"reputation":204,"user_id":3002309,"display_name":"mohr_michael_a"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1456606378,"creation_date":1456606378,"answer_id":35675314,"question_id":4663061,"body_markdown":"Seems the MariaDB driver folks have a test class that walks through all the scenarios including &#39;REQUIRES X509&#39;. \r\n\r\nhttps://github.com/MariaDB/mariadb-connector-j/blob/master/src/test/java/org/mariadb/jdbc/SslTest.java","title":"MySQL JDBC over SSL problem","body":"<p>Seems the MariaDB driver folks have a test class that walks through all the scenarios including 'REQUIRES X509'. </p>\n\n<p><a href=\"https://github.com/MariaDB/mariadb-connector-j/blob/master/src/test/java/org/mariadb/jdbc/SslTest.java\" rel=\"nofollow\">https://github.com/MariaDB/mariadb-connector-j/blob/master/src/test/java/org/mariadb/jdbc/SslTest.java</a></p>\n"},{"tags":[],"owner":{"account_id":4946204,"reputation":101,"user_id":3981480,"display_name":"alwayslearning"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677850190,"creation_date":1677850190,"answer_id":75627703,"question_id":4663061,"body_markdown":"I know this question is quite old; however, I stumbled upon this when I faced this issue today.\r\nIn my case had the certificate files server-ca.pem, client-key.pem &amp; client-cert.pem provided to me already which I successfully passed to the mysql command-line client as parameters to the relevant options. After which began my quest for a way to use them for making a successful JDBC connection. I am writing this answer, just in case it helps someone save their precious hours.\r\n\r\nI referred to &quot;Setting up Client Authentication&quot; at https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-reference-using-ssl.html\r\n\r\nFor simpilicity I had the certificates in the same directory I was working in.\r\n&gt; Creating the trust key store to be used in the JDBC URL: \r\n&gt;\r\n&gt; keytool\r\n&gt; -import -file server-ca.pem -storetype JKS -keystore trustkeystore\r\n&gt; \r\n&gt; Creating the client key store to be used in the JDBC URL (note that\r\n&gt; this is a 2 step process): \r\n&gt;\r\n&gt; openssl pkcs12 -export -in client-cert.pem\r\n&gt; -inkey client-key.pem -name &quot;mysqlclient&quot; -passout pass:\\&lt;password&gt; -out client-keystore.p12 \r\n&gt;\r\n&gt; keytool -importkeystore -srckeystore client-keystore.p12 -srcstoretype pkcs12 -srcstorepass \\&lt;password&gt;\r\n&gt; -destkeystore clientkeystore -deststoretype JKS -deststorepass \\&lt;password&gt;\r\n&gt; \r\n&gt; The JDBC URL which finally worked in may case:\r\n&gt;\r\n&gt; jdbc:mysql://\\&lt;host&gt;:\\&lt;port&gt;/\\&lt;db_name&gt;?trustCertificateKeyStoreUrl=file://\\&lt;absolute_path&gt;/trustkeystore&amp;trustCertificateKeyStorePassword=\\&lt;password&gt;&amp;clientCertificateKeyStoreUrl=file://\\&lt;absolute_path&gt;/clientkeystore&amp;clientCertificateKeyStorePassword=\\&lt;password&gt;","title":"MySQL JDBC over SSL problem","body":"<p>I know this question is quite old; however, I stumbled upon this when I faced this issue today.\nIn my case had the certificate files server-ca.pem, client-key.pem &amp; client-cert.pem provided to me already which I successfully passed to the mysql command-line client as parameters to the relevant options. After which began my quest for a way to use them for making a successful JDBC connection. I am writing this answer, just in case it helps someone save their precious hours.</p>\n<p>I referred to &quot;Setting up Client Authentication&quot; at <a href=\"https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-reference-using-ssl.html\" rel=\"nofollow noreferrer\">https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-reference-using-ssl.html</a></p>\n<p>For simpilicity I had the certificates in the same directory I was working in.</p>\n<blockquote>\n<p>Creating the trust key store to be used in the JDBC URL:</p>\n<p>keytool\n-import -file server-ca.pem -storetype JKS -keystore trustkeystore</p>\n<p>Creating the client key store to be used in the JDBC URL (note that\nthis is a 2 step process):</p>\n<p>openssl pkcs12 -export -in client-cert.pem\n-inkey client-key.pem -name &quot;mysqlclient&quot; -passout pass:&lt;password&gt; -out client-keystore.p12</p>\n<p>keytool -importkeystore -srckeystore client-keystore.p12 -srcstoretype pkcs12 -srcstorepass &lt;password&gt;\n-destkeystore clientkeystore -deststoretype JKS -deststorepass &lt;password&gt;</p>\n<p>The JDBC URL which finally worked in may case:</p>\n<p>jdbc:mysql://&lt;host&gt;:&lt;port&gt;/&lt;db_name&gt;?trustCertificateKeyStoreUrl=file://&lt;absolute_path&gt;/trustkeystore&amp;trustCertificateKeyStorePassword=&lt;password&gt;&amp;clientCertificateKeyStoreUrl=file://&lt;absolute_path&gt;/clientkeystore&amp;clientCertificateKeyStorePassword=&lt;password&gt;</p>\n</blockquote>\n"}],"owner":{"account_id":54362,"reputation":11938,"user_id":162634,"accept_rate":62,"display_name":"Victor Sorokin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19209,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":5,"score":4,"last_activity_date":1677850190,"creation_date":1294782831,"question_id":4663061,"body_markdown":"How one can make MySQL JDBC work over SSL (with X509 certificates validation)?  \r\n\r\nI&#39;ve got self-created certificates as described in MySQL manual, in `Using SSL for Secure Connections`, specifically:\r\n\r\n    # Create CA certificate\r\n    shell&gt; openssl genrsa 2048 &gt; ca-key.pem\r\n    shell&gt; openssl req -new -x509 -nodes -days 1000 \\\r\n             -key ca-key.pem &gt; ca-cert.pem\r\n    \r\n    # Create server certificate\r\n    shell&gt; openssl req -newkey rsa:2048 -days 1000 \\\r\n             -nodes -keyout server-key.pem &gt; server-req.pem\r\n    shell&gt; openssl x509 -req -in server-req.pem -days 1000 \\\r\n             -CA ca-cert.pem -CAkey ca-key.pem -set_serial 01 &gt; server-cert.pem\r\n    \r\n    # Create client certificate\r\n    shell&gt; openssl req -newkey rsa:2048 -days 1000 \\\r\n             -nodes -keyout client-key.pem &gt; client-req.pem\r\n    shell&gt; openssl x509 -req -in client-req.pem -days 1000 \\\r\n             -CA ca-cert.pem -CAkey ca-key.pem -set_serial 01 &gt; client-cert.pem\r\n\r\n\r\nAfter issuing `GRANT ALL ON *.* TO vic@localhost IDENTIFIED BY &#39;12345&#39; REQUIRE X509;` I am able to connect to MySQL over command-line:\r\n\r\n    mysql -u vic -p --ssl-ca=ca-cert.pem --ssl-cert=client-cert.pem --ssl-key=client-key.pem mysql\r\n    ...\r\n    \r\n    mysql&gt;  SHOW STATUS LIKE &#39;Ssl_cipher&#39;;\r\n    +---------------+--------------------+\r\n    | Variable_name | Value              |\r\n    +---------------+--------------------+\r\n    | Ssl_cipher    | DHE-RSA-AES256-SHA |\r\n    +---------------+--------------------+\r\n\r\nHowever, when I try to run Java test, I get auth failure: `Access denied for user &#39;vic&#39;@&#39;localhost&#39; (using password: YES)`. Code follows:\r\n\r\n    public class Launcher {\r\n        public static void main(String[] args) throws DbException, SQLException, ClassNotFoundException {\r\n            StringBuffer sb = new StringBuffer(&quot;jdbc:mysql://localhost/bt?useSSL=true&amp;&quot;);\r\n            sb.append(&quot;user=vic&amp;password=12345&amp;&quot;);\r\n            sb.append(&quot;clientCertificateKeyStorePassword=123456&amp;&quot;);\r\n            sb.append(&quot;clientCertificateKeyStoreType=JKS&amp;&quot;);\r\n            sb.append(&quot;clientCertificateKeyStoreUrl=file:///home/vic/tmp/client-keystore&amp;&quot;);\r\n            sb.append(&quot;trustCertificateKeyStorePassword=123456&amp;&quot;);\r\n            sb.append(&quot;trustCertificateKeyStoreType=JKS&amp;&quot;);\r\n            sb.append(&quot;trustCertificateKeyStoreUrl=file:///home/vic/tmp/ca-keystore&quot;);\r\n    \r\n            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);\r\n            Connection c = DriverManager.getConnection(sb.toString());\r\n    \r\n            Statement st = c.createStatement();\r\n            ResultSet rs = st.executeQuery(&quot;SELECT * FROM test_table&quot;);\r\n            while (rs.next()) {\r\n                System.out.println(rs.getInt(&quot;id&quot;));\r\n            }\r\n            rs.close(); st.close(); c.close();\r\n        }\r\n    }\r\n\r\nAnd here&#39;s how I prepared Java keystore files:\r\n\r\n    keytool -import -alias mysqlServerCACert -file ca-cert.pem -keystore ca-keystore\r\n    keytool -import -file client-cert.pem -keystore client-keystore -alias client-key\r\n\r\n**UPDATE** I am able to connect over SSL via JDBC if I use &#39;root&#39; user instead of &#39;vic&#39;. Then following code\r\n\r\n        Statement st = c.createStatement();\r\n        ResultSet rs = st.executeQuery(&quot;SHOW STATUS LIKE &#39;Ssl_cipher&#39;;&quot;);\r\n        while (rs.next()) {\r\n            System.out.println(rs.getString(1));\r\n            System.out.println(rs.getString(2));\r\n        }\r\nprints\r\n\r\n    Ssl_cipher\r\n    DHE-RSA-AES128-SHA\r\n\r\nBut I can&#39;t use root in production, and I wonder why JDBC uses AES128, whereas command-line mysql client uses AES256.\r\n\r\n**UPDATE2** After I changed `ssl_type` to `X509` in `user` table for `root@localhost`, requesting full auth of client, I get the same behavior for root as for vic -- can&#39;t login via JDBC.\r\n\r\n**UPDATE3** If I use `REQUIRE SSL` instead of `REQUIRE X509` in `GRANT` statement, code works. Is it possible to make X509 work?","title":"MySQL JDBC over SSL problem","body":"<p>How one can make MySQL JDBC work over SSL (with X509 certificates validation)?  </p>\n\n<p>I've got self-created certificates as described in MySQL manual, in <code>Using SSL for Secure Connections</code>, specifically:</p>\n\n<pre><code># Create CA certificate\nshell&gt; openssl genrsa 2048 &gt; ca-key.pem\nshell&gt; openssl req -new -x509 -nodes -days 1000 \\\n         -key ca-key.pem &gt; ca-cert.pem\n\n# Create server certificate\nshell&gt; openssl req -newkey rsa:2048 -days 1000 \\\n         -nodes -keyout server-key.pem &gt; server-req.pem\nshell&gt; openssl x509 -req -in server-req.pem -days 1000 \\\n         -CA ca-cert.pem -CAkey ca-key.pem -set_serial 01 &gt; server-cert.pem\n\n# Create client certificate\nshell&gt; openssl req -newkey rsa:2048 -days 1000 \\\n         -nodes -keyout client-key.pem &gt; client-req.pem\nshell&gt; openssl x509 -req -in client-req.pem -days 1000 \\\n         -CA ca-cert.pem -CAkey ca-key.pem -set_serial 01 &gt; client-cert.pem\n</code></pre>\n\n<p>After issuing <code>GRANT ALL ON *.* TO vic@localhost IDENTIFIED BY '12345' REQUIRE X509;</code> I am able to connect to MySQL over command-line:</p>\n\n<pre><code>mysql -u vic -p --ssl-ca=ca-cert.pem --ssl-cert=client-cert.pem --ssl-key=client-key.pem mysql\n...\n\nmysql&gt;  SHOW STATUS LIKE 'Ssl_cipher';\n+---------------+--------------------+\n| Variable_name | Value              |\n+---------------+--------------------+\n| Ssl_cipher    | DHE-RSA-AES256-SHA |\n+---------------+--------------------+\n</code></pre>\n\n<p>However, when I try to run Java test, I get auth failure: <code>Access denied for user 'vic'@'localhost' (using password: YES)</code>. Code follows:</p>\n\n<pre><code>public class Launcher {\n    public static void main(String[] args) throws DbException, SQLException, ClassNotFoundException {\n        StringBuffer sb = new StringBuffer(\"jdbc:mysql://localhost/bt?useSSL=true&amp;\");\n        sb.append(\"user=vic&amp;password=12345&amp;\");\n        sb.append(\"clientCertificateKeyStorePassword=123456&amp;\");\n        sb.append(\"clientCertificateKeyStoreType=JKS&amp;\");\n        sb.append(\"clientCertificateKeyStoreUrl=file:///home/vic/tmp/client-keystore&amp;\");\n        sb.append(\"trustCertificateKeyStorePassword=123456&amp;\");\n        sb.append(\"trustCertificateKeyStoreType=JKS&amp;\");\n        sb.append(\"trustCertificateKeyStoreUrl=file:///home/vic/tmp/ca-keystore\");\n\n        Class.forName(\"com.mysql.jdbc.Driver\");\n        Connection c = DriverManager.getConnection(sb.toString());\n\n        Statement st = c.createStatement();\n        ResultSet rs = st.executeQuery(\"SELECT * FROM test_table\");\n        while (rs.next()) {\n            System.out.println(rs.getInt(\"id\"));\n        }\n        rs.close(); st.close(); c.close();\n    }\n}\n</code></pre>\n\n<p>And here's how I prepared Java keystore files:</p>\n\n<pre><code>keytool -import -alias mysqlServerCACert -file ca-cert.pem -keystore ca-keystore\nkeytool -import -file client-cert.pem -keystore client-keystore -alias client-key\n</code></pre>\n\n<p><strong>UPDATE</strong> I am able to connect over SSL via JDBC if I use 'root' user instead of 'vic'. Then following code</p>\n\n<pre><code>    Statement st = c.createStatement();\n    ResultSet rs = st.executeQuery(\"SHOW STATUS LIKE 'Ssl_cipher';\");\n    while (rs.next()) {\n        System.out.println(rs.getString(1));\n        System.out.println(rs.getString(2));\n    }\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>Ssl_cipher\nDHE-RSA-AES128-SHA\n</code></pre>\n\n<p>But I can't use root in production, and I wonder why JDBC uses AES128, whereas command-line mysql client uses AES256.</p>\n\n<p><strong>UPDATE2</strong> After I changed <code>ssl_type</code> to <code>X509</code> in <code>user</code> table for <code>root@localhost</code>, requesting full auth of client, I get the same behavior for root as for vic -- can't login via JDBC.</p>\n\n<p><strong>UPDATE3</strong> If I use <code>REQUIRE SSL</code> instead of <code>REQUIRE X509</code> in <code>GRANT</code> statement, code works. Is it possible to make X509 work?</p>\n"},{"tags":["java","generics","unit-of-work"],"owner":{"account_id":26979893,"reputation":33,"user_id":20544416,"display_name":"Daniel Mendes Sechinske"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":126,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677849659,"creation_date":1677765239,"question_id":75616381,"body_markdown":"So, I&#39;m mostly a C#/.Net developer, but recently got a Java/Spring Boot 3 project on my hands\r\n\r\nI&#39;m trying to build a Unit of Work pattern on Java that accepts any type of function to be executed. I would like the usage to be something like this:\r\n\r\n```\r\npublic class ExampleService {\r\n\tpublic void foo() {\r\n\t\tnew TransactionUnit()\r\n\t\t\t.step(this::print, &quot;Hello world!&quot;)\r\n\t\t\t.step(this::createUser, new UserDto())\r\n\t\t\t.step(this::sumInteger, 1, 2)\r\n\t\t\t.step(this::foo, &quot;Hello&quot;, &quot;world!&quot;, new SomeClass())\r\n\t\t\t.commit()\r\n\t}\r\n\t\r\n\tprivate void print(String message) {\r\n\t\tlogger.info(message);\r\n\t}\r\n\t\r\n\tprivate User createUser(UserDto dto) {\r\n\t\t// create user implementation\r\n\t\treturn new User();\r\n\t}\r\n\t\r\n\tprivate int sumInteger(int a, int b) {\r\n\t\treturn a + b;\r\n\t}\r\n\r\n\tprivate String food(String m, String n, SomeClass o) {\r\n\t\treturn o.getMessage() + m + n;\r\n\t}\r\n}\r\n```\r\n\r\nMy Unit of Work class right now looks something like this\r\n\r\n```\r\npublic class TransactionUnit {\r\n\tprivate Map&lt;Object[], Function&lt;Object[], Object&gt;&gt; context;\r\n\r\n\r\n\tpublic TransactionUnit step(Function&lt;Object[], Object&gt; method, Object ...args) {\r\n\t\tcontext.put(args, method)\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\tpublic void commit() {\r\n\t\tcontext.forEach((args, method) -&gt; {\r\n\t\t\tmethod.apply(args);\r\n\t\t});\r\n\t}\r\n}\r\n```\r\n\r\nNot only it is ugly, with `Object` being used everywhere, but it doesn&#39;t work. I&#39;m having problem trying to write the generics for it, and also with the `Object` implementation, because it seems that `String` and other primitive types are not considered `Object`.\r\n\r\nBesided that implementation I tried a few others, like using a `interface` for the `arguments`, so the function only accepts a class that `implements` from it.\r\n\r\nThat said, I&#39;m not fixed on the implementation I showed, the important is to construct a `Class` that receives any number and type of `functions` and `arguments` and stores than for later execution.","title":"How to write a Unit of Work pattern on Java that accepts any type of functions for later execution","body":"<p>So, I'm mostly a C#/.Net developer, but recently got a Java/Spring Boot 3 project on my hands</p>\n<p>I'm trying to build a Unit of Work pattern on Java that accepts any type of function to be executed. I would like the usage to be something like this:</p>\n<pre><code>public class ExampleService {\n    public void foo() {\n        new TransactionUnit()\n            .step(this::print, &quot;Hello world!&quot;)\n            .step(this::createUser, new UserDto())\n            .step(this::sumInteger, 1, 2)\n            .step(this::foo, &quot;Hello&quot;, &quot;world!&quot;, new SomeClass())\n            .commit()\n    }\n    \n    private void print(String message) {\n        logger.info(message);\n    }\n    \n    private User createUser(UserDto dto) {\n        // create user implementation\n        return new User();\n    }\n    \n    private int sumInteger(int a, int b) {\n        return a + b;\n    }\n\n    private String food(String m, String n, SomeClass o) {\n        return o.getMessage() + m + n;\n    }\n}\n</code></pre>\n<p>My Unit of Work class right now looks something like this</p>\n<pre><code>public class TransactionUnit {\n    private Map&lt;Object[], Function&lt;Object[], Object&gt;&gt; context;\n\n\n    public TransactionUnit step(Function&lt;Object[], Object&gt; method, Object ...args) {\n        context.put(args, method)\n        return this;\n    }\n    \n    public void commit() {\n        context.forEach((args, method) -&gt; {\n            method.apply(args);\n        });\n    }\n}\n</code></pre>\n<p>Not only it is ugly, with <code>Object</code> being used everywhere, but it doesn't work. I'm having problem trying to write the generics for it, and also with the <code>Object</code> implementation, because it seems that <code>String</code> and other primitive types are not considered <code>Object</code>.</p>\n<p>Besided that implementation I tried a few others, like using a <code>interface</code> for the <code>arguments</code>, so the function only accepts a class that <code>implements</code> from it.</p>\n<p>That said, I'm not fixed on the implementation I showed, the important is to construct a <code>Class</code> that receives any number and type of <code>functions</code> and <code>arguments</code> and stores than for later execution.</p>\n"},{"tags":["java","jdbc","timeout","c3p0","amazon-rds"],"answers":[{"tags":[],"owner":{"account_id":11055,"reputation":18190,"user_id":1163802,"accept_rate":83,"display_name":"Vladimir Dyuzhev"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1303527634,"creation_date":1303527634,"answer_id":5761865,"question_id":5761006,"body_markdown":"The issue is within MySQL&#39;s ReadAheadInputStream, which uses blocking read. Native socket got blocked and never(?) returns an error code. So the connection hangs too.\r\n\r\nI do not see a way to handle it short of placing your code into a thread and join() to it with timeout. I do not believe though the problem justifies the complications: I hope Amazon will make the right conclusions from the downtime, and won&#39;t let it happen again.","title":"How to set a getConnection() timeout for c3p0?","body":"<p>The issue is within MySQL's ReadAheadInputStream, which uses blocking read. Native socket got blocked and never(?) returns an error code. So the connection hangs too.</p>\n\n<p>I do not see a way to handle it short of placing your code into a thread and join() to it with timeout. I do not believe though the problem justifies the complications: I hope Amazon will make the right conclusions from the downtime, and won't let it happen again.</p>\n"},{"tags":[],"owner":{"account_id":106190,"reputation":9362,"user_id":282968,"accept_rate":73,"display_name":"MJB"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1303583674,"creation_date":1303583674,"answer_id":5766101,"question_id":5761006,"body_markdown":"Well, you can assign a queryTimeout at the connection level. IIRC, MySQL does obey this. Dunno if C3P0 will like it, but it might work.","title":"How to set a getConnection() timeout for c3p0?","body":"<p>Well, you can assign a queryTimeout at the connection level. IIRC, MySQL does obey this. Dunno if C3P0 will like it, but it might work.</p>\n"}],"owner":{"account_id":104622,"reputation":1435,"user_id":279604,"accept_rate":100,"display_name":"nostromo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3535,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":5761865,"answer_count":2,"score":11,"last_activity_date":1677849653,"creation_date":1303515049,"question_id":5761006,"body_markdown":"Yesterday AWS&#39;s RDS went down -- and so did our database.  \r\n\r\nWhen this happened, C3P0 would try to get a database connection and would hang.  I would obviously like my application to return an error page in these instances, rather than just waiting forever for a response.\r\n\r\nHere&#39;s what the code looks like:\r\n\r\n    ComboPooledDataSource db = new ComboPooledDataSource();\r\n    ...\r\n    Connection conn = db.getConnection();\r\n\r\nHow can set a timeout for getting a connection from c3p0&#39;s connection pool?  \r\n\r\nI thought checkoutTimeout() would be it -- but it&#39;s not.  It is &quot;the number of milliseconds a client calling getConnection() will wait for a Connection to be checked-in or acquired when the pool is exhausted.&quot;  Since the pool in not exhausted (it is just unavailable) this does not apply.\r\n\r\nI also thought setAcquireRetryAttempts and setAcquireIncrement would work -- but they do not since a connection doesn&#39;t fail, it just doesn&#39;t respond.\r\n\r\nWhen I pulled the whole stack, this is where it stalls:\r\n\r\n\tSocketInputStream.socketRead0(FileDescriptor, byte[], int, int, int) line: not available [native method]\t\r\n\tSocketInputStream.read(byte[], int, int) line: 129\t\r\n\tReadAheadInputStream.fill(int) line: 113\t\r\n\tReadAheadInputStream.readFromUnderlyingStreamIfNecessary(byte[], int, int) line: 160\t\r\n\tReadAheadInputStream.read(byte[], int, int) line: 188\t\r\n\tMysqlIO.readFully(InputStream, byte[], int, int) line: 2428\t\r\n\tMysqlIO.reuseAndReadPacket(Buffer, int) line: 2882\t\r\n\tMysqlIO.reuseAndReadPacket(Buffer) line: 2871\t\r\n\tMysqlIO.checkErrorPacket(int) line: 3414\t\r\n\tMysqlIO.sendCommand(int, String, Buffer, boolean, String) line: 1936\t\r\n\tMysqlIO.sqlQueryDirect(StatementImpl, String, String, Buffer, int, int, int, boolean, String, Field[]) line: 2060\t\r\n\tJDBC4Connection(ConnectionImpl).execSQL(StatementImpl, String, int, Buffer, int, int, boolean, String, Field[], boolean) line: 2542\t\r\n\tJDBC4PreparedStatement(PreparedStatement).executeInternal(int, Buffer, boolean, boolean, Field[], boolean) line: 1734\t\r\n\tJDBC4PreparedStatement(PreparedStatement).executeQuery() line: 1885\t\r\n\tNewProxyPreparedStatement.executeQuery() line: 76\t\r\n\tC3P0PooledConnectionPoolManager.initializeAutomaticTestTable(String, DbAuth) line: 799\t\r\n\tC3P0PooledConnectionPoolManager.createPooledConnectionPool(DbAuth) line: 696\t\r\n\tC3P0PooledConnectionPoolManager.getPool(DbAuth) line: 257\t\r\n\tC3P0PooledConnectionPoolManager.getPool() line: 271\t\r\n\tComboPooledDataSource(AbstractPoolBackedDataSource).getNumThreadsAwaitingCheckoutDefaultUser() line: 203\t\r\n\tNativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available [native method]\t\r\n\tNativeMethodAccessorImpl.invoke(Object, Object[]) line: 39\t\r\n\tDelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 25\t\r\n\tMethod.invoke(Object, Object...) line: 597\t\r\n\tBeansUtils.extractAccessiblePropertiesToMap(Map, Object, Collection) line: 359\t\r\n\tBeansUtils.appendPropNamesAndValues(StringBuffer, Object, Collection) line: 324\t\r\n\tComboPooledDataSource.toString() line: 539\t\r\n\tComboPooledDataSource(AbstractPoolBackedDataSource).getPoolManager() line: 462\t\r\n\tComboPooledDataSource(AbstractPoolBackedDataSource).getConnection() line: 128\t\r\n\r\nWhen I googled &quot;socketRead0 timeout&quot; and &quot;socketRead0 hang&quot; -- I see a lot of problems but no real solutions.\r\n\r\nIs there any way to force a timeout period here?\r\n","title":"How to set a getConnection() timeout for c3p0?","body":"<p>Yesterday AWS's RDS went down -- and so did our database.</p>\n<p>When this happened, C3P0 would try to get a database connection and would hang.  I would obviously like my application to return an error page in these instances, rather than just waiting forever for a response.</p>\n<p>Here's what the code looks like:</p>\n<pre><code>ComboPooledDataSource db = new ComboPooledDataSource();\n...\nConnection conn = db.getConnection();\n</code></pre>\n<p>How can set a timeout for getting a connection from c3p0's connection pool?</p>\n<p>I thought checkoutTimeout() would be it -- but it's not.  It is &quot;the number of milliseconds a client calling getConnection() will wait for a Connection to be checked-in or acquired when the pool is exhausted.&quot;  Since the pool in not exhausted (it is just unavailable) this does not apply.</p>\n<p>I also thought setAcquireRetryAttempts and setAcquireIncrement would work -- but they do not since a connection doesn't fail, it just doesn't respond.</p>\n<p>When I pulled the whole stack, this is where it stalls:</p>\n<pre><code>SocketInputStream.socketRead0(FileDescriptor, byte[], int, int, int) line: not available [native method]    \nSocketInputStream.read(byte[], int, int) line: 129  \nReadAheadInputStream.fill(int) line: 113    \nReadAheadInputStream.readFromUnderlyingStreamIfNecessary(byte[], int, int) line: 160    \nReadAheadInputStream.read(byte[], int, int) line: 188   \nMysqlIO.readFully(InputStream, byte[], int, int) line: 2428 \nMysqlIO.reuseAndReadPacket(Buffer, int) line: 2882  \nMysqlIO.reuseAndReadPacket(Buffer) line: 2871   \nMysqlIO.checkErrorPacket(int) line: 3414    \nMysqlIO.sendCommand(int, String, Buffer, boolean, String) line: 1936    \nMysqlIO.sqlQueryDirect(StatementImpl, String, String, Buffer, int, int, int, boolean, String, Field[]) line: 2060   \nJDBC4Connection(ConnectionImpl).execSQL(StatementImpl, String, int, Buffer, int, int, boolean, String, Field[], boolean) line: 2542 \nJDBC4PreparedStatement(PreparedStatement).executeInternal(int, Buffer, boolean, boolean, Field[], boolean) line: 1734   \nJDBC4PreparedStatement(PreparedStatement).executeQuery() line: 1885 \nNewProxyPreparedStatement.executeQuery() line: 76   \nC3P0PooledConnectionPoolManager.initializeAutomaticTestTable(String, DbAuth) line: 799  \nC3P0PooledConnectionPoolManager.createPooledConnectionPool(DbAuth) line: 696    \nC3P0PooledConnectionPoolManager.getPool(DbAuth) line: 257   \nC3P0PooledConnectionPoolManager.getPool() line: 271 \nComboPooledDataSource(AbstractPoolBackedDataSource).getNumThreadsAwaitingCheckoutDefaultUser() line: 203    \nNativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available [native method]  \nNativeMethodAccessorImpl.invoke(Object, Object[]) line: 39  \nDelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 25  \nMethod.invoke(Object, Object...) line: 597  \nBeansUtils.extractAccessiblePropertiesToMap(Map, Object, Collection) line: 359  \nBeansUtils.appendPropNamesAndValues(StringBuffer, Object, Collection) line: 324 \nComboPooledDataSource.toString() line: 539  \nComboPooledDataSource(AbstractPoolBackedDataSource).getPoolManager() line: 462  \nComboPooledDataSource(AbstractPoolBackedDataSource).getConnection() line: 128   \n</code></pre>\n<p>When I googled &quot;socketRead0 timeout&quot; and &quot;socketRead0 hang&quot; -- I see a lot of problems but no real solutions.</p>\n<p>Is there any way to force a timeout period here?</p>\n"},{"tags":["java","docker","maven","jib","maven-jib"],"answers":[{"tags":[],"owner":{"account_id":1881220,"reputation":4005,"user_id":1701388,"display_name":"Chanseok Oh"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1677849502,"creation_date":1601323917,"answer_id":64108998,"question_id":64104769,"body_markdown":"(Jib dev here. I will very lightly touch on the subject at a very high level and only conceptually. Keep in mind that the following covers only one aspect of image building.)\r\n\r\nConceptually the anatomy of a container image is remarkably simple; it&#39;s just a collection of tarballs, plus some metadata about the image (about two JSON files). You&#39;ll get that if you untar some tarballs in an orderly fashion ([union mounting](https://en.wikipedia.org/wiki/Union_mount), to be specific), you are left with some files and directories; these are basically the filesystem contents of an image you&#39;ll get and see at runtime. Throw in a couple small JSON files in the scene for some metadata about the image (for example, environment variables at runtime, image entrypoint, which tarballs this image is composed of, etc.), and you already have a container image in your hands. Then, you communicate with a container registry via the [Docker Registry API](https://docs.docker.com/registry/spec/api/) (i.e., sending and receiving HTTP requests and responses) to upload those tarballs (after compression) and JSON files, and voila! You built and pushed an image to a registry.\r\n\r\nSo, yes, you can create those tarballs using the good old `tar` on the command-line (these tarballs are called &quot;image layers&quot;), create some JSON files with a text editor, and upload them to a registry using `curl`. I&#39;ve done that before. Of course, in order for any container runtime to be able to actually run such an image, your tarballs may need to include some minimally required skeleton files and directories to correctly function, for example, as a Linux system (not a lot actually). But still, there&#39;s no restriction in the contents of tarballs; they don&#39;t even have to be a valid tar archive. (Yes, you can abuse a container registry to upload any garbage data. For example, [this shell script](https://github.com/chanseokoh/docker-hub-upload-speed-test#uploading-using-curl-with-bash) uploads 40MB of random bytes to Docker Hub.) And you can still claim with the JSON metadata files that your (completely broken) &quot;image&quot; is composed of these garbage BLObs. (Of course, such an image will fail to run at runtime.)","title":"How does the Jib maven plugin build images without using a docker daemon?","body":"<p>(Jib dev here. I will very lightly touch on the subject at a very high level and only conceptually. Keep in mind that the following covers only one aspect of image building.)</p>\n<p>Conceptually the anatomy of a container image is remarkably simple; it's just a collection of tarballs, plus some metadata about the image (about two JSON files). You'll get that if you untar some tarballs in an orderly fashion (<a href=\"https://en.wikipedia.org/wiki/Union_mount\" rel=\"nofollow noreferrer\">union mounting</a>, to be specific), you are left with some files and directories; these are basically the filesystem contents of an image you'll get and see at runtime. Throw in a couple small JSON files in the scene for some metadata about the image (for example, environment variables at runtime, image entrypoint, which tarballs this image is composed of, etc.), and you already have a container image in your hands. Then, you communicate with a container registry via the <a href=\"https://docs.docker.com/registry/spec/api/\" rel=\"nofollow noreferrer\">Docker Registry API</a> (i.e., sending and receiving HTTP requests and responses) to upload those tarballs (after compression) and JSON files, and voila! You built and pushed an image to a registry.</p>\n<p>So, yes, you can create those tarballs using the good old <code>tar</code> on the command-line (these tarballs are called &quot;image layers&quot;), create some JSON files with a text editor, and upload them to a registry using <code>curl</code>. I've done that before. Of course, in order for any container runtime to be able to actually run such an image, your tarballs may need to include some minimally required skeleton files and directories to correctly function, for example, as a Linux system (not a lot actually). But still, there's no restriction in the contents of tarballs; they don't even have to be a valid tar archive. (Yes, you can abuse a container registry to upload any garbage data. For example, <a href=\"https://github.com/chanseokoh/docker-hub-upload-speed-test#uploading-using-curl-with-bash\" rel=\"nofollow noreferrer\">this shell script</a> uploads 40MB of random bytes to Docker Hub.) And you can still claim with the JSON metadata files that your (completely broken) &quot;image&quot; is composed of these garbage BLObs. (Of course, such an image will fail to run at runtime.)</p>\n"}],"owner":{"account_id":9064433,"reputation":568,"user_id":6749813,"display_name":"S.Tushinov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2772,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":64108998,"answer_count":1,"score":6,"last_activity_date":1677849502,"creation_date":1601305461,"question_id":64104769,"body_markdown":"For the past few months I have been experimenting with docker and have enjoyed the benefits of building and running java applications inside containers.\r\n\r\nA few weeks ago I stumbled upon the [jib maven plugin](https://github.com/GoogleContainerTools/jib) and noticed that jib can build images to docker registries **without using a docker daemon**.\r\n\r\nAfter adding jib to one of my projects and running `mvn clean install jib:build`(on a VM which doesn&#39;t have docker installed), I was surprised that jib actually built and pushed an image containing my project to a remote registry.\r\n\r\nOut of curiosity, I went online to read more about how jib builds and pushes docker images without having docker installed but found little to no information on the subject. I managed to find an [article](https://www.projectatomic.io/blog/2018/03/the-many-ways-to-build-oci-images/) which explains a few ways of creating images without using docker and also tried to understand how the maven goal `jib:build` works by reading it&#39;s [source code](https://github.com/GoogleContainerTools/jib/blob/master/jib-maven-plugin/src/main/java/com/google/cloud/tools/jib/maven/BuildImageMojo.java  &quot;https://github.com/GoogleContainerTools/jib/blob/master/jib-maven-plugin/src/main/java/com/google/cloud/tools/jib/maven/BuildImageMojo.java&quot;) but neither of the two gave me any insights on what&#39;s happening behind the sceneces when you run `jib:build`.\r\n\r\nI would greatly appreciate if someone shares more about the jib maven plugin and how it actually builds and pushes an image behind the scenes without using a docker daemon.\r\n","title":"How does the Jib maven plugin build images without using a docker daemon?","body":"<p>For the past few months I have been experimenting with docker and have enjoyed the benefits of building and running java applications inside containers.</p>\n<p>A few weeks ago I stumbled upon the <a href=\"https://github.com/GoogleContainerTools/jib\" rel=\"noreferrer\">jib maven plugin</a> and noticed that jib can build images to docker registries <strong>without using a docker daemon</strong>.</p>\n<p>After adding jib to one of my projects and running <code>mvn clean install jib:build</code>(on a VM which doesn't have docker installed), I was surprised that jib actually built and pushed an image containing my project to a remote registry.</p>\n<p>Out of curiosity, I went online to read more about how jib builds and pushes docker images without having docker installed but found little to no information on the subject. I managed to find an <a href=\"https://www.projectatomic.io/blog/2018/03/the-many-ways-to-build-oci-images/\" rel=\"noreferrer\">article</a> which explains a few ways of creating images without using docker and also tried to understand how the maven goal <code>jib:build</code> works by reading it's <a href=\"https://github.com/GoogleContainerTools/jib/blob/master/jib-maven-plugin/src/main/java/com/google/cloud/tools/jib/maven/BuildImageMojo.java\" rel=\"noreferrer\" title=\"https://github.com/GoogleContainerTools/jib/blob/master/jib-maven-plugin/src/main/java/com/google/cloud/tools/jib/maven/BuildImageMojo.java\">source code</a> but neither of the two gave me any insights on what's happening behind the sceneces when you run <code>jib:build</code>.</p>\n<p>I would greatly appreciate if someone shares more about the jib maven plugin and how it actually builds and pushes an image behind the scenes without using a docker daemon.</p>\n"},{"tags":["java","if-statement","io"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":4,"creation_date":1677847571,"post_id":75627240,"comment_id":133422628,"body_markdown":"I think you mean `\\\\s` instead of `//s`?","body":"I think you mean <code>\\\\s</code> instead of <code>&#47;&#47;s</code>?"}],"answers":[{"tags":[],"owner":{"account_id":9067171,"reputation":1177,"user_id":6751603,"accept_rate":100,"display_name":"JavaMan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677849254,"creation_date":1677849254,"answer_id":75627540,"question_id":75627240,"body_markdown":"You should use `\\\\` instead of `//`\r\n\r\n    String input = &quot;a , b , c , d&quot;;\r\n    String output = input.replaceAll(&quot;\\\\s*,\\\\s*&quot;, &quot;,&quot;);\r\n    System.out.println(output); // output: &quot;a,b,c,d&quot;","title":"How to remove spaces before and after the comma in java","body":"<p>You should use <code>\\\\</code> instead of <code>//</code></p>\n<pre><code>String input = &quot;a , b , c , d&quot;;\nString output = input.replaceAll(&quot;\\\\s*,\\\\s*&quot;, &quot;,&quot;);\nSystem.out.println(output); // output: &quot;a,b,c,d&quot;\n</code></pre>\n"}],"owner":{"account_id":27898378,"reputation":13,"user_id":21303169,"display_name":"unknown"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1677849912,"accepted_answer_id":75627540,"answer_count":1,"score":0,"last_activity_date":1677849254,"creation_date":1677847484,"question_id":75627240,"body_markdown":"I have an input mismatch error.\r\n\r\nused regular expression (&quot;//s\\*,//s\\*&quot;,&quot;,&quot;) but it doesn&#39;t work.","title":"How to remove spaces before and after the comma in java","body":"<p>I have an input mismatch error.</p>\n<p>used regular expression (&quot;//s*,//s*&quot;,&quot;,&quot;) but it doesn't work.</p>\n"},{"tags":["java","selenium-webdriver","xpath","tabs","relative-locators"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1677829551,"post_id":75624383,"comment_id":133418114,"body_markdown":"for all we know, the &#39;Book&#39;( button isn&#39;t trhere","body":"for all we know, the &#39;Book&#39;( button isn&#39;t trhere"},{"owner":{"account_id":23766170,"reputation":21,"user_id":17780910,"display_name":"Bug Hunter"},"score":0,"creation_date":1677838289,"post_id":75624383,"comment_id":133420257,"body_markdown":"bookbutton-RKEY:501c58c8-7838-4305-9a7f-68744ae5903d:25_0","body":"bookbutton-RKEY:501c58c8-7838-4305-9a7f-68744ae5903d:25_0"}],"answers":[{"tags":[],"owner":{"account_id":9067171,"reputation":1177,"user_id":6751603,"accept_rate":100,"display_name":"JavaMan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677848656,"creation_date":1677848656,"answer_id":75627435,"question_id":75624383,"body_markdown":"You could try to find the button via the class selector and ignore the randomly generated part of the ID (at least it looks like random), if you haven&#39;t already tried that.\r\n\r\n    By.cssSelector(&quot;button[id*=&#39;bookbutton&#39;]&quot;));","title":"Unable to click on button on travel website","body":"<p>You could try to find the button via the class selector and ignore the randomly generated part of the ID (at least it looks like random), if you haven't already tried that.</p>\n<pre><code>By.cssSelector(&quot;button[id*='bookbutton']&quot;));\n</code></pre>\n"}],"owner":{"account_id":23766170,"reputation":21,"user_id":17780910,"display_name":"Bug Hunter"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677848656,"creation_date":1677829459,"question_id":75624383,"body_markdown":" I have successfully launched MMT but after checking fares when I want to click on &quot;Book&quot; button it is giving errors as element not present I have tries xpath, class and id locators but still the same issue also applied the wait statement and tried presently in chrome browser below is the code snippet the code stopped working suddenly earlier it was working fine   \r\n           \r\n    \r\n    \r\n   \r\n\r\n     package Practice;\r\n        import org.junit.Assert;\r\n        import org.openqa.selenium.*;\r\n        import org.openqa.selenium.chrome.ChromeDriver;\r\n        import org.openqa.selenium.Alert;\r\n        import org.openqa.selenium.interactions.Actions;\r\n        import org.openqa.selenium.support.ui.ExpectedConditions;\r\n        import org.openqa.selenium.support.ui.WebDriverWait;\r\n        \r\n        import java.time.Duration;\r\n        import java.util.Iterator;\r\n        import java.util.Set;\r\n        import java.util.concurrent.TimeUnit;\r\n        \r\n        public class Mmt\r\n        {\r\n            public static void main(String[]args) throws InterruptedException {\r\n                System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;/home/gt51022/Downloads/chromedriver_linux64/chromedriver&quot;);\r\n                WebDriver driver = new ChromeDriver();\r\n                driver.get(&quot;https://www.makemytrip.com/&quot;);\r\n                driver.navigate().forward();\r\n                driver.manage().window().maximize();\r\n                //driver.findElement(By.xpath(&quot; //div[@class=\\&quot;fsw_inputBox searchCity inactiveWidget activeWidget\\&quot;]&quot;)).click();\r\n                Thread.sleep(2000);\r\n                driver.navigate().forward();\r\n                driver.findElement(By.id(&quot;fromCity&quot;)).sendKeys(&quot;IXC&quot;);\r\n                Thread.sleep(1000);\r\n                driver.findElement(By.xpath(&quot;//p[@class=\\&quot;font12 greyText appendBottom3\\&quot;]&quot;)).click();\r\n                Thread.sleep(1000);\r\n                //driver.findElement(By.xpath(&quot;//div[@class=\\&quot;fsw_inputBox searchToCity inactiveWidget activeWidget\\&quot;]&quot;)).click();\r\n                Thread.sleep(2000);\r\n                driver.navigate().forward();\r\n                driver.findElement(By.id(&quot;toCity&quot;)).sendKeys(&quot;BOM&quot;);\r\n                Thread.sleep(2000);\r\n                driver.findElement(By.xpath(&quot;//p[@class=\\&quot;font12 greyText appendBottom3\\&quot;]&quot;)).click();\r\n                // Selecting the date from here //\r\n                driver.findElement(By.xpath(&quot;/html/body/div[1]/div/div[2]/div/div/div[2]/div[1]/div[3]/div[1]/div/div/div/div[2]/div/div[2]/div[1]/div[3]/div[1]/div[7]&quot;)).click();\r\n                // Clicking on search button here //\r\n                driver.findElement(By.xpath(&quot;/html/body/div[1]/div/div[2]/div/div/div[2]/p/a&quot;)).click();\r\n        \r\n                //driver.findElement(By.xpath(&quot;//*[@id=\\&quot;root\\&quot;]/div/div[2]/div[2]/div[2]/div/div/div[3]/button&quot;)).click();\r\n                String parentWindowHandler = driver.getWindowHandle(); // Store your parent window\r\n                String subWindowHandler = null;\r\n        \r\n                Set&lt;String&gt; handles = driver.getWindowHandles(); // get all window handles\r\n                Iterator&lt;String&gt; iterator = handles.iterator();\r\n                while (iterator.hasNext()){\r\n                    subWindowHandler = iterator.next();\r\n                }\r\n                driver.switchTo().window(subWindowHandler); // switch to popup window\r\n        \r\n                // Now you are in the popup window, perform necessary actions here\r\n                Thread.sleep(4000);\r\n                driver.navigate().forward();\r\n                driver.findElement(By.xpath(&quot;//span[@class=\\&quot;bgProperties icon20 overlayCrossIcon\\&quot;]&quot;)).click();\r\n                driver.switchTo().window(parentWindowHandler);  // switch back to parent window\r\n                // Selecting the flight from here //\r\n                Thread.sleep(4000);\r\n                driver.findElement(By.xpath(&quot; //span[@class=\\&quot;appendRight8\\&quot;]&quot;)).click();\r\n                Thread.sleep(4000);\r\n                driver.navigate().forward();\r\n                //Actions actions = new Actions(driver);\r\n                WebElement Booknow = new WebDriverWait(driver, Duration.ofSeconds(10))\r\n                        .until(ExpectedConditions.elementToBeClickable(By.id(&quot;bookbutton-RKEY:501c58c8-7838-4305-9a7f-68744ae5903d:25_0&quot;)));\r\n                driver.switchTo().newWindow(WindowType.TAB);\r\n                JavascriptExecutor js = (JavascriptExecutor) driver;\r\n                js.executeScript(&quot;window.scrollTo(0, document.body.scrollHeight)&quot;);\r\n                driver.findElement(By.className(&quot;addTravellerBtn&quot;)).click();\r\n                driver.findElement(By.className(&quot;tvlrInput&quot;)).sendKeys(&quot;person&quot;);\r\n                driver.findElement(By.xpath(&quot;(//input[@class=\\&quot;tvlrInput \\&quot;])[2] &quot;)).click();\r\n                driver.findElement(By.xpath(&quot;(//label)[4]&quot;)).click();\r\n                driver.findElement(By.className(&quot;dropdown__value-container css-1hwfws3&quot;)).click();\r\n                driver.findElement(By.id(&quot;react-select-3-option-1&quot;)).click();\r\n                driver.findElement(By.xpath(&quot;(//input[@class=\\&quot;tvlrInput \\&quot;])[4]&quot;)).sendKeys(&quot;1234567890&quot;);\r\n                driver.findElement(By.xpath(&quot;(//div[@class=\\&quot;relative\\&quot;])[5]&quot;)).click();\r\n                driver.findElement(By.xpath(&quot;(//input[@class=\\&quot;tvlrInput \\&quot;])[5]&quot;)).sendKeys(&quot;quotricogredu-3358@yopmail.com&quot;);\r\n        \r\n        \r\n        \r\n        \r\n        \r\n            }\r\n        }","title":"Unable to click on button on travel website","body":"<p>I have successfully launched MMT but after checking fares when I want to click on &quot;Book&quot; button it is giving errors as element not present I have tries xpath, class and id locators but still the same issue also applied the wait statement and tried presently in chrome browser below is the code snippet the code stopped working suddenly earlier it was working fine</p>\n<pre><code> package Practice;\n    import org.junit.Assert;\n    import org.openqa.selenium.*;\n    import org.openqa.selenium.chrome.ChromeDriver;\n    import org.openqa.selenium.Alert;\n    import org.openqa.selenium.interactions.Actions;\n    import org.openqa.selenium.support.ui.ExpectedConditions;\n    import org.openqa.selenium.support.ui.WebDriverWait;\n    \n    import java.time.Duration;\n    import java.util.Iterator;\n    import java.util.Set;\n    import java.util.concurrent.TimeUnit;\n    \n    public class Mmt\n    {\n        public static void main(String[]args) throws InterruptedException {\n            System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;/home/gt51022/Downloads/chromedriver_linux64/chromedriver&quot;);\n            WebDriver driver = new ChromeDriver();\n            driver.get(&quot;https://www.makemytrip.com/&quot;);\n            driver.navigate().forward();\n            driver.manage().window().maximize();\n            //driver.findElement(By.xpath(&quot; //div[@class=\\&quot;fsw_inputBox searchCity inactiveWidget activeWidget\\&quot;]&quot;)).click();\n            Thread.sleep(2000);\n            driver.navigate().forward();\n            driver.findElement(By.id(&quot;fromCity&quot;)).sendKeys(&quot;IXC&quot;);\n            Thread.sleep(1000);\n            driver.findElement(By.xpath(&quot;//p[@class=\\&quot;font12 greyText appendBottom3\\&quot;]&quot;)).click();\n            Thread.sleep(1000);\n            //driver.findElement(By.xpath(&quot;//div[@class=\\&quot;fsw_inputBox searchToCity inactiveWidget activeWidget\\&quot;]&quot;)).click();\n            Thread.sleep(2000);\n            driver.navigate().forward();\n            driver.findElement(By.id(&quot;toCity&quot;)).sendKeys(&quot;BOM&quot;);\n            Thread.sleep(2000);\n            driver.findElement(By.xpath(&quot;//p[@class=\\&quot;font12 greyText appendBottom3\\&quot;]&quot;)).click();\n            // Selecting the date from here //\n            driver.findElement(By.xpath(&quot;/html/body/div[1]/div/div[2]/div/div/div[2]/div[1]/div[3]/div[1]/div/div/div/div[2]/div/div[2]/div[1]/div[3]/div[1]/div[7]&quot;)).click();\n            // Clicking on search button here //\n            driver.findElement(By.xpath(&quot;/html/body/div[1]/div/div[2]/div/div/div[2]/p/a&quot;)).click();\n    \n            //driver.findElement(By.xpath(&quot;//*[@id=\\&quot;root\\&quot;]/div/div[2]/div[2]/div[2]/div/div/div[3]/button&quot;)).click();\n            String parentWindowHandler = driver.getWindowHandle(); // Store your parent window\n            String subWindowHandler = null;\n    \n            Set&lt;String&gt; handles = driver.getWindowHandles(); // get all window handles\n            Iterator&lt;String&gt; iterator = handles.iterator();\n            while (iterator.hasNext()){\n                subWindowHandler = iterator.next();\n            }\n            driver.switchTo().window(subWindowHandler); // switch to popup window\n    \n            // Now you are in the popup window, perform necessary actions here\n            Thread.sleep(4000);\n            driver.navigate().forward();\n            driver.findElement(By.xpath(&quot;//span[@class=\\&quot;bgProperties icon20 overlayCrossIcon\\&quot;]&quot;)).click();\n            driver.switchTo().window(parentWindowHandler);  // switch back to parent window\n            // Selecting the flight from here //\n            Thread.sleep(4000);\n            driver.findElement(By.xpath(&quot; //span[@class=\\&quot;appendRight8\\&quot;]&quot;)).click();\n            Thread.sleep(4000);\n            driver.navigate().forward();\n            //Actions actions = new Actions(driver);\n            WebElement Booknow = new WebDriverWait(driver, Duration.ofSeconds(10))\n                    .until(ExpectedConditions.elementToBeClickable(By.id(&quot;bookbutton-RKEY:501c58c8-7838-4305-9a7f-68744ae5903d:25_0&quot;)));\n            driver.switchTo().newWindow(WindowType.TAB);\n            JavascriptExecutor js = (JavascriptExecutor) driver;\n            js.executeScript(&quot;window.scrollTo(0, document.body.scrollHeight)&quot;);\n            driver.findElement(By.className(&quot;addTravellerBtn&quot;)).click();\n            driver.findElement(By.className(&quot;tvlrInput&quot;)).sendKeys(&quot;person&quot;);\n            driver.findElement(By.xpath(&quot;(//input[@class=\\&quot;tvlrInput \\&quot;])[2] &quot;)).click();\n            driver.findElement(By.xpath(&quot;(//label)[4]&quot;)).click();\n            driver.findElement(By.className(&quot;dropdown__value-container css-1hwfws3&quot;)).click();\n            driver.findElement(By.id(&quot;react-select-3-option-1&quot;)).click();\n            driver.findElement(By.xpath(&quot;(//input[@class=\\&quot;tvlrInput \\&quot;])[4]&quot;)).sendKeys(&quot;1234567890&quot;);\n            driver.findElement(By.xpath(&quot;(//div[@class=\\&quot;relative\\&quot;])[5]&quot;)).click();\n            driver.findElement(By.xpath(&quot;(//input[@class=\\&quot;tvlrInput \\&quot;])[5]&quot;)).sendKeys(&quot;quotricogredu-3358@yopmail.com&quot;);\n    \n    \n    \n    \n    \n        }\n    }\n</code></pre>\n"},{"tags":["java","android","dynamic"],"answers":[{"tags":[],"owner":{"account_id":22173831,"reputation":659,"user_id":16418724,"display_name":"Nikhil S Marathe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677848284,"creation_date":1677847742,"answer_id":75627296,"question_id":75627295,"body_markdown":"Get String value from Source of Value.\r\n\r\nThen Convert it in `double`\r\n\r\nafter declare `DecimalFormat` Method. and follow bellowed step.\r\n\r\n```\r\nString value = &quot;10.0000000&quot;\r\ndouble valueInFloat = Double.parseDouble(value);\r\n```\r\n\r\nDeclare Method Now.\r\n\r\n```\r\nDecimalFormat decimalPoint = new DecimalFormat(&quot;0.00&quot;); \r\ntextview.setText(decimalPoint.formate(valueInFloat));\r\n```\r\n\r\nOutput: is `10.00`","title":"How to give two decimal point of double which converted from String value in android java","body":"<p>Get String value from Source of Value.</p>\n<p>Then Convert it in <code>double</code></p>\n<p>after declare <code>DecimalFormat</code> Method. and follow bellowed step.</p>\n<pre><code>String value = &quot;10.0000000&quot;\ndouble valueInFloat = Double.parseDouble(value);\n</code></pre>\n<p>Declare Method Now.</p>\n<pre><code>DecimalFormat decimalPoint = new DecimalFormat(&quot;0.00&quot;); \ntextview.setText(decimalPoint.formate(valueInFloat));\n</code></pre>\n<p>Output: is <code>10.00</code></p>\n"}],"owner":{"account_id":22173831,"reputation":659,"user_id":16418724,"display_name":"Nikhil S Marathe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1677848233,"answer_count":1,"score":-3,"last_activity_date":1677848498,"creation_date":1677847742,"question_id":75627295,"body_markdown":"I Have String Value. \r\nthen how to convert in float value and then give it two decimal points?","title":"How to give two decimal point of double which converted from String value in android java","body":"<p>I Have String Value.\nthen how to convert in float value and then give it two decimal points?</p>\n"},{"tags":["java","spring-boot","jobrunr"],"comments":[{"owner":{"account_id":986840,"reputation":784,"user_id":1005124,"accept_rate":29,"display_name":"rdehuyss"},"score":0,"creation_date":1678095964,"post_id":75627404,"comment_id":133460475,"body_markdown":"Can you reproduce this in a GitHub repo? If so, I (creator of JobRunr) would consider this a bug. However, there are over 4000 unit and integration tests that cover this so I would find this really strange.\nAre you using custom JobFilters?","body":"Can you reproduce this in a GitHub repo? If so, I (creator of JobRunr) would consider this a bug. However, there are over 4000 unit and integration tests that cover this so I would find this really strange. Are you using custom JobFilters?"},{"owner":{"account_id":18328293,"reputation":185,"user_id":13347446,"display_name":"Jithin M V"},"score":0,"creation_date":1678174165,"post_id":75627404,"comment_id":133477445,"body_markdown":"Hi @rdehuyss\nNo I was not using custom filters then. But When I tweaked my jobrunr config a lil bit this started working all of a sudden. \n.withJobFilter(new RetryFilter(3,5)) // Added this\n\nNow my jobs are getting retried 3 times with a back offf policy of 5. I am all good and this works like a charm. You created an amazing thing btw. Thanks :)","body":"Hi @rdehuyss No I was not using custom filters then. But When I tweaked my jobrunr config a lil bit this started working all of a sudden.  .withJobFilter(new RetryFilter(3,5)) // Added this  Now my jobs are getting retried 3 times with a back offf policy of 5. I am all good and this works like a charm. You created an amazing thing btw. Thanks :)"}],"owner":{"account_id":18328293,"reputation":185,"user_id":13347446,"display_name":"Jithin M V"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":563,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677848463,"creation_date":1677848463,"question_id":75627404,"body_markdown":"I have a Spring Boot application that uses the JobRunr library to run a set of background jobs. The application has no REST endpoints or any external-facing features. The primary job is a recurring job (R), which triggers several fire-and-forget jobs (A, B, and C), which in turn trigger another set of fire-and-forget jobs (E, F, and G).\r\n\r\nWhile the application is running, I&#39;m encountering exceptions with job E. Rather than catching the exceptions, I&#39;m simply throwing them back as jobrunr documentation suggests. However, all jobs (R, A, and E) are reported as succeeded, despite the exception with job E. In fact, I expected job E to be in the failed state.\r\n\r\nHas anyone else experienced a similar issue or have any insight into what might be causing this behavior?\r\n\r\nI am enqueuing the recurring job as\r\n\r\n    @SpringBootApplication\r\n    public class NotificationApplication {\r\n        public static void main(String[] args) {\r\n            SpringApplication.run(NotificationApplication.class, args);\r\n        }\r\n        @Bean\r\n        public CommandLineRunner demo(RecurringBackGroundJobService service) {\r\n            return (args) -&gt; {\r\n                BackgroundJob.scheduleRecurrently(\r\n                        &quot;generate-and-send-notification-emails&quot;,\r\n                        Cron.every5minutes(),\r\n                        RecurringBackGroundJobService::getNotificationsAndProcess\r\n                );\r\n                Thread.currentThread().join();\r\n            };\r\n        }\r\n\r\nThe recurring job looks like,\r\n\r\n        @Service\r\n        public class RecurringBackGroundJobService {\r\n        \r\n            @Autowired\r\n            private NotificationService notificationQueueService;\r\n            @Transactional(readOnly = true)\r\n            @Job(name = &quot;The main recurring job spawning all the background jobs to send out emails&quot;)\r\n            public void getNotificationsAndProcess() {\r\n                Stream&lt;Long&gt; organizationHavingPendingNotifications =\r\n                        notificationQueueService.findDistinctOrganizationNotificationsWithDeliverStatus(Constants.PENDING);\r\n                BackgroundJob.&lt;TemplateSegregationBackGroundJob, Long&gt;enqueue(organizationHavingPendingNotifications,\r\n                        (fireAndForgetBackGroundJobService, organizationId) -&gt;\r\n                                fireAndForgetBackGroundJobService.segregateTemplateLevel(organizationId));\r\n            }\r\n        }\r\n    \r\n    The first layer of fire and forget job looks like\r\n    \r\n    @Service\r\n    public class TemplateSegregationBackGroundJob {\r\n    \r\n        @Autowired\r\n        private NotificationService notificationQueueService;\r\n    \r\n        @Transactional(readOnly = true)\r\n        @Job(name = &quot;Segregate the notifications as templates for organization/user with id: %0&quot;)\r\n        public void segregateTemplateLevel(Long organizationId) throws Exception {\r\n            final Stream&lt;NotificationTemplate&gt; pendingTemplatesOfOrganization =\r\n                    notificationQueueService.findDistinctTemplatesOfOrganizationWithDeliverStatus(organizationId,Constants.PENDING);\r\n            BackgroundJob.&lt;EmailServiceBackgroundJob, NotificationTemplate&gt;\r\n                    enqueue(pendingTemplatesOfOrganization, (emailServiceBackgroundJob, notificationTemplate) -&gt;\r\n                    emailServiceBackgroundJob.generateAndSendEmail(notificationTemplate, organizationId));\r\n        }\r\n    }\r\n\r\n\r\nNow coming to the last layer, The main job, where I have all the logic and there I am encountering exceptions. \r\n\r\n \r\n\r\n     @Job(name = &quot;Generate and send notification email of type: %0 for organization/user: %1&quot;)\r\n        public void generateAndSendEmail(NotificationTemplate notificationTemplate, Long organizationId) throws Exception {\r\n            // First of all get the processed email template from liferay API\r\n           // exception\r\n    }\r\n","title":"Why JobRunr jobs are showing with a status SUCCEEDED Even after failing?","body":"<p>I have a Spring Boot application that uses the JobRunr library to run a set of background jobs. The application has no REST endpoints or any external-facing features. The primary job is a recurring job (R), which triggers several fire-and-forget jobs (A, B, and C), which in turn trigger another set of fire-and-forget jobs (E, F, and G).</p>\n<p>While the application is running, I'm encountering exceptions with job E. Rather than catching the exceptions, I'm simply throwing them back as jobrunr documentation suggests. However, all jobs (R, A, and E) are reported as succeeded, despite the exception with job E. In fact, I expected job E to be in the failed state.</p>\n<p>Has anyone else experienced a similar issue or have any insight into what might be causing this behavior?</p>\n<p>I am enqueuing the recurring job as</p>\n<pre><code>@SpringBootApplication\npublic class NotificationApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(NotificationApplication.class, args);\n    }\n    @Bean\n    public CommandLineRunner demo(RecurringBackGroundJobService service) {\n        return (args) -&gt; {\n            BackgroundJob.scheduleRecurrently(\n                    &quot;generate-and-send-notification-emails&quot;,\n                    Cron.every5minutes(),\n                    RecurringBackGroundJobService::getNotificationsAndProcess\n            );\n            Thread.currentThread().join();\n        };\n    }\n</code></pre>\n<p>The recurring job looks like,</p>\n<pre><code>    @Service\n    public class RecurringBackGroundJobService {\n    \n        @Autowired\n        private NotificationService notificationQueueService;\n        @Transactional(readOnly = true)\n        @Job(name = &quot;The main recurring job spawning all the background jobs to send out emails&quot;)\n        public void getNotificationsAndProcess() {\n            Stream&lt;Long&gt; organizationHavingPendingNotifications =\n                    notificationQueueService.findDistinctOrganizationNotificationsWithDeliverStatus(Constants.PENDING);\n            BackgroundJob.&lt;TemplateSegregationBackGroundJob, Long&gt;enqueue(organizationHavingPendingNotifications,\n                    (fireAndForgetBackGroundJobService, organizationId) -&gt;\n                            fireAndForgetBackGroundJobService.segregateTemplateLevel(organizationId));\n        }\n    }\n\nThe first layer of fire and forget job looks like\n\n@Service\npublic class TemplateSegregationBackGroundJob {\n\n    @Autowired\n    private NotificationService notificationQueueService;\n\n    @Transactional(readOnly = true)\n    @Job(name = &quot;Segregate the notifications as templates for organization/user with id: %0&quot;)\n    public void segregateTemplateLevel(Long organizationId) throws Exception {\n        final Stream&lt;NotificationTemplate&gt; pendingTemplatesOfOrganization =\n                notificationQueueService.findDistinctTemplatesOfOrganizationWithDeliverStatus(organizationId,Constants.PENDING);\n        BackgroundJob.&lt;EmailServiceBackgroundJob, NotificationTemplate&gt;\n                enqueue(pendingTemplatesOfOrganization, (emailServiceBackgroundJob, notificationTemplate) -&gt;\n                emailServiceBackgroundJob.generateAndSendEmail(notificationTemplate, organizationId));\n    }\n}\n</code></pre>\n<p>Now coming to the last layer, The main job, where I have all the logic and there I am encountering exceptions.</p>\n<pre><code> @Job(name = &quot;Generate and send notification email of type: %0 for organization/user: %1&quot;)\n    public void generateAndSendEmail(NotificationTemplate notificationTemplate, Long organizationId) throws Exception {\n        // First of all get the processed email template from liferay API\n       // exception\n}\n</code></pre>\n"},{"tags":["java","arrays","spring","oop","java-8"],"comments":[{"owner":{"account_id":6243711,"reputation":1571,"user_id":4856413,"display_name":"sanjeevRm"},"score":0,"creation_date":1627626915,"post_id":68586402,"comment_id":121210904,"body_markdown":"StringBuilder would be prefered","body":"StringBuilder would be prefered"},{"owner":{"account_id":5126886,"reputation":20904,"user_id":4108590,"accept_rate":57,"display_name":"Ravindra Ranwala"},"score":0,"creation_date":1627628201,"post_id":68586402,"comment_id":121211325,"body_markdown":"You may format your code by indenting it.","body":"You may format your code by indenting it."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1627639862,"post_id":68586402,"comment_id":121215704,"body_markdown":"Assuming there’s a large number of these `if` statements, a `StringBuilder` would be preferable, but then, you should also be concerned about these repeated linear searches.","body":"Assuming there’s a large number of these <code>if</code> statements, a <code>StringBuilder</code> would be preferable, but then, you should also be concerned about these repeated linear searches."},{"owner":{"account_id":5715690,"reputation":2296,"user_id":4515989,"accept_rate":78,"display_name":"Felix"},"score":0,"creation_date":1627642252,"post_id":68586402,"comment_id":121216571,"body_markdown":"Even if a `StringBuilder` is preferred over a `String +=` here, the `.contains`, `List` and general structure of the code here are most likely having a bigger impact than `StringBuilder` vs `String`. For example, If all your conditions look like this (each value in the list maps to exactly one value the resulting string), you could just loop trough the List once, add a `switch-case` and concat using a `StringBuilder` in that loop. Or use a `Set`. Each call to `contains` on a `List` has to loop through all elements until it finds the queried value.\n\nThen again, dont do premature optimization.","body":"Even if a <code>StringBuilder</code> is preferred over a <code>String +=</code> here, the <code>.contains</code>, <code>List</code> and general structure of the code here are most likely having a bigger impact than <code>StringBuilder</code> vs <code>String</code>. For example, If all your conditions look like this (each value in the list maps to exactly one value the resulting string), you could just loop trough the List once, add a <code>switch-case</code> and concat using a <code>StringBuilder</code> in that loop. Or use a <code>Set</code>. Each call to <code>contains</code> on a <code>List</code> has to loop through all elements until it finds the queried value.  Then again, dont do premature optimization."}],"answers":[{"tags":[],"owner":{"account_id":13843940,"reputation":391,"user_id":9993505,"display_name":"Shimron Duan"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1627627198,"creation_date":1627627198,"answer_id":68586473,"question_id":68586402,"body_markdown":"**StringBuilder** is the best for this scenario because it&#39;s mutable. the **String** is immutable so when you modify the string it creates a new object.","title":"String vs StringBuilder","body":"<p><strong>StringBuilder</strong> is the best for this scenario because it's mutable. the <strong>String</strong> is immutable so when you modify the string it creates a new object.</p>\n"},{"tags":[],"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1627659560,"creation_date":1627639207,"answer_id":68589058,"question_id":68586402,"body_markdown":"It seems that for the given task it would be better to get rid of the multiple duplicated `if` statements by defining a _list_ of the keys to match the input list and use Stream API to generate the string id, e.g. `Collectors.joining` [with delimiter](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#joining-java.lang.CharSequence-) or [without the delimiter](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#joining--).\r\n\r\nAssuming that there is a single rule to create a part of the id: append `&quot;Test Value &quot; + key.toUpperCase()`, the implementation may look as follows:\r\n```java\r\nfinal List&lt;String&gt; keys = Arrays.asList(\r\n    &quot;name&quot;, &quot;age&quot; /* and other needed keys*/\r\n);\r\n\r\npublic String createId(List&lt;String&gt; list) {\r\n    return keys\r\n            .stream()\r\n            .filter(list::contains)\r\n            .map(String::toUpperCase)\r\n            .map(str -&gt; &quot;Test Value &quot; + str)\r\n            .collect(Collectors.joining(&quot;_&quot;)); // or Collectors.joining()\r\n}\r\n\r\nSystem.out.println(createId(Arrays.asList(&quot;age&quot;, &quot;name&quot;, &quot;surname&quot;)));\r\n// output: Test Value NAME_Test Value AGE\r\n```\r\n----\r\nIf custom parts should be provided for `name`, `age`, etc., a `Map` of matches should be prepared and used, also it may make sense to convert the input `list` into `Set&lt;String` to facilitate look-ups:\r\n```java\r\nfinal Map&lt;String, String&gt; keys = new LinkedHashMap&lt;&gt;(); {\r\n    // fill the map in special order\r\n    keys.put(&quot;name&quot;, &quot;Name Part&quot;);\r\n    keys.put(&quot;age&quot;, &quot;Test Age&quot;);\r\n    /* and other needed keys*/\r\n}\r\n\r\npublic String createId(List&lt;String&gt; list) {\r\n    Set&lt;String&gt; words = new HashSet&lt;&gt;(list);\r\n    return keys.keySet()\r\n            .stream()\r\n            .filter(words::contains) // faster lookup O(1) at the cost of another collection\r\n            .map(keys::get)\r\n            .collect(Collectors.joining(&quot;_&quot;)); // or Collectors.joining()\r\n}\r\n\r\nSystem.out.println(createId(Arrays.asList(&quot;age&quot;, &quot;surname&quot;, &quot;name&quot;)));\r\n// output: Name Part_Test Age\r\n```","title":"String vs StringBuilder","body":"<p>It seems that for the given task it would be better to get rid of the multiple duplicated <code>if</code> statements by defining a <em>list</em> of the keys to match the input list and use Stream API to generate the string id, e.g. <code>Collectors.joining</code> <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#joining-java.lang.CharSequence-\" rel=\"nofollow noreferrer\">with delimiter</a> or <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#joining--\" rel=\"nofollow noreferrer\">without the delimiter</a>.</p>\n<p>Assuming that there is a single rule to create a part of the id: append <code>&quot;Test Value &quot; + key.toUpperCase()</code>, the implementation may look as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final List&lt;String&gt; keys = Arrays.asList(\n    &quot;name&quot;, &quot;age&quot; /* and other needed keys*/\n);\n\npublic String createId(List&lt;String&gt; list) {\n    return keys\n            .stream()\n            .filter(list::contains)\n            .map(String::toUpperCase)\n            .map(str -&gt; &quot;Test Value &quot; + str)\n            .collect(Collectors.joining(&quot;_&quot;)); // or Collectors.joining()\n}\n\nSystem.out.println(createId(Arrays.asList(&quot;age&quot;, &quot;name&quot;, &quot;surname&quot;)));\n// output: Test Value NAME_Test Value AGE\n</code></pre>\n<hr />\n<p>If custom parts should be provided for <code>name</code>, <code>age</code>, etc., a <code>Map</code> of matches should be prepared and used, also it may make sense to convert the input <code>list</code> into <code>Set&lt;String</code> to facilitate look-ups:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final Map&lt;String, String&gt; keys = new LinkedHashMap&lt;&gt;(); {\n    // fill the map in special order\n    keys.put(&quot;name&quot;, &quot;Name Part&quot;);\n    keys.put(&quot;age&quot;, &quot;Test Age&quot;);\n    /* and other needed keys*/\n}\n\npublic String createId(List&lt;String&gt; list) {\n    Set&lt;String&gt; words = new HashSet&lt;&gt;(list);\n    return keys.keySet()\n            .stream()\n            .filter(words::contains) // faster lookup O(1) at the cost of another collection\n            .map(keys::get)\n            .collect(Collectors.joining(&quot;_&quot;)); // or Collectors.joining()\n}\n\nSystem.out.println(createId(Arrays.asList(&quot;age&quot;, &quot;surname&quot;, &quot;name&quot;)));\n// output: Name Part_Test Age\n</code></pre>\n"},{"tags":[],"owner":{"account_id":62234,"reputation":19819,"user_id":185034,"accept_rate":100,"display_name":"Paul"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1627649790,"creation_date":1627649790,"answer_id":68591334,"question_id":68586402,"body_markdown":"In general your understanding is correct about when to use `String` concatenation vs `StringBuilder`. The [Java Language Specification][1] says\r\n\r\n&gt; To increase the performance of repeated string concatenation, a Java\r\n&gt; compiler may use the StringBuffer class or a similar technique to\r\n&gt; reduce the number of intermediate String objects that are created by\r\n&gt; evaluation of an expression.\r\n\r\nFor the larger majority of cases you should use whichever method results in better readability and maintainability.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jls/se16/html/jls-15.html#jls-15.18.1","title":"String vs StringBuilder","body":"<p>In general your understanding is correct about when to use <code>String</code> concatenation vs <code>StringBuilder</code>. The <a href=\"https://docs.oracle.com/javase/specs/jls/se16/html/jls-15.html#jls-15.18.1\" rel=\"nofollow noreferrer\">Java Language Specification</a> says</p>\n<blockquote>\n<p>To increase the performance of repeated string concatenation, a Java\ncompiler may use the StringBuffer class or a similar technique to\nreduce the number of intermediate String objects that are created by\nevaluation of an expression.</p>\n</blockquote>\n<p>For the larger majority of cases you should use whichever method results in better readability and maintainability.</p>\n"},{"tags":[],"owner":{"account_id":2011614,"reputation":1,"user_id":6230601,"display_name":"Pieter van Onselen"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1677848094,"creation_date":1677848043,"answer_id":75627342,"question_id":68586402,"body_markdown":"As already said **StringBuilder** is immutable and **String** is not.\r\n\r\nTo add to this, when compiler compiles string concatenations it converts it to StringBuilder. [String concatenation in toString in Java][1]\r\n\r\nSomething else to keep in mind is that `id+=&quot;TEST VALUE NAME&quot;;` will add complicity if you do code analysis with Sonar or other tools.\r\n\r\nUsing StringBuilder will not add complexity with analysis tools.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1532461/stringbuilder-vs-string-concatenation-in-tostring-in-java","title":"String vs StringBuilder","body":"<p>As already said <strong>StringBuilder</strong> is immutable and <strong>String</strong> is not.</p>\n<p>To add to this, when compiler compiles string concatenations it converts it to StringBuilder. <a href=\"https://stackoverflow.com/questions/1532461/stringbuilder-vs-string-concatenation-in-tostring-in-java\">String concatenation in toString in Java</a></p>\n<p>Something else to keep in mind is that <code>id+=&quot;TEST VALUE NAME&quot;;</code> will add complicity if you do code analysis with Sonar or other tools.</p>\n<p>Using StringBuilder will not add complexity with analysis tools.</p>\n"}],"owner":{"account_id":14139194,"reputation":425,"user_id":10214546,"display_name":"Tech Geek"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":294,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":4,"score":0,"last_activity_date":1677848094,"creation_date":1627626758,"question_id":68586402,"body_markdown":"I have a condition like :\r\n\r\n    public String createId(List&lt;String&gt; list)\r\n    {\r\n    String id=&quot;&quot;;\r\n    if(list.contains(&quot;name&quot;))\r\n    id+=&quot;TEST VALUE NAME&quot;;\r\n    if(list.contains(&quot;age&quot;))\r\n    id+=&quot;Test Value AGE&quot;;\r\n    .\r\n    .\r\n    . likewise many if condition\r\n    return id;\r\n    }\r\n\r\nAs per my understanding we should use **StringBuilder** in loop condition and **String** in simple concatenation. So here wanted to ask I should use ***String or StringBuilder***? Kindly suggest","title":"String vs StringBuilder","body":"<p>I have a condition like :</p>\n<pre><code>public String createId(List&lt;String&gt; list)\n{\nString id=&quot;&quot;;\nif(list.contains(&quot;name&quot;))\nid+=&quot;TEST VALUE NAME&quot;;\nif(list.contains(&quot;age&quot;))\nid+=&quot;Test Value AGE&quot;;\n.\n.\n. likewise many if condition\nreturn id;\n}\n</code></pre>\n<p>As per my understanding we should use <strong>StringBuilder</strong> in loop condition and <strong>String</strong> in simple concatenation. So here wanted to ask I should use <em><strong>String or StringBuilder</strong></em>? Kindly suggest</p>\n"},{"tags":["java","spring","cron"],"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":2,"creation_date":1677845766,"post_id":75626659,"comment_id":133422144,"body_markdown":"`@Scheduled` is repeatable, so how about adding two schedules: one with `0 0/30 9-16 * * MON-FRI` and one for `0 0 17 * * MON-FRI`?","body":"<code>@Scheduled</code> is repeatable, so how about adding two schedules: one with <code>0 0&#47;30 9-16 * * MON-FRI</code> and one for <code>0 0 17 * * MON-FRI</code>?"}],"answers":[{"tags":[],"owner":{"account_id":9067171,"reputation":1177,"user_id":6751603,"accept_rate":100,"display_name":"JavaMan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677848019,"creation_date":1677848019,"answer_id":75627338,"question_id":75626659,"body_markdown":"I think you could use\r\n\r\n    0 0/30 9-16,17 * * MON-FRI\r\n\r\nBut I&#39;m not sure if this works using Spring","title":"Weekdays 9:00 till 17:00 every 30 minutes Spring Cron job","body":"<p>I think you could use</p>\n<pre><code>0 0/30 9-16,17 * * MON-FRI\n</code></pre>\n<p>But I'm not sure if this works using Spring</p>\n"}],"owner":{"account_id":26289969,"reputation":313,"user_id":19957114,"display_name":"dev-rifaii"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1677848019,"creation_date":1677843824,"question_id":75626659,"body_markdown":"I tried this expression:\r\n```\r\n0 0/30 9-17 * * MON-FRI\r\n```\r\nWhich works almost as I want it to except that it runs 1 extra time at 17:30, how can I make last execution in a day at 17:00?","title":"Weekdays 9:00 till 17:00 every 30 minutes Spring Cron job","body":"<p>I tried this expression:</p>\n<pre><code>0 0/30 9-17 * * MON-FRI\n</code></pre>\n<p>Which works almost as I want it to except that it runs 1 extra time at 17:30, how can I make last execution in a day at 17:00?</p>\n"},{"tags":["java","google-app-engine","google-cloud-platform"],"answers":[{"tags":[],"owner":{"account_id":15943715,"reputation":4766,"user_id":11504909,"display_name":"Chris32"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589577766,"creation_date":1589575863,"answer_id":61828125,"question_id":61827581,"body_markdown":"Runtime `java11` is not a supported runtime in App Engine Flexible. Instead you should use `runtime: java`\r\n\r\nHere you can see a sample [java app.yaml](https://github.com/GoogleCloudPlatform/java-docs-samples/blob/master/flexible/helloworld/src/main/appengine/app.yaml) and the [Java documentation for flex](https://cloud.google.com/appengine/docs/flexible/java)\r\n\r\nYou can use java11 if you deploy your application in [Standard environment](https://cloud.google.com/appengine/docs/standard/java11/runtime) which supports Java 11\r\n\r\nIf you are deploying to App engine standard you can select in the menu which version you want to deploy\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/DKMLo.png","title":"Google Cloud App Engine - Eclipse shows &quot;runtime: java 11&quot; in app.yaml is not Java","body":"<p>Runtime <code>java11</code> is not a supported runtime in App Engine Flexible. Instead you should use <code>runtime: java</code></p>\n\n<p>Here you can see a sample <a href=\"https://github.com/GoogleCloudPlatform/java-docs-samples/blob/master/flexible/helloworld/src/main/appengine/app.yaml\" rel=\"nofollow noreferrer\">java app.yaml</a> and the <a href=\"https://cloud.google.com/appengine/docs/flexible/java\" rel=\"nofollow noreferrer\">Java documentation for flex</a></p>\n\n<p>You can use java11 if you deploy your application in <a href=\"https://cloud.google.com/appengine/docs/standard/java11/runtime\" rel=\"nofollow noreferrer\">Standard environment</a> which supports Java 11</p>\n\n<p>If you are deploying to App engine standard you can select in the menu which version you want to deploy</p>\n\n<p><a href=\"https://i.stack.imgur.com/DKMLo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DKMLo.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":272852,"reputation":19440,"user_id":564157,"accept_rate":88,"display_name":"Joseph Lust"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1677847836,"creation_date":1677847836,"answer_id":75627306,"question_id":61827581,"body_markdown":"Sounds like you wanted to use Java 11 on GAE Flex, which wasn&#39;t supported when you wrote this question. However, that has changed.\r\n\r\nJava 11 and 17 are [now available in Google App Engine Flex][1] in preview.\r\n\r\nSimply add the following to the `runtime_config:` of your `app.yaml`.\r\n\r\n    runtime_config:\r\n        operating_system: &quot;ubuntu18&quot;\r\n        runtime_version: &quot;11&quot;\r\n\r\n\r\n  [1]: https://cloud.google.com/appengine/docs/flexible/java/runtime#newversions","title":"Google Cloud App Engine - Eclipse shows &quot;runtime: java 11&quot; in app.yaml is not Java","body":"<p>Sounds like you wanted to use Java 11 on GAE Flex, which wasn't supported when you wrote this question. However, that has changed.</p>\n<p>Java 11 and 17 are <a href=\"https://cloud.google.com/appengine/docs/flexible/java/runtime#newversions\" rel=\"nofollow noreferrer\">now available in Google App Engine Flex</a> in preview.</p>\n<p>Simply add the following to the <code>runtime_config:</code> of your <code>app.yaml</code>.</p>\n<pre><code>runtime_config:\n    operating_system: &quot;ubuntu18&quot;\n    runtime_version: &quot;11&quot;\n</code></pre>\n"}],"owner":{"account_id":5147279,"reputation":3527,"user_id":4122891,"accept_rate":41,"display_name":"Suren Konathala"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":817,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1677847836,"creation_date":1589573508,"question_id":61827581,"body_markdown":"Trying to deploy an external jar file to Google Cloud App Engine via Eclipse (via Google Cloud Tools plugin). \r\n\r\n**app.yaml**\r\n\r\n```\r\nruntime: java11\r\nentrypoint: &#39;java -jar cord.jar&#39;\r\n```\r\n\r\nOn Eclipse, shows `&quot;runtime: java 1&quot; in app.yaml is not &quot;java&quot;`\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JMUmF.png","title":"Google Cloud App Engine - Eclipse shows &quot;runtime: java 11&quot; in app.yaml is not Java","body":"<p>Trying to deploy an external jar file to Google Cloud App Engine via Eclipse (via Google Cloud Tools plugin). </p>\n\n<p><strong>app.yaml</strong></p>\n\n<pre><code>runtime: java11\nentrypoint: 'java -jar cord.jar'\n</code></pre>\n\n<p>On Eclipse, shows <code>\"runtime: java 1\" in app.yaml is not \"java\"</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/JMUmF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JMUmF.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","android","spring-boot","android-volley"],"owner":{"account_id":25960892,"reputation":26,"user_id":19677541,"display_name":"wittlemissginger"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677847672,"creation_date":1677847672,"question_id":75627276,"body_markdown":"I am trying to write a get request using the volley library for frontend and spring boot for backend. I&#39;ve tested the backend and it works just fine but the response on the volley is null, any ideas as to why this may be?\r\n\r\nheres my volley request:\r\n\r\n```\r\nRequestQueue queue = Volley.newRequestQueue(Lobby.this);\r\n        String url = &quot;http://10.0.2.2:8080/lobby/1&quot;;\r\n        JsonArrayRequest request = new JsonArrayRequest(Request.Method.GET, url, null,\r\n                new Response.Listener&lt;JSONArray&gt;() {\r\n                    @Override\r\n                    public void onResponse(JSONArray response) {\r\n                        gameLobby = response;\r\n                    }\r\n                },\r\n                new Response.ErrorListener() {\r\n                    @Override\r\n                    public void onErrorResponse(VolleyError error) {\r\n                        Toast.makeText(Lobby.this, &quot;ERROR: &quot; + error, Toast.LENGTH_SHORT);\r\n                    }\r\n                }\r\n            );\r\n        queue.add(request);RequestQueue queue = Volley.newRequestQueue(Lobby.this);\r\n        String url = &quot;http://10.0.2.2:8080/lobby/1&quot;;\r\n        JsonArrayRequest request = new JsonArrayRequest(Request.Method.GET, url, null,\r\n                new Response.Listener&lt;JSONArray&gt;() {\r\n                    @Override\r\n                    public void onResponse(JSONArray response) {\r\n                        gameLobby = response;\r\n                    }\r\n                },\r\n                new Response.ErrorListener() {\r\n                    @Override\r\n                    public void onErrorResponse(VolleyError error) {\r\n                        Toast.makeText(Lobby.this, &quot;ERROR: &quot; + error, Toast.LENGTH_SHORT);\r\n                    }\r\n                }\r\n            );\r\n        queue.add(request);\r\n```\r\n \r\nand my backend controller:\r\n\r\n```\r\n  @GetMapping(value = &quot;lobby/{id}&quot;, produces = &quot;application/json&quot;)\r\n    public ResponseEntity&lt;List&lt;GameLobby&gt;&gt; getLobbyByHost(@PathVariable(&quot;id&quot;) int hostID) {\r\n        return new ResponseEntity&lt;List&lt;GameLobby&gt;&gt;(gameLobbyRepository.findByHostID(hostID), HttpStatus.OK);\r\n    }\r\n```\r\n\r\n\r\nI am trying to get a JSONObject from the database to use somewhere else","title":"JsonArrayRequest returning null?","body":"<p>I am trying to write a get request using the volley library for frontend and spring boot for backend. I've tested the backend and it works just fine but the response on the volley is null, any ideas as to why this may be?</p>\n<p>heres my volley request:</p>\n<pre><code>RequestQueue queue = Volley.newRequestQueue(Lobby.this);\n        String url = &quot;http://10.0.2.2:8080/lobby/1&quot;;\n        JsonArrayRequest request = new JsonArrayRequest(Request.Method.GET, url, null,\n                new Response.Listener&lt;JSONArray&gt;() {\n                    @Override\n                    public void onResponse(JSONArray response) {\n                        gameLobby = response;\n                    }\n                },\n                new Response.ErrorListener() {\n                    @Override\n                    public void onErrorResponse(VolleyError error) {\n                        Toast.makeText(Lobby.this, &quot;ERROR: &quot; + error, Toast.LENGTH_SHORT);\n                    }\n                }\n            );\n        queue.add(request);RequestQueue queue = Volley.newRequestQueue(Lobby.this);\n        String url = &quot;http://10.0.2.2:8080/lobby/1&quot;;\n        JsonArrayRequest request = new JsonArrayRequest(Request.Method.GET, url, null,\n                new Response.Listener&lt;JSONArray&gt;() {\n                    @Override\n                    public void onResponse(JSONArray response) {\n                        gameLobby = response;\n                    }\n                },\n                new Response.ErrorListener() {\n                    @Override\n                    public void onErrorResponse(VolleyError error) {\n                        Toast.makeText(Lobby.this, &quot;ERROR: &quot; + error, Toast.LENGTH_SHORT);\n                    }\n                }\n            );\n        queue.add(request);\n</code></pre>\n<p>and my backend controller:</p>\n<pre><code>  @GetMapping(value = &quot;lobby/{id}&quot;, produces = &quot;application/json&quot;)\n    public ResponseEntity&lt;List&lt;GameLobby&gt;&gt; getLobbyByHost(@PathVariable(&quot;id&quot;) int hostID) {\n        return new ResponseEntity&lt;List&lt;GameLobby&gt;&gt;(gameLobbyRepository.findByHostID(hostID), HttpStatus.OK);\n    }\n</code></pre>\n<p>I am trying to get a JSONObject from the database to use somewhere else</p>\n"},{"tags":["java","amazon-ec2","aws-fargate"],"answers":[{"tags":[],"owner":{"account_id":99242,"reputation":2660,"user_id":268167,"display_name":"kdehairy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677847482,"creation_date":1677847482,"answer_id":75627239,"question_id":75558230,"body_markdown":"So, It turns out that Ec2Client is not getting the zone id from some metadata local endpoint, it is actually communicating (trying to) with the EC2 service endpoint. This means that for the request to go through, the VPC hosting my ECS cluster needs to have an endpoint for EC2 service (same as I did for ECR for example).\r\n\r\nDoing so, made the request pass and I get the zone id in return. No changes in the code itself was needed.","title":"In AWS, How to get the availability zone Id given a name from within a Fargate task","body":"<p>So, It turns out that Ec2Client is not getting the zone id from some metadata local endpoint, it is actually communicating (trying to) with the EC2 service endpoint. This means that for the request to go through, the VPC hosting my ECS cluster needs to have an endpoint for EC2 service (same as I did for ECR for example).</p>\n<p>Doing so, made the request pass and I get the zone id in return. No changes in the code itself was needed.</p>\n"}],"owner":{"account_id":99242,"reputation":2660,"user_id":268167,"display_name":"kdehairy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":206,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75627239,"answer_count":1,"score":1,"last_activity_date":1677847482,"creation_date":1677251649,"question_id":75558230,"body_markdown":"I&#39;m running a java service on ECS Fargate. In it, I need to get the availability zone ID that the task is running in. I did the following:\r\n\r\n```java\r\npublic static String getZoneId() {\r\n    final String METADATA_URL = System.getenv(&quot;ECS_CONTAINER_METADATA_URI_V4&quot;) + &quot;/task&quot;;\r\n    try {\r\n        final JsonObject jsonElement = getJsonInfo(METADATA_URL);\r\n        final String availabilityZone = jsonElement\r\n                .getAsJsonPrimitive(&quot;AvailabilityZone&quot;).getAsString();\r\n\r\n        try(Ec2Client ec2 = buildEc2Client()) {\r\n            return getAzIdFromName(ec2, availabilityZone);\r\n        }\r\n    } catch (IOException e) {\r\n        //...\r\n    }\r\n}\r\n\r\nprivate static JsonObject getJsonInfo(String url) throws IOException {\r\n    final String body;\r\n    try (final CloseableHttpClient client = HttpClients.createDefault()) {\r\n        HttpGet request = new HttpGet(url);\r\n        final HttpResponse response = client.execute(request);\r\n        try (final InputStream bodyStream = response.getEntity().getContent()) {\r\n            body = IOUtils.toString(bodyStream, StandardCharsets.UTF_8);\r\n        }\r\n    }\r\n    return JsonParser.parseString(body).getAsJsonObject();\r\n}\r\n\r\nprivate static Ec2Client buildEc2Client() throws IOException {\r\n    final String CREDENTIALS_URL = &quot;http://169.254.170.2&quot; + System.getenv(&quot;AWS_CONTAINER_CREDENTIALS_RELATIVE_URI&quot;);\r\n    final JsonObject body = getJsonInfo(CREDENTIALS_URL);\r\n    AwsRegionProvider regionProvider = new DefaultAwsRegionProviderChain();\r\n    AwsCredentialsProvider credentialsProvider = () -&gt; AwsSessionCredentials.create(\r\n            body.getAsJsonPrimitive(&quot;AccessKeyId&quot;).getAsString(),\r\n            body.getAsJsonPrimitive(&quot;SecretAccessKey&quot;).getAsString(),\r\n            body.getAsJsonPrimitive(&quot;Token&quot;).getAsString()\r\n    );\r\n    return Ec2Client.builder()\r\n            .credentialsProvider(credentialsProvider)\r\n            .region(regionProvider.getRegion())\r\n            .build();\r\n}\r\n\r\nprivate static String getAzIdFromName(Ec2Client ec2Client, String azName) {\r\n    DescribeAvailabilityZonesRequest request = DescribeAvailabilityZonesRequest.builder()\r\n            .zoneNames(azName)\r\n            .build();\r\n    final DescribeAvailabilityZonesResponse describeAvailabilityZonesResponse = ec2Client.describeAvailabilityZones(request);\r\n    return describeAvailabilityZonesResponse.availabilityZones().get(0).zoneId();\r\n}\r\n```\r\n\r\nRunning the above on successfully gets the availability zone name. But then when the `Ec2Client::describeAvailabilityZones` is called, I get:\r\n\r\n```\r\nsoftware.amazon.awssdk.core.exception.SdkClientException: Unable to execute HTTP request: Connect to ec2.eu-central-1.amazonaws.com:443 [ec2.eu-central-1.amazonaws.com/52.94.136.219] failed: Connect timed out\r\n...\r\nCaused by: java.net.SocketTimeoutException: Connect timed out\r\n```\r\n\r\nThe task is not connected to the internet. I&#39;d expect the endpoint to be accessable internally (not going out to the internet and in again). But I&#39;m not sure. I don&#39;t even know if this is the issue.\r\n\r\nHow do I get the zone Id given a name?","title":"In AWS, How to get the availability zone Id given a name from within a Fargate task","body":"<p>I'm running a java service on ECS Fargate. In it, I need to get the availability zone ID that the task is running in. I did the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static String getZoneId() {\n    final String METADATA_URL = System.getenv(&quot;ECS_CONTAINER_METADATA_URI_V4&quot;) + &quot;/task&quot;;\n    try {\n        final JsonObject jsonElement = getJsonInfo(METADATA_URL);\n        final String availabilityZone = jsonElement\n                .getAsJsonPrimitive(&quot;AvailabilityZone&quot;).getAsString();\n\n        try(Ec2Client ec2 = buildEc2Client()) {\n            return getAzIdFromName(ec2, availabilityZone);\n        }\n    } catch (IOException e) {\n        //...\n    }\n}\n\nprivate static JsonObject getJsonInfo(String url) throws IOException {\n    final String body;\n    try (final CloseableHttpClient client = HttpClients.createDefault()) {\n        HttpGet request = new HttpGet(url);\n        final HttpResponse response = client.execute(request);\n        try (final InputStream bodyStream = response.getEntity().getContent()) {\n            body = IOUtils.toString(bodyStream, StandardCharsets.UTF_8);\n        }\n    }\n    return JsonParser.parseString(body).getAsJsonObject();\n}\n\nprivate static Ec2Client buildEc2Client() throws IOException {\n    final String CREDENTIALS_URL = &quot;http://169.254.170.2&quot; + System.getenv(&quot;AWS_CONTAINER_CREDENTIALS_RELATIVE_URI&quot;);\n    final JsonObject body = getJsonInfo(CREDENTIALS_URL);\n    AwsRegionProvider regionProvider = new DefaultAwsRegionProviderChain();\n    AwsCredentialsProvider credentialsProvider = () -&gt; AwsSessionCredentials.create(\n            body.getAsJsonPrimitive(&quot;AccessKeyId&quot;).getAsString(),\n            body.getAsJsonPrimitive(&quot;SecretAccessKey&quot;).getAsString(),\n            body.getAsJsonPrimitive(&quot;Token&quot;).getAsString()\n    );\n    return Ec2Client.builder()\n            .credentialsProvider(credentialsProvider)\n            .region(regionProvider.getRegion())\n            .build();\n}\n\nprivate static String getAzIdFromName(Ec2Client ec2Client, String azName) {\n    DescribeAvailabilityZonesRequest request = DescribeAvailabilityZonesRequest.builder()\n            .zoneNames(azName)\n            .build();\n    final DescribeAvailabilityZonesResponse describeAvailabilityZonesResponse = ec2Client.describeAvailabilityZones(request);\n    return describeAvailabilityZonesResponse.availabilityZones().get(0).zoneId();\n}\n</code></pre>\n<p>Running the above on successfully gets the availability zone name. But then when the <code>Ec2Client::describeAvailabilityZones</code> is called, I get:</p>\n<pre><code>software.amazon.awssdk.core.exception.SdkClientException: Unable to execute HTTP request: Connect to ec2.eu-central-1.amazonaws.com:443 [ec2.eu-central-1.amazonaws.com/52.94.136.219] failed: Connect timed out\n...\nCaused by: java.net.SocketTimeoutException: Connect timed out\n</code></pre>\n<p>The task is not connected to the internet. I'd expect the endpoint to be accessable internally (not going out to the internet and in again). But I'm not sure. I don't even know if this is the issue.</p>\n<p>How do I get the zone Id given a name?</p>\n"},{"tags":["java","spring-boot","testing","graphql","mocking"],"answers":[{"tags":[],"owner":{"account_id":26482382,"reputation":239,"user_id":20121447,"display_name":"Julio C&#233;sar Estravis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677847155,"creation_date":1677847155,"answer_id":75627186,"question_id":75626164,"body_markdown":"I&#39;m not sure the `assertThat()` methods are appropiate while testing with **Spring for GraphQL** in this manner. I would suggest you replaced these last lines:\r\n\r\n    graphQlTester.documentName(&quot;top5users&quot;).execute()\r\n                .path(&quot;userPage&quot;)\r\n                .entity(UserPage.class)\r\n                .get();\r\n\r\n....with something in the style of this (since I don&#39;t know your schema):\r\n\r\n    this.graphQlTester\r\n\t\t\t\t.documentName(&quot;artistas_test1&quot;)\r\n\t\t\t\t.execute()\r\n\t\t\t\t.path(&quot;artistas&quot;)\r\n\t\t\t\t.entityList(Artista.class)\r\n\t\t\t\t.hasSize(3);\r\n\r\nThis is my `artistas_test1.graphql`\r\n\r\n    query {\r\n      artistas{\r\n          apellido\r\n      }\r\n    }\r\n\r\nThe idea is to evaluate in the graphQlTester itself. ","title":"Not able to mock out service in spring boot GraphQL","body":"<p>I'm not sure the <code>assertThat()</code> methods are appropiate while testing with <strong>Spring for GraphQL</strong> in this manner. I would suggest you replaced these last lines:</p>\n<pre><code>graphQlTester.documentName(&quot;top5users&quot;).execute()\n            .path(&quot;userPage&quot;)\n            .entity(UserPage.class)\n            .get();\n</code></pre>\n<p>....with something in the style of this (since I don't know your schema):</p>\n<pre><code>this.graphQlTester\n            .documentName(&quot;artistas_test1&quot;)\n            .execute()\n            .path(&quot;artistas&quot;)\n            .entityList(Artista.class)\n            .hasSize(3);\n</code></pre>\n<p>This is my <code>artistas_test1.graphql</code></p>\n<pre><code>query {\n  artistas{\n      apellido\n  }\n}\n</code></pre>\n<p>The idea is to evaluate in the graphQlTester itself.</p>\n"}],"owner":{"account_id":3519490,"reputation":167,"user_id":2942156,"accept_rate":50,"display_name":"steinarey"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":483,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677847155,"creation_date":1677840961,"question_id":75626164,"body_markdown":"I&#39;m using spring-boot-graphql and trying to mock out a service I have.\r\n\r\n```\r\n@Slf4j\r\n@Service\r\npublic class UserData extends BaseData {\r\n\r\n    ...\r\n\r\n    public Mono&lt;UserPage&gt; getUsers(UserContext context, NameFilter filter, Pageable pageable) {\r\n        var userTuple = filterByName(context, filter, pageable, User.class).as(trxOp::transactional);\r\n        return userTuple.flatMap(listPageInfoTuple -&gt; {\r\n            return Mono.just(new UserPage(listPageInfoTuple.x(), listPageInfoTuple.y()));\r\n        });\r\n    }\r\n}\r\n```\r\nIn my test I am doing:\r\n\r\n```\r\n@Slf4j\r\n@SpringBootTest\r\n@ActiveProfiles(&quot;local&quot;)\r\n@ExtendWith({SpringExtension.class})\r\n@ExtendWith(MockitoExtension.class)\r\n@AutoConfigureHttpGraphQlTester\r\npublic class UserTests {\r\n\r\n    @MockBean\r\n    private UserData userData;\r\n\r\n    @Test\r\n    @DisplayName(&quot;Get users&quot;)\r\n    public void testGetUsers() {\r\n        var clientBuilder =\r\n                WebTestClient.bindToServer()\r\n                        .baseUrl(&quot;http://localhost:8091/graphql&quot;);\r\n\r\n        HttpGraphQlTester graphQlTester = HttpGraphQlTester.builder(clientBuilder)\r\n                .headers(httpHeaders -&gt; httpHeaders.setBasicAuth(username, password))\r\n                .build();\r\n\r\n        var usersToReturn = List.of(\r\n                User.builder().name(&quot;Test User&quot;).build(),\r\n                User.builder().name(&quot;Test User 2&quot;).build()\r\n        );\r\n\r\n        var userPageToReturn = Flux.fromIterable(usersToReturn).collectList()\r\n                .flatMap(users -&gt; {\r\n                    var pageInfo = new PageInfo(1, 1, 1, 1, 1, true, true);\r\n                    return Mono.just(new UserPage(users, pageInfo));\r\n                });\r\n\r\n        given(userData.getUsers(any(), any(), any())).willReturn(userPageToReturn);\r\n\r\n        // top5users is a GraphQL request document.\r\n        var userPage = graphQlTester.documentName(&quot;top5users&quot;).execute()\r\n                .path(&quot;userPage&quot;)\r\n                .entity(UserPage.class)\r\n                .get();\r\n\r\n        var users = userPage.users();\r\n\r\n        assertThat(users).isNotNull();\r\n        assertThat(users.size()).isEqualTo(2);\r\n    }\r\n}\r\n```\r\nI have 5 users in the DB already and users includes all the actual DB users, not the given response. So it seems that I am not mocking the data service out. Looking at spring-boot-graphql examples don&#39;t seem to have what I need, or I haven&#39;t looked hard enough. Bit lost!","title":"Not able to mock out service in spring boot GraphQL","body":"<p>I'm using spring-boot-graphql and trying to mock out a service I have.</p>\n<pre><code>@Slf4j\n@Service\npublic class UserData extends BaseData {\n\n    ...\n\n    public Mono&lt;UserPage&gt; getUsers(UserContext context, NameFilter filter, Pageable pageable) {\n        var userTuple = filterByName(context, filter, pageable, User.class).as(trxOp::transactional);\n        return userTuple.flatMap(listPageInfoTuple -&gt; {\n            return Mono.just(new UserPage(listPageInfoTuple.x(), listPageInfoTuple.y()));\n        });\n    }\n}\n</code></pre>\n<p>In my test I am doing:</p>\n<pre><code>@Slf4j\n@SpringBootTest\n@ActiveProfiles(&quot;local&quot;)\n@ExtendWith({SpringExtension.class})\n@ExtendWith(MockitoExtension.class)\n@AutoConfigureHttpGraphQlTester\npublic class UserTests {\n\n    @MockBean\n    private UserData userData;\n\n    @Test\n    @DisplayName(&quot;Get users&quot;)\n    public void testGetUsers() {\n        var clientBuilder =\n                WebTestClient.bindToServer()\n                        .baseUrl(&quot;http://localhost:8091/graphql&quot;);\n\n        HttpGraphQlTester graphQlTester = HttpGraphQlTester.builder(clientBuilder)\n                .headers(httpHeaders -&gt; httpHeaders.setBasicAuth(username, password))\n                .build();\n\n        var usersToReturn = List.of(\n                User.builder().name(&quot;Test User&quot;).build(),\n                User.builder().name(&quot;Test User 2&quot;).build()\n        );\n\n        var userPageToReturn = Flux.fromIterable(usersToReturn).collectList()\n                .flatMap(users -&gt; {\n                    var pageInfo = new PageInfo(1, 1, 1, 1, 1, true, true);\n                    return Mono.just(new UserPage(users, pageInfo));\n                });\n\n        given(userData.getUsers(any(), any(), any())).willReturn(userPageToReturn);\n\n        // top5users is a GraphQL request document.\n        var userPage = graphQlTester.documentName(&quot;top5users&quot;).execute()\n                .path(&quot;userPage&quot;)\n                .entity(UserPage.class)\n                .get();\n\n        var users = userPage.users();\n\n        assertThat(users).isNotNull();\n        assertThat(users.size()).isEqualTo(2);\n    }\n}\n</code></pre>\n<p>I have 5 users in the DB already and users includes all the actual DB users, not the given response. So it seems that I am not mocking the data service out. Looking at spring-boot-graphql examples don't seem to have what I need, or I haven't looked hard enough. Bit lost!</p>\n"},{"tags":["java","netbeans"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1540868894,"post_id":53056801,"comment_id":93012748,"body_markdown":"I looks like the project had some dependencies on libraries stored in other directories.  If those libraries aren&#39;t part of your repository, the best would probably to just download them yourself.  Google will help you find them.","body":"I looks like the project had some dependencies on libraries stored in other directories.  If those libraries aren&#39;t part of your repository, the best would probably to just download them yourself.  Google will help you find them."},{"owner":{"account_id":1918963,"reputation":14508,"user_id":1730895,"display_name":"Kingsley"},"score":0,"creation_date":1540869013,"post_id":53056801,"comment_id":93012770,"body_markdown":"@markspace - I found and downloaded them OK, but I don&#39;t know how to get NetBeans to use them.","body":"@markspace - I found and downloaded them OK, but I don&#39;t know how to get NetBeans to use them."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1540869207,"post_id":53056801,"comment_id":93012812,"body_markdown":"That&#39;s actually a good question since this is a legacy app.  The best way would be to start by inspecting the build.xml file (or whatever build system you&#39;re using) and find these references there.  Figure out what the build system expects then decide how best to fit them into the legacy app.  If you can, consult with coworkers about the best way to proceed.","body":"That&#39;s actually a good question since this is a legacy app.  The best way would be to start by inspecting the build.xml file (or whatever build system you&#39;re using) and find these references there.  Figure out what the build system expects then decide how best to fit them into the legacy app.  If you can, consult with coworkers about the best way to proceed."}],"answers":[{"tags":[],"owner":{"account_id":1918963,"reputation":14508,"user_id":1730895,"display_name":"Kingsley"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1541727294,"creation_date":1541727294,"answer_id":53218590,"question_id":53056801,"body_markdown":"The problem is resolved by configuring NetBeans Libraries under `[Tools]`-&gt;`[Libraries]`.\r\n\r\nTo resolve say the `${libs.ApacheCommonsCLI.classpath}` dependency, I added a library named &quot;ApacheCommonsCLI&quot;, then for that entry added the JAR &quot;commons-cli-1.2.jar&quot; via the button `[Add JAR/Folder...]`.\r\n\r\nThe dependency starting with the test `${libs.` is an indicator that it is looking for it here.","title":"Netbeans build fails &quot;Not copying library&quot; /path/to/${libs.log4j.classpath} , it can&#39;t be read","body":"<p>The problem is resolved by configuring NetBeans Libraries under <code>[Tools]</code>-><code>[Libraries]</code>.</p>\n\n<p>To resolve say the <code>${libs.ApacheCommonsCLI.classpath}</code> dependency, I added a library named \"ApacheCommonsCLI\", then for that entry added the JAR \"commons-cli-1.2.jar\" via the button <code>[Add JAR/Folder...]</code>.</p>\n\n<p>The dependency starting with the test <code>${libs.</code> is an indicator that it is looking for it here.</p>\n"},{"tags":[],"owner":{"account_id":27927102,"reputation":11,"user_id":21325966,"display_name":"Mark"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677847120,"creation_date":1677847120,"answer_id":75627179,"question_id":53056801,"body_markdown":"Right-clicking the libraries folder -&gt; choosing the properties window -&gt; deleting the libraries that i deleted before, becuase i moved all of them in one library, helped me. \r\n","title":"Netbeans build fails &quot;Not copying library&quot; /path/to/${libs.log4j.classpath} , it can&#39;t be read","body":"<p>Right-clicking the libraries folder -&gt; choosing the properties window -&gt; deleting the libraries that i deleted before, becuase i moved all of them in one library, helped me.</p>\n"}],"owner":{"account_id":1918963,"reputation":14508,"user_id":1730895,"display_name":"Kingsley"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2780,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":53218590,"answer_count":2,"score":0,"last_activity_date":1677847120,"creation_date":1540868766,"question_id":53056801,"body_markdown":"I&#39;m using Netbeans IDE 8.2, trying to build a &quot;legacy application&quot; after some updates.\r\n\r\nThe compile is finishing ok, but then NetBeans is packaging up stuff in `dist/`, and encounters some missing library issues:\r\n\r\n    Copying 1 file to /path/to/Project/build\r\n    Not copying library /path/to/Project/${libs.log4j.classpath} , it can&#39;t be read.\r\n    Not copying library /path/to/Project/${libs.ApacheCommonsCLI.classpath} , it can&#39;t be read.\r\n    Not copying library /path/to/Project/${libs.BoneCP.classpath} , it can&#39;t be read.\r\n\r\nIt refused to copy some other libraries, but these had exact path in the error messages, so I could just put the .JARs where it wanted them.  I have already added some JARs to the source-tree under &quot;Libraries&quot;, and this helped the compile succeed. But it doesn&#39;t seem to use these for this operation.\r\n\r\nHow do I provide NetBeans these files?  Where does `${libs...` refer to?\r\n\r\nEDIT:  I found that text in a `subfolder/project.properties`:\r\n\r\n    libs.ApacheCommonsNet.classpath=../Apache/Commons/commons-net-1.4.1/commons-net-1.4.1.jar\r\n    ...\r\n    javac.classpath=\\\r\n        ${libs.ApacheCommonsNet.classpath}:\\\r\n        ${libs.log4j.classpath}:\\\r\n        ${libs.ApacheCommonsCLI.classpath}:\\\r\n        ${libs.MySQLDriver.classpath}:\\\r\n        ${libs.BoneCP.classpath}:\\\r\n        ...\r\n\r\nSo it&#39;s not complaining about `ApacheCommonsNet` because there is a hard-coded path further up in the properties.  Maybe I can add one for each missing library.\r\n","title":"Netbeans build fails &quot;Not copying library&quot; /path/to/${libs.log4j.classpath} , it can&#39;t be read","body":"<p>I'm using Netbeans IDE 8.2, trying to build a \"legacy application\" after some updates.</p>\n\n<p>The compile is finishing ok, but then NetBeans is packaging up stuff in <code>dist/</code>, and encounters some missing library issues:</p>\n\n<pre><code>Copying 1 file to /path/to/Project/build\nNot copying library /path/to/Project/${libs.log4j.classpath} , it can't be read.\nNot copying library /path/to/Project/${libs.ApacheCommonsCLI.classpath} , it can't be read.\nNot copying library /path/to/Project/${libs.BoneCP.classpath} , it can't be read.\n</code></pre>\n\n<p>It refused to copy some other libraries, but these had exact path in the error messages, so I could just put the .JARs where it wanted them.  I have already added some JARs to the source-tree under \"Libraries\", and this helped the compile succeed. But it doesn't seem to use these for this operation.</p>\n\n<p>How do I provide NetBeans these files?  Where does <code>${libs...</code> refer to?</p>\n\n<p>EDIT:  I found that text in a <code>subfolder/project.properties</code>:</p>\n\n<pre><code>libs.ApacheCommonsNet.classpath=../Apache/Commons/commons-net-1.4.1/commons-net-1.4.1.jar\n...\njavac.classpath=\\\n    ${libs.ApacheCommonsNet.classpath}:\\\n    ${libs.log4j.classpath}:\\\n    ${libs.ApacheCommonsCLI.classpath}:\\\n    ${libs.MySQLDriver.classpath}:\\\n    ${libs.BoneCP.classpath}:\\\n    ...\n</code></pre>\n\n<p>So it's not complaining about <code>ApacheCommonsNet</code> because there is a hard-coded path further up in the properties.  Maybe I can add one for each missing library.</p>\n"},{"tags":["java","jackson","jsonnode"],"answers":[{"tags":[],"owner":{"account_id":30898,"reputation":8917,"user_id":84538,"accept_rate":100,"display_name":"jon hanson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677846686,"creation_date":1677846686,"answer_id":75627110,"question_id":75626418,"body_markdown":"You need to recursively merge the child nodes if they are both ObjectNodes:\r\n\r\n    public static void deepMerge(ObjectNode lhsNode, ObjectNode rhsNode) {\r\n        rhsNode.fields().forEachRemaining(entry -&gt; {\r\n            final String key = entry.getKey();\r\n            final JsonNode rhsChildNode = entry.getValue();\r\n            if (rhsChildNode.isObject()) {\r\n                final JsonNode lhsChildNode = lhsNode.get(key);\r\n                if (lhsChildNode != null &amp;&amp; lhsChildNode.isObject()) {\r\n                    deepMerge((ObjectNode)lhsChildNode, (ObjectNode)rhsChildNode);\r\n                } else {\r\n                    lhsNode.put(key, rhsChildNode);\r\n                }\r\n            } else {\r\n                lhsNode.put(key, rhsChildNode);\r\n            }\r\n        });\r\n    }\r\n\r\n    private static final String jsonA = &quot;{\\n&quot; +\r\n            &quot;  \\&quot;segments\\&quot;: {\\n&quot; +\r\n            &quot;    \\&quot;A\\&quot;: {},\\n&quot; +\r\n            &quot;    \\&quot;B\\&quot;: {},\\n&quot; +\r\n            &quot;    \\&quot;C\\&quot;: {}\\n&quot; +\r\n            &quot;  },\\n&quot; +\r\n            &quot;  \\&quot;enabled\\&quot;: false,\\n&quot; +\r\n            &quot;  \\&quot;configStickyByClub\\&quot;: false,\\n&quot; +\r\n            &quot;  \\&quot;sinks\\&quot;: {}\\n&quot; +\r\n            &quot;}&quot;;\r\n\r\n    private static final String jsonB = &quot;{\\n&quot; +\r\n            &quot;  \\&quot;segments\\&quot;: {\\n&quot; +\r\n            &quot;    \\&quot;D\\&quot;: {},\\n&quot; +\r\n            &quot;    \\&quot;E\\&quot;: {},\\n&quot; +\r\n            &quot;    \\&quot;F\\&quot;: {}\\n&quot; +\r\n            &quot;  },\\n&quot; +\r\n            &quot;  \\&quot;enabled\\&quot;: false,\\n&quot; +\r\n            &quot;  \\&quot;configStickyByClub\\&quot;: false,\\n&quot; +\r\n            &quot;  \\&quot;sinks\\&quot;: {}\\n&quot; +\r\n            &quot;}&quot;;\r\n\r\n    public static void main(String[] args) throws IOException {\r\n\r\n        final ObjectMapper om = new ObjectMapper();\r\n\r\n        final ObjectNode nodeA = (ObjectNode)om.readTree(new StringReader(jsonA));\r\n        final ObjectNode nodeB = (ObjectNode)om.readTree(new StringReader(jsonB));\r\n\r\n        deepMerge(nodeA, nodeB);\r\n\r\n        System.out.println(nodeA.toPrettyString());\r\n    }\r\n\r\nOutput:\r\n\r\n```JSON\r\n{\r\n  &quot;segments&quot; : {\r\n    &quot;A&quot; : { },\r\n    &quot;B&quot; : { },\r\n    &quot;C&quot; : { },\r\n    &quot;D&quot; : { },\r\n    &quot;E&quot; : { },\r\n    &quot;F&quot; : { }\r\n  },\r\n  &quot;enabled&quot; : false,\r\n  &quot;configStickyByClub&quot; : false,\r\n  &quot;sinks&quot; : { }\r\n}\r\n```","title":"Append values from one JsonNode to another JsonNode field Java","body":"<p>You need to recursively merge the child nodes if they are both ObjectNodes:</p>\n<pre><code>public static void deepMerge(ObjectNode lhsNode, ObjectNode rhsNode) {\n    rhsNode.fields().forEachRemaining(entry -&gt; {\n        final String key = entry.getKey();\n        final JsonNode rhsChildNode = entry.getValue();\n        if (rhsChildNode.isObject()) {\n            final JsonNode lhsChildNode = lhsNode.get(key);\n            if (lhsChildNode != null &amp;&amp; lhsChildNode.isObject()) {\n                deepMerge((ObjectNode)lhsChildNode, (ObjectNode)rhsChildNode);\n            } else {\n                lhsNode.put(key, rhsChildNode);\n            }\n        } else {\n            lhsNode.put(key, rhsChildNode);\n        }\n    });\n}\n\nprivate static final String jsonA = &quot;{\\n&quot; +\n        &quot;  \\&quot;segments\\&quot;: {\\n&quot; +\n        &quot;    \\&quot;A\\&quot;: {},\\n&quot; +\n        &quot;    \\&quot;B\\&quot;: {},\\n&quot; +\n        &quot;    \\&quot;C\\&quot;: {}\\n&quot; +\n        &quot;  },\\n&quot; +\n        &quot;  \\&quot;enabled\\&quot;: false,\\n&quot; +\n        &quot;  \\&quot;configStickyByClub\\&quot;: false,\\n&quot; +\n        &quot;  \\&quot;sinks\\&quot;: {}\\n&quot; +\n        &quot;}&quot;;\n\nprivate static final String jsonB = &quot;{\\n&quot; +\n        &quot;  \\&quot;segments\\&quot;: {\\n&quot; +\n        &quot;    \\&quot;D\\&quot;: {},\\n&quot; +\n        &quot;    \\&quot;E\\&quot;: {},\\n&quot; +\n        &quot;    \\&quot;F\\&quot;: {}\\n&quot; +\n        &quot;  },\\n&quot; +\n        &quot;  \\&quot;enabled\\&quot;: false,\\n&quot; +\n        &quot;  \\&quot;configStickyByClub\\&quot;: false,\\n&quot; +\n        &quot;  \\&quot;sinks\\&quot;: {}\\n&quot; +\n        &quot;}&quot;;\n\npublic static void main(String[] args) throws IOException {\n\n    final ObjectMapper om = new ObjectMapper();\n\n    final ObjectNode nodeA = (ObjectNode)om.readTree(new StringReader(jsonA));\n    final ObjectNode nodeB = (ObjectNode)om.readTree(new StringReader(jsonB));\n\n    deepMerge(nodeA, nodeB);\n\n    System.out.println(nodeA.toPrettyString());\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>{\n  &quot;segments&quot; : {\n    &quot;A&quot; : { },\n    &quot;B&quot; : { },\n    &quot;C&quot; : { },\n    &quot;D&quot; : { },\n    &quot;E&quot; : { },\n    &quot;F&quot; : { }\n  },\n  &quot;enabled&quot; : false,\n  &quot;configStickyByClub&quot; : false,\n  &quot;sinks&quot; : { }\n}\n</code></pre>\n"}],"owner":{"account_id":16214104,"reputation":481,"user_id":11707306,"display_name":"Maria1995"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1677846686,"creation_date":1677842347,"question_id":75626418,"body_markdown":"I have two JsonNode objects, A and B, which both contain an identical field, &quot;segments&quot;. I need to take the content from JsonNode object A and append it to the content from B. I need both the values from A and B in the final object.\r\n\r\nMy code right now takes the right content from A, but it replaces everything from B. Can anyone help me with a solution? In the end, I need to obtain an object like C, as you can see below.\r\n\r\n```\r\npublic static JsonNode merge(JsonNode mainNode, JsonNode updateNode) {\r\n\r\n        JsonNode segmentedConfigs = updateNode.get(&quot;segments&quot;);\r\n        ((ObjectNode) mainNode).put(&quot;segments&quot;, segmentedConfigs);\r\n        return mainNode;\r\n    }\r\n```\r\nJsonNode A:\r\n```\r\n{\r\n  &quot;segments&quot;: {\r\n    &quot;A&quot;: {},\r\n    &quot;B&quot;: {},\r\n    &quot;C&quot;: {}\r\n  },\r\n  &quot;enabled&quot;: false,\r\n  &quot;configStickyByClub&quot;: false,\r\n  &quot;sinks&quot;: {}\r\n}\r\n```\r\nJsonNode B:\r\n```\r\n{\r\n  &quot;segments&quot;: {\r\n    &quot;D&quot;: {},\r\n    &quot;E&quot;: {},\r\n    &quot;F&quot;: {}\r\n  },\r\n  &quot;enabled&quot;: false,\r\n  &quot;configStickyByClub&quot;: false,\r\n  &quot;sinks&quot;: {}\r\n}\r\n```\r\n\r\nJsonNode C:\r\n```\r\n{\r\n  &quot;segments&quot;: {\r\n    &quot;A&quot;: {},\r\n    &quot;B&quot;: {},\r\n    &quot;C&quot;: {},\r\n    &quot;D&quot;: {},\r\n    &quot;E&quot;: {},\r\n    &quot;F&quot;: {}\r\n  },\r\n  &quot;enabled&quot;: false,\r\n  &quot;configStickyByClub&quot;: false,\r\n  &quot;sinks&quot;: {}\r\n}\r\n```","title":"Append values from one JsonNode to another JsonNode field Java","body":"<p>I have two JsonNode objects, A and B, which both contain an identical field, &quot;segments&quot;. I need to take the content from JsonNode object A and append it to the content from B. I need both the values from A and B in the final object.</p>\n<p>My code right now takes the right content from A, but it replaces everything from B. Can anyone help me with a solution? In the end, I need to obtain an object like C, as you can see below.</p>\n<pre><code>public static JsonNode merge(JsonNode mainNode, JsonNode updateNode) {\n\n        JsonNode segmentedConfigs = updateNode.get(&quot;segments&quot;);\n        ((ObjectNode) mainNode).put(&quot;segments&quot;, segmentedConfigs);\n        return mainNode;\n    }\n</code></pre>\n<p>JsonNode A:</p>\n<pre><code>{\n  &quot;segments&quot;: {\n    &quot;A&quot;: {},\n    &quot;B&quot;: {},\n    &quot;C&quot;: {}\n  },\n  &quot;enabled&quot;: false,\n  &quot;configStickyByClub&quot;: false,\n  &quot;sinks&quot;: {}\n}\n</code></pre>\n<p>JsonNode B:</p>\n<pre><code>{\n  &quot;segments&quot;: {\n    &quot;D&quot;: {},\n    &quot;E&quot;: {},\n    &quot;F&quot;: {}\n  },\n  &quot;enabled&quot;: false,\n  &quot;configStickyByClub&quot;: false,\n  &quot;sinks&quot;: {}\n}\n</code></pre>\n<p>JsonNode C:</p>\n<pre><code>{\n  &quot;segments&quot;: {\n    &quot;A&quot;: {},\n    &quot;B&quot;: {},\n    &quot;C&quot;: {},\n    &quot;D&quot;: {},\n    &quot;E&quot;: {},\n    &quot;F&quot;: {}\n  },\n  &quot;enabled&quot;: false,\n  &quot;configStickyByClub&quot;: false,\n  &quot;sinks&quot;: {}\n}\n</code></pre>\n"},{"tags":["java","mongodb","spring-boot","aggregation","mongotemplate"],"answers":[{"tags":[],"owner":{"account_id":17092302,"reputation":9084,"user_id":12368154,"display_name":"Charchit Kapoor"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677846175,"creation_date":1677835322,"answer_id":75625232,"question_id":75624398,"body_markdown":"You can use a query rather than aggregation, to get the max priority setting for a type. Try this:\r\n\r\n    Query query = new Query().addCriteria(Criteria.where(&quot;type&quot;).is(setting.getType()))\r\n                             .with(new Sort(Sort.Direction.DESC, &quot;priority&quot;))\r\n                             .limit(1);\r\n    Setting setting = mongoTemplate.findOne(query, Setting.class);\r\n    if (!ObjectUtils.isEmpty(setting)) {\r\n        baseConfig.setPriority(setting.getPriority() + 1);\r\n    } else {\r\n        baseConfig.setPriority(1);\r\n    }","title":"How do I ascribe the correct priority to new objects in Spring Boot?","body":"<p>You can use a query rather than aggregation, to get the max priority setting for a type. Try this:</p>\n<pre><code>Query query = new Query().addCriteria(Criteria.where(&quot;type&quot;).is(setting.getType()))\n                         .with(new Sort(Sort.Direction.DESC, &quot;priority&quot;))\n                         .limit(1);\nSetting setting = mongoTemplate.findOne(query, Setting.class);\nif (!ObjectUtils.isEmpty(setting)) {\n    baseConfig.setPriority(setting.getPriority() + 1);\n} else {\n    baseConfig.setPriority(1);\n}\n</code></pre>\n"}],"owner":{"account_id":13216928,"reputation":1467,"user_id":9545125,"display_name":"TheStranger"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75625232,"answer_count":1,"score":0,"last_activity_date":1677846175,"creation_date":1677829562,"question_id":75624398,"body_markdown":"I have the following class in my Spring Boot application:\r\n\r\n    @Document(collection = &quot;setting&quot;)\r\n    public class Setting {\r\n        private @MongoId(FieldType.OBJECT_ID)\r\n        ObjectId id;\r\n        private String name;\r\n        private String type;\r\n        private Integer priority;\r\n    }\r\n\r\nI have a REST POST endpoint where I get a Setting object sent with name and type, but no priority, then I have to put it into my MongoDB. But I have to put it into the MongoDB with the correct priority.\r\n\r\nSo number 1 is highest priority, and priories are unique for each type, so can&#39;t have 2 settings with same priority within the same type. New settings get lowest priority, meaning if I have 3 settings prioritized from 1-3 then a new setting would get priority 4 and by extension if there are no settings then a new setting would get priority 1.\r\n\r\nThis is how I solve it right now:\r\n\r\n    Aggregation priorityAggregation = Aggregation.newAggregation(\r\n        Aggregation.match(where(&quot;type&quot;).is(setting.getType)))\r\n        Aggregation.group().max(&quot;priority&quot;).as(&quot;priority&quot;),\r\n        Aggregation.project(&quot;priority&quot;).andExclude(&quot;_id&quot;)\r\n    );\r\n\r\n    Map&lt;String, Integer&gt; maxPriority = mongo.aggregate(priorityAggregation, &quot;setting&quot;, HashMap.class).getUniqueMappedResult();\r\n\r\n    if (maxPriority != null &amp;&amp; maxPriority.containsKey(&quot;priority&quot;) &amp;&amp; maxPriority.get(&quot;priority&quot;) != null) {\r\n        baseConfig.setPriority(maxPriority.get(&quot;priority&quot;) + 1);\r\n    } else {\r\n        baseConfig.setPriority(1);\r\n    }\r\n\r\n    MongoTemplate.save(setting);\r\n\r\nThis does the job, but it doesn&#39;t look very nice. Are there any better way of doing this?","title":"How do I ascribe the correct priority to new objects in Spring Boot?","body":"<p>I have the following class in my Spring Boot application:</p>\n<pre><code>@Document(collection = &quot;setting&quot;)\npublic class Setting {\n    private @MongoId(FieldType.OBJECT_ID)\n    ObjectId id;\n    private String name;\n    private String type;\n    private Integer priority;\n}\n</code></pre>\n<p>I have a REST POST endpoint where I get a Setting object sent with name and type, but no priority, then I have to put it into my MongoDB. But I have to put it into the MongoDB with the correct priority.</p>\n<p>So number 1 is highest priority, and priories are unique for each type, so can't have 2 settings with same priority within the same type. New settings get lowest priority, meaning if I have 3 settings prioritized from 1-3 then a new setting would get priority 4 and by extension if there are no settings then a new setting would get priority 1.</p>\n<p>This is how I solve it right now:</p>\n<pre><code>Aggregation priorityAggregation = Aggregation.newAggregation(\n    Aggregation.match(where(&quot;type&quot;).is(setting.getType)))\n    Aggregation.group().max(&quot;priority&quot;).as(&quot;priority&quot;),\n    Aggregation.project(&quot;priority&quot;).andExclude(&quot;_id&quot;)\n);\n\nMap&lt;String, Integer&gt; maxPriority = mongo.aggregate(priorityAggregation, &quot;setting&quot;, HashMap.class).getUniqueMappedResult();\n\nif (maxPriority != null &amp;&amp; maxPriority.containsKey(&quot;priority&quot;) &amp;&amp; maxPriority.get(&quot;priority&quot;) != null) {\n    baseConfig.setPriority(maxPriority.get(&quot;priority&quot;) + 1);\n} else {\n    baseConfig.setPriority(1);\n}\n\nMongoTemplate.save(setting);\n</code></pre>\n<p>This does the job, but it doesn't look very nice. Are there any better way of doing this?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9389,"page":603,"page_size":100}
